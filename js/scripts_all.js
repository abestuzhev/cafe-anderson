// document.body.onload = function(){
//     setTimeout(function(){
//         var preloader = document.getElementById('page-preloader');
//         if(!preloader.classList.contains('done')){
//             preloader.classList.add('done');
//         }
//     }, 1000);
// };

/*новый прелоудер*/
document.body.onload = function(){

    if(document.body.classList.contains('is-content-hidden')){
        document.body.classList.add('visible');
    }

    document.body.classList.add('onloadContent');

};



// функция подключения всех скриптов
// function dynamicallyLoadScript() {

//     var script,
//         listScripts = document.getElementById('listScripts'),
//         src = [
//             // 'https://api-maps.yandex.ru/2.1/?lang=ru_RU',
//             './js/custom-map.js',
//             './bower_components/jquery-mask-plugin/dist/jquery.mask.js',
//             './js/jscrollpane/jquery.mousewheel.js',
//             './js/jscrollpane/jquery.jscrollpane.min.js',
//             // 'https://abestuzhev.github.io/cafe-anderson/bower_components/tooltipster/dist/js/tooltipster.bundle.js',
//             './js/simplebar.js',
//             './js/owlcarousel/owl.carousel.js',
//             './bower_components/sumoselect/jquery.sumoselect.js',
//             './bower_components/fotorama/fotorama.js'
//         ];

//     for(var i = 0; i < src.length; i++){
//         script = document.createElement("script");
//         script.src = src[i];
//         listScripts.appendChild(script);
//     }  
// };

//   dynamicallyLoadScript();

/**
 * tooltipster http://iamceege.github.io/tooltipster/
 * A rockin' custom tooltip jQuery plugin
 * Developed by Caleb Jacob and Louis Ameline
 * MIT license
 */
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module unless amdModuleId is set
    define(["jquery"], function (a0) {
      return (factory(a0));
    });
  } else if (typeof exports === 'object') {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory(require("jquery"));
  } else {
    factory(jQuery);
  }
}(this, function ($) {

// This file will be UMDified by a build task.

var defaults = {
		animation: 'fade',
		animationDuration: 350,
		content: null,
		contentAsHTML: false,
		contentCloning: false,
		debug: true,
		delay: 300,
		delayTouch: [300, 500],
		functionInit: null,
		functionBefore: null,
		functionReady: null,
		functionAfter: null,
		functionFormat: null,
		IEmin: 6,
		interactive: false,
		multiple: false,
		// will default to document.body, or must be an element positioned at (0, 0)
		// in the document, typically like the very top views of an app.
		parent: null,
		plugins: ['sideTip'],
		repositionOnScroll: false,
		restoration: 'none',
		selfDestruction: true,
		theme: [],
		timer: 0,
		trackerInterval: 500,
		trackOrigin: false,
		trackTooltip: false,
		trigger: 'hover',
		triggerClose: {
			click: false,
			mouseleave: false,
			originClick: false,
			scroll: false,
			tap: false,
			touchleave: false
		},
		triggerOpen: {
			click: false,
			mouseenter: false,
			tap: false,
			touchstart: false
		},
		updateAnimation: 'rotate',
		zIndex: 9999999
	},
	// we'll avoid using the 'window' global as a good practice but npm's
	// jquery@<2.1.0 package actually requires a 'window' global, so not sure
	// it's useful at all
	win = (typeof window != 'undefined') ? window : null,
	// env will be proxied by the core for plugins to have access its properties
	env = {
		// detect if this device can trigger touch events. Better have a false
		// positive (unused listeners, that's ok) than a false negative.
		// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js
		// http://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript
		hasTouchCapability: !!(
			win
			&&	(	'ontouchstart' in win
				||	(win.DocumentTouch && win.document instanceof win.DocumentTouch)
				||	win.navigator.maxTouchPoints
			)
		),
		hasTransitions: transitionSupport(),
		IE: false,
		// don't set manually, it will be updated by a build task after the manifest
		semVer: '4.2.5',
		window: win
	},
	core = function() {
		
		// core variables
		
		// the core emitters
		this.__$emitterPrivate = $({});
		this.__$emitterPublic = $({});
		this.__instancesLatestArr = [];
		// collects plugin constructors
		this.__plugins = {};
		// proxy env variables for plugins who might use them
		this._env = env;
	};

// core methods
core.prototype = {
	
	/**
	 * A function to proxy the public methods of an object onto another
	 *
	 * @param {object} constructor The constructor to bridge
	 * @param {object} obj The object that will get new methods (an instance or the core)
	 * @param {string} pluginName A plugin name for the console log message
	 * @return {core}
	 * @private
	 */
	__bridge: function(constructor, obj, pluginName) {
		
		// if it's not already bridged
		if (!obj[pluginName]) {
			
			var fn = function() {};
			fn.prototype = constructor;
			
			var pluginInstance = new fn();
			
			// the _init method has to exist in instance constructors but might be missing
			// in core constructors
			if (pluginInstance.__init) {
				pluginInstance.__init(obj);
			}
			
			$.each(constructor, function(methodName, fn) {
				
				// don't proxy "private" methods, only "protected" and public ones
				if (methodName.indexOf('__') != 0) {
					
					// if the method does not exist yet
					if (!obj[methodName]) {
						
						obj[methodName] = function() {
							return pluginInstance[methodName].apply(pluginInstance, Array.prototype.slice.apply(arguments));
						};
						
						// remember to which plugin this method corresponds (several plugins may
						// have methods of the same name, we need to be sure)
						obj[methodName].bridged = pluginInstance;
					}
					else if (defaults.debug) {
						
						console.log('The '+ methodName +' method of the '+ pluginName
							+' plugin conflicts with another plugin or native methods');
					}
				}
			});
			
			obj[pluginName] = pluginInstance;
		}
		
		return this;
	},
	
	/**
	 * For mockup in Node env if need be, for testing purposes
	 *
	 * @return {core}
	 * @private
	 */
	__setWindow: function(window) {
		env.window = window;
		return this;
	},
	
	/**
	 * Returns a ruler, a tool to help measure the size of a tooltip under
	 * various settings. Meant for plugins
	 * 
	 * @see Ruler
	 * @return {object} A Ruler instance
	 * @protected
	 */
	_getRuler: function($tooltip) {
		return new Ruler($tooltip);
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_off: function() {
		this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_on: function() {
		this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_one: function() {
		this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Returns (getter) or adds (setter) a plugin
	 *
	 * @param {string|object} plugin Provide a string (in the full form
	 * "namespace.name") to use as as getter, an object to use as a setter
	 * @return {object|core}
	 * @protected
	 */
	_plugin: function(plugin) {
		
		var self = this;
		
		// getter
		if (typeof plugin == 'string') {
			
			var pluginName = plugin,
				p = null;
			
			// if the namespace is provided, it's easy to search
			if (pluginName.indexOf('.') > 0) {
				p = self.__plugins[pluginName];
			}
			// otherwise, return the first name that matches
			else {
				$.each(self.__plugins, function(i, plugin) {
					
					if (plugin.name.substring(plugin.name.length - pluginName.length - 1) == '.'+ pluginName) {
						p = plugin;
						return false;
					}
				});
			}
			
			return p;
		}
		// setter
		else {
			
			// force namespaces
			if (plugin.name.indexOf('.') < 0) {
				throw new Error('Plugins must be namespaced');
			}
			
			self.__plugins[plugin.name] = plugin;
			
			// if the plugin has core features
			if (plugin.core) {
				
				// bridge non-private methods onto the core to allow new core methods
				self.__bridge(plugin.core, self, plugin.name);
			}
			
			return this;
		}
	},
	
	/**
	 * Trigger events on the core emitters
	 * 
	 * @returns {core}
	 * @protected
	 */
	_trigger: function() {
		
		var args = Array.prototype.slice.apply(arguments);
		
		if (typeof args[0] == 'string') {
			args[0] = { type: args[0] };
		}
		
		// note: the order of emitters matters
		this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, args);
		this.__$emitterPublic.trigger.apply(this.__$emitterPublic, args);
		
		return this;
	},
	
	/**
	 * Returns instances of all tooltips in the page or an a given element
	 *
	 * @param {string|HTML object collection} selector optional Use this
	 * parameter to restrict the set of objects that will be inspected
	 * for the retrieval of instances. By default, all instances in the
	 * page are returned.
	 * @return {array} An array of instance objects
	 * @public
	 */
	instances: function(selector) {
		
		var instances = [],
			sel = selector || '.tooltipstered';
		
		$(sel).each(function() {
			
			var $this = $(this),
				ns = $this.data('tooltipster-ns');
			
			if (ns) {
				
				$.each(ns, function(i, namespace) {
					instances.push($this.data(namespace));
				});
			}
		});
		
		return instances;
	},
	
	/**
	 * Returns the Tooltipster objects generated by the last initializing call
	 *
	 * @return {array} An array of instance objects
	 * @public
	 */
	instancesLatest: function() {
		return this.__instancesLatestArr;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_off() instead)
	 *
	 * @return {core}
	 * @public
	 */
	off: function() {
		this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_on() instead)
	 *
	 * @return {core}
	 * @public
	 */
	on: function() {
		this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_one() instead)
	 * 
	 * @return {core}
	 * @public
	 */
	one: function() {
		this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Returns all HTML elements which have one or more tooltips
	 *
	 * @param {string} selector optional Use this to restrict the results
	 * to the descendants of an element
	 * @return {array} An array of HTML elements
	 * @public
	 */
	origins: function(selector) {
		
		var sel = selector ?
			selector +' ' :
			'';
		
		return $(sel +'.tooltipstered').toArray();
	},
	
	/**
	 * Change default options for all future instances
	 *
	 * @param {object} d The options that should be made defaults
	 * @return {core}
	 * @public
	 */
	setDefaults: function(d) {
		$.extend(defaults, d);
		return this;
	},
	
	/**
	 * For users to trigger their handlers on the public emitter
	 * 
	 * @returns {core}
	 * @public
	 */
	triggerHandler: function() {
		this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	}
};

// $.tooltipster will be used to call core methods
$.tooltipster = new core();

// the Tooltipster instance class (mind the capital T)
$.Tooltipster = function(element, options) {
	
	// list of instance variables
	
	// stack of custom callbacks provided as parameters to API methods
	this.__callbacks = {
		close: [],
		open: []
	};
	// the schedule time of DOM removal
	this.__closingTime;
	// this will be the user content shown in the tooltip. A capital "C" is used
	// because there is also a method called content()
	this.__Content;
	// for the size tracker
	this.__contentBcr;
	// to disable the tooltip after destruction
	this.__destroyed = false;
	// we can't emit directly on the instance because if a method with the same
	// name as the event exists, it will be called by jQuery. Se we use a plain
	// object as emitter. This emitter is for internal use by plugins,
	// if needed.
	this.__$emitterPrivate = $({});
	// this emitter is for the user to listen to events without risking to mess
	// with our internal listeners
	this.__$emitterPublic = $({});
	this.__enabled = true;
	// the reference to the gc interval
	this.__garbageCollector;
	// various position and size data recomputed before each repositioning
	this.__Geometry;
	// the tooltip position, saved after each repositioning by a plugin
	this.__lastPosition;
	// a unique namespace per instance
	this.__namespace = 'tooltipster-'+ Math.round(Math.random()*1000000);
	this.__options;
	// will be used to support origins in scrollable areas
	this.__$originParents;
	this.__pointerIsOverOrigin = false;
	// to remove themes if needed
	this.__previousThemes = [];
	// the state can be either: appearing, stable, disappearing, closed
	this.__state = 'closed';
	// timeout references
	this.__timeouts = {
		close: [],
		open: null
	};
	// store touch events to be able to detect emulated mouse events
	this.__touchEvents = [];
	// the reference to the tracker interval
	this.__tracker = null;
	// the element to which this tooltip is associated
	this._$origin;
	// this will be the tooltip element (jQuery wrapped HTML element).
	// It's the job of a plugin to create it and append it to the DOM
	this._$tooltip;
	
	// launch
	this.__init(element, options);
};

$.Tooltipster.prototype = {
	
	/**
	 * @param origin
	 * @param options
	 * @private
	 */
	__init: function(origin, options) {
		
		var self = this;
		
		self._$origin = $(origin);
		self.__options = $.extend(true, {}, defaults, options);
		
		// some options may need to be reformatted
		self.__optionsFormat();
		
		// don't run on old IE if asked no to
		if (	!env.IE
			||	env.IE >= self.__options.IEmin
		) {
			
			// note: the content is null (empty) by default and can stay that
			// way if the plugin remains initialized but not fed any content. The
			// tooltip will just not appear.
			
			// let's save the initial value of the title attribute for later
			// restoration if need be.
			var initialTitle = null;
			
			// it will already have been saved in case of multiple tooltips
			if (self._$origin.data('tooltipster-initialTitle') === undefined) {
				
				initialTitle = self._$origin.attr('title');
				
				// we do not want initialTitle to be "undefined" because
				// of how jQuery's .data() method works
				if (initialTitle === undefined) initialTitle = null;
				
				self._$origin.data('tooltipster-initialTitle', initialTitle);
			}
			
			// If content is provided in the options, it has precedence over the
			// title attribute.
			// Note: an empty string is considered content, only 'null' represents
			// the absence of content.
			// Also, an existing title="" attribute will result in an empty string
			// content
			if (self.__options.content !== null) {
				self.__contentSet(self.__options.content);
			}
			else {
				
				var selector = self._$origin.attr('data-tooltip-content'),
					$el;
				
				if (selector){
					$el = $(selector);
				}
				
				if ($el && $el[0]) {
					self.__contentSet($el.first());
				}
				else {
					self.__contentSet(initialTitle);
				}
			}
			
			self._$origin
				// strip the title off of the element to prevent the default tooltips
				// from popping up
				.removeAttr('title')
				// to be able to find all instances on the page later (upon window
				// events in particular)
				.addClass('tooltipstered');
			
			// set listeners on the origin
			self.__prepareOrigin();
			
			// set the garbage collector
			self.__prepareGC();
			
			// init plugins
			$.each(self.__options.plugins, function(i, pluginName) {
				self._plug(pluginName);
			});
			
			// to detect swiping
			if (env.hasTouchCapability) {
				$(env.window.document.body).on('touchmove.'+ self.__namespace +'-triggerOpen', function(event) {
					self._touchRecordEvent(event);
				});
			}
			
			self
				// prepare the tooltip when it gets created. This event must
				// be fired by a plugin
				._on('created', function() {
					self.__prepareTooltip();
				})
				// save position information when it's sent by a plugin
				._on('repositioned', function(e) {
					self.__lastPosition = e.position;
				});
		}
		else {
			self.__options.disabled = true;
		}
	},
	
	/**
	 * Insert the content into the appropriate HTML element of the tooltip
	 * 
	 * @returns {self}
	 * @private
	 */
	__contentInsert: function() {
		
		var self = this,
			$el = self._$tooltip.find('.tooltipster-content'),
			formattedContent = self.__Content,
			format = function(content) {
				formattedContent = content;
			};
		
		self._trigger({
			type: 'format',
			content: self.__Content,
			format: format
		});
		
		if (self.__options.functionFormat) {
			
			formattedContent = self.__options.functionFormat.call(
				self,
				self,
				{ origin: self._$origin[0] },
				self.__Content
			);
		}
		
		if (typeof formattedContent === 'string' && !self.__options.contentAsHTML) {
			$el.text(formattedContent);
		}
		else {
			$el
				.empty()
				.append(formattedContent);
		}
		
		return self;
	},
	
	/**
	 * Save the content, cloning it beforehand if need be
	 * 
	 * @param content
	 * @returns {self}
	 * @private
	 */
	__contentSet: function(content) {
		
		// clone if asked. Cloning the object makes sure that each instance has its
		// own version of the content (in case a same object were provided for several
		// instances)
		// reminder: typeof null === object
		if (content instanceof $ && this.__options.contentCloning) {
			content = content.clone(true);
		}
		
		this.__Content = content;
		
		this._trigger({
			type: 'updated',
			content: content
		});
		
		return this;
	},
	
	/**
	 * Error message about a method call made after destruction
	 * 
	 * @private
	 */
	__destroyError: function() {
		throw new Error('This tooltip has been destroyed and cannot execute your method call.');
	},
	
	/**
	 * Gather all information about dimensions and available space,
	 * called before every repositioning
	 * 
	 * @private
	 * @returns {object}
	 */
	__geometry: function() {
		
		var	self = this,
			$target = self._$origin,
			originIsArea = self._$origin.is('area');
		
		// if this._$origin is a map area, the target we'll need
		// the dimensions of is actually the image using the map,
		// not the area itself
		if (originIsArea) {
			
			var mapName = self._$origin.parent().attr('name');
			
			$target = $('img[usemap="#'+ mapName +'"]');
		}
		
		var bcr = $target[0].getBoundingClientRect(),
			$document = $(env.window.document),
			$window = $(env.window),
			$parent = $target,
			// some useful properties of important elements
			geo = {
				// available space for the tooltip, see down below
				available: {
					document: null,
					window: null
				},
				document: {
					size: {
						height: $document.height(),
						width: $document.width()
					}
				},
				window: {
					scroll: {
						// the second ones are for IE compatibility
						left: env.window.scrollX || env.window.document.documentElement.scrollLeft,
						top: env.window.scrollY || env.window.document.documentElement.scrollTop
					},
					size: {
						height: $window.height(),
						width: $window.width()
					}
				},
				origin: {
					// the origin has a fixed lineage if itself or one of its
					// ancestors has a fixed position
					fixedLineage: false,
					// relative to the document
					offset: {},
					size: {
						height: bcr.bottom - bcr.top,
						width: bcr.right - bcr.left
					},
					usemapImage: originIsArea ? $target[0] : null,
					// relative to the window
					windowOffset: {
						bottom: bcr.bottom,
						left: bcr.left,
						right: bcr.right,
						top: bcr.top
					}
				}
			},
			geoFixed = false;
		
		// if the element is a map area, some properties may need
		// to be recalculated
		if (originIsArea) {
			
			var shape = self._$origin.attr('shape'),
				coords = self._$origin.attr('coords');
			
			if (coords) {
				
				coords = coords.split(',');
				
				$.map(coords, function(val, i) {
					coords[i] = parseInt(val);
				});
			}
			
			// if the image itself is the area, nothing more to do
			if (shape != 'default') {
				
				switch(shape) {
					
					case 'circle':
						
						var circleCenterLeft = coords[0],
							circleCenterTop = coords[1],
							circleRadius = coords[2],
							areaTopOffset = circleCenterTop - circleRadius,
							areaLeftOffset = circleCenterLeft - circleRadius;
						
						geo.origin.size.height = circleRadius * 2;
						geo.origin.size.width = geo.origin.size.height;
						
						geo.origin.windowOffset.left += areaLeftOffset;
						geo.origin.windowOffset.top += areaTopOffset;
						
						break;
					
					case 'rect':
						
						var areaLeft = coords[0],
							areaTop = coords[1],
							areaRight = coords[2],
							areaBottom = coords[3];
						
						geo.origin.size.height = areaBottom - areaTop;
						geo.origin.size.width = areaRight - areaLeft;
						
						geo.origin.windowOffset.left += areaLeft;
						geo.origin.windowOffset.top += areaTop;
						
						break;
					
					case 'poly':
						
						var areaSmallestX = 0,
							areaSmallestY = 0,
							areaGreatestX = 0,
							areaGreatestY = 0,
							arrayAlternate = 'even';
						
						for (var i = 0; i < coords.length; i++) {
							
							var areaNumber = coords[i];
							
							if (arrayAlternate == 'even') {
								
								if (areaNumber > areaGreatestX) {
									
									areaGreatestX = areaNumber;
									
									if (i === 0) {
										areaSmallestX = areaGreatestX;
									}
								}
								
								if (areaNumber < areaSmallestX) {
									areaSmallestX = areaNumber;
								}
								
								arrayAlternate = 'odd';
							}
							else {
								if (areaNumber > areaGreatestY) {
									
									areaGreatestY = areaNumber;
									
									if (i == 1) {
										areaSmallestY = areaGreatestY;
									}
								}
								
								if (areaNumber < areaSmallestY) {
									areaSmallestY = areaNumber;
								}
								
								arrayAlternate = 'even';
							}
						}
						
						geo.origin.size.height = areaGreatestY - areaSmallestY;
						geo.origin.size.width = areaGreatestX - areaSmallestX;
						
						geo.origin.windowOffset.left += areaSmallestX;
						geo.origin.windowOffset.top += areaSmallestY;
						
						break;
				}
			}
		}
		
		// user callback through an event
		var edit = function(r) {
			geo.origin.size.height = r.height,
				geo.origin.windowOffset.left = r.left,
				geo.origin.windowOffset.top = r.top,
				geo.origin.size.width = r.width
		};
		
		self._trigger({
			type: 'geometry',
			edit: edit,
			geometry: {
				height: geo.origin.size.height,
				left: geo.origin.windowOffset.left,
				top: geo.origin.windowOffset.top,
				width: geo.origin.size.width
			}
		});
		
		// calculate the remaining properties with what we got
		
		geo.origin.windowOffset.right = geo.origin.windowOffset.left + geo.origin.size.width;
		geo.origin.windowOffset.bottom = geo.origin.windowOffset.top + geo.origin.size.height;
		
		geo.origin.offset.left = geo.origin.windowOffset.left + geo.window.scroll.left;
		geo.origin.offset.top = geo.origin.windowOffset.top + geo.window.scroll.top;
		geo.origin.offset.bottom = geo.origin.offset.top + geo.origin.size.height;
		geo.origin.offset.right = geo.origin.offset.left + geo.origin.size.width;
		
		// the space that is available to display the tooltip relatively to the document
		geo.available.document = {
			bottom: {
				height: geo.document.size.height - geo.origin.offset.bottom,
				width: geo.document.size.width
			},
			left: {
				height: geo.document.size.height,
				width: geo.origin.offset.left
			},
			right: {
				height: geo.document.size.height,
				width: geo.document.size.width - geo.origin.offset.right
			},
			top: {
				height: geo.origin.offset.top,
				width: geo.document.size.width
			}
		};
		
		// the space that is available to display the tooltip relatively to the viewport
		// (the resulting values may be negative if the origin overflows the viewport)
		geo.available.window = {
			bottom: {
				// the inner max is here to make sure the available height is no bigger
				// than the viewport height (when the origin is off screen at the top).
				// The outer max just makes sure that the height is not negative (when
				// the origin overflows at the bottom).
				height: Math.max(geo.window.size.height - Math.max(geo.origin.windowOffset.bottom, 0), 0),
				width: geo.window.size.width
			},
			left: {
				height: geo.window.size.height,
				width: Math.max(geo.origin.windowOffset.left, 0)
			},
			right: {
				height: geo.window.size.height,
				width: Math.max(geo.window.size.width - Math.max(geo.origin.windowOffset.right, 0), 0)
			},
			top: {
				height: Math.max(geo.origin.windowOffset.top, 0),
				width: geo.window.size.width
			}
		};
		
		while ($parent[0].tagName.toLowerCase() != 'html') {
			
			if ($parent.css('position') == 'fixed') {
				geo.origin.fixedLineage = true;
				break;
			}
			
			$parent = $parent.parent();
		}
		
		return geo;
	},
	
	/**
	 * Some options may need to be formated before being used
	 * 
	 * @returns {self}
	 * @private
	 */
	__optionsFormat: function() {
		
		if (typeof this.__options.animationDuration == 'number') {
			this.__options.animationDuration = [this.__options.animationDuration, this.__options.animationDuration];
		}
		
		if (typeof this.__options.delay == 'number') {
			this.__options.delay = [this.__options.delay, this.__options.delay];
		}
		
		if (typeof this.__options.delayTouch == 'number') {
			this.__options.delayTouch = [this.__options.delayTouch, this.__options.delayTouch];
		}
		
		if (typeof this.__options.theme == 'string') {
			this.__options.theme = [this.__options.theme];
		}
		
		// determine the future parent
		if (this.__options.parent === null) {
			this.__options.parent = $(env.window.document.body);
		}
		else if (typeof this.__options.parent == 'string') {
			this.__options.parent = $(this.__options.parent);
		}
		
		if (this.__options.trigger == 'hover') {
			
			this.__options.triggerOpen = {
				mouseenter: true,
				touchstart: true
			};
			
			this.__options.triggerClose = {
				mouseleave: true,
				originClick: true,
				touchleave: true
			};
		}
		else if (this.__options.trigger == 'click') {
			
			this.__options.triggerOpen = {
				click: true,
				tap: true
			};
			
			this.__options.triggerClose = {
				click: true,
				tap: true
			};
		}
		
		// for the plugins
		this._trigger('options');
		
		return this;
	},
	
	/**
	 * Schedules or cancels the garbage collector task
	 *
	 * @returns {self}
	 * @private
	 */
	__prepareGC: function() {
		
		var self = this;
		
		// in case the selfDestruction option has been changed by a method call
		if (self.__options.selfDestruction) {
			
			// the GC task
			self.__garbageCollector = setInterval(function() {
				
				var now = new Date().getTime();
				
				// forget the old events
				self.__touchEvents = $.grep(self.__touchEvents, function(event, i) {
					// 1 minute
					return now - event.time > 60000;
				});
				
				// auto-destruct if the origin is gone
				if (!bodyContains(self._$origin)) {
					
					self.close(function(){
						self.destroy();
					});
				}
			}, 20000);
		}
		else {
			clearInterval(self.__garbageCollector);
		}
		
		return self;
	},
	
	/**
	 * Sets listeners on the origin if the open triggers require them.
	 * Unlike the listeners set at opening time, these ones
	 * remain even when the tooltip is closed. It has been made a
	 * separate method so it can be called when the triggers are
	 * changed in the options. Closing is handled in _open()
	 * because of the bindings that may be needed on the tooltip
	 * itself
	 *
	 * @returns {self}
	 * @private
	 */
	__prepareOrigin: function() {
		
		var self = this;
		
		// in case we're resetting the triggers
		self._$origin.off('.'+ self.__namespace +'-triggerOpen');
		
		// if the device is touch capable, even if only mouse triggers
		// are asked, we need to listen to touch events to know if the mouse
		// events are actually emulated (so we can ignore them)
		if (env.hasTouchCapability) {
			
			self._$origin.on(
				'touchstart.'+ self.__namespace +'-triggerOpen ' +
				'touchend.'+ self.__namespace +'-triggerOpen ' +
				'touchcancel.'+ self.__namespace +'-triggerOpen',
				function(event){
					self._touchRecordEvent(event);
				}
			);
		}
		
		// mouse click and touch tap work the same way
		if (	self.__options.triggerOpen.click
			||	(self.__options.triggerOpen.tap && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerOpen.click) {
				eventNames += 'click.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerOpen.tap && env.hasTouchCapability) {
				eventNames += 'touchend.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				if (self._touchIsMeaningfulEvent(event)) {
					self._open(event);
				}
			});
		}
		
		// mouseenter and touch start work the same way
		if (	self.__options.triggerOpen.mouseenter
			||	(self.__options.triggerOpen.touchstart && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerOpen.mouseenter) {
				eventNames += 'mouseenter.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerOpen.touchstart && env.hasTouchCapability) {
				eventNames += 'touchstart.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				if (	self._touchIsTouchEvent(event)
					||	!self._touchIsEmulatedEvent(event)
				) {
					self.__pointerIsOverOrigin = true;
					self._openShortly(event);
				}
			});
		}
		
		// info for the mouseleave/touchleave close triggers when they use a delay
		if (	self.__options.triggerClose.mouseleave
			||	(self.__options.triggerClose.touchleave && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerClose.mouseleave) {
				eventNames += 'mouseleave.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerClose.touchleave && env.hasTouchCapability) {
				eventNames += 'touchend.'+ self.__namespace +'-triggerOpen touchcancel.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				
				if (self._touchIsMeaningfulEvent(event)) {
					self.__pointerIsOverOrigin = false;
				}
			});
		}
		
		return self;
	},
	
	/**
	 * Do the things that need to be done only once after the tooltip
	 * HTML element it has been created. It has been made a separate
	 * method so it can be called when options are changed. Remember
	 * that the tooltip may actually exist in the DOM before it is
	 * opened, and present after it has been closed: it's the display
	 * plugin that takes care of handling it.
	 * 
	 * @returns {self}
	 * @private
	 */
	__prepareTooltip: function() {
		
		var self = this,
			p = self.__options.interactive ? 'auto' : '';
		
		// this will be useful to know quickly if the tooltip is in
		// the DOM or not 
		self._$tooltip
			.attr('id', self.__namespace)
			.css({
				// pointer events
				'pointer-events': p,
				zIndex: self.__options.zIndex
			});
		
		// themes
		// remove the old ones and add the new ones
		$.each(self.__previousThemes, function(i, theme) {
			self._$tooltip.removeClass(theme);
		});
		$.each(self.__options.theme, function(i, theme) {
			self._$tooltip.addClass(theme);
		});
		
		self.__previousThemes = $.merge([], self.__options.theme);
		
		return self;
	},
	
	/**
	 * Handles the scroll on any of the parents of the origin (when the
	 * tooltip is open)
	 *
	 * @param {object} event
	 * @returns {self}
	 * @private
	 */
	__scrollHandler: function(event) {
		
		var self = this;
		
		if (self.__options.triggerClose.scroll) {
			self._close(event);
		}
		else {
			
			// if the origin or tooltip have been removed: do nothing, the tracker will
			// take care of it later
			if (bodyContains(self._$origin) && bodyContains(self._$tooltip)) {
				
				var geo = null;
				
				// if the scroll happened on the window
				if (event.target === env.window.document) {
					
					// if the origin has a fixed lineage, window scroll will have no
					// effect on its position nor on the position of the tooltip
					if (!self.__Geometry.origin.fixedLineage) {
						
						// we don't need to do anything unless repositionOnScroll is true
						// because the tooltip will already have moved with the window
						// (and of course with the origin)
						if (self.__options.repositionOnScroll) {
							self.reposition(event);
						}
					}
				}
				// if the scroll happened on another parent of the tooltip, it means
				// that it's in a scrollable area and now needs to have its position
				// adjusted or recomputed, depending ont the repositionOnScroll
				// option. Also, if the origin is partly hidden due to a parent that
				// hides its overflow, we'll just hide (not close) the tooltip.
				else {
					
					geo = self.__geometry();
					
					var overflows = false;
					
					// a fixed position origin is not affected by the overflow hiding
					// of a parent
					if (self._$origin.css('position') != 'fixed') {
						
						self.__$originParents.each(function(i, el) {
							
							var $el = $(el),
								overflowX = $el.css('overflow-x'),
								overflowY = $el.css('overflow-y');
							
							if (overflowX != 'visible' || overflowY != 'visible') {
								
								var bcr = el.getBoundingClientRect();
								
								if (overflowX != 'visible') {
									
									if (	geo.origin.windowOffset.left < bcr.left
										||	geo.origin.windowOffset.right > bcr.right
									) {
										overflows = true;
										return false;
									}
								}
								
								if (overflowY != 'visible') {
									
									if (	geo.origin.windowOffset.top < bcr.top
										||	geo.origin.windowOffset.bottom > bcr.bottom
									) {
										overflows = true;
										return false;
									}
								}
							}
							
							// no need to go further if fixed, for the same reason as above
							if ($el.css('position') == 'fixed') {
								return false;
							}
						});
					}
					
					if (overflows) {
						self._$tooltip.css('visibility', 'hidden');
					}
					else {
						
						self._$tooltip.css('visibility', 'visible');
						
						// reposition
						if (self.__options.repositionOnScroll) {
							self.reposition(event);
						}
						// or just adjust offset
						else {
							
							// we have to use offset and not windowOffset because this way,
							// only the scroll distance of the scrollable areas are taken into
							// account (the scrolltop value of the main window must be
							// ignored since the tooltip already moves with it)
							var offsetLeft = geo.origin.offset.left - self.__Geometry.origin.offset.left,
								offsetTop = geo.origin.offset.top - self.__Geometry.origin.offset.top;
							
							// add the offset to the position initially computed by the display plugin
							self._$tooltip.css({
								left: self.__lastPosition.coord.left + offsetLeft,
								top: self.__lastPosition.coord.top + offsetTop
							});
						}
					}
				}
				
				self._trigger({
					type: 'scroll',
					event: event,
					geo: geo
				});
			}
		}
		
		return self;
	},
	
	/**
	 * Changes the state of the tooltip
	 *
	 * @param {string} state
	 * @returns {self}
	 * @private
	 */
	__stateSet: function(state) {
		
		this.__state = state;
		
		this._trigger({
			type: 'state',
			state: state
		});
		
		return this;
	},
	
	/**
	 * Clear appearance timeouts
	 *
	 * @returns {self}
	 * @private
	 */
	__timeoutsClear: function() {
		
		// there is only one possible open timeout: the delayed opening
		// when the mouseenter/touchstart open triggers are used
		clearTimeout(this.__timeouts.open);
		this.__timeouts.open = null;
		
		// ... but several close timeouts: the delayed closing when the
		// mouseleave close trigger is used and the timer option
		$.each(this.__timeouts.close, function(i, timeout) {
			clearTimeout(timeout);
		});
		this.__timeouts.close = [];
		
		return this;
	},
	
	/**
	 * Start the tracker that will make checks at regular intervals
	 * 
	 * @returns {self}
	 * @private
	 */
	__trackerStart: function() {
		
		var self = this,
			$content = self._$tooltip.find('.tooltipster-content');
		
		// get the initial content size
		if (self.__options.trackTooltip) {
			self.__contentBcr = $content[0].getBoundingClientRect();
		}
		
		self.__tracker = setInterval(function() {
			
			// if the origin or tooltip elements have been removed.
			// Note: we could destroy the instance now if the origin has
			// been removed but we'll leave that task to our garbage collector
			if (!bodyContains(self._$origin) || !bodyContains(self._$tooltip)) {
				self._close();
			}
			// if everything is alright
			else {
				
				// compare the former and current positions of the origin to reposition
				// the tooltip if need be
				if (self.__options.trackOrigin) {
					
					var g = self.__geometry(),
						identical = false;
					
					// compare size first (a change requires repositioning too)
					if (areEqual(g.origin.size, self.__Geometry.origin.size)) {
						
						// for elements that have a fixed lineage (see __geometry()), we track the
						// top and left properties (relative to window)
						if (self.__Geometry.origin.fixedLineage) {
							if (areEqual(g.origin.windowOffset, self.__Geometry.origin.windowOffset)) {
								identical = true;
							}
						}
						// otherwise, track total offset (relative to document)
						else {
							if (areEqual(g.origin.offset, self.__Geometry.origin.offset)) {
								identical = true;
							}
						}
					}
					
					if (!identical) {
						
						// close the tooltip when using the mouseleave close trigger
						// (see https://github.com/iamceege/tooltipster/pull/253)
						if (self.__options.triggerClose.mouseleave) {
							self._close();
						}
						else {
							self.reposition();
						}
					}
				}
				
				if (self.__options.trackTooltip) {
					
					var currentBcr = $content[0].getBoundingClientRect();
					
					if (	currentBcr.height !== self.__contentBcr.height
						||	currentBcr.width !== self.__contentBcr.width
					) {
						self.reposition();
						self.__contentBcr = currentBcr;
					}
				}
			}
		}, self.__options.trackerInterval);
		
		return self;
	},
	
	/**
	 * Closes the tooltip (after the closing delay)
	 * 
	 * @param event
	 * @param callback
	 * @param force Set to true to override a potential refusal of the user's function
	 * @returns {self}
	 * @protected
	 */
	_close: function(event, callback, force) {
		
		var self = this,
			ok = true;
		
		self._trigger({
			type: 'close',
			event: event,
			stop: function() {
				ok = false;
			}
		});
		
		// a destroying tooltip (force == true) may not refuse to close
		if (ok || force) {
			
			// save the method custom callback and cancel any open method custom callbacks
			if (callback) self.__callbacks.close.push(callback);
			self.__callbacks.open = [];
			
			// clear open/close timeouts
			self.__timeoutsClear();
			
			var finishCallbacks = function() {
				
				// trigger any close method custom callbacks and reset them
				$.each(self.__callbacks.close, function(i,c) {
					c.call(self, self, {
						event: event,
						origin: self._$origin[0]
					});
				});
				
				self.__callbacks.close = [];
			};
			
			if (self.__state != 'closed') {
				
				var necessary = true,
					d = new Date(),
					now = d.getTime(),
					newClosingTime = now + self.__options.animationDuration[1];
				
				// the tooltip may already already be disappearing, but if a new
				// call to close() is made after the animationDuration was changed
				// to 0 (for example), we ought to actually close it sooner than
				// previously scheduled. In that case it should be noted that the
				// browser will not adapt the animation duration to the new
				// animationDuration that was set after the start of the closing
				// animation.
				// Note: the same thing could be considered at opening, but is not
				// really useful since the tooltip is actually opened immediately
				// upon a call to _open(). Since it would not make the opening
				// animation finish sooner, its sole impact would be to trigger the
				// state event and the open callbacks sooner than the actual end of
				// the opening animation, which is not great.
				if (self.__state == 'disappearing') {
					
					if (	newClosingTime > self.__closingTime
						// in case closing is actually overdue because the script
						// execution was suspended. See #679
						&&	self.__options.animationDuration[1] > 0
					) {
						necessary = false;
					}
				}
				
				if (necessary) {
					
					self.__closingTime = newClosingTime;
					
					if (self.__state != 'disappearing') {
						self.__stateSet('disappearing');
					}
					
					var finish = function() {
						
						// stop the tracker
						clearInterval(self.__tracker);
						
						// a "beforeClose" option has been asked several times but would
						// probably useless since the content element is still accessible
						// via ::content(), and because people can always use listeners
						// inside their content to track what's going on. For the sake of
						// simplicity, this has been denied. Bur for the rare people who
						// really need the option (for old browsers or for the case where
						// detaching the content is actually destructive, for file or
						// password inputs for example), this event will do the work.
						self._trigger({
							type: 'closing',
							event: event
						});
						
						// unbind listeners which are no longer needed
						
						self._$tooltip
							.off('.'+ self.__namespace +'-triggerClose')
							.removeClass('tooltipster-dying');
						
						// orientationchange, scroll and resize listeners
						$(env.window).off('.'+ self.__namespace +'-triggerClose');
						
						// scroll listeners
						self.__$originParents.each(function(i, el) {
							$(el).off('scroll.'+ self.__namespace +'-triggerClose');
						});
						// clear the array to prevent memory leaks
						self.__$originParents = null;
						
						$(env.window.document.body).off('.'+ self.__namespace +'-triggerClose');
						
						self._$origin.off('.'+ self.__namespace +'-triggerClose');
						
						self._off('dismissable');
						
						// a plugin that would like to remove the tooltip from the
						// DOM when closed should bind on this
						self.__stateSet('closed');
						
						// trigger event
						self._trigger({
							type: 'after',
							event: event
						});
						
						// call our constructor custom callback function
						if (self.__options.functionAfter) {
							self.__options.functionAfter.call(self, self, {
								event: event,
								origin: self._$origin[0]
							});
						}
						
						// call our method custom callbacks functions
						finishCallbacks();
					};
					
					if (env.hasTransitions) {
						
						self._$tooltip.css({
							'-moz-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-ms-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-o-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-webkit-animation-duration': self.__options.animationDuration[1] + 'ms',
							'animation-duration': self.__options.animationDuration[1] + 'ms',
							'transition-duration': self.__options.animationDuration[1] + 'ms'
						});
						
						self._$tooltip
							// clear both potential open and close tasks
							.clearQueue()
							.removeClass('tooltipster-show')
							// for transitions only
							.addClass('tooltipster-dying');
						
						if (self.__options.animationDuration[1] > 0) {
							self._$tooltip.delay(self.__options.animationDuration[1]);
						}
						
						self._$tooltip.queue(finish);
					}
					else {
						
						self._$tooltip
							.stop()
							.fadeOut(self.__options.animationDuration[1], finish);
					}
				}
			}
			// if the tooltip is already closed, we still need to trigger
			// the method custom callbacks
			else {
				finishCallbacks();
			}
		}
		
		return self;
	},
	
	/**
	 * For internal use by plugins, if needed
	 * 
	 * @returns {self}
	 * @protected
	 */
	_off: function() {
		this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @returns {self}
	 * @protected
	 */
	_on: function() {
		this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @returns {self}
	 * @protected
	 */
	_one: function() {
		this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Opens the tooltip right away.
	 *
	 * @param event
	 * @param callback Will be called when the opening animation is over
	 * @returns {self}
	 * @protected
	 */
	_open: function(event, callback) {
		
		var self = this;
		
		// if the destruction process has not begun and if this was not
		// triggered by an unwanted emulated click event
		if (!self.__destroying) {
			
			// check that the origin is still in the DOM
			if (	bodyContains(self._$origin)
				// if the tooltip is enabled
				&&	self.__enabled
			) {
				
				var ok = true;
				
				// if the tooltip is not open yet, we need to call functionBefore.
				// otherwise we can jst go on
				if (self.__state == 'closed') {
					
					// trigger an event. The event.stop function allows the callback
					// to prevent the opening of the tooltip
					self._trigger({
						type: 'before',
						event: event,
						stop: function() {
							ok = false;
						}
					});
					
					if (ok && self.__options.functionBefore) {
						
						// call our custom function before continuing
						ok = self.__options.functionBefore.call(self, self, {
							event: event,
							origin: self._$origin[0]
						});
					}
				}
				
				if (ok !== false) {
					
					// if there is some content
					if (self.__Content !== null) {
						
						// save the method callback and cancel close method callbacks
						if (callback) {
							self.__callbacks.open.push(callback);
						}
						self.__callbacks.close = [];
						
						// get rid of any appearance timeouts
						self.__timeoutsClear();
						
						var extraTime,
							finish = function() {
								
								if (self.__state != 'stable') {
									self.__stateSet('stable');
								}
								
								// trigger any open method custom callbacks and reset them
								$.each(self.__callbacks.open, function(i,c) {
									c.call(self, self, {
										origin: self._$origin[0],
										tooltip: self._$tooltip[0]
									});
								});
								
								self.__callbacks.open = [];
							};
						
						// if the tooltip is already open
						if (self.__state !== 'closed') {
							
							// the timer (if any) will start (or restart) right now
							extraTime = 0;
							
							// if it was disappearing, cancel that
							if (self.__state === 'disappearing') {
								
								self.__stateSet('appearing');
								
								if (env.hasTransitions) {
									
									self._$tooltip
										.clearQueue()
										.removeClass('tooltipster-dying')
										.addClass('tooltipster-show');
									
									if (self.__options.animationDuration[0] > 0) {
										self._$tooltip.delay(self.__options.animationDuration[0]);
									}
									
									self._$tooltip.queue(finish);
								}
								else {
									// in case the tooltip was currently fading out, bring it back
									// to life
									self._$tooltip
										.stop()
										.fadeIn(finish);
								}
							}
							// if the tooltip is already open, we still need to trigger the method
							// custom callback
							else if (self.__state == 'stable') {
								finish();
							}
						}
						// if the tooltip isn't already open, open it
						else {
							
							// a plugin must bind on this and store the tooltip in this._$tooltip
							self.__stateSet('appearing');
							
							// the timer (if any) will start when the tooltip has fully appeared
							// after its transition
							extraTime = self.__options.animationDuration[0];
							
							// insert the content inside the tooltip
							self.__contentInsert();
							
							// reposition the tooltip and attach to the DOM
							self.reposition(event, true);
							
							// animate in the tooltip. If the display plugin wants no css
							// animations, it may override the animation option with a
							// dummy value that will produce no effect
							if (env.hasTransitions) {
								
								// note: there seems to be an issue with start animations which
								// are randomly not played on fast devices in both Chrome and FF,
								// couldn't find a way to solve it yet. It seems that applying
								// the classes before appending to the DOM helps a little, but
								// it messes up some CSS transitions. The issue almost never
								// happens when delay[0]==0 though
								self._$tooltip
									.addClass('tooltipster-'+ self.__options.animation)
									.addClass('tooltipster-initial')
									.css({
										'-moz-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-ms-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-o-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-webkit-animation-duration': self.__options.animationDuration[0] + 'ms',
										'animation-duration': self.__options.animationDuration[0] + 'ms',
										'transition-duration': self.__options.animationDuration[0] + 'ms'
									});
								
								setTimeout(
									function() {
										
										// a quick hover may have already triggered a mouseleave
										if (self.__state != 'closed') {
											
											self._$tooltip
												.addClass('tooltipster-show')
												.removeClass('tooltipster-initial');
											
											if (self.__options.animationDuration[0] > 0) {
												self._$tooltip.delay(self.__options.animationDuration[0]);
											}
											
											self._$tooltip.queue(finish);
										}
									},
									0
								);
							}
							else {
								
								// old browsers will have to live with this
								self._$tooltip
									.css('display', 'none')
									.fadeIn(self.__options.animationDuration[0], finish);
							}
							
							// checks if the origin is removed while the tooltip is open
							self.__trackerStart();
							
							// NOTE: the listeners below have a '-triggerClose' namespace
							// because we'll remove them when the tooltip closes (unlike
							// the '-triggerOpen' listeners). So some of them are actually
							// not about close triggers, rather about positioning.
							
							$(env.window)
								// reposition on resize
								.on('resize.'+ self.__namespace +'-triggerClose', function(e) {
									
									var $ae = $(document.activeElement);
									
									// reposition only if the resize event was not triggered upon the opening
									// of a virtual keyboard due to an input field being focused within the tooltip
									// (otherwise the repositioning would lose the focus)
									if (	(!$ae.is('input') && !$ae.is('textarea'))
										||	!$.contains(self._$tooltip[0], $ae[0])
									) {
										self.reposition(e);
									}
								})
								// same as below for parents
								.on('scroll.'+ self.__namespace +'-triggerClose', function(e) {
									self.__scrollHandler(e);
								});
							
							self.__$originParents = self._$origin.parents();
							
							// scrolling may require the tooltip to be moved or even
							// repositioned in some cases
							self.__$originParents.each(function(i, parent) {
								
								$(parent).on('scroll.'+ self.__namespace +'-triggerClose', function(e) {
									self.__scrollHandler(e);
								});
							});
							
							if (	self.__options.triggerClose.mouseleave
								||	(self.__options.triggerClose.touchleave && env.hasTouchCapability)
							) {
								
								// we use an event to allow users/plugins to control when the mouseleave/touchleave
								// close triggers will come to action. It allows to have more triggering elements
								// than just the origin and the tooltip for example, or to cancel/delay the closing,
								// or to make the tooltip interactive even if it wasn't when it was open, etc.
								self._on('dismissable', function(event) {
									
									if (event.dismissable) {
										
										if (event.delay) {
											
											timeout = setTimeout(function() {
												// event.event may be undefined
												self._close(event.event);
											}, event.delay);
											
											self.__timeouts.close.push(timeout);
										}
										else {
											self._close(event);
										}
									}
									else {
										clearTimeout(timeout);
									}
								});
								
								// now set the listeners that will trigger 'dismissable' events
								var $elements = self._$origin,
									eventNamesIn = '',
									eventNamesOut = '',
									timeout = null;
								
								// if we have to allow interaction, bind on the tooltip too
								if (self.__options.interactive) {
									$elements = $elements.add(self._$tooltip);
								}
								
								if (self.__options.triggerClose.mouseleave) {
									eventNamesIn += 'mouseenter.'+ self.__namespace +'-triggerClose ';
									eventNamesOut += 'mouseleave.'+ self.__namespace +'-triggerClose ';
								}
								if (self.__options.triggerClose.touchleave && env.hasTouchCapability) {
									eventNamesIn += 'touchstart.'+ self.__namespace +'-triggerClose';
									eventNamesOut += 'touchend.'+ self.__namespace +'-triggerClose touchcancel.'+ self.__namespace +'-triggerClose';
								}
								
								$elements
									// close after some time spent outside of the elements
									.on(eventNamesOut, function(event) {
										
										// it's ok if the touch gesture ended up to be a swipe,
										// it's still a "touch leave" situation
										if (	self._touchIsTouchEvent(event)
											||	!self._touchIsEmulatedEvent(event)
										) {
											
											var delay = (event.type == 'mouseleave') ?
												self.__options.delay :
												self.__options.delayTouch;
											
											self._trigger({
												delay: delay[1],
												dismissable: true,
												event: event,
												type: 'dismissable'
											});
										}
									})
									// suspend the mouseleave timeout when the pointer comes back
									// over the elements
									.on(eventNamesIn, function(event) {
										
										// it's also ok if the touch event is a swipe gesture
										if (	self._touchIsTouchEvent(event)
											||	!self._touchIsEmulatedEvent(event)
										) {
											self._trigger({
												dismissable: false,
												event: event,
												type: 'dismissable'
											});
										}
									});
							}
							
							// close the tooltip when the origin gets a mouse click (common behavior of
							// native tooltips)
							if (self.__options.triggerClose.originClick) {
								
								self._$origin.on('click.'+ self.__namespace + '-triggerClose', function(event) {
									
									// we could actually let a tap trigger this but this feature just
									// does not make sense on touch devices
									if (	!self._touchIsTouchEvent(event)
										&&	!self._touchIsEmulatedEvent(event)
									) {
										self._close(event);
									}
								});
							}
							
							// set the same bindings for click and touch on the body to close the tooltip
							if (	self.__options.triggerClose.click
								||	(self.__options.triggerClose.tap && env.hasTouchCapability)
							) {
								
								// don't set right away since the click/tap event which triggered this method
								// (if it was a click/tap) is going to bubble up to the body, we don't want it
								// to close the tooltip immediately after it opened
								setTimeout(function() {
									
									if (self.__state != 'closed') {
										
										var eventNames = '',
											$body = $(env.window.document.body);
										
										if (self.__options.triggerClose.click) {
											eventNames += 'click.'+ self.__namespace +'-triggerClose ';
										}
										if (self.__options.triggerClose.tap && env.hasTouchCapability) {
											eventNames += 'touchend.'+ self.__namespace +'-triggerClose';
										}
										
										$body.on(eventNames, function(event) {
											
											if (self._touchIsMeaningfulEvent(event)) {
												
												self._touchRecordEvent(event);
												
												if (!self.__options.interactive || !$.contains(self._$tooltip[0], event.target)) {
													self._close(event);
												}
											}
										});
										
										// needed to detect and ignore swiping
										if (self.__options.triggerClose.tap && env.hasTouchCapability) {
											
											$body.on('touchstart.'+ self.__namespace +'-triggerClose', function(event) {
												self._touchRecordEvent(event);
											});
										}
									}
								}, 0);
							}
							
							self._trigger('ready');
							
							// call our custom callback
							if (self.__options.functionReady) {
								self.__options.functionReady.call(self, self, {
									origin: self._$origin[0],
									tooltip: self._$tooltip[0]
								});
							}
						}
						
						// if we have a timer set, let the countdown begin
						if (self.__options.timer > 0) {
							
							var timeout = setTimeout(function() {
								self._close();
							}, self.__options.timer + extraTime);
							
							self.__timeouts.close.push(timeout);
						}
					}
				}
			}
		}
		
		return self;
	},
	
	/**
	 * When using the mouseenter/touchstart open triggers, this function will
	 * schedule the opening of the tooltip after the delay, if there is one
	 *
	 * @param event
	 * @returns {self}
	 * @protected
 	 */
	_openShortly: function(event) {
		
		var self = this,
			ok = true;
		
		if (self.__state != 'stable' && self.__state != 'appearing') {
			
			// if a timeout is not already running
			if (!self.__timeouts.open) {
				
				self._trigger({
					type: 'start',
					event: event,
					stop: function() {
						ok = false;
					}
				});
				
				if (ok) {
					
					var delay = (event.type.indexOf('touch') == 0) ?
						self.__options.delayTouch :
						self.__options.delay;
					
					if (delay[0]) {
						
						self.__timeouts.open = setTimeout(function() {
							
							self.__timeouts.open = null;
							
							// open only if the pointer (mouse or touch) is still over the origin.
							// The check on the "meaningful event" can only be made here, after some
							// time has passed (to know if the touch was a swipe or not)
							if (self.__pointerIsOverOrigin && self._touchIsMeaningfulEvent(event)) {
								
								// signal that we go on
								self._trigger('startend');
								
								self._open(event);
							}
							else {
								// signal that we cancel
								self._trigger('startcancel');
							}
						}, delay[0]);
					}
					else {
						// signal that we go on
						self._trigger('startend');
						
						self._open(event);
					}
				}
			}
		}
		
		return self;
	},
	
	/**
	 * Meant for plugins to get their options
	 * 
	 * @param {string} pluginName The name of the plugin that asks for its options
	 * @param {object} defaultOptions The default options of the plugin
	 * @returns {object} The options
	 * @protected
	 */
	_optionsExtract: function(pluginName, defaultOptions) {
		
		var self = this,
			options = $.extend(true, {}, defaultOptions);
		
		// if the plugin options were isolated in a property named after the
		// plugin, use them (prevents conflicts with other plugins)
		var pluginOptions = self.__options[pluginName];
		
		// if not, try to get them as regular options
		if (!pluginOptions){
			
			pluginOptions = {};
			
			$.each(defaultOptions, function(optionName, value) {
				
				var o = self.__options[optionName];
				
				if (o !== undefined) {
					pluginOptions[optionName] = o;
				}
			});
		}
		
		// let's merge the default options and the ones that were provided. We'd want
		// to do a deep copy but not let jQuery merge arrays, so we'll do a shallow
		// extend on two levels, that will be enough if options are not more than 1
		// level deep
		$.each(options, function(optionName, value) {
			
			if (pluginOptions[optionName] !== undefined) {
				
				if ((		typeof value == 'object'
						&&	!(value instanceof Array)
						&&	value != null
					)
					&&
					(		typeof pluginOptions[optionName] == 'object'
						&&	!(pluginOptions[optionName] instanceof Array)
						&&	pluginOptions[optionName] != null
					)
				) {
					$.extend(options[optionName], pluginOptions[optionName]);
				}
				else {
					options[optionName] = pluginOptions[optionName];
				}
			}
		});
		
		return options;
	},
	
	/**
	 * Used at instantiation of the plugin, or afterwards by plugins that activate themselves
	 * on existing instances
	 * 
	 * @param {object} pluginName
	 * @returns {self}
	 * @protected
	 */
	_plug: function(pluginName) {
		
		var plugin = $.tooltipster._plugin(pluginName);
		
		if (plugin) {
			
			// if there is a constructor for instances
			if (plugin.instance) {
				
				// proxy non-private methods on the instance to allow new instance methods
				$.tooltipster.__bridge(plugin.instance, this, plugin.name);
			}
		}
		else {
			throw new Error('The "'+ pluginName +'" plugin is not defined');
		}
		
		return this;
	},
	
	/**
	 * This will return true if the event is a mouse event which was
	 * emulated by the browser after a touch event. This allows us to
	 * really dissociate mouse and touch triggers.
	 * 
	 * There is a margin of error if a real mouse event is fired right
	 * after (within the delay shown below) a touch event on the same
	 * element, but hopefully it should not happen often.
	 * 
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsEmulatedEvent: function(event) {
		
		var isEmulated = false,
			now = new Date().getTime();
		
		for (var i = this.__touchEvents.length - 1; i >= 0; i--) {
			
			var e = this.__touchEvents[i];
			
			// delay, in milliseconds. It's supposed to be 300ms in
			// most browsers (350ms on iOS) to allow a double tap but
			// can be less (check out FastClick for more info)
			if (now - e.time < 500) {
				
				if (e.target === event.target) {
					isEmulated = true;
				}
			}
			else {
				break;
			}
		}
		
		return isEmulated;
	},
	
	/**
	 * Returns false if the event was an emulated mouse event or
	 * a touch event involved in a swipe gesture.
	 * 
	 * @param {object} event
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsMeaningfulEvent: function(event) {
		return (
				(this._touchIsTouchEvent(event) && !this._touchSwiped(event.target))
			||	(!this._touchIsTouchEvent(event) && !this._touchIsEmulatedEvent(event))
		);
	},
	
	/**
	 * Checks if an event is a touch event
	 * 
	 * @param {object} event
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsTouchEvent: function(event){
		return event.type.indexOf('touch') == 0;
	},
	
	/**
	 * Store touch events for a while to detect swiping and emulated mouse events
	 * 
	 * @param {object} event
	 * @returns {self}
	 * @protected
	 */
	_touchRecordEvent: function(event) {
		
		if (this._touchIsTouchEvent(event)) {
			event.time = new Date().getTime();
			this.__touchEvents.push(event);
		}
		
		return this;
	},
	
	/**
	 * Returns true if a swipe happened after the last touchstart event fired on
	 * event.target.
	 * 
	 * We need to differentiate a swipe from a tap before we let the event open
	 * or close the tooltip. A swipe is when a touchmove (scroll) event happens
	 * on the body between the touchstart and the touchend events of an element.
	 * 
	 * @param {object} target The HTML element that may have triggered the swipe
	 * @returns {boolean}
	 * @protected
	 */
	_touchSwiped: function(target) {
		
		var swiped = false;
		
		for (var i = this.__touchEvents.length - 1; i >= 0; i--) {
			
			var e = this.__touchEvents[i];
			
			if (e.type == 'touchmove') {
				swiped = true;
				break;
			}
			else if (
				e.type == 'touchstart'
				&&	target === e.target
			) {
				break;
			}
		}
		
		return swiped;
	},
	
	/**
	 * Triggers an event on the instance emitters
	 * 
	 * @returns {self}
	 * @protected
	 */
	_trigger: function() {
		
		var args = Array.prototype.slice.apply(arguments);
		
		if (typeof args[0] == 'string') {
			args[0] = { type: args[0] };
		}
		
		// add properties to the event
		args[0].instance = this;
		args[0].origin = this._$origin ? this._$origin[0] : null;
		args[0].tooltip = this._$tooltip ? this._$tooltip[0] : null;
		
		// note: the order of emitters matters
		this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, args);
		$.tooltipster._trigger.apply($.tooltipster, args);
		this.__$emitterPublic.trigger.apply(this.__$emitterPublic, args);
		
		return this;
	},
	
	/**
	 * Deactivate a plugin on this instance
	 * 
	 * @returns {self}
	 * @protected
	 */
	_unplug: function(pluginName) {
		
		var self = this;
		
		// if the plugin has been activated on this instance
		if (self[pluginName]) {
			
			var plugin = $.tooltipster._plugin(pluginName);
			
			// if there is a constructor for instances
			if (plugin.instance) {
				
				// unbridge
				$.each(plugin.instance, function(methodName, fn) {
					
					// if the method exists (privates methods do not) and comes indeed from
					// this plugin (may be missing or come from a conflicting plugin).
					if (	self[methodName]
						&&	self[methodName].bridged === self[pluginName]
					) {
						delete self[methodName];
					}
				});
			}
			
			// destroy the plugin
			if (self[pluginName].__destroy) {
				self[pluginName].__destroy();
			}
			
			// remove the reference to the plugin instance
			delete self[pluginName];
		}
		
		return self;
	},
	
	/**
	 * @see self::_close
	 * @returns {self}
	 * @public
	 */
	close: function(callback) {
		
		if (!this.__destroyed) {
			this._close(null, callback);
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Sets or gets the content of the tooltip
	 * 
	 * @returns {mixed|self}
	 * @public
	 */
	content: function(content) {
		
		var self = this;
		
		// getter method
		if (content === undefined) {
			return self.__Content;
		}
		// setter method
		else {
			
			if (!self.__destroyed) {
				
				// change the content
				self.__contentSet(content);
				
				if (self.__Content !== null) {
					
					// update the tooltip if it is open
					if (self.__state !== 'closed') {
						
						// reset the content in the tooltip
						self.__contentInsert();
						
						// reposition and resize the tooltip
						self.reposition();
						
						// if we want to play a little animation showing the content changed
						if (self.__options.updateAnimation) {
							
							if (env.hasTransitions) {
								
								// keep the reference in the local scope
								var animation = self.__options.updateAnimation;
								
								self._$tooltip.addClass('tooltipster-update-'+ animation);
								
								// remove the class after a while. The actual duration of the
								// update animation may be shorter, it's set in the CSS rules
								setTimeout(function() {
									
									if (self.__state != 'closed') {
										
										self._$tooltip.removeClass('tooltipster-update-'+ animation);
									}
								}, 1000);
							}
							else {
								self._$tooltip.fadeTo(200, 0.5, function() {
									if (self.__state != 'closed') {
										self._$tooltip.fadeTo(200, 1);
									}
								});
							}
						}
					}
				}
				else {
					self._close();
				}
			}
			else {
				self.__destroyError();
			}
			
			return self;
		}
	},
	
	/**
	 * Destroys the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	destroy: function() {
		
		var self = this;
		
		if (!self.__destroyed) {
			
			if(self.__state != 'closed'){
				
				// no closing delay
				self.option('animationDuration', 0)
					// force closing
					._close(null, null, true);
			}
			else {
				// there might be an open timeout still running
				self.__timeoutsClear();
			}
			
			// send event
			self._trigger('destroy');
			
			self.__destroyed = true;
			
			self._$origin
				.removeData(self.__namespace)
				// remove the open trigger listeners
				.off('.'+ self.__namespace +'-triggerOpen');
			
			// remove the touch listener
			$(env.window.document.body).off('.' + self.__namespace +'-triggerOpen');
			
			var ns = self._$origin.data('tooltipster-ns');
			
			// if the origin has been removed from DOM, its data may
			// well have been destroyed in the process and there would
			// be nothing to clean up or restore
			if (ns) {
				
				// if there are no more tooltips on this element
				if (ns.length === 1) {
					
					// optional restoration of a title attribute
					var title = null;
					if (self.__options.restoration == 'previous') {
						title = self._$origin.data('tooltipster-initialTitle');
					}
					else if (self.__options.restoration == 'current') {
						
						// old school technique to stringify when outerHTML is not supported
						title = (typeof self.__Content == 'string') ?
							self.__Content :
							$('<div></div>').append(self.__Content).html();
					}
					
					if (title) {
						self._$origin.attr('title', title);
					}
					
					// final cleaning
					
					self._$origin.removeClass('tooltipstered');
					
					self._$origin
						.removeData('tooltipster-ns')
						.removeData('tooltipster-initialTitle');
				}
				else {
					// remove the instance namespace from the list of namespaces of
					// tooltips present on the element
					ns = $.grep(ns, function(el, i) {
						return el !== self.__namespace;
					});
					self._$origin.data('tooltipster-ns', ns);
				}
			}
			
			// last event
			self._trigger('destroyed');
			
			// unbind private and public event listeners
			self._off();
			self.off();
			
			// remove external references, just in case
			self.__Content = null;
			self.__$emitterPrivate = null;
			self.__$emitterPublic = null;
			self.__options.parent = null;
			self._$origin = null;
			self._$tooltip = null;
			
			// make sure the object is no longer referenced in there to prevent
			// memory leaks
			$.tooltipster.__instancesLatestArr = $.grep($.tooltipster.__instancesLatestArr, function(el, i) {
				return self !== el;
			});
			
			clearInterval(self.__garbageCollector);
		}
		else {
			self.__destroyError();
		}
		
		// we return the scope rather than true so that the call to
		// .tooltipster('destroy') actually returns the matched elements
		// and applies to all of them
		return self;
	},
	
	/**
	 * Disables the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	disable: function() {
		
		if (!this.__destroyed) {
			
			// close first, in case the tooltip would not disappear on
			// its own (no close trigger)
			this._close();
			this.__enabled = false;
			
			return this;
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Returns the HTML element of the origin
	 *
	 * @returns {self}
	 * @public
	 */
	elementOrigin: function() {
		
		if (!this.__destroyed) {
			return this._$origin[0];
		}
		else {
			this.__destroyError();
		}
	},
	
	/**
	 * Returns the HTML element of the tooltip
	 *
	 * @returns {self}
	 * @public
	 */
	elementTooltip: function() {
		return this._$tooltip ? this._$tooltip[0] : null;
	},
	
	/**
	 * Enables the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	enable: function() {
		this.__enabled = true;
		return this;
	},
	
	/**
	 * Alias, deprecated in 4.0.0
	 * 
	 * @param {function} callback
	 * @returns {self}
	 * @public
	 */
	hide: function(callback) {
		return this.close(callback);
	},
	
	/**
	 * Returns the instance
	 * 
	 * @returns {self}
	 * @public
	 */
	instance: function() {
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_off() instead)
	 * 
	 * @returns {self}
	 * @public
	 */
	off: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_on() instead)
	 *
	 * @returns {self}
	 * @public
	 */
	on: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins
	 *
	 * @returns {self}
	 * @public
	 */
	one: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * @see self::_open
	 * @returns {self}
	 * @public
	 */
	open: function(callback) {
		
		if (!this.__destroyed) {
			this._open(null, callback);
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Get or set options. For internal use and advanced users only.
	 * 
	 * @param {string} o Option name
	 * @param {mixed} val optional A new value for the option
	 * @return {mixed|self} If val is omitted, the value of the option
	 * is returned, otherwise the instance itself is returned
	 * @public
	 */ 
	option: function(o, val) {
		
		// getter
		if (val === undefined) {
			return this.__options[o];
		}
		// setter
		else {
			
			if (!this.__destroyed) {
				
				// change value
				this.__options[o] = val;
				
				// format
				this.__optionsFormat();
				
				// re-prepare the triggers if needed
				if ($.inArray(o, ['trigger', 'triggerClose', 'triggerOpen']) >= 0) {
					this.__prepareOrigin();
				}
				
				if (o === 'selfDestruction') {
					this.__prepareGC();
				}
			}
			else {
				this.__destroyError();
			}
			
			return this;
		}
	},
	
	/**
	 * This method is in charge of setting the position and size properties of the tooltip.
	 * All the hard work is delegated to the display plugin.
	 * Note: The tooltip may be detached from the DOM at the moment the method is called 
	 * but must be attached by the end of the method call.
	 * 
	 * @param {object} event For internal use only. Defined if an event such as
	 * window resizing triggered the repositioning
	 * @param {boolean} tooltipIsDetached For internal use only. Set this to true if you
	 * know that the tooltip not being in the DOM is not an issue (typically when the
	 * tooltip element has just been created but has not been added to the DOM yet).
	 * @returns {self}
	 * @public
	 */
	reposition: function(event, tooltipIsDetached) {
		
		var self = this;
		
		if (!self.__destroyed) {
			
			// if the tooltip is still open and the origin is still in the DOM
			if (self.__state != 'closed' && bodyContains(self._$origin)) {
				
				// if the tooltip has not been removed from DOM manually (or if it
				// has been detached on purpose)
				if (tooltipIsDetached || bodyContains(self._$tooltip)) {
					
					if (!tooltipIsDetached) {
						// detach in case the tooltip overflows the window and adds
						// scrollbars to it, so __geometry can be accurate
						self._$tooltip.detach();
					}
					
					// refresh the geometry object before passing it as a helper
					self.__Geometry = self.__geometry();
					
					// let a plugin fo the rest
					self._trigger({
						type: 'reposition',
						event: event,
						helper: {
							geo: self.__Geometry
						}
					});
				}
			}
		}
		else {
			self.__destroyError();
		}
		
		return self;
	},
	
	/**
	 * Alias, deprecated in 4.0.0
	 *
	 * @param callback
	 * @returns {self}
	 * @public
	 */
	show: function(callback) {
		return this.open(callback);
	},
	
	/**
	 * Returns some properties about the instance
	 * 
	 * @returns {object}
	 * @public
	 */
	status: function() {
		
		return {
			destroyed: this.__destroyed,
			enabled: this.__enabled,
			open: this.__state !== 'closed',
			state: this.__state
		};
	},
	
	/**
	 * For public use only, not to be used by plugins
	 *
	 * @returns {self}
	 * @public
	 */
	triggerHandler: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	}
};

$.fn.tooltipster = function() {
	
	// for using in closures
	var args = Array.prototype.slice.apply(arguments),
		// common mistake: an HTML element can't be in several tooltips at the same time
		contentCloningWarning = 'You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.';
	
	// this happens with $(sel).tooltipster(...) when $(sel) does not match anything
	if (this.length === 0) {
		
		// still chainable
		return this;
	}
	// this happens when calling $(sel).tooltipster('methodName or options')
	// where $(sel) matches one or more elements
	else {
		
		// method calls
		if (typeof args[0] === 'string') {
			
			var v = '#*$~&';
			
			this.each(function() {
				
				// retrieve the namepaces of the tooltip(s) that exist on that element.
				// We will interact with the first tooltip only.
				var ns = $(this).data('tooltipster-ns'),
					// self represents the instance of the first tooltipster plugin
					// associated to the current HTML object of the loop
					self = ns ? $(this).data(ns[0]) : null;
				
				// if the current element holds a tooltipster instance
				if (self) {
					
					if (typeof self[args[0]] === 'function') {
						
						if (	this.length > 1
							&&	args[0] == 'content'
							&&	(	args[1] instanceof $
								|| (typeof args[1] == 'object' && args[1] != null && args[1].tagName)
							)
							&&	!self.__options.contentCloning
							&&	self.__options.debug
						) {
							console.log(contentCloningWarning);
						}
						
						// note : args[1] and args[2] may not be defined
						var resp = self[args[0]](args[1], args[2]);
					}
					else {
						throw new Error('Unknown method "'+ args[0] +'"');
					}
					
					// if the function returned anything other than the instance
					// itself (which implies chaining, except for the `instance` method)
					if (resp !== self || args[0] === 'instance') {
						
						v = resp;
						
						// return false to stop .each iteration on the first element
						// matched by the selector
						return false;
					}
				}
				else {
					throw new Error('You called Tooltipster\'s "'+ args[0] +'" method on an uninitialized element');
				}
			});
			
			return (v !== '#*$~&') ? v : this;
		}
		// first argument is undefined or an object: the tooltip is initializing
		else {
			
			// reset the array of last initialized objects
			$.tooltipster.__instancesLatestArr = [];
			
			// is there a defined value for the multiple option in the options object ?
			var	multipleIsSet = args[0] && args[0].multiple !== undefined,
				// if the multiple option is set to true, or if it's not defined but
				// set to true in the defaults
				multiple = (multipleIsSet && args[0].multiple) || (!multipleIsSet && defaults.multiple),
				// same for content
				contentIsSet = args[0] && args[0].content !== undefined,
				content = (contentIsSet && args[0].content) || (!contentIsSet && defaults.content),
				// same for contentCloning
				contentCloningIsSet = args[0] && args[0].contentCloning !== undefined,
				contentCloning =
						(contentCloningIsSet && args[0].contentCloning)
					||	(!contentCloningIsSet && defaults.contentCloning),
				// same for debug
				debugIsSet = args[0] && args[0].debug !== undefined,
				debug = (debugIsSet && args[0].debug) || (!debugIsSet && defaults.debug);
			
			if (	this.length > 1
				&&	(	content instanceof $
					|| (typeof content == 'object' && content != null && content.tagName)
				)
				&&	!contentCloning
				&&	debug
			) {
				console.log(contentCloningWarning);
			}
			
			// create a tooltipster instance for each element if it doesn't
			// already have one or if the multiple option is set, and attach the
			// object to it
			this.each(function() {
				
				var go = false,
					$this = $(this),
					ns = $this.data('tooltipster-ns'),
					obj = null;
				
				if (!ns) {
					go = true;
				}
				else if (multiple) {
					go = true;
				}
				else if (debug) {
					// console.log('Tooltipster: one or more tooltips are already attached to the element below. Ignoring.');
					// console.log(this);
				}
				
				if (go) {
					obj = new $.Tooltipster(this, args[0]);
					
					// save the reference of the new instance
					if (!ns) ns = [];
					ns.push(obj.__namespace);
					$this.data('tooltipster-ns', ns);
					
					// save the instance itself
					$this.data(obj.__namespace, obj);
					
					// call our constructor custom function.
					// we do this here and not in ::init() because we wanted
					// the object to be saved in $this.data before triggering
					// it
					if (obj.__options.functionInit) {
						obj.__options.functionInit.call(obj, obj, {
							origin: this
						});
					}
					
					// and now the event, for the plugins and core emitter
					obj._trigger('init');
				}
				
				$.tooltipster.__instancesLatestArr.push(obj);
			});
			
			return this;
		}
	}
};

// Utilities

/**
 * A class to check if a tooltip can fit in given dimensions
 * 
 * @param {object} $tooltip The jQuery wrapped tooltip element, or a clone of it
 */
function Ruler($tooltip) {
	
	// list of instance variables
	
	this.$container;
	this.constraints = null;
	this.__$tooltip;
	
	this.__init($tooltip);
}

Ruler.prototype = {
	
	/**
	 * Move the tooltip into an invisible div that does not allow overflow to make
	 * size tests. Note: the tooltip may or may not be attached to the DOM at the
	 * moment this method is called, it does not matter.
	 * 
	 * @param {object} $tooltip The object to test. May be just a clone of the
	 * actual tooltip.
	 * @private
	 */
	__init: function($tooltip) {
		
		this.__$tooltip = $tooltip;
		
		this.__$tooltip
			.css({
				// for some reason we have to specify top and left 0
				left: 0,
				// any overflow will be ignored while measuring
				overflow: 'hidden',
				// positions at (0,0) without the div using 100% of the available width
				position: 'absolute',
				top: 0
			})
			// overflow must be auto during the test. We re-set this in case
			// it were modified by the user
			.find('.tooltipster-content')
				.css('overflow', 'auto');
		
		this.$container = $('<div class="tooltipster-ruler"></div>')
			.append(this.__$tooltip)
			.appendTo(env.window.document.body);
	},
	
	/**
	 * Force the browser to redraw (re-render) the tooltip immediately. This is required
	 * when you changed some CSS properties and need to make something with it
	 * immediately, without waiting for the browser to redraw at the end of instructions.
	 *
	 * @see http://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes
	 * @private
	 */
	__forceRedraw: function() {
		
		// note: this would work but for Webkit only
		//this.__$tooltip.close();
		//this.__$tooltip[0].offsetHeight;
		//this.__$tooltip.open();
		
		// works in FF too
		var $p = this.__$tooltip.parent();
		this.__$tooltip.detach();
		this.__$tooltip.appendTo($p);
	},
	
	/**
	 * Set maximum dimensions for the tooltip. A call to ::measure afterwards
	 * will tell us if the content overflows or if it's ok
	 *
	 * @param {int} width
	 * @param {int} height
	 * @return {Ruler}
	 * @public
	 */
	constrain: function(width, height) {
		
		this.constraints = {
			width: width,
			height: height
		};
		
		this.__$tooltip.css({
			// we disable display:flex, otherwise the content would overflow without
			// creating horizontal scrolling (which we need to detect).
			display: 'block',
			// reset any previous height
			height: '',
			// we'll check if horizontal scrolling occurs
			overflow: 'auto',
			// we'll set the width and see what height is generated and if there
			// is horizontal overflow
			width: width
		});
		
		return this;
	},
	
	/**
	 * Reset the tooltip content overflow and remove the test container
	 * 
	 * @returns {Ruler}
	 * @public
	 */
	destroy: function() {
		
		// in case the element was not a clone
		this.__$tooltip
			.detach()
			.find('.tooltipster-content')
				.css({
					// reset to CSS value
					display: '',
					overflow: ''
				});
		
		this.$container.remove();
	},
	
	/**
	 * Removes any constraints
	 * 
	 * @returns {Ruler}
	 * @public
	 */
	free: function() {
		
		this.constraints = null;
		
		// reset to natural size
		this.__$tooltip.css({
			display: '',
			height: '',
			overflow: 'visible',
			width: ''
		});
		
		return this;
	},
	
	/**
	 * Returns the size of the tooltip. When constraints are applied, also returns
	 * whether the tooltip fits in the provided dimensions.
	 * The idea is to see if the new height is small enough and if the content does
	 * not overflow horizontally.
	 *
	 * @param {int} width
	 * @param {int} height
	 * @returns {object} An object with a bool `fits` property and a `size` property
	 * @public
	 */
	measure: function() {
		
		this.__forceRedraw();
		
		var tooltipBcr = this.__$tooltip[0].getBoundingClientRect(),
			result = { size: {
				// bcr.width/height are not defined in IE8- but in this
				// case, bcr.right/bottom will have the same value
				// except in iOS 8+ where tooltipBcr.bottom/right are wrong
				// after scrolling for reasons yet to be determined.
				// tooltipBcr.top/left might not be 0, see issue #514
				height: tooltipBcr.height || (tooltipBcr.bottom - tooltipBcr.top),
				width: tooltipBcr.width || (tooltipBcr.right - tooltipBcr.left)
			}};
		
		if (this.constraints) {
			
			// note: we used to use offsetWidth instead of boundingRectClient but
			// it returned rounded values, causing issues with sub-pixel layouts.
			
			// note2: noticed that the bcrWidth of text content of a div was once
			// greater than the bcrWidth of its container by 1px, causing the final
			// tooltip box to be too small for its content. However, evaluating
			// their widths one against the other (below) surprisingly returned
			// equality. Happened only once in Chrome 48, was not able to reproduce
			// => just having fun with float position values...
			
			var $content = this.__$tooltip.find('.tooltipster-content'),
				height = this.__$tooltip.outerHeight(),
				contentBcr = $content[0].getBoundingClientRect(),
				fits = {
					height: height <= this.constraints.height,
					width: (
						// this condition accounts for min-width property that
						// may apply
						tooltipBcr.width <= this.constraints.width
							// the -1 is here because scrollWidth actually returns
							// a rounded value, and may be greater than bcr.width if
							// it was rounded up. This may cause an issue for contents
							// which actually really overflow  by 1px or so, but that
							// should be rare. Not sure how to solve this efficiently.
							// See http://blogs.msdn.com/b/ie/archive/2012/02/17/sub-pixel-rendering-and-the-css-object-model.aspx
						&&	contentBcr.width >= $content[0].scrollWidth - 1
					)
				};
			
			result.fits = fits.height && fits.width;
		}
		
		// old versions of IE get the width wrong for some reason and it causes
		// the text to be broken to a new line, so we round it up. If the width
		// is the width of the screen though, we can assume it is accurate.
		if (	env.IE
			&&	env.IE <= 11
			&&	result.size.width !== env.window.document.documentElement.clientWidth
		) {
			result.size.width = Math.ceil(result.size.width) + 1;
		}
		
		return result;
	}
};

// quick & dirty compare function, not bijective nor multidimensional
function areEqual(a,b) {
	var same = true;
	$.each(a, function(i, _) {
		if (b[i] === undefined || a[i] !== b[i]) {
			same = false;
			return false;
		}
	});
	return same;
}

/**
 * A fast function to check if an element is still in the DOM. It
 * tries to use an id as ids are indexed by the browser, or falls
 * back to jQuery's `contains` method. May fail if two elements
 * have the same id, but so be it
 *
 * @param {object} $obj A jQuery-wrapped HTML element
 * @return {boolean}
 */
function bodyContains($obj) {
	var id = $obj.attr('id'),
		el = id ? env.window.document.getElementById(id) : null;
	// must also check that the element with the id is the one we want
	return el ? el === $obj[0] : $.contains(env.window.document.body, $obj[0]);
}

// detect IE versions for dirty fixes
var uA = navigator.userAgent.toLowerCase();
if (uA.indexOf('msie') != -1) env.IE = parseInt(uA.split('msie')[1]);
else if (uA.toLowerCase().indexOf('trident') !== -1 && uA.indexOf(' rv:11') !== -1) env.IE = 11;
else if (uA.toLowerCase().indexOf('edge/') != -1) env.IE = parseInt(uA.toLowerCase().split('edge/')[1]);

// detecting support for CSS transitions
function transitionSupport() {
	
	// env.window is not defined yet when this is called
	if (!win) return false;
	
	var b = win.document.body || win.document.documentElement,
		s = b.style,
		p = 'transition',
		v = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'];
	
	if (typeof s[p] == 'string') { return true; }
	
	p = p.charAt(0).toUpperCase() + p.substr(1);
	for (var i=0; i<v.length; i++) {
		if (typeof s[v[i] + p] == 'string') { return true; }
	}
	return false;
}

// we'll return jQuery for plugins not to have to declare it as a dependency,
// but it's done by a build task since it should be included only once at the
// end when we concatenate the main file with a plugin
// sideTip is Tooltipster's default plugin.
// This file will be UMDified by a build task.

var pluginName = 'tooltipster.sideTip';

$.tooltipster._plugin({
	name: pluginName,
	instance: {
		/**
		 * Defaults are provided as a function for an easy override by inheritance
		 *
		 * @return {object} An object with the defaults options
		 * @private
		 */
		__defaults: function() {
			
			return {
				// if the tooltip should display an arrow that points to the origin
				arrow: true,
				// the distance in pixels between the tooltip and the origin
				distance: 6,
				// allows to easily change the position of the tooltip
				functionPosition: null,
				maxWidth: null,
				// used to accomodate the arrow of tooltip if there is one.
				// First to make sure that the arrow target is not too close
				// to the edge of the tooltip, so the arrow does not overflow
				// the tooltip. Secondly when we reposition the tooltip to
				// make sure that it's positioned in such a way that the arrow is
				// still pointing at the target (and not a few pixels beyond it).
				// It should be equal to or greater than half the width of
				// the arrow (by width we mean the size of the side which touches
				// the side of the tooltip).
				minIntersection: 16,
				minWidth: 0,
				// deprecated in 4.0.0. Listed for _optionsExtract to pick it up
				position: null,
				side: 'top',
				// set to false to position the tooltip relatively to the document rather
				// than the window when we open it
				viewportAware: true
			};
		},
		
		/**
		 * Run once: at instantiation of the plugin
		 *
		 * @param {object} instance The tooltipster object that instantiated this plugin
		 * @private
		 */
		__init: function(instance) {
			
			var self = this;
			
			// list of instance variables
			
			self.__instance = instance;
			self.__namespace = 'tooltipster-sideTip-'+ Math.round(Math.random()*1000000);
			self.__previousState = 'closed';
			self.__options;
			
			// initial formatting
			self.__optionsFormat();
			
			self.__instance._on('state.'+ self.__namespace, function(event) {
				
				if (event.state == 'closed') {
					self.__close();
				}
				else if (event.state == 'appearing' && self.__previousState == 'closed') {
					self.__create();
				}
				
				self.__previousState = event.state;
			});
			
			// reformat every time the options are changed
			self.__instance._on('options.'+ self.__namespace, function() {
				self.__optionsFormat();
			});
			
			self.__instance._on('reposition.'+ self.__namespace, function(e) {
				self.__reposition(e.event, e.helper);
			});
		},
		
		/**
		 * Called when the tooltip has closed
		 * 
		 * @private
		 */
		__close: function() {
			
			// detach our content object first, so the next jQuery's remove()
			// call does not unbind its event handlers
			if (this.__instance.content() instanceof $) {
				this.__instance.content().detach();
			}
			
			// remove the tooltip from the DOM
			this.__instance._$tooltip.remove();
			this.__instance._$tooltip = null;
		},
		
		/**
		 * Creates the HTML element of the tooltip.
		 * 
		 * @private
		 */
		__create: function() {
			
			// note: we wrap with a .tooltipster-box div to be able to set a margin on it
			// (.tooltipster-base must not have one)
			var $html = $(
				'<div class="tooltipster-base tooltipster-sidetip">' +
					'<div class="tooltipster-box">' +
						'<div class="tooltipster-content"></div>' +
					'</div>' +
					'<div class="tooltipster-arrow">' +
						'<div class="tooltipster-arrow-uncropped">' +
							'<div class="tooltipster-arrow-border"></div>' +
							'<div class="tooltipster-arrow-background"></div>' +
						'</div>' +
					'</div>' +
				'</div>'
			);
			
			// hide arrow if asked
			if (!this.__options.arrow) {
				$html
					.find('.tooltipster-box')
						.css('margin', 0)
						.end()
					.find('.tooltipster-arrow')
						.hide();
			}
			
			// apply min/max width if asked
			if (this.__options.minWidth) {
				$html.css('min-width', this.__options.minWidth + 'px');
			}
			if (this.__options.maxWidth) {
				$html.css('max-width', this.__options.maxWidth + 'px');
			}
			
			this.__instance._$tooltip = $html;
			
			// tell the instance that the tooltip element has been created
			this.__instance._trigger('created');
		},
		
		/**
		 * Used when the plugin is to be unplugged
		 *
		 * @private
		 */
		__destroy: function() {
			this.__instance._off('.'+ self.__namespace);
		},
		
		/**
		 * (Re)compute this.__options from the options declared to the instance
		 *
		 * @private
		 */
		__optionsFormat: function() {
			
			var self = this;
			
			// get the options
			self.__options = self.__instance._optionsExtract(pluginName, self.__defaults());
			
			// for backward compatibility, deprecated in v4.0.0
			if (self.__options.position) {
				self.__options.side = self.__options.position;
			}
			
			// options formatting
			
			// format distance as a four-cell array if it ain't one yet and then make
			// it an object with top/bottom/left/right properties
			if (typeof self.__options.distance != 'object') {
				self.__options.distance = [self.__options.distance];
			}
			if (self.__options.distance.length < 4) {
				
				if (self.__options.distance[1] === undefined) self.__options.distance[1] = self.__options.distance[0];
				if (self.__options.distance[2] === undefined) self.__options.distance[2] = self.__options.distance[0];
				if (self.__options.distance[3] === undefined) self.__options.distance[3] = self.__options.distance[1];
				
				self.__options.distance = {
					top: self.__options.distance[0],
					right: self.__options.distance[1],
					bottom: self.__options.distance[2],
					left: self.__options.distance[3]
				};
			}
			
			// let's transform:
			// 'top' into ['top', 'bottom', 'right', 'left']
			// 'right' into ['right', 'left', 'top', 'bottom']
			// 'bottom' into ['bottom', 'top', 'right', 'left']
			// 'left' into ['left', 'right', 'top', 'bottom']
			if (typeof self.__options.side == 'string') {
				
				var opposites = {
					'top': 'bottom',
					'right': 'left',
					'bottom': 'top',
					'left': 'right'
				};
				
				self.__options.side = [self.__options.side, opposites[self.__options.side]];
				
				if (self.__options.side[0] == 'left' || self.__options.side[0] == 'right') {
					self.__options.side.push('top', 'bottom');
				}
				else {
					self.__options.side.push('right', 'left');
				}
			}
			
			// misc
			// disable the arrow in IE6 unless the arrow option was explicitly set to true
			if (	$.tooltipster._env.IE === 6
				&&	self.__options.arrow !== true
			) {
				self.__options.arrow = false;
			}
		},
		
		/**
		 * This method must compute and set the positioning properties of the
		 * tooltip (left, top, width, height, etc.). It must also make sure the
		 * tooltip is eventually appended to its parent (since the element may be
		 * detached from the DOM at the moment the method is called).
		 *
		 * We'll evaluate positioning scenarios to find which side can contain the
		 * tooltip in the best way. We'll consider things relatively to the window
		 * (unless the user asks not to), then to the document (if need be, or if the
		 * user explicitly requires the tests to run on the document). For each
		 * scenario, measures are taken, allowing us to know how well the tooltip
		 * is going to fit. After that, a sorting function will let us know what
		 * the best scenario is (we also allow the user to choose his favorite
		 * scenario by using an event).
		 * 
		 * @param {object} helper An object that contains variables that plugin
		 * creators may find useful (see below)
		 * @param {object} helper.geo An object with many layout properties
		 * about objects of interest (window, document, origin). This should help
		 * plugin users compute the optimal position of the tooltip
		 * @private
		 */
		__reposition: function(event, helper) {
			
			var self = this,
				finalResult,
				// to know where to put the tooltip, we need to know on which point
				// of the x or y axis we should center it. That coordinate is the target
				targets = self.__targetFind(helper),
				testResults = [];
			
			// make sure the tooltip is detached while we make tests on a clone
			self.__instance._$tooltip.detach();
			
			// we could actually provide the original element to the Ruler and
			// not a clone, but it just feels right to keep it out of the
			// machinery.
			var $clone = self.__instance._$tooltip.clone(),
				// start position tests session
				ruler = $.tooltipster._getRuler($clone),
				satisfied = false,
				animation = self.__instance.option('animation');
			
			// an animation class could contain properties that distort the size
			if (animation) {
				$clone.removeClass('tooltipster-'+ animation);
			}
			
			// start evaluating scenarios
			$.each(['window', 'document'], function(i, container) {
				
				var takeTest = null;
				
				// let the user decide to keep on testing or not
				self.__instance._trigger({
					container: container,
					helper: helper,
					satisfied: satisfied,
					takeTest: function(bool) {
						takeTest = bool;
					},
					results: testResults,
					type: 'positionTest'
				});
				
				if (	takeTest == true
					||	(	takeTest != false
						&&	satisfied == false
							// skip the window scenarios if asked. If they are reintegrated by
							// the callback of the positionTest event, they will have to be
							// excluded using the callback of positionTested
						&&	(container != 'window' || self.__options.viewportAware)
					)
				) {
					
					// for each allowed side
					for (var i=0; i < self.__options.side.length; i++) {
						
						var distance = {
								horizontal: 0,
								vertical: 0
							},
							side = self.__options.side[i];
						
						if (side == 'top' || side == 'bottom') {
							distance.vertical = self.__options.distance[side];
						}
						else {
							distance.horizontal = self.__options.distance[side];
						}
						
						// this may have an effect on the size of the tooltip if there are css
						// rules for the arrow or something else
						self.__sideChange($clone, side);
						
						$.each(['natural', 'constrained'], function(i, mode) {
							
							takeTest = null;
							
							// emit an event on the instance
							self.__instance._trigger({
								container: container,
								event: event,
								helper: helper,
								mode: mode,
								results: testResults,
								satisfied: satisfied,
								side: side,
								takeTest: function(bool) {
									takeTest = bool;
								},
								type: 'positionTest'
							});
							
							if (	takeTest == true
								||	(	takeTest != false
									&&	satisfied == false
								)
							) {
								
								var testResult = {
									container: container,
									// we let the distance as an object here, it can make things a little easier
									// during the user's calculations at positionTest/positionTested
									distance: distance,
									// whether the tooltip can fit in the size of the viewport (does not mean
									// that we'll be able to make it initially entirely visible, see 'whole')
									fits: null,
									mode: mode,
									outerSize: null,
									side: side,
									size: null,
									target: targets[side],
									// check if the origin has enough surface on screen for the tooltip to
									// aim at it without overflowing the viewport (this is due to the thickness
									// of the arrow represented by the minIntersection length).
									// If not, the tooltip will have to be partly or entirely off screen in
									// order to stay docked to the origin. This value will stay null when the
									// container is the document, as it is not relevant
									whole: null
								};
								
								// get the size of the tooltip with or without size constraints
								var rulerConfigured = (mode == 'natural') ?
										ruler.free() :
										ruler.constrain(
											helper.geo.available[container][side].width - distance.horizontal,
											helper.geo.available[container][side].height - distance.vertical
										),
									rulerResults = rulerConfigured.measure();
								
								testResult.size = rulerResults.size;
								testResult.outerSize = {
									height: rulerResults.size.height + distance.vertical,
									width: rulerResults.size.width + distance.horizontal
								};
								
								if (mode == 'natural') {
									
									if(		helper.geo.available[container][side].width >= testResult.outerSize.width
										&&	helper.geo.available[container][side].height >= testResult.outerSize.height
									) {
										testResult.fits = true;
									}
									else {
										testResult.fits = false;
									}
								}
								else {
									testResult.fits = rulerResults.fits;
								}
								
								if (container == 'window') {
									
									if (!testResult.fits) {
										testResult.whole = false;
									}
									else {
										if (side == 'top' || side == 'bottom') {
											
											testResult.whole = (
													helper.geo.origin.windowOffset.right >= self.__options.minIntersection
												&&	helper.geo.window.size.width - helper.geo.origin.windowOffset.left >= self.__options.minIntersection
											);
										}
										else {
											testResult.whole = (
													helper.geo.origin.windowOffset.bottom >= self.__options.minIntersection
												&&	helper.geo.window.size.height - helper.geo.origin.windowOffset.top >= self.__options.minIntersection
											);
										}
									}
								}
								
								testResults.push(testResult);
								
								// we don't need to compute more positions if we have one fully on screen
								if (testResult.whole) {
									satisfied = true;
								}
								else {
									// don't run the constrained test unless the natural width was greater
									// than the available width, otherwise it's pointless as we know it
									// wouldn't fit either
									if (	testResult.mode == 'natural'
										&&	(	testResult.fits
											||	testResult.size.width <= helper.geo.available[container][side].width
										)
									) {
										return false;
									}
								}
							}
						});
					}
				}
			});
			
			// the user may eliminate the unwanted scenarios from testResults, but he's
			// not supposed to alter them at this point. functionPosition and the
			// position event serve that purpose.
			self.__instance._trigger({
				edit: function(r) {
					testResults = r;
				},
				event: event,
				helper: helper,
				results: testResults,
				type: 'positionTested'
			});
			
			/**
			 * Sort the scenarios to find the favorite one.
			 * 
			 * The favorite scenario is when we can fully display the tooltip on screen,
			 * even if it means that the middle of the tooltip is no longer centered on
			 * the middle of the origin (when the origin is near the edge of the screen
			 * or even partly off screen). We want the tooltip on the preferred side,
			 * even if it means that we have to use a constrained size rather than a
			 * natural one (as long as it fits). When the origin is off screen at the top
			 * the tooltip will be positioned at the bottom (if allowed), if the origin
			 * is off screen on the right, it will be positioned on the left, etc.
			 * If there are no scenarios where the tooltip can fit on screen, or if the
			 * user does not want the tooltip to fit on screen (viewportAware == false),
			 * we fall back to the scenarios relative to the document.
			 * 
			 * When the tooltip is bigger than the viewport in either dimension, we stop
			 * looking at the window scenarios and consider the document scenarios only,
			 * with the same logic to find on which side it would fit best.
			 * 
			 * If the tooltip cannot fit the document on any side, we force it at the
			 * bottom, so at least the user can scroll to see it.
 			 */
			testResults.sort(function(a, b) {
				
				// best if it's whole (the tooltip fits and adapts to the viewport)
				if (a.whole && !b.whole) {
					return -1;
				}
				else if (!a.whole && b.whole) {
					return 1;
				}
				else if (a.whole && b.whole) {
					
					var ai = self.__options.side.indexOf(a.side),
						bi = self.__options.side.indexOf(b.side);
					
					// use the user's sides fallback array
					if (ai < bi) {
						return -1;
					}
					else if (ai > bi) {
						return 1;
					}
					else {
						// will be used if the user forced the tests to continue
						return a.mode == 'natural' ? -1 : 1;
					}
				}
				else {
					
					// better if it fits
					if (a.fits && !b.fits) {
						return -1;
					}
					else if (!a.fits && b.fits) {
						return 1;
					}
					else if (a.fits && b.fits) {
						
						var ai = self.__options.side.indexOf(a.side),
							bi = self.__options.side.indexOf(b.side);
						
						// use the user's sides fallback array
						if (ai < bi) {
							return -1;
						}
						else if (ai > bi) {
							return 1;
						}
						else {
							// will be used if the user forced the tests to continue
							return a.mode == 'natural' ? -1 : 1;
						}
					}
					else {
						
						// if everything failed, this will give a preference to the case where
						// the tooltip overflows the document at the bottom
						if (	a.container == 'document'
							&&	a.side == 'bottom'
							&&	a.mode == 'natural'
						) {
							return -1;
						}
						else {
							return 1;
						}
					}
				}
			});
			
			finalResult = testResults[0];
			
			
			// now let's find the coordinates of the tooltip relatively to the window
			finalResult.coord = {};
			
			switch (finalResult.side) {
				
				case 'left':
				case 'right':
					finalResult.coord.top = Math.floor(finalResult.target - finalResult.size.height / 2);
					break;
				
				case 'bottom':
				case 'top':
					finalResult.coord.left = Math.floor(finalResult.target - finalResult.size.width / 2);
					break;
			}
			
			switch (finalResult.side) {
				
				case 'left':
					finalResult.coord.left = helper.geo.origin.windowOffset.left - finalResult.outerSize.width;
					break;
				
				case 'right':
					finalResult.coord.left = helper.geo.origin.windowOffset.right + finalResult.distance.horizontal;
					break;
				
				case 'top':
					finalResult.coord.top = helper.geo.origin.windowOffset.top - finalResult.outerSize.height;
					break;
				
				case 'bottom':
					finalResult.coord.top = helper.geo.origin.windowOffset.bottom + finalResult.distance.vertical;
					break;
			}
			
			// if the tooltip can potentially be contained within the viewport dimensions
			// and that we are asked to make it fit on screen
			if (finalResult.container == 'window') {
				
				// if the tooltip overflows the viewport, we'll move it accordingly (then it will
				// not be centered on the middle of the origin anymore). We only move horizontally
				// for top and bottom tooltips and vice versa.
				if (finalResult.side == 'top' || finalResult.side == 'bottom') {
					
					// if there is an overflow on the left
					if (finalResult.coord.left < 0) {
						
						// prevent the overflow unless the origin itself gets off screen (minus the
						// margin needed to keep the arrow pointing at the target)
						if (helper.geo.origin.windowOffset.right - this.__options.minIntersection >= 0) {
							finalResult.coord.left = 0;
						}
						else {
							finalResult.coord.left = helper.geo.origin.windowOffset.right - this.__options.minIntersection - 1;
						}
					}
					// or an overflow on the right
					else if (finalResult.coord.left > helper.geo.window.size.width - finalResult.size.width) {
						
						if (helper.geo.origin.windowOffset.left + this.__options.minIntersection <= helper.geo.window.size.width) {
							finalResult.coord.left = helper.geo.window.size.width - finalResult.size.width;
						}
						else {
							finalResult.coord.left = helper.geo.origin.windowOffset.left + this.__options.minIntersection + 1 - finalResult.size.width;
						}
					}
				}
				else {
					
					// overflow at the top
					if (finalResult.coord.top < 0) {
						
						if (helper.geo.origin.windowOffset.bottom - this.__options.minIntersection >= 0) {
							finalResult.coord.top = 0;
						}
						else {
							finalResult.coord.top = helper.geo.origin.windowOffset.bottom - this.__options.minIntersection - 1;
						}
					}
					// or at the bottom
					else if (finalResult.coord.top > helper.geo.window.size.height - finalResult.size.height) {
						
						if (helper.geo.origin.windowOffset.top + this.__options.minIntersection <= helper.geo.window.size.height) {
							finalResult.coord.top = helper.geo.window.size.height - finalResult.size.height;
						}
						else {
							finalResult.coord.top = helper.geo.origin.windowOffset.top + this.__options.minIntersection + 1 - finalResult.size.height;
						}
					}
				}
			}
			else {
				
				// there might be overflow here too but it's easier to handle. If there has
				// to be an overflow, we'll make sure it's on the right side of the screen
				// (because the browser will extend the document size if there is an overflow
				// on the right, but not on the left). The sort function above has already
				// made sure that a bottom document overflow is preferred to a top overflow,
				// so we don't have to care about it.
				
				// if there is an overflow on the right
				if (finalResult.coord.left > helper.geo.window.size.width - finalResult.size.width) {
					
					// this may actually create on overflow on the left but we'll fix it in a sec
					finalResult.coord.left = helper.geo.window.size.width - finalResult.size.width;
				}
				
				// if there is an overflow on the left
				if (finalResult.coord.left < 0) {
					
					// don't care if it overflows the right after that, we made our best
					finalResult.coord.left = 0;
				}
			}
			
			
			// submit the positioning proposal to the user function which may choose to change
			// the side, size and/or the coordinates
			
			// first, set the rules that corresponds to the proposed side: it may change
			// the size of the tooltip, and the custom functionPosition may want to detect the
			// size of something before making a decision. So let's make things easier for the
			// implementor
			self.__sideChange($clone, finalResult.side);
			
			// add some variables to the helper
			helper.tooltipClone = $clone[0];
			helper.tooltipParent = self.__instance.option('parent').parent[0];
			// move informative values to the helper
			helper.mode = finalResult.mode;
			helper.whole = finalResult.whole;
			// add some variables to the helper for the functionPosition callback (these
			// will also be added to the event fired by self.__instance._trigger but that's
			// ok, we're just being consistent)
			helper.origin = self.__instance._$origin[0];
			helper.tooltip = self.__instance._$tooltip[0];
			
			// leave only the actionable values in there for functionPosition
			delete finalResult.container;
			delete finalResult.fits;
			delete finalResult.mode;
			delete finalResult.outerSize;
			delete finalResult.whole;
			
			// keep only the distance on the relevant side, for clarity
			finalResult.distance = finalResult.distance.horizontal || finalResult.distance.vertical;
			
			// beginners may not be comfortable with the concept of editing the object
			//  passed by reference, so we provide an edit function and pass a clone
			var finalResultClone = $.extend(true, {}, finalResult);
			
			// emit an event on the instance
			self.__instance._trigger({
				edit: function(result) {
					finalResult = result;
				},
				event: event,
				helper: helper,
				position: finalResultClone,
				type: 'position'
			});
			
			if (self.__options.functionPosition) {
				
				var result = self.__options.functionPosition.call(self, self.__instance, helper, finalResultClone);
				
				if (result) finalResult = result;
			}
			
			// end the positioning tests session (the user might have had a
			// use for it during the position event, now it's over)
			ruler.destroy();
			
			// compute the position of the target relatively to the tooltip root
			// element so we can place the arrow and make the needed adjustments
			var arrowCoord,
				maxVal;
			
			if (finalResult.side == 'top' || finalResult.side == 'bottom') {
				
				arrowCoord = {
					prop: 'left',
					val: finalResult.target - finalResult.coord.left
				};
				maxVal = finalResult.size.width - this.__options.minIntersection;
			}
			else {
				
				arrowCoord = {
					prop: 'top',
					val: finalResult.target - finalResult.coord.top
				};
				maxVal = finalResult.size.height - this.__options.minIntersection;
			}
			
			// cannot lie beyond the boundaries of the tooltip, minus the
			// arrow margin
			if (arrowCoord.val < this.__options.minIntersection) {
				arrowCoord.val = this.__options.minIntersection;
			}
			else if (arrowCoord.val > maxVal) {
				arrowCoord.val = maxVal;
			}
			
			var originParentOffset;
			
			// let's convert the window-relative coordinates into coordinates relative to the
			// future positioned parent that the tooltip will be appended to
			if (helper.geo.origin.fixedLineage) {
				
				// same as windowOffset when the position is fixed
				originParentOffset = helper.geo.origin.windowOffset;
			}
			else {
				
				// this assumes that the parent of the tooltip is located at
				// (0, 0) in the document, typically like when the parent is
				// <body>.
				// If we ever allow other types of parent, .tooltipster-ruler
				// will have to be appended to the parent to inherit css style
				// values that affect the display of the text and such.
				originParentOffset = {
					left: helper.geo.origin.windowOffset.left + helper.geo.window.scroll.left,
					top: helper.geo.origin.windowOffset.top + helper.geo.window.scroll.top
				};
			}
			
			finalResult.coord = {
				left: originParentOffset.left + (finalResult.coord.left - helper.geo.origin.windowOffset.left),
				top: originParentOffset.top + (finalResult.coord.top - helper.geo.origin.windowOffset.top)
			};
			
			// set position values on the original tooltip element
			
			self.__sideChange(self.__instance._$tooltip, finalResult.side);
			
			if (helper.geo.origin.fixedLineage) {
				self.__instance._$tooltip
					.css('position', 'fixed');
			}
			else {
				// CSS default
				self.__instance._$tooltip
					.css('position', '');
			}
			
			self.__instance._$tooltip
				.css({
					left: finalResult.coord.left,
					top: finalResult.coord.top,
					// we need to set a size even if the tooltip is in its natural size
					// because when the tooltip is positioned beyond the width of the body
					// (which is by default the width of the window; it will happen when
					// you scroll the window horizontally to get to the origin), its text
					// content will otherwise break lines at each word to keep up with the
					// body overflow strategy.
					height: finalResult.size.height,
					width: finalResult.size.width
				})
				.find('.tooltipster-arrow')
					.css({
						'left': '',
						'top': ''
					})
					.css(arrowCoord.prop, arrowCoord.val);
			
			// append the tooltip HTML element to its parent
			self.__instance._$tooltip.appendTo(self.__instance.option('parent'));
			
			self.__instance._trigger({
				type: 'repositioned',
				event: event,
				position: finalResult
			});
		},
		
		/**
		 * Make whatever modifications are needed when the side is changed. This has
		 * been made an independant method for easy inheritance in custom plugins based
		 * on this default plugin.
		 *
		 * @param {object} $obj
		 * @param {string} side
		 * @private
		 */
		__sideChange: function($obj, side) {
			
			$obj
				.removeClass('tooltipster-bottom')
				.removeClass('tooltipster-left')
				.removeClass('tooltipster-right')
				.removeClass('tooltipster-top')
				.addClass('tooltipster-'+ side);
		},
		
		/**
		 * Returns the target that the tooltip should aim at for a given side.
		 * The calculated value is a distance from the edge of the window
		 * (left edge for top/bottom sides, top edge for left/right side). The
		 * tooltip will be centered on that position and the arrow will be
		 * positioned there (as much as possible).
		 *
		 * @param {object} helper
		 * @return {integer}
		 * @private
		 */
		__targetFind: function(helper) {
			
			var target = {},
				rects = this.__instance._$origin[0].getClientRects();
			
			// these lines fix a Chrome bug (issue #491)
			if (rects.length > 1) {
				var opacity = this.__instance._$origin.css('opacity');
				if(opacity == 1) {
					this.__instance._$origin.css('opacity', 0.99);
					rects = this.__instance._$origin[0].getClientRects();
					this.__instance._$origin.css('opacity', 1);
				}
			}
			
			// by default, the target will be the middle of the origin
			if (rects.length < 2) {
				
				target.top = Math.floor(helper.geo.origin.windowOffset.left + (helper.geo.origin.size.width / 2));
				target.bottom = target.top;
				
				target.left = Math.floor(helper.geo.origin.windowOffset.top + (helper.geo.origin.size.height / 2));
				target.right = target.left;
			}
			// if multiple client rects exist, the element may be text split
			// up into multiple lines and the middle of the origin may not be
			// best option anymore. We need to choose the best target client rect
			else {
				
				// top: the first
				var targetRect = rects[0];
				target.top = Math.floor(targetRect.left + (targetRect.right - targetRect.left) / 2);
		
				// right: the middle line, rounded down in case there is an even
				// number of lines (looks more centered => check out the
				// demo with 4 split lines)
				if (rects.length > 2) {
					targetRect = rects[Math.ceil(rects.length / 2) - 1];
				}
				else {
					targetRect = rects[0];
				}
				target.right = Math.floor(targetRect.top + (targetRect.bottom - targetRect.top) / 2);
		
				// bottom: the last
				targetRect = rects[rects.length - 1];
				target.bottom = Math.floor(targetRect.left + (targetRect.right - targetRect.left) / 2);
		
				// left: the middle line, rounded up
				if (rects.length > 2) {
					targetRect = rects[Math.ceil((rects.length + 1) / 2) - 1];
				}
				else {
					targetRect = rects[rects.length - 1];
				}
				
				target.left = Math.floor(targetRect.top + (targetRect.bottom - targetRect.top) / 2);
			}
			
			return target;
		}
	}
});

/* a build task will add "return $;" here */
return $;

}));

/**
 * jquery.mask.js
 * @version: v1.14.12
 * @author: Igor Escobar
 *
 * Created by Igor Escobar on 2012-03-10. Please report any bug at http://blog.igorescobar.com
 *
 * Copyright (c) 2012 Igor Escobar http://blog.igorescobar.com
 *
 * The MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

/* jshint laxbreak: true */
/* jshint maxcomplexity:17 */
/* global define */

'use strict';

// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.
// https://github.com/umdjs/umd/blob/master/jqueryPluginCommonjs.js
(function (factory, jQuery, Zepto) {

    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        module.exports = factory(require('jquery'));
    } else {
        factory(jQuery || Zepto);
    }

}(function ($) {

    var Mask = function (el, mask, options) {

        var p = {
            invalid: [],
            getCaret: function () {
                try {
                    var sel,
                        pos = 0,
                        ctrl = el.get(0),
                        dSel = document.selection,
                        cSelStart = ctrl.selectionStart;

                    // IE Support
                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {
                        sel = dSel.createRange();
                        sel.moveStart('character', -p.val().length);
                        pos = sel.text.length;
                    }
                    // Firefox support
                    else if (cSelStart || cSelStart === '0') {
                        pos = cSelStart;
                    }

                    return pos;
                } catch (e) {}
            },
            setCaret: function(pos) {
                try {
                    if (el.is(':focus')) {
                        var range, ctrl = el.get(0);

                        // Firefox, WebKit, etc..
                        if (ctrl.setSelectionRange) {
                            ctrl.setSelectionRange(pos, pos);
                        } else { // IE
                            range = ctrl.createTextRange();
                            range.collapse(true);
                            range.moveEnd('character', pos);
                            range.moveStart('character', pos);
                            range.select();
                        }
                    }
                } catch (e) {}
            },
            events: function() {
                el
                .on('keydown.mask', function(e) {
                    el.data('mask-keycode', e.keyCode || e.which);
                    el.data('mask-previus-value', el.val());
                    el.data('mask-previus-caret-pos', p.getCaret());
                    p.maskDigitPosMapOld = p.maskDigitPosMap;
                })
                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)
                .on('paste.mask drop.mask', function() {
                    setTimeout(function() {
                        el.keydown().keyup();
                    }, 100);
                })
                .on('change.mask', function(){
                    el.data('changed', true);
                })
                .on('blur.mask', function(){
                    if (oldValue !== p.val() && !el.data('changed')) {
                        el.trigger('change');
                    }
                    el.data('changed', false);
                })
                // it's very important that this callback remains in this position
                // otherwhise oldValue it's going to work buggy
                .on('blur.mask', function() {
                    oldValue = p.val();
                })
                // select all text on focus
                .on('focus.mask', function (e) {
                    if (options.selectOnFocus === true) {
                        $(e.target).select();
                    }
                })
                // clear the value if it not complete the mask
                .on('focusout.mask', function() {
                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {
                       p.val('');
                   }
                });
            },
            getRegexMask: function() {
                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;

                for (var i = 0; i < mask.length; i++) {
                    translation = jMask.translation[mask.charAt(i)];

                    if (translation) {

                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');
                        optional = translation.optional;
                        recursive = translation.recursive;

                        if (recursive) {
                            maskChunks.push(mask.charAt(i));
                            oRecursive = {digit: mask.charAt(i), pattern: pattern};
                        } else {
                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));
                        }

                    } else {
                        maskChunks.push(mask.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'));
                    }
                }

                r = maskChunks.join('');

                if (oRecursive) {
                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')
                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);
                }

                return new RegExp(r);
            },
            destroyEvents: function() {
                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));
            },
            val: function(v) {
                var isInput = el.is('input'),
                    method = isInput ? 'val' : 'text',
                    r;

                if (arguments.length > 0) {
                    if (el[method]() !== v) {
                        el[method](v);
                    }
                    r = el;
                } else {
                    r = el[method]();
                }

                return r;
            },
            calculateCaretPosition: function() {
                var oldVal = el.data('mask-previus-value') || '',
                    newVal = p.getMasked(),
                    caretPosNew = p.getCaret();
                if (oldVal !== newVal) {
                    var caretPosOld = el.data('mask-previus-caret-pos') || 0,
                        newValL = newVal.length,
                        oldValL = oldVal.length,
                        maskDigitsBeforeCaret = 0,
                        maskDigitsAfterCaret = 0,
                        maskDigitsBeforeCaretAll = 0,
                        maskDigitsBeforeCaretAllOld = 0,
                        i = 0;

                    for (i = caretPosNew; i < newValL; i++) {
                        if (!p.maskDigitPosMap[i]) {
                            break;
                        }
                        maskDigitsAfterCaret++;
                    }

                    for (i = caretPosNew - 1; i >= 0; i--) {
                        if (!p.maskDigitPosMap[i]) {
                            break;
                        }
                        maskDigitsBeforeCaret++;
                    }

                    for (i = caretPosNew - 1; i >= 0; i--) {
                        if (p.maskDigitPosMap[i]) {
                            maskDigitsBeforeCaretAll++;
                        }
                    }

                    for (i = caretPosOld - 1; i >= 0; i--) {
                        if (p.maskDigitPosMapOld[i]) {
                            maskDigitsBeforeCaretAllOld++;
                        }
                    }

                    // if the cursor is at the end keep it there
                    if (caretPosNew > oldValL) {
                      caretPosNew = newValL * 10;
                    } else if (caretPosOld >= caretPosNew && caretPosOld !== oldValL) {
                        if (!p.maskDigitPosMapOld[caretPosNew])  {
                          var caretPos = caretPosNew;
                          caretPosNew -= maskDigitsBeforeCaretAllOld - maskDigitsBeforeCaretAll;
                          caretPosNew -= maskDigitsBeforeCaret;
                          if (p.maskDigitPosMap[caretPosNew])  {
                            caretPosNew = caretPos;
                          }
                        }
                    }
                    else if (caretPosNew > caretPosOld) {
                        caretPosNew += maskDigitsBeforeCaretAll - maskDigitsBeforeCaretAllOld;
                        caretPosNew += maskDigitsAfterCaret;
                    }
                }
                return caretPosNew;
            },
            behaviour: function(e) {
                e = e || window.event;
                p.invalid = [];

                var keyCode = el.data('mask-keycode');

                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {
                    var newVal   = p.getMasked(),
                        caretPos = p.getCaret();

                    // this is a compensation to devices/browsers that don't compensate
                    // caret positioning the right way
                    setTimeout(function() {
                      p.setCaret(p.calculateCaretPosition());
                    }, 10);

                    p.val(newVal);
                    p.setCaret(caretPos);
                    return p.callbacks(e);
                }
            },
            getMasked: function(skipMaskChars, val) {
                var buf = [],
                    value = val === undefined ? p.val() : val + '',
                    m = 0, maskLen = mask.length,
                    v = 0, valLen = value.length,
                    offset = 1, addMethod = 'push',
                    resetPos = -1,
                    maskDigitCount = 0,
                    maskDigitPosArr = [],
                    lastMaskChar,
                    check;

                if (options.reverse) {
                    addMethod = 'unshift';
                    offset = -1;
                    lastMaskChar = 0;
                    m = maskLen - 1;
                    v = valLen - 1;
                    check = function () {
                        return m > -1 && v > -1;
                    };
                } else {
                    lastMaskChar = maskLen - 1;
                    check = function () {
                        return m < maskLen && v < valLen;
                    };
                }

                var lastUntranslatedMaskChar;
                while (check()) {
                    var maskDigit = mask.charAt(m),
                        valDigit = value.charAt(v),
                        translation = jMask.translation[maskDigit];

                    if (translation) {
                        if (valDigit.match(translation.pattern)) {
                            buf[addMethod](valDigit);
                             if (translation.recursive) {
                                if (resetPos === -1) {
                                    resetPos = m;
                                } else if (m === lastMaskChar) {
                                    m = resetPos - offset;
                                }

                                if (lastMaskChar === resetPos) {
                                    m -= offset;
                                }
                            }
                            m += offset;
                        } else if (valDigit === lastUntranslatedMaskChar) {
                            // matched the last untranslated (raw) mask character that we encountered
                            // likely an insert offset the mask character from the last entry; fall
                            // through and only increment v
                            maskDigitCount--;
                            lastUntranslatedMaskChar = undefined;
                        } else if (translation.optional) {
                            m += offset;
                            v -= offset;
                        } else if (translation.fallback) {
                            buf[addMethod](translation.fallback);
                            m += offset;
                            v -= offset;
                        } else {
                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});
                        }
                        v += offset;
                    } else {
                        if (!skipMaskChars) {
                            buf[addMethod](maskDigit);
                        }

                        if (valDigit === maskDigit) {
                            maskDigitPosArr.push(v);
                            v += offset;
                        } else {
                            lastUntranslatedMaskChar = maskDigit;
                            maskDigitPosArr.push(v + maskDigitCount);
                            maskDigitCount++;
                        }

                        m += offset;
                    }
                }

                var lastMaskCharDigit = mask.charAt(lastMaskChar);
                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {
                    buf.push(lastMaskCharDigit);
                }

                var newVal = buf.join('');
                p.mapMaskdigitPositions(newVal, maskDigitPosArr, valLen);
                return newVal;
            },
            mapMaskdigitPositions: function(newVal, maskDigitPosArr, valLen) {
              var maskDiff = options.reverse ? newVal.length - valLen : 0;
              p.maskDigitPosMap = {};
              for (var i = 0; i < maskDigitPosArr.length; i++) {
                p.maskDigitPosMap[maskDigitPosArr[i] + maskDiff] = 1;
              }
            },
            callbacks: function (e) {
                var val = p.val(),
                    changed = val !== oldValue,
                    defaultArgs = [val, e, el, options],
                    callback = function(name, criteria, args) {
                        if (typeof options[name] === 'function' && criteria) {
                            options[name].apply(this, args);
                        }
                    };

                callback('onChange', changed === true, defaultArgs);
                callback('onKeyPress', changed === true, defaultArgs);
                callback('onComplete', val.length === mask.length, defaultArgs);
                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);
            }
        };

        el = $(el);
        var jMask = this, oldValue = p.val(), regexMask;

        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;

        // public methods
        jMask.mask = mask;
        jMask.options = options;
        jMask.remove = function() {
            var caret = p.getCaret();
            p.destroyEvents();
            p.val(jMask.getCleanVal());
            p.setCaret(caret);
            return el;
        };

        // get value without mask
        jMask.getCleanVal = function() {
           return p.getMasked(true);
        };

        // get masked value without the value being in the input or element
        jMask.getMaskedVal = function(val) {
           return p.getMasked(false, val);
        };

       jMask.init = function(onlyMask) {
            onlyMask = onlyMask || false;
            options = options || {};

            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;
            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;
            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);

            jMask = $.extend(true, {}, jMask, options);

            regexMask = p.getRegexMask();

            if (onlyMask) {
                p.events();
                p.val(p.getMasked());
            } else {
                if (options.placeholder) {
                    el.attr('placeholder' , options.placeholder);
                }

                // this is necessary, otherwise if the user submit the form
                // and then press the "back" button, the autocomplete will erase
                // the data. Works fine on IE9+, FF, Opera, Safari.
                if (el.data('mask')) {
                  el.attr('autocomplete', 'off');
                }

                // detect if is necessary let the user type freely.
                // for is a lot faster than forEach.
                for (var i = 0, maxlength = true; i < mask.length; i++) {
                    var translation = jMask.translation[mask.charAt(i)];
                    if (translation && translation.recursive) {
                        maxlength = false;
                        break;
                    }
                }

                if (maxlength) {
                    el.attr('maxlength', mask.length);
                }

                p.destroyEvents();
                p.events();

                var caret = p.getCaret();
                p.val(p.getMasked());
                p.setCaret(caret);
            }
        };

        jMask.init(!el.is('input'));
    };

    $.maskWatchers = {};
    var HTMLAttributes = function () {
        var input = $(this),
            options = {},
            prefix = 'data-mask-',
            mask = input.attr('data-mask');

        if (input.attr(prefix + 'reverse')) {
            options.reverse = true;
        }

        if (input.attr(prefix + 'clearifnotmatch')) {
            options.clearIfNotMatch = true;
        }

        if (input.attr(prefix + 'selectonfocus') === 'true') {
           options.selectOnFocus = true;
        }

        if (notSameMaskObject(input, mask, options)) {
            return input.data('mask', new Mask(this, mask, options));
        }
    },
    notSameMaskObject = function(field, mask, options) {
        options = options || {};
        var maskObject = $(field).data('mask'),
            stringify = JSON.stringify,
            value = $(field).val() || $(field).text();
        try {
            if (typeof mask === 'function') {
                mask = mask(value);
            }
            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;
        } catch (e) {}
    },
    eventSupported = function(eventName) {
        var el = document.createElement('div'), isSupported;

        eventName = 'on' + eventName;
        isSupported = (eventName in el);

        if ( !isSupported ) {
            el.setAttribute(eventName, 'return;');
            isSupported = typeof el[eventName] === 'function';
        }
        el = null;

        return isSupported;
    };

    $.fn.mask = function(mask, options) {
        options = options || {};
        var selector = this.selector,
            globals = $.jMaskGlobals,
            interval = globals.watchInterval,
            watchInputs = options.watchInputs || globals.watchInputs,
            maskFunction = function() {
                if (notSameMaskObject(this, mask, options)) {
                    return $(this).data('mask', new Mask(this, mask, options));
                }
            };

        $(this).each(maskFunction);

        if (selector && selector !== '' && watchInputs) {
            clearInterval($.maskWatchers[selector]);
            $.maskWatchers[selector] = setInterval(function(){
                $(document).find(selector).each(maskFunction);
            }, interval);
        }
        return this;
    };

    $.fn.masked = function(val) {
        return this.data('mask').getMaskedVal(val);
    };

    $.fn.unmask = function() {
        clearInterval($.maskWatchers[this.selector]);
        delete $.maskWatchers[this.selector];
        return this.each(function() {
            var dataMask = $(this).data('mask');
            if (dataMask) {
                dataMask.remove().removeData('mask');
            }
        });
    };

    $.fn.cleanVal = function() {
        return this.data('mask').getCleanVal();
    };

    $.applyDataMask = function(selector) {
        selector = selector || $.jMaskGlobals.maskElements;
        var $selector = (selector instanceof $) ? selector : $(selector);
        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);
    };

    var globals = {
        maskElements: 'input,td,span,div',
        dataMaskAttr: '*[data-mask]',
        dataMask: true,
        watchInterval: 300,
        watchInputs: true,
        // old versions of chrome dont work great with input event
        useInput: !/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent) && eventSupported('input'),
        watchDataMask: false,
        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],
        translation: {
            '0': {pattern: /\d/},
            '9': {pattern: /\d/, optional: true},
            '#': {pattern: /\d/, recursive: true},
            'A': {pattern: /[a-zA-Z0-9]/},
            'S': {pattern: /[a-zA-Z]/}
        }
    };

    $.jMaskGlobals = $.jMaskGlobals || {};
    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);

    // looking for inputs with data-mask attribute
    if (globals.dataMask) {
        $.applyDataMask();
    }

    setInterval(function() {
        if ($.jMaskGlobals.watchDataMask) {
            $.applyDataMask();
        }
    }, globals.watchInterval);
}, window.jQuery, window.Zepto));

/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

(function (factory) {
    if ( typeof define === 'function' && define.amd ) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS style for Browserify
        module.exports = factory;
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {

    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?
                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice  = Array.prototype.slice,
        nullLowestDeltaTimeout, lowestDelta;

    if ( $.event.fixHooks ) {
        for ( var i = toFix.length; i; ) {
            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;
        }
    }

    var special = $.event.special.mousewheel = {
        version: '3.1.12',

        setup: function() {
            if ( this.addEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.addEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = handler;
            }
            // Store the line height and page height for this particular element
            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
        },

        teardown: function() {
            if ( this.removeEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.removeEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = null;
            }
            // Clean up the data we added to the element
            $.removeData(this, 'mousewheel-line-height');
            $.removeData(this, 'mousewheel-page-height');
        },

        getLineHeight: function(elem) {
            var $elem = $(elem),
                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();
            if (!$parent.length) {
                $parent = $('body');
            }
            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;
        },

        getPageHeight: function(elem) {
            return $(elem).height();
        },

        settings: {
            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below
            normalizeOffset: true  // calls getBoundingClientRect for each event
        }
    };

    $.fn.extend({
        mousewheel: function(fn) {
            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
        },

        unmousewheel: function(fn) {
            return this.unbind('mousewheel', fn);
        }
    });


    function handler(event) {
        var orgEvent   = event || window.event,
            args       = slice.call(arguments, 1),
            delta      = 0,
            deltaX     = 0,
            deltaY     = 0,
            absDelta   = 0,
            offsetX    = 0,
            offsetY    = 0;
        event = $.event.fix(orgEvent);
        event.type = 'mousewheel';

        // Old school scrollwheel delta
        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }
        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }
        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }
        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }

        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
            deltaX = deltaY * -1;
            deltaY = 0;
        }

        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
        delta = deltaY === 0 ? deltaX : deltaY;

        // New school wheel delta (wheel event)
        if ( 'deltaY' in orgEvent ) {
            deltaY = orgEvent.deltaY * -1;
            delta  = deltaY;
        }
        if ( 'deltaX' in orgEvent ) {
            deltaX = orgEvent.deltaX;
            if ( deltaY === 0 ) { delta  = deltaX * -1; }
        }

        // No change actually happened, no reason to go any further
        if ( deltaY === 0 && deltaX === 0 ) { return; }

        // Need to convert lines and pages to pixels if we aren't already in pixels
        // There are three delta modes:
        //   * deltaMode 0 is by pixels, nothing to do
        //   * deltaMode 1 is by lines
        //   * deltaMode 2 is by pages
        if ( orgEvent.deltaMode === 1 ) {
            var lineHeight = $.data(this, 'mousewheel-line-height');
            delta  *= lineHeight;
            deltaY *= lineHeight;
            deltaX *= lineHeight;
        } else if ( orgEvent.deltaMode === 2 ) {
            var pageHeight = $.data(this, 'mousewheel-page-height');
            delta  *= pageHeight;
            deltaY *= pageHeight;
            deltaX *= pageHeight;
        }

        // Store lowest absolute delta to normalize the delta values
        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );

        if ( !lowestDelta || absDelta < lowestDelta ) {
            lowestDelta = absDelta;

            // Adjust older deltas if necessary
            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
                lowestDelta /= 40;
            }
        }

        // Adjust older deltas if necessary
        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
            // Divide all the things by 40!
            delta  /= 40;
            deltaX /= 40;
            deltaY /= 40;
        }

        // Get a whole, normalized value for the deltas
        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);
        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);
        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);

        // Normalise offsetX and offsetY properties
        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {
            var boundingRect = this.getBoundingClientRect();
            offsetX = event.clientX - boundingRect.left;
            offsetY = event.clientY - boundingRect.top;
        }

        // Add information to the event object
        event.deltaX = deltaX;
        event.deltaY = deltaY;
        event.deltaFactor = lowestDelta;
        event.offsetX = offsetX;
        event.offsetY = offsetY;
        // Go ahead and set deltaMode to 0 since we converted to pixels
        // Although this is a little odd since we overwrite the deltaX/Y
        // properties with normalized deltas.
        event.deltaMode = 0;

        // Add event and delta to the front of the arguments
        args.unshift(event, delta, deltaX, deltaY);

        // Clearout lowestDelta after sometime to better
        // handle multiple device types that give different
        // a different lowestDelta
        // Ex: trackpad = 3 and mouse wheel = 120
        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }
        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

        return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
        lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
        // If this is an older event and the delta is divisable by 120,
        // then we are assuming that the browser is treating this as an
        // older mouse wheel event and that we should divide the deltas
        // by 40 to try and get a more usable deltaFactor.
        // Side note, this actually impacts the reported scroll distance
        // in older browsers and can cause scrolling to be slower than native.
        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }

}));

/*!
 * jScrollPane - v2.0.23 - 2016-01-28
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2014 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.fn.jScrollPane=function(b){function c(b,c){function d(c){var f,h,j,k,l,o,p=!1,q=!1;if(N=c,void 0===O)l=b.scrollTop(),o=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),P=b.innerWidth()+rb,Q=b.innerHeight(),b.width(P),O=a('<div class="jspPane" />').css("padding",qb).append(b.children()),R=a('<div class="jspContainer" />').css({width:P+"px",height:Q+"px"}).append(O).appendTo(b);else{if(b.css("width",""),p=N.stickToBottom&&A(),q=N.stickToRight&&B(),k=b.innerWidth()+rb!=P||b.outerHeight()!=Q,k&&(P=b.innerWidth()+rb,Q=b.innerHeight(),R.css({width:P+"px",height:Q+"px"})),!k&&sb==S&&O.outerHeight()==T)return void b.width(P);sb=S,O.css("width",""),b.width(P),R.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}O.css("overflow","auto"),S=c.contentWidth?c.contentWidth:O[0].scrollWidth,T=O[0].scrollHeight,O.css("overflow",""),U=S/P,V=T/Q,W=V>1,X=U>1,X||W?(b.addClass("jspScrollable"),f=N.maintainPosition&&($||bb),f&&(h=y(),j=z()),e(),g(),i(),f&&(w(q?S-P:h,!1),v(p?T-Q:j,!1)),F(),C(),L(),N.enableKeyboardNavigation&&H(),N.clickOnTrack&&m(),J(),N.hijackInternalLinks&&K()):(b.removeClass("jspScrollable"),O.css({top:0,left:0,width:R.width()-rb}),D(),G(),I(),n()),N.autoReinitialise&&!pb?pb=setInterval(function(){d(N)},N.autoReinitialiseDelay):!N.autoReinitialise&&pb&&clearInterval(pb),l&&b.scrollTop(0)&&v(l,!1),o&&b.scrollLeft(0)&&w(o,!1),b.trigger("jsp-initialised",[X||W])}function e(){W&&(R.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />'))),cb=R.find(">.jspVerticalBar"),db=cb.find(">.jspTrack"),Y=db.find(">.jspDrag"),N.showArrows&&(hb=a('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",k(0,-1)).bind("click.jsp",E),ib=a('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",k(0,1)).bind("click.jsp",E),N.arrowScrollOnHover&&(hb.bind("mouseover.jsp",k(0,-1,hb)),ib.bind("mouseover.jsp",k(0,1,ib))),j(db,N.verticalArrowPositions,hb,ib)),fb=Q,R.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){fb-=a(this).outerHeight()}),Y.hover(function(){Y.addClass("jspHover")},function(){Y.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),Y.addClass("jspActive");var c=b.pageY-Y.position().top;return a("html").bind("mousemove.jsp",function(a){p(a.pageY-c,!1)}).bind("mouseup.jsp mouseleave.jsp",o),!1}),f())}function f(){db.height(fb+"px"),$=0,eb=N.verticalGutter+db.outerWidth(),O.width(P-eb-rb);try{0===cb.position().left&&O.css("margin-left",eb+"px")}catch(a){}}function g(){X&&(R.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),jb=R.find(">.jspHorizontalBar"),kb=jb.find(">.jspTrack"),_=kb.find(">.jspDrag"),N.showArrows&&(nb=a('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",k(-1,0)).bind("click.jsp",E),ob=a('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",k(1,0)).bind("click.jsp",E),N.arrowScrollOnHover&&(nb.bind("mouseover.jsp",k(-1,0,nb)),ob.bind("mouseover.jsp",k(1,0,ob))),j(kb,N.horizontalArrowPositions,nb,ob)),_.hover(function(){_.addClass("jspHover")},function(){_.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),_.addClass("jspActive");var c=b.pageX-_.position().left;return a("html").bind("mousemove.jsp",function(a){r(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",o),!1}),lb=R.innerWidth(),h())}function h(){R.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){lb-=a(this).outerWidth()}),kb.width(lb+"px"),bb=0}function i(){if(X&&W){var b=kb.outerHeight(),c=db.outerWidth();fb-=b,a(jb).find(">.jspCap:visible,>.jspArrow").each(function(){lb+=a(this).outerWidth()}),lb-=c,Q-=c,P-=b,kb.parent().append(a('<div class="jspCorner" />').css("width",b+"px")),f(),h()}X&&O.width(R.outerWidth()-rb+"px"),T=O.outerHeight(),V=T/Q,X&&(mb=Math.ceil(1/U*lb),mb>N.horizontalDragMaxWidth?mb=N.horizontalDragMaxWidth:mb<N.horizontalDragMinWidth&&(mb=N.horizontalDragMinWidth),_.width(mb+"px"),ab=lb-mb,s(bb)),W&&(gb=Math.ceil(1/V*fb),gb>N.verticalDragMaxHeight?gb=N.verticalDragMaxHeight:gb<N.verticalDragMinHeight&&(gb=N.verticalDragMinHeight),Y.height(gb+"px"),Z=fb-gb,q($))}function j(a,b,c,d){var e,f="before",g="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split"),b==f?g=b:b==g&&(f=b,e=c,c=d,d=e),a[f](c)[g](d)}function k(a,b,c){return function(){return l(a,b,this,c),this.blur(),!1}}function l(b,c,d,e){d=a(d).addClass("jspActive");var f,g,h=!0,i=function(){0!==b&&tb.scrollByX(b*N.arrowButtonSpeed),0!==c&&tb.scrollByY(c*N.arrowButtonSpeed),g=setTimeout(i,h?N.initialDelay:N.arrowRepeatFreq),h=!1};i(),f=e?"mouseout.jsp":"mouseup.jsp",e=e||a("html"),e.bind(f,function(){d.removeClass("jspActive"),g&&clearTimeout(g),g=null,e.unbind(f)})}function m(){n(),W&&db.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageY-e.top-$,g=!0,h=function(){var a=d.offset(),e=b.pageY-a.top-gb/2,j=Q*N.scrollPagePercent,k=Z*j/(T-Q);if(0>f)$-k>e?tb.scrollByY(-j):p(e);else{if(!(f>0))return void i();e>$+k?tb.scrollByY(j):p(e)}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i)};return h(),a(document).bind("mouseup.jsp",i),!1}}),X&&kb.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageX-e.left-bb,g=!0,h=function(){var a=d.offset(),e=b.pageX-a.left-mb/2,j=P*N.scrollPagePercent,k=ab*j/(S-P);if(0>f)bb-k>e?tb.scrollByX(-j):r(e);else{if(!(f>0))return void i();e>bb+k?tb.scrollByX(j):r(e)}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i)};return h(),a(document).bind("mouseup.jsp",i),!1}})}function n(){kb&&kb.unbind("mousedown.jsp"),db&&db.unbind("mousedown.jsp")}function o(){a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Y&&Y.removeClass("jspActive"),_&&_.removeClass("jspActive")}function p(c,d){if(W){0>c?c=0:c>Z&&(c=Z);var e=new a.Event("jsp-will-scroll-y");if(b.trigger(e,[c]),!e.isDefaultPrevented()){var f=c||0,g=0===f,h=f==Z,i=c/Z,j=-i*(T-Q);void 0===d&&(d=N.animateScroll),d?tb.animate(Y,"top",c,q,function(){b.trigger("jsp-user-scroll-y",[-j,g,h])}):(Y.css("top",c),q(c),b.trigger("jsp-user-scroll-y",[-j,g,h]))}}}function q(a){void 0===a&&(a=Y.position().top),R.scrollTop(0),$=a||0;var c=0===$,d=$==Z,e=a/Z,f=-e*(T-Q);(ub!=c||wb!=d)&&(ub=c,wb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),t(c,d),O.css("top",f),b.trigger("jsp-scroll-y",[-f,c,d]).trigger("scroll")}function r(c,d){if(X){0>c?c=0:c>ab&&(c=ab);var e=new a.Event("jsp-will-scroll-x");if(b.trigger(e,[c]),!e.isDefaultPrevented()){var f=c||0,g=0===f,h=f==ab,i=c/ab,j=-i*(S-P);void 0===d&&(d=N.animateScroll),d?tb.animate(_,"left",c,s,function(){b.trigger("jsp-user-scroll-x",[-j,g,h])}):(_.css("left",c),s(c),b.trigger("jsp-user-scroll-x",[-j,g,h]))}}}function s(a){void 0===a&&(a=_.position().left),R.scrollTop(0),bb=a||0;var c=0===bb,d=bb==ab,e=a/ab,f=-e*(S-P);(vb!=c||xb!=d)&&(vb=c,xb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),u(c,d),O.css("left",f),b.trigger("jsp-scroll-x",[-f,c,d]).trigger("scroll")}function t(a,b){N.showArrows&&(hb[a?"addClass":"removeClass"]("jspDisabled"),ib[b?"addClass":"removeClass"]("jspDisabled"))}function u(a,b){N.showArrows&&(nb[a?"addClass":"removeClass"]("jspDisabled"),ob[b?"addClass":"removeClass"]("jspDisabled"))}function v(a,b){var c=a/(T-Q);p(c*Z,b)}function w(a,b){var c=a/(S-P);r(c*ab,b)}function x(b,c,d){var e,f,g,h,i,j,k,l,m,n=0,o=0;try{e=a(b)}catch(p){return}for(f=e.outerHeight(),g=e.outerWidth(),R.scrollTop(0),R.scrollLeft(0);!e.is(".jspPane");)if(n+=e.position().top,o+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;h=z(),j=h+Q,h>n||c?l=n-N.horizontalGutter:n+f>j&&(l=n-Q+f+N.horizontalGutter),isNaN(l)||v(l,d),i=y(),k=i+P,i>o||c?m=o-N.horizontalGutter:o+g>k&&(m=o-P+g+N.horizontalGutter),isNaN(m)||w(m,d)}function y(){return-O.position().left}function z(){return-O.position().top}function A(){var a=T-Q;return a>20&&a-z()<10}function B(){var a=S-P;return a>20&&a-y()<10}function C(){R.unbind(zb).bind(zb,function(a,b,c,d){bb||(bb=0),$||($=0);var e=bb,f=$,g=a.deltaFactor||N.mouseWheelSpeed;return tb.scrollBy(c*g,-d*g,!1),e==bb&&f==$})}function D(){R.unbind(zb)}function E(){return!1}function F(){O.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){x(a.target,!1)})}function G(){O.find(":input,a").unbind("focus.jsp")}function H(){function c(){var a=bb,b=$;switch(d){case 40:tb.scrollByY(N.keyboardSpeed,!1);break;case 38:tb.scrollByY(-N.keyboardSpeed,!1);break;case 34:case 32:tb.scrollByY(Q*N.scrollPagePercent,!1);break;case 33:tb.scrollByY(-Q*N.scrollPagePercent,!1);break;case 39:tb.scrollByX(N.keyboardSpeed,!1);break;case 37:tb.scrollByX(-N.keyboardSpeed,!1)}return e=a!=bb||b!=$}var d,e,f=[];X&&f.push(jb[0]),W&&f.push(cb[0]),O.bind("focus.jsp",function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(b){if(b.target===this||f.length&&a(b.target).closest(f).length){var g=bb,h=$;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=b.keyCode,c();break;case 35:v(T-Q),d=null;break;case 36:v(0),d=null}return e=b.keyCode==d&&g!=bb||h!=$,!e}}).bind("keypress.jsp",function(b){return b.keyCode==d&&c(),b.target===this||f.length&&a(b.target).closest(f).length?!e:void 0}),N.hideFocus?(b.css("outline","none"),"hideFocus"in R[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in R[0]&&b.attr("hideFocus",!1))}function I(){b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),O.unbind(".jsp")}function J(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash.substr(1));try{b=a("#"+d+', a[name="'+d+'"]')}catch(e){return}b.length&&O.find(d)&&(0===R.scrollTop()?c=setInterval(function(){R.scrollTop()>0&&(x(b,!0),a(document).scrollTop(R.position().top),clearInterval(c))},50):(x(b,!0),a(document).scrollTop(R.position().top)))}}function K(){a(document.body).data("jspHijack")||(a(document.body).data("jspHijack",!0),a(document.body).delegate('a[href*="#"]',"click",function(b){var c,d,e,f,g,h,i=this.href.substr(0,this.href.indexOf("#")),j=location.href;if(-1!==location.href.indexOf("#")&&(j=location.href.substr(0,location.href.indexOf("#"))),i===j){c=escape(this.href.substr(this.href.indexOf("#")+1));try{d=a("#"+c+', a[name="'+c+'"]')}catch(k){return}d.length&&(e=d.closest(".jspScrollable"),f=e.data("jsp"),f.scrollToElement(d,!0),e[0].scrollIntoView&&(g=a(window).scrollTop(),h=d.offset().top,(g>h||h>g+a(window).height())&&e[0].scrollIntoView()),b.preventDefault())}}))}function L(){var a,b,c,d,e,f=!1;R.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){var h=g.originalEvent.touches[0];a=y(),b=z(),c=h.pageX,d=h.pageY,e=!1,f=!0}).bind("touchmove.jsp",function(g){if(f){var h=g.originalEvent.touches[0],i=bb,j=$;return tb.scrollTo(a+c-h.pageX,b+d-h.pageY),e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,i==bb&&j==$}}).bind("touchend.jsp",function(){f=!1}).bind("click.jsp-touchclick",function(){return e?(e=!1,!1):void 0})}function M(){var a=z(),c=y();b.removeClass("jspScrollable").unbind(".jsp"),O.unbind(".jsp"),b.replaceWith(yb.append(O.children())),yb.scrollTop(a),yb.scrollLeft(c),pb&&clearInterval(pb)}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb=this,ub=!0,vb=!0,wb=!1,xb=!1,yb=b.clone(!1,!1).empty(),zb=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===b.css("box-sizing")?(qb=0,rb=0):(qb=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),rb=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0)),a.extend(tb,{reinitialise:function(b){b=a.extend({},N,b),d(b)},scrollToElement:function(a,b,c){x(a,b,c)},scrollTo:function(a,b,c){w(a,c),v(b,c)},scrollToX:function(a,b){w(a,b)},scrollToY:function(a,b){v(a,b)},scrollToPercentX:function(a,b){w(a*(S-P),b)},scrollToPercentY:function(a,b){v(a*(T-Q),b)},scrollBy:function(a,b,c){tb.scrollByX(a,c),tb.scrollByY(b,c)},scrollByX:function(a,b){var c=y()+Math[0>a?"floor":"ceil"](a),d=c/(S-P);r(d*ab,b)},scrollByY:function(a,b){var c=z()+Math[0>a?"floor":"ceil"](a),d=c/(T-Q);p(d*Z,b)},positionDragX:function(a,b){r(a,b)},positionDragY:function(a,b){p(a,b)},animate:function(a,b,c,d,e){var f={};f[b]=c,a.animate(f,{duration:N.animateDuration,easing:N.animateEase,queue:!1,step:d,complete:e})},getContentPositionX:function(){return y()},getContentPositionY:function(){return z()},getContentWidth:function(){return S},getContentHeight:function(){return T},getPercentScrolledX:function(){return y()/(S-P)},getPercentScrolledY:function(){return z()/(T-Q)},getIsScrollableH:function(){return X},getIsScrollableV:function(){return W},getContentPane:function(){return O},scrollToBottom:function(a){p(Z,a)},hijackInternalLinks:a.noop,destroy:function(){M()}}),d(c)}return b=a.extend({},a.fn.jScrollPane.defaults,b),a.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){b[this]=b[this]||b.speed}),this.each(function(){var d=a(this),e=d.data("jsp");e?e.reinitialise(b):(a("script",d).filter('[type="text/javascript"],:not([type])').remove(),e=new c(d,b),d.data("jsp",e))})},a.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}});
/*!
 * 
 *             SimpleBar.js - v2.4.3
 *             Scrollbars, simpler.
 *             https://grsmto.github.io/simplebar/
 *             
 *             Made by Adrien Grsmto from a fork by Jonathan Nicol
 *             Under MIT License
 *         
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.SimpleBar=n():t.SimpleBar=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=e(194),s=r(c),u=e(191),a=r(u),f=e(193),l=r(f);e(169),e(174),e(177),e(178),e(172),e(175),e(173),e(176),e(170),e(171),e(113),e(160),e(179),e(180),e(142),e(143),e(144),e(145),e(148),e(146),e(147),e(149),e(150),e(151),e(152),e(154),e(153),e(141),e(168),e(138),e(139),e(140),e(112),e(165),e(163),e(161),e(166),e(167),e(162),e(164),e(155),e(156),e(157),e(159),e(158),e(110),e(111),e(106),e(109),e(108),e(107),e(66),e(132),e(133),e(135),e(134),e(131),e(137),e(136),e(114),e(115),e(116),e(117),e(118),e(119),e(120),e(121),e(122),e(123),e(125),e(124),e(126),e(127),e(128),e(129),e(130),e(181),e(184),e(182),e(183),e(186),e(185),e(189),e(188),e(187),e(192),e(190);var h=function(){function t(n,e){i(this,t),this.el=n,this.flashTimeout,this.contentEl,this.scrollContentEl,this.dragOffset={x:0,y:0},this.isVisible={x:!0,y:!0},this.scrollOffsetAttr={x:"scrollLeft",y:"scrollTop"},this.sizeAttr={x:"offsetWidth",y:"offsetHeight"},this.scrollSizeAttr={x:"scrollWidth",y:"scrollHeight"},this.offsetAttr={x:"left",y:"top"},this.globalObserver,this.mutationObserver,this.resizeObserver,this.currentAxis,this.options=Object.assign({},t.defaultOptions,e),this.classNames=this.options.classNames,this.scrollbarWidth=(0,s.default)(),this.offsetSize=20,this.flashScrollbar=this.flashScrollbar.bind(this),this.onDragY=this.onDragY.bind(this),this.onDragX=this.onDragX.bind(this),this.onScrollY=this.onScrollY.bind(this),this.onScrollX=this.onScrollX.bind(this),this.drag=this.drag.bind(this),this.onEndDrag=this.onEndDrag.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.recalculate=(0,a.default)(this.recalculate,100,{leading:!0,trailing:!1}),this.init()}return o(t,[{key:"init",value:function(){this.el.SimpleBar=this,this.initDOM(),this.scrollbarX=this.trackX.querySelector("."+this.classNames.scrollbar),this.scrollbarY=this.trackY.querySelector("."+this.classNames.scrollbar),this.scrollContentEl.style.paddingRight=(this.scrollbarWidth||this.offsetSize)+"px",this.scrollContentEl.style.marginBottom="-"+(2*this.scrollbarWidth||this.offsetSize)+"px",this.contentEl.style.paddingBottom=(this.scrollbarWidth||this.offsetSize)+"px",0!==this.scrollbarWidth&&(this.contentEl.style.marginRight="-"+this.scrollbarWidth+"px"),this.recalculate(),this.initListeners()}},{key:"initDOM",value:function(){var t=this;if(Array.from(this.el.children).find(function(n){return n.classList.contains(t.classNames.scrollContent)}))this.trackX=this.el.querySelector("."+this.classNames.track+".horizontal"),this.trackY=this.el.querySelector("."+this.classNames.track+".vertical"),this.scrollContentEl=this.el.querySelector("."+this.classNames.scrollContent),this.contentEl=this.el.querySelector("."+this.classNames.content);else{for(this.scrollContentEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.scrollContentEl.classList.add(this.classNames.scrollContent),this.contentEl.classList.add(this.classNames.content);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.scrollContentEl.appendChild(this.contentEl),this.el.appendChild(this.scrollContentEl)}if(!this.trackX||!this.trackY){var n=document.createElement("div"),e=document.createElement("div");n.classList.add(this.classNames.track),e.classList.add(this.classNames.scrollbar),n.appendChild(e),this.trackX=n.cloneNode(!0),this.trackX.classList.add("horizontal"),this.trackY=n.cloneNode(!0),this.trackY.classList.add("vertical"),this.el.insertBefore(this.trackX,this.el.firstChild),this.el.insertBefore(this.trackY,this.el.firstChild)}this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var t=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),this.scrollbarY.addEventListener("mousedown",this.onDragY),this.scrollbarX.addEventListener("mousedown",this.onDragX),this.scrollContentEl.addEventListener("scroll",this.onScrollY),this.contentEl.addEventListener("scroll",this.onScrollX),"undefined"!=typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(n){n.forEach(function(n){(t.isChildNode(n.target)||n.addedNodes.length)&&t.recalculate()})}),this.mutationObserver.observe(this.el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.resizeObserver=new l.default(this.recalculate.bind(this)),this.resizeObserver.observe(this.el)}},{key:"removeListeners",value:function(){this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),this.scrollbarX.removeEventListener("mousedown",this.onDragX),this.scrollbarY.removeEventListener("mousedown",this.onDragY),this.scrollContentEl.removeEventListener("scroll",this.onScrollY),this.contentEl.removeEventListener("scroll",this.onScrollX),this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"onDragX",value:function(t){this.onDrag(t,"x")}},{key:"onDragY",value:function(t){this.onDrag(t,"y")}},{key:"onDrag",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";t.preventDefault();var e="y"===n?this.scrollbarY:this.scrollbarX,r="y"===n?t.pageY:t.pageX;this.dragOffset[n]=r-e.getBoundingClientRect()[this.offsetAttr[n]],this.currentAxis=n,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.onEndDrag)}},{key:"drag",value:function(t){var n=void 0,e=void 0,r=void 0;t.preventDefault(),"y"===this.currentAxis?(n=t.pageY,e=this.trackY,r=this.scrollContentEl):(n=t.pageX,e=this.trackX,r=this.contentEl);var i=n-e.getBoundingClientRect()[this.offsetAttr[this.currentAxis]]-this.dragOffset[this.currentAxis],o=i/e[this.sizeAttr[this.currentAxis]],c=o*this.contentEl[this.scrollSizeAttr[this.currentAxis]];r[this.scrollOffsetAttr[this.currentAxis]]=c}},{key:"onEndDrag",value:function(){document.removeEventListener("mousemove",this.drag),document.removeEventListener("mouseup",this.onEndDrag)}},{key:"resizeScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",n=void 0,e=void 0,r=void 0,i=void 0,o=void 0;"x"===t?(n=this.trackX,e=this.scrollbarX,r=this.contentEl[this.scrollOffsetAttr[t]],i=this.contentSizeX,o=this.scrollbarXSize):(n=this.trackY,e=this.scrollbarY,r=this.scrollContentEl[this.scrollOffsetAttr[t]],i=this.contentSizeY,o=this.scrollbarYSize);var c=o/i,s=r/(i-o),u=Math.max(~~(c*(o-2))-2,this.options.scrollbarMinSize),a=~~((o-4-u)*s+2);this.isVisible[t]=o<i,this.isVisible[t]?(n.style.visibility="visible","x"===t?(e.style.left=a+"px",e.style.width=u+"px"):(e.style.top=a+"px",e.style.height=u+"px")):n.style.visibility="hidden"}},{key:"onScrollX",value:function(){this.flashScrollbar("x")}},{key:"onScrollY",value:function(){this.flashScrollbar("y")}},{key:"onMouseEnter",value:function(){this.flashScrollbar("x"),this.flashScrollbar("y")}},{key:"flashScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.resizeScrollbar(t),this.showScrollbar(t)}},{key:"showScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.isVisible[t]&&("x"===t?this.scrollbarX.classList.add("visible"):this.scrollbarY.classList.add("visible"),this.options.autoHide&&("number"==typeof this.flashTimeout&&window.clearTimeout(this.flashTimeout),this.flashTimeout=window.setTimeout(this.hideScrollbar.bind(this),1e3)))}},{key:"hideScrollbar",value:function(){this.scrollbarX.classList.remove("visible"),this.scrollbarY.classList.remove("visible"),"number"==typeof this.flashTimeout&&window.clearTimeout(this.flashTimeout)}},{key:"recalculate",value:function(){this.contentSizeX=this.contentEl[this.scrollSizeAttr.x],this.contentSizeY=this.contentEl[this.scrollSizeAttr.y]-(this.scrollbarWidth||this.offsetSize),this.scrollbarXSize=this.trackX[this.sizeAttr.x],this.scrollbarYSize=this.trackY[this.sizeAttr.y],this.resizeScrollbar("x"),this.resizeScrollbar("y"),this.options.autoHide||(this.showScrollbar("x"),this.showScrollbar("y"))}},{key:"getScrollElement",value:function(){return this.scrollContentEl}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"unMount",value:function(){this.removeListeners(),this.el.SimpleBar=null}},{key:"isChildNode",value:function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))}}],[{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(n){n.forEach(function(n){Array.from(n.addedNodes).forEach(function(n){1===n.nodeType&&(n.hasAttribute("data-simplebar")?!n.SimpleBar&&new t(n,t.getElOptions(n)):Array.from(n.querySelectorAll("[data-simplebar]")).forEach(function(n){!n.SimpleBar&&new t(n,t.getElOptions(n))}))}),Array.from(n.removedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?t.SimpleBar&&t.SimpleBar.unMount():Array.from(t.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar&&t.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements.bind(this)):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"getElOptions",value:function(n){var e=Object.keys(t.htmlAttributes).reduce(function(e,r){var i=t.htmlAttributes[r];return n.hasAttribute(i)&&(e[r]=JSON.parse(n.getAttribute(i)||!0)),e},{});return e}},{key:"removeObserver",value:function(){this.globalObserver.disconnect()}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.from(document.querySelectorAll("[data-simplebar]")).forEach(function(n){n.SimpleBar||new t(n,t.getElOptions(n))})}},{key:"defaultOptions",get:function(){return{autoHide:!0,classNames:{content:"simplebar-content",scrollContent:"simplebar-scroll-content",scrollbar:"simplebar-scrollbar",track:"simplebar-track"},scrollbarMinSize:25}}},{key:"htmlAttributes",get:function(){return{autoHide:"data-simplebar-autohide",scrollbarMinSize:"data-simplebar-scrollbar-min-size"}}}]),t}();n.default=h,h.initHtmlApi(),t.exports=n.default},function(t,n,e){var r=e(3),i=e(34),o=e(11),c=e(16),s=e(12),u="prototype",a=function(t,n,e){var f,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,m=t&a.B,b=d?r:y?r[n]||(r[n]={}):(r[n]||{})[u],_=d?i:i[n]||(i[n]={}),w=_[u]||(_[u]={});d&&(e=n);for(f in e)l=!p&&b&&void 0!==b[f],h=(l?b:e)[f],v=m&&l?s(h,r):g&&"function"==typeof h?s(Function.call,h):h,b&&c(b,f,h,t&a.U),_[f]!=h&&o(_,f,v),g&&w[f]!=h&&(w[f]=h)};r.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,e){var r=e(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,e){var r=e(60)("wks"),i=e(22),o=e(3).Symbol,c="function"==typeof o,s=t.exports=function(t){return r[t]||(r[t]=c&&o[t]||(c?o:i)("Symbol."+t))};s.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(2),i=e(71),o=e(40),c=Object.defineProperty;n.f=e(9)?Object.defineProperty:function(t,n,e){if(r(t),n=o(n,!0),r(e),i)try{return c(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(20),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,n,e){t.exports=!e(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(7),i=e(19);t.exports=e(9)?function(t,n,e){return r.f(t,n,i(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(17);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(54),i=e(18);t.exports=function(t){return r(i(t))}},function(t,n,e){"use strict";if(e(9)){var r=e(27),i=e(3),o=e(6),c=e(1),s=e(64),u=e(88),a=e(12),f=e(24),l=e(19),h=e(11),v=e(29),p=e(20),d=e(8),y=e(87),g=e(31),m=e(40),b=e(10),_=e(49),w=e(4),S=e(21),x=e(55),E=e(36),O=e(38),M=e(37).f,A=e(65),L=e(22),j=e(5),k=e(33),T=e(48),P=e(61),F=e(66),N=e(26),C=e(44),R=e(46),D=e(47),I=e(67),W=e(7),z=e(15),B=W.f,Y=z.f,X=i.RangeError,G=i.TypeError,V=i.Uint8Array,U="ArrayBuffer",q="Shared"+U,H="BYTES_PER_ELEMENT",K="prototype",J=Array[K],$=u.ArrayBuffer,Q=u.DataView,Z=k(0),tt=k(2),nt=k(3),et=k(4),rt=k(5),it=k(6),ot=T(!0),ct=T(!1),st=F.values,ut=F.keys,at=F.entries,ft=J.lastIndexOf,lt=J.reduce,ht=J.reduceRight,vt=J.join,pt=J.sort,dt=J.slice,yt=J.toString,gt=J.toLocaleString,mt=j("iterator"),bt=j("toStringTag"),_t=L("typed_constructor"),wt=L("def_constructor"),St=s.CONSTR,xt=s.TYPED,Et=s.VIEW,Ot="Wrong length!",Mt=k(1,function(t,n){return Tt(P(t,t[wt]),n)}),At=o(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Lt=!!V&&!!V[K].set&&o(function(){new V(1).set({})}),jt=function(t,n){var e=p(t);if(e<0||e%n)throw X("Wrong offset!");return e},kt=function(t){if(w(t)&&xt in t)return t;throw G(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&_t in t))throw G("It is not a typed array constructor!");return new t(n)},Pt=function(t,n){return Ft(P(t,t[wt]),n)},Ft=function(t,n){for(var e=0,r=n.length,i=Tt(t,r);r>e;)i[e]=n[e++];return i},Nt=function(t,n,e){B(t,n,{get:function(){return this._d[e]}})},Ct=function(t){var n,e,r,i,o,c,s=S(t),u=arguments.length,f=u>1?arguments[1]:void 0,l=void 0!==f,h=A(s);if(void 0!=h&&!x(h)){for(c=h.call(s),r=[],n=0;!(o=c.next()).done;n++)r.push(o.value);s=r}for(l&&u>2&&(f=a(f,arguments[2],2)),n=0,e=d(s.length),i=Tt(this,e);e>n;n++)i[n]=l?f(s[n],n):s[n];return i},Rt=function(){for(var t=0,n=arguments.length,e=Tt(this,n);n>t;)e[t]=arguments[t++];return e},Dt=!!V&&o(function(){gt.call(new V(1))}),It=function(){return gt.apply(Dt?dt.call(kt(this)):kt(this),arguments)},Wt={copyWithin:function(t,n){return I.call(kt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return et(kt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return D.apply(kt(this),arguments)},filter:function(t){return Pt(this,tt(kt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(kt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(kt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(kt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ct(kt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(kt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(kt(this),arguments)},lastIndexOf:function(t){return ft.apply(kt(this),arguments)},map:function(t){return Mt(kt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(kt(this),arguments)},reduceRight:function(t){return ht.apply(kt(this),arguments)},reverse:function(){for(var t,n=this,e=kt(n).length,r=Math.floor(e/2),i=0;i<r;)t=n[i],n[i++]=n[--e],n[e]=t;return n},some:function(t){return nt(kt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(kt(this),t)},subarray:function(t,n){var e=kt(this),r=e.length,i=g(t,r);return new(P(e,e[wt]))(e.buffer,e.byteOffset+i*e.BYTES_PER_ELEMENT,d((void 0===n?r:g(n,r))-i))}},zt=function(t,n){return Pt(this,dt.call(kt(this),t,n))},Bt=function(t){kt(this);var n=jt(arguments[1],1),e=this.length,r=S(t),i=d(r.length),o=0;if(i+n>e)throw X(Ot);for(;o<i;)this[n+o]=r[o++]},Yt={entries:function(){return at.call(kt(this))},keys:function(){return ut.call(kt(this))},values:function(){return st.call(kt(this))}},Xt=function(t,n){return w(t)&&t[xt]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},Gt=function(t,n){return Xt(t,n=m(n,!0))?l(2,t[n]):Y(t,n)},Vt=function(t,n,e){return!(Xt(t,n=m(n,!0))&&w(e)&&b(e,"value"))||b(e,"get")||b(e,"set")||e.configurable||b(e,"writable")&&!e.writable||b(e,"enumerable")&&!e.enumerable?B(t,n,e):(t[n]=e.value,t)};St||(z.f=Gt,W.f=Vt),c(c.S+c.F*!St,"Object",{getOwnPropertyDescriptor:Gt,defineProperty:Vt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Ut=v({},Wt);v(Ut,Yt),h(Ut,mt,Yt.values),v(Ut,{slice:zt,set:Bt,constructor:function(){},toString:yt,toLocaleString:It}),Nt(Ut,"buffer","b"),Nt(Ut,"byteOffset","o"),Nt(Ut,"byteLength","l"),Nt(Ut,"length","e"),B(Ut,bt,{get:function(){return this[xt]}}),t.exports=function(t,n,e,u){u=!!u;var a=t+(u?"Clamped":"")+"Array",l="get"+t,v="set"+t,p=i[a],g=p||{},m=p&&O(p),b=!p||!s.ABV,S={},x=p&&p[K],A=function(t,e){var r=t._d;return r.v[l](e*n+r.o,At)},L=function(t,e,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[v](e*n+i.o,r,At)},j=function(t,n){B(t,n,{get:function(){return A(this,n)},set:function(t){return L(this,n,t)},enumerable:!0})};b?(p=e(function(t,e,r,i){f(t,p,a,"_d");var o,c,s,u,l=0,v=0;if(w(e)){if(!(e instanceof $||(u=_(e))==U||u==q))return xt in e?Ft(p,e):Ct.call(p,e);o=e,v=jt(r,n);var g=e.byteLength;if(void 0===i){if(g%n)throw X(Ot);if(c=g-v,c<0)throw X(Ot)}else if(c=d(i)*n,c+v>g)throw X(Ot);s=c/n}else s=y(e),c=s*n,o=new $(c);for(h(t,"_d",{b:o,o:v,l:c,e:s,v:new Q(o)});l<s;)j(t,l++)}),x=p[K]=E(Ut),h(x,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&C(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=e(function(t,e,r,i){f(t,p,a);var o;return w(e)?e instanceof $||(o=_(e))==U||o==q?void 0!==i?new g(e,jt(r,n),i):void 0!==r?new g(e,jt(r,n)):new g(e):xt in e?Ft(p,e):Ct.call(p,e):new g(y(e))}),Z(m!==Function.prototype?M(g).concat(M(m)):M(g),function(t){t in p||h(p,t,g[t])}),p[K]=x,r||(x.constructor=p));var k=x[mt],T=!!k&&("values"==k.name||void 0==k.name),P=Yt.values;h(p,_t,!0),h(x,xt,a),h(x,Et,!0),h(x,wt,p),(u?new p(1)[bt]==a:bt in x)||B(x,bt,{get:function(){return a}}),S[a]=p,c(c.G+c.W+c.F*(p!=g),S),c(c.S,a,{BYTES_PER_ELEMENT:n}),c(c.S+c.F*o(function(){g.of.call(p,1)}),a,{from:Ct,of:Rt}),H in x||h(x,H,n),c(c.P,a,Wt),R(a),c(c.P+c.F*Lt,a,{set:Bt}),c(c.P+c.F*!T,a,Yt),r||x.toString==yt||(x.toString=yt),c(c.P+c.F*o(function(){new p(1).slice()}),a,{slice:zt}),c(c.P+c.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){x.toLocaleString.call([1,2])})),a,{toLocaleString:It}),N[a]=T?k:P,r||T||h(x,mt,P)}}else t.exports=function(){}},function(t,n,e){var r=e(39),i=e(19),o=e(13),c=e(40),s=e(10),u=e(71),a=Object.getOwnPropertyDescriptor;n.f=e(9)?a:function(t,n){if(t=o(t),n=c(n,!0),u)try{return a(t,n)}catch(t){}if(s(t,n))return i(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),i=e(11),o=e(10),c=e(22)("src"),s="toString",u=Function[s],a=(""+u).split(s);e(34).inspectSource=function(t){return u.call(t)},(t.exports=function(t,n,e,s){var u="function"==typeof e;u&&(o(e,"name")||i(e,"name",n)),t[n]!==e&&(u&&(o(e,c)||i(e,c,t[n]?""+t[n]:a.join(String(n)))),t===r?t[n]=e:s?t[n]?t[n]=e:i(t,n,e):(delete t[n],i(t,n,e)))})(Function.prototype,s,function(){return"function"==typeof this&&this[c]||u.call(this)})},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(18);t.exports=function(t){return Object(r(t))}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n,e){var r=e(5)("unscopables"),i=Array.prototype;void 0==i[r]&&e(11)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,n){t.exports=function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!");return t}},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n){t.exports={}},function(t,n){t.exports=!1},function(t,n,e){var r=e(82),i=e(52);t.exports=Object.keys||function(t){return r(t,i)}},function(t,n,e){var r=e(16);t.exports=function(t,n,e){for(var i in n)r(t,i,n[i],e);return t}},function(t,n,e){var r=e(7).f,i=e(10),o=e(5)("toStringTag");t.exports=function(t,n,e){t&&!i(t=e?t:t.prototype,o)&&r(t,o,{configurable:!0,value:n})}},function(t,n,e){var r=e(20),i=Math.max,o=Math.min;t.exports=function(t,n){return t=r(t),t<0?i(t+n,0):o(t,n)}},function(t,n,e){var r=e(4);t.exports=function(t,n){if(!r(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,e){var r=e(12),i=e(54),o=e(21),c=e(8),s=e(91);t.exports=function(t,n){var e=1==t,u=2==t,a=3==t,f=4==t,l=6==t,h=5==t||l,v=n||s;return function(n,s,p){for(var d,y,g=o(n),m=i(g),b=r(s,p,3),_=c(m.length),w=0,S=e?v(n,_):u?v(n,0):void 0;_>w;w++)if((h||w in m)&&(d=m[w],y=b(d,w,g),t))if(e)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(f)return!1;return l?-1:a||f?f:S}}},function(t,n){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)},function(t,n,e){var r=e(22)("meta"),i=e(4),o=e(10),c=e(7).f,s=0,u=Object.isExtensible||function(){return!0},a=!e(6)(function(){return u(Object.preventExtensions({}))}),f=function(t){c(t,r,{value:{i:"O"+ ++s,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!n)return"E";f(t)}return t[r].i},h=function(t,n){if(!o(t,r)){if(!u(t))return!0;if(!n)return!1;f(t)}return t[r].w},v=function(t){return a&&p.NEED&&u(t)&&!o(t,r)&&f(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,e){var r=e(2),i=e(99),o=e(52),c=e(59)("IE_PROTO"),s=function(){},u="prototype",a=function(){var t,n=e(51)("iframe"),r=o.length,i="<",c=">";for(n.style.display="none",e(70).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(i+"script"+c+"document.F=Object"+i+"/script"+c),t.close(),a=t.F;r--;)delete a[u][o[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(s[u]=r(t),e=new s,s[u]=null,e[c]=t):e=a(),void 0===n?e:i(e,n)}},function(t,n,e){var r=e(82),i=e(52).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,n,e){var r=e(10),i=e(21),o=e(59)("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(4);t.exports=function(t,n){if(!r(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!r(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){"use strict";var r=e(3),i=e(1),o=e(16),c=e(29),s=e(35),u=e(43),a=e(24),f=e(4),l=e(6),h=e(44),v=e(30),p=e(95);t.exports=function(t,n,e,d,y,g){var m=r[t],b=m,_=y?"set":"add",w=b&&b.prototype,S={},x=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!f(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!f(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})};if("function"==typeof b&&(g||w.forEach&&!l(function(){(new b).entries().next()}))){var E=new b,O=E[_](g?{}:-0,1)!=E,M=l(function(){E.has(1)}),A=h(function(t){new b(t)}),L=!g&&l(function(){for(var t=new b,n=5;n--;)t[_](n,n);return!t.has(-0)});A||(b=n(function(n,e){a(n,b,t);var r=p(new m,n,b);return void 0!=e&&u(e,y,r[_],r),r}),b.prototype=w,w.constructor=b),(M||L)&&(x("delete"),x("has"),y&&x("get")),(L||O)&&x(_),g&&w.clear&&delete w.clear}else b=d.getConstructor(n,t,y,_),c(b.prototype,e),s.NEED=!0;return v(b,t),S[t]=b,i(i.G+i.W+i.F*(b!=m),S),g||d.setStrong(b,t,y),b}},function(t,n,e){"use strict";var r=e(11),i=e(16),o=e(6),c=e(18),s=e(5);t.exports=function(t,n,e){var u=s(t),a=e(c,u,""[t]),f=a[0],l=a[1];o(function(){var n={};return n[u]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,f),r(RegExp.prototype,u,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}},function(t,n,e){var r=e(12),i=e(76),o=e(55),c=e(2),s=e(8),u=e(65),a={},f={},n=t.exports=function(t,n,e,l,h){var v,p,d,y,g=h?function(){return t}:u(t),m=r(e,l,n?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=s(t.length);v>b;b++)if(y=n?m(c(p=t[b])[0],p[1]):m(t[b]),y===a||y===f)return y}else for(d=g.call(t);!(p=d.next()).done;)if(y=i(d,m,p.value,n),y===a||y===f)return y};n.BREAK=a,n.RETURN=f},function(t,n,e){var r=e(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var e=!1;try{var o=[7],c=o[r]();c.next=function(){return{done:e=!0}},o[r]=function(){return c},t(o)}catch(t){}return e}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){"use strict";var r=e(3),i=e(7),o=e(9),c=e(5)("species");t.exports=function(t){var n=r[t];o&&n&&!n[c]&&i.f(n,c,{configurable:!0,get:function(){return this}})}},function(t,n,e){"use strict";var r=e(21),i=e(31),o=e(8);t.exports=function(t){for(var n=r(this),e=o(n.length),c=arguments.length,s=i(c>1?arguments[1]:void 0,e),u=c>2?arguments[2]:void 0,a=void 0===u?e:i(u,e);a>s;)n[s++]=t;return n}},function(t,n,e){var r=e(13),i=e(8),o=e(31);t.exports=function(t){return function(n,e,c){var s,u=r(n),a=i(u.length),f=o(c,a);if(t&&e!=e){for(;a>f;)if(s=u[f++],s!=s)return!0}else for(;a>f;f++)if((t||f in u)&&u[f]===e)return t||f||0;return!t&&-1}}},function(t,n,e){var r=e(25),i=e(5)("toStringTag"),o="Arguments"==r(function(){return arguments}()),c=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,e,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=c(n=Object(t),i))?e:o?r(n):"Object"==(s=r(n))&&"function"==typeof n.callee?"Arguments":s}},function(t,n,e){"use strict";var r=e(7),i=e(19);t.exports=function(t,n,e){n in t?r.f(t,n,i(0,e)):t[n]=e}},function(t,n,e){var r=e(4),i=e(3).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,e){var r=e(5)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,e){var r=e(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(26),i=e(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,n){var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,e){var r=e(4),i=e(2),o=function(t,n){if(i(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=e(12)(Function.call,e(15).f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},function(t,n,e){var r=e(60)("keys"),i=e(22);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,n,e){var r=e(3),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,e){var r=e(2),i=e(17),o=e(5)("species");t.exports=function(t,n){var e,c=r(t).constructor;return void 0===c||void 0==(e=r(c)[o])?n:i(e)}},function(t,n,e){var r=e(75),i=e(18);t.exports=function(t,n,e){if(r(n))throw TypeError("String#"+e+" doesn't accept regex!");return String(i(t))}},function(t,n,e){var r,i,o,c=e(12),s=e(72),u=e(70),a=e(51),f=e(3),l=f.process,h=f.setImmediate,v=f.clearImmediate,p=f.MessageChannel,d=f.Dispatch,y=0,g={},m="onreadystatechange",b=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},_=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return g[++y]=function(){s("function"==typeof t?t:Function(t),n)},r(y),y},v=function(t){delete g[t]},"process"==e(25)(l)?r=function(t){l.nextTick(c(b,t,1))}:d&&d.now?r=function(t){d.now(c(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=_,r=c(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",_,!1)):r=m in a("script")?function(t){u.appendChild(a("script"))[m]=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(c(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,e){for(var r,i=e(3),o=e(11),c=e(22),s=c("typed_array"),u=c("view"),a=!(!i.ArrayBuffer||!i.DataView),f=a,l=0,h=9,v="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<h;)(r=i[v[l++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):f=!1;t.exports={ABV:a,CONSTR:f,TYPED:s,VIEW:u}},function(t,n,e){var r=e(49),i=e(5)("iterator"),o=e(26);t.exports=e(34).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,n,e){"use strict";var r=e(23),i=e(78),o=e(26),c=e(13);t.exports=e(77)(Array,"Array",function(t,n){this._t=c(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,e):"values"==n?i(0,t[e]):i(0,[e,t[e]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,n,e){"use strict";var r=e(21),i=e(31),o=e(8);t.exports=[].copyWithin||function(t,n){var e=r(this),c=o(e.length),s=i(t,c),u=i(n,c),a=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===a?c:i(a,c))-u,c-s),l=1;for(u<s&&s<u+f&&(l=-1,u+=f-1,s+=f-1);f-- >0;)u in e?e[s]=e[u]:delete e[s],s+=l,u+=l;return e}},function(t,n,e){"use strict";var r=e(7).f,i=e(36),o=e(29),c=e(12),s=e(24),u=e(43),a=e(77),f=e(78),l=e(46),h=e(9),v=e(35).fastKey,p=e(32),d=h?"_s":"size",y=function(t,n){var e,r=v(n);if("F"!==r)return t._i[r];for(e=t._f;e;e=e.n)if(e.k==n)return e};t.exports={getConstructor:function(t,n,e,a){var f=t(function(t,r){s(t,f,n,"_i"),t._t=n,t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=r&&u(r,e,t[a],t)});return o(f.prototype,{
clear:function(){for(var t=p(this,n),e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var e=p(this,n),r=y(e,t);if(r){var i=r.n,o=r.p;delete e._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),e._f==r&&(e._f=i),e._l==r&&(e._l=o),e[d]--}return!!r},forEach:function(t){p(this,n);for(var e,r=c(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!y(p(this,n),t)}}),h&&r(f.prototype,"size",{get:function(){return p(this,n)[d]}}),f},def:function(t,n,e){var r,i,o=y(t,n);return o?o.v=e:(t._l=o={i:i=v(n,!0),k:n,v:e,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,e){a(t,n,function(t,e){this._t=p(t,n),this._k=e,this._l=void 0},function(){for(var t=this,n=t._k,e=t._l;e&&e.r;)e=e.p;return t._t&&(t._l=e=e?e.n:t._t._f)?"keys"==n?f(0,e.k):"values"==n?f(0,e.v):f(0,[e.k,e.v]):(t._t=void 0,f(1))},e?"entries":"values",!e,!0),l(n)}}},function(t,n,e){"use strict";var r=e(29),i=e(35).getWeak,o=e(2),c=e(4),s=e(24),u=e(43),a=e(33),f=e(10),l=e(32),h=a(5),v=a(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return h(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var e=g(this,t);e?e[1]=n:this.a.push([t,n])},delete:function(t){var n=v(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,e,o){var a=t(function(t,r){s(t,a,n,"_i"),t._t=n,t._i=p++,t._l=void 0,void 0!=r&&u(r,e,t[o],t)});return r(a.prototype,{delete:function(t){if(!c(t))return!1;var e=i(t);return e===!0?d(l(this,n)).delete(t):e&&f(e,this._i)&&delete e[this._i]},has:function(t){if(!c(t))return!1;var e=i(t);return e===!0?d(l(this,n)).has(t):e&&f(e,this._i)}}),a},def:function(t,n,e){var r=i(o(n),!0);return r===!0?d(t).set(n,e):r[t._i]=e,t},ufstore:d}},function(t,n,e){var r=e(3).document;t.exports=r&&r.documentElement},function(t,n,e){t.exports=!e(9)&&!e(6)(function(){return 7!=Object.defineProperty(e(51)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,e){var r=void 0===e;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)}},function(t,n,e){var r=e(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){var r=e(4),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,n,e){var r=e(4),i=e(25),o=e(5)("match");t.exports=function(t){var n;return r(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,e){var r=e(2);t.exports=function(t,n,e,i){try{return i?n(r(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&r(o.call(t)),n}}},function(t,n,e){"use strict";var r=e(27),i=e(1),o=e(16),c=e(11),s=e(10),u=e(26),a=e(96),f=e(30),l=e(38),h=e(5)("iterator"),v=!([].keys&&"next"in[].keys()),p="@@iterator",d="keys",y="values",g=function(){return this};t.exports=function(t,n,e,m,b,_,w){a(e,n,m);var S,x,E,O=function(t){if(!v&&t in j)return j[t];switch(t){case d:return function(){return new e(this,t)};case y:return function(){return new e(this,t)}}return function(){return new e(this,t)}},M=n+" Iterator",A=b==y,L=!1,j=t.prototype,k=j[h]||j[p]||b&&j[b],T=k||O(b),P=b?A?O("entries"):T:void 0,F="Array"==n?j.entries||k:k;if(F&&(E=l(F.call(new t)),E!==Object.prototype&&E.next&&(f(E,M,!0),r||s(E,h)||c(E,h,g))),A&&k&&k.name!==y&&(L=!0,T=function(){return k.call(this)}),r&&!w||!v&&!L&&j[h]||c(j,h,T),u[n]=T,u[M]=g,b)if(S={values:A?T:O(y),keys:_?T:O(d),entries:P},w)for(x in S)x in j||o(j,x,S[x]);else i(i.P+i.F*(v||L),n,S);return S}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,e){"use strict";function r(t){var n,e;this.promise=new t(function(t,r){if(void 0!==n||void 0!==e)throw TypeError("Bad Promise constructor");n=t,e=r}),this.resolve=i(n),this.reject=i(e)}var i=e(17);t.exports.f=function(t){return new r(t)}},function(t,n,e){"use strict";var r=e(28),i=e(45),o=e(39),c=e(21),s=e(54),u=Object.assign;t.exports=!u||e(6)(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=u({},t)[e]||Object.keys(u({},n)).join("")!=r})?function(t,n){for(var e=c(t),u=arguments.length,a=1,f=i.f,l=o.f;u>a;)for(var h,v=s(arguments[a++]),p=f?r(v).concat(f(v)):r(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(e[h]=v[h]);return e}:u},function(t,n,e){var r=e(10),i=e(13),o=e(48)(!1),c=e(59)("IE_PROTO");t.exports=function(t,n){var e,s=i(t),u=0,a=[];for(e in s)e!=c&&r(s,e)&&a.push(e);for(;n.length>u;)r(s,e=n[u++])&&(~o(a,e)||a.push(e));return a}},function(t,n,e){var r=e(28),i=e(13),o=e(39).f;t.exports=function(t){return function(n){for(var e,c=i(n),s=r(c),u=s.length,a=0,f=[];u>a;)o.call(c,e=s[a++])&&f.push(t?[e,c[e]]:c[e]);return f}}},function(t,n,e){var r=e(37),i=e(45),o=e(2),c=e(3).Reflect;t.exports=c&&c.ownKeys||function(t){var n=r.f(o(t)),e=i.f;return e?n.concat(e(t)):n}},function(t,n,e){var r=e(8),i=e(86),o=e(18);t.exports=function(t,n,e,c){var s=String(o(t)),u=s.length,a=void 0===e?" ":String(e),f=r(n);if(f<=u||""==a)return s;var l=f-u,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),c?h+s:s+h}},function(t,n,e){"use strict";var r=e(20),i=e(18);t.exports=function(t){var n=String(i(this)),e="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(e+=n);return e}},function(t,n,e){var r=e(20),i=e(8);t.exports=function(t){if(void 0===t)return 0;var n=r(t),e=i(n);if(n!==e)throw RangeError("Wrong length!");return e}},function(t,n,e){"use strict";function r(t,n,e){var r,i,o,c=Array(e),s=8*e-n-1,u=(1<<s)-1,a=u>>1,f=23===n?B(2,-24)-B(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=z(t),t!=t||t===I?(i=t!=t?1:0,r=u):(r=Y(X(t)/G),t*(o=B(2,-r))<1&&(r--,o*=2),t+=r+a>=1?f/o:f*B(2,1-a),t*o>=2&&(r++,o/=2),r+a>=u?(i=0,r=u):r+a>=1?(i=(t*o-1)*B(2,n),r+=a):(i=t*B(2,a-1)*B(2,n),r=0));n>=8;c[l++]=255&i,i/=256,n-=8);for(r=r<<n|i,s+=n;s>0;c[l++]=255&r,r/=256,s-=8);return c[--l]|=128*h,c}function i(t,n,e){var r,i=8*e-n-1,o=(1<<i)-1,c=o>>1,s=i-7,u=e-1,a=t[u--],f=127&a;for(a>>=7;s>0;f=256*f+t[u],u--,s-=8);for(r=f&(1<<-s)-1,f>>=-s,s+=n;s>0;r=256*r+t[u],u--,s-=8);if(0===f)f=1-c;else{if(f===o)return r?NaN:a?-I:I;r+=B(2,n),f-=c}return(a?-1:1)*r*B(2,f-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function c(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function u(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return r(t,52,8)}function f(t){return r(t,23,4)}function l(t,n,e){M(t[T],n,{get:function(){return this[e]}})}function h(t,n,e,r){var i=+e,o=E(i);if(o+n>t[K])throw D(F);var c=t[H]._b,s=o+t[J],u=c.slice(s,s+n);return r?u:u.reverse()}function v(t,n,e,r,i,o){var c=+e,s=E(c);if(s+n>t[K])throw D(F);for(var u=t[H]._b,a=s+t[J],f=r(+i),l=0;l<n;l++)u[a+l]=f[o?l:n-l-1]}var p=e(3),d=e(9),y=e(27),g=e(64),m=e(11),b=e(29),_=e(6),w=e(24),S=e(20),x=e(8),E=e(87),O=e(37).f,M=e(7).f,A=e(47),L=e(30),j="ArrayBuffer",k="DataView",T="prototype",P="Wrong length!",F="Wrong index!",N=p[j],C=p[k],R=p.Math,D=p.RangeError,I=p.Infinity,W=N,z=R.abs,B=R.pow,Y=R.floor,X=R.log,G=R.LN2,V="buffer",U="byteLength",q="byteOffset",H=d?"_b":V,K=d?"_l":U,J=d?"_o":q;if(g.ABV){if(!_(function(){N(1)})||!_(function(){new N(-1)})||_(function(){return new N,new N(1.5),new N(NaN),N.name!=j})){N=function(t){return w(this,N),new W(E(t))};for(var $,Q=N[T]=W[T],Z=O(W),tt=0;Z.length>tt;)($=Z[tt++])in N||m(N,$,W[$]);y||(Q.constructor=N)}var nt=new C(new N(2)),et=C[T].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||b(C[T],{setInt8:function(t,n){et.call(this,t,n<<24>>24)},setUint8:function(t,n){et.call(this,t,n<<24>>24)}},!0)}else N=function(t){w(this,N,j);var n=E(t);this._b=A.call(Array(n),0),this[K]=n},C=function(t,n,e){w(this,C,k),w(t,N,k);var r=t[K],i=S(n);if(i<0||i>r)throw D("Wrong offset!");if(e=void 0===e?r-i:x(e),i+e>r)throw D(P);this[H]=t,this[J]=i,this[K]=e},d&&(l(N,U,"_l"),l(C,V,"_b"),l(C,U,"_l"),l(C,q,"_o")),b(C[T],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,c,n)},setUint8:function(t,n){v(this,1,t,c,n)},setInt16:function(t,n){v(this,2,t,s,n,arguments[2])},setUint16:function(t,n){v(this,2,t,s,n,arguments[2])},setInt32:function(t,n){v(this,4,t,u,n,arguments[2])},setUint32:function(t,n){v(this,4,t,u,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});L(N,j),L(C,k),m(C[T],g.VIEW,!0),n[j]=N,n[k]=C},function(t,n,e){n.f=e(5)},function(t,n,e){var r=e(4),i=e(73),o=e(5)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),r(n)&&(n=n[o],null===n&&(n=void 0))),void 0===n?Array:n}},function(t,n,e){var r=e(90);t.exports=function(t,n){return new(r(t))(n)}},function(t,n,e){"use strict";var r=e(17),i=e(4),o=e(72),c=[].slice,s={},u=function(t,n,e){if(!(n in s)){for(var r=[],i=0;i<n;i++)r[i]="a["+i+"]";s[n]=Function("F,a","return new F("+r.join(",")+")")}return s[n](t,e)};t.exports=Function.bind||function(t){var n=r(this),e=c.call(arguments,1),s=function(){var r=e.concat(c.call(arguments));return this instanceof s?u(n,r.length,r):o(n,r,t)};return i(n.prototype)&&(s.prototype=n.prototype),s}},function(t,n,e){var r=e(28),i=e(45),o=e(39);t.exports=function(t){var n=r(t),e=i.f;if(e)for(var c,s=e(t),u=o.f,a=0;s.length>a;)u.call(t,c=s[a++])&&n.push(c);return n}},function(t,n,e){"use strict";var r=e(2);t.exports=function(){var t=r(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,e){var r=e(4),i=e(58).set;t.exports=function(t,n,e){var o,c=n.constructor;return c!==e&&"function"==typeof c&&(o=c.prototype)!==e.prototype&&r(o)&&i&&i(t,o),t}},function(t,n,e){"use strict";var r=e(36),i=e(19),o=e(30),c={};e(11)(c,e(5)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(c,{next:i(1,e)}),o(t,n+" Iterator")}},function(t,n,e){var r=e(57),i=Math.pow,o=i(2,-52),c=i(2,-23),s=i(2,127)*(2-c),u=i(2,-126),a=function(t){return t+1/o-1/o};t.exports=Math.fround||function(t){var n,e,i=Math.abs(t),f=r(t);return i<u?f*a(i/u/c)*u*c:(n=(1+c/o)*i,e=n-(n-i),e>s||e!=e?f*(1/0):f*e)}},function(t,n,e){var r=e(3),i=e(63).set,o=r.MutationObserver||r.WebKitMutationObserver,c=r.process,s=r.Promise,u="process"==e(25)(c);t.exports=function(){var t,n,e,a=function(){var r,i;for(u&&(r=c.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?e():n=void 0,r}}n=void 0,r&&r.enter()};if(u)e=function(){c.nextTick(a)};else if(o){var f=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),e=function(){l.data=f=!f}}else if(s&&s.resolve){var h=s.resolve();e=function(){h.then(a)}}else e=function(){i.call(r,a)};return function(r){var i={fn:r,next:void 0};n&&(n.next=i),t||(t=i,e()),n=i}}},function(t,n,e){var r=e(7),i=e(2),o=e(28);t.exports=e(9)?Object.defineProperties:function(t,n){i(t);for(var e,c=o(n),s=c.length,u=0;s>u;)r.f(t,e=c[u++],n[e]);return t}},function(t,n,e){var r=e(13),i=e(37).f,o={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return c.slice()}};t.exports.f=function(t){return c&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,e){var r=e(2),i=e(4),o=e(80);t.exports=function(t,n){if(r(t),i(n)&&n.constructor===t)return n;var e=o.f(t),c=e.resolve;return c(n),e.promise}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t===1/n:t!=t&&n!=n}},function(t,n,e){var r=e(20),i=e(18);t.exports=function(t){return function(n,e){var o,c,s=String(i(n)),u=r(e),a=s.length;return u<0||u>=a?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===a||(c=s.charCodeAt(u+1))<56320||c>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(c-56320)+65536)}}},function(t,n,e){var r=e(3),i=e(34),o=e(27),c=e(89),s=e(7).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||s(n,t,{value:c.f(t)})}},function(t,n,e){var r=e(1);r(r.P,"Array",{copyWithin:e(67)}),e(23)("copyWithin")},function(t,n,e){var r=e(1);r(r.P,"Array",{fill:e(47)}),e(23)("fill")},function(t,n,e){"use strict";var r=e(1),i=e(33)(6),o="findIndex",c=!0;o in[]&&Array(1)[o](function(){c=!1}),r(r.P+r.F*c,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)(o)},function(t,n,e){"use strict";var r=e(1),i=e(33)(5),o="find",c=!0;o in[]&&Array(1)[o](function(){c=!1}),r(r.P+r.F*c,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)(o)},function(t,n,e){"use strict";var r=e(12),i=e(1),o=e(21),c=e(76),s=e(55),u=e(8),a=e(50),f=e(65);i(i.S+i.F*!e(44)(function(t){Array.from(t)}),"Array",{from:function(t){var n,e,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,m=f(h);if(y&&(d=r(d,p>2?arguments[2]:void 0,2)),void 0==m||v==Array&&s(m))for(n=u(h.length),e=new v(n);n>g;g++)a(e,g,y?d(h[g],g):h[g]);else for(l=m.call(h),e=new v;!(i=l.next()).done;g++)a(e,g,y?c(l,d,[i.value,g],!0):i.value);return e.length=g,e}})},function(t,n,e){"use strict";var r=e(1),i=e(50);r(r.S+r.F*e(6)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,e=new("function"==typeof this?this:Array)(n);n>t;)i(e,t,arguments[t++]);return e.length=n,e}})},function(t,n,e){var r=e(7).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,c="name";c in i||e(9)&&r(i,c,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,e){"use strict";var r=e(68),i=e(32),o="Map";t.exports=e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=r.getEntry(i(this,o),t);return n&&n.v},set:function(t,n){return r.def(i(this,o),0===t?0:t,n)}},r,!0)},function(t,n,e){var r=e(1),i=e(79),o=Math.sqrt,c=Math.acosh;r(r.S+r.F*!(c&&710==Math.floor(c(Number.MAX_VALUE))&&c(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,e){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=e(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(t,n,e){var r=e(1),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,e){var r=e(1),i=e(57);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,e){var r=e(1);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,e){var r=e(1),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,e){var r=e(1),i=e(56);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,e){var r=e(1);r(r.S,"Math",{fround:e(97)})},function(t,n,e){var r=e(1),i=Math.abs;r(r.S,"Math",{hypot:function(t,n){for(var e,r,o=0,c=0,s=arguments.length,u=0;c<s;)e=i(arguments[c++]),u<e?(r=u/e,o=o*r*r+1,u=e):e>0?(r=e/u,o+=r*r):o+=e;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,n,e){var r=e(1),i=Math.imul;r(r.S+r.F*e(6)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(t,n){var e=65535,r=+t,i=+n,o=e&r,c=e&i;return 0|o*c+((e&r>>>16)*c+o*(e&i>>>16)<<16>>>0)}})},function(t,n,e){var r=e(1);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,e){var r=e(1);r(r.S,"Math",{log1p:e(79)})},function(t,n,e){var r=e(1);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,e){var r=e(1);r(r.S,"Math",{sign:e(57)})},function(t,n,e){var r=e(1),i=e(56),o=Math.exp;r(r.S+r.F*e(6)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,e){var r=e(1),i=e(56),o=Math.exp;r(r.S,"Math",{tanh:function(t){var n=i(t=+t),e=i(-t);return n==1/0?1:e==1/0?-1:(n-e)/(o(t)+o(-t))}})},function(t,n,e){var r=e(1);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,e){var r=e(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,e){var r=e(1),i=e(3).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,e){var r=e(1);r(r.S,"Number",{isInteger:e(74)})},function(t,n,e){var r=e(1);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,e){var r=e(1),i=e(74),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,e){var r=e(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,e){var r=e(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,e){var r=e(1);r(r.S+r.F,"Object",{assign:e(81)})},function(t,n,e){var r=e(1);r(r.S,"Object",{is:e(103)})},function(t,n,e){var r=e(1);r(r.S,"Object",{setPrototypeOf:e(58).set})},function(t,n,e){"use strict";var r,i,o,c,s=e(27),u=e(3),a=e(12),f=e(49),l=e(1),h=e(4),v=e(17),p=e(24),d=e(43),y=e(61),g=e(63).set,m=e(98)(),b=e(80),_=e(101),w=e(102),S="Promise",x=u.TypeError,E=u.process,O=u[S],M="process"==f(E),A=function(){},L=i=b.f,j=!!function(){try{var t=O.resolve(1),n=(t.constructor={})[e(5)("species")]=function(t){t(A,A)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n}catch(t){}}(),k=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},T=function(t,n){if(!t._n){t._n=!0;var e=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,c=function(n){var e,o,c=i?n.ok:n.fail,s=n.resolve,u=n.reject,a=n.domain;try{c?(i||(2==t._h&&N(t),t._h=1),c===!0?e=r:(a&&a.enter(),e=c(r),a&&a.exit()),e===n.promise?u(x("Promise-chain cycle")):(o=k(e))?o.call(e,s,u):s(e)):u(r)}catch(t){u(t)}};e.length>o;)c(e[o++]);t._c=[],t._n=!1,n&&!t._h&&P(t)})}},P=function(t){g.call(u,function(){var n,e,r,i=t._v,o=F(t);if(o&&(n=_(function(){M?E.emit("unhandledRejection",i,t):(e=u.onunhandledrejection)?e({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=M||F(t)?2:1),t._a=void 0,o&&n.e)throw n.v})},F=function(t){if(1==t._h)return!1;for(var n,e=t._a||t._c,r=0;e.length>r;)if(n=e[r++],n.fail||!F(n.promise))return!1;return!0},N=function(t){g.call(u,function(){var n;M?E.emit("rejectionHandled",t):(n=u.onrejectionhandled)&&n({promise:t,reason:t._v})})},C=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},R=function(t){var n,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw x("Promise can't be resolved itself");(n=k(t))?m(function(){var r={_w:e,_d:!1};try{n.call(t,a(R,r,1),a(C,r,1))}catch(t){C.call(r,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){C.call({_w:e,_d:!1},t)}}};j||(O=function(t){p(this,O,S,"_h"),v(t),r.call(this);try{t(a(R,this,1),a(C,this,1))}catch(t){C.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e(29)(O.prototype,{then:function(t,n){var e=L(y(this,O));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=M?E.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&T(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=a(R,t,1),this.reject=a(C,t,1)},b.f=L=function(t){return t===O||t===c?new o(t):i(t)}),l(l.G+l.W+l.F*!j,{Promise:O}),e(30)(O,S),e(46)(S),c=e(34)[S],l(l.S+l.F*!j,S,{reject:function(t){var n=L(this),e=n.reject;return e(t),n.promise}}),l(l.S+l.F*(s||!j),S,{resolve:function(t){return w(s&&this===c?O:this,t)}}),l(l.S+l.F*!(j&&e(44)(function(t){O.all(t).catch(A)})),S,{all:function(t){var n=this,e=L(n),r=e.resolve,i=e.reject,o=_(function(){var e=[],o=0,c=1;d(t,!1,function(t){var s=o++,u=!1;e.push(void 0),c++,n.resolve(t).then(function(t){u||(u=!0,e[s]=t,--c||r(e))},i)}),--c||r(e)});return o.e&&i(o.v),e.promise},race:function(t){var n=this,e=L(n),r=e.reject,i=_(function(){d(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return i.e&&r(i.v),e.promise}})},function(t,n,e){var r=e(1),i=e(17),o=e(2),c=(e(3).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!e(6)(function(){c(function(){})}),"Reflect",{apply:function(t,n,e){var r=i(t),u=o(e);return c?c(r,n,u):s.call(r,n,u)}})},function(t,n,e){var r=e(1),i=e(36),o=e(17),c=e(2),s=e(4),u=e(6),a=e(92),f=(e(3).Reflect||{}).construct,l=u(function(){function t(){}return!(f(function(){},[],t)instanceof t)}),h=!u(function(){f(function(){})});r(r.S+r.F*(l||h),"Reflect",{construct:function(t,n){o(t),c(n);var e=arguments.length<3?t:o(arguments[2]);if(h&&!l)return f(t,n,e);if(t==e){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var r=[null];return r.push.apply(r,n),new(a.apply(t,r))}var u=e.prototype,v=i(s(u)?u:Object.prototype),p=Function.apply.call(t,v,n);return s(p)?p:v}})},function(t,n,e){var r=e(7),i=e(1),o=e(2),c=e(40);i(i.S+i.F*e(6)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,e){o(t),n=c(n,!0),o(e);try{return r.f(t,n,e),!0}catch(t){return!1}}})},function(t,n,e){var r=e(1),i=e(15).f,o=e(2);r(r.S,"Reflect",{deleteProperty:function(t,n){var e=i(o(t),n);return!(e&&!e.configurable)&&delete t[n]}})},function(t,n,e){var r=e(15),i=e(1),o=e(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return r.f(o(t),n)}})},function(t,n,e){var r=e(1),i=e(38),o=e(2);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,e){function r(t,n){var e,s,f=arguments.length<3?t:arguments[2];return a(t)===f?t[n]:(e=i.f(t,n))?c(e,"value")?e.value:void 0!==e.get?e.get.call(f):void 0:u(s=o(t))?r(s,n,f):void 0}var i=e(15),o=e(38),c=e(10),s=e(1),u=e(4),a=e(2);s(s.S,"Reflect",{get:r})},function(t,n,e){var r=e(1);r(r.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,e){var r=e(1),i=e(2),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,e){var r=e(1);r(r.S,"Reflect",{ownKeys:e(84)})},function(t,n,e){var r=e(1),i=e(2),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,e){var r=e(1),i=e(58);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,e){function r(t,n,e){var u,h,v=arguments.length<4?t:arguments[3],p=o.f(f(t),n);if(!p){if(l(h=c(t)))return r(h,n,e,v);p=a(0)}return s(p,"value")?!(p.writable===!1||!l(v))&&(u=o.f(v,n)||a(0),u.value=e,i.f(v,n,u),!0):void 0!==p.set&&(p.set.call(v,e),!0)}var i=e(7),o=e(15),c=e(38),s=e(10),u=e(1),a=e(19),f=e(2),l=e(4);u(u.S,"Reflect",{set:r})},function(t,n,e){e(9)&&"g"!=/./g.flags&&e(7).f(RegExp.prototype,"flags",{configurable:!0,get:e(94)})},function(t,n,e){e(42)("match",1,function(t,n,e){return[function(e){"use strict";var r=t(this),i=void 0==e?void 0:e[n];return void 0!==i?i.call(e,r):new RegExp(e)[n](String(r))},e]})},function(t,n,e){e(42)("replace",2,function(t,n,e){return[function(r,i){"use strict";var o=t(this),c=void 0==r?void 0:r[n];return void 0!==c?c.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,e){e(42)("search",1,function(t,n,e){return[function(e){"use strict";var r=t(this),i=void 0==e?void 0:e[n];return void 0!==i?i.call(e,r):new RegExp(e)[n](String(r))},e]})},function(t,n,e){e(42)("split",2,function(t,n,r){"use strict";var i=e(75),o=r,c=[].push,s="split",u="length",a="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[u]||2!="ab"[s](/(?:ab)*/)[u]||4!="."[s](/(.?)(.?)/)[u]||"."[s](/()()/)[u]>1||""[s](/.?/)[u]){var f=void 0===/()??/.exec("")[1];r=function(t,n){var e=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(e,t,n);var r,s,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,m=new RegExp(t.source,d+"g");for(f||(r=new RegExp("^"+m.source+"$(?!\\s)",d));(s=m.exec(e))&&(l=s.index+s[0][u],!(l>y&&(p.push(e.slice(y,s.index)),!f&&s[u]>1&&s[0].replace(r,function(){for(v=1;v<arguments[u]-2;v++)void 0===arguments[v]&&(s[v]=void 0)}),s[u]>1&&s.index<e[u]&&c.apply(p,s.slice(1)),h=s[0][u],y=l,p[u]>=g)));)m[a]===s.index&&m[a]++;return y===e[u]?!h&&m.test("")||p.push(""):p.push(e.slice(y)),p[u]>g?p.slice(0,g):p}}else"0"[s](void 0,0)[u]&&(r=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(e,i){var o=t(this),c=void 0==e?void 0:e[n];return void 0!==c?c.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,e){"use strict";var r=e(68),i=e(32),o="Set";t.exports=e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t=0===t?0:t,t)}},r)},function(t,n,e){"use strict";var r=e(1),i=e(104)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,e){"use strict";var r=e(1),i=e(8),o=e(62),c="endsWith",s=""[c];r(r.P+r.F*e(53)(c),"String",{endsWith:function(t){var n=o(this,t,c),e=arguments.length>1?arguments[1]:void 0,r=i(n.length),u=void 0===e?r:Math.min(i(e),r),a=String(t);return s?s.call(n,a,u):n.slice(u-a.length,u)===a}})},function(t,n,e){var r=e(1),i=e(31),o=String.fromCharCode,c=String.fromCodePoint;r(r.S+r.F*(!!c&&1!=c.length),"String",{fromCodePoint:function(t){for(var n,e=[],r=arguments.length,c=0;r>c;){if(n=+arguments[c++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");e.push(n<65536?o(n):o(((n-=65536)>>10)+55296,n%1024+56320))}return e.join("")}})},function(t,n,e){"use strict";var r=e(1),i=e(62),o="includes";r(r.P+r.F*e(53)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,e){var r=e(1),i=e(13),o=e(8);r(r.S,"String",{raw:function(t){for(var n=i(t.raw),e=o(n.length),r=arguments.length,c=[],s=0;e>s;)c.push(String(n[s++])),s<r&&c.push(String(arguments[s]));return c.join("")}})},function(t,n,e){var r=e(1);r(r.P,"String",{repeat:e(86)})},function(t,n,e){"use strict";var r=e(1),i=e(8),o=e(62),c="startsWith",s=""[c];r(r.P+r.F*e(53)(c),"String",{startsWith:function(t){var n=o(this,t,c),e=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),r=String(t);return s?s.call(n,r,e):n.slice(e,e+r.length)===r}})},function(t,n,e){"use strict";var r=e(3),i=e(10),o=e(9),c=e(1),s=e(16),u=e(35).KEY,a=e(6),f=e(60),l=e(30),h=e(22),v=e(5),p=e(89),d=e(105),y=e(93),g=e(73),m=e(2),b=e(13),_=e(40),w=e(19),S=e(36),x=e(100),E=e(15),O=e(7),M=e(28),A=E.f,L=O.f,j=x.f,k=r.Symbol,T=r.JSON,P=T&&T.stringify,F="prototype",N=v("_hidden"),C=v("toPrimitive"),R={}.propertyIsEnumerable,D=f("symbol-registry"),I=f("symbols"),W=f("op-symbols"),z=Object[F],B="function"==typeof k,Y=r.QObject,X=!Y||!Y[F]||!Y[F].findChild,G=o&&a(function(){return 7!=S(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=A(z,n);r&&delete z[n],L(t,n,e),r&&t!==z&&L(z,n,r)}:L,V=function(t){var n=I[t]=S(k[F]);return n._k=t,n},U=B&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},q=function(t,n,e){return t===z&&q(W,n,e),m(t),n=_(n,!0),m(e),i(I,n)?(e.enumerable?(i(t,N)&&t[N][n]&&(t[N][n]=!1),e=S(e,{enumerable:w(0,!1)})):(i(t,N)||L(t,N,w(1,{})),t[N][n]=!0),G(t,n,e)):L(t,n,e)},H=function(t,n){m(t);for(var e,r=y(n=b(n)),i=0,o=r.length;o>i;)q(t,e=r[i++],n[e]);return t},K=function(t,n){return void 0===n?S(t):H(S(t),n)},J=function(t){var n=R.call(this,t=_(t,!0));return!(this===z&&i(I,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(I,t)||i(this,N)&&this[N][t])||n)},$=function(t,n){if(t=b(t),n=_(n,!0),t!==z||!i(I,n)||i(W,n)){var e=A(t,n);return!e||!i(I,n)||i(t,N)&&t[N][n]||(e.enumerable=!0),e}},Q=function(t){for(var n,e=j(b(t)),r=[],o=0;e.length>o;)i(I,n=e[o++])||n==N||n==u||r.push(n);return r},Z=function(t){for(var n,e=t===z,r=j(e?W:b(t)),o=[],c=0;r.length>c;)!i(I,n=r[c++])||e&&!i(z,n)||o.push(I[n]);return o};B||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(e){this===z&&n.call(W,e),i(this,N)&&i(this[N],t)&&(this[N][t]=!1),G(this,t,w(1,e))};return o&&X&&G(z,t,{configurable:!0,set:n}),V(t)},s(k[F],"toString",function(){return this._k}),E.f=$,O.f=q,e(37).f=x.f=Q,e(39).f=J,e(45).f=Z,o&&!e(27)&&s(z,"propertyIsEnumerable",J,!0),p.f=function(t){return V(v(t))}),c(c.G+c.W+c.F*!B,{Symbol:k});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)v(tt[nt++]);for(var et=M(v.store),rt=0;et.length>rt;)d(et[rt++]);c(c.S+c.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=k(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var n in D)if(D[n]===t)return n},useSetter:function(){X=!0},useSimple:function(){X=!1}}),c(c.S+c.F*!B,"Object",{create:K,defineProperty:q,defineProperties:H,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),T&&c(c.S+c.F*(!B||a(function(){var t=k();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!U(t)){for(var n,e,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return n=r[1],"function"==typeof n&&(e=n),!e&&g(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!U(n))return n}),r[1]=n,P.apply(T,r)}}}),k[F][C]||e(11)(k[F],C,k[F].valueOf),l(k,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){"use strict";var r=e(1),i=e(64),o=e(88),c=e(2),s=e(31),u=e(8),a=e(4),f=e(3).ArrayBuffer,l=e(61),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&f.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(f!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),r(r.P+r.U+r.F*e(6)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(c(this),t);for(var e=c(this).byteLength,r=s(t,e),i=s(void 0===n?e:n,e),o=new(l(this,h))(u(i-r)),a=new v(this),f=new v(o),p=0;r<i;)f.setUint8(p++,a.getUint8(r++));return o}}),e(46)(g)},function(t,n,e){e(14)("Float32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Float64",8,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int16",2,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int8",1,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint16",2,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint8",1,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint8",1,function(t){return function(n,e,r){return t(this,n,e,r)}},!0)},function(t,n,e){"use strict";var r,i=e(33)(0),o=e(16),c=e(35),s=e(81),u=e(69),a=e(4),f=e(6),l=e(32),h="WeakMap",v=c.getWeak,p=Object.isExtensible,d=u.ufstore,y={},g=function(t){
return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(a(t)){var n=v(t);return n===!0?d(l(this,h)).get(t):n?n[this._i]:void 0}},set:function(t,n){return u.def(l(this,h),t,n)}},b=t.exports=e(41)(h,g,m,u,!0,!0);f(function(){return 7!=(new b).set((Object.freeze||Object)(y),7).get(y)})&&(r=u.getConstructor(g,h),s(r.prototype,m),c.NEED=!0,i(["delete","has","get","set"],function(t){var n=b.prototype,e=n[t];o(n,t,function(n,i){if(a(n)&&!p(n)){this._f||(this._f=new r);var o=this._f[t](n,i);return"set"==t?this:o}return e.call(this,n,i)})}))},function(t,n,e){"use strict";var r=e(69),i=e(32),o="WeakSet";e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t,!0)}},r,!1,!0)},function(t,n,e){"use strict";var r=e(1),i=e(48)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)("includes")},function(t,n,e){var r=e(1),i=e(83)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,n,e){var r=e(1),i=e(84),o=e(13),c=e(15),s=e(50);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,e,r=o(t),u=c.f,a=i(r),f={},l=0;a.length>l;)e=u(r,n=a[l++]),void 0!==e&&s(f,n,e);return f}})},function(t,n,e){var r=e(1),i=e(83)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,n,e){"use strict";var r=e(1),i=e(85);r(r.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,e){"use strict";var r=e(1),i=e(85);r(r.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,e){for(var r=e(66),i=e(28),o=e(16),c=e(3),s=e(11),u=e(26),a=e(5),f=a("iterator"),l=a("toStringTag"),h=u.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],m=v[g],b=c[g],_=b&&b.prototype;if(_&&(_[f]||s(_,f,h),_[l]||s(_,l,g),u[g]=h,m))for(y in r)_[y]||o(_,y,r[y],!0)}},function(t,n,e){var r=e(1),i=e(63);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,e){var r=e(3),i=e(1),o=r.navigator,c=[].slice,s=!!o&&/MSIE .\./.test(o.userAgent),u=function(t){return function(n,e){var r=arguments.length>2,i=!!r&&c.call(arguments,2);return t(r?function(){("function"==typeof n?n:Function(n)).apply(this,i)}:n,e)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,n){},function(t,n){(function(n){function e(t,n,e){function i(n){var e=d,r=y;return d=y=void 0,E=n,m=t.apply(r,e)}function o(t){return E=t,b=setTimeout(f,n),O?i(t):m}function u(t){var e=t-x,r=t-E,i=n-e;return M?w(i,g-r):i}function a(t){var e=t-x,r=t-E;return void 0===x||e>=n||e<0||M&&r>=g}function f(){var t=S();return a(t)?l(t):void(b=setTimeout(f,u(t)))}function l(t){return b=void 0,A&&d?i(t):(d=y=void 0,m)}function h(){void 0!==b&&clearTimeout(b),E=0,d=x=y=b=void 0}function v(){return void 0===b?m:l(S())}function p(){var t=S(),e=a(t);if(d=arguments,y=this,x=t,e){if(void 0===b)return o(x);if(M)return b=setTimeout(f,n),i(x)}return void 0===b&&(b=setTimeout(f,n)),m}var d,y,g,m,b,x,E=0,O=!1,M=!1,A=!0;if("function"!=typeof t)throw new TypeError(s);return n=c(n)||0,r(e)&&(O=!!e.leading,M="maxWait"in e,g=M?_(c(e.maxWait)||0,n):g,A="trailing"in e?!!e.trailing:A),p.cancel=h,p.flush=v,p}function r(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function i(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||i(t)&&b.call(t)==a}function c(t){if("number"==typeof t)return t;if(o(t))return u;if(r(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=r(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(f,"");var e=h.test(t);return e||v.test(t)?p(t.slice(2),e?2:8):l.test(t)?u:+t}var s="Expected a function",u=NaN,a="[object Symbol]",f=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,v=/^0o[0-7]+$/i,p=parseInt,d="object"==typeof n&&n&&n.Object===Object&&n,y="object"==typeof self&&self&&self.Object===Object&&self,g=d||y||Function("return this")(),m=Object.prototype,b=m.toString,_=Math.max,w=Math.min,S=function(){return g.Date.now()};t.exports=e}).call(n,function(){return this}())},function(t,n){!function(n){"use strict";function e(t,n,e,r){var o=n&&n.prototype instanceof i?n:i,c=Object.create(o.prototype),s=new v(r||[]);return c._invoke=a(t,e,s),c}function r(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function c(){}function s(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(t){function n(e,i,o,c){var s=r(t[e],t,i);if("throw"!==s.type){var u=s.arg,a=u.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,c)},function(t){n("throw",t,o,c)}):Promise.resolve(a).then(function(t){u.value=t,o(u)},c)}c(s.arg)}function e(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=e}function a(t,n,e){var i=O;return function(o,c){if(i===A)throw new Error("Generator is already running");if(i===L){if("throw"===o)throw c;return d()}for(e.method=o,e.arg=c;;){var s=e.delegate;if(s){var u=f(s,e);if(u){if(u===j)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(i===O)throw i=L,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);i=A;var a=r(t,n,e);if("normal"===a.type){if(i=e.done?L:M,a.arg===j)continue;return{value:a.arg,done:e.done}}"throw"===a.type&&(i=L,e.method="throw",e.arg=a.arg)}}}function f(t,n){var e=t.iterator[n.method];if(e===y){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=y,f(t,n),"throw"===n.method))return j;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var i=r(e,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,j;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=y),n.delegate=null,j):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,j)}function l(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function h(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function v(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function p(t){if(t){var n=t[_];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,r=function n(){for(;++e<t.length;)if(m.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=y,n.done=!0,n};return r.next=r}}return{next:d}}function d(){return{value:y,done:!0}}var y,g=Object.prototype,m=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",x="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(x&&(t.exports=E));E=n.regeneratorRuntime=x?t.exports:{},E.wrap=e;var O="suspendedStart",M="suspendedYield",A="executing",L="completed",j={},k={};k[_]=function(){return this};var T=Object.getPrototypeOf,P=T&&T(T(p([])));P&&P!==g&&m.call(P,_)&&(k=P);var F=c.prototype=i.prototype=Object.create(k);o.prototype=F.constructor=c,c.constructor=o,c[S]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===o||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,S in t||(t[S]="GeneratorFunction")),t.prototype=Object.create(F),t},E.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[w]=function(){return this},E.AsyncIterator=u,E.async=function(t,n,r,i){var o=new u(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(F),F[S]="Generator",F[_]=function(){return this},F.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},E.values=p,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=y),!!r}if(this.done)throw t;for(var e=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,j):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),j},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),h(e),j}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var i=r.arg;h(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:p(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=y),j}}}(function(){return this}()||Function("return this")())},function(t,n,e){!function(n,e){t.exports=e()}(this,function(){"use strict";function t(t){return parseFloat(t)||0}function n(n){var e=Array.prototype.slice.call(arguments,1);return e.reduce(function(e,r){var i=n["border-"+r+"-width"];return e+t(i)},0)}function e(n){for(var e=["top","right","bottom","left"],r={},i=0,o=e;i<o.length;i+=1){var c=o[i],s=n["padding-"+c];r[c]=t(s)}return r}function r(t){var n=t.getBBox();return u(0,0,n.width,n.height)}function i(r){var i=r.clientWidth,c=r.clientHeight;if(!i&&!c)return _;var s=getComputedStyle(r),a=e(s),f=a.left+a.right,l=a.top+a.bottom,h=t(s.width),v=t(s.height);if("border-box"===s.boxSizing&&(Math.round(h+f)!==i&&(h-=n(s,"left","right")+f),Math.round(v+l)!==c&&(v-=n(s,"top","bottom")+l)),!o(r)){var p=Math.round(h+f)-i,d=Math.round(v+l)-c;1!==Math.abs(p)&&(h-=p),1!==Math.abs(d)&&(v-=d)}return u(a.left,a.top,h,v)}function o(t){return t===document.documentElement}function c(t){return f?w(t)?r(t):i(t):_}function s(t){var n=t.x,e=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(o.prototype);return b(c,{x:n,y:e,width:r,height:i,top:e,right:n+r,bottom:i+e,left:n}),c}function u(t,n,e,r){return{x:t,y:n,width:e,height:r}}var a=function(){function t(t,n){var e=-1;return t.some(function(t,r){return t[0]===n&&(e=r,!0)}),e}return"undefined"!=typeof Map?Map:function(){function n(){this.__entries__=[]}var e={size:{}};return e.size.get=function(){return this.__entries__.length},n.prototype.get=function(n){var e=t(this.__entries__,n),r=this.__entries__[e];return r&&r[1]},n.prototype.set=function(n,e){var r=t(this.__entries__,n);~r?this.__entries__[r][1]=e:this.__entries__.push([n,e])},n.prototype.delete=function(n){var e=this.__entries__,r=t(e,n);~r&&e.splice(r,1)},n.prototype.has=function(n){return!!~t(this.__entries__,n)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(t,n){void 0===n&&(n=null);for(var e=0,r=this.__entries__;e<r.length;e+=1){var i=r[e];t.call(n,i[1],i[0])}},Object.defineProperties(n.prototype,e),n}()}(),f="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),h=2,v=function(t,n){function e(){o&&(o=!1,t()),c&&i()}function r(){l(e)}function i(){var t=Date.now();if(o){if(t-s<h)return;c=!0}else o=!0,c=!1,setTimeout(r,n);s=t}var o=!1,c=!1,s=0;return i},p=20,d=["top","right","bottom","left","width","height","size","weight"],y="undefined"!=typeof navigator&&/Trident\/.*rv:11/.test(navigator.userAgent),g="undefined"!=typeof MutationObserver&&!y,m=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=v(this.refresh.bind(this),p)};m.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},m.prototype.removeObserver=function(t){var n=this.observers_,e=n.indexOf(t);~e&&n.splice(e,1),!n.length&&this.connected_&&this.disconnect_()},m.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},m.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},m.prototype.connect_=function(){f&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),g?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},m.prototype.disconnect_=function(){f&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},m.prototype.onTransitionEnd_=function(t){var n=t.propertyName,e=d.some(function(t){return!!~n.indexOf(t)});e&&this.refresh()},m.getInstance=function(){return this.instance_||(this.instance_=new m),this.instance_},m.instance_=null;var b=function(t,n){for(var e=0,r=Object.keys(n);e<r.length;e+=1){var i=r[e];Object.defineProperty(t,i,{value:n[i],enumerable:!1,writable:!1,configurable:!0})}return t},_=u(0,0,0,0),w=function(){return"undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof SVGGraphicsElement}:function(t){return t instanceof SVGElement&&"function"==typeof t.getBBox}}(),S=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=u(0,0,0,0),this.target=t};S.prototype.isActive=function(){var t=c(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},S.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var x=function(t,n){var e=s(n);b(this,{target:t,contentRect:e})},E=function(t,n,e){if("function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.activeObservations_=[],this.observations_=new a,this.callback_=t,this.controller_=n,this.callbackCtx_=e};E.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new S(t)),this.controller_.addObserver(this),this.controller_.refresh())}},E.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},E.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},E.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},E.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(t){return new x(t.target,t.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},E.prototype.clearActive=function(){this.activeObservations_.splice(0)},E.prototype.hasActive=function(){return this.activeObservations_.length>0};var O="undefined"!=typeof WeakMap?new WeakMap:new a,M=function(t){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=m.getInstance(),e=new E(t,n,this);O.set(this,e)};["observe","unobserve","disconnect"].forEach(function(t){M.prototype[t]=function(){return(n=O.get(this))[t].apply(n,arguments);var n}});var A=function(){return"undefined"!=typeof ResizeObserver?ResizeObserver:M}();return A})},function(t,n,e){var r,i,o;/*! scrollbarWidth.js v0.1.0 | felixexter | MIT | https://github.com/felixexter/scrollbarWidth */
!function(e,c){i=[],r=c,o="function"==typeof r?r.apply(n,i):r,!(void 0!==o&&(t.exports=o))}(this,function(){"use strict";function t(){var t,n=document.body,e=document.createElement("div"),r=e.style;return r.position="absolute",r.top=r.left="-9999px",r.width=r.height="100px",r.overflow="scroll",n.appendChild(e),t=e.offsetWidth-e.clientWidth,n.removeChild(e),t}return t})}])});
/**
 * Owl Carousel v2.2.1
 * Copyright 2013-2017 David Deutsch
 * Licensed under  ()
 */
/**
 * Owl carousel
 * @version 2.1.6
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 * @todo Lazy Load Icon
 * @todo prevent animationend bubling
 * @todo itemsScaleUp
 * @todo Test Zepto
 * @todo stagePadding calculate wrong active classes
 */
;(function($, window, document, undefined) {

	/**
	 * Creates a carousel.
	 * @class The Owl Carousel.
	 * @public
	 * @param {HTMLElement|jQuery} element - The element to create the carousel for.
	 * @param {Object} [options] - The options
	 */
	function Owl(element, options) {

		/**
		 * Current settings for the carousel.
		 * @public
		 */
		this.settings = null;

		/**
		 * Current options set by the caller including defaults.
		 * @public
		 */
		this.options = $.extend({}, Owl.Defaults, options);

		/**
		 * Plugin element.
		 * @public
		 */
		this.$element = $(element);

		/**
		 * Proxied event handlers.
		 * @protected
		 */
		this._handlers = {};

		/**
		 * References to the running plugins of this carousel.
		 * @protected
		 */
		this._plugins = {};

		/**
		 * Currently suppressed events to prevent them from beeing retriggered.
		 * @protected
		 */
		this._supress = {};

		/**
		 * Absolute current position.
		 * @protected
		 */
		this._current = null;

		/**
		 * Animation speed in milliseconds.
		 * @protected
		 */
		this._speed = null;

		/**
		 * Coordinates of all items in pixel.
		 * @todo The name of this member is missleading.
		 * @protected
		 */
		this._coordinates = [];

		/**
		 * Current breakpoint.
		 * @todo Real media queries would be nice.
		 * @protected
		 */
		this._breakpoint = null;

		/**
		 * Current width of the plugin element.
		 */
		this._width = null;

		/**
		 * All real items.
		 * @protected
		 */
		this._items = [];

		/**
		 * All cloned items.
		 * @protected
		 */
		this._clones = [];

		/**
		 * Merge values of all items.
		 * @todo Maybe this could be part of a plugin.
		 * @protected
		 */
		this._mergers = [];

		/**
		 * Widths of all items.
		 */
		this._widths = [];

		/**
		 * Invalidated parts within the update process.
		 * @protected
		 */
		this._invalidated = {};

		/**
		 * Ordered list of workers for the update process.
		 * @protected
		 */
		this._pipe = [];

		/**
		 * Current state information for the drag operation.
		 * @todo #261
		 * @protected
		 */
		this._drag = {
			time: null,
			target: null,
			pointer: null,
			stage: {
				start: null,
				current: null
			},
			direction: null
		};

		/**
		 * Current state information and their tags.
		 * @type {Object}
		 * @protected
		 */
		this._states = {
			current: {},
			tags: {
				'initializing': [ 'busy' ],
				'animating': [ 'busy' ],
				'dragging': [ 'interacting' ]
			}
		};

		$.each([ 'onResize', 'onThrottledResize' ], $.proxy(function(i, handler) {
			this._handlers[handler] = $.proxy(this[handler], this);
		}, this));

		$.each(Owl.Plugins, $.proxy(function(key, plugin) {
			this._plugins[key.charAt(0).toLowerCase() + key.slice(1)]
				= new plugin(this);
		}, this));

		$.each(Owl.Workers, $.proxy(function(priority, worker) {
			this._pipe.push({
				'filter': worker.filter,
				'run': $.proxy(worker.run, this)
			});
		}, this));

		this.setup();
		this.initialize();
	}

	/**
	 * Default options for the carousel.
	 * @public
	 */
	Owl.Defaults = {
		items: 3,
		loop: false,
		center: false,
		rewind: false,

		mouseDrag: true,
		touchDrag: true,
		pullDrag: true,
		freeDrag: false,

		margin: 0,
		stagePadding: 0,

		merge: false,
		mergeFit: true,
		autoWidth: false,

		startPosition: 0,
		rtl: false,

		smartSpeed: 250,
		fluidSpeed: false,
		dragEndSpeed: false,

		responsive: {},
		responsiveRefreshRate: 200,
		responsiveBaseElement: window,

		fallbackEasing: 'swing',

		info: false,

		nestedItemSelector: false,
		itemElement: 'div',
		stageElement: 'div',

		refreshClass: 'owl-refresh',
		loadedClass: 'owl-loaded',
		loadingClass: 'owl-loading',
		rtlClass: 'owl-rtl',
		responsiveClass: 'owl-responsive',
		dragClass: 'owl-drag',
		itemClass: 'owl-item',
		stageClass: 'owl-stage',
		stageOuterClass: 'owl-stage-outer',
		grabClass: 'owl-grab'
	};

	/**
	 * Enumeration for width.
	 * @public
	 * @readonly
	 * @enum {String}
	 */
	Owl.Width = {
		Default: 'default',
		Inner: 'inner',
		Outer: 'outer'
	};

	/**
	 * Enumeration for types.
	 * @public
	 * @readonly
	 * @enum {String}
	 */
	Owl.Type = {
		Event: 'event',
		State: 'state'
	};

	/**
	 * Contains all registered plugins.
	 * @public
	 */
	Owl.Plugins = {};

	/**
	 * List of workers involved in the update process.
	 */
	Owl.Workers = [ {
		filter: [ 'width', 'settings' ],
		run: function() {
			this._width = this.$element.width();
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			cache.current = this._items && this._items[this.relative(this._current)];
		}
	}, {
		filter: [ 'items', 'settings' ],
		run: function() {
			this.$stage.children('.cloned').remove();
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var margin = this.settings.margin || '',
				grid = !this.settings.autoWidth,
				rtl = this.settings.rtl,
				css = {
					'width': 'auto',
					'margin-left': rtl ? margin : '',
					'margin-right': rtl ? '' : margin
				};

			!grid && this.$stage.children().css(css);

			cache.css = css;
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var width = (this.width() / this.settings.items).toFixed(3) - this.settings.margin,
				merge = null,
				iterator = this._items.length,
				grid = !this.settings.autoWidth,
				widths = [];

			cache.items = {
				merge: false,
				width: width
			};

			while (iterator--) {
				merge = this._mergers[iterator];
				merge = this.settings.mergeFit && Math.min(merge, this.settings.items) || merge;

				cache.items.merge = merge > 1 || cache.items.merge;

				widths[iterator] = !grid ? this._items[iterator].width() : width * merge;
			}

			this._widths = widths;
		}
	}, {
		filter: [ 'items', 'settings' ],
		run: function() {
			var clones = [],
				items = this._items,
				settings = this.settings,
				// TODO: Should be computed from number of min width items in stage
				view = Math.max(settings.items * 2, 4),
				size = Math.ceil(items.length / 2) * 2,
				repeat = settings.loop && items.length ? settings.rewind ? view : Math.max(view, size) : 0,
				append = '',
				prepend = '';

			repeat /= 2;

			while (repeat--) {
				// Switch to only using appended clones
				clones.push(this.normalize(clones.length / 2, true));
				append = append + items[clones[clones.length - 1]][0].outerHTML;
				clones.push(this.normalize(items.length - 1 - (clones.length - 1) / 2, true));
				prepend = items[clones[clones.length - 1]][0].outerHTML + prepend;
			}

			this._clones = clones;

			$(append).addClass('cloned').appendTo(this.$stage);
			$(prepend).addClass('cloned').prependTo(this.$stage);
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function() {
			var rtl = this.settings.rtl ? 1 : -1,
				size = this._clones.length + this._items.length,
				iterator = -1,
				previous = 0,
				current = 0,
				coordinates = [];

			while (++iterator < size) {
				previous = coordinates[iterator - 1] || 0;
				current = this._widths[this.relative(iterator)] + this.settings.margin;
				coordinates.push(previous + current * rtl);
			}

			this._coordinates = coordinates;
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function() {
			var padding = this.settings.stagePadding,
				coordinates = this._coordinates,
				css = {
					'width': Math.ceil(Math.abs(coordinates[coordinates.length - 1])) + padding * 2,
					'padding-left': padding || '',
					'padding-right': padding || ''
				};

			this.$stage.css(css);
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var iterator = this._coordinates.length,
				grid = !this.settings.autoWidth,
				items = this.$stage.children();

			if (grid && cache.items.merge) {
				while (iterator--) {
					cache.css.width = this._widths[this.relative(iterator)];
					items.eq(iterator).css(cache.css);
				}
			} else if (grid) {
				cache.css.width = cache.items.width;
				items.css(cache.css);
			}
		}
	}, {
		filter: [ 'items' ],
		run: function() {
			this._coordinates.length < 1 && this.$stage.removeAttr('style');
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			cache.current = cache.current ? this.$stage.children().index(cache.current) : 0;
			cache.current = Math.max(this.minimum(), Math.min(this.maximum(), cache.current));
			this.reset(cache.current);
		}
	}, {
		filter: [ 'position' ],
		run: function() {
			this.animate(this.coordinates(this._current));
		}
	}, {
		filter: [ 'width', 'position', 'items', 'settings' ],
		run: function() {
			var rtl = this.settings.rtl ? 1 : -1,
				padding = this.settings.stagePadding * 2,
				begin = this.coordinates(this.current()) + padding,
				end = begin + this.width() * rtl,
				inner, outer, matches = [], i, n;

			for (i = 0, n = this._coordinates.length; i < n; i++) {
				inner = this._coordinates[i - 1] || 0;
				outer = Math.abs(this._coordinates[i]) + padding * rtl;

				if ((this.op(inner, '<=', begin) && (this.op(inner, '>', end)))
					|| (this.op(outer, '<', begin) && this.op(outer, '>', end))) {
					matches.push(i);
				}
			}

			this.$stage.children('.active').removeClass('active');
			this.$stage.children(':eq(' + matches.join('), :eq(') + ')').addClass('active');

			if (this.settings.center) {
				this.$stage.children('.center').removeClass('center');
				this.$stage.children().eq(this.current()).addClass('center');
			}
		}
	} ];

	/**
	 * Initializes the carousel.
	 * @protected
	 */
	Owl.prototype.initialize = function() {
		this.enter('initializing');
		this.trigger('initialize');

		this.$element.toggleClass(this.settings.rtlClass, this.settings.rtl);

		if (this.settings.autoWidth && !this.is('pre-loading')) {
			var imgs, nestedSelector, width;
			imgs = this.$element.find('img');
			nestedSelector = this.settings.nestedItemSelector ? '.' + this.settings.nestedItemSelector : undefined;
			width = this.$element.children(nestedSelector).width();

			if (imgs.length && width <= 0) {
				this.preloadAutoWidthImages(imgs);
			}
		}

		this.$element.addClass(this.options.loadingClass);

		// create stage
		this.$stage = $('<' + this.settings.stageElement + ' class="' + this.settings.stageClass + '"/>')
			.wrap('<div class="' + this.settings.stageOuterClass + '"/>');

		// append stage
		this.$element.append(this.$stage.parent());

		// append content
		this.replace(this.$element.children().not(this.$stage.parent()));

		// check visibility
		if (this.$element.is(':visible')) {
			// update view
			this.refresh();
		} else {
			// invalidate width
			this.invalidate('width');
		}

		this.$element
			.removeClass(this.options.loadingClass)
			.addClass(this.options.loadedClass);

		// register event handlers
		this.registerEventHandlers();

		this.leave('initializing');
		this.trigger('initialized');
	};

	/**
	 * Setups the current settings.
	 * @todo Remove responsive classes. Why should adaptive designs be brought into IE8?
	 * @todo Support for media queries by using `matchMedia` would be nice.
	 * @public
	 */
	Owl.prototype.setup = function() {
		var viewport = this.viewport(),
			overwrites = this.options.responsive,
			match = -1,
			settings = null;

		if (!overwrites) {
			settings = $.extend({}, this.options);
		} else {
			$.each(overwrites, function(breakpoint) {
				if (breakpoint <= viewport && breakpoint > match) {
					match = Number(breakpoint);
				}
			});

			settings = $.extend({}, this.options, overwrites[match]);
			if (typeof settings.stagePadding === 'function') {
				settings.stagePadding = settings.stagePadding();
			}
			delete settings.responsive;

			// responsive class
			if (settings.responsiveClass) {
				this.$element.attr('class',
					this.$element.attr('class').replace(new RegExp('(' + this.options.responsiveClass + '-)\\S+\\s', 'g'), '$1' + match)
				);
			}
		}

		this.trigger('change', { property: { name: 'settings', value: settings } });
		this._breakpoint = match;
		this.settings = settings;
		this.invalidate('settings');
		this.trigger('changed', { property: { name: 'settings', value: this.settings } });
	};

	/**
	 * Updates option logic if necessery.
	 * @protected
	 */
	Owl.prototype.optionsLogic = function() {
		if (this.settings.autoWidth) {
			this.settings.stagePadding = false;
			this.settings.merge = false;
		}
	};

	/**
	 * Prepares an item before add.
	 * @todo Rename event parameter `content` to `item`.
	 * @protected
	 * @returns {jQuery|HTMLElement} - The item container.
	 */
	Owl.prototype.prepare = function(item) {
		var event = this.trigger('prepare', { content: item });

		if (!event.data) {
			event.data = $('<' + this.settings.itemElement + '/>')
				.addClass(this.options.itemClass).append(item)
		}

		this.trigger('prepared', { content: event.data });

		return event.data;
	};

	/**
	 * Updates the view.
	 * @public
	 */
	Owl.prototype.update = function() {
		var i = 0,
			n = this._pipe.length,
			filter = $.proxy(function(p) { return this[p] }, this._invalidated),
			cache = {};

		while (i < n) {
			if (this._invalidated.all || $.grep(this._pipe[i].filter, filter).length > 0) {
				this._pipe[i].run(cache);
			}
			i++;
		}

		this._invalidated = {};

		!this.is('valid') && this.enter('valid');
	};

	/**
	 * Gets the width of the view.
	 * @public
	 * @param {Owl.Width} [dimension=Owl.Width.Default] - The dimension to return.
	 * @returns {Number} - The width of the view in pixel.
	 */
	Owl.prototype.width = function(dimension) {
		dimension = dimension || Owl.Width.Default;
		switch (dimension) {
			case Owl.Width.Inner:
			case Owl.Width.Outer:
				return this._width;
			default:
				return this._width - this.settings.stagePadding * 2 + this.settings.margin;
		}
	};

	/**
	 * Refreshes the carousel primarily for adaptive purposes.
	 * @public
	 */
	Owl.prototype.refresh = function() {
		this.enter('refreshing');
		this.trigger('refresh');

		this.setup();

		this.optionsLogic();

		this.$element.addClass(this.options.refreshClass);

		this.update();

		this.$element.removeClass(this.options.refreshClass);

		this.leave('refreshing');
		this.trigger('refreshed');
	};

	/**
	 * Checks window `resize` event.
	 * @protected
	 */
	Owl.prototype.onThrottledResize = function() {
		window.clearTimeout(this.resizeTimer);
		this.resizeTimer = window.setTimeout(this._handlers.onResize, this.settings.responsiveRefreshRate);
	};

	/**
	 * Checks window `resize` event.
	 * @protected
	 */
	Owl.prototype.onResize = function() {
		if (!this._items.length) {
			return false;
		}

		if (this._width === this.$element.width()) {
			return false;
		}

		if (!this.$element.is(':visible')) {
			return false;
		}

		this.enter('resizing');

		if (this.trigger('resize').isDefaultPrevented()) {
			this.leave('resizing');
			return false;
		}

		this.invalidate('width');

		this.refresh();

		this.leave('resizing');
		this.trigger('resized');
	};

	/**
	 * Registers event handlers.
	 * @todo Check `msPointerEnabled`
	 * @todo #261
	 * @protected
	 */
	Owl.prototype.registerEventHandlers = function() {
		if ($.support.transition) {
			this.$stage.on($.support.transition.end + '.owl.core', $.proxy(this.onTransitionEnd, this));
		}

		if (this.settings.responsive !== false) {
			this.on(window, 'resize', this._handlers.onThrottledResize);
		}

		if (this.settings.mouseDrag) {
			this.$element.addClass(this.options.dragClass);
			this.$stage.on('mousedown.owl.core', $.proxy(this.onDragStart, this));
			this.$stage.on('dragstart.owl.core selectstart.owl.core', function() { return false });
		}

		if (this.settings.touchDrag){
			this.$stage.on('touchstart.owl.core', $.proxy(this.onDragStart, this));
			this.$stage.on('touchcancel.owl.core', $.proxy(this.onDragEnd, this));
		}
	};

	/**
	 * Handles `touchstart` and `mousedown` events.
	 * @todo Horizontal swipe threshold as option
	 * @todo #261
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragStart = function(event) {
		var stage = null;

		if (event.which === 3) {
			return;
		}

		if ($.support.transform) {
			stage = this.$stage.css('transform').replace(/.*\(|\)| /g, '').split(',');
			stage = {
				x: stage[stage.length === 16 ? 12 : 4],
				y: stage[stage.length === 16 ? 13 : 5]
			};
		} else {
			stage = this.$stage.position();
			stage = {
				x: this.settings.rtl ?
					stage.left + this.$stage.width() - this.width() + this.settings.margin :
					stage.left,
				y: stage.top
			};
		}

		if (this.is('animating')) {
			$.support.transform ? this.animate(stage.x) : this.$stage.stop()
			this.invalidate('position');
		}

		this.$element.toggleClass(this.options.grabClass, event.type === 'mousedown');

		this.speed(0);

		this._drag.time = new Date().getTime();
		this._drag.target = $(event.target);
		this._drag.stage.start = stage;
		this._drag.stage.current = stage;
		this._drag.pointer = this.pointer(event);

		$(document).on('mouseup.owl.core touchend.owl.core', $.proxy(this.onDragEnd, this));

		$(document).one('mousemove.owl.core touchmove.owl.core', $.proxy(function(event) {
			var delta = this.difference(this._drag.pointer, this.pointer(event));

			$(document).on('mousemove.owl.core touchmove.owl.core', $.proxy(this.onDragMove, this));

			if (Math.abs(delta.x) < Math.abs(delta.y) && this.is('valid')) {
				return;
			}

			event.preventDefault();

			this.enter('dragging');
			this.trigger('drag');
		}, this));
	};

	/**
	 * Handles the `touchmove` and `mousemove` events.
	 * @todo #261
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragMove = function(event) {
		var minimum = null,
			maximum = null,
			pull = null,
			delta = this.difference(this._drag.pointer, this.pointer(event)),
			stage = this.difference(this._drag.stage.start, delta);

		if (!this.is('dragging')) {
			return;
		}

		event.preventDefault();

		if (this.settings.loop) {
			minimum = this.coordinates(this.minimum());
			maximum = this.coordinates(this.maximum() + 1) - minimum;
			stage.x = (((stage.x - minimum) % maximum + maximum) % maximum) + minimum;
		} else {
			minimum = this.settings.rtl ? this.coordinates(this.maximum()) : this.coordinates(this.minimum());
			maximum = this.settings.rtl ? this.coordinates(this.minimum()) : this.coordinates(this.maximum());
			pull = this.settings.pullDrag ? -1 * delta.x / 5 : 0;
			stage.x = Math.max(Math.min(stage.x, minimum + pull), maximum + pull);
		}

		this._drag.stage.current = stage;

		this.animate(stage.x);
	};

	/**
	 * Handles the `touchend` and `mouseup` events.
	 * @todo #261
	 * @todo Threshold for click event
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragEnd = function(event) {
		var delta = this.difference(this._drag.pointer, this.pointer(event)),
			stage = this._drag.stage.current,
			direction = delta.x > 0 ^ this.settings.rtl ? 'left' : 'right';

		$(document).off('.owl.core');

		this.$element.removeClass(this.options.grabClass);

		if (delta.x !== 0 && this.is('dragging') || !this.is('valid')) {
			this.speed(this.settings.dragEndSpeed || this.settings.smartSpeed);
			this.current(this.closest(stage.x, delta.x !== 0 ? direction : this._drag.direction));
			this.invalidate('position');
			this.update();

			this._drag.direction = direction;

			if (Math.abs(delta.x) > 3 || new Date().getTime() - this._drag.time > 300) {
				this._drag.target.one('click.owl.core', function() { return false; });
			}
		}

		if (!this.is('dragging')) {
			return;
		}

		this.leave('dragging');
		this.trigger('dragged');
	};

	/**
	 * Gets absolute position of the closest item for a coordinate.
	 * @todo Setting `freeDrag` makes `closest` not reusable. See #165.
	 * @protected
	 * @param {Number} coordinate - The coordinate in pixel.
	 * @param {String} direction - The direction to check for the closest item. Ether `left` or `right`.
	 * @return {Number} - The absolute position of the closest item.
	 */
	Owl.prototype.closest = function(coordinate, direction) {
		var position = -1,
			pull = 30,
			width = this.width(),
			coordinates = this.coordinates();

		if (!this.settings.freeDrag) {
			// check closest item
			$.each(coordinates, $.proxy(function(index, value) {
				// on a left pull, check on current index
				if (direction === 'left' && coordinate > value - pull && coordinate < value + pull) {
					position = index;
				// on a right pull, check on previous index
				// to do so, subtract width from value and set position = index + 1
				} else if (direction === 'right' && coordinate > value - width - pull && coordinate < value - width + pull) {
					position = index + 1;
				} else if (this.op(coordinate, '<', value)
					&& this.op(coordinate, '>', coordinates[index + 1] || value - width)) {
					position = direction === 'left' ? index + 1 : index;
				}
				return position === -1;
			}, this));
		}

		if (!this.settings.loop) {
			// non loop boundries
			if (this.op(coordinate, '>', coordinates[this.minimum()])) {
				position = coordinate = this.minimum();
			} else if (this.op(coordinate, '<', coordinates[this.maximum()])) {
				position = coordinate = this.maximum();
			}
		}

		return position;
	};

	/**
	 * Animates the stage.
	 * @todo #270
	 * @public
	 * @param {Number} coordinate - The coordinate in pixels.
	 */
	Owl.prototype.animate = function(coordinate) {
		var animate = this.speed() > 0;

		this.is('animating') && this.onTransitionEnd();

		if (animate) {
			this.enter('animating');
			this.trigger('translate');
		}

		if ($.support.transform3d && $.support.transition) {
			this.$stage.css({
				transform: 'translate3d(' + coordinate + 'px,0px,0px)',
				transition: (this.speed() / 1000) + 's'
			});
		} else if (animate) {
			this.$stage.animate({
				left: coordinate + 'px'
			}, this.speed(), this.settings.fallbackEasing, $.proxy(this.onTransitionEnd, this));
		} else {
			this.$stage.css({
				left: coordinate + 'px'
			});
		}
	};

	/**
	 * Checks whether the carousel is in a specific state or not.
	 * @param {String} state - The state to check.
	 * @returns {Boolean} - The flag which indicates if the carousel is busy.
	 */
	Owl.prototype.is = function(state) {
		return this._states.current[state] && this._states.current[state] > 0;
	};

	/**
	 * Sets the absolute position of the current item.
	 * @public
	 * @param {Number} [position] - The new absolute position or nothing to leave it unchanged.
	 * @returns {Number} - The absolute position of the current item.
	 */
	Owl.prototype.current = function(position) {
		if (position === undefined) {
			return this._current;
		}

		if (this._items.length === 0) {
			return undefined;
		}

		position = this.normalize(position);

		if (this._current !== position) {
			var event = this.trigger('change', { property: { name: 'position', value: position } });

			if (event.data !== undefined) {
				position = this.normalize(event.data);
			}

			this._current = position;

			this.invalidate('position');

			this.trigger('changed', { property: { name: 'position', value: this._current } });
		}

		return this._current;
	};

	/**
	 * Invalidates the given part of the update routine.
	 * @param {String} [part] - The part to invalidate.
	 * @returns {Array.<String>} - The invalidated parts.
	 */
	Owl.prototype.invalidate = function(part) {
		if ($.type(part) === 'string') {
			this._invalidated[part] = true;
			this.is('valid') && this.leave('valid');
		}
		return $.map(this._invalidated, function(v, i) { return i });
	};

	/**
	 * Resets the absolute position of the current item.
	 * @public
	 * @param {Number} position - The absolute position of the new item.
	 */
	Owl.prototype.reset = function(position) {
		position = this.normalize(position);

		if (position === undefined) {
			return;
		}

		this._speed = 0;
		this._current = position;

		this.suppress([ 'translate', 'translated' ]);

		this.animate(this.coordinates(position));

		this.release([ 'translate', 'translated' ]);
	};

	/**
	 * Normalizes an absolute or a relative position of an item.
	 * @public
	 * @param {Number} position - The absolute or relative position to normalize.
	 * @param {Boolean} [relative=false] - Whether the given position is relative or not.
	 * @returns {Number} - The normalized position.
	 */
	Owl.prototype.normalize = function(position, relative) {
		var n = this._items.length,
			m = relative ? 0 : this._clones.length;

		if (!this.isNumeric(position) || n < 1) {
			position = undefined;
		} else if (position < 0 || position >= n + m) {
			position = ((position - m / 2) % n + n) % n + m / 2;
		}

		return position;
	};

	/**
	 * Converts an absolute position of an item into a relative one.
	 * @public
	 * @param {Number} position - The absolute position to convert.
	 * @returns {Number} - The converted position.
	 */
	Owl.prototype.relative = function(position) {
		position -= this._clones.length / 2;
		return this.normalize(position, true);
	};

	/**
	 * Gets the maximum position for the current item.
	 * @public
	 * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
	 * @returns {Number}
	 */
	Owl.prototype.maximum = function(relative) {
		var settings = this.settings,
			maximum = this._coordinates.length,
			iterator,
			reciprocalItemsWidth,
			elementWidth;

		if (settings.loop) {
			maximum = this._clones.length / 2 + this._items.length - 1;
		} else if (settings.autoWidth || settings.merge) {
			iterator = this._items.length;
			reciprocalItemsWidth = this._items[--iterator].width();
			elementWidth = this.$element.width();
			while (iterator--) {
				reciprocalItemsWidth += this._items[iterator].width() + this.settings.margin;
				if (reciprocalItemsWidth > elementWidth) {
					break;
				}
			}
			maximum = iterator + 1;
		} else if (settings.center) {
			maximum = this._items.length - 1;
		} else {
			maximum = this._items.length - settings.items;
		}

		if (relative) {
			maximum -= this._clones.length / 2;
		}

		return Math.max(maximum, 0);
	};

	/**
	 * Gets the minimum position for the current item.
	 * @public
	 * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
	 * @returns {Number}
	 */
	Owl.prototype.minimum = function(relative) {
		return relative ? 0 : this._clones.length / 2;
	};

	/**
	 * Gets an item at the specified relative position.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
	 */
	Owl.prototype.items = function(position) {
		if (position === undefined) {
			return this._items.slice();
		}

		position = this.normalize(position, true);
		return this._items[position];
	};

	/**
	 * Gets an item at the specified relative position.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
	 */
	Owl.prototype.mergers = function(position) {
		if (position === undefined) {
			return this._mergers.slice();
		}

		position = this.normalize(position, true);
		return this._mergers[position];
	};

	/**
	 * Gets the absolute positions of clones for an item.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @returns {Array.<Number>} - The absolute positions of clones for the item or all if no position was given.
	 */
	Owl.prototype.clones = function(position) {
		var odd = this._clones.length / 2,
			even = odd + this._items.length,
			map = function(index) { return index % 2 === 0 ? even + index / 2 : odd - (index + 1) / 2 };

		if (position === undefined) {
			return $.map(this._clones, function(v, i) { return map(i) });
		}

		return $.map(this._clones, function(v, i) { return v === position ? map(i) : null });
	};

	/**
	 * Sets the current animation speed.
	 * @public
	 * @param {Number} [speed] - The animation speed in milliseconds or nothing to leave it unchanged.
	 * @returns {Number} - The current animation speed in milliseconds.
	 */
	Owl.prototype.speed = function(speed) {
		if (speed !== undefined) {
			this._speed = speed;
		}

		return this._speed;
	};

	/**
	 * Gets the coordinate of an item.
	 * @todo The name of this method is missleanding.
	 * @public
	 * @param {Number} position - The absolute position of the item within `minimum()` and `maximum()`.
	 * @returns {Number|Array.<Number>} - The coordinate of the item in pixel or all coordinates.
	 */
	Owl.prototype.coordinates = function(position) {
		var multiplier = 1,
			newPosition = position - 1,
			coordinate;

		if (position === undefined) {
			return $.map(this._coordinates, $.proxy(function(coordinate, index) {
				return this.coordinates(index);
			}, this));
		}

		if (this.settings.center) {
			if (this.settings.rtl) {
				multiplier = -1;
				newPosition = position + 1;
			}

			coordinate = this._coordinates[position];
			coordinate += (this.width() - coordinate + (this._coordinates[newPosition] || 0)) / 2 * multiplier;
		} else {
			coordinate = this._coordinates[newPosition] || 0;
		}

		coordinate = Math.ceil(coordinate);

		return coordinate;
	};

	/**
	 * Calculates the speed for a translation.
	 * @protected
	 * @param {Number} from - The absolute position of the start item.
	 * @param {Number} to - The absolute position of the target item.
	 * @param {Number} [factor=undefined] - The time factor in milliseconds.
	 * @returns {Number} - The time in milliseconds for the translation.
	 */
	Owl.prototype.duration = function(from, to, factor) {
		if (factor === 0) {
			return 0;
		}

		return Math.min(Math.max(Math.abs(to - from), 1), 6) * Math.abs((factor || this.settings.smartSpeed));
	};

	/**
	 * Slides to the specified item.
	 * @public
	 * @param {Number} position - The position of the item.
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.to = function(position, speed) {
		var current = this.current(),
			revert = null,
			distance = position - this.relative(current),
			direction = (distance > 0) - (distance < 0),
			items = this._items.length,
			minimum = this.minimum(),
			maximum = this.maximum();

		if (this.settings.loop) {
			if (!this.settings.rewind && Math.abs(distance) > items / 2) {
				distance += direction * -1 * items;
			}

			position = current + distance;
			revert = ((position - minimum) % items + items) % items + minimum;

			if (revert !== position && revert - distance <= maximum && revert - distance > 0) {
				current = revert - distance;
				position = revert;
				this.reset(current);
			}
		} else if (this.settings.rewind) {
			maximum += 1;
			position = (position % maximum + maximum) % maximum;
		} else {
			position = Math.max(minimum, Math.min(maximum, position));
		}

		this.speed(this.duration(current, position, speed));
		this.current(position);

		if (this.$element.is(':visible')) {
			this.update();
		}
	};

	/**
	 * Slides to the next item.
	 * @public
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.next = function(speed) {
		speed = speed || false;
		this.to(this.relative(this.current()) + 1, speed);
	};

	/**
	 * Slides to the previous item.
	 * @public
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.prev = function(speed) {
		speed = speed || false;
		this.to(this.relative(this.current()) - 1, speed);
	};

	/**
	 * Handles the end of an animation.
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onTransitionEnd = function(event) {

		// if css2 animation then event object is undefined
		if (event !== undefined) {
			event.stopPropagation();

			// Catch only owl-stage transitionEnd event
			if ((event.target || event.srcElement || event.originalTarget) !== this.$stage.get(0)) {
				return false;
			}
		}

		this.leave('animating');
		this.trigger('translated');
	};

	/**
	 * Gets viewport width.
	 * @protected
	 * @return {Number} - The width in pixel.
	 */
	Owl.prototype.viewport = function() {
		var width;
		if (this.options.responsiveBaseElement !== window) {
			width = $(this.options.responsiveBaseElement).width();
		} else if (window.innerWidth) {
			width = window.innerWidth;
		} else if (document.documentElement && document.documentElement.clientWidth) {
			width = document.documentElement.clientWidth;
		} else {
			console.warn('Can not detect viewport width.');
		}
		return width;
	};

	/**
	 * Replaces the current content.
	 * @public
	 * @param {HTMLElement|jQuery|String} content - The new content.
	 */
	Owl.prototype.replace = function(content) {
		this.$stage.empty();
		this._items = [];

		if (content) {
			content = (content instanceof jQuery) ? content : $(content);
		}

		if (this.settings.nestedItemSelector) {
			content = content.find('.' + this.settings.nestedItemSelector);
		}

		content.filter(function() {
			return this.nodeType === 1;
		}).each($.proxy(function(index, item) {
			item = this.prepare(item);
			this.$stage.append(item);
			this._items.push(item);
			this._mergers.push(item.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		}, this));

		this.reset(this.isNumeric(this.settings.startPosition) ? this.settings.startPosition : 0);

		this.invalidate('items');
	};

	/**
	 * Adds an item.
	 * @todo Use `item` instead of `content` for the event arguments.
	 * @public
	 * @param {HTMLElement|jQuery|String} content - The item content to add.
	 * @param {Number} [position] - The relative position at which to insert the item otherwise the item will be added to the end.
	 */
	Owl.prototype.add = function(content, position) {
		var current = this.relative(this._current);

		position = position === undefined ? this._items.length : this.normalize(position, true);
		content = content instanceof jQuery ? content : $(content);

		this.trigger('add', { content: content, position: position });

		content = this.prepare(content);

		if (this._items.length === 0 || position === this._items.length) {
			this._items.length === 0 && this.$stage.append(content);
			this._items.length !== 0 && this._items[position - 1].after(content);
			this._items.push(content);
			this._mergers.push(content.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		} else {
			this._items[position].before(content);
			this._items.splice(position, 0, content);
			this._mergers.splice(position, 0, content.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		}

		this._items[current] && this.reset(this._items[current].index());

		this.invalidate('items');

		this.trigger('added', { content: content, position: position });
	};

	/**
	 * Removes an item by its position.
	 * @todo Use `item` instead of `content` for the event arguments.
	 * @public
	 * @param {Number} position - The relative position of the item to remove.
	 */
	Owl.prototype.remove = function(position) {
		position = this.normalize(position, true);

		if (position === undefined) {
			return;
		}

		this.trigger('remove', { content: this._items[position], position: position });

		this._items[position].remove();
		this._items.splice(position, 1);
		this._mergers.splice(position, 1);

		this.invalidate('items');

		this.trigger('removed', { content: null, position: position });
	};

	/**
	 * Preloads images with auto width.
	 * @todo Replace by a more generic approach
	 * @protected
	 */
	Owl.prototype.preloadAutoWidthImages = function(images) {
		images.each($.proxy(function(i, element) {
			this.enter('pre-loading');
			element = $(element);
			$(new Image()).one('load', $.proxy(function(e) {
				element.attr('src', e.target.src);
				element.css('opacity', 1);
				this.leave('pre-loading');
				!this.is('pre-loading') && !this.is('initializing') && this.refresh();
			}, this)).attr('src', element.attr('src') || element.attr('data-src') || element.attr('data-src-retina'));
		}, this));
	};

	/**
	 * Destroys the carousel.
	 * @public
	 */
	Owl.prototype.destroy = function() {

		this.$element.off('.owl.core');
		this.$stage.off('.owl.core');
		$(document).off('.owl.core');

		if (this.settings.responsive !== false) {
			window.clearTimeout(this.resizeTimer);
			this.off(window, 'resize', this._handlers.onThrottledResize);
		}

		for (var i in this._plugins) {
			this._plugins[i].destroy();
		}

		this.$stage.children('.cloned').remove();

		this.$stage.unwrap();
		this.$stage.children().contents().unwrap();
		this.$stage.children().unwrap();

		this.$element
			.removeClass(this.options.refreshClass)
			.removeClass(this.options.loadingClass)
			.removeClass(this.options.loadedClass)
			.removeClass(this.options.rtlClass)
			.removeClass(this.options.dragClass)
			.removeClass(this.options.grabClass)
			.attr('class', this.$element.attr('class').replace(new RegExp(this.options.responsiveClass + '-\\S+\\s', 'g'), ''))
			.removeData('owl.carousel');
	};

	/**
	 * Operators to calculate right-to-left and left-to-right.
	 * @protected
	 * @param {Number} [a] - The left side operand.
	 * @param {String} [o] - The operator.
	 * @param {Number} [b] - The right side operand.
	 */
	Owl.prototype.op = function(a, o, b) {
		var rtl = this.settings.rtl;
		switch (o) {
			case '<':
				return rtl ? a > b : a < b;
			case '>':
				return rtl ? a < b : a > b;
			case '>=':
				return rtl ? a <= b : a >= b;
			case '<=':
				return rtl ? a >= b : a <= b;
			default:
				break;
		}
	};

	/**
	 * Attaches to an internal event.
	 * @protected
	 * @param {HTMLElement} element - The event source.
	 * @param {String} event - The event name.
	 * @param {Function} listener - The event handler to attach.
	 * @param {Boolean} capture - Wether the event should be handled at the capturing phase or not.
	 */
	Owl.prototype.on = function(element, event, listener, capture) {
		if (element.addEventListener) {
			element.addEventListener(event, listener, capture);
		} else if (element.attachEvent) {
			element.attachEvent('on' + event, listener);
		}
	};

	/**
	 * Detaches from an internal event.
	 * @protected
	 * @param {HTMLElement} element - The event source.
	 * @param {String} event - The event name.
	 * @param {Function} listener - The attached event handler to detach.
	 * @param {Boolean} capture - Wether the attached event handler was registered as a capturing listener or not.
	 */
	Owl.prototype.off = function(element, event, listener, capture) {
		if (element.removeEventListener) {
			element.removeEventListener(event, listener, capture);
		} else if (element.detachEvent) {
			element.detachEvent('on' + event, listener);
		}
	};

	/**
	 * Triggers a public event.
	 * @todo Remove `status`, `relatedTarget` should be used instead.
	 * @protected
	 * @param {String} name - The event name.
	 * @param {*} [data=null] - The event data.
	 * @param {String} [namespace=carousel] - The event namespace.
	 * @param {String} [state] - The state which is associated with the event.
	 * @param {Boolean} [enter=false] - Indicates if the call enters the specified state or not.
	 * @returns {Event} - The event arguments.
	 */
	Owl.prototype.trigger = function(name, data, namespace, state, enter) {
		var status = {
			item: { count: this._items.length, index: this.current() }
		}, handler = $.camelCase(
			$.grep([ 'on', name, namespace ], function(v) { return v })
				.join('-').toLowerCase()
		), event = $.Event(
			[ name, 'owl', namespace || 'carousel' ].join('.').toLowerCase(),
			$.extend({ relatedTarget: this }, status, data)
		);

		if (!this._supress[name]) {
			$.each(this._plugins, function(name, plugin) {
				if (plugin.onTrigger) {
					plugin.onTrigger(event);
				}
			});

			this.register({ type: Owl.Type.Event, name: name });
			this.$element.trigger(event);

			if (this.settings && typeof this.settings[handler] === 'function') {
				this.settings[handler].call(this, event);
			}
		}

		return event;
	};

	/**
	 * Enters a state.
	 * @param name - The state name.
	 */
	Owl.prototype.enter = function(name) {
		$.each([ name ].concat(this._states.tags[name] || []), $.proxy(function(i, name) {
			if (this._states.current[name] === undefined) {
				this._states.current[name] = 0;
			}

			this._states.current[name]++;
		}, this));
	};

	/**
	 * Leaves a state.
	 * @param name - The state name.
	 */
	Owl.prototype.leave = function(name) {
		$.each([ name ].concat(this._states.tags[name] || []), $.proxy(function(i, name) {
			this._states.current[name]--;
		}, this));
	};

	/**
	 * Registers an event or state.
	 * @public
	 * @param {Object} object - The event or state to register.
	 */
	Owl.prototype.register = function(object) {
		if (object.type === Owl.Type.Event) {
			if (!$.event.special[object.name]) {
				$.event.special[object.name] = {};
			}

			if (!$.event.special[object.name].owl) {
				var _default = $.event.special[object.name]._default;
				$.event.special[object.name]._default = function(e) {
					if (_default && _default.apply && (!e.namespace || e.namespace.indexOf('owl') === -1)) {
						return _default.apply(this, arguments);
					}
					return e.namespace && e.namespace.indexOf('owl') > -1;
				};
				$.event.special[object.name].owl = true;
			}
		} else if (object.type === Owl.Type.State) {
			if (!this._states.tags[object.name]) {
				this._states.tags[object.name] = object.tags;
			} else {
				this._states.tags[object.name] = this._states.tags[object.name].concat(object.tags);
			}

			this._states.tags[object.name] = $.grep(this._states.tags[object.name], $.proxy(function(tag, i) {
				return $.inArray(tag, this._states.tags[object.name]) === i;
			}, this));
		}
	};

	/**
	 * Suppresses events.
	 * @protected
	 * @param {Array.<String>} events - The events to suppress.
	 */
	Owl.prototype.suppress = function(events) {
		$.each(events, $.proxy(function(index, event) {
			this._supress[event] = true;
		}, this));
	};

	/**
	 * Releases suppressed events.
	 * @protected
	 * @param {Array.<String>} events - The events to release.
	 */
	Owl.prototype.release = function(events) {
		$.each(events, $.proxy(function(index, event) {
			delete this._supress[event];
		}, this));
	};

	/**
	 * Gets unified pointer coordinates from event.
	 * @todo #261
	 * @protected
	 * @param {Event} - The `mousedown` or `touchstart` event.
	 * @returns {Object} - Contains `x` and `y` coordinates of current pointer position.
	 */
	Owl.prototype.pointer = function(event) {
		var result = { x: null, y: null };

		event = event.originalEvent || event || window.event;

		event = event.touches && event.touches.length ?
			event.touches[0] : event.changedTouches && event.changedTouches.length ?
				event.changedTouches[0] : event;

		if (event.pageX) {
			result.x = event.pageX;
			result.y = event.pageY;
		} else {
			result.x = event.clientX;
			result.y = event.clientY;
		}

		return result;
	};

	/**
	 * Determines if the input is a Number or something that can be coerced to a Number
	 * @protected
	 * @param {Number|String|Object|Array|Boolean|RegExp|Function|Symbol} - The input to be tested
	 * @returns {Boolean} - An indication if the input is a Number or can be coerced to a Number
	 */
	Owl.prototype.isNumeric = function(number) {
		return !isNaN(parseFloat(number));
	};

	/**
	 * Gets the difference of two vectors.
	 * @todo #261
	 * @protected
	 * @param {Object} - The first vector.
	 * @param {Object} - The second vector.
	 * @returns {Object} - The difference.
	 */
	Owl.prototype.difference = function(first, second) {
		return {
			x: first.x - second.x,
			y: first.y - second.y
		};
	};

	/**
	 * The jQuery Plugin for the Owl Carousel
	 * @todo Navigation plugin `next` and `prev`
	 * @public
	 */
	$.fn.owlCarousel = function(option) {
		var args = Array.prototype.slice.call(arguments, 1);

		return this.each(function() {
			var $this = $(this),
				data = $this.data('owl.carousel');

			if (!data) {
				data = new Owl(this, typeof option == 'object' && option);
				$this.data('owl.carousel', data);

				$.each([
					'next', 'prev', 'to', 'destroy', 'refresh', 'replace', 'add', 'remove'
				], function(i, event) {
					data.register({ type: Owl.Type.Event, name: event });
					data.$element.on(event + '.owl.carousel.core', $.proxy(function(e) {
						if (e.namespace && e.relatedTarget !== this) {
							this.suppress([ event ]);
							data[event].apply(this, [].slice.call(arguments, 1));
							this.release([ event ]);
						}
					}, data));
				});
			}

			if (typeof option == 'string' && option.charAt(0) !== '_') {
				data[option].apply(data, args);
			}
		});
	};

	/**
	 * The constructor for the jQuery Plugin
	 * @public
	 */
	$.fn.owlCarousel.Constructor = Owl;

})(window.Zepto || window.jQuery, window, document);

/**
 * AutoRefresh Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the auto refresh plugin.
	 * @class The Auto Refresh Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var AutoRefresh = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Refresh interval.
		 * @protected
		 * @type {number}
		 */
		this._interval = null;

		/**
		 * Whether the element is currently visible or not.
		 * @protected
		 * @type {Boolean}
		 */
		this._visible = null;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoRefresh) {
					this.watch();
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, AutoRefresh.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	AutoRefresh.Defaults = {
		autoRefresh: true,
		autoRefreshInterval: 500
	};

	/**
	 * Watches the element.
	 */
	AutoRefresh.prototype.watch = function() {
		if (this._interval) {
			return;
		}

		this._visible = this._core.$element.is(':visible');
		this._interval = window.setInterval($.proxy(this.refresh, this), this._core.settings.autoRefreshInterval);
	};

	/**
	 * Refreshes the element.
	 */
	AutoRefresh.prototype.refresh = function() {
		if (this._core.$element.is(':visible') === this._visible) {
			return;
		}

		this._visible = !this._visible;

		this._core.$element.toggleClass('owl-hidden', !this._visible);

		this._visible && (this._core.invalidate('width') && this._core.refresh());
	};

	/**
	 * Destroys the plugin.
	 */
	AutoRefresh.prototype.destroy = function() {
		var handler, property;

		window.clearInterval(this._interval);

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.AutoRefresh = AutoRefresh;

})(window.Zepto || window.jQuery, window, document);

/**
 * Lazy Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the lazy plugin.
	 * @class The Lazy Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Lazy = function(carousel) {

		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Already loaded items.
		 * @protected
		 * @type {Array.<jQuery>}
		 */
		this._loaded = [];

		/**
		 * Event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel change.owl.carousel resized.owl.carousel': $.proxy(function(e) {
				if (!e.namespace) {
					return;
				}

				if (!this._core.settings || !this._core.settings.lazyLoad) {
					return;
				}

				if ((e.property && e.property.name == 'position') || e.type == 'initialized') {
					var settings = this._core.settings,
						n = (settings.center && Math.ceil(settings.items / 2) || settings.items),
						i = ((settings.center && n * -1) || 0),
						position = (e.property && e.property.value !== undefined ? e.property.value : this._core.current()) + i,
						clones = this._core.clones().length,
						load = $.proxy(function(i, v) { this.load(v) }, this);

					while (i++ < n) {
						this.load(clones / 2 + this._core.relative(position));
						clones && $.each(this._core.clones(this._core.relative(position)), load);
						position++;
					}
				}
			}, this)
		};

		// set the default options
		this._core.options = $.extend({}, Lazy.Defaults, this._core.options);

		// register event handler
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	Lazy.Defaults = {
		lazyLoad: false
	};

	/**
	 * Loads all resources of an item at the specified position.
	 * @param {Number} position - The absolute position of the item.
	 * @protected
	 */
	Lazy.prototype.load = function(position) {
		var $item = this._core.$stage.children().eq(position),
			$elements = $item && $item.find('.owl-lazy');

		if (!$elements || $.inArray($item.get(0), this._loaded) > -1) {
			return;
		}

		$elements.each($.proxy(function(index, element) {
			var $element = $(element), image,
				url = (window.devicePixelRatio > 1 && $element.attr('data-src-retina')) || $element.attr('data-src');

			this._core.trigger('load', { element: $element, url: url }, 'lazy');

			if ($element.is('img')) {
				$element.one('load.owl.lazy', $.proxy(function() {
					$element.css('opacity', 1);
					this._core.trigger('loaded', { element: $element, url: url }, 'lazy');
				}, this)).attr('src', url);
			} else {
				image = new Image();
				image.onload = $.proxy(function() {
					$element.css({
						'background-image': 'url("' + url + '")',
						'opacity': '1'
					});
					this._core.trigger('loaded', { element: $element, url: url }, 'lazy');
				}, this);
				image.src = url;
			}
		}, this));

		this._loaded.push($item.get(0));
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Lazy.prototype.destroy = function() {
		var handler, property;

		for (handler in this.handlers) {
			this._core.$element.off(handler, this.handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Lazy = Lazy;

})(window.Zepto || window.jQuery, window, document);

/**
 * AutoHeight Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the auto height plugin.
	 * @class The Auto Height Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var AutoHeight = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight) {
					this.update();
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight && e.property.name == 'position'){
					this.update();
				}
			}, this),
			'loaded.owl.lazy': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight
					&& e.element.closest('.' + this._core.settings.itemClass).index() === this._core.current()) {
					this.update();
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, AutoHeight.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	AutoHeight.Defaults = {
		autoHeight: false,
		autoHeightClass: 'owl-height'
	};

	/**
	 * Updates the view.
	 */
	AutoHeight.prototype.update = function() {
		var start = this._core._current,
			end = start + this._core.settings.items,
			visible = this._core.$stage.children().toArray().slice(start, end),
			heights = [],
			maxheight = 0;

		$.each(visible, function(index, item) {
			heights.push($(item).height());
		});

		maxheight = Math.max.apply(null, heights);

		this._core.$stage.parent()
			.height(maxheight)
			.addClass(this._core.settings.autoHeightClass);
	};

	AutoHeight.prototype.destroy = function() {
		var handler, property;

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.AutoHeight = AutoHeight;

})(window.Zepto || window.jQuery, window, document);

/**
 * Video Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the video plugin.
	 * @class The Video Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Video = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Cache all video URLs.
		 * @protected
		 * @type {Object}
		 */
		this._videos = {};

		/**
		 * Current playing item.
		 * @protected
		 * @type {jQuery}
		 */
		this._playing = null;

		/**
		 * All event handlers.
		 * @todo The cloned content removale is too late
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					this._core.register({ type: 'state', name: 'playing', tags: [ 'interacting' ] });
				}
			}, this),
			'resize.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.video && this.isInFullScreen()) {
					e.preventDefault();
				}
			}, this),
			'refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.is('resizing')) {
					this._core.$stage.find('.cloned .owl-video-frame').remove();
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'position' && this._playing) {
					this.stop();
				}
			}, this),
			'prepared.owl.carousel': $.proxy(function(e) {
				if (!e.namespace) {
					return;
				}

				var $element = $(e.content).find('.owl-video');

				if ($element.length) {
					$element.css('display', 'none');
					this.fetch($element, $(e.content));
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Video.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);

		this._core.$element.on('click.owl.video', '.owl-video-play-icon', $.proxy(function(e) {
			this.play(e);
		}, this));
	};

	/**
	 * Default options.
	 * @public
	 */
	Video.Defaults = {
		video: false,
		videoHeight: false,
		videoWidth: false
	};

	/**
	 * Gets the video ID and the type (YouTube/Vimeo/vzaar only).
	 * @protected
	 * @param {jQuery} target - The target containing the video data.
	 * @param {jQuery} item - The item containing the video.
	 */
	Video.prototype.fetch = function(target, item) {
			var type = (function() {
					if (target.attr('data-vimeo-id')) {
						return 'vimeo';
					} else if (target.attr('data-vzaar-id')) {
						return 'vzaar'
					} else {
						return 'youtube';
					}
				})(),
				id = target.attr('data-vimeo-id') || target.attr('data-youtube-id') || target.attr('data-vzaar-id'),
				width = target.attr('data-width') || this._core.settings.videoWidth,
				height = target.attr('data-height') || this._core.settings.videoHeight,
				url = target.attr('href');

		if (url) {

			/*
					Parses the id's out of the following urls (and probably more):
					https://www.youtube.com/watch?v=:id
					https://youtu.be/:id
					https://vimeo.com/:id
					https://vimeo.com/channels/:channel/:id
					https://vimeo.com/groups/:group/videos/:id
					https://app.vzaar.com/videos/:id

					Visual example: https://regexper.com/#(http%3A%7Chttps%3A%7C)%5C%2F%5C%2F(player.%7Cwww.%7Capp.)%3F(vimeo%5C.com%7Cyoutu(be%5C.com%7C%5C.be%7Cbe%5C.googleapis%5C.com)%7Cvzaar%5C.com)%5C%2F(video%5C%2F%7Cvideos%5C%2F%7Cembed%5C%2F%7Cchannels%5C%2F.%2B%5C%2F%7Cgroups%5C%2F.%2B%5C%2F%7Cwatch%5C%3Fv%3D%7Cv%5C%2F)%3F(%5BA-Za-z0-9._%25-%5D*)(%5C%26%5CS%2B)%3F
			*/

			id = url.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);

			if (id[3].indexOf('youtu') > -1) {
				type = 'youtube';
			} else if (id[3].indexOf('vimeo') > -1) {
				type = 'vimeo';
			} else if (id[3].indexOf('vzaar') > -1) {
				type = 'vzaar';
			} else {
				throw new Error('Video URL not supported.');
			}
			id = id[6];
		} else {
			throw new Error('Missing video URL.');
		}

		this._videos[url] = {
			type: type,
			id: id,
			width: width,
			height: height
		};

		item.attr('data-video', url);

		this.thumbnail(target, this._videos[url]);
	};

	/**
	 * Creates video thumbnail.
	 * @protected
	 * @param {jQuery} target - The target containing the video data.
	 * @param {Object} info - The video info object.
	 * @see `fetch`
	 */
	Video.prototype.thumbnail = function(target, video) {
		var tnLink,
			icon,
			path,
			dimensions = video.width && video.height ? 'style="width:' + video.width + 'px;height:' + video.height + 'px;"' : '',
			customTn = target.find('img'),
			srcType = 'src',
			lazyClass = '',
			settings = this._core.settings,
			create = function(path) {
				icon = '<div class="owl-video-play-icon"></div>';

				if (settings.lazyLoad) {
					tnLink = '<div class="owl-video-tn ' + lazyClass + '" ' + srcType + '="' + path + '"></div>';
				} else {
					tnLink = '<div class="owl-video-tn" style="opacity:1;background-image:url(' + path + ')"></div>';
				}
				target.after(tnLink);
				target.after(icon);
			};

		// wrap video content into owl-video-wrapper div
		target.wrap('<div class="owl-video-wrapper"' + dimensions + '></div>');

		if (this._core.settings.lazyLoad) {
			srcType = 'data-src';
			lazyClass = 'owl-lazy';
		}

		// custom thumbnail
		if (customTn.length) {
			create(customTn.attr(srcType));
			customTn.remove();
			return false;
		}

		if (video.type === 'youtube') {
			path = "//img.youtube.com/vi/" + video.id + "/hqdefault.jpg";
			create(path);
		} else if (video.type === 'vimeo') {
			$.ajax({
				type: 'GET',
				url: '//vimeo.com/api/v2/video/' + video.id + '.json',
				jsonp: 'callback',
				dataType: 'jsonp',
				success: function(data) {
					path = data[0].thumbnail_large;
					create(path);
				}
			});
		} else if (video.type === 'vzaar') {
			$.ajax({
				type: 'GET',
				url: '//vzaar.com/api/videos/' + video.id + '.json',
				jsonp: 'callback',
				dataType: 'jsonp',
				success: function(data) {
					path = data.framegrab_url;
					create(path);
				}
			});
		}
	};

	/**
	 * Stops the current video.
	 * @public
	 */
	Video.prototype.stop = function() {
		this._core.trigger('stop', null, 'video');
		this._playing.find('.owl-video-frame').remove();
		this._playing.removeClass('owl-video-playing');
		this._playing = null;
		this._core.leave('playing');
		this._core.trigger('stopped', null, 'video');
	};

	/**
	 * Starts the current video.
	 * @public
	 * @param {Event} event - The event arguments.
	 */
	Video.prototype.play = function(event) {
		var target = $(event.target),
			item = target.closest('.' + this._core.settings.itemClass),
			video = this._videos[item.attr('data-video')],
			width = video.width || '100%',
			height = video.height || this._core.$stage.height(),
			html;

		if (this._playing) {
			return;
		}

		this._core.enter('playing');
		this._core.trigger('play', null, 'video');

		item = this._core.items(this._core.relative(item.index()));

		this._core.reset(item.index());

		if (video.type === 'youtube') {
			html = '<iframe width="' + width + '" height="' + height + '" src="//www.youtube.com/embed/' +
				video.id + '?autoplay=1&rel=0&v=' + video.id + '" frameborder="0" allowfullscreen></iframe>';
		} else if (video.type === 'vimeo') {
			html = '<iframe src="//player.vimeo.com/video/' + video.id +
				'?autoplay=1" width="' + width + '" height="' + height +
				'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';
		} else if (video.type === 'vzaar') {
			html = '<iframe frameborder="0"' + 'height="' + height + '"' + 'width="' + width +
				'" allowfullscreen mozallowfullscreen webkitAllowFullScreen ' +
				'src="//view.vzaar.com/' + video.id + '/player?autoplay=true"></iframe>';
		}

		$('<div class="owl-video-frame">' + html + '</div>').insertAfter(item.find('.owl-video'));

		this._playing = item.addClass('owl-video-playing');
	};

	/**
	 * Checks whether an video is currently in full screen mode or not.
	 * @todo Bad style because looks like a readonly method but changes members.
	 * @protected
	 * @returns {Boolean}
	 */
	Video.prototype.isInFullScreen = function() {
		var element = document.fullscreenElement || document.mozFullScreenElement ||
				document.webkitFullscreenElement;

		return element && $(element).parent().hasClass('owl-video-frame');
	};

	/**
	 * Destroys the plugin.
	 */
	Video.prototype.destroy = function() {
		var handler, property;

		this._core.$element.off('click.owl.video');

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Video = Video;

})(window.Zepto || window.jQuery, window, document);

/**
 * Animate Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the animate plugin.
	 * @class The Navigation Plugin
	 * @param {Owl} scope - The Owl Carousel
	 */
	var Animate = function(scope) {
		this.core = scope;
		this.core.options = $.extend({}, Animate.Defaults, this.core.options);
		this.swapping = true;
		this.previous = undefined;
		this.next = undefined;

		this.handlers = {
			'change.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name == 'position') {
					this.previous = this.core.current();
					this.next = e.property.value;
				}
			}, this),
			'drag.owl.carousel dragged.owl.carousel translated.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					this.swapping = e.type == 'translated';
				}
			}, this),
			'translate.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this.swapping && (this.core.options.animateOut || this.core.options.animateIn)) {
					this.swap();
				}
			}, this)
		};

		this.core.$element.on(this.handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	Animate.Defaults = {
		animateOut: false,
		animateIn: false
	};

	/**
	 * Toggles the animation classes whenever an translations starts.
	 * @protected
	 * @returns {Boolean|undefined}
	 */
	Animate.prototype.swap = function() {

		if (this.core.settings.items !== 1) {
			return;
		}

		if (!$.support.animation || !$.support.transition) {
			return;
		}

		this.core.speed(0);

		var left,
			clear = $.proxy(this.clear, this),
			previous = this.core.$stage.children().eq(this.previous),
			next = this.core.$stage.children().eq(this.next),
			incoming = this.core.settings.animateIn,
			outgoing = this.core.settings.animateOut;

		if (this.core.current() === this.previous) {
			return;
		}

		if (outgoing) {
			left = this.core.coordinates(this.previous) - this.core.coordinates(this.next);
			previous.one($.support.animation.end, clear)
				.css( { 'left': left + 'px' } )
				.addClass('animated owl-animated-out')
				.addClass(outgoing);
		}

		if (incoming) {
			next.one($.support.animation.end, clear)
				.addClass('animated owl-animated-in')
				.addClass(incoming);
		}
	};

	Animate.prototype.clear = function(e) {
		$(e.target).css( { 'left': '' } )
			.removeClass('animated owl-animated-out owl-animated-in')
			.removeClass(this.core.settings.animateIn)
			.removeClass(this.core.settings.animateOut);
		this.core.onTransitionEnd();
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Animate.prototype.destroy = function() {
		var handler, property;

		for (handler in this.handlers) {
			this.core.$element.off(handler, this.handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Animate = Animate;

})(window.Zepto || window.jQuery, window, document);

/**
 * Autoplay Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the autoplay plugin.
	 * @class The Autoplay Plugin
	 * @param {Owl} scope - The Owl Carousel
	 */
	var Autoplay = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * The autoplay timeout.
		 * @type {Timeout}
		 */
		this._timeout = null;

		/**
		 * Indicates whenever the autoplay is paused.
		 * @type {Boolean}
		 */
		this._paused = false;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'settings') {
					if (this._core.settings.autoplay) {
						this.play();
					} else {
						this.stop();
					}
				} else if (e.namespace && e.property.name === 'position') {
					//console.log('play?', e);
					if (this._core.settings.autoplay) {
						this._setAutoPlayInterval();
					}
				}
			}, this),
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoplay) {
					this.play();
				}
			}, this),
			'play.owl.autoplay': $.proxy(function(e, t, s) {
				if (e.namespace) {
					this.play(t, s);
				}
			}, this),
			'stop.owl.autoplay': $.proxy(function(e) {
				if (e.namespace) {
					this.stop();
				}
			}, this),
			'mouseover.owl.autoplay': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.pause();
				}
			}, this),
			'mouseleave.owl.autoplay': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.play();
				}
			}, this),
			'touchstart.owl.core': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.pause();
				}
			}, this),
			'touchend.owl.core': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause) {
					this.play();
				}
			}, this)
		};

		// register event handlers
		this._core.$element.on(this._handlers);

		// set default options
		this._core.options = $.extend({}, Autoplay.Defaults, this._core.options);
	};

	/**
	 * Default options.
	 * @public
	 */
	Autoplay.Defaults = {
		autoplay: false,
		autoplayTimeout: 5000,
		autoplayHoverPause: false,
		autoplaySpeed: false
	};

	/**
	 * Starts the autoplay.
	 * @public
	 * @param {Number} [timeout] - The interval before the next animation starts.
	 * @param {Number} [speed] - The animation speed for the animations.
	 */
	Autoplay.prototype.play = function(timeout, speed) {
		this._paused = false;

		if (this._core.is('rotating')) {
			return;
		}

		this._core.enter('rotating');

		this._setAutoPlayInterval();
	};

	/**
	 * Gets a new timeout
	 * @private
	 * @param {Number} [timeout] - The interval before the next animation starts.
	 * @param {Number} [speed] - The animation speed for the animations.
	 * @return {Timeout}
	 */
	Autoplay.prototype._getNextTimeout = function(timeout, speed) {
		if ( this._timeout ) {
			window.clearTimeout(this._timeout);
		}
		return window.setTimeout($.proxy(function() {
			if (this._paused || this._core.is('busy') || this._core.is('interacting') || document.hidden) {
				return;
			}
			this._core.next(speed || this._core.settings.autoplaySpeed);
		}, this), timeout || this._core.settings.autoplayTimeout);
	};

	/**
	 * Sets autoplay in motion.
	 * @private
	 */
	Autoplay.prototype._setAutoPlayInterval = function() {
		this._timeout = this._getNextTimeout();
	};

	/**
	 * Stops the autoplay.
	 * @public
	 */
	Autoplay.prototype.stop = function() {
		if (!this._core.is('rotating')) {
			return;
		}

		window.clearTimeout(this._timeout);
		this._core.leave('rotating');
	};

	/**
	 * Stops the autoplay.
	 * @public
	 */
	Autoplay.prototype.pause = function() {
		if (!this._core.is('rotating')) {
			return;
		}

		this._paused = true;
	};

	/**
	 * Destroys the plugin.
	 */
	Autoplay.prototype.destroy = function() {
		var handler, property;

		this.stop();

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.autoplay = Autoplay;

})(window.Zepto || window.jQuery, window, document);

/**
 * Navigation Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {
	'use strict';

	/**
	 * Creates the navigation plugin.
	 * @class The Navigation Plugin
	 * @param {Owl} carousel - The Owl Carousel.
	 */
	var Navigation = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Indicates whether the plugin is initialized or not.
		 * @protected
		 * @type {Boolean}
		 */
		this._initialized = false;

		/**
		 * The current paging indexes.
		 * @protected
		 * @type {Array}
		 */
		this._pages = [];

		/**
		 * All DOM elements of the user interface.
		 * @protected
		 * @type {Object}
		 */
		this._controls = {};

		/**
		 * Markup for an indicator.
		 * @protected
		 * @type {Array.<String>}
		 */
		this._templates = [];

		/**
		 * The carousel element.
		 * @type {jQuery}
		 */
		this.$element = this._core.$element;

		/**
		 * Overridden methods of the carousel.
		 * @protected
		 * @type {Object}
		 */
		this._overrides = {
			next: this._core.next,
			prev: this._core.prev,
			to: this._core.to
		};

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'prepared.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.push('<div class="' + this._core.settings.dotClass + '">' +
						$(e.content).find('[data-dot]').addBack('[data-dot]').attr('data-dot') + '</div>');
				}
			}, this),
			'added.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.splice(e.position, 0, this._templates.pop());
				}
			}, this),
			'remove.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.splice(e.position, 1);
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name == 'position') {
					this.draw();
				}
			}, this),
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && !this._initialized) {
					this._core.trigger('initialize', null, 'navigation');
					this.initialize();
					this.update();
					this.draw();
					this._initialized = true;
					this._core.trigger('initialized', null, 'navigation');
				}
			}, this),
			'refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._initialized) {
					this._core.trigger('refresh', null, 'navigation');
					this.update();
					this.draw();
					this._core.trigger('refreshed', null, 'navigation');
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Navigation.Defaults, this._core.options);

		// register event handlers
		this.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 * @todo Rename `slideBy` to `navBy`
	 */
	Navigation.Defaults = {
		nav: false,
		navText: [ 'prev', 'next' ],
		navSpeed: false,
		navElement: 'div',
		navContainer: false,
		navContainerClass: 'owl-nav',
		navClass: [ 'owl-prev', 'owl-next' ],
		slideBy: 1,
		dotClass: 'owl-dot',
		dotsClass: 'owl-dots',
		dots: true,
		dotsEach: false,
		dotsData: false,
		dotsSpeed: false,
		dotsContainer: false
	};

	/**
	 * Initializes the layout of the plugin and extends the carousel.
	 * @protected
	 */
	Navigation.prototype.initialize = function() {
		var override,
			settings = this._core.settings;

		// create DOM structure for relative navigation
		this._controls.$relative = (settings.navContainer ? $(settings.navContainer)
			: $('<div>').addClass(settings.navContainerClass).appendTo(this.$element)).addClass('anyClass');

		this._controls.$previous = $('<' + settings.navElement + '>')
			.addClass(settings.navClass[0])
			.html(settings.navText[0])
			.prependTo(this._controls.$relative)
			.on('click', $.proxy(function(e) {
				this.prev(settings.navSpeed);
			}, this));
		this._controls.$next = $('<' + settings.navElement + '>')
			.addClass(settings.navClass[1])
			.html(settings.navText[1])
			.appendTo(this._controls.$relative)
			.on('click', $.proxy(function(e) {
				this.next(settings.navSpeed);
			}, this));

		// create DOM structure for absolute navigation
		if (!settings.dotsData) {
			this._templates = [ $('<div>')
				.addClass(settings.dotClass)
				.append($('<span>'))
				.prop('outerHTML') ];
		}

		this._controls.$absolute = (settings.dotsContainer ? $(settings.dotsContainer)
			: $('<div>').addClass(settings.dotsClass).appendTo(this.$element)).addClass('anyClass');

		this._controls.$absolute.on('click', 'div', $.proxy(function(e) {
			var index = $(e.target).parent().is(this._controls.$absolute)
				? $(e.target).index() : $(e.target).parent().index();

			e.preventDefault();

			this.to(index, settings.dotsSpeed);
		}, this));

		// override public methods of the carousel
		for (override in this._overrides) {
			this._core[override] = $.proxy(this[override], this);
		}
	};

	/**
	 * Destroys the plugin.
	 * @protected
	 */
	Navigation.prototype.destroy = function() {
		var handler, control, property, override;

		for (handler in this._handlers) {
			this.$element.off(handler, this._handlers[handler]);
		}
		for (control in this._controls) {
			this._controls[control].remove();
		}
		for (override in this.overides) {
			this._core[override] = this._overrides[override];
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	/**
	 * Updates the internal state.
	 * @protected
	 */
	Navigation.prototype.update = function() {
		var i, j, k,
			lower = this._core.clones().length / 2,
			upper = lower + this._core.items().length,
			maximum = this._core.maximum(true),
			settings = this._core.settings,
			size = settings.center || settings.autoWidth || settings.dotsData
				? 1 : settings.dotsEach || settings.items;

		if (settings.slideBy !== 'page') {
			settings.slideBy = Math.min(settings.slideBy, settings.items);
		}

		if (settings.dots || settings.slideBy == 'page') {
			this._pages = [];

			for (i = lower, j = 0, k = 0; i < upper; i++) {
				if (j >= size || j === 0) {
					this._pages.push({
						start: Math.min(maximum, i - lower),
						end: i - lower + size - 1
					});
					if (Math.min(maximum, i - lower) === maximum) {
						break;
					}
					j = 0, ++k;
				}
				j += this._core.mergers(this._core.relative(i));
			}
		}
	};

	/**
	 * Draws the user interface.
	 * @todo The option `dotsData` wont work.
	 * @protected
	 */
	Navigation.prototype.draw = function() {
		var difference,
			settings = this._core.settings,
            anyClass = this._core.items().length <= settings.items,
			index = this._core.relative(this._core.current()),
			loop = settings.loop || settings.rewind;

		this._controls.$relative.toggleClass('anyClass', !settings.nav || anyClass);

		if (settings.nav) {
			this._controls.$previous.toggleClass('anyClass', !loop && index <= this._core.minimum(true));
			this._controls.$next.toggleClass('anyClass', !loop && index >= this._core.maximum(true));
		}

		this._controls.$absolute.toggleClass('anyClass', !settings.dots || anyClass);

		if (settings.dots) {
			difference = this._pages.length - this._controls.$absolute.children().length;

			if (settings.dotsData && difference !== 0) {
				this._controls.$absolute.html(this._templates.join(''));
			} else if (difference > 0) {
				this._controls.$absolute.append(new Array(difference + 1).join(this._templates[0]));
			} else if (difference < 0) {
				this._controls.$absolute.children().slice(difference).remove();
			}

			this._controls.$absolute.find('.active').removeClass('active');
			this._controls.$absolute.children().eq($.inArray(this.current(), this._pages)).addClass('active');
		}
	};

	/**
	 * Extends event data.
	 * @protected
	 * @param {Event} event - The event object which gets thrown.
	 */
	Navigation.prototype.onTrigger = function(event) {
		var settings = this._core.settings;

		event.page = {
			index: $.inArray(this.current(), this._pages),
			count: this._pages.length,
			size: settings && (settings.center || settings.autoWidth || settings.dotsData
				? 1 : settings.dotsEach || settings.items)
		};
	};

	/**
	 * Gets the current page position of the carousel.
	 * @protected
	 * @returns {Number}
	 */
	Navigation.prototype.current = function() {
		var current = this._core.relative(this._core.current());
		return $.grep(this._pages, $.proxy(function(page, index) {
			return page.start <= current && page.end >= current;
		}, this)).pop();
	};

	/**
	 * Gets the current succesor/predecessor position.
	 * @protected
	 * @returns {Number}
	 */
	Navigation.prototype.getPosition = function(successor) {
		var position, length,
			settings = this._core.settings;

		if (settings.slideBy == 'page') {
			position = $.inArray(this.current(), this._pages);
			length = this._pages.length;
			successor ? ++position : --position;
			position = this._pages[((position % length) + length) % length].start;
		} else {
			position = this._core.relative(this._core.current());
			length = this._core.items().length;
			successor ? position += settings.slideBy : position -= settings.slideBy;
		}

		return position;
	};

	/**
	 * Slides to the next item or page.
	 * @public
	 * @param {Number} [speed=false] - The time in milliseconds for the transition.
	 */
	Navigation.prototype.next = function(speed) {
		$.proxy(this._overrides.to, this._core)(this.getPosition(true), speed);
	};

	/**
	 * Slides to the previous item or page.
	 * @public
	 * @param {Number} [speed=false] - The time in milliseconds for the transition.
	 */
	Navigation.prototype.prev = function(speed) {
		$.proxy(this._overrides.to, this._core)(this.getPosition(false), speed);
	};

	/**
	 * Slides to the specified item or page.
	 * @public
	 * @param {Number} position - The position of the item or page.
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 * @param {Boolean} [standard=false] - Whether to use the standard behaviour or not.
	 */
	Navigation.prototype.to = function(position, speed, standard) {
		var length;

		if (!standard && this._pages.length) {
			length = this._pages.length;
			$.proxy(this._overrides.to, this._core)(this._pages[((position % length) + length) % length].start, speed);
		} else {
			$.proxy(this._overrides.to, this._core)(position, speed);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Navigation = Navigation;

})(window.Zepto || window.jQuery, window, document);

/**
 * Hash Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {
	'use strict';

	/**
	 * Creates the hash plugin.
	 * @class The Hash Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Hash = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Hash index for the items.
		 * @protected
		 * @type {Object}
		 */
		this._hashes = {};

		/**
		 * The carousel element.
		 * @type {jQuery}
		 */
		this.$element = this._core.$element;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.startPosition === 'URLHash') {
					$(window).trigger('hashchange.owl.navigation');
				}
			}, this),
			'prepared.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					var hash = $(e.content).find('[data-hash]').addBack('[data-hash]').attr('data-hash');

					if (!hash) {
						return;
					}

					this._hashes[hash] = e.content;
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'position') {
					var current = this._core.items(this._core.relative(this._core.current())),
						hash = $.map(this._hashes, function(item, hash) {
							return item === current ? hash : null;
						}).join();

					if (!hash || window.location.hash.slice(1) === hash) {
						return;
					}

					window.location.hash = hash;
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Hash.Defaults, this._core.options);

		// register the event handlers
		this.$element.on(this._handlers);

		// register event listener for hash navigation
		$(window).on('hashchange.owl.navigation', $.proxy(function(e) {
			var hash = window.location.hash.substring(1),
				items = this._core.$stage.children(),
				position = this._hashes[hash] && items.index(this._hashes[hash]);

			if (position === undefined || position === this._core.current()) {
				return;
			}

			this._core.to(this._core.relative(position), false, true);
		}, this));
	};

	/**
	 * Default options.
	 * @public
	 */
	Hash.Defaults = {
		URLhashListener: false
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Hash.prototype.destroy = function() {
		var handler, property;

		$(window).off('hashchange.owl.navigation');

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Hash = Hash;

})(window.Zepto || window.jQuery, window, document);

/**
 * Support Plugin
 *
 * @version 2.1.0
 * @author Vivid Planet Software GmbH
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	var style = $('<support>').get(0).style,
		prefixes = 'Webkit Moz O ms'.split(' '),
		events = {
			transition: {
				end: {
					WebkitTransition: 'webkitTransitionEnd',
					MozTransition: 'transitionend',
					OTransition: 'oTransitionEnd',
					transition: 'transitionend'
				}
			},
			animation: {
				end: {
					WebkitAnimation: 'webkitAnimationEnd',
					MozAnimation: 'animationend',
					OAnimation: 'oAnimationEnd',
					animation: 'animationend'
				}
			}
		},
		tests = {
			csstransforms: function() {
				return !!test('transform');
			},
			csstransforms3d: function() {
				return !!test('perspective');
			},
			csstransitions: function() {
				return !!test('transition');
			},
			cssanimations: function() {
				return !!test('animation');
			}
		};

	function test(property, prefixed) {
		var result = false,
			upper = property.charAt(0).toUpperCase() + property.slice(1);

		$.each((property + ' ' + prefixes.join(upper + ' ') + upper).split(' '), function(i, property) {
			if (style[property] !== undefined) {
				result = prefixed ? property : true;
				return false;
			}
		});

		return result;
	}

	function prefixed(property) {
		return test(property, true);
	}

	if (tests.csstransitions()) {
		/* jshint -W053 */
		$.support.transition = new String(prefixed('transition'))
		$.support.transition.end = events.transition.end[ $.support.transition ];
	}

	if (tests.cssanimations()) {
		/* jshint -W053 */
		$.support.animation = new String(prefixed('animation'))
		$.support.animation.end = events.animation.end[ $.support.animation ];
	}

	if (tests.csstransforms()) {
		/* jshint -W053 */
		$.support.transform = new String(prefixed('transform'));
		$.support.transform3d = tests.csstransforms3d();
	}

})(window.Zepto || window.jQuery, window, document);

/*!
 * jquery.sumoselect - v3.0.2
 * http://hemantnegi.github.io/jquery.sumoselect
 * 2014-04-08
 *
 * Copyright 2015 Hemant Negi
 * Email : hemant.frnz@gmail.com
 * Compressor http://refresh-sf.com/
 */

(function ($) {

    'namespace sumo';
    $.fn.SumoSelect = function (options) {

        // This is the easiest way to have default options.
        var settings = $.extend({
            placeholder: '',   // Dont change it here.
            csvDispCount: 3,              // display no. of items in multiselect. 0 to display all.
            captionFormat:'{0} Selected', // format of caption text. you can set your locale.
            captionFormatAllSelected:'{0} all selected!', // format of caption text when all elements are selected. set null to use captionFormat. It will not work if there are disabled elements in select.
            floatWidth: 400,              // Screen width of device at which the list is rendered in floating popup fashion.
            forceCustomRendering: false,  // force the custom modal on all devices below floatWidth resolution.
            nativeOnDevice: ['Android', 'BlackBerry', 'iPhone', 'iPad', 'iPod', 'Opera Mini', 'IEMobile', 'Silk'], //
            outputAsCSV: false,           // true to POST data as csv ( false for Html control array ie. default select )
            csvSepChar: ',',              // separation char in csv mode
            okCancelInMulti: false,       // display ok cancel buttons in desktop mode multiselect also.
            triggerChangeCombined: true,  // im multi select mode wether to trigger change event on individual selection or combined selection.
            selectAll: false,             // to display select all button in multiselect mode.|| also select all will not be available on mobile devices.

            search: false,                // to display input for filtering content. selectAlltext will be input text placeholder
            searchText: 'Search...',      // placeholder for search input
            noMatch: 'No matches for "{0}"',
            prefix: '',                   // some prefix usually the field name. eg. '<b>Hello</b>'
            locale: ['OK', 'Cancel', 'Select All'],  // all text that is used. don't change the index.
            up: false                     // set true to open upside.
        }, options);

        var ret = this.each(function () {
            var selObj = this; // the original select object.
            if (this.sumo || !$(this).is('select')) return; //already initialized

            this.sumo = {
                E: $(selObj),   //the jquery object of original select element.
                is_multi: $(selObj).attr('multiple'),  //if its a multiple select
                select: '',
                caption: '',
                placeholder: '',
                optDiv: '',
                CaptionCont: '',
                ul:'',
                is_floating: false,
                is_opened: false,
                //backdrop: '',
                mob:false, // if to open device default select
                Pstate: [],

                createElems: function () {
                    var O = this;
                    O.E.wrap('<div class="SumoSelect" tabindex="0">');
                    O.select = O.E.parent();
                    O.caption = $('<span>');
                    O.CaptionCont = $('<p class="CaptionCont"><label><i></i></label></p>').addClass('SelectBox').attr('style', O.E.attr('style')).prepend(O.caption);
                    O.select.append(O.CaptionCont);

                    // default turn off if no multiselect
                    if(!O.is_multi)settings.okCancelInMulti = false

                    if(O.E.attr('disabled'))
                        O.select.addClass('disabled').removeAttr('tabindex');

                    //if output as csv and is a multiselect.
                    if (settings.outputAsCSV && O.is_multi && O.E.attr('name')) {
                        //create a hidden field to store csv value.
                        O.select.append($('<input class="HEMANT123" type="hidden" />').attr('name', O.E.attr('name')).val(O.getSelStr()));

                        // so it can not post the original select.
                        O.E.removeAttr('name');
                    }

                    //break for mobile rendring.. if forceCustomRendering is false
                    if (O.isMobile() && !settings.forceCustomRendering) {
                        O.setNativeMobile();
                        return;
                    }

                    // if there is a name attr in select add a class to container div
                    if(O.E.attr('name')) O.select.addClass('sumo_'+O.E.attr('name'))

                    //hide original select
                    O.E.addClass('SumoUnder').attr('tabindex','-1');

                    //## Creating the list...
                    O.optDiv = $('<div class="optWrapper '+ (settings.up?'up':'') +'">');

                    //branch for floating list in low res devices.
                    O.floatingList();

                    //Creating the markup for the available options
                    O.ul = $('<ul class="options">');
                    O.optDiv.append(O.ul);

                    // Select all functionality
                    if(settings.selectAll) O.SelAll();

                    // search functionality
                    if(settings.search) O.Search();

                    O.ul.append(O.prepItems(O.E.children()));

                    //if multiple then add the class multiple and add OK / CANCEL button
                    if (O.is_multi) O.multiSelelect();

                    O.select.append(O.optDiv);
                    O.basicEvents();
                    O.selAllState();
                },

                prepItems: function(opts, d){
                    var lis = [], O=this;
                    $(opts).each(function (i, opt) {       // parsing options to li
                        opt = $(opt);
                        lis.push(opt.is('optgroup')?
                            $('<li class="group '+ (opt[0].disabled?'disabled':'') +'"><label>' + opt.attr('label') +'</label><ul></ul><li>')
                            .find('ul')
                            .append(O.prepItems(opt.children(), opt[0].disabled))
                            .end()
                            :
                            O.createLi(opt, d)
                            );
                    });
                    return lis;
                },

                //## Creates a LI element from a given option and binds events to it
                //## returns the jquery instance of li (not inserted in dom)
                createLi: function (opt, d) {
                    var O = this;

                    if(!opt.attr('value'))opt.attr('value',opt.val());
                                                                                    // todo: remove this data val 
                    li = $('<li class="opt"><label>' + opt.text() + '</label></li>');//.data('val',opt.val());
                    li.data('opt', opt);    // store a direct reference to option.
                    opt.data('li', li);    // store a direct reference to list item.
                    if (O.is_multi) li.prepend('<span><i></i></span>');

                    if (opt[0].disabled || d)
                        li = li.addClass('disabled');

                    O.onOptClick(li);

                    if (opt[0].selected)
                        li.addClass('selected');

                    if (opt.attr('class'))
                        li.addClass(opt.attr('class'));

                    return li;
                },

                //## Returns the selected items as string in a Multiselect.
                getSelStr: function () {
                    // get the pre selected items.
                    sopt = [];
                    this.E.find('option:selected').each(function () { sopt.push($(this).val()); });
                    return sopt.join(settings.csvSepChar);
                },

                //## THOSE OK/CANCEL BUTTONS ON MULTIPLE SELECT.
                multiSelelect: function () {
                    var O = this;
                    O.optDiv.addClass('multiple');
                    O.okbtn = $('<p class="btnOk">'+settings.locale[0]+'</p>').click(function () {

                        //if combined change event is set.
                        if (settings.triggerChangeCombined) {

                            //check for a change in the selection.
                            changed = false;
                            if (O.E.find('option:selected').length != O.Pstate.length) {
                                changed = true;
                            }
                            else {
                                O.E.find('option').each(function (i,e) {
                                    if(e.selected && O.Pstate.indexOf(i) < 0) changed = true;
                                });
                            }

                            if (changed) {
                                O.callChange();
                                O.setText();
                            }
                        }
                        O.hideOpts();
                    });
                    O.cancelBtn = $('<p class="btnCancel">'+settings.locale[1]+'</p>').click(function () {
                        O._cnbtn();
                        O.hideOpts();
                    });
                    O.optDiv.append($('<div class="MultiControls">').append(O.okbtn).append(O.cancelBtn));
                },

                _cnbtn:function(){
                    var O = this;
                    //remove all selections
                        O.E.find('option:selected').each(function () { this.selected = false; });
                        O.optDiv.find('li.selected').removeClass('selected')

                        //restore selections from saved state.
                        for(var i = 0; i < O.Pstate.length; i++) {
                            O.E.find('option')[O.Pstate[i]].selected = true;
                            O.ul.find('li.opt').eq(O.Pstate[i]).addClass('selected');
                        }
                    O.selAllState();
                },

                SelAll:function(){
                    var O = this;
                    if(!O.is_multi)return;
                    O.selAll = $('<p class="select-all"><span><i></i></span><label>' + settings.locale[2] + '</label></p>');
                    O.selAll.on('click',function(){
						//O.toggSelAll(!);
						O.selAll.toggleClass('selected');
						O.optDiv.find('li.opt').not('.hidden').each(function(ix,e){
							e = $(e);
							if(O.selAll.hasClass('selected')){
								if(!e.hasClass('selected'))e.trigger('click');
							}
							else
								if(e.hasClass('selected'))e.trigger('click');
						});
					});

                    O.optDiv.prepend(O.selAll);
                },

                // search module (can be removed if not required.)
                Search: function(){
                    var O = this,
                        cc = O.CaptionCont.addClass('search'),
                        P = $('<p class="no-match">');

                    O.ftxt = $('<input type="text" class="search-txt" value="" placeholder="' + settings.searchText + '">')
                        .on('click', function(e){
                            e.stopPropagation();
                        });
                    cc.append(O.ftxt);
                    O.optDiv.children('ul').after(P);

                    O.ftxt.on('keyup.sumo',function(){
                        var hid = O.optDiv.find('ul.options li.opt').each(function(ix,e){
                            e = $(e);
                            if(e.text().toLowerCase().indexOf(O.ftxt.val().toLowerCase()) > -1)
                                e.removeClass('hidden');
                            else
                                e.addClass('hidden');
                        }).not('.hidden');

                        P.html(settings.noMatch.replace(/\{0\}/g, O.ftxt.val())).toggle(!hid.length);

                        O.selAllState();
                    });
                },

                selAllState: function () {
                    var O = this;
                    if (settings.selectAll) {
                        var sc = 0, vc = 0;
                        O.optDiv.find('li.opt').not('.hidden').each(function (ix, e) {
                            if ($(e).hasClass('selected')) sc++;
                            if (!$(e).hasClass('disabled')) vc++;
                        });
                        //select all checkbox state change.
                        if (sc == vc) O.selAll.removeClass('partial').addClass('selected');
                        else if (sc == 0) O.selAll.removeClass('selected partial');
                        else O.selAll.addClass('partial')//.removeClass('selected');
                    }
                },

                showOpts: function () {
                    var O = this;
                    if (O.E.attr('disabled')) return; // if select is disabled then retrun
                    O.is_opened = true;
                    O.select.addClass('open');

                    if(O.ftxt)O.ftxt.focus();
                    else O.select.focus();

                    // hide options on click outside.
                    $(document).on('click.sumo', function (e) {
                        if (!O.select.is(e.target)                  // if the target of the click isn't the container...
                            && O.select.has(e.target).length === 0){ // ... nor a descendant of the container
                            if(!O.is_opened)return;
                            O.hideOpts();
                            if (settings.okCancelInMulti)O._cnbtn();
                        }
                    });

                    if (O.is_floating) {
                        H = O.optDiv.children('ul').outerHeight() + 2;  // +2 is clear fix
                        if (O.is_multi) H = H + parseInt(O.optDiv.css('padding-bottom'));
                        O.optDiv.css('height', H);
                        $('body').addClass('sumoStopScroll');
                    }

                    O.setPstate();
                },

                //maintain state when ok/cancel buttons are available storing the indexes.
                setPstate: function(){
                    var O = this;
                    if (O.is_multi && (O.is_floating || settings.okCancelInMulti)){
                        O.Pstate = [];
                        // assuming that find returns elements in tree order
                        O.E.find('option').each(function (i, e){if(e.selected) O.Pstate.push(i);});
                    }
                },

                callChange:function(){
                    this.E.trigger('change').trigger('click');
                },

                hideOpts: function () {
                    var O = this;
                    if(O.is_opened){
                        O.is_opened = false;
                        O.select.removeClass('open').find('ul li.sel').removeClass('sel');
                        $(document).off('click.sumo');
                        O.select.focus();
                        $('body').removeClass('sumoStopScroll');

                        // clear the search
                        if(settings.search){
                            O.ftxt.val('');
                            O.optDiv.find('ul.options li').removeClass('hidden');
                            O.optDiv.find('.no-match').toggle(false);
                        }
                    }
                 },
                setOnOpen: function () {
                    var O = this,
                        li = O.optDiv.find('li.opt:not(.hidden)').eq(settings.search?0:O.E[0].selectedIndex);

                    O.optDiv.find('li.sel').removeClass('sel');
                    li.addClass('sel');
                    O.showOpts();
                },
                nav: function (up) {
                    var O = this, c, 
                    s=O.ul.find('li.opt:not(.disabled, .hidden)'),
                    sel = O.ul.find('li.opt.sel:not(.hidden)'),
                    idx = s.index(sel);
                    if (O.is_opened && sel.length) {
                        
                        if (up && idx > 0)
                            c = s.eq(idx-1);
                        else if(!up && idx < s.length-1 && idx > -1)
                            c = s.eq(idx+1);
                        else return; // if no items before or after

                        sel.removeClass('sel');
                        sel = c.addClass('sel');

                        // setting sel item to visible view.
                        var ul = O.ul,
                            st = ul.scrollTop(),
                            t = sel.position().top + st;                            
                        if(t >= st + ul.height()-sel.outerHeight())
                            ul.scrollTop(t - ul.height() + sel.outerHeight());
                        if(t<st)
                            ul.scrollTop(t);

                    }
                    else
                        O.setOnOpen();
                },

                basicEvents: function () {
                    var O = this;
                    O.CaptionCont.click(function (evt) {
                        O.E.trigger('click');
                        if (O.is_opened) O.hideOpts(); else O.showOpts();
                        evt.stopPropagation();
                    });

                        O.select.on('keydown.sumo', function (e) {
                            switch (e.which) {
                                case 38: // up
                                    O.nav(true);
                                    break;

                                case 40: // down
                                    O.nav(false);
                                    break;

                                case 32: // space
                                    if(settings.search && O.ftxt.is(e.target))return;
                                case 13: // enter
                                    if (O.is_opened)
                                        O.optDiv.find('ul li.sel').trigger('click');
                                    else
                                        O.setOnOpen();
                                    break;
				                case 9:	 //tab
                                case 27: // esc
                                     if (settings.okCancelInMulti)O._cnbtn();
                                    O.hideOpts();
                                    return;

                                default:
                                    return; // exit this handler for other keys
                            }
                            e.preventDefault(); // prevent the default action (scroll / move caret)
                        });

                    $(window).on('resize.sumo', function () {
                        O.floatingList();
                    });
                },

                onOptClick: function (li) {
                    var O = this;
                    li.click(function () {
                        var li = $(this);
                        if(li.hasClass('disabled'))return;
                        txt = "";
                        if (O.is_multi) {
                            li.toggleClass('selected');
                            li.data('opt')[0].selected = li.hasClass('selected');
                            O.selAllState();
                        }
                        else {
                            li.parent().find('li.selected').removeClass('selected'); //if not multiselect then remove all selections from this list
                            li.toggleClass('selected');
                            li.data('opt')[0].selected = true;
                        }

                        //branch for combined change event.
                        if (!(O.is_multi && settings.triggerChangeCombined && (O.is_floating || settings.okCancelInMulti))) {
                            O.setText();
                            O.callChange();
                        }

                        if (!O.is_multi) O.hideOpts(); //if its not a multiselect then hide on single select.
                    });
                },

                setText: function () {
                    var O = this;
                    O.placeholder = "";
                    if (O.is_multi) {
                        sels = O.E.find(':selected').not(':disabled'); //selected options.

                        for (i = 0; i < sels.length; i++) {
                                if (i + 1 >= settings.csvDispCount && settings.csvDispCount) {
                                    if (sels.length == O.E.find('option').length && settings.captionFormatAllSelected) {
                                        O.placeholder = settings.captionFormatAllSelected.replace(/\{0\}/g, sels.length)+',';
                                    } else {
                                        O.placeholder = settings.captionFormat.replace(/\{0\}/g, sels.length)+',';
                                    }

                                    break;
                                }
                                else O.placeholder += $(sels[i]).text() + ", ";
                            }
                            O.placeholder = O.placeholder.replace(/,([^,]*)$/, '$1'); //remove unexpected "," from last.
                    }
                    else {
                        O.placeholder = O.E.find(':selected').not(':disabled').text();
                    }

                    is_placeholder = false;

                    if (!O.placeholder) {

                        is_placeholder = true;

                        O.placeholder = O.E.attr('placeholder');
                        if (!O.placeholder)                  //if placeholder is there then set it
                            O.placeholder = O.E.find('option:disabled:selected').text();
                    }

                    O.placeholder = O.placeholder ? (settings.prefix + ' ' + O.placeholder) : settings.placeholder

                    //set display text
                    O.caption.html(O.placeholder);
                    O.CaptionCont.attr('title', O.placeholder);

                    //set the hidden field if post as csv is true.
                    csvField = O.select.find('input.HEMANT123');
                    if (csvField.length) csvField.val(O.getSelStr());

                    //add class placeholder if its a placeholder text.
                    if (is_placeholder) O.caption.addClass('placeholder'); else O.caption.removeClass('placeholder');
                    return O.placeholder;
                },

                isMobile: function () {

                    // Adapted from http://www.detectmobilebrowsers.com
                    var ua = navigator.userAgent || navigator.vendor || window.opera;

                    // Checks for iOs, Android, Blackberry, Opera Mini, and Windows mobile devices
                    for (var i = 0; i < settings.nativeOnDevice.length; i++) if (ua.toString().toLowerCase().indexOf(settings.nativeOnDevice[i].toLowerCase()) > 0) return settings.nativeOnDevice[i];
                    return false;
                },

                setNativeMobile: function () {
                    var O = this;
                    O.E.addClass('SelectClass')//.css('height', O.select.outerHeight());
					O.mob = true;
                    O.E.change(function () {
                        O.setText();
                    });
                },

                floatingList: function () {
                    var O = this;
                    //called on init and also on resize.
                    //O.is_floating = true if window width is < specified float width
                    O.is_floating = $(window).width() <= settings.floatWidth;

                    //set class isFloating
                    O.optDiv.toggleClass('isFloating', O.is_floating);

                    //remove height if not floating
                    if (!O.is_floating) O.optDiv.css('height', '');

                    //toggle class according to okCancelInMulti flag only when it is not floating
                    O.optDiv.toggleClass('okCancelInMulti', settings.okCancelInMulti && !O.is_floating);
                },

                //HELPERS FOR OUTSIDERS
                // validates range of given item operations
                vRange: function (i) {
                    var O = this;
                    opts = O.E.find('option');
                    if (opts.length <= i || i < 0) throw "index out of bounds"
                    return O;
                },

                //toggles selection on c as boolean.
                toggSel: function (c, i) {
                    var O = this;
                    if (typeof(i) === "number"){
                        O.vRange(i);
                        opt = O.E.find('option')[i];
                    }
                    else{
                        opt = O.E.find('option[value="'+i+'"]')[0]||0;
                    }
                    if (!opt || opt.disabled) 
                        return;

                    if(opt.selected != c){
                        opt.selected = c;
                        if(!O.mob) $(opt).data('li').toggleClass('selected',c);
                        
                        O.callChange();
                        O.setPstate();
                        O.setText();
                        O.selAllState();
                    }
                },

                //toggles disabled on c as boolean.
                toggDis: function (c, i) {
                    var O = this.vRange(i);
                    O.E.find('option')[i].disabled = c;
                    if(c)O.E.find('option')[i].selected = false;
                    if(!O.mob)O.optDiv.find('ul.options li').eq(i).toggleClass('disabled', c).removeClass('selected');
                    O.setText();
                },

                // toggle disable/enable on complete select control
                toggSumo: function(val) {
                    var O = this;
                    O.enabled = val;
                    O.select.toggleClass('disabled', val);

                    if (val) {
                        O.E.attr('disabled', 'disabled');
                        O.select.removeAttr('tabindex');
                    }
                    else{
                        O.E.removeAttr('disabled');
                        O.select.attr('tabindex','0');
                    }

                    return O;
                },

                //toggles alloption on c as boolean.
                toggSelAll: function (c) {
                    var O = this;
                    O.E.find('option').each(function (ix, el) {
                        if (O.E.find('option')[$(this).index()].disabled) return;
                        O.E.find('option')[$(this).index()].selected = c;
                        if (!O.mob)
							O.optDiv.find('ul.options li').eq($(this).index()).toggleClass('selected', c);
                        O.setText();
                    });
                    if(!O.mob && O.selAll)O.selAll.removeClass('partial').toggleClass('selected',c);
                    O.callChange();
                    O.setPstate();
                },

                /* outside accessibility options
                   which can be accessed from the element instance.
                */
                reload:function(){
                    var elm = this.unload();
                    return $(elm).SumoSelect(settings);
                },

                unload: function () {
                    var O = this;
                    O.select.before(O.E);
                    O.E.show();

                    if (settings.outputAsCSV && O.is_multi && O.select.find('input.HEMANT123').length) {
                        O.E.attr('name', O.select.find('input.HEMANT123').attr('name')); // restore the name;
                    }
                    O.select.remove();
                    delete selObj.sumo;
                    return selObj;
                },

                //## add a new option to select at a given index.
                add: function (val, txt, i) {
                    if (typeof val == "undefined") throw "No value to add"

                    var O = this;
                    opts=O.E.find('option')
                    if (typeof txt == "number") { i = txt; txt = val; }
                    if (typeof txt == "undefined") { txt = val; }

                    opt = $("<option></option>").val(val).html(txt);

                    if (opts.length < i) throw "index out of bounds"

                    if (typeof i == "undefined" || opts.length == i) { // add it to the last if given index is last no or no index provides.
                        O.E.append(opt);
                        if(!O.mob)O.ul.append(O.createLi(opt));
                    }
                    else {
                        opts.eq(i).before(opt);
                        if(!O.mob)O.ul.find('li.opt').eq(i).before(O.createLi(opt));
                    }

                    return selObj;
                },

                //## removes an item at a given index.
                remove: function (i) {
                    var O = this.vRange(i);
                    O.E.find('option').eq(i).remove();
                    if(!O.mob)O.optDiv.find('ul.options li').eq(i).remove();
                    O.setText();
                },

                //## Select an item at a given index.
                selectItem: function (i) { this.toggSel(true, i); },

                //## UnSelect an iten at a given index.
                unSelectItem: function (i) { this.toggSel(false, i); },

                //## Select all items  of the select.
                selectAll: function () { this.toggSelAll(true); },

                //## UnSelect all items of the select.
                unSelectAll: function () { this.toggSelAll(false); },

                //## Disable an iten at a given index.
                disableItem: function (i) { this.toggDis(true, i) },

                //## Removes disabled an iten at a given index.
                enableItem: function (i) { this.toggDis(false, i) },

                //## New simple methods as getter and setter are not working fine in ie8-
                //## variable to check state of control if enabled or disabled.
                enabled : true,
                //## Enables the control
                enable: function(){return this.toggSumo(false)},

                //## Disables the control
                disable: function(){return this.toggSumo(true)},


                init: function () {
                    var O = this;
                    O.createElems();
                    O.setText();
                    return O
                }

            };

            selObj.sumo.init();
        });

        return ret.length == 1 ? ret[0] : ret;
    };


}(jQuery));

/*!
 * Fotorama 4.6.4 | http://fotorama.io/license/
 */
fotoramaVersion="4.6.4",function(a,b,c,d,e){"use strict";function f(a){var b="bez_"+d.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof d.easing[b]){var c=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))},g=function(a){return e[0]+a*(2*d[0]+3*c[0]*a)},h=function(a){for(var b,c=a,d=0;++d<14&&(b=f(c,0)-a,!(Math.abs(b)<.001));)c-=b/g(c);return c};return function(a){return f(h(a),1)}};d.easing[b]=function(b,d,e,f,g){return f*c([a[0],a[1]],[a[2],a[3]])(d/g)+e}}return b}function g(){}function h(a,b,c){return Math.max(isNaN(b)?-1/0:b,Math.min(isNaN(c)?1/0:c,a))}function i(a){return a.match(/ma/)&&a.match(/-?\d+(?!d)/g)[a.match(/3d/)?12:4]}function j(a){return Ic?+i(a.css("transform")):+a.css("left").replace("px","")}function k(a){var b={};return Ic?b.transform="translate3d("+a+"px,0,0)":b.left=a,b}function l(a){return{"transition-duration":a+"ms"}}function m(a,b){return isNaN(a)?b:a}function n(a,b){return m(+String(a).replace(b||"px",""))}function o(a){return/%$/.test(a)?n(a,"%"):e}function p(a,b){return m(o(a)/100*b,n(a))}function q(a){return(!isNaN(n(a))||!isNaN(n(a,"%")))&&a}function r(a,b,c,d){return(a-(d||0))*(b+(c||0))}function s(a,b,c,d){return-Math.round(a/(b+(c||0))-(d||0))}function t(a){var b=a.data();if(!b.tEnd){var c=a[0],d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};T(c,d[uc.prefixed("transition")],function(a){b.tProp&&a.propertyName.match(b.tProp)&&b.onEndFn()}),b.tEnd=!0}}function u(a,b,c,d){var e,f=a.data();f&&(f.onEndFn=function(){e||(e=!0,clearTimeout(f.tT),c())},f.tProp=b,clearTimeout(f.tT),f.tT=setTimeout(function(){f.onEndFn()},1.5*d),t(a))}function v(a,b){if(a.length){var c=a.data();Ic?(a.css(l(0)),c.onEndFn=g,clearTimeout(c.tT)):a.stop();var d=w(b,function(){return j(a)});return a.css(k(d)),d}}function w(){for(var a,b=0,c=arguments.length;c>b&&(a=b?arguments[b]():arguments[b],"number"!=typeof a);b++);return a}function x(a,b){return Math.round(a+(b-a)/1.5)}function y(){return y.p=y.p||("https:"===c.protocol?"https://":"http://"),y.p}function z(a){var c=b.createElement("a");return c.href=a,c}function A(a,b){if("string"!=typeof a)return a;a=z(a);var c,d;if(a.host.match(/youtube\.com/)&&a.search){if(c=a.search.split("v=")[1]){var e=c.indexOf("&");-1!==e&&(c=c.substring(0,e)),d="youtube"}}else a.host.match(/youtube\.com|youtu\.be/)?(c=a.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),d="youtube"):a.host.match(/vimeo\.com/)&&(d="vimeo",c=a.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return c&&d||!b||(c=a.href,d="custom"),c?{id:c,type:d,s:a.search.replace(/^\?/,""),p:y()}:!1}function B(a,b,c){var e,f,g=a.video;return"youtube"===g.type?(f=y()+"img.youtube.com/vi/"+g.id+"/default.jpg",e=f.replace(/\/default.jpg$/,"/hqdefault.jpg"),a.thumbsReady=!0):"vimeo"===g.type?d.ajax({url:y()+"vimeo.com/api/v2/video/"+g.id+".json",dataType:"jsonp",success:function(d){a.thumbsReady=!0,C(b,{img:d[0].thumbnail_large,thumb:d[0].thumbnail_small},a.i,c)}}):a.thumbsReady=!0,{img:e,thumb:f}}function C(a,b,c,e){for(var f=0,g=a.length;g>f;f++){var h=a[f];if(h.i===c&&h.thumbsReady){var i={videoReady:!0};i[Xc]=i[Zc]=i[Yc]=!1,e.splice(f,1,d.extend({},h,i,b));break}}}function D(a){function b(a,b,e){var f=a.children("img").eq(0),g=a.attr("href"),h=a.attr("src"),i=f.attr("src"),j=b.video,k=e?A(g,j===!0):!1;k?g=!1:k=j,c(a,f,d.extend(b,{video:k,img:b.img||g||h||i,thumb:b.thumb||i||h||g}))}function c(a,b,c){var e=c.thumb&&c.img!==c.thumb,f=n(c.width||a.attr("width")),g=n(c.height||a.attr("height"));d.extend(c,{width:f,height:g,thumbratio:S(c.thumbratio||n(c.thumbwidth||b&&b.attr("width")||e||f)/n(c.thumbheight||b&&b.attr("height")||e||g))})}var e=[];return a.children().each(function(){var a=d(this),f=R(d.extend(a.data(),{id:a.attr("id")}));if(a.is("a, img"))b(a,f,!0);else{if(a.is(":empty"))return;c(a,null,d.extend(f,{html:this,_html:a.html()}))}e.push(f)}),e}function E(a){return 0===a.offsetWidth&&0===a.offsetHeight}function F(a){return!d.contains(b.documentElement,a)}function G(a,b,c,d){return G.i||(G.i=1,G.ii=[!0]),d=d||G.i,"undefined"==typeof G.ii[d]&&(G.ii[d]=!0),a()?b():G.ii[d]&&setTimeout(function(){G.ii[d]&&G(a,b,c,d)},c||100),G.i++}function H(a){c.replace(c.protocol+"//"+c.host+c.pathname.replace(/^\/?/,"/")+c.search+"#"+a)}function I(a,b,c,d){var e=a.data(),f=e.measures;if(f&&(!e.l||e.l.W!==f.width||e.l.H!==f.height||e.l.r!==f.ratio||e.l.w!==b.w||e.l.h!==b.h||e.l.m!==c||e.l.p!==d)){var g=f.width,i=f.height,j=b.w/b.h,k=f.ratio>=j,l="scaledown"===c,m="contain"===c,n="cover"===c,o=$(d);k&&(l||m)||!k&&n?(g=h(b.w,0,l?g:1/0),i=g/f.ratio):(k&&n||!k&&(l||m))&&(i=h(b.h,0,l?i:1/0),g=i*f.ratio),a.css({width:g,height:i,left:p(o.x,b.w-g),top:p(o.y,b.h-i)}),e.l={W:f.width,H:f.height,r:f.ratio,w:b.w,h:b.h,m:c,p:d}}return!0}function J(a,b){var c=a[0];c.styleSheet?c.styleSheet.cssText=b:a.html(b)}function K(a,b,c){return b===c?!1:b>=a?"left":a>=c?"right":"left right"}function L(a,b,c,d){if(!c)return!1;if(!isNaN(a))return a-(d?0:1);for(var e,f=0,g=b.length;g>f;f++){var h=b[f];if(h.id===a){e=f;break}}return e}function M(a,b,c){c=c||{},a.each(function(){var a,e=d(this),f=e.data();f.clickOn||(f.clickOn=!0,d.extend(cb(e,{onStart:function(b){a=b,(c.onStart||g).call(this,b)},onMove:c.onMove||g,onTouchEnd:c.onTouchEnd||g,onEnd:function(c){c.moved||b.call(this,a)}}),{noMove:!0}))})}function N(a,b){return'<div class="'+a+'">'+(b||"")+"</div>"}function O(a){for(var b=a.length;b;){var c=Math.floor(Math.random()*b--),d=a[b];a[b]=a[c],a[c]=d}return a}function P(a){return"[object Array]"==Object.prototype.toString.call(a)&&d.map(a,function(a){return d.extend({},a)})}function Q(a,b,c){a.scrollLeft(b||0).scrollTop(c||0)}function R(a){if(a){var b={};return d.each(a,function(a,c){b[a.toLowerCase()]=c}),b}}function S(a){if(a){var b=+a;return isNaN(b)?(b=a.split("/"),+b[0]/+b[1]||e):b}}function T(a,b,c,d){b&&(a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent("on"+b,c))}function U(a){return!!a.getAttribute("disabled")}function V(a){return{tabindex:-1*a+"",disabled:a}}function W(a,b){T(a,"keyup",function(c){U(a)||13==c.keyCode&&b.call(a,c)})}function X(a,b){T(a,"focus",a.onfocusin=function(c){b.call(a,c)},!0)}function Y(a,b){a.preventDefault?a.preventDefault():a.returnValue=!1,b&&a.stopPropagation&&a.stopPropagation()}function Z(a){return a?">":"<"}function $(a){return a=(a+"").split(/\s+/),{x:q(a[0])||bd,y:q(a[1])||bd}}function _(a,b){var c=a.data(),e=Math.round(b.pos),f=function(){c.sliding=!1,(b.onEnd||g)()};"undefined"!=typeof b.overPos&&b.overPos!==b.pos&&(e=b.overPos,f=function(){_(a,d.extend({},b,{overPos:b.pos,time:Math.max(Qc,b.time/2)}))});var h=d.extend(k(e),b.width&&{width:b.width});c.sliding=!0,Ic?(a.css(d.extend(l(b.time),h)),b.time>10?u(a,"transform",f,b.time):f()):a.stop().animate(h,b.time,_c,f)}function ab(a,b,c,e,f,h){var i="undefined"!=typeof h;if(i||(f.push(arguments),Array.prototype.push.call(arguments,f.length),!(f.length>1))){a=a||d(a),b=b||d(b);var j=a[0],k=b[0],l="crossfade"===e.method,m=function(){if(!m.done){m.done=!0;var a=(i||f.shift())&&f.shift();a&&ab.apply(this,a),(e.onEnd||g)(!!a)}},n=e.time/(h||1);c.removeClass(Rb+" "+Qb),a.stop().addClass(Rb),b.stop().addClass(Qb),l&&k&&a.fadeTo(0,0),a.fadeTo(l?n:0,1,l&&m),b.fadeTo(n,0,m),j&&l||k||m()}}function bb(a){var b=(a.touches||[])[0]||a;a._x=b.pageX,a._y=b.clientY,a._now=d.now()}function cb(a,c){function e(a){return m=d(a.target),u.checked=p=q=s=!1,k||u.flow||a.touches&&a.touches.length>1||a.which>1||ed&&ed.type!==a.type&&gd||(p=c.select&&m.is(c.select,t))?p:(o="touchstart"===a.type,q=m.is("a, a *",t),n=u.control,r=u.noMove||u.noSwipe||n?16:u.snap?0:4,bb(a),l=ed=a,fd=a.type.replace(/down|start/,"move").replace(/Down/,"Move"),(c.onStart||g).call(t,a,{control:n,$target:m}),k=u.flow=!0,void((!o||u.go)&&Y(a)))}function f(a){if(a.touches&&a.touches.length>1||Nc&&!a.isPrimary||fd!==a.type||!k)return k&&h(),void(c.onTouchEnd||g)();bb(a);var b=Math.abs(a._x-l._x),d=Math.abs(a._y-l._y),e=b-d,f=(u.go||u.x||e>=0)&&!u.noSwipe,i=0>e;o&&!u.checked?(k=f)&&Y(a):(Y(a),(c.onMove||g).call(t,a,{touch:o})),!s&&Math.sqrt(Math.pow(b,2)+Math.pow(d,2))>r&&(s=!0),u.checked=u.checked||f||i}function h(a){(c.onTouchEnd||g)();var b=k;u.control=k=!1,b&&(u.flow=!1),!b||q&&!u.checked||(a&&Y(a),gd=!0,clearTimeout(hd),hd=setTimeout(function(){gd=!1},1e3),(c.onEnd||g).call(t,{moved:s,$target:m,control:n,touch:o,startEvent:l,aborted:!a||"MSPointerCancel"===a.type}))}function i(){u.flow||setTimeout(function(){u.flow=!0},10)}function j(){u.flow&&setTimeout(function(){u.flow=!1},Pc)}var k,l,m,n,o,p,q,r,s,t=a[0],u={};return Nc?(T(t,"MSPointerDown",e),T(b,"MSPointerMove",f),T(b,"MSPointerCancel",h),T(b,"MSPointerUp",h)):(T(t,"touchstart",e),T(t,"touchmove",f),T(t,"touchend",h),T(b,"touchstart",i),T(b,"touchend",j),T(b,"touchcancel",j),Ec.on("scroll",j),a.on("mousedown",e),Fc.on("mousemove",f).on("mouseup",h)),a.on("click","a",function(a){u.checked&&Y(a)}),u}function db(a,b){function c(c,d){A=!0,j=l=c._x,q=c._now,p=[[q,j]],m=n=D.noMove||d?0:v(a,(b.getPos||g)()),(b.onStart||g).call(B,c)}function e(a,b){s=D.min,t=D.max,u=D.snap,w=a.altKey,A=z=!1,y=b.control,y||C.sliding||c(a)}function f(d,e){D.noSwipe||(A||c(d),l=d._x,p.push([d._now,l]),n=m-(j-l),o=K(n,s,t),s>=n?n=x(n,s):n>=t&&(n=x(n,t)),D.noMove||(a.css(k(n)),z||(z=!0,e.touch||Nc||a.addClass(ec)),(b.onMove||g).call(B,d,{pos:n,edge:o})))}function i(e){if(!D.noSwipe||!e.moved){A||c(e.startEvent,!0),e.touch||Nc||a.removeClass(ec),r=d.now();for(var f,i,j,k,o,q,v,x,y,z=r-Pc,C=null,E=Qc,F=b.friction,G=p.length-1;G>=0;G--){if(f=p[G][0],i=Math.abs(f-z),null===C||j>i)C=f,k=p[G][1];else if(C===z||i>j)break;j=i}v=h(n,s,t);var H=k-l,I=H>=0,J=r-C,K=J>Pc,L=!K&&n!==m&&v===n;u&&(v=h(Math[L?I?"floor":"ceil":"round"](n/u)*u,s,t),s=t=v),L&&(u||v===n)&&(y=-(H/J),E*=h(Math.abs(y),b.timeLow,b.timeHigh),o=Math.round(n+y*E/F),u||(v=o),(!I&&o>t||I&&s>o)&&(q=I?s:t,x=o-q,u||(v=q),x=h(v+.03*x,q-50,q+50),E=Math.abs((n-x)/(y/F)))),E*=w?10:1,(b.onEnd||g).call(B,d.extend(e,{moved:e.moved||K&&u,pos:n,newPos:v,overPos:x,time:E}))}}var j,l,m,n,o,p,q,r,s,t,u,w,y,z,A,B=a[0],C=a.data(),D={};return D=d.extend(cb(b.$wrap,d.extend({},b,{onStart:e,onMove:f,onEnd:i})),D)}function eb(a,b){var c,e,f,h=a[0],i={prevent:{}};return T(h,Oc,function(a){var h=a.wheelDeltaY||-1*a.deltaY||0,j=a.wheelDeltaX||-1*a.deltaX||0,k=Math.abs(j)&&!Math.abs(h),l=Z(0>j),m=e===l,n=d.now(),o=Pc>n-f;e=l,f=n,k&&i.ok&&(!i.prevent[l]||c)&&(Y(a,!0),c&&m&&o||(b.shift&&(c=!0,clearTimeout(i.t),i.t=setTimeout(function(){c=!1},Rc)),(b.onEnd||g)(a,b.shift?l:j)))}),i}function fb(){d.each(d.Fotorama.instances,function(a,b){b.index=a})}function gb(a){d.Fotorama.instances.push(a),fb()}function hb(a){d.Fotorama.instances.splice(a.index,1),fb()}var ib="fotorama",jb="fullscreen",kb=ib+"__wrap",lb=kb+"--css2",mb=kb+"--css3",nb=kb+"--video",ob=kb+"--fade",pb=kb+"--slide",qb=kb+"--no-controls",rb=kb+"--no-shadows",sb=kb+"--pan-y",tb=kb+"--rtl",ub=kb+"--only-active",vb=kb+"--no-captions",wb=kb+"--toggle-arrows",xb=ib+"__stage",yb=xb+"__frame",zb=yb+"--video",Ab=xb+"__shaft",Bb=ib+"__grab",Cb=ib+"__pointer",Db=ib+"__arr",Eb=Db+"--disabled",Fb=Db+"--prev",Gb=Db+"--next",Hb=ib+"__nav",Ib=Hb+"-wrap",Jb=Hb+"__shaft",Kb=Hb+"--dots",Lb=Hb+"--thumbs",Mb=Hb+"__frame",Nb=Mb+"--dot",Ob=Mb+"--thumb",Pb=ib+"__fade",Qb=Pb+"-front",Rb=Pb+"-rear",Sb=ib+"__shadow",Tb=Sb+"s",Ub=Tb+"--left",Vb=Tb+"--right",Wb=ib+"__active",Xb=ib+"__select",Yb=ib+"--hidden",Zb=ib+"--fullscreen",$b=ib+"__fullscreen-icon",_b=ib+"__error",ac=ib+"__loading",bc=ib+"__loaded",cc=bc+"--full",dc=bc+"--img",ec=ib+"__grabbing",fc=ib+"__img",gc=fc+"--full",hc=ib+"__dot",ic=ib+"__thumb",jc=ic+"-border",kc=ib+"__html",lc=ib+"__video",mc=lc+"-play",nc=lc+"-close",oc=ib+"__caption",pc=ib+"__caption__wrap",qc=ib+"__spinner",rc='" tabindex="0" role="button',sc=d&&d.fn.jquery.split(".");if(!sc||sc[0]<1||1==sc[0]&&sc[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var tc={},uc=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&r[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+u.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+v.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.6.2",n={},o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),t="Webkit Moz O ms",u=t.split(" "),v=t.toLowerCase().split(" "),w={},x=[],y=x.slice,z=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:p+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',p,'">',a,"</style>"].join(""),j.id=p,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=o.style.overflow,o.style.overflow="hidden",o.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),o.style.overflow=i),!!g},A={}.hasOwnProperty;l=e(A,"undefined")||e(A.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=y.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(y.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(y.call(arguments)))};return d}),w.csstransforms3d=function(){var a=!!i("perspective");return a};for(var B in w)l(w,B)&&(k=B.toLowerCase(),n[k]=w[B](),x.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),q=j=null,n._version=m,n._prefixes=s,n._domPrefixes=v,n._cssomPrefixes=u,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=z,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},n}(a,b),vc={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},wc="webkit moz o ms khtml".split(" ");if("undefined"!=typeof b.cancelFullScreen)vc.ok=!0;else for(var xc=0,yc=wc.length;yc>xc;xc++)if(vc.prefix=wc[xc],"undefined"!=typeof b[vc.prefix+"CancelFullScreen"]){vc.ok=!0;break}vc.ok&&(vc.event=vc.prefix+"fullscreenchange",vc.is=function(){switch(this.prefix){case"":return b.fullScreen;case"webkit":return b.webkitIsFullScreen;default:return b[this.prefix+"FullScreen"]}},vc.request=function(a){return""===this.prefix?a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},vc.cancel=function(){return""===this.prefix?b.cancelFullScreen():b[this.prefix+"CancelFullScreen"]()});var zc,Ac={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},Bc={top:"auto",left:"auto",className:""};!function(a,b){zc=b()}(this,function(){function a(a,c){var d,e=b.createElement(a||"div");for(d in c)e[d]=c[d];return e}function c(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function d(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return o[e]||(p.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",p.cssRules.length),o[e]=1),e}function f(a,b){var c,d,f=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<n.length;d++)if(c=n[d]+b,f[c]!==e)return c;return f[b]!==e?b:void 0}function g(a,b){for(var c in b)a.style[f(a,c)||c]=b[c];return a}function h(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]===e&&(a[d]=c[d])}return a}function i(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function j(a,b){return"string"==typeof a?a:a[b%a.length]}function k(a){return"undefined"==typeof this?new k(a):void(this.opts=h(a||{},k.defaults,q))}function l(){function b(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}p.addRule(".spin-vml","behavior:url(#default#VML)"),k.prototype.lines=function(a,d){function e(){return g(b("group",{coordsize:k+" "+k,coordorigin:-i+" "+-i}),{width:k,height:k})}function f(a,f,h){c(m,c(g(e(),{rotation:360/d.lines*a+"deg",left:~~f}),c(g(b("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),b("fill",{color:j(d.color,a),opacity:d.opacity}),b("stroke",{opacity:0}))))}var h,i=d.length+d.width,k=2*i,l=2*-(d.width+d.length)+"px",m=g(e(),{position:"absolute",top:l,left:l});if(d.shadow)for(h=1;h<=d.lines;h++)f(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)f(h);return c(a,m)},k.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var m,n=["webkit","Moz","ms","O"],o={},p=function(){var d=a("style",{type:"text/css"});return c(b.getElementsByTagName("head")[0],d),d.sheet||d.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};k.defaults={},h(k.prototype,{spin:function(b){this.stop();var c,d,e=this,f=e.opts,h=e.el=g(a(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex}),j=f.radius+f.length+f.width;if(b&&(b.insertBefore(h,b.firstChild||null),d=i(b),c=i(h),g(h,{left:("auto"==f.left?d.x-c.x+(b.offsetWidth>>1):parseInt(f.left,10)+j)+"px",top:("auto"==f.top?d.y-c.y+(b.offsetHeight>>1):parseInt(f.top,10)+j)+"px"})),h.setAttribute("role","progressbar"),e.lines(h,e.opts),!m){var k,l=0,n=(f.lines-1)*(1-f.direction)/2,o=f.fps,p=o/f.speed,q=(1-f.opacity)/(p*f.trail/100),r=p/f.lines;!function s(){l++;for(var a=0;a<f.lines;a++)k=Math.max(1-(l+(f.lines-a)*r)%p*q,f.opacity),e.opacity(h,a*f.direction+n,k,f);e.timeout=e.el&&setTimeout(s,~~(1e3/o))}()}return e},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=e),this},lines:function(b,e){function f(b,c){return g(a(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*i+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var h,i=0,k=(e.lines-1)*(1-e.direction)/2;i<e.lines;i++)h=g(a(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:m&&d(e.opacity,e.trail,k+i*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&c(h,g(f("#000","0 0 4px #000"),{top:"2px"})),c(b,c(h,f(j(e.color,i),"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var r=g(a("group"),{behavior:"url(#default#VML)"});return!f(r,"transform")&&r.adj?l():m=f(r,"animation"),k});var Cc,Dc,Ec=d(a),Fc=d(b),Gc="quirks"===c.hash.replace("#",""),Hc=uc.csstransforms3d,Ic=Hc&&!Gc,Jc=Hc||"CSS1Compat"===b.compatMode,Kc=vc.ok,Lc=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),Mc=!Ic||Lc,Nc=navigator.msPointerEnabled,Oc="onwheel"in b.createElement("div")?"wheel":b.onmousewheel!==e?"mousewheel":"DOMMouseScroll",Pc=250,Qc=300,Rc=1400,Sc=5e3,Tc=2,Uc=64,Vc=500,Wc=333,Xc="$stageFrame",Yc="$navDotFrame",Zc="$navThumbFrame",$c="auto",_c=f([.1,0,.25,1]),ad=99999,bd="50%",cd={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:Tc,glimpse:0,fit:"contain",position:bd,thumbposition:bd,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:Uc,thumbheight:Uc,thumbmargin:Tc,thumbborderwidth:Tc,thumbfit:"cover",allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:Qc,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,enableifsingleframe:!1,controlsonstart:!0,shuffle:!1,direction:"ltr",shadows:!0,spinner:null},dd={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1};G.stop=function(a){G.ii[a]=!1};var ed,fd,gd,hd;jQuery.Fotorama=function(a,e){function f(){d.each(yd,function(a,b){if(!b.i){b.i=me++;var c=A(b.video,!0);if(c){var d={};b.video=c,b.img||b.thumb?b.thumbsReady=!0:d=B(b,yd,ie),C(yd,{img:d.img,thumb:d.thumb},b.i,ie)}}})}function g(a){return Zd[a]||ie.fullScreen}function i(a){var b="keydown."+ib,c=ib+je,d="keydown."+c,f="resize."+c+" orientationchange."+c;a?(Fc.on(d,function(a){var b,c;Cd&&27===a.keyCode?(b=!0,md(Cd,!0,!0)):(ie.fullScreen||e.keyboard&&!ie.index)&&(27===a.keyCode?(b=!0,ie.cancelFullScreen()):a.shiftKey&&32===a.keyCode&&g("space")||37===a.keyCode&&g("left")||38===a.keyCode&&g("up")?c="<":32===a.keyCode&&g("space")||39===a.keyCode&&g("right")||40===a.keyCode&&g("down")?c=">":36===a.keyCode&&g("home")?c="<<":35===a.keyCode&&g("end")&&(c=">>")),(b||c)&&Y(a),c&&ie.show({index:c,slow:a.altKey,user:!0})}),ie.index||Fc.off(b).on(b,"textarea, input, select",function(a){!Dc.hasClass(jb)&&a.stopPropagation()}),Ec.on(f,ie.resize)):(Fc.off(d),Ec.off(f))}function j(b){b!==j.f&&(b?(a.html("").addClass(ib+" "+ke).append(qe).before(oe).before(pe),gb(ie)):(qe.detach(),oe.detach(),pe.detach(),a.html(ne.urtext).removeClass(ke),hb(ie)),i(b),j.f=b)}function m(){yd=ie.data=yd||P(e.data)||D(a),zd=ie.size=yd.length,!xd.ok&&e.shuffle&&O(yd),f(),Je=y(Je),zd&&j(!0)}function o(){var a=2>zd&&!e.enableifsingleframe||Cd;Me.noMove=a||Sd,Me.noSwipe=a||!e.swipe,!Wd&&se.toggleClass(Bb,!e.click&&!Me.noMove&&!Me.noSwipe),Nc&&qe.toggleClass(sb,!Me.noSwipe)}function t(a){a===!0&&(a=""),e.autoplay=Math.max(+a||Sc,1.5*Vd)}function u(){function a(a,c){b[a?"add":"remove"].push(c)}ie.options=e=R(e),Sd="crossfade"===e.transition||"dissolve"===e.transition,Md=e.loop&&(zd>2||Sd&&(!Wd||"slide"!==Wd)),Vd=+e.transitionduration||Qc,Yd="rtl"===e.direction,Zd=d.extend({},e.keyboard&&dd,e.keyboard);var b={add:[],remove:[]};zd>1||e.enableifsingleframe?(Nd=e.nav,Pd="top"===e.navposition,b.remove.push(Xb),we.toggle(!!e.arrows)):(Nd=!1,we.hide()),Rb(),Bd=new zc(d.extend(Ac,e.spinner,Bc,{direction:Yd?-1:1})),Gc(),Hc(),e.autoplay&&t(e.autoplay),Td=n(e.thumbwidth)||Uc,Ud=n(e.thumbheight)||Uc,Ne.ok=Pe.ok=e.trackpad&&!Mc,o(),ed(e,[Le]),Od="thumbs"===Nd,Od?(lc(zd,"navThumb"),Ad=Be,he=Zc,J(oe,d.Fotorama.jst.style({w:Td,h:Ud,b:e.thumbborderwidth,m:e.thumbmargin,s:je,q:!Jc})),ye.addClass(Lb).removeClass(Kb)):"dots"===Nd?(lc(zd,"navDot"),Ad=Ae,he=Yc,ye.addClass(Kb).removeClass(Lb)):(Nd=!1,ye.removeClass(Lb+" "+Kb)),Nd&&(Pd?xe.insertBefore(re):xe.insertAfter(re),wc.nav=!1,wc(Ad,ze,"nav")),Qd=e.allowfullscreen,Qd?(De.prependTo(re),Rd=Kc&&"native"===Qd):(De.detach(),Rd=!1),a(Sd,ob),a(!Sd,pb),a(!e.captions,vb),a(Yd,tb),a("always"!==e.arrows,wb),Xd=e.shadows&&!Mc,a(!Xd,rb),qe.addClass(b.add.join(" ")).removeClass(b.remove.join(" ")),Ke=d.extend({},e)}function x(a){return 0>a?(zd+a%zd)%zd:a>=zd?a%zd:a}function y(a){return h(a,0,zd-1)}function z(a){return Md?x(a):y(a)}function E(a){return a>0||Md?a-1:!1}function U(a){return zd-1>a||Md?a+1:!1}function $(){Me.min=Md?-1/0:-r(zd-1,Le.w,e.margin,Fd),Me.max=Md?1/0:-r(0,Le.w,e.margin,Fd),Me.snap=Le.w+e.margin}function bb(){Oe.min=Math.min(0,Le.nw-ze.width()),Oe.max=0,ze.toggleClass(Bb,!(Oe.noMove=Oe.min===Oe.max))}function cb(a,b,c){if("number"==typeof a){a=new Array(a);var e=!0}return d.each(a,function(a,d){if(e&&(d=a),"number"==typeof d){var f=yd[x(d)];if(f){var g="$"+b+"Frame",h=f[g];c.call(this,a,d,f,h,g,h&&h.data())}}})}function fb(a,b,c,d){(!$d||"*"===$d&&d===Ld)&&(a=q(e.width)||q(a)||Vc,b=q(e.height)||q(b)||Wc,ie.resize({width:a,ratio:e.ratio||c||a/b},0,d!==Ld&&"*"))}function Pb(a,b,c,f,g,h){cb(a,b,function(a,i,j,k,l,m){function n(a){var b=x(i);fd(a,{index:b,src:w,frame:yd[b]})}function o(){t.remove(),d.Fotorama.cache[w]="error",j.html&&"stage"===b||!y||y===w?(!w||j.html||r?"stage"===b&&(k.trigger("f:load").removeClass(ac+" "+_b).addClass(bc),n("load"),fb()):(k.trigger("f:error").removeClass(ac).addClass(_b),n("error")),m.state="error",!(zd>1&&yd[i]===j)||j.html||j.deleted||j.video||r||(j.deleted=!0,ie.splice(i,1))):(j[v]=w=y,Pb([i],b,c,f,g,!0))}function p(){d.Fotorama.measures[w]=u.measures=d.Fotorama.measures[w]||{width:s.width,height:s.height,ratio:s.width/s.height},fb(u.measures.width,u.measures.height,u.measures.ratio,i),t.off("load error").addClass(fc+(r?" "+gc:"")).prependTo(k),I(t,(d.isFunction(c)?c():c)||Le,f||j.fit||e.fit,g||j.position||e.position),d.Fotorama.cache[w]=m.state="loaded",setTimeout(function(){k.trigger("f:load").removeClass(ac+" "+_b).addClass(bc+" "+(r?cc:dc)),"stage"===b?n("load"):(j.thumbratio===$c||!j.thumbratio&&e.thumbratio===$c)&&(j.thumbratio=u.measures.ratio,vd())},0)}function q(){var a=10;G(function(){return!fe||!a--&&!Mc},function(){p()})}if(k){var r=ie.fullScreen&&j.full&&j.full!==j.img&&!m.$full&&"stage"===b;if(!m.$img||h||r){var s=new Image,t=d(s),u=t.data();m[r?"$full":"$img"]=t;var v="stage"===b?r?"full":"img":"thumb",w=j[v],y=r?null:j["stage"===b?"thumb":"img"];if("navThumb"===b&&(k=m.$wrap),!w)return void o();d.Fotorama.cache[w]?!function z(){"error"===d.Fotorama.cache[w]?o():"loaded"===d.Fotorama.cache[w]?setTimeout(q,0):setTimeout(z,100)}():(d.Fotorama.cache[w]="*",t.on("load",q).on("error",o)),m.state="",s.src=w}}})}function Qb(a){Ie.append(Bd.spin().el).appendTo(a)}function Rb(){Ie.detach(),Bd&&Bd.stop()}function Sb(){var a=Dd[Xc];a&&!a.data().state&&(Qb(a),a.on("f:load f:error",function(){a.off("f:load f:error"),Rb()}))}function ec(a){W(a,sd),X(a,function(){setTimeout(function(){Q(ye)},0),Rc({time:Vd,guessIndex:d(this).data().eq,minMax:Oe})})}function lc(a,b){cb(a,b,function(a,c,e,f,g,h){if(!f){f=e[g]=qe[g].clone(),h=f.data(),h.data=e;var i=f[0];"stage"===b?(e.html&&d('<div class="'+kc+'"></div>').append(e._html?d(e.html).removeAttr("id").html(e._html):e.html).appendTo(f),e.caption&&d(N(oc,N(pc,e.caption))).appendTo(f),e.video&&f.addClass(zb).append(Fe.clone()),X(i,function(){setTimeout(function(){Q(re)},0),pd({index:h.eq,user:!0})}),te=te.add(f)):"navDot"===b?(ec(i),Ae=Ae.add(f)):"navThumb"===b&&(ec(i),h.$wrap=f.children(":first"),Be=Be.add(f),e.video&&h.$wrap.append(Fe.clone()))}})}function sc(a,b,c,d){return a&&a.length&&I(a,b,c,d)}function tc(a){cb(a,"stage",function(a,b,c,f,g,h){if(f){var i=x(b),j=c.fit||e.fit,k=c.position||e.position;h.eq=i,Re[Xc][i]=f.css(d.extend({left:Sd?0:r(b,Le.w,e.margin,Fd)},Sd&&l(0))),F(f[0])&&(f.appendTo(se),md(c.$video)),sc(h.$img,Le,j,k),sc(h.$full,Le,j,k)}})}function uc(a,b){if("thumbs"===Nd&&!isNaN(a)){var c=-a,f=-a+Le.nw;Be.each(function(){var a=d(this),g=a.data(),h=g.eq,i=function(){return{h:Ud,w:g.w}},j=i(),k=yd[h]||{},l=k.thumbfit||e.thumbfit,m=k.thumbposition||e.thumbposition;j.w=g.w,g.l+g.w<c||g.l>f||sc(g.$img,j,l,m)||b&&Pb([h],"navThumb",i,l,m)})}}function wc(a,b,c){if(!wc[c]){var f="nav"===c&&Od,g=0;b.append(a.filter(function(){for(var a,b=d(this),c=b.data(),e=0,f=yd.length;f>e;e++)if(c.data===yd[e]){a=!0,c.eq=e;break}return a||b.remove()&&!1}).sort(function(a,b){return d(a).data().eq-d(b).data().eq}).each(function(){if(f){var a=d(this),b=a.data(),c=Math.round(Ud*b.data.thumbratio)||Td;b.l=g,b.w=c,a.css({width:c}),g+=c+e.thumbmargin}})),wc[c]=!0}}function xc(a){return a-Se>Le.w/3}function yc(a){return!(Md||Je+a&&Je-zd+a||Cd)}function Gc(){var a=yc(0),b=yc(1);ue.toggleClass(Eb,a).attr(V(a)),ve.toggleClass(Eb,b).attr(V(b))}function Hc(){Ne.ok&&(Ne.prevent={"<":yc(0),">":yc(1)})}function Lc(a){var b,c,d=a.data();return Od?(b=d.l,c=d.w):(b=a.position().left,c=a.width()),{c:b+c/2,min:-b+10*e.thumbmargin,max:-b+Le.w-c-10*e.thumbmargin}}function Oc(a){var b=Dd[he].data();_(Ce,{time:1.2*a,pos:b.l,width:b.w-2*e.thumbborderwidth})}function Rc(a){var b=yd[a.guessIndex][he];if(b){var c=Oe.min!==Oe.max,d=a.minMax||c&&Lc(Dd[he]),e=c&&(a.keep&&Rc.l?Rc.l:h((a.coo||Le.nw/2)-Lc(b).c,d.min,d.max)),f=c&&h(e,Oe.min,Oe.max),g=1.1*a.time;_(ze,{time:g,pos:f||0,onEnd:function(){uc(f,!0)}}),ld(ye,K(f,Oe.min,Oe.max)),Rc.l=e}}function Tc(){_c(he),Qe[he].push(Dd[he].addClass(Wb))}function _c(a){for(var b=Qe[a];b.length;)b.shift().removeClass(Wb)}function bd(a){var b=Re[a];d.each(Ed,function(a,c){delete b[x(c)]}),d.each(b,function(a,c){delete b[a],c.detach()})}function cd(a){Fd=Gd=Je;var b=Dd[Xc];b&&(_c(Xc),Qe[Xc].push(b.addClass(Wb)),a||ie.show.onEnd(!0),v(se,0,!0),bd(Xc),tc(Ed),$(),bb())}function ed(a,b){a&&d.each(b,function(b,c){c&&d.extend(c,{width:a.width||c.width,height:a.height,minwidth:a.minwidth,maxwidth:a.maxwidth,minheight:a.minheight,maxheight:a.maxheight,ratio:S(a.ratio)})})}function fd(b,c){a.trigger(ib+":"+b,[ie,c])}function gd(){clearTimeout(hd.t),fe=1,e.stopautoplayontouch?ie.stopAutoplay():ce=!0}function hd(){fe&&(e.stopautoplayontouch||(id(),jd()),hd.t=setTimeout(function(){fe=0},Qc+Pc))}function id(){ce=!(!Cd&&!de)}function jd(){if(clearTimeout(jd.t),G.stop(jd.w),!e.autoplay||ce)return void(ie.autoplay&&(ie.autoplay=!1,fd("stopautoplay")));ie.autoplay||(ie.autoplay=!0,fd("startautoplay"));var a=Je,b=Dd[Xc].data();jd.w=G(function(){return b.state||a!==Je},function(){jd.t=setTimeout(function(){if(!ce&&a===Je){var b=Kd,c=yd[b][Xc].data();jd.w=G(function(){return c.state||b!==Kd},function(){ce||b!==Kd||ie.show(Md?Z(!Yd):Kd)})}},e.autoplay)})}function kd(){ie.fullScreen&&(ie.fullScreen=!1,Kc&&vc.cancel(le),Dc.removeClass(jb),Cc.removeClass(jb),a.removeClass(Zb).insertAfter(pe),Le=d.extend({},ee),md(Cd,!0,!0),rd("x",!1),ie.resize(),Pb(Ed,"stage"),Q(Ec,ae,_d),fd("fullscreenexit"))}function ld(a,b){Xd&&(a.removeClass(Ub+" "+Vb),b&&!Cd&&a.addClass(b.replace(/^|\s/g," "+Tb+"--")))}function md(a,b,c){b&&(qe.removeClass(nb),Cd=!1,o()),a&&a!==Cd&&(a.remove(),fd("unloadvideo")),c&&(id(),jd())}function nd(a){qe.toggleClass(qb,a)}function od(a){if(!Me.flow){var b=a?a.pageX:od.x,c=b&&!yc(xc(b))&&e.click;od.p!==c&&re.toggleClass(Cb,c)&&(od.p=c,od.x=b)}}function pd(a){clearTimeout(pd.t),e.clicktransition&&e.clicktransition!==e.transition?setTimeout(function(){var b=e.transition;ie.setOptions({transition:e.clicktransition}),Wd=b,pd.t=setTimeout(function(){ie.show(a)},10)},0):ie.show(a)}function qd(a,b){var c=a.target,f=d(c);f.hasClass(mc)?ie.playVideo():c===Ee?ie.toggleFullScreen():Cd?c===He&&md(Cd,!0,!0):b?nd():e.click&&pd({index:a.shiftKey||Z(xc(a._x)),slow:a.altKey,user:!0})}function rd(a,b){Me[a]=Oe[a]=b}function sd(a){var b=d(this).data().eq;pd({index:b,slow:a.altKey,user:!0,coo:a._x-ye.offset().left})}function td(a){pd({index:we.index(this)?">":"<",slow:a.altKey,user:!0})}function ud(a){X(a,function(){setTimeout(function(){Q(re)},0),nd(!1)})}function vd(){if(m(),u(),!vd.i){vd.i=!0;var a=e.startindex;(a||e.hash&&c.hash)&&(Ld=L(a||c.hash.replace(/^#/,""),yd,0===ie.index||a,a)),Je=Fd=Gd=Hd=Ld=z(Ld)||0}if(zd){if(wd())return;Cd&&md(Cd,!0),Ed=[],bd(Xc),vd.ok=!0,ie.show({index:Je,time:0}),ie.resize()}else ie.destroy()}function wd(){return!wd.f===Yd?(wd.f=Yd,Je=zd-1-Je,ie.reverse(),!0):void 0}function xd(){xd.ok||(xd.ok=!0,fd("ready"))}Cc=d("html"),Dc=d("body");var yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,Wd,Xd,Yd,Zd,$d,_d,ae,be,ce,de,ee,fe,ge,he,ie=this,je=d.now(),ke=ib+je,le=a[0],me=1,ne=a.data(),oe=d("<style></style>"),pe=d(N(Yb)),qe=d(N(kb)),re=d(N(xb)).appendTo(qe),se=(re[0],d(N(Ab)).appendTo(re)),te=d(),ue=d(N(Db+" "+Fb+rc)),ve=d(N(Db+" "+Gb+rc)),we=ue.add(ve).appendTo(re),xe=d(N(Ib)),ye=d(N(Hb)).appendTo(xe),ze=d(N(Jb)).appendTo(ye),Ae=d(),Be=d(),Ce=(se.data(),ze.data(),d(N(jc)).appendTo(ze)),De=d(N($b+rc)),Ee=De[0],Fe=d(N(mc)),Ge=d(N(nc)).appendTo(re),He=Ge[0],Ie=d(N(qc)),Je=!1,Ke={},Le={},Me={},Ne={},Oe={},Pe={},Qe={},Re={},Se=0,Te=[];
qe[Xc]=d(N(yb)),qe[Zc]=d(N(Mb+" "+Ob+rc,N(ic))),qe[Yc]=d(N(Mb+" "+Nb+rc,N(hc))),Qe[Xc]=[],Qe[Zc]=[],Qe[Yc]=[],Re[Xc]={},qe.addClass(Ic?mb:lb).toggleClass(qb,!e.controlsonstart),ne.fotorama=this,ie.startAutoplay=function(a){return ie.autoplay?this:(ce=de=!1,t(a||e.autoplay),jd(),this)},ie.stopAutoplay=function(){return ie.autoplay&&(ce=de=!0,jd()),this},ie.show=function(a){var b;"object"!=typeof a?(b=a,a={}):b=a.index,b=">"===b?Gd+1:"<"===b?Gd-1:"<<"===b?0:">>"===b?zd-1:b,b=isNaN(b)?L(b,yd,!0):b,b="undefined"==typeof b?Je||0:b,ie.activeIndex=Je=z(b),Id=E(Je),Jd=U(Je),Kd=x(Je+(Yd?-1:1)),Ed=[Je,Id,Jd],Gd=Md?b:Je;var c=Math.abs(Hd-Gd),d=w(a.time,function(){return Math.min(Vd*(1+(c-1)/12),2*Vd)}),f=a.overPos;a.slow&&(d*=10);var g=Dd;ie.activeFrame=Dd=yd[Je];var i=g===Dd&&!a.user;md(Cd,Dd.i!==yd[x(Fd)].i),lc(Ed,"stage"),tc(Mc?[Gd]:[Gd,E(Gd),U(Gd)]),rd("go",!0),i||fd("show",{user:a.user,time:d}),ce=!0;var j=ie.show.onEnd=function(b){if(!j.ok){if(j.ok=!0,b||cd(!0),i||fd("showend",{user:a.user}),!b&&Wd&&Wd!==e.transition)return ie.setOptions({transition:Wd}),void(Wd=!1);Sb(),Pb(Ed,"stage"),rd("go",!1),Hc(),od(),id(),jd()}};if(Sd){var k=Dd[Xc],l=Je!==Hd?yd[Hd][Xc]:null;ab(k,l,te,{time:d,method:e.transition,onEnd:j},Te)}else _(se,{pos:-r(Gd,Le.w,e.margin,Fd),overPos:f,time:d,onEnd:j});if(Gc(),Nd){Tc();var m=y(Je+h(Gd-Hd,-1,1));Rc({time:d,coo:m!==Je&&a.coo,guessIndex:"undefined"!=typeof a.coo?m:Je,keep:i}),Od&&Oc(d)}return be="undefined"!=typeof Hd&&Hd!==Je,Hd=Je,e.hash&&be&&!ie.eq&&H(Dd.id||Je+1),this},ie.requestFullScreen=function(){return Qd&&!ie.fullScreen&&(_d=Ec.scrollTop(),ae=Ec.scrollLeft(),Q(Ec),rd("x",!0),ee=d.extend({},Le),a.addClass(Zb).appendTo(Dc.addClass(jb)),Cc.addClass(jb),md(Cd,!0,!0),ie.fullScreen=!0,Rd&&vc.request(le),ie.resize(),Pb(Ed,"stage"),Sb(),fd("fullscreenenter")),this},ie.cancelFullScreen=function(){return Rd&&vc.is()?vc.cancel(b):kd(),this},ie.toggleFullScreen=function(){return ie[(ie.fullScreen?"cancel":"request")+"FullScreen"]()},T(b,vc.event,function(){!yd||vc.is()||Cd||kd()}),ie.resize=function(a){if(!yd)return this;var b=arguments[1]||0,c=arguments[2];ed(ie.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:R(a),[Le,c||ie.fullScreen||e]);var d=Le.width,f=Le.height,g=Le.ratio,i=Ec.height()-(Nd?ye.height():0);return q(d)&&(qe.addClass(ub).css({width:d,minWidth:Le.minwidth||0,maxWidth:Le.maxwidth||ad}),d=Le.W=Le.w=qe.width(),Le.nw=Nd&&p(e.navwidth,d)||d,e.glimpse&&(Le.w-=Math.round(2*(p(e.glimpse,d)||0))),se.css({width:Le.w,marginLeft:(Le.W-Le.w)/2}),f=p(f,i),f=f||g&&d/g,f&&(d=Math.round(d),f=Le.h=Math.round(h(f,p(Le.minheight,i),p(Le.maxheight,i))),re.stop().animate({width:d,height:f},b,function(){qe.removeClass(ub)}),cd(),Nd&&(ye.stop().animate({width:Le.nw},b),Rc({guessIndex:Je,time:b,keep:!0}),Od&&wc.nav&&Oc(b)),$d=c||!0,xd())),Se=re.offset().left,this},ie.setOptions=function(a){return d.extend(e,a),vd(),this},ie.shuffle=function(){return yd&&O(yd)&&vd(),this},ie.destroy=function(){return ie.cancelFullScreen(),ie.stopAutoplay(),yd=ie.data=null,j(),Ed=[],bd(Xc),vd.ok=!1,this},ie.playVideo=function(){var a=Dd,b=a.video,c=Je;return"object"==typeof b&&a.videoReady&&(Rd&&ie.fullScreen&&ie.cancelFullScreen(),G(function(){return!vc.is()||c!==Je},function(){c===Je&&(a.$video=a.$video||d(d.Fotorama.jst.video(b)),a.$video.appendTo(a[Xc]),qe.addClass(nb),Cd=a.$video,o(),we.blur(),De.blur(),fd("loadvideo"))})),this},ie.stopVideo=function(){return md(Cd,!0,!0),this},re.on("mousemove",od),Me=db(se,{onStart:gd,onMove:function(a,b){ld(re,b.edge)},onTouchEnd:hd,onEnd:function(a){ld(re);var b=(Nc&&!ge||a.touch)&&e.arrows&&"always"!==e.arrows;if(a.moved||b&&a.pos!==a.newPos&&!a.control){var c=s(a.newPos,Le.w,e.margin,Fd);ie.show({index:c,time:Sd?Vd:a.time,overPos:a.overPos,user:!0})}else a.aborted||a.control||qd(a.startEvent,b)},timeLow:1,timeHigh:1,friction:2,select:"."+Xb+", ."+Xb+" *",$wrap:re}),Oe=db(ze,{onStart:gd,onMove:function(a,b){ld(ye,b.edge)},onTouchEnd:hd,onEnd:function(a){function b(){Rc.l=a.newPos,id(),jd(),uc(a.newPos,!0)}if(a.moved)a.pos!==a.newPos?(ce=!0,_(ze,{time:a.time,pos:a.newPos,overPos:a.overPos,onEnd:b}),uc(a.newPos),Xd&&ld(ye,K(a.newPos,Oe.min,Oe.max))):b();else{var c=a.$target.closest("."+Mb,ze)[0];c&&sd.call(c,a.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:ye}),Ne=eb(re,{shift:!0,onEnd:function(a,b){gd(),hd(),ie.show({index:b,slow:a.altKey})}}),Pe=eb(ye,{onEnd:function(a,b){gd(),hd();var c=v(ze)+.25*b;ze.css(k(h(c,Oe.min,Oe.max))),Xd&&ld(ye,K(c,Oe.min,Oe.max)),Pe.prevent={"<":c>=Oe.max,">":c<=Oe.min},clearTimeout(Pe.t),Pe.t=setTimeout(function(){Rc.l=c,uc(c,!0)},Pc),uc(c)}}),qe.hover(function(){setTimeout(function(){fe||nd(!(ge=!0))},0)},function(){ge&&nd(!(ge=!1))}),M(we,function(a){Y(a),td.call(this,a)},{onStart:function(){gd(),Me.control=!0},onTouchEnd:hd}),we.each(function(){W(this,function(a){td.call(this,a)}),ud(this)}),W(Ee,ie.toggleFullScreen),ud(Ee),d.each("load push pop shift unshift reverse sort splice".split(" "),function(a,b){ie[b]=function(){return yd=yd||[],"load"!==b?Array.prototype[b].apply(yd,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(yd=P(arguments[0])),vd(),ie}}),vd()},d.fn.fotorama=function(b){return this.each(function(){var c=this,e=d(this),f=e.data(),g=f.fotorama;g?g.setOptions(b,!0):G(function(){return!E(c)},function(){f.urtext=e.html(),new d.Fotorama(e,d.extend({},cd,a.fotoramaDefaults,b,f))})})},d.Fotorama.instances=[],d.Fotorama.cache={},d.Fotorama.measures={},d=d||{},d.Fotorama=d.Fotorama||{},d.Fotorama.jst=d.Fotorama.jst||{},d.Fotorama.jst.style=function(a){{var b,c="";tc.escape}return c+=".fotorama"+(null==(b=a.s)?"":b)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:"+(null==(b=a.m)?"":b)+"px;\nheight:"+(null==(b=a.h)?"":b)+"px}\n.fotorama"+(null==(b=a.s)?"":b)+" .fotorama__thumb-border{\nheight:"+(null==(b=a.h-a.b*(a.q?0:2))?"":b)+"px;\nborder-width:"+(null==(b=a.b)?"":b)+"px;\nmargin-top:"+(null==(b=a.m)?"":b)+"px}"},d.Fotorama.jst.video=function(a){function b(){c+=d.call(arguments,"")}var c="",d=(tc.escape,Array.prototype.join);return c+='<div class="fotorama__video"><iframe src="',b(("youtube"==a.type?a.p+"youtube.com/embed/"+a.id+"?autoplay=1":"vimeo"==a.type?a.p+"player.vimeo.com/video/"+a.id+"?autoplay=1&badge=0":a.id)+(a.s&&"custom"!=a.type?"&"+a.s:"")),c+='" frameborder="0" allowfullscreen></iframe></div>\n'},d(function(){d("."+ib+':not([data-auto="false"])').fotorama()})}(window,document,location,"undefined"!=typeof jQuery&&jQuery);
;$( function()
{
    var targets = $( '[rel~=tooltip]' ),
        target  = false,
        tooltip = false,
        title   = false;

    targets.bind( 'mouseenter', function()
    {
        target  = $( this );
        tip     = target.attr( 'title' );
        tooltip = $( '<div id="tooltip"></div>' );

        if( !tip || tip == '' )
            return false;

        target.removeAttr( 'title' );
        tooltip.css( 'opacity', 0 )
            .html( tip )
            .appendTo( 'body' );

        var init_tooltip = function()
        {
            if( $( window ).width() < tooltip.outerWidth() * 1.5 )
                tooltip.css( 'max-width', $( window ).width() / 2 );
            else
                tooltip.css( 'max-width', 340 );

            var pos_left = target.offset().left + ( target.outerWidth() / 2 ) - ( tooltip.outerWidth() / 2 ),
                pos_top  = target.offset().top - tooltip.outerHeight() - 20;

            if( pos_left < 0 )
            {
                pos_left = target.offset().left + target.outerWidth() / 2 - 20;
                tooltip.addClass( 'left' );
            }
            else
                tooltip.removeClass( 'left' );

            if( pos_left + tooltip.outerWidth() > $( window ).width() )
            {
                pos_left = target.offset().left - tooltip.outerWidth() + target.outerWidth() / 2 + 20;
                tooltip.addClass( 'right' );
            }
            else
                tooltip.removeClass( 'right' );

            if( pos_top < 0 )
            {
                var pos_top  = target.offset().top + target.outerHeight();
                tooltip.addClass( 'top' );
            }
            else
                tooltip.removeClass( 'top' );

            tooltip.css( { left: pos_left, top: pos_top } )
                .animate( { top: '+=10', opacity: 1 }, 50 );
        };

        init_tooltip();
        $( window ).resize( init_tooltip );

        var remove_tooltip = function()
        {
            tooltip.animate( { top: '-=10', opacity: 0 }, 50, function()
            {
                $( this ).remove();
            });

            target.attr( 'title', tip );
        };

        target.bind( 'mouseleave', remove_tooltip );
        tooltip.bind( 'click', remove_tooltip );
    });
});
var $body,
	windowHeight,
	windowWidth,
	mediaPoint1 = 1024,
	mediaPoint2 = 768,
	mediaPoint3 = 480,
	mediaPoint4 = 320;


//
// var el = document.querySelector('.cafe-description__text');
// SimpleScrollbar.initEl(el);


//загрузка скрипта
// var scriptMap = document.createElement('script');
// scriptMap.src = "https://api-maps.yandex.ru/2.0/?load=package.standard,package.geoObjects&lang=ru-RU";
// document.documentElement.appendChild(scriptMap);

// var scriptTool = document.createElement('script');
// scriptTool.src = "https://abestuzhev.github.io/cafe-anderson/bower_components/tooltipster/dist/js/tooltipster.bundle.js";
// document.documentElement.appendChild(scriptTool);

/*main.js*/


var windowWidth = (window.innerWidth ); // вся ширина окна
var documentWidth = (document.documentElement.clientWidth ); // ширина минус прокрутка
// console.log('Ширина window: ' + windowWidth);
// console.log('Ширина wrapper: ' + documentWidth);
var documentHeight = (document.documentElement.clientHeight );
// console.log('высота ' + documentHeight);


$(window).on('load', function(){



    /*скролл при выборе доставки*/
    var orderDeliveryMap = $('.order-delivery__map').height(),
        orderDeliveryAddressList = $('.order-delivery-address__list'),
        orderDeliveryAddressListHeight = orderDeliveryAddressList.height();
    // console.log('orderDeliveryMap: ' + orderDeliveryMap);
    // console.log('orderDeliveryAddressList: ' + orderDeliveryAddressListHeight);


    function changeHeightAddressList (){
        orderDeliveryAddressList.each(function(index, elem){
            var elemHeight =  $(elem).height();
            // console.log('elemHeight: ' + elemHeight);
            if(elemHeight > 320){
                // new SimpleBar(orderDeliveryAddressList[0]);
                // new SimpleBar(orderDeliveryAddressList[1]);
                // new SimpleBar(orderDeliveryAddressList[2]);
                // new SimpleBar(orderDeliveryAddressList[3]);
                $(elem).addClass('scroll-wrap');
            }
        });
    }
    changeHeightAddressList();

    //хак для быстрого обрезания всего списка в модальном окне заказа торта

    function addClassCakesAddressList(){
        $('.popup-cake-order .order-delivery-address__list').addClass('scroll-wrap');
    }
    addClassCakesAddressList();

    // $(document).on('click', '.cake-card__hover', function(){
    //     $('.popup-cake-order .order-delivery-address__list').addClass('scroll-wrap');
    //     console.log('scroll-wrap add');
    // });





    $(document).on('click', '.order-tabs__item', function(){
        changeHeightAddressList();
    });



    var permitPath = [
    '/factory-happiness.html',
    '/cafe-anderson/factory-happiness.html'
    ];

    function getScrollElem (elem){
        if($(window).width() <= 800) {
            new SimpleBar($(elem)[0]);
        }
    }
    if(permitPath.indexOf(location.pathname) > -1){
        getScrollElem('.factory-layout');
        $(window).on('resize', function () {
            getScrollElem('.factory-layout');
        });
    } else {
        return false;
    }

    var $datepicker = $('.datepicker-here');
    $datepicker.datepicker({
        minDate: new Date(),
        autoClose: true
    });
    $datepicker.on('focus', function () {
        $(this).parents('.datepicker-layout').addClass('active-datepicker');
    });


    $('#datepickerCustom').datepicker({
        minDate: new Date(),
        autoClose: true
    });
    $('#datepickerCustom').on('focus', function () {
        $(this).parents('.datepicker-layout').addClass('active-datepicker');
    });


    var disabledPartyDays = [0, 6];
    $('#party-datepicker').datepicker({
        minDate: new Date(),
        inline: true,
        onRenderCell: function (date, cellType) {
            if (cellType == 'day') {
                var day = date.getDay(),
                    isDisabled = disabledPartyDays.indexOf(day) != -1;

                return {
                    disabled: isDisabled
                }
            }
        }
    });

    //календарь в мероприятиях
    var eventDates = [1, 10, 12, 22];
    $('#event-datepicker').datepicker({
        inline: true,
        onRenderCell: function (date, cellType) {
            var currentDate = date.getDate();
            if (cellType == 'day' && eventDates.indexOf(currentDate) != -1) {
                return {
                    html: currentDate + '<span class="dp-note"></span>'
                }
            }
        }
    });
    $('.js-event-order-datepicker').datepicker({
        minDate: new Date()
    });







});

$(document).ready(function ($) {
    //------------------------------------------------------------custom


    function initCustomSelect(elem){
        $(elem).SumoSelect();

    }



    function addClonePanel(btn, list){
        $(document).on('click', btn , function(e) {
            e.preventDefault();
            $(this)
                .parents('.c-form__item')
                .siblings('.panel-work-time__copy')
                .clone().appendTo(list);

            // var select = $(this)

            initCustomSelect('.panel-work-time__list select');
            $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
            $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});
            $('.js-input--mode').mask('с 00:00 до 00:00', {
                clearIfNotMatch: true,
                placeholder: "с __:__ до __:__"
            });
        });
    }



    addClonePanel('#js-work-time-coffee__add', '#js-panel-work-time__coffee');
    addClonePanel('#js-work-time-cafe__add', '#js-panel-work-time__cafe');
    addClonePanel('#js-work-time-mp__add', '#js-panel-work-time__mp');
    addClonePanel('#js-dish-variation__add', '#js-dish-variation__list');

    $(document).on('click', '.c-form__del', function(e) {
        e.preventDefault();
        var $elem_item = $(this).parents('.panel-work-time__copy');
        $elem_item.remove();
    });


    //административная панель
    $(document).on('click', '.panel-cafe__title', function(e){
        e.preventDefault();
        $(this).toggleClass('panel-cafe-show');
        $(this).siblings('.panel-cafe__body').slideToggle(100);
    });


    //управление рассылкой
    $('.dispatch-list__title input').on('change', function(){
        var self = $(this);
        if(self.is( ":checked" )){
            self.parents('.dispatch-list__title')
                .siblings('.dispatch-list')
                .find('input[type="checkbox"]')
                .prop( "checked", true );
        }else {
            self.parents('.dispatch-list__title')
                .siblings('.dispatch-list')
                .find('input[type="checkbox"]')
                .prop( "checked", false );
        }
    });

    var lenEvent = $('.dispatch-list__item input[name*="dispatch-event"]').length;
    // console.log('колдичество ' + lenEvent);



    function changeDispatchCheckbox(elem){
        var count;

        $('' + elem + ' input').each(function(index){
            count = index+1;
        });
        // console.log('количество each ' + elem + ': ' + count);

        $('' + elem + ' input').on('change', function(){
            var self = $(this);
            if(!self.is( ":checked" )){
                self.parents('.dispatch-list')
                    .siblings('.dispatch-list__title')
                    .find('input[type="checkbox"]')
                    .prop( "checked", false );
            }

            if($('' + elem + ' input[type=checkbox]:checked').length == count){
                self.parents('.dispatch-list')
                    .siblings('.dispatch-list__title')
                    .find('input[type="checkbox"]')
                    .prop( "checked", true );
            }
        });
    }

    changeDispatchCheckbox('.js-dispatch-news');
    changeDispatchCheckbox('.js-dispatch-event');




    //франшиза
    $('.franchise-title-layout').on('click', function(){
        var self = $(this);
        self.siblings('.franchise-content').slideToggle(100);
        self.find('.franchise-print').toggle();
    });


    function printData()
    {
        var divToPrint = document.getElementById("franchisePrint");
        var newWin= window.open("");
        newWin.document.write(divToPrint.outerHTML);
        newWin.print();
        newWin.close();
    }

    $('.franchise-print').on('click',function(){
        printData();
    });

    if($('input').hasClass('datepicker-custom') || $('div').hasClass('datepicker-custom')){
        $('.datepicker-custom').datepicker({
            minDate: new Date(),
            autoClose: true
        });
    }

    /*функция форматирования даты*/
    function formatDate(date) {
        var dd = date.getDate();
        if (dd < 10) dd = '0' + dd;

        var mm = date.getMonth() + 1;
        if (mm < 10) mm = '0' + mm;

        var yy = date.getFullYear();
        if (yy < 10) yy = '0' + yy;

        return dd + '.' + mm + '.' + yy;
    }

    if($('input').hasClass('datepicker-delivery-v2') || $('div').hasClass('datepicker-delivery-v2')){


        var datepickerDelivery = new Date(),
            datepickerDeliveryV2= $('.datepicker-delivery-v2');
        // datepickerDeliveryV2.val(formatDate(datepickerDelivery));
        datepickerDeliveryV2.datepicker({
            minDate: new Date(),
            autoClose: true
        });




    }


    

    $('document').on('click', '.order__btn.disabled', function(e){
        e.preventDefault();
    });

    $('.excursion-pay__item label').on('click', function(){
        $(this).parents('.excursion-pay__item').siblings().find('label').removeClass('active');
        $(this).addClass('active');
    });



    //модальное окно в экскурсиях
    $(document).on('change', '#excursion-pay-score', function(){
        if($(this).prop( "checked" )){
            $('.excursion-pay-score').slideDown(300);
        }
    });

    $(document).on('change', '#excursion-pay-card', function(){
        if($(this).prop( "checked" )){
            $('.excursion-pay-score').slideUp(300);
        }
    });


    /*изменение оплаты*/
    $('.order-pay__item').on('click', function(){
        var payRadio = $(this).children('input');
        if(payRadio.prop("checked")){
            $(this).siblings('.order-pay__item').find('label').removeClass('active');
            $(this).children('label').addClass('active');
        }
    });



    $(document).on('click', '.filter-hold__dropdown', function(e){
        e.preventDefault();
        $(this).parents('.filter-hold__item').siblings().removeClass('active');
        $(this).parents('.filter-hold__item').addClass('active');
        $(this).siblings('.filter-hold__submenu').slideDown(500);
    });



    // documentHeight
    function changeHeightBasketPopup (){
        var basketScroll = $('.popup-basket__scroll'),
            heightBasket = basketScroll.height();

        if (heightBasket >= documentHeight - 100){
            basketScroll.addClass('fixed-height-basket');
            // console.log('if ' + heightBasket);
            /*кастомный скролл*/
            basketScroll.jScrollPane();
        }else {
            basketScroll.removeClass('fixed-height-basket');
            // console.log('else ' + heightBasket);
        }
    }

    changeHeightBasketPopup();

    $(window).resize(function(){
        changeHeightBasketPopup();
    });
    /*картинки одной ширины*/

    $('.c-card-catalog__img').each(function(index, elem){
        var img = $(elem).children('img'),
            imgWidth = img.width(),
            $this = $(elem);

        // console.log('element ' + index + ': ' + 'width: ' + imgWidth);
        if(imgWidth < 390 ) {
            $this.addClass('big-product-img');
            // console.log('есть картинка меньше 390');
        }else {
            $this.removeClass('big-product-img');
            // console.log('работает но картинки нет');
        }
    });


    //показать все мероприятия по дням на странице Мероприятия
    $(document).on('click', '.c-card-event-timelist__more', function(e){
        e.preventDefault();
        var $this = $(this);

        var textBtn = $this.html();
        if(textBtn == "показать все"){
            $this.html("скрыть");
            $this.siblings('.c-card-event-timelist').addClass('show-item-all');
        }else{
            $this.html("показать все");
            $this.siblings('.c-card-event-timelist').removeClass('show-item-all');
        }
    });


    function changePartyTitlePopup (){
        $(document).on('click', '.js-party-order', function(){
            var letter = $(this).data('name'),
                title = $('.popup-party-order .popup-title').find('span');

            title.text('');
            title.append(letter);
            $('#title-party-order').val(letter);
        });
    }
    // changePartyTitlePopup();



    //появление мобильного чека в корзине
    $(document).on('click', '.basket__check-mobile', function(e){
        e.preventDefault();
        $('.basket__aside').toggleClass('active');
    });

    //изменение в оформлении заказа на другого пользователя
    $(document).on('change', '#order-user_other, .order-user_other',  function(){
        if($(this).prop( "checked" )){
            $('.order-user__list').css('display','none');
            $('.order-user__other-form').css('display','flex');
        }
    });
    $(document).on('change', '#order-user_auth, #order-user_auth-1', function(){
        if($(this).prop( "checked" )){
            $('.order-user__list').css('display','flex');
            $('.order-user__other-form').css('display','none');
        }
    });

    //редактировать профиль
    $(document).on('click', '.lk-profile__link-edit', function(e){
        e.preventDefault();
        $(this).parents('.lk-profile__item')
            .children('div:first-child')
            .hide();
        $(this).parents('.lk-profile__item')
            .children('.lk-profile-edit:eq(0)')
            .show();

        initProfilePlugin();

    });

    function initProfilePlugin(){
        //маска
        $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
        $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});

        /*селект*/
        $('.lk-profile-edit__child-list .js-select--child').SumoSelect();
        changeSelectFace('.lk-profile-edit__child-list .js-select--child', 'M','icon-boy-smiling','icon-girl-smiling');
    };

    // $(document).on('click', '.lk-profile__edit .c-button__medium', function(){
    //     $(this).parents('.lk-profile-edit').hide;
    //     $(this).parents('.lk-profile-item').children('div:first-child').show();
    // });

    /*слайдер для страницы Выпускные*/
    $('.graduation-party-banner__slider').owlCarousel({
        loop:true,
        items: 1,
        autoheight: true,
        nav: false
    });


    //плавный якорь
    function scrollToAnchor (elem) {
        $(document).on("click", elem, function (event) {
            // event.preventDefault();
            var id  = $(this).attr('href'),
                menuHeight = 0,
                top = $(id).offset().top,
                topIndent = top - menuHeight;
            console.log('top: ' + top);
            console.log('topIndent: ' + topIndent);
            $('html').animate({scrollTop: topIndent}, 1000);
        });
    };

    $('.graduation-party-banner__btn').click(function(e){
        e.preventDefault();
        var target = $($(this).attr('href'));
        if(target.length){

            var heightHeader = $('.header').height();
            var scrollTo = target.offset().top - (+heightHeader + 100);
            $('body, html').animate({scrollTop: scrollTo+'px'}, 800);
        }
    });

    // $('#excursion-program-btn').click(function(e){
    //     e.preventDefault();
    //     var target = $($(this).attr('href'));
    //     if(target.length){
    //
    //         var heightHeader = $('.header').height();
    //         var scrollTo = target.offset().top - (+heightHeader + 100);
    //         $('body, html').animate({scrollTop: scrollTo+'px'}, 800);
    //     }
    // });

    // scrollToAnchor('.graduation-party-banner__btn');


    //поиск по кафе на странице с тортами и в оформлении заказа
    $(document).on('keyup change', '.c-search-page__input', function(){
        checkAll('.order-delivery-address__list li', '.order-radio', '.c-search-page__input');
        checkAll('#js-box-search-additive .c-box-search__item', '.c-checkbox', '#js-box-search-additive .c-search-page__input');
        checkAll('#js-box-search-ingredient .c-box-search__item', '.c-checkbox', '#js-box-search-ingredient .c-search-page__input');
    });

    function checkAll(elem, whereSearch, input) {
        $(elem).each(function(i, item) {
            var value = $(this).find(whereSearch).text().toLowerCase().indexOf($(input).val().toLowerCase());
            if ( value >= 0 ) {
                $(this).show();
                // $(this).addClass('js-order-delivery-address__show');
            } else {
                $(this).hide();
                // $(this).removeClass('js-order-delivery-address__show');
            }
        });
    }

    checkAll('.order-delivery-address__list li', '.order-radio', '.c-search-page__input');
    checkAll('#js-box-search-additive .c-box-search__item', '.c-checkbox', '#js-box-search-additive .c-search-page__input');
    checkAll('#js-box-search-ingredient .c-box-search__item', ' .c-checkbox', '#js-box-search-ingredient .c-search-page__input');

    $(document).on('click', '.c-box-search__clear', function(e){
        e.preventDefault();
        $('.c-search-page__input').val('');
        $('.c-box-search__item').show();

    });

    //отписаться от подписки в личном кабинете
    $(document).on('click', '#lk-profile-subscription_unsubscribe', function(e){
        e.preventDefault();
        $('.lk-profile .lk-profile-subscription__box').hide();
        $('.lk-profile .lk-profile-subscription-del').show();

    });
    $(document).on('click', '#lk-profile-subscription-del__cancel', function(e){
        e.preventDefault();
        $('.lk-profile .lk-profile-subscription-del').hide();
        $('.lk-profile .lk-profile-subscription__box').show();
    });

    //изменнеие пароля в профиле личного кабинета
    $(document).on('click', '#lk-profile__change-pass', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-user')
        .css('display', 'none')
        .siblings('.lk-profile-edit__pass')
        .css('display', 'block');
    });

    // изменение подписки в профиле пользователя
    $('#lk-profile_change-subscription').on('click', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-subscription__box')
        .css('display', 'none')
        .siblings('.lk-profile-edit')
        .css('display', 'block');
    });
    // отмена изменения подписки в профиле пользователя
    $('#lk-profile_cancel-change').on('click', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-edit')
        .css('display', 'none')
        .siblings('.lk-profile-subscription__box')
        .css('display', 'block');
    });

    //добавляем элементы в профиле личного кабинета
    //добавление второго email

    $(document).on('click', '#js-lk-profile__add-email', function(e) {
        e.preventDefault();
        $(this)
            .parents('.c-form__item')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__email-list");
    });

    $(document).on('click', '#js-lk-profile__add-tel', function(e) {
        e.preventDefault();
        $(this)
            .parents('.c-form__item')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__tel-list");
        $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    });

    /*добавление полей в контактах ЛК*/
    $(document).on('click', '#js-lk-profile__add-info-all', function(e) {
        e.preventDefault();
        console.log('correct');
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__contact-list");
        // $('.js-input--date').mask('+7(000)000-00-00', {clearIfNotMatch: true});

        // initProfilePlugin();
    });

    /*добавление ребенка в профиле пользователя*/
    $(document).on('click', '#js-lk-profile__add-child', function(e) {
        e.preventDefault();
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__child-list");
        $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});

        initProfilePlugin();
    });


    $(document).on('click', '#js-lk-profile-edit__address', function(e) {
        e.preventDefault();
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__address-list");
    });


    $(document).on('click', '.c-form__del', function(e) {
        e.preventDefault();
        var $elem_item = $(this).parents('.c-form__item');
        var $element =  $(this).parents('.lk-profile-edit__copy');
        $element.remove();
        $elem_item.remove();
    });

    //скрыть/показать заказ в истории заказов
    $('.lk-history-item__header').on('click', function(e){
        e.preventDefault();
        $(this).parents('.lk-history-item').toggleClass('lk-history-item__body-show');
        $(this).siblings('.lk-history-item__body').slideToggle(300);
    });


    //очистить форму поиска
    $(document).on('click', '.order-delivery-search__clear', function(e){
        e.preventDefault();
        $(this).parents('.order-delivery-search__item').siblings().find('input').val('');
        $('.order-delivery-address__all').removeClass('show-item-all');

        // showDeliveryAddressCake('.order-delivery-address__item');
    });

    //показать все адреса кафе в заказе
    function showDeliveryAddressCake (elem){
        $(elem).each(function(i, elem){
            i < 6 ? $(elem).show() : $(elem).hide();
        });
    }
    // showDeliveryAddressCake('.order-delivery-address__item');




    $(document).on('click', '.order-delivery-address__all', function(e){
        var $this = $('.order-delivery-address__all');
        e.preventDefault();

        var textBtn = $this.html();
        if(textBtn == "показать все"){
            $this.html("скрыть");
            $this.siblings('.order-delivery-address__list').addClass('show-item-all');
        }else{
            $this.html("показать все");
            $this.siblings('.order-delivery-address__list').removeClass('show-item-all');
        }

    });

    //страница Оформление заказа. При фокусе на инпут с адресом, делаем активный radio button
    $('.order-delivery-custom__item input, .order-delivery-custom__item textarea').focus(function(){
        var $this = $(this);
        // var $thisRadioInput = $(this).parents('label').siblings('input[type="radio"]');
        $this.parents('label').siblings('input[type="radio"]').prop( "checked",true);

    });



    //свернуть/развернуть блок в корзине
    $('.basket-item__header').on('click', function(){
        var $this =  $(this);
        $this.parents('.basket-item').toggleClass('basket-body__show');
        setTimeout(function(){

        }, 150);

        $(this).siblings('.basket-item__body').slideToggle(100);
    });

    $('.basket-mix__item').on('click', function(){

        $('.basket-item__header').parents('.basket-item').addClass('basket-body__show');
        $('.basket-item__body').slideDown(100);
    });



    /*показываем попап на странице Создатели Андерсон*/
    $('.photo-point__icon').on('click', function(){
        var str = $(this).siblings('.photo-point__description').find('span').text().trim(),
            arr = str.split(' '),
            name = arr[0] + ' ' + arr[1],
            desc = '';
        arr.splice(0, 2);
        desc = arr.join(' ');
        $('.creators .popup-title').find('span').text(name);
        $('.creators .popup-body').find('p').text(desc);
        var popup = $('.creators .popup');
        popup.removeClass('is-visible');
        popup.addClass('is-visible');
    });

    $('.creators .popup-close').on('click', function(){
        $('.creators .popup').removeClass('is-visible');
    });

    /*фабрика счастья, клик по поинту*/
    $('.factory-point__img').on('click', function(){
        $('.popup').removeClass('is-visible');
        $(this).siblings('.popup').addClass('is-visible');
    });

    $('.factory-point .popup-close').on('click', function(e){
        e.preventDefault();
        $('.popup').removeClass('is-visible');
    });

    /*показываем маленький блок с выбранными товарами в карточке товара (мобильная версия)*/
    $(document).on('click', '.popup-product__check-mobile', function(e){
        e.preventDefault();
        $('.popup-product .popup-mini').addClass('active');
    });
    /*закрываем маленький попап с товарами*/
    $(document).on('click', '.popup-product__check-close', function(e){
        e.preventDefault();
        $('.popup-product .popup-mini').removeClass('active');
    });

    $('.popup-mini').on('click', function(e){
        e.preventDefault();

    });

    /*показываем категории меню в каталоге*/
    var filterBage = $('.filter-bage');

    filterBage.on('click', function(e){
        e.preventDefault();
        $(this).hide();
        $('.catalog-body').toggleClass('show-category');
        $(this).toggleClass('js-hide-word');
        $(this).find('.filter-bage__title span').html('Показать');
        $('.js-hide-word').find('.filter-bage__title span').html('Скрыть');
    });

    $('.filter-hold__close').on('click', function(e){
        e.preventDefault();
        filterBage.show();
        $('.catalog-body').removeClass('show-category');
        filterBage.toggleClass('js-hide-word');
        $('.filter-bage__title span').html('Показать');
    });




    $(window).on('resize', function () {
    	if(windowWidth <= 730){
    	    $('.filter-hold__close').on('click', function(e){
                e.preventDefault();
    	        $(this).parents('.filter-hold').slideUp(600);
            });
        }
    });

    if(windowWidth <= 730){
        $('.filter-hold__close').on('click', function(e){
            e.preventDefault();
            $(this).parents('.filter-hold').slideUp(600);
        });
    }





    /*слайдер карусель*/
    $('.carousel-slider').owlCarousel({
        loop:true,
        // nav:true,
        margin:20,
        // items: 4,
        // center: true,
        responsiveClass: true,
        responsive:{
            0:{
                items:1
            },
            540:{
                nav: true,
                items:2
            },
            780:{
                nav: true,
                items:3
            },
            1200:{
                nav: true,
                items:4
            },
            1600:{
                nav: true,
                items:5
            }
        }
    });

    $('.c-card-product__slider').owlCarousel({
        loop:true,
        // nav:true,
        margin:20,
        // items: 4,
        // center: true,
        responsive:{
            0:{
                items:1
            },
            600:{
                nav: true,
                items:2
            },
            1200:{
                nav: true,
                items:3
            },
            1600:{
                nav: true,
                items:3
            }
        }
    });

    /*слайдер карусель*/
    $('.publications-slider').owlCarousel({
        loop:true,
        nav:true,
        margin:20,
        items: 7,
        // center: true,
        stagePadding: 10,
        responsiveClass: true,
        responsive:{
            0:{
                items:1
            },
            480:{
                items:2
            },
            780:{
                nav: true,
                items:3
            },
            980:{
                nav: true,
                items:4
            },
            1200:{
                nav: true,
                items:4
            },
            1600:{
                nav: true,
                items:7
            },
            1920:{
                nav: true,
                items:7
            }
        }
    });


    $('#filter-cafe-all, #filter-cafe__mobile-all').on('change', function(){
        var $this = $(this),
            $elem = $('.filter-item');
        if($this.is(':checked')) {
            $elem.addClass('disable');
        }else{
            $elem.removeClass('disable');
        }
    });

    $('.top-message__close').on('click',function(e){
        e.preventDefault();
        $('.top-message').hide();
    });

    /*вписываем img в блок при любом размере изображения*/
    function fix_size() {
        var images = $('.c-pic_link img');
        images.each(setsize);

        function setsize() {
            var img = $(this),
                img_dom = img.get(0),
                container = img.parents('.c-pic_link');
            if (img_dom.complete) {
                resize();
            } else img.one('load', resize);

            function resize() {
                if ((container.width() / container.height()) < (img_dom.width / img_dom.height)) {
                    img.width('auto');
                    img.height('100%');
                    return;
                }
                img.height('auto');
                img.width('100%');
            }
        }

    }
    // $(window).on('resize', fix_size);
    // fix_size();
    //
    // if (typeof _current != 'undefined') {
    //     var mapImages = _current;
    // } else {
    //     var mapImages = $('.c-card-cafe__img img');
    // }

    /*если в городе одно кафе, делаем его inline*/
    $('.cafe-list__city').each(function(){
        var $this = $(this);
        var countElem = $this.find('.c-col-6').length;
        if(countElem == 1){
            $($this).addClass('cafe-list__one');

        }else{
            $($this).removeClass('cafe-list__one');
        }
    });



    //подключение тултипа
    $( '.tooltip' ).tooltipster({
        animation: 'grow',
        delay: 100,
        trigger : 'custom' ,
        maxWidth: 500,
        contentAsHTML: true,
        interactive: true,
        triggerOpen : {
            mouseenter : true ,
            touchstart : true
        },
        triggerClose : {
            mouseleave : true,
            click : true ,
            scroll : true ,
            tap : true
        }
    });


    //подключение тултипа
    $( '.tooltip-catalog' ).tooltipster({
        animation: 'grow',
        delay: 100,
        trigger : 'click' ,
        maxWidth: 500,
        functionBefore: function(instance, helper){
            if (helper.event.type == 'click') {
                instance.content('You opened me with a regular mouse <a href="https://www.google.ru/?hl=ru">click :)</a>.');
            }
            else {
                instance.content('You opened me by a tap on the screen :)');
            }
        },
        contentAsHTML: true,
        interactive: true,
        triggerOpen : {
            mouseenter : true ,
            touchstart : true
        },
        triggerClose : {
            mouseleave : true,
            click : true ,
            scroll : true ,
            tap : true
        }
    });



    $(".owl-carousel").owlCarousel({
        items: 1,
        loop: true,
        center: true,
        autoHeight:true,
        nav: true
    });


    $('.cafe-fotorama').on('fotorama:ready', function (e, fotorama) {
        // console.log(e.type);
        // console.log( fotorama.activeIndex);
        var path = fotorama.activeFrame.img;
        $('.bg-blur').attr('src', path);
    }).fotorama({
        width: '100%',
        // maxwidth: '100%',
        ratio: 17/11,
        loop: true,
        thumbwidth: 88,
        allowfullscreen: true,
        nav: 'thumbs',
        fit:'cover'
    });;

    /*Фоторама, слайдер мероприятий, слайдер отзывов*/
    // var $slider = $('.cafe-fotorama').fotorama({
    //     width: '100%',
    //     // maxwidth: '100%',
    //     ratio: 17/11,
    //     loop: true,
    //     thumbwidth: 88,
    //     allowfullscreen: true,
    //     nav: 'thumbs',
    //     fit:'cover'
    // });

    // $slider
    //     .on('fotorama:show', function (e, fotorama) {
    //         // pick the active thumb by id
    //         var path = fotorama.activeFrame.img;
    //         $('.bg-blur').attr('src', path);
    //         console.log('hello');
    //     });




    // $slider.on('fotorama:load', function (e, fotorama, extra) {
    //     console.log(extra.src + ' is loaded');
    //     console.log('hello');
    // });


    $('.cafe-holiday-slider').fotorama({
        width: '100%',
        maxwidth: '100%',
        // ratio: 16/9,
        loop: true,
        allowfullscreen: true,
        fit:'cover'
    });

    // $('.cafe-reviews-slider').fotorama({
    //     width: '100%',
    //     height: 'auto',
    //     maxwidth: '100%',
    //     loop: true,
    //     ratio: 16/5
    // });

    /*маски для телефона*/
    $('#request-call__tel, #reg__phone').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('#request-call__tel, #reg__phone').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});
    $('.js-input--loyalty').mask('000-000', {clearIfNotMatch: true });

    $('.js-input--mode').mask('с 00:00 до 00:00', {
        clearIfNotMatch: true,
        placeholder: "с __:__ до __:__"
    });
    $('input[name="form_text_30"]').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('input[name="form_text_52"]').mask('+7(000)000-00-00', {clearIfNotMatch: true});

    /*показ номера телефона в карточке кафе*/
    $('.cafe-info__item-col .c-button').on('click', function(e){
        e.preventDefault();
        $(this).hide();
        $(this).parents('.l-button').siblings('.cafe-info__phone-number').show();
    });

    /*функция показа модального окна*/
    function showPopup(icon, popup) {
        $(document).on('click', icon, function (e) {
            var $html = $('html');
            e.preventDefault();
            $(popup).addClass('is-visible');
            $('.mfp-bg').addClass('is-visible');


            $html.addClass('lock-html');
            $('body').addClass('fixed-input');
            if(windowWidth > documentWidth){
                $html.css({
                    'margin-right':'17px'
                });
                $('.mfp-wrap').css({
                    'overflow-y':'scroll'
                });
                // console.log('Есть полоса прокрутки');
            }else {
                // console.log('Нет полосы прокрутки');
            }
        });
    }

    $(document).on('click', '.popup-close', function (e) {
        e.preventDefault();
        var $html = $('html');
        $(this).parents('.mfp-wrap').removeClass('is-visible');
        $('.mfp-bg').removeClass('is-visible');
        $html.css({
            'margin-right':'0'
        }).removeClass('lock-html');
        $('body').removeClass('fixed-input');
        $('.header.sticky').css({
            // 'right':'0'
        });
        // console.log('popup-close!!!!');
    });

    $(document).on('click', '.js-popup-close', function (e) {
        e.preventDefault();
        var $html = $('html');
        $(this).parents('.mfp-wrap').removeClass('is-visible');
        $('.mfp-bg').removeClass('is-visible');
        $html.css({
            'margin-right':'0'
        }).removeClass('lock-html');
        $('.wrapper').removeClass('fixed-input');
        $('.header.sticky').css({
            // 'right':'0'
        });
    });


    showPopup(".header-phone", '.popup__request-call');
    showPopup(".header-email", '.popup__write-to-us');
    showPopup(".js-header-cabinet", '.popup-authorization');
    showPopup(".header-city > a", '.popup-city');
    showPopup(".header-mobile__city", '.popup-city');
    showPopup(".c-card-cafe__menu", '.popup__menu');
    showPopup(".c-card-vacancy .c-button", '.popup__vacancy');
    showPopup(".c-card_menu", '.popup__menu');
    // showPopup(".c-reviews-positive", '.popup__review');
    // showPopup(".c-reviews-negative", '.popup__review');
    showPopup(".footer-reviews__icon", '.popup__review');
    // showPopup(".popup-forgot-password", '.popup__recovery-password');
    showPopup(".catalog-product .c-card-catalog__img", '.popup-product');
    showPopup(".catalog-product .c-card-catalog__title", '.popup-product');
    showPopup("#loadCake", '.popup-cake-order');
    showPopup(".cake-card__hover", '.popup-cake-order');
    showPopup(".js-easter-btn", '.popup-cake-order');
    showPopup("#lk-profile-subscription-del__ok", '.popup-subscription-del');
    showPopup(".js-party-order", '.popup-party-order');
    showPopup(".c-card-event__link--more", '.popup-event');
    showPopup(".c-card-event__link--basket", '.popup-event-basket');
    showPopup(".c-card-event__link--one-click", '.popup-event-one-click');
    showPopup(".excursion-btn", '.popup-excursion-order');




    // $(document).on('click', '#cake-order-issue', function (e) {
    //     e.preventDefault();
    //     $(this).parents('.popup-cake-order').removeClass('is-visible');
    //     $('.popup-cake-order-congratulation').addClass('is-visible');
    // });

    $(document).on('click', '.c-card-event__btn--click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-event').removeClass('is-visible');
        $('.popup-event-one-click').addClass('is-visible');
    });

	$(document).on('click', '.factory-point .c-button', function (e) {
        e.preventDefault();
        $(this).parents('.factory-point .popup').removeClass('is-visible');
        $('.popup-gallery').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('html').css({
            'margin-right':'0'
        }).addClass('lock-html');

        if(windowWidth > documentWidth){
            $('html').css({
                'margin-right':'17px'
            });
            $('.mfp-wrap').css({
                'overflow-y':'scroll'
            });
            // console.log('Есть полоса прокрутки');
        }

    });

    $(document).on('click', '.c-card-event__btn--basket', function (e) {
        e.preventDefault();
        $(this).parents('.popup-event').removeClass('is-visible');
        $('.popup-event-basket').addClass('is-visible');
    });

    // $(document).on('click', '.popup-forgot-password', function (e) {
    //     e.preventDefault();
    //     $(this).parents('.popup-authorization').removeClass('is-visible');
    //     $('.popup__recovery-password').addClass('is-visible');
    // });


    $('.popup-authorization .popup-authorization__reg').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-authorization').removeClass('is-visible');
        $('.popup-reg').addClass('is-visible');
    });

    $('.popup-reg .popup-authorization__auth').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-reg').removeClass('is-visible');
        $('.popup-authorization').addClass('is-visible');
    });

    /*мобильные кнопки показа попапов Регистрация/Авторизация*/
    $("#mobile-reg").click(function (e) {
        e.preventDefault();
        $('.popup').removeClass('is-visible');
        $('.popup-reg').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('body').addClass('fixed-input');
        $('html').addClass('lock-html');
        $(this).parents('.header-mobile__auth').removeClass('.popup-slide__show');
    });

    $("#mobile-auth").click(function (e) {
        e.preventDefault();
        $('.popup').removeClass('is-visible');
        $('.popup-authorization').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('body').addClass('fixed-input');
        $('html').addClass('lock-html');
        $(this).parents('.header-mobile__auth').removeClass('.popup-slide__show');
    });




    /*поиск в шапке*/
    $(".header-search .icon-search, .header-search .symbol-search").click(function (e) {
        e.preventDefault();
        $('.header-search__form').toggleClass('is-visible');
        $('.header-search-result').toggleClass('is-visible');
    });

    /*показ мобильного поиска*/
    $(".header-mobile__search .icon-search, .header-mobile__search .symbol-search").click(function (e) {
        e.preventDefault();
        $('.header-mobile__search-box').show();
        $('.header-mobile__menu').hide();
        $('.header-mobile__search .icon-search, .header-mobile__search .symbol-search').hide();
        $('.icon-search-mobile').show();
        $('.header-mobile__search-input').focus();
        $('.header-mobile__auth').removeClass('popup-slide__show');
        // $('.header').addClass('header-top__hide');
    });

    /*скрываем мобильный поиск*/
    $(".icon-search-mobile").click(function (e) {
        e.preventDefault();
        $('.header-mobile__search-box').hide();
        $('.header-mobile__menu').show();
        $('.header-mobile__search .icon-search').show();
        $('.header-mobile__search .symbol-search').show();
        $(this).hide();
        // $('.header').removeClass('header-top__hide');
    });

    $(document).mouseup(function (e) { // событие клика по веб-документу
        var div = $('.header-mobile__search-box'); // тут указываем ID элемента
        if (!div.is(e.target) // если клик был не по нашему блоку
            && div.has(e.target).length === 0) { // и не по его дочерним элементам

            $('.header-mobile__menu').show();
            $('.header-mobile__search-box').hide();
            $('.header-mobile__search .icon-search').show();
            $('.header-mobile__search .icon-search-mobile').hide();
            // $('.header').removeClass('header-top__hide');
        }
    });

    // закрытие по клику все области экрана
    $(".popup-bg").click(function (e) {
        e.preventDefault();
        $('.popup').parents().removeClass('is-visible');
        // $('.fixed-overlay').removeClass('is-visible');
        $('html').removeClass('body-popup');
    });




    /*клик вне области экрана для корзины*/
    function hidePopup (element, instrumentHide){
        $(document).mouseup(function (e) { // событие клика по веб-документу
            var div = $(element); // тут указываем ID элемента
            if (!div.is(e.target) // если клик был не по нашему блоку
                && div.has(e.target).length === 0) { // и не по его дочерним элементам
                div.removeClass(instrumentHide); // скрываем его
                // $('.fixed-overlay').removeClass('is-visible');
                // $('body').removeClass('body-popup');
            }
        });
    }

    // событие клика по веб-документу
    // $(document).mouseup(function (e) {
    //
    //     var popup = $('.popup');
    //     if (!popup.is(e.target)
    //         && !popup.has(e.target).length
    //         && !$('.popup-mini').is(e.target)
    //     ) {
    //         popup.parents('.mfp-wrap').removeClass('is-visible');
    //         $('.mfp-bg').removeClass('is-visible');
    //         $('html').css({
    //             'margin-right':'0'
    //         }).removeClass('lock-html');
    //     }
    // });

    /*скрываем попапы вне зоны элемента для карточки товара*/
    $(document).mousedown(function (e) { // событие клика по веб-документу
        // var div = $('.popup');
        // тут указываем ID элемента
        // var div2 = $('.popup-mini');


        function hideOutZone(elem, elem2, elem3, elem4){
            var div = $(elem);
            var div2 = $(elem2);
            var div3 = $(elem3);
            var div4 = $(elem4);
            if (!div.is(e.target)
                && div.has(e.target).length === 0
                && !div2.is(e.target)
                && div2.has(e.target).length === 0
                && !div3.is(e.target)
                && div3.has(e.target).length === 0
                && !div4.is(e.target)
                && div4.has(e.target).length === 0) {
                // div.removeClass(instrumentHide); // скрываем его
                // console.log('true');
                div.parents('.mfp-wrap').removeClass('is-visible');
                div.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div.parents('html').removeClass('lock-html').css('margin-right','0');
                // div.find('.popup-close').trigger('click');

                var url = localStorage.getItem('backUrl');
                if (url !== null) {
                    window.history.pushState(null, null, url);
                    localStorage.removeItem("backUrl");
                }

                div2.parents('.mfp-wrap').removeClass('is-visible');
                div2.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div2.parents('html').removeClass('lock-html').css('margin-right','0');

                div3.parents('.mfp-wrap').removeClass('is-visible');
                div3.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div3.parents('html').removeClass('lock-html').css('margin-right','0');

                div4.parents('.mfp-wrap').removeClass('is-visible');
                div4.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div4.parents('html').removeClass('lock-html').css('margin-right','0');
            }

        }



        // if (localStorage.getItem('backUrl') !== null) {
        //     var serialObj = JSON.stringify(backUrl);
        //     window.history.pushState(null, null, '/easter/');
        //     localStorage.setItem('backUrl', serialObj);
        //
        //     localStorage.removeItem("backUrl");
        // } else {
        //     return false;
        // }




        if (e.which === 1) {
            hideOutZone('.popup', '.popup-mini', '.datepicker', '.main-user-consent-request-popup');
        }

    });


    hidePopup('.popup-basket', 'popup-slide__show');
    hidePopup('.header-mobile__auth', 'popup-slide__show');
    hidePopup('.header-search__form', 'is-visible');
    hidePopup('.header-search-result', 'is-visible');


    /*юоковые кнопки отзыва*/
    var $reviews_btn = $(".c-reviews__btn"),
        clickCount;
    $reviews_btn.attr("data-count", "0");
    var isMobile = {
        Android:        function() { return navigator.userAgent.match(/Android/i) ? true : false; },
        BlackBerry:     function() { return navigator.userAgent.match(/BlackBerry/i) ? true : false; },
        iOS:            function() { return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false; },
        Windows:        function() { return navigator.userAgent.match(/IEMobile/i) ? true : false; },
        any:            function() { return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());  }
    };
    if ( isMobile.any() ) {
        $reviews_btn.on("click", function(){
            clickCount = $(this).attr("data-count");
            clickCount ++;
            $(this).parent('.c-reviews__item').siblings().removeClass('active');
            if (clickCount == 1) {
                $(this).attr("data-count", clickCount);
                $(this).parent('.c-reviews__item').addClass('active');
                return false;
            } else if (clickCount == 2){
                $(this).parent('.c-reviews__item').removeClass('active');
                $(this).attr("data-count", "0");
                showPopup(".c-reviews-positive", '.popup__review');
                showPopup(".c-reviews-negative", '.popup__review');
            }else {
                return true;
            }
        });
    }

    if ( !isMobile.any() ) {
        $reviews_btn.hover(function(){
            clickCount = $(this).attr("data-count");
            clickCount ++;
            $(this).parent('.c-reviews__item').siblings().removeClass('active');
            if (clickCount == 1) {
                $(this).attr("data-count", clickCount);
                $(this).parent('.c-reviews__item').addClass('active');
                console.log('click');
                return false;
            } else if (clickCount == 2){
                showPopup(".c-reviews-positive", '.popup__review');
                showPopup(".c-reviews-negative", '.popup__review');
                $(this).parent('.c-reviews__item').removeClass('active');
                $(this).attr("data-count", "0");
            }else {
                return true;
            }
        });
    }


    // мобильный заказать звонок, показываем форму и удаляем надпись
    $(".mobile-request-call_inquiry").click(function (e) {
        e.preventDefault();
        $(this).css({
            'opacity': '0',
            'visibility': 'hidden',
            'display':'none'
        });
        $('.mobile-request-call__form').css({
            'opacity': '1',
            'visibility': 'visible',
            'display':'block'
        });
    });

    /*соглашение на обработку персональных данных*/
    function DisabledFormButton(form, check, btn_form){
        $("form input[type='checkbox']").on('change', function(){
            if($(check).prop('checked')){
                $(btn_form).removeAttr('disabled');
                // console.log('check');
            }else {
                $(btn_form).attr('disabled', 'disabled');
                // console.log('check else');
            }
        });
    }

    DisabledFormButton('#popup-reg','#reg__regulations','#popup-reg button');
    DisabledFormButton('#popup__write-to-us','#write-to-us__regulations','#popup__write-to-us button');
    DisabledFormButton('#popup__request-call','#request-call__regulations','#popup__request-call button');
    DisabledFormButton('#popup__vacancy','#vacancy__regulations','#popup__vacancy button');
    DisabledFormButton('#order-auth-new','#order-auth-new__regulations','#order-auth-new button');
    DisabledFormButton('#cake-order-form','#cake-order__regulations','#cake-order-form button');
    DisabledFormButton('#excursion-form','#excursion__regulations','#excursion-form button');



    /*показываем в попапе заказать звонок список городов*/
    $(".mobile-request-call_city").on('click', function (e) {
        e.preventDefault();
        console.log('click click');
        // $('.popup-request-city').show();
        $('.popup-request-city').addClass('popup-show');
    });

    $(".popup-request-city").click(function (e) {
        e.preventDefault();
        $('.popup-request-city').removeClass('popup-show');
        // $('.popup-request-city').hide();
        $('.popup__request-call').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('html').css({
            'overflow':'hidden',
            'margin-right':'17px'
        });
    });

    /*попап корзины*/
    $('.icon-basket, .header .symbol-basket, .header .symbol-basket-2, .header-basket__count').on('click', function () {
        $('.popup-basket').addClass('popup-slide__show');
        $('.header').addClass('header-top__no-hide');
        // $('html').addClass('lock-html');
    });

    $('.popup-basket__close').on('click', function () {
        $('.popup-basket').removeClass('popup-slide__show');
        $('.header').removeClass('header-top__no-hide');
    });

    $('.popup-basket__scroll').on( 'mousewheel DOMMouseScroll', function (e) {

        var e0 = e.originalEvent;
        var delta = e0.wheelDelta || -e0.detail;

        this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
        e.preventDefault();
    });


    /*проверяет в фильтре наличие селекта и еслит есть делает родитель блочным для отображения в мобильной версии*/
    $('.filter').each(function(){
        var $filterBody =  $('.filter-item__body');
        $filterBody.has('select').css('display', 'block');
        $filterBody.has('input[type="text"]').css('display', 'block');
        $filterBody.has('select').parents('.filter-item').css('border','none');
        $filterBody.has('input[type="text"]').parents('.filter-item').css('border','none');
    });

    /*появление фильтра в мобильной версии*/

    function ShowMobileBtnFilter (btn, showBlock) {
        $(btn).on('click', function (e) {
            e.preventDefault();
            $(this).toggleClass('dropdown-show');
            $(this).siblings(showBlock).slideToggle(200);
        });
    }
    ShowMobileBtnFilter('.filter-mobile-btn', '.filter');
    ShowMobileBtnFilter('.filter-mobile-btn', '.reviews-form');
    ShowMobileBtnFilter('.filter-hold-mobile-btn', '.filter-hold');



    /*показ подменю в мобильной версии меню*/
    $('.header-mobile__list .icon-dropdown').on('click', function (e) {
        e.preventDefault();
        $(this).toggleClass('dropdown-show');
        $(this).siblings('.header-mobile__sublist').slideToggle(200);
        $(this).parents('.header-mobile__item').toggleClass('active');
    });

    /*функция счета больше/меньше*/
    function catalogItemCounter(field) {
        var fieldCount = function (el) {
            var
                // Мин. значение
                min = el.data('min') || false,
                // Макс. значение
                max = el.data('max') || false,
                // Кнопка уменьшения кол-ва
                dec = el.prev('.dec'),
                // Кнопка увеличения кол-ва
                inc = el.next('.inc');
            function init(el) {
                if (!el.attr('disabled')) {
                    dec.on('click', decrement);
                    inc.on('click', increment);
                }
                // Уменьшим значение
                function decrement() {
                    var value = parseInt(el[0].value);
                    value--;

                    if (!min || value >= min) {
                        el[0].value = value;
                    }
                };
                // Увеличим значение
                function increment() {
                    var value = parseInt(el[0].value);

                    value++;

                    if (!max || value <= max) {
                        el[0].value = value++;
                    }
                };
            }
            el.each(function () {
                init($(this));
            });
        };
        $(field).each(function () {
            fieldCount($(this));
        });
    }
    // catalogItemCounter('.fieldCount');

   /*мобильное меню*/
	$('.header-mobile__menu').on('click', function(){
		$(this).toggleClass('icon-menu__transform');
		$('.header-mobile__dropdown').toggleClass('popup-show');
		// $('.header').toggleClass('header-top__hide');
        $('html').toggleClass('overflow');
        $('.c-reviews__item').toggleClass('is-hide');


        if($('.header').hasClass('sticky')){
            $('.header-mobile__dropdown').addClass('menu-sticky');
        }else {
            $('.header-mobile__dropdown').removeClass('menu-sticky');
        }
	});
    // $('.header').hasClass('.sticky').children('.header-mobile__dropdown').addClass('menu-sticky');

    $('.header-mobile__dropdown-close').on('click', function(){
        $('.header-mobile__menu').toggleClass('icon-menu__transform');
        $('.header-mobile__dropdown').toggleClass('popup-show');
        $('html').removeClass('overflow');
        $('.c-reviews__item').removeClass('is-hide');
	});


	$('.header-mobile__cabinet').on('click', function(){
		$('.header-mobile__auth').toggleClass('popup-slide__show');
	});

    //кнопка вверх
    function backToTop (btnElem, parentElem){
        var offset = 300,
            offset_opacity = 1200,
            scroll_top_duration = 700,
            $back_to_top = $(btnElem);
        //кнопка назад
        $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) {
                $back_to_top.addClass('cd-fade-out');
            }
        });

        $back_to_top.on('click', function(event){
            event.preventDefault();
            $(parentElem).animate({
                    scrollTop: 0
                }, scroll_top_duration
            );
        });
    }

    backToTop('.cd-top', 'body,html');
    backToTop('.popup-product__btn-back', '.popup');



    /*липкая шапка*/
    $(window).scroll(function(){
        var bo = $(window).scrollTop();
        var $header = $(".header");
        var $headerWrap = $(".header-wrap");
        var $logo = $("#symbol-logo");
        var $hederHeight = $headerWrap.height();
        if ( bo >= 106 ) {
            $header.addClass('header-top__hide');
            // $header.addClass('sticky');
            $headerWrap.addClass('sticky');
            $logo.addClass('fixed-logo');

            $('main').css({
                'padding-top': $hederHeight
            });
            // $header.addClass('fixed-header');
        } else {
            $header.removeClass('header-top__hide');
            // $header.removeClass('sticky');
            $headerWrap.removeClass('sticky');
            $logo.removeClass('fixed-logo');
            // $header.removeClass('fixed-header');
            $('main').css({
                'padding-top': '0'
            });
        }
    });

    /*кастомный селект*/
    $('.c-select').SumoSelect( {
        forceCustomRendering: false
    });

    function showNegative(clickElem){
        $(clickElem).on('click', function(){
            var select = $('.popup__review .c-select');
            select.val('48');
            select[0].sumo.reload();
            // select[0].sumo.selectItem('48');
            var $icon = select.parents('.reviews-form__type').find('.reviews-form__type-icon');
            $icon.removeClass('icon-rabbit-positive');
            $icon.addClass('icon-rabbit-negative');
            // console.log('функция сработала при клике js-negative');
            // console.log(select.val());
        });
    }
    showNegative('.js-negative');
    showNegative('.c-reviews-negative');

    function showPositive(clickElem){
        $(clickElem).on('click', function(){
            var select = $('.popup__review .c-select');
            select.val('47');
            select[0].sumo.reload();
            var $icon = select.parents('.reviews-form__type').find('.reviews-form__type-icon');
            $icon.removeClass('icon-rabbit-negative');
            $icon.addClass('icon-rabbit-positive');
            // select[0].sumo.selectItem('47');
            // console.log('функция сработала при клике js-positive');
            // console.log(select.val());
        });
    }
    showPositive('.js-positive');
    showPositive('.c-reviews-positive');



    function changeRabbitFace (select){
        $(select).on("change",function() {
            var valReview = $(this).val();
            var $icon = $(this).parents('.reviews-form__type').find('.reviews-form__type-icon');

            if (valReview == 48 ) {
                $icon.removeClass('icon-rabbit-positive');
                $icon.addClass('icon-rabbit-negative');
            } else {
                $icon.removeClass('icon-rabbit-negative');
                $icon.addClass('icon-rabbit-positive');
            }
        });
    }

    changeRabbitFace('#form_dropdown_SIMPLE_QUESTION_257');

    function changeSelectFace (select, value, icon_1, icon_2){
        $(select).on("change",function() {
            var valReview = $(this).val();
            var $icon = $(this).parents('.c-select-layout').find('.c-select__icon');
            console.log('changeSelectFace');

            if (valReview == value ) {
                $icon.removeClass(icon_2);
                $icon.addClass(icon_1);
                console.log('boy');
            } else {
                $icon.removeClass(icon_1);
                $icon.addClass(icon_2);
                console.log('girl');
            }
        });
    }

    changeSelectFace('.lk-profile__child-gender', 'M','icon-boy-smiling','icon-girl-smiling');






    /*простые табы*/
    $(document).on('click', '.tabs-menu a', function(event) {
        event.preventDefault();
        $(this).parent().addClass("current");
        $(this).parent().siblings().removeClass("current");
        var tab = $(this).attr("href");
        $(this).parents('.tabs-menu').parent().siblings('.tab').find(".tab-content").not(tab).css("display", "none");
        $(tab).fadeIn();
    });

    /*scroll*/
    // $(".popup-basket__scroll").scrollBox();
    // $('#scrollbarY').tinyscrollbar();

    /*hover в меню*/
    // $('.header-menu__item--about').hover( function(){
    //    $('.header-subnavigation').addClass('is-visible');
    // });
    //
    // $('.header-subnavigation').mouseleave(function(){
    //     $(this).removeClass('is-visible');
    // });

/*скрол карты*/
    // var target = $('#map');
    // var targetPos = target.offset().top;
    // var winHeight = $(window).height();
    // var scrollToElem = targetPos - winHeight;
    // $(window).scroll(function(){
    //     var winScrollTop = $(this).scrollTop();
    //     if(winScrollTop > scrollToElem){
    //         //сработает когда пользователь доскроллит к элементу с классом .elem
    //         $(window).offset(60);
    //     }
    // });

    /*Порой на страницах с «резиновой» версткой необходимо знать ширину скролбара, чтобы правильно вычислить размеры внутренних элементов и их положение. Эта задача решается с помощью следующего алгоритма:

добавить два div в body и разместить их за пределами экрана;
определить ширину внутреннего div;
установить значение «scroll» свойства overflow у внешнего div;
опять определить ширину внутреннего div;
удалить оба div;
вернуть разницу между измеренными ранее значениями ширины.*/
    // function scrollbarWidth() {
    //     var div = $('<div style="width:50px; height:50px; overflow:hidden; position:absolute; top:-200px; left:-200px;"><div style="height:100px;"></div></div>').appendTo('body');
    //     var w1 = $('div', div).innerWidth();
    //     div.css('overflow-y', 'scroll');
    //     var w2 = $('div', div).innerWidth();
    //     $(div).remove();
    //     return (w1 - w2);
    // }
    //
    // var resScrollWidtn = scrollbarWidth();
    // console.log('Ширина скролбара страницы: ' + resScrollWidtn);

});



    /*-------------------------------------------------------------*/

    /*-------------------------------------------------------------*/

// });

    //------------------------------------------------------------custom###
//
// 	$body = $('body');
// 	windowWidth = $(window).width();
// 	windowHeight = $(window).height();
//
// 	pageWidget(['index']);
// 	getAllClasses('html','.elements_list');
// });
//
// $(window).on('load', function () {
// 	loadFunc();
// });
//
// $(window).on('resize', function () {
// 	resizeFunc();
// });
//
// $(window).on('scroll', function () {
// 	scrollFunc();
// });
//
// function loadFunc() {
//
// }
// function resizeFunc() {
// 	updateSizes();
// }
//
// function scrollFunc() {
// 	updateSizes();
// }
//
// function updateSizes() {
// 	windowWidth = $(window).width();
// 	windowHeight = $(window).height();
// }

// if ('objectFit' in document.documentElement.style === false) {
// 	document.addEventListener('DOMContentLoaded', function () {
// 		Array.prototype.forEach.call(document.querySelectorAll('img[data-object-fit]'), function (image) {
// 			(image.runtimeStyle || image.style).background = 'url("' + image.src + '") no-repeat 50%/' + (image.currentStyle ? image.currentStyle['object-fit'] : image.getAttribute('data-object-fit'));
//
// 			image.src = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'' + image.width + '\' height=\'' + image.height + '\'%3E%3C/svg%3E';
// 		});
// 	});
// }

//Functions for development
// function getAllClasses(context, output) {
// 	var finalArray = [],
// 		mainArray = [],
// 		allElements = $(context).find($('*'));//get all elements of our page
// 	//If element has class push this class to mainArray
// 	for (var i = 0; i < allElements.length; i++) {
// 		var someElement = allElements[i],
// 			elementClass = someElement.className;
// 		if (elementClass.length > 0) {//if element have not empty class
// 			//If element have multiple classes - separate them
// 			var elementClassArray = elementClass.split(' '),
// 				classesAmount = elementClassArray.length;
// 			if (classesAmount === 1) {
// 				mainArray.push('.' + elementClassArray[0] + ' {');
// 			} else {
// 				var cascad = '.' + elementClassArray[0] + ' {';
// 				for (var j = 1; j < elementClassArray.length; j++) {
// 					cascad += ' &.' + elementClassArray[j] + ' { }';
// 				}
// 				mainArray.push(cascad);
// 			}
// 		}
// 	}

	//creating finalArray, that don't have repeating elements
// 	var noRepeatingArray = unique(mainArray);
// 	noRepeatingArray.forEach(function (item) {
// 		var has = false;
// 		var preWords = item.split('&');
// 		for (var i = 0; i < finalArray.length; ++i) {
// 			var newWords = finalArray[i].split('&');
// 			if (newWords[0] == preWords[0]) {
// 				has = true;
// 				for (var j = 0; j < preWords.length; ++j) {
// 					if (newWords.indexOf(preWords[j]) < 0) {
// 						newWords.push(preWords[j]);
// 					}
// 				}
// 				finalArray[i] = newWords.join('&');
// 			}
// 		}
// 		if (!has) {
// 			finalArray.push(item);
// 		}
// 	});
// 	for (var i = 0; i < finalArray.length; i++) {
// 		$('<div>' + finalArray[i] + ' }</div>').appendTo(output);
// 	}
//
// 	//function that delete repeating elements from arrays, for more information visit http://mathhelpplanet.com/static.php?p=javascript-algoritmy-obrabotki-massivov
// 	function unique(A) {
// 		var n = A.length, k = 0, B = [];
// 		for (var i = 0; i < n; i++) {
// 			var j = 0;
// 			while (j < k && B[j] !== A[i]) j++;
// 			if (j == k) B[k++] = A[i];
// 		}
// 		return B;
// 	}
// }
/*
function pageWidget(pages) {
	var widgetWrap = $('<div class="widget_wrap"><ul class="widget_list"></ul></div>');
	widgetWrap.prependTo("body");
	for (var i = 0; i < pages.length; i++) {
		$('<li class="widget_item"><a class="widget_link" href="' + pages[i] + '.html' + '">' + pages[i] + '</a></li>').appendTo('.widget_list');
	}
	var widgetStilization = $('<style>body {position:relative} .widget_wrap{position:absolute;top:0;left:0;z-index:9999;padding:10px 20px;background:#222;border-bottom-right-radius:10px;-webkit-transition:all .3s ease;transition:all .3s ease;-webkit-transform:translate(-100%,0);-ms-transform:translate(-100%,0);transform:translate(-100%,0)}.widget_wrap:after{content:" ";position:absolute;top:0;left:100%;width:24px;height:24px;background:#222 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAABGdBTUEAALGPC/xhBQAAAAxQTFRF////////AAAA////BQBkwgAAAAN0Uk5TxMMAjAd+zwAAACNJREFUCNdjqP///y/DfyBg+LVq1Xoo8W8/CkFYAmwA0Kg/AFcANT5fe7l4AAAAAElFTkSuQmCC) no-repeat 50% 50%;cursor:pointer}.widget_wrap:hover{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.widget_item{padding:0 0 10px}.widget_link{color:#fff;text-decoration:none;font-size:15px;}.widget_link:hover{text-decoration:underline} </style>');
	widgetStilization.prependTo(".widget_wrap");
}
*/

/*
	By Osvaldas Valutis, www.osvaldas.info
	Available for use under the MIT License
*/

'use strict';

;( function ( document, window, index )
{
    var inputs = document.querySelectorAll( '.c-inputfile__input' );
    Array.prototype.forEach.call( inputs, function( input )
    {
        var label	 = input.nextElementSibling,
            labelVal = label.innerHTML;

        input.addEventListener( 'change', function( e )
        {
            var fileName = '';
            if( this.files && this.files.length > 1 )
                fileName = ( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length );
            else
                fileName = e.target.value.split( '\\' ).pop();

            if( fileName )
                label.querySelector( 'span' ).innerHTML = fileName;
            else
                label.innerHTML = labelVal;
        });

        // Firefox bug fix
        input.addEventListener( 'focus', function(){ input.classList.add( 'has-focus' ); });
        input.addEventListener( 'blur', function(){ input.classList.remove( 'has-focus' ); });
    });
}( document, window, 0 ));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByZWxvYWRlci5qcyIsInRvb2x0aXBzdGVyLmJ1bmRsZS5qcyIsImpxdWVyeS5tYXNrLmpzIiwianF1ZXJ5Lm1vdXNld2hlZWwuanMiLCJqcXVlcnkuanNjcm9sbHBhbmUubWluLmpzIiwic2ltcGxlYmFyLmpzIiwib3dsLmNhcm91c2VsLmpzIiwianF1ZXJ5LnN1bW9zZWxlY3QuanMiLCJmb3RvcmFtYS5qcyIsInRvb2x0aXAuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqcklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0bEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNzR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoic2NyaXB0c19hbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkb2N1bWVudC5ib2R5Lm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcbi8vICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbi8vICAgICAgICAgdmFyIHByZWxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlLXByZWxvYWRlcicpO1xyXG4vLyAgICAgICAgIGlmKCFwcmVsb2FkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb25lJykpe1xyXG4vLyAgICAgICAgICAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZCgnZG9uZScpO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH0sIDEwMDApO1xyXG4vLyB9O1xyXG5cclxuLyrQvdC+0LLRi9C5INC/0YDQtdC70L7Rg9C00LXRgCovXHJcbmRvY3VtZW50LmJvZHkub25sb2FkID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICBpZihkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnaXMtY29udGVudC1oaWRkZW4nKSl7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdvbmxvYWRDb250ZW50Jyk7XHJcblxyXG59O1xyXG5cclxuXHJcblxyXG4vLyDRhNGD0L3QutGG0LjRjyDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINCy0YHQtdGFINGB0LrRgNC40L/RgtC+0LJcclxuLy8gZnVuY3Rpb24gZHluYW1pY2FsbHlMb2FkU2NyaXB0KCkge1xyXG5cclxuLy8gICAgIHZhciBzY3JpcHQsXHJcbi8vICAgICAgICAgbGlzdFNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdFNjcmlwdHMnKSxcclxuLy8gICAgICAgICBzcmMgPSBbXHJcbi8vICAgICAgICAgICAgIC8vICdodHRwczovL2FwaS1tYXBzLnlhbmRleC5ydS8yLjEvP2xhbmc9cnVfUlUnLFxyXG4vLyAgICAgICAgICAgICAnLi9qcy9jdXN0b20tbWFwLmpzJyxcclxuLy8gICAgICAgICAgICAgJy4vYm93ZXJfY29tcG9uZW50cy9qcXVlcnktbWFzay1wbHVnaW4vZGlzdC9qcXVlcnkubWFzay5qcycsXHJcbi8vICAgICAgICAgICAgICcuL2pzL2pzY3JvbGxwYW5lL2pxdWVyeS5tb3VzZXdoZWVsLmpzJyxcclxuLy8gICAgICAgICAgICAgJy4vanMvanNjcm9sbHBhbmUvanF1ZXJ5LmpzY3JvbGxwYW5lLm1pbi5qcycsXHJcbi8vICAgICAgICAgICAgIC8vICdodHRwczovL2FiZXN0dXpoZXYuZ2l0aHViLmlvL2NhZmUtYW5kZXJzb24vYm93ZXJfY29tcG9uZW50cy90b29sdGlwc3Rlci9kaXN0L2pzL3Rvb2x0aXBzdGVyLmJ1bmRsZS5qcycsXHJcbi8vICAgICAgICAgICAgICcuL2pzL3NpbXBsZWJhci5qcycsXHJcbi8vICAgICAgICAgICAgICcuL2pzL293bGNhcm91c2VsL293bC5jYXJvdXNlbC5qcycsXHJcbi8vICAgICAgICAgICAgICcuL2Jvd2VyX2NvbXBvbmVudHMvc3Vtb3NlbGVjdC9qcXVlcnkuc3Vtb3NlbGVjdC5qcycsXHJcbi8vICAgICAgICAgICAgICcuL2Jvd2VyX2NvbXBvbmVudHMvZm90b3JhbWEvZm90b3JhbWEuanMnXHJcbi8vICAgICAgICAgXTtcclxuXHJcbi8vICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc3JjLmxlbmd0aDsgaSsrKXtcclxuLy8gICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4vLyAgICAgICAgIHNjcmlwdC5zcmMgPSBzcmNbaV07XHJcbi8vICAgICAgICAgbGlzdFNjcmlwdHMuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuLy8gICAgIH0gIFxyXG4vLyB9O1xyXG5cclxuLy8gICBkeW5hbWljYWxseUxvYWRTY3JpcHQoKTtcclxuIiwiLyoqXHJcbiAqIHRvb2x0aXBzdGVyIGh0dHA6Ly9pYW1jZWVnZS5naXRodWIuaW8vdG9vbHRpcHN0ZXIvXHJcbiAqIEEgcm9ja2luJyBjdXN0b20gdG9vbHRpcCBqUXVlcnkgcGx1Z2luXHJcbiAqIERldmVsb3BlZCBieSBDYWxlYiBKYWNvYiBhbmQgTG91aXMgQW1lbGluZVxyXG4gKiBNSVQgbGljZW5zZVxyXG4gKi9cclxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XHJcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlIHVubGVzcyBhbWRNb2R1bGVJZCBpcyBzZXRcclxuICAgIGRlZmluZShbXCJqcXVlcnlcIl0sIGZ1bmN0aW9uIChhMCkge1xyXG4gICAgICByZXR1cm4gKGZhY3RvcnkoYTApKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcclxuICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxyXG4gICAgLy8gbGlrZSBOb2RlLlxyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJqcXVlcnlcIikpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgfVxyXG59KHRoaXMsIGZ1bmN0aW9uICgkKSB7XHJcblxyXG4vLyBUaGlzIGZpbGUgd2lsbCBiZSBVTURpZmllZCBieSBhIGJ1aWxkIHRhc2suXHJcblxyXG52YXIgZGVmYXVsdHMgPSB7XHJcblx0XHRhbmltYXRpb246ICdmYWRlJyxcclxuXHRcdGFuaW1hdGlvbkR1cmF0aW9uOiAzNTAsXHJcblx0XHRjb250ZW50OiBudWxsLFxyXG5cdFx0Y29udGVudEFzSFRNTDogZmFsc2UsXHJcblx0XHRjb250ZW50Q2xvbmluZzogZmFsc2UsXHJcblx0XHRkZWJ1ZzogdHJ1ZSxcclxuXHRcdGRlbGF5OiAzMDAsXHJcblx0XHRkZWxheVRvdWNoOiBbMzAwLCA1MDBdLFxyXG5cdFx0ZnVuY3Rpb25Jbml0OiBudWxsLFxyXG5cdFx0ZnVuY3Rpb25CZWZvcmU6IG51bGwsXHJcblx0XHRmdW5jdGlvblJlYWR5OiBudWxsLFxyXG5cdFx0ZnVuY3Rpb25BZnRlcjogbnVsbCxcclxuXHRcdGZ1bmN0aW9uRm9ybWF0OiBudWxsLFxyXG5cdFx0SUVtaW46IDYsXHJcblx0XHRpbnRlcmFjdGl2ZTogZmFsc2UsXHJcblx0XHRtdWx0aXBsZTogZmFsc2UsXHJcblx0XHQvLyB3aWxsIGRlZmF1bHQgdG8gZG9jdW1lbnQuYm9keSwgb3IgbXVzdCBiZSBhbiBlbGVtZW50IHBvc2l0aW9uZWQgYXQgKDAsIDApXHJcblx0XHQvLyBpbiB0aGUgZG9jdW1lbnQsIHR5cGljYWxseSBsaWtlIHRoZSB2ZXJ5IHRvcCB2aWV3cyBvZiBhbiBhcHAuXHJcblx0XHRwYXJlbnQ6IG51bGwsXHJcblx0XHRwbHVnaW5zOiBbJ3NpZGVUaXAnXSxcclxuXHRcdHJlcG9zaXRpb25PblNjcm9sbDogZmFsc2UsXHJcblx0XHRyZXN0b3JhdGlvbjogJ25vbmUnLFxyXG5cdFx0c2VsZkRlc3RydWN0aW9uOiB0cnVlLFxyXG5cdFx0dGhlbWU6IFtdLFxyXG5cdFx0dGltZXI6IDAsXHJcblx0XHR0cmFja2VySW50ZXJ2YWw6IDUwMCxcclxuXHRcdHRyYWNrT3JpZ2luOiBmYWxzZSxcclxuXHRcdHRyYWNrVG9vbHRpcDogZmFsc2UsXHJcblx0XHR0cmlnZ2VyOiAnaG92ZXInLFxyXG5cdFx0dHJpZ2dlckNsb3NlOiB7XHJcblx0XHRcdGNsaWNrOiBmYWxzZSxcclxuXHRcdFx0bW91c2VsZWF2ZTogZmFsc2UsXHJcblx0XHRcdG9yaWdpbkNsaWNrOiBmYWxzZSxcclxuXHRcdFx0c2Nyb2xsOiBmYWxzZSxcclxuXHRcdFx0dGFwOiBmYWxzZSxcclxuXHRcdFx0dG91Y2hsZWF2ZTogZmFsc2VcclxuXHRcdH0sXHJcblx0XHR0cmlnZ2VyT3Blbjoge1xyXG5cdFx0XHRjbGljazogZmFsc2UsXHJcblx0XHRcdG1vdXNlZW50ZXI6IGZhbHNlLFxyXG5cdFx0XHR0YXA6IGZhbHNlLFxyXG5cdFx0XHR0b3VjaHN0YXJ0OiBmYWxzZVxyXG5cdFx0fSxcclxuXHRcdHVwZGF0ZUFuaW1hdGlvbjogJ3JvdGF0ZScsXHJcblx0XHR6SW5kZXg6IDk5OTk5OTlcclxuXHR9LFxyXG5cdC8vIHdlJ2xsIGF2b2lkIHVzaW5nIHRoZSAnd2luZG93JyBnbG9iYWwgYXMgYSBnb29kIHByYWN0aWNlIGJ1dCBucG0nc1xyXG5cdC8vIGpxdWVyeUA8Mi4xLjAgcGFja2FnZSBhY3R1YWxseSByZXF1aXJlcyBhICd3aW5kb3cnIGdsb2JhbCwgc28gbm90IHN1cmVcclxuXHQvLyBpdCdzIHVzZWZ1bCBhdCBhbGxcclxuXHR3aW4gPSAodHlwZW9mIHdpbmRvdyAhPSAndW5kZWZpbmVkJykgPyB3aW5kb3cgOiBudWxsLFxyXG5cdC8vIGVudiB3aWxsIGJlIHByb3hpZWQgYnkgdGhlIGNvcmUgZm9yIHBsdWdpbnMgdG8gaGF2ZSBhY2Nlc3MgaXRzIHByb3BlcnRpZXNcclxuXHRlbnYgPSB7XHJcblx0XHQvLyBkZXRlY3QgaWYgdGhpcyBkZXZpY2UgY2FuIHRyaWdnZXIgdG91Y2ggZXZlbnRzLiBCZXR0ZXIgaGF2ZSBhIGZhbHNlXHJcblx0XHQvLyBwb3NpdGl2ZSAodW51c2VkIGxpc3RlbmVycywgdGhhdCdzIG9rKSB0aGFuIGEgZmFsc2UgbmVnYXRpdmUuXHJcblx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vTW9kZXJuaXpyL01vZGVybml6ci9ibG9iL21hc3Rlci9mZWF0dXJlLWRldGVjdHMvdG91Y2hldmVudHMuanNcclxuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDgxNzAyOS93aGF0cy10aGUtYmVzdC13YXktdG8tZGV0ZWN0LWEtdG91Y2gtc2NyZWVuLWRldmljZS11c2luZy1qYXZhc2NyaXB0XHJcblx0XHRoYXNUb3VjaENhcGFiaWxpdHk6ICEhKFxyXG5cdFx0XHR3aW5cclxuXHRcdFx0JiZcdChcdCdvbnRvdWNoc3RhcnQnIGluIHdpblxyXG5cdFx0XHRcdHx8XHQod2luLkRvY3VtZW50VG91Y2ggJiYgd2luLmRvY3VtZW50IGluc3RhbmNlb2Ygd2luLkRvY3VtZW50VG91Y2gpXHJcblx0XHRcdFx0fHxcdHdpbi5uYXZpZ2F0b3IubWF4VG91Y2hQb2ludHNcclxuXHRcdFx0KVxyXG5cdFx0KSxcclxuXHRcdGhhc1RyYW5zaXRpb25zOiB0cmFuc2l0aW9uU3VwcG9ydCgpLFxyXG5cdFx0SUU6IGZhbHNlLFxyXG5cdFx0Ly8gZG9uJ3Qgc2V0IG1hbnVhbGx5LCBpdCB3aWxsIGJlIHVwZGF0ZWQgYnkgYSBidWlsZCB0YXNrIGFmdGVyIHRoZSBtYW5pZmVzdFxyXG5cdFx0c2VtVmVyOiAnNC4yLjUnLFxyXG5cdFx0d2luZG93OiB3aW5cclxuXHR9LFxyXG5cdGNvcmUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0Ly8gY29yZSB2YXJpYWJsZXNcclxuXHRcdFxyXG5cdFx0Ly8gdGhlIGNvcmUgZW1pdHRlcnNcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUgPSAkKHt9KTtcclxuXHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYyA9ICQoe30pO1xyXG5cdFx0dGhpcy5fX2luc3RhbmNlc0xhdGVzdEFyciA9IFtdO1xyXG5cdFx0Ly8gY29sbGVjdHMgcGx1Z2luIGNvbnN0cnVjdG9yc1xyXG5cdFx0dGhpcy5fX3BsdWdpbnMgPSB7fTtcclxuXHRcdC8vIHByb3h5IGVudiB2YXJpYWJsZXMgZm9yIHBsdWdpbnMgd2hvIG1pZ2h0IHVzZSB0aGVtXHJcblx0XHR0aGlzLl9lbnYgPSBlbnY7XHJcblx0fTtcclxuXHJcbi8vIGNvcmUgbWV0aG9kc1xyXG5jb3JlLnByb3RvdHlwZSA9IHtcclxuXHRcclxuXHQvKipcclxuXHQgKiBBIGZ1bmN0aW9uIHRvIHByb3h5IHRoZSBwdWJsaWMgbWV0aG9kcyBvZiBhbiBvYmplY3Qgb250byBhbm90aGVyXHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gY29uc3RydWN0b3IgVGhlIGNvbnN0cnVjdG9yIHRvIGJyaWRnZVxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBvYmogVGhlIG9iamVjdCB0aGF0IHdpbGwgZ2V0IG5ldyBtZXRob2RzIChhbiBpbnN0YW5jZSBvciB0aGUgY29yZSlcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGx1Z2luTmFtZSBBIHBsdWdpbiBuYW1lIGZvciB0aGUgY29uc29sZSBsb2cgbWVzc2FnZVxyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX2JyaWRnZTogZnVuY3Rpb24oY29uc3RydWN0b3IsIG9iaiwgcGx1Z2luTmFtZSkge1xyXG5cdFx0XHJcblx0XHQvLyBpZiBpdCdzIG5vdCBhbHJlYWR5IGJyaWRnZWRcclxuXHRcdGlmICghb2JqW3BsdWdpbk5hbWVdKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZm4gPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0XHRmbi5wcm90b3R5cGUgPSBjb25zdHJ1Y3RvcjtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBwbHVnaW5JbnN0YW5jZSA9IG5ldyBmbigpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gdGhlIF9pbml0IG1ldGhvZCBoYXMgdG8gZXhpc3QgaW4gaW5zdGFuY2UgY29uc3RydWN0b3JzIGJ1dCBtaWdodCBiZSBtaXNzaW5nXHJcblx0XHRcdC8vIGluIGNvcmUgY29uc3RydWN0b3JzXHJcblx0XHRcdGlmIChwbHVnaW5JbnN0YW5jZS5fX2luaXQpIHtcclxuXHRcdFx0XHRwbHVnaW5JbnN0YW5jZS5fX2luaXQob2JqKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0JC5lYWNoKGNvbnN0cnVjdG9yLCBmdW5jdGlvbihtZXRob2ROYW1lLCBmbikge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGRvbid0IHByb3h5IFwicHJpdmF0ZVwiIG1ldGhvZHMsIG9ubHkgXCJwcm90ZWN0ZWRcIiBhbmQgcHVibGljIG9uZXNcclxuXHRcdFx0XHRpZiAobWV0aG9kTmFtZS5pbmRleE9mKCdfXycpICE9IDApIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gaWYgdGhlIG1ldGhvZCBkb2VzIG5vdCBleGlzdCB5ZXRcclxuXHRcdFx0XHRcdGlmICghb2JqW21ldGhvZE5hbWVdKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRvYmpbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcGx1Z2luSW5zdGFuY2VbbWV0aG9kTmFtZV0uYXBwbHkocGx1Z2luSW5zdGFuY2UsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHJlbWVtYmVyIHRvIHdoaWNoIHBsdWdpbiB0aGlzIG1ldGhvZCBjb3JyZXNwb25kcyAoc2V2ZXJhbCBwbHVnaW5zIG1heVxyXG5cdFx0XHRcdFx0XHQvLyBoYXZlIG1ldGhvZHMgb2YgdGhlIHNhbWUgbmFtZSwgd2UgbmVlZCB0byBiZSBzdXJlKVxyXG5cdFx0XHRcdFx0XHRvYmpbbWV0aG9kTmFtZV0uYnJpZGdlZCA9IHBsdWdpbkluc3RhbmNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoZGVmYXVsdHMuZGVidWcpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdUaGUgJysgbWV0aG9kTmFtZSArJyBtZXRob2Qgb2YgdGhlICcrIHBsdWdpbk5hbWVcclxuXHRcdFx0XHRcdFx0XHQrJyBwbHVnaW4gY29uZmxpY3RzIHdpdGggYW5vdGhlciBwbHVnaW4gb3IgbmF0aXZlIG1ldGhvZHMnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0b2JqW3BsdWdpbk5hbWVdID0gcGx1Z2luSW5zdGFuY2U7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIG1vY2t1cCBpbiBOb2RlIGVudiBpZiBuZWVkIGJlLCBmb3IgdGVzdGluZyBwdXJwb3Nlc1xyXG5cdCAqXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fc2V0V2luZG93OiBmdW5jdGlvbih3aW5kb3cpIHtcclxuXHRcdGVudi53aW5kb3cgPSB3aW5kb3c7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgYSBydWxlciwgYSB0b29sIHRvIGhlbHAgbWVhc3VyZSB0aGUgc2l6ZSBvZiBhIHRvb2x0aXAgdW5kZXJcclxuXHQgKiB2YXJpb3VzIHNldHRpbmdzLiBNZWFudCBmb3IgcGx1Z2luc1xyXG5cdCAqIFxyXG5cdCAqIEBzZWUgUnVsZXJcclxuXHQgKiBAcmV0dXJuIHtvYmplY3R9IEEgUnVsZXIgaW5zdGFuY2VcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X2dldFJ1bGVyOiBmdW5jdGlvbigkdG9vbHRpcCkge1xyXG5cdFx0cmV0dXJuIG5ldyBSdWxlcigkdG9vbHRpcCk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgaW50ZXJuYWwgdXNlIGJ5IHBsdWdpbnMsIGlmIG5lZWRlZFxyXG5cdCAqXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X29mZjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLm9mZi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBpbnRlcm5hbCB1c2UgYnkgcGx1Z2lucywgaWYgbmVlZGVkXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vbi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBpbnRlcm5hbCB1c2UgYnkgcGx1Z2lucywgaWYgbmVlZGVkXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfb25lOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUub25lLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyAoZ2V0dGVyKSBvciBhZGRzIChzZXR0ZXIpIGEgcGx1Z2luXHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IHBsdWdpbiBQcm92aWRlIGEgc3RyaW5nIChpbiB0aGUgZnVsbCBmb3JtXHJcblx0ICogXCJuYW1lc3BhY2UubmFtZVwiKSB0byB1c2UgYXMgYXMgZ2V0dGVyLCBhbiBvYmplY3QgdG8gdXNlIGFzIGEgc2V0dGVyXHJcblx0ICogQHJldHVybiB7b2JqZWN0fGNvcmV9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9wbHVnaW46IGZ1bmN0aW9uKHBsdWdpbikge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdC8vIGdldHRlclxyXG5cdFx0aWYgKHR5cGVvZiBwbHVnaW4gPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBwbHVnaW5OYW1lID0gcGx1Z2luLFxyXG5cdFx0XHRcdHAgPSBudWxsO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlIG5hbWVzcGFjZSBpcyBwcm92aWRlZCwgaXQncyBlYXN5IHRvIHNlYXJjaFxyXG5cdFx0XHRpZiAocGx1Z2luTmFtZS5pbmRleE9mKCcuJykgPiAwKSB7XHJcblx0XHRcdFx0cCA9IHNlbGYuX19wbHVnaW5zW3BsdWdpbk5hbWVdO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIG90aGVyd2lzZSwgcmV0dXJuIHRoZSBmaXJzdCBuYW1lIHRoYXQgbWF0Y2hlc1xyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQkLmVhY2goc2VsZi5fX3BsdWdpbnMsIGZ1bmN0aW9uKGksIHBsdWdpbikge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAocGx1Z2luLm5hbWUuc3Vic3RyaW5nKHBsdWdpbi5uYW1lLmxlbmd0aCAtIHBsdWdpbk5hbWUubGVuZ3RoIC0gMSkgPT0gJy4nKyBwbHVnaW5OYW1lKSB7XHJcblx0XHRcdFx0XHRcdHAgPSBwbHVnaW47XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHA7XHJcblx0XHR9XHJcblx0XHQvLyBzZXR0ZXJcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZm9yY2UgbmFtZXNwYWNlc1xyXG5cdFx0XHRpZiAocGx1Z2luLm5hbWUuaW5kZXhPZignLicpIDwgMCkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignUGx1Z2lucyBtdXN0IGJlIG5hbWVzcGFjZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fX3BsdWdpbnNbcGx1Z2luLm5hbWVdID0gcGx1Z2luO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlIHBsdWdpbiBoYXMgY29yZSBmZWF0dXJlc1xyXG5cdFx0XHRpZiAocGx1Z2luLmNvcmUpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBicmlkZ2Ugbm9uLXByaXZhdGUgbWV0aG9kcyBvbnRvIHRoZSBjb3JlIHRvIGFsbG93IG5ldyBjb3JlIG1ldGhvZHNcclxuXHRcdFx0XHRzZWxmLl9fYnJpZGdlKHBsdWdpbi5jb3JlLCBzZWxmLCBwbHVnaW4ubmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogVHJpZ2dlciBldmVudHMgb24gdGhlIGNvcmUgZW1pdHRlcnNcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7Y29yZX1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO1xyXG5cdFx0XHJcblx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0YXJnc1swXSA9IHsgdHlwZTogYXJnc1swXSB9O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBub3RlOiB0aGUgb3JkZXIgb2YgZW1pdHRlcnMgbWF0dGVyc1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS50cmlnZ2VyLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIGFyZ3MpO1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLnRyaWdnZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBhcmdzKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIGluc3RhbmNlcyBvZiBhbGwgdG9vbHRpcHMgaW4gdGhlIHBhZ2Ugb3IgYW4gYSBnaXZlbiBlbGVtZW50XHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge3N0cmluZ3xIVE1MIG9iamVjdCBjb2xsZWN0aW9ufSBzZWxlY3RvciBvcHRpb25hbCBVc2UgdGhpc1xyXG5cdCAqIHBhcmFtZXRlciB0byByZXN0cmljdCB0aGUgc2V0IG9mIG9iamVjdHMgdGhhdCB3aWxsIGJlIGluc3BlY3RlZFxyXG5cdCAqIGZvciB0aGUgcmV0cmlldmFsIG9mIGluc3RhbmNlcy4gQnkgZGVmYXVsdCwgYWxsIGluc3RhbmNlcyBpbiB0aGVcclxuXHQgKiBwYWdlIGFyZSByZXR1cm5lZC5cclxuXHQgKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgb2YgaW5zdGFuY2Ugb2JqZWN0c1xyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRpbnN0YW5jZXM6IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XHJcblx0XHRcclxuXHRcdHZhciBpbnN0YW5jZXMgPSBbXSxcclxuXHRcdFx0c2VsID0gc2VsZWN0b3IgfHwgJy50b29sdGlwc3RlcmVkJztcclxuXHRcdFxyXG5cdFx0JChzZWwpLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdG5zID0gJHRoaXMuZGF0YSgndG9vbHRpcHN0ZXItbnMnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChucykge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdCQuZWFjaChucywgZnVuY3Rpb24oaSwgbmFtZXNwYWNlKSB7XHJcblx0XHRcdFx0XHRpbnN0YW5jZXMucHVzaCgkdGhpcy5kYXRhKG5hbWVzcGFjZSkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIGluc3RhbmNlcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIFRvb2x0aXBzdGVyIG9iamVjdHMgZ2VuZXJhdGVkIGJ5IHRoZSBsYXN0IGluaXRpYWxpemluZyBjYWxsXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgb2YgaW5zdGFuY2Ugb2JqZWN0c1xyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRpbnN0YW5jZXNMYXRlc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX19pbnN0YW5jZXNMYXRlc3RBcnI7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgcHVibGljIHVzZSBvbmx5LCBub3QgdG8gYmUgdXNlZCBieSBwbHVnaW5zICh1c2UgOjpfb2ZmKCkgaW5zdGVhZClcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG9mZjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub2ZmLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgcHVibGljIHVzZSBvbmx5LCBub3QgdG8gYmUgdXNlZCBieSBwbHVnaW5zICh1c2UgOjpfb24oKSBpbnN0ZWFkKVxyXG5cdCAqXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLm9uLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgcHVibGljIHVzZSBvbmx5LCBub3QgdG8gYmUgdXNlZCBieSBwbHVnaW5zICh1c2UgOjpfb25lKCkgaW5zdGVhZClcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRvbmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLm9uZS5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyBhbGwgSFRNTCBlbGVtZW50cyB3aGljaCBoYXZlIG9uZSBvciBtb3JlIHRvb2x0aXBzXHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3Igb3B0aW9uYWwgVXNlIHRoaXMgdG8gcmVzdHJpY3QgdGhlIHJlc3VsdHNcclxuXHQgKiB0byB0aGUgZGVzY2VuZGFudHMgb2YgYW4gZWxlbWVudFxyXG5cdCAqIEByZXR1cm4ge2FycmF5fSBBbiBhcnJheSBvZiBIVE1MIGVsZW1lbnRzXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG9yaWdpbnM6IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWwgPSBzZWxlY3RvciA/XHJcblx0XHRcdHNlbGVjdG9yICsnICcgOlxyXG5cdFx0XHQnJztcclxuXHRcdFxyXG5cdFx0cmV0dXJuICQoc2VsICsnLnRvb2x0aXBzdGVyZWQnKS50b0FycmF5KCk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBDaGFuZ2UgZGVmYXVsdCBvcHRpb25zIGZvciBhbGwgZnV0dXJlIGluc3RhbmNlc1xyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IGQgVGhlIG9wdGlvbnMgdGhhdCBzaG91bGQgYmUgbWFkZSBkZWZhdWx0c1xyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdHNldERlZmF1bHRzOiBmdW5jdGlvbihkKSB7XHJcblx0XHQkLmV4dGVuZChkZWZhdWx0cywgZCk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciB1c2VycyB0byB0cmlnZ2VyIHRoZWlyIGhhbmRsZXJzIG9uIHRoZSBwdWJsaWMgZW1pdHRlclxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtjb3JlfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHR0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMudHJpZ2dlckhhbmRsZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcbn07XHJcblxyXG4vLyAkLnRvb2x0aXBzdGVyIHdpbGwgYmUgdXNlZCB0byBjYWxsIGNvcmUgbWV0aG9kc1xyXG4kLnRvb2x0aXBzdGVyID0gbmV3IGNvcmUoKTtcclxuXHJcbi8vIHRoZSBUb29sdGlwc3RlciBpbnN0YW5jZSBjbGFzcyAobWluZCB0aGUgY2FwaXRhbCBUKVxyXG4kLlRvb2x0aXBzdGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xyXG5cdFxyXG5cdC8vIGxpc3Qgb2YgaW5zdGFuY2UgdmFyaWFibGVzXHJcblx0XHJcblx0Ly8gc3RhY2sgb2YgY3VzdG9tIGNhbGxiYWNrcyBwcm92aWRlZCBhcyBwYXJhbWV0ZXJzIHRvIEFQSSBtZXRob2RzXHJcblx0dGhpcy5fX2NhbGxiYWNrcyA9IHtcclxuXHRcdGNsb3NlOiBbXSxcclxuXHRcdG9wZW46IFtdXHJcblx0fTtcclxuXHQvLyB0aGUgc2NoZWR1bGUgdGltZSBvZiBET00gcmVtb3ZhbFxyXG5cdHRoaXMuX19jbG9zaW5nVGltZTtcclxuXHQvLyB0aGlzIHdpbGwgYmUgdGhlIHVzZXIgY29udGVudCBzaG93biBpbiB0aGUgdG9vbHRpcC4gQSBjYXBpdGFsIFwiQ1wiIGlzIHVzZWRcclxuXHQvLyBiZWNhdXNlIHRoZXJlIGlzIGFsc28gYSBtZXRob2QgY2FsbGVkIGNvbnRlbnQoKVxyXG5cdHRoaXMuX19Db250ZW50O1xyXG5cdC8vIGZvciB0aGUgc2l6ZSB0cmFja2VyXHJcblx0dGhpcy5fX2NvbnRlbnRCY3I7XHJcblx0Ly8gdG8gZGlzYWJsZSB0aGUgdG9vbHRpcCBhZnRlciBkZXN0cnVjdGlvblxyXG5cdHRoaXMuX19kZXN0cm95ZWQgPSBmYWxzZTtcclxuXHQvLyB3ZSBjYW4ndCBlbWl0IGRpcmVjdGx5IG9uIHRoZSBpbnN0YW5jZSBiZWNhdXNlIGlmIGEgbWV0aG9kIHdpdGggdGhlIHNhbWVcclxuXHQvLyBuYW1lIGFzIHRoZSBldmVudCBleGlzdHMsIGl0IHdpbGwgYmUgY2FsbGVkIGJ5IGpRdWVyeS4gU2Ugd2UgdXNlIGEgcGxhaW5cclxuXHQvLyBvYmplY3QgYXMgZW1pdHRlci4gVGhpcyBlbWl0dGVyIGlzIGZvciBpbnRlcm5hbCB1c2UgYnkgcGx1Z2lucyxcclxuXHQvLyBpZiBuZWVkZWQuXHJcblx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSA9ICQoe30pO1xyXG5cdC8vIHRoaXMgZW1pdHRlciBpcyBmb3IgdGhlIHVzZXIgdG8gbGlzdGVuIHRvIGV2ZW50cyB3aXRob3V0IHJpc2tpbmcgdG8gbWVzc1xyXG5cdC8vIHdpdGggb3VyIGludGVybmFsIGxpc3RlbmVyc1xyXG5cdHRoaXMuX18kZW1pdHRlclB1YmxpYyA9ICQoe30pO1xyXG5cdHRoaXMuX19lbmFibGVkID0gdHJ1ZTtcclxuXHQvLyB0aGUgcmVmZXJlbmNlIHRvIHRoZSBnYyBpbnRlcnZhbFxyXG5cdHRoaXMuX19nYXJiYWdlQ29sbGVjdG9yO1xyXG5cdC8vIHZhcmlvdXMgcG9zaXRpb24gYW5kIHNpemUgZGF0YSByZWNvbXB1dGVkIGJlZm9yZSBlYWNoIHJlcG9zaXRpb25pbmdcclxuXHR0aGlzLl9fR2VvbWV0cnk7XHJcblx0Ly8gdGhlIHRvb2x0aXAgcG9zaXRpb24sIHNhdmVkIGFmdGVyIGVhY2ggcmVwb3NpdGlvbmluZyBieSBhIHBsdWdpblxyXG5cdHRoaXMuX19sYXN0UG9zaXRpb247XHJcblx0Ly8gYSB1bmlxdWUgbmFtZXNwYWNlIHBlciBpbnN0YW5jZVxyXG5cdHRoaXMuX19uYW1lc3BhY2UgPSAndG9vbHRpcHN0ZXItJysgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjEwMDAwMDApO1xyXG5cdHRoaXMuX19vcHRpb25zO1xyXG5cdC8vIHdpbGwgYmUgdXNlZCB0byBzdXBwb3J0IG9yaWdpbnMgaW4gc2Nyb2xsYWJsZSBhcmVhc1xyXG5cdHRoaXMuX18kb3JpZ2luUGFyZW50cztcclxuXHR0aGlzLl9fcG9pbnRlcklzT3Zlck9yaWdpbiA9IGZhbHNlO1xyXG5cdC8vIHRvIHJlbW92ZSB0aGVtZXMgaWYgbmVlZGVkXHJcblx0dGhpcy5fX3ByZXZpb3VzVGhlbWVzID0gW107XHJcblx0Ly8gdGhlIHN0YXRlIGNhbiBiZSBlaXRoZXI6IGFwcGVhcmluZywgc3RhYmxlLCBkaXNhcHBlYXJpbmcsIGNsb3NlZFxyXG5cdHRoaXMuX19zdGF0ZSA9ICdjbG9zZWQnO1xyXG5cdC8vIHRpbWVvdXQgcmVmZXJlbmNlc1xyXG5cdHRoaXMuX190aW1lb3V0cyA9IHtcclxuXHRcdGNsb3NlOiBbXSxcclxuXHRcdG9wZW46IG51bGxcclxuXHR9O1xyXG5cdC8vIHN0b3JlIHRvdWNoIGV2ZW50cyB0byBiZSBhYmxlIHRvIGRldGVjdCBlbXVsYXRlZCBtb3VzZSBldmVudHNcclxuXHR0aGlzLl9fdG91Y2hFdmVudHMgPSBbXTtcclxuXHQvLyB0aGUgcmVmZXJlbmNlIHRvIHRoZSB0cmFja2VyIGludGVydmFsXHJcblx0dGhpcy5fX3RyYWNrZXIgPSBudWxsO1xyXG5cdC8vIHRoZSBlbGVtZW50IHRvIHdoaWNoIHRoaXMgdG9vbHRpcCBpcyBhc3NvY2lhdGVkXHJcblx0dGhpcy5fJG9yaWdpbjtcclxuXHQvLyB0aGlzIHdpbGwgYmUgdGhlIHRvb2x0aXAgZWxlbWVudCAoalF1ZXJ5IHdyYXBwZWQgSFRNTCBlbGVtZW50KS5cclxuXHQvLyBJdCdzIHRoZSBqb2Igb2YgYSBwbHVnaW4gdG8gY3JlYXRlIGl0IGFuZCBhcHBlbmQgaXQgdG8gdGhlIERPTVxyXG5cdHRoaXMuXyR0b29sdGlwO1xyXG5cdFxyXG5cdC8vIGxhdW5jaFxyXG5cdHRoaXMuX19pbml0KGVsZW1lbnQsIG9wdGlvbnMpO1xyXG59O1xyXG5cclxuJC5Ub29sdGlwc3Rlci5wcm90b3R5cGUgPSB7XHJcblx0XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIG9yaWdpblxyXG5cdCAqIEBwYXJhbSBvcHRpb25zXHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX2luaXQ6IGZ1bmN0aW9uKG9yaWdpbiwgb3B0aW9ucykge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdHNlbGYuXyRvcmlnaW4gPSAkKG9yaWdpbik7XHJcblx0XHRzZWxmLl9fb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XHJcblx0XHRcclxuXHRcdC8vIHNvbWUgb3B0aW9ucyBtYXkgbmVlZCB0byBiZSByZWZvcm1hdHRlZFxyXG5cdFx0c2VsZi5fX29wdGlvbnNGb3JtYXQoKTtcclxuXHRcdFxyXG5cdFx0Ly8gZG9uJ3QgcnVuIG9uIG9sZCBJRSBpZiBhc2tlZCBubyB0b1xyXG5cdFx0aWYgKFx0IWVudi5JRVxyXG5cdFx0XHR8fFx0ZW52LklFID49IHNlbGYuX19vcHRpb25zLklFbWluXHJcblx0XHQpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIG5vdGU6IHRoZSBjb250ZW50IGlzIG51bGwgKGVtcHR5KSBieSBkZWZhdWx0IGFuZCBjYW4gc3RheSB0aGF0XHJcblx0XHRcdC8vIHdheSBpZiB0aGUgcGx1Z2luIHJlbWFpbnMgaW5pdGlhbGl6ZWQgYnV0IG5vdCBmZWQgYW55IGNvbnRlbnQuIFRoZVxyXG5cdFx0XHQvLyB0b29sdGlwIHdpbGwganVzdCBub3QgYXBwZWFyLlxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbGV0J3Mgc2F2ZSB0aGUgaW5pdGlhbCB2YWx1ZSBvZiB0aGUgdGl0bGUgYXR0cmlidXRlIGZvciBsYXRlclxyXG5cdFx0XHQvLyByZXN0b3JhdGlvbiBpZiBuZWVkIGJlLlxyXG5cdFx0XHR2YXIgaW5pdGlhbFRpdGxlID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGl0IHdpbGwgYWxyZWFkeSBoYXZlIGJlZW4gc2F2ZWQgaW4gY2FzZSBvZiBtdWx0aXBsZSB0b29sdGlwc1xyXG5cdFx0XHRpZiAoc2VsZi5fJG9yaWdpbi5kYXRhKCd0b29sdGlwc3Rlci1pbml0aWFsVGl0bGUnKSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aW5pdGlhbFRpdGxlID0gc2VsZi5fJG9yaWdpbi5hdHRyKCd0aXRsZScpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHdlIGRvIG5vdCB3YW50IGluaXRpYWxUaXRsZSB0byBiZSBcInVuZGVmaW5lZFwiIGJlY2F1c2VcclxuXHRcdFx0XHQvLyBvZiBob3cgalF1ZXJ5J3MgLmRhdGEoKSBtZXRob2Qgd29ya3NcclxuXHRcdFx0XHRpZiAoaW5pdGlhbFRpdGxlID09PSB1bmRlZmluZWQpIGluaXRpYWxUaXRsZSA9IG51bGw7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2VsZi5fJG9yaWdpbi5kYXRhKCd0b29sdGlwc3Rlci1pbml0aWFsVGl0bGUnLCBpbml0aWFsVGl0bGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBJZiBjb250ZW50IGlzIHByb3ZpZGVkIGluIHRoZSBvcHRpb25zLCBpdCBoYXMgcHJlY2VkZW5jZSBvdmVyIHRoZVxyXG5cdFx0XHQvLyB0aXRsZSBhdHRyaWJ1dGUuXHJcblx0XHRcdC8vIE5vdGU6IGFuIGVtcHR5IHN0cmluZyBpcyBjb25zaWRlcmVkIGNvbnRlbnQsIG9ubHkgJ251bGwnIHJlcHJlc2VudHNcclxuXHRcdFx0Ly8gdGhlIGFic2VuY2Ugb2YgY29udGVudC5cclxuXHRcdFx0Ly8gQWxzbywgYW4gZXhpc3RpbmcgdGl0bGU9XCJcIiBhdHRyaWJ1dGUgd2lsbCByZXN1bHQgaW4gYW4gZW1wdHkgc3RyaW5nXHJcblx0XHRcdC8vIGNvbnRlbnRcclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmNvbnRlbnQgIT09IG51bGwpIHtcclxuXHRcdFx0XHRzZWxmLl9fY29udGVudFNldChzZWxmLl9fb3B0aW9ucy5jb250ZW50KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgc2VsZWN0b3IgPSBzZWxmLl8kb3JpZ2luLmF0dHIoJ2RhdGEtdG9vbHRpcC1jb250ZW50JyksXHJcblx0XHRcdFx0XHQkZWw7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHNlbGVjdG9yKXtcclxuXHRcdFx0XHRcdCRlbCA9ICQoc2VsZWN0b3IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoJGVsICYmICRlbFswXSkge1xyXG5cdFx0XHRcdFx0c2VsZi5fX2NvbnRlbnRTZXQoJGVsLmZpcnN0KCkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHNlbGYuX19jb250ZW50U2V0KGluaXRpYWxUaXRsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl8kb3JpZ2luXHJcblx0XHRcdFx0Ly8gc3RyaXAgdGhlIHRpdGxlIG9mZiBvZiB0aGUgZWxlbWVudCB0byBwcmV2ZW50IHRoZSBkZWZhdWx0IHRvb2x0aXBzXHJcblx0XHRcdFx0Ly8gZnJvbSBwb3BwaW5nIHVwXHJcblx0XHRcdFx0LnJlbW92ZUF0dHIoJ3RpdGxlJylcclxuXHRcdFx0XHQvLyB0byBiZSBhYmxlIHRvIGZpbmQgYWxsIGluc3RhbmNlcyBvbiB0aGUgcGFnZSBsYXRlciAodXBvbiB3aW5kb3dcclxuXHRcdFx0XHQvLyBldmVudHMgaW4gcGFydGljdWxhcilcclxuXHRcdFx0XHQuYWRkQ2xhc3MoJ3Rvb2x0aXBzdGVyZWQnKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHNldCBsaXN0ZW5lcnMgb24gdGhlIG9yaWdpblxyXG5cdFx0XHRzZWxmLl9fcHJlcGFyZU9yaWdpbigpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gc2V0IHRoZSBnYXJiYWdlIGNvbGxlY3RvclxyXG5cdFx0XHRzZWxmLl9fcHJlcGFyZUdDKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpbml0IHBsdWdpbnNcclxuXHRcdFx0JC5lYWNoKHNlbGYuX19vcHRpb25zLnBsdWdpbnMsIGZ1bmN0aW9uKGksIHBsdWdpbk5hbWUpIHtcclxuXHRcdFx0XHRzZWxmLl9wbHVnKHBsdWdpbk5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHRvIGRldGVjdCBzd2lwaW5nXHJcblx0XHRcdGlmIChlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KSB7XHJcblx0XHRcdFx0JChlbnYud2luZG93LmRvY3VtZW50LmJvZHkpLm9uKCd0b3VjaG1vdmUuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbicsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRzZWxmLl90b3VjaFJlY29yZEV2ZW50KGV2ZW50KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0c2VsZlxyXG5cdFx0XHRcdC8vIHByZXBhcmUgdGhlIHRvb2x0aXAgd2hlbiBpdCBnZXRzIGNyZWF0ZWQuIFRoaXMgZXZlbnQgbXVzdFxyXG5cdFx0XHRcdC8vIGJlIGZpcmVkIGJ5IGEgcGx1Z2luXHJcblx0XHRcdFx0Ll9vbignY3JlYXRlZCcsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2VsZi5fX3ByZXBhcmVUb29sdGlwKCk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQvLyBzYXZlIHBvc2l0aW9uIGluZm9ybWF0aW9uIHdoZW4gaXQncyBzZW50IGJ5IGEgcGx1Z2luXHJcblx0XHRcdFx0Ll9vbigncmVwb3NpdGlvbmVkJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0c2VsZi5fX2xhc3RQb3NpdGlvbiA9IGUucG9zaXRpb247XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0c2VsZi5fX29wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogSW5zZXJ0IHRoZSBjb250ZW50IGludG8gdGhlIGFwcHJvcHJpYXRlIEhUTUwgZWxlbWVudCBvZiB0aGUgdG9vbHRpcFxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19jb250ZW50SW5zZXJ0OiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHQkZWwgPSBzZWxmLl8kdG9vbHRpcC5maW5kKCcudG9vbHRpcHN0ZXItY29udGVudCcpLFxyXG5cdFx0XHRmb3JtYXR0ZWRDb250ZW50ID0gc2VsZi5fX0NvbnRlbnQsXHJcblx0XHRcdGZvcm1hdCA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuXHRcdFx0XHRmb3JtYXR0ZWRDb250ZW50ID0gY29udGVudDtcclxuXHRcdFx0fTtcclxuXHRcdFxyXG5cdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdHR5cGU6ICdmb3JtYXQnLFxyXG5cdFx0XHRjb250ZW50OiBzZWxmLl9fQ29udGVudCxcclxuXHRcdFx0Zm9ybWF0OiBmb3JtYXRcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRpZiAoc2VsZi5fX29wdGlvbnMuZnVuY3Rpb25Gb3JtYXQpIHtcclxuXHRcdFx0XHJcblx0XHRcdGZvcm1hdHRlZENvbnRlbnQgPSBzZWxmLl9fb3B0aW9ucy5mdW5jdGlvbkZvcm1hdC5jYWxsKFxyXG5cdFx0XHRcdHNlbGYsXHJcblx0XHRcdFx0c2VsZixcclxuXHRcdFx0XHR7IG9yaWdpbjogc2VsZi5fJG9yaWdpblswXSB9LFxyXG5cdFx0XHRcdHNlbGYuX19Db250ZW50XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0eXBlb2YgZm9ybWF0dGVkQ29udGVudCA9PT0gJ3N0cmluZycgJiYgIXNlbGYuX19vcHRpb25zLmNvbnRlbnRBc0hUTUwpIHtcclxuXHRcdFx0JGVsLnRleHQoZm9ybWF0dGVkQ29udGVudCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0JGVsXHJcblx0XHRcdFx0LmVtcHR5KClcclxuXHRcdFx0XHQuYXBwZW5kKGZvcm1hdHRlZENvbnRlbnQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNhdmUgdGhlIGNvbnRlbnQsIGNsb25pbmcgaXQgYmVmb3JlaGFuZCBpZiBuZWVkIGJlXHJcblx0ICogXHJcblx0ICogQHBhcmFtIGNvbnRlbnRcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fY29udGVudFNldDogZnVuY3Rpb24oY29udGVudCkge1xyXG5cdFx0XHJcblx0XHQvLyBjbG9uZSBpZiBhc2tlZC4gQ2xvbmluZyB0aGUgb2JqZWN0IG1ha2VzIHN1cmUgdGhhdCBlYWNoIGluc3RhbmNlIGhhcyBpdHNcclxuXHRcdC8vIG93biB2ZXJzaW9uIG9mIHRoZSBjb250ZW50IChpbiBjYXNlIGEgc2FtZSBvYmplY3Qgd2VyZSBwcm92aWRlZCBmb3Igc2V2ZXJhbFxyXG5cdFx0Ly8gaW5zdGFuY2VzKVxyXG5cdFx0Ly8gcmVtaW5kZXI6IHR5cGVvZiBudWxsID09PSBvYmplY3RcclxuXHRcdGlmIChjb250ZW50IGluc3RhbmNlb2YgJCAmJiB0aGlzLl9fb3B0aW9ucy5jb250ZW50Q2xvbmluZykge1xyXG5cdFx0XHRjb250ZW50ID0gY29udGVudC5jbG9uZSh0cnVlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dGhpcy5fX0NvbnRlbnQgPSBjb250ZW50O1xyXG5cdFx0XHJcblx0XHR0aGlzLl90cmlnZ2VyKHtcclxuXHRcdFx0dHlwZTogJ3VwZGF0ZWQnLFxyXG5cdFx0XHRjb250ZW50OiBjb250ZW50XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBFcnJvciBtZXNzYWdlIGFib3V0IGEgbWV0aG9kIGNhbGwgbWFkZSBhZnRlciBkZXN0cnVjdGlvblxyXG5cdCAqIFxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19kZXN0cm95RXJyb3I6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKCdUaGlzIHRvb2x0aXAgaGFzIGJlZW4gZGVzdHJveWVkIGFuZCBjYW5ub3QgZXhlY3V0ZSB5b3VyIG1ldGhvZCBjYWxsLicpO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogR2F0aGVyIGFsbCBpbmZvcm1hdGlvbiBhYm91dCBkaW1lbnNpb25zIGFuZCBhdmFpbGFibGUgc3BhY2UsXHJcblx0ICogY2FsbGVkIGJlZm9yZSBldmVyeSByZXBvc2l0aW9uaW5nXHJcblx0ICogXHJcblx0ICogQHByaXZhdGVcclxuXHQgKiBAcmV0dXJucyB7b2JqZWN0fVxyXG5cdCAqL1xyXG5cdF9fZ2VvbWV0cnk6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXJcdHNlbGYgPSB0aGlzLFxyXG5cdFx0XHQkdGFyZ2V0ID0gc2VsZi5fJG9yaWdpbixcclxuXHRcdFx0b3JpZ2luSXNBcmVhID0gc2VsZi5fJG9yaWdpbi5pcygnYXJlYScpO1xyXG5cdFx0XHJcblx0XHQvLyBpZiB0aGlzLl8kb3JpZ2luIGlzIGEgbWFwIGFyZWEsIHRoZSB0YXJnZXQgd2UnbGwgbmVlZFxyXG5cdFx0Ly8gdGhlIGRpbWVuc2lvbnMgb2YgaXMgYWN0dWFsbHkgdGhlIGltYWdlIHVzaW5nIHRoZSBtYXAsXHJcblx0XHQvLyBub3QgdGhlIGFyZWEgaXRzZWxmXHJcblx0XHRpZiAob3JpZ2luSXNBcmVhKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgbWFwTmFtZSA9IHNlbGYuXyRvcmlnaW4ucGFyZW50KCkuYXR0cignbmFtZScpO1xyXG5cdFx0XHRcclxuXHRcdFx0JHRhcmdldCA9ICQoJ2ltZ1t1c2VtYXA9XCIjJysgbWFwTmFtZSArJ1wiXScpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHR2YXIgYmNyID0gJHRhcmdldFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuXHRcdFx0JGRvY3VtZW50ID0gJChlbnYud2luZG93LmRvY3VtZW50KSxcclxuXHRcdFx0JHdpbmRvdyA9ICQoZW52LndpbmRvdyksXHJcblx0XHRcdCRwYXJlbnQgPSAkdGFyZ2V0LFxyXG5cdFx0XHQvLyBzb21lIHVzZWZ1bCBwcm9wZXJ0aWVzIG9mIGltcG9ydGFudCBlbGVtZW50c1xyXG5cdFx0XHRnZW8gPSB7XHJcblx0XHRcdFx0Ly8gYXZhaWxhYmxlIHNwYWNlIGZvciB0aGUgdG9vbHRpcCwgc2VlIGRvd24gYmVsb3dcclxuXHRcdFx0XHRhdmFpbGFibGU6IHtcclxuXHRcdFx0XHRcdGRvY3VtZW50OiBudWxsLFxyXG5cdFx0XHRcdFx0d2luZG93OiBudWxsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRkb2N1bWVudDoge1xyXG5cdFx0XHRcdFx0c2l6ZToge1xyXG5cdFx0XHRcdFx0XHRoZWlnaHQ6ICRkb2N1bWVudC5oZWlnaHQoKSxcclxuXHRcdFx0XHRcdFx0d2lkdGg6ICRkb2N1bWVudC53aWR0aCgpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR3aW5kb3c6IHtcclxuXHRcdFx0XHRcdHNjcm9sbDoge1xyXG5cdFx0XHRcdFx0XHQvLyB0aGUgc2Vjb25kIG9uZXMgYXJlIGZvciBJRSBjb21wYXRpYmlsaXR5XHJcblx0XHRcdFx0XHRcdGxlZnQ6IGVudi53aW5kb3cuc2Nyb2xsWCB8fCBlbnYud2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LFxyXG5cdFx0XHRcdFx0XHR0b3A6IGVudi53aW5kb3cuc2Nyb2xsWSB8fCBlbnYud2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3BcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRzaXplOiB7XHJcblx0XHRcdFx0XHRcdGhlaWdodDogJHdpbmRvdy5oZWlnaHQoKSxcclxuXHRcdFx0XHRcdFx0d2lkdGg6ICR3aW5kb3cud2lkdGgoKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0b3JpZ2luOiB7XHJcblx0XHRcdFx0XHQvLyB0aGUgb3JpZ2luIGhhcyBhIGZpeGVkIGxpbmVhZ2UgaWYgaXRzZWxmIG9yIG9uZSBvZiBpdHNcclxuXHRcdFx0XHRcdC8vIGFuY2VzdG9ycyBoYXMgYSBmaXhlZCBwb3NpdGlvblxyXG5cdFx0XHRcdFx0Zml4ZWRMaW5lYWdlOiBmYWxzZSxcclxuXHRcdFx0XHRcdC8vIHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudFxyXG5cdFx0XHRcdFx0b2Zmc2V0OiB7fSxcclxuXHRcdFx0XHRcdHNpemU6IHtcclxuXHRcdFx0XHRcdFx0aGVpZ2h0OiBiY3IuYm90dG9tIC0gYmNyLnRvcCxcclxuXHRcdFx0XHRcdFx0d2lkdGg6IGJjci5yaWdodCAtIGJjci5sZWZ0XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0dXNlbWFwSW1hZ2U6IG9yaWdpbklzQXJlYSA/ICR0YXJnZXRbMF0gOiBudWxsLFxyXG5cdFx0XHRcdFx0Ly8gcmVsYXRpdmUgdG8gdGhlIHdpbmRvd1xyXG5cdFx0XHRcdFx0d2luZG93T2Zmc2V0OiB7XHJcblx0XHRcdFx0XHRcdGJvdHRvbTogYmNyLmJvdHRvbSxcclxuXHRcdFx0XHRcdFx0bGVmdDogYmNyLmxlZnQsXHJcblx0XHRcdFx0XHRcdHJpZ2h0OiBiY3IucmlnaHQsXHJcblx0XHRcdFx0XHRcdHRvcDogYmNyLnRvcFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0Z2VvRml4ZWQgPSBmYWxzZTtcclxuXHRcdFxyXG5cdFx0Ly8gaWYgdGhlIGVsZW1lbnQgaXMgYSBtYXAgYXJlYSwgc29tZSBwcm9wZXJ0aWVzIG1heSBuZWVkXHJcblx0XHQvLyB0byBiZSByZWNhbGN1bGF0ZWRcclxuXHRcdGlmIChvcmlnaW5Jc0FyZWEpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBzaGFwZSA9IHNlbGYuXyRvcmlnaW4uYXR0cignc2hhcGUnKSxcclxuXHRcdFx0XHRjb29yZHMgPSBzZWxmLl8kb3JpZ2luLmF0dHIoJ2Nvb3JkcycpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGNvb3Jkcykge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvb3JkcyA9IGNvb3Jkcy5zcGxpdCgnLCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdCQubWFwKGNvb3JkcywgZnVuY3Rpb24odmFsLCBpKSB7XHJcblx0XHRcdFx0XHRjb29yZHNbaV0gPSBwYXJzZUludCh2YWwpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGUgaW1hZ2UgaXRzZWxmIGlzIHRoZSBhcmVhLCBub3RoaW5nIG1vcmUgdG8gZG9cclxuXHRcdFx0aWYgKHNoYXBlICE9ICdkZWZhdWx0Jykge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHN3aXRjaChzaGFwZSkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlICdjaXJjbGUnOlxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGNpcmNsZUNlbnRlckxlZnQgPSBjb29yZHNbMF0sXHJcblx0XHRcdFx0XHRcdFx0Y2lyY2xlQ2VudGVyVG9wID0gY29vcmRzWzFdLFxyXG5cdFx0XHRcdFx0XHRcdGNpcmNsZVJhZGl1cyA9IGNvb3Jkc1syXSxcclxuXHRcdFx0XHRcdFx0XHRhcmVhVG9wT2Zmc2V0ID0gY2lyY2xlQ2VudGVyVG9wIC0gY2lyY2xlUmFkaXVzLFxyXG5cdFx0XHRcdFx0XHRcdGFyZWFMZWZ0T2Zmc2V0ID0gY2lyY2xlQ2VudGVyTGVmdCAtIGNpcmNsZVJhZGl1cztcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4uc2l6ZS5oZWlnaHQgPSBjaXJjbGVSYWRpdXMgKiAyO1xyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLnNpemUud2lkdGggPSBnZW8ub3JpZ2luLnNpemUuaGVpZ2h0O1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArPSBhcmVhTGVmdE9mZnNldDtcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICs9IGFyZWFUb3BPZmZzZXQ7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y2FzZSAncmVjdCc6XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2YXIgYXJlYUxlZnQgPSBjb29yZHNbMF0sXHJcblx0XHRcdFx0XHRcdFx0YXJlYVRvcCA9IGNvb3Jkc1sxXSxcclxuXHRcdFx0XHRcdFx0XHRhcmVhUmlnaHQgPSBjb29yZHNbMl0sXHJcblx0XHRcdFx0XHRcdFx0YXJlYUJvdHRvbSA9IGNvb3Jkc1szXTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4uc2l6ZS5oZWlnaHQgPSBhcmVhQm90dG9tIC0gYXJlYVRvcDtcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi5zaXplLndpZHRoID0gYXJlYVJpZ2h0IC0gYXJlYUxlZnQ7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICs9IGFyZWFMZWZ0O1xyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKz0gYXJlYVRvcDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlICdwb2x5JzpcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHZhciBhcmVhU21hbGxlc3RYID0gMCxcclxuXHRcdFx0XHRcdFx0XHRhcmVhU21hbGxlc3RZID0gMCxcclxuXHRcdFx0XHRcdFx0XHRhcmVhR3JlYXRlc3RYID0gMCxcclxuXHRcdFx0XHRcdFx0XHRhcmVhR3JlYXRlc3RZID0gMCxcclxuXHRcdFx0XHRcdFx0XHRhcnJheUFsdGVybmF0ZSA9ICdldmVuJztcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dmFyIGFyZWFOdW1iZXIgPSBjb29yZHNbaV07XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGFycmF5QWx0ZXJuYXRlID09ICdldmVuJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoYXJlYU51bWJlciA+IGFyZWFHcmVhdGVzdFgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGFyZWFHcmVhdGVzdFggPSBhcmVhTnVtYmVyO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGkgPT09IDApIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhcmVhU21hbGxlc3RYID0gYXJlYUdyZWF0ZXN0WDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoYXJlYU51bWJlciA8IGFyZWFTbWFsbGVzdFgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXJlYVNtYWxsZXN0WCA9IGFyZWFOdW1iZXI7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGFycmF5QWx0ZXJuYXRlID0gJ29kZCc7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGFyZWFOdW1iZXIgPiBhcmVhR3JlYXRlc3RZKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRhcmVhR3JlYXRlc3RZID0gYXJlYU51bWJlcjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpID09IDEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhcmVhU21hbGxlc3RZID0gYXJlYUdyZWF0ZXN0WTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoYXJlYU51bWJlciA8IGFyZWFTbWFsbGVzdFkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXJlYVNtYWxsZXN0WSA9IGFyZWFOdW1iZXI7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGFycmF5QWx0ZXJuYXRlID0gJ2V2ZW4nO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi5zaXplLmhlaWdodCA9IGFyZWFHcmVhdGVzdFkgLSBhcmVhU21hbGxlc3RZO1xyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLnNpemUud2lkdGggPSBhcmVhR3JlYXRlc3RYIC0gYXJlYVNtYWxsZXN0WDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKz0gYXJlYVNtYWxsZXN0WDtcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICs9IGFyZWFTbWFsbGVzdFk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gdXNlciBjYWxsYmFjayB0aHJvdWdoIGFuIGV2ZW50XHJcblx0XHR2YXIgZWRpdCA9IGZ1bmN0aW9uKHIpIHtcclxuXHRcdFx0Z2VvLm9yaWdpbi5zaXplLmhlaWdodCA9IHIuaGVpZ2h0LFxyXG5cdFx0XHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgPSByLmxlZnQsXHJcblx0XHRcdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wID0gci50b3AsXHJcblx0XHRcdFx0Z2VvLm9yaWdpbi5zaXplLndpZHRoID0gci53aWR0aFxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdHR5cGU6ICdnZW9tZXRyeScsXHJcblx0XHRcdGVkaXQ6IGVkaXQsXHJcblx0XHRcdGdlb21ldHJ5OiB7XHJcblx0XHRcdFx0aGVpZ2h0OiBnZW8ub3JpZ2luLnNpemUuaGVpZ2h0LFxyXG5cdFx0XHRcdGxlZnQ6IGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQsXHJcblx0XHRcdFx0dG9wOiBnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AsXHJcblx0XHRcdFx0d2lkdGg6IGdlby5vcmlnaW4uc2l6ZS53aWR0aFxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gY2FsY3VsYXRlIHRoZSByZW1haW5pbmcgcHJvcGVydGllcyB3aXRoIHdoYXQgd2UgZ290XHJcblx0XHRcclxuXHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0ID0gZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIGdlby5vcmlnaW4uc2l6ZS53aWR0aDtcclxuXHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSA9IGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIGdlby5vcmlnaW4uc2l6ZS5oZWlnaHQ7XHJcblx0XHRcclxuXHRcdGdlby5vcmlnaW4ub2Zmc2V0LmxlZnQgPSBnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgZ2VvLndpbmRvdy5zY3JvbGwubGVmdDtcclxuXHRcdGdlby5vcmlnaW4ub2Zmc2V0LnRvcCA9IGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIGdlby53aW5kb3cuc2Nyb2xsLnRvcDtcclxuXHRcdGdlby5vcmlnaW4ub2Zmc2V0LmJvdHRvbSA9IGdlby5vcmlnaW4ub2Zmc2V0LnRvcCArIGdlby5vcmlnaW4uc2l6ZS5oZWlnaHQ7XHJcblx0XHRnZW8ub3JpZ2luLm9mZnNldC5yaWdodCA9IGdlby5vcmlnaW4ub2Zmc2V0LmxlZnQgKyBnZW8ub3JpZ2luLnNpemUud2lkdGg7XHJcblx0XHRcclxuXHRcdC8vIHRoZSBzcGFjZSB0aGF0IGlzIGF2YWlsYWJsZSB0byBkaXNwbGF5IHRoZSB0b29sdGlwIHJlbGF0aXZlbHkgdG8gdGhlIGRvY3VtZW50XHJcblx0XHRnZW8uYXZhaWxhYmxlLmRvY3VtZW50ID0ge1xyXG5cdFx0XHRib3R0b206IHtcclxuXHRcdFx0XHRoZWlnaHQ6IGdlby5kb2N1bWVudC5zaXplLmhlaWdodCAtIGdlby5vcmlnaW4ub2Zmc2V0LmJvdHRvbSxcclxuXHRcdFx0XHR3aWR0aDogZ2VvLmRvY3VtZW50LnNpemUud2lkdGhcclxuXHRcdFx0fSxcclxuXHRcdFx0bGVmdDoge1xyXG5cdFx0XHRcdGhlaWdodDogZ2VvLmRvY3VtZW50LnNpemUuaGVpZ2h0LFxyXG5cdFx0XHRcdHdpZHRoOiBnZW8ub3JpZ2luLm9mZnNldC5sZWZ0XHJcblx0XHRcdH0sXHJcblx0XHRcdHJpZ2h0OiB7XHJcblx0XHRcdFx0aGVpZ2h0OiBnZW8uZG9jdW1lbnQuc2l6ZS5oZWlnaHQsXHJcblx0XHRcdFx0d2lkdGg6IGdlby5kb2N1bWVudC5zaXplLndpZHRoIC0gZ2VvLm9yaWdpbi5vZmZzZXQucmlnaHRcclxuXHRcdFx0fSxcclxuXHRcdFx0dG9wOiB7XHJcblx0XHRcdFx0aGVpZ2h0OiBnZW8ub3JpZ2luLm9mZnNldC50b3AsXHJcblx0XHRcdFx0d2lkdGg6IGdlby5kb2N1bWVudC5zaXplLndpZHRoXHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRcclxuXHRcdC8vIHRoZSBzcGFjZSB0aGF0IGlzIGF2YWlsYWJsZSB0byBkaXNwbGF5IHRoZSB0b29sdGlwIHJlbGF0aXZlbHkgdG8gdGhlIHZpZXdwb3J0XHJcblx0XHQvLyAodGhlIHJlc3VsdGluZyB2YWx1ZXMgbWF5IGJlIG5lZ2F0aXZlIGlmIHRoZSBvcmlnaW4gb3ZlcmZsb3dzIHRoZSB2aWV3cG9ydClcclxuXHRcdGdlby5hdmFpbGFibGUud2luZG93ID0ge1xyXG5cdFx0XHRib3R0b206IHtcclxuXHRcdFx0XHQvLyB0aGUgaW5uZXIgbWF4IGlzIGhlcmUgdG8gbWFrZSBzdXJlIHRoZSBhdmFpbGFibGUgaGVpZ2h0IGlzIG5vIGJpZ2dlclxyXG5cdFx0XHRcdC8vIHRoYW4gdGhlIHZpZXdwb3J0IGhlaWdodCAod2hlbiB0aGUgb3JpZ2luIGlzIG9mZiBzY3JlZW4gYXQgdGhlIHRvcCkuXHJcblx0XHRcdFx0Ly8gVGhlIG91dGVyIG1heCBqdXN0IG1ha2VzIHN1cmUgdGhhdCB0aGUgaGVpZ2h0IGlzIG5vdCBuZWdhdGl2ZSAod2hlblxyXG5cdFx0XHRcdC8vIHRoZSBvcmlnaW4gb3ZlcmZsb3dzIGF0IHRoZSBib3R0b20pLlxyXG5cdFx0XHRcdGhlaWdodDogTWF0aC5tYXgoZ2VvLndpbmRvdy5zaXplLmhlaWdodCAtIE1hdGgubWF4KGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSwgMCksIDApLFxyXG5cdFx0XHRcdHdpZHRoOiBnZW8ud2luZG93LnNpemUud2lkdGhcclxuXHRcdFx0fSxcclxuXHRcdFx0bGVmdDoge1xyXG5cdFx0XHRcdGhlaWdodDogZ2VvLndpbmRvdy5zaXplLmhlaWdodCxcclxuXHRcdFx0XHR3aWR0aDogTWF0aC5tYXgoZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCwgMClcclxuXHRcdFx0fSxcclxuXHRcdFx0cmlnaHQ6IHtcclxuXHRcdFx0XHRoZWlnaHQ6IGdlby53aW5kb3cuc2l6ZS5oZWlnaHQsXHJcblx0XHRcdFx0d2lkdGg6IE1hdGgubWF4KGdlby53aW5kb3cuc2l6ZS53aWR0aCAtIE1hdGgubWF4KGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0LCAwKSwgMClcclxuXHRcdFx0fSxcclxuXHRcdFx0dG9wOiB7XHJcblx0XHRcdFx0aGVpZ2h0OiBNYXRoLm1heChnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AsIDApLFxyXG5cdFx0XHRcdHdpZHRoOiBnZW8ud2luZG93LnNpemUud2lkdGhcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0d2hpbGUgKCRwYXJlbnRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9ICdodG1sJykge1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCRwYXJlbnQuY3NzKCdwb3NpdGlvbicpID09ICdmaXhlZCcpIHtcclxuXHRcdFx0XHRnZW8ub3JpZ2luLmZpeGVkTGluZWFnZSA9IHRydWU7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdCRwYXJlbnQgPSAkcGFyZW50LnBhcmVudCgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gZ2VvO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogU29tZSBvcHRpb25zIG1heSBuZWVkIHRvIGJlIGZvcm1hdGVkIGJlZm9yZSBiZWluZyB1c2VkXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX29wdGlvbnNGb3JtYXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHRpZiAodHlwZW9mIHRoaXMuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uID09ICdudW1iZXInKSB7XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uID0gW3RoaXMuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uLCB0aGlzLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbl07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0eXBlb2YgdGhpcy5fX29wdGlvbnMuZGVsYXkgPT0gJ251bWJlcicpIHtcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMuZGVsYXkgPSBbdGhpcy5fX29wdGlvbnMuZGVsYXksIHRoaXMuX19vcHRpb25zLmRlbGF5XTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9fb3B0aW9ucy5kZWxheVRvdWNoID09ICdudW1iZXInKSB7XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLmRlbGF5VG91Y2ggPSBbdGhpcy5fX29wdGlvbnMuZGVsYXlUb3VjaCwgdGhpcy5fX29wdGlvbnMuZGVsYXlUb3VjaF07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0eXBlb2YgdGhpcy5fX29wdGlvbnMudGhlbWUgPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMudGhlbWUgPSBbdGhpcy5fX29wdGlvbnMudGhlbWVdO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBkZXRlcm1pbmUgdGhlIGZ1dHVyZSBwYXJlbnRcclxuXHRcdGlmICh0aGlzLl9fb3B0aW9ucy5wYXJlbnQgPT09IG51bGwpIHtcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMucGFyZW50ID0gJChlbnYud2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAodHlwZW9mIHRoaXMuX19vcHRpb25zLnBhcmVudCA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy5wYXJlbnQgPSAkKHRoaXMuX19vcHRpb25zLnBhcmVudCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0aGlzLl9fb3B0aW9ucy50cmlnZ2VyID09ICdob3ZlcicpIHtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLnRyaWdnZXJPcGVuID0ge1xyXG5cdFx0XHRcdG1vdXNlZW50ZXI6IHRydWUsXHJcblx0XHRcdFx0dG91Y2hzdGFydDogdHJ1ZVxyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMudHJpZ2dlckNsb3NlID0ge1xyXG5cdFx0XHRcdG1vdXNlbGVhdmU6IHRydWUsXHJcblx0XHRcdFx0b3JpZ2luQ2xpY2s6IHRydWUsXHJcblx0XHRcdFx0dG91Y2hsZWF2ZTogdHJ1ZVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAodGhpcy5fX29wdGlvbnMudHJpZ2dlciA9PSAnY2xpY2snKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy50cmlnZ2VyT3BlbiA9IHtcclxuXHRcdFx0XHRjbGljazogdHJ1ZSxcclxuXHRcdFx0XHR0YXA6IHRydWVcclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLnRyaWdnZXJDbG9zZSA9IHtcclxuXHRcdFx0XHRjbGljazogdHJ1ZSxcclxuXHRcdFx0XHR0YXA6IHRydWVcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gZm9yIHRoZSBwbHVnaW5zXHJcblx0XHR0aGlzLl90cmlnZ2VyKCdvcHRpb25zJyk7XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogU2NoZWR1bGVzIG9yIGNhbmNlbHMgdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRhc2tcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19wcmVwYXJlR0M6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdC8vIGluIGNhc2UgdGhlIHNlbGZEZXN0cnVjdGlvbiBvcHRpb24gaGFzIGJlZW4gY2hhbmdlZCBieSBhIG1ldGhvZCBjYWxsXHJcblx0XHRpZiAoc2VsZi5fX29wdGlvbnMuc2VsZkRlc3RydWN0aW9uKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyB0aGUgR0MgdGFza1xyXG5cdFx0XHRzZWxmLl9fZ2FyYmFnZUNvbGxlY3RvciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBmb3JnZXQgdGhlIG9sZCBldmVudHNcclxuXHRcdFx0XHRzZWxmLl9fdG91Y2hFdmVudHMgPSAkLmdyZXAoc2VsZi5fX3RvdWNoRXZlbnRzLCBmdW5jdGlvbihldmVudCwgaSkge1xyXG5cdFx0XHRcdFx0Ly8gMSBtaW51dGVcclxuXHRcdFx0XHRcdHJldHVybiBub3cgLSBldmVudC50aW1lID4gNjAwMDA7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gYXV0by1kZXN0cnVjdCBpZiB0aGUgb3JpZ2luIGlzIGdvbmVcclxuXHRcdFx0XHRpZiAoIWJvZHlDb250YWlucyhzZWxmLl8kb3JpZ2luKSkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdHNlbGYuZGVzdHJveSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCAyMDAwMCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y2xlYXJJbnRlcnZhbChzZWxmLl9fZ2FyYmFnZUNvbGxlY3Rvcik7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogU2V0cyBsaXN0ZW5lcnMgb24gdGhlIG9yaWdpbiBpZiB0aGUgb3BlbiB0cmlnZ2VycyByZXF1aXJlIHRoZW0uXHJcblx0ICogVW5saWtlIHRoZSBsaXN0ZW5lcnMgc2V0IGF0IG9wZW5pbmcgdGltZSwgdGhlc2Ugb25lc1xyXG5cdCAqIHJlbWFpbiBldmVuIHdoZW4gdGhlIHRvb2x0aXAgaXMgY2xvc2VkLiBJdCBoYXMgYmVlbiBtYWRlIGFcclxuXHQgKiBzZXBhcmF0ZSBtZXRob2Qgc28gaXQgY2FuIGJlIGNhbGxlZCB3aGVuIHRoZSB0cmlnZ2VycyBhcmVcclxuXHQgKiBjaGFuZ2VkIGluIHRoZSBvcHRpb25zLiBDbG9zaW5nIGlzIGhhbmRsZWQgaW4gX29wZW4oKVxyXG5cdCAqIGJlY2F1c2Ugb2YgdGhlIGJpbmRpbmdzIHRoYXQgbWF5IGJlIG5lZWRlZCBvbiB0aGUgdG9vbHRpcFxyXG5cdCAqIGl0c2VsZlxyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX3ByZXBhcmVPcmlnaW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdC8vIGluIGNhc2Ugd2UncmUgcmVzZXR0aW5nIHRoZSB0cmlnZ2Vyc1xyXG5cdFx0c2VsZi5fJG9yaWdpbi5vZmYoJy4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuJyk7XHJcblx0XHRcclxuXHRcdC8vIGlmIHRoZSBkZXZpY2UgaXMgdG91Y2ggY2FwYWJsZSwgZXZlbiBpZiBvbmx5IG1vdXNlIHRyaWdnZXJzXHJcblx0XHQvLyBhcmUgYXNrZWQsIHdlIG5lZWQgdG8gbGlzdGVuIHRvIHRvdWNoIGV2ZW50cyB0byBrbm93IGlmIHRoZSBtb3VzZVxyXG5cdFx0Ly8gZXZlbnRzIGFyZSBhY3R1YWxseSBlbXVsYXRlZCAoc28gd2UgY2FuIGlnbm9yZSB0aGVtKVxyXG5cdFx0aWYgKGVudi5oYXNUb3VjaENhcGFiaWxpdHkpIHtcclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuXyRvcmlnaW4ub24oXHJcblx0XHRcdFx0J3RvdWNoc3RhcnQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbiAnICtcclxuXHRcdFx0XHQndG91Y2hlbmQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbiAnICtcclxuXHRcdFx0XHQndG91Y2hjYW5jZWwuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbicsXHJcblx0XHRcdFx0ZnVuY3Rpb24oZXZlbnQpe1xyXG5cdFx0XHRcdFx0c2VsZi5fdG91Y2hSZWNvcmRFdmVudChldmVudCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBtb3VzZSBjbGljayBhbmQgdG91Y2ggdGFwIHdvcmsgdGhlIHNhbWUgd2F5XHJcblx0XHRpZiAoXHRzZWxmLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi5jbGlja1xyXG5cdFx0XHR8fFx0KHNlbGYuX19vcHRpb25zLnRyaWdnZXJPcGVuLnRhcCAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KVxyXG5cdFx0KSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZXZlbnROYW1lcyA9ICcnO1xyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlck9wZW4uY2xpY2spIHtcclxuXHRcdFx0XHRldmVudE5hbWVzICs9ICdjbGljay4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuICc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJPcGVuLnRhcCAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KSB7XHJcblx0XHRcdFx0ZXZlbnROYW1lcyArPSAndG91Y2hlbmQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3Blbic7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuXyRvcmlnaW4ub24oZXZlbnROYW1lcywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRpZiAoc2VsZi5fdG91Y2hJc01lYW5pbmdmdWxFdmVudChldmVudCkpIHtcclxuXHRcdFx0XHRcdHNlbGYuX29wZW4oZXZlbnQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIG1vdXNlZW50ZXIgYW5kIHRvdWNoIHN0YXJ0IHdvcmsgdGhlIHNhbWUgd2F5XHJcblx0XHRpZiAoXHRzZWxmLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi5tb3VzZWVudGVyXHJcblx0XHRcdHx8XHQoc2VsZi5fX29wdGlvbnMudHJpZ2dlck9wZW4udG91Y2hzdGFydCAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KVxyXG5cdFx0KSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZXZlbnROYW1lcyA9ICcnO1xyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlck9wZW4ubW91c2VlbnRlcikge1xyXG5cdFx0XHRcdGV2ZW50TmFtZXMgKz0gJ21vdXNlZW50ZXIuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbiAnO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi50b3VjaHN0YXJ0ICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpIHtcclxuXHRcdFx0XHRldmVudE5hbWVzICs9ICd0b3VjaHN0YXJ0LicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4nO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl8kb3JpZ2luLm9uKGV2ZW50TmFtZXMsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0aWYgKFx0c2VsZi5fdG91Y2hJc1RvdWNoRXZlbnQoZXZlbnQpXHJcblx0XHRcdFx0XHR8fFx0IXNlbGYuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGV2ZW50KVxyXG5cdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0c2VsZi5fX3BvaW50ZXJJc092ZXJPcmlnaW4gPSB0cnVlO1xyXG5cdFx0XHRcdFx0c2VsZi5fb3BlblNob3J0bHkoZXZlbnQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIGluZm8gZm9yIHRoZSBtb3VzZWxlYXZlL3RvdWNobGVhdmUgY2xvc2UgdHJpZ2dlcnMgd2hlbiB0aGV5IHVzZSBhIGRlbGF5XHJcblx0XHRpZiAoXHRzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UubW91c2VsZWF2ZVxyXG5cdFx0XHR8fFx0KHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50b3VjaGxlYXZlICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpXHJcblx0XHQpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBldmVudE5hbWVzID0gJyc7XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UubW91c2VsZWF2ZSkge1xyXG5cdFx0XHRcdGV2ZW50TmFtZXMgKz0gJ21vdXNlbGVhdmUuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbiAnO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudG91Y2hsZWF2ZSAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KSB7XHJcblx0XHRcdFx0ZXZlbnROYW1lcyArPSAndG91Y2hlbmQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbiB0b3VjaGNhbmNlbC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuJztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fJG9yaWdpbi5vbihldmVudE5hbWVzLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChzZWxmLl90b3VjaElzTWVhbmluZ2Z1bEV2ZW50KGV2ZW50KSkge1xyXG5cdFx0XHRcdFx0c2VsZi5fX3BvaW50ZXJJc092ZXJPcmlnaW4gPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIERvIHRoZSB0aGluZ3MgdGhhdCBuZWVkIHRvIGJlIGRvbmUgb25seSBvbmNlIGFmdGVyIHRoZSB0b29sdGlwXHJcblx0ICogSFRNTCBlbGVtZW50IGl0IGhhcyBiZWVuIGNyZWF0ZWQuIEl0IGhhcyBiZWVuIG1hZGUgYSBzZXBhcmF0ZVxyXG5cdCAqIG1ldGhvZCBzbyBpdCBjYW4gYmUgY2FsbGVkIHdoZW4gb3B0aW9ucyBhcmUgY2hhbmdlZC4gUmVtZW1iZXJcclxuXHQgKiB0aGF0IHRoZSB0b29sdGlwIG1heSBhY3R1YWxseSBleGlzdCBpbiB0aGUgRE9NIGJlZm9yZSBpdCBpc1xyXG5cdCAqIG9wZW5lZCwgYW5kIHByZXNlbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gY2xvc2VkOiBpdCdzIHRoZSBkaXNwbGF5XHJcblx0ICogcGx1Z2luIHRoYXQgdGFrZXMgY2FyZSBvZiBoYW5kbGluZyBpdC5cclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fcHJlcGFyZVRvb2x0aXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHAgPSBzZWxmLl9fb3B0aW9ucy5pbnRlcmFjdGl2ZSA/ICdhdXRvJyA6ICcnO1xyXG5cdFx0XHJcblx0XHQvLyB0aGlzIHdpbGwgYmUgdXNlZnVsIHRvIGtub3cgcXVpY2tseSBpZiB0aGUgdG9vbHRpcCBpcyBpblxyXG5cdFx0Ly8gdGhlIERPTSBvciBub3QgXHJcblx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHQuYXR0cignaWQnLCBzZWxmLl9fbmFtZXNwYWNlKVxyXG5cdFx0XHQuY3NzKHtcclxuXHRcdFx0XHQvLyBwb2ludGVyIGV2ZW50c1xyXG5cdFx0XHRcdCdwb2ludGVyLWV2ZW50cyc6IHAsXHJcblx0XHRcdFx0ekluZGV4OiBzZWxmLl9fb3B0aW9ucy56SW5kZXhcclxuXHRcdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIHRoZW1lc1xyXG5cdFx0Ly8gcmVtb3ZlIHRoZSBvbGQgb25lcyBhbmQgYWRkIHRoZSBuZXcgb25lc1xyXG5cdFx0JC5lYWNoKHNlbGYuX19wcmV2aW91c1RoZW1lcywgZnVuY3Rpb24oaSwgdGhlbWUpIHtcclxuXHRcdFx0c2VsZi5fJHRvb2x0aXAucmVtb3ZlQ2xhc3ModGhlbWUpO1xyXG5cdFx0fSk7XHJcblx0XHQkLmVhY2goc2VsZi5fX29wdGlvbnMudGhlbWUsIGZ1bmN0aW9uKGksIHRoZW1lKSB7XHJcblx0XHRcdHNlbGYuXyR0b29sdGlwLmFkZENsYXNzKHRoZW1lKTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRzZWxmLl9fcHJldmlvdXNUaGVtZXMgPSAkLm1lcmdlKFtdLCBzZWxmLl9fb3B0aW9ucy50aGVtZSk7XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB0aGUgc2Nyb2xsIG9uIGFueSBvZiB0aGUgcGFyZW50cyBvZiB0aGUgb3JpZ2luICh3aGVuIHRoZVxyXG5cdCAqIHRvb2x0aXAgaXMgb3BlbilcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19zY3JvbGxIYW5kbGVyOiBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2Uuc2Nyb2xsKSB7XHJcblx0XHRcdHNlbGYuX2Nsb3NlKGV2ZW50KTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlIG9yaWdpbiBvciB0b29sdGlwIGhhdmUgYmVlbiByZW1vdmVkOiBkbyBub3RoaW5nLCB0aGUgdHJhY2tlciB3aWxsXHJcblx0XHRcdC8vIHRha2UgY2FyZSBvZiBpdCBsYXRlclxyXG5cdFx0XHRpZiAoYm9keUNvbnRhaW5zKHNlbGYuXyRvcmlnaW4pICYmIGJvZHlDb250YWlucyhzZWxmLl8kdG9vbHRpcCkpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgZ2VvID0gbnVsbDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBpZiB0aGUgc2Nyb2xsIGhhcHBlbmVkIG9uIHRoZSB3aW5kb3dcclxuXHRcdFx0XHRpZiAoZXZlbnQudGFyZ2V0ID09PSBlbnYud2luZG93LmRvY3VtZW50KSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGlmIHRoZSBvcmlnaW4gaGFzIGEgZml4ZWQgbGluZWFnZSwgd2luZG93IHNjcm9sbCB3aWxsIGhhdmUgbm9cclxuXHRcdFx0XHRcdC8vIGVmZmVjdCBvbiBpdHMgcG9zaXRpb24gbm9yIG9uIHRoZSBwb3NpdGlvbiBvZiB0aGUgdG9vbHRpcFxyXG5cdFx0XHRcdFx0aWYgKCFzZWxmLl9fR2VvbWV0cnkub3JpZ2luLmZpeGVkTGluZWFnZSkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyB1bmxlc3MgcmVwb3NpdGlvbk9uU2Nyb2xsIGlzIHRydWVcclxuXHRcdFx0XHRcdFx0Ly8gYmVjYXVzZSB0aGUgdG9vbHRpcCB3aWxsIGFscmVhZHkgaGF2ZSBtb3ZlZCB3aXRoIHRoZSB3aW5kb3dcclxuXHRcdFx0XHRcdFx0Ly8gKGFuZCBvZiBjb3Vyc2Ugd2l0aCB0aGUgb3JpZ2luKVxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMucmVwb3NpdGlvbk9uU2Nyb2xsKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5yZXBvc2l0aW9uKGV2ZW50KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBpZiB0aGUgc2Nyb2xsIGhhcHBlbmVkIG9uIGFub3RoZXIgcGFyZW50IG9mIHRoZSB0b29sdGlwLCBpdCBtZWFuc1xyXG5cdFx0XHRcdC8vIHRoYXQgaXQncyBpbiBhIHNjcm9sbGFibGUgYXJlYSBhbmQgbm93IG5lZWRzIHRvIGhhdmUgaXRzIHBvc2l0aW9uXHJcblx0XHRcdFx0Ly8gYWRqdXN0ZWQgb3IgcmVjb21wdXRlZCwgZGVwZW5kaW5nIG9udCB0aGUgcmVwb3NpdGlvbk9uU2Nyb2xsXHJcblx0XHRcdFx0Ly8gb3B0aW9uLiBBbHNvLCBpZiB0aGUgb3JpZ2luIGlzIHBhcnRseSBoaWRkZW4gZHVlIHRvIGEgcGFyZW50IHRoYXRcclxuXHRcdFx0XHQvLyBoaWRlcyBpdHMgb3ZlcmZsb3csIHdlJ2xsIGp1c3QgaGlkZSAobm90IGNsb3NlKSB0aGUgdG9vbHRpcC5cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Z2VvID0gc2VsZi5fX2dlb21ldHJ5KCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBvdmVyZmxvd3MgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gYSBmaXhlZCBwb3NpdGlvbiBvcmlnaW4gaXMgbm90IGFmZmVjdGVkIGJ5IHRoZSBvdmVyZmxvdyBoaWRpbmdcclxuXHRcdFx0XHRcdC8vIG9mIGEgcGFyZW50XHJcblx0XHRcdFx0XHRpZiAoc2VsZi5fJG9yaWdpbi5jc3MoJ3Bvc2l0aW9uJykgIT0gJ2ZpeGVkJykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fXyRvcmlnaW5QYXJlbnRzLmVhY2goZnVuY3Rpb24oaSwgZWwpIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHR2YXIgJGVsID0gJChlbCksXHJcblx0XHRcdFx0XHRcdFx0XHRvdmVyZmxvd1ggPSAkZWwuY3NzKCdvdmVyZmxvdy14JyksXHJcblx0XHRcdFx0XHRcdFx0XHRvdmVyZmxvd1kgPSAkZWwuY3NzKCdvdmVyZmxvdy15Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKG92ZXJmbG93WCAhPSAndmlzaWJsZScgfHwgb3ZlcmZsb3dZICE9ICd2aXNpYmxlJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgYmNyID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChvdmVyZmxvd1ggIT0gJ3Zpc2libGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoXHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0IDwgYmNyLmxlZnRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR8fFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgPiBiY3IucmlnaHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0b3ZlcmZsb3dzID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG92ZXJmbG93WSAhPSAndmlzaWJsZScpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCA8IGJjci50b3BcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR8fFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tID4gYmNyLmJvdHRvbVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRvdmVyZmxvd3MgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBubyBuZWVkIHRvIGdvIGZ1cnRoZXIgaWYgZml4ZWQsIGZvciB0aGUgc2FtZSByZWFzb24gYXMgYWJvdmVcclxuXHRcdFx0XHRcdFx0XHRpZiAoJGVsLmNzcygncG9zaXRpb24nKSA9PSAnZml4ZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKG92ZXJmbG93cykge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmNzcygndmlzaWJpbGl0eScsICd2aXNpYmxlJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyByZXBvc2l0aW9uXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5yZXBvc2l0aW9uT25TY3JvbGwpIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLnJlcG9zaXRpb24oZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIG9yIGp1c3QgYWRqdXN0IG9mZnNldFxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyB3ZSBoYXZlIHRvIHVzZSBvZmZzZXQgYW5kIG5vdCB3aW5kb3dPZmZzZXQgYmVjYXVzZSB0aGlzIHdheSxcclxuXHRcdFx0XHRcdFx0XHQvLyBvbmx5IHRoZSBzY3JvbGwgZGlzdGFuY2Ugb2YgdGhlIHNjcm9sbGFibGUgYXJlYXMgYXJlIHRha2VuIGludG9cclxuXHRcdFx0XHRcdFx0XHQvLyBhY2NvdW50ICh0aGUgc2Nyb2xsdG9wIHZhbHVlIG9mIHRoZSBtYWluIHdpbmRvdyBtdXN0IGJlXHJcblx0XHRcdFx0XHRcdFx0Ly8gaWdub3JlZCBzaW5jZSB0aGUgdG9vbHRpcCBhbHJlYWR5IG1vdmVzIHdpdGggaXQpXHJcblx0XHRcdFx0XHRcdFx0dmFyIG9mZnNldExlZnQgPSBnZW8ub3JpZ2luLm9mZnNldC5sZWZ0IC0gc2VsZi5fX0dlb21ldHJ5Lm9yaWdpbi5vZmZzZXQubGVmdCxcclxuXHRcdFx0XHRcdFx0XHRcdG9mZnNldFRvcCA9IGdlby5vcmlnaW4ub2Zmc2V0LnRvcCAtIHNlbGYuX19HZW9tZXRyeS5vcmlnaW4ub2Zmc2V0LnRvcDtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBhZGQgdGhlIG9mZnNldCB0byB0aGUgcG9zaXRpb24gaW5pdGlhbGx5IGNvbXB1dGVkIGJ5IHRoZSBkaXNwbGF5IHBsdWdpblxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmNzcyh7XHJcblx0XHRcdFx0XHRcdFx0XHRsZWZ0OiBzZWxmLl9fbGFzdFBvc2l0aW9uLmNvb3JkLmxlZnQgKyBvZmZzZXRMZWZ0LFxyXG5cdFx0XHRcdFx0XHRcdFx0dG9wOiBzZWxmLl9fbGFzdFBvc2l0aW9uLmNvb3JkLnRvcCArIG9mZnNldFRvcFxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Njcm9sbCcsXHJcblx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRnZW86IGdlb1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQ2hhbmdlcyB0aGUgc3RhdGUgb2YgdGhlIHRvb2x0aXBcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0ZVxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19zdGF0ZVNldDogZnVuY3Rpb24oc3RhdGUpIHtcclxuXHRcdFxyXG5cdFx0dGhpcy5fX3N0YXRlID0gc3RhdGU7XHJcblx0XHRcclxuXHRcdHRoaXMuX3RyaWdnZXIoe1xyXG5cdFx0XHR0eXBlOiAnc3RhdGUnLFxyXG5cdFx0XHRzdGF0ZTogc3RhdGVcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIENsZWFyIGFwcGVhcmFuY2UgdGltZW91dHNcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X190aW1lb3V0c0NsZWFyOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0Ly8gdGhlcmUgaXMgb25seSBvbmUgcG9zc2libGUgb3BlbiB0aW1lb3V0OiB0aGUgZGVsYXllZCBvcGVuaW5nXHJcblx0XHQvLyB3aGVuIHRoZSBtb3VzZWVudGVyL3RvdWNoc3RhcnQgb3BlbiB0cmlnZ2VycyBhcmUgdXNlZFxyXG5cdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX190aW1lb3V0cy5vcGVuKTtcclxuXHRcdHRoaXMuX190aW1lb3V0cy5vcGVuID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0Ly8gLi4uIGJ1dCBzZXZlcmFsIGNsb3NlIHRpbWVvdXRzOiB0aGUgZGVsYXllZCBjbG9zaW5nIHdoZW4gdGhlXHJcblx0XHQvLyBtb3VzZWxlYXZlIGNsb3NlIHRyaWdnZXIgaXMgdXNlZCBhbmQgdGhlIHRpbWVyIG9wdGlvblxyXG5cdFx0JC5lYWNoKHRoaXMuX190aW1lb3V0cy5jbG9zZSwgZnVuY3Rpb24oaSwgdGltZW91dCkge1xyXG5cdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuX190aW1lb3V0cy5jbG9zZSA9IFtdO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFN0YXJ0IHRoZSB0cmFja2VyIHRoYXQgd2lsbCBtYWtlIGNoZWNrcyBhdCByZWd1bGFyIGludGVydmFsc1xyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X190cmFja2VyU3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdCRjb250ZW50ID0gc2VsZi5fJHRvb2x0aXAuZmluZCgnLnRvb2x0aXBzdGVyLWNvbnRlbnQnKTtcclxuXHRcdFxyXG5cdFx0Ly8gZ2V0IHRoZSBpbml0aWFsIGNvbnRlbnQgc2l6ZVxyXG5cdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyYWNrVG9vbHRpcCkge1xyXG5cdFx0XHRzZWxmLl9fY29udGVudEJjciA9ICRjb250ZW50WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRzZWxmLl9fdHJhY2tlciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlIG9yaWdpbiBvciB0b29sdGlwIGVsZW1lbnRzIGhhdmUgYmVlbiByZW1vdmVkLlxyXG5cdFx0XHQvLyBOb3RlOiB3ZSBjb3VsZCBkZXN0cm95IHRoZSBpbnN0YW5jZSBub3cgaWYgdGhlIG9yaWdpbiBoYXNcclxuXHRcdFx0Ly8gYmVlbiByZW1vdmVkIGJ1dCB3ZSdsbCBsZWF2ZSB0aGF0IHRhc2sgdG8gb3VyIGdhcmJhZ2UgY29sbGVjdG9yXHJcblx0XHRcdGlmICghYm9keUNvbnRhaW5zKHNlbGYuXyRvcmlnaW4pIHx8ICFib2R5Q29udGFpbnMoc2VsZi5fJHRvb2x0aXApKSB7XHJcblx0XHRcdFx0c2VsZi5fY2xvc2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpZiBldmVyeXRoaW5nIGlzIGFscmlnaHRcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gY29tcGFyZSB0aGUgZm9ybWVyIGFuZCBjdXJyZW50IHBvc2l0aW9ucyBvZiB0aGUgb3JpZ2luIHRvIHJlcG9zaXRpb25cclxuXHRcdFx0XHQvLyB0aGUgdG9vbHRpcCBpZiBuZWVkIGJlXHJcblx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyYWNrT3JpZ2luKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBnID0gc2VsZi5fX2dlb21ldHJ5KCksXHJcblx0XHRcdFx0XHRcdGlkZW50aWNhbCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBjb21wYXJlIHNpemUgZmlyc3QgKGEgY2hhbmdlIHJlcXVpcmVzIHJlcG9zaXRpb25pbmcgdG9vKVxyXG5cdFx0XHRcdFx0aWYgKGFyZUVxdWFsKGcub3JpZ2luLnNpemUsIHNlbGYuX19HZW9tZXRyeS5vcmlnaW4uc2l6ZSkpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgYSBmaXhlZCBsaW5lYWdlIChzZWUgX19nZW9tZXRyeSgpKSwgd2UgdHJhY2sgdGhlXHJcblx0XHRcdFx0XHRcdC8vIHRvcCBhbmQgbGVmdCBwcm9wZXJ0aWVzIChyZWxhdGl2ZSB0byB3aW5kb3cpXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fR2VvbWV0cnkub3JpZ2luLmZpeGVkTGluZWFnZSkge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChhcmVFcXVhbChnLm9yaWdpbi53aW5kb3dPZmZzZXQsIHNlbGYuX19HZW9tZXRyeS5vcmlnaW4ud2luZG93T2Zmc2V0KSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWRlbnRpY2FsID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlLCB0cmFjayB0b3RhbCBvZmZzZXQgKHJlbGF0aXZlIHRvIGRvY3VtZW50KVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoYXJlRXF1YWwoZy5vcmlnaW4ub2Zmc2V0LCBzZWxmLl9fR2VvbWV0cnkub3JpZ2luLm9mZnNldCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGlkZW50aWNhbCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmICghaWRlbnRpY2FsKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBjbG9zZSB0aGUgdG9vbHRpcCB3aGVuIHVzaW5nIHRoZSBtb3VzZWxlYXZlIGNsb3NlIHRyaWdnZXJcclxuXHRcdFx0XHRcdFx0Ly8gKHNlZSBodHRwczovL2dpdGh1Yi5jb20vaWFtY2VlZ2UvdG9vbHRpcHN0ZXIvcHVsbC8yNTMpXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UubW91c2VsZWF2ZSkge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX2Nsb3NlKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5yZXBvc2l0aW9uKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyYWNrVG9vbHRpcCkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgY3VycmVudEJjciA9ICRjb250ZW50WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoXHRjdXJyZW50QmNyLmhlaWdodCAhPT0gc2VsZi5fX2NvbnRlbnRCY3IuaGVpZ2h0XHJcblx0XHRcdFx0XHRcdHx8XHRjdXJyZW50QmNyLndpZHRoICE9PSBzZWxmLl9fY29udGVudEJjci53aWR0aFxyXG5cdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdHNlbGYucmVwb3NpdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9fY29udGVudEJjciA9IGN1cnJlbnRCY3I7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LCBzZWxmLl9fb3B0aW9ucy50cmFja2VySW50ZXJ2YWwpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIENsb3NlcyB0aGUgdG9vbHRpcCAoYWZ0ZXIgdGhlIGNsb3NpbmcgZGVsYXkpXHJcblx0ICogXHJcblx0ICogQHBhcmFtIGV2ZW50XHJcblx0ICogQHBhcmFtIGNhbGxiYWNrXHJcblx0ICogQHBhcmFtIGZvcmNlIFNldCB0byB0cnVlIHRvIG92ZXJyaWRlIGEgcG90ZW50aWFsIHJlZnVzYWwgb2YgdGhlIHVzZXIncyBmdW5jdGlvblxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfY2xvc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYWxsYmFjaywgZm9yY2UpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRvayA9IHRydWU7XHJcblx0XHRcclxuXHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHR0eXBlOiAnY2xvc2UnLFxyXG5cdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdG9rID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBhIGRlc3Ryb3lpbmcgdG9vbHRpcCAoZm9yY2UgPT0gdHJ1ZSkgbWF5IG5vdCByZWZ1c2UgdG8gY2xvc2VcclxuXHRcdGlmIChvayB8fCBmb3JjZSkge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gc2F2ZSB0aGUgbWV0aG9kIGN1c3RvbSBjYWxsYmFjayBhbmQgY2FuY2VsIGFueSBvcGVuIG1ldGhvZCBjdXN0b20gY2FsbGJhY2tzXHJcblx0XHRcdGlmIChjYWxsYmFjaykgc2VsZi5fX2NhbGxiYWNrcy5jbG9zZS5wdXNoKGNhbGxiYWNrKTtcclxuXHRcdFx0c2VsZi5fX2NhbGxiYWNrcy5vcGVuID0gW107XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBjbGVhciBvcGVuL2Nsb3NlIHRpbWVvdXRzXHJcblx0XHRcdHNlbGYuX190aW1lb3V0c0NsZWFyKCk7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZmluaXNoQ2FsbGJhY2tzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gdHJpZ2dlciBhbnkgY2xvc2UgbWV0aG9kIGN1c3RvbSBjYWxsYmFja3MgYW5kIHJlc2V0IHRoZW1cclxuXHRcdFx0XHQkLmVhY2goc2VsZi5fX2NhbGxiYWNrcy5jbG9zZSwgZnVuY3Rpb24oaSxjKSB7XHJcblx0XHRcdFx0XHRjLmNhbGwoc2VsZiwgc2VsZiwge1xyXG5cdFx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRcdG9yaWdpbjogc2VsZi5fJG9yaWdpblswXVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2VsZi5fX2NhbGxiYWNrcy5jbG9zZSA9IFtdO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBuZWNlc3NhcnkgPSB0cnVlLFxyXG5cdFx0XHRcdFx0ZCA9IG5ldyBEYXRlKCksXHJcblx0XHRcdFx0XHRub3cgPSBkLmdldFRpbWUoKSxcclxuXHRcdFx0XHRcdG5ld0Nsb3NpbmdUaW1lID0gbm93ICsgc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gdGhlIHRvb2x0aXAgbWF5IGFscmVhZHkgYWxyZWFkeSBiZSBkaXNhcHBlYXJpbmcsIGJ1dCBpZiBhIG5ld1xyXG5cdFx0XHRcdC8vIGNhbGwgdG8gY2xvc2UoKSBpcyBtYWRlIGFmdGVyIHRoZSBhbmltYXRpb25EdXJhdGlvbiB3YXMgY2hhbmdlZFxyXG5cdFx0XHRcdC8vIHRvIDAgKGZvciBleGFtcGxlKSwgd2Ugb3VnaHQgdG8gYWN0dWFsbHkgY2xvc2UgaXQgc29vbmVyIHRoYW5cclxuXHRcdFx0XHQvLyBwcmV2aW91c2x5IHNjaGVkdWxlZC4gSW4gdGhhdCBjYXNlIGl0IHNob3VsZCBiZSBub3RlZCB0aGF0IHRoZVxyXG5cdFx0XHRcdC8vIGJyb3dzZXIgd2lsbCBub3QgYWRhcHQgdGhlIGFuaW1hdGlvbiBkdXJhdGlvbiB0byB0aGUgbmV3XHJcblx0XHRcdFx0Ly8gYW5pbWF0aW9uRHVyYXRpb24gdGhhdCB3YXMgc2V0IGFmdGVyIHRoZSBzdGFydCBvZiB0aGUgY2xvc2luZ1xyXG5cdFx0XHRcdC8vIGFuaW1hdGlvbi5cclxuXHRcdFx0XHQvLyBOb3RlOiB0aGUgc2FtZSB0aGluZyBjb3VsZCBiZSBjb25zaWRlcmVkIGF0IG9wZW5pbmcsIGJ1dCBpcyBub3RcclxuXHRcdFx0XHQvLyByZWFsbHkgdXNlZnVsIHNpbmNlIHRoZSB0b29sdGlwIGlzIGFjdHVhbGx5IG9wZW5lZCBpbW1lZGlhdGVseVxyXG5cdFx0XHRcdC8vIHVwb24gYSBjYWxsIHRvIF9vcGVuKCkuIFNpbmNlIGl0IHdvdWxkIG5vdCBtYWtlIHRoZSBvcGVuaW5nXHJcblx0XHRcdFx0Ly8gYW5pbWF0aW9uIGZpbmlzaCBzb29uZXIsIGl0cyBzb2xlIGltcGFjdCB3b3VsZCBiZSB0byB0cmlnZ2VyIHRoZVxyXG5cdFx0XHRcdC8vIHN0YXRlIGV2ZW50IGFuZCB0aGUgb3BlbiBjYWxsYmFja3Mgc29vbmVyIHRoYW4gdGhlIGFjdHVhbCBlbmQgb2ZcclxuXHRcdFx0XHQvLyB0aGUgb3BlbmluZyBhbmltYXRpb24sIHdoaWNoIGlzIG5vdCBncmVhdC5cclxuXHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlID09ICdkaXNhcHBlYXJpbmcnKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChcdG5ld0Nsb3NpbmdUaW1lID4gc2VsZi5fX2Nsb3NpbmdUaW1lXHJcblx0XHRcdFx0XHRcdC8vIGluIGNhc2UgY2xvc2luZyBpcyBhY3R1YWxseSBvdmVyZHVlIGJlY2F1c2UgdGhlIHNjcmlwdFxyXG5cdFx0XHRcdFx0XHQvLyBleGVjdXRpb24gd2FzIHN1c3BlbmRlZC4gU2VlICM2NzlcclxuXHRcdFx0XHRcdFx0JiZcdHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdID4gMFxyXG5cdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdG5lY2Vzc2FyeSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAobmVjZXNzYXJ5KSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHNlbGYuX19jbG9zaW5nVGltZSA9IG5ld0Nsb3NpbmdUaW1lO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdkaXNhcHBlYXJpbmcnKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX19zdGF0ZVNldCgnZGlzYXBwZWFyaW5nJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBmaW5pc2ggPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHN0b3AgdGhlIHRyYWNrZXJcclxuXHRcdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChzZWxmLl9fdHJhY2tlcik7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBhIFwiYmVmb3JlQ2xvc2VcIiBvcHRpb24gaGFzIGJlZW4gYXNrZWQgc2V2ZXJhbCB0aW1lcyBidXQgd291bGRcclxuXHRcdFx0XHRcdFx0Ly8gcHJvYmFibHkgdXNlbGVzcyBzaW5jZSB0aGUgY29udGVudCBlbGVtZW50IGlzIHN0aWxsIGFjY2Vzc2libGVcclxuXHRcdFx0XHRcdFx0Ly8gdmlhIDo6Y29udGVudCgpLCBhbmQgYmVjYXVzZSBwZW9wbGUgY2FuIGFsd2F5cyB1c2UgbGlzdGVuZXJzXHJcblx0XHRcdFx0XHRcdC8vIGluc2lkZSB0aGVpciBjb250ZW50IHRvIHRyYWNrIHdoYXQncyBnb2luZyBvbi4gRm9yIHRoZSBzYWtlIG9mXHJcblx0XHRcdFx0XHRcdC8vIHNpbXBsaWNpdHksIHRoaXMgaGFzIGJlZW4gZGVuaWVkLiBCdXIgZm9yIHRoZSByYXJlIHBlb3BsZSB3aG9cclxuXHRcdFx0XHRcdFx0Ly8gcmVhbGx5IG5lZWQgdGhlIG9wdGlvbiAoZm9yIG9sZCBicm93c2VycyBvciBmb3IgdGhlIGNhc2Ugd2hlcmVcclxuXHRcdFx0XHRcdFx0Ly8gZGV0YWNoaW5nIHRoZSBjb250ZW50IGlzIGFjdHVhbGx5IGRlc3RydWN0aXZlLCBmb3IgZmlsZSBvclxyXG5cdFx0XHRcdFx0XHQvLyBwYXNzd29yZCBpbnB1dHMgZm9yIGV4YW1wbGUpLCB0aGlzIGV2ZW50IHdpbGwgZG8gdGhlIHdvcmsuXHJcblx0XHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0XHRcdHR5cGU6ICdjbG9zaW5nJyxcclxuXHRcdFx0XHRcdFx0XHRldmVudDogZXZlbnRcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyB1bmJpbmQgbGlzdGVuZXJzIHdoaWNoIGFyZSBubyBsb25nZXIgbmVlZGVkXHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdC5vZmYoJy4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScpXHJcblx0XHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci1keWluZycpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gb3JpZW50YXRpb25jaGFuZ2UsIHNjcm9sbCBhbmQgcmVzaXplIGxpc3RlbmVyc1xyXG5cdFx0XHRcdFx0XHQkKGVudi53aW5kb3cpLm9mZignLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBzY3JvbGwgbGlzdGVuZXJzXHJcblx0XHRcdFx0XHRcdHNlbGYuX18kb3JpZ2luUGFyZW50cy5lYWNoKGZ1bmN0aW9uKGksIGVsKSB7XHJcblx0XHRcdFx0XHRcdFx0JChlbCkub2ZmKCdzY3JvbGwuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdC8vIGNsZWFyIHRoZSBhcnJheSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9fJG9yaWdpblBhcmVudHMgPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0JChlbnYud2luZG93LmRvY3VtZW50LmJvZHkpLm9mZignLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl8kb3JpZ2luLm9mZignLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl9vZmYoJ2Rpc21pc3NhYmxlJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBhIHBsdWdpbiB0aGF0IHdvdWxkIGxpa2UgdG8gcmVtb3ZlIHRoZSB0b29sdGlwIGZyb20gdGhlXHJcblx0XHRcdFx0XHRcdC8vIERPTSB3aGVuIGNsb3NlZCBzaG91bGQgYmluZCBvbiB0aGlzXHJcblx0XHRcdFx0XHRcdHNlbGYuX19zdGF0ZVNldCgnY2xvc2VkJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyB0cmlnZ2VyIGV2ZW50XHJcblx0XHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0XHRcdHR5cGU6ICdhZnRlcicsXHJcblx0XHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gY2FsbCBvdXIgY29uc3RydWN0b3IgY3VzdG9tIGNhbGxiYWNrIGZ1bmN0aW9uXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5mdW5jdGlvbkFmdGVyKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX29wdGlvbnMuZnVuY3Rpb25BZnRlci5jYWxsKHNlbGYsIHNlbGYsIHtcclxuXHRcdFx0XHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdFx0XHRcdG9yaWdpbjogc2VsZi5fJG9yaWdpblswXVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBjYWxsIG91ciBtZXRob2QgY3VzdG9tIGNhbGxiYWNrcyBmdW5jdGlvbnNcclxuXHRcdFx0XHRcdFx0ZmluaXNoQ2FsbGJhY2tzKCk7XHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoZW52Lmhhc1RyYW5zaXRpb25zKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5jc3Moe1xyXG5cdFx0XHRcdFx0XHRcdCctbW96LWFuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHQnLW1zLWFuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHQnLW8tYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdCctd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHQnYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdCd0cmFuc2l0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyAnbXMnXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHQvLyBjbGVhciBib3RoIHBvdGVudGlhbCBvcGVuIGFuZCBjbG9zZSB0YXNrc1xyXG5cdFx0XHRcdFx0XHRcdC5jbGVhclF1ZXVlKClcclxuXHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLXNob3cnKVxyXG5cdFx0XHRcdFx0XHRcdC8vIGZvciB0cmFuc2l0aW9ucyBvbmx5XHJcblx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCd0b29sdGlwc3Rlci1keWluZycpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmRlbGF5KHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAucXVldWUoZmluaXNoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHQuc3RvcCgpXHJcblx0XHRcdFx0XHRcdFx0LmZhZGVPdXQoc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0sIGZpbmlzaCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGlzIGFscmVhZHkgY2xvc2VkLCB3ZSBzdGlsbCBuZWVkIHRvIHRyaWdnZXJcclxuXHRcdFx0Ly8gdGhlIG1ldGhvZCBjdXN0b20gY2FsbGJhY2tzXHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGZpbmlzaENhbGxiYWNrcygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIGludGVybmFsIHVzZSBieSBwbHVnaW5zLCBpZiBuZWVkZWRcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X29mZjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLm9mZi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBpbnRlcm5hbCB1c2UgYnkgcGx1Z2lucywgaWYgbmVlZGVkXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X29uOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUub24uYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgaW50ZXJuYWwgdXNlIGJ5IHBsdWdpbnMsIGlmIG5lZWRlZFxyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9vbmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vbmUuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBPcGVucyB0aGUgdG9vbHRpcCByaWdodCBhd2F5LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGV2ZW50XHJcblx0ICogQHBhcmFtIGNhbGxiYWNrIFdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIG9wZW5pbmcgYW5pbWF0aW9uIGlzIG92ZXJcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X29wZW46IGZ1bmN0aW9uKGV2ZW50LCBjYWxsYmFjaykge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdC8vIGlmIHRoZSBkZXN0cnVjdGlvbiBwcm9jZXNzIGhhcyBub3QgYmVndW4gYW5kIGlmIHRoaXMgd2FzIG5vdFxyXG5cdFx0Ly8gdHJpZ2dlcmVkIGJ5IGFuIHVud2FudGVkIGVtdWxhdGVkIGNsaWNrIGV2ZW50XHJcblx0XHRpZiAoIXNlbGYuX19kZXN0cm95aW5nKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBjaGVjayB0aGF0IHRoZSBvcmlnaW4gaXMgc3RpbGwgaW4gdGhlIERPTVxyXG5cdFx0XHRpZiAoXHRib2R5Q29udGFpbnMoc2VsZi5fJG9yaWdpbilcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBpcyBlbmFibGVkXHJcblx0XHRcdFx0JiZcdHNlbGYuX19lbmFibGVkXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBvayA9IHRydWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgaXMgbm90IG9wZW4geWV0LCB3ZSBuZWVkIHRvIGNhbGwgZnVuY3Rpb25CZWZvcmUuXHJcblx0XHRcdFx0Ly8gb3RoZXJ3aXNlIHdlIGNhbiBqc3QgZ28gb25cclxuXHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlID09ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIHRyaWdnZXIgYW4gZXZlbnQuIFRoZSBldmVudC5zdG9wIGZ1bmN0aW9uIGFsbG93cyB0aGUgY2FsbGJhY2tcclxuXHRcdFx0XHRcdC8vIHRvIHByZXZlbnQgdGhlIG9wZW5pbmcgb2YgdGhlIHRvb2x0aXBcclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0XHR0eXBlOiAnYmVmb3JlJyxcclxuXHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0XHRzdG9wOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRvayA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKG9rICYmIHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uQmVmb3JlKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBjYWxsIG91ciBjdXN0b20gZnVuY3Rpb24gYmVmb3JlIGNvbnRpbnVpbmdcclxuXHRcdFx0XHRcdFx0b2sgPSBzZWxmLl9fb3B0aW9ucy5mdW5jdGlvbkJlZm9yZS5jYWxsKHNlbGYsIHNlbGYsIHtcclxuXHRcdFx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRcdFx0b3JpZ2luOiBzZWxmLl8kb3JpZ2luWzBdXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAob2sgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGlmIHRoZXJlIGlzIHNvbWUgY29udGVudFxyXG5cdFx0XHRcdFx0aWYgKHNlbGYuX19Db250ZW50ICE9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBzYXZlIHRoZSBtZXRob2QgY2FsbGJhY2sgYW5kIGNhbmNlbCBjbG9zZSBtZXRob2QgY2FsbGJhY2tzXHJcblx0XHRcdFx0XHRcdGlmIChjYWxsYmFjaykge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX19jYWxsYmFja3Mub3Blbi5wdXNoKGNhbGxiYWNrKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRzZWxmLl9fY2FsbGJhY2tzLmNsb3NlID0gW107XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBnZXQgcmlkIG9mIGFueSBhcHBlYXJhbmNlIHRpbWVvdXRzXHJcblx0XHRcdFx0XHRcdHNlbGYuX190aW1lb3V0c0NsZWFyKCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2YXIgZXh0cmFUaW1lLFxyXG5cdFx0XHRcdFx0XHRcdGZpbmlzaCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdzdGFibGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX19zdGF0ZVNldCgnc3RhYmxlJyk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHRyaWdnZXIgYW55IG9wZW4gbWV0aG9kIGN1c3RvbSBjYWxsYmFja3MgYW5kIHJlc2V0IHRoZW1cclxuXHRcdFx0XHRcdFx0XHRcdCQuZWFjaChzZWxmLl9fY2FsbGJhY2tzLm9wZW4sIGZ1bmN0aW9uKGksYykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjLmNhbGwoc2VsZiwgc2VsZiwge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9yaWdpbjogc2VsZi5fJG9yaWdpblswXSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0b29sdGlwOiBzZWxmLl8kdG9vbHRpcFswXVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fY2FsbGJhY2tzLm9wZW4gPSBbXTtcclxuXHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgaXMgYWxyZWFkeSBvcGVuXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT09ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gdGhlIHRpbWVyIChpZiBhbnkpIHdpbGwgc3RhcnQgKG9yIHJlc3RhcnQpIHJpZ2h0IG5vd1xyXG5cdFx0XHRcdFx0XHRcdGV4dHJhVGltZSA9IDA7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gaWYgaXQgd2FzIGRpc2FwcGVhcmluZywgY2FuY2VsIHRoYXRcclxuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlID09PSAnZGlzYXBwZWFyaW5nJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fc3RhdGVTZXQoJ2FwcGVhcmluZycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoZW52Lmhhc1RyYW5zaXRpb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5jbGVhclF1ZXVlKClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLWR5aW5nJylcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoJ3Rvb2x0aXBzdGVyLXNob3cnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5kZWxheShzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLnF1ZXVlKGZpbmlzaCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaW4gY2FzZSB0aGUgdG9vbHRpcCB3YXMgY3VycmVudGx5IGZhZGluZyBvdXQsIGJyaW5nIGl0IGJhY2tcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gdG8gbGlmZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5zdG9wKClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZmFkZUluKGZpbmlzaCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGlzIGFscmVhZHkgb3Blbiwgd2Ugc3RpbGwgbmVlZCB0byB0cmlnZ2VyIHRoZSBtZXRob2RcclxuXHRcdFx0XHRcdFx0XHQvLyBjdXN0b20gY2FsbGJhY2tcclxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIChzZWxmLl9fc3RhdGUgPT0gJ3N0YWJsZScpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGZpbmlzaCgpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBpc24ndCBhbHJlYWR5IG9wZW4sIG9wZW4gaXRcclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gYSBwbHVnaW4gbXVzdCBiaW5kIG9uIHRoaXMgYW5kIHN0b3JlIHRoZSB0b29sdGlwIGluIHRoaXMuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX3N0YXRlU2V0KCdhcHBlYXJpbmcnKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyB0aGUgdGltZXIgKGlmIGFueSkgd2lsbCBzdGFydCB3aGVuIHRoZSB0b29sdGlwIGhhcyBmdWxseSBhcHBlYXJlZFxyXG5cdFx0XHRcdFx0XHRcdC8vIGFmdGVyIGl0cyB0cmFuc2l0aW9uXHJcblx0XHRcdFx0XHRcdFx0ZXh0cmFUaW1lID0gc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF07XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gaW5zZXJ0IHRoZSBjb250ZW50IGluc2lkZSB0aGUgdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX19jb250ZW50SW5zZXJ0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gcmVwb3NpdGlvbiB0aGUgdG9vbHRpcCBhbmQgYXR0YWNoIHRvIHRoZSBET01cclxuXHRcdFx0XHRcdFx0XHRzZWxmLnJlcG9zaXRpb24oZXZlbnQsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGFuaW1hdGUgaW4gdGhlIHRvb2x0aXAuIElmIHRoZSBkaXNwbGF5IHBsdWdpbiB3YW50cyBubyBjc3NcclxuXHRcdFx0XHRcdFx0XHQvLyBhbmltYXRpb25zLCBpdCBtYXkgb3ZlcnJpZGUgdGhlIGFuaW1hdGlvbiBvcHRpb24gd2l0aCBhXHJcblx0XHRcdFx0XHRcdFx0Ly8gZHVtbXkgdmFsdWUgdGhhdCB3aWxsIHByb2R1Y2Ugbm8gZWZmZWN0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGVudi5oYXNUcmFuc2l0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBub3RlOiB0aGVyZSBzZWVtcyB0byBiZSBhbiBpc3N1ZSB3aXRoIHN0YXJ0IGFuaW1hdGlvbnMgd2hpY2hcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGFyZSByYW5kb21seSBub3QgcGxheWVkIG9uIGZhc3QgZGV2aWNlcyBpbiBib3RoIENocm9tZSBhbmQgRkYsXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBjb3VsZG4ndCBmaW5kIGEgd2F5IHRvIHNvbHZlIGl0IHlldC4gSXQgc2VlbXMgdGhhdCBhcHBseWluZ1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gdGhlIGNsYXNzZXMgYmVmb3JlIGFwcGVuZGluZyB0byB0aGUgRE9NIGhlbHBzIGEgbGl0dGxlLCBidXRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGl0IG1lc3NlcyB1cCBzb21lIENTUyB0cmFuc2l0aW9ucy4gVGhlIGlzc3VlIGFsbW9zdCBuZXZlclxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaGFwcGVucyB3aGVuIGRlbGF5WzBdPT0wIHRob3VnaFxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCd0b29sdGlwc3Rlci0nKyBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb24pXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5hZGRDbGFzcygndG9vbHRpcHN0ZXItaW5pdGlhbCcpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCctbW96LWFuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnLW1zLWFuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnLW8tYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCctd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCd0cmFuc2l0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyAnbXMnXHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhIHF1aWNrIGhvdmVyIG1heSBoYXZlIGFscmVhZHkgdHJpZ2dlcmVkIGEgbW91c2VsZWF2ZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCd0b29sdGlwc3Rlci1zaG93JylcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci1pbml0aWFsJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuZGVsYXkoc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5xdWV1ZShmaW5pc2gpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0MFxyXG5cdFx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIG9sZCBicm93c2VycyB3aWxsIGhhdmUgdG8gbGl2ZSB3aXRoIHRoaXNcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5mYWRlSW4oc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0sIGZpbmlzaCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGNoZWNrcyBpZiB0aGUgb3JpZ2luIGlzIHJlbW92ZWQgd2hpbGUgdGhlIHRvb2x0aXAgaXMgb3BlblxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX190cmFja2VyU3RhcnQoKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBOT1RFOiB0aGUgbGlzdGVuZXJzIGJlbG93IGhhdmUgYSAnLXRyaWdnZXJDbG9zZScgbmFtZXNwYWNlXHJcblx0XHRcdFx0XHRcdFx0Ly8gYmVjYXVzZSB3ZSdsbCByZW1vdmUgdGhlbSB3aGVuIHRoZSB0b29sdGlwIGNsb3NlcyAodW5saWtlXHJcblx0XHRcdFx0XHRcdFx0Ly8gdGhlICctdHJpZ2dlck9wZW4nIGxpc3RlbmVycykuIFNvIHNvbWUgb2YgdGhlbSBhcmUgYWN0dWFsbHlcclxuXHRcdFx0XHRcdFx0XHQvLyBub3QgYWJvdXQgY2xvc2UgdHJpZ2dlcnMsIHJhdGhlciBhYm91dCBwb3NpdGlvbmluZy5cclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQkKGVudi53aW5kb3cpXHJcblx0XHRcdFx0XHRcdFx0XHQvLyByZXBvc2l0aW9uIG9uIHJlc2l6ZVxyXG5cdFx0XHRcdFx0XHRcdFx0Lm9uKCdyZXNpemUuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgJGFlID0gJChkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHJlcG9zaXRpb24gb25seSBpZiB0aGUgcmVzaXplIGV2ZW50IHdhcyBub3QgdHJpZ2dlcmVkIHVwb24gdGhlIG9wZW5pbmdcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gb2YgYSB2aXJ0dWFsIGtleWJvYXJkIGR1ZSB0byBhbiBpbnB1dCBmaWVsZCBiZWluZyBmb2N1c2VkIHdpdGhpbiB0aGUgdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyAob3RoZXJ3aXNlIHRoZSByZXBvc2l0aW9uaW5nIHdvdWxkIGxvc2UgdGhlIGZvY3VzKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoXHQoISRhZS5pcygnaW5wdXQnKSAmJiAhJGFlLmlzKCd0ZXh0YXJlYScpKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHx8XHQhJC5jb250YWlucyhzZWxmLl8kdG9vbHRpcFswXSwgJGFlWzBdKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLnJlcG9zaXRpb24oZSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBzYW1lIGFzIGJlbG93IGZvciBwYXJlbnRzXHJcblx0XHRcdFx0XHRcdFx0XHQub24oJ3Njcm9sbC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fX3Njcm9sbEhhbmRsZXIoZSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fJG9yaWdpblBhcmVudHMgPSBzZWxmLl8kb3JpZ2luLnBhcmVudHMoKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBzY3JvbGxpbmcgbWF5IHJlcXVpcmUgdGhlIHRvb2x0aXAgdG8gYmUgbW92ZWQgb3IgZXZlblxyXG5cdFx0XHRcdFx0XHRcdC8vIHJlcG9zaXRpb25lZCBpbiBzb21lIGNhc2VzXHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fXyRvcmlnaW5QYXJlbnRzLmVhY2goZnVuY3Rpb24oaSwgcGFyZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdCQocGFyZW50KS5vbignc2Nyb2xsLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fc2Nyb2xsSGFuZGxlcihlKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChcdHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5tb3VzZWxlYXZlXHJcblx0XHRcdFx0XHRcdFx0XHR8fFx0KHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50b3VjaGxlYXZlICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpXHJcblx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHdlIHVzZSBhbiBldmVudCB0byBhbGxvdyB1c2Vycy9wbHVnaW5zIHRvIGNvbnRyb2wgd2hlbiB0aGUgbW91c2VsZWF2ZS90b3VjaGxlYXZlXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBjbG9zZSB0cmlnZ2VycyB3aWxsIGNvbWUgdG8gYWN0aW9uLiBJdCBhbGxvd3MgdG8gaGF2ZSBtb3JlIHRyaWdnZXJpbmcgZWxlbWVudHNcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHRoYW4ganVzdCB0aGUgb3JpZ2luIGFuZCB0aGUgdG9vbHRpcCBmb3IgZXhhbXBsZSwgb3IgdG8gY2FuY2VsL2RlbGF5IHRoZSBjbG9zaW5nLFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gb3IgdG8gbWFrZSB0aGUgdG9vbHRpcCBpbnRlcmFjdGl2ZSBldmVuIGlmIGl0IHdhc24ndCB3aGVuIGl0IHdhcyBvcGVuLCBldGMuXHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl9vbignZGlzbWlzc2FibGUnLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGV2ZW50LmRpc21pc3NhYmxlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGV2ZW50LmRlbGF5KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBldmVudC5ldmVudCBtYXkgYmUgdW5kZWZpbmVkXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX2Nsb3NlKGV2ZW50LmV2ZW50KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sIGV2ZW50LmRlbGF5KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fX3RpbWVvdXRzLmNsb3NlLnB1c2godGltZW91dCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fY2xvc2UoZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBub3cgc2V0IHRoZSBsaXN0ZW5lcnMgdGhhdCB3aWxsIHRyaWdnZXIgJ2Rpc21pc3NhYmxlJyBldmVudHNcclxuXHRcdFx0XHRcdFx0XHRcdHZhciAkZWxlbWVudHMgPSBzZWxmLl8kb3JpZ2luLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRldmVudE5hbWVzSW4gPSAnJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnROYW1lc091dCA9ICcnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aW1lb3V0ID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaWYgd2UgaGF2ZSB0byBhbGxvdyBpbnRlcmFjdGlvbiwgYmluZCBvbiB0aGUgdG9vbHRpcCB0b29cclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5pbnRlcmFjdGl2ZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQkZWxlbWVudHMgPSAkZWxlbWVudHMuYWRkKHNlbGYuXyR0b29sdGlwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5tb3VzZWxlYXZlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50TmFtZXNJbiArPSAnbW91c2VlbnRlci4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZSAnO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRldmVudE5hbWVzT3V0ICs9ICdtb3VzZWxlYXZlLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlICc7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRvdWNobGVhdmUgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRldmVudE5hbWVzSW4gKz0gJ3RvdWNoc3RhcnQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRldmVudE5hbWVzT3V0ICs9ICd0b3VjaGVuZC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZSB0b3VjaGNhbmNlbC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZSc7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdCRlbGVtZW50c1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBjbG9zZSBhZnRlciBzb21lIHRpbWUgc3BlbnQgb3V0c2lkZSBvZiB0aGUgZWxlbWVudHNcclxuXHRcdFx0XHRcdFx0XHRcdFx0Lm9uKGV2ZW50TmFtZXNPdXQsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaXQncyBvayBpZiB0aGUgdG91Y2ggZ2VzdHVyZSBlbmRlZCB1cCB0byBiZSBhIHN3aXBlLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGl0J3Mgc3RpbGwgYSBcInRvdWNoIGxlYXZlXCIgc2l0dWF0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKFx0c2VsZi5fdG91Y2hJc1RvdWNoRXZlbnQoZXZlbnQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR8fFx0IXNlbGYuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGV2ZW50KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZGVsYXkgPSAoZXZlbnQudHlwZSA9PSAnbW91c2VsZWF2ZScpID9cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fX29wdGlvbnMuZGVsYXkgOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5kZWxheVRvdWNoO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVsYXk6IGRlbGF5WzFdLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkaXNtaXNzYWJsZTogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnZGlzbWlzc2FibGUnXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHN1c3BlbmQgdGhlIG1vdXNlbGVhdmUgdGltZW91dCB3aGVuIHRoZSBwb2ludGVyIGNvbWVzIGJhY2tcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gb3ZlciB0aGUgZWxlbWVudHNcclxuXHRcdFx0XHRcdFx0XHRcdFx0Lm9uKGV2ZW50TmFtZXNJbiwgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpdCdzIGFsc28gb2sgaWYgdGhlIHRvdWNoIGV2ZW50IGlzIGEgc3dpcGUgZ2VzdHVyZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChcdHNlbGYuX3RvdWNoSXNUb3VjaEV2ZW50KGV2ZW50KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fHxcdCFzZWxmLl90b3VjaElzRW11bGF0ZWRFdmVudChldmVudClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkaXNtaXNzYWJsZTogZmFsc2UsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogJ2Rpc21pc3NhYmxlJ1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gY2xvc2UgdGhlIHRvb2x0aXAgd2hlbiB0aGUgb3JpZ2luIGdldHMgYSBtb3VzZSBjbGljayAoY29tbW9uIGJlaGF2aW9yIG9mXHJcblx0XHRcdFx0XHRcdFx0Ly8gbmF0aXZlIHRvb2x0aXBzKVxyXG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2Uub3JpZ2luQ2xpY2spIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fJG9yaWdpbi5vbignY2xpY2suJysgc2VsZi5fX25hbWVzcGFjZSArICctdHJpZ2dlckNsb3NlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHdlIGNvdWxkIGFjdHVhbGx5IGxldCBhIHRhcCB0cmlnZ2VyIHRoaXMgYnV0IHRoaXMgZmVhdHVyZSBqdXN0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGRvZXMgbm90IG1ha2Ugc2Vuc2Ugb24gdG91Y2ggZGV2aWNlc1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoXHQhc2VsZi5fdG91Y2hJc1RvdWNoRXZlbnQoZXZlbnQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JiZcdCFzZWxmLl90b3VjaElzRW11bGF0ZWRFdmVudChldmVudClcclxuXHRcdFx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fY2xvc2UoZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gc2V0IHRoZSBzYW1lIGJpbmRpbmdzIGZvciBjbGljayBhbmQgdG91Y2ggb24gdGhlIGJvZHkgdG8gY2xvc2UgdGhlIHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRpZiAoXHRzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UuY2xpY2tcclxuXHRcdFx0XHRcdFx0XHRcdHx8XHQoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRhcCAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KVxyXG5cdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBkb24ndCBzZXQgcmlnaHQgYXdheSBzaW5jZSB0aGUgY2xpY2svdGFwIGV2ZW50IHdoaWNoIHRyaWdnZXJlZCB0aGlzIG1ldGhvZFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gKGlmIGl0IHdhcyBhIGNsaWNrL3RhcCkgaXMgZ29pbmcgdG8gYnViYmxlIHVwIHRvIHRoZSBib2R5LCB3ZSBkb24ndCB3YW50IGl0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyB0byBjbG9zZSB0aGUgdG9vbHRpcCBpbW1lZGlhdGVseSBhZnRlciBpdCBvcGVuZWRcclxuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGV2ZW50TmFtZXMgPSAnJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRib2R5ID0gJChlbnYud2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UuY2xpY2spIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50TmFtZXMgKz0gJ2NsaWNrLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlICc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudGFwICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50TmFtZXMgKz0gJ3RvdWNoZW5kLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JGJvZHkub24oZXZlbnROYW1lcywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX3RvdWNoSXNNZWFuaW5nZnVsRXZlbnQoZXZlbnQpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl90b3VjaFJlY29yZEV2ZW50KGV2ZW50KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghc2VsZi5fX29wdGlvbnMuaW50ZXJhY3RpdmUgfHwgISQuY29udGFpbnMoc2VsZi5fJHRvb2x0aXBbMF0sIGV2ZW50LnRhcmdldCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9jbG9zZShldmVudCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBuZWVkZWQgdG8gZGV0ZWN0IGFuZCBpZ25vcmUgc3dpcGluZ1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudGFwICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0JGJvZHkub24oJ3RvdWNoc3RhcnQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl90b3VjaFJlY29yZEV2ZW50KGV2ZW50KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoJ3JlYWR5Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gY2FsbCBvdXIgY3VzdG9tIGNhbGxiYWNrXHJcblx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uUmVhZHkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uUmVhZHkuY2FsbChzZWxmLCBzZWxmLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdG9yaWdpbjogc2VsZi5fJG9yaWdpblswXSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0dG9vbHRpcDogc2VsZi5fJHRvb2x0aXBbMF1cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gaWYgd2UgaGF2ZSBhIHRpbWVyIHNldCwgbGV0IHRoZSBjb3VudGRvd24gYmVnaW5cclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRpbWVyID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuX2Nsb3NlKCk7XHJcblx0XHRcdFx0XHRcdFx0fSwgc2VsZi5fX29wdGlvbnMudGltZXIgKyBleHRyYVRpbWUpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX190aW1lb3V0cy5jbG9zZS5wdXNoKHRpbWVvdXQpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogV2hlbiB1c2luZyB0aGUgbW91c2VlbnRlci90b3VjaHN0YXJ0IG9wZW4gdHJpZ2dlcnMsIHRoaXMgZnVuY3Rpb24gd2lsbFxyXG5cdCAqIHNjaGVkdWxlIHRoZSBvcGVuaW5nIG9mIHRoZSB0b29sdGlwIGFmdGVyIHRoZSBkZWxheSwgaWYgdGhlcmUgaXMgb25lXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gZXZlbnRcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcbiBcdCAqL1xyXG5cdF9vcGVuU2hvcnRseTogZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRvayA9IHRydWU7XHJcblx0XHRcclxuXHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ3N0YWJsZScgJiYgc2VsZi5fX3N0YXRlICE9ICdhcHBlYXJpbmcnKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiBhIHRpbWVvdXQgaXMgbm90IGFscmVhZHkgcnVubmluZ1xyXG5cdFx0XHRpZiAoIXNlbGYuX190aW1lb3V0cy5vcGVuKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHR0eXBlOiAnc3RhcnQnLFxyXG5cdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0c3RvcDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdG9rID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKG9rKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBkZWxheSA9IChldmVudC50eXBlLmluZGV4T2YoJ3RvdWNoJykgPT0gMCkgP1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5kZWxheVRvdWNoIDpcclxuXHRcdFx0XHRcdFx0c2VsZi5fX29wdGlvbnMuZGVsYXk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChkZWxheVswXSkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fX3RpbWVvdXRzLm9wZW4gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX190aW1lb3V0cy5vcGVuID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBvcGVuIG9ubHkgaWYgdGhlIHBvaW50ZXIgKG1vdXNlIG9yIHRvdWNoKSBpcyBzdGlsbCBvdmVyIHRoZSBvcmlnaW4uXHJcblx0XHRcdFx0XHRcdFx0Ly8gVGhlIGNoZWNrIG9uIHRoZSBcIm1lYW5pbmdmdWwgZXZlbnRcIiBjYW4gb25seSBiZSBtYWRlIGhlcmUsIGFmdGVyIHNvbWVcclxuXHRcdFx0XHRcdFx0XHQvLyB0aW1lIGhhcyBwYXNzZWQgKHRvIGtub3cgaWYgdGhlIHRvdWNoIHdhcyBhIHN3aXBlIG9yIG5vdClcclxuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX3BvaW50ZXJJc092ZXJPcmlnaW4gJiYgc2VsZi5fdG91Y2hJc01lYW5pbmdmdWxFdmVudChldmVudCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2lnbmFsIHRoYXQgd2UgZ28gb25cclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoJ3N0YXJ0ZW5kJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuX29wZW4oZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHNpZ25hbCB0aGF0IHdlIGNhbmNlbFxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcignc3RhcnRjYW5jZWwnKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIGRlbGF5WzBdKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBzaWduYWwgdGhhdCB3ZSBnbyBvblxyXG5cdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCdzdGFydGVuZCcpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fb3BlbihldmVudCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogTWVhbnQgZm9yIHBsdWdpbnMgdG8gZ2V0IHRoZWlyIG9wdGlvbnNcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGx1Z2luTmFtZSBUaGUgbmFtZSBvZiB0aGUgcGx1Z2luIHRoYXQgYXNrcyBmb3IgaXRzIG9wdGlvbnNcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gZGVmYXVsdE9wdGlvbnMgVGhlIGRlZmF1bHQgb3B0aW9ucyBvZiB0aGUgcGx1Z2luXHJcblx0ICogQHJldHVybnMge29iamVjdH0gVGhlIG9wdGlvbnNcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X29wdGlvbnNFeHRyYWN0OiBmdW5jdGlvbihwbHVnaW5OYW1lLCBkZWZhdWx0T3B0aW9ucykge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdG9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdE9wdGlvbnMpO1xyXG5cdFx0XHJcblx0XHQvLyBpZiB0aGUgcGx1Z2luIG9wdGlvbnMgd2VyZSBpc29sYXRlZCBpbiBhIHByb3BlcnR5IG5hbWVkIGFmdGVyIHRoZVxyXG5cdFx0Ly8gcGx1Z2luLCB1c2UgdGhlbSAocHJldmVudHMgY29uZmxpY3RzIHdpdGggb3RoZXIgcGx1Z2lucylcclxuXHRcdHZhciBwbHVnaW5PcHRpb25zID0gc2VsZi5fX29wdGlvbnNbcGx1Z2luTmFtZV07XHJcblx0XHRcclxuXHRcdC8vIGlmIG5vdCwgdHJ5IHRvIGdldCB0aGVtIGFzIHJlZ3VsYXIgb3B0aW9uc1xyXG5cdFx0aWYgKCFwbHVnaW5PcHRpb25zKXtcclxuXHRcdFx0XHJcblx0XHRcdHBsdWdpbk9wdGlvbnMgPSB7fTtcclxuXHRcdFx0XHJcblx0XHRcdCQuZWFjaChkZWZhdWx0T3B0aW9ucywgZnVuY3Rpb24ob3B0aW9uTmFtZSwgdmFsdWUpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgbyA9IHNlbGYuX19vcHRpb25zW29wdGlvbk5hbWVdO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChvICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdHBsdWdpbk9wdGlvbnNbb3B0aW9uTmFtZV0gPSBvO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIGxldCdzIG1lcmdlIHRoZSBkZWZhdWx0IG9wdGlvbnMgYW5kIHRoZSBvbmVzIHRoYXQgd2VyZSBwcm92aWRlZC4gV2UnZCB3YW50XHJcblx0XHQvLyB0byBkbyBhIGRlZXAgY29weSBidXQgbm90IGxldCBqUXVlcnkgbWVyZ2UgYXJyYXlzLCBzbyB3ZSdsbCBkbyBhIHNoYWxsb3dcclxuXHRcdC8vIGV4dGVuZCBvbiB0d28gbGV2ZWxzLCB0aGF0IHdpbGwgYmUgZW5vdWdoIGlmIG9wdGlvbnMgYXJlIG5vdCBtb3JlIHRoYW4gMVxyXG5cdFx0Ly8gbGV2ZWwgZGVlcFxyXG5cdFx0JC5lYWNoKG9wdGlvbnMsIGZ1bmN0aW9uKG9wdGlvbk5hbWUsIHZhbHVlKSB7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAocGx1Z2luT3B0aW9uc1tvcHRpb25OYW1lXSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKChcdFx0dHlwZW9mIHZhbHVlID09ICdvYmplY3QnXHJcblx0XHRcdFx0XHRcdCYmXHQhKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpXHJcblx0XHRcdFx0XHRcdCYmXHR2YWx1ZSAhPSBudWxsXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHQmJlxyXG5cdFx0XHRcdFx0KFx0XHR0eXBlb2YgcGx1Z2luT3B0aW9uc1tvcHRpb25OYW1lXSA9PSAnb2JqZWN0J1xyXG5cdFx0XHRcdFx0XHQmJlx0IShwbHVnaW5PcHRpb25zW29wdGlvbk5hbWVdIGluc3RhbmNlb2YgQXJyYXkpXHJcblx0XHRcdFx0XHRcdCYmXHRwbHVnaW5PcHRpb25zW29wdGlvbk5hbWVdICE9IG51bGxcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdCQuZXh0ZW5kKG9wdGlvbnNbb3B0aW9uTmFtZV0sIHBsdWdpbk9wdGlvbnNbb3B0aW9uTmFtZV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdG9wdGlvbnNbb3B0aW9uTmFtZV0gPSBwbHVnaW5PcHRpb25zW29wdGlvbk5hbWVdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiBvcHRpb25zO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogVXNlZCBhdCBpbnN0YW50aWF0aW9uIG9mIHRoZSBwbHVnaW4sIG9yIGFmdGVyd2FyZHMgYnkgcGx1Z2lucyB0aGF0IGFjdGl2YXRlIHRoZW1zZWx2ZXNcclxuXHQgKiBvbiBleGlzdGluZyBpbnN0YW5jZXNcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gcGx1Z2luTmFtZVxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfcGx1ZzogZnVuY3Rpb24ocGx1Z2luTmFtZSkge1xyXG5cdFx0XHJcblx0XHR2YXIgcGx1Z2luID0gJC50b29sdGlwc3Rlci5fcGx1Z2luKHBsdWdpbk5hbWUpO1xyXG5cdFx0XHJcblx0XHRpZiAocGx1Z2luKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGVyZSBpcyBhIGNvbnN0cnVjdG9yIGZvciBpbnN0YW5jZXNcclxuXHRcdFx0aWYgKHBsdWdpbi5pbnN0YW5jZSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHByb3h5IG5vbi1wcml2YXRlIG1ldGhvZHMgb24gdGhlIGluc3RhbmNlIHRvIGFsbG93IG5ldyBpbnN0YW5jZSBtZXRob2RzXHJcblx0XHRcdFx0JC50b29sdGlwc3Rlci5fX2JyaWRnZShwbHVnaW4uaW5zdGFuY2UsIHRoaXMsIHBsdWdpbi5uYW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcignVGhlIFwiJysgcGx1Z2luTmFtZSArJ1wiIHBsdWdpbiBpcyBub3QgZGVmaW5lZCcpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFRoaXMgd2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtb3VzZSBldmVudCB3aGljaCB3YXNcclxuXHQgKiBlbXVsYXRlZCBieSB0aGUgYnJvd3NlciBhZnRlciBhIHRvdWNoIGV2ZW50LiBUaGlzIGFsbG93cyB1cyB0b1xyXG5cdCAqIHJlYWxseSBkaXNzb2NpYXRlIG1vdXNlIGFuZCB0b3VjaCB0cmlnZ2Vycy5cclxuXHQgKiBcclxuXHQgKiBUaGVyZSBpcyBhIG1hcmdpbiBvZiBlcnJvciBpZiBhIHJlYWwgbW91c2UgZXZlbnQgaXMgZmlyZWQgcmlnaHRcclxuXHQgKiBhZnRlciAod2l0aGluIHRoZSBkZWxheSBzaG93biBiZWxvdykgYSB0b3VjaCBldmVudCBvbiB0aGUgc2FtZVxyXG5cdCAqIGVsZW1lbnQsIGJ1dCBob3BlZnVsbHkgaXQgc2hvdWxkIG5vdCBoYXBwZW4gb2Z0ZW4uXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge2Jvb2xlYW59XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF90b3VjaElzRW11bGF0ZWRFdmVudDogZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFxyXG5cdFx0dmFyIGlzRW11bGF0ZWQgPSBmYWxzZSxcclxuXHRcdFx0bm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRcclxuXHRcdGZvciAodmFyIGkgPSB0aGlzLl9fdG91Y2hFdmVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBlID0gdGhpcy5fX3RvdWNoRXZlbnRzW2ldO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZGVsYXksIGluIG1pbGxpc2Vjb25kcy4gSXQncyBzdXBwb3NlZCB0byBiZSAzMDBtcyBpblxyXG5cdFx0XHQvLyBtb3N0IGJyb3dzZXJzICgzNTBtcyBvbiBpT1MpIHRvIGFsbG93IGEgZG91YmxlIHRhcCBidXRcclxuXHRcdFx0Ly8gY2FuIGJlIGxlc3MgKGNoZWNrIG91dCBGYXN0Q2xpY2sgZm9yIG1vcmUgaW5mbylcclxuXHRcdFx0aWYgKG5vdyAtIGUudGltZSA8IDUwMCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChlLnRhcmdldCA9PT0gZXZlbnQudGFyZ2V0KSB7XHJcblx0XHRcdFx0XHRpc0VtdWxhdGVkID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIGlzRW11bGF0ZWQ7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIGZhbHNlIGlmIHRoZSBldmVudCB3YXMgYW4gZW11bGF0ZWQgbW91c2UgZXZlbnQgb3JcclxuXHQgKiBhIHRvdWNoIGV2ZW50IGludm9sdmVkIGluIGEgc3dpcGUgZ2VzdHVyZS5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcclxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3RvdWNoSXNNZWFuaW5nZnVsRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHRcdCh0aGlzLl90b3VjaElzVG91Y2hFdmVudChldmVudCkgJiYgIXRoaXMuX3RvdWNoU3dpcGVkKGV2ZW50LnRhcmdldCkpXHJcblx0XHRcdHx8XHQoIXRoaXMuX3RvdWNoSXNUb3VjaEV2ZW50KGV2ZW50KSAmJiAhdGhpcy5fdG91Y2hJc0VtdWxhdGVkRXZlbnQoZXZlbnQpKVxyXG5cdFx0KTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyBpZiBhbiBldmVudCBpcyBhIHRvdWNoIGV2ZW50XHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XHJcblx0ICogQHJldHVybnMge2Jvb2xlYW59XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF90b3VjaElzVG91Y2hFdmVudDogZnVuY3Rpb24oZXZlbnQpe1xyXG5cdFx0cmV0dXJuIGV2ZW50LnR5cGUuaW5kZXhPZigndG91Y2gnKSA9PSAwO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogU3RvcmUgdG91Y2ggZXZlbnRzIGZvciBhIHdoaWxlIHRvIGRldGVjdCBzd2lwaW5nIGFuZCBlbXVsYXRlZCBtb3VzZSBldmVudHNcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3RvdWNoUmVjb3JkRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcclxuXHRcdGlmICh0aGlzLl90b3VjaElzVG91Y2hFdmVudChldmVudCkpIHtcclxuXHRcdFx0ZXZlbnQudGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0XHR0aGlzLl9fdG91Y2hFdmVudHMucHVzaChldmVudCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0cnVlIGlmIGEgc3dpcGUgaGFwcGVuZWQgYWZ0ZXIgdGhlIGxhc3QgdG91Y2hzdGFydCBldmVudCBmaXJlZCBvblxyXG5cdCAqIGV2ZW50LnRhcmdldC5cclxuXHQgKiBcclxuXHQgKiBXZSBuZWVkIHRvIGRpZmZlcmVudGlhdGUgYSBzd2lwZSBmcm9tIGEgdGFwIGJlZm9yZSB3ZSBsZXQgdGhlIGV2ZW50IG9wZW5cclxuXHQgKiBvciBjbG9zZSB0aGUgdG9vbHRpcC4gQSBzd2lwZSBpcyB3aGVuIGEgdG91Y2htb3ZlIChzY3JvbGwpIGV2ZW50IGhhcHBlbnNcclxuXHQgKiBvbiB0aGUgYm9keSBiZXR3ZWVuIHRoZSB0b3VjaHN0YXJ0IGFuZCB0aGUgdG91Y2hlbmQgZXZlbnRzIG9mIGFuIGVsZW1lbnQuXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IHRhcmdldCBUaGUgSFRNTCBlbGVtZW50IHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkIHRoZSBzd2lwZVxyXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfdG91Y2hTd2lwZWQ6IGZ1bmN0aW9uKHRhcmdldCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc3dpcGVkID0gZmFsc2U7XHJcblx0XHRcclxuXHRcdGZvciAodmFyIGkgPSB0aGlzLl9fdG91Y2hFdmVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBlID0gdGhpcy5fX3RvdWNoRXZlbnRzW2ldO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGUudHlwZSA9PSAndG91Y2htb3ZlJykge1xyXG5cdFx0XHRcdHN3aXBlZCA9IHRydWU7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoXHJcblx0XHRcdFx0ZS50eXBlID09ICd0b3VjaHN0YXJ0J1xyXG5cdFx0XHRcdCYmXHR0YXJnZXQgPT09IGUudGFyZ2V0XHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzd2lwZWQ7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBUcmlnZ2VycyBhbiBldmVudCBvbiB0aGUgaW5zdGFuY2UgZW1pdHRlcnNcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpO1xyXG5cdFx0XHJcblx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0YXJnc1swXSA9IHsgdHlwZTogYXJnc1swXSB9O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBhZGQgcHJvcGVydGllcyB0byB0aGUgZXZlbnRcclxuXHRcdGFyZ3NbMF0uaW5zdGFuY2UgPSB0aGlzO1xyXG5cdFx0YXJnc1swXS5vcmlnaW4gPSB0aGlzLl8kb3JpZ2luID8gdGhpcy5fJG9yaWdpblswXSA6IG51bGw7XHJcblx0XHRhcmdzWzBdLnRvb2x0aXAgPSB0aGlzLl8kdG9vbHRpcCA/IHRoaXMuXyR0b29sdGlwWzBdIDogbnVsbDtcclxuXHRcdFxyXG5cdFx0Ly8gbm90ZTogdGhlIG9yZGVyIG9mIGVtaXR0ZXJzIG1hdHRlcnNcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUudHJpZ2dlci5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBhcmdzKTtcclxuXHRcdCQudG9vbHRpcHN0ZXIuX3RyaWdnZXIuYXBwbHkoJC50b29sdGlwc3RlciwgYXJncyk7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMudHJpZ2dlci5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIGFyZ3MpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIERlYWN0aXZhdGUgYSBwbHVnaW4gb24gdGhpcyBpbnN0YW5jZVxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfdW5wbHVnOiBmdW5jdGlvbihwbHVnaW5OYW1lKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0Ly8gaWYgdGhlIHBsdWdpbiBoYXMgYmVlbiBhY3RpdmF0ZWQgb24gdGhpcyBpbnN0YW5jZVxyXG5cdFx0aWYgKHNlbGZbcGx1Z2luTmFtZV0pIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBwbHVnaW4gPSAkLnRvb2x0aXBzdGVyLl9wbHVnaW4ocGx1Z2luTmFtZSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGVyZSBpcyBhIGNvbnN0cnVjdG9yIGZvciBpbnN0YW5jZXNcclxuXHRcdFx0aWYgKHBsdWdpbi5pbnN0YW5jZSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHVuYnJpZGdlXHJcblx0XHRcdFx0JC5lYWNoKHBsdWdpbi5pbnN0YW5jZSwgZnVuY3Rpb24obWV0aG9kTmFtZSwgZm4pIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gaWYgdGhlIG1ldGhvZCBleGlzdHMgKHByaXZhdGVzIG1ldGhvZHMgZG8gbm90KSBhbmQgY29tZXMgaW5kZWVkIGZyb21cclxuXHRcdFx0XHRcdC8vIHRoaXMgcGx1Z2luIChtYXkgYmUgbWlzc2luZyBvciBjb21lIGZyb20gYSBjb25mbGljdGluZyBwbHVnaW4pLlxyXG5cdFx0XHRcdFx0aWYgKFx0c2VsZlttZXRob2ROYW1lXVxyXG5cdFx0XHRcdFx0XHQmJlx0c2VsZlttZXRob2ROYW1lXS5icmlkZ2VkID09PSBzZWxmW3BsdWdpbk5hbWVdXHJcblx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0ZGVsZXRlIHNlbGZbbWV0aG9kTmFtZV07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGRlc3Ryb3kgdGhlIHBsdWdpblxyXG5cdFx0XHRpZiAoc2VsZltwbHVnaW5OYW1lXS5fX2Rlc3Ryb3kpIHtcclxuXHRcdFx0XHRzZWxmW3BsdWdpbk5hbWVdLl9fZGVzdHJveSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyByZW1vdmUgdGhlIHJlZmVyZW5jZSB0byB0aGUgcGx1Z2luIGluc3RhbmNlXHJcblx0XHRcdGRlbGV0ZSBzZWxmW3BsdWdpbk5hbWVdO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEBzZWUgc2VsZjo6X2Nsb3NlXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGNsb3NlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG5cdFx0XHJcblx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0dGhpcy5fY2xvc2UobnVsbCwgY2FsbGJhY2spO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBTZXRzIG9yIGdldHMgdGhlIGNvbnRlbnQgb2YgdGhlIHRvb2x0aXBcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7bWl4ZWR8c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0Y29udGVudDogZnVuY3Rpb24oY29udGVudCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdC8vIGdldHRlciBtZXRob2RcclxuXHRcdGlmIChjb250ZW50ID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuIHNlbGYuX19Db250ZW50O1xyXG5cdFx0fVxyXG5cdFx0Ly8gc2V0dGVyIG1ldGhvZFxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoIXNlbGYuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBjaGFuZ2UgdGhlIGNvbnRlbnRcclxuXHRcdFx0XHRzZWxmLl9fY29udGVudFNldChjb250ZW50KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoc2VsZi5fX0NvbnRlbnQgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gdXBkYXRlIHRoZSB0b29sdGlwIGlmIGl0IGlzIG9wZW5cclxuXHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT09ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyByZXNldCB0aGUgY29udGVudCBpbiB0aGUgdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRzZWxmLl9fY29udGVudEluc2VydCgpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gcmVwb3NpdGlvbiBhbmQgcmVzaXplIHRoZSB0b29sdGlwXHJcblx0XHRcdFx0XHRcdHNlbGYucmVwb3NpdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gaWYgd2Ugd2FudCB0byBwbGF5IGEgbGl0dGxlIGFuaW1hdGlvbiBzaG93aW5nIHRoZSBjb250ZW50IGNoYW5nZWRcclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnVwZGF0ZUFuaW1hdGlvbikge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChlbnYuaGFzVHJhbnNpdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8ga2VlcCB0aGUgcmVmZXJlbmNlIGluIHRoZSBsb2NhbCBzY29wZVxyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGFuaW1hdGlvbiA9IHNlbGYuX19vcHRpb25zLnVwZGF0ZUFuaW1hdGlvbjtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuYWRkQ2xhc3MoJ3Rvb2x0aXBzdGVyLXVwZGF0ZS0nKyBhbmltYXRpb24pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyByZW1vdmUgdGhlIGNsYXNzIGFmdGVyIGEgd2hpbGUuIFRoZSBhY3R1YWwgZHVyYXRpb24gb2YgdGhlXHJcblx0XHRcdFx0XHRcdFx0XHQvLyB1cGRhdGUgYW5pbWF0aW9uIG1heSBiZSBzaG9ydGVyLCBpdCdzIHNldCBpbiB0aGUgQ1NTIHJ1bGVzXHJcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci11cGRhdGUtJysgYW5pbWF0aW9uKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSwgMTAwMCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuZmFkZVRvKDIwMCwgMC41LCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmZhZGVUbygyMDAsIDEpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRzZWxmLl9jbG9zZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRzZWxmLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBzZWxmO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIHRvb2x0aXBcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0aWYgKCFzZWxmLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdFxyXG5cdFx0XHRpZihzZWxmLl9fc3RhdGUgIT0gJ2Nsb3NlZCcpe1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIG5vIGNsb3NpbmcgZGVsYXlcclxuXHRcdFx0XHRzZWxmLm9wdGlvbignYW5pbWF0aW9uRHVyYXRpb24nLCAwKVxyXG5cdFx0XHRcdFx0Ly8gZm9yY2UgY2xvc2luZ1xyXG5cdFx0XHRcdFx0Ll9jbG9zZShudWxsLCBudWxsLCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvLyB0aGVyZSBtaWdodCBiZSBhbiBvcGVuIHRpbWVvdXQgc3RpbGwgcnVubmluZ1xyXG5cdFx0XHRcdHNlbGYuX190aW1lb3V0c0NsZWFyKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIHNlbmQgZXZlbnRcclxuXHRcdFx0c2VsZi5fdHJpZ2dlcignZGVzdHJveScpO1xyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fX2Rlc3Ryb3llZCA9IHRydWU7XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl8kb3JpZ2luXHJcblx0XHRcdFx0LnJlbW92ZURhdGEoc2VsZi5fX25hbWVzcGFjZSlcclxuXHRcdFx0XHQvLyByZW1vdmUgdGhlIG9wZW4gdHJpZ2dlciBsaXN0ZW5lcnNcclxuXHRcdFx0XHQub2ZmKCcuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbicpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gcmVtb3ZlIHRoZSB0b3VjaCBsaXN0ZW5lclxyXG5cdFx0XHQkKGVudi53aW5kb3cuZG9jdW1lbnQuYm9keSkub2ZmKCcuJyArIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4nKTtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBucyA9IHNlbGYuXyRvcmlnaW4uZGF0YSgndG9vbHRpcHN0ZXItbnMnKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZSBvcmlnaW4gaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIERPTSwgaXRzIGRhdGEgbWF5XHJcblx0XHRcdC8vIHdlbGwgaGF2ZSBiZWVuIGRlc3Ryb3llZCBpbiB0aGUgcHJvY2VzcyBhbmQgdGhlcmUgd291bGRcclxuXHRcdFx0Ly8gYmUgbm90aGluZyB0byBjbGVhbiB1cCBvciByZXN0b3JlXHJcblx0XHRcdGlmIChucykge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmIHRoZXJlIGFyZSBubyBtb3JlIHRvb2x0aXBzIG9uIHRoaXMgZWxlbWVudFxyXG5cdFx0XHRcdGlmIChucy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gb3B0aW9uYWwgcmVzdG9yYXRpb24gb2YgYSB0aXRsZSBhdHRyaWJ1dGVcclxuXHRcdFx0XHRcdHZhciB0aXRsZSA9IG51bGw7XHJcblx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMucmVzdG9yYXRpb24gPT0gJ3ByZXZpb3VzJykge1xyXG5cdFx0XHRcdFx0XHR0aXRsZSA9IHNlbGYuXyRvcmlnaW4uZGF0YSgndG9vbHRpcHN0ZXItaW5pdGlhbFRpdGxlJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmIChzZWxmLl9fb3B0aW9ucy5yZXN0b3JhdGlvbiA9PSAnY3VycmVudCcpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIG9sZCBzY2hvb2wgdGVjaG5pcXVlIHRvIHN0cmluZ2lmeSB3aGVuIG91dGVySFRNTCBpcyBub3Qgc3VwcG9ydGVkXHJcblx0XHRcdFx0XHRcdHRpdGxlID0gKHR5cGVvZiBzZWxmLl9fQ29udGVudCA9PSAnc3RyaW5nJykgP1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX19Db250ZW50IDpcclxuXHRcdFx0XHRcdFx0XHQkKCc8ZGl2PjwvZGl2PicpLmFwcGVuZChzZWxmLl9fQ29udGVudCkuaHRtbCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAodGl0bGUpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fJG9yaWdpbi5hdHRyKCd0aXRsZScsIHRpdGxlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gZmluYWwgY2xlYW5pbmdcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0c2VsZi5fJG9yaWdpbi5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXJlZCcpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRzZWxmLl8kb3JpZ2luXHJcblx0XHRcdFx0XHRcdC5yZW1vdmVEYXRhKCd0b29sdGlwc3Rlci1ucycpXHJcblx0XHRcdFx0XHRcdC5yZW1vdmVEYXRhKCd0b29sdGlwc3Rlci1pbml0aWFsVGl0bGUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHQvLyByZW1vdmUgdGhlIGluc3RhbmNlIG5hbWVzcGFjZSBmcm9tIHRoZSBsaXN0IG9mIG5hbWVzcGFjZXMgb2ZcclxuXHRcdFx0XHRcdC8vIHRvb2x0aXBzIHByZXNlbnQgb24gdGhlIGVsZW1lbnRcclxuXHRcdFx0XHRcdG5zID0gJC5ncmVwKG5zLCBmdW5jdGlvbihlbCwgaSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZWwgIT09IHNlbGYuX19uYW1lc3BhY2U7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdHNlbGYuXyRvcmlnaW4uZGF0YSgndG9vbHRpcHN0ZXItbnMnLCBucyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBsYXN0IGV2ZW50XHJcblx0XHRcdHNlbGYuX3RyaWdnZXIoJ2Rlc3Ryb3llZCcpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gdW5iaW5kIHByaXZhdGUgYW5kIHB1YmxpYyBldmVudCBsaXN0ZW5lcnNcclxuXHRcdFx0c2VsZi5fb2ZmKCk7XHJcblx0XHRcdHNlbGYub2ZmKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyByZW1vdmUgZXh0ZXJuYWwgcmVmZXJlbmNlcywganVzdCBpbiBjYXNlXHJcblx0XHRcdHNlbGYuX19Db250ZW50ID0gbnVsbDtcclxuXHRcdFx0c2VsZi5fXyRlbWl0dGVyUHJpdmF0ZSA9IG51bGw7XHJcblx0XHRcdHNlbGYuX18kZW1pdHRlclB1YmxpYyA9IG51bGw7XHJcblx0XHRcdHNlbGYuX19vcHRpb25zLnBhcmVudCA9IG51bGw7XHJcblx0XHRcdHNlbGYuXyRvcmlnaW4gPSBudWxsO1xyXG5cdFx0XHRzZWxmLl8kdG9vbHRpcCA9IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdGhlIG9iamVjdCBpcyBubyBsb25nZXIgcmVmZXJlbmNlZCBpbiB0aGVyZSB0byBwcmV2ZW50XHJcblx0XHRcdC8vIG1lbW9yeSBsZWFrc1xyXG5cdFx0XHQkLnRvb2x0aXBzdGVyLl9faW5zdGFuY2VzTGF0ZXN0QXJyID0gJC5ncmVwKCQudG9vbHRpcHN0ZXIuX19pbnN0YW5jZXNMYXRlc3RBcnIsIGZ1bmN0aW9uKGVsLCBpKSB7XHJcblx0XHRcdFx0cmV0dXJuIHNlbGYgIT09IGVsO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGNsZWFySW50ZXJ2YWwoc2VsZi5fX2dhcmJhZ2VDb2xsZWN0b3IpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHNlbGYuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gd2UgcmV0dXJuIHRoZSBzY29wZSByYXRoZXIgdGhhbiB0cnVlIHNvIHRoYXQgdGhlIGNhbGwgdG9cclxuXHRcdC8vIC50b29sdGlwc3RlcignZGVzdHJveScpIGFjdHVhbGx5IHJldHVybnMgdGhlIG1hdGNoZWQgZWxlbWVudHNcclxuXHRcdC8vIGFuZCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVtXHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIERpc2FibGVzIHRoZSB0b29sdGlwXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGNsb3NlIGZpcnN0LCBpbiBjYXNlIHRoZSB0b29sdGlwIHdvdWxkIG5vdCBkaXNhcHBlYXIgb25cclxuXHRcdFx0Ly8gaXRzIG93biAobm8gY2xvc2UgdHJpZ2dlcilcclxuXHRcdFx0dGhpcy5fY2xvc2UoKTtcclxuXHRcdFx0dGhpcy5fX2VuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRoZSBIVE1MIGVsZW1lbnQgb2YgdGhlIG9yaWdpblxyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGVsZW1lbnRPcmlnaW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuXyRvcmlnaW5bMF07XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgSFRNTCBlbGVtZW50IG9mIHRoZSB0b29sdGlwXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0ZWxlbWVudFRvb2x0aXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuXyR0b29sdGlwID8gdGhpcy5fJHRvb2x0aXBbMF0gOiBudWxsO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRW5hYmxlcyB0aGUgdG9vbHRpcFxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fX2VuYWJsZWQgPSB0cnVlO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBBbGlhcywgZGVwcmVjYXRlZCBpbiA0LjAuMFxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGhpZGU6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5jbG9zZShjYWxsYmFjayk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRoZSBpbnN0YW5jZVxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRpbnN0YW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBwdWJsaWMgdXNlIG9ubHksIG5vdCB0byBiZSB1c2VkIGJ5IHBsdWdpbnMgKHVzZSA6Ol9vZmYoKSBpbnN0ZWFkKVxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRvZmY6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLm9mZi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgcHVibGljIHVzZSBvbmx5LCBub3QgdG8gYmUgdXNlZCBieSBwbHVnaW5zICh1c2UgOjpfb24oKSBpbnN0ZWFkKVxyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy5vbi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIHB1YmxpYyB1c2Ugb25seSwgbm90IHRvIGJlIHVzZWQgYnkgcGx1Z2luc1xyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG9uZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub25lLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBAc2VlIHNlbGY6Ol9vcGVuXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG9wZW46IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcblx0XHRcclxuXHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHR0aGlzLl9vcGVuKG51bGwsIGNhbGxiYWNrKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogR2V0IG9yIHNldCBvcHRpb25zLiBGb3IgaW50ZXJuYWwgdXNlIGFuZCBhZHZhbmNlZCB1c2VycyBvbmx5LlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBvIE9wdGlvbiBuYW1lXHJcblx0ICogQHBhcmFtIHttaXhlZH0gdmFsIG9wdGlvbmFsIEEgbmV3IHZhbHVlIGZvciB0aGUgb3B0aW9uXHJcblx0ICogQHJldHVybiB7bWl4ZWR8c2VsZn0gSWYgdmFsIGlzIG9taXR0ZWQsIHRoZSB2YWx1ZSBvZiB0aGUgb3B0aW9uXHJcblx0ICogaXMgcmV0dXJuZWQsIG90aGVyd2lzZSB0aGUgaW5zdGFuY2UgaXRzZWxmIGlzIHJldHVybmVkXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqLyBcclxuXHRvcHRpb246IGZ1bmN0aW9uKG8sIHZhbCkge1xyXG5cdFx0XHJcblx0XHQvLyBnZXR0ZXJcclxuXHRcdGlmICh2YWwgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fX29wdGlvbnNbb107XHJcblx0XHR9XHJcblx0XHQvLyBzZXR0ZXJcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gY2hhbmdlIHZhbHVlXHJcblx0XHRcdFx0dGhpcy5fX29wdGlvbnNbb10gPSB2YWw7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gZm9ybWF0XHJcblx0XHRcdFx0dGhpcy5fX29wdGlvbnNGb3JtYXQoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyByZS1wcmVwYXJlIHRoZSB0cmlnZ2VycyBpZiBuZWVkZWRcclxuXHRcdFx0XHRpZiAoJC5pbkFycmF5KG8sIFsndHJpZ2dlcicsICd0cmlnZ2VyQ2xvc2UnLCAndHJpZ2dlck9wZW4nXSkgPj0gMCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fX3ByZXBhcmVPcmlnaW4oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKG8gPT09ICdzZWxmRGVzdHJ1Y3Rpb24nKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9fcHJlcGFyZUdDKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBUaGlzIG1ldGhvZCBpcyBpbiBjaGFyZ2Ugb2Ygc2V0dGluZyB0aGUgcG9zaXRpb24gYW5kIHNpemUgcHJvcGVydGllcyBvZiB0aGUgdG9vbHRpcC5cclxuXHQgKiBBbGwgdGhlIGhhcmQgd29yayBpcyBkZWxlZ2F0ZWQgdG8gdGhlIGRpc3BsYXkgcGx1Z2luLlxyXG5cdCAqIE5vdGU6IFRoZSB0b29sdGlwIG1heSBiZSBkZXRhY2hlZCBmcm9tIHRoZSBET00gYXQgdGhlIG1vbWVudCB0aGUgbWV0aG9kIGlzIGNhbGxlZCBcclxuXHQgKiBidXQgbXVzdCBiZSBhdHRhY2hlZCBieSB0aGUgZW5kIG9mIHRoZSBtZXRob2QgY2FsbC5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgRm9yIGludGVybmFsIHVzZSBvbmx5LiBEZWZpbmVkIGlmIGFuIGV2ZW50IHN1Y2ggYXNcclxuXHQgKiB3aW5kb3cgcmVzaXppbmcgdHJpZ2dlcmVkIHRoZSByZXBvc2l0aW9uaW5nXHJcblx0ICogQHBhcmFtIHtib29sZWFufSB0b29sdGlwSXNEZXRhY2hlZCBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuIFNldCB0aGlzIHRvIHRydWUgaWYgeW91XHJcblx0ICoga25vdyB0aGF0IHRoZSB0b29sdGlwIG5vdCBiZWluZyBpbiB0aGUgRE9NIGlzIG5vdCBhbiBpc3N1ZSAodHlwaWNhbGx5IHdoZW4gdGhlXHJcblx0ICogdG9vbHRpcCBlbGVtZW50IGhhcyBqdXN0IGJlZW4gY3JlYXRlZCBidXQgaGFzIG5vdCBiZWVuIGFkZGVkIHRvIHRoZSBET00geWV0KS5cclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0cmVwb3NpdGlvbjogZnVuY3Rpb24oZXZlbnQsIHRvb2x0aXBJc0RldGFjaGVkKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0aWYgKCFzZWxmLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBpcyBzdGlsbCBvcGVuIGFuZCB0aGUgb3JpZ2luIGlzIHN0aWxsIGluIHRoZSBET01cclxuXHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnY2xvc2VkJyAmJiBib2R5Q29udGFpbnMoc2VsZi5fJG9yaWdpbikpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBoYXMgbm90IGJlZW4gcmVtb3ZlZCBmcm9tIERPTSBtYW51YWxseSAob3IgaWYgaXRcclxuXHRcdFx0XHQvLyBoYXMgYmVlbiBkZXRhY2hlZCBvbiBwdXJwb3NlKVxyXG5cdFx0XHRcdGlmICh0b29sdGlwSXNEZXRhY2hlZCB8fCBib2R5Q29udGFpbnMoc2VsZi5fJHRvb2x0aXApKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmICghdG9vbHRpcElzRGV0YWNoZWQpIHtcclxuXHRcdFx0XHRcdFx0Ly8gZGV0YWNoIGluIGNhc2UgdGhlIHRvb2x0aXAgb3ZlcmZsb3dzIHRoZSB3aW5kb3cgYW5kIGFkZHNcclxuXHRcdFx0XHRcdFx0Ly8gc2Nyb2xsYmFycyB0byBpdCwgc28gX19nZW9tZXRyeSBjYW4gYmUgYWNjdXJhdGVcclxuXHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuZGV0YWNoKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIHJlZnJlc2ggdGhlIGdlb21ldHJ5IG9iamVjdCBiZWZvcmUgcGFzc2luZyBpdCBhcyBhIGhlbHBlclxyXG5cdFx0XHRcdFx0c2VsZi5fX0dlb21ldHJ5ID0gc2VsZi5fX2dlb21ldHJ5KCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGxldCBhIHBsdWdpbiBmbyB0aGUgcmVzdFxyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHRcdHR5cGU6ICdyZXBvc2l0aW9uJyxcclxuXHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0XHRoZWxwZXI6IHtcclxuXHRcdFx0XHRcdFx0XHRnZW86IHNlbGYuX19HZW9tZXRyeVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRzZWxmLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQWxpYXMsIGRlcHJlY2F0ZWQgaW4gNC4wLjBcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRzaG93OiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG5cdFx0cmV0dXJuIHRoaXMub3BlbihjYWxsYmFjayk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHNvbWUgcHJvcGVydGllcyBhYm91dCB0aGUgaW5zdGFuY2VcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7b2JqZWN0fVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRzdGF0dXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRkZXN0cm95ZWQ6IHRoaXMuX19kZXN0cm95ZWQsXHJcblx0XHRcdGVuYWJsZWQ6IHRoaXMuX19lbmFibGVkLFxyXG5cdFx0XHRvcGVuOiB0aGlzLl9fc3RhdGUgIT09ICdjbG9zZWQnLFxyXG5cdFx0XHRzdGF0ZTogdGhpcy5fX3N0YXRlXHJcblx0XHR9O1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIHB1YmxpYyB1c2Ugb25seSwgbm90IHRvIGJlIHVzZWQgYnkgcGx1Z2luc1xyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy50cmlnZ2VySGFuZGxlci5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufTtcclxuXHJcbiQuZm4udG9vbHRpcHN0ZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcclxuXHQvLyBmb3IgdXNpbmcgaW4gY2xvc3VyZXNcclxuXHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpLFxyXG5cdFx0Ly8gY29tbW9uIG1pc3Rha2U6IGFuIEhUTUwgZWxlbWVudCBjYW4ndCBiZSBpbiBzZXZlcmFsIHRvb2x0aXBzIGF0IHRoZSBzYW1lIHRpbWVcclxuXHRcdGNvbnRlbnRDbG9uaW5nV2FybmluZyA9ICdZb3UgYXJlIHVzaW5nIGEgc2luZ2xlIEhUTUwgZWxlbWVudCBhcyBjb250ZW50IGZvciBzZXZlcmFsIHRvb2x0aXBzLiBZb3UgcHJvYmFibHkgd2FudCB0byBzZXQgdGhlIGNvbnRlbnRDbG9uaW5nIG9wdGlvbiB0byBUUlVFLic7XHJcblx0XHJcblx0Ly8gdGhpcyBoYXBwZW5zIHdpdGggJChzZWwpLnRvb2x0aXBzdGVyKC4uLikgd2hlbiAkKHNlbCkgZG9lcyBub3QgbWF0Y2ggYW55dGhpbmdcclxuXHRpZiAodGhpcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFxyXG5cdFx0Ly8gc3RpbGwgY2hhaW5hYmxlXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblx0Ly8gdGhpcyBoYXBwZW5zIHdoZW4gY2FsbGluZyAkKHNlbCkudG9vbHRpcHN0ZXIoJ21ldGhvZE5hbWUgb3Igb3B0aW9ucycpXHJcblx0Ly8gd2hlcmUgJChzZWwpIG1hdGNoZXMgb25lIG9yIG1vcmUgZWxlbWVudHNcclxuXHRlbHNlIHtcclxuXHRcdFxyXG5cdFx0Ly8gbWV0aG9kIGNhbGxzXHJcblx0XHRpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgdiA9ICcjKiR+Jic7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gcmV0cmlldmUgdGhlIG5hbWVwYWNlcyBvZiB0aGUgdG9vbHRpcChzKSB0aGF0IGV4aXN0IG9uIHRoYXQgZWxlbWVudC5cclxuXHRcdFx0XHQvLyBXZSB3aWxsIGludGVyYWN0IHdpdGggdGhlIGZpcnN0IHRvb2x0aXAgb25seS5cclxuXHRcdFx0XHR2YXIgbnMgPSAkKHRoaXMpLmRhdGEoJ3Rvb2x0aXBzdGVyLW5zJyksXHJcblx0XHRcdFx0XHQvLyBzZWxmIHJlcHJlc2VudHMgdGhlIGluc3RhbmNlIG9mIHRoZSBmaXJzdCB0b29sdGlwc3RlciBwbHVnaW5cclxuXHRcdFx0XHRcdC8vIGFzc29jaWF0ZWQgdG8gdGhlIGN1cnJlbnQgSFRNTCBvYmplY3Qgb2YgdGhlIGxvb3BcclxuXHRcdFx0XHRcdHNlbGYgPSBucyA/ICQodGhpcykuZGF0YShuc1swXSkgOiBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmIHRoZSBjdXJyZW50IGVsZW1lbnQgaG9sZHMgYSB0b29sdGlwc3RlciBpbnN0YW5jZVxyXG5cdFx0XHRcdGlmIChzZWxmKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmICh0eXBlb2Ygc2VsZlthcmdzWzBdXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKFx0dGhpcy5sZW5ndGggPiAxXHJcblx0XHRcdFx0XHRcdFx0JiZcdGFyZ3NbMF0gPT0gJ2NvbnRlbnQnXHJcblx0XHRcdFx0XHRcdFx0JiZcdChcdGFyZ3NbMV0gaW5zdGFuY2VvZiAkXHJcblx0XHRcdFx0XHRcdFx0XHR8fCAodHlwZW9mIGFyZ3NbMV0gPT0gJ29iamVjdCcgJiYgYXJnc1sxXSAhPSBudWxsICYmIGFyZ3NbMV0udGFnTmFtZSlcclxuXHRcdFx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHRcdFx0JiZcdCFzZWxmLl9fb3B0aW9ucy5jb250ZW50Q2xvbmluZ1xyXG5cdFx0XHRcdFx0XHRcdCYmXHRzZWxmLl9fb3B0aW9ucy5kZWJ1Z1xyXG5cdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhjb250ZW50Q2xvbmluZ1dhcm5pbmcpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBub3RlIDogYXJnc1sxXSBhbmQgYXJnc1syXSBtYXkgbm90IGJlIGRlZmluZWRcclxuXHRcdFx0XHRcdFx0dmFyIHJlc3AgPSBzZWxmW2FyZ3NbMF1dKGFyZ3NbMV0sIGFyZ3NbMl0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignVW5rbm93biBtZXRob2QgXCInKyBhcmdzWzBdICsnXCInKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gaWYgdGhlIGZ1bmN0aW9uIHJldHVybmVkIGFueXRoaW5nIG90aGVyIHRoYW4gdGhlIGluc3RhbmNlXHJcblx0XHRcdFx0XHQvLyBpdHNlbGYgKHdoaWNoIGltcGxpZXMgY2hhaW5pbmcsIGV4Y2VwdCBmb3IgdGhlIGBpbnN0YW5jZWAgbWV0aG9kKVxyXG5cdFx0XHRcdFx0aWYgKHJlc3AgIT09IHNlbGYgfHwgYXJnc1swXSA9PT0gJ2luc3RhbmNlJykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0diA9IHJlc3A7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyByZXR1cm4gZmFsc2UgdG8gc3RvcCAuZWFjaCBpdGVyYXRpb24gb24gdGhlIGZpcnN0IGVsZW1lbnRcclxuXHRcdFx0XHRcdFx0Ly8gbWF0Y2hlZCBieSB0aGUgc2VsZWN0b3JcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignWW91IGNhbGxlZCBUb29sdGlwc3RlclxcJ3MgXCInKyBhcmdzWzBdICsnXCIgbWV0aG9kIG9uIGFuIHVuaW5pdGlhbGl6ZWQgZWxlbWVudCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gKHYgIT09ICcjKiR+JicpID8gdiA6IHRoaXM7XHJcblx0XHR9XHJcblx0XHQvLyBmaXJzdCBhcmd1bWVudCBpcyB1bmRlZmluZWQgb3IgYW4gb2JqZWN0OiB0aGUgdG9vbHRpcCBpcyBpbml0aWFsaXppbmdcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gcmVzZXQgdGhlIGFycmF5IG9mIGxhc3QgaW5pdGlhbGl6ZWQgb2JqZWN0c1xyXG5cdFx0XHQkLnRvb2x0aXBzdGVyLl9faW5zdGFuY2VzTGF0ZXN0QXJyID0gW107XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpcyB0aGVyZSBhIGRlZmluZWQgdmFsdWUgZm9yIHRoZSBtdWx0aXBsZSBvcHRpb24gaW4gdGhlIG9wdGlvbnMgb2JqZWN0ID9cclxuXHRcdFx0dmFyXHRtdWx0aXBsZUlzU2V0ID0gYXJnc1swXSAmJiBhcmdzWzBdLm11bHRpcGxlICE9PSB1bmRlZmluZWQsXHJcblx0XHRcdFx0Ly8gaWYgdGhlIG11bHRpcGxlIG9wdGlvbiBpcyBzZXQgdG8gdHJ1ZSwgb3IgaWYgaXQncyBub3QgZGVmaW5lZCBidXRcclxuXHRcdFx0XHQvLyBzZXQgdG8gdHJ1ZSBpbiB0aGUgZGVmYXVsdHNcclxuXHRcdFx0XHRtdWx0aXBsZSA9IChtdWx0aXBsZUlzU2V0ICYmIGFyZ3NbMF0ubXVsdGlwbGUpIHx8ICghbXVsdGlwbGVJc1NldCAmJiBkZWZhdWx0cy5tdWx0aXBsZSksXHJcblx0XHRcdFx0Ly8gc2FtZSBmb3IgY29udGVudFxyXG5cdFx0XHRcdGNvbnRlbnRJc1NldCA9IGFyZ3NbMF0gJiYgYXJnc1swXS5jb250ZW50ICE9PSB1bmRlZmluZWQsXHJcblx0XHRcdFx0Y29udGVudCA9IChjb250ZW50SXNTZXQgJiYgYXJnc1swXS5jb250ZW50KSB8fCAoIWNvbnRlbnRJc1NldCAmJiBkZWZhdWx0cy5jb250ZW50KSxcclxuXHRcdFx0XHQvLyBzYW1lIGZvciBjb250ZW50Q2xvbmluZ1xyXG5cdFx0XHRcdGNvbnRlbnRDbG9uaW5nSXNTZXQgPSBhcmdzWzBdICYmIGFyZ3NbMF0uY29udGVudENsb25pbmcgIT09IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRjb250ZW50Q2xvbmluZyA9XHJcblx0XHRcdFx0XHRcdChjb250ZW50Q2xvbmluZ0lzU2V0ICYmIGFyZ3NbMF0uY29udGVudENsb25pbmcpXHJcblx0XHRcdFx0XHR8fFx0KCFjb250ZW50Q2xvbmluZ0lzU2V0ICYmIGRlZmF1bHRzLmNvbnRlbnRDbG9uaW5nKSxcclxuXHRcdFx0XHQvLyBzYW1lIGZvciBkZWJ1Z1xyXG5cdFx0XHRcdGRlYnVnSXNTZXQgPSBhcmdzWzBdICYmIGFyZ3NbMF0uZGVidWcgIT09IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRkZWJ1ZyA9IChkZWJ1Z0lzU2V0ICYmIGFyZ3NbMF0uZGVidWcpIHx8ICghZGVidWdJc1NldCAmJiBkZWZhdWx0cy5kZWJ1Zyk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoXHR0aGlzLmxlbmd0aCA+IDFcclxuXHRcdFx0XHQmJlx0KFx0Y29udGVudCBpbnN0YW5jZW9mICRcclxuXHRcdFx0XHRcdHx8ICh0eXBlb2YgY29udGVudCA9PSAnb2JqZWN0JyAmJiBjb250ZW50ICE9IG51bGwgJiYgY29udGVudC50YWdOYW1lKVxyXG5cdFx0XHRcdClcclxuXHRcdFx0XHQmJlx0IWNvbnRlbnRDbG9uaW5nXHJcblx0XHRcdFx0JiZcdGRlYnVnXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGNvbnRlbnRDbG9uaW5nV2FybmluZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGNyZWF0ZSBhIHRvb2x0aXBzdGVyIGluc3RhbmNlIGZvciBlYWNoIGVsZW1lbnQgaWYgaXQgZG9lc24ndFxyXG5cdFx0XHQvLyBhbHJlYWR5IGhhdmUgb25lIG9yIGlmIHRoZSBtdWx0aXBsZSBvcHRpb24gaXMgc2V0LCBhbmQgYXR0YWNoIHRoZVxyXG5cdFx0XHQvLyBvYmplY3QgdG8gaXRcclxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBnbyA9IGZhbHNlLFxyXG5cdFx0XHRcdFx0JHRoaXMgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdFx0bnMgPSAkdGhpcy5kYXRhKCd0b29sdGlwc3Rlci1ucycpLFxyXG5cdFx0XHRcdFx0b2JqID0gbnVsbDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIW5zKSB7XHJcblx0XHRcdFx0XHRnbyA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKG11bHRpcGxlKSB7XHJcblx0XHRcdFx0XHRnbyA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKGRlYnVnKSB7XHJcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnVG9vbHRpcHN0ZXI6IG9uZSBvciBtb3JlIHRvb2x0aXBzIGFyZSBhbHJlYWR5IGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50IGJlbG93LiBJZ25vcmluZy4nKTtcclxuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKHRoaXMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZ28pIHtcclxuXHRcdFx0XHRcdG9iaiA9IG5ldyAkLlRvb2x0aXBzdGVyKHRoaXMsIGFyZ3NbMF0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBzYXZlIHRoZSByZWZlcmVuY2Ugb2YgdGhlIG5ldyBpbnN0YW5jZVxyXG5cdFx0XHRcdFx0aWYgKCFucykgbnMgPSBbXTtcclxuXHRcdFx0XHRcdG5zLnB1c2gob2JqLl9fbmFtZXNwYWNlKTtcclxuXHRcdFx0XHRcdCR0aGlzLmRhdGEoJ3Rvb2x0aXBzdGVyLW5zJywgbnMpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBzYXZlIHRoZSBpbnN0YW5jZSBpdHNlbGZcclxuXHRcdFx0XHRcdCR0aGlzLmRhdGEob2JqLl9fbmFtZXNwYWNlLCBvYmopO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBjYWxsIG91ciBjb25zdHJ1Y3RvciBjdXN0b20gZnVuY3Rpb24uXHJcblx0XHRcdFx0XHQvLyB3ZSBkbyB0aGlzIGhlcmUgYW5kIG5vdCBpbiA6OmluaXQoKSBiZWNhdXNlIHdlIHdhbnRlZFxyXG5cdFx0XHRcdFx0Ly8gdGhlIG9iamVjdCB0byBiZSBzYXZlZCBpbiAkdGhpcy5kYXRhIGJlZm9yZSB0cmlnZ2VyaW5nXHJcblx0XHRcdFx0XHQvLyBpdFxyXG5cdFx0XHRcdFx0aWYgKG9iai5fX29wdGlvbnMuZnVuY3Rpb25Jbml0KSB7XHJcblx0XHRcdFx0XHRcdG9iai5fX29wdGlvbnMuZnVuY3Rpb25Jbml0LmNhbGwob2JqLCBvYmosIHtcclxuXHRcdFx0XHRcdFx0XHRvcmlnaW46IHRoaXNcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGFuZCBub3cgdGhlIGV2ZW50LCBmb3IgdGhlIHBsdWdpbnMgYW5kIGNvcmUgZW1pdHRlclxyXG5cdFx0XHRcdFx0b2JqLl90cmlnZ2VyKCdpbml0Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdCQudG9vbHRpcHN0ZXIuX19pbnN0YW5jZXNMYXRlc3RBcnIucHVzaChvYmopO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbi8vIFV0aWxpdGllc1xyXG5cclxuLyoqXHJcbiAqIEEgY2xhc3MgdG8gY2hlY2sgaWYgYSB0b29sdGlwIGNhbiBmaXQgaW4gZ2l2ZW4gZGltZW5zaW9uc1xyXG4gKiBcclxuICogQHBhcmFtIHtvYmplY3R9ICR0b29sdGlwIFRoZSBqUXVlcnkgd3JhcHBlZCB0b29sdGlwIGVsZW1lbnQsIG9yIGEgY2xvbmUgb2YgaXRcclxuICovXHJcbmZ1bmN0aW9uIFJ1bGVyKCR0b29sdGlwKSB7XHJcblx0XHJcblx0Ly8gbGlzdCBvZiBpbnN0YW5jZSB2YXJpYWJsZXNcclxuXHRcclxuXHR0aGlzLiRjb250YWluZXI7XHJcblx0dGhpcy5jb25zdHJhaW50cyA9IG51bGw7XHJcblx0dGhpcy5fXyR0b29sdGlwO1xyXG5cdFxyXG5cdHRoaXMuX19pbml0KCR0b29sdGlwKTtcclxufVxyXG5cclxuUnVsZXIucHJvdG90eXBlID0ge1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIE1vdmUgdGhlIHRvb2x0aXAgaW50byBhbiBpbnZpc2libGUgZGl2IHRoYXQgZG9lcyBub3QgYWxsb3cgb3ZlcmZsb3cgdG8gbWFrZVxyXG5cdCAqIHNpemUgdGVzdHMuIE5vdGU6IHRoZSB0b29sdGlwIG1heSBvciBtYXkgbm90IGJlIGF0dGFjaGVkIHRvIHRoZSBET00gYXQgdGhlXHJcblx0ICogbW9tZW50IHRoaXMgbWV0aG9kIGlzIGNhbGxlZCwgaXQgZG9lcyBub3QgbWF0dGVyLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSAkdG9vbHRpcCBUaGUgb2JqZWN0IHRvIHRlc3QuIE1heSBiZSBqdXN0IGEgY2xvbmUgb2YgdGhlXHJcblx0ICogYWN0dWFsIHRvb2x0aXAuXHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX2luaXQ6IGZ1bmN0aW9uKCR0b29sdGlwKSB7XHJcblx0XHRcclxuXHRcdHRoaXMuX18kdG9vbHRpcCA9ICR0b29sdGlwO1xyXG5cdFx0XHJcblx0XHR0aGlzLl9fJHRvb2x0aXBcclxuXHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0Ly8gZm9yIHNvbWUgcmVhc29uIHdlIGhhdmUgdG8gc3BlY2lmeSB0b3AgYW5kIGxlZnQgMFxyXG5cdFx0XHRcdGxlZnQ6IDAsXHJcblx0XHRcdFx0Ly8gYW55IG92ZXJmbG93IHdpbGwgYmUgaWdub3JlZCB3aGlsZSBtZWFzdXJpbmdcclxuXHRcdFx0XHRvdmVyZmxvdzogJ2hpZGRlbicsXHJcblx0XHRcdFx0Ly8gcG9zaXRpb25zIGF0ICgwLDApIHdpdGhvdXQgdGhlIGRpdiB1c2luZyAxMDAlIG9mIHRoZSBhdmFpbGFibGUgd2lkdGhcclxuXHRcdFx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuXHRcdFx0XHR0b3A6IDBcclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gb3ZlcmZsb3cgbXVzdCBiZSBhdXRvIGR1cmluZyB0aGUgdGVzdC4gV2UgcmUtc2V0IHRoaXMgaW4gY2FzZVxyXG5cdFx0XHQvLyBpdCB3ZXJlIG1vZGlmaWVkIGJ5IHRoZSB1c2VyXHJcblx0XHRcdC5maW5kKCcudG9vbHRpcHN0ZXItY29udGVudCcpXHJcblx0XHRcdFx0LmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xyXG5cdFx0XHJcblx0XHR0aGlzLiRjb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItcnVsZXJcIj48L2Rpdj4nKVxyXG5cdFx0XHQuYXBwZW5kKHRoaXMuX18kdG9vbHRpcClcclxuXHRcdFx0LmFwcGVuZFRvKGVudi53aW5kb3cuZG9jdW1lbnQuYm9keSk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3JjZSB0aGUgYnJvd3NlciB0byByZWRyYXcgKHJlLXJlbmRlcikgdGhlIHRvb2x0aXAgaW1tZWRpYXRlbHkuIFRoaXMgaXMgcmVxdWlyZWRcclxuXHQgKiB3aGVuIHlvdSBjaGFuZ2VkIHNvbWUgQ1NTIHByb3BlcnRpZXMgYW5kIG5lZWQgdG8gbWFrZSBzb21ldGhpbmcgd2l0aCBpdFxyXG5cdCAqIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBicm93c2VyIHRvIHJlZHJhdyBhdCB0aGUgZW5kIG9mIGluc3RydWN0aW9ucy5cclxuXHQgKlxyXG5cdCAqIEBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNDg1MzY1L2hvdy1jYW4taS1mb3JjZS13ZWJraXQtdG8tcmVkcmF3LXJlcGFpbnQtdG8tcHJvcGFnYXRlLXN0eWxlLWNoYW5nZXNcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fZm9yY2VSZWRyYXc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHQvLyBub3RlOiB0aGlzIHdvdWxkIHdvcmsgYnV0IGZvciBXZWJraXQgb25seVxyXG5cdFx0Ly90aGlzLl9fJHRvb2x0aXAuY2xvc2UoKTtcclxuXHRcdC8vdGhpcy5fXyR0b29sdGlwWzBdLm9mZnNldEhlaWdodDtcclxuXHRcdC8vdGhpcy5fXyR0b29sdGlwLm9wZW4oKTtcclxuXHRcdFxyXG5cdFx0Ly8gd29ya3MgaW4gRkYgdG9vXHJcblx0XHR2YXIgJHAgPSB0aGlzLl9fJHRvb2x0aXAucGFyZW50KCk7XHJcblx0XHR0aGlzLl9fJHRvb2x0aXAuZGV0YWNoKCk7XHJcblx0XHR0aGlzLl9fJHRvb2x0aXAuYXBwZW5kVG8oJHApO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogU2V0IG1heGltdW0gZGltZW5zaW9ucyBmb3IgdGhlIHRvb2x0aXAuIEEgY2FsbCB0byA6Om1lYXN1cmUgYWZ0ZXJ3YXJkc1xyXG5cdCAqIHdpbGwgdGVsbCB1cyBpZiB0aGUgY29udGVudCBvdmVyZmxvd3Mgb3IgaWYgaXQncyBva1xyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtpbnR9IHdpZHRoXHJcblx0ICogQHBhcmFtIHtpbnR9IGhlaWdodFxyXG5cdCAqIEByZXR1cm4ge1J1bGVyfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRjb25zdHJhaW46IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcclxuXHRcdFxyXG5cdFx0dGhpcy5jb25zdHJhaW50cyA9IHtcclxuXHRcdFx0d2lkdGg6IHdpZHRoLFxyXG5cdFx0XHRoZWlnaHQ6IGhlaWdodFxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0dGhpcy5fXyR0b29sdGlwLmNzcyh7XHJcblx0XHRcdC8vIHdlIGRpc2FibGUgZGlzcGxheTpmbGV4LCBvdGhlcndpc2UgdGhlIGNvbnRlbnQgd291bGQgb3ZlcmZsb3cgd2l0aG91dFxyXG5cdFx0XHQvLyBjcmVhdGluZyBob3Jpem9udGFsIHNjcm9sbGluZyAod2hpY2ggd2UgbmVlZCB0byBkZXRlY3QpLlxyXG5cdFx0XHRkaXNwbGF5OiAnYmxvY2snLFxyXG5cdFx0XHQvLyByZXNldCBhbnkgcHJldmlvdXMgaGVpZ2h0XHJcblx0XHRcdGhlaWdodDogJycsXHJcblx0XHRcdC8vIHdlJ2xsIGNoZWNrIGlmIGhvcml6b250YWwgc2Nyb2xsaW5nIG9jY3Vyc1xyXG5cdFx0XHRvdmVyZmxvdzogJ2F1dG8nLFxyXG5cdFx0XHQvLyB3ZSdsbCBzZXQgdGhlIHdpZHRoIGFuZCBzZWUgd2hhdCBoZWlnaHQgaXMgZ2VuZXJhdGVkIGFuZCBpZiB0aGVyZVxyXG5cdFx0XHQvLyBpcyBob3Jpem9udGFsIG92ZXJmbG93XHJcblx0XHRcdHdpZHRoOiB3aWR0aFxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmVzZXQgdGhlIHRvb2x0aXAgY29udGVudCBvdmVyZmxvdyBhbmQgcmVtb3ZlIHRoZSB0ZXN0IGNvbnRhaW5lclxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtSdWxlcn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdC8vIGluIGNhc2UgdGhlIGVsZW1lbnQgd2FzIG5vdCBhIGNsb25lXHJcblx0XHR0aGlzLl9fJHRvb2x0aXBcclxuXHRcdFx0LmRldGFjaCgpXHJcblx0XHRcdC5maW5kKCcudG9vbHRpcHN0ZXItY29udGVudCcpXHJcblx0XHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0XHQvLyByZXNldCB0byBDU1MgdmFsdWVcclxuXHRcdFx0XHRcdGRpc3BsYXk6ICcnLFxyXG5cdFx0XHRcdFx0b3ZlcmZsb3c6ICcnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcclxuXHRcdHRoaXMuJGNvbnRhaW5lci5yZW1vdmUoKTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZXMgYW55IGNvbnN0cmFpbnRzXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge1J1bGVyfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRmcmVlOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dGhpcy5jb25zdHJhaW50cyA9IG51bGw7XHJcblx0XHRcclxuXHRcdC8vIHJlc2V0IHRvIG5hdHVyYWwgc2l6ZVxyXG5cdFx0dGhpcy5fXyR0b29sdGlwLmNzcyh7XHJcblx0XHRcdGRpc3BsYXk6ICcnLFxyXG5cdFx0XHRoZWlnaHQ6ICcnLFxyXG5cdFx0XHRvdmVyZmxvdzogJ3Zpc2libGUnLFxyXG5cdFx0XHR3aWR0aDogJydcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIHNpemUgb2YgdGhlIHRvb2x0aXAuIFdoZW4gY29uc3RyYWludHMgYXJlIGFwcGxpZWQsIGFsc28gcmV0dXJuc1xyXG5cdCAqIHdoZXRoZXIgdGhlIHRvb2x0aXAgZml0cyBpbiB0aGUgcHJvdmlkZWQgZGltZW5zaW9ucy5cclxuXHQgKiBUaGUgaWRlYSBpcyB0byBzZWUgaWYgdGhlIG5ldyBoZWlnaHQgaXMgc21hbGwgZW5vdWdoIGFuZCBpZiB0aGUgY29udGVudCBkb2VzXHJcblx0ICogbm90IG92ZXJmbG93IGhvcml6b250YWxseS5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7aW50fSB3aWR0aFxyXG5cdCAqIEBwYXJhbSB7aW50fSBoZWlnaHRcclxuXHQgKiBAcmV0dXJucyB7b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCBhIGJvb2wgYGZpdHNgIHByb3BlcnR5IGFuZCBhIGBzaXplYCBwcm9wZXJ0eVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRtZWFzdXJlOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dGhpcy5fX2ZvcmNlUmVkcmF3KCk7XHJcblx0XHRcclxuXHRcdHZhciB0b29sdGlwQmNyID0gdGhpcy5fXyR0b29sdGlwWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG5cdFx0XHRyZXN1bHQgPSB7IHNpemU6IHtcclxuXHRcdFx0XHQvLyBiY3Iud2lkdGgvaGVpZ2h0IGFyZSBub3QgZGVmaW5lZCBpbiBJRTgtIGJ1dCBpbiB0aGlzXHJcblx0XHRcdFx0Ly8gY2FzZSwgYmNyLnJpZ2h0L2JvdHRvbSB3aWxsIGhhdmUgdGhlIHNhbWUgdmFsdWVcclxuXHRcdFx0XHQvLyBleGNlcHQgaW4gaU9TIDgrIHdoZXJlIHRvb2x0aXBCY3IuYm90dG9tL3JpZ2h0IGFyZSB3cm9uZ1xyXG5cdFx0XHRcdC8vIGFmdGVyIHNjcm9sbGluZyBmb3IgcmVhc29ucyB5ZXQgdG8gYmUgZGV0ZXJtaW5lZC5cclxuXHRcdFx0XHQvLyB0b29sdGlwQmNyLnRvcC9sZWZ0IG1pZ2h0IG5vdCBiZSAwLCBzZWUgaXNzdWUgIzUxNFxyXG5cdFx0XHRcdGhlaWdodDogdG9vbHRpcEJjci5oZWlnaHQgfHwgKHRvb2x0aXBCY3IuYm90dG9tIC0gdG9vbHRpcEJjci50b3ApLFxyXG5cdFx0XHRcdHdpZHRoOiB0b29sdGlwQmNyLndpZHRoIHx8ICh0b29sdGlwQmNyLnJpZ2h0IC0gdG9vbHRpcEJjci5sZWZ0KVxyXG5cdFx0XHR9fTtcclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMuY29uc3RyYWludHMpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIG5vdGU6IHdlIHVzZWQgdG8gdXNlIG9mZnNldFdpZHRoIGluc3RlYWQgb2YgYm91bmRpbmdSZWN0Q2xpZW50IGJ1dFxyXG5cdFx0XHQvLyBpdCByZXR1cm5lZCByb3VuZGVkIHZhbHVlcywgY2F1c2luZyBpc3N1ZXMgd2l0aCBzdWItcGl4ZWwgbGF5b3V0cy5cclxuXHRcdFx0XHJcblx0XHRcdC8vIG5vdGUyOiBub3RpY2VkIHRoYXQgdGhlIGJjcldpZHRoIG9mIHRleHQgY29udGVudCBvZiBhIGRpdiB3YXMgb25jZVxyXG5cdFx0XHQvLyBncmVhdGVyIHRoYW4gdGhlIGJjcldpZHRoIG9mIGl0cyBjb250YWluZXIgYnkgMXB4LCBjYXVzaW5nIHRoZSBmaW5hbFxyXG5cdFx0XHQvLyB0b29sdGlwIGJveCB0byBiZSB0b28gc21hbGwgZm9yIGl0cyBjb250ZW50LiBIb3dldmVyLCBldmFsdWF0aW5nXHJcblx0XHRcdC8vIHRoZWlyIHdpZHRocyBvbmUgYWdhaW5zdCB0aGUgb3RoZXIgKGJlbG93KSBzdXJwcmlzaW5nbHkgcmV0dXJuZWRcclxuXHRcdFx0Ly8gZXF1YWxpdHkuIEhhcHBlbmVkIG9ubHkgb25jZSBpbiBDaHJvbWUgNDgsIHdhcyBub3QgYWJsZSB0byByZXByb2R1Y2VcclxuXHRcdFx0Ly8gPT4ganVzdCBoYXZpbmcgZnVuIHdpdGggZmxvYXQgcG9zaXRpb24gdmFsdWVzLi4uXHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgJGNvbnRlbnQgPSB0aGlzLl9fJHRvb2x0aXAuZmluZCgnLnRvb2x0aXBzdGVyLWNvbnRlbnQnKSxcclxuXHRcdFx0XHRoZWlnaHQgPSB0aGlzLl9fJHRvb2x0aXAub3V0ZXJIZWlnaHQoKSxcclxuXHRcdFx0XHRjb250ZW50QmNyID0gJGNvbnRlbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcblx0XHRcdFx0Zml0cyA9IHtcclxuXHRcdFx0XHRcdGhlaWdodDogaGVpZ2h0IDw9IHRoaXMuY29uc3RyYWludHMuaGVpZ2h0LFxyXG5cdFx0XHRcdFx0d2lkdGg6IChcclxuXHRcdFx0XHRcdFx0Ly8gdGhpcyBjb25kaXRpb24gYWNjb3VudHMgZm9yIG1pbi13aWR0aCBwcm9wZXJ0eSB0aGF0XHJcblx0XHRcdFx0XHRcdC8vIG1heSBhcHBseVxyXG5cdFx0XHRcdFx0XHR0b29sdGlwQmNyLndpZHRoIDw9IHRoaXMuY29uc3RyYWludHMud2lkdGhcclxuXHRcdFx0XHRcdFx0XHQvLyB0aGUgLTEgaXMgaGVyZSBiZWNhdXNlIHNjcm9sbFdpZHRoIGFjdHVhbGx5IHJldHVybnNcclxuXHRcdFx0XHRcdFx0XHQvLyBhIHJvdW5kZWQgdmFsdWUsIGFuZCBtYXkgYmUgZ3JlYXRlciB0aGFuIGJjci53aWR0aCBpZlxyXG5cdFx0XHRcdFx0XHRcdC8vIGl0IHdhcyByb3VuZGVkIHVwLiBUaGlzIG1heSBjYXVzZSBhbiBpc3N1ZSBmb3IgY29udGVudHNcclxuXHRcdFx0XHRcdFx0XHQvLyB3aGljaCBhY3R1YWxseSByZWFsbHkgb3ZlcmZsb3cgIGJ5IDFweCBvciBzbywgYnV0IHRoYXRcclxuXHRcdFx0XHRcdFx0XHQvLyBzaG91bGQgYmUgcmFyZS4gTm90IHN1cmUgaG93IHRvIHNvbHZlIHRoaXMgZWZmaWNpZW50bHkuXHJcblx0XHRcdFx0XHRcdFx0Ly8gU2VlIGh0dHA6Ly9ibG9ncy5tc2RuLmNvbS9iL2llL2FyY2hpdmUvMjAxMi8wMi8xNy9zdWItcGl4ZWwtcmVuZGVyaW5nLWFuZC10aGUtY3NzLW9iamVjdC1tb2RlbC5hc3B4XHJcblx0XHRcdFx0XHRcdCYmXHRjb250ZW50QmNyLndpZHRoID49ICRjb250ZW50WzBdLnNjcm9sbFdpZHRoIC0gMVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHRyZXN1bHQuZml0cyA9IGZpdHMuaGVpZ2h0ICYmIGZpdHMud2lkdGg7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIG9sZCB2ZXJzaW9ucyBvZiBJRSBnZXQgdGhlIHdpZHRoIHdyb25nIGZvciBzb21lIHJlYXNvbiBhbmQgaXQgY2F1c2VzXHJcblx0XHQvLyB0aGUgdGV4dCB0byBiZSBicm9rZW4gdG8gYSBuZXcgbGluZSwgc28gd2Ugcm91bmQgaXQgdXAuIElmIHRoZSB3aWR0aFxyXG5cdFx0Ly8gaXMgdGhlIHdpZHRoIG9mIHRoZSBzY3JlZW4gdGhvdWdoLCB3ZSBjYW4gYXNzdW1lIGl0IGlzIGFjY3VyYXRlLlxyXG5cdFx0aWYgKFx0ZW52LklFXHJcblx0XHRcdCYmXHRlbnYuSUUgPD0gMTFcclxuXHRcdFx0JiZcdHJlc3VsdC5zaXplLndpZHRoICE9PSBlbnYud2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aFxyXG5cdFx0KSB7XHJcblx0XHRcdHJlc3VsdC5zaXplLndpZHRoID0gTWF0aC5jZWlsKHJlc3VsdC5zaXplLndpZHRoKSArIDE7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gcXVpY2sgJiBkaXJ0eSBjb21wYXJlIGZ1bmN0aW9uLCBub3QgYmlqZWN0aXZlIG5vciBtdWx0aWRpbWVuc2lvbmFsXHJcbmZ1bmN0aW9uIGFyZUVxdWFsKGEsYikge1xyXG5cdHZhciBzYW1lID0gdHJ1ZTtcclxuXHQkLmVhY2goYSwgZnVuY3Rpb24oaSwgXykge1xyXG5cdFx0aWYgKGJbaV0gPT09IHVuZGVmaW5lZCB8fCBhW2ldICE9PSBiW2ldKSB7XHJcblx0XHRcdHNhbWUgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdHJldHVybiBzYW1lO1xyXG59XHJcblxyXG4vKipcclxuICogQSBmYXN0IGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGFuIGVsZW1lbnQgaXMgc3RpbGwgaW4gdGhlIERPTS4gSXRcclxuICogdHJpZXMgdG8gdXNlIGFuIGlkIGFzIGlkcyBhcmUgaW5kZXhlZCBieSB0aGUgYnJvd3Nlciwgb3IgZmFsbHNcclxuICogYmFjayB0byBqUXVlcnkncyBgY29udGFpbnNgIG1ldGhvZC4gTWF5IGZhaWwgaWYgdHdvIGVsZW1lbnRzXHJcbiAqIGhhdmUgdGhlIHNhbWUgaWQsIGJ1dCBzbyBiZSBpdFxyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gJG9iaiBBIGpRdWVyeS13cmFwcGVkIEhUTUwgZWxlbWVudFxyXG4gKiBAcmV0dXJuIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gYm9keUNvbnRhaW5zKCRvYmopIHtcclxuXHR2YXIgaWQgPSAkb2JqLmF0dHIoJ2lkJyksXHJcblx0XHRlbCA9IGlkID8gZW52LndpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgOiBudWxsO1xyXG5cdC8vIG11c3QgYWxzbyBjaGVjayB0aGF0IHRoZSBlbGVtZW50IHdpdGggdGhlIGlkIGlzIHRoZSBvbmUgd2Ugd2FudFxyXG5cdHJldHVybiBlbCA/IGVsID09PSAkb2JqWzBdIDogJC5jb250YWlucyhlbnYud2luZG93LmRvY3VtZW50LmJvZHksICRvYmpbMF0pO1xyXG59XHJcblxyXG4vLyBkZXRlY3QgSUUgdmVyc2lvbnMgZm9yIGRpcnR5IGZpeGVzXHJcbnZhciB1QSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuaWYgKHVBLmluZGV4T2YoJ21zaWUnKSAhPSAtMSkgZW52LklFID0gcGFyc2VJbnQodUEuc3BsaXQoJ21zaWUnKVsxXSk7XHJcbmVsc2UgaWYgKHVBLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigndHJpZGVudCcpICE9PSAtMSAmJiB1QS5pbmRleE9mKCcgcnY6MTEnKSAhPT0gLTEpIGVudi5JRSA9IDExO1xyXG5lbHNlIGlmICh1QS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2VkZ2UvJykgIT0gLTEpIGVudi5JRSA9IHBhcnNlSW50KHVBLnRvTG93ZXJDYXNlKCkuc3BsaXQoJ2VkZ2UvJylbMV0pO1xyXG5cclxuLy8gZGV0ZWN0aW5nIHN1cHBvcnQgZm9yIENTUyB0cmFuc2l0aW9uc1xyXG5mdW5jdGlvbiB0cmFuc2l0aW9uU3VwcG9ydCgpIHtcclxuXHRcclxuXHQvLyBlbnYud2luZG93IGlzIG5vdCBkZWZpbmVkIHlldCB3aGVuIHRoaXMgaXMgY2FsbGVkXHJcblx0aWYgKCF3aW4pIHJldHVybiBmYWxzZTtcclxuXHRcclxuXHR2YXIgYiA9IHdpbi5kb2N1bWVudC5ib2R5IHx8IHdpbi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXHJcblx0XHRzID0gYi5zdHlsZSxcclxuXHRcdHAgPSAndHJhbnNpdGlvbicsXHJcblx0XHR2ID0gWydNb3onLCAnV2Via2l0JywgJ0todG1sJywgJ08nLCAnbXMnXTtcclxuXHRcclxuXHRpZiAodHlwZW9mIHNbcF0gPT0gJ3N0cmluZycpIHsgcmV0dXJuIHRydWU7IH1cclxuXHRcclxuXHRwID0gcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHAuc3Vic3RyKDEpO1xyXG5cdGZvciAodmFyIGk9MDsgaTx2Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHRpZiAodHlwZW9mIHNbdltpXSArIHBdID09ICdzdHJpbmcnKSB7IHJldHVybiB0cnVlOyB9XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuLy8gd2UnbGwgcmV0dXJuIGpRdWVyeSBmb3IgcGx1Z2lucyBub3QgdG8gaGF2ZSB0byBkZWNsYXJlIGl0IGFzIGEgZGVwZW5kZW5jeSxcclxuLy8gYnV0IGl0J3MgZG9uZSBieSBhIGJ1aWxkIHRhc2sgc2luY2UgaXQgc2hvdWxkIGJlIGluY2x1ZGVkIG9ubHkgb25jZSBhdCB0aGVcclxuLy8gZW5kIHdoZW4gd2UgY29uY2F0ZW5hdGUgdGhlIG1haW4gZmlsZSB3aXRoIGEgcGx1Z2luXHJcbi8vIHNpZGVUaXAgaXMgVG9vbHRpcHN0ZXIncyBkZWZhdWx0IHBsdWdpbi5cclxuLy8gVGhpcyBmaWxlIHdpbGwgYmUgVU1EaWZpZWQgYnkgYSBidWlsZCB0YXNrLlxyXG5cclxudmFyIHBsdWdpbk5hbWUgPSAndG9vbHRpcHN0ZXIuc2lkZVRpcCc7XHJcblxyXG4kLnRvb2x0aXBzdGVyLl9wbHVnaW4oe1xyXG5cdG5hbWU6IHBsdWdpbk5hbWUsXHJcblx0aW5zdGFuY2U6IHtcclxuXHRcdC8qKlxyXG5cdFx0ICogRGVmYXVsdHMgYXJlIHByb3ZpZGVkIGFzIGEgZnVuY3Rpb24gZm9yIGFuIGVhc3kgb3ZlcnJpZGUgYnkgaW5oZXJpdGFuY2VcclxuXHRcdCAqXHJcblx0XHQgKiBAcmV0dXJuIHtvYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBkZWZhdWx0cyBvcHRpb25zXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX2RlZmF1bHRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgc2hvdWxkIGRpc3BsYXkgYW4gYXJyb3cgdGhhdCBwb2ludHMgdG8gdGhlIG9yaWdpblxyXG5cdFx0XHRcdGFycm93OiB0cnVlLFxyXG5cdFx0XHRcdC8vIHRoZSBkaXN0YW5jZSBpbiBwaXhlbHMgYmV0d2VlbiB0aGUgdG9vbHRpcCBhbmQgdGhlIG9yaWdpblxyXG5cdFx0XHRcdGRpc3RhbmNlOiA2LFxyXG5cdFx0XHRcdC8vIGFsbG93cyB0byBlYXNpbHkgY2hhbmdlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdG9vbHRpcFxyXG5cdFx0XHRcdGZ1bmN0aW9uUG9zaXRpb246IG51bGwsXHJcblx0XHRcdFx0bWF4V2lkdGg6IG51bGwsXHJcblx0XHRcdFx0Ly8gdXNlZCB0byBhY2NvbW9kYXRlIHRoZSBhcnJvdyBvZiB0b29sdGlwIGlmIHRoZXJlIGlzIG9uZS5cclxuXHRcdFx0XHQvLyBGaXJzdCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYXJyb3cgdGFyZ2V0IGlzIG5vdCB0b28gY2xvc2VcclxuXHRcdFx0XHQvLyB0byB0aGUgZWRnZSBvZiB0aGUgdG9vbHRpcCwgc28gdGhlIGFycm93IGRvZXMgbm90IG92ZXJmbG93XHJcblx0XHRcdFx0Ly8gdGhlIHRvb2x0aXAuIFNlY29uZGx5IHdoZW4gd2UgcmVwb3NpdGlvbiB0aGUgdG9vbHRpcCB0b1xyXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0aGF0IGl0J3MgcG9zaXRpb25lZCBpbiBzdWNoIGEgd2F5IHRoYXQgdGhlIGFycm93IGlzXHJcblx0XHRcdFx0Ly8gc3RpbGwgcG9pbnRpbmcgYXQgdGhlIHRhcmdldCAoYW5kIG5vdCBhIGZldyBwaXhlbHMgYmV5b25kIGl0KS5cclxuXHRcdFx0XHQvLyBJdCBzaG91bGQgYmUgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIGhhbGYgdGhlIHdpZHRoIG9mXHJcblx0XHRcdFx0Ly8gdGhlIGFycm93IChieSB3aWR0aCB3ZSBtZWFuIHRoZSBzaXplIG9mIHRoZSBzaWRlIHdoaWNoIHRvdWNoZXNcclxuXHRcdFx0XHQvLyB0aGUgc2lkZSBvZiB0aGUgdG9vbHRpcCkuXHJcblx0XHRcdFx0bWluSW50ZXJzZWN0aW9uOiAxNixcclxuXHRcdFx0XHRtaW5XaWR0aDogMCxcclxuXHRcdFx0XHQvLyBkZXByZWNhdGVkIGluIDQuMC4wLiBMaXN0ZWQgZm9yIF9vcHRpb25zRXh0cmFjdCB0byBwaWNrIGl0IHVwXHJcblx0XHRcdFx0cG9zaXRpb246IG51bGwsXHJcblx0XHRcdFx0c2lkZTogJ3RvcCcsXHJcblx0XHRcdFx0Ly8gc2V0IHRvIGZhbHNlIHRvIHBvc2l0aW9uIHRoZSB0b29sdGlwIHJlbGF0aXZlbHkgdG8gdGhlIGRvY3VtZW50IHJhdGhlclxyXG5cdFx0XHRcdC8vIHRoYW4gdGhlIHdpbmRvdyB3aGVuIHdlIG9wZW4gaXRcclxuXHRcdFx0XHR2aWV3cG9ydEF3YXJlOiB0cnVlXHJcblx0XHRcdH07XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFJ1biBvbmNlOiBhdCBpbnN0YW50aWF0aW9uIG9mIHRoZSBwbHVnaW5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge29iamVjdH0gaW5zdGFuY2UgVGhlIHRvb2x0aXBzdGVyIG9iamVjdCB0aGF0IGluc3RhbnRpYXRlZCB0aGlzIHBsdWdpblxyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X19pbml0OiBmdW5jdGlvbihpbnN0YW5jZSkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbGlzdCBvZiBpbnN0YW5jZSB2YXJpYWJsZXNcclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZSA9IGluc3RhbmNlO1xyXG5cdFx0XHRzZWxmLl9fbmFtZXNwYWNlID0gJ3Rvb2x0aXBzdGVyLXNpZGVUaXAtJysgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKjEwMDAwMDApO1xyXG5cdFx0XHRzZWxmLl9fcHJldmlvdXNTdGF0ZSA9ICdjbG9zZWQnO1xyXG5cdFx0XHRzZWxmLl9fb3B0aW9ucztcclxuXHRcdFx0XHJcblx0XHRcdC8vIGluaXRpYWwgZm9ybWF0dGluZ1xyXG5cdFx0XHRzZWxmLl9fb3B0aW9uc0Zvcm1hdCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl9vbignc3RhdGUuJysgc2VsZi5fX25hbWVzcGFjZSwgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZXZlbnQuc3RhdGUgPT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdHNlbGYuX19jbG9zZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmIChldmVudC5zdGF0ZSA9PSAnYXBwZWFyaW5nJyAmJiBzZWxmLl9fcHJldmlvdXNTdGF0ZSA9PSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0c2VsZi5fX2NyZWF0ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzZWxmLl9fcHJldmlvdXNTdGF0ZSA9IGV2ZW50LnN0YXRlO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHJlZm9ybWF0IGV2ZXJ5IHRpbWUgdGhlIG9wdGlvbnMgYXJlIGNoYW5nZWRcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl9vbignb3B0aW9ucy4nKyBzZWxmLl9fbmFtZXNwYWNlLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLl9fb3B0aW9uc0Zvcm1hdCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fb24oJ3JlcG9zaXRpb24uJysgc2VsZi5fX25hbWVzcGFjZSwgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdHNlbGYuX19yZXBvc2l0aW9uKGUuZXZlbnQsIGUuaGVscGVyKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIENhbGxlZCB3aGVuIHRoZSB0b29sdGlwIGhhcyBjbG9zZWRcclxuXHRcdCAqIFxyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X19jbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBkZXRhY2ggb3VyIGNvbnRlbnQgb2JqZWN0IGZpcnN0LCBzbyB0aGUgbmV4dCBqUXVlcnkncyByZW1vdmUoKVxyXG5cdFx0XHQvLyBjYWxsIGRvZXMgbm90IHVuYmluZCBpdHMgZXZlbnQgaGFuZGxlcnNcclxuXHRcdFx0aWYgKHRoaXMuX19pbnN0YW5jZS5jb250ZW50KCkgaW5zdGFuY2VvZiAkKSB7XHJcblx0XHRcdFx0dGhpcy5fX2luc3RhbmNlLmNvbnRlbnQoKS5kZXRhY2goKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gcmVtb3ZlIHRoZSB0b29sdGlwIGZyb20gdGhlIERPTVxyXG5cdFx0XHR0aGlzLl9faW5zdGFuY2UuXyR0b29sdGlwLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLl9faW5zdGFuY2UuXyR0b29sdGlwID0gbnVsbDtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogQ3JlYXRlcyB0aGUgSFRNTCBlbGVtZW50IG9mIHRoZSB0b29sdGlwLlxyXG5cdFx0ICogXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBub3RlOiB3ZSB3cmFwIHdpdGggYSAudG9vbHRpcHN0ZXItYm94IGRpdiB0byBiZSBhYmxlIHRvIHNldCBhIG1hcmdpbiBvbiBpdFxyXG5cdFx0XHQvLyAoLnRvb2x0aXBzdGVyLWJhc2UgbXVzdCBub3QgaGF2ZSBvbmUpXHJcblx0XHRcdHZhciAkaHRtbCA9ICQoXHJcblx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1iYXNlIHRvb2x0aXBzdGVyLXNpZGV0aXBcIj4nICtcclxuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYm94XCI+JyArXHJcblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItY29udGVudFwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1hcnJvd1wiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWFycm93LXVuY3JvcHBlZFwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYXJyb3ctYm9yZGVyXCI+PC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1hcnJvdy1iYWNrZ3JvdW5kXCI+PC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHQnPC9kaXY+J1xyXG5cdFx0XHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaGlkZSBhcnJvdyBpZiBhc2tlZFxyXG5cdFx0XHRpZiAoIXRoaXMuX19vcHRpb25zLmFycm93KSB7XHJcblx0XHRcdFx0JGh0bWxcclxuXHRcdFx0XHRcdC5maW5kKCcudG9vbHRpcHN0ZXItYm94JylcclxuXHRcdFx0XHRcdFx0LmNzcygnbWFyZ2luJywgMClcclxuXHRcdFx0XHRcdFx0LmVuZCgpXHJcblx0XHRcdFx0XHQuZmluZCgnLnRvb2x0aXBzdGVyLWFycm93JylcclxuXHRcdFx0XHRcdFx0LmhpZGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gYXBwbHkgbWluL21heCB3aWR0aCBpZiBhc2tlZFxyXG5cdFx0XHRpZiAodGhpcy5fX29wdGlvbnMubWluV2lkdGgpIHtcclxuXHRcdFx0XHQkaHRtbC5jc3MoJ21pbi13aWR0aCcsIHRoaXMuX19vcHRpb25zLm1pbldpZHRoICsgJ3B4Jyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuX19vcHRpb25zLm1heFdpZHRoKSB7XHJcblx0XHRcdFx0JGh0bWwuY3NzKCdtYXgtd2lkdGgnLCB0aGlzLl9fb3B0aW9ucy5tYXhXaWR0aCArICdweCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLl9faW5zdGFuY2UuXyR0b29sdGlwID0gJGh0bWw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyB0ZWxsIHRoZSBpbnN0YW5jZSB0aGF0IHRoZSB0b29sdGlwIGVsZW1lbnQgaGFzIGJlZW4gY3JlYXRlZFxyXG5cdFx0XHR0aGlzLl9faW5zdGFuY2UuX3RyaWdnZXIoJ2NyZWF0ZWQnKTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogVXNlZCB3aGVuIHRoZSBwbHVnaW4gaXMgdG8gYmUgdW5wbHVnZ2VkXHJcblx0XHQgKlxyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X19kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fX2luc3RhbmNlLl9vZmYoJy4nKyBzZWxmLl9fbmFtZXNwYWNlKTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogKFJlKWNvbXB1dGUgdGhpcy5fX29wdGlvbnMgZnJvbSB0aGUgb3B0aW9ucyBkZWNsYXJlZCB0byB0aGUgaW5zdGFuY2VcclxuXHRcdCAqXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX29wdGlvbnNGb3JtYXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZ2V0IHRoZSBvcHRpb25zXHJcblx0XHRcdHNlbGYuX19vcHRpb25zID0gc2VsZi5fX2luc3RhbmNlLl9vcHRpb25zRXh0cmFjdChwbHVnaW5OYW1lLCBzZWxmLl9fZGVmYXVsdHMoKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgZGVwcmVjYXRlZCBpbiB2NC4wLjBcclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnBvc2l0aW9uKSB7XHJcblx0XHRcdFx0c2VsZi5fX29wdGlvbnMuc2lkZSA9IHNlbGYuX19vcHRpb25zLnBvc2l0aW9uO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBvcHRpb25zIGZvcm1hdHRpbmdcclxuXHRcdFx0XHJcblx0XHRcdC8vIGZvcm1hdCBkaXN0YW5jZSBhcyBhIGZvdXItY2VsbCBhcnJheSBpZiBpdCBhaW4ndCBvbmUgeWV0IGFuZCB0aGVuIG1ha2VcclxuXHRcdFx0Ly8gaXQgYW4gb2JqZWN0IHdpdGggdG9wL2JvdHRvbS9sZWZ0L3JpZ2h0IHByb3BlcnRpZXNcclxuXHRcdFx0aWYgKHR5cGVvZiBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZSAhPSAnb2JqZWN0Jykge1xyXG5cdFx0XHRcdHNlbGYuX19vcHRpb25zLmRpc3RhbmNlID0gW3NlbGYuX19vcHRpb25zLmRpc3RhbmNlXTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuZGlzdGFuY2UubGVuZ3RoIDwgNCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVsxXSA9PT0gdW5kZWZpbmVkKSBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVsxXSA9IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzBdO1xyXG5cdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVsyXSA9PT0gdW5kZWZpbmVkKSBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVsyXSA9IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzBdO1xyXG5cdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVszXSA9PT0gdW5kZWZpbmVkKSBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVszXSA9IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzFdO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNlbGYuX19vcHRpb25zLmRpc3RhbmNlID0ge1xyXG5cdFx0XHRcdFx0dG9wOiBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVswXSxcclxuXHRcdFx0XHRcdHJpZ2h0OiBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVsxXSxcclxuXHRcdFx0XHRcdGJvdHRvbTogc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMl0sXHJcblx0XHRcdFx0XHRsZWZ0OiBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVszXVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGxldCdzIHRyYW5zZm9ybTpcclxuXHRcdFx0Ly8gJ3RvcCcgaW50byBbJ3RvcCcsICdib3R0b20nLCAncmlnaHQnLCAnbGVmdCddXHJcblx0XHRcdC8vICdyaWdodCcgaW50byBbJ3JpZ2h0JywgJ2xlZnQnLCAndG9wJywgJ2JvdHRvbSddXHJcblx0XHRcdC8vICdib3R0b20nIGludG8gWydib3R0b20nLCAndG9wJywgJ3JpZ2h0JywgJ2xlZnQnXVxyXG5cdFx0XHQvLyAnbGVmdCcgaW50byBbJ2xlZnQnLCAncmlnaHQnLCAndG9wJywgJ2JvdHRvbSddXHJcblx0XHRcdGlmICh0eXBlb2Ygc2VsZi5fX29wdGlvbnMuc2lkZSA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBvcHBvc2l0ZXMgPSB7XHJcblx0XHRcdFx0XHQndG9wJzogJ2JvdHRvbScsXHJcblx0XHRcdFx0XHQncmlnaHQnOiAnbGVmdCcsXHJcblx0XHRcdFx0XHQnYm90dG9tJzogJ3RvcCcsXHJcblx0XHRcdFx0XHQnbGVmdCc6ICdyaWdodCdcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNlbGYuX19vcHRpb25zLnNpZGUgPSBbc2VsZi5fX29wdGlvbnMuc2lkZSwgb3Bwb3NpdGVzW3NlbGYuX19vcHRpb25zLnNpZGVdXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuc2lkZVswXSA9PSAnbGVmdCcgfHwgc2VsZi5fX29wdGlvbnMuc2lkZVswXSA9PSAncmlnaHQnKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5zaWRlLnB1c2goJ3RvcCcsICdib3R0b20nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5zaWRlLnB1c2goJ3JpZ2h0JywgJ2xlZnQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIG1pc2NcclxuXHRcdFx0Ly8gZGlzYWJsZSB0aGUgYXJyb3cgaW4gSUU2IHVubGVzcyB0aGUgYXJyb3cgb3B0aW9uIHdhcyBleHBsaWNpdGx5IHNldCB0byB0cnVlXHJcblx0XHRcdGlmIChcdCQudG9vbHRpcHN0ZXIuX2Vudi5JRSA9PT0gNlxyXG5cdFx0XHRcdCYmXHRzZWxmLl9fb3B0aW9ucy5hcnJvdyAhPT0gdHJ1ZVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5hcnJvdyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFRoaXMgbWV0aG9kIG11c3QgY29tcHV0ZSBhbmQgc2V0IHRoZSBwb3NpdGlvbmluZyBwcm9wZXJ0aWVzIG9mIHRoZVxyXG5cdFx0ICogdG9vbHRpcCAobGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0LCBldGMuKS4gSXQgbXVzdCBhbHNvIG1ha2Ugc3VyZSB0aGVcclxuXHRcdCAqIHRvb2x0aXAgaXMgZXZlbnR1YWxseSBhcHBlbmRlZCB0byBpdHMgcGFyZW50IChzaW5jZSB0aGUgZWxlbWVudCBtYXkgYmVcclxuXHRcdCAqIGRldGFjaGVkIGZyb20gdGhlIERPTSBhdCB0aGUgbW9tZW50IHRoZSBtZXRob2QgaXMgY2FsbGVkKS5cclxuXHRcdCAqXHJcblx0XHQgKiBXZSdsbCBldmFsdWF0ZSBwb3NpdGlvbmluZyBzY2VuYXJpb3MgdG8gZmluZCB3aGljaCBzaWRlIGNhbiBjb250YWluIHRoZVxyXG5cdFx0ICogdG9vbHRpcCBpbiB0aGUgYmVzdCB3YXkuIFdlJ2xsIGNvbnNpZGVyIHRoaW5ncyByZWxhdGl2ZWx5IHRvIHRoZSB3aW5kb3dcclxuXHRcdCAqICh1bmxlc3MgdGhlIHVzZXIgYXNrcyBub3QgdG8pLCB0aGVuIHRvIHRoZSBkb2N1bWVudCAoaWYgbmVlZCBiZSwgb3IgaWYgdGhlXHJcblx0XHQgKiB1c2VyIGV4cGxpY2l0bHkgcmVxdWlyZXMgdGhlIHRlc3RzIHRvIHJ1biBvbiB0aGUgZG9jdW1lbnQpLiBGb3IgZWFjaFxyXG5cdFx0ICogc2NlbmFyaW8sIG1lYXN1cmVzIGFyZSB0YWtlbiwgYWxsb3dpbmcgdXMgdG8ga25vdyBob3cgd2VsbCB0aGUgdG9vbHRpcFxyXG5cdFx0ICogaXMgZ29pbmcgdG8gZml0LiBBZnRlciB0aGF0LCBhIHNvcnRpbmcgZnVuY3Rpb24gd2lsbCBsZXQgdXMga25vdyB3aGF0XHJcblx0XHQgKiB0aGUgYmVzdCBzY2VuYXJpbyBpcyAod2UgYWxzbyBhbGxvdyB0aGUgdXNlciB0byBjaG9vc2UgaGlzIGZhdm9yaXRlXHJcblx0XHQgKiBzY2VuYXJpbyBieSB1c2luZyBhbiBldmVudCkuXHJcblx0XHQgKiBcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBoZWxwZXIgQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgdmFyaWFibGVzIHRoYXQgcGx1Z2luXHJcblx0XHQgKiBjcmVhdG9ycyBtYXkgZmluZCB1c2VmdWwgKHNlZSBiZWxvdylcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBoZWxwZXIuZ2VvIEFuIG9iamVjdCB3aXRoIG1hbnkgbGF5b3V0IHByb3BlcnRpZXNcclxuXHRcdCAqIGFib3V0IG9iamVjdHMgb2YgaW50ZXJlc3QgKHdpbmRvdywgZG9jdW1lbnQsIG9yaWdpbikuIFRoaXMgc2hvdWxkIGhlbHBcclxuXHRcdCAqIHBsdWdpbiB1c2VycyBjb21wdXRlIHRoZSBvcHRpbWFsIHBvc2l0aW9uIG9mIHRoZSB0b29sdGlwXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX3JlcG9zaXRpb246IGZ1bmN0aW9uKGV2ZW50LCBoZWxwZXIpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRmaW5hbFJlc3VsdCxcclxuXHRcdFx0XHQvLyB0byBrbm93IHdoZXJlIHRvIHB1dCB0aGUgdG9vbHRpcCwgd2UgbmVlZCB0byBrbm93IG9uIHdoaWNoIHBvaW50XHJcblx0XHRcdFx0Ly8gb2YgdGhlIHggb3IgeSBheGlzIHdlIHNob3VsZCBjZW50ZXIgaXQuIFRoYXQgY29vcmRpbmF0ZSBpcyB0aGUgdGFyZ2V0XHJcblx0XHRcdFx0dGFyZ2V0cyA9IHNlbGYuX190YXJnZXRGaW5kKGhlbHBlciksXHJcblx0XHRcdFx0dGVzdFJlc3VsdHMgPSBbXTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0aGUgdG9vbHRpcCBpcyBkZXRhY2hlZCB3aGlsZSB3ZSBtYWtlIHRlc3RzIG9uIGEgY2xvbmVcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl8kdG9vbHRpcC5kZXRhY2goKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHdlIGNvdWxkIGFjdHVhbGx5IHByb3ZpZGUgdGhlIG9yaWdpbmFsIGVsZW1lbnQgdG8gdGhlIFJ1bGVyIGFuZFxyXG5cdFx0XHQvLyBub3QgYSBjbG9uZSwgYnV0IGl0IGp1c3QgZmVlbHMgcmlnaHQgdG8ga2VlcCBpdCBvdXQgb2YgdGhlXHJcblx0XHRcdC8vIG1hY2hpbmVyeS5cclxuXHRcdFx0dmFyICRjbG9uZSA9IHNlbGYuX19pbnN0YW5jZS5fJHRvb2x0aXAuY2xvbmUoKSxcclxuXHRcdFx0XHQvLyBzdGFydCBwb3NpdGlvbiB0ZXN0cyBzZXNzaW9uXHJcblx0XHRcdFx0cnVsZXIgPSAkLnRvb2x0aXBzdGVyLl9nZXRSdWxlcigkY2xvbmUpLFxyXG5cdFx0XHRcdHNhdGlzZmllZCA9IGZhbHNlLFxyXG5cdFx0XHRcdGFuaW1hdGlvbiA9IHNlbGYuX19pbnN0YW5jZS5vcHRpb24oJ2FuaW1hdGlvbicpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gYW4gYW5pbWF0aW9uIGNsYXNzIGNvdWxkIGNvbnRhaW4gcHJvcGVydGllcyB0aGF0IGRpc3RvcnQgdGhlIHNpemVcclxuXHRcdFx0aWYgKGFuaW1hdGlvbikge1xyXG5cdFx0XHRcdCRjbG9uZS5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItJysgYW5pbWF0aW9uKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gc3RhcnQgZXZhbHVhdGluZyBzY2VuYXJpb3NcclxuXHRcdFx0JC5lYWNoKFsnd2luZG93JywgJ2RvY3VtZW50J10sIGZ1bmN0aW9uKGksIGNvbnRhaW5lcikge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciB0YWtlVGVzdCA9IG51bGw7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gbGV0IHRoZSB1c2VyIGRlY2lkZSB0byBrZWVwIG9uIHRlc3Rpbmcgb3Igbm90XHJcblx0XHRcdFx0c2VsZi5fX2luc3RhbmNlLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdGNvbnRhaW5lcjogY29udGFpbmVyLFxyXG5cdFx0XHRcdFx0aGVscGVyOiBoZWxwZXIsXHJcblx0XHRcdFx0XHRzYXRpc2ZpZWQ6IHNhdGlzZmllZCxcclxuXHRcdFx0XHRcdHRha2VUZXN0OiBmdW5jdGlvbihib29sKSB7XHJcblx0XHRcdFx0XHRcdHRha2VUZXN0ID0gYm9vbDtcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRyZXN1bHRzOiB0ZXN0UmVzdWx0cyxcclxuXHRcdFx0XHRcdHR5cGU6ICdwb3NpdGlvblRlc3QnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKFx0dGFrZVRlc3QgPT0gdHJ1ZVxyXG5cdFx0XHRcdFx0fHxcdChcdHRha2VUZXN0ICE9IGZhbHNlXHJcblx0XHRcdFx0XHRcdCYmXHRzYXRpc2ZpZWQgPT0gZmFsc2VcclxuXHRcdFx0XHRcdFx0XHQvLyBza2lwIHRoZSB3aW5kb3cgc2NlbmFyaW9zIGlmIGFza2VkLiBJZiB0aGV5IGFyZSByZWludGVncmF0ZWQgYnlcclxuXHRcdFx0XHRcdFx0XHQvLyB0aGUgY2FsbGJhY2sgb2YgdGhlIHBvc2l0aW9uVGVzdCBldmVudCwgdGhleSB3aWxsIGhhdmUgdG8gYmVcclxuXHRcdFx0XHRcdFx0XHQvLyBleGNsdWRlZCB1c2luZyB0aGUgY2FsbGJhY2sgb2YgcG9zaXRpb25UZXN0ZWRcclxuXHRcdFx0XHRcdFx0JiZcdChjb250YWluZXIgIT0gJ3dpbmRvdycgfHwgc2VsZi5fX29wdGlvbnMudmlld3BvcnRBd2FyZSlcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gZm9yIGVhY2ggYWxsb3dlZCBzaWRlXHJcblx0XHRcdFx0XHRmb3IgKHZhciBpPTA7IGkgPCBzZWxmLl9fb3B0aW9ucy5zaWRlLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2YXIgZGlzdGFuY2UgPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRob3Jpem9udGFsOiAwLFxyXG5cdFx0XHRcdFx0XHRcdFx0dmVydGljYWw6IDBcclxuXHRcdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHRcdHNpZGUgPSBzZWxmLl9fb3B0aW9ucy5zaWRlW2ldO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKHNpZGUgPT0gJ3RvcCcgfHwgc2lkZSA9PSAnYm90dG9tJykge1xyXG5cdFx0XHRcdFx0XHRcdGRpc3RhbmNlLnZlcnRpY2FsID0gc2VsZi5fX29wdGlvbnMuZGlzdGFuY2Vbc2lkZV07XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZGlzdGFuY2UuaG9yaXpvbnRhbCA9IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlW3NpZGVdO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyB0aGlzIG1heSBoYXZlIGFuIGVmZmVjdCBvbiB0aGUgc2l6ZSBvZiB0aGUgdG9vbHRpcCBpZiB0aGVyZSBhcmUgY3NzXHJcblx0XHRcdFx0XHRcdC8vIHJ1bGVzIGZvciB0aGUgYXJyb3cgb3Igc29tZXRoaW5nIGVsc2VcclxuXHRcdFx0XHRcdFx0c2VsZi5fX3NpZGVDaGFuZ2UoJGNsb25lLCBzaWRlKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdCQuZWFjaChbJ25hdHVyYWwnLCAnY29uc3RyYWluZWQnXSwgZnVuY3Rpb24oaSwgbW9kZSkge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHRha2VUZXN0ID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBlbWl0IGFuIGV2ZW50IG9uIHRoZSBpbnN0YW5jZVxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX19pbnN0YW5jZS5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI6IGNvbnRhaW5lcixcclxuXHRcdFx0XHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdFx0XHRcdGhlbHBlcjogaGVscGVyLFxyXG5cdFx0XHRcdFx0XHRcdFx0bW9kZTogbW9kZSxcclxuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdHM6IHRlc3RSZXN1bHRzLFxyXG5cdFx0XHRcdFx0XHRcdFx0c2F0aXNmaWVkOiBzYXRpc2ZpZWQsXHJcblx0XHRcdFx0XHRcdFx0XHRzaWRlOiBzaWRlLFxyXG5cdFx0XHRcdFx0XHRcdFx0dGFrZVRlc3Q6IGZ1bmN0aW9uKGJvb2wpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGFrZVRlc3QgPSBib29sO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0XHRcdHR5cGU6ICdwb3NpdGlvblRlc3QnXHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKFx0dGFrZVRlc3QgPT0gdHJ1ZVxyXG5cdFx0XHRcdFx0XHRcdFx0fHxcdChcdHRha2VUZXN0ICE9IGZhbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRcdCYmXHRzYXRpc2ZpZWQgPT0gZmFsc2VcclxuXHRcdFx0XHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHRlc3RSZXN1bHQgPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjogY29udGFpbmVyLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB3ZSBsZXQgdGhlIGRpc3RhbmNlIGFzIGFuIG9iamVjdCBoZXJlLCBpdCBjYW4gbWFrZSB0aGluZ3MgYSBsaXR0bGUgZWFzaWVyXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGR1cmluZyB0aGUgdXNlcidzIGNhbGN1bGF0aW9ucyBhdCBwb3NpdGlvblRlc3QvcG9zaXRpb25UZXN0ZWRcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZGlzdGFuY2U6IGRpc3RhbmNlLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB3aGV0aGVyIHRoZSB0b29sdGlwIGNhbiBmaXQgaW4gdGhlIHNpemUgb2YgdGhlIHZpZXdwb3J0IChkb2VzIG5vdCBtZWFuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHRoYXQgd2UnbGwgYmUgYWJsZSB0byBtYWtlIGl0IGluaXRpYWxseSBlbnRpcmVseSB2aXNpYmxlLCBzZWUgJ3dob2xlJylcclxuXHRcdFx0XHRcdFx0XHRcdFx0Zml0czogbnVsbCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0bW9kZTogbW9kZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0b3V0ZXJTaXplOiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzaWRlOiBzaWRlLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzaXplOiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0YXJnZXQ6IHRhcmdldHNbc2lkZV0sXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGNoZWNrIGlmIHRoZSBvcmlnaW4gaGFzIGVub3VnaCBzdXJmYWNlIG9uIHNjcmVlbiBmb3IgdGhlIHRvb2x0aXAgdG9cclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gYWltIGF0IGl0IHdpdGhvdXQgb3ZlcmZsb3dpbmcgdGhlIHZpZXdwb3J0ICh0aGlzIGlzIGR1ZSB0byB0aGUgdGhpY2tuZXNzXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIG9mIHRoZSBhcnJvdyByZXByZXNlbnRlZCBieSB0aGUgbWluSW50ZXJzZWN0aW9uIGxlbmd0aCkuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElmIG5vdCwgdGhlIHRvb2x0aXAgd2lsbCBoYXZlIHRvIGJlIHBhcnRseSBvciBlbnRpcmVseSBvZmYgc2NyZWVuIGluXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIG9yZGVyIHRvIHN0YXkgZG9ja2VkIHRvIHRoZSBvcmlnaW4uIFRoaXMgdmFsdWUgd2lsbCBzdGF5IG51bGwgd2hlbiB0aGVcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gY29udGFpbmVyIGlzIHRoZSBkb2N1bWVudCwgYXMgaXQgaXMgbm90IHJlbGV2YW50XHJcblx0XHRcdFx0XHRcdFx0XHRcdHdob2xlOiBudWxsXHJcblx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBnZXQgdGhlIHNpemUgb2YgdGhlIHRvb2x0aXAgd2l0aCBvciB3aXRob3V0IHNpemUgY29uc3RyYWludHNcclxuXHRcdFx0XHRcdFx0XHRcdHZhciBydWxlckNvbmZpZ3VyZWQgPSAobW9kZSA9PSAnbmF0dXJhbCcpID9cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRydWxlci5mcmVlKCkgOlxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJ1bGVyLmNvbnN0cmFpbihcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhlbHBlci5nZW8uYXZhaWxhYmxlW2NvbnRhaW5lcl1bc2lkZV0ud2lkdGggLSBkaXN0YW5jZS5ob3Jpem9udGFsLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGVscGVyLmdlby5hdmFpbGFibGVbY29udGFpbmVyXVtzaWRlXS5oZWlnaHQgLSBkaXN0YW5jZS52ZXJ0aWNhbFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCksXHJcblx0XHRcdFx0XHRcdFx0XHRcdHJ1bGVyUmVzdWx0cyA9IHJ1bGVyQ29uZmlndXJlZC5tZWFzdXJlKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHQuc2l6ZSA9IHJ1bGVyUmVzdWx0cy5zaXplO1xyXG5cdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdC5vdXRlclNpemUgPSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGhlaWdodDogcnVsZXJSZXN1bHRzLnNpemUuaGVpZ2h0ICsgZGlzdGFuY2UudmVydGljYWwsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHdpZHRoOiBydWxlclJlc3VsdHMuc2l6ZS53aWR0aCArIGRpc3RhbmNlLmhvcml6b250YWxcclxuXHRcdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChtb2RlID09ICduYXR1cmFsJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYoXHRcdGhlbHBlci5nZW8uYXZhaWxhYmxlW2NvbnRhaW5lcl1bc2lkZV0ud2lkdGggPj0gdGVzdFJlc3VsdC5vdXRlclNpemUud2lkdGhcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQmJlx0aGVscGVyLmdlby5hdmFpbGFibGVbY29udGFpbmVyXVtzaWRlXS5oZWlnaHQgPj0gdGVzdFJlc3VsdC5vdXRlclNpemUuaGVpZ2h0XHJcblx0XHRcdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHQuZml0cyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdC5maXRzID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0LmZpdHMgPSBydWxlclJlc3VsdHMuZml0cztcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGNvbnRhaW5lciA9PSAnd2luZG93Jykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCF0ZXN0UmVzdWx0LmZpdHMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0Lndob2xlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNpZGUgPT0gJ3RvcCcgfHwgc2lkZSA9PSAnYm90dG9tJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0Lndob2xlID0gKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCA+PSBzZWxmLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JiZcdGhlbHBlci5nZW8ud2luZG93LnNpemUud2lkdGggLSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCA+PSBzZWxmLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdC53aG9sZSA9IChcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tID49IHNlbGYuX19vcHRpb25zLm1pbkludGVyc2VjdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQmJlx0aGVscGVyLmdlby53aW5kb3cuc2l6ZS5oZWlnaHQgLSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wID49IHNlbGYuX19vcHRpb25zLm1pbkludGVyc2VjdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdHMucHVzaCh0ZXN0UmVzdWx0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gd2UgZG9uJ3QgbmVlZCB0byBjb21wdXRlIG1vcmUgcG9zaXRpb25zIGlmIHdlIGhhdmUgb25lIGZ1bGx5IG9uIHNjcmVlblxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRlc3RSZXN1bHQud2hvbGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2F0aXNmaWVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBkb24ndCBydW4gdGhlIGNvbnN0cmFpbmVkIHRlc3QgdW5sZXNzIHRoZSBuYXR1cmFsIHdpZHRoIHdhcyBncmVhdGVyXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHRoYW4gdGhlIGF2YWlsYWJsZSB3aWR0aCwgb3RoZXJ3aXNlIGl0J3MgcG9pbnRsZXNzIGFzIHdlIGtub3cgaXRcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gd291bGRuJ3QgZml0IGVpdGhlclxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoXHR0ZXN0UmVzdWx0Lm1vZGUgPT0gJ25hdHVyYWwnXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JiZcdChcdHRlc3RSZXN1bHQuZml0c1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fHxcdHRlc3RSZXN1bHQuc2l6ZS53aWR0aCA8PSBoZWxwZXIuZ2VvLmF2YWlsYWJsZVtjb250YWluZXJdW3NpZGVdLndpZHRoXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyB0aGUgdXNlciBtYXkgZWxpbWluYXRlIHRoZSB1bndhbnRlZCBzY2VuYXJpb3MgZnJvbSB0ZXN0UmVzdWx0cywgYnV0IGhlJ3NcclxuXHRcdFx0Ly8gbm90IHN1cHBvc2VkIHRvIGFsdGVyIHRoZW0gYXQgdGhpcyBwb2ludC4gZnVuY3Rpb25Qb3NpdGlvbiBhbmQgdGhlXHJcblx0XHRcdC8vIHBvc2l0aW9uIGV2ZW50IHNlcnZlIHRoYXQgcHVycG9zZS5cclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRlZGl0OiBmdW5jdGlvbihyKSB7XHJcblx0XHRcdFx0XHR0ZXN0UmVzdWx0cyA9IHI7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0aGVscGVyOiBoZWxwZXIsXHJcblx0XHRcdFx0cmVzdWx0czogdGVzdFJlc3VsdHMsXHJcblx0XHRcdFx0dHlwZTogJ3Bvc2l0aW9uVGVzdGVkJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8qKlxyXG5cdFx0XHQgKiBTb3J0IHRoZSBzY2VuYXJpb3MgdG8gZmluZCB0aGUgZmF2b3JpdGUgb25lLlxyXG5cdFx0XHQgKiBcclxuXHRcdFx0ICogVGhlIGZhdm9yaXRlIHNjZW5hcmlvIGlzIHdoZW4gd2UgY2FuIGZ1bGx5IGRpc3BsYXkgdGhlIHRvb2x0aXAgb24gc2NyZWVuLFxyXG5cdFx0XHQgKiBldmVuIGlmIGl0IG1lYW5zIHRoYXQgdGhlIG1pZGRsZSBvZiB0aGUgdG9vbHRpcCBpcyBubyBsb25nZXIgY2VudGVyZWQgb25cclxuXHRcdFx0ICogdGhlIG1pZGRsZSBvZiB0aGUgb3JpZ2luICh3aGVuIHRoZSBvcmlnaW4gaXMgbmVhciB0aGUgZWRnZSBvZiB0aGUgc2NyZWVuXHJcblx0XHRcdCAqIG9yIGV2ZW4gcGFydGx5IG9mZiBzY3JlZW4pLiBXZSB3YW50IHRoZSB0b29sdGlwIG9uIHRoZSBwcmVmZXJyZWQgc2lkZSxcclxuXHRcdFx0ICogZXZlbiBpZiBpdCBtZWFucyB0aGF0IHdlIGhhdmUgdG8gdXNlIGEgY29uc3RyYWluZWQgc2l6ZSByYXRoZXIgdGhhbiBhXHJcblx0XHRcdCAqIG5hdHVyYWwgb25lIChhcyBsb25nIGFzIGl0IGZpdHMpLiBXaGVuIHRoZSBvcmlnaW4gaXMgb2ZmIHNjcmVlbiBhdCB0aGUgdG9wXHJcblx0XHRcdCAqIHRoZSB0b29sdGlwIHdpbGwgYmUgcG9zaXRpb25lZCBhdCB0aGUgYm90dG9tIChpZiBhbGxvd2VkKSwgaWYgdGhlIG9yaWdpblxyXG5cdFx0XHQgKiBpcyBvZmYgc2NyZWVuIG9uIHRoZSByaWdodCwgaXQgd2lsbCBiZSBwb3NpdGlvbmVkIG9uIHRoZSBsZWZ0LCBldGMuXHJcblx0XHRcdCAqIElmIHRoZXJlIGFyZSBubyBzY2VuYXJpb3Mgd2hlcmUgdGhlIHRvb2x0aXAgY2FuIGZpdCBvbiBzY3JlZW4sIG9yIGlmIHRoZVxyXG5cdFx0XHQgKiB1c2VyIGRvZXMgbm90IHdhbnQgdGhlIHRvb2x0aXAgdG8gZml0IG9uIHNjcmVlbiAodmlld3BvcnRBd2FyZSA9PSBmYWxzZSksXHJcblx0XHRcdCAqIHdlIGZhbGwgYmFjayB0byB0aGUgc2NlbmFyaW9zIHJlbGF0aXZlIHRvIHRoZSBkb2N1bWVudC5cclxuXHRcdFx0ICogXHJcblx0XHRcdCAqIFdoZW4gdGhlIHRvb2x0aXAgaXMgYmlnZ2VyIHRoYW4gdGhlIHZpZXdwb3J0IGluIGVpdGhlciBkaW1lbnNpb24sIHdlIHN0b3BcclxuXHRcdFx0ICogbG9va2luZyBhdCB0aGUgd2luZG93IHNjZW5hcmlvcyBhbmQgY29uc2lkZXIgdGhlIGRvY3VtZW50IHNjZW5hcmlvcyBvbmx5LFxyXG5cdFx0XHQgKiB3aXRoIHRoZSBzYW1lIGxvZ2ljIHRvIGZpbmQgb24gd2hpY2ggc2lkZSBpdCB3b3VsZCBmaXQgYmVzdC5cclxuXHRcdFx0ICogXHJcblx0XHRcdCAqIElmIHRoZSB0b29sdGlwIGNhbm5vdCBmaXQgdGhlIGRvY3VtZW50IG9uIGFueSBzaWRlLCB3ZSBmb3JjZSBpdCBhdCB0aGVcclxuXHRcdFx0ICogYm90dG9tLCBzbyBhdCBsZWFzdCB0aGUgdXNlciBjYW4gc2Nyb2xsIHRvIHNlZSBpdC5cclxuIFx0XHRcdCAqL1xyXG5cdFx0XHR0ZXN0UmVzdWx0cy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBiZXN0IGlmIGl0J3Mgd2hvbGUgKHRoZSB0b29sdGlwIGZpdHMgYW5kIGFkYXB0cyB0byB0aGUgdmlld3BvcnQpXHJcblx0XHRcdFx0aWYgKGEud2hvbGUgJiYgIWIud2hvbGUpIHtcclxuXHRcdFx0XHRcdHJldHVybiAtMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoIWEud2hvbGUgJiYgYi53aG9sZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKGEud2hvbGUgJiYgYi53aG9sZSkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgYWkgPSBzZWxmLl9fb3B0aW9ucy5zaWRlLmluZGV4T2YoYS5zaWRlKSxcclxuXHRcdFx0XHRcdFx0YmkgPSBzZWxmLl9fb3B0aW9ucy5zaWRlLmluZGV4T2YoYi5zaWRlKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gdXNlIHRoZSB1c2VyJ3Mgc2lkZXMgZmFsbGJhY2sgYXJyYXlcclxuXHRcdFx0XHRcdGlmIChhaSA8IGJpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAtMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKGFpID4gYmkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gd2lsbCBiZSB1c2VkIGlmIHRoZSB1c2VyIGZvcmNlZCB0aGUgdGVzdHMgdG8gY29udGludWVcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGEubW9kZSA9PSAnbmF0dXJhbCcgPyAtMSA6IDE7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBiZXR0ZXIgaWYgaXQgZml0c1xyXG5cdFx0XHRcdFx0aWYgKGEuZml0cyAmJiAhYi5maXRzKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAtMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKCFhLmZpdHMgJiYgYi5maXRzKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoYS5maXRzICYmIGIuZml0cykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGFpID0gc2VsZi5fX29wdGlvbnMuc2lkZS5pbmRleE9mKGEuc2lkZSksXHJcblx0XHRcdFx0XHRcdFx0YmkgPSBzZWxmLl9fb3B0aW9ucy5zaWRlLmluZGV4T2YoYi5zaWRlKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHVzZSB0aGUgdXNlcidzIHNpZGVzIGZhbGxiYWNrIGFycmF5XHJcblx0XHRcdFx0XHRcdGlmIChhaSA8IGJpKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2UgaWYgKGFpID4gYmkpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHQvLyB3aWxsIGJlIHVzZWQgaWYgdGhlIHVzZXIgZm9yY2VkIHRoZSB0ZXN0cyB0byBjb250aW51ZVxyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBhLm1vZGUgPT0gJ25hdHVyYWwnID8gLTEgOiAxO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGlmIGV2ZXJ5dGhpbmcgZmFpbGVkLCB0aGlzIHdpbGwgZ2l2ZSBhIHByZWZlcmVuY2UgdG8gdGhlIGNhc2Ugd2hlcmVcclxuXHRcdFx0XHRcdFx0Ly8gdGhlIHRvb2x0aXAgb3ZlcmZsb3dzIHRoZSBkb2N1bWVudCBhdCB0aGUgYm90dG9tXHJcblx0XHRcdFx0XHRcdGlmIChcdGEuY29udGFpbmVyID09ICdkb2N1bWVudCdcclxuXHRcdFx0XHRcdFx0XHQmJlx0YS5zaWRlID09ICdib3R0b20nXHJcblx0XHRcdFx0XHRcdFx0JiZcdGEubW9kZSA9PSAnbmF0dXJhbCdcclxuXHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiAxO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGZpbmFsUmVzdWx0ID0gdGVzdFJlc3VsdHNbMF07XHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbm93IGxldCdzIGZpbmQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSB0b29sdGlwIHJlbGF0aXZlbHkgdG8gdGhlIHdpbmRvd1xyXG5cdFx0XHRmaW5hbFJlc3VsdC5jb29yZCA9IHt9O1xyXG5cdFx0XHRcclxuXHRcdFx0c3dpdGNoIChmaW5hbFJlc3VsdC5zaWRlKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2FzZSAnbGVmdCc6XHJcblx0XHRcdFx0Y2FzZSAncmlnaHQnOlxyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQudG9wID0gTWF0aC5mbG9vcihmaW5hbFJlc3VsdC50YXJnZXQgLSBmaW5hbFJlc3VsdC5zaXplLmhlaWdodCAvIDIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2FzZSAnYm90dG9tJzpcclxuXHRcdFx0XHRjYXNlICd0b3AnOlxyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IE1hdGguZmxvb3IoZmluYWxSZXN1bHQudGFyZ2V0IC0gZmluYWxSZXN1bHQuc2l6ZS53aWR0aCAvIDIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHN3aXRjaCAoZmluYWxSZXN1bHQuc2lkZSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgJ2xlZnQnOlxyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0IC0gZmluYWxSZXN1bHQub3V0ZXJTaXplLndpZHRoO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2FzZSAncmlnaHQnOlxyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCArIGZpbmFsUmVzdWx0LmRpc3RhbmNlLmhvcml6b250YWw7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjYXNlICd0b3AnOlxyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQudG9wID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCAtIGZpbmFsUmVzdWx0Lm91dGVyU2l6ZS5oZWlnaHQ7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjYXNlICdib3R0b20nOlxyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQudG9wID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSArIGZpbmFsUmVzdWx0LmRpc3RhbmNlLnZlcnRpY2FsO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGNhbiBwb3RlbnRpYWxseSBiZSBjb250YWluZWQgd2l0aGluIHRoZSB2aWV3cG9ydCBkaW1lbnNpb25zXHJcblx0XHRcdC8vIGFuZCB0aGF0IHdlIGFyZSBhc2tlZCB0byBtYWtlIGl0IGZpdCBvbiBzY3JlZW5cclxuXHRcdFx0aWYgKGZpbmFsUmVzdWx0LmNvbnRhaW5lciA9PSAnd2luZG93Jykge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIG92ZXJmbG93cyB0aGUgdmlld3BvcnQsIHdlJ2xsIG1vdmUgaXQgYWNjb3JkaW5nbHkgKHRoZW4gaXQgd2lsbFxyXG5cdFx0XHRcdC8vIG5vdCBiZSBjZW50ZXJlZCBvbiB0aGUgbWlkZGxlIG9mIHRoZSBvcmlnaW4gYW55bW9yZSkuIFdlIG9ubHkgbW92ZSBob3Jpem9udGFsbHlcclxuXHRcdFx0XHQvLyBmb3IgdG9wIGFuZCBib3R0b20gdG9vbHRpcHMgYW5kIHZpY2UgdmVyc2EuXHJcblx0XHRcdFx0aWYgKGZpbmFsUmVzdWx0LnNpZGUgPT0gJ3RvcCcgfHwgZmluYWxSZXN1bHQuc2lkZSA9PSAnYm90dG9tJykge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBpZiB0aGVyZSBpcyBhbiBvdmVyZmxvdyBvbiB0aGUgbGVmdFxyXG5cdFx0XHRcdFx0aWYgKGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPCAwKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBwcmV2ZW50IHRoZSBvdmVyZmxvdyB1bmxlc3MgdGhlIG9yaWdpbiBpdHNlbGYgZ2V0cyBvZmYgc2NyZWVuIChtaW51cyB0aGVcclxuXHRcdFx0XHRcdFx0Ly8gbWFyZ2luIG5lZWRlZCB0byBrZWVwIHRoZSBhcnJvdyBwb2ludGluZyBhdCB0aGUgdGFyZ2V0KVxyXG5cdFx0XHRcdFx0XHRpZiAoaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0IC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uID49IDApIHtcclxuXHRcdFx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gMDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0IC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIC0gMTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gb3IgYW4gb3ZlcmZsb3cgb24gdGhlIHJpZ2h0XHJcblx0XHRcdFx0XHRlbHNlIGlmIChmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID4gaGVscGVyLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGZpbmFsUmVzdWx0LnNpemUud2lkdGgpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiA8PSBoZWxwZXIuZ2VvLndpbmRvdy5zaXplLndpZHRoKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IGhlbHBlci5nZW8ud2luZG93LnNpemUud2lkdGggLSBmaW5hbFJlc3VsdC5zaXplLndpZHRoO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiArIDEgLSBmaW5hbFJlc3VsdC5zaXplLndpZHRoO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBvdmVyZmxvdyBhdCB0aGUgdG9wXHJcblx0XHRcdFx0XHRpZiAoZmluYWxSZXN1bHQuY29vcmQudG9wIDwgMCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPj0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA9IDA7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQudG9wID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiAtIDE7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIG9yIGF0IHRoZSBib3R0b21cclxuXHRcdFx0XHRcdGVsc2UgaWYgKGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA+IGhlbHBlci5nZW8ud2luZG93LnNpemUuaGVpZ2h0IC0gZmluYWxSZXN1bHQuc2l6ZS5oZWlnaHQpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIDw9IGhlbHBlci5nZW8ud2luZG93LnNpemUuaGVpZ2h0KSB7XHJcblx0XHRcdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQudG9wID0gaGVscGVyLmdlby53aW5kb3cuc2l6ZS5oZWlnaHQgLSBmaW5hbFJlc3VsdC5zaXplLmhlaWdodDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC50b3AgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uICsgMSAtIGZpbmFsUmVzdWx0LnNpemUuaGVpZ2h0O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHRoZXJlIG1pZ2h0IGJlIG92ZXJmbG93IGhlcmUgdG9vIGJ1dCBpdCdzIGVhc2llciB0byBoYW5kbGUuIElmIHRoZXJlIGhhc1xyXG5cdFx0XHRcdC8vIHRvIGJlIGFuIG92ZXJmbG93LCB3ZSdsbCBtYWtlIHN1cmUgaXQncyBvbiB0aGUgcmlnaHQgc2lkZSBvZiB0aGUgc2NyZWVuXHJcblx0XHRcdFx0Ly8gKGJlY2F1c2UgdGhlIGJyb3dzZXIgd2lsbCBleHRlbmQgdGhlIGRvY3VtZW50IHNpemUgaWYgdGhlcmUgaXMgYW4gb3ZlcmZsb3dcclxuXHRcdFx0XHQvLyBvbiB0aGUgcmlnaHQsIGJ1dCBub3Qgb24gdGhlIGxlZnQpLiBUaGUgc29ydCBmdW5jdGlvbiBhYm92ZSBoYXMgYWxyZWFkeVxyXG5cdFx0XHRcdC8vIG1hZGUgc3VyZSB0aGF0IGEgYm90dG9tIGRvY3VtZW50IG92ZXJmbG93IGlzIHByZWZlcnJlZCB0byBhIHRvcCBvdmVyZmxvdyxcclxuXHRcdFx0XHQvLyBzbyB3ZSBkb24ndCBoYXZlIHRvIGNhcmUgYWJvdXQgaXQuXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gaWYgdGhlcmUgaXMgYW4gb3ZlcmZsb3cgb24gdGhlIHJpZ2h0XHJcblx0XHRcdFx0aWYgKGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPiBoZWxwZXIuZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gZmluYWxSZXN1bHQuc2l6ZS53aWR0aCkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyB0aGlzIG1heSBhY3R1YWxseSBjcmVhdGUgb24gb3ZlcmZsb3cgb24gdGhlIGxlZnQgYnV0IHdlJ2xsIGZpeCBpdCBpbiBhIHNlY1xyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IGhlbHBlci5nZW8ud2luZG93LnNpemUud2lkdGggLSBmaW5hbFJlc3VsdC5zaXplLndpZHRoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBpZiB0aGVyZSBpcyBhbiBvdmVyZmxvdyBvbiB0aGUgbGVmdFxyXG5cdFx0XHRcdGlmIChmaW5hbFJlc3VsdC5jb29yZC5sZWZ0IDwgMCkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBkb24ndCBjYXJlIGlmIGl0IG92ZXJmbG93cyB0aGUgcmlnaHQgYWZ0ZXIgdGhhdCwgd2UgbWFkZSBvdXIgYmVzdFxyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gc3VibWl0IHRoZSBwb3NpdGlvbmluZyBwcm9wb3NhbCB0byB0aGUgdXNlciBmdW5jdGlvbiB3aGljaCBtYXkgY2hvb3NlIHRvIGNoYW5nZVxyXG5cdFx0XHQvLyB0aGUgc2lkZSwgc2l6ZSBhbmQvb3IgdGhlIGNvb3JkaW5hdGVzXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBmaXJzdCwgc2V0IHRoZSBydWxlcyB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSBwcm9wb3NlZCBzaWRlOiBpdCBtYXkgY2hhbmdlXHJcblx0XHRcdC8vIHRoZSBzaXplIG9mIHRoZSB0b29sdGlwLCBhbmQgdGhlIGN1c3RvbSBmdW5jdGlvblBvc2l0aW9uIG1heSB3YW50IHRvIGRldGVjdCB0aGVcclxuXHRcdFx0Ly8gc2l6ZSBvZiBzb21ldGhpbmcgYmVmb3JlIG1ha2luZyBhIGRlY2lzaW9uLiBTbyBsZXQncyBtYWtlIHRoaW5ncyBlYXNpZXIgZm9yIHRoZVxyXG5cdFx0XHQvLyBpbXBsZW1lbnRvclxyXG5cdFx0XHRzZWxmLl9fc2lkZUNoYW5nZSgkY2xvbmUsIGZpbmFsUmVzdWx0LnNpZGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gYWRkIHNvbWUgdmFyaWFibGVzIHRvIHRoZSBoZWxwZXJcclxuXHRcdFx0aGVscGVyLnRvb2x0aXBDbG9uZSA9ICRjbG9uZVswXTtcclxuXHRcdFx0aGVscGVyLnRvb2x0aXBQYXJlbnQgPSBzZWxmLl9faW5zdGFuY2Uub3B0aW9uKCdwYXJlbnQnKS5wYXJlbnRbMF07XHJcblx0XHRcdC8vIG1vdmUgaW5mb3JtYXRpdmUgdmFsdWVzIHRvIHRoZSBoZWxwZXJcclxuXHRcdFx0aGVscGVyLm1vZGUgPSBmaW5hbFJlc3VsdC5tb2RlO1xyXG5cdFx0XHRoZWxwZXIud2hvbGUgPSBmaW5hbFJlc3VsdC53aG9sZTtcclxuXHRcdFx0Ly8gYWRkIHNvbWUgdmFyaWFibGVzIHRvIHRoZSBoZWxwZXIgZm9yIHRoZSBmdW5jdGlvblBvc2l0aW9uIGNhbGxiYWNrICh0aGVzZVxyXG5cdFx0XHQvLyB3aWxsIGFsc28gYmUgYWRkZWQgdG8gdGhlIGV2ZW50IGZpcmVkIGJ5IHNlbGYuX19pbnN0YW5jZS5fdHJpZ2dlciBidXQgdGhhdCdzXHJcblx0XHRcdC8vIG9rLCB3ZSdyZSBqdXN0IGJlaW5nIGNvbnNpc3RlbnQpXHJcblx0XHRcdGhlbHBlci5vcmlnaW4gPSBzZWxmLl9faW5zdGFuY2UuXyRvcmlnaW5bMF07XHJcblx0XHRcdGhlbHBlci50b29sdGlwID0gc2VsZi5fX2luc3RhbmNlLl8kdG9vbHRpcFswXTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGxlYXZlIG9ubHkgdGhlIGFjdGlvbmFibGUgdmFsdWVzIGluIHRoZXJlIGZvciBmdW5jdGlvblBvc2l0aW9uXHJcblx0XHRcdGRlbGV0ZSBmaW5hbFJlc3VsdC5jb250YWluZXI7XHJcblx0XHRcdGRlbGV0ZSBmaW5hbFJlc3VsdC5maXRzO1xyXG5cdFx0XHRkZWxldGUgZmluYWxSZXN1bHQubW9kZTtcclxuXHRcdFx0ZGVsZXRlIGZpbmFsUmVzdWx0Lm91dGVyU2l6ZTtcclxuXHRcdFx0ZGVsZXRlIGZpbmFsUmVzdWx0Lndob2xlO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8ga2VlcCBvbmx5IHRoZSBkaXN0YW5jZSBvbiB0aGUgcmVsZXZhbnQgc2lkZSwgZm9yIGNsYXJpdHlcclxuXHRcdFx0ZmluYWxSZXN1bHQuZGlzdGFuY2UgPSBmaW5hbFJlc3VsdC5kaXN0YW5jZS5ob3Jpem9udGFsIHx8IGZpbmFsUmVzdWx0LmRpc3RhbmNlLnZlcnRpY2FsO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gYmVnaW5uZXJzIG1heSBub3QgYmUgY29tZm9ydGFibGUgd2l0aCB0aGUgY29uY2VwdCBvZiBlZGl0aW5nIHRoZSBvYmplY3RcclxuXHRcdFx0Ly8gIHBhc3NlZCBieSByZWZlcmVuY2UsIHNvIHdlIHByb3ZpZGUgYW4gZWRpdCBmdW5jdGlvbiBhbmQgcGFzcyBhIGNsb25lXHJcblx0XHRcdHZhciBmaW5hbFJlc3VsdENsb25lID0gJC5leHRlbmQodHJ1ZSwge30sIGZpbmFsUmVzdWx0KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGVtaXQgYW4gZXZlbnQgb24gdGhlIGluc3RhbmNlXHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fdHJpZ2dlcih7XHJcblx0XHRcdFx0ZWRpdDogZnVuY3Rpb24ocmVzdWx0KSB7XHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdCA9IHJlc3VsdDtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRoZWxwZXI6IGhlbHBlcixcclxuXHRcdFx0XHRwb3NpdGlvbjogZmluYWxSZXN1bHRDbG9uZSxcclxuXHRcdFx0XHR0eXBlOiAncG9zaXRpb24nXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uUG9zaXRpb24pIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgcmVzdWx0ID0gc2VsZi5fX29wdGlvbnMuZnVuY3Rpb25Qb3NpdGlvbi5jYWxsKHNlbGYsIHNlbGYuX19pbnN0YW5jZSwgaGVscGVyLCBmaW5hbFJlc3VsdENsb25lKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAocmVzdWx0KSBmaW5hbFJlc3VsdCA9IHJlc3VsdDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZW5kIHRoZSBwb3NpdGlvbmluZyB0ZXN0cyBzZXNzaW9uICh0aGUgdXNlciBtaWdodCBoYXZlIGhhZCBhXHJcblx0XHRcdC8vIHVzZSBmb3IgaXQgZHVyaW5nIHRoZSBwb3NpdGlvbiBldmVudCwgbm93IGl0J3Mgb3ZlcilcclxuXHRcdFx0cnVsZXIuZGVzdHJveSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gY29tcHV0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIHRhcmdldCByZWxhdGl2ZWx5IHRvIHRoZSB0b29sdGlwIHJvb3RcclxuXHRcdFx0Ly8gZWxlbWVudCBzbyB3ZSBjYW4gcGxhY2UgdGhlIGFycm93IGFuZCBtYWtlIHRoZSBuZWVkZWQgYWRqdXN0bWVudHNcclxuXHRcdFx0dmFyIGFycm93Q29vcmQsXHJcblx0XHRcdFx0bWF4VmFsO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGZpbmFsUmVzdWx0LnNpZGUgPT0gJ3RvcCcgfHwgZmluYWxSZXN1bHQuc2lkZSA9PSAnYm90dG9tJykge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGFycm93Q29vcmQgPSB7XHJcblx0XHRcdFx0XHRwcm9wOiAnbGVmdCcsXHJcblx0XHRcdFx0XHR2YWw6IGZpbmFsUmVzdWx0LnRhcmdldCAtIGZpbmFsUmVzdWx0LmNvb3JkLmxlZnRcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdG1heFZhbCA9IGZpbmFsUmVzdWx0LnNpemUud2lkdGggLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb247XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0YXJyb3dDb29yZCA9IHtcclxuXHRcdFx0XHRcdHByb3A6ICd0b3AnLFxyXG5cdFx0XHRcdFx0dmFsOiBmaW5hbFJlc3VsdC50YXJnZXQgLSBmaW5hbFJlc3VsdC5jb29yZC50b3BcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdG1heFZhbCA9IGZpbmFsUmVzdWx0LnNpemUuaGVpZ2h0IC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBjYW5ub3QgbGllIGJleW9uZCB0aGUgYm91bmRhcmllcyBvZiB0aGUgdG9vbHRpcCwgbWludXMgdGhlXHJcblx0XHRcdC8vIGFycm93IG1hcmdpblxyXG5cdFx0XHRpZiAoYXJyb3dDb29yZC52YWwgPCB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24pIHtcclxuXHRcdFx0XHRhcnJvd0Nvb3JkLnZhbCA9IHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChhcnJvd0Nvb3JkLnZhbCA+IG1heFZhbCkge1xyXG5cdFx0XHRcdGFycm93Q29vcmQudmFsID0gbWF4VmFsO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgb3JpZ2luUGFyZW50T2Zmc2V0O1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbGV0J3MgY29udmVydCB0aGUgd2luZG93LXJlbGF0aXZlIGNvb3JkaW5hdGVzIGludG8gY29vcmRpbmF0ZXMgcmVsYXRpdmUgdG8gdGhlXHJcblx0XHRcdC8vIGZ1dHVyZSBwb3NpdGlvbmVkIHBhcmVudCB0aGF0IHRoZSB0b29sdGlwIHdpbGwgYmUgYXBwZW5kZWQgdG9cclxuXHRcdFx0aWYgKGhlbHBlci5nZW8ub3JpZ2luLmZpeGVkTGluZWFnZSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHNhbWUgYXMgd2luZG93T2Zmc2V0IHdoZW4gdGhlIHBvc2l0aW9uIGlzIGZpeGVkXHJcblx0XHRcdFx0b3JpZ2luUGFyZW50T2Zmc2V0ID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0O1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHRoaXMgYXNzdW1lcyB0aGF0IHRoZSBwYXJlbnQgb2YgdGhlIHRvb2x0aXAgaXMgbG9jYXRlZCBhdFxyXG5cdFx0XHRcdC8vICgwLCAwKSBpbiB0aGUgZG9jdW1lbnQsIHR5cGljYWxseSBsaWtlIHdoZW4gdGhlIHBhcmVudCBpc1xyXG5cdFx0XHRcdC8vIDxib2R5Pi5cclxuXHRcdFx0XHQvLyBJZiB3ZSBldmVyIGFsbG93IG90aGVyIHR5cGVzIG9mIHBhcmVudCwgLnRvb2x0aXBzdGVyLXJ1bGVyXHJcblx0XHRcdFx0Ly8gd2lsbCBoYXZlIHRvIGJlIGFwcGVuZGVkIHRvIHRoZSBwYXJlbnQgdG8gaW5oZXJpdCBjc3Mgc3R5bGVcclxuXHRcdFx0XHQvLyB2YWx1ZXMgdGhhdCBhZmZlY3QgdGhlIGRpc3BsYXkgb2YgdGhlIHRleHQgYW5kIHN1Y2guXHJcblx0XHRcdFx0b3JpZ2luUGFyZW50T2Zmc2V0ID0ge1xyXG5cdFx0XHRcdFx0bGVmdDogaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyBoZWxwZXIuZ2VvLndpbmRvdy5zY3JvbGwubGVmdCxcclxuXHRcdFx0XHRcdHRvcDogaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIGhlbHBlci5nZW8ud2luZG93LnNjcm9sbC50b3BcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRmaW5hbFJlc3VsdC5jb29yZCA9IHtcclxuXHRcdFx0XHRsZWZ0OiBvcmlnaW5QYXJlbnRPZmZzZXQubGVmdCArIChmaW5hbFJlc3VsdC5jb29yZC5sZWZ0IC0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQpLFxyXG5cdFx0XHRcdHRvcDogb3JpZ2luUGFyZW50T2Zmc2V0LnRvcCArIChmaW5hbFJlc3VsdC5jb29yZC50b3AgLSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wKVxyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gc2V0IHBvc2l0aW9uIHZhbHVlcyBvbiB0aGUgb3JpZ2luYWwgdG9vbHRpcCBlbGVtZW50XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl9fc2lkZUNoYW5nZShzZWxmLl9faW5zdGFuY2UuXyR0b29sdGlwLCBmaW5hbFJlc3VsdC5zaWRlKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChoZWxwZXIuZ2VvLm9yaWdpbi5maXhlZExpbmVhZ2UpIHtcclxuXHRcdFx0XHRzZWxmLl9faW5zdGFuY2UuXyR0b29sdGlwXHJcblx0XHRcdFx0XHQuY3NzKCdwb3NpdGlvbicsICdmaXhlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdC8vIENTUyBkZWZhdWx0XHJcblx0XHRcdFx0c2VsZi5fX2luc3RhbmNlLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0LmNzcygncG9zaXRpb24nLCAnJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fJHRvb2x0aXBcclxuXHRcdFx0XHQuY3NzKHtcclxuXHRcdFx0XHRcdGxlZnQ6IGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQsXHJcblx0XHRcdFx0XHR0b3A6IGZpbmFsUmVzdWx0LmNvb3JkLnRvcCxcclxuXHRcdFx0XHRcdC8vIHdlIG5lZWQgdG8gc2V0IGEgc2l6ZSBldmVuIGlmIHRoZSB0b29sdGlwIGlzIGluIGl0cyBuYXR1cmFsIHNpemVcclxuXHRcdFx0XHRcdC8vIGJlY2F1c2Ugd2hlbiB0aGUgdG9vbHRpcCBpcyBwb3NpdGlvbmVkIGJleW9uZCB0aGUgd2lkdGggb2YgdGhlIGJvZHlcclxuXHRcdFx0XHRcdC8vICh3aGljaCBpcyBieSBkZWZhdWx0IHRoZSB3aWR0aCBvZiB0aGUgd2luZG93OyBpdCB3aWxsIGhhcHBlbiB3aGVuXHJcblx0XHRcdFx0XHQvLyB5b3Ugc2Nyb2xsIHRoZSB3aW5kb3cgaG9yaXpvbnRhbGx5IHRvIGdldCB0byB0aGUgb3JpZ2luKSwgaXRzIHRleHRcclxuXHRcdFx0XHRcdC8vIGNvbnRlbnQgd2lsbCBvdGhlcndpc2UgYnJlYWsgbGluZXMgYXQgZWFjaCB3b3JkIHRvIGtlZXAgdXAgd2l0aCB0aGVcclxuXHRcdFx0XHRcdC8vIGJvZHkgb3ZlcmZsb3cgc3RyYXRlZ3kuXHJcblx0XHRcdFx0XHRoZWlnaHQ6IGZpbmFsUmVzdWx0LnNpemUuaGVpZ2h0LFxyXG5cdFx0XHRcdFx0d2lkdGg6IGZpbmFsUmVzdWx0LnNpemUud2lkdGhcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5maW5kKCcudG9vbHRpcHN0ZXItYXJyb3cnKVxyXG5cdFx0XHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0XHRcdCdsZWZ0JzogJycsXHJcblx0XHRcdFx0XHRcdCd0b3AnOiAnJ1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5jc3MoYXJyb3dDb29yZC5wcm9wLCBhcnJvd0Nvb3JkLnZhbCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBhcHBlbmQgdGhlIHRvb2x0aXAgSFRNTCBlbGVtZW50IHRvIGl0cyBwYXJlbnRcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl8kdG9vbHRpcC5hcHBlbmRUbyhzZWxmLl9faW5zdGFuY2Uub3B0aW9uKCdwYXJlbnQnKSk7XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdHR5cGU6ICdyZXBvc2l0aW9uZWQnLFxyXG5cdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRwb3NpdGlvbjogZmluYWxSZXN1bHRcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIE1ha2Ugd2hhdGV2ZXIgbW9kaWZpY2F0aW9ucyBhcmUgbmVlZGVkIHdoZW4gdGhlIHNpZGUgaXMgY2hhbmdlZC4gVGhpcyBoYXNcclxuXHRcdCAqIGJlZW4gbWFkZSBhbiBpbmRlcGVuZGFudCBtZXRob2QgZm9yIGVhc3kgaW5oZXJpdGFuY2UgaW4gY3VzdG9tIHBsdWdpbnMgYmFzZWRcclxuXHRcdCAqIG9uIHRoaXMgZGVmYXVsdCBwbHVnaW4uXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9ICRvYmpcclxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBzaWRlXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX3NpZGVDaGFuZ2U6IGZ1bmN0aW9uKCRvYmosIHNpZGUpIHtcclxuXHRcdFx0XHJcblx0XHRcdCRvYmpcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLWJvdHRvbScpXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci1sZWZ0JylcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLXJpZ2h0JylcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLXRvcCcpXHJcblx0XHRcdFx0LmFkZENsYXNzKCd0b29sdGlwc3Rlci0nKyBzaWRlKTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogUmV0dXJucyB0aGUgdGFyZ2V0IHRoYXQgdGhlIHRvb2x0aXAgc2hvdWxkIGFpbSBhdCBmb3IgYSBnaXZlbiBzaWRlLlxyXG5cdFx0ICogVGhlIGNhbGN1bGF0ZWQgdmFsdWUgaXMgYSBkaXN0YW5jZSBmcm9tIHRoZSBlZGdlIG9mIHRoZSB3aW5kb3dcclxuXHRcdCAqIChsZWZ0IGVkZ2UgZm9yIHRvcC9ib3R0b20gc2lkZXMsIHRvcCBlZGdlIGZvciBsZWZ0L3JpZ2h0IHNpZGUpLiBUaGVcclxuXHRcdCAqIHRvb2x0aXAgd2lsbCBiZSBjZW50ZXJlZCBvbiB0aGF0IHBvc2l0aW9uIGFuZCB0aGUgYXJyb3cgd2lsbCBiZVxyXG5cdFx0ICogcG9zaXRpb25lZCB0aGVyZSAoYXMgbXVjaCBhcyBwb3NzaWJsZSkuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IGhlbHBlclxyXG5cdFx0ICogQHJldHVybiB7aW50ZWdlcn1cclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9fdGFyZ2V0RmluZDogZnVuY3Rpb24oaGVscGVyKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgdGFyZ2V0ID0ge30sXHJcblx0XHRcdFx0cmVjdHMgPSB0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW5bMF0uZ2V0Q2xpZW50UmVjdHMoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHRoZXNlIGxpbmVzIGZpeCBhIENocm9tZSBidWcgKGlzc3VlICM0OTEpXHJcblx0XHRcdGlmIChyZWN0cy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdFx0dmFyIG9wYWNpdHkgPSB0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW4uY3NzKCdvcGFjaXR5Jyk7XHJcblx0XHRcdFx0aWYob3BhY2l0eSA9PSAxKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW4uY3NzKCdvcGFjaXR5JywgMC45OSk7XHJcblx0XHRcdFx0XHRyZWN0cyA9IHRoaXMuX19pbnN0YW5jZS5fJG9yaWdpblswXS5nZXRDbGllbnRSZWN0cygpO1xyXG5cdFx0XHRcdFx0dGhpcy5fX2luc3RhbmNlLl8kb3JpZ2luLmNzcygnb3BhY2l0eScsIDEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gYnkgZGVmYXVsdCwgdGhlIHRhcmdldCB3aWxsIGJlIHRoZSBtaWRkbGUgb2YgdGhlIG9yaWdpblxyXG5cdFx0XHRpZiAocmVjdHMubGVuZ3RoIDwgMikge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRhcmdldC50b3AgPSBNYXRoLmZsb29yKGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgKGhlbHBlci5nZW8ub3JpZ2luLnNpemUud2lkdGggLyAyKSk7XHJcblx0XHRcdFx0dGFyZ2V0LmJvdHRvbSA9IHRhcmdldC50b3A7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dGFyZ2V0LmxlZnQgPSBNYXRoLmZsb29yKGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyAoaGVscGVyLmdlby5vcmlnaW4uc2l6ZS5oZWlnaHQgLyAyKSk7XHJcblx0XHRcdFx0dGFyZ2V0LnJpZ2h0ID0gdGFyZ2V0LmxlZnQ7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gaWYgbXVsdGlwbGUgY2xpZW50IHJlY3RzIGV4aXN0LCB0aGUgZWxlbWVudCBtYXkgYmUgdGV4dCBzcGxpdFxyXG5cdFx0XHQvLyB1cCBpbnRvIG11bHRpcGxlIGxpbmVzIGFuZCB0aGUgbWlkZGxlIG9mIHRoZSBvcmlnaW4gbWF5IG5vdCBiZVxyXG5cdFx0XHQvLyBiZXN0IG9wdGlvbiBhbnltb3JlLiBXZSBuZWVkIHRvIGNob29zZSB0aGUgYmVzdCB0YXJnZXQgY2xpZW50IHJlY3RcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gdG9wOiB0aGUgZmlyc3RcclxuXHRcdFx0XHR2YXIgdGFyZ2V0UmVjdCA9IHJlY3RzWzBdO1xyXG5cdFx0XHRcdHRhcmdldC50b3AgPSBNYXRoLmZsb29yKHRhcmdldFJlY3QubGVmdCArICh0YXJnZXRSZWN0LnJpZ2h0IC0gdGFyZ2V0UmVjdC5sZWZ0KSAvIDIpO1xyXG5cdFx0XHJcblx0XHRcdFx0Ly8gcmlnaHQ6IHRoZSBtaWRkbGUgbGluZSwgcm91bmRlZCBkb3duIGluIGNhc2UgdGhlcmUgaXMgYW4gZXZlblxyXG5cdFx0XHRcdC8vIG51bWJlciBvZiBsaW5lcyAobG9va3MgbW9yZSBjZW50ZXJlZCA9PiBjaGVjayBvdXQgdGhlXHJcblx0XHRcdFx0Ly8gZGVtbyB3aXRoIDQgc3BsaXQgbGluZXMpXHJcblx0XHRcdFx0aWYgKHJlY3RzLmxlbmd0aCA+IDIpIHtcclxuXHRcdFx0XHRcdHRhcmdldFJlY3QgPSByZWN0c1tNYXRoLmNlaWwocmVjdHMubGVuZ3RoIC8gMikgLSAxXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHR0YXJnZXRSZWN0ID0gcmVjdHNbMF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRhcmdldC5yaWdodCA9IE1hdGguZmxvb3IodGFyZ2V0UmVjdC50b3AgKyAodGFyZ2V0UmVjdC5ib3R0b20gLSB0YXJnZXRSZWN0LnRvcCkgLyAyKTtcclxuXHRcdFxyXG5cdFx0XHRcdC8vIGJvdHRvbTogdGhlIGxhc3RcclxuXHRcdFx0XHR0YXJnZXRSZWN0ID0gcmVjdHNbcmVjdHMubGVuZ3RoIC0gMV07XHJcblx0XHRcdFx0dGFyZ2V0LmJvdHRvbSA9IE1hdGguZmxvb3IodGFyZ2V0UmVjdC5sZWZ0ICsgKHRhcmdldFJlY3QucmlnaHQgLSB0YXJnZXRSZWN0LmxlZnQpIC8gMik7XHJcblx0XHRcclxuXHRcdFx0XHQvLyBsZWZ0OiB0aGUgbWlkZGxlIGxpbmUsIHJvdW5kZWQgdXBcclxuXHRcdFx0XHRpZiAocmVjdHMubGVuZ3RoID4gMikge1xyXG5cdFx0XHRcdFx0dGFyZ2V0UmVjdCA9IHJlY3RzW01hdGguY2VpbCgocmVjdHMubGVuZ3RoICsgMSkgLyAyKSAtIDFdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHRhcmdldFJlY3QgPSByZWN0c1tyZWN0cy5sZW5ndGggLSAxXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dGFyZ2V0LmxlZnQgPSBNYXRoLmZsb29yKHRhcmdldFJlY3QudG9wICsgKHRhcmdldFJlY3QuYm90dG9tIC0gdGFyZ2V0UmVjdC50b3ApIC8gMik7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB0YXJnZXQ7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbi8qIGEgYnVpbGQgdGFzayB3aWxsIGFkZCBcInJldHVybiAkO1wiIGhlcmUgKi9cclxucmV0dXJuICQ7XHJcblxyXG59KSk7XHJcbiIsIi8qKlxyXG4gKiBqcXVlcnkubWFzay5qc1xyXG4gKiBAdmVyc2lvbjogdjEuMTQuMTJcclxuICogQGF1dGhvcjogSWdvciBFc2NvYmFyXHJcbiAqXHJcbiAqIENyZWF0ZWQgYnkgSWdvciBFc2NvYmFyIG9uIDIwMTItMDMtMTAuIFBsZWFzZSByZXBvcnQgYW55IGJ1ZyBhdCBodHRwOi8vYmxvZy5pZ29yZXNjb2Jhci5jb21cclxuICpcclxuICogQ29weXJpZ2h0IChjKSAyMDEyIElnb3IgRXNjb2JhciBodHRwOi8vYmxvZy5pZ29yZXNjb2Jhci5jb21cclxuICpcclxuICogVGhlIE1JVCBMaWNlbnNlIChodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocClcclxuICpcclxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb25cclxuICogb2J0YWluaW5nIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb25cclxuICogZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0XHJcbiAqIHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLFxyXG4gKiBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxyXG4gKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcclxuICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmdcclxuICogY29uZGl0aW9uczpcclxuICpcclxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcclxuICogaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcbiAqXHJcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXHJcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFU1xyXG4gKiBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORFxyXG4gKiBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVFxyXG4gKiBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSxcclxuICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HXHJcbiAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1JcclxuICogT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxyXG4gKi9cclxuXHJcbi8qIGpzaGludCBsYXhicmVhazogdHJ1ZSAqL1xyXG4vKiBqc2hpbnQgbWF4Y29tcGxleGl0eToxNyAqL1xyXG4vKiBnbG9iYWwgZGVmaW5lICovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG4vLyBVTUQgKFVuaXZlcnNhbCBNb2R1bGUgRGVmaW5pdGlvbikgcGF0dGVybnMgZm9yIEphdmFTY3JpcHQgbW9kdWxlcyB0aGF0IHdvcmsgZXZlcnl3aGVyZS5cclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9ibG9iL21hc3Rlci9qcXVlcnlQbHVnaW5Db21tb25qcy5qc1xyXG4oZnVuY3Rpb24gKGZhY3RvcnksIGpRdWVyeSwgWmVwdG8pIHtcclxuXHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSB8fCBaZXB0byk7XHJcbiAgICB9XHJcblxyXG59KGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gICAgdmFyIE1hc2sgPSBmdW5jdGlvbiAoZWwsIG1hc2ssIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdmFyIHAgPSB7XHJcbiAgICAgICAgICAgIGludmFsaWQ6IFtdLFxyXG4gICAgICAgICAgICBnZXRDYXJldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdHJsID0gZWwuZ2V0KDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkU2VsID0gZG9jdW1lbnQuc2VsZWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjU2VsU3RhcnQgPSBjdHJsLnNlbGVjdGlvblN0YXJ0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJRSBTdXBwb3J0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRTZWwgJiYgbmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZignTVNJRSAxMCcpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWwgPSBkU2VsLmNyZWF0ZVJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbC5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIC1wLnZhbCgpLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IHNlbC50ZXh0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBzdXBwb3J0XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY1NlbFN0YXJ0IHx8IGNTZWxTdGFydCA9PT0gJzAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IGNTZWxTdGFydDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3M7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRDYXJldDogZnVuY3Rpb24ocG9zKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbC5pcygnOmZvY3VzJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmdlLCBjdHJsID0gZWwuZ2V0KDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCwgV2ViS2l0LCBldGMuLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3RybC5zZXRTZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRTZWxlY3Rpb25SYW5nZShwb3MsIHBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIElFXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZSA9IGN0cmwuY3JlYXRlVGV4dFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLm1vdmVFbmQoJ2NoYXJhY3RlcicsIHBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsIHBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zZWxlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGV2ZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBlbFxyXG4gICAgICAgICAgICAgICAgLm9uKCdrZXlkb3duLm1hc2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuZGF0YSgnbWFzay1rZXljb2RlJywgZS5rZXlDb2RlIHx8IGUud2hpY2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmRhdGEoJ21hc2stcHJldml1cy12YWx1ZScsIGVsLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBlbC5kYXRhKCdtYXNrLXByZXZpdXMtY2FyZXQtcG9zJywgcC5nZXRDYXJldCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBwLm1hc2tEaWdpdFBvc01hcE9sZCA9IHAubWFza0RpZ2l0UG9zTWFwO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbigkLmpNYXNrR2xvYmFscy51c2VJbnB1dCA/ICdpbnB1dC5tYXNrJyA6ICdrZXl1cC5tYXNrJywgcC5iZWhhdmlvdXIpXHJcbiAgICAgICAgICAgICAgICAub24oJ3Bhc3RlLm1hc2sgZHJvcC5tYXNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwua2V5ZG93bigpLmtleXVwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oJ2NoYW5nZS5tYXNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBlbC5kYXRhKCdjaGFuZ2VkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKCdibHVyLm1hc2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gcC52YWwoKSAmJiAhZWwuZGF0YSgnY2hhbmdlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbC5kYXRhKCdjaGFuZ2VkJywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vIGl0J3MgdmVyeSBpbXBvcnRhbnQgdGhhdCB0aGlzIGNhbGxiYWNrIHJlbWFpbnMgaW4gdGhpcyBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aGlzZSBvbGRWYWx1ZSBpdCdzIGdvaW5nIHRvIHdvcmsgYnVnZ3lcclxuICAgICAgICAgICAgICAgIC5vbignYmx1ci5tYXNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgPSBwLnZhbCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vIHNlbGVjdCBhbGwgdGV4dCBvbiBmb2N1c1xyXG4gICAgICAgICAgICAgICAgLm9uKCdmb2N1cy5tYXNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zZWxlY3RPbkZvY3VzID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZS50YXJnZXQpLnNlbGVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhciB0aGUgdmFsdWUgaWYgaXQgbm90IGNvbXBsZXRlIHRoZSBtYXNrXHJcbiAgICAgICAgICAgICAgICAub24oJ2ZvY3Vzb3V0Lm1hc2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jbGVhcklmTm90TWF0Y2ggJiYgIXJlZ2V4TWFzay50ZXN0KHAudmFsKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcC52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldFJlZ2V4TWFzazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFza0NodW5rcyA9IFtdLCB0cmFuc2xhdGlvbiwgcGF0dGVybiwgb3B0aW9uYWwsIHJlY3Vyc2l2ZSwgb1JlY3Vyc2l2ZSwgcjtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hc2subGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbiA9IGpNYXNrLnRyYW5zbGF0aW9uW21hc2suY2hhckF0KGkpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zbGF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuID0gdHJhbnNsYXRpb24ucGF0dGVybi50b1N0cmluZygpLnJlcGxhY2UoLy57MX0kfF4uezF9L2csICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWwgPSB0cmFuc2xhdGlvbi5vcHRpb25hbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlID0gdHJhbnNsYXRpb24ucmVjdXJzaXZlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlY3Vyc2l2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0NodW5rcy5wdXNoKG1hc2suY2hhckF0KGkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9SZWN1cnNpdmUgPSB7ZGlnaXQ6IG1hc2suY2hhckF0KGkpLCBwYXR0ZXJuOiBwYXR0ZXJufTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tDaHVua3MucHVzaCghb3B0aW9uYWwgJiYgIXJlY3Vyc2l2ZSA/IHBhdHRlcm4gOiAocGF0dGVybiArICc/JykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tDaHVua3MucHVzaChtYXNrLmNoYXJBdChpKS5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csICdcXFxcJCYnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHIgPSBtYXNrQ2h1bmtzLmpvaW4oJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvUmVjdXJzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgciA9IHIucmVwbGFjZShuZXcgUmVnRXhwKCcoJyArIG9SZWN1cnNpdmUuZGlnaXQgKyAnKC4qJyArIG9SZWN1cnNpdmUuZGlnaXQgKyAnKT8pJyksICcoJDEpPycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShuZXcgUmVnRXhwKG9SZWN1cnNpdmUuZGlnaXQsICdnJyksIG9SZWN1cnNpdmUucGF0dGVybik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlc3Ryb3lFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWwub2ZmKFsnaW5wdXQnLCAna2V5ZG93bicsICdrZXl1cCcsICdwYXN0ZScsICdkcm9wJywgJ2JsdXInLCAnZm9jdXNvdXQnLCAnJ10uam9pbignLm1hc2sgJykpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB2YWw6IGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpc0lucHV0ID0gZWwuaXMoJ2lucHV0JyksXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gaXNJbnB1dCA/ICd2YWwnIDogJ3RleHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsW21ldGhvZF0oKSAhPT0gdikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbFttZXRob2RdKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByID0gZWw7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHIgPSBlbFttZXRob2RdKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhbGN1bGF0ZUNhcmV0UG9zaXRpb246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9sZFZhbCA9IGVsLmRhdGEoJ21hc2stcHJldml1cy12YWx1ZScpIHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbCA9IHAuZ2V0TWFza2VkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgPSBwLmdldENhcmV0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob2xkVmFsICE9PSBuZXdWYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2FyZXRQb3NPbGQgPSBlbC5kYXRhKCdtYXNrLXByZXZpdXMtY2FyZXQtcG9zJykgfHwgMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsTCA9IG5ld1ZhbC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZFZhbEwgPSBvbGRWYWwubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQWZ0ZXJDYXJldCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbE9sZCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBjYXJldFBvc05ldzsgaSA8IG5ld1ZhbEw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXAubWFza0RpZ2l0UG9zTWFwW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQWZ0ZXJDYXJldCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gY2FyZXRQb3NOZXcgLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXAubWFza0RpZ2l0UG9zTWFwW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IGNhcmV0UG9zTmV3IC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAubWFza0RpZ2l0UG9zTWFwW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGwrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gY2FyZXRQb3NPbGQgLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocC5tYXNrRGlnaXRQb3NNYXBPbGRbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbE9sZCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgY3Vyc29yIGlzIGF0IHRoZSBlbmQga2VlcCBpdCB0aGVyZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXJldFBvc05ldyA+IG9sZFZhbEwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3ID0gbmV3VmFsTCAqIDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FyZXRQb3NPbGQgPj0gY2FyZXRQb3NOZXcgJiYgY2FyZXRQb3NPbGQgIT09IG9sZFZhbEwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLm1hc2tEaWdpdFBvc01hcE9sZFtjYXJldFBvc05ld10pICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmV0UG9zID0gY2FyZXRQb3NOZXc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgLT0gbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsT2xkIC0gbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3IC09IG1hc2tEaWdpdHNCZWZvcmVDYXJldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC5tYXNrRGlnaXRQb3NNYXBbY2FyZXRQb3NOZXddKSAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgPSBjYXJldFBvcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY2FyZXRQb3NOZXcgPiBjYXJldFBvc09sZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvc05ldyArPSBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGwgLSBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGxPbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3ICs9IG1hc2tEaWdpdHNBZnRlckNhcmV0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBjYXJldFBvc05ldztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmVoYXZpb3VyOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICBwLmludmFsaWQgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIga2V5Q29kZSA9IGVsLmRhdGEoJ21hc2sta2V5Y29kZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkoa2V5Q29kZSwgak1hc2suYnlQYXNzS2V5cykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1ZhbCAgID0gcC5nZXRNYXNrZWQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3MgPSBwLmdldENhcmV0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgYSBjb21wZW5zYXRpb24gdG8gZGV2aWNlcy9icm93c2VycyB0aGF0IGRvbid0IGNvbXBlbnNhdGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjYXJldCBwb3NpdGlvbmluZyB0aGUgcmlnaHQgd2F5XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHAuc2V0Q2FyZXQocC5jYWxjdWxhdGVDYXJldFBvc2l0aW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcC52YWwobmV3VmFsKTtcclxuICAgICAgICAgICAgICAgICAgICBwLnNldENhcmV0KGNhcmV0UG9zKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5jYWxsYmFja3MoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldE1hc2tlZDogZnVuY3Rpb24oc2tpcE1hc2tDaGFycywgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnVmID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB2YWwgPT09IHVuZGVmaW5lZCA/IHAudmFsKCkgOiB2YWwgKyAnJyxcclxuICAgICAgICAgICAgICAgICAgICBtID0gMCwgbWFza0xlbiA9IG1hc2subGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIHYgPSAwLCB2YWxMZW4gPSB2YWx1ZS5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gMSwgYWRkTWV0aG9kID0gJ3B1c2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0UG9zID0gLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0Q291bnQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdFBvc0FyciA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNYXNrQ2hhcixcclxuICAgICAgICAgICAgICAgICAgICBjaGVjaztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkTWV0aG9kID0gJ3Vuc2hpZnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNYXNrQ2hhciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbSA9IG1hc2tMZW4gLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSB2YWxMZW4gLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSA+IC0xICYmIHYgPiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TWFza0NoYXIgPSBtYXNrTGVuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjaGVjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPCBtYXNrTGVuICYmIHYgPCB2YWxMZW47XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdFVudHJhbnNsYXRlZE1hc2tDaGFyO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGNoZWNrKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFza0RpZ2l0ID0gbWFzay5jaGFyQXQobSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbERpZ2l0ID0gdmFsdWUuY2hhckF0KHYpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbiA9IGpNYXNrLnRyYW5zbGF0aW9uW21hc2tEaWdpdF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2xhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsRGlnaXQubWF0Y2godHJhbnNsYXRpb24ucGF0dGVybikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZlthZGRNZXRob2RdKHZhbERpZ2l0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24ucmVjdXJzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc2V0UG9zID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldFBvcyA9IG07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtID09PSBsYXN0TWFza0NoYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHJlc2V0UG9zIC0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RNYXNrQ2hhciA9PT0gcmVzZXRQb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSAtPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbSArPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsRGlnaXQgPT09IGxhc3RVbnRyYW5zbGF0ZWRNYXNrQ2hhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2hlZCB0aGUgbGFzdCB1bnRyYW5zbGF0ZWQgKHJhdykgbWFzayBjaGFyYWN0ZXIgdGhhdCB3ZSBlbmNvdW50ZXJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGlrZWx5IGFuIGluc2VydCBvZmZzZXQgdGhlIG1hc2sgY2hhcmFjdGVyIGZyb20gdGhlIGxhc3QgZW50cnk7IGZhbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm91Z2ggYW5kIG9ubHkgaW5jcmVtZW50IHZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdENvdW50LS07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VW50cmFuc2xhdGVkTWFza0NoYXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRpb24ub3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdiAtPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNsYXRpb24uZmFsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZlthZGRNZXRob2RdKHRyYW5zbGF0aW9uLmZhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdiAtPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcC5pbnZhbGlkLnB1c2goe3A6IHYsIHY6IHZhbERpZ2l0LCBlOiB0cmFuc2xhdGlvbi5wYXR0ZXJufSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdiArPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFza2lwTWFza0NoYXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZbYWRkTWV0aG9kXShtYXNrRGlnaXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsRGlnaXQgPT09IG1hc2tEaWdpdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0UG9zQXJyLnB1c2godik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICs9IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RVbnRyYW5zbGF0ZWRNYXNrQ2hhciA9IG1hc2tEaWdpdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdFBvc0Fyci5wdXNoKHYgKyBtYXNrRGlnaXRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtICs9IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RNYXNrQ2hhckRpZ2l0ID0gbWFzay5jaGFyQXQobGFzdE1hc2tDaGFyKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXNrTGVuID09PSB2YWxMZW4gKyAxICYmICFqTWFzay50cmFuc2xhdGlvbltsYXN0TWFza0NoYXJEaWdpdF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBidWYucHVzaChsYXN0TWFza0NoYXJEaWdpdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IGJ1Zi5qb2luKCcnKTtcclxuICAgICAgICAgICAgICAgIHAubWFwTWFza2RpZ2l0UG9zaXRpb25zKG5ld1ZhbCwgbWFza0RpZ2l0UG9zQXJyLCB2YWxMZW4pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1ZhbDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWFwTWFza2RpZ2l0UG9zaXRpb25zOiBmdW5jdGlvbihuZXdWYWwsIG1hc2tEaWdpdFBvc0FyciwgdmFsTGVuKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG1hc2tEaWZmID0gb3B0aW9ucy5yZXZlcnNlID8gbmV3VmFsLmxlbmd0aCAtIHZhbExlbiA6IDA7XHJcbiAgICAgICAgICAgICAgcC5tYXNrRGlnaXRQb3NNYXAgPSB7fTtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hc2tEaWdpdFBvc0Fyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcC5tYXNrRGlnaXRQb3NNYXBbbWFza0RpZ2l0UG9zQXJyW2ldICsgbWFza0RpZmZdID0gMTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNhbGxiYWNrczogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBwLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB2YWwgIT09IG9sZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBcmdzID0gW3ZhbCwgZSwgZWwsIG9wdGlvbnNdLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24obmFtZSwgY3JpdGVyaWEsIGFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zW25hbWVdID09PSAnZnVuY3Rpb24nICYmIGNyaXRlcmlhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zW25hbWVdLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygnb25DaGFuZ2UnLCBjaGFuZ2VkID09PSB0cnVlLCBkZWZhdWx0QXJncyk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygnb25LZXlQcmVzcycsIGNoYW5nZWQgPT09IHRydWUsIGRlZmF1bHRBcmdzKTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCdvbkNvbXBsZXRlJywgdmFsLmxlbmd0aCA9PT0gbWFzay5sZW5ndGgsIGRlZmF1bHRBcmdzKTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCdvbkludmFsaWQnLCBwLmludmFsaWQubGVuZ3RoID4gMCwgW3ZhbCwgZSwgZWwsIHAuaW52YWxpZCwgb3B0aW9uc10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZWwgPSAkKGVsKTtcclxuICAgICAgICB2YXIgak1hc2sgPSB0aGlzLCBvbGRWYWx1ZSA9IHAudmFsKCksIHJlZ2V4TWFzaztcclxuXHJcbiAgICAgICAgbWFzayA9IHR5cGVvZiBtYXNrID09PSAnZnVuY3Rpb24nID8gbWFzayhwLnZhbCgpLCB1bmRlZmluZWQsIGVsLCAgb3B0aW9ucykgOiBtYXNrO1xyXG5cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xyXG4gICAgICAgIGpNYXNrLm1hc2sgPSBtYXNrO1xyXG4gICAgICAgIGpNYXNrLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIGpNYXNrLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgY2FyZXQgPSBwLmdldENhcmV0KCk7XHJcbiAgICAgICAgICAgIHAuZGVzdHJveUV2ZW50cygpO1xyXG4gICAgICAgICAgICBwLnZhbChqTWFzay5nZXRDbGVhblZhbCgpKTtcclxuICAgICAgICAgICAgcC5zZXRDYXJldChjYXJldCk7XHJcbiAgICAgICAgICAgIHJldHVybiBlbDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBnZXQgdmFsdWUgd2l0aG91dCBtYXNrXHJcbiAgICAgICAgak1hc2suZ2V0Q2xlYW5WYWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICByZXR1cm4gcC5nZXRNYXNrZWQodHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IG1hc2tlZCB2YWx1ZSB3aXRob3V0IHRoZSB2YWx1ZSBiZWluZyBpbiB0aGUgaW5wdXQgb3IgZWxlbWVudFxyXG4gICAgICAgIGpNYXNrLmdldE1hc2tlZFZhbCA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgIHJldHVybiBwLmdldE1hc2tlZChmYWxzZSwgdmFsKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgIGpNYXNrLmluaXQgPSBmdW5jdGlvbihvbmx5TWFzaykge1xyXG4gICAgICAgICAgICBvbmx5TWFzayA9IG9ubHlNYXNrIHx8IGZhbHNlO1xyXG4gICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIGpNYXNrLmNsZWFySWZOb3RNYXRjaCAgPSAkLmpNYXNrR2xvYmFscy5jbGVhcklmTm90TWF0Y2g7XHJcbiAgICAgICAgICAgIGpNYXNrLmJ5UGFzc0tleXMgICAgICAgPSAkLmpNYXNrR2xvYmFscy5ieVBhc3NLZXlzO1xyXG4gICAgICAgICAgICBqTWFzay50cmFuc2xhdGlvbiAgICAgID0gJC5leHRlbmQoe30sICQuak1hc2tHbG9iYWxzLnRyYW5zbGF0aW9uLCBvcHRpb25zLnRyYW5zbGF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGpNYXNrID0gJC5leHRlbmQodHJ1ZSwge30sIGpNYXNrLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHJlZ2V4TWFzayA9IHAuZ2V0UmVnZXhNYXNrKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAob25seU1hc2spIHtcclxuICAgICAgICAgICAgICAgIHAuZXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBwLnZhbChwLmdldE1hc2tlZCgpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuYXR0cigncGxhY2Vob2xkZXInICwgb3B0aW9ucy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnksIG90aGVyd2lzZSBpZiB0aGUgdXNlciBzdWJtaXQgdGhlIGZvcm1cclxuICAgICAgICAgICAgICAgIC8vIGFuZCB0aGVuIHByZXNzIHRoZSBcImJhY2tcIiBidXR0b24sIHRoZSBhdXRvY29tcGxldGUgd2lsbCBlcmFzZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGRhdGEuIFdvcmtzIGZpbmUgb24gSUU5KywgRkYsIE9wZXJhLCBTYWZhcmkuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWwuZGF0YSgnbWFzaycpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGVsLmF0dHIoJ2F1dG9jb21wbGV0ZScsICdvZmYnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkZXRlY3QgaWYgaXMgbmVjZXNzYXJ5IGxldCB0aGUgdXNlciB0eXBlIGZyZWVseS5cclxuICAgICAgICAgICAgICAgIC8vIGZvciBpcyBhIGxvdCBmYXN0ZXIgdGhhbiBmb3JFYWNoLlxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG1heGxlbmd0aCA9IHRydWU7IGkgPCBtYXNrLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zbGF0aW9uID0gak1hc2sudHJhbnNsYXRpb25bbWFzay5jaGFyQXQoaSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2xhdGlvbiAmJiB0cmFuc2xhdGlvbi5yZWN1cnNpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4bGVuZ3RoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobWF4bGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuYXR0cignbWF4bGVuZ3RoJywgbWFzay5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHAuZGVzdHJveUV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgcC5ldmVudHMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2FyZXQgPSBwLmdldENhcmV0KCk7XHJcbiAgICAgICAgICAgICAgICBwLnZhbChwLmdldE1hc2tlZCgpKTtcclxuICAgICAgICAgICAgICAgIHAuc2V0Q2FyZXQoY2FyZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgak1hc2suaW5pdCghZWwuaXMoJ2lucHV0JykpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLm1hc2tXYXRjaGVycyA9IHt9O1xyXG4gICAgdmFyIEhUTUxBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbnB1dCA9ICQodGhpcyksXHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fSxcclxuICAgICAgICAgICAgcHJlZml4ID0gJ2RhdGEtbWFzay0nLFxyXG4gICAgICAgICAgICBtYXNrID0gaW5wdXQuYXR0cignZGF0YS1tYXNrJyk7XHJcblxyXG4gICAgICAgIGlmIChpbnB1dC5hdHRyKHByZWZpeCArICdyZXZlcnNlJykpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5yZXZlcnNlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbnB1dC5hdHRyKHByZWZpeCArICdjbGVhcmlmbm90bWF0Y2gnKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zLmNsZWFySWZOb3RNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaW5wdXQuYXR0cihwcmVmaXggKyAnc2VsZWN0b25mb2N1cycpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICBvcHRpb25zLnNlbGVjdE9uRm9jdXMgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5vdFNhbWVNYXNrT2JqZWN0KGlucHV0LCBtYXNrLCBvcHRpb25zKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5wdXQuZGF0YSgnbWFzaycsIG5ldyBNYXNrKHRoaXMsIG1hc2ssIG9wdGlvbnMpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbm90U2FtZU1hc2tPYmplY3QgPSBmdW5jdGlvbihmaWVsZCwgbWFzaywgb3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIHZhciBtYXNrT2JqZWN0ID0gJChmaWVsZCkuZGF0YSgnbWFzaycpLFxyXG4gICAgICAgICAgICBzdHJpbmdpZnkgPSBKU09OLnN0cmluZ2lmeSxcclxuICAgICAgICAgICAgdmFsdWUgPSAkKGZpZWxkKS52YWwoKSB8fCAkKGZpZWxkKS50ZXh0KCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBtYXNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBtYXNrID0gbWFzayh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBtYXNrT2JqZWN0ICE9PSAnb2JqZWN0JyB8fCBzdHJpbmdpZnkobWFza09iamVjdC5vcHRpb25zKSAhPT0gc3RyaW5naWZ5KG9wdGlvbnMpIHx8IG1hc2tPYmplY3QubWFzayAhPT0gbWFzaztcclxuICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG4gICAgfSxcclxuICAgIGV2ZW50U3VwcG9ydGVkID0gZnVuY3Rpb24oZXZlbnROYW1lKSB7XHJcbiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIGlzU3VwcG9ydGVkO1xyXG5cclxuICAgICAgICBldmVudE5hbWUgPSAnb24nICsgZXZlbnROYW1lO1xyXG4gICAgICAgIGlzU3VwcG9ydGVkID0gKGV2ZW50TmFtZSBpbiBlbCk7XHJcblxyXG4gICAgICAgIGlmICggIWlzU3VwcG9ydGVkICkge1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoZXZlbnROYW1lLCAncmV0dXJuOycpO1xyXG4gICAgICAgICAgICBpc1N1cHBvcnRlZCA9IHR5cGVvZiBlbFtldmVudE5hbWVdID09PSAnZnVuY3Rpb24nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbCA9IG51bGw7XHJcblxyXG4gICAgICAgIHJldHVybiBpc1N1cHBvcnRlZDtcclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5tYXNrID0gZnVuY3Rpb24obWFzaywgb3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3IsXHJcbiAgICAgICAgICAgIGdsb2JhbHMgPSAkLmpNYXNrR2xvYmFscyxcclxuICAgICAgICAgICAgaW50ZXJ2YWwgPSBnbG9iYWxzLndhdGNoSW50ZXJ2YWwsXHJcbiAgICAgICAgICAgIHdhdGNoSW5wdXRzID0gb3B0aW9ucy53YXRjaElucHV0cyB8fCBnbG9iYWxzLndhdGNoSW5wdXRzLFxyXG4gICAgICAgICAgICBtYXNrRnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmIChub3RTYW1lTWFza09iamVjdCh0aGlzLCBtYXNrLCBvcHRpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmRhdGEoJ21hc2snLCBuZXcgTWFzayh0aGlzLCBtYXNrLCBvcHRpb25zKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICQodGhpcykuZWFjaChtYXNrRnVuY3Rpb24pO1xyXG5cclxuICAgICAgICBpZiAoc2VsZWN0b3IgJiYgc2VsZWN0b3IgIT09ICcnICYmIHdhdGNoSW5wdXRzKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoJC5tYXNrV2F0Y2hlcnNbc2VsZWN0b3JdKTtcclxuICAgICAgICAgICAgJC5tYXNrV2F0Y2hlcnNbc2VsZWN0b3JdID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLmZpbmQoc2VsZWN0b3IpLmVhY2gobWFza0Z1bmN0aW9uKTtcclxuICAgICAgICAgICAgfSwgaW50ZXJ2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5tYXNrZWQgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhKCdtYXNrJykuZ2V0TWFza2VkVmFsKHZhbCk7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4udW5tYXNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCgkLm1hc2tXYXRjaGVyc1t0aGlzLnNlbGVjdG9yXSk7XHJcbiAgICAgICAgZGVsZXRlICQubWFza1dhdGNoZXJzW3RoaXMuc2VsZWN0b3JdO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhTWFzayA9ICQodGhpcykuZGF0YSgnbWFzaycpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YU1hc2spIHtcclxuICAgICAgICAgICAgICAgIGRhdGFNYXNrLnJlbW92ZSgpLnJlbW92ZURhdGEoJ21hc2snKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmZuLmNsZWFuVmFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgnbWFzaycpLmdldENsZWFuVmFsKCk7XHJcbiAgICB9O1xyXG5cclxuICAgICQuYXBwbHlEYXRhTWFzayA9IGZ1bmN0aW9uKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3RvciB8fCAkLmpNYXNrR2xvYmFscy5tYXNrRWxlbWVudHM7XHJcbiAgICAgICAgdmFyICRzZWxlY3RvciA9IChzZWxlY3RvciBpbnN0YW5jZW9mICQpID8gc2VsZWN0b3IgOiAkKHNlbGVjdG9yKTtcclxuICAgICAgICAkc2VsZWN0b3IuZmlsdGVyKCQuak1hc2tHbG9iYWxzLmRhdGFNYXNrQXR0cikuZWFjaChIVE1MQXR0cmlidXRlcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBnbG9iYWxzID0ge1xyXG4gICAgICAgIG1hc2tFbGVtZW50czogJ2lucHV0LHRkLHNwYW4sZGl2JyxcclxuICAgICAgICBkYXRhTWFza0F0dHI6ICcqW2RhdGEtbWFza10nLFxyXG4gICAgICAgIGRhdGFNYXNrOiB0cnVlLFxyXG4gICAgICAgIHdhdGNoSW50ZXJ2YWw6IDMwMCxcclxuICAgICAgICB3YXRjaElucHV0czogdHJ1ZSxcclxuICAgICAgICAvLyBvbGQgdmVyc2lvbnMgb2YgY2hyb21lIGRvbnQgd29yayBncmVhdCB3aXRoIGlucHV0IGV2ZW50XHJcbiAgICAgICAgdXNlSW5wdXQ6ICEvQ2hyb21lXFwvWzItNF1bMC05XXxTYW1zdW5nQnJvd3Nlci8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgZXZlbnRTdXBwb3J0ZWQoJ2lucHV0JyksXHJcbiAgICAgICAgd2F0Y2hEYXRhTWFzazogZmFsc2UsXHJcbiAgICAgICAgYnlQYXNzS2V5czogWzksIDE2LCAxNywgMTgsIDM2LCAzNywgMzgsIDM5LCA0MCwgOTFdLFxyXG4gICAgICAgIHRyYW5zbGF0aW9uOiB7XHJcbiAgICAgICAgICAgICcwJzoge3BhdHRlcm46IC9cXGQvfSxcclxuICAgICAgICAgICAgJzknOiB7cGF0dGVybjogL1xcZC8sIG9wdGlvbmFsOiB0cnVlfSxcclxuICAgICAgICAgICAgJyMnOiB7cGF0dGVybjogL1xcZC8sIHJlY3Vyc2l2ZTogdHJ1ZX0sXHJcbiAgICAgICAgICAgICdBJzoge3BhdHRlcm46IC9bYS16QS1aMC05XS99LFxyXG4gICAgICAgICAgICAnUyc6IHtwYXR0ZXJuOiAvW2EtekEtWl0vfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJC5qTWFza0dsb2JhbHMgPSAkLmpNYXNrR2xvYmFscyB8fCB7fTtcclxuICAgIGdsb2JhbHMgPSAkLmpNYXNrR2xvYmFscyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBnbG9iYWxzLCAkLmpNYXNrR2xvYmFscyk7XHJcblxyXG4gICAgLy8gbG9va2luZyBmb3IgaW5wdXRzIHdpdGggZGF0YS1tYXNrIGF0dHJpYnV0ZVxyXG4gICAgaWYgKGdsb2JhbHMuZGF0YU1hc2spIHtcclxuICAgICAgICAkLmFwcGx5RGF0YU1hc2soKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJC5qTWFza0dsb2JhbHMud2F0Y2hEYXRhTWFzaykge1xyXG4gICAgICAgICAgICAkLmFwcGx5RGF0YU1hc2soKTtcclxuICAgICAgICB9XHJcbiAgICB9LCBnbG9iYWxzLndhdGNoSW50ZXJ2YWwpO1xyXG59LCB3aW5kb3cualF1ZXJ5LCB3aW5kb3cuWmVwdG8pKTtcclxuIiwiLyohXHJcbiAqIGpRdWVyeSBNb3VzZXdoZWVsIDMuMS4xMlxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xyXG4gICAgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XHJcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxyXG4gICAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgLy8gTm9kZS9Db21tb25KUyBzdHlsZSBmb3IgQnJvd3NlcmlmeVxyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXHJcbiAgICAgICAgZmFjdG9yeShqUXVlcnkpO1xyXG4gICAgfVxyXG59KGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gICAgdmFyIHRvRml4ICA9IFsnd2hlZWwnLCAnbW91c2V3aGVlbCcsICdET01Nb3VzZVNjcm9sbCcsICdNb3pNb3VzZVBpeGVsU2Nyb2xsJ10sXHJcbiAgICAgICAgdG9CaW5kID0gKCAnb253aGVlbCcgaW4gZG9jdW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID49IDkgKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgWyd3aGVlbCddIDogWydtb3VzZXdoZWVsJywgJ0RvbU1vdXNlU2Nyb2xsJywgJ01vek1vdXNlUGl4ZWxTY3JvbGwnXSxcclxuICAgICAgICBzbGljZSAgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsXHJcbiAgICAgICAgbnVsbExvd2VzdERlbHRhVGltZW91dCwgbG93ZXN0RGVsdGE7XHJcblxyXG4gICAgaWYgKCAkLmV2ZW50LmZpeEhvb2tzICkge1xyXG4gICAgICAgIGZvciAoIHZhciBpID0gdG9GaXgubGVuZ3RoOyBpOyApIHtcclxuICAgICAgICAgICAgJC5ldmVudC5maXhIb29rc1sgdG9GaXhbLS1pXSBdID0gJC5ldmVudC5tb3VzZUhvb2tzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgc3BlY2lhbCA9ICQuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsID0ge1xyXG4gICAgICAgIHZlcnNpb246ICczLjEuMTInLFxyXG5cclxuICAgICAgICBzZXR1cDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5hZGRFdmVudExpc3RlbmVyICkge1xyXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSB0b0JpbmQubGVuZ3RoOyBpOyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoIHRvQmluZFstLWldLCBoYW5kbGVyLCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbm1vdXNld2hlZWwgPSBoYW5kbGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBsaW5lIGhlaWdodCBhbmQgcGFnZSBoZWlnaHQgZm9yIHRoaXMgcGFydGljdWxhciBlbGVtZW50XHJcbiAgICAgICAgICAgICQuZGF0YSh0aGlzLCAnbW91c2V3aGVlbC1saW5lLWhlaWdodCcsIHNwZWNpYWwuZ2V0TGluZUhlaWdodCh0aGlzKSk7XHJcbiAgICAgICAgICAgICQuZGF0YSh0aGlzLCAnbW91c2V3aGVlbC1wYWdlLWhlaWdodCcsIHNwZWNpYWwuZ2V0UGFnZUhlaWdodCh0aGlzKSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgdGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcclxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gdG9CaW5kLmxlbmd0aDsgaTsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCB0b0JpbmRbLS1pXSwgaGFuZGxlciwgZmFsc2UgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25tb3VzZXdoZWVsID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgZGF0YSB3ZSBhZGRlZCB0byB0aGUgZWxlbWVudFxyXG4gICAgICAgICAgICAkLnJlbW92ZURhdGEodGhpcywgJ21vdXNld2hlZWwtbGluZS1oZWlnaHQnKTtcclxuICAgICAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMsICdtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0Jyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0TGluZUhlaWdodDogZnVuY3Rpb24oZWxlbSkge1xyXG4gICAgICAgICAgICB2YXIgJGVsZW0gPSAkKGVsZW0pLFxyXG4gICAgICAgICAgICAgICAgJHBhcmVudCA9ICRlbGVtWydvZmZzZXRQYXJlbnQnIGluICQuZm4gPyAnb2Zmc2V0UGFyZW50JyA6ICdwYXJlbnQnXSgpO1xyXG4gICAgICAgICAgICBpZiAoISRwYXJlbnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAkcGFyZW50ID0gJCgnYm9keScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludCgkcGFyZW50LmNzcygnZm9udFNpemUnKSwgMTApIHx8IHBhcnNlSW50KCRlbGVtLmNzcygnZm9udFNpemUnKSwgMTApIHx8IDE2O1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldFBhZ2VIZWlnaHQ6IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuICQoZWxlbSkuaGVpZ2h0KCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgYWRqdXN0T2xkRGVsdGFzOiB0cnVlLCAvLyBzZWUgc2hvdWxkQWRqdXN0T2xkRGVsdGFzKCkgYmVsb3dcclxuICAgICAgICAgICAgbm9ybWFsaXplT2Zmc2V0OiB0cnVlICAvLyBjYWxscyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZm9yIGVhY2ggZXZlbnRcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4uZXh0ZW5kKHtcclxuICAgICAgICBtb3VzZXdoZWVsOiBmdW5jdGlvbihmbikge1xyXG4gICAgICAgICAgICByZXR1cm4gZm4gPyB0aGlzLmJpbmQoJ21vdXNld2hlZWwnLCBmbikgOiB0aGlzLnRyaWdnZXIoJ21vdXNld2hlZWwnKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB1bm1vdXNld2hlZWw6IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVuYmluZCgnbW91c2V3aGVlbCcsIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlcihldmVudCkge1xyXG4gICAgICAgIHZhciBvcmdFdmVudCAgID0gZXZlbnQgfHwgd2luZG93LmV2ZW50LFxyXG4gICAgICAgICAgICBhcmdzICAgICAgID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxyXG4gICAgICAgICAgICBkZWx0YSAgICAgID0gMCxcclxuICAgICAgICAgICAgZGVsdGFYICAgICA9IDAsXHJcbiAgICAgICAgICAgIGRlbHRhWSAgICAgPSAwLFxyXG4gICAgICAgICAgICBhYnNEZWx0YSAgID0gMCxcclxuICAgICAgICAgICAgb2Zmc2V0WCAgICA9IDAsXHJcbiAgICAgICAgICAgIG9mZnNldFkgICAgPSAwO1xyXG4gICAgICAgIGV2ZW50ID0gJC5ldmVudC5maXgob3JnRXZlbnQpO1xyXG4gICAgICAgIGV2ZW50LnR5cGUgPSAnbW91c2V3aGVlbCc7XHJcblxyXG4gICAgICAgIC8vIE9sZCBzY2hvb2wgc2Nyb2xsd2hlZWwgZGVsdGFcclxuICAgICAgICBpZiAoICdkZXRhaWwnICAgICAgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWSA9IG9yZ0V2ZW50LmRldGFpbCAqIC0xOyAgICAgIH1cclxuICAgICAgICBpZiAoICd3aGVlbERlbHRhJyAgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWSA9IG9yZ0V2ZW50LndoZWVsRGVsdGE7ICAgICAgIH1cclxuICAgICAgICBpZiAoICd3aGVlbERlbHRhWScgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWSA9IG9yZ0V2ZW50LndoZWVsRGVsdGFZOyAgICAgIH1cclxuICAgICAgICBpZiAoICd3aGVlbERlbHRhWCcgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWCA9IG9yZ0V2ZW50LndoZWVsRGVsdGFYICogLTE7IH1cclxuXHJcbiAgICAgICAgLy8gRmlyZWZveCA8IDE3IGhvcml6b250YWwgc2Nyb2xsaW5nIHJlbGF0ZWQgdG8gRE9NTW91c2VTY3JvbGwgZXZlbnRcclxuICAgICAgICBpZiAoICdheGlzJyBpbiBvcmdFdmVudCAmJiBvcmdFdmVudC5heGlzID09PSBvcmdFdmVudC5IT1JJWk9OVEFMX0FYSVMgKSB7XHJcbiAgICAgICAgICAgIGRlbHRhWCA9IGRlbHRhWSAqIC0xO1xyXG4gICAgICAgICAgICBkZWx0YVkgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU2V0IGRlbHRhIHRvIGJlIGRlbHRhWSBvciBkZWx0YVggaWYgZGVsdGFZIGlzIDAgZm9yIGJhY2t3YXJkcyBjb21wYXRhYmlsaXRpeVxyXG4gICAgICAgIGRlbHRhID0gZGVsdGFZID09PSAwID8gZGVsdGFYIDogZGVsdGFZO1xyXG5cclxuICAgICAgICAvLyBOZXcgc2Nob29sIHdoZWVsIGRlbHRhICh3aGVlbCBldmVudClcclxuICAgICAgICBpZiAoICdkZWx0YVknIGluIG9yZ0V2ZW50ICkge1xyXG4gICAgICAgICAgICBkZWx0YVkgPSBvcmdFdmVudC5kZWx0YVkgKiAtMTtcclxuICAgICAgICAgICAgZGVsdGEgID0gZGVsdGFZO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoICdkZWx0YVgnIGluIG9yZ0V2ZW50ICkge1xyXG4gICAgICAgICAgICBkZWx0YVggPSBvcmdFdmVudC5kZWx0YVg7XHJcbiAgICAgICAgICAgIGlmICggZGVsdGFZID09PSAwICkgeyBkZWx0YSAgPSBkZWx0YVggKiAtMTsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTm8gY2hhbmdlIGFjdHVhbGx5IGhhcHBlbmVkLCBubyByZWFzb24gdG8gZ28gYW55IGZ1cnRoZXJcclxuICAgICAgICBpZiAoIGRlbHRhWSA9PT0gMCAmJiBkZWx0YVggPT09IDAgKSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgICAvLyBOZWVkIHRvIGNvbnZlcnQgbGluZXMgYW5kIHBhZ2VzIHRvIHBpeGVscyBpZiB3ZSBhcmVuJ3QgYWxyZWFkeSBpbiBwaXhlbHNcclxuICAgICAgICAvLyBUaGVyZSBhcmUgdGhyZWUgZGVsdGEgbW9kZXM6XHJcbiAgICAgICAgLy8gICAqIGRlbHRhTW9kZSAwIGlzIGJ5IHBpeGVscywgbm90aGluZyB0byBkb1xyXG4gICAgICAgIC8vICAgKiBkZWx0YU1vZGUgMSBpcyBieSBsaW5lc1xyXG4gICAgICAgIC8vICAgKiBkZWx0YU1vZGUgMiBpcyBieSBwYWdlc1xyXG4gICAgICAgIGlmICggb3JnRXZlbnQuZGVsdGFNb2RlID09PSAxICkge1xyXG4gICAgICAgICAgICB2YXIgbGluZUhlaWdodCA9ICQuZGF0YSh0aGlzLCAnbW91c2V3aGVlbC1saW5lLWhlaWdodCcpO1xyXG4gICAgICAgICAgICBkZWx0YSAgKj0gbGluZUhlaWdodDtcclxuICAgICAgICAgICAgZGVsdGFZICo9IGxpbmVIZWlnaHQ7XHJcbiAgICAgICAgICAgIGRlbHRhWCAqPSBsaW5lSGVpZ2h0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIG9yZ0V2ZW50LmRlbHRhTW9kZSA9PT0gMiApIHtcclxuICAgICAgICAgICAgdmFyIHBhZ2VIZWlnaHQgPSAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnKTtcclxuICAgICAgICAgICAgZGVsdGEgICo9IHBhZ2VIZWlnaHQ7XHJcbiAgICAgICAgICAgIGRlbHRhWSAqPSBwYWdlSGVpZ2h0O1xyXG4gICAgICAgICAgICBkZWx0YVggKj0gcGFnZUhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFN0b3JlIGxvd2VzdCBhYnNvbHV0ZSBkZWx0YSB0byBub3JtYWxpemUgdGhlIGRlbHRhIHZhbHVlc1xyXG4gICAgICAgIGFic0RlbHRhID0gTWF0aC5tYXgoIE1hdGguYWJzKGRlbHRhWSksIE1hdGguYWJzKGRlbHRhWCkgKTtcclxuXHJcbiAgICAgICAgaWYgKCAhbG93ZXN0RGVsdGEgfHwgYWJzRGVsdGEgPCBsb3dlc3REZWx0YSApIHtcclxuICAgICAgICAgICAgbG93ZXN0RGVsdGEgPSBhYnNEZWx0YTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkanVzdCBvbGRlciBkZWx0YXMgaWYgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgIGlmICggc2hvdWxkQWRqdXN0T2xkRGVsdGFzKG9yZ0V2ZW50LCBhYnNEZWx0YSkgKSB7XHJcbiAgICAgICAgICAgICAgICBsb3dlc3REZWx0YSAvPSA0MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRqdXN0IG9sZGVyIGRlbHRhcyBpZiBuZWNlc3NhcnlcclxuICAgICAgICBpZiAoIHNob3VsZEFkanVzdE9sZERlbHRhcyhvcmdFdmVudCwgYWJzRGVsdGEpICkge1xyXG4gICAgICAgICAgICAvLyBEaXZpZGUgYWxsIHRoZSB0aGluZ3MgYnkgNDAhXHJcbiAgICAgICAgICAgIGRlbHRhICAvPSA0MDtcclxuICAgICAgICAgICAgZGVsdGFYIC89IDQwO1xyXG4gICAgICAgICAgICBkZWx0YVkgLz0gNDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHZXQgYSB3aG9sZSwgbm9ybWFsaXplZCB2YWx1ZSBmb3IgdGhlIGRlbHRhc1xyXG4gICAgICAgIGRlbHRhICA9IE1hdGhbIGRlbHRhICA+PSAxID8gJ2Zsb29yJyA6ICdjZWlsJyBdKGRlbHRhICAvIGxvd2VzdERlbHRhKTtcclxuICAgICAgICBkZWx0YVggPSBNYXRoWyBkZWx0YVggPj0gMSA/ICdmbG9vcicgOiAnY2VpbCcgXShkZWx0YVggLyBsb3dlc3REZWx0YSk7XHJcbiAgICAgICAgZGVsdGFZID0gTWF0aFsgZGVsdGFZID49IDEgPyAnZmxvb3InIDogJ2NlaWwnIF0oZGVsdGFZIC8gbG93ZXN0RGVsdGEpO1xyXG5cclxuICAgICAgICAvLyBOb3JtYWxpc2Ugb2Zmc2V0WCBhbmQgb2Zmc2V0WSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgaWYgKCBzcGVjaWFsLnNldHRpbmdzLm5vcm1hbGl6ZU9mZnNldCAmJiB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCApIHtcclxuICAgICAgICAgICAgdmFyIGJvdW5kaW5nUmVjdCA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgIG9mZnNldFggPSBldmVudC5jbGllbnRYIC0gYm91bmRpbmdSZWN0LmxlZnQ7XHJcbiAgICAgICAgICAgIG9mZnNldFkgPSBldmVudC5jbGllbnRZIC0gYm91bmRpbmdSZWN0LnRvcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBpbmZvcm1hdGlvbiB0byB0aGUgZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgZXZlbnQuZGVsdGFYID0gZGVsdGFYO1xyXG4gICAgICAgIGV2ZW50LmRlbHRhWSA9IGRlbHRhWTtcclxuICAgICAgICBldmVudC5kZWx0YUZhY3RvciA9IGxvd2VzdERlbHRhO1xyXG4gICAgICAgIGV2ZW50Lm9mZnNldFggPSBvZmZzZXRYO1xyXG4gICAgICAgIGV2ZW50Lm9mZnNldFkgPSBvZmZzZXRZO1xyXG4gICAgICAgIC8vIEdvIGFoZWFkIGFuZCBzZXQgZGVsdGFNb2RlIHRvIDAgc2luY2Ugd2UgY29udmVydGVkIHRvIHBpeGVsc1xyXG4gICAgICAgIC8vIEFsdGhvdWdoIHRoaXMgaXMgYSBsaXR0bGUgb2RkIHNpbmNlIHdlIG92ZXJ3cml0ZSB0aGUgZGVsdGFYL1lcclxuICAgICAgICAvLyBwcm9wZXJ0aWVzIHdpdGggbm9ybWFsaXplZCBkZWx0YXMuXHJcbiAgICAgICAgZXZlbnQuZGVsdGFNb2RlID0gMDtcclxuXHJcbiAgICAgICAgLy8gQWRkIGV2ZW50IGFuZCBkZWx0YSB0byB0aGUgZnJvbnQgb2YgdGhlIGFyZ3VtZW50c1xyXG4gICAgICAgIGFyZ3MudW5zaGlmdChldmVudCwgZGVsdGEsIGRlbHRhWCwgZGVsdGFZKTtcclxuXHJcbiAgICAgICAgLy8gQ2xlYXJvdXQgbG93ZXN0RGVsdGEgYWZ0ZXIgc29tZXRpbWUgdG8gYmV0dGVyXHJcbiAgICAgICAgLy8gaGFuZGxlIG11bHRpcGxlIGRldmljZSB0eXBlcyB0aGF0IGdpdmUgZGlmZmVyZW50XHJcbiAgICAgICAgLy8gYSBkaWZmZXJlbnQgbG93ZXN0RGVsdGFcclxuICAgICAgICAvLyBFeDogdHJhY2twYWQgPSAzIGFuZCBtb3VzZSB3aGVlbCA9IDEyMFxyXG4gICAgICAgIGlmIChudWxsTG93ZXN0RGVsdGFUaW1lb3V0KSB7IGNsZWFyVGltZW91dChudWxsTG93ZXN0RGVsdGFUaW1lb3V0KTsgfVxyXG4gICAgICAgIG51bGxMb3dlc3REZWx0YVRpbWVvdXQgPSBzZXRUaW1lb3V0KG51bGxMb3dlc3REZWx0YSwgMjAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuICgkLmV2ZW50LmRpc3BhdGNoIHx8ICQuZXZlbnQuaGFuZGxlKS5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBudWxsTG93ZXN0RGVsdGEoKSB7XHJcbiAgICAgICAgbG93ZXN0RGVsdGEgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3VsZEFkanVzdE9sZERlbHRhcyhvcmdFdmVudCwgYWJzRGVsdGEpIHtcclxuICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIG9sZGVyIGV2ZW50IGFuZCB0aGUgZGVsdGEgaXMgZGl2aXNhYmxlIGJ5IDEyMCxcclxuICAgICAgICAvLyB0aGVuIHdlIGFyZSBhc3N1bWluZyB0aGF0IHRoZSBicm93c2VyIGlzIHRyZWF0aW5nIHRoaXMgYXMgYW5cclxuICAgICAgICAvLyBvbGRlciBtb3VzZSB3aGVlbCBldmVudCBhbmQgdGhhdCB3ZSBzaG91bGQgZGl2aWRlIHRoZSBkZWx0YXNcclxuICAgICAgICAvLyBieSA0MCB0byB0cnkgYW5kIGdldCBhIG1vcmUgdXNhYmxlIGRlbHRhRmFjdG9yLlxyXG4gICAgICAgIC8vIFNpZGUgbm90ZSwgdGhpcyBhY3R1YWxseSBpbXBhY3RzIHRoZSByZXBvcnRlZCBzY3JvbGwgZGlzdGFuY2VcclxuICAgICAgICAvLyBpbiBvbGRlciBicm93c2VycyBhbmQgY2FuIGNhdXNlIHNjcm9sbGluZyB0byBiZSBzbG93ZXIgdGhhbiBuYXRpdmUuXHJcbiAgICAgICAgLy8gVHVybiB0aGlzIG9mZiBieSBzZXR0aW5nICQuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsLnNldHRpbmdzLmFkanVzdE9sZERlbHRhcyB0byBmYWxzZS5cclxuICAgICAgICByZXR1cm4gc3BlY2lhbC5zZXR0aW5ncy5hZGp1c3RPbGREZWx0YXMgJiYgb3JnRXZlbnQudHlwZSA9PT0gJ21vdXNld2hlZWwnICYmIGFic0RlbHRhICUgMTIwID09PSAwO1xyXG4gICAgfVxyXG5cclxufSkpO1xyXG4iLCIvKiFcclxuICogalNjcm9sbFBhbmUgLSB2Mi4wLjIzIC0gMjAxNi0wMS0yOFxyXG4gKiBodHRwOi8vanNjcm9sbHBhbmUua2VsdmlubHVjay5jb20vXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxNCBLZWx2aW4gTHVja1xyXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIGxpY2Vuc2VzLlxyXG4gKi9cclxuIWZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWEocmVxdWlyZShcImpxdWVyeVwiKSk6YShqUXVlcnkpfShmdW5jdGlvbihhKXthLmZuLmpTY3JvbGxQYW5lPWZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGMoYixjKXtmdW5jdGlvbiBkKGMpe3ZhciBmLGgsaixrLGwsbyxwPSExLHE9ITE7aWYoTj1jLHZvaWQgMD09PU8pbD1iLnNjcm9sbFRvcCgpLG89Yi5zY3JvbGxMZWZ0KCksYi5jc3Moe292ZXJmbG93OlwiaGlkZGVuXCIscGFkZGluZzowfSksUD1iLmlubmVyV2lkdGgoKStyYixRPWIuaW5uZXJIZWlnaHQoKSxiLndpZHRoKFApLE89YSgnPGRpdiBjbGFzcz1cImpzcFBhbmVcIiAvPicpLmNzcyhcInBhZGRpbmdcIixxYikuYXBwZW5kKGIuY2hpbGRyZW4oKSksUj1hKCc8ZGl2IGNsYXNzPVwianNwQ29udGFpbmVyXCIgLz4nKS5jc3Moe3dpZHRoOlArXCJweFwiLGhlaWdodDpRK1wicHhcIn0pLmFwcGVuZChPKS5hcHBlbmRUbyhiKTtlbHNle2lmKGIuY3NzKFwid2lkdGhcIixcIlwiKSxwPU4uc3RpY2tUb0JvdHRvbSYmQSgpLHE9Ti5zdGlja1RvUmlnaHQmJkIoKSxrPWIuaW5uZXJXaWR0aCgpK3JiIT1QfHxiLm91dGVySGVpZ2h0KCkhPVEsayYmKFA9Yi5pbm5lcldpZHRoKCkrcmIsUT1iLmlubmVySGVpZ2h0KCksUi5jc3Moe3dpZHRoOlArXCJweFwiLGhlaWdodDpRK1wicHhcIn0pKSwhayYmc2I9PVMmJk8ub3V0ZXJIZWlnaHQoKT09VClyZXR1cm4gdm9pZCBiLndpZHRoKFApO3NiPVMsTy5jc3MoXCJ3aWR0aFwiLFwiXCIpLGIud2lkdGgoUCksUi5maW5kKFwiPi5qc3BWZXJ0aWNhbEJhciw+LmpzcEhvcml6b250YWxCYXJcIikucmVtb3ZlKCkuZW5kKCl9Ty5jc3MoXCJvdmVyZmxvd1wiLFwiYXV0b1wiKSxTPWMuY29udGVudFdpZHRoP2MuY29udGVudFdpZHRoOk9bMF0uc2Nyb2xsV2lkdGgsVD1PWzBdLnNjcm9sbEhlaWdodCxPLmNzcyhcIm92ZXJmbG93XCIsXCJcIiksVT1TL1AsVj1UL1EsVz1WPjEsWD1VPjEsWHx8Vz8oYi5hZGRDbGFzcyhcImpzcFNjcm9sbGFibGVcIiksZj1OLm1haW50YWluUG9zaXRpb24mJigkfHxiYiksZiYmKGg9eSgpLGo9eigpKSxlKCksZygpLGkoKSxmJiYodyhxP1MtUDpoLCExKSx2KHA/VC1ROmosITEpKSxGKCksQygpLEwoKSxOLmVuYWJsZUtleWJvYXJkTmF2aWdhdGlvbiYmSCgpLE4uY2xpY2tPblRyYWNrJiZtKCksSigpLE4uaGlqYWNrSW50ZXJuYWxMaW5rcyYmSygpKTooYi5yZW1vdmVDbGFzcyhcImpzcFNjcm9sbGFibGVcIiksTy5jc3Moe3RvcDowLGxlZnQ6MCx3aWR0aDpSLndpZHRoKCktcmJ9KSxEKCksRygpLEkoKSxuKCkpLE4uYXV0b1JlaW5pdGlhbGlzZSYmIXBiP3BiPXNldEludGVydmFsKGZ1bmN0aW9uKCl7ZChOKX0sTi5hdXRvUmVpbml0aWFsaXNlRGVsYXkpOiFOLmF1dG9SZWluaXRpYWxpc2UmJnBiJiZjbGVhckludGVydmFsKHBiKSxsJiZiLnNjcm9sbFRvcCgwKSYmdihsLCExKSxvJiZiLnNjcm9sbExlZnQoMCkmJncobywhMSksYi50cmlnZ2VyKFwianNwLWluaXRpYWxpc2VkXCIsW1h8fFddKX1mdW5jdGlvbiBlKCl7VyYmKFIuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BWZXJ0aWNhbEJhclwiIC8+JykuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BDYXAganNwQ2FwVG9wXCIgLz4nKSxhKCc8ZGl2IGNsYXNzPVwianNwVHJhY2tcIiAvPicpLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwRHJhZ1wiIC8+JykuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BEcmFnVG9wXCIgLz4nKSxhKCc8ZGl2IGNsYXNzPVwianNwRHJhZ0JvdHRvbVwiIC8+JykpKSxhKCc8ZGl2IGNsYXNzPVwianNwQ2FwIGpzcENhcEJvdHRvbVwiIC8+JykpKSxjYj1SLmZpbmQoXCI+LmpzcFZlcnRpY2FsQmFyXCIpLGRiPWNiLmZpbmQoXCI+LmpzcFRyYWNrXCIpLFk9ZGIuZmluZChcIj4uanNwRHJhZ1wiKSxOLnNob3dBcnJvd3MmJihoYj1hKCc8YSBjbGFzcz1cImpzcEFycm93IGpzcEFycm93VXBcIiAvPicpLmJpbmQoXCJtb3VzZWRvd24uanNwXCIsaygwLC0xKSkuYmluZChcImNsaWNrLmpzcFwiLEUpLGliPWEoJzxhIGNsYXNzPVwianNwQXJyb3cganNwQXJyb3dEb3duXCIgLz4nKS5iaW5kKFwibW91c2Vkb3duLmpzcFwiLGsoMCwxKSkuYmluZChcImNsaWNrLmpzcFwiLEUpLE4uYXJyb3dTY3JvbGxPbkhvdmVyJiYoaGIuYmluZChcIm1vdXNlb3Zlci5qc3BcIixrKDAsLTEsaGIpKSxpYi5iaW5kKFwibW91c2VvdmVyLmpzcFwiLGsoMCwxLGliKSkpLGooZGIsTi52ZXJ0aWNhbEFycm93UG9zaXRpb25zLGhiLGliKSksZmI9USxSLmZpbmQoXCI+LmpzcFZlcnRpY2FsQmFyPi5qc3BDYXA6dmlzaWJsZSw+LmpzcFZlcnRpY2FsQmFyPi5qc3BBcnJvd1wiKS5lYWNoKGZ1bmN0aW9uKCl7ZmItPWEodGhpcykub3V0ZXJIZWlnaHQoKX0pLFkuaG92ZXIoZnVuY3Rpb24oKXtZLmFkZENsYXNzKFwianNwSG92ZXJcIil9LGZ1bmN0aW9uKCl7WS5yZW1vdmVDbGFzcyhcImpzcEhvdmVyXCIpfSkuYmluZChcIm1vdXNlZG93bi5qc3BcIixmdW5jdGlvbihiKXthKFwiaHRtbFwiKS5iaW5kKFwiZHJhZ3N0YXJ0LmpzcCBzZWxlY3RzdGFydC5qc3BcIixFKSxZLmFkZENsYXNzKFwianNwQWN0aXZlXCIpO3ZhciBjPWIucGFnZVktWS5wb3NpdGlvbigpLnRvcDtyZXR1cm4gYShcImh0bWxcIikuYmluZChcIm1vdXNlbW92ZS5qc3BcIixmdW5jdGlvbihhKXtwKGEucGFnZVktYywhMSl9KS5iaW5kKFwibW91c2V1cC5qc3AgbW91c2VsZWF2ZS5qc3BcIixvKSwhMX0pLGYoKSl9ZnVuY3Rpb24gZigpe2RiLmhlaWdodChmYitcInB4XCIpLCQ9MCxlYj1OLnZlcnRpY2FsR3V0dGVyK2RiLm91dGVyV2lkdGgoKSxPLndpZHRoKFAtZWItcmIpO3RyeXswPT09Y2IucG9zaXRpb24oKS5sZWZ0JiZPLmNzcyhcIm1hcmdpbi1sZWZ0XCIsZWIrXCJweFwiKX1jYXRjaChhKXt9fWZ1bmN0aW9uIGcoKXtYJiYoUi5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcEhvcml6b250YWxCYXJcIiAvPicpLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwQ2FwIGpzcENhcExlZnRcIiAvPicpLGEoJzxkaXYgY2xhc3M9XCJqc3BUcmFja1wiIC8+JykuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BEcmFnXCIgLz4nKS5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcERyYWdMZWZ0XCIgLz4nKSxhKCc8ZGl2IGNsYXNzPVwianNwRHJhZ1JpZ2h0XCIgLz4nKSkpLGEoJzxkaXYgY2xhc3M9XCJqc3BDYXAganNwQ2FwUmlnaHRcIiAvPicpKSksamI9Ui5maW5kKFwiPi5qc3BIb3Jpem9udGFsQmFyXCIpLGtiPWpiLmZpbmQoXCI+LmpzcFRyYWNrXCIpLF89a2IuZmluZChcIj4uanNwRHJhZ1wiKSxOLnNob3dBcnJvd3MmJihuYj1hKCc8YSBjbGFzcz1cImpzcEFycm93IGpzcEFycm93TGVmdFwiIC8+JykuYmluZChcIm1vdXNlZG93bi5qc3BcIixrKC0xLDApKS5iaW5kKFwiY2xpY2suanNwXCIsRSksb2I9YSgnPGEgY2xhc3M9XCJqc3BBcnJvdyBqc3BBcnJvd1JpZ2h0XCIgLz4nKS5iaW5kKFwibW91c2Vkb3duLmpzcFwiLGsoMSwwKSkuYmluZChcImNsaWNrLmpzcFwiLEUpLE4uYXJyb3dTY3JvbGxPbkhvdmVyJiYobmIuYmluZChcIm1vdXNlb3Zlci5qc3BcIixrKC0xLDAsbmIpKSxvYi5iaW5kKFwibW91c2VvdmVyLmpzcFwiLGsoMSwwLG9iKSkpLGooa2IsTi5ob3Jpem9udGFsQXJyb3dQb3NpdGlvbnMsbmIsb2IpKSxfLmhvdmVyKGZ1bmN0aW9uKCl7Xy5hZGRDbGFzcyhcImpzcEhvdmVyXCIpfSxmdW5jdGlvbigpe18ucmVtb3ZlQ2xhc3MoXCJqc3BIb3ZlclwiKX0pLmJpbmQoXCJtb3VzZWRvd24uanNwXCIsZnVuY3Rpb24oYil7YShcImh0bWxcIikuYmluZChcImRyYWdzdGFydC5qc3Agc2VsZWN0c3RhcnQuanNwXCIsRSksXy5hZGRDbGFzcyhcImpzcEFjdGl2ZVwiKTt2YXIgYz1iLnBhZ2VYLV8ucG9zaXRpb24oKS5sZWZ0O3JldHVybiBhKFwiaHRtbFwiKS5iaW5kKFwibW91c2Vtb3ZlLmpzcFwiLGZ1bmN0aW9uKGEpe3IoYS5wYWdlWC1jLCExKX0pLmJpbmQoXCJtb3VzZXVwLmpzcCBtb3VzZWxlYXZlLmpzcFwiLG8pLCExfSksbGI9Ui5pbm5lcldpZHRoKCksaCgpKX1mdW5jdGlvbiBoKCl7Ui5maW5kKFwiPi5qc3BIb3Jpem9udGFsQmFyPi5qc3BDYXA6dmlzaWJsZSw+LmpzcEhvcml6b250YWxCYXI+LmpzcEFycm93XCIpLmVhY2goZnVuY3Rpb24oKXtsYi09YSh0aGlzKS5vdXRlcldpZHRoKCl9KSxrYi53aWR0aChsYitcInB4XCIpLGJiPTB9ZnVuY3Rpb24gaSgpe2lmKFgmJlcpe3ZhciBiPWtiLm91dGVySGVpZ2h0KCksYz1kYi5vdXRlcldpZHRoKCk7ZmItPWIsYShqYikuZmluZChcIj4uanNwQ2FwOnZpc2libGUsPi5qc3BBcnJvd1wiKS5lYWNoKGZ1bmN0aW9uKCl7bGIrPWEodGhpcykub3V0ZXJXaWR0aCgpfSksbGItPWMsUS09YyxQLT1iLGtiLnBhcmVudCgpLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwQ29ybmVyXCIgLz4nKS5jc3MoXCJ3aWR0aFwiLGIrXCJweFwiKSksZigpLGgoKX1YJiZPLndpZHRoKFIub3V0ZXJXaWR0aCgpLXJiK1wicHhcIiksVD1PLm91dGVySGVpZ2h0KCksVj1UL1EsWCYmKG1iPU1hdGguY2VpbCgxL1UqbGIpLG1iPk4uaG9yaXpvbnRhbERyYWdNYXhXaWR0aD9tYj1OLmhvcml6b250YWxEcmFnTWF4V2lkdGg6bWI8Ti5ob3Jpem9udGFsRHJhZ01pbldpZHRoJiYobWI9Ti5ob3Jpem9udGFsRHJhZ01pbldpZHRoKSxfLndpZHRoKG1iK1wicHhcIiksYWI9bGItbWIscyhiYikpLFcmJihnYj1NYXRoLmNlaWwoMS9WKmZiKSxnYj5OLnZlcnRpY2FsRHJhZ01heEhlaWdodD9nYj1OLnZlcnRpY2FsRHJhZ01heEhlaWdodDpnYjxOLnZlcnRpY2FsRHJhZ01pbkhlaWdodCYmKGdiPU4udmVydGljYWxEcmFnTWluSGVpZ2h0KSxZLmhlaWdodChnYitcInB4XCIpLFo9ZmItZ2IscSgkKSl9ZnVuY3Rpb24gaihhLGIsYyxkKXt2YXIgZSxmPVwiYmVmb3JlXCIsZz1cImFmdGVyXCI7XCJvc1wiPT1iJiYoYj0vTWFjLy50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk/XCJhZnRlclwiOlwic3BsaXRcIiksYj09Zj9nPWI6Yj09ZyYmKGY9YixlPWMsYz1kLGQ9ZSksYVtmXShjKVtnXShkKX1mdW5jdGlvbiBrKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbChhLGIsdGhpcyxjKSx0aGlzLmJsdXIoKSwhMX19ZnVuY3Rpb24gbChiLGMsZCxlKXtkPWEoZCkuYWRkQ2xhc3MoXCJqc3BBY3RpdmVcIik7dmFyIGYsZyxoPSEwLGk9ZnVuY3Rpb24oKXswIT09YiYmdGIuc2Nyb2xsQnlYKGIqTi5hcnJvd0J1dHRvblNwZWVkKSwwIT09YyYmdGIuc2Nyb2xsQnlZKGMqTi5hcnJvd0J1dHRvblNwZWVkKSxnPXNldFRpbWVvdXQoaSxoP04uaW5pdGlhbERlbGF5Ok4uYXJyb3dSZXBlYXRGcmVxKSxoPSExfTtpKCksZj1lP1wibW91c2VvdXQuanNwXCI6XCJtb3VzZXVwLmpzcFwiLGU9ZXx8YShcImh0bWxcIiksZS5iaW5kKGYsZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKFwianNwQWN0aXZlXCIpLGcmJmNsZWFyVGltZW91dChnKSxnPW51bGwsZS51bmJpbmQoZil9KX1mdW5jdGlvbiBtKCl7bigpLFcmJmRiLmJpbmQoXCJtb3VzZWRvd24uanNwXCIsZnVuY3Rpb24oYil7aWYodm9pZCAwPT09Yi5vcmlnaW5hbFRhcmdldHx8Yi5vcmlnaW5hbFRhcmdldD09Yi5jdXJyZW50VGFyZ2V0KXt2YXIgYyxkPWEodGhpcyksZT1kLm9mZnNldCgpLGY9Yi5wYWdlWS1lLnRvcC0kLGc9ITAsaD1mdW5jdGlvbigpe3ZhciBhPWQub2Zmc2V0KCksZT1iLnBhZ2VZLWEudG9wLWdiLzIsaj1RKk4uc2Nyb2xsUGFnZVBlcmNlbnQsaz1aKmovKFQtUSk7aWYoMD5mKSQtaz5lP3RiLnNjcm9sbEJ5WSgtaik6cChlKTtlbHNle2lmKCEoZj4wKSlyZXR1cm4gdm9pZCBpKCk7ZT4kK2s/dGIuc2Nyb2xsQnlZKGopOnAoZSl9Yz1zZXRUaW1lb3V0KGgsZz9OLmluaXRpYWxEZWxheTpOLnRyYWNrQ2xpY2tSZXBlYXRGcmVxKSxnPSExfSxpPWZ1bmN0aW9uKCl7YyYmY2xlYXJUaW1lb3V0KGMpLGM9bnVsbCxhKGRvY3VtZW50KS51bmJpbmQoXCJtb3VzZXVwLmpzcFwiLGkpfTtyZXR1cm4gaCgpLGEoZG9jdW1lbnQpLmJpbmQoXCJtb3VzZXVwLmpzcFwiLGkpLCExfX0pLFgmJmtiLmJpbmQoXCJtb3VzZWRvd24uanNwXCIsZnVuY3Rpb24oYil7aWYodm9pZCAwPT09Yi5vcmlnaW5hbFRhcmdldHx8Yi5vcmlnaW5hbFRhcmdldD09Yi5jdXJyZW50VGFyZ2V0KXt2YXIgYyxkPWEodGhpcyksZT1kLm9mZnNldCgpLGY9Yi5wYWdlWC1lLmxlZnQtYmIsZz0hMCxoPWZ1bmN0aW9uKCl7dmFyIGE9ZC5vZmZzZXQoKSxlPWIucGFnZVgtYS5sZWZ0LW1iLzIsaj1QKk4uc2Nyb2xsUGFnZVBlcmNlbnQsaz1hYipqLyhTLVApO2lmKDA+ZiliYi1rPmU/dGIuc2Nyb2xsQnlYKC1qKTpyKGUpO2Vsc2V7aWYoIShmPjApKXJldHVybiB2b2lkIGkoKTtlPmJiK2s/dGIuc2Nyb2xsQnlYKGopOnIoZSl9Yz1zZXRUaW1lb3V0KGgsZz9OLmluaXRpYWxEZWxheTpOLnRyYWNrQ2xpY2tSZXBlYXRGcmVxKSxnPSExfSxpPWZ1bmN0aW9uKCl7YyYmY2xlYXJUaW1lb3V0KGMpLGM9bnVsbCxhKGRvY3VtZW50KS51bmJpbmQoXCJtb3VzZXVwLmpzcFwiLGkpfTtyZXR1cm4gaCgpLGEoZG9jdW1lbnQpLmJpbmQoXCJtb3VzZXVwLmpzcFwiLGkpLCExfX0pfWZ1bmN0aW9uIG4oKXtrYiYma2IudW5iaW5kKFwibW91c2Vkb3duLmpzcFwiKSxkYiYmZGIudW5iaW5kKFwibW91c2Vkb3duLmpzcFwiKX1mdW5jdGlvbiBvKCl7YShcImh0bWxcIikudW5iaW5kKFwiZHJhZ3N0YXJ0LmpzcCBzZWxlY3RzdGFydC5qc3AgbW91c2Vtb3ZlLmpzcCBtb3VzZXVwLmpzcCBtb3VzZWxlYXZlLmpzcFwiKSxZJiZZLnJlbW92ZUNsYXNzKFwianNwQWN0aXZlXCIpLF8mJl8ucmVtb3ZlQ2xhc3MoXCJqc3BBY3RpdmVcIil9ZnVuY3Rpb24gcChjLGQpe2lmKFcpezA+Yz9jPTA6Yz5aJiYoYz1aKTt2YXIgZT1uZXcgYS5FdmVudChcImpzcC13aWxsLXNjcm9sbC15XCIpO2lmKGIudHJpZ2dlcihlLFtjXSksIWUuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBmPWN8fDAsZz0wPT09ZixoPWY9PVosaT1jL1osaj0taSooVC1RKTt2b2lkIDA9PT1kJiYoZD1OLmFuaW1hdGVTY3JvbGwpLGQ/dGIuYW5pbWF0ZShZLFwidG9wXCIsYyxxLGZ1bmN0aW9uKCl7Yi50cmlnZ2VyKFwianNwLXVzZXItc2Nyb2xsLXlcIixbLWosZyxoXSl9KTooWS5jc3MoXCJ0b3BcIixjKSxxKGMpLGIudHJpZ2dlcihcImpzcC11c2VyLXNjcm9sbC15XCIsWy1qLGcsaF0pKX19fWZ1bmN0aW9uIHEoYSl7dm9pZCAwPT09YSYmKGE9WS5wb3NpdGlvbigpLnRvcCksUi5zY3JvbGxUb3AoMCksJD1hfHwwO3ZhciBjPTA9PT0kLGQ9JD09WixlPWEvWixmPS1lKihULVEpOyh1YiE9Y3x8d2IhPWQpJiYodWI9Yyx3Yj1kLGIudHJpZ2dlcihcImpzcC1hcnJvdy1jaGFuZ2VcIixbdWIsd2IsdmIseGJdKSksdChjLGQpLE8uY3NzKFwidG9wXCIsZiksYi50cmlnZ2VyKFwianNwLXNjcm9sbC15XCIsWy1mLGMsZF0pLnRyaWdnZXIoXCJzY3JvbGxcIil9ZnVuY3Rpb24gcihjLGQpe2lmKFgpezA+Yz9jPTA6Yz5hYiYmKGM9YWIpO3ZhciBlPW5ldyBhLkV2ZW50KFwianNwLXdpbGwtc2Nyb2xsLXhcIik7aWYoYi50cmlnZ2VyKGUsW2NdKSwhZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGY9Y3x8MCxnPTA9PT1mLGg9Zj09YWIsaT1jL2FiLGo9LWkqKFMtUCk7dm9pZCAwPT09ZCYmKGQ9Ti5hbmltYXRlU2Nyb2xsKSxkP3RiLmFuaW1hdGUoXyxcImxlZnRcIixjLHMsZnVuY3Rpb24oKXtiLnRyaWdnZXIoXCJqc3AtdXNlci1zY3JvbGwteFwiLFstaixnLGhdKX0pOihfLmNzcyhcImxlZnRcIixjKSxzKGMpLGIudHJpZ2dlcihcImpzcC11c2VyLXNjcm9sbC14XCIsWy1qLGcsaF0pKX19fWZ1bmN0aW9uIHMoYSl7dm9pZCAwPT09YSYmKGE9Xy5wb3NpdGlvbigpLmxlZnQpLFIuc2Nyb2xsVG9wKDApLGJiPWF8fDA7dmFyIGM9MD09PWJiLGQ9YmI9PWFiLGU9YS9hYixmPS1lKihTLVApOyh2YiE9Y3x8eGIhPWQpJiYodmI9Yyx4Yj1kLGIudHJpZ2dlcihcImpzcC1hcnJvdy1jaGFuZ2VcIixbdWIsd2IsdmIseGJdKSksdShjLGQpLE8uY3NzKFwibGVmdFwiLGYpLGIudHJpZ2dlcihcImpzcC1zY3JvbGwteFwiLFstZixjLGRdKS50cmlnZ2VyKFwic2Nyb2xsXCIpfWZ1bmN0aW9uIHQoYSxiKXtOLnNob3dBcnJvd3MmJihoYlthP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwianNwRGlzYWJsZWRcIiksaWJbYj9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImpzcERpc2FibGVkXCIpKX1mdW5jdGlvbiB1KGEsYil7Ti5zaG93QXJyb3dzJiYobmJbYT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImpzcERpc2FibGVkXCIpLG9iW2I/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3BEaXNhYmxlZFwiKSl9ZnVuY3Rpb24gdihhLGIpe3ZhciBjPWEvKFQtUSk7cChjKlosYil9ZnVuY3Rpb24gdyhhLGIpe3ZhciBjPWEvKFMtUCk7cihjKmFiLGIpfWZ1bmN0aW9uIHgoYixjLGQpe3ZhciBlLGYsZyxoLGksaixrLGwsbSxuPTAsbz0wO3RyeXtlPWEoYil9Y2F0Y2gocCl7cmV0dXJufWZvcihmPWUub3V0ZXJIZWlnaHQoKSxnPWUub3V0ZXJXaWR0aCgpLFIuc2Nyb2xsVG9wKDApLFIuc2Nyb2xsTGVmdCgwKTshZS5pcyhcIi5qc3BQYW5lXCIpOylpZihuKz1lLnBvc2l0aW9uKCkudG9wLG8rPWUucG9zaXRpb24oKS5sZWZ0LGU9ZS5vZmZzZXRQYXJlbnQoKSwvXmJvZHl8aHRtbCQvaS50ZXN0KGVbMF0ubm9kZU5hbWUpKXJldHVybjtoPXooKSxqPWgrUSxoPm58fGM/bD1uLU4uaG9yaXpvbnRhbEd1dHRlcjpuK2Y+aiYmKGw9bi1RK2YrTi5ob3Jpem9udGFsR3V0dGVyKSxpc05hTihsKXx8dihsLGQpLGk9eSgpLGs9aStQLGk+b3x8Yz9tPW8tTi5ob3Jpem9udGFsR3V0dGVyOm8rZz5rJiYobT1vLVArZytOLmhvcml6b250YWxHdXR0ZXIpLGlzTmFOKG0pfHx3KG0sZCl9ZnVuY3Rpb24geSgpe3JldHVybi1PLnBvc2l0aW9uKCkubGVmdH1mdW5jdGlvbiB6KCl7cmV0dXJuLU8ucG9zaXRpb24oKS50b3B9ZnVuY3Rpb24gQSgpe3ZhciBhPVQtUTtyZXR1cm4gYT4yMCYmYS16KCk8MTB9ZnVuY3Rpb24gQigpe3ZhciBhPVMtUDtyZXR1cm4gYT4yMCYmYS15KCk8MTB9ZnVuY3Rpb24gQygpe1IudW5iaW5kKHpiKS5iaW5kKHpiLGZ1bmN0aW9uKGEsYixjLGQpe2JifHwoYmI9MCksJHx8KCQ9MCk7dmFyIGU9YmIsZj0kLGc9YS5kZWx0YUZhY3Rvcnx8Ti5tb3VzZVdoZWVsU3BlZWQ7cmV0dXJuIHRiLnNjcm9sbEJ5KGMqZywtZCpnLCExKSxlPT1iYiYmZj09JH0pfWZ1bmN0aW9uIEQoKXtSLnVuYmluZCh6Yil9ZnVuY3Rpb24gRSgpe3JldHVybiExfWZ1bmN0aW9uIEYoKXtPLmZpbmQoXCI6aW5wdXQsYVwiKS51bmJpbmQoXCJmb2N1cy5qc3BcIikuYmluZChcImZvY3VzLmpzcFwiLGZ1bmN0aW9uKGEpe3goYS50YXJnZXQsITEpfSl9ZnVuY3Rpb24gRygpe08uZmluZChcIjppbnB1dCxhXCIpLnVuYmluZChcImZvY3VzLmpzcFwiKX1mdW5jdGlvbiBIKCl7ZnVuY3Rpb24gYygpe3ZhciBhPWJiLGI9JDtzd2l0Y2goZCl7Y2FzZSA0MDp0Yi5zY3JvbGxCeVkoTi5rZXlib2FyZFNwZWVkLCExKTticmVhaztjYXNlIDM4OnRiLnNjcm9sbEJ5WSgtTi5rZXlib2FyZFNwZWVkLCExKTticmVhaztjYXNlIDM0OmNhc2UgMzI6dGIuc2Nyb2xsQnlZKFEqTi5zY3JvbGxQYWdlUGVyY2VudCwhMSk7YnJlYWs7Y2FzZSAzMzp0Yi5zY3JvbGxCeVkoLVEqTi5zY3JvbGxQYWdlUGVyY2VudCwhMSk7YnJlYWs7Y2FzZSAzOTp0Yi5zY3JvbGxCeVgoTi5rZXlib2FyZFNwZWVkLCExKTticmVhaztjYXNlIDM3OnRiLnNjcm9sbEJ5WCgtTi5rZXlib2FyZFNwZWVkLCExKX1yZXR1cm4gZT1hIT1iYnx8YiE9JH12YXIgZCxlLGY9W107WCYmZi5wdXNoKGpiWzBdKSxXJiZmLnB1c2goY2JbMF0pLE8uYmluZChcImZvY3VzLmpzcFwiLGZ1bmN0aW9uKCl7Yi5mb2N1cygpfSksYi5hdHRyKFwidGFiaW5kZXhcIiwwKS51bmJpbmQoXCJrZXlkb3duLmpzcCBrZXlwcmVzcy5qc3BcIikuYmluZChcImtleWRvd24uanNwXCIsZnVuY3Rpb24oYil7aWYoYi50YXJnZXQ9PT10aGlzfHxmLmxlbmd0aCYmYShiLnRhcmdldCkuY2xvc2VzdChmKS5sZW5ndGgpe3ZhciBnPWJiLGg9JDtzd2l0Y2goYi5rZXlDb2RlKXtjYXNlIDQwOmNhc2UgMzg6Y2FzZSAzNDpjYXNlIDMyOmNhc2UgMzM6Y2FzZSAzOTpjYXNlIDM3OmQ9Yi5rZXlDb2RlLGMoKTticmVhaztjYXNlIDM1OnYoVC1RKSxkPW51bGw7YnJlYWs7Y2FzZSAzNjp2KDApLGQ9bnVsbH1yZXR1cm4gZT1iLmtleUNvZGU9PWQmJmchPWJifHxoIT0kLCFlfX0pLmJpbmQoXCJrZXlwcmVzcy5qc3BcIixmdW5jdGlvbihiKXtyZXR1cm4gYi5rZXlDb2RlPT1kJiZjKCksYi50YXJnZXQ9PT10aGlzfHxmLmxlbmd0aCYmYShiLnRhcmdldCkuY2xvc2VzdChmKS5sZW5ndGg/IWU6dm9pZCAwfSksTi5oaWRlRm9jdXM/KGIuY3NzKFwib3V0bGluZVwiLFwibm9uZVwiKSxcImhpZGVGb2N1c1wiaW4gUlswXSYmYi5hdHRyKFwiaGlkZUZvY3VzXCIsITApKTooYi5jc3MoXCJvdXRsaW5lXCIsXCJcIiksXCJoaWRlRm9jdXNcImluIFJbMF0mJmIuYXR0cihcImhpZGVGb2N1c1wiLCExKSl9ZnVuY3Rpb24gSSgpe2IuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKS5yZW1vdmVBdHRyKFwidGFiaW5kZXhcIikudW5iaW5kKFwia2V5ZG93bi5qc3Aga2V5cHJlc3MuanNwXCIpLE8udW5iaW5kKFwiLmpzcFwiKX1mdW5jdGlvbiBKKCl7aWYobG9jYXRpb24uaGFzaCYmbG9jYXRpb24uaGFzaC5sZW5ndGg+MSl7dmFyIGIsYyxkPWVzY2FwZShsb2NhdGlvbi5oYXNoLnN1YnN0cigxKSk7dHJ5e2I9YShcIiNcIitkKycsIGFbbmFtZT1cIicrZCsnXCJdJyl9Y2F0Y2goZSl7cmV0dXJufWIubGVuZ3RoJiZPLmZpbmQoZCkmJigwPT09Ui5zY3JvbGxUb3AoKT9jPXNldEludGVydmFsKGZ1bmN0aW9uKCl7Ui5zY3JvbGxUb3AoKT4wJiYoeChiLCEwKSxhKGRvY3VtZW50KS5zY3JvbGxUb3AoUi5wb3NpdGlvbigpLnRvcCksY2xlYXJJbnRlcnZhbChjKSl9LDUwKTooeChiLCEwKSxhKGRvY3VtZW50KS5zY3JvbGxUb3AoUi5wb3NpdGlvbigpLnRvcCkpKX19ZnVuY3Rpb24gSygpe2EoZG9jdW1lbnQuYm9keSkuZGF0YShcImpzcEhpamFja1wiKXx8KGEoZG9jdW1lbnQuYm9keSkuZGF0YShcImpzcEhpamFja1wiLCEwKSxhKGRvY3VtZW50LmJvZHkpLmRlbGVnYXRlKCdhW2hyZWYqPVwiI1wiXScsXCJjbGlja1wiLGZ1bmN0aW9uKGIpe3ZhciBjLGQsZSxmLGcsaCxpPXRoaXMuaHJlZi5zdWJzdHIoMCx0aGlzLmhyZWYuaW5kZXhPZihcIiNcIikpLGo9bG9jYXRpb24uaHJlZjtpZigtMSE9PWxvY2F0aW9uLmhyZWYuaW5kZXhPZihcIiNcIikmJihqPWxvY2F0aW9uLmhyZWYuc3Vic3RyKDAsbG9jYXRpb24uaHJlZi5pbmRleE9mKFwiI1wiKSkpLGk9PT1qKXtjPWVzY2FwZSh0aGlzLmhyZWYuc3Vic3RyKHRoaXMuaHJlZi5pbmRleE9mKFwiI1wiKSsxKSk7dHJ5e2Q9YShcIiNcIitjKycsIGFbbmFtZT1cIicrYysnXCJdJyl9Y2F0Y2goayl7cmV0dXJufWQubGVuZ3RoJiYoZT1kLmNsb3Nlc3QoXCIuanNwU2Nyb2xsYWJsZVwiKSxmPWUuZGF0YShcImpzcFwiKSxmLnNjcm9sbFRvRWxlbWVudChkLCEwKSxlWzBdLnNjcm9sbEludG9WaWV3JiYoZz1hKHdpbmRvdykuc2Nyb2xsVG9wKCksaD1kLm9mZnNldCgpLnRvcCwoZz5ofHxoPmcrYSh3aW5kb3cpLmhlaWdodCgpKSYmZVswXS5zY3JvbGxJbnRvVmlldygpKSxiLnByZXZlbnREZWZhdWx0KCkpfX0pKX1mdW5jdGlvbiBMKCl7dmFyIGEsYixjLGQsZSxmPSExO1IudW5iaW5kKFwidG91Y2hzdGFydC5qc3AgdG91Y2htb3ZlLmpzcCB0b3VjaGVuZC5qc3AgY2xpY2suanNwLXRvdWNoY2xpY2tcIikuYmluZChcInRvdWNoc3RhcnQuanNwXCIsZnVuY3Rpb24oZyl7dmFyIGg9Zy5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07YT15KCksYj16KCksYz1oLnBhZ2VYLGQ9aC5wYWdlWSxlPSExLGY9ITB9KS5iaW5kKFwidG91Y2htb3ZlLmpzcFwiLGZ1bmN0aW9uKGcpe2lmKGYpe3ZhciBoPWcub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLGk9YmIsaj0kO3JldHVybiB0Yi5zY3JvbGxUbyhhK2MtaC5wYWdlWCxiK2QtaC5wYWdlWSksZT1lfHxNYXRoLmFicyhjLWgucGFnZVgpPjV8fE1hdGguYWJzKGQtaC5wYWdlWSk+NSxpPT1iYiYmaj09JH19KS5iaW5kKFwidG91Y2hlbmQuanNwXCIsZnVuY3Rpb24oKXtmPSExfSkuYmluZChcImNsaWNrLmpzcC10b3VjaGNsaWNrXCIsZnVuY3Rpb24oKXtyZXR1cm4gZT8oZT0hMSwhMSk6dm9pZCAwfSl9ZnVuY3Rpb24gTSgpe3ZhciBhPXooKSxjPXkoKTtiLnJlbW92ZUNsYXNzKFwianNwU2Nyb2xsYWJsZVwiKS51bmJpbmQoXCIuanNwXCIpLE8udW5iaW5kKFwiLmpzcFwiKSxiLnJlcGxhY2VXaXRoKHliLmFwcGVuZChPLmNoaWxkcmVuKCkpKSx5Yi5zY3JvbGxUb3AoYSkseWIuc2Nyb2xsTGVmdChjKSxwYiYmY2xlYXJJbnRlcnZhbChwYil9dmFyIE4sTyxQLFEsUixTLFQsVSxWLFcsWCxZLFosJCxfLGFiLGJiLGNiLGRiLGViLGZiLGdiLGhiLGliLGpiLGtiLGxiLG1iLG5iLG9iLHBiLHFiLHJiLHNiLHRiPXRoaXMsdWI9ITAsdmI9ITAsd2I9ITEseGI9ITEseWI9Yi5jbG9uZSghMSwhMSkuZW1wdHkoKSx6Yj1hLmZuLm13aGVlbEludGVudD9cIm13aGVlbEludGVudC5qc3BcIjpcIm1vdXNld2hlZWwuanNwXCI7XCJib3JkZXItYm94XCI9PT1iLmNzcyhcImJveC1zaXppbmdcIik/KHFiPTAscmI9MCk6KHFiPWIuY3NzKFwicGFkZGluZ1RvcFwiKStcIiBcIitiLmNzcyhcInBhZGRpbmdSaWdodFwiKStcIiBcIitiLmNzcyhcInBhZGRpbmdCb3R0b21cIikrXCIgXCIrYi5jc3MoXCJwYWRkaW5nTGVmdFwiKSxyYj0ocGFyc2VJbnQoYi5jc3MoXCJwYWRkaW5nTGVmdFwiKSwxMCl8fDApKyhwYXJzZUludChiLmNzcyhcInBhZGRpbmdSaWdodFwiKSwxMCl8fDApKSxhLmV4dGVuZCh0Yix7cmVpbml0aWFsaXNlOmZ1bmN0aW9uKGIpe2I9YS5leHRlbmQoe30sTixiKSxkKGIpfSxzY3JvbGxUb0VsZW1lbnQ6ZnVuY3Rpb24oYSxiLGMpe3goYSxiLGMpfSxzY3JvbGxUbzpmdW5jdGlvbihhLGIsYyl7dyhhLGMpLHYoYixjKX0sc2Nyb2xsVG9YOmZ1bmN0aW9uKGEsYil7dyhhLGIpfSxzY3JvbGxUb1k6ZnVuY3Rpb24oYSxiKXt2KGEsYil9LHNjcm9sbFRvUGVyY2VudFg6ZnVuY3Rpb24oYSxiKXt3KGEqKFMtUCksYil9LHNjcm9sbFRvUGVyY2VudFk6ZnVuY3Rpb24oYSxiKXt2KGEqKFQtUSksYil9LHNjcm9sbEJ5OmZ1bmN0aW9uKGEsYixjKXt0Yi5zY3JvbGxCeVgoYSxjKSx0Yi5zY3JvbGxCeVkoYixjKX0sc2Nyb2xsQnlYOmZ1bmN0aW9uKGEsYil7dmFyIGM9eSgpK01hdGhbMD5hP1wiZmxvb3JcIjpcImNlaWxcIl0oYSksZD1jLyhTLVApO3IoZCphYixiKX0sc2Nyb2xsQnlZOmZ1bmN0aW9uKGEsYil7dmFyIGM9eigpK01hdGhbMD5hP1wiZmxvb3JcIjpcImNlaWxcIl0oYSksZD1jLyhULVEpO3AoZCpaLGIpfSxwb3NpdGlvbkRyYWdYOmZ1bmN0aW9uKGEsYil7cihhLGIpfSxwb3NpdGlvbkRyYWdZOmZ1bmN0aW9uKGEsYil7cChhLGIpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9e307ZltiXT1jLGEuYW5pbWF0ZShmLHtkdXJhdGlvbjpOLmFuaW1hdGVEdXJhdGlvbixlYXNpbmc6Ti5hbmltYXRlRWFzZSxxdWV1ZTohMSxzdGVwOmQsY29tcGxldGU6ZX0pfSxnZXRDb250ZW50UG9zaXRpb25YOmZ1bmN0aW9uKCl7cmV0dXJuIHkoKX0sZ2V0Q29udGVudFBvc2l0aW9uWTpmdW5jdGlvbigpe3JldHVybiB6KCl9LGdldENvbnRlbnRXaWR0aDpmdW5jdGlvbigpe3JldHVybiBTfSxnZXRDb250ZW50SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIFR9LGdldFBlcmNlbnRTY3JvbGxlZFg6ZnVuY3Rpb24oKXtyZXR1cm4geSgpLyhTLVApfSxnZXRQZXJjZW50U2Nyb2xsZWRZOmZ1bmN0aW9uKCl7cmV0dXJuIHooKS8oVC1RKX0sZ2V0SXNTY3JvbGxhYmxlSDpmdW5jdGlvbigpe3JldHVybiBYfSxnZXRJc1Njcm9sbGFibGVWOmZ1bmN0aW9uKCl7cmV0dXJuIFd9LGdldENvbnRlbnRQYW5lOmZ1bmN0aW9uKCl7cmV0dXJuIE99LHNjcm9sbFRvQm90dG9tOmZ1bmN0aW9uKGEpe3AoWixhKX0saGlqYWNrSW50ZXJuYWxMaW5rczphLm5vb3AsZGVzdHJveTpmdW5jdGlvbigpe00oKX19KSxkKGMpfXJldHVybiBiPWEuZXh0ZW5kKHt9LGEuZm4ualNjcm9sbFBhbmUuZGVmYXVsdHMsYiksYS5lYWNoKFtcImFycm93QnV0dG9uU3BlZWRcIixcInRyYWNrQ2xpY2tTcGVlZFwiLFwia2V5Ym9hcmRTcGVlZFwiXSxmdW5jdGlvbigpe2JbdGhpc109Ylt0aGlzXXx8Yi5zcGVlZH0pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJqc3BcIik7ZT9lLnJlaW5pdGlhbGlzZShiKTooYShcInNjcmlwdFwiLGQpLmZpbHRlcignW3R5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIl0sOm5vdChbdHlwZV0pJykucmVtb3ZlKCksZT1uZXcgYyhkLGIpLGQuZGF0YShcImpzcFwiLGUpKX0pfSxhLmZuLmpTY3JvbGxQYW5lLmRlZmF1bHRzPXtzaG93QXJyb3dzOiExLG1haW50YWluUG9zaXRpb246ITAsc3RpY2tUb0JvdHRvbTohMSxzdGlja1RvUmlnaHQ6ITEsY2xpY2tPblRyYWNrOiEwLGF1dG9SZWluaXRpYWxpc2U6ITEsYXV0b1JlaW5pdGlhbGlzZURlbGF5OjUwMCx2ZXJ0aWNhbERyYWdNaW5IZWlnaHQ6MCx2ZXJ0aWNhbERyYWdNYXhIZWlnaHQ6OTk5OTksaG9yaXpvbnRhbERyYWdNaW5XaWR0aDowLGhvcml6b250YWxEcmFnTWF4V2lkdGg6OTk5OTksY29udGVudFdpZHRoOnZvaWQgMCxhbmltYXRlU2Nyb2xsOiExLGFuaW1hdGVEdXJhdGlvbjozMDAsYW5pbWF0ZUVhc2U6XCJsaW5lYXJcIixoaWphY2tJbnRlcm5hbExpbmtzOiExLHZlcnRpY2FsR3V0dGVyOjQsaG9yaXpvbnRhbEd1dHRlcjo0LG1vdXNlV2hlZWxTcGVlZDozLGFycm93QnV0dG9uU3BlZWQ6MCxhcnJvd1JlcGVhdEZyZXE6NTAsYXJyb3dTY3JvbGxPbkhvdmVyOiExLHRyYWNrQ2xpY2tTcGVlZDowLHRyYWNrQ2xpY2tSZXBlYXRGcmVxOjcwLHZlcnRpY2FsQXJyb3dQb3NpdGlvbnM6XCJzcGxpdFwiLGhvcml6b250YWxBcnJvd1Bvc2l0aW9uczpcInNwbGl0XCIsZW5hYmxlS2V5Ym9hcmROYXZpZ2F0aW9uOiEwLGhpZGVGb2N1czohMSxrZXlib2FyZFNwZWVkOjAsaW5pdGlhbERlbGF5OjMwMCxzcGVlZDozMCxzY3JvbGxQYWdlUGVyY2VudDouOH19KTsiLCIvKiFcclxuICogXHJcbiAqICAgICAgICAgICAgIFNpbXBsZUJhci5qcyAtIHYyLjQuM1xyXG4gKiAgICAgICAgICAgICBTY3JvbGxiYXJzLCBzaW1wbGVyLlxyXG4gKiAgICAgICAgICAgICBodHRwczovL2dyc210by5naXRodWIuaW8vc2ltcGxlYmFyL1xyXG4gKiAgICAgICAgICAgICBcclxuICogICAgICAgICAgICAgTWFkZSBieSBBZHJpZW4gR3JzbXRvIGZyb20gYSBmb3JrIGJ5IEpvbmF0aGFuIE5pY29sXHJcbiAqICAgICAgICAgICAgIFVuZGVyIE1JVCBMaWNlbnNlXHJcbiAqICAgICAgICAgXHJcbiAqL1xyXG4hZnVuY3Rpb24odCxuKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1uKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxuKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlNpbXBsZUJhcj1uKCk6dC5TaW1wbGVCYXI9bigpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4ocil7aWYoZVtyXSlyZXR1cm4gZVtyXS5leHBvcnRzO3ZhciBpPWVbcl09e2V4cG9ydHM6e30saWQ6cixsb2FkZWQ6ITF9O3JldHVybiB0W3JdLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLG4pLGkubG9hZGVkPSEwLGkuZXhwb3J0c312YXIgZT17fTtyZXR1cm4gbi5tPXQsbi5jPWUsbi5wPVwiXCIsbigwKX0oW2Z1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBpKHQsbil7aWYoISh0IGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkobixcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxuKXtmb3IodmFyIGU9MDtlPG4ubGVuZ3RoO2UrKyl7dmFyIHI9bltlXTtyLmVudW1lcmFibGU9ci5lbnVtZXJhYmxlfHwhMSxyLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiByJiYoci53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsci5rZXkscil9fXJldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIGUmJnQobi5wcm90b3R5cGUsZSksciYmdChuLHIpLG59fSgpLGM9ZSgxOTQpLHM9cihjKSx1PWUoMTkxKSxhPXIodSksZj1lKDE5MyksbD1yKGYpO2UoMTY5KSxlKDE3NCksZSgxNzcpLGUoMTc4KSxlKDE3MiksZSgxNzUpLGUoMTczKSxlKDE3NiksZSgxNzApLGUoMTcxKSxlKDExMyksZSgxNjApLGUoMTc5KSxlKDE4MCksZSgxNDIpLGUoMTQzKSxlKDE0NCksZSgxNDUpLGUoMTQ4KSxlKDE0NiksZSgxNDcpLGUoMTQ5KSxlKDE1MCksZSgxNTEpLGUoMTUyKSxlKDE1NCksZSgxNTMpLGUoMTQxKSxlKDE2OCksZSgxMzgpLGUoMTM5KSxlKDE0MCksZSgxMTIpLGUoMTY1KSxlKDE2MyksZSgxNjEpLGUoMTY2KSxlKDE2NyksZSgxNjIpLGUoMTY0KSxlKDE1NSksZSgxNTYpLGUoMTU3KSxlKDE1OSksZSgxNTgpLGUoMTEwKSxlKDExMSksZSgxMDYpLGUoMTA5KSxlKDEwOCksZSgxMDcpLGUoNjYpLGUoMTMyKSxlKDEzMyksZSgxMzUpLGUoMTM0KSxlKDEzMSksZSgxMzcpLGUoMTM2KSxlKDExNCksZSgxMTUpLGUoMTE2KSxlKDExNyksZSgxMTgpLGUoMTE5KSxlKDEyMCksZSgxMjEpLGUoMTIyKSxlKDEyMyksZSgxMjUpLGUoMTI0KSxlKDEyNiksZSgxMjcpLGUoMTI4KSxlKDEyOSksZSgxMzApLGUoMTgxKSxlKDE4NCksZSgxODIpLGUoMTgzKSxlKDE4NiksZSgxODUpLGUoMTg5KSxlKDE4OCksZSgxODcpLGUoMTkyKSxlKDE5MCk7dmFyIGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KG4sZSl7aSh0aGlzLHQpLHRoaXMuZWw9bix0aGlzLmZsYXNoVGltZW91dCx0aGlzLmNvbnRlbnRFbCx0aGlzLnNjcm9sbENvbnRlbnRFbCx0aGlzLmRyYWdPZmZzZXQ9e3g6MCx5OjB9LHRoaXMuaXNWaXNpYmxlPXt4OiEwLHk6ITB9LHRoaXMuc2Nyb2xsT2Zmc2V0QXR0cj17eDpcInNjcm9sbExlZnRcIix5Olwic2Nyb2xsVG9wXCJ9LHRoaXMuc2l6ZUF0dHI9e3g6XCJvZmZzZXRXaWR0aFwiLHk6XCJvZmZzZXRIZWlnaHRcIn0sdGhpcy5zY3JvbGxTaXplQXR0cj17eDpcInNjcm9sbFdpZHRoXCIseTpcInNjcm9sbEhlaWdodFwifSx0aGlzLm9mZnNldEF0dHI9e3g6XCJsZWZ0XCIseTpcInRvcFwifSx0aGlzLmdsb2JhbE9ic2VydmVyLHRoaXMubXV0YXRpb25PYnNlcnZlcix0aGlzLnJlc2l6ZU9ic2VydmVyLHRoaXMuY3VycmVudEF4aXMsdGhpcy5vcHRpb25zPU9iamVjdC5hc3NpZ24oe30sdC5kZWZhdWx0T3B0aW9ucyxlKSx0aGlzLmNsYXNzTmFtZXM9dGhpcy5vcHRpb25zLmNsYXNzTmFtZXMsdGhpcy5zY3JvbGxiYXJXaWR0aD0oMCxzLmRlZmF1bHQpKCksdGhpcy5vZmZzZXRTaXplPTIwLHRoaXMuZmxhc2hTY3JvbGxiYXI9dGhpcy5mbGFzaFNjcm9sbGJhci5iaW5kKHRoaXMpLHRoaXMub25EcmFnWT10aGlzLm9uRHJhZ1kuYmluZCh0aGlzKSx0aGlzLm9uRHJhZ1g9dGhpcy5vbkRyYWdYLmJpbmQodGhpcyksdGhpcy5vblNjcm9sbFk9dGhpcy5vblNjcm9sbFkuYmluZCh0aGlzKSx0aGlzLm9uU2Nyb2xsWD10aGlzLm9uU2Nyb2xsWC5iaW5kKHRoaXMpLHRoaXMuZHJhZz10aGlzLmRyYWcuYmluZCh0aGlzKSx0aGlzLm9uRW5kRHJhZz10aGlzLm9uRW5kRHJhZy5iaW5kKHRoaXMpLHRoaXMub25Nb3VzZUVudGVyPXRoaXMub25Nb3VzZUVudGVyLmJpbmQodGhpcyksdGhpcy5yZWNhbGN1bGF0ZT0oMCxhLmRlZmF1bHQpKHRoaXMucmVjYWxjdWxhdGUsMTAwLHtsZWFkaW5nOiEwLHRyYWlsaW5nOiExfSksdGhpcy5pbml0KCl9cmV0dXJuIG8odCxbe2tleTpcImluaXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZWwuU2ltcGxlQmFyPXRoaXMsdGhpcy5pbml0RE9NKCksdGhpcy5zY3JvbGxiYXJYPXRoaXMudHJhY2tYLnF1ZXJ5U2VsZWN0b3IoXCIuXCIrdGhpcy5jbGFzc05hbWVzLnNjcm9sbGJhciksdGhpcy5zY3JvbGxiYXJZPXRoaXMudHJhY2tZLnF1ZXJ5U2VsZWN0b3IoXCIuXCIrdGhpcy5jbGFzc05hbWVzLnNjcm9sbGJhciksdGhpcy5zY3JvbGxDb250ZW50RWwuc3R5bGUucGFkZGluZ1JpZ2h0PSh0aGlzLnNjcm9sbGJhcldpZHRofHx0aGlzLm9mZnNldFNpemUpK1wicHhcIix0aGlzLnNjcm9sbENvbnRlbnRFbC5zdHlsZS5tYXJnaW5Cb3R0b209XCItXCIrKDIqdGhpcy5zY3JvbGxiYXJXaWR0aHx8dGhpcy5vZmZzZXRTaXplKStcInB4XCIsdGhpcy5jb250ZW50RWwuc3R5bGUucGFkZGluZ0JvdHRvbT0odGhpcy5zY3JvbGxiYXJXaWR0aHx8dGhpcy5vZmZzZXRTaXplKStcInB4XCIsMCE9PXRoaXMuc2Nyb2xsYmFyV2lkdGgmJih0aGlzLmNvbnRlbnRFbC5zdHlsZS5tYXJnaW5SaWdodD1cIi1cIit0aGlzLnNjcm9sbGJhcldpZHRoK1wicHhcIiksdGhpcy5yZWNhbGN1bGF0ZSgpLHRoaXMuaW5pdExpc3RlbmVycygpfX0se2tleTpcImluaXRET01cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYoQXJyYXkuZnJvbSh0aGlzLmVsLmNoaWxkcmVuKS5maW5kKGZ1bmN0aW9uKG4pe3JldHVybiBuLmNsYXNzTGlzdC5jb250YWlucyh0LmNsYXNzTmFtZXMuc2Nyb2xsQ29udGVudCl9KSl0aGlzLnRyYWNrWD10aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuXCIrdGhpcy5jbGFzc05hbWVzLnRyYWNrK1wiLmhvcml6b250YWxcIiksdGhpcy50cmFja1k9dGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLlwiK3RoaXMuY2xhc3NOYW1lcy50cmFjaytcIi52ZXJ0aWNhbFwiKSx0aGlzLnNjcm9sbENvbnRlbnRFbD10aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuXCIrdGhpcy5jbGFzc05hbWVzLnNjcm9sbENvbnRlbnQpLHRoaXMuY29udGVudEVsPXRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5cIit0aGlzLmNsYXNzTmFtZXMuY29udGVudCk7ZWxzZXtmb3IodGhpcy5zY3JvbGxDb250ZW50RWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLmNvbnRlbnRFbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuc2Nyb2xsQ29udGVudEVsLmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc05hbWVzLnNjcm9sbENvbnRlbnQpLHRoaXMuY29udGVudEVsLmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc05hbWVzLmNvbnRlbnQpO3RoaXMuZWwuZmlyc3RDaGlsZDspdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5lbC5maXJzdENoaWxkKTt0aGlzLnNjcm9sbENvbnRlbnRFbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbCksdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLnNjcm9sbENvbnRlbnRFbCl9aWYoIXRoaXMudHJhY2tYfHwhdGhpcy50cmFja1kpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NMaXN0LmFkZCh0aGlzLmNsYXNzTmFtZXMudHJhY2spLGUuY2xhc3NMaXN0LmFkZCh0aGlzLmNsYXNzTmFtZXMuc2Nyb2xsYmFyKSxuLmFwcGVuZENoaWxkKGUpLHRoaXMudHJhY2tYPW4uY2xvbmVOb2RlKCEwKSx0aGlzLnRyYWNrWC5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbFwiKSx0aGlzLnRyYWNrWT1uLmNsb25lTm9kZSghMCksdGhpcy50cmFja1kuY2xhc3NMaXN0LmFkZChcInZlcnRpY2FsXCIpLHRoaXMuZWwuaW5zZXJ0QmVmb3JlKHRoaXMudHJhY2tYLHRoaXMuZWwuZmlyc3RDaGlsZCksdGhpcy5lbC5pbnNlcnRCZWZvcmUodGhpcy50cmFja1ksdGhpcy5lbC5maXJzdENoaWxkKX10aGlzLmVsLnNldEF0dHJpYnV0ZShcImRhdGEtc2ltcGxlYmFyXCIsXCJpbml0XCIpfX0se2tleTpcImluaXRMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5vcHRpb25zLmF1dG9IaWRlJiZ0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdGhpcy5vbk1vdXNlRW50ZXIpLHRoaXMuc2Nyb2xsYmFyWS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbkRyYWdZKSx0aGlzLnNjcm9sbGJhclguYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25EcmFnWCksdGhpcy5zY3JvbGxDb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMub25TY3JvbGxZKSx0aGlzLmNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbFgpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyJiYodGhpcy5tdXRhdGlvbk9ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG4pe24uZm9yRWFjaChmdW5jdGlvbihuKXsodC5pc0NoaWxkTm9kZShuLnRhcmdldCl8fG4uYWRkZWROb2Rlcy5sZW5ndGgpJiZ0LnJlY2FsY3VsYXRlKCl9KX0pLHRoaXMubXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKHRoaXMuZWwse2F0dHJpYnV0ZXM6ITAsY2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsc3VidHJlZTohMH0pKSx0aGlzLnJlc2l6ZU9ic2VydmVyPW5ldyBsLmRlZmF1bHQodGhpcy5yZWNhbGN1bGF0ZS5iaW5kKHRoaXMpKSx0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5lbCl9fSx7a2V5OlwicmVtb3ZlTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuYXV0b0hpZGUmJnRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIix0aGlzLm9uTW91c2VFbnRlciksdGhpcy5zY3JvbGxiYXJYLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uRHJhZ1gpLHRoaXMuc2Nyb2xsYmFyWS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbkRyYWdZKSx0aGlzLnNjcm9sbENvbnRlbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbFkpLHRoaXMuY29udGVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLm9uU2Nyb2xsWCksdGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKSx0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKX19LHtrZXk6XCJvbkRyYWdYXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5vbkRyYWcodCxcInhcIil9fSx7a2V5Olwib25EcmFnWVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMub25EcmFnKHQsXCJ5XCIpfX0se2tleTpcIm9uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcInlcIjt0LnByZXZlbnREZWZhdWx0KCk7dmFyIGU9XCJ5XCI9PT1uP3RoaXMuc2Nyb2xsYmFyWTp0aGlzLnNjcm9sbGJhclgscj1cInlcIj09PW4/dC5wYWdlWTp0LnBhZ2VYO3RoaXMuZHJhZ09mZnNldFtuXT1yLWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5vZmZzZXRBdHRyW25dXSx0aGlzLmN1cnJlbnRBeGlzPW4sZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMuZHJhZyksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm9uRW5kRHJhZyl9fSx7a2V5OlwiZHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPXZvaWQgMCxlPXZvaWQgMCxyPXZvaWQgMDt0LnByZXZlbnREZWZhdWx0KCksXCJ5XCI9PT10aGlzLmN1cnJlbnRBeGlzPyhuPXQucGFnZVksZT10aGlzLnRyYWNrWSxyPXRoaXMuc2Nyb2xsQ29udGVudEVsKToobj10LnBhZ2VYLGU9dGhpcy50cmFja1gscj10aGlzLmNvbnRlbnRFbCk7dmFyIGk9bi1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMub2Zmc2V0QXR0clt0aGlzLmN1cnJlbnRBeGlzXV0tdGhpcy5kcmFnT2Zmc2V0W3RoaXMuY3VycmVudEF4aXNdLG89aS9lW3RoaXMuc2l6ZUF0dHJbdGhpcy5jdXJyZW50QXhpc11dLGM9byp0aGlzLmNvbnRlbnRFbFt0aGlzLnNjcm9sbFNpemVBdHRyW3RoaXMuY3VycmVudEF4aXNdXTtyW3RoaXMuc2Nyb2xsT2Zmc2V0QXR0clt0aGlzLmN1cnJlbnRBeGlzXV09Y319LHtrZXk6XCJvbkVuZERyYWdcIix2YWx1ZTpmdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLmRyYWcpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbkVuZERyYWcpfX0se2tleTpcInJlc2l6ZVNjcm9sbGJhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlwieVwiLG49dm9pZCAwLGU9dm9pZCAwLHI9dm9pZCAwLGk9dm9pZCAwLG89dm9pZCAwO1wieFwiPT09dD8obj10aGlzLnRyYWNrWCxlPXRoaXMuc2Nyb2xsYmFyWCxyPXRoaXMuY29udGVudEVsW3RoaXMuc2Nyb2xsT2Zmc2V0QXR0clt0XV0saT10aGlzLmNvbnRlbnRTaXplWCxvPXRoaXMuc2Nyb2xsYmFyWFNpemUpOihuPXRoaXMudHJhY2tZLGU9dGhpcy5zY3JvbGxiYXJZLHI9dGhpcy5zY3JvbGxDb250ZW50RWxbdGhpcy5zY3JvbGxPZmZzZXRBdHRyW3RdXSxpPXRoaXMuY29udGVudFNpemVZLG89dGhpcy5zY3JvbGxiYXJZU2l6ZSk7dmFyIGM9by9pLHM9ci8oaS1vKSx1PU1hdGgubWF4KH5+KGMqKG8tMikpLTIsdGhpcy5vcHRpb25zLnNjcm9sbGJhck1pblNpemUpLGE9fn4oKG8tNC11KSpzKzIpO3RoaXMuaXNWaXNpYmxlW3RdPW88aSx0aGlzLmlzVmlzaWJsZVt0XT8obi5zdHlsZS52aXNpYmlsaXR5PVwidmlzaWJsZVwiLFwieFwiPT09dD8oZS5zdHlsZS5sZWZ0PWErXCJweFwiLGUuc3R5bGUud2lkdGg9dStcInB4XCIpOihlLnN0eWxlLnRvcD1hK1wicHhcIixlLnN0eWxlLmhlaWdodD11K1wicHhcIikpOm4uc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwifX0se2tleTpcIm9uU2Nyb2xsWFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5mbGFzaFNjcm9sbGJhcihcInhcIil9fSx7a2V5Olwib25TY3JvbGxZXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZsYXNoU2Nyb2xsYmFyKFwieVwiKX19LHtrZXk6XCJvbk1vdXNlRW50ZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZmxhc2hTY3JvbGxiYXIoXCJ4XCIpLHRoaXMuZmxhc2hTY3JvbGxiYXIoXCJ5XCIpfX0se2tleTpcImZsYXNoU2Nyb2xsYmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06XCJ5XCI7dGhpcy5yZXNpemVTY3JvbGxiYXIodCksdGhpcy5zaG93U2Nyb2xsYmFyKHQpfX0se2tleTpcInNob3dTY3JvbGxiYXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcInlcIjt0aGlzLmlzVmlzaWJsZVt0XSYmKFwieFwiPT09dD90aGlzLnNjcm9sbGJhclguY2xhc3NMaXN0LmFkZChcInZpc2libGVcIik6dGhpcy5zY3JvbGxiYXJZLmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpLHRoaXMub3B0aW9ucy5hdXRvSGlkZSYmKFwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLmZsYXNoVGltZW91dCYmd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmZsYXNoVGltZW91dCksdGhpcy5mbGFzaFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQodGhpcy5oaWRlU2Nyb2xsYmFyLmJpbmQodGhpcyksMWUzKSkpfX0se2tleTpcImhpZGVTY3JvbGxiYXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsYmFyWC5jbGFzc0xpc3QucmVtb3ZlKFwidmlzaWJsZVwiKSx0aGlzLnNjcm9sbGJhclkuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIiksXCJudW1iZXJcIj09dHlwZW9mIHRoaXMuZmxhc2hUaW1lb3V0JiZ3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZmxhc2hUaW1lb3V0KX19LHtrZXk6XCJyZWNhbGN1bGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jb250ZW50U2l6ZVg9dGhpcy5jb250ZW50RWxbdGhpcy5zY3JvbGxTaXplQXR0ci54XSx0aGlzLmNvbnRlbnRTaXplWT10aGlzLmNvbnRlbnRFbFt0aGlzLnNjcm9sbFNpemVBdHRyLnldLSh0aGlzLnNjcm9sbGJhcldpZHRofHx0aGlzLm9mZnNldFNpemUpLHRoaXMuc2Nyb2xsYmFyWFNpemU9dGhpcy50cmFja1hbdGhpcy5zaXplQXR0ci54XSx0aGlzLnNjcm9sbGJhcllTaXplPXRoaXMudHJhY2tZW3RoaXMuc2l6ZUF0dHIueV0sdGhpcy5yZXNpemVTY3JvbGxiYXIoXCJ4XCIpLHRoaXMucmVzaXplU2Nyb2xsYmFyKFwieVwiKSx0aGlzLm9wdGlvbnMuYXV0b0hpZGV8fCh0aGlzLnNob3dTY3JvbGxiYXIoXCJ4XCIpLHRoaXMuc2hvd1Njcm9sbGJhcihcInlcIikpfX0se2tleTpcImdldFNjcm9sbEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbENvbnRlbnRFbH19LHtrZXk6XCJnZXRDb250ZW50RWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudEVsfX0se2tleTpcInVuTW91bnRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzKCksdGhpcy5lbC5TaW1wbGVCYXI9bnVsbH19LHtrZXk6XCJpc0NoaWxkTm9kZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dCYmKHQ9PT10aGlzLmVsfHx0aGlzLmlzQ2hpbGROb2RlKHQucGFyZW50Tm9kZSkpfX1dLFt7a2V5OlwiaW5pdEh0bWxBcGlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaW5pdERPTUxvYWRlZEVsZW1lbnRzPXRoaXMuaW5pdERPTUxvYWRlZEVsZW1lbnRzLmJpbmQodGhpcyksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJih0aGlzLmdsb2JhbE9ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG4pe24uZm9yRWFjaChmdW5jdGlvbihuKXtBcnJheS5mcm9tKG4uYWRkZWROb2RlcykuZm9yRWFjaChmdW5jdGlvbihuKXsxPT09bi5ub2RlVHlwZSYmKG4uaGFzQXR0cmlidXRlKFwiZGF0YS1zaW1wbGViYXJcIik/IW4uU2ltcGxlQmFyJiZuZXcgdChuLHQuZ2V0RWxPcHRpb25zKG4pKTpBcnJheS5mcm9tKG4ucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXNpbXBsZWJhcl1cIikpLmZvckVhY2goZnVuY3Rpb24obil7IW4uU2ltcGxlQmFyJiZuZXcgdChuLHQuZ2V0RWxPcHRpb25zKG4pKX0pKX0pLEFycmF5LmZyb20obi5yZW1vdmVkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24odCl7MT09PXQubm9kZVR5cGUmJih0Lmhhc0F0dHJpYnV0ZShcImRhdGEtc2ltcGxlYmFyXCIpP3QuU2ltcGxlQmFyJiZ0LlNpbXBsZUJhci51bk1vdW50KCk6QXJyYXkuZnJvbSh0LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1zaW1wbGViYXJdXCIpKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuU2ltcGxlQmFyJiZ0LlNpbXBsZUJhci51bk1vdW50KCl9KSl9KX0pfSksdGhpcy5nbG9iYWxPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pKSxcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxcImxvYWRpbmdcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGUmJiFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGw/d2luZG93LnNldFRpbWVvdXQodGhpcy5pbml0RE9NTG9hZGVkRWxlbWVudHMuYmluZCh0aGlzKSk6KGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdGhpcy5pbml0RE9NTG9hZGVkRWxlbWVudHMpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMuaW5pdERPTUxvYWRlZEVsZW1lbnRzKSl9fSx7a2V5OlwiZ2V0RWxPcHRpb25zXCIsdmFsdWU6ZnVuY3Rpb24obil7dmFyIGU9T2JqZWN0LmtleXModC5odG1sQXR0cmlidXRlcykucmVkdWNlKGZ1bmN0aW9uKGUscil7dmFyIGk9dC5odG1sQXR0cmlidXRlc1tyXTtyZXR1cm4gbi5oYXNBdHRyaWJ1dGUoaSkmJihlW3JdPUpTT04ucGFyc2Uobi5nZXRBdHRyaWJ1dGUoaSl8fCEwKSksZX0se30pO3JldHVybiBlfX0se2tleTpcInJlbW92ZU9ic2VydmVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdsb2JhbE9ic2VydmVyLmRpc2Nvbm5lY3QoKX19LHtrZXk6XCJpbml0RE9NTG9hZGVkRWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdGhpcy5pbml0RE9NTG9hZGVkRWxlbWVudHMpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLHRoaXMuaW5pdERPTUxvYWRlZEVsZW1lbnRzKSxBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1zaW1wbGViYXJdXCIpKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uU2ltcGxlQmFyfHxuZXcgdChuLHQuZ2V0RWxPcHRpb25zKG4pKX0pfX0se2tleTpcImRlZmF1bHRPcHRpb25zXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2F1dG9IaWRlOiEwLGNsYXNzTmFtZXM6e2NvbnRlbnQ6XCJzaW1wbGViYXItY29udGVudFwiLHNjcm9sbENvbnRlbnQ6XCJzaW1wbGViYXItc2Nyb2xsLWNvbnRlbnRcIixzY3JvbGxiYXI6XCJzaW1wbGViYXItc2Nyb2xsYmFyXCIsdHJhY2s6XCJzaW1wbGViYXItdHJhY2tcIn0sc2Nyb2xsYmFyTWluU2l6ZToyNX19fSx7a2V5OlwiaHRtbEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57YXV0b0hpZGU6XCJkYXRhLXNpbXBsZWJhci1hdXRvaGlkZVwiLHNjcm9sbGJhck1pblNpemU6XCJkYXRhLXNpbXBsZWJhci1zY3JvbGxiYXItbWluLXNpemVcIn19fV0pLHR9KCk7bi5kZWZhdWx0PWgsaC5pbml0SHRtbEFwaSgpLHQuZXhwb3J0cz1uLmRlZmF1bHR9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDMpLGk9ZSgzNCksbz1lKDExKSxjPWUoMTYpLHM9ZSgxMiksdT1cInByb3RvdHlwZVwiLGE9ZnVuY3Rpb24odCxuLGUpe3ZhciBmLGwsaCx2LHA9dCZhLkYsZD10JmEuRyx5PXQmYS5TLGc9dCZhLlAsbT10JmEuQixiPWQ/cjp5P3Jbbl18fChyW25dPXt9KToocltuXXx8e30pW3VdLF89ZD9pOmlbbl18fChpW25dPXt9KSx3PV9bdV18fChfW3VdPXt9KTtkJiYoZT1uKTtmb3IoZiBpbiBlKWw9IXAmJmImJnZvaWQgMCE9PWJbZl0saD0obD9iOmUpW2ZdLHY9bSYmbD9zKGgscik6ZyYmXCJmdW5jdGlvblwiPT10eXBlb2YgaD9zKEZ1bmN0aW9uLmNhbGwsaCk6aCxiJiZjKGIsZixoLHQmYS5VKSxfW2ZdIT1oJiZvKF8sZix2KSxnJiZ3W2ZdIT1oJiYod1tmXT1oKX07ci5jb3JlPWksYS5GPTEsYS5HPTIsYS5TPTQsYS5QPTgsYS5CPTE2LGEuVz0zMixhLlU9NjQsYS5SPTEyOCx0LmV4cG9ydHM9YX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKCFyKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhbiBvYmplY3QhXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxuKXt2YXIgZT10LmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XCJudW1iZXJcIj09dHlwZW9mIF9fZyYmKF9fZz1lKX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQ/bnVsbCE9PXQ6XCJmdW5jdGlvblwiPT10eXBlb2YgdH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDYwKShcIndrc1wiKSxpPWUoMjIpLG89ZSgzKS5TeW1ib2wsYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBvLHM9dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByW3RdfHwoclt0XT1jJiZvW3RdfHwoYz9vOmkpKFwiU3ltYm9sLlwiK3QpKX07cy5zdG9yZT1yfSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuISF0KCl9Y2F0Y2godCl7cmV0dXJuITB9fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMiksaT1lKDcxKSxvPWUoNDApLGM9T2JqZWN0LmRlZmluZVByb3BlcnR5O24uZj1lKDkpP09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbih0LG4sZSl7aWYocih0KSxuPW8obiwhMCkscihlKSxpKXRyeXtyZXR1cm4gYyh0LG4sZSl9Y2F0Y2godCl7fWlmKFwiZ2V0XCJpbiBlfHxcInNldFwiaW4gZSl0aHJvdyBUeXBlRXJyb3IoXCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCFcIik7cmV0dXJuXCJ2YWx1ZVwiaW4gZSYmKHRbbl09ZS52YWx1ZSksdH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIwKSxpPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdD4wP2kocih0KSw5MDA3MTk5MjU0NzQwOTkxKTowfX0sZnVuY3Rpb24odCxuLGUpe3QuZXhwb3J0cz0hZSg2KShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sZnVuY3Rpb24odCxuKXt2YXIgZT17fS5oYXNPd25Qcm9wZXJ0eTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbil9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg3KSxpPWUoMTkpO3QuZXhwb3J0cz1lKDkpP2Z1bmN0aW9uKHQsbixlKXtyZXR1cm4gci5mKHQsbixpKDEsZSkpfTpmdW5jdGlvbih0LG4sZSl7cmV0dXJuIHRbbl09ZSx0fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTcpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7aWYocih0KSx2b2lkIDA9PT1uKXJldHVybiB0O3N3aXRjaChlKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0LmNhbGwobixlKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiB0LmNhbGwobixlLHIpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKGUscixpKXtyZXR1cm4gdC5jYWxsKG4sZSxyLGkpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShuLGFyZ3VtZW50cyl9fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNTQpLGk9ZSgxOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByKGkodCkpfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO2lmKGUoOSkpe3ZhciByPWUoMjcpLGk9ZSgzKSxvPWUoNiksYz1lKDEpLHM9ZSg2NCksdT1lKDg4KSxhPWUoMTIpLGY9ZSgyNCksbD1lKDE5KSxoPWUoMTEpLHY9ZSgyOSkscD1lKDIwKSxkPWUoOCkseT1lKDg3KSxnPWUoMzEpLG09ZSg0MCksYj1lKDEwKSxfPWUoNDkpLHc9ZSg0KSxTPWUoMjEpLHg9ZSg1NSksRT1lKDM2KSxPPWUoMzgpLE09ZSgzNykuZixBPWUoNjUpLEw9ZSgyMiksaj1lKDUpLGs9ZSgzMyksVD1lKDQ4KSxQPWUoNjEpLEY9ZSg2NiksTj1lKDI2KSxDPWUoNDQpLFI9ZSg0NiksRD1lKDQ3KSxJPWUoNjcpLFc9ZSg3KSx6PWUoMTUpLEI9Vy5mLFk9ei5mLFg9aS5SYW5nZUVycm9yLEc9aS5UeXBlRXJyb3IsVj1pLlVpbnQ4QXJyYXksVT1cIkFycmF5QnVmZmVyXCIscT1cIlNoYXJlZFwiK1UsSD1cIkJZVEVTX1BFUl9FTEVNRU5UXCIsSz1cInByb3RvdHlwZVwiLEo9QXJyYXlbS10sJD11LkFycmF5QnVmZmVyLFE9dS5EYXRhVmlldyxaPWsoMCksdHQ9aygyKSxudD1rKDMpLGV0PWsoNCkscnQ9ayg1KSxpdD1rKDYpLG90PVQoITApLGN0PVQoITEpLHN0PUYudmFsdWVzLHV0PUYua2V5cyxhdD1GLmVudHJpZXMsZnQ9Si5sYXN0SW5kZXhPZixsdD1KLnJlZHVjZSxodD1KLnJlZHVjZVJpZ2h0LHZ0PUouam9pbixwdD1KLnNvcnQsZHQ9Si5zbGljZSx5dD1KLnRvU3RyaW5nLGd0PUoudG9Mb2NhbGVTdHJpbmcsbXQ9aihcIml0ZXJhdG9yXCIpLGJ0PWooXCJ0b1N0cmluZ1RhZ1wiKSxfdD1MKFwidHlwZWRfY29uc3RydWN0b3JcIiksd3Q9TChcImRlZl9jb25zdHJ1Y3RvclwiKSxTdD1zLkNPTlNUUix4dD1zLlRZUEVELEV0PXMuVklFVyxPdD1cIldyb25nIGxlbmd0aCFcIixNdD1rKDEsZnVuY3Rpb24odCxuKXtyZXR1cm4gVHQoUCh0LHRbd3RdKSxuKX0pLEF0PW8oZnVuY3Rpb24oKXtyZXR1cm4gMT09PW5ldyBWKG5ldyBVaW50MTZBcnJheShbMV0pLmJ1ZmZlcilbMF19KSxMdD0hIVYmJiEhVltLXS5zZXQmJm8oZnVuY3Rpb24oKXtuZXcgVigxKS5zZXQoe30pfSksanQ9ZnVuY3Rpb24odCxuKXt2YXIgZT1wKHQpO2lmKGU8MHx8ZSVuKXRocm93IFgoXCJXcm9uZyBvZmZzZXQhXCIpO3JldHVybiBlfSxrdD1mdW5jdGlvbih0KXtpZih3KHQpJiZ4dCBpbiB0KXJldHVybiB0O3Rocm93IEcodCtcIiBpcyBub3QgYSB0eXBlZCBhcnJheSFcIil9LFR0PWZ1bmN0aW9uKHQsbil7aWYoISh3KHQpJiZfdCBpbiB0KSl0aHJvdyBHKFwiSXQgaXMgbm90IGEgdHlwZWQgYXJyYXkgY29uc3RydWN0b3IhXCIpO3JldHVybiBuZXcgdChuKX0sUHQ9ZnVuY3Rpb24odCxuKXtyZXR1cm4gRnQoUCh0LHRbd3RdKSxuKX0sRnQ9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9MCxyPW4ubGVuZ3RoLGk9VHQodCxyKTtyPmU7KWlbZV09bltlKytdO3JldHVybiBpfSxOdD1mdW5jdGlvbih0LG4sZSl7Qih0LG4se2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kW2VdfX0pfSxDdD1mdW5jdGlvbih0KXt2YXIgbixlLHIsaSxvLGMscz1TKHQpLHU9YXJndW1lbnRzLmxlbmd0aCxmPXU+MT9hcmd1bWVudHNbMV06dm9pZCAwLGw9dm9pZCAwIT09ZixoPUEocyk7aWYodm9pZCAwIT1oJiYheChoKSl7Zm9yKGM9aC5jYWxsKHMpLHI9W10sbj0wOyEobz1jLm5leHQoKSkuZG9uZTtuKyspci5wdXNoKG8udmFsdWUpO3M9cn1mb3IobCYmdT4yJiYoZj1hKGYsYXJndW1lbnRzWzJdLDIpKSxuPTAsZT1kKHMubGVuZ3RoKSxpPVR0KHRoaXMsZSk7ZT5uO24rKylpW25dPWw/ZihzW25dLG4pOnNbbl07cmV0dXJuIGl9LFJ0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsbj1hcmd1bWVudHMubGVuZ3RoLGU9VHQodGhpcyxuKTtuPnQ7KWVbdF09YXJndW1lbnRzW3QrK107cmV0dXJuIGV9LER0PSEhViYmbyhmdW5jdGlvbigpe2d0LmNhbGwobmV3IFYoMSkpfSksSXQ9ZnVuY3Rpb24oKXtyZXR1cm4gZ3QuYXBwbHkoRHQ/ZHQuY2FsbChrdCh0aGlzKSk6a3QodGhpcyksYXJndW1lbnRzKX0sV3Q9e2NvcHlXaXRoaW46ZnVuY3Rpb24odCxuKXtyZXR1cm4gSS5jYWxsKGt0KHRoaXMpLHQsbixhcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCl9LGV2ZXJ5OmZ1bmN0aW9uKHQpe3JldHVybiBldChrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmlsbDpmdW5jdGlvbih0KXtyZXR1cm4gRC5hcHBseShrdCh0aGlzKSxhcmd1bWVudHMpfSxmaWx0ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIFB0KHRoaXMsdHQoa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCkpfSxmaW5kOmZ1bmN0aW9uKHQpe3JldHVybiBydChrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZmluZEluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiBpdChrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sZm9yRWFjaDpmdW5jdGlvbih0KXtaKGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxpbmRleE9mOmZ1bmN0aW9uKHQpe3JldHVybiBjdChrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0saW5jbHVkZXM6ZnVuY3Rpb24odCl7cmV0dXJuIG90KGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxqb2luOmZ1bmN0aW9uKHQpe3JldHVybiB2dC5hcHBseShrdCh0aGlzKSxhcmd1bWVudHMpfSxsYXN0SW5kZXhPZjpmdW5jdGlvbih0KXtyZXR1cm4gZnQuYXBwbHkoa3QodGhpcyksYXJndW1lbnRzKX0sbWFwOmZ1bmN0aW9uKHQpe3JldHVybiBNdChrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0scmVkdWNlOmZ1bmN0aW9uKHQpe3JldHVybiBsdC5hcHBseShrdCh0aGlzKSxhcmd1bWVudHMpfSxyZWR1Y2VSaWdodDpmdW5jdGlvbih0KXtyZXR1cm4gaHQuYXBwbHkoa3QodGhpcyksYXJndW1lbnRzKX0scmV2ZXJzZTpmdW5jdGlvbigpe2Zvcih2YXIgdCxuPXRoaXMsZT1rdChuKS5sZW5ndGgscj1NYXRoLmZsb29yKGUvMiksaT0wO2k8cjspdD1uW2ldLG5baSsrXT1uWy0tZV0sbltlXT10O3JldHVybiBufSxzb21lOmZ1bmN0aW9uKHQpe3JldHVybiBudChrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sc29ydDpmdW5jdGlvbih0KXtyZXR1cm4gcHQuY2FsbChrdCh0aGlzKSx0KX0sc3ViYXJyYXk6ZnVuY3Rpb24odCxuKXt2YXIgZT1rdCh0aGlzKSxyPWUubGVuZ3RoLGk9Zyh0LHIpO3JldHVybiBuZXcoUChlLGVbd3RdKSkoZS5idWZmZXIsZS5ieXRlT2Zmc2V0K2kqZS5CWVRFU19QRVJfRUxFTUVOVCxkKCh2b2lkIDA9PT1uP3I6ZyhuLHIpKS1pKSl9fSx6dD1mdW5jdGlvbih0LG4pe3JldHVybiBQdCh0aGlzLGR0LmNhbGwoa3QodGhpcyksdCxuKSl9LEJ0PWZ1bmN0aW9uKHQpe2t0KHRoaXMpO3ZhciBuPWp0KGFyZ3VtZW50c1sxXSwxKSxlPXRoaXMubGVuZ3RoLHI9Uyh0KSxpPWQoci5sZW5ndGgpLG89MDtpZihpK24+ZSl0aHJvdyBYKE90KTtmb3IoO288aTspdGhpc1tuK29dPXJbbysrXX0sWXQ9e2VudHJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gYXQuY2FsbChrdCh0aGlzKSl9LGtleXM6ZnVuY3Rpb24oKXtyZXR1cm4gdXQuY2FsbChrdCh0aGlzKSl9LHZhbHVlczpmdW5jdGlvbigpe3JldHVybiBzdC5jYWxsKGt0KHRoaXMpKX19LFh0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIHcodCkmJnRbeHRdJiZcInN5bWJvbFwiIT10eXBlb2YgbiYmbiBpbiB0JiZTdHJpbmcoK24pPT1TdHJpbmcobil9LEd0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIFh0KHQsbj1tKG4sITApKT9sKDIsdFtuXSk6WSh0LG4pfSxWdD1mdW5jdGlvbih0LG4sZSl7cmV0dXJuIShYdCh0LG49bShuLCEwKSkmJncoZSkmJmIoZSxcInZhbHVlXCIpKXx8YihlLFwiZ2V0XCIpfHxiKGUsXCJzZXRcIil8fGUuY29uZmlndXJhYmxlfHxiKGUsXCJ3cml0YWJsZVwiKSYmIWUud3JpdGFibGV8fGIoZSxcImVudW1lcmFibGVcIikmJiFlLmVudW1lcmFibGU/Qih0LG4sZSk6KHRbbl09ZS52YWx1ZSx0KX07U3R8fCh6LmY9R3QsVy5mPVZ0KSxjKGMuUytjLkYqIVN0LFwiT2JqZWN0XCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcjpHdCxkZWZpbmVQcm9wZXJ0eTpWdH0pLG8oZnVuY3Rpb24oKXt5dC5jYWxsKHt9KX0pJiYoeXQ9Z3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdnQuY2FsbCh0aGlzKX0pO3ZhciBVdD12KHt9LFd0KTt2KFV0LFl0KSxoKFV0LG10LFl0LnZhbHVlcyksdihVdCx7c2xpY2U6enQsc2V0OkJ0LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7fSx0b1N0cmluZzp5dCx0b0xvY2FsZVN0cmluZzpJdH0pLE50KFV0LFwiYnVmZmVyXCIsXCJiXCIpLE50KFV0LFwiYnl0ZU9mZnNldFwiLFwib1wiKSxOdChVdCxcImJ5dGVMZW5ndGhcIixcImxcIiksTnQoVXQsXCJsZW5ndGhcIixcImVcIiksQihVdCxidCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbeHRdfX0pLHQuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSx1KXt1PSEhdTt2YXIgYT10Kyh1P1wiQ2xhbXBlZFwiOlwiXCIpK1wiQXJyYXlcIixsPVwiZ2V0XCIrdCx2PVwic2V0XCIrdCxwPWlbYV0sZz1wfHx7fSxtPXAmJk8ocCksYj0hcHx8IXMuQUJWLFM9e30seD1wJiZwW0tdLEE9ZnVuY3Rpb24odCxlKXt2YXIgcj10Ll9kO3JldHVybiByLnZbbF0oZSpuK3IubyxBdCl9LEw9ZnVuY3Rpb24odCxlLHIpe3ZhciBpPXQuX2Q7dSYmKHI9KHI9TWF0aC5yb3VuZChyKSk8MD8wOnI+MjU1PzI1NToyNTUmciksaS52W3ZdKGUqbitpLm8scixBdCl9LGo9ZnVuY3Rpb24odCxuKXtCKHQsbix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEEodGhpcyxuKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBMKHRoaXMsbix0KX0sZW51bWVyYWJsZTohMH0pfTtiPyhwPWUoZnVuY3Rpb24odCxlLHIsaSl7Zih0LHAsYSxcIl9kXCIpO3ZhciBvLGMscyx1LGw9MCx2PTA7aWYodyhlKSl7aWYoIShlIGluc3RhbmNlb2YgJHx8KHU9XyhlKSk9PVV8fHU9PXEpKXJldHVybiB4dCBpbiBlP0Z0KHAsZSk6Q3QuY2FsbChwLGUpO289ZSx2PWp0KHIsbik7dmFyIGc9ZS5ieXRlTGVuZ3RoO2lmKHZvaWQgMD09PWkpe2lmKGclbil0aHJvdyBYKE90KTtpZihjPWctdixjPDApdGhyb3cgWChPdCl9ZWxzZSBpZihjPWQoaSkqbixjK3Y+Zyl0aHJvdyBYKE90KTtzPWMvbn1lbHNlIHM9eShlKSxjPXMqbixvPW5ldyAkKGMpO2ZvcihoKHQsXCJfZFwiLHtiOm8sbzp2LGw6YyxlOnMsdjpuZXcgUShvKX0pO2w8czspaih0LGwrKyl9KSx4PXBbS109RShVdCksaCh4LFwiY29uc3RydWN0b3JcIixwKSk6byhmdW5jdGlvbigpe3AoMSl9KSYmbyhmdW5jdGlvbigpe25ldyBwKC0xKX0pJiZDKGZ1bmN0aW9uKHQpe25ldyBwLG5ldyBwKG51bGwpLG5ldyBwKDEuNSksbmV3IHAodCl9LCEwKXx8KHA9ZShmdW5jdGlvbih0LGUscixpKXtmKHQscCxhKTt2YXIgbztyZXR1cm4gdyhlKT9lIGluc3RhbmNlb2YgJHx8KG89XyhlKSk9PVV8fG89PXE/dm9pZCAwIT09aT9uZXcgZyhlLGp0KHIsbiksaSk6dm9pZCAwIT09cj9uZXcgZyhlLGp0KHIsbikpOm5ldyBnKGUpOnh0IGluIGU/RnQocCxlKTpDdC5jYWxsKHAsZSk6bmV3IGcoeShlKSl9KSxaKG0hPT1GdW5jdGlvbi5wcm90b3R5cGU/TShnKS5jb25jYXQoTShtKSk6TShnKSxmdW5jdGlvbih0KXt0IGluIHB8fGgocCx0LGdbdF0pfSkscFtLXT14LHJ8fCh4LmNvbnN0cnVjdG9yPXApKTt2YXIgaz14W210XSxUPSEhayYmKFwidmFsdWVzXCI9PWsubmFtZXx8dm9pZCAwPT1rLm5hbWUpLFA9WXQudmFsdWVzO2gocCxfdCwhMCksaCh4LHh0LGEpLGgoeCxFdCwhMCksaCh4LHd0LHApLCh1P25ldyBwKDEpW2J0XT09YTpidCBpbiB4KXx8Qih4LGJ0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYX19KSxTW2FdPXAsYyhjLkcrYy5XK2MuRioocCE9ZyksUyksYyhjLlMsYSx7QllURVNfUEVSX0VMRU1FTlQ6bn0pLGMoYy5TK2MuRipvKGZ1bmN0aW9uKCl7Zy5vZi5jYWxsKHAsMSl9KSxhLHtmcm9tOkN0LG9mOlJ0fSksSCBpbiB4fHxoKHgsSCxuKSxjKGMuUCxhLFd0KSxSKGEpLGMoYy5QK2MuRipMdCxhLHtzZXQ6QnR9KSxjKGMuUCtjLkYqIVQsYSxZdCkscnx8eC50b1N0cmluZz09eXR8fCh4LnRvU3RyaW5nPXl0KSxjKGMuUCtjLkYqbyhmdW5jdGlvbigpe25ldyBwKDEpLnNsaWNlKCl9KSxhLHtzbGljZTp6dH0pLGMoYy5QK2MuRioobyhmdW5jdGlvbigpe3JldHVyblsxLDJdLnRvTG9jYWxlU3RyaW5nKCkhPW5ldyBwKFsxLDJdKS50b0xvY2FsZVN0cmluZygpfSl8fCFvKGZ1bmN0aW9uKCl7eC50b0xvY2FsZVN0cmluZy5jYWxsKFsxLDJdKX0pKSxhLHt0b0xvY2FsZVN0cmluZzpJdH0pLE5bYV09VD9rOlAscnx8VHx8aCh4LG10LFApfX1lbHNlIHQuZXhwb3J0cz1mdW5jdGlvbigpe319LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDM5KSxpPWUoMTkpLG89ZSgxMyksYz1lKDQwKSxzPWUoMTApLHU9ZSg3MSksYT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO24uZj1lKDkpP2E6ZnVuY3Rpb24odCxuKXtpZih0PW8odCksbj1jKG4sITApLHUpdHJ5e3JldHVybiBhKHQsbil9Y2F0Y2godCl7fWlmKHModCxuKSlyZXR1cm4gaSghci5mLmNhbGwodCxuKSx0W25dKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDMpLGk9ZSgxMSksbz1lKDEwKSxjPWUoMjIpKFwic3JjXCIpLHM9XCJ0b1N0cmluZ1wiLHU9RnVuY3Rpb25bc10sYT0oXCJcIit1KS5zcGxpdChzKTtlKDM0KS5pbnNwZWN0U291cmNlPWZ1bmN0aW9uKHQpe3JldHVybiB1LmNhbGwodCl9LCh0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUscyl7dmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgZTt1JiYobyhlLFwibmFtZVwiKXx8aShlLFwibmFtZVwiLG4pKSx0W25dIT09ZSYmKHUmJihvKGUsYyl8fGkoZSxjLHRbbl0/XCJcIit0W25dOmEuam9pbihTdHJpbmcobikpKSksdD09PXI/dFtuXT1lOnM/dFtuXT90W25dPWU6aSh0LG4sZSk6KGRlbGV0ZSB0W25dLGkodCxuLGUpKSl9KShGdW5jdGlvbi5wcm90b3R5cGUscyxmdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMmJnRoaXNbY118fHUuY2FsbCh0aGlzKX0pfSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhIGZ1bmN0aW9uIVwiKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09dCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIrdCk7cmV0dXJuIHR9fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTpufX19LGZ1bmN0aW9uKHQsbil7dmFyIGU9TWF0aC5jZWlsLHI9TWF0aC5mbG9vcjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGlzTmFOKHQ9K3QpPzA6KHQ+MD9yOmUpKHQpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KHIodCkpfX0sZnVuY3Rpb24odCxuKXt2YXIgZT0wLHI9TWF0aC5yYW5kb20oKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuXCJTeW1ib2woXCIuY29uY2F0KHZvaWQgMD09PXQ/XCJcIjp0LFwiKV9cIiwoKytlK3IpLnRvU3RyaW5nKDM2KSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg1KShcInVuc2NvcGFibGVzXCIpLGk9QXJyYXkucHJvdG90eXBlO3ZvaWQgMD09aVtyXSYmZSgxMSkoaSxyLHt9KSx0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aVtyXVt0XT0hMH19LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlLHIpe2lmKCEodCBpbnN0YW5jZW9mIG4pfHx2b2lkIDAhPT1yJiZyIGluIHQpdGhyb3cgVHlwZUVycm9yKGUrXCI6IGluY29ycmVjdCBpbnZvY2F0aW9uIVwiKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsbil7dmFyIGU9e30udG9TdHJpbmc7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBlLmNhbGwodCkuc2xpY2UoOCwtMSl9fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz17fX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ITF9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDgyKSxpPWUoNTIpO3QuZXhwb3J0cz1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7cmV0dXJuIHIodCxpKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDE2KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe2Zvcih2YXIgaSBpbiBuKXIodCxpLG5baV0sZSk7cmV0dXJuIHR9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg3KS5mLGk9ZSgxMCksbz1lKDUpKFwidG9TdHJpbmdUYWdcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXt0JiYhaSh0PWU/dDp0LnByb3RvdHlwZSxvKSYmcih0LG8se2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTpufSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyMCksaT1NYXRoLm1heCxvPU1hdGgubWluO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3JldHVybiB0PXIodCksdDwwP2kodCtuLDApOm8odCxuKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe2lmKCFyKHQpfHx0Ll90IT09bil0aHJvdyBUeXBlRXJyb3IoXCJJbmNvbXBhdGlibGUgcmVjZWl2ZXIsIFwiK24rXCIgcmVxdWlyZWQhXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTIpLGk9ZSg1NCksbz1lKDIxKSxjPWUoOCkscz1lKDkxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXt2YXIgZT0xPT10LHU9Mj09dCxhPTM9PXQsZj00PT10LGw9Nj09dCxoPTU9PXR8fGwsdj1ufHxzO3JldHVybiBmdW5jdGlvbihuLHMscCl7Zm9yKHZhciBkLHksZz1vKG4pLG09aShnKSxiPXIocyxwLDMpLF89YyhtLmxlbmd0aCksdz0wLFM9ZT92KG4sXyk6dT92KG4sMCk6dm9pZCAwO18+dzt3KyspaWYoKGh8fHcgaW4gbSkmJihkPW1bd10seT1iKGQsdyxnKSx0KSlpZihlKVNbd109eTtlbHNlIGlmKHkpc3dpdGNoKHQpe2Nhc2UgMzpyZXR1cm4hMDtjYXNlIDU6cmV0dXJuIGQ7Y2FzZSA2OnJldHVybiB3O2Nhc2UgMjpTLnB1c2goZCl9ZWxzZSBpZihmKXJldHVybiExO3JldHVybiBsPy0xOmF8fGY/ZjpTfX19LGZ1bmN0aW9uKHQsbil7dmFyIGU9dC5leHBvcnRzPXt2ZXJzaW9uOlwiMi41LjFcIn07XCJudW1iZXJcIj09dHlwZW9mIF9fZSYmKF9fZT1lKX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjIpKFwibWV0YVwiKSxpPWUoNCksbz1lKDEwKSxjPWUoNykuZixzPTAsdT1PYmplY3QuaXNFeHRlbnNpYmxlfHxmdW5jdGlvbigpe3JldHVybiEwfSxhPSFlKDYpKGZ1bmN0aW9uKCl7cmV0dXJuIHUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxmPWZ1bmN0aW9uKHQpe2ModCxyLHt2YWx1ZTp7aTpcIk9cIisgKytzLHc6e319fSl9LGw9ZnVuY3Rpb24odCxuKXtpZighaSh0KSlyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdD90OihcInN0cmluZ1wiPT10eXBlb2YgdD9cIlNcIjpcIlBcIikrdDtpZighbyh0LHIpKXtpZighdSh0KSlyZXR1cm5cIkZcIjtpZighbilyZXR1cm5cIkVcIjtmKHQpfXJldHVybiB0W3JdLml9LGg9ZnVuY3Rpb24odCxuKXtpZighbyh0LHIpKXtpZighdSh0KSlyZXR1cm4hMDtpZighbilyZXR1cm4hMTtmKHQpfXJldHVybiB0W3JdLnd9LHY9ZnVuY3Rpb24odCl7cmV0dXJuIGEmJnAuTkVFRCYmdSh0KSYmIW8odCxyKSYmZih0KSx0fSxwPXQuZXhwb3J0cz17S0VZOnIsTkVFRDohMSxmYXN0S2V5OmwsZ2V0V2VhazpoLG9uRnJlZXplOnZ9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyKSxpPWUoOTkpLG89ZSg1MiksYz1lKDU5KShcIklFX1BST1RPXCIpLHM9ZnVuY3Rpb24oKXt9LHU9XCJwcm90b3R5cGVcIixhPWZ1bmN0aW9uKCl7dmFyIHQsbj1lKDUxKShcImlmcmFtZVwiKSxyPW8ubGVuZ3RoLGk9XCI8XCIsYz1cIj5cIjtmb3Iobi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGUoNzApLmFwcGVuZENoaWxkKG4pLG4uc3JjPVwiamF2YXNjcmlwdDpcIix0PW4uY29udGVudFdpbmRvdy5kb2N1bWVudCx0Lm9wZW4oKSx0LndyaXRlKGkrXCJzY3JpcHRcIitjK1wiZG9jdW1lbnQuRj1PYmplY3RcIitpK1wiL3NjcmlwdFwiK2MpLHQuY2xvc2UoKSxhPXQuRjtyLS07KWRlbGV0ZSBhW3VdW29bcl1dO3JldHVybiBhKCl9O3QuZXhwb3J0cz1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbih0LG4pe3ZhciBlO3JldHVybiBudWxsIT09dD8oc1t1XT1yKHQpLGU9bmV3IHMsc1t1XT1udWxsLGVbY109dCk6ZT1hKCksdm9pZCAwPT09bj9lOmkoZSxuKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDgyKSxpPWUoNTIpLmNvbmNhdChcImxlbmd0aFwiLFwicHJvdG90eXBlXCIpO24uZj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lc3x8ZnVuY3Rpb24odCl7cmV0dXJuIHIodCxpKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEwKSxpPWUoMjEpLG89ZSg1OSkoXCJJRV9QUk9UT1wiKSxjPU9iamVjdC5wcm90b3R5cGU7dC5leHBvcnRzPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQ9aSh0KSxyKHQsbyk/dFtvXTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNvbnN0cnVjdG9yJiZ0IGluc3RhbmNlb2YgdC5jb25zdHJ1Y3Rvcj90LmNvbnN0cnVjdG9yLnByb3RvdHlwZTp0IGluc3RhbmNlb2YgT2JqZWN0P2M6bnVsbH19LGZ1bmN0aW9uKHQsbil7bi5mPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtpZighcih0KSlyZXR1cm4gdDt2YXIgZSxpO2lmKG4mJlwiZnVuY3Rpb25cIj09dHlwZW9mKGU9dC50b1N0cmluZykmJiFyKGk9ZS5jYWxsKHQpKSlyZXR1cm4gaTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihlPXQudmFsdWVPZikmJiFyKGk9ZS5jYWxsKHQpKSlyZXR1cm4gaTtpZighbiYmXCJmdW5jdGlvblwiPT10eXBlb2YoZT10LnRvU3RyaW5nKSYmIXIoaT1lLmNhbGwodCkpKXJldHVybiBpO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDMpLGk9ZSgxKSxvPWUoMTYpLGM9ZSgyOSkscz1lKDM1KSx1PWUoNDMpLGE9ZSgyNCksZj1lKDQpLGw9ZSg2KSxoPWUoNDQpLHY9ZSgzMCkscD1lKDk1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUsZCx5LGcpe3ZhciBtPXJbdF0sYj1tLF89eT9cInNldFwiOlwiYWRkXCIsdz1iJiZiLnByb3RvdHlwZSxTPXt9LHg9ZnVuY3Rpb24odCl7dmFyIG49d1t0XTtvKHcsdCxcImRlbGV0ZVwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiEoZyYmIWYodCkpJiZuLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImhhc1wiPT10P2Z1bmN0aW9uKHQpe3JldHVybiEoZyYmIWYodCkpJiZuLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImdldFwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiBnJiYhZih0KT92b2lkIDA6bi5jYWxsKHRoaXMsMD09PXQ/MDp0KX06XCJhZGRcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHRoaXMsMD09PXQ/MDp0KSx0aGlzfTpmdW5jdGlvbih0LGUpe3JldHVybiBuLmNhbGwodGhpcywwPT09dD8wOnQsZSksdGhpc30pfTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBiJiYoZ3x8dy5mb3JFYWNoJiYhbChmdW5jdGlvbigpeyhuZXcgYikuZW50cmllcygpLm5leHQoKX0pKSl7dmFyIEU9bmV3IGIsTz1FW19dKGc/e306LTAsMSkhPUUsTT1sKGZ1bmN0aW9uKCl7RS5oYXMoMSl9KSxBPWgoZnVuY3Rpb24odCl7bmV3IGIodCl9KSxMPSFnJiZsKGZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBiLG49NTtuLS07KXRbX10obixuKTtyZXR1cm4hdC5oYXMoLTApfSk7QXx8KGI9bihmdW5jdGlvbihuLGUpe2EobixiLHQpO3ZhciByPXAobmV3IG0sbixiKTtyZXR1cm4gdm9pZCAwIT1lJiZ1KGUseSxyW19dLHIpLHJ9KSxiLnByb3RvdHlwZT13LHcuY29uc3RydWN0b3I9YiksKE18fEwpJiYoeChcImRlbGV0ZVwiKSx4KFwiaGFzXCIpLHkmJngoXCJnZXRcIikpLChMfHxPKSYmeChfKSxnJiZ3LmNsZWFyJiZkZWxldGUgdy5jbGVhcn1lbHNlIGI9ZC5nZXRDb25zdHJ1Y3RvcihuLHQseSxfKSxjKGIucHJvdG90eXBlLGUpLHMuTkVFRD0hMDtyZXR1cm4gdihiLHQpLFNbdF09YixpKGkuRytpLlcraS5GKihiIT1tKSxTKSxnfHxkLnNldFN0cm9uZyhiLHQseSksYn19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDExKSxpPWUoMTYpLG89ZSg2KSxjPWUoMTgpLHM9ZSg1KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe3ZhciB1PXModCksYT1lKGMsdSxcIlwiW3RdKSxmPWFbMF0sbD1hWzFdO28oZnVuY3Rpb24oKXt2YXIgbj17fTtyZXR1cm4gblt1XT1mdW5jdGlvbigpe3JldHVybiA3fSw3IT1cIlwiW3RdKG4pfSkmJihpKFN0cmluZy5wcm90b3R5cGUsdCxmKSxyKFJlZ0V4cC5wcm90b3R5cGUsdSwyPT1uP2Z1bmN0aW9uKHQsbil7cmV0dXJuIGwuY2FsbCh0LHRoaXMsbil9OmZ1bmN0aW9uKHQpe3JldHVybiBsLmNhbGwodCx0aGlzKX0pKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEyKSxpPWUoNzYpLG89ZSg1NSksYz1lKDIpLHM9ZSg4KSx1PWUoNjUpLGE9e30sZj17fSxuPXQuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSxsLGgpe3ZhciB2LHAsZCx5LGc9aD9mdW5jdGlvbigpe3JldHVybiB0fTp1KHQpLG09cihlLGwsbj8yOjEpLGI9MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBnKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7aWYobyhnKSl7Zm9yKHY9cyh0Lmxlbmd0aCk7dj5iO2IrKylpZih5PW4/bShjKHA9dFtiXSlbMF0scFsxXSk6bSh0W2JdKSx5PT09YXx8eT09PWYpcmV0dXJuIHl9ZWxzZSBmb3IoZD1nLmNhbGwodCk7IShwPWQubmV4dCgpKS5kb25lOylpZih5PWkoZCxtLHAudmFsdWUsbikseT09PWF8fHk9PT1mKXJldHVybiB5fTtuLkJSRUFLPWEsbi5SRVRVUk49Zn0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNSkoXCJpdGVyYXRvclwiKSxpPSExO3RyeXt2YXIgbz1bN11bcl0oKTtvLnJldHVybj1mdW5jdGlvbigpe2k9ITB9LEFycmF5LmZyb20obyxmdW5jdGlvbigpe3Rocm93IDJ9KX1jYXRjaCh0KXt9dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7aWYoIW4mJiFpKXJldHVybiExO3ZhciBlPSExO3RyeXt2YXIgbz1bN10sYz1vW3JdKCk7Yy5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6ZT0hMH19LG9bcl09ZnVuY3Rpb24oKXtyZXR1cm4gY30sdChvKX1jYXRjaCh0KXt9cmV0dXJuIGV9fSxmdW5jdGlvbih0LG4pe24uZj1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgzKSxpPWUoNyksbz1lKDkpLGM9ZSg1KShcInNwZWNpZXNcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuPXJbdF07byYmbiYmIW5bY10mJmkuZihuLGMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDIxKSxpPWUoMzEpLG89ZSg4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPXIodGhpcyksZT1vKG4ubGVuZ3RoKSxjPWFyZ3VtZW50cy5sZW5ndGgscz1pKGM+MT9hcmd1bWVudHNbMV06dm9pZCAwLGUpLHU9Yz4yP2FyZ3VtZW50c1syXTp2b2lkIDAsYT12b2lkIDA9PT11P2U6aSh1LGUpO2E+czspbltzKytdPXQ7cmV0dXJuIG59fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxMyksaT1lKDgpLG89ZSgzMSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUsYyl7dmFyIHMsdT1yKG4pLGE9aSh1Lmxlbmd0aCksZj1vKGMsYSk7aWYodCYmZSE9ZSl7Zm9yKDthPmY7KWlmKHM9dVtmKytdLHMhPXMpcmV0dXJuITB9ZWxzZSBmb3IoO2E+ZjtmKyspaWYoKHR8fGYgaW4gdSkmJnVbZl09PT1lKXJldHVybiB0fHxmfHwwO3JldHVybiF0JiYtMX19fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyNSksaT1lKDUpKFwidG9TdHJpbmdUYWdcIiksbz1cIkFyZ3VtZW50c1wiPT1yKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSksYz1mdW5jdGlvbih0LG4pe3RyeXtyZXR1cm4gdFtuXX1jYXRjaCh0KXt9fTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG4sZSxzO3JldHVybiB2b2lkIDA9PT10P1wiVW5kZWZpbmVkXCI6bnVsbD09PXQ/XCJOdWxsXCI6XCJzdHJpbmdcIj09dHlwZW9mKGU9YyhuPU9iamVjdCh0KSxpKSk/ZTpvP3Iobik6XCJPYmplY3RcIj09KHM9cihuKSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIG4uY2FsbGVlP1wiQXJndW1lbnRzXCI6c319LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDcpLGk9ZSgxOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXtuIGluIHQ/ci5mKHQsbixpKDAsZSkpOnRbbl09ZX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpLGk9ZSgzKS5kb2N1bWVudCxvPXIoaSkmJnIoaS5jcmVhdGVFbGVtZW50KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG8/aS5jcmVhdGVFbGVtZW50KHQpOnt9fX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9XCJjb25zdHJ1Y3RvcixoYXNPd25Qcm9wZXJ0eSxpc1Byb3RvdHlwZU9mLHByb3BlcnR5SXNFbnVtZXJhYmxlLHRvTG9jYWxlU3RyaW5nLHRvU3RyaW5nLHZhbHVlT2ZcIi5zcGxpdChcIixcIil9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDUpKFwibWF0Y2hcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuPS8uLzt0cnl7XCIvLi9cIlt0XShuKX1jYXRjaChlKXt0cnl7cmV0dXJuIG5bcl09ITEsIVwiLy4vXCJbdF0obil9Y2F0Y2godCl7fX1yZXR1cm4hMH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDI1KTt0LmV4cG9ydHM9T2JqZWN0KFwielwiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuXCJTdHJpbmdcIj09cih0KT90LnNwbGl0KFwiXCIpOk9iamVjdCh0KX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDI2KSxpPWUoNSkoXCJpdGVyYXRvclwiKSxvPUFycmF5LnByb3RvdHlwZTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJihyLkFycmF5PT09dHx8b1tpXT09PXQpfX0sZnVuY3Rpb24odCxuKXt2YXIgZT1NYXRoLmV4cG0xO3QuZXhwb3J0cz0hZXx8ZSgxMCk+MjIwMjUuNDY1Nzk0ODA2NzE4fHxlKDEwKTwyMjAyNS40NjU3OTQ4MDY3MTh8fGUoLTJlLTE3KSE9LTJlLTE3P2Z1bmN0aW9uKHQpe3JldHVybiAwPT0odD0rdCk/dDp0Pi0xZS02JiZ0PDFlLTY/dCt0KnQvMjpNYXRoLmV4cCh0KS0xfTplfSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1NYXRoLnNpZ258fGZ1bmN0aW9uKHQpe3JldHVybiAwPT0odD0rdCl8fHQhPXQ/dDp0PDA/LTE6MX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpLGk9ZSgyKSxvPWZ1bmN0aW9uKHQsbil7aWYoaSh0KSwhcihuKSYmbnVsbCE9PW4pdGhyb3cgVHlwZUVycm9yKG4rXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfTt0LmV4cG9ydHM9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbih0LG4scil7dHJ5e3I9ZSgxMikoRnVuY3Rpb24uY2FsbCxlKDE1KS5mKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIikuc2V0LDIpLHIodCxbXSksbj0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2godCl7bj0hMH1yZXR1cm4gZnVuY3Rpb24odCxlKXtyZXR1cm4gbyh0LGUpLG4/dC5fX3Byb3RvX189ZTpyKHQsZSksdH19KHt9LCExKTp2b2lkIDApLGNoZWNrOm99fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg2MCkoXCJrZXlzXCIpLGk9ZSgyMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiByW3RdfHwoclt0XT1pKHQpKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDMpLGk9XCJfX2NvcmUtanNfc2hhcmVkX19cIixvPXJbaV18fChyW2ldPXt9KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIG9bdF18fChvW3RdPXt9KX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIpLGk9ZSgxNyksbz1lKDUpKFwic3BlY2llc1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXt2YXIgZSxjPXIodCkuY29uc3RydWN0b3I7cmV0dXJuIHZvaWQgMD09PWN8fHZvaWQgMD09KGU9cihjKVtvXSk/bjppKGUpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNzUpLGk9ZSgxOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXtpZihyKG4pKXRocm93IFR5cGVFcnJvcihcIlN0cmluZyNcIitlK1wiIGRvZXNuJ3QgYWNjZXB0IHJlZ2V4IVwiKTtyZXR1cm4gU3RyaW5nKGkodCkpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByLGksbyxjPWUoMTIpLHM9ZSg3MiksdT1lKDcwKSxhPWUoNTEpLGY9ZSgzKSxsPWYucHJvY2VzcyxoPWYuc2V0SW1tZWRpYXRlLHY9Zi5jbGVhckltbWVkaWF0ZSxwPWYuTWVzc2FnZUNoYW5uZWwsZD1mLkRpc3BhdGNoLHk9MCxnPXt9LG09XCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixiPWZ1bmN0aW9uKCl7dmFyIHQ9K3RoaXM7aWYoZy5oYXNPd25Qcm9wZXJ0eSh0KSl7dmFyIG49Z1t0XTtkZWxldGUgZ1t0XSxuKCl9fSxfPWZ1bmN0aW9uKHQpe2IuY2FsbCh0LmRhdGEpfTtoJiZ2fHwoaD1mdW5jdGlvbih0KXtmb3IodmFyIG49W10sZT0xO2FyZ3VtZW50cy5sZW5ndGg+ZTspbi5wdXNoKGFyZ3VtZW50c1tlKytdKTtyZXR1cm4gZ1srK3ldPWZ1bmN0aW9uKCl7cyhcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6RnVuY3Rpb24odCksbil9LHIoeSkseX0sdj1mdW5jdGlvbih0KXtkZWxldGUgZ1t0XX0sXCJwcm9jZXNzXCI9PWUoMjUpKGwpP3I9ZnVuY3Rpb24odCl7bC5uZXh0VGljayhjKGIsdCwxKSl9OmQmJmQubm93P3I9ZnVuY3Rpb24odCl7ZC5ub3coYyhiLHQsMSkpfTpwPyhpPW5ldyBwLG89aS5wb3J0MixpLnBvcnQxLm9ubWVzc2FnZT1fLHI9YyhvLnBvc3RNZXNzYWdlLG8sMSkpOmYuYWRkRXZlbnRMaXN0ZW5lciYmXCJmdW5jdGlvblwiPT10eXBlb2YgcG9zdE1lc3NhZ2UmJiFmLmltcG9ydFNjcmlwdHM/KHI9ZnVuY3Rpb24odCl7Zi5wb3N0TWVzc2FnZSh0K1wiXCIsXCIqXCIpfSxmLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsXywhMSkpOnI9bSBpbiBhKFwic2NyaXB0XCIpP2Z1bmN0aW9uKHQpe3UuYXBwZW5kQ2hpbGQoYShcInNjcmlwdFwiKSlbbV09ZnVuY3Rpb24oKXt1LnJlbW92ZUNoaWxkKHRoaXMpLGIuY2FsbCh0KX19OmZ1bmN0aW9uKHQpe3NldFRpbWVvdXQoYyhiLHQsMSksMCl9KSx0LmV4cG9ydHM9e3NldDpoLGNsZWFyOnZ9fSxmdW5jdGlvbih0LG4sZSl7Zm9yKHZhciByLGk9ZSgzKSxvPWUoMTEpLGM9ZSgyMikscz1jKFwidHlwZWRfYXJyYXlcIiksdT1jKFwidmlld1wiKSxhPSEoIWkuQXJyYXlCdWZmZXJ8fCFpLkRhdGFWaWV3KSxmPWEsbD0wLGg9OSx2PVwiSW50OEFycmF5LFVpbnQ4QXJyYXksVWludDhDbGFtcGVkQXJyYXksSW50MTZBcnJheSxVaW50MTZBcnJheSxJbnQzMkFycmF5LFVpbnQzMkFycmF5LEZsb2F0MzJBcnJheSxGbG9hdDY0QXJyYXlcIi5zcGxpdChcIixcIik7bDxoOykocj1pW3ZbbCsrXV0pPyhvKHIucHJvdG90eXBlLHMsITApLG8oci5wcm90b3R5cGUsdSwhMCkpOmY9ITE7dC5leHBvcnRzPXtBQlY6YSxDT05TVFI6ZixUWVBFRDpzLFZJRVc6dX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQ5KSxpPWUoNSkoXCJpdGVyYXRvclwiKSxvPWUoMjYpO3QuZXhwb3J0cz1lKDM0KS5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbih0KXtpZih2b2lkIDAhPXQpcmV0dXJuIHRbaV18fHRbXCJAQGl0ZXJhdG9yXCJdfHxvW3IodCldfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMjMpLGk9ZSg3OCksbz1lKDI2KSxjPWUoMTMpO3QuZXhwb3J0cz1lKDc3KShBcnJheSxcIkFycmF5XCIsZnVuY3Rpb24odCxuKXt0aGlzLl90PWModCksdGhpcy5faT0wLHRoaXMuX2s9bn0sZnVuY3Rpb24oKXt2YXIgdD10aGlzLl90LG49dGhpcy5fayxlPXRoaXMuX2krKztyZXR1cm4hdHx8ZT49dC5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLGkoMSkpOlwia2V5c1wiPT1uP2koMCxlKTpcInZhbHVlc1wiPT1uP2koMCx0W2VdKTppKDAsW2UsdFtlXV0pfSxcInZhbHVlc1wiKSxvLkFyZ3VtZW50cz1vLkFycmF5LHIoXCJrZXlzXCIpLHIoXCJ2YWx1ZXNcIikscihcImVudHJpZXNcIil9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDIxKSxpPWUoMzEpLG89ZSg4KTt0LmV4cG9ydHM9W10uY29weVdpdGhpbnx8ZnVuY3Rpb24odCxuKXt2YXIgZT1yKHRoaXMpLGM9byhlLmxlbmd0aCkscz1pKHQsYyksdT1pKG4sYyksYT1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxmPU1hdGgubWluKCh2b2lkIDA9PT1hP2M6aShhLGMpKS11LGMtcyksbD0xO2Zvcih1PHMmJnM8dStmJiYobD0tMSx1Kz1mLTEscys9Zi0xKTtmLS0gPjA7KXUgaW4gZT9lW3NdPWVbdV06ZGVsZXRlIGVbc10scys9bCx1Kz1sO3JldHVybiBlfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoNykuZixpPWUoMzYpLG89ZSgyOSksYz1lKDEyKSxzPWUoMjQpLHU9ZSg0MyksYT1lKDc3KSxmPWUoNzgpLGw9ZSg0NiksaD1lKDkpLHY9ZSgzNSkuZmFzdEtleSxwPWUoMzIpLGQ9aD9cIl9zXCI6XCJzaXplXCIseT1mdW5jdGlvbih0LG4pe3ZhciBlLHI9dihuKTtpZihcIkZcIiE9PXIpcmV0dXJuIHQuX2lbcl07Zm9yKGU9dC5fZjtlO2U9ZS5uKWlmKGUuaz09bilyZXR1cm4gZX07dC5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbih0LG4sZSxhKXt2YXIgZj10KGZ1bmN0aW9uKHQscil7cyh0LGYsbixcIl9pXCIpLHQuX3Q9bix0Ll9pPWkobnVsbCksdC5fZj12b2lkIDAsdC5fbD12b2lkIDAsdFtkXT0wLHZvaWQgMCE9ciYmdShyLGUsdFthXSx0KX0pO3JldHVybiBvKGYucHJvdG90eXBlLHtcclxuY2xlYXI6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9cCh0aGlzLG4pLGU9dC5faSxyPXQuX2Y7cjtyPXIubilyLnI9ITAsci5wJiYoci5wPXIucC5uPXZvaWQgMCksZGVsZXRlIGVbci5pXTt0Ll9mPXQuX2w9dm9pZCAwLHRbZF09MH0sZGVsZXRlOmZ1bmN0aW9uKHQpe3ZhciBlPXAodGhpcyxuKSxyPXkoZSx0KTtpZihyKXt2YXIgaT1yLm4sbz1yLnA7ZGVsZXRlIGUuX2lbci5pXSxyLnI9ITAsbyYmKG8ubj1pKSxpJiYoaS5wPW8pLGUuX2Y9PXImJihlLl9mPWkpLGUuX2w9PXImJihlLl9sPW8pLGVbZF0tLX1yZXR1cm4hIXJ9LGZvckVhY2g6ZnVuY3Rpb24odCl7cCh0aGlzLG4pO2Zvcih2YXIgZSxyPWModCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtlPWU/ZS5uOnRoaXMuX2Y7KWZvcihyKGUudixlLmssdGhpcyk7ZSYmZS5yOyllPWUucH0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiEheShwKHRoaXMsbiksdCl9fSksaCYmcihmLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHAodGhpcyxuKVtkXX19KSxmfSxkZWY6ZnVuY3Rpb24odCxuLGUpe3ZhciByLGksbz15KHQsbik7cmV0dXJuIG8/by52PWU6KHQuX2w9bz17aTppPXYobiwhMCksazpuLHY6ZSxwOnI9dC5fbCxuOnZvaWQgMCxyOiExfSx0Ll9mfHwodC5fZj1vKSxyJiYoci5uPW8pLHRbZF0rKyxcIkZcIiE9PWkmJih0Ll9pW2ldPW8pKSx0fSxnZXRFbnRyeTp5LHNldFN0cm9uZzpmdW5jdGlvbih0LG4sZSl7YSh0LG4sZnVuY3Rpb24odCxlKXt0aGlzLl90PXAodCxuKSx0aGlzLl9rPWUsdGhpcy5fbD12b2lkIDB9LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsbj10Ll9rLGU9dC5fbDtlJiZlLnI7KWU9ZS5wO3JldHVybiB0Ll90JiYodC5fbD1lPWU/ZS5uOnQuX3QuX2YpP1wia2V5c1wiPT1uP2YoMCxlLmspOlwidmFsdWVzXCI9PW4/ZigwLGUudik6ZigwLFtlLmssZS52XSk6KHQuX3Q9dm9pZCAwLGYoMSkpfSxlP1wiZW50cmllc1wiOlwidmFsdWVzXCIsIWUsITApLGwobil9fX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMjkpLGk9ZSgzNSkuZ2V0V2VhayxvPWUoMiksYz1lKDQpLHM9ZSgyNCksdT1lKDQzKSxhPWUoMzMpLGY9ZSgxMCksbD1lKDMyKSxoPWEoNSksdj1hKDYpLHA9MCxkPWZ1bmN0aW9uKHQpe3JldHVybiB0Ll9sfHwodC5fbD1uZXcgeSl9LHk9ZnVuY3Rpb24oKXt0aGlzLmE9W119LGc9ZnVuY3Rpb24odCxuKXtyZXR1cm4gaCh0LmEsZnVuY3Rpb24odCl7cmV0dXJuIHRbMF09PT1ufSl9O3kucHJvdG90eXBlPXtnZXQ6ZnVuY3Rpb24odCl7dmFyIG49Zyh0aGlzLHQpO2lmKG4pcmV0dXJuIG5bMV19LGhhczpmdW5jdGlvbih0KXtyZXR1cm4hIWcodGhpcyx0KX0sc2V0OmZ1bmN0aW9uKHQsbil7dmFyIGU9Zyh0aGlzLHQpO2U/ZVsxXT1uOnRoaXMuYS5wdXNoKFt0LG5dKX0sZGVsZXRlOmZ1bmN0aW9uKHQpe3ZhciBuPXYodGhpcy5hLGZ1bmN0aW9uKG4pe3JldHVybiBuWzBdPT09dH0pO3JldHVybn5uJiZ0aGlzLmEuc3BsaWNlKG4sMSksISF+bn19LHQuZXhwb3J0cz17Z2V0Q29uc3RydWN0b3I6ZnVuY3Rpb24odCxuLGUsbyl7dmFyIGE9dChmdW5jdGlvbih0LHIpe3ModCxhLG4sXCJfaVwiKSx0Ll90PW4sdC5faT1wKyssdC5fbD12b2lkIDAsdm9pZCAwIT1yJiZ1KHIsZSx0W29dLHQpfSk7cmV0dXJuIHIoYS5wcm90b3R5cGUse2RlbGV0ZTpmdW5jdGlvbih0KXtpZighYyh0KSlyZXR1cm4hMTt2YXIgZT1pKHQpO3JldHVybiBlPT09ITA/ZChsKHRoaXMsbikpLmRlbGV0ZSh0KTplJiZmKGUsdGhpcy5faSkmJmRlbGV0ZSBlW3RoaXMuX2ldfSxoYXM6ZnVuY3Rpb24odCl7aWYoIWModCkpcmV0dXJuITE7dmFyIGU9aSh0KTtyZXR1cm4gZT09PSEwP2QobCh0aGlzLG4pKS5oYXModCk6ZSYmZihlLHRoaXMuX2kpfX0pLGF9LGRlZjpmdW5jdGlvbih0LG4sZSl7dmFyIHI9aShvKG4pLCEwKTtyZXR1cm4gcj09PSEwP2QodCkuc2V0KG4sZSk6clt0Ll9pXT1lLHR9LHVmc3RvcmU6ZH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDMpLmRvY3VtZW50O3QuZXhwb3J0cz1yJiZyLmRvY3VtZW50RWxlbWVudH0sZnVuY3Rpb24odCxuLGUpe3QuZXhwb3J0cz0hZSg5KSYmIWUoNikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KGUoNTEpKFwiZGl2XCIpLFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXt2YXIgcj12b2lkIDA9PT1lO3N3aXRjaChuLmxlbmd0aCl7Y2FzZSAwOnJldHVybiByP3QoKTp0LmNhbGwoZSk7Y2FzZSAxOnJldHVybiByP3QoblswXSk6dC5jYWxsKGUsblswXSk7Y2FzZSAyOnJldHVybiByP3QoblswXSxuWzFdKTp0LmNhbGwoZSxuWzBdLG5bMV0pO2Nhc2UgMzpyZXR1cm4gcj90KG5bMF0sblsxXSxuWzJdKTp0LmNhbGwoZSxuWzBdLG5bMV0sblsyXSk7Y2FzZSA0OnJldHVybiByP3QoblswXSxuWzFdLG5bMl0sblszXSk6dC5jYWxsKGUsblswXSxuWzFdLG5bMl0sblszXSl9cmV0dXJuIHQuYXBwbHkoZSxuKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDI1KTt0LmV4cG9ydHM9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJBcnJheVwiPT1yKHQpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCksaT1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4hcih0KSYmaXNGaW5pdGUodCkmJmkodCk9PT10fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCksaT1lKDI1KSxvPWUoNSkoXCJtYXRjaFwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG47cmV0dXJuIHIodCkmJih2b2lkIDAhPT0obj10W29dKT8hIW46XCJSZWdFeHBcIj09aSh0KSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUsaSl7dHJ5e3JldHVybiBpP24ocihlKVswXSxlWzFdKTpuKGUpfWNhdGNoKG4pe3ZhciBvPXQucmV0dXJuO3Rocm93IHZvaWQgMCE9PW8mJnIoby5jYWxsKHQpKSxufX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDI3KSxpPWUoMSksbz1lKDE2KSxjPWUoMTEpLHM9ZSgxMCksdT1lKDI2KSxhPWUoOTYpLGY9ZSgzMCksbD1lKDM4KSxoPWUoNSkoXCJpdGVyYXRvclwiKSx2PSEoW10ua2V5cyYmXCJuZXh0XCJpbltdLmtleXMoKSkscD1cIkBAaXRlcmF0b3JcIixkPVwia2V5c1wiLHk9XCJ2YWx1ZXNcIixnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSxtLGIsXyx3KXthKGUsbixtKTt2YXIgUyx4LEUsTz1mdW5jdGlvbih0KXtpZighdiYmdCBpbiBqKXJldHVybiBqW3RdO3N3aXRjaCh0KXtjYXNlIGQ6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMsdCl9O2Nhc2UgeTpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcyx0KX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMsdCl9fSxNPW4rXCIgSXRlcmF0b3JcIixBPWI9PXksTD0hMSxqPXQucHJvdG90eXBlLGs9altoXXx8altwXXx8YiYmaltiXSxUPWt8fE8oYiksUD1iP0E/TyhcImVudHJpZXNcIik6VDp2b2lkIDAsRj1cIkFycmF5XCI9PW4/ai5lbnRyaWVzfHxrOms7aWYoRiYmKEU9bChGLmNhbGwobmV3IHQpKSxFIT09T2JqZWN0LnByb3RvdHlwZSYmRS5uZXh0JiYoZihFLE0sITApLHJ8fHMoRSxoKXx8YyhFLGgsZykpKSxBJiZrJiZrLm5hbWUhPT15JiYoTD0hMCxUPWZ1bmN0aW9uKCl7cmV0dXJuIGsuY2FsbCh0aGlzKX0pLHImJiF3fHwhdiYmIUwmJmpbaF18fGMoaixoLFQpLHVbbl09VCx1W01dPWcsYilpZihTPXt2YWx1ZXM6QT9UOk8oeSksa2V5czpfP1Q6TyhkKSxlbnRyaWVzOlB9LHcpZm9yKHggaW4gUyl4IGluIGp8fG8oaix4LFNbeF0pO2Vsc2UgaShpLlAraS5GKih2fHxMKSxuLFMpO3JldHVybiBTfX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtyZXR1cm57dmFsdWU6bixkb25lOiEhdH19fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1NYXRoLmxvZzFwfHxmdW5jdGlvbih0KXtyZXR1cm4odD0rdCk+LTFlLTgmJnQ8MWUtOD90LXQqdC8yOk1hdGgubG9nKDErdCl9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0KXt2YXIgbixlO3RoaXMucHJvbWlzZT1uZXcgdChmdW5jdGlvbih0LHIpe2lmKHZvaWQgMCE9PW58fHZvaWQgMCE9PWUpdGhyb3cgVHlwZUVycm9yKFwiQmFkIFByb21pc2UgY29uc3RydWN0b3JcIik7bj10LGU9cn0pLHRoaXMucmVzb2x2ZT1pKG4pLHRoaXMucmVqZWN0PWkoZSl9dmFyIGk9ZSgxNyk7dC5leHBvcnRzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyByKHQpfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMjgpLGk9ZSg0NSksbz1lKDM5KSxjPWUoMjEpLHM9ZSg1NCksdT1PYmplY3QuYXNzaWduO3QuZXhwb3J0cz0hdXx8ZSg2KShmdW5jdGlvbigpe3ZhciB0PXt9LG49e30sZT1TeW1ib2woKSxyPVwiYWJjZGVmZ2hpamtsbW5vcHFyc3RcIjtyZXR1cm4gdFtlXT03LHIuc3BsaXQoXCJcIikuZm9yRWFjaChmdW5jdGlvbih0KXtuW3RdPXR9KSw3IT11KHt9LHQpW2VdfHxPYmplY3Qua2V5cyh1KHt9LG4pKS5qb2luKFwiXCIpIT1yfSk/ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9Yyh0KSx1PWFyZ3VtZW50cy5sZW5ndGgsYT0xLGY9aS5mLGw9by5mO3U+YTspZm9yKHZhciBoLHY9cyhhcmd1bWVudHNbYSsrXSkscD1mP3IodikuY29uY2F0KGYodikpOnIodiksZD1wLmxlbmd0aCx5PTA7ZD55OylsLmNhbGwodixoPXBbeSsrXSkmJihlW2hdPXZbaF0pO3JldHVybiBlfTp1fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxMCksaT1lKDEzKSxvPWUoNDgpKCExKSxjPWUoNTkpKFwiSUVfUFJPVE9cIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7dmFyIGUscz1pKHQpLHU9MCxhPVtdO2ZvcihlIGluIHMpZSE9YyYmcihzLGUpJiZhLnB1c2goZSk7Zm9yKDtuLmxlbmd0aD51OylyKHMsZT1uW3UrK10pJiYofm8oYSxlKXx8YS5wdXNoKGUpKTtyZXR1cm4gYX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDI4KSxpPWUoMTMpLG89ZSgzOSkuZjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4pe2Zvcih2YXIgZSxjPWkobikscz1yKGMpLHU9cy5sZW5ndGgsYT0wLGY9W107dT5hOylvLmNhbGwoYyxlPXNbYSsrXSkmJmYucHVzaCh0P1tlLGNbZV1dOmNbZV0pO3JldHVybiBmfX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDM3KSxpPWUoNDUpLG89ZSgyKSxjPWUoMykuUmVmbGVjdDt0LmV4cG9ydHM9YyYmYy5vd25LZXlzfHxmdW5jdGlvbih0KXt2YXIgbj1yLmYobyh0KSksZT1pLmY7cmV0dXJuIGU/bi5jb25jYXQoZSh0KSk6bn19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDgpLGk9ZSg4Niksbz1lKDE4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUsYyl7dmFyIHM9U3RyaW5nKG8odCkpLHU9cy5sZW5ndGgsYT12b2lkIDA9PT1lP1wiIFwiOlN0cmluZyhlKSxmPXIobik7aWYoZjw9dXx8XCJcIj09YSlyZXR1cm4gczt2YXIgbD1mLXUsaD1pLmNhbGwoYSxNYXRoLmNlaWwobC9hLmxlbmd0aCkpO3JldHVybiBoLmxlbmd0aD5sJiYoaD1oLnNsaWNlKDAsbCkpLGM/aCtzOnMraH19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDIwKSxpPWUoMTgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgbj1TdHJpbmcoaSh0aGlzKSksZT1cIlwiLG89cih0KTtpZihvPDB8fG89PTEvMCl0aHJvdyBSYW5nZUVycm9yKFwiQ291bnQgY2FuJ3QgYmUgbmVnYXRpdmVcIik7Zm9yKDtvPjA7KG8+Pj49MSkmJihuKz1uKSkxJm8mJihlKz1uKTtyZXR1cm4gZX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIwKSxpPWUoOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpcmV0dXJuIDA7dmFyIG49cih0KSxlPWkobik7aWYobiE9PWUpdGhyb3cgUmFuZ2VFcnJvcihcIldyb25nIGxlbmd0aCFcIik7cmV0dXJuIGV9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0LG4sZSl7dmFyIHIsaSxvLGM9QXJyYXkoZSkscz04KmUtbi0xLHU9KDE8PHMpLTEsYT11Pj4xLGY9MjM9PT1uP0IoMiwtMjQpLUIoMiwtNzcpOjAsbD0wLGg9dDwwfHwwPT09dCYmMS90PDA/MTowO2Zvcih0PXoodCksdCE9dHx8dD09PUk/KGk9dCE9dD8xOjAscj11KToocj1ZKFgodCkvRyksdCoobz1CKDIsLXIpKTwxJiYoci0tLG8qPTIpLHQrPXIrYT49MT9mL286ZipCKDIsMS1hKSx0Km8+PTImJihyKyssby89MikscithPj11PyhpPTAscj11KTpyK2E+PTE/KGk9KHQqby0xKSpCKDIsbikscis9YSk6KGk9dCpCKDIsYS0xKSpCKDIsbikscj0wKSk7bj49ODtjW2wrK109MjU1JmksaS89MjU2LG4tPTgpO2ZvcihyPXI8PG58aSxzKz1uO3M+MDtjW2wrK109MjU1JnIsci89MjU2LHMtPTgpO3JldHVybiBjWy0tbF18PTEyOCpoLGN9ZnVuY3Rpb24gaSh0LG4sZSl7dmFyIHIsaT04KmUtbi0xLG89KDE8PGkpLTEsYz1vPj4xLHM9aS03LHU9ZS0xLGE9dFt1LS1dLGY9MTI3JmE7Zm9yKGE+Pj03O3M+MDtmPTI1NipmK3RbdV0sdS0tLHMtPTgpO2ZvcihyPWYmKDE8PC1zKS0xLGY+Pj0tcyxzKz1uO3M+MDtyPTI1NipyK3RbdV0sdS0tLHMtPTgpO2lmKDA9PT1mKWY9MS1jO2Vsc2V7aWYoZj09PW8pcmV0dXJuIHI/TmFOOmE/LUk6STtyKz1CKDIsbiksZi09Y31yZXR1cm4oYT8tMToxKSpyKkIoMixmLW4pfWZ1bmN0aW9uIG8odCl7cmV0dXJuIHRbM108PDI0fHRbMl08PDE2fHRbMV08PDh8dFswXX1mdW5jdGlvbiBjKHQpe3JldHVyblsyNTUmdF19ZnVuY3Rpb24gcyh0KXtyZXR1cm5bMjU1JnQsdD4+OCYyNTVdfWZ1bmN0aW9uIHUodCl7cmV0dXJuWzI1NSZ0LHQ+PjgmMjU1LHQ+PjE2JjI1NSx0Pj4yNCYyNTVdfWZ1bmN0aW9uIGEodCl7cmV0dXJuIHIodCw1Miw4KX1mdW5jdGlvbiBmKHQpe3JldHVybiByKHQsMjMsNCl9ZnVuY3Rpb24gbCh0LG4sZSl7TSh0W1RdLG4se2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW2VdfX0pfWZ1bmN0aW9uIGgodCxuLGUscil7dmFyIGk9K2Usbz1FKGkpO2lmKG8rbj50W0tdKXRocm93IEQoRik7dmFyIGM9dFtIXS5fYixzPW8rdFtKXSx1PWMuc2xpY2UocyxzK24pO3JldHVybiByP3U6dS5yZXZlcnNlKCl9ZnVuY3Rpb24gdih0LG4sZSxyLGksbyl7dmFyIGM9K2Uscz1FKGMpO2lmKHMrbj50W0tdKXRocm93IEQoRik7Zm9yKHZhciB1PXRbSF0uX2IsYT1zK3RbSl0sZj1yKCtpKSxsPTA7bDxuO2wrKyl1W2ErbF09ZltvP2w6bi1sLTFdfXZhciBwPWUoMyksZD1lKDkpLHk9ZSgyNyksZz1lKDY0KSxtPWUoMTEpLGI9ZSgyOSksXz1lKDYpLHc9ZSgyNCksUz1lKDIwKSx4PWUoOCksRT1lKDg3KSxPPWUoMzcpLmYsTT1lKDcpLmYsQT1lKDQ3KSxMPWUoMzApLGo9XCJBcnJheUJ1ZmZlclwiLGs9XCJEYXRhVmlld1wiLFQ9XCJwcm90b3R5cGVcIixQPVwiV3JvbmcgbGVuZ3RoIVwiLEY9XCJXcm9uZyBpbmRleCFcIixOPXBbal0sQz1wW2tdLFI9cC5NYXRoLEQ9cC5SYW5nZUVycm9yLEk9cC5JbmZpbml0eSxXPU4sej1SLmFicyxCPVIucG93LFk9Ui5mbG9vcixYPVIubG9nLEc9Ui5MTjIsVj1cImJ1ZmZlclwiLFU9XCJieXRlTGVuZ3RoXCIscT1cImJ5dGVPZmZzZXRcIixIPWQ/XCJfYlwiOlYsSz1kP1wiX2xcIjpVLEo9ZD9cIl9vXCI6cTtpZihnLkFCVil7aWYoIV8oZnVuY3Rpb24oKXtOKDEpfSl8fCFfKGZ1bmN0aW9uKCl7bmV3IE4oLTEpfSl8fF8oZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE4sbmV3IE4oMS41KSxuZXcgTihOYU4pLE4ubmFtZSE9an0pKXtOPWZ1bmN0aW9uKHQpe3JldHVybiB3KHRoaXMsTiksbmV3IFcoRSh0KSl9O2Zvcih2YXIgJCxRPU5bVF09V1tUXSxaPU8oVyksdHQ9MDtaLmxlbmd0aD50dDspKCQ9Wlt0dCsrXSlpbiBOfHxtKE4sJCxXWyRdKTt5fHwoUS5jb25zdHJ1Y3Rvcj1OKX12YXIgbnQ9bmV3IEMobmV3IE4oMikpLGV0PUNbVF0uc2V0SW50ODtudC5zZXRJbnQ4KDAsMjE0NzQ4MzY0OCksbnQuc2V0SW50OCgxLDIxNDc0ODM2NDkpLCFudC5nZXRJbnQ4KDApJiZudC5nZXRJbnQ4KDEpfHxiKENbVF0se3NldEludDg6ZnVuY3Rpb24odCxuKXtldC5jYWxsKHRoaXMsdCxuPDwyND4+MjQpfSxzZXRVaW50ODpmdW5jdGlvbih0LG4pe2V0LmNhbGwodGhpcyx0LG48PDI0Pj4yNCl9fSwhMCl9ZWxzZSBOPWZ1bmN0aW9uKHQpe3codGhpcyxOLGopO3ZhciBuPUUodCk7dGhpcy5fYj1BLmNhbGwoQXJyYXkobiksMCksdGhpc1tLXT1ufSxDPWZ1bmN0aW9uKHQsbixlKXt3KHRoaXMsQyxrKSx3KHQsTixrKTt2YXIgcj10W0tdLGk9UyhuKTtpZihpPDB8fGk+cil0aHJvdyBEKFwiV3Jvbmcgb2Zmc2V0IVwiKTtpZihlPXZvaWQgMD09PWU/ci1pOngoZSksaStlPnIpdGhyb3cgRChQKTt0aGlzW0hdPXQsdGhpc1tKXT1pLHRoaXNbS109ZX0sZCYmKGwoTixVLFwiX2xcIiksbChDLFYsXCJfYlwiKSxsKEMsVSxcIl9sXCIpLGwoQyxxLFwiX29cIikpLGIoQ1tUXSx7Z2V0SW50ODpmdW5jdGlvbih0KXtyZXR1cm4gaCh0aGlzLDEsdClbMF08PDI0Pj4yNH0sZ2V0VWludDg6ZnVuY3Rpb24odCl7cmV0dXJuIGgodGhpcywxLHQpWzBdfSxnZXRJbnQxNjpmdW5jdGlvbih0KXt2YXIgbj1oKHRoaXMsMix0LGFyZ3VtZW50c1sxXSk7cmV0dXJuKG5bMV08PDh8blswXSk8PDE2Pj4xNn0sZ2V0VWludDE2OmZ1bmN0aW9uKHQpe3ZhciBuPWgodGhpcywyLHQsYXJndW1lbnRzWzFdKTtyZXR1cm4gblsxXTw8OHxuWzBdfSxnZXRJbnQzMjpmdW5jdGlvbih0KXtyZXR1cm4gbyhoKHRoaXMsNCx0LGFyZ3VtZW50c1sxXSkpfSxnZXRVaW50MzI6ZnVuY3Rpb24odCl7cmV0dXJuIG8oaCh0aGlzLDQsdCxhcmd1bWVudHNbMV0pKT4+PjB9LGdldEZsb2F0MzI6ZnVuY3Rpb24odCl7cmV0dXJuIGkoaCh0aGlzLDQsdCxhcmd1bWVudHNbMV0pLDIzLDQpfSxnZXRGbG9hdDY0OmZ1bmN0aW9uKHQpe3JldHVybiBpKGgodGhpcyw4LHQsYXJndW1lbnRzWzFdKSw1Miw4KX0sc2V0SW50ODpmdW5jdGlvbih0LG4pe3YodGhpcywxLHQsYyxuKX0sc2V0VWludDg6ZnVuY3Rpb24odCxuKXt2KHRoaXMsMSx0LGMsbil9LHNldEludDE2OmZ1bmN0aW9uKHQsbil7dih0aGlzLDIsdCxzLG4sYXJndW1lbnRzWzJdKX0sc2V0VWludDE2OmZ1bmN0aW9uKHQsbil7dih0aGlzLDIsdCxzLG4sYXJndW1lbnRzWzJdKX0sc2V0SW50MzI6ZnVuY3Rpb24odCxuKXt2KHRoaXMsNCx0LHUsbixhcmd1bWVudHNbMl0pfSxzZXRVaW50MzI6ZnVuY3Rpb24odCxuKXt2KHRoaXMsNCx0LHUsbixhcmd1bWVudHNbMl0pfSxzZXRGbG9hdDMyOmZ1bmN0aW9uKHQsbil7dih0aGlzLDQsdCxmLG4sYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQ2NDpmdW5jdGlvbih0LG4pe3YodGhpcyw4LHQsYSxuLGFyZ3VtZW50c1syXSl9fSk7TChOLGopLEwoQyxrKSxtKENbVF0sZy5WSUVXLCEwKSxuW2pdPU4sbltrXT1DfSxmdW5jdGlvbih0LG4sZSl7bi5mPWUoNSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpLGk9ZSg3Myksbz1lKDUpKFwic3BlY2llc1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG47cmV0dXJuIGkodCkmJihuPXQuY29uc3RydWN0b3IsXCJmdW5jdGlvblwiIT10eXBlb2Ygbnx8biE9PUFycmF5JiYhaShuLnByb3RvdHlwZSl8fChuPXZvaWQgMCkscihuKSYmKG49bltvXSxudWxsPT09biYmKG49dm9pZCAwKSkpLHZvaWQgMD09PW4/QXJyYXk6bn19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDkwKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3KHIodCkpKG4pfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMTcpLGk9ZSg0KSxvPWUoNzIpLGM9W10uc2xpY2Uscz17fSx1PWZ1bmN0aW9uKHQsbixlKXtpZighKG4gaW4gcykpe2Zvcih2YXIgcj1bXSxpPTA7aTxuO2krKylyW2ldPVwiYVtcIitpK1wiXVwiO3Nbbl09RnVuY3Rpb24oXCJGLGFcIixcInJldHVybiBuZXcgRihcIityLmpvaW4oXCIsXCIpK1wiKVwiKX1yZXR1cm4gc1tuXSh0LGUpfTt0LmV4cG9ydHM9RnVuY3Rpb24uYmluZHx8ZnVuY3Rpb24odCl7dmFyIG49cih0aGlzKSxlPWMuY2FsbChhcmd1bWVudHMsMSkscz1mdW5jdGlvbigpe3ZhciByPWUuY29uY2F0KGMuY2FsbChhcmd1bWVudHMpKTtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIHM/dShuLHIubGVuZ3RoLHIpOm8obixyLHQpfTtyZXR1cm4gaShuLnByb3RvdHlwZSkmJihzLnByb3RvdHlwZT1uLnByb3RvdHlwZSksc319LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDI4KSxpPWUoNDUpLG89ZSgzOSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuPXIodCksZT1pLmY7aWYoZSlmb3IodmFyIGMscz1lKHQpLHU9by5mLGE9MDtzLmxlbmd0aD5hOyl1LmNhbGwodCxjPXNbYSsrXSkmJm4ucHVzaChjKTtyZXR1cm4gbn19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDIpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0PXIodGhpcyksbj1cIlwiO3JldHVybiB0Lmdsb2JhbCYmKG4rPVwiZ1wiKSx0Lmlnbm9yZUNhc2UmJihuKz1cImlcIiksdC5tdWx0aWxpbmUmJihuKz1cIm1cIiksdC51bmljb2RlJiYobis9XCJ1XCIpLHQuc3RpY2t5JiYobis9XCJ5XCIpLG59fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KSxpPWUoNTgpLnNldDt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe3ZhciBvLGM9bi5jb25zdHJ1Y3RvcjtyZXR1cm4gYyE9PWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGMmJihvPWMucHJvdG90eXBlKSE9PWUucHJvdG90eXBlJiZyKG8pJiZpJiZpKHQsbyksdH19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDM2KSxpPWUoMTkpLG89ZSgzMCksYz17fTtlKDExKShjLGUoNSkoXCJpdGVyYXRvclwiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSksdC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXt0LnByb3RvdHlwZT1yKGMse25leHQ6aSgxLGUpfSksbyh0LG4rXCIgSXRlcmF0b3JcIil9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg1NyksaT1NYXRoLnBvdyxvPWkoMiwtNTIpLGM9aSgyLC0yMykscz1pKDIsMTI3KSooMi1jKSx1PWkoMiwtMTI2KSxhPWZ1bmN0aW9uKHQpe3JldHVybiB0KzEvby0xL299O3QuZXhwb3J0cz1NYXRoLmZyb3VuZHx8ZnVuY3Rpb24odCl7dmFyIG4sZSxpPU1hdGguYWJzKHQpLGY9cih0KTtyZXR1cm4gaTx1P2YqYShpL3UvYykqdSpjOihuPSgxK2MvbykqaSxlPW4tKG4taSksZT5zfHxlIT1lP2YqKDEvMCk6ZiplKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDMpLGk9ZSg2Mykuc2V0LG89ci5NdXRhdGlvbk9ic2VydmVyfHxyLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsYz1yLnByb2Nlc3Mscz1yLlByb21pc2UsdT1cInByb2Nlc3NcIj09ZSgyNSkoYyk7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQsbixlLGE9ZnVuY3Rpb24oKXt2YXIgcixpO2Zvcih1JiYocj1jLmRvbWFpbikmJnIuZXhpdCgpO3Q7KXtpPXQuZm4sdD10Lm5leHQ7dHJ5e2koKX1jYXRjaChyKXt0aHJvdyB0P2UoKTpuPXZvaWQgMCxyfX1uPXZvaWQgMCxyJiZyLmVudGVyKCl9O2lmKHUpZT1mdW5jdGlvbigpe2MubmV4dFRpY2soYSl9O2Vsc2UgaWYobyl7dmFyIGY9ITAsbD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtuZXcgbyhhKS5vYnNlcnZlKGwse2NoYXJhY3RlckRhdGE6ITB9KSxlPWZ1bmN0aW9uKCl7bC5kYXRhPWY9IWZ9fWVsc2UgaWYocyYmcy5yZXNvbHZlKXt2YXIgaD1zLnJlc29sdmUoKTtlPWZ1bmN0aW9uKCl7aC50aGVuKGEpfX1lbHNlIGU9ZnVuY3Rpb24oKXtpLmNhbGwocixhKX07cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBpPXtmbjpyLG5leHQ6dm9pZCAwfTtuJiYobi5uZXh0PWkpLHR8fCh0PWksZSgpKSxuPWl9fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNyksaT1lKDIpLG89ZSgyOCk7dC5leHBvcnRzPWUoOSk/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24odCxuKXtpKHQpO2Zvcih2YXIgZSxjPW8obikscz1jLmxlbmd0aCx1PTA7cz51OylyLmYodCxlPWNbdSsrXSxuW2VdKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEzKSxpPWUoMzcpLmYsbz17fS50b1N0cmluZyxjPVwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cmJndpbmRvdyYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXSxzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4gaSh0KX1jYXRjaCh0KXtyZXR1cm4gYy5zbGljZSgpfX07dC5leHBvcnRzLmY9ZnVuY3Rpb24odCl7cmV0dXJuIGMmJlwiW29iamVjdCBXaW5kb3ddXCI9PW8uY2FsbCh0KT9zKHQpOmkocih0KSl9fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0KXt0cnl7cmV0dXJue2U6ITEsdjp0KCl9fWNhdGNoKHQpe3JldHVybntlOiEwLHY6dH19fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMiksaT1lKDQpLG89ZSg4MCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7aWYocih0KSxpKG4pJiZuLmNvbnN0cnVjdG9yPT09dClyZXR1cm4gbjt2YXIgZT1vLmYodCksYz1lLnJlc29sdmU7cmV0dXJuIGMobiksZS5wcm9taXNlfX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9T2JqZWN0LmlzfHxmdW5jdGlvbih0LG4pe3JldHVybiB0PT09bj8wIT09dHx8MS90PT09MS9uOnQhPXQmJm4hPW59fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyMCksaT1lKDE4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSl7dmFyIG8sYyxzPVN0cmluZyhpKG4pKSx1PXIoZSksYT1zLmxlbmd0aDtyZXR1cm4gdTwwfHx1Pj1hP3Q/XCJcIjp2b2lkIDA6KG89cy5jaGFyQ29kZUF0KHUpLG88NTUyOTZ8fG8+NTYzMTl8fHUrMT09PWF8fChjPXMuY2hhckNvZGVBdCh1KzEpKTw1NjMyMHx8Yz41NzM0Mz90P3MuY2hhckF0KHUpOm86dD9zLnNsaWNlKHUsdSsyKTooby01NTI5Njw8MTApKyhjLTU2MzIwKSs2NTUzNil9fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMyksaT1lKDM0KSxvPWUoMjcpLGM9ZSg4OSkscz1lKDcpLmY7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuPWkuU3ltYm9sfHwoaS5TeW1ib2w9bz97fTpyLlN5bWJvbHx8e30pO1wiX1wiPT10LmNoYXJBdCgwKXx8dCBpbiBufHxzKG4sdCx7dmFsdWU6Yy5mKHQpfSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUCxcIkFycmF5XCIse2NvcHlXaXRoaW46ZSg2Nyl9KSxlKDIzKShcImNvcHlXaXRoaW5cIil9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5QLFwiQXJyYXlcIix7ZmlsbDplKDQ3KX0pLGUoMjMpKFwiZmlsbFwiKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDMzKSg2KSxvPVwiZmluZEluZGV4XCIsYz0hMDtvIGluW10mJkFycmF5KDEpW29dKGZ1bmN0aW9uKCl7Yz0hMX0pLHIoci5QK3IuRipjLFwiQXJyYXlcIix7ZmluZEluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiBpKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSksZSgyMykobyl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSgzMykoNSksbz1cImZpbmRcIixjPSEwO28gaW5bXSYmQXJyYXkoMSlbb10oZnVuY3Rpb24oKXtjPSExfSkscihyLlArci5GKmMsXCJBcnJheVwiLHtmaW5kOmZ1bmN0aW9uKHQpe3JldHVybiBpKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSksZSgyMykobyl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEyKSxpPWUoMSksbz1lKDIxKSxjPWUoNzYpLHM9ZSg1NSksdT1lKDgpLGE9ZSg1MCksZj1lKDY1KTtpKGkuUytpLkYqIWUoNDQpKGZ1bmN0aW9uKHQpe0FycmF5LmZyb20odCl9KSxcIkFycmF5XCIse2Zyb206ZnVuY3Rpb24odCl7dmFyIG4sZSxpLGwsaD1vKHQpLHY9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LHA9YXJndW1lbnRzLmxlbmd0aCxkPXA+MT9hcmd1bWVudHNbMV06dm9pZCAwLHk9dm9pZCAwIT09ZCxnPTAsbT1mKGgpO2lmKHkmJihkPXIoZCxwPjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksdm9pZCAwPT1tfHx2PT1BcnJheSYmcyhtKSlmb3Iobj11KGgubGVuZ3RoKSxlPW5ldyB2KG4pO24+ZztnKyspYShlLGcseT9kKGhbZ10sZyk6aFtnXSk7ZWxzZSBmb3IobD1tLmNhbGwoaCksZT1uZXcgdjshKGk9bC5uZXh0KCkpLmRvbmU7ZysrKWEoZSxnLHk/YyhsLGQsW2kudmFsdWUsZ10sITApOmkudmFsdWUpO3JldHVybiBlLmxlbmd0aD1nLGV9fSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSg1MCk7cihyLlMrci5GKmUoNikoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiEoQXJyYXkub2YuY2FsbCh0KWluc3RhbmNlb2YgdCl9KSxcIkFycmF5XCIse29mOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsbj1hcmd1bWVudHMubGVuZ3RoLGU9bmV3KFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSkobik7bj50OylpKGUsdCxhcmd1bWVudHNbdCsrXSk7cmV0dXJuIGUubGVuZ3RoPW4sZX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNykuZixpPUZ1bmN0aW9uLnByb3RvdHlwZSxvPS9eXFxzKmZ1bmN0aW9uIChbXiAoXSopLyxjPVwibmFtZVwiO2MgaW4gaXx8ZSg5KSYmcihpLGMse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXt0cnl7cmV0dXJuKFwiXCIrdGhpcykubWF0Y2gobylbMV19Y2F0Y2godCl7cmV0dXJuXCJcIn19fSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDY4KSxpPWUoMzIpLG89XCJNYXBcIjt0LmV4cG9ydHM9ZSg0MSkobyxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHtnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ci5nZXRFbnRyeShpKHRoaXMsbyksdCk7cmV0dXJuIG4mJm4udn0sc2V0OmZ1bmN0aW9uKHQsbil7cmV0dXJuIHIuZGVmKGkodGhpcyxvKSwwPT09dD8wOnQsbil9fSxyLCEwKX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDc5KSxvPU1hdGguc3FydCxjPU1hdGguYWNvc2g7cihyLlMrci5GKiEoYyYmNzEwPT1NYXRoLmZsb29yKGMoTnVtYmVyLk1BWF9WQUxVRSkpJiZjKDEvMCk9PTEvMCksXCJNYXRoXCIse2Fjb3NoOmZ1bmN0aW9uKHQpe3JldHVybih0PSt0KTwxP05hTjp0Pjk0OTA2MjY1LjYyNDI1MTU2P01hdGgubG9nKHQpK01hdGguTE4yOmkodC0xK28odC0xKSpvKHQrMSkpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZnVuY3Rpb24gcih0KXtyZXR1cm4gaXNGaW5pdGUodD0rdCkmJjAhPXQ/dDwwPy1yKC10KTpNYXRoLmxvZyh0K01hdGguc3FydCh0KnQrMSkpOnR9dmFyIGk9ZSgxKSxvPU1hdGguYXNpbmg7aShpLlMraS5GKiEobyYmMS9vKDApPjApLFwiTWF0aFwiLHthc2luaDpyfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9TWF0aC5hdGFuaDtyKHIuUytyLkYqIShpJiYxL2koLTApPDApLFwiTWF0aFwiLHthdGFuaDpmdW5jdGlvbih0KXtyZXR1cm4gMD09KHQ9K3QpP3Q6TWF0aC5sb2coKDErdCkvKDEtdCkpLzJ9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg1Nyk7cihyLlMsXCJNYXRoXCIse2NicnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGkodD0rdCkqTWF0aC5wb3coTWF0aC5hYnModCksMS8zKX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJNYXRoXCIse2NsejMyOmZ1bmN0aW9uKHQpe3JldHVybih0Pj4+PTApPzMxLU1hdGguZmxvb3IoTWF0aC5sb2codCsuNSkqTWF0aC5MT0cyRSk6MzJ9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9TWF0aC5leHA7cihyLlMsXCJNYXRoXCIse2Nvc2g6ZnVuY3Rpb24odCl7cmV0dXJuKGkodD0rdCkraSgtdCkpLzJ9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg1Nik7cihyLlMrci5GKihpIT1NYXRoLmV4cG0xKSxcIk1hdGhcIix7ZXhwbTE6aX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk1hdGhcIix7ZnJvdW5kOmUoOTcpfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9TWF0aC5hYnM7cihyLlMsXCJNYXRoXCIse2h5cG90OmZ1bmN0aW9uKHQsbil7Zm9yKHZhciBlLHIsbz0wLGM9MCxzPWFyZ3VtZW50cy5sZW5ndGgsdT0wO2M8czspZT1pKGFyZ3VtZW50c1tjKytdKSx1PGU/KHI9dS9lLG89bypyKnIrMSx1PWUpOmU+MD8ocj1lL3Usbys9cipyKTpvKz1lO3JldHVybiB1PT09MS8wPzEvMDp1Kk1hdGguc3FydChvKX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1NYXRoLmltdWw7cihyLlMrci5GKmUoNikoZnVuY3Rpb24oKXtyZXR1cm4gaSg0Mjk0OTY3Mjk1LDUpIT0tNXx8MiE9aS5sZW5ndGh9KSxcIk1hdGhcIix7aW11bDpmdW5jdGlvbih0LG4pe3ZhciBlPTY1NTM1LHI9K3QsaT0rbixvPWUmcixjPWUmaTtyZXR1cm4gMHxvKmMrKChlJnI+Pj4xNikqYytvKihlJmk+Pj4xNik8PDE2Pj4+MCl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTWF0aFwiLHtsb2cxMDpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5sb2codCkqTWF0aC5MT0cxMEV9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTWF0aFwiLHtsb2cxcDplKDc5KX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk1hdGhcIix7bG9nMjpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5sb2codCkvTWF0aC5MTjJ9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTWF0aFwiLHtzaWduOmUoNTcpfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg1Niksbz1NYXRoLmV4cDtyKHIuUytyLkYqZSg2KShmdW5jdGlvbigpe3JldHVybiFNYXRoLnNpbmgoLTJlLTE3KSE9LTJlLTE3fSksXCJNYXRoXCIse3Npbmg6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguYWJzKHQ9K3QpPDE/KGkodCktaSgtdCkpLzI6KG8odC0xKS1vKC10LTEpKSooTWF0aC5FLzIpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoNTYpLG89TWF0aC5leHA7cihyLlMsXCJNYXRoXCIse3Rhbmg6ZnVuY3Rpb24odCl7dmFyIG49aSh0PSt0KSxlPWkoLXQpO3JldHVybiBuPT0xLzA/MTplPT0xLzA/LTE6KG4tZSkvKG8odCkrbygtdCkpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk1hdGhcIix7dHJ1bmM6ZnVuY3Rpb24odCl7cmV0dXJuKHQ+MD9NYXRoLmZsb29yOk1hdGguY2VpbCkodCl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTnVtYmVyXCIse0VQU0lMT046TWF0aC5wb3coMiwtNTIpfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgzKS5pc0Zpbml0ZTtyKHIuUyxcIk51bWJlclwiLHtpc0Zpbml0ZTpmdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmaSh0KX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJOdW1iZXJcIix7aXNJbnRlZ2VyOmUoNzQpfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTnVtYmVyXCIse2lzTmFOOmZ1bmN0aW9uKHQpe3JldHVybiB0IT10fX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoNzQpLG89TWF0aC5hYnM7cihyLlMsXCJOdW1iZXJcIix7aXNTYWZlSW50ZWdlcjpmdW5jdGlvbih0KXtyZXR1cm4gaSh0KSYmbyh0KTw9OTAwNzE5OTI1NDc0MDk5MX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJOdW1iZXJcIix7TUFYX1NBRkVfSU5URUdFUjo5MDA3MTk5MjU0NzQwOTkxfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTnVtYmVyXCIse01JTl9TQUZFX0lOVEVHRVI6LTkwMDcxOTkyNTQ3NDA5OTF9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMrci5GLFwiT2JqZWN0XCIse2Fzc2lnbjplKDgxKX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk9iamVjdFwiLHtpczplKDEwMyl9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJPYmplY3RcIix7c2V0UHJvdG90eXBlT2Y6ZSg1OCkuc2V0fSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcixpLG8sYyxzPWUoMjcpLHU9ZSgzKSxhPWUoMTIpLGY9ZSg0OSksbD1lKDEpLGg9ZSg0KSx2PWUoMTcpLHA9ZSgyNCksZD1lKDQzKSx5PWUoNjEpLGc9ZSg2Mykuc2V0LG09ZSg5OCkoKSxiPWUoODApLF89ZSgxMDEpLHc9ZSgxMDIpLFM9XCJQcm9taXNlXCIseD11LlR5cGVFcnJvcixFPXUucHJvY2VzcyxPPXVbU10sTT1cInByb2Nlc3NcIj09ZihFKSxBPWZ1bmN0aW9uKCl7fSxMPWk9Yi5mLGo9ISFmdW5jdGlvbigpe3RyeXt2YXIgdD1PLnJlc29sdmUoMSksbj0odC5jb25zdHJ1Y3Rvcj17fSlbZSg1KShcInNwZWNpZXNcIildPWZ1bmN0aW9uKHQpe3QoQSxBKX07cmV0dXJuKE18fFwiZnVuY3Rpb25cIj09dHlwZW9mIFByb21pc2VSZWplY3Rpb25FdmVudCkmJnQudGhlbihBKWluc3RhbmNlb2Ygbn1jYXRjaCh0KXt9fSgpLGs9ZnVuY3Rpb24odCl7dmFyIG47cmV0dXJuISghaCh0KXx8XCJmdW5jdGlvblwiIT10eXBlb2Yobj10LnRoZW4pKSYmbn0sVD1mdW5jdGlvbih0LG4pe2lmKCF0Ll9uKXt0Ll9uPSEwO3ZhciBlPXQuX2M7bShmdW5jdGlvbigpe2Zvcih2YXIgcj10Ll92LGk9MT09dC5fcyxvPTAsYz1mdW5jdGlvbihuKXt2YXIgZSxvLGM9aT9uLm9rOm4uZmFpbCxzPW4ucmVzb2x2ZSx1PW4ucmVqZWN0LGE9bi5kb21haW47dHJ5e2M/KGl8fCgyPT10Ll9oJiZOKHQpLHQuX2g9MSksYz09PSEwP2U9cjooYSYmYS5lbnRlcigpLGU9YyhyKSxhJiZhLmV4aXQoKSksZT09PW4ucHJvbWlzZT91KHgoXCJQcm9taXNlLWNoYWluIGN5Y2xlXCIpKToobz1rKGUpKT9vLmNhbGwoZSxzLHUpOnMoZSkpOnUocil9Y2F0Y2godCl7dSh0KX19O2UubGVuZ3RoPm87KWMoZVtvKytdKTt0Ll9jPVtdLHQuX249ITEsbiYmIXQuX2gmJlAodCl9KX19LFA9ZnVuY3Rpb24odCl7Zy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgbixlLHIsaT10Ll92LG89Rih0KTtpZihvJiYobj1fKGZ1bmN0aW9uKCl7TT9FLmVtaXQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIixpLHQpOihlPXUub251bmhhbmRsZWRyZWplY3Rpb24pP2Uoe3Byb21pc2U6dCxyZWFzb246aX0pOihyPXUuY29uc29sZSkmJnIuZXJyb3ImJnIuZXJyb3IoXCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25cIixpKX0pLHQuX2g9TXx8Rih0KT8yOjEpLHQuX2E9dm9pZCAwLG8mJm4uZSl0aHJvdyBuLnZ9KX0sRj1mdW5jdGlvbih0KXtpZigxPT10Ll9oKXJldHVybiExO2Zvcih2YXIgbixlPXQuX2F8fHQuX2Mscj0wO2UubGVuZ3RoPnI7KWlmKG49ZVtyKytdLG4uZmFpbHx8IUYobi5wcm9taXNlKSlyZXR1cm4hMTtyZXR1cm4hMH0sTj1mdW5jdGlvbih0KXtnLmNhbGwodSxmdW5jdGlvbigpe3ZhciBuO00/RS5lbWl0KFwicmVqZWN0aW9uSGFuZGxlZFwiLHQpOihuPXUub25yZWplY3Rpb25oYW5kbGVkKSYmbih7cHJvbWlzZTp0LHJlYXNvbjp0Ll92fSl9KX0sQz1mdW5jdGlvbih0KXt2YXIgbj10aGlzO24uX2R8fChuLl9kPSEwLG49bi5fd3x8bixuLl92PXQsbi5fcz0yLG4uX2F8fChuLl9hPW4uX2Muc2xpY2UoKSksVChuLCEwKSl9LFI9ZnVuY3Rpb24odCl7dmFyIG4sZT10aGlzO2lmKCFlLl9kKXtlLl9kPSEwLGU9ZS5fd3x8ZTt0cnl7aWYoZT09PXQpdGhyb3cgeChcIlByb21pc2UgY2FuJ3QgYmUgcmVzb2x2ZWQgaXRzZWxmXCIpOyhuPWsodCkpP20oZnVuY3Rpb24oKXt2YXIgcj17X3c6ZSxfZDohMX07dHJ5e24uY2FsbCh0LGEoUixyLDEpLGEoQyxyLDEpKX1jYXRjaCh0KXtDLmNhbGwocix0KX19KTooZS5fdj10LGUuX3M9MSxUKGUsITEpKX1jYXRjaCh0KXtDLmNhbGwoe193OmUsX2Q6ITF9LHQpfX19O2p8fChPPWZ1bmN0aW9uKHQpe3AodGhpcyxPLFMsXCJfaFwiKSx2KHQpLHIuY2FsbCh0aGlzKTt0cnl7dChhKFIsdGhpcywxKSxhKEMsdGhpcywxKSl9Y2F0Y2godCl7Qy5jYWxsKHRoaXMsdCl9fSxyPWZ1bmN0aW9uKHQpe3RoaXMuX2M9W10sdGhpcy5fYT12b2lkIDAsdGhpcy5fcz0wLHRoaXMuX2Q9ITEsdGhpcy5fdj12b2lkIDAsdGhpcy5faD0wLHRoaXMuX249ITF9LHIucHJvdG90eXBlPWUoMjkpKE8ucHJvdG90eXBlLHt0aGVuOmZ1bmN0aW9uKHQsbil7dmFyIGU9TCh5KHRoaXMsTykpO3JldHVybiBlLm9rPVwiZnVuY3Rpb25cIiE9dHlwZW9mIHR8fHQsZS5mYWlsPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJm4sZS5kb21haW49TT9FLmRvbWFpbjp2b2lkIDAsdGhpcy5fYy5wdXNoKGUpLHRoaXMuX2EmJnRoaXMuX2EucHVzaChlKSx0aGlzLl9zJiZUKHRoaXMsITEpLGUucHJvbWlzZX0sY2F0Y2g6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudGhlbih2b2lkIDAsdCl9fSksbz1mdW5jdGlvbigpe3ZhciB0PW5ldyByO3RoaXMucHJvbWlzZT10LHRoaXMucmVzb2x2ZT1hKFIsdCwxKSx0aGlzLnJlamVjdD1hKEMsdCwxKX0sYi5mPUw9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1PfHx0PT09Yz9uZXcgbyh0KTppKHQpfSksbChsLkcrbC5XK2wuRiohaix7UHJvbWlzZTpPfSksZSgzMCkoTyxTKSxlKDQ2KShTKSxjPWUoMzQpW1NdLGwobC5TK2wuRiohaixTLHtyZWplY3Q6ZnVuY3Rpb24odCl7dmFyIG49TCh0aGlzKSxlPW4ucmVqZWN0O3JldHVybiBlKHQpLG4ucHJvbWlzZX19KSxsKGwuUytsLkYqKHN8fCFqKSxTLHtyZXNvbHZlOmZ1bmN0aW9uKHQpe3JldHVybiB3KHMmJnRoaXM9PT1jP086dGhpcyx0KX19KSxsKGwuUytsLkYqIShqJiZlKDQ0KShmdW5jdGlvbih0KXtPLmFsbCh0KS5jYXRjaChBKX0pKSxTLHthbGw6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxlPUwobikscj1lLnJlc29sdmUsaT1lLnJlamVjdCxvPV8oZnVuY3Rpb24oKXt2YXIgZT1bXSxvPTAsYz0xO2QodCwhMSxmdW5jdGlvbih0KXt2YXIgcz1vKyssdT0hMTtlLnB1c2godm9pZCAwKSxjKyssbi5yZXNvbHZlKHQpLnRoZW4oZnVuY3Rpb24odCl7dXx8KHU9ITAsZVtzXT10LC0tY3x8cihlKSl9LGkpfSksLS1jfHxyKGUpfSk7cmV0dXJuIG8uZSYmaShvLnYpLGUucHJvbWlzZX0scmFjZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGU9TChuKSxyPWUucmVqZWN0LGk9XyhmdW5jdGlvbigpe2QodCwhMSxmdW5jdGlvbih0KXtuLnJlc29sdmUodCkudGhlbihlLnJlc29sdmUscil9KX0pO3JldHVybiBpLmUmJnIoaS52KSxlLnByb21pc2V9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgxNyksbz1lKDIpLGM9KGUoMykuUmVmbGVjdHx8e30pLmFwcGx5LHM9RnVuY3Rpb24uYXBwbHk7cihyLlMrci5GKiFlKDYpKGZ1bmN0aW9uKCl7YyhmdW5jdGlvbigpe30pfSksXCJSZWZsZWN0XCIse2FwcGx5OmZ1bmN0aW9uKHQsbixlKXt2YXIgcj1pKHQpLHU9byhlKTtyZXR1cm4gYz9jKHIsbix1KTpzLmNhbGwocixuLHUpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMzYpLG89ZSgxNyksYz1lKDIpLHM9ZSg0KSx1PWUoNiksYT1lKDkyKSxmPShlKDMpLlJlZmxlY3R8fHt9KS5jb25zdHJ1Y3QsbD11KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4hKGYoZnVuY3Rpb24oKXt9LFtdLHQpaW5zdGFuY2VvZiB0KX0pLGg9IXUoZnVuY3Rpb24oKXtmKGZ1bmN0aW9uKCl7fSl9KTtyKHIuUytyLkYqKGx8fGgpLFwiUmVmbGVjdFwiLHtjb25zdHJ1Y3Q6ZnVuY3Rpb24odCxuKXtvKHQpLGMobik7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDwzP3Q6byhhcmd1bWVudHNbMl0pO2lmKGgmJiFsKXJldHVybiBmKHQsbixlKTtpZih0PT1lKXtzd2l0Y2gobi5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gbmV3IHQ7Y2FzZSAxOnJldHVybiBuZXcgdChuWzBdKTtjYXNlIDI6cmV0dXJuIG5ldyB0KG5bMF0sblsxXSk7Y2FzZSAzOnJldHVybiBuZXcgdChuWzBdLG5bMV0sblsyXSk7Y2FzZSA0OnJldHVybiBuZXcgdChuWzBdLG5bMV0sblsyXSxuWzNdKX12YXIgcj1bbnVsbF07cmV0dXJuIHIucHVzaC5hcHBseShyLG4pLG5ldyhhLmFwcGx5KHQscikpfXZhciB1PWUucHJvdG90eXBlLHY9aShzKHUpP3U6T2JqZWN0LnByb3RvdHlwZSkscD1GdW5jdGlvbi5hcHBseS5jYWxsKHQsdixuKTtyZXR1cm4gcyhwKT9wOnZ9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDcpLGk9ZSgxKSxvPWUoMiksYz1lKDQwKTtpKGkuUytpLkYqZSg2KShmdW5jdGlvbigpe1JlZmxlY3QuZGVmaW5lUHJvcGVydHkoci5mKHt9LDEse3ZhbHVlOjF9KSwxLHt2YWx1ZToyfSl9KSxcIlJlZmxlY3RcIix7ZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24odCxuLGUpe28odCksbj1jKG4sITApLG8oZSk7dHJ5e3JldHVybiByLmYodCxuLGUpLCEwfWNhdGNoKHQpe3JldHVybiExfX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDE1KS5mLG89ZSgyKTtyKHIuUyxcIlJlZmxlY3RcIix7ZGVsZXRlUHJvcGVydHk6ZnVuY3Rpb24odCxuKXt2YXIgZT1pKG8odCksbik7cmV0dXJuIShlJiYhZS5jb25maWd1cmFibGUpJiZkZWxldGUgdFtuXX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTUpLGk9ZSgxKSxvPWUoMik7aShpLlMsXCJSZWZsZWN0XCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcjpmdW5jdGlvbih0LG4pe3JldHVybiByLmYobyh0KSxuKX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDM4KSxvPWUoMik7cihyLlMsXCJSZWZsZWN0XCIse2dldFByb3RvdHlwZU9mOmZ1bmN0aW9uKHQpe3JldHVybiBpKG8odCkpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZnVuY3Rpb24gcih0LG4pe3ZhciBlLHMsZj1hcmd1bWVudHMubGVuZ3RoPDM/dDphcmd1bWVudHNbMl07cmV0dXJuIGEodCk9PT1mP3Rbbl06KGU9aS5mKHQsbikpP2MoZSxcInZhbHVlXCIpP2UudmFsdWU6dm9pZCAwIT09ZS5nZXQ/ZS5nZXQuY2FsbChmKTp2b2lkIDA6dShzPW8odCkpP3IocyxuLGYpOnZvaWQgMH12YXIgaT1lKDE1KSxvPWUoMzgpLGM9ZSgxMCkscz1lKDEpLHU9ZSg0KSxhPWUoMik7cyhzLlMsXCJSZWZsZWN0XCIse2dldDpyfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiUmVmbGVjdFwiLHtoYXM6ZnVuY3Rpb24odCxuKXtyZXR1cm4gbiBpbiB0fX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMiksbz1PYmplY3QuaXNFeHRlbnNpYmxlO3Ioci5TLFwiUmVmbGVjdFwiLHtpc0V4dGVuc2libGU6ZnVuY3Rpb24odCl7cmV0dXJuIGkodCksIW98fG8odCl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiUmVmbGVjdFwiLHtvd25LZXlzOmUoODQpfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgyKSxvPU9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucztyKHIuUyxcIlJlZmxlY3RcIix7cHJldmVudEV4dGVuc2lvbnM6ZnVuY3Rpb24odCl7aSh0KTt0cnl7cmV0dXJuIG8mJm8odCksITB9Y2F0Y2godCl7cmV0dXJuITF9fX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoNTgpO2kmJnIoci5TLFwiUmVmbGVjdFwiLHtzZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0LG4pe2kuY2hlY2sodCxuKTt0cnl7cmV0dXJuIGkuc2V0KHQsbiksITB9Y2F0Y2godCl7cmV0dXJuITF9fX0pfSxmdW5jdGlvbih0LG4sZSl7ZnVuY3Rpb24gcih0LG4sZSl7dmFyIHUsaCx2PWFyZ3VtZW50cy5sZW5ndGg8ND90OmFyZ3VtZW50c1szXSxwPW8uZihmKHQpLG4pO2lmKCFwKXtpZihsKGg9Yyh0KSkpcmV0dXJuIHIoaCxuLGUsdik7cD1hKDApfXJldHVybiBzKHAsXCJ2YWx1ZVwiKT8hKHAud3JpdGFibGU9PT0hMXx8IWwodikpJiYodT1vLmYodixuKXx8YSgwKSx1LnZhbHVlPWUsaS5mKHYsbix1KSwhMCk6dm9pZCAwIT09cC5zZXQmJihwLnNldC5jYWxsKHYsZSksITApfXZhciBpPWUoNyksbz1lKDE1KSxjPWUoMzgpLHM9ZSgxMCksdT1lKDEpLGE9ZSgxOSksZj1lKDIpLGw9ZSg0KTt1KHUuUyxcIlJlZmxlY3RcIix7c2V0OnJ9KX0sZnVuY3Rpb24odCxuLGUpe2UoOSkmJlwiZ1wiIT0vLi9nLmZsYWdzJiZlKDcpLmYoUmVnRXhwLnByb3RvdHlwZSxcImZsYWdzXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZSg5NCl9KX0sZnVuY3Rpb24odCxuLGUpe2UoNDIpKFwibWF0Y2hcIiwxLGZ1bmN0aW9uKHQsbixlKXtyZXR1cm5bZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dCh0aGlzKSxpPXZvaWQgMD09ZT92b2lkIDA6ZVtuXTtyZXR1cm4gdm9pZCAwIT09aT9pLmNhbGwoZSxyKTpuZXcgUmVnRXhwKGUpW25dKFN0cmluZyhyKSl9LGVdfSl9LGZ1bmN0aW9uKHQsbixlKXtlKDQyKShcInJlcGxhY2VcIiwyLGZ1bmN0aW9uKHQsbixlKXtyZXR1cm5bZnVuY3Rpb24ocixpKXtcInVzZSBzdHJpY3RcIjt2YXIgbz10KHRoaXMpLGM9dm9pZCAwPT1yP3ZvaWQgMDpyW25dO3JldHVybiB2b2lkIDAhPT1jP2MuY2FsbChyLG8saSk6ZS5jYWxsKFN0cmluZyhvKSxyLGkpfSxlXX0pfSxmdW5jdGlvbih0LG4sZSl7ZSg0MikoXCJzZWFyY2hcIiwxLGZ1bmN0aW9uKHQsbixlKXtyZXR1cm5bZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9dCh0aGlzKSxpPXZvaWQgMD09ZT92b2lkIDA6ZVtuXTtyZXR1cm4gdm9pZCAwIT09aT9pLmNhbGwoZSxyKTpuZXcgUmVnRXhwKGUpW25dKFN0cmluZyhyKSl9LGVdfSl9LGZ1bmN0aW9uKHQsbixlKXtlKDQyKShcInNwbGl0XCIsMixmdW5jdGlvbih0LG4scil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9ZSg3NSksbz1yLGM9W10ucHVzaCxzPVwic3BsaXRcIix1PVwibGVuZ3RoXCIsYT1cImxhc3RJbmRleFwiO2lmKFwiY1wiPT1cImFiYmNcIltzXSgvKGIpKi8pWzFdfHw0IT1cInRlc3RcIltzXSgvKD86KS8sLTEpW3VdfHwyIT1cImFiXCJbc10oLyg/OmFiKSovKVt1XXx8NCE9XCIuXCJbc10oLyguPykoLj8pLylbdV18fFwiLlwiW3NdKC8oKSgpLylbdV0+MXx8XCJcIltzXSgvLj8vKVt1XSl7dmFyIGY9dm9pZCAwPT09LygpPz8vLmV4ZWMoXCJcIilbMV07cj1mdW5jdGlvbih0LG4pe3ZhciBlPVN0cmluZyh0aGlzKTtpZih2b2lkIDA9PT10JiYwPT09bilyZXR1cm5bXTtpZighaSh0KSlyZXR1cm4gby5jYWxsKGUsdCxuKTt2YXIgcixzLGwsaCx2LHA9W10sZD0odC5pZ25vcmVDYXNlP1wiaVwiOlwiXCIpKyh0Lm11bHRpbGluZT9cIm1cIjpcIlwiKSsodC51bmljb2RlP1widVwiOlwiXCIpKyh0LnN0aWNreT9cInlcIjpcIlwiKSx5PTAsZz12b2lkIDA9PT1uPzQyOTQ5NjcyOTU6bj4+PjAsbT1uZXcgUmVnRXhwKHQuc291cmNlLGQrXCJnXCIpO2ZvcihmfHwocj1uZXcgUmVnRXhwKFwiXlwiK20uc291cmNlK1wiJCg/IVxcXFxzKVwiLGQpKTsocz1tLmV4ZWMoZSkpJiYobD1zLmluZGV4K3NbMF1bdV0sIShsPnkmJihwLnB1c2goZS5zbGljZSh5LHMuaW5kZXgpKSwhZiYmc1t1XT4xJiZzWzBdLnJlcGxhY2UocixmdW5jdGlvbigpe2Zvcih2PTE7djxhcmd1bWVudHNbdV0tMjt2Kyspdm9pZCAwPT09YXJndW1lbnRzW3ZdJiYoc1t2XT12b2lkIDApfSksc1t1XT4xJiZzLmluZGV4PGVbdV0mJmMuYXBwbHkocCxzLnNsaWNlKDEpKSxoPXNbMF1bdV0seT1sLHBbdV0+PWcpKSk7KW1bYV09PT1zLmluZGV4JiZtW2FdKys7cmV0dXJuIHk9PT1lW3VdPyFoJiZtLnRlc3QoXCJcIil8fHAucHVzaChcIlwiKTpwLnB1c2goZS5zbGljZSh5KSkscFt1XT5nP3Auc2xpY2UoMCxnKTpwfX1lbHNlXCIwXCJbc10odm9pZCAwLDApW3VdJiYocj1mdW5jdGlvbih0LG4pe3JldHVybiB2b2lkIDA9PT10JiYwPT09bj9bXTpvLmNhbGwodGhpcyx0LG4pfSk7cmV0dXJuW2Z1bmN0aW9uKGUsaSl7dmFyIG89dCh0aGlzKSxjPXZvaWQgMD09ZT92b2lkIDA6ZVtuXTtyZXR1cm4gdm9pZCAwIT09Yz9jLmNhbGwoZSxvLGkpOnIuY2FsbChTdHJpbmcobyksZSxpKX0scl19KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoNjgpLGk9ZSgzMiksbz1cIlNldFwiO3QuZXhwb3J0cz1lKDQxKShvLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2FkZDpmdW5jdGlvbih0KXtyZXR1cm4gci5kZWYoaSh0aGlzLG8pLHQ9MD09PXQ/MDp0LHQpfX0scil9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSgxMDQpKCExKTtyKHIuUCxcIlN0cmluZ1wiLHtjb2RlUG9pbnRBdDpmdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLHQpfX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoOCksbz1lKDYyKSxjPVwiZW5kc1dpdGhcIixzPVwiXCJbY107cihyLlArci5GKmUoNTMpKGMpLFwiU3RyaW5nXCIse2VuZHNXaXRoOmZ1bmN0aW9uKHQpe3ZhciBuPW8odGhpcyx0LGMpLGU9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAscj1pKG4ubGVuZ3RoKSx1PXZvaWQgMD09PWU/cjpNYXRoLm1pbihpKGUpLHIpLGE9U3RyaW5nKHQpO3JldHVybiBzP3MuY2FsbChuLGEsdSk6bi5zbGljZSh1LWEubGVuZ3RoLHUpPT09YX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDMxKSxvPVN0cmluZy5mcm9tQ2hhckNvZGUsYz1TdHJpbmcuZnJvbUNvZGVQb2ludDtyKHIuUytyLkYqKCEhYyYmMSE9Yy5sZW5ndGgpLFwiU3RyaW5nXCIse2Zyb21Db2RlUG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBuLGU9W10scj1hcmd1bWVudHMubGVuZ3RoLGM9MDtyPmM7KXtpZihuPSthcmd1bWVudHNbYysrXSxpKG4sMTExNDExMSkhPT1uKXRocm93IFJhbmdlRXJyb3IobitcIiBpcyBub3QgYSB2YWxpZCBjb2RlIHBvaW50XCIpO2UucHVzaChuPDY1NTM2P28obik6bygoKG4tPTY1NTM2KT4+MTApKzU1Mjk2LG4lMTAyNCs1NjMyMCkpfXJldHVybiBlLmpvaW4oXCJcIil9fSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSg2Miksbz1cImluY2x1ZGVzXCI7cihyLlArci5GKmUoNTMpKG8pLFwiU3RyaW5nXCIse2luY2x1ZGVzOmZ1bmN0aW9uKHQpe3JldHVybiEhfmkodGhpcyx0LG8pLmluZGV4T2YodCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgxMyksbz1lKDgpO3Ioci5TLFwiU3RyaW5nXCIse3JhdzpmdW5jdGlvbih0KXtmb3IodmFyIG49aSh0LnJhdyksZT1vKG4ubGVuZ3RoKSxyPWFyZ3VtZW50cy5sZW5ndGgsYz1bXSxzPTA7ZT5zOyljLnB1c2goU3RyaW5nKG5bcysrXSkpLHM8ciYmYy5wdXNoKFN0cmluZyhhcmd1bWVudHNbc10pKTtyZXR1cm4gYy5qb2luKFwiXCIpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUCxcIlN0cmluZ1wiLHtyZXBlYXQ6ZSg4Nil9KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDgpLG89ZSg2MiksYz1cInN0YXJ0c1dpdGhcIixzPVwiXCJbY107cihyLlArci5GKmUoNTMpKGMpLFwiU3RyaW5nXCIse3N0YXJ0c1dpdGg6ZnVuY3Rpb24odCl7dmFyIG49byh0aGlzLHQsYyksZT1pKE1hdGgubWluKGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLG4ubGVuZ3RoKSkscj1TdHJpbmcodCk7cmV0dXJuIHM/cy5jYWxsKG4scixlKTpuLnNsaWNlKGUsZStyLmxlbmd0aCk9PT1yfX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgzKSxpPWUoMTApLG89ZSg5KSxjPWUoMSkscz1lKDE2KSx1PWUoMzUpLktFWSxhPWUoNiksZj1lKDYwKSxsPWUoMzApLGg9ZSgyMiksdj1lKDUpLHA9ZSg4OSksZD1lKDEwNSkseT1lKDkzKSxnPWUoNzMpLG09ZSgyKSxiPWUoMTMpLF89ZSg0MCksdz1lKDE5KSxTPWUoMzYpLHg9ZSgxMDApLEU9ZSgxNSksTz1lKDcpLE09ZSgyOCksQT1FLmYsTD1PLmYsaj14LmYsaz1yLlN5bWJvbCxUPXIuSlNPTixQPVQmJlQuc3RyaW5naWZ5LEY9XCJwcm90b3R5cGVcIixOPXYoXCJfaGlkZGVuXCIpLEM9dihcInRvUHJpbWl0aXZlXCIpLFI9e30ucHJvcGVydHlJc0VudW1lcmFibGUsRD1mKFwic3ltYm9sLXJlZ2lzdHJ5XCIpLEk9ZihcInN5bWJvbHNcIiksVz1mKFwib3Atc3ltYm9sc1wiKSx6PU9iamVjdFtGXSxCPVwiZnVuY3Rpb25cIj09dHlwZW9mIGssWT1yLlFPYmplY3QsWD0hWXx8IVlbRl18fCFZW0ZdLmZpbmRDaGlsZCxHPW8mJmEoZnVuY3Rpb24oKXtyZXR1cm4gNyE9UyhMKHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTCh0aGlzLFwiYVwiLHt2YWx1ZTo3fSkuYX19KSkuYX0pP2Z1bmN0aW9uKHQsbixlKXt2YXIgcj1BKHosbik7ciYmZGVsZXRlIHpbbl0sTCh0LG4sZSksciYmdCE9PXomJkwoeixuLHIpfTpMLFY9ZnVuY3Rpb24odCl7dmFyIG49SVt0XT1TKGtbRl0pO3JldHVybiBuLl9rPXQsbn0sVT1CJiZcInN5bWJvbFwiPT10eXBlb2Ygay5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBrfSxxPWZ1bmN0aW9uKHQsbixlKXtyZXR1cm4gdD09PXomJnEoVyxuLGUpLG0odCksbj1fKG4sITApLG0oZSksaShJLG4pPyhlLmVudW1lcmFibGU/KGkodCxOKSYmdFtOXVtuXSYmKHRbTl1bbl09ITEpLGU9UyhlLHtlbnVtZXJhYmxlOncoMCwhMSl9KSk6KGkodCxOKXx8TCh0LE4sdygxLHt9KSksdFtOXVtuXT0hMCksRyh0LG4sZSkpOkwodCxuLGUpfSxIPWZ1bmN0aW9uKHQsbil7bSh0KTtmb3IodmFyIGUscj15KG49YihuKSksaT0wLG89ci5sZW5ndGg7bz5pOylxKHQsZT1yW2krK10sbltlXSk7cmV0dXJuIHR9LEs9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdm9pZCAwPT09bj9TKHQpOkgoUyh0KSxuKX0sSj1mdW5jdGlvbih0KXt2YXIgbj1SLmNhbGwodGhpcyx0PV8odCwhMCkpO3JldHVybiEodGhpcz09PXomJmkoSSx0KSYmIWkoVyx0KSkmJighKG58fCFpKHRoaXMsdCl8fCFpKEksdCl8fGkodGhpcyxOKSYmdGhpc1tOXVt0XSl8fG4pfSwkPWZ1bmN0aW9uKHQsbil7aWYodD1iKHQpLG49XyhuLCEwKSx0IT09enx8IWkoSSxuKXx8aShXLG4pKXt2YXIgZT1BKHQsbik7cmV0dXJuIWV8fCFpKEksbil8fGkodCxOKSYmdFtOXVtuXXx8KGUuZW51bWVyYWJsZT0hMCksZX19LFE9ZnVuY3Rpb24odCl7Zm9yKHZhciBuLGU9aihiKHQpKSxyPVtdLG89MDtlLmxlbmd0aD5vOylpKEksbj1lW28rK10pfHxuPT1OfHxuPT11fHxyLnB1c2gobik7cmV0dXJuIHJ9LFo9ZnVuY3Rpb24odCl7Zm9yKHZhciBuLGU9dD09PXoscj1qKGU/VzpiKHQpKSxvPVtdLGM9MDtyLmxlbmd0aD5jOykhaShJLG49cltjKytdKXx8ZSYmIWkoeixuKXx8by5wdXNoKElbbl0pO3JldHVybiBvfTtCfHwoaz1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBrKXRocm93IFR5cGVFcnJvcihcIlN5bWJvbCBpcyBub3QgYSBjb25zdHJ1Y3RvciFcIik7dmFyIHQ9aChhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCksbj1mdW5jdGlvbihlKXt0aGlzPT09eiYmbi5jYWxsKFcsZSksaSh0aGlzLE4pJiZpKHRoaXNbTl0sdCkmJih0aGlzW05dW3RdPSExKSxHKHRoaXMsdCx3KDEsZSkpfTtyZXR1cm4gbyYmWCYmRyh6LHQse2NvbmZpZ3VyYWJsZTohMCxzZXQ6bn0pLFYodCl9LHMoa1tGXSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa30pLEUuZj0kLE8uZj1xLGUoMzcpLmY9eC5mPVEsZSgzOSkuZj1KLGUoNDUpLmY9WixvJiYhZSgyNykmJnMoeixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsSiwhMCkscC5mPWZ1bmN0aW9uKHQpe3JldHVybiBWKHYodCkpfSksYyhjLkcrYy5XK2MuRiohQix7U3ltYm9sOmt9KTtmb3IodmFyIHR0PVwiaGFzSW5zdGFuY2UsaXNDb25jYXRTcHJlYWRhYmxlLGl0ZXJhdG9yLG1hdGNoLHJlcGxhY2Usc2VhcmNoLHNwZWNpZXMsc3BsaXQsdG9QcmltaXRpdmUsdG9TdHJpbmdUYWcsdW5zY29wYWJsZXNcIi5zcGxpdChcIixcIiksbnQ9MDt0dC5sZW5ndGg+bnQ7KXYodHRbbnQrK10pO2Zvcih2YXIgZXQ9TSh2LnN0b3JlKSxydD0wO2V0Lmxlbmd0aD5ydDspZChldFtydCsrXSk7YyhjLlMrYy5GKiFCLFwiU3ltYm9sXCIse2ZvcjpmdW5jdGlvbih0KXtyZXR1cm4gaShELHQrPVwiXCIpP0RbdF06RFt0XT1rKHQpfSxrZXlGb3I6ZnVuY3Rpb24odCl7aWYoIVUodCkpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgc3ltYm9sIVwiKTtmb3IodmFyIG4gaW4gRClpZihEW25dPT09dClyZXR1cm4gbn0sdXNlU2V0dGVyOmZ1bmN0aW9uKCl7WD0hMH0sdXNlU2ltcGxlOmZ1bmN0aW9uKCl7WD0hMX19KSxjKGMuUytjLkYqIUIsXCJPYmplY3RcIix7Y3JlYXRlOkssZGVmaW5lUHJvcGVydHk6cSxkZWZpbmVQcm9wZXJ0aWVzOkgsZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiQsZ2V0T3duUHJvcGVydHlOYW1lczpRLGdldE93blByb3BlcnR5U3ltYm9sczpafSksVCYmYyhjLlMrYy5GKighQnx8YShmdW5jdGlvbigpe3ZhciB0PWsoKTtyZXR1cm5cIltudWxsXVwiIT1QKFt0XSl8fFwie31cIiE9UCh7YTp0fSl8fFwie31cIiE9UChPYmplY3QodCkpfSkpLFwiSlNPTlwiLHtzdHJpbmdpZnk6ZnVuY3Rpb24odCl7aWYodm9pZCAwIT09dCYmIVUodCkpe2Zvcih2YXIgbixlLHI9W3RdLGk9MTthcmd1bWVudHMubGVuZ3RoPmk7KXIucHVzaChhcmd1bWVudHNbaSsrXSk7cmV0dXJuIG49clsxXSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYoZT1uKSwhZSYmZyhuKXx8KG49ZnVuY3Rpb24odCxuKXtpZihlJiYobj1lLmNhbGwodGhpcyx0LG4pKSwhVShuKSlyZXR1cm4gbn0pLHJbMV09bixQLmFwcGx5KFQscil9fX0pLGtbRl1bQ118fGUoMTEpKGtbRl0sQyxrW0ZdLnZhbHVlT2YpLGwoayxcIlN5bWJvbFwiKSxsKE1hdGgsXCJNYXRoXCIsITApLGwoci5KU09OLFwiSlNPTlwiLCEwKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDY0KSxvPWUoODgpLGM9ZSgyKSxzPWUoMzEpLHU9ZSg4KSxhPWUoNCksZj1lKDMpLkFycmF5QnVmZmVyLGw9ZSg2MSksaD1vLkFycmF5QnVmZmVyLHY9by5EYXRhVmlldyxwPWkuQUJWJiZmLmlzVmlldyxkPWgucHJvdG90eXBlLnNsaWNlLHk9aS5WSUVXLGc9XCJBcnJheUJ1ZmZlclwiO3Ioci5HK3IuVytyLkYqKGYhPT1oKSx7QXJyYXlCdWZmZXI6aH0pLHIoci5TK3IuRiohaS5DT05TVFIsZyx7aXNWaWV3OmZ1bmN0aW9uKHQpe3JldHVybiBwJiZwKHQpfHxhKHQpJiZ5IGluIHR9fSkscihyLlArci5VK3IuRiplKDYpKGZ1bmN0aW9uKCl7cmV0dXJuIW5ldyBoKDIpLnNsaWNlKDEsdm9pZCAwKS5ieXRlTGVuZ3RofSksZyx7c2xpY2U6ZnVuY3Rpb24odCxuKXtpZih2b2lkIDAhPT1kJiZ2b2lkIDA9PT1uKXJldHVybiBkLmNhbGwoYyh0aGlzKSx0KTtmb3IodmFyIGU9Yyh0aGlzKS5ieXRlTGVuZ3RoLHI9cyh0LGUpLGk9cyh2b2lkIDA9PT1uP2U6bixlKSxvPW5ldyhsKHRoaXMsaCkpKHUoaS1yKSksYT1uZXcgdih0aGlzKSxmPW5ldyB2KG8pLHA9MDtyPGk7KWYuc2V0VWludDgocCsrLGEuZ2V0VWludDgocisrKSk7cmV0dXJuIG99fSksZSg0NikoZyl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIkZsb2F0MzJcIiw0LGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIkZsb2F0NjRcIiw4LGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIkludDE2XCIsMixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJJbnQzMlwiLDQsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19KX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiSW50OFwiLDEsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19KX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiVWludDE2XCIsMixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJVaW50MzJcIiw0LGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIlVpbnQ4XCIsMSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJVaW50OFwiLDEsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19LCEwKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByLGk9ZSgzMykoMCksbz1lKDE2KSxjPWUoMzUpLHM9ZSg4MSksdT1lKDY5KSxhPWUoNCksZj1lKDYpLGw9ZSgzMiksaD1cIldlYWtNYXBcIix2PWMuZ2V0V2VhayxwPU9iamVjdC5pc0V4dGVuc2libGUsZD11LnVmc3RvcmUseT17fSxnPWZ1bmN0aW9uKHQpe1xyXG5yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LG09e2dldDpmdW5jdGlvbih0KXtpZihhKHQpKXt2YXIgbj12KHQpO3JldHVybiBuPT09ITA/ZChsKHRoaXMsaCkpLmdldCh0KTpuP25bdGhpcy5faV06dm9pZCAwfX0sc2V0OmZ1bmN0aW9uKHQsbil7cmV0dXJuIHUuZGVmKGwodGhpcyxoKSx0LG4pfX0sYj10LmV4cG9ydHM9ZSg0MSkoaCxnLG0sdSwhMCwhMCk7ZihmdW5jdGlvbigpe3JldHVybiA3IT0obmV3IGIpLnNldCgoT2JqZWN0LmZyZWV6ZXx8T2JqZWN0KSh5KSw3KS5nZXQoeSl9KSYmKHI9dS5nZXRDb25zdHJ1Y3RvcihnLGgpLHMoci5wcm90b3R5cGUsbSksYy5ORUVEPSEwLGkoW1wiZGVsZXRlXCIsXCJoYXNcIixcImdldFwiLFwic2V0XCJdLGZ1bmN0aW9uKHQpe3ZhciBuPWIucHJvdG90eXBlLGU9blt0XTtvKG4sdCxmdW5jdGlvbihuLGkpe2lmKGEobikmJiFwKG4pKXt0aGlzLl9mfHwodGhpcy5fZj1uZXcgcik7dmFyIG89dGhpcy5fZlt0XShuLGkpO3JldHVyblwic2V0XCI9PXQ/dGhpczpvfXJldHVybiBlLmNhbGwodGhpcyxuLGkpfSl9KSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDY5KSxpPWUoMzIpLG89XCJXZWFrU2V0XCI7ZSg0MSkobyxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHthZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHIuZGVmKGkodGhpcyxvKSx0LCEwKX19LHIsITEsITApfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoNDgpKCEwKTtyKHIuUCxcIkFycmF5XCIse2luY2x1ZGVzOmZ1bmN0aW9uKHQpe3JldHVybiBpKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9fSksZSgyMykoXCJpbmNsdWRlc1wiKX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDgzKSghMCk7cihyLlMsXCJPYmplY3RcIix7ZW50cmllczpmdW5jdGlvbih0KXtyZXR1cm4gaSh0KX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDg0KSxvPWUoMTMpLGM9ZSgxNSkscz1lKDUwKTtyKHIuUyxcIk9iamVjdFwiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbixlLHI9byh0KSx1PWMuZixhPWkociksZj17fSxsPTA7YS5sZW5ndGg+bDspZT11KHIsbj1hW2wrK10pLHZvaWQgMCE9PWUmJnMoZixuLGUpO3JldHVybiBmfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoODMpKCExKTtyKHIuUyxcIk9iamVjdFwiLHt2YWx1ZXM6ZnVuY3Rpb24odCl7cmV0dXJuIGkodCl9fSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSg4NSk7cihyLlAsXCJTdHJpbmdcIix7cGFkRW5kOmZ1bmN0aW9uKHQpe3JldHVybiBpKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwhMSl9fSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSg4NSk7cihyLlAsXCJTdHJpbmdcIix7cGFkU3RhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIGkodGhpcyx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLCEwKX19KX0sZnVuY3Rpb24odCxuLGUpe2Zvcih2YXIgcj1lKDY2KSxpPWUoMjgpLG89ZSgxNiksYz1lKDMpLHM9ZSgxMSksdT1lKDI2KSxhPWUoNSksZj1hKFwiaXRlcmF0b3JcIiksbD1hKFwidG9TdHJpbmdUYWdcIiksaD11LkFycmF5LHY9e0NTU1J1bGVMaXN0OiEwLENTU1N0eWxlRGVjbGFyYXRpb246ITEsQ1NTVmFsdWVMaXN0OiExLENsaWVudFJlY3RMaXN0OiExLERPTVJlY3RMaXN0OiExLERPTVN0cmluZ0xpc3Q6ITEsRE9NVG9rZW5MaXN0OiEwLERhdGFUcmFuc2Zlckl0ZW1MaXN0OiExLEZpbGVMaXN0OiExLEhUTUxBbGxDb2xsZWN0aW9uOiExLEhUTUxDb2xsZWN0aW9uOiExLEhUTUxGb3JtRWxlbWVudDohMSxIVE1MU2VsZWN0RWxlbWVudDohMSxNZWRpYUxpc3Q6ITAsTWltZVR5cGVBcnJheTohMSxOYW1lZE5vZGVNYXA6ITEsTm9kZUxpc3Q6ITAsUGFpbnRSZXF1ZXN0TGlzdDohMSxQbHVnaW46ITEsUGx1Z2luQXJyYXk6ITEsU1ZHTGVuZ3RoTGlzdDohMSxTVkdOdW1iZXJMaXN0OiExLFNWR1BhdGhTZWdMaXN0OiExLFNWR1BvaW50TGlzdDohMSxTVkdTdHJpbmdMaXN0OiExLFNWR1RyYW5zZm9ybUxpc3Q6ITEsU291cmNlQnVmZmVyTGlzdDohMSxTdHlsZVNoZWV0TGlzdDohMCxUZXh0VHJhY2tDdWVMaXN0OiExLFRleHRUcmFja0xpc3Q6ITEsVG91Y2hMaXN0OiExfSxwPWkodiksZD0wO2Q8cC5sZW5ndGg7ZCsrKXt2YXIgeSxnPXBbZF0sbT12W2ddLGI9Y1tnXSxfPWImJmIucHJvdG90eXBlO2lmKF8mJihfW2ZdfHxzKF8sZixoKSxfW2xdfHxzKF8sbCxnKSx1W2ddPWgsbSkpZm9yKHkgaW4gcilfW3ldfHxvKF8seSxyW3ldLCEwKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg2Myk7cihyLkcrci5CLHtzZXRJbW1lZGlhdGU6aS5zZXQsY2xlYXJJbW1lZGlhdGU6aS5jbGVhcn0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzKSxpPWUoMSksbz1yLm5hdmlnYXRvcixjPVtdLnNsaWNlLHM9ISFvJiYvTVNJRSAuXFwuLy50ZXN0KG8udXNlckFnZW50KSx1PWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUpe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MixpPSEhciYmYy5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gdChyP2Z1bmN0aW9uKCl7KFwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bjpGdW5jdGlvbihuKSkuYXBwbHkodGhpcyxpKX06bixlKX19O2koaS5HK2kuQitpLkYqcyx7c2V0VGltZW91dDp1KHIuc2V0VGltZW91dCksc2V0SW50ZXJ2YWw6dShyLnNldEludGVydmFsKX0pfSxmdW5jdGlvbih0LG4pe30sZnVuY3Rpb24odCxuKXsoZnVuY3Rpb24obil7ZnVuY3Rpb24gZSh0LG4sZSl7ZnVuY3Rpb24gaShuKXt2YXIgZT1kLHI9eTtyZXR1cm4gZD15PXZvaWQgMCxFPW4sbT10LmFwcGx5KHIsZSl9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gRT10LGI9c2V0VGltZW91dChmLG4pLE8/aSh0KTptfWZ1bmN0aW9uIHUodCl7dmFyIGU9dC14LHI9dC1FLGk9bi1lO3JldHVybiBNP3coaSxnLXIpOml9ZnVuY3Rpb24gYSh0KXt2YXIgZT10LXgscj10LUU7cmV0dXJuIHZvaWQgMD09PXh8fGU+PW58fGU8MHx8TSYmcj49Z31mdW5jdGlvbiBmKCl7dmFyIHQ9UygpO3JldHVybiBhKHQpP2wodCk6dm9pZChiPXNldFRpbWVvdXQoZix1KHQpKSl9ZnVuY3Rpb24gbCh0KXtyZXR1cm4gYj12b2lkIDAsQSYmZD9pKHQpOihkPXk9dm9pZCAwLG0pfWZ1bmN0aW9uIGgoKXt2b2lkIDAhPT1iJiZjbGVhclRpbWVvdXQoYiksRT0wLGQ9eD15PWI9dm9pZCAwfWZ1bmN0aW9uIHYoKXtyZXR1cm4gdm9pZCAwPT09Yj9tOmwoUygpKX1mdW5jdGlvbiBwKCl7dmFyIHQ9UygpLGU9YSh0KTtpZihkPWFyZ3VtZW50cyx5PXRoaXMseD10LGUpe2lmKHZvaWQgMD09PWIpcmV0dXJuIG8oeCk7aWYoTSlyZXR1cm4gYj1zZXRUaW1lb3V0KGYsbiksaSh4KX1yZXR1cm4gdm9pZCAwPT09YiYmKGI9c2V0VGltZW91dChmLG4pKSxtfXZhciBkLHksZyxtLGIseCxFPTAsTz0hMSxNPSExLEE9ITA7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKHMpO3JldHVybiBuPWMobil8fDAscihlKSYmKE89ISFlLmxlYWRpbmcsTT1cIm1heFdhaXRcImluIGUsZz1NP18oYyhlLm1heFdhaXQpfHwwLG4pOmcsQT1cInRyYWlsaW5nXCJpbiBlPyEhZS50cmFpbGluZzpBKSxwLmNhbmNlbD1oLHAuZmx1c2g9dixwfWZ1bmN0aW9uIHIodCl7dmFyIG49dHlwZW9mIHQ7cmV0dXJuISF0JiYoXCJvYmplY3RcIj09bnx8XCJmdW5jdGlvblwiPT1uKX1mdW5jdGlvbiBpKHQpe3JldHVybiEhdCYmXCJvYmplY3RcIj09dHlwZW9mIHR9ZnVuY3Rpb24gbyh0KXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgdHx8aSh0KSYmYi5jYWxsKHQpPT1hfWZ1bmN0aW9uIGModCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpcmV0dXJuIHQ7aWYobyh0KSlyZXR1cm4gdTtpZihyKHQpKXt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnZhbHVlT2Y/dC52YWx1ZU9mKCk6dDt0PXIobik/bitcIlwiOm59aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpcmV0dXJuIDA9PT10P3Q6K3Q7dD10LnJlcGxhY2UoZixcIlwiKTt2YXIgZT1oLnRlc3QodCk7cmV0dXJuIGV8fHYudGVzdCh0KT9wKHQuc2xpY2UoMiksZT8yOjgpOmwudGVzdCh0KT91Oit0fXZhciBzPVwiRXhwZWN0ZWQgYSBmdW5jdGlvblwiLHU9TmFOLGE9XCJbb2JqZWN0IFN5bWJvbF1cIixmPS9eXFxzK3xcXHMrJC9nLGw9L15bLStdMHhbMC05YS1mXSskL2ksaD0vXjBiWzAxXSskL2ksdj0vXjBvWzAtN10rJC9pLHA9cGFyc2VJbnQsZD1cIm9iamVjdFwiPT10eXBlb2YgbiYmbiYmbi5PYmplY3Q9PT1PYmplY3QmJm4seT1cIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsZz1kfHx5fHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCksbT1PYmplY3QucHJvdG90eXBlLGI9bS50b1N0cmluZyxfPU1hdGgubWF4LHc9TWF0aC5taW4sUz1mdW5jdGlvbigpe3JldHVybiBnLkRhdGUubm93KCl9O3QuZXhwb3J0cz1lfSkuY2FsbChuLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSxmdW5jdGlvbih0LG4peyFmdW5jdGlvbihuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKHQsbixlLHIpe3ZhciBvPW4mJm4ucHJvdG90eXBlIGluc3RhbmNlb2YgaT9uOmksYz1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxzPW5ldyB2KHJ8fFtdKTtyZXR1cm4gYy5faW52b2tlPWEodCxlLHMpLGN9ZnVuY3Rpb24gcih0LG4sZSl7dHJ5e3JldHVybnt0eXBlOlwibm9ybWFsXCIsYXJnOnQuY2FsbChuLGUpfX1jYXRjaCh0KXtyZXR1cm57dHlwZTpcInRocm93XCIsYXJnOnR9fX1mdW5jdGlvbiBpKCl7fWZ1bmN0aW9uIG8oKXt9ZnVuY3Rpb24gYygpe31mdW5jdGlvbiBzKHQpe1tcIm5leHRcIixcInRocm93XCIsXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihuKXt0W25dPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9pbnZva2Uobix0KX19KX1mdW5jdGlvbiB1KHQpe2Z1bmN0aW9uIG4oZSxpLG8sYyl7dmFyIHM9cih0W2VdLHQsaSk7aWYoXCJ0aHJvd1wiIT09cy50eXBlKXt2YXIgdT1zLmFyZyxhPXUudmFsdWU7cmV0dXJuIGEmJlwib2JqZWN0XCI9PXR5cGVvZiBhJiZtLmNhbGwoYSxcIl9fYXdhaXRcIik/UHJvbWlzZS5yZXNvbHZlKGEuX19hd2FpdCkudGhlbihmdW5jdGlvbih0KXtuKFwibmV4dFwiLHQsbyxjKX0sZnVuY3Rpb24odCl7bihcInRocm93XCIsdCxvLGMpfSk6UHJvbWlzZS5yZXNvbHZlKGEpLnRoZW4oZnVuY3Rpb24odCl7dS52YWx1ZT10LG8odSl9LGMpfWMocy5hcmcpfWZ1bmN0aW9uIGUodCxlKXtmdW5jdGlvbiByKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHIsaSl7bih0LGUscixpKX0pfXJldHVybiBpPWk/aS50aGVuKHIscik6cigpfXZhciBpO3RoaXMuX2ludm9rZT1lfWZ1bmN0aW9uIGEodCxuLGUpe3ZhciBpPU87cmV0dXJuIGZ1bmN0aW9uKG8sYyl7aWYoaT09PUEpdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtpZihpPT09TCl7aWYoXCJ0aHJvd1wiPT09byl0aHJvdyBjO3JldHVybiBkKCl9Zm9yKGUubWV0aG9kPW8sZS5hcmc9Yzs7KXt2YXIgcz1lLmRlbGVnYXRlO2lmKHMpe3ZhciB1PWYocyxlKTtpZih1KXtpZih1PT09ailjb250aW51ZTtyZXR1cm4gdX19aWYoXCJuZXh0XCI9PT1lLm1ldGhvZCllLnNlbnQ9ZS5fc2VudD1lLmFyZztlbHNlIGlmKFwidGhyb3dcIj09PWUubWV0aG9kKXtpZihpPT09Tyl0aHJvdyBpPUwsZS5hcmc7ZS5kaXNwYXRjaEV4Y2VwdGlvbihlLmFyZyl9ZWxzZVwicmV0dXJuXCI9PT1lLm1ldGhvZCYmZS5hYnJ1cHQoXCJyZXR1cm5cIixlLmFyZyk7aT1BO3ZhciBhPXIodCxuLGUpO2lmKFwibm9ybWFsXCI9PT1hLnR5cGUpe2lmKGk9ZS5kb25lP0w6TSxhLmFyZz09PWopY29udGludWU7cmV0dXJue3ZhbHVlOmEuYXJnLGRvbmU6ZS5kb25lfX1cInRocm93XCI9PT1hLnR5cGUmJihpPUwsZS5tZXRob2Q9XCJ0aHJvd1wiLGUuYXJnPWEuYXJnKX19fWZ1bmN0aW9uIGYodCxuKXt2YXIgZT10Lml0ZXJhdG9yW24ubWV0aG9kXTtpZihlPT09eSl7aWYobi5kZWxlZ2F0ZT1udWxsLFwidGhyb3dcIj09PW4ubWV0aG9kKXtpZih0Lml0ZXJhdG9yLnJldHVybiYmKG4ubWV0aG9kPVwicmV0dXJuXCIsbi5hcmc9eSxmKHQsbiksXCJ0aHJvd1wiPT09bi5tZXRob2QpKXJldHVybiBqO24ubWV0aG9kPVwidGhyb3dcIixuLmFyZz1uZXcgVHlwZUVycm9yKFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKX1yZXR1cm4gan12YXIgaT1yKGUsdC5pdGVyYXRvcixuLmFyZyk7aWYoXCJ0aHJvd1wiPT09aS50eXBlKXJldHVybiBuLm1ldGhvZD1cInRocm93XCIsbi5hcmc9aS5hcmcsbi5kZWxlZ2F0ZT1udWxsLGo7dmFyIG89aS5hcmc7cmV0dXJuIG8/by5kb25lPyhuW3QucmVzdWx0TmFtZV09by52YWx1ZSxuLm5leHQ9dC5uZXh0TG9jLFwicmV0dXJuXCIhPT1uLm1ldGhvZCYmKG4ubWV0aG9kPVwibmV4dFwiLG4uYXJnPXkpLG4uZGVsZWdhdGU9bnVsbCxqKTpvOihuLm1ldGhvZD1cInRocm93XCIsbi5hcmc9bmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpLG4uZGVsZWdhdGU9bnVsbCxqKX1mdW5jdGlvbiBsKHQpe3ZhciBuPXt0cnlMb2M6dFswXX07MSBpbiB0JiYobi5jYXRjaExvYz10WzFdKSwyIGluIHQmJihuLmZpbmFsbHlMb2M9dFsyXSxuLmFmdGVyTG9jPXRbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKG4pfWZ1bmN0aW9uIGgodCl7dmFyIG49dC5jb21wbGV0aW9ufHx7fTtuLnR5cGU9XCJub3JtYWxcIixkZWxldGUgbi5hcmcsdC5jb21wbGV0aW9uPW59ZnVuY3Rpb24gdih0KXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6XCJyb290XCJ9XSx0LmZvckVhY2gobCx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiBwKHQpe2lmKHQpe3ZhciBuPXRbX107aWYobilyZXR1cm4gbi5jYWxsKHQpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQubmV4dClyZXR1cm4gdDtpZighaXNOYU4odC5sZW5ndGgpKXt2YXIgZT0tMSxyPWZ1bmN0aW9uIG4oKXtmb3IoOysrZTx0Lmxlbmd0aDspaWYobS5jYWxsKHQsZSkpcmV0dXJuIG4udmFsdWU9dFtlXSxuLmRvbmU9ITEsbjtyZXR1cm4gbi52YWx1ZT15LG4uZG9uZT0hMCxufTtyZXR1cm4gci5uZXh0PXJ9fXJldHVybntuZXh0OmR9fWZ1bmN0aW9uIGQoKXtyZXR1cm57dmFsdWU6eSxkb25lOiEwfX12YXIgeSxnPU9iamVjdC5wcm90b3R5cGUsbT1nLmhhc093blByb3BlcnR5LGI9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxfPWIuaXRlcmF0b3J8fFwiQEBpdGVyYXRvclwiLHc9Yi5hc3luY0l0ZXJhdG9yfHxcIkBAYXN5bmNJdGVyYXRvclwiLFM9Yi50b1N0cmluZ1RhZ3x8XCJAQHRvU3RyaW5nVGFnXCIseD1cIm9iamVjdFwiPT10eXBlb2YgdCxFPW4ucmVnZW5lcmF0b3JSdW50aW1lO2lmKEUpcmV0dXJuIHZvaWQoeCYmKHQuZXhwb3J0cz1FKSk7RT1uLnJlZ2VuZXJhdG9yUnVudGltZT14P3QuZXhwb3J0czp7fSxFLndyYXA9ZTt2YXIgTz1cInN1c3BlbmRlZFN0YXJ0XCIsTT1cInN1c3BlbmRlZFlpZWxkXCIsQT1cImV4ZWN1dGluZ1wiLEw9XCJjb21wbGV0ZWRcIixqPXt9LGs9e307a1tfXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt2YXIgVD1PYmplY3QuZ2V0UHJvdG90eXBlT2YsUD1UJiZUKFQocChbXSkpKTtQJiZQIT09ZyYmbS5jYWxsKFAsXykmJihrPVApO3ZhciBGPWMucHJvdG90eXBlPWkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoayk7by5wcm90b3R5cGU9Ri5jb25zdHJ1Y3Rvcj1jLGMuY29uc3RydWN0b3I9byxjW1NdPW8uZGlzcGxheU5hbWU9XCJHZW5lcmF0b3JGdW5jdGlvblwiLEUuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbih0KXt2YXIgbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yO3JldHVybiEhbiYmKG49PT1vfHxcIkdlbmVyYXRvckZ1bmN0aW9uXCI9PT0obi5kaXNwbGF5TmFtZXx8bi5uYW1lKSl9LEUubWFyaz1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGMpOih0Ll9fcHJvdG9fXz1jLFMgaW4gdHx8KHRbU109XCJHZW5lcmF0b3JGdW5jdGlvblwiKSksdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShGKSx0fSxFLmF3cmFwPWZ1bmN0aW9uKHQpe3JldHVybntfX2F3YWl0OnR9fSxzKHUucHJvdG90eXBlKSx1LnByb3RvdHlwZVt3XT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxFLkFzeW5jSXRlcmF0b3I9dSxFLmFzeW5jPWZ1bmN0aW9uKHQsbixyLGkpe3ZhciBvPW5ldyB1KGUodCxuLHIsaSkpO3JldHVybiBFLmlzR2VuZXJhdG9yRnVuY3Rpb24obik/bzpvLm5leHQoKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0LmRvbmU/dC52YWx1ZTpvLm5leHQoKX0pfSxzKEYpLEZbU109XCJHZW5lcmF0b3JcIixGW19dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LEYudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgR2VuZXJhdG9yXVwifSxFLmtleXM9ZnVuY3Rpb24odCl7dmFyIG49W107Zm9yKHZhciBlIGluIHQpbi5wdXNoKGUpO3JldHVybiBuLnJldmVyc2UoKSxmdW5jdGlvbiBlKCl7Zm9yKDtuLmxlbmd0aDspe3ZhciByPW4ucG9wKCk7aWYociBpbiB0KXJldHVybiBlLnZhbHVlPXIsZS5kb25lPSExLGV9cmV0dXJuIGUuZG9uZT0hMCxlfX0sRS52YWx1ZXM9cCx2LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dixyZXNldDpmdW5jdGlvbih0KXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD15LHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9XCJuZXh0XCIsdGhpcy5hcmc9eSx0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChoKSwhdClmb3IodmFyIG4gaW4gdGhpcylcInRcIj09PW4uY2hhckF0KDApJiZtLmNhbGwodGhpcyxuKSYmIWlzTmFOKCtuLnNsaWNlKDEpKSYmKHRoaXNbbl09eSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIHQ9dGhpcy50cnlFbnRyaWVzWzBdLG49dC5jb21wbGV0aW9uO2lmKFwidGhyb3dcIj09PW4udHlwZSl0aHJvdyBuLmFyZztyZXR1cm4gdGhpcy5ydmFsfSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbih0KXtmdW5jdGlvbiBuKG4scil7cmV0dXJuIG8udHlwZT1cInRocm93XCIsby5hcmc9dCxlLm5leHQ9bixyJiYoZS5tZXRob2Q9XCJuZXh0XCIsZS5hcmc9eSksISFyfWlmKHRoaXMuZG9uZSl0aHJvdyB0O2Zvcih2YXIgZT10aGlzLHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgaT10aGlzLnRyeUVudHJpZXNbcl0sbz1pLmNvbXBsZXRpb247aWYoXCJyb290XCI9PT1pLnRyeUxvYylyZXR1cm4gbihcImVuZFwiKTtpZihpLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgYz1tLmNhbGwoaSxcImNhdGNoTG9jXCIpLHM9bS5jYWxsKGksXCJmaW5hbGx5TG9jXCIpO2lmKGMmJnMpe2lmKHRoaXMucHJldjxpLmNhdGNoTG9jKXJldHVybiBuKGkuY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxpLmZpbmFsbHlMb2MpcmV0dXJuIG4oaS5maW5hbGx5TG9jKX1lbHNlIGlmKGMpe2lmKHRoaXMucHJldjxpLmNhdGNoTG9jKXJldHVybiBuKGkuY2F0Y2hMb2MsITApfWVsc2V7aWYoIXMpdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7aWYodGhpcy5wcmV2PGkuZmluYWxseUxvYylyZXR1cm4gbihpLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2U+PTA7LS1lKXt2YXIgcj10aGlzLnRyeUVudHJpZXNbZV07aWYoci50cnlMb2M8PXRoaXMucHJldiYmbS5jYWxsKHIsXCJmaW5hbGx5TG9jXCIpJiZ0aGlzLnByZXY8ci5maW5hbGx5TG9jKXt2YXIgaT1yO2JyZWFrfX1pJiYoXCJicmVha1wiPT09dHx8XCJjb250aW51ZVwiPT09dCkmJmkudHJ5TG9jPD1uJiZuPD1pLmZpbmFsbHlMb2MmJihpPW51bGwpO3ZhciBvPWk/aS5jb21wbGV0aW9uOnt9O3JldHVybiBvLnR5cGU9dCxvLmFyZz1uLGk/KHRoaXMubWV0aG9kPVwibmV4dFwiLHRoaXMubmV4dD1pLmZpbmFsbHlMb2Msaik6dGhpcy5jb21wbGV0ZShvKX0sY29tcGxldGU6ZnVuY3Rpb24odCxuKXtpZihcInRocm93XCI9PT10LnR5cGUpdGhyb3cgdC5hcmc7cmV0dXJuXCJicmVha1wiPT09dC50eXBlfHxcImNvbnRpbnVlXCI9PT10LnR5cGU/dGhpcy5uZXh0PXQuYXJnOlwicmV0dXJuXCI9PT10LnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz10LmFyZyx0aGlzLm1ldGhvZD1cInJldHVyblwiLHRoaXMubmV4dD1cImVuZFwiKTpcIm5vcm1hbFwiPT09dC50eXBlJiZuJiYodGhpcy5uZXh0PW4pLGp9LGZpbmlzaDpmdW5jdGlvbih0KXtmb3IodmFyIG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgZT10aGlzLnRyeUVudHJpZXNbbl07aWYoZS5maW5hbGx5TG9jPT09dClyZXR1cm4gdGhpcy5jb21wbGV0ZShlLmNvbXBsZXRpb24sZS5hZnRlckxvYyksaChlKSxqfX0sY2F0Y2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtuPj0wOy0tbil7dmFyIGU9dGhpcy50cnlFbnRyaWVzW25dO2lmKGUudHJ5TG9jPT09dCl7dmFyIHI9ZS5jb21wbGV0aW9uO2lmKFwidGhyb3dcIj09PXIudHlwZSl7dmFyIGk9ci5hcmc7aChlKX1yZXR1cm4gaX19dGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKHQsbixlKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6cCh0KSxyZXN1bHROYW1lOm4sbmV4dExvYzplfSxcIm5leHRcIj09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9eSksan19fShmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkpfSxmdW5jdGlvbih0LG4sZSl7IWZ1bmN0aW9uKG4sZSl7dC5leHBvcnRzPWUoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7cmV0dXJuIHBhcnNlRmxvYXQodCl8fDB9ZnVuY3Rpb24gbihuKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGUucmVkdWNlKGZ1bmN0aW9uKGUscil7dmFyIGk9bltcImJvcmRlci1cIityK1wiLXdpZHRoXCJdO3JldHVybiBlK3QoaSl9LDApfWZ1bmN0aW9uIGUobil7Zm9yKHZhciBlPVtcInRvcFwiLFwicmlnaHRcIixcImJvdHRvbVwiLFwibGVmdFwiXSxyPXt9LGk9MCxvPWU7aTxvLmxlbmd0aDtpKz0xKXt2YXIgYz1vW2ldLHM9bltcInBhZGRpbmctXCIrY107cltjXT10KHMpfXJldHVybiByfWZ1bmN0aW9uIHIodCl7dmFyIG49dC5nZXRCQm94KCk7cmV0dXJuIHUoMCwwLG4ud2lkdGgsbi5oZWlnaHQpfWZ1bmN0aW9uIGkocil7dmFyIGk9ci5jbGllbnRXaWR0aCxjPXIuY2xpZW50SGVpZ2h0O2lmKCFpJiYhYylyZXR1cm4gXzt2YXIgcz1nZXRDb21wdXRlZFN0eWxlKHIpLGE9ZShzKSxmPWEubGVmdCthLnJpZ2h0LGw9YS50b3ArYS5ib3R0b20saD10KHMud2lkdGgpLHY9dChzLmhlaWdodCk7aWYoXCJib3JkZXItYm94XCI9PT1zLmJveFNpemluZyYmKE1hdGgucm91bmQoaCtmKSE9PWkmJihoLT1uKHMsXCJsZWZ0XCIsXCJyaWdodFwiKStmKSxNYXRoLnJvdW5kKHYrbCkhPT1jJiYodi09bihzLFwidG9wXCIsXCJib3R0b21cIikrbCkpLCFvKHIpKXt2YXIgcD1NYXRoLnJvdW5kKGgrZiktaSxkPU1hdGgucm91bmQoditsKS1jOzEhPT1NYXRoLmFicyhwKSYmKGgtPXApLDEhPT1NYXRoLmFicyhkKSYmKHYtPWQpfXJldHVybiB1KGEubGVmdCxhLnRvcCxoLHYpfWZ1bmN0aW9uIG8odCl7cmV0dXJuIHQ9PT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9ZnVuY3Rpb24gYyh0KXtyZXR1cm4gZj93KHQpP3IodCk6aSh0KTpffWZ1bmN0aW9uIHModCl7dmFyIG49dC54LGU9dC55LHI9dC53aWR0aCxpPXQuaGVpZ2h0LG89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIERPTVJlY3RSZWFkT25seT9ET01SZWN0UmVhZE9ubHk6T2JqZWN0LGM9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSk7cmV0dXJuIGIoYyx7eDpuLHk6ZSx3aWR0aDpyLGhlaWdodDppLHRvcDplLHJpZ2h0Om4rcixib3R0b206aStlLGxlZnQ6bn0pLGN9ZnVuY3Rpb24gdSh0LG4sZSxyKXtyZXR1cm57eDp0LHk6bix3aWR0aDplLGhlaWdodDpyfX12YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxuKXt2YXIgZT0tMTtyZXR1cm4gdC5zb21lKGZ1bmN0aW9uKHQscil7cmV0dXJuIHRbMF09PT1uJiYoZT1yLCEwKX0pLGV9cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE1hcD9NYXA6ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7dGhpcy5fX2VudHJpZXNfXz1bXX12YXIgZT17c2l6ZTp7fX07cmV0dXJuIGUuc2l6ZS5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX2VudHJpZXNfXy5sZW5ndGh9LG4ucHJvdG90eXBlLmdldD1mdW5jdGlvbihuKXt2YXIgZT10KHRoaXMuX19lbnRyaWVzX18sbikscj10aGlzLl9fZW50cmllc19fW2VdO3JldHVybiByJiZyWzFdfSxuLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24obixlKXt2YXIgcj10KHRoaXMuX19lbnRyaWVzX18sbik7fnI/dGhpcy5fX2VudHJpZXNfX1tyXVsxXT1lOnRoaXMuX19lbnRyaWVzX18ucHVzaChbbixlXSl9LG4ucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihuKXt2YXIgZT10aGlzLl9fZW50cmllc19fLHI9dChlLG4pO35yJiZlLnNwbGljZShyLDEpfSxuLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24obil7cmV0dXJuISF+dCh0aGlzLl9fZW50cmllc19fLG4pfSxuLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX19lbnRyaWVzX18uc3BsaWNlKDApfSxuLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKHQsbil7dm9pZCAwPT09biYmKG49bnVsbCk7Zm9yKHZhciBlPTAscj10aGlzLl9fZW50cmllc19fO2U8ci5sZW5ndGg7ZSs9MSl7dmFyIGk9cltlXTt0LmNhbGwobixpWzFdLGlbMF0pfX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobi5wcm90b3R5cGUsZSksbn0oKX0oKSxmPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmd2luZG93LmRvY3VtZW50PT09ZG9jdW1lbnQsbD1mdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVlc3RBbmltYXRpb25GcmFtZT9yZXF1ZXN0QW5pbWF0aW9uRnJhbWU6ZnVuY3Rpb24odCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gdChEYXRlLm5vdygpKX0sMWUzLzYwKX19KCksaD0yLHY9ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiBlKCl7byYmKG89ITEsdCgpKSxjJiZpKCl9ZnVuY3Rpb24gcigpe2woZSl9ZnVuY3Rpb24gaSgpe3ZhciB0PURhdGUubm93KCk7aWYobyl7aWYodC1zPGgpcmV0dXJuO2M9ITB9ZWxzZSBvPSEwLGM9ITEsc2V0VGltZW91dChyLG4pO3M9dH12YXIgbz0hMSxjPSExLHM9MDtyZXR1cm4gaX0scD0yMCxkPVtcInRvcFwiLFwicmlnaHRcIixcImJvdHRvbVwiLFwibGVmdFwiLFwid2lkdGhcIixcImhlaWdodFwiLFwic2l6ZVwiLFwid2VpZ2h0XCJdLHk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmL1RyaWRlbnRcXC8uKnJ2OjExLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGc9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJiF5LG09ZnVuY3Rpb24oKXt0aGlzLmNvbm5lY3RlZF89ITEsdGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXz0hMSx0aGlzLm11dGF0aW9uc09ic2VydmVyXz1udWxsLHRoaXMub2JzZXJ2ZXJzXz1bXSx0aGlzLm9uVHJhbnNpdGlvbkVuZF89dGhpcy5vblRyYW5zaXRpb25FbmRfLmJpbmQodGhpcyksdGhpcy5yZWZyZXNoPXYodGhpcy5yZWZyZXNoLmJpbmQodGhpcykscCl9O20ucHJvdG90eXBlLmFkZE9ic2VydmVyPWZ1bmN0aW9uKHQpe350aGlzLm9ic2VydmVyc18uaW5kZXhPZih0KXx8dGhpcy5vYnNlcnZlcnNfLnB1c2godCksdGhpcy5jb25uZWN0ZWRffHx0aGlzLmNvbm5lY3RfKCl9LG0ucHJvdG90eXBlLnJlbW92ZU9ic2VydmVyPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMub2JzZXJ2ZXJzXyxlPW4uaW5kZXhPZih0KTt+ZSYmbi5zcGxpY2UoZSwxKSwhbi5sZW5ndGgmJnRoaXMuY29ubmVjdGVkXyYmdGhpcy5kaXNjb25uZWN0XygpfSxtLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy51cGRhdGVPYnNlcnZlcnNfKCk7dCYmdGhpcy5yZWZyZXNoKCl9LG0ucHJvdG90eXBlLnVwZGF0ZU9ic2VydmVyc189ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9ic2VydmVyc18uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LmdhdGhlckFjdGl2ZSgpLHQuaGFzQWN0aXZlKCl9KTtyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmJyb2FkY2FzdEFjdGl2ZSgpfSksdC5sZW5ndGg+MH0sbS5wcm90b3R5cGUuY29ubmVjdF89ZnVuY3Rpb24oKXtmJiYhdGhpcy5jb25uZWN0ZWRfJiYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIix0aGlzLm9uVHJhbnNpdGlvbkVuZF8pLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5yZWZyZXNoKSxnPyh0aGlzLm11dGF0aW9uc09ic2VydmVyXz1uZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLnJlZnJlc2gpLHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfLm9ic2VydmUoZG9jdW1lbnQse2F0dHJpYnV0ZXM6ITAsY2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITAsc3VidHJlZTohMH0pKTooZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTVN1YnRyZWVNb2RpZmllZFwiLHRoaXMucmVmcmVzaCksdGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXz0hMCksdGhpcy5jb25uZWN0ZWRfPSEwKX0sbS5wcm90b3R5cGUuZGlzY29ubmVjdF89ZnVuY3Rpb24oKXtmJiZ0aGlzLmNvbm5lY3RlZF8mJihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLHRoaXMub25UcmFuc2l0aW9uRW5kXyksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLnJlZnJlc2gpLHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfJiZ0aGlzLm11dGF0aW9uc09ic2VydmVyXy5kaXNjb25uZWN0KCksdGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXyYmZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTVN1YnRyZWVNb2RpZmllZFwiLHRoaXMucmVmcmVzaCksdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl89bnVsbCx0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfPSExLHRoaXMuY29ubmVjdGVkXz0hMSl9LG0ucHJvdG90eXBlLm9uVHJhbnNpdGlvbkVuZF89ZnVuY3Rpb24odCl7dmFyIG49dC5wcm9wZXJ0eU5hbWUsZT1kLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuISF+bi5pbmRleE9mKHQpfSk7ZSYmdGhpcy5yZWZyZXNoKCl9LG0uZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnN0YW5jZV98fCh0aGlzLmluc3RhbmNlXz1uZXcgbSksdGhpcy5pbnN0YW5jZV99LG0uaW5zdGFuY2VfPW51bGw7dmFyIGI9ZnVuY3Rpb24odCxuKXtmb3IodmFyIGU9MCxyPU9iamVjdC5rZXlzKG4pO2U8ci5sZW5ndGg7ZSs9MSl7dmFyIGk9cltlXTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLHt2YWx1ZTpuW2ldLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITEsY29uZmlndXJhYmxlOiEwfSl9cmV0dXJuIHR9LF89dSgwLDAsMCwwKSx3PWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFNWR0dyYXBoaWNzRWxlbWVudD9mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFNWR0dyYXBoaWNzRWxlbWVudH06ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBTVkdFbGVtZW50JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmdldEJCb3h9fSgpLFM9ZnVuY3Rpb24odCl7dGhpcy5icm9hZGNhc3RXaWR0aD0wLHRoaXMuYnJvYWRjYXN0SGVpZ2h0PTAsdGhpcy5jb250ZW50UmVjdF89dSgwLDAsMCwwKSx0aGlzLnRhcmdldD10fTtTLnByb3RvdHlwZS5pc0FjdGl2ZT1mdW5jdGlvbigpe3ZhciB0PWModGhpcy50YXJnZXQpO3JldHVybiB0aGlzLmNvbnRlbnRSZWN0Xz10LHQud2lkdGghPT10aGlzLmJyb2FkY2FzdFdpZHRofHx0LmhlaWdodCE9PXRoaXMuYnJvYWRjYXN0SGVpZ2h0fSxTLnByb3RvdHlwZS5icm9hZGNhc3RSZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb250ZW50UmVjdF87cmV0dXJuIHRoaXMuYnJvYWRjYXN0V2lkdGg9dC53aWR0aCx0aGlzLmJyb2FkY2FzdEhlaWdodD10LmhlaWdodCx0fTt2YXIgeD1mdW5jdGlvbih0LG4pe3ZhciBlPXMobik7Yih0aGlzLHt0YXJnZXQ6dCxjb250ZW50UmVjdDplfSl9LEU9ZnVuY3Rpb24odCxuLGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBjYWxsYmFjayBwcm92aWRlZCBhcyBwYXJhbWV0ZXIgMSBpcyBub3QgYSBmdW5jdGlvbi5cIik7dGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfPVtdLHRoaXMub2JzZXJ2YXRpb25zXz1uZXcgYSx0aGlzLmNhbGxiYWNrXz10LHRoaXMuY29udHJvbGxlcl89bix0aGlzLmNhbGxiYWNrQ3R4Xz1lfTtFLnByb3RvdHlwZS5vYnNlcnZlPWZ1bmN0aW9uKHQpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBUeXBlRXJyb3IoXCIxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuXCIpO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBFbGVtZW50JiZFbGVtZW50IGluc3RhbmNlb2YgT2JqZWN0KXtpZighKHQgaW5zdGFuY2VvZiBFbGVtZW50KSl0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJhbWV0ZXIgMSBpcyBub3Qgb2YgdHlwZSBcIkVsZW1lbnRcIi4nKTt2YXIgbj10aGlzLm9ic2VydmF0aW9uc187bi5oYXModCl8fChuLnNldCh0LG5ldyBTKHQpKSx0aGlzLmNvbnRyb2xsZXJfLmFkZE9ic2VydmVyKHRoaXMpLHRoaXMuY29udHJvbGxlcl8ucmVmcmVzaCgpKX19LEUucHJvdG90eXBlLnVub2JzZXJ2ZT1mdW5jdGlvbih0KXtpZighYXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LlwiKTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgRWxlbWVudCYmRWxlbWVudCBpbnN0YW5jZW9mIE9iamVjdCl7aWYoISh0IGluc3RhbmNlb2YgRWxlbWVudCkpdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgXCJFbGVtZW50XCIuJyk7dmFyIG49dGhpcy5vYnNlcnZhdGlvbnNfO24uaGFzKHQpJiYobi5kZWxldGUodCksbi5zaXplfHx0aGlzLmNvbnRyb2xsZXJfLnJlbW92ZU9ic2VydmVyKHRoaXMpKX19LEUucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyQWN0aXZlKCksdGhpcy5vYnNlcnZhdGlvbnNfLmNsZWFyKCksdGhpcy5jb250cm9sbGVyXy5yZW1vdmVPYnNlcnZlcih0aGlzKX0sRS5wcm90b3R5cGUuZ2F0aGVyQWN0aXZlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNsZWFyQWN0aXZlKCksdGhpcy5vYnNlcnZhdGlvbnNfLmZvckVhY2goZnVuY3Rpb24obil7bi5pc0FjdGl2ZSgpJiZ0LmFjdGl2ZU9ic2VydmF0aW9uc18ucHVzaChuKX0pfSxFLnByb3RvdHlwZS5icm9hZGNhc3RBY3RpdmU9ZnVuY3Rpb24oKXtpZih0aGlzLmhhc0FjdGl2ZSgpKXt2YXIgdD10aGlzLmNhbGxiYWNrQ3R4XyxuPXRoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB4KHQudGFyZ2V0LHQuYnJvYWRjYXN0UmVjdCgpKX0pO3RoaXMuY2FsbGJhY2tfLmNhbGwodCxuLHQpLHRoaXMuY2xlYXJBY3RpdmUoKX19LEUucHJvdG90eXBlLmNsZWFyQWN0aXZlPWZ1bmN0aW9uKCl7dGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLnNwbGljZSgwKX0sRS5wcm90b3R5cGUuaGFzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXy5sZW5ndGg+MH07dmFyIE89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYWtNYXA/bmV3IFdlYWtNYXA6bmV3IGEsTT1mdW5jdGlvbih0KXtpZighKHRoaXMgaW5zdGFuY2VvZiBNKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO2lmKCFhcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBUeXBlRXJyb3IoXCIxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuXCIpO3ZhciBuPW0uZ2V0SW5zdGFuY2UoKSxlPW5ldyBFKHQsbix0aGlzKTtPLnNldCh0aGlzLGUpfTtbXCJvYnNlcnZlXCIsXCJ1bm9ic2VydmVcIixcImRpc2Nvbm5lY3RcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtNLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybihuPU8uZ2V0KHRoaXMpKVt0XS5hcHBseShuLGFyZ3VtZW50cyk7dmFyIG59fSk7dmFyIEE9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgUmVzaXplT2JzZXJ2ZXI/UmVzaXplT2JzZXJ2ZXI6TX0oKTtyZXR1cm4gQX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHIsaSxvOy8qISBzY3JvbGxiYXJXaWR0aC5qcyB2MC4xLjAgfCBmZWxpeGV4dGVyIHwgTUlUIHwgaHR0cHM6Ly9naXRodWIuY29tL2ZlbGl4ZXh0ZXIvc2Nyb2xsYmFyV2lkdGggKi9cclxuIWZ1bmN0aW9uKGUsYyl7aT1bXSxyPWMsbz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByP3IuYXBwbHkobixpKTpyLCEodm9pZCAwIT09byYmKHQuZXhwb3J0cz1vKSl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KCl7dmFyIHQsbj1kb2N1bWVudC5ib2R5LGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxyPWUuc3R5bGU7cmV0dXJuIHIucG9zaXRpb249XCJhYnNvbHV0ZVwiLHIudG9wPXIubGVmdD1cIi05OTk5cHhcIixyLndpZHRoPXIuaGVpZ2h0PVwiMTAwcHhcIixyLm92ZXJmbG93PVwic2Nyb2xsXCIsbi5hcHBlbmRDaGlsZChlKSx0PWUub2Zmc2V0V2lkdGgtZS5jbGllbnRXaWR0aCxuLnJlbW92ZUNoaWxkKGUpLHR9cmV0dXJuIHR9KX1dKX0pOyIsIi8qKlxyXG4gKiBPd2wgQ2Fyb3VzZWwgdjIuMi4xXHJcbiAqIENvcHlyaWdodCAyMDEzLTIwMTcgRGF2aWQgRGV1dHNjaFxyXG4gKiBMaWNlbnNlZCB1bmRlciAgKClcclxuICovXHJcbi8qKlxyXG4gKiBPd2wgY2Fyb3VzZWxcclxuICogQHZlcnNpb24gMi4xLjZcclxuICogQGF1dGhvciBCYXJ0b3N6IFdvamNpZWNob3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKiBAdG9kbyBMYXp5IExvYWQgSWNvblxyXG4gKiBAdG9kbyBwcmV2ZW50IGFuaW1hdGlvbmVuZCBidWJsaW5nXHJcbiAqIEB0b2RvIGl0ZW1zU2NhbGVVcFxyXG4gKiBAdG9kbyBUZXN0IFplcHRvXHJcbiAqIEB0b2RvIHN0YWdlUGFkZGluZyBjYWxjdWxhdGUgd3JvbmcgYWN0aXZlIGNsYXNzZXNcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgYSBjYXJvdXNlbC5cclxuXHQgKiBAY2xhc3MgVGhlIE93bCBDYXJvdXNlbC5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudHxqUXVlcnl9IGVsZW1lbnQgLSBUaGUgZWxlbWVudCB0byBjcmVhdGUgdGhlIGNhcm91c2VsIGZvci5cclxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gVGhlIG9wdGlvbnNcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBPd2woZWxlbWVudCwgb3B0aW9ucykge1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ3VycmVudCBzZXR0aW5ncyBmb3IgdGhlIGNhcm91c2VsLlxyXG5cdFx0ICogQHB1YmxpY1xyXG5cdFx0ICovXHJcblx0XHR0aGlzLnNldHRpbmdzID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEN1cnJlbnQgb3B0aW9ucyBzZXQgYnkgdGhlIGNhbGxlciBpbmNsdWRpbmcgZGVmYXVsdHMuXHJcblx0XHQgKiBAcHVibGljXHJcblx0XHQgKi9cclxuXHRcdHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBPd2wuRGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogUGx1Z2luIGVsZW1lbnQuXHJcblx0XHQgKiBAcHVibGljXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogUHJveGllZCBldmVudCBoYW5kbGVycy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFuZGxlcnMgPSB7fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFJlZmVyZW5jZXMgdG8gdGhlIHJ1bm5pbmcgcGx1Z2lucyBvZiB0aGlzIGNhcm91c2VsLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9wbHVnaW5zID0ge307XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDdXJyZW50bHkgc3VwcHJlc3NlZCBldmVudHMgdG8gcHJldmVudCB0aGVtIGZyb20gYmVlaW5nIHJldHJpZ2dlcmVkLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9zdXByZXNzID0ge307XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBYnNvbHV0ZSBjdXJyZW50IHBvc2l0aW9uLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jdXJyZW50ID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFuaW1hdGlvbiBzcGVlZCBpbiBtaWxsaXNlY29uZHMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3NwZWVkID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIENvb3JkaW5hdGVzIG9mIGFsbCBpdGVtcyBpbiBwaXhlbC5cclxuXHRcdCAqIEB0b2RvIFRoZSBuYW1lIG9mIHRoaXMgbWVtYmVyIGlzIG1pc3NsZWFkaW5nLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb29yZGluYXRlcyA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ3VycmVudCBicmVha3BvaW50LlxyXG5cdFx0ICogQHRvZG8gUmVhbCBtZWRpYSBxdWVyaWVzIHdvdWxkIGJlIG5pY2UuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2JyZWFrcG9pbnQgPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ3VycmVudCB3aWR0aCBvZiB0aGUgcGx1Z2luIGVsZW1lbnQuXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3dpZHRoID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCByZWFsIGl0ZW1zLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9pdGVtcyA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIGNsb25lZCBpdGVtcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY2xvbmVzID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBNZXJnZSB2YWx1ZXMgb2YgYWxsIGl0ZW1zLlxyXG5cdFx0ICogQHRvZG8gTWF5YmUgdGhpcyBjb3VsZCBiZSBwYXJ0IG9mIGEgcGx1Z2luLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9tZXJnZXJzID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBXaWR0aHMgb2YgYWxsIGl0ZW1zLlxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl93aWR0aHMgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEludmFsaWRhdGVkIHBhcnRzIHdpdGhpbiB0aGUgdXBkYXRlIHByb2Nlc3MuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2ludmFsaWRhdGVkID0ge307XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBPcmRlcmVkIGxpc3Qgb2Ygd29ya2VycyBmb3IgdGhlIHVwZGF0ZSBwcm9jZXNzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9waXBlID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDdXJyZW50IHN0YXRlIGluZm9ybWF0aW9uIGZvciB0aGUgZHJhZyBvcGVyYXRpb24uXHJcblx0XHQgKiBAdG9kbyAjMjYxXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2RyYWcgPSB7XHJcblx0XHRcdHRpbWU6IG51bGwsXHJcblx0XHRcdHRhcmdldDogbnVsbCxcclxuXHRcdFx0cG9pbnRlcjogbnVsbCxcclxuXHRcdFx0c3RhZ2U6IHtcclxuXHRcdFx0XHRzdGFydDogbnVsbCxcclxuXHRcdFx0XHRjdXJyZW50OiBudWxsXHJcblx0XHRcdH0sXHJcblx0XHRcdGRpcmVjdGlvbjogbnVsbFxyXG5cdFx0fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEN1cnJlbnQgc3RhdGUgaW5mb3JtYXRpb24gYW5kIHRoZWlyIHRhZ3MuXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9zdGF0ZXMgPSB7XHJcblx0XHRcdGN1cnJlbnQ6IHt9LFxyXG5cdFx0XHR0YWdzOiB7XHJcblx0XHRcdFx0J2luaXRpYWxpemluZyc6IFsgJ2J1c3knIF0sXHJcblx0XHRcdFx0J2FuaW1hdGluZyc6IFsgJ2J1c3knIF0sXHJcblx0XHRcdFx0J2RyYWdnaW5nJzogWyAnaW50ZXJhY3RpbmcnIF1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHQkLmVhY2goWyAnb25SZXNpemUnLCAnb25UaHJvdHRsZWRSZXNpemUnIF0sICQucHJveHkoZnVuY3Rpb24oaSwgaGFuZGxlcikge1xyXG5cdFx0XHR0aGlzLl9oYW5kbGVyc1toYW5kbGVyXSA9ICQucHJveHkodGhpc1toYW5kbGVyXSwgdGhpcyk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0JC5lYWNoKE93bC5QbHVnaW5zLCAkLnByb3h5KGZ1bmN0aW9uKGtleSwgcGx1Z2luKSB7XHJcblx0XHRcdHRoaXMuX3BsdWdpbnNba2V5LmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsga2V5LnNsaWNlKDEpXVxyXG5cdFx0XHRcdD0gbmV3IHBsdWdpbih0aGlzKTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHQkLmVhY2goT3dsLldvcmtlcnMsICQucHJveHkoZnVuY3Rpb24ocHJpb3JpdHksIHdvcmtlcikge1xyXG5cdFx0XHR0aGlzLl9waXBlLnB1c2goe1xyXG5cdFx0XHRcdCdmaWx0ZXInOiB3b3JrZXIuZmlsdGVyLFxyXG5cdFx0XHRcdCdydW4nOiAkLnByb3h5KHdvcmtlci5ydW4sIHRoaXMpXHJcblx0XHRcdH0pO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdHRoaXMuc2V0dXAoKTtcclxuXHRcdHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zIGZvciB0aGUgY2Fyb3VzZWwuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdE93bC5EZWZhdWx0cyA9IHtcclxuXHRcdGl0ZW1zOiAzLFxyXG5cdFx0bG9vcDogZmFsc2UsXHJcblx0XHRjZW50ZXI6IGZhbHNlLFxyXG5cdFx0cmV3aW5kOiBmYWxzZSxcclxuXHJcblx0XHRtb3VzZURyYWc6IHRydWUsXHJcblx0XHR0b3VjaERyYWc6IHRydWUsXHJcblx0XHRwdWxsRHJhZzogdHJ1ZSxcclxuXHRcdGZyZWVEcmFnOiBmYWxzZSxcclxuXHJcblx0XHRtYXJnaW46IDAsXHJcblx0XHRzdGFnZVBhZGRpbmc6IDAsXHJcblxyXG5cdFx0bWVyZ2U6IGZhbHNlLFxyXG5cdFx0bWVyZ2VGaXQ6IHRydWUsXHJcblx0XHRhdXRvV2lkdGg6IGZhbHNlLFxyXG5cclxuXHRcdHN0YXJ0UG9zaXRpb246IDAsXHJcblx0XHRydGw6IGZhbHNlLFxyXG5cclxuXHRcdHNtYXJ0U3BlZWQ6IDI1MCxcclxuXHRcdGZsdWlkU3BlZWQ6IGZhbHNlLFxyXG5cdFx0ZHJhZ0VuZFNwZWVkOiBmYWxzZSxcclxuXHJcblx0XHRyZXNwb25zaXZlOiB7fSxcclxuXHRcdHJlc3BvbnNpdmVSZWZyZXNoUmF0ZTogMjAwLFxyXG5cdFx0cmVzcG9uc2l2ZUJhc2VFbGVtZW50OiB3aW5kb3csXHJcblxyXG5cdFx0ZmFsbGJhY2tFYXNpbmc6ICdzd2luZycsXHJcblxyXG5cdFx0aW5mbzogZmFsc2UsXHJcblxyXG5cdFx0bmVzdGVkSXRlbVNlbGVjdG9yOiBmYWxzZSxcclxuXHRcdGl0ZW1FbGVtZW50OiAnZGl2JyxcclxuXHRcdHN0YWdlRWxlbWVudDogJ2RpdicsXHJcblxyXG5cdFx0cmVmcmVzaENsYXNzOiAnb3dsLXJlZnJlc2gnLFxyXG5cdFx0bG9hZGVkQ2xhc3M6ICdvd2wtbG9hZGVkJyxcclxuXHRcdGxvYWRpbmdDbGFzczogJ293bC1sb2FkaW5nJyxcclxuXHRcdHJ0bENsYXNzOiAnb3dsLXJ0bCcsXHJcblx0XHRyZXNwb25zaXZlQ2xhc3M6ICdvd2wtcmVzcG9uc2l2ZScsXHJcblx0XHRkcmFnQ2xhc3M6ICdvd2wtZHJhZycsXHJcblx0XHRpdGVtQ2xhc3M6ICdvd2wtaXRlbScsXHJcblx0XHRzdGFnZUNsYXNzOiAnb3dsLXN0YWdlJyxcclxuXHRcdHN0YWdlT3V0ZXJDbGFzczogJ293bC1zdGFnZS1vdXRlcicsXHJcblx0XHRncmFiQ2xhc3M6ICdvd2wtZ3JhYidcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBFbnVtZXJhdGlvbiBmb3Igd2lkdGguXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEByZWFkb25seVxyXG5cdCAqIEBlbnVtIHtTdHJpbmd9XHJcblx0ICovXHJcblx0T3dsLldpZHRoID0ge1xyXG5cdFx0RGVmYXVsdDogJ2RlZmF1bHQnLFxyXG5cdFx0SW5uZXI6ICdpbm5lcicsXHJcblx0XHRPdXRlcjogJ291dGVyJ1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEVudW1lcmF0aW9uIGZvciB0eXBlcy5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHJlYWRvbmx5XHJcblx0ICogQGVudW0ge1N0cmluZ31cclxuXHQgKi9cclxuXHRPd2wuVHlwZSA9IHtcclxuXHRcdEV2ZW50OiAnZXZlbnQnLFxyXG5cdFx0U3RhdGU6ICdzdGF0ZSdcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBDb250YWlucyBhbGwgcmVnaXN0ZXJlZCBwbHVnaW5zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRPd2wuUGx1Z2lucyA9IHt9O1xyXG5cclxuXHQvKipcclxuXHQgKiBMaXN0IG9mIHdvcmtlcnMgaW52b2x2ZWQgaW4gdGhlIHVwZGF0ZSBwcm9jZXNzLlxyXG5cdCAqL1xyXG5cdE93bC5Xb3JrZXJzID0gWyB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fd2lkdGggPSB0aGlzLiRlbGVtZW50LndpZHRoKCk7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oY2FjaGUpIHtcclxuXHRcdFx0Y2FjaGUuY3VycmVudCA9IHRoaXMuX2l0ZW1zICYmIHRoaXMuX2l0ZW1zW3RoaXMucmVsYXRpdmUodGhpcy5fY3VycmVudCldO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5jaGlsZHJlbignLmNsb25lZCcpLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKGNhY2hlKSB7XHJcblx0XHRcdHZhciBtYXJnaW4gPSB0aGlzLnNldHRpbmdzLm1hcmdpbiB8fCAnJyxcclxuXHRcdFx0XHRncmlkID0gIXRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoLFxyXG5cdFx0XHRcdHJ0bCA9IHRoaXMuc2V0dGluZ3MucnRsLFxyXG5cdFx0XHRcdGNzcyA9IHtcclxuXHRcdFx0XHRcdCd3aWR0aCc6ICdhdXRvJyxcclxuXHRcdFx0XHRcdCdtYXJnaW4tbGVmdCc6IHJ0bCA/IG1hcmdpbiA6ICcnLFxyXG5cdFx0XHRcdFx0J21hcmdpbi1yaWdodCc6IHJ0bCA/ICcnIDogbWFyZ2luXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdCFncmlkICYmIHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuY3NzKGNzcyk7XHJcblxyXG5cdFx0XHRjYWNoZS5jc3MgPSBjc3M7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oY2FjaGUpIHtcclxuXHRcdFx0dmFyIHdpZHRoID0gKHRoaXMud2lkdGgoKSAvIHRoaXMuc2V0dGluZ3MuaXRlbXMpLnRvRml4ZWQoMykgLSB0aGlzLnNldHRpbmdzLm1hcmdpbixcclxuXHRcdFx0XHRtZXJnZSA9IG51bGwsXHJcblx0XHRcdFx0aXRlcmF0b3IgPSB0aGlzLl9pdGVtcy5sZW5ndGgsXHJcblx0XHRcdFx0Z3JpZCA9ICF0aGlzLnNldHRpbmdzLmF1dG9XaWR0aCxcclxuXHRcdFx0XHR3aWR0aHMgPSBbXTtcclxuXHJcblx0XHRcdGNhY2hlLml0ZW1zID0ge1xyXG5cdFx0XHRcdG1lcmdlOiBmYWxzZSxcclxuXHRcdFx0XHR3aWR0aDogd2lkdGhcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHdoaWxlIChpdGVyYXRvci0tKSB7XHJcblx0XHRcdFx0bWVyZ2UgPSB0aGlzLl9tZXJnZXJzW2l0ZXJhdG9yXTtcclxuXHRcdFx0XHRtZXJnZSA9IHRoaXMuc2V0dGluZ3MubWVyZ2VGaXQgJiYgTWF0aC5taW4obWVyZ2UsIHRoaXMuc2V0dGluZ3MuaXRlbXMpIHx8IG1lcmdlO1xyXG5cclxuXHRcdFx0XHRjYWNoZS5pdGVtcy5tZXJnZSA9IG1lcmdlID4gMSB8fCBjYWNoZS5pdGVtcy5tZXJnZTtcclxuXHJcblx0XHRcdFx0d2lkdGhzW2l0ZXJhdG9yXSA9ICFncmlkID8gdGhpcy5faXRlbXNbaXRlcmF0b3JdLndpZHRoKCkgOiB3aWR0aCAqIG1lcmdlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl93aWR0aHMgPSB3aWR0aHM7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjbG9uZXMgPSBbXSxcclxuXHRcdFx0XHRpdGVtcyA9IHRoaXMuX2l0ZW1zLFxyXG5cdFx0XHRcdHNldHRpbmdzID0gdGhpcy5zZXR0aW5ncyxcclxuXHRcdFx0XHQvLyBUT0RPOiBTaG91bGQgYmUgY29tcHV0ZWQgZnJvbSBudW1iZXIgb2YgbWluIHdpZHRoIGl0ZW1zIGluIHN0YWdlXHJcblx0XHRcdFx0dmlldyA9IE1hdGgubWF4KHNldHRpbmdzLml0ZW1zICogMiwgNCksXHJcblx0XHRcdFx0c2l6ZSA9IE1hdGguY2VpbChpdGVtcy5sZW5ndGggLyAyKSAqIDIsXHJcblx0XHRcdFx0cmVwZWF0ID0gc2V0dGluZ3MubG9vcCAmJiBpdGVtcy5sZW5ndGggPyBzZXR0aW5ncy5yZXdpbmQgPyB2aWV3IDogTWF0aC5tYXgodmlldywgc2l6ZSkgOiAwLFxyXG5cdFx0XHRcdGFwcGVuZCA9ICcnLFxyXG5cdFx0XHRcdHByZXBlbmQgPSAnJztcclxuXHJcblx0XHRcdHJlcGVhdCAvPSAyO1xyXG5cclxuXHRcdFx0d2hpbGUgKHJlcGVhdC0tKSB7XHJcblx0XHRcdFx0Ly8gU3dpdGNoIHRvIG9ubHkgdXNpbmcgYXBwZW5kZWQgY2xvbmVzXHJcblx0XHRcdFx0Y2xvbmVzLnB1c2godGhpcy5ub3JtYWxpemUoY2xvbmVzLmxlbmd0aCAvIDIsIHRydWUpKTtcclxuXHRcdFx0XHRhcHBlbmQgPSBhcHBlbmQgKyBpdGVtc1tjbG9uZXNbY2xvbmVzLmxlbmd0aCAtIDFdXVswXS5vdXRlckhUTUw7XHJcblx0XHRcdFx0Y2xvbmVzLnB1c2godGhpcy5ub3JtYWxpemUoaXRlbXMubGVuZ3RoIC0gMSAtIChjbG9uZXMubGVuZ3RoIC0gMSkgLyAyLCB0cnVlKSk7XHJcblx0XHRcdFx0cHJlcGVuZCA9IGl0ZW1zW2Nsb25lc1tjbG9uZXMubGVuZ3RoIC0gMV1dWzBdLm91dGVySFRNTCArIHByZXBlbmQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2Nsb25lcyA9IGNsb25lcztcclxuXHJcblx0XHRcdCQoYXBwZW5kKS5hZGRDbGFzcygnY2xvbmVkJykuYXBwZW5kVG8odGhpcy4kc3RhZ2UpO1xyXG5cdFx0XHQkKHByZXBlbmQpLmFkZENsYXNzKCdjbG9uZWQnKS5wcmVwZW5kVG8odGhpcy4kc3RhZ2UpO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcnRsID0gdGhpcy5zZXR0aW5ncy5ydGwgPyAxIDogLTEsXHJcblx0XHRcdFx0c2l6ZSA9IHRoaXMuX2Nsb25lcy5sZW5ndGggKyB0aGlzLl9pdGVtcy5sZW5ndGgsXHJcblx0XHRcdFx0aXRlcmF0b3IgPSAtMSxcclxuXHRcdFx0XHRwcmV2aW91cyA9IDAsXHJcblx0XHRcdFx0Y3VycmVudCA9IDAsXHJcblx0XHRcdFx0Y29vcmRpbmF0ZXMgPSBbXTtcclxuXHJcblx0XHRcdHdoaWxlICgrK2l0ZXJhdG9yIDwgc2l6ZSkge1xyXG5cdFx0XHRcdHByZXZpb3VzID0gY29vcmRpbmF0ZXNbaXRlcmF0b3IgLSAxXSB8fCAwO1xyXG5cdFx0XHRcdGN1cnJlbnQgPSB0aGlzLl93aWR0aHNbdGhpcy5yZWxhdGl2ZShpdGVyYXRvcildICsgdGhpcy5zZXR0aW5ncy5tYXJnaW47XHJcblx0XHRcdFx0Y29vcmRpbmF0ZXMucHVzaChwcmV2aW91cyArIGN1cnJlbnQgKiBydGwpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9jb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFkZGluZyA9IHRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nLFxyXG5cdFx0XHRcdGNvb3JkaW5hdGVzID0gdGhpcy5fY29vcmRpbmF0ZXMsXHJcblx0XHRcdFx0Y3NzID0ge1xyXG5cdFx0XHRcdFx0J3dpZHRoJzogTWF0aC5jZWlsKE1hdGguYWJzKGNvb3JkaW5hdGVzW2Nvb3JkaW5hdGVzLmxlbmd0aCAtIDFdKSkgKyBwYWRkaW5nICogMixcclxuXHRcdFx0XHRcdCdwYWRkaW5nLWxlZnQnOiBwYWRkaW5nIHx8ICcnLFxyXG5cdFx0XHRcdFx0J3BhZGRpbmctcmlnaHQnOiBwYWRkaW5nIHx8ICcnXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdHRoaXMuJHN0YWdlLmNzcyhjc3MpO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKGNhY2hlKSB7XHJcblx0XHRcdHZhciBpdGVyYXRvciA9IHRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aCxcclxuXHRcdFx0XHRncmlkID0gIXRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoLFxyXG5cdFx0XHRcdGl0ZW1zID0gdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKTtcclxuXHJcblx0XHRcdGlmIChncmlkICYmIGNhY2hlLml0ZW1zLm1lcmdlKSB7XHJcblx0XHRcdFx0d2hpbGUgKGl0ZXJhdG9yLS0pIHtcclxuXHRcdFx0XHRcdGNhY2hlLmNzcy53aWR0aCA9IHRoaXMuX3dpZHRoc1t0aGlzLnJlbGF0aXZlKGl0ZXJhdG9yKV07XHJcblx0XHRcdFx0XHRpdGVtcy5lcShpdGVyYXRvcikuY3NzKGNhY2hlLmNzcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2UgaWYgKGdyaWQpIHtcclxuXHRcdFx0XHRjYWNoZS5jc3Mud2lkdGggPSBjYWNoZS5pdGVtcy53aWR0aDtcclxuXHRcdFx0XHRpdGVtcy5jc3MoY2FjaGUuY3NzKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnaXRlbXMnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9jb29yZGluYXRlcy5sZW5ndGggPCAxICYmIHRoaXMuJHN0YWdlLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oY2FjaGUpIHtcclxuXHRcdFx0Y2FjaGUuY3VycmVudCA9IGNhY2hlLmN1cnJlbnQgPyB0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmluZGV4KGNhY2hlLmN1cnJlbnQpIDogMDtcclxuXHRcdFx0Y2FjaGUuY3VycmVudCA9IE1hdGgubWF4KHRoaXMubWluaW11bSgpLCBNYXRoLm1pbih0aGlzLm1heGltdW0oKSwgY2FjaGUuY3VycmVudCkpO1xyXG5cdFx0XHR0aGlzLnJlc2V0KGNhY2hlLmN1cnJlbnQpO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAncG9zaXRpb24nIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmFuaW1hdGUodGhpcy5jb29yZGluYXRlcyh0aGlzLl9jdXJyZW50KSk7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdwb3NpdGlvbicsICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBydGwgPSB0aGlzLnNldHRpbmdzLnJ0bCA/IDEgOiAtMSxcclxuXHRcdFx0XHRwYWRkaW5nID0gdGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmcgKiAyLFxyXG5cdFx0XHRcdGJlZ2luID0gdGhpcy5jb29yZGluYXRlcyh0aGlzLmN1cnJlbnQoKSkgKyBwYWRkaW5nLFxyXG5cdFx0XHRcdGVuZCA9IGJlZ2luICsgdGhpcy53aWR0aCgpICogcnRsLFxyXG5cdFx0XHRcdGlubmVyLCBvdXRlciwgbWF0Y2hlcyA9IFtdLCBpLCBuO1xyXG5cclxuXHRcdFx0Zm9yIChpID0gMCwgbiA9IHRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG5cdFx0XHRcdGlubmVyID0gdGhpcy5fY29vcmRpbmF0ZXNbaSAtIDFdIHx8IDA7XHJcblx0XHRcdFx0b3V0ZXIgPSBNYXRoLmFicyh0aGlzLl9jb29yZGluYXRlc1tpXSkgKyBwYWRkaW5nICogcnRsO1xyXG5cclxuXHRcdFx0XHRpZiAoKHRoaXMub3AoaW5uZXIsICc8PScsIGJlZ2luKSAmJiAodGhpcy5vcChpbm5lciwgJz4nLCBlbmQpKSlcclxuXHRcdFx0XHRcdHx8ICh0aGlzLm9wKG91dGVyLCAnPCcsIGJlZ2luKSAmJiB0aGlzLm9wKG91dGVyLCAnPicsIGVuZCkpKSB7XHJcblx0XHRcdFx0XHRtYXRjaGVzLnB1c2goaSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLiRzdGFnZS5jaGlsZHJlbignLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0dGhpcy4kc3RhZ2UuY2hpbGRyZW4oJzplcSgnICsgbWF0Y2hlcy5qb2luKCcpLCA6ZXEoJykgKyAnKScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmNlbnRlcikge1xyXG5cdFx0XHRcdHRoaXMuJHN0YWdlLmNoaWxkcmVuKCcuY2VudGVyJykucmVtb3ZlQ2xhc3MoJ2NlbnRlcicpO1xyXG5cdFx0XHRcdHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuZXEodGhpcy5jdXJyZW50KCkpLmFkZENsYXNzKCdjZW50ZXInKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0gXTtcclxuXHJcblx0LyoqXHJcblx0ICogSW5pdGlhbGl6ZXMgdGhlIGNhcm91c2VsLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZW50ZXIoJ2luaXRpYWxpemluZycpO1xyXG5cdFx0dGhpcy50cmlnZ2VyKCdpbml0aWFsaXplJyk7XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyh0aGlzLnNldHRpbmdzLnJ0bENsYXNzLCB0aGlzLnNldHRpbmdzLnJ0bCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoICYmICF0aGlzLmlzKCdwcmUtbG9hZGluZycpKSB7XHJcblx0XHRcdHZhciBpbWdzLCBuZXN0ZWRTZWxlY3Rvciwgd2lkdGg7XHJcblx0XHRcdGltZ3MgPSB0aGlzLiRlbGVtZW50LmZpbmQoJ2ltZycpO1xyXG5cdFx0XHRuZXN0ZWRTZWxlY3RvciA9IHRoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yID8gJy4nICsgdGhpcy5zZXR0aW5ncy5uZXN0ZWRJdGVtU2VsZWN0b3IgOiB1bmRlZmluZWQ7XHJcblx0XHRcdHdpZHRoID0gdGhpcy4kZWxlbWVudC5jaGlsZHJlbihuZXN0ZWRTZWxlY3Rvcikud2lkdGgoKTtcclxuXHJcblx0XHRcdGlmIChpbWdzLmxlbmd0aCAmJiB3aWR0aCA8PSAwKSB7XHJcblx0XHRcdFx0dGhpcy5wcmVsb2FkQXV0b1dpZHRoSW1hZ2VzKGltZ3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMubG9hZGluZ0NsYXNzKTtcclxuXHJcblx0XHQvLyBjcmVhdGUgc3RhZ2VcclxuXHRcdHRoaXMuJHN0YWdlID0gJCgnPCcgKyB0aGlzLnNldHRpbmdzLnN0YWdlRWxlbWVudCArICcgY2xhc3M9XCInICsgdGhpcy5zZXR0aW5ncy5zdGFnZUNsYXNzICsgJ1wiLz4nKVxyXG5cdFx0XHQud3JhcCgnPGRpdiBjbGFzcz1cIicgKyB0aGlzLnNldHRpbmdzLnN0YWdlT3V0ZXJDbGFzcyArICdcIi8+Jyk7XHJcblxyXG5cdFx0Ly8gYXBwZW5kIHN0YWdlXHJcblx0XHR0aGlzLiRlbGVtZW50LmFwcGVuZCh0aGlzLiRzdGFnZS5wYXJlbnQoKSk7XHJcblxyXG5cdFx0Ly8gYXBwZW5kIGNvbnRlbnRcclxuXHRcdHRoaXMucmVwbGFjZSh0aGlzLiRlbGVtZW50LmNoaWxkcmVuKCkubm90KHRoaXMuJHN0YWdlLnBhcmVudCgpKSk7XHJcblxyXG5cdFx0Ly8gY2hlY2sgdmlzaWJpbGl0eVxyXG5cdFx0aWYgKHRoaXMuJGVsZW1lbnQuaXMoJzp2aXNpYmxlJykpIHtcclxuXHRcdFx0Ly8gdXBkYXRlIHZpZXdcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBpbnZhbGlkYXRlIHdpZHRoXHJcblx0XHRcdHRoaXMuaW52YWxpZGF0ZSgnd2lkdGgnKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLiRlbGVtZW50XHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMubG9hZGluZ0NsYXNzKVxyXG5cdFx0XHQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmxvYWRlZENsYXNzKTtcclxuXHJcblx0XHQvLyByZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50SGFuZGxlcnMoKTtcclxuXHJcblx0XHR0aGlzLmxlYXZlKCdpbml0aWFsaXppbmcnKTtcclxuXHRcdHRoaXMudHJpZ2dlcignaW5pdGlhbGl6ZWQnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTZXR1cHMgdGhlIGN1cnJlbnQgc2V0dGluZ3MuXHJcblx0ICogQHRvZG8gUmVtb3ZlIHJlc3BvbnNpdmUgY2xhc3Nlcy4gV2h5IHNob3VsZCBhZGFwdGl2ZSBkZXNpZ25zIGJlIGJyb3VnaHQgaW50byBJRTg/XHJcblx0ICogQHRvZG8gU3VwcG9ydCBmb3IgbWVkaWEgcXVlcmllcyBieSB1c2luZyBgbWF0Y2hNZWRpYWAgd291bGQgYmUgbmljZS5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5zZXR1cCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydCgpLFxyXG5cdFx0XHRvdmVyd3JpdGVzID0gdGhpcy5vcHRpb25zLnJlc3BvbnNpdmUsXHJcblx0XHRcdG1hdGNoID0gLTEsXHJcblx0XHRcdHNldHRpbmdzID0gbnVsbDtcclxuXHJcblx0XHRpZiAoIW92ZXJ3cml0ZXMpIHtcclxuXHRcdFx0c2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQuZWFjaChvdmVyd3JpdGVzLCBmdW5jdGlvbihicmVha3BvaW50KSB7XHJcblx0XHRcdFx0aWYgKGJyZWFrcG9pbnQgPD0gdmlld3BvcnQgJiYgYnJlYWtwb2ludCA+IG1hdGNoKSB7XHJcblx0XHRcdFx0XHRtYXRjaCA9IE51bWJlcihicmVha3BvaW50KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0c2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCBvdmVyd3JpdGVzW21hdGNoXSk7XHJcblx0XHRcdGlmICh0eXBlb2Ygc2V0dGluZ3Muc3RhZ2VQYWRkaW5nID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0c2V0dGluZ3Muc3RhZ2VQYWRkaW5nID0gc2V0dGluZ3Muc3RhZ2VQYWRkaW5nKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZGVsZXRlIHNldHRpbmdzLnJlc3BvbnNpdmU7XHJcblxyXG5cdFx0XHQvLyByZXNwb25zaXZlIGNsYXNzXHJcblx0XHRcdGlmIChzZXR0aW5ncy5yZXNwb25zaXZlQ2xhc3MpIHtcclxuXHRcdFx0XHR0aGlzLiRlbGVtZW50LmF0dHIoJ2NsYXNzJyxcclxuXHRcdFx0XHRcdHRoaXMuJGVsZW1lbnQuYXR0cignY2xhc3MnKS5yZXBsYWNlKG5ldyBSZWdFeHAoJygnICsgdGhpcy5vcHRpb25zLnJlc3BvbnNpdmVDbGFzcyArICctKVxcXFxTK1xcXFxzJywgJ2cnKSwgJyQxJyArIG1hdGNoKVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHsgcHJvcGVydHk6IHsgbmFtZTogJ3NldHRpbmdzJywgdmFsdWU6IHNldHRpbmdzIH0gfSk7XHJcblx0XHR0aGlzLl9icmVha3BvaW50ID0gbWF0Y2g7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLmludmFsaWRhdGUoJ3NldHRpbmdzJyk7XHJcblx0XHR0aGlzLnRyaWdnZXIoJ2NoYW5nZWQnLCB7IHByb3BlcnR5OiB7IG5hbWU6ICdzZXR0aW5ncycsIHZhbHVlOiB0aGlzLnNldHRpbmdzIH0gfSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlcyBvcHRpb24gbG9naWMgaWYgbmVjZXNzZXJ5LlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9wdGlvbnNMb2dpYyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoKSB7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MubWVyZ2UgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBQcmVwYXJlcyBhbiBpdGVtIGJlZm9yZSBhZGQuXHJcblx0ICogQHRvZG8gUmVuYW1lIGV2ZW50IHBhcmFtZXRlciBgY29udGVudGAgdG8gYGl0ZW1gLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcmV0dXJucyB7alF1ZXJ5fEhUTUxFbGVtZW50fSAtIFRoZSBpdGVtIGNvbnRhaW5lci5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnByZXBhcmUgPSBmdW5jdGlvbihpdGVtKSB7XHJcblx0XHR2YXIgZXZlbnQgPSB0aGlzLnRyaWdnZXIoJ3ByZXBhcmUnLCB7IGNvbnRlbnQ6IGl0ZW0gfSk7XHJcblxyXG5cdFx0aWYgKCFldmVudC5kYXRhKSB7XHJcblx0XHRcdGV2ZW50LmRhdGEgPSAkKCc8JyArIHRoaXMuc2V0dGluZ3MuaXRlbUVsZW1lbnQgKyAnLz4nKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuaXRlbUNsYXNzKS5hcHBlbmQoaXRlbSlcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnRyaWdnZXIoJ3ByZXBhcmVkJywgeyBjb250ZW50OiBldmVudC5kYXRhIH0pO1xyXG5cclxuXHRcdHJldHVybiBldmVudC5kYXRhO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZXMgdGhlIHZpZXcuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaSA9IDAsXHJcblx0XHRcdG4gPSB0aGlzLl9waXBlLmxlbmd0aCxcclxuXHRcdFx0ZmlsdGVyID0gJC5wcm94eShmdW5jdGlvbihwKSB7IHJldHVybiB0aGlzW3BdIH0sIHRoaXMuX2ludmFsaWRhdGVkKSxcclxuXHRcdFx0Y2FjaGUgPSB7fTtcclxuXHJcblx0XHR3aGlsZSAoaSA8IG4pIHtcclxuXHRcdFx0aWYgKHRoaXMuX2ludmFsaWRhdGVkLmFsbCB8fCAkLmdyZXAodGhpcy5fcGlwZVtpXS5maWx0ZXIsIGZpbHRlcikubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdHRoaXMuX3BpcGVbaV0ucnVuKGNhY2hlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpKys7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5faW52YWxpZGF0ZWQgPSB7fTtcclxuXHJcblx0XHQhdGhpcy5pcygndmFsaWQnKSAmJiB0aGlzLmVudGVyKCd2YWxpZCcpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIHdpZHRoIG9mIHRoZSB2aWV3LlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge093bC5XaWR0aH0gW2RpbWVuc2lvbj1Pd2wuV2lkdGguRGVmYXVsdF0gLSBUaGUgZGltZW5zaW9uIHRvIHJldHVybi5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfSAtIFRoZSB3aWR0aCBvZiB0aGUgdmlldyBpbiBwaXhlbC5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLndpZHRoID0gZnVuY3Rpb24oZGltZW5zaW9uKSB7XHJcblx0XHRkaW1lbnNpb24gPSBkaW1lbnNpb24gfHwgT3dsLldpZHRoLkRlZmF1bHQ7XHJcblx0XHRzd2l0Y2ggKGRpbWVuc2lvbikge1xyXG5cdFx0XHRjYXNlIE93bC5XaWR0aC5Jbm5lcjpcclxuXHRcdFx0Y2FzZSBPd2wuV2lkdGguT3V0ZXI6XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3dpZHRoO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybiB0aGlzLl93aWR0aCAtIHRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nICogMiArIHRoaXMuc2V0dGluZ3MubWFyZ2luO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZnJlc2hlcyB0aGUgY2Fyb3VzZWwgcHJpbWFyaWx5IGZvciBhZGFwdGl2ZSBwdXJwb3Nlcy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVudGVyKCdyZWZyZXNoaW5nJyk7XHJcblx0XHR0aGlzLnRyaWdnZXIoJ3JlZnJlc2gnKTtcclxuXHJcblx0XHR0aGlzLnNldHVwKCk7XHJcblxyXG5cdFx0dGhpcy5vcHRpb25zTG9naWMoKTtcclxuXHJcblx0XHR0aGlzLiRlbGVtZW50LmFkZENsYXNzKHRoaXMub3B0aW9ucy5yZWZyZXNoQ2xhc3MpO1xyXG5cclxuXHRcdHRoaXMudXBkYXRlKCk7XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMucmVmcmVzaENsYXNzKTtcclxuXHJcblx0XHR0aGlzLmxlYXZlKCdyZWZyZXNoaW5nJyk7XHJcblx0XHR0aGlzLnRyaWdnZXIoJ3JlZnJlc2hlZCcpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyB3aW5kb3cgYHJlc2l6ZWAgZXZlbnQuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub25UaHJvdHRsZWRSZXNpemUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lcik7XHJcblx0XHR0aGlzLnJlc2l6ZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQodGhpcy5faGFuZGxlcnMub25SZXNpemUsIHRoaXMuc2V0dGluZ3MucmVzcG9uc2l2ZVJlZnJlc2hSYXRlKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBDaGVja3Mgd2luZG93IGByZXNpemVgIGV2ZW50LlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIXRoaXMuX2l0ZW1zLmxlbmd0aCkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuX3dpZHRoID09PSB0aGlzLiRlbGVtZW50LndpZHRoKCkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy4kZWxlbWVudC5pcygnOnZpc2libGUnKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbnRlcigncmVzaXppbmcnKTtcclxuXHJcblx0XHRpZiAodGhpcy50cmlnZ2VyKCdyZXNpemUnKS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xyXG5cdFx0XHR0aGlzLmxlYXZlKCdyZXNpemluZycpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5pbnZhbGlkYXRlKCd3aWR0aCcpO1xyXG5cclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cclxuXHRcdHRoaXMubGVhdmUoJ3Jlc2l6aW5nJyk7XHJcblx0XHR0aGlzLnRyaWdnZXIoJ3Jlc2l6ZWQnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZWdpc3RlcnMgZXZlbnQgaGFuZGxlcnMuXHJcblx0ICogQHRvZG8gQ2hlY2sgYG1zUG9pbnRlckVuYWJsZWRgXHJcblx0ICogQHRvZG8gIzI2MVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnJlZ2lzdGVyRXZlbnRIYW5kbGVycyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCQuc3VwcG9ydC50cmFuc2l0aW9uKSB7XHJcblx0XHRcdHRoaXMuJHN0YWdlLm9uKCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCArICcub3dsLmNvcmUnLCAkLnByb3h5KHRoaXMub25UcmFuc2l0aW9uRW5kLCB0aGlzKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MucmVzcG9uc2l2ZSAhPT0gZmFsc2UpIHtcclxuXHRcdFx0dGhpcy5vbih3aW5kb3csICdyZXNpemUnLCB0aGlzLl9oYW5kbGVycy5vblRocm90dGxlZFJlc2l6ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubW91c2VEcmFnKSB7XHJcblx0XHRcdHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmRyYWdDbGFzcyk7XHJcblx0XHRcdHRoaXMuJHN0YWdlLm9uKCdtb3VzZWRvd24ub3dsLmNvcmUnLCAkLnByb3h5KHRoaXMub25EcmFnU3RhcnQsIHRoaXMpKTtcclxuXHRcdFx0dGhpcy4kc3RhZ2Uub24oJ2RyYWdzdGFydC5vd2wuY29yZSBzZWxlY3RzdGFydC5vd2wuY29yZScsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2UgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MudG91Y2hEcmFnKXtcclxuXHRcdFx0dGhpcy4kc3RhZ2Uub24oJ3RvdWNoc3RhcnQub3dsLmNvcmUnLCAkLnByb3h5KHRoaXMub25EcmFnU3RhcnQsIHRoaXMpKTtcclxuXHRcdFx0dGhpcy4kc3RhZ2Uub24oJ3RvdWNoY2FuY2VsLm93bC5jb3JlJywgJC5wcm94eSh0aGlzLm9uRHJhZ0VuZCwgdGhpcykpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgYHRvdWNoc3RhcnRgIGFuZCBgbW91c2Vkb3duYCBldmVudHMuXHJcblx0ICogQHRvZG8gSG9yaXpvbnRhbCBzd2lwZSB0aHJlc2hvbGQgYXMgb3B0aW9uXHJcblx0ICogQHRvZG8gIzI2MVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIFRoZSBldmVudCBhcmd1bWVudHMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vbkRyYWdTdGFydCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHR2YXIgc3RhZ2UgPSBudWxsO1xyXG5cclxuXHRcdGlmIChldmVudC53aGljaCA9PT0gMykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCQuc3VwcG9ydC50cmFuc2Zvcm0pIHtcclxuXHRcdFx0c3RhZ2UgPSB0aGlzLiRzdGFnZS5jc3MoJ3RyYW5zZm9ybScpLnJlcGxhY2UoLy4qXFwofFxcKXwgL2csICcnKS5zcGxpdCgnLCcpO1xyXG5cdFx0XHRzdGFnZSA9IHtcclxuXHRcdFx0XHR4OiBzdGFnZVtzdGFnZS5sZW5ndGggPT09IDE2ID8gMTIgOiA0XSxcclxuXHRcdFx0XHR5OiBzdGFnZVtzdGFnZS5sZW5ndGggPT09IDE2ID8gMTMgOiA1XVxyXG5cdFx0XHR9O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3RhZ2UgPSB0aGlzLiRzdGFnZS5wb3NpdGlvbigpO1xyXG5cdFx0XHRzdGFnZSA9IHtcclxuXHRcdFx0XHR4OiB0aGlzLnNldHRpbmdzLnJ0bCA/XHJcblx0XHRcdFx0XHRzdGFnZS5sZWZ0ICsgdGhpcy4kc3RhZ2Uud2lkdGgoKSAtIHRoaXMud2lkdGgoKSArIHRoaXMuc2V0dGluZ3MubWFyZ2luIDpcclxuXHRcdFx0XHRcdHN0YWdlLmxlZnQsXHJcblx0XHRcdFx0eTogc3RhZ2UudG9wXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuaXMoJ2FuaW1hdGluZycpKSB7XHJcblx0XHRcdCQuc3VwcG9ydC50cmFuc2Zvcm0gPyB0aGlzLmFuaW1hdGUoc3RhZ2UueCkgOiB0aGlzLiRzdGFnZS5zdG9wKClcclxuXHRcdFx0dGhpcy5pbnZhbGlkYXRlKCdwb3NpdGlvbicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnQudG9nZ2xlQ2xhc3ModGhpcy5vcHRpb25zLmdyYWJDbGFzcywgZXZlbnQudHlwZSA9PT0gJ21vdXNlZG93bicpO1xyXG5cclxuXHRcdHRoaXMuc3BlZWQoMCk7XHJcblxyXG5cdFx0dGhpcy5fZHJhZy50aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHR0aGlzLl9kcmFnLnRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuXHRcdHRoaXMuX2RyYWcuc3RhZ2Uuc3RhcnQgPSBzdGFnZTtcclxuXHRcdHRoaXMuX2RyYWcuc3RhZ2UuY3VycmVudCA9IHN0YWdlO1xyXG5cdFx0dGhpcy5fZHJhZy5wb2ludGVyID0gdGhpcy5wb2ludGVyKGV2ZW50KTtcclxuXHJcblx0XHQkKGRvY3VtZW50KS5vbignbW91c2V1cC5vd2wuY29yZSB0b3VjaGVuZC5vd2wuY29yZScsICQucHJveHkodGhpcy5vbkRyYWdFbmQsIHRoaXMpKTtcclxuXHJcblx0XHQkKGRvY3VtZW50KS5vbmUoJ21vdXNlbW92ZS5vd2wuY29yZSB0b3VjaG1vdmUub3dsLmNvcmUnLCAkLnByb3h5KGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdHZhciBkZWx0YSA9IHRoaXMuZGlmZmVyZW5jZSh0aGlzLl9kcmFnLnBvaW50ZXIsIHRoaXMucG9pbnRlcihldmVudCkpO1xyXG5cclxuXHRcdFx0JChkb2N1bWVudCkub24oJ21vdXNlbW92ZS5vd2wuY29yZSB0b3VjaG1vdmUub3dsLmNvcmUnLCAkLnByb3h5KHRoaXMub25EcmFnTW92ZSwgdGhpcykpO1xyXG5cclxuXHRcdFx0aWYgKE1hdGguYWJzKGRlbHRhLngpIDwgTWF0aC5hYnMoZGVsdGEueSkgJiYgdGhpcy5pcygndmFsaWQnKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdHRoaXMuZW50ZXIoJ2RyYWdnaW5nJyk7XHJcblx0XHRcdHRoaXMudHJpZ2dlcignZHJhZycpO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgdGhlIGB0b3VjaG1vdmVgIGFuZCBgbW91c2Vtb3ZlYCBldmVudHMuXHJcblx0ICogQHRvZG8gIzI2MVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIFRoZSBldmVudCBhcmd1bWVudHMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vbkRyYWdNb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdHZhciBtaW5pbXVtID0gbnVsbCxcclxuXHRcdFx0bWF4aW11bSA9IG51bGwsXHJcblx0XHRcdHB1bGwgPSBudWxsLFxyXG5cdFx0XHRkZWx0YSA9IHRoaXMuZGlmZmVyZW5jZSh0aGlzLl9kcmFnLnBvaW50ZXIsIHRoaXMucG9pbnRlcihldmVudCkpLFxyXG5cdFx0XHRzdGFnZSA9IHRoaXMuZGlmZmVyZW5jZSh0aGlzLl9kcmFnLnN0YWdlLnN0YXJ0LCBkZWx0YSk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLmlzKCdkcmFnZ2luZycpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmxvb3ApIHtcclxuXHRcdFx0bWluaW11bSA9IHRoaXMuY29vcmRpbmF0ZXModGhpcy5taW5pbXVtKCkpO1xyXG5cdFx0XHRtYXhpbXVtID0gdGhpcy5jb29yZGluYXRlcyh0aGlzLm1heGltdW0oKSArIDEpIC0gbWluaW11bTtcclxuXHRcdFx0c3RhZ2UueCA9ICgoKHN0YWdlLnggLSBtaW5pbXVtKSAlIG1heGltdW0gKyBtYXhpbXVtKSAlIG1heGltdW0pICsgbWluaW11bTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG1pbmltdW0gPSB0aGlzLnNldHRpbmdzLnJ0bCA/IHRoaXMuY29vcmRpbmF0ZXModGhpcy5tYXhpbXVtKCkpIDogdGhpcy5jb29yZGluYXRlcyh0aGlzLm1pbmltdW0oKSk7XHJcblx0XHRcdG1heGltdW0gPSB0aGlzLnNldHRpbmdzLnJ0bCA/IHRoaXMuY29vcmRpbmF0ZXModGhpcy5taW5pbXVtKCkpIDogdGhpcy5jb29yZGluYXRlcyh0aGlzLm1heGltdW0oKSk7XHJcblx0XHRcdHB1bGwgPSB0aGlzLnNldHRpbmdzLnB1bGxEcmFnID8gLTEgKiBkZWx0YS54IC8gNSA6IDA7XHJcblx0XHRcdHN0YWdlLnggPSBNYXRoLm1heChNYXRoLm1pbihzdGFnZS54LCBtaW5pbXVtICsgcHVsbCksIG1heGltdW0gKyBwdWxsKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9kcmFnLnN0YWdlLmN1cnJlbnQgPSBzdGFnZTtcclxuXHJcblx0XHR0aGlzLmFuaW1hdGUoc3RhZ2UueCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB0aGUgYHRvdWNoZW5kYCBhbmQgYG1vdXNldXBgIGV2ZW50cy5cclxuXHQgKiBAdG9kbyAjMjYxXHJcblx0ICogQHRvZG8gVGhyZXNob2xkIGZvciBjbGljayBldmVudFxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIFRoZSBldmVudCBhcmd1bWVudHMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vbkRyYWdFbmQgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0dmFyIGRlbHRhID0gdGhpcy5kaWZmZXJlbmNlKHRoaXMuX2RyYWcucG9pbnRlciwgdGhpcy5wb2ludGVyKGV2ZW50KSksXHJcblx0XHRcdHN0YWdlID0gdGhpcy5fZHJhZy5zdGFnZS5jdXJyZW50LFxyXG5cdFx0XHRkaXJlY3Rpb24gPSBkZWx0YS54ID4gMCBeIHRoaXMuc2V0dGluZ3MucnRsID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuXHJcblx0XHQkKGRvY3VtZW50KS5vZmYoJy5vd2wuY29yZScpO1xyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmdyYWJDbGFzcyk7XHJcblxyXG5cdFx0aWYgKGRlbHRhLnggIT09IDAgJiYgdGhpcy5pcygnZHJhZ2dpbmcnKSB8fCAhdGhpcy5pcygndmFsaWQnKSkge1xyXG5cdFx0XHR0aGlzLnNwZWVkKHRoaXMuc2V0dGluZ3MuZHJhZ0VuZFNwZWVkIHx8IHRoaXMuc2V0dGluZ3Muc21hcnRTcGVlZCk7XHJcblx0XHRcdHRoaXMuY3VycmVudCh0aGlzLmNsb3Nlc3Qoc3RhZ2UueCwgZGVsdGEueCAhPT0gMCA/IGRpcmVjdGlvbiA6IHRoaXMuX2RyYWcuZGlyZWN0aW9uKSk7XHJcblx0XHRcdHRoaXMuaW52YWxpZGF0ZSgncG9zaXRpb24nKTtcclxuXHRcdFx0dGhpcy51cGRhdGUoKTtcclxuXHJcblx0XHRcdHRoaXMuX2RyYWcuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG5cclxuXHRcdFx0aWYgKE1hdGguYWJzKGRlbHRhLngpID4gMyB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuX2RyYWcudGltZSA+IDMwMCkge1xyXG5cdFx0XHRcdHRoaXMuX2RyYWcudGFyZ2V0Lm9uZSgnY2xpY2sub3dsLmNvcmUnLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy5pcygnZHJhZ2dpbmcnKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5sZWF2ZSgnZHJhZ2dpbmcnKTtcclxuXHRcdHRoaXMudHJpZ2dlcignZHJhZ2dlZCcpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGNsb3Nlc3QgaXRlbSBmb3IgYSBjb29yZGluYXRlLlxyXG5cdCAqIEB0b2RvIFNldHRpbmcgYGZyZWVEcmFnYCBtYWtlcyBgY2xvc2VzdGAgbm90IHJldXNhYmxlLiBTZWUgIzE2NS5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGNvb3JkaW5hdGUgLSBUaGUgY29vcmRpbmF0ZSBpbiBwaXhlbC5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZGlyZWN0aW9uIC0gVGhlIGRpcmVjdGlvbiB0byBjaGVjayBmb3IgdGhlIGNsb3Nlc3QgaXRlbS4gRXRoZXIgYGxlZnRgIG9yIGByaWdodGAuXHJcblx0ICogQHJldHVybiB7TnVtYmVyfSAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgY2xvc2VzdCBpdGVtLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuY2xvc2VzdCA9IGZ1bmN0aW9uKGNvb3JkaW5hdGUsIGRpcmVjdGlvbikge1xyXG5cdFx0dmFyIHBvc2l0aW9uID0gLTEsXHJcblx0XHRcdHB1bGwgPSAzMCxcclxuXHRcdFx0d2lkdGggPSB0aGlzLndpZHRoKCksXHJcblx0XHRcdGNvb3JkaW5hdGVzID0gdGhpcy5jb29yZGluYXRlcygpO1xyXG5cclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5mcmVlRHJhZykge1xyXG5cdFx0XHQvLyBjaGVjayBjbG9zZXN0IGl0ZW1cclxuXHRcdFx0JC5lYWNoKGNvb3JkaW5hdGVzLCAkLnByb3h5KGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSkge1xyXG5cdFx0XHRcdC8vIG9uIGEgbGVmdCBwdWxsLCBjaGVjayBvbiBjdXJyZW50IGluZGV4XHJcblx0XHRcdFx0aWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnICYmIGNvb3JkaW5hdGUgPiB2YWx1ZSAtIHB1bGwgJiYgY29vcmRpbmF0ZSA8IHZhbHVlICsgcHVsbCkge1xyXG5cdFx0XHRcdFx0cG9zaXRpb24gPSBpbmRleDtcclxuXHRcdFx0XHQvLyBvbiBhIHJpZ2h0IHB1bGwsIGNoZWNrIG9uIHByZXZpb3VzIGluZGV4XHJcblx0XHRcdFx0Ly8gdG8gZG8gc28sIHN1YnRyYWN0IHdpZHRoIGZyb20gdmFsdWUgYW5kIHNldCBwb3NpdGlvbiA9IGluZGV4ICsgMVxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAncmlnaHQnICYmIGNvb3JkaW5hdGUgPiB2YWx1ZSAtIHdpZHRoIC0gcHVsbCAmJiBjb29yZGluYXRlIDwgdmFsdWUgLSB3aWR0aCArIHB1bGwpIHtcclxuXHRcdFx0XHRcdHBvc2l0aW9uID0gaW5kZXggKyAxO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5vcChjb29yZGluYXRlLCAnPCcsIHZhbHVlKVxyXG5cdFx0XHRcdFx0JiYgdGhpcy5vcChjb29yZGluYXRlLCAnPicsIGNvb3JkaW5hdGVzW2luZGV4ICsgMV0gfHwgdmFsdWUgLSB3aWR0aCkpIHtcclxuXHRcdFx0XHRcdHBvc2l0aW9uID0gZGlyZWN0aW9uID09PSAnbGVmdCcgPyBpbmRleCArIDEgOiBpbmRleDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHBvc2l0aW9uID09PSAtMTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5sb29wKSB7XHJcblx0XHRcdC8vIG5vbiBsb29wIGJvdW5kcmllc1xyXG5cdFx0XHRpZiAodGhpcy5vcChjb29yZGluYXRlLCAnPicsIGNvb3JkaW5hdGVzW3RoaXMubWluaW11bSgpXSkpIHtcclxuXHRcdFx0XHRwb3NpdGlvbiA9IGNvb3JkaW5hdGUgPSB0aGlzLm1pbmltdW0oKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLm9wKGNvb3JkaW5hdGUsICc8JywgY29vcmRpbmF0ZXNbdGhpcy5tYXhpbXVtKCldKSkge1xyXG5cdFx0XHRcdHBvc2l0aW9uID0gY29vcmRpbmF0ZSA9IHRoaXMubWF4aW11bSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHBvc2l0aW9uO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFuaW1hdGVzIHRoZSBzdGFnZS5cclxuXHQgKiBAdG9kbyAjMjcwXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBjb29yZGluYXRlIC0gVGhlIGNvb3JkaW5hdGUgaW4gcGl4ZWxzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uKGNvb3JkaW5hdGUpIHtcclxuXHRcdHZhciBhbmltYXRlID0gdGhpcy5zcGVlZCgpID4gMDtcclxuXHJcblx0XHR0aGlzLmlzKCdhbmltYXRpbmcnKSAmJiB0aGlzLm9uVHJhbnNpdGlvbkVuZCgpO1xyXG5cclxuXHRcdGlmIChhbmltYXRlKSB7XHJcblx0XHRcdHRoaXMuZW50ZXIoJ2FuaW1hdGluZycpO1xyXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ3RyYW5zbGF0ZScpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgkLnN1cHBvcnQudHJhbnNmb3JtM2QgJiYgJC5zdXBwb3J0LnRyYW5zaXRpb24pIHtcclxuXHRcdFx0dGhpcy4kc3RhZ2UuY3NzKHtcclxuXHRcdFx0XHR0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgnICsgY29vcmRpbmF0ZSArICdweCwwcHgsMHB4KScsXHJcblx0XHRcdFx0dHJhbnNpdGlvbjogKHRoaXMuc3BlZWQoKSAvIDEwMDApICsgJ3MnXHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIGlmIChhbmltYXRlKSB7XHJcblx0XHRcdHRoaXMuJHN0YWdlLmFuaW1hdGUoe1xyXG5cdFx0XHRcdGxlZnQ6IGNvb3JkaW5hdGUgKyAncHgnXHJcblx0XHRcdH0sIHRoaXMuc3BlZWQoKSwgdGhpcy5zZXR0aW5ncy5mYWxsYmFja0Vhc2luZywgJC5wcm94eSh0aGlzLm9uVHJhbnNpdGlvbkVuZCwgdGhpcykpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy4kc3RhZ2UuY3NzKHtcclxuXHRcdFx0XHRsZWZ0OiBjb29yZGluYXRlICsgJ3B4J1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBDaGVja3Mgd2hldGhlciB0aGUgY2Fyb3VzZWwgaXMgaW4gYSBzcGVjaWZpYyBzdGF0ZSBvciBub3QuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0YXRlIC0gVGhlIHN0YXRlIHRvIGNoZWNrLlxyXG5cdCAqIEByZXR1cm5zIHtCb29sZWFufSAtIFRoZSBmbGFnIHdoaWNoIGluZGljYXRlcyBpZiB0aGUgY2Fyb3VzZWwgaXMgYnVzeS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmlzID0gZnVuY3Rpb24oc3RhdGUpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zdGF0ZXMuY3VycmVudFtzdGF0ZV0gJiYgdGhpcy5fc3RhdGVzLmN1cnJlbnRbc3RhdGVdID4gMDtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgY3VycmVudCBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3Bvc2l0aW9uXSAtIFRoZSBuZXcgYWJzb2x1dGUgcG9zaXRpb24gb3Igbm90aGluZyB0byBsZWF2ZSBpdCB1bmNoYW5nZWQuXHJcblx0ICogQHJldHVybnMge051bWJlcn0gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGN1cnJlbnQgaXRlbS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmN1cnJlbnQgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2N1cnJlbnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuX2l0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBvc2l0aW9uID0gdGhpcy5ub3JtYWxpemUocG9zaXRpb24pO1xyXG5cclxuXHRcdGlmICh0aGlzLl9jdXJyZW50ICE9PSBwb3NpdGlvbikge1xyXG5cdFx0XHR2YXIgZXZlbnQgPSB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHsgcHJvcGVydHk6IHsgbmFtZTogJ3Bvc2l0aW9uJywgdmFsdWU6IHBvc2l0aW9uIH0gfSk7XHJcblxyXG5cdFx0XHRpZiAoZXZlbnQuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0cG9zaXRpb24gPSB0aGlzLm5vcm1hbGl6ZShldmVudC5kYXRhKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fY3VycmVudCA9IHBvc2l0aW9uO1xyXG5cclxuXHRcdFx0dGhpcy5pbnZhbGlkYXRlKCdwb3NpdGlvbicpO1xyXG5cclxuXHRcdFx0dGhpcy50cmlnZ2VyKCdjaGFuZ2VkJywgeyBwcm9wZXJ0eTogeyBuYW1lOiAncG9zaXRpb24nLCB2YWx1ZTogdGhpcy5fY3VycmVudCB9IH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLl9jdXJyZW50O1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEludmFsaWRhdGVzIHRoZSBnaXZlbiBwYXJ0IG9mIHRoZSB1cGRhdGUgcm91dGluZS5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3BhcnRdIC0gVGhlIHBhcnQgdG8gaW52YWxpZGF0ZS5cclxuXHQgKiBAcmV0dXJucyB7QXJyYXkuPFN0cmluZz59IC0gVGhlIGludmFsaWRhdGVkIHBhcnRzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuaW52YWxpZGF0ZSA9IGZ1bmN0aW9uKHBhcnQpIHtcclxuXHRcdGlmICgkLnR5cGUocGFydCkgPT09ICdzdHJpbmcnKSB7XHJcblx0XHRcdHRoaXMuX2ludmFsaWRhdGVkW3BhcnRdID0gdHJ1ZTtcclxuXHRcdFx0dGhpcy5pcygndmFsaWQnKSAmJiB0aGlzLmxlYXZlKCd2YWxpZCcpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuICQubWFwKHRoaXMuX2ludmFsaWRhdGVkLCBmdW5jdGlvbih2LCBpKSB7IHJldHVybiBpIH0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlc2V0cyB0aGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGN1cnJlbnQgaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIC0gVGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBuZXcgaXRlbS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdHBvc2l0aW9uID0gdGhpcy5ub3JtYWxpemUocG9zaXRpb24pO1xyXG5cclxuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zcGVlZCA9IDA7XHJcblx0XHR0aGlzLl9jdXJyZW50ID0gcG9zaXRpb247XHJcblxyXG5cdFx0dGhpcy5zdXBwcmVzcyhbICd0cmFuc2xhdGUnLCAndHJhbnNsYXRlZCcgXSk7XHJcblxyXG5cdFx0dGhpcy5hbmltYXRlKHRoaXMuY29vcmRpbmF0ZXMocG9zaXRpb24pKTtcclxuXHJcblx0XHR0aGlzLnJlbGVhc2UoWyAndHJhbnNsYXRlJywgJ3RyYW5zbGF0ZWQnIF0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIE5vcm1hbGl6ZXMgYW4gYWJzb2x1dGUgb3IgYSByZWxhdGl2ZSBwb3NpdGlvbiBvZiBhbiBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gLSBUaGUgYWJzb2x1dGUgb3IgcmVsYXRpdmUgcG9zaXRpb24gdG8gbm9ybWFsaXplLlxyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JlbGF0aXZlPWZhbHNlXSAtIFdoZXRoZXIgdGhlIGdpdmVuIHBvc2l0aW9uIGlzIHJlbGF0aXZlIG9yIG5vdC5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfSAtIFRoZSBub3JtYWxpemVkIHBvc2l0aW9uLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24ocG9zaXRpb24sIHJlbGF0aXZlKSB7XHJcblx0XHR2YXIgbiA9IHRoaXMuX2l0ZW1zLmxlbmd0aCxcclxuXHRcdFx0bSA9IHJlbGF0aXZlID8gMCA6IHRoaXMuX2Nsb25lcy5sZW5ndGg7XHJcblxyXG5cdFx0aWYgKCF0aGlzLmlzTnVtZXJpYyhwb3NpdGlvbikgfHwgbiA8IDEpIHtcclxuXHRcdFx0cG9zaXRpb24gPSB1bmRlZmluZWQ7XHJcblx0XHR9IGVsc2UgaWYgKHBvc2l0aW9uIDwgMCB8fCBwb3NpdGlvbiA+PSBuICsgbSkge1xyXG5cdFx0XHRwb3NpdGlvbiA9ICgocG9zaXRpb24gLSBtIC8gMikgJSBuICsgbikgJSBuICsgbSAvIDI7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHBvc2l0aW9uO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbnZlcnRzIGFuIGFic29sdXRlIHBvc2l0aW9uIG9mIGFuIGl0ZW0gaW50byBhIHJlbGF0aXZlIG9uZS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIC0gVGhlIGFic29sdXRlIHBvc2l0aW9uIHRvIGNvbnZlcnQuXHJcblx0ICogQHJldHVybnMge051bWJlcn0gLSBUaGUgY29udmVydGVkIHBvc2l0aW9uLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucmVsYXRpdmUgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0cG9zaXRpb24gLT0gdGhpcy5fY2xvbmVzLmxlbmd0aCAvIDI7XHJcblx0XHRyZXR1cm4gdGhpcy5ub3JtYWxpemUocG9zaXRpb24sIHRydWUpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIG1heGltdW0gcG9zaXRpb24gZm9yIHRoZSBjdXJyZW50IGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JlbGF0aXZlPWZhbHNlXSAtIFdoZXRoZXIgdG8gcmV0dXJuIGFuIGFic29sdXRlIHBvc2l0aW9uIG9yIGEgcmVsYXRpdmUgcG9zaXRpb24uXHJcblx0ICogQHJldHVybnMge051bWJlcn1cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm1heGltdW0gPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xyXG5cdFx0dmFyIHNldHRpbmdzID0gdGhpcy5zZXR0aW5ncyxcclxuXHRcdFx0bWF4aW11bSA9IHRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aCxcclxuXHRcdFx0aXRlcmF0b3IsXHJcblx0XHRcdHJlY2lwcm9jYWxJdGVtc1dpZHRoLFxyXG5cdFx0XHRlbGVtZW50V2lkdGg7XHJcblxyXG5cdFx0aWYgKHNldHRpbmdzLmxvb3ApIHtcclxuXHRcdFx0bWF4aW11bSA9IHRoaXMuX2Nsb25lcy5sZW5ndGggLyAyICsgdGhpcy5faXRlbXMubGVuZ3RoIC0gMTtcclxuXHRcdH0gZWxzZSBpZiAoc2V0dGluZ3MuYXV0b1dpZHRoIHx8IHNldHRpbmdzLm1lcmdlKSB7XHJcblx0XHRcdGl0ZXJhdG9yID0gdGhpcy5faXRlbXMubGVuZ3RoO1xyXG5cdFx0XHRyZWNpcHJvY2FsSXRlbXNXaWR0aCA9IHRoaXMuX2l0ZW1zWy0taXRlcmF0b3JdLndpZHRoKCk7XHJcblx0XHRcdGVsZW1lbnRXaWR0aCA9IHRoaXMuJGVsZW1lbnQud2lkdGgoKTtcclxuXHRcdFx0d2hpbGUgKGl0ZXJhdG9yLS0pIHtcclxuXHRcdFx0XHRyZWNpcHJvY2FsSXRlbXNXaWR0aCArPSB0aGlzLl9pdGVtc1tpdGVyYXRvcl0ud2lkdGgoKSArIHRoaXMuc2V0dGluZ3MubWFyZ2luO1xyXG5cdFx0XHRcdGlmIChyZWNpcHJvY2FsSXRlbXNXaWR0aCA+IGVsZW1lbnRXaWR0aCkge1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdG1heGltdW0gPSBpdGVyYXRvciArIDE7XHJcblx0XHR9IGVsc2UgaWYgKHNldHRpbmdzLmNlbnRlcikge1xyXG5cdFx0XHRtYXhpbXVtID0gdGhpcy5faXRlbXMubGVuZ3RoIC0gMTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG1heGltdW0gPSB0aGlzLl9pdGVtcy5sZW5ndGggLSBzZXR0aW5ncy5pdGVtcztcclxuXHRcdH1cclxuXHJcblx0XHRpZiAocmVsYXRpdmUpIHtcclxuXHRcdFx0bWF4aW11bSAtPSB0aGlzLl9jbG9uZXMubGVuZ3RoIC8gMjtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gTWF0aC5tYXgobWF4aW11bSwgMCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgbWluaW11bSBwb3NpdGlvbiBmb3IgdGhlIGN1cnJlbnQgaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbcmVsYXRpdmU9ZmFsc2VdIC0gV2hldGhlciB0byByZXR1cm4gYW4gYWJzb2x1dGUgcG9zaXRpb24gb3IgYSByZWxhdGl2ZSBwb3NpdGlvbi5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUubWluaW11bSA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XHJcblx0XHRyZXR1cm4gcmVsYXRpdmUgPyAwIDogdGhpcy5fY2xvbmVzLmxlbmd0aCAvIDI7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyBhbiBpdGVtIGF0IHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgcG9zaXRpb24uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbcG9zaXRpb25dIC0gVGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBpdGVtLlxyXG5cdCAqIEByZXR1cm4ge2pRdWVyeXxBcnJheS48alF1ZXJ5Pn0gLSBUaGUgaXRlbSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gb3IgYWxsIGl0ZW1zIGlmIG5vIHBvc2l0aW9uIHdhcyBnaXZlbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLml0ZW1zID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9pdGVtcy5zbGljZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBvc2l0aW9uID0gdGhpcy5ub3JtYWxpemUocG9zaXRpb24sIHRydWUpO1xyXG5cdFx0cmV0dXJuIHRoaXMuX2l0ZW1zW3Bvc2l0aW9uXTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIGFuIGl0ZW0gYXQgdGhlIHNwZWNpZmllZCByZWxhdGl2ZSBwb3NpdGlvbi5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtwb3NpdGlvbl0gLSBUaGUgcmVsYXRpdmUgcG9zaXRpb24gb2YgdGhlIGl0ZW0uXHJcblx0ICogQHJldHVybiB7alF1ZXJ5fEFycmF5LjxqUXVlcnk+fSAtIFRoZSBpdGVtIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBvciBhbGwgaXRlbXMgaWYgbm8gcG9zaXRpb24gd2FzIGdpdmVuLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUubWVyZ2VycyA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fbWVyZ2Vycy5zbGljZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBvc2l0aW9uID0gdGhpcy5ub3JtYWxpemUocG9zaXRpb24sIHRydWUpO1xyXG5cdFx0cmV0dXJuIHRoaXMuX21lcmdlcnNbcG9zaXRpb25dO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIGFic29sdXRlIHBvc2l0aW9ucyBvZiBjbG9uZXMgZm9yIGFuIGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbcG9zaXRpb25dIC0gVGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBpdGVtLlxyXG5cdCAqIEByZXR1cm5zIHtBcnJheS48TnVtYmVyPn0gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb25zIG9mIGNsb25lcyBmb3IgdGhlIGl0ZW0gb3IgYWxsIGlmIG5vIHBvc2l0aW9uIHdhcyBnaXZlbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmNsb25lcyA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHR2YXIgb2RkID0gdGhpcy5fY2xvbmVzLmxlbmd0aCAvIDIsXHJcblx0XHRcdGV2ZW4gPSBvZGQgKyB0aGlzLl9pdGVtcy5sZW5ndGgsXHJcblx0XHRcdG1hcCA9IGZ1bmN0aW9uKGluZGV4KSB7IHJldHVybiBpbmRleCAlIDIgPT09IDAgPyBldmVuICsgaW5kZXggLyAyIDogb2RkIC0gKGluZGV4ICsgMSkgLyAyIH07XHJcblxyXG5cdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuICQubWFwKHRoaXMuX2Nsb25lcywgZnVuY3Rpb24odiwgaSkgeyByZXR1cm4gbWFwKGkpIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiAkLm1hcCh0aGlzLl9jbG9uZXMsIGZ1bmN0aW9uKHYsIGkpIHsgcmV0dXJuIHYgPT09IHBvc2l0aW9uID8gbWFwKGkpIDogbnVsbCB9KTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIHRoZSBjdXJyZW50IGFuaW1hdGlvbiBzcGVlZC5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZF0gLSBUaGUgYW5pbWF0aW9uIHNwZWVkIGluIG1pbGxpc2Vjb25kcyBvciBub3RoaW5nIHRvIGxlYXZlIGl0IHVuY2hhbmdlZC5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfSAtIFRoZSBjdXJyZW50IGFuaW1hdGlvbiBzcGVlZCBpbiBtaWxsaXNlY29uZHMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5zcGVlZCA9IGZ1bmN0aW9uKHNwZWVkKSB7XHJcblx0XHRpZiAoc3BlZWQgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHR0aGlzLl9zcGVlZCA9IHNwZWVkO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zcGVlZDtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBjb29yZGluYXRlIG9mIGFuIGl0ZW0uXHJcblx0ICogQHRvZG8gVGhlIG5hbWUgb2YgdGhpcyBtZXRob2QgaXMgbWlzc2xlYW5kaW5nLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGl0ZW0gd2l0aGluIGBtaW5pbXVtKClgIGFuZCBgbWF4aW11bSgpYC5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfEFycmF5LjxOdW1iZXI+fSAtIFRoZSBjb29yZGluYXRlIG9mIHRoZSBpdGVtIGluIHBpeGVsIG9yIGFsbCBjb29yZGluYXRlcy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmNvb3JkaW5hdGVzID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdHZhciBtdWx0aXBsaWVyID0gMSxcclxuXHRcdFx0bmV3UG9zaXRpb24gPSBwb3NpdGlvbiAtIDEsXHJcblx0XHRcdGNvb3JkaW5hdGU7XHJcblxyXG5cdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuICQubWFwKHRoaXMuX2Nvb3JkaW5hdGVzLCAkLnByb3h5KGZ1bmN0aW9uKGNvb3JkaW5hdGUsIGluZGV4KSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXMoaW5kZXgpO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuY2VudGVyKSB7XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnJ0bCkge1xyXG5cdFx0XHRcdG11bHRpcGxpZXIgPSAtMTtcclxuXHRcdFx0XHRuZXdQb3NpdGlvbiA9IHBvc2l0aW9uICsgMTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29vcmRpbmF0ZSA9IHRoaXMuX2Nvb3JkaW5hdGVzW3Bvc2l0aW9uXTtcclxuXHRcdFx0Y29vcmRpbmF0ZSArPSAodGhpcy53aWR0aCgpIC0gY29vcmRpbmF0ZSArICh0aGlzLl9jb29yZGluYXRlc1tuZXdQb3NpdGlvbl0gfHwgMCkpIC8gMiAqIG11bHRpcGxpZXI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb29yZGluYXRlID0gdGhpcy5fY29vcmRpbmF0ZXNbbmV3UG9zaXRpb25dIHx8IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29vcmRpbmF0ZSA9IE1hdGguY2VpbChjb29yZGluYXRlKTtcclxuXHJcblx0XHRyZXR1cm4gY29vcmRpbmF0ZTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBDYWxjdWxhdGVzIHRoZSBzcGVlZCBmb3IgYSB0cmFuc2xhdGlvbi5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGZyb20gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIHN0YXJ0IGl0ZW0uXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHRvIC0gVGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSB0YXJnZXQgaXRlbS5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW2ZhY3Rvcj11bmRlZmluZWRdIC0gVGhlIHRpbWUgZmFjdG9yIGluIG1pbGxpc2Vjb25kcy5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfSAtIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIHRyYW5zbGF0aW9uLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuZHVyYXRpb24gPSBmdW5jdGlvbihmcm9tLCB0bywgZmFjdG9yKSB7XHJcblx0XHRpZiAoZmFjdG9yID09PSAwKSB7XHJcblx0XHRcdHJldHVybiAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBNYXRoLm1pbihNYXRoLm1heChNYXRoLmFicyh0byAtIGZyb20pLCAxKSwgNikgKiBNYXRoLmFicygoZmFjdG9yIHx8IHRoaXMuc2V0dGluZ3Muc21hcnRTcGVlZCkpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNsaWRlcyB0byB0aGUgc3BlY2lmaWVkIGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgaXRlbS5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkXSAtIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIHRyYW5zaXRpb24uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uKHBvc2l0aW9uLCBzcGVlZCkge1xyXG5cdFx0dmFyIGN1cnJlbnQgPSB0aGlzLmN1cnJlbnQoKSxcclxuXHRcdFx0cmV2ZXJ0ID0gbnVsbCxcclxuXHRcdFx0ZGlzdGFuY2UgPSBwb3NpdGlvbiAtIHRoaXMucmVsYXRpdmUoY3VycmVudCksXHJcblx0XHRcdGRpcmVjdGlvbiA9IChkaXN0YW5jZSA+IDApIC0gKGRpc3RhbmNlIDwgMCksXHJcblx0XHRcdGl0ZW1zID0gdGhpcy5faXRlbXMubGVuZ3RoLFxyXG5cdFx0XHRtaW5pbXVtID0gdGhpcy5taW5pbXVtKCksXHJcblx0XHRcdG1heGltdW0gPSB0aGlzLm1heGltdW0oKTtcclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5sb29wKSB7XHJcblx0XHRcdGlmICghdGhpcy5zZXR0aW5ncy5yZXdpbmQgJiYgTWF0aC5hYnMoZGlzdGFuY2UpID4gaXRlbXMgLyAyKSB7XHJcblx0XHRcdFx0ZGlzdGFuY2UgKz0gZGlyZWN0aW9uICogLTEgKiBpdGVtcztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cG9zaXRpb24gPSBjdXJyZW50ICsgZGlzdGFuY2U7XHJcblx0XHRcdHJldmVydCA9ICgocG9zaXRpb24gLSBtaW5pbXVtKSAlIGl0ZW1zICsgaXRlbXMpICUgaXRlbXMgKyBtaW5pbXVtO1xyXG5cclxuXHRcdFx0aWYgKHJldmVydCAhPT0gcG9zaXRpb24gJiYgcmV2ZXJ0IC0gZGlzdGFuY2UgPD0gbWF4aW11bSAmJiByZXZlcnQgLSBkaXN0YW5jZSA+IDApIHtcclxuXHRcdFx0XHRjdXJyZW50ID0gcmV2ZXJ0IC0gZGlzdGFuY2U7XHJcblx0XHRcdFx0cG9zaXRpb24gPSByZXZlcnQ7XHJcblx0XHRcdFx0dGhpcy5yZXNldChjdXJyZW50KTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLnJld2luZCkge1xyXG5cdFx0XHRtYXhpbXVtICs9IDE7XHJcblx0XHRcdHBvc2l0aW9uID0gKHBvc2l0aW9uICUgbWF4aW11bSArIG1heGltdW0pICUgbWF4aW11bTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHBvc2l0aW9uID0gTWF0aC5tYXgobWluaW11bSwgTWF0aC5taW4obWF4aW11bSwgcG9zaXRpb24pKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNwZWVkKHRoaXMuZHVyYXRpb24oY3VycmVudCwgcG9zaXRpb24sIHNwZWVkKSk7XHJcblx0XHR0aGlzLmN1cnJlbnQocG9zaXRpb24pO1xyXG5cclxuXHRcdGlmICh0aGlzLiRlbGVtZW50LmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2xpZGVzIHRvIHRoZSBuZXh0IGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWRdIC0gVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgdHJhbnNpdGlvbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihzcGVlZCkge1xyXG5cdFx0c3BlZWQgPSBzcGVlZCB8fCBmYWxzZTtcclxuXHRcdHRoaXMudG8odGhpcy5yZWxhdGl2ZSh0aGlzLmN1cnJlbnQoKSkgKyAxLCBzcGVlZCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2xpZGVzIHRvIHRoZSBwcmV2aW91cyBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkXSAtIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIHRyYW5zaXRpb24uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24oc3BlZWQpIHtcclxuXHRcdHNwZWVkID0gc3BlZWQgfHwgZmFsc2U7XHJcblx0XHR0aGlzLnRvKHRoaXMucmVsYXRpdmUodGhpcy5jdXJyZW50KCkpIC0gMSwgc3BlZWQpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgdGhlIGVuZCBvZiBhbiBhbmltYXRpb24uXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gVGhlIGV2ZW50IGFyZ3VtZW50cy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9uVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblxyXG5cdFx0Ly8gaWYgY3NzMiBhbmltYXRpb24gdGhlbiBldmVudCBvYmplY3QgaXMgdW5kZWZpbmVkXHJcblx0XHRpZiAoZXZlbnQgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcblx0XHRcdC8vIENhdGNoIG9ubHkgb3dsLXN0YWdlIHRyYW5zaXRpb25FbmQgZXZlbnRcclxuXHRcdFx0aWYgKChldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudCB8fCBldmVudC5vcmlnaW5hbFRhcmdldCkgIT09IHRoaXMuJHN0YWdlLmdldCgwKSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMubGVhdmUoJ2FuaW1hdGluZycpO1xyXG5cdFx0dGhpcy50cmlnZ2VyKCd0cmFuc2xhdGVkJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB2aWV3cG9ydCB3aWR0aC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHJldHVybiB7TnVtYmVyfSAtIFRoZSB3aWR0aCBpbiBwaXhlbC5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnZpZXdwb3J0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd2lkdGg7XHJcblx0XHRpZiAodGhpcy5vcHRpb25zLnJlc3BvbnNpdmVCYXNlRWxlbWVudCAhPT0gd2luZG93KSB7XHJcblx0XHRcdHdpZHRoID0gJCh0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUJhc2VFbGVtZW50KS53aWR0aCgpO1xyXG5cdFx0fSBlbHNlIGlmICh3aW5kb3cuaW5uZXJXaWR0aCkge1xyXG5cdFx0XHR3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cdFx0fSBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKSB7XHJcblx0XHRcdHdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdDYW4gbm90IGRldGVjdCB2aWV3cG9ydCB3aWR0aC4nKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB3aWR0aDtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZXBsYWNlcyB0aGUgY3VycmVudCBjb250ZW50LlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fGpRdWVyeXxTdHJpbmd9IGNvbnRlbnQgLSBUaGUgbmV3IGNvbnRlbnQuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24oY29udGVudCkge1xyXG5cdFx0dGhpcy4kc3RhZ2UuZW1wdHkoKTtcclxuXHRcdHRoaXMuX2l0ZW1zID0gW107XHJcblxyXG5cdFx0aWYgKGNvbnRlbnQpIHtcclxuXHRcdFx0Y29udGVudCA9IChjb250ZW50IGluc3RhbmNlb2YgalF1ZXJ5KSA/IGNvbnRlbnQgOiAkKGNvbnRlbnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3Rvcikge1xyXG5cdFx0XHRjb250ZW50ID0gY29udGVudC5maW5kKCcuJyArIHRoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb250ZW50LmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMubm9kZVR5cGUgPT09IDE7XHJcblx0XHR9KS5lYWNoKCQucHJveHkoZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHtcclxuXHRcdFx0aXRlbSA9IHRoaXMucHJlcGFyZShpdGVtKTtcclxuXHRcdFx0dGhpcy4kc3RhZ2UuYXBwZW5kKGl0ZW0pO1xyXG5cdFx0XHR0aGlzLl9pdGVtcy5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR0aGlzLl9tZXJnZXJzLnB1c2goaXRlbS5maW5kKCdbZGF0YS1tZXJnZV0nKS5hZGRCYWNrKCdbZGF0YS1tZXJnZV0nKS5hdHRyKCdkYXRhLW1lcmdlJykgKiAxIHx8IDEpO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdHRoaXMucmVzZXQodGhpcy5pc051bWVyaWModGhpcy5zZXR0aW5ncy5zdGFydFBvc2l0aW9uKSA/IHRoaXMuc2V0dGluZ3Muc3RhcnRQb3NpdGlvbiA6IDApO1xyXG5cclxuXHRcdHRoaXMuaW52YWxpZGF0ZSgnaXRlbXMnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBBZGRzIGFuIGl0ZW0uXHJcblx0ICogQHRvZG8gVXNlIGBpdGVtYCBpbnN0ZWFkIG9mIGBjb250ZW50YCBmb3IgdGhlIGV2ZW50IGFyZ3VtZW50cy5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudHxqUXVlcnl8U3RyaW5nfSBjb250ZW50IC0gVGhlIGl0ZW0gY29udGVudCB0byBhZGQuXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtwb3NpdGlvbl0gLSBUaGUgcmVsYXRpdmUgcG9zaXRpb24gYXQgd2hpY2ggdG8gaW5zZXJ0IHRoZSBpdGVtIG90aGVyd2lzZSB0aGUgaXRlbSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbmQuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihjb250ZW50LCBwb3NpdGlvbikge1xyXG5cdFx0dmFyIGN1cnJlbnQgPSB0aGlzLnJlbGF0aXZlKHRoaXMuX2N1cnJlbnQpO1xyXG5cclxuXHRcdHBvc2l0aW9uID0gcG9zaXRpb24gPT09IHVuZGVmaW5lZCA/IHRoaXMuX2l0ZW1zLmxlbmd0aCA6IHRoaXMubm9ybWFsaXplKHBvc2l0aW9uLCB0cnVlKTtcclxuXHRcdGNvbnRlbnQgPSBjb250ZW50IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGVudCA6ICQoY29udGVudCk7XHJcblxyXG5cdFx0dGhpcy50cmlnZ2VyKCdhZGQnLCB7IGNvbnRlbnQ6IGNvbnRlbnQsIHBvc2l0aW9uOiBwb3NpdGlvbiB9KTtcclxuXHJcblx0XHRjb250ZW50ID0gdGhpcy5wcmVwYXJlKGNvbnRlbnQpO1xyXG5cclxuXHRcdGlmICh0aGlzLl9pdGVtcy5sZW5ndGggPT09IDAgfHwgcG9zaXRpb24gPT09IHRoaXMuX2l0ZW1zLmxlbmd0aCkge1xyXG5cdFx0XHR0aGlzLl9pdGVtcy5sZW5ndGggPT09IDAgJiYgdGhpcy4kc3RhZ2UuYXBwZW5kKGNvbnRlbnQpO1xyXG5cdFx0XHR0aGlzLl9pdGVtcy5sZW5ndGggIT09IDAgJiYgdGhpcy5faXRlbXNbcG9zaXRpb24gLSAxXS5hZnRlcihjb250ZW50KTtcclxuXHRcdFx0dGhpcy5faXRlbXMucHVzaChjb250ZW50KTtcclxuXHRcdFx0dGhpcy5fbWVyZ2Vycy5wdXNoKGNvbnRlbnQuZmluZCgnW2RhdGEtbWVyZ2VdJykuYWRkQmFjaygnW2RhdGEtbWVyZ2VdJykuYXR0cignZGF0YS1tZXJnZScpICogMSB8fCAxKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX2l0ZW1zW3Bvc2l0aW9uXS5iZWZvcmUoY29udGVudCk7XHJcblx0XHRcdHRoaXMuX2l0ZW1zLnNwbGljZShwb3NpdGlvbiwgMCwgY29udGVudCk7XHJcblx0XHRcdHRoaXMuX21lcmdlcnMuc3BsaWNlKHBvc2l0aW9uLCAwLCBjb250ZW50LmZpbmQoJ1tkYXRhLW1lcmdlXScpLmFkZEJhY2soJ1tkYXRhLW1lcmdlXScpLmF0dHIoJ2RhdGEtbWVyZ2UnKSAqIDEgfHwgMSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5faXRlbXNbY3VycmVudF0gJiYgdGhpcy5yZXNldCh0aGlzLl9pdGVtc1tjdXJyZW50XS5pbmRleCgpKTtcclxuXHJcblx0XHR0aGlzLmludmFsaWRhdGUoJ2l0ZW1zJyk7XHJcblxyXG5cdFx0dGhpcy50cmlnZ2VyKCdhZGRlZCcsIHsgY29udGVudDogY29udGVudCwgcG9zaXRpb246IHBvc2l0aW9uIH0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZXMgYW4gaXRlbSBieSBpdHMgcG9zaXRpb24uXHJcblx0ICogQHRvZG8gVXNlIGBpdGVtYCBpbnN0ZWFkIG9mIGBjb250ZW50YCBmb3IgdGhlIGV2ZW50IGFyZ3VtZW50cy5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIC0gVGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBpdGVtIHRvIHJlbW92ZS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHRwb3NpdGlvbiA9IHRoaXMubm9ybWFsaXplKHBvc2l0aW9uLCB0cnVlKTtcclxuXHJcblx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy50cmlnZ2VyKCdyZW1vdmUnLCB7IGNvbnRlbnQ6IHRoaXMuX2l0ZW1zW3Bvc2l0aW9uXSwgcG9zaXRpb246IHBvc2l0aW9uIH0pO1xyXG5cclxuXHRcdHRoaXMuX2l0ZW1zW3Bvc2l0aW9uXS5yZW1vdmUoKTtcclxuXHRcdHRoaXMuX2l0ZW1zLnNwbGljZShwb3NpdGlvbiwgMSk7XHJcblx0XHR0aGlzLl9tZXJnZXJzLnNwbGljZShwb3NpdGlvbiwgMSk7XHJcblxyXG5cdFx0dGhpcy5pbnZhbGlkYXRlKCdpdGVtcycpO1xyXG5cclxuXHRcdHRoaXMudHJpZ2dlcigncmVtb3ZlZCcsIHsgY29udGVudDogbnVsbCwgcG9zaXRpb246IHBvc2l0aW9uIH0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFByZWxvYWRzIGltYWdlcyB3aXRoIGF1dG8gd2lkdGguXHJcblx0ICogQHRvZG8gUmVwbGFjZSBieSBhIG1vcmUgZ2VuZXJpYyBhcHByb2FjaFxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnByZWxvYWRBdXRvV2lkdGhJbWFnZXMgPSBmdW5jdGlvbihpbWFnZXMpIHtcclxuXHRcdGltYWdlcy5lYWNoKCQucHJveHkoZnVuY3Rpb24oaSwgZWxlbWVudCkge1xyXG5cdFx0XHR0aGlzLmVudGVyKCdwcmUtbG9hZGluZycpO1xyXG5cdFx0XHRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuXHRcdFx0JChuZXcgSW1hZ2UoKSkub25lKCdsb2FkJywgJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0ZWxlbWVudC5hdHRyKCdzcmMnLCBlLnRhcmdldC5zcmMpO1xyXG5cdFx0XHRcdGVsZW1lbnQuY3NzKCdvcGFjaXR5JywgMSk7XHJcblx0XHRcdFx0dGhpcy5sZWF2ZSgncHJlLWxvYWRpbmcnKTtcclxuXHRcdFx0XHQhdGhpcy5pcygncHJlLWxvYWRpbmcnKSAmJiAhdGhpcy5pcygnaW5pdGlhbGl6aW5nJykgJiYgdGhpcy5yZWZyZXNoKCk7XHJcblx0XHRcdH0sIHRoaXMpKS5hdHRyKCdzcmMnLCBlbGVtZW50LmF0dHIoJ3NyYycpIHx8IGVsZW1lbnQuYXR0cignZGF0YS1zcmMnKSB8fCBlbGVtZW50LmF0dHIoJ2RhdGEtc3JjLXJldGluYScpKTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgY2Fyb3VzZWwuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnQub2ZmKCcub3dsLmNvcmUnKTtcclxuXHRcdHRoaXMuJHN0YWdlLm9mZignLm93bC5jb3JlJyk7XHJcblx0XHQkKGRvY3VtZW50KS5vZmYoJy5vd2wuY29yZScpO1xyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnJlc3BvbnNpdmUgIT09IGZhbHNlKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lcik7XHJcblx0XHRcdHRoaXMub2ZmKHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZXJzLm9uVGhyb3R0bGVkUmVzaXplKTtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKHZhciBpIGluIHRoaXMuX3BsdWdpbnMpIHtcclxuXHRcdFx0dGhpcy5fcGx1Z2luc1tpXS5kZXN0cm95KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy4kc3RhZ2UuY2hpbGRyZW4oJy5jbG9uZWQnKS5yZW1vdmUoKTtcclxuXHJcblx0XHR0aGlzLiRzdGFnZS51bndyYXAoKTtcclxuXHRcdHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuY29udGVudHMoKS51bndyYXAoKTtcclxuXHRcdHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkudW53cmFwKCk7XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLnJlZnJlc2hDbGFzcylcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5sb2FkaW5nQ2xhc3MpXHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMubG9hZGVkQ2xhc3MpXHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMucnRsQ2xhc3MpXHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuZHJhZ0NsYXNzKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmdyYWJDbGFzcylcclxuXHRcdFx0LmF0dHIoJ2NsYXNzJywgdGhpcy4kZWxlbWVudC5hdHRyKCdjbGFzcycpLnJlcGxhY2UobmV3IFJlZ0V4cCh0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUNsYXNzICsgJy1cXFxcUytcXFxccycsICdnJyksICcnKSlcclxuXHRcdFx0LnJlbW92ZURhdGEoJ293bC5jYXJvdXNlbCcpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZXJhdG9ycyB0byBjYWxjdWxhdGUgcmlnaHQtdG8tbGVmdCBhbmQgbGVmdC10by1yaWdodC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFthXSAtIFRoZSBsZWZ0IHNpZGUgb3BlcmFuZC5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW29dIC0gVGhlIG9wZXJhdG9yLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbYl0gLSBUaGUgcmlnaHQgc2lkZSBvcGVyYW5kLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub3AgPSBmdW5jdGlvbihhLCBvLCBiKSB7XHJcblx0XHR2YXIgcnRsID0gdGhpcy5zZXR0aW5ncy5ydGw7XHJcblx0XHRzd2l0Y2ggKG8pIHtcclxuXHRcdFx0Y2FzZSAnPCc6XHJcblx0XHRcdFx0cmV0dXJuIHJ0bCA/IGEgPiBiIDogYSA8IGI7XHJcblx0XHRcdGNhc2UgJz4nOlxyXG5cdFx0XHRcdHJldHVybiBydGwgPyBhIDwgYiA6IGEgPiBiO1xyXG5cdFx0XHRjYXNlICc+PSc6XHJcblx0XHRcdFx0cmV0dXJuIHJ0bCA/IGEgPD0gYiA6IGEgPj0gYjtcclxuXHRcdFx0Y2FzZSAnPD0nOlxyXG5cdFx0XHRcdHJldHVybiBydGwgPyBhID49IGIgOiBhIDw9IGI7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQXR0YWNoZXMgdG8gYW4gaW50ZXJuYWwgZXZlbnQuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBUaGUgZXZlbnQgc291cmNlLlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCAtIFRoZSBldmVudCBuYW1lLlxyXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIC0gVGhlIGV2ZW50IGhhbmRsZXIgdG8gYXR0YWNoLlxyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gY2FwdHVyZSAtIFdldGhlciB0aGUgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQgYXQgdGhlIGNhcHR1cmluZyBwaGFzZSBvciBub3QuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIGV2ZW50LCBsaXN0ZW5lciwgY2FwdHVyZSkge1xyXG5cdFx0aWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBjYXB0dXJlKTtcclxuXHRcdH0gZWxzZSBpZiAoZWxlbWVudC5hdHRhY2hFdmVudCkge1xyXG5cdFx0XHRlbGVtZW50LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERldGFjaGVzIGZyb20gYW4gaW50ZXJuYWwgZXZlbnQuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnQgLSBUaGUgZXZlbnQgc291cmNlLlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCAtIFRoZSBldmVudCBuYW1lLlxyXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIC0gVGhlIGF0dGFjaGVkIGV2ZW50IGhhbmRsZXIgdG8gZGV0YWNoLlxyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gY2FwdHVyZSAtIFdldGhlciB0aGUgYXR0YWNoZWQgZXZlbnQgaGFuZGxlciB3YXMgcmVnaXN0ZXJlZCBhcyBhIGNhcHR1cmluZyBsaXN0ZW5lciBvciBub3QuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbihlbGVtZW50LCBldmVudCwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcclxuXHRcdGlmIChlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcclxuXHRcdFx0ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgY2FwdHVyZSk7XHJcblx0XHR9IGVsc2UgaWYgKGVsZW1lbnQuZGV0YWNoRXZlbnQpIHtcclxuXHRcdFx0ZWxlbWVudC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBUcmlnZ2VycyBhIHB1YmxpYyBldmVudC5cclxuXHQgKiBAdG9kbyBSZW1vdmUgYHN0YXR1c2AsIGByZWxhdGVkVGFyZ2V0YCBzaG91bGQgYmUgdXNlZCBpbnN0ZWFkLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIFRoZSBldmVudCBuYW1lLlxyXG5cdCAqIEBwYXJhbSB7Kn0gW2RhdGE9bnVsbF0gLSBUaGUgZXZlbnQgZGF0YS5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW25hbWVzcGFjZT1jYXJvdXNlbF0gLSBUaGUgZXZlbnQgbmFtZXNwYWNlLlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbc3RhdGVdIC0gVGhlIHN0YXRlIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXZlbnQuXHJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbZW50ZXI9ZmFsc2VdIC0gSW5kaWNhdGVzIGlmIHRoZSBjYWxsIGVudGVycyB0aGUgc3BlY2lmaWVkIHN0YXRlIG9yIG5vdC5cclxuXHQgKiBAcmV0dXJucyB7RXZlbnR9IC0gVGhlIGV2ZW50IGFyZ3VtZW50cy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbihuYW1lLCBkYXRhLCBuYW1lc3BhY2UsIHN0YXRlLCBlbnRlcikge1xyXG5cdFx0dmFyIHN0YXR1cyA9IHtcclxuXHRcdFx0aXRlbTogeyBjb3VudDogdGhpcy5faXRlbXMubGVuZ3RoLCBpbmRleDogdGhpcy5jdXJyZW50KCkgfVxyXG5cdFx0fSwgaGFuZGxlciA9ICQuY2FtZWxDYXNlKFxyXG5cdFx0XHQkLmdyZXAoWyAnb24nLCBuYW1lLCBuYW1lc3BhY2UgXSwgZnVuY3Rpb24odikgeyByZXR1cm4gdiB9KVxyXG5cdFx0XHRcdC5qb2luKCctJykudG9Mb3dlckNhc2UoKVxyXG5cdFx0KSwgZXZlbnQgPSAkLkV2ZW50KFxyXG5cdFx0XHRbIG5hbWUsICdvd2wnLCBuYW1lc3BhY2UgfHwgJ2Nhcm91c2VsJyBdLmpvaW4oJy4nKS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHQkLmV4dGVuZCh7IHJlbGF0ZWRUYXJnZXQ6IHRoaXMgfSwgc3RhdHVzLCBkYXRhKVxyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAoIXRoaXMuX3N1cHJlc3NbbmFtZV0pIHtcclxuXHRcdFx0JC5lYWNoKHRoaXMuX3BsdWdpbnMsIGZ1bmN0aW9uKG5hbWUsIHBsdWdpbikge1xyXG5cdFx0XHRcdGlmIChwbHVnaW4ub25UcmlnZ2VyKSB7XHJcblx0XHRcdFx0XHRwbHVnaW4ub25UcmlnZ2VyKGV2ZW50KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5yZWdpc3Rlcih7IHR5cGU6IE93bC5UeXBlLkV2ZW50LCBuYW1lOiBuYW1lIH0pO1xyXG5cdFx0XHR0aGlzLiRlbGVtZW50LnRyaWdnZXIoZXZlbnQpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MgJiYgdHlwZW9mIHRoaXMuc2V0dGluZ3NbaGFuZGxlcl0gPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzW2hhbmRsZXJdLmNhbGwodGhpcywgZXZlbnQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGV2ZW50O1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEVudGVycyBhIHN0YXRlLlxyXG5cdCAqIEBwYXJhbSBuYW1lIC0gVGhlIHN0YXRlIG5hbWUuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5lbnRlciA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuXHRcdCQuZWFjaChbIG5hbWUgXS5jb25jYXQodGhpcy5fc3RhdGVzLnRhZ3NbbmFtZV0gfHwgW10pLCAkLnByb3h5KGZ1bmN0aW9uKGksIG5hbWUpIHtcclxuXHRcdFx0aWYgKHRoaXMuX3N0YXRlcy5jdXJyZW50W25hbWVdID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHR0aGlzLl9zdGF0ZXMuY3VycmVudFtuYW1lXSA9IDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3N0YXRlcy5jdXJyZW50W25hbWVdKys7XHJcblx0XHR9LCB0aGlzKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogTGVhdmVzIGEgc3RhdGUuXHJcblx0ICogQHBhcmFtIG5hbWUgLSBUaGUgc3RhdGUgbmFtZS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmxlYXZlID0gZnVuY3Rpb24obmFtZSkge1xyXG5cdFx0JC5lYWNoKFsgbmFtZSBdLmNvbmNhdCh0aGlzLl9zdGF0ZXMudGFnc1tuYW1lXSB8fCBbXSksICQucHJveHkoZnVuY3Rpb24oaSwgbmFtZSkge1xyXG5cdFx0XHR0aGlzLl9zdGF0ZXMuY3VycmVudFtuYW1lXS0tO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZ2lzdGVycyBhbiBldmVudCBvciBzdGF0ZS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCAtIFRoZSBldmVudCBvciBzdGF0ZSB0byByZWdpc3Rlci5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24ob2JqZWN0KSB7XHJcblx0XHRpZiAob2JqZWN0LnR5cGUgPT09IE93bC5UeXBlLkV2ZW50KSB7XHJcblx0XHRcdGlmICghJC5ldmVudC5zcGVjaWFsW29iamVjdC5uYW1lXSkge1xyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbFtvYmplY3QubmFtZV0gPSB7fTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCEkLmV2ZW50LnNwZWNpYWxbb2JqZWN0Lm5hbWVdLm93bCkge1xyXG5cdFx0XHRcdHZhciBfZGVmYXVsdCA9ICQuZXZlbnQuc3BlY2lhbFtvYmplY3QubmFtZV0uX2RlZmF1bHQ7XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsW29iamVjdC5uYW1lXS5fZGVmYXVsdCA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdGlmIChfZGVmYXVsdCAmJiBfZGVmYXVsdC5hcHBseSAmJiAoIWUubmFtZXNwYWNlIHx8IGUubmFtZXNwYWNlLmluZGV4T2YoJ293bCcpID09PSAtMSkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIF9kZWZhdWx0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gZS5uYW1lc3BhY2UgJiYgZS5uYW1lc3BhY2UuaW5kZXhPZignb3dsJykgPiAtMTtcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbFtvYmplY3QubmFtZV0ub3dsID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChvYmplY3QudHlwZSA9PT0gT3dsLlR5cGUuU3RhdGUpIHtcclxuXHRcdFx0aWYgKCF0aGlzLl9zdGF0ZXMudGFnc1tvYmplY3QubmFtZV0pIHtcclxuXHRcdFx0XHR0aGlzLl9zdGF0ZXMudGFnc1tvYmplY3QubmFtZV0gPSBvYmplY3QudGFncztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLl9zdGF0ZXMudGFnc1tvYmplY3QubmFtZV0gPSB0aGlzLl9zdGF0ZXMudGFnc1tvYmplY3QubmFtZV0uY29uY2F0KG9iamVjdC50YWdzKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fc3RhdGVzLnRhZ3Nbb2JqZWN0Lm5hbWVdID0gJC5ncmVwKHRoaXMuX3N0YXRlcy50YWdzW29iamVjdC5uYW1lXSwgJC5wcm94eShmdW5jdGlvbih0YWcsIGkpIHtcclxuXHRcdFx0XHRyZXR1cm4gJC5pbkFycmF5KHRhZywgdGhpcy5fc3RhdGVzLnRhZ3Nbb2JqZWN0Lm5hbWVdKSA9PT0gaTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFN1cHByZXNzZXMgZXZlbnRzLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fSBldmVudHMgLSBUaGUgZXZlbnRzIHRvIHN1cHByZXNzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuc3VwcHJlc3MgPSBmdW5jdGlvbihldmVudHMpIHtcclxuXHRcdCQuZWFjaChldmVudHMsICQucHJveHkoZnVuY3Rpb24oaW5kZXgsIGV2ZW50KSB7XHJcblx0XHRcdHRoaXMuX3N1cHJlc3NbZXZlbnRdID0gdHJ1ZTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZWxlYXNlcyBzdXBwcmVzc2VkIGV2ZW50cy5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtBcnJheS48U3RyaW5nPn0gZXZlbnRzIC0gVGhlIGV2ZW50cyB0byByZWxlYXNlLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucmVsZWFzZSA9IGZ1bmN0aW9uKGV2ZW50cykge1xyXG5cdFx0JC5lYWNoKGV2ZW50cywgJC5wcm94eShmdW5jdGlvbihpbmRleCwgZXZlbnQpIHtcclxuXHRcdFx0ZGVsZXRlIHRoaXMuX3N1cHJlc3NbZXZlbnRdO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdW5pZmllZCBwb2ludGVyIGNvb3JkaW5hdGVzIGZyb20gZXZlbnQuXHJcblx0ICogQHRvZG8gIzI2MVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0V2ZW50fSAtIFRoZSBgbW91c2Vkb3duYCBvciBgdG91Y2hzdGFydGAgZXZlbnQuXHJcblx0ICogQHJldHVybnMge09iamVjdH0gLSBDb250YWlucyBgeGAgYW5kIGB5YCBjb29yZGluYXRlcyBvZiBjdXJyZW50IHBvaW50ZXIgcG9zaXRpb24uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5wb2ludGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdHZhciByZXN1bHQgPSB7IHg6IG51bGwsIHk6IG51bGwgfTtcclxuXHJcblx0XHRldmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQgfHwgZXZlbnQgfHwgd2luZG93LmV2ZW50O1xyXG5cclxuXHRcdGV2ZW50ID0gZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCA/XHJcblx0XHRcdGV2ZW50LnRvdWNoZXNbMF0gOiBldmVudC5jaGFuZ2VkVG91Y2hlcyAmJiBldmVudC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGggP1xyXG5cdFx0XHRcdGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdIDogZXZlbnQ7XHJcblxyXG5cdFx0aWYgKGV2ZW50LnBhZ2VYKSB7XHJcblx0XHRcdHJlc3VsdC54ID0gZXZlbnQucGFnZVg7XHJcblx0XHRcdHJlc3VsdC55ID0gZXZlbnQucGFnZVk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXN1bHQueCA9IGV2ZW50LmNsaWVudFg7XHJcblx0XHRcdHJlc3VsdC55ID0gZXZlbnQuY2xpZW50WTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERldGVybWluZXMgaWYgdGhlIGlucHV0IGlzIGEgTnVtYmVyIG9yIHNvbWV0aGluZyB0aGF0IGNhbiBiZSBjb2VyY2VkIHRvIGEgTnVtYmVyXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ3xPYmplY3R8QXJyYXl8Qm9vbGVhbnxSZWdFeHB8RnVuY3Rpb258U3ltYm9sfSAtIFRoZSBpbnB1dCB0byBiZSB0ZXN0ZWRcclxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn0gLSBBbiBpbmRpY2F0aW9uIGlmIHRoZSBpbnB1dCBpcyBhIE51bWJlciBvciBjYW4gYmUgY29lcmNlZCB0byBhIE51bWJlclxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuaXNOdW1lcmljID0gZnVuY3Rpb24obnVtYmVyKSB7XHJcblx0XHRyZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQobnVtYmVyKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgZGlmZmVyZW5jZSBvZiB0d28gdmVjdG9ycy5cclxuXHQgKiBAdG9kbyAjMjYxXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSAtIFRoZSBmaXJzdCB2ZWN0b3IuXHJcblx0ICogQHBhcmFtIHtPYmplY3R9IC0gVGhlIHNlY29uZCB2ZWN0b3IuXHJcblx0ICogQHJldHVybnMge09iamVjdH0gLSBUaGUgZGlmZmVyZW5jZS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihmaXJzdCwgc2Vjb25kKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR4OiBmaXJzdC54IC0gc2Vjb25kLngsXHJcblx0XHRcdHk6IGZpcnN0LnkgLSBzZWNvbmQueVxyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgalF1ZXJ5IFBsdWdpbiBmb3IgdGhlIE93bCBDYXJvdXNlbFxyXG5cdCAqIEB0b2RvIE5hdmlnYXRpb24gcGx1Z2luIGBuZXh0YCBhbmQgYHByZXZgXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwgPSBmdW5jdGlvbihvcHRpb24pIHtcclxuXHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdGRhdGEgPSAkdGhpcy5kYXRhKCdvd2wuY2Fyb3VzZWwnKTtcclxuXHJcblx0XHRcdGlmICghZGF0YSkge1xyXG5cdFx0XHRcdGRhdGEgPSBuZXcgT3dsKHRoaXMsIHR5cGVvZiBvcHRpb24gPT0gJ29iamVjdCcgJiYgb3B0aW9uKTtcclxuXHRcdFx0XHQkdGhpcy5kYXRhKCdvd2wuY2Fyb3VzZWwnLCBkYXRhKTtcclxuXHJcblx0XHRcdFx0JC5lYWNoKFtcclxuXHRcdFx0XHRcdCduZXh0JywgJ3ByZXYnLCAndG8nLCAnZGVzdHJveScsICdyZWZyZXNoJywgJ3JlcGxhY2UnLCAnYWRkJywgJ3JlbW92ZSdcclxuXHRcdFx0XHRdLCBmdW5jdGlvbihpLCBldmVudCkge1xyXG5cdFx0XHRcdFx0ZGF0YS5yZWdpc3Rlcih7IHR5cGU6IE93bC5UeXBlLkV2ZW50LCBuYW1lOiBldmVudCB9KTtcclxuXHRcdFx0XHRcdGRhdGEuJGVsZW1lbnQub24oZXZlbnQgKyAnLm93bC5jYXJvdXNlbC5jb3JlJywgJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiBlLnJlbGF0ZWRUYXJnZXQgIT09IHRoaXMpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnN1cHByZXNzKFsgZXZlbnQgXSk7XHJcblx0XHRcdFx0XHRcdFx0ZGF0YVtldmVudF0uYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnJlbGVhc2UoWyBldmVudCBdKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgZGF0YSkpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJyAmJiBvcHRpb24uY2hhckF0KDApICE9PSAnXycpIHtcclxuXHRcdFx0XHRkYXRhW29wdGlvbl0uYXBwbHkoZGF0YSwgYXJncyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIGpRdWVyeSBQbHVnaW5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3RvciA9IE93bDtcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBBdXRvUmVmcmVzaCBQbHVnaW5cclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBBcnR1cyBLb2xhbm93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdGhlIGF1dG8gcmVmcmVzaCBwbHVnaW4uXHJcblx0ICogQGNsYXNzIFRoZSBBdXRvIFJlZnJlc2ggUGx1Z2luXHJcblx0ICogQHBhcmFtIHtPd2x9IGNhcm91c2VsIC0gVGhlIE93bCBDYXJvdXNlbFxyXG5cdCAqL1xyXG5cdHZhciBBdXRvUmVmcmVzaCA9IGZ1bmN0aW9uKGNhcm91c2VsKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIFJlZmVyZW5jZSB0byB0aGUgY29yZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPd2x9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2NvcmUgPSBjYXJvdXNlbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFJlZnJlc2ggaW50ZXJ2YWwuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7bnVtYmVyfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9pbnRlcnZhbCA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIGN1cnJlbnRseSB2aXNpYmxlIG9yIG5vdC5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtCb29sZWFufVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl92aXNpYmxlID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCBldmVudCBoYW5kbGVycy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhbmRsZXJzID0ge1xyXG5cdFx0XHQnaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b1JlZnJlc2gpIHtcclxuXHRcdFx0XHRcdHRoaXMud2F0Y2goKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcclxuXHRcdHRoaXMuX2NvcmUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBBdXRvUmVmcmVzaC5EZWZhdWx0cywgdGhpcy5fY29yZS5vcHRpb25zKTtcclxuXHJcblx0XHQvLyByZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRBdXRvUmVmcmVzaC5EZWZhdWx0cyA9IHtcclxuXHRcdGF1dG9SZWZyZXNoOiB0cnVlLFxyXG5cdFx0YXV0b1JlZnJlc2hJbnRlcnZhbDogNTAwXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogV2F0Y2hlcyB0aGUgZWxlbWVudC5cclxuXHQgKi9cclxuXHRBdXRvUmVmcmVzaC5wcm90b3R5cGUud2F0Y2ggPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmICh0aGlzLl9pbnRlcnZhbCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdmlzaWJsZSA9IHRoaXMuX2NvcmUuJGVsZW1lbnQuaXMoJzp2aXNpYmxlJyk7XHJcblx0XHR0aGlzLl9pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgkLnByb3h5KHRoaXMucmVmcmVzaCwgdGhpcyksIHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b1JlZnJlc2hJbnRlcnZhbCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUmVmcmVzaGVzIHRoZSBlbGVtZW50LlxyXG5cdCAqL1xyXG5cdEF1dG9SZWZyZXNoLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAodGhpcy5fY29yZS4kZWxlbWVudC5pcygnOnZpc2libGUnKSA9PT0gdGhpcy5fdmlzaWJsZSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdmlzaWJsZSA9ICF0aGlzLl92aXNpYmxlO1xyXG5cclxuXHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQudG9nZ2xlQ2xhc3MoJ293bC1oaWRkZW4nLCAhdGhpcy5fdmlzaWJsZSk7XHJcblxyXG5cdFx0dGhpcy5fdmlzaWJsZSAmJiAodGhpcy5fY29yZS5pbnZhbGlkYXRlKCd3aWR0aCcpICYmIHRoaXMuX2NvcmUucmVmcmVzaCgpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgcGx1Z2luLlxyXG5cdCAqL1xyXG5cdEF1dG9SZWZyZXNoLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGFuZGxlciwgcHJvcGVydHk7XHJcblxyXG5cdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpO1xyXG5cclxuXHRcdGZvciAoaGFuZGxlciBpbiB0aGlzLl9oYW5kbGVycykge1xyXG5cdFx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihoYW5kbGVyLCB0aGlzLl9oYW5kbGVyc1toYW5kbGVyXSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKHByb3BlcnR5IGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XHJcblx0XHRcdHR5cGVvZiB0aGlzW3Byb3BlcnR5XSAhPSAnZnVuY3Rpb24nICYmICh0aGlzW3Byb3BlcnR5XSA9IG51bGwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5BdXRvUmVmcmVzaCA9IEF1dG9SZWZyZXNoO1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIExhenkgUGx1Z2luXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgQmFydG9zeiBXb2pjaWVjaG93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdGhlIGxhenkgcGx1Z2luLlxyXG5cdCAqIEBjbGFzcyBUaGUgTGF6eSBQbHVnaW5cclxuXHQgKiBAcGFyYW0ge093bH0gY2Fyb3VzZWwgLSBUaGUgT3dsIENhcm91c2VsXHJcblx0ICovXHJcblx0dmFyIExhenkgPSBmdW5jdGlvbihjYXJvdXNlbCkge1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmZXJlbmNlIHRvIHRoZSBjb3JlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge093bH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29yZSA9IGNhcm91c2VsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxyZWFkeSBsb2FkZWQgaXRlbXMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7QXJyYXkuPGpRdWVyeT59XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2xvYWRlZCA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogRXZlbnQgaGFuZGxlcnMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYW5kbGVycyA9IHtcclxuXHRcdFx0J2luaXRpYWxpemVkLm93bC5jYXJvdXNlbCBjaGFuZ2Uub3dsLmNhcm91c2VsIHJlc2l6ZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKCFlLm5hbWVzcGFjZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCF0aGlzLl9jb3JlLnNldHRpbmdzIHx8ICF0aGlzLl9jb3JlLnNldHRpbmdzLmxhenlMb2FkKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoKGUucHJvcGVydHkgJiYgZS5wcm9wZXJ0eS5uYW1lID09ICdwb3NpdGlvbicpIHx8IGUudHlwZSA9PSAnaW5pdGlhbGl6ZWQnKSB7XHJcblx0XHRcdFx0XHR2YXIgc2V0dGluZ3MgPSB0aGlzLl9jb3JlLnNldHRpbmdzLFxyXG5cdFx0XHRcdFx0XHRuID0gKHNldHRpbmdzLmNlbnRlciAmJiBNYXRoLmNlaWwoc2V0dGluZ3MuaXRlbXMgLyAyKSB8fCBzZXR0aW5ncy5pdGVtcyksXHJcblx0XHRcdFx0XHRcdGkgPSAoKHNldHRpbmdzLmNlbnRlciAmJiBuICogLTEpIHx8IDApLFxyXG5cdFx0XHRcdFx0XHRwb3NpdGlvbiA9IChlLnByb3BlcnR5ICYmIGUucHJvcGVydHkudmFsdWUgIT09IHVuZGVmaW5lZCA/IGUucHJvcGVydHkudmFsdWUgOiB0aGlzLl9jb3JlLmN1cnJlbnQoKSkgKyBpLFxyXG5cdFx0XHRcdFx0XHRjbG9uZXMgPSB0aGlzLl9jb3JlLmNsb25lcygpLmxlbmd0aCxcclxuXHRcdFx0XHRcdFx0bG9hZCA9ICQucHJveHkoZnVuY3Rpb24oaSwgdikgeyB0aGlzLmxvYWQodikgfSwgdGhpcyk7XHJcblxyXG5cdFx0XHRcdFx0d2hpbGUgKGkrKyA8IG4pIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5sb2FkKGNsb25lcyAvIDIgKyB0aGlzLl9jb3JlLnJlbGF0aXZlKHBvc2l0aW9uKSk7XHJcblx0XHRcdFx0XHRcdGNsb25lcyAmJiAkLmVhY2godGhpcy5fY29yZS5jbG9uZXModGhpcy5fY29yZS5yZWxhdGl2ZShwb3NpdGlvbikpLCBsb2FkKTtcclxuXHRcdFx0XHRcdFx0cG9zaXRpb24rKztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIHNldCB0aGUgZGVmYXVsdCBvcHRpb25zXHJcblx0XHR0aGlzLl9jb3JlLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgTGF6eS5EZWZhdWx0cywgdGhpcy5fY29yZS5vcHRpb25zKTtcclxuXHJcblx0XHQvLyByZWdpc3RlciBldmVudCBoYW5kbGVyXHJcblx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdExhenkuRGVmYXVsdHMgPSB7XHJcblx0XHRsYXp5TG9hZDogZmFsc2VcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBMb2FkcyBhbGwgcmVzb3VyY2VzIG9mIGFuIGl0ZW0gYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvbi5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGl0ZW0uXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdExhenkucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0dmFyICRpdGVtID0gdGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcShwb3NpdGlvbiksXHJcblx0XHRcdCRlbGVtZW50cyA9ICRpdGVtICYmICRpdGVtLmZpbmQoJy5vd2wtbGF6eScpO1xyXG5cclxuXHRcdGlmICghJGVsZW1lbnRzIHx8ICQuaW5BcnJheSgkaXRlbS5nZXQoMCksIHRoaXMuX2xvYWRlZCkgPiAtMSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0JGVsZW1lbnRzLmVhY2goJC5wcm94eShmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xyXG5cdFx0XHR2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLCBpbWFnZSxcclxuXHRcdFx0XHR1cmwgPSAod2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxICYmICRlbGVtZW50LmF0dHIoJ2RhdGEtc3JjLXJldGluYScpKSB8fCAkZWxlbWVudC5hdHRyKCdkYXRhLXNyYycpO1xyXG5cclxuXHRcdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdsb2FkJywgeyBlbGVtZW50OiAkZWxlbWVudCwgdXJsOiB1cmwgfSwgJ2xhenknKTtcclxuXHJcblx0XHRcdGlmICgkZWxlbWVudC5pcygnaW1nJykpIHtcclxuXHRcdFx0XHQkZWxlbWVudC5vbmUoJ2xvYWQub3dsLmxhenknLCAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0JGVsZW1lbnQuY3NzKCdvcGFjaXR5JywgMSk7XHJcblx0XHRcdFx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ2xvYWRlZCcsIHsgZWxlbWVudDogJGVsZW1lbnQsIHVybDogdXJsIH0sICdsYXp5Jyk7XHJcblx0XHRcdFx0fSwgdGhpcykpLmF0dHIoJ3NyYycsIHVybCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHRcdFx0XHRpbWFnZS5vbmxvYWQgPSAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0JGVsZW1lbnQuY3NzKHtcclxuXHRcdFx0XHRcdFx0J2JhY2tncm91bmQtaW1hZ2UnOiAndXJsKFwiJyArIHVybCArICdcIiknLFxyXG5cdFx0XHRcdFx0XHQnb3BhY2l0eSc6ICcxJ1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ2xvYWRlZCcsIHsgZWxlbWVudDogJGVsZW1lbnQsIHVybDogdXJsIH0sICdsYXp5Jyk7XHJcblx0XHRcdFx0fSwgdGhpcyk7XHJcblx0XHRcdFx0aW1hZ2Uuc3JjID0gdXJsO1xyXG5cdFx0XHR9XHJcblx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5fbG9hZGVkLnB1c2goJGl0ZW0uZ2V0KDApKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgcGx1Z2luLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRMYXp5LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGFuZGxlciwgcHJvcGVydHk7XHJcblxyXG5cdFx0Zm9yIChoYW5kbGVyIGluIHRoaXMuaGFuZGxlcnMpIHtcclxuXHRcdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoaGFuZGxlciwgdGhpcy5oYW5kbGVyc1toYW5kbGVyXSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKHByb3BlcnR5IGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XHJcblx0XHRcdHR5cGVvZiB0aGlzW3Byb3BlcnR5XSAhPSAnZnVuY3Rpb24nICYmICh0aGlzW3Byb3BlcnR5XSA9IG51bGwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5MYXp5ID0gTGF6eTtcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBBdXRvSGVpZ2h0IFBsdWdpblxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIEJhcnRvc3ogV29qY2llY2hvd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHRoZSBhdXRvIGhlaWdodCBwbHVnaW4uXHJcblx0ICogQGNsYXNzIFRoZSBBdXRvIEhlaWdodCBQbHVnaW5cclxuXHQgKiBAcGFyYW0ge093bH0gY2Fyb3VzZWwgLSBUaGUgT3dsIENhcm91c2VsXHJcblx0ICovXHJcblx0dmFyIEF1dG9IZWlnaHQgPSBmdW5jdGlvbihjYXJvdXNlbCkge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIGNvcmUuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T3dsfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb3JlID0gY2Fyb3VzZWw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgZXZlbnQgaGFuZGxlcnMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYW5kbGVycyA9IHtcclxuXHRcdFx0J2luaXRpYWxpemVkLm93bC5jYXJvdXNlbCByZWZyZXNoZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodCkge1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnY2hhbmdlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0ICYmIGUucHJvcGVydHkubmFtZSA9PSAncG9zaXRpb24nKXtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2xvYWRlZC5vd2wubGF6eSc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHRcclxuXHRcdFx0XHRcdCYmIGUuZWxlbWVudC5jbG9zZXN0KCcuJyArIHRoaXMuX2NvcmUuc2V0dGluZ3MuaXRlbUNsYXNzKS5pbmRleCgpID09PSB0aGlzLl9jb3JlLmN1cnJlbnQoKSkge1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcclxuXHRcdHRoaXMuX2NvcmUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBBdXRvSGVpZ2h0LkRlZmF1bHRzLCB0aGlzLl9jb3JlLm9wdGlvbnMpO1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEF1dG9IZWlnaHQuRGVmYXVsdHMgPSB7XHJcblx0XHRhdXRvSGVpZ2h0OiBmYWxzZSxcclxuXHRcdGF1dG9IZWlnaHRDbGFzczogJ293bC1oZWlnaHQnXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlcyB0aGUgdmlldy5cclxuXHQgKi9cclxuXHRBdXRvSGVpZ2h0LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzdGFydCA9IHRoaXMuX2NvcmUuX2N1cnJlbnQsXHJcblx0XHRcdGVuZCA9IHN0YXJ0ICsgdGhpcy5fY29yZS5zZXR0aW5ncy5pdGVtcyxcclxuXHRcdFx0dmlzaWJsZSA9IHRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCkudG9BcnJheSgpLnNsaWNlKHN0YXJ0LCBlbmQpLFxyXG5cdFx0XHRoZWlnaHRzID0gW10sXHJcblx0XHRcdG1heGhlaWdodCA9IDA7XHJcblxyXG5cdFx0JC5lYWNoKHZpc2libGUsIGZ1bmN0aW9uKGluZGV4LCBpdGVtKSB7XHJcblx0XHRcdGhlaWdodHMucHVzaCgkKGl0ZW0pLmhlaWdodCgpKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG1heGhlaWdodCA9IE1hdGgubWF4LmFwcGx5KG51bGwsIGhlaWdodHMpO1xyXG5cclxuXHRcdHRoaXMuX2NvcmUuJHN0YWdlLnBhcmVudCgpXHJcblx0XHRcdC5oZWlnaHQobWF4aGVpZ2h0KVxyXG5cdFx0XHQuYWRkQ2xhc3ModGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0Q2xhc3MpO1xyXG5cdH07XHJcblxyXG5cdEF1dG9IZWlnaHQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoYW5kbGVyLCBwcm9wZXJ0eTtcclxuXHJcblx0XHRmb3IgKGhhbmRsZXIgaW4gdGhpcy5faGFuZGxlcnMpIHtcclxuXHRcdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoaGFuZGxlciwgdGhpcy5faGFuZGxlcnNbaGFuZGxlcl0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSkge1xyXG5cdFx0XHR0eXBlb2YgdGhpc1twcm9wZXJ0eV0gIT0gJ2Z1bmN0aW9uJyAmJiAodGhpc1twcm9wZXJ0eV0gPSBudWxsKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuQXV0b0hlaWdodCA9IEF1dG9IZWlnaHQ7XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogVmlkZW8gUGx1Z2luXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgQmFydG9zeiBXb2pjaWVjaG93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdGhlIHZpZGVvIHBsdWdpbi5cclxuXHQgKiBAY2xhc3MgVGhlIFZpZGVvIFBsdWdpblxyXG5cdCAqIEBwYXJhbSB7T3dsfSBjYXJvdXNlbCAtIFRoZSBPd2wgQ2Fyb3VzZWxcclxuXHQgKi9cclxuXHR2YXIgVmlkZW8gPSBmdW5jdGlvbihjYXJvdXNlbCkge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIGNvcmUuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T3dsfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb3JlID0gY2Fyb3VzZWw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDYWNoZSBhbGwgdmlkZW8gVVJMcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3ZpZGVvcyA9IHt9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ3VycmVudCBwbGF5aW5nIGl0ZW0uXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7alF1ZXJ5fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9wbGF5aW5nID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCBldmVudCBoYW5kbGVycy5cclxuXHRcdCAqIEB0b2RvIFRoZSBjbG9uZWQgY29udGVudCByZW1vdmFsZSBpcyB0b28gbGF0ZVxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFuZGxlcnMgPSB7XHJcblx0XHRcdCdpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UpIHtcclxuXHRcdFx0XHRcdHRoaXMuX2NvcmUucmVnaXN0ZXIoeyB0eXBlOiAnc3RhdGUnLCBuYW1lOiAncGxheWluZycsIHRhZ3M6IFsgJ2ludGVyYWN0aW5nJyBdIH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdyZXNpemUub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MudmlkZW8gJiYgdGhpcy5pc0luRnVsbFNjcmVlbigpKSB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3JlZnJlc2hlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5pcygncmVzaXppbmcnKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5fY29yZS4kc3RhZ2UuZmluZCgnLmNsb25lZCAub3dsLXZpZGVvLWZyYW1lJykucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2NoYW5nZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIGUucHJvcGVydHkubmFtZSA9PT0gJ3Bvc2l0aW9uJyAmJiB0aGlzLl9wbGF5aW5nKSB7XHJcblx0XHRcdFx0XHR0aGlzLnN0b3AoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQncHJlcGFyZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKCFlLm5hbWVzcGFjZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyICRlbGVtZW50ID0gJChlLmNvbnRlbnQpLmZpbmQoJy5vd2wtdmlkZW8nKTtcclxuXHJcblx0XHRcdFx0aWYgKCRlbGVtZW50Lmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0JGVsZW1lbnQuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHRcdFx0XHRcdHRoaXMuZmV0Y2goJGVsZW1lbnQsICQoZS5jb250ZW50KSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBzZXQgZGVmYXVsdCBvcHRpb25zXHJcblx0XHR0aGlzLl9jb3JlLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgVmlkZW8uRGVmYXVsdHMsIHRoaXMuX2NvcmUub3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpO1xyXG5cclxuXHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub24oJ2NsaWNrLm93bC52aWRlbycsICcub3dsLXZpZGVvLXBsYXktaWNvbicsICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR0aGlzLnBsYXkoZSk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRWaWRlby5EZWZhdWx0cyA9IHtcclxuXHRcdHZpZGVvOiBmYWxzZSxcclxuXHRcdHZpZGVvSGVpZ2h0OiBmYWxzZSxcclxuXHRcdHZpZGVvV2lkdGg6IGZhbHNlXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgdmlkZW8gSUQgYW5kIHRoZSB0eXBlIChZb3VUdWJlL1ZpbWVvL3Z6YWFyIG9ubHkpLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge2pRdWVyeX0gdGFyZ2V0IC0gVGhlIHRhcmdldCBjb250YWluaW5nIHRoZSB2aWRlbyBkYXRhLlxyXG5cdCAqIEBwYXJhbSB7alF1ZXJ5fSBpdGVtIC0gVGhlIGl0ZW0gY29udGFpbmluZyB0aGUgdmlkZW8uXHJcblx0ICovXHJcblx0VmlkZW8ucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24odGFyZ2V0LCBpdGVtKSB7XHJcblx0XHRcdHZhciB0eXBlID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKHRhcmdldC5hdHRyKCdkYXRhLXZpbWVvLWlkJykpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuICd2aW1lbyc7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRhcmdldC5hdHRyKCdkYXRhLXZ6YWFyLWlkJykpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuICd2emFhcidcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAneW91dHViZSc7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSkoKSxcclxuXHRcdFx0XHRpZCA9IHRhcmdldC5hdHRyKCdkYXRhLXZpbWVvLWlkJykgfHwgdGFyZ2V0LmF0dHIoJ2RhdGEteW91dHViZS1pZCcpIHx8IHRhcmdldC5hdHRyKCdkYXRhLXZ6YWFyLWlkJyksXHJcblx0XHRcdFx0d2lkdGggPSB0YXJnZXQuYXR0cignZGF0YS13aWR0aCcpIHx8IHRoaXMuX2NvcmUuc2V0dGluZ3MudmlkZW9XaWR0aCxcclxuXHRcdFx0XHRoZWlnaHQgPSB0YXJnZXQuYXR0cignZGF0YS1oZWlnaHQnKSB8fCB0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvSGVpZ2h0LFxyXG5cdFx0XHRcdHVybCA9IHRhcmdldC5hdHRyKCdocmVmJyk7XHJcblxyXG5cdFx0aWYgKHVybCkge1xyXG5cclxuXHRcdFx0LypcclxuXHRcdFx0XHRcdFBhcnNlcyB0aGUgaWQncyBvdXQgb2YgdGhlIGZvbGxvd2luZyB1cmxzIChhbmQgcHJvYmFibHkgbW9yZSk6XHJcblx0XHRcdFx0XHRodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PTppZFxyXG5cdFx0XHRcdFx0aHR0cHM6Ly95b3V0dS5iZS86aWRcclxuXHRcdFx0XHRcdGh0dHBzOi8vdmltZW8uY29tLzppZFxyXG5cdFx0XHRcdFx0aHR0cHM6Ly92aW1lby5jb20vY2hhbm5lbHMvOmNoYW5uZWwvOmlkXHJcblx0XHRcdFx0XHRodHRwczovL3ZpbWVvLmNvbS9ncm91cHMvOmdyb3VwL3ZpZGVvcy86aWRcclxuXHRcdFx0XHRcdGh0dHBzOi8vYXBwLnZ6YWFyLmNvbS92aWRlb3MvOmlkXHJcblxyXG5cdFx0XHRcdFx0VmlzdWFsIGV4YW1wbGU6IGh0dHBzOi8vcmVnZXhwZXIuY29tLyMoaHR0cCUzQSU3Q2h0dHBzJTNBJTdDKSU1QyUyRiU1QyUyRihwbGF5ZXIuJTdDd3d3LiU3Q2FwcC4pJTNGKHZpbWVvJTVDLmNvbSU3Q3lvdXR1KGJlJTVDLmNvbSU3QyU1Qy5iZSU3Q2JlJTVDLmdvb2dsZWFwaXMlNUMuY29tKSU3Q3Z6YWFyJTVDLmNvbSklNUMlMkYodmlkZW8lNUMlMkYlN0N2aWRlb3MlNUMlMkYlN0NlbWJlZCU1QyUyRiU3Q2NoYW5uZWxzJTVDJTJGLiUyQiU1QyUyRiU3Q2dyb3VwcyU1QyUyRi4lMkIlNUMlMkYlN0N3YXRjaCU1QyUzRnYlM0QlN0N2JTVDJTJGKSUzRiglNUJBLVphLXowLTkuXyUyNS0lNUQqKSglNUMlMjYlNUNTJTJCKSUzRlxyXG5cdFx0XHQqL1xyXG5cclxuXHRcdFx0aWQgPSB1cmwubWF0Y2goLyhodHRwOnxodHRwczp8KVxcL1xcLyhwbGF5ZXIufHd3dy58YXBwLik/KHZpbWVvXFwuY29tfHlvdXR1KGJlXFwuY29tfFxcLmJlfGJlXFwuZ29vZ2xlYXBpc1xcLmNvbSl8dnphYXJcXC5jb20pXFwvKHZpZGVvXFwvfHZpZGVvc1xcL3xlbWJlZFxcL3xjaGFubmVsc1xcLy4rXFwvfGdyb3Vwc1xcLy4rXFwvfHdhdGNoXFw/dj18dlxcLyk/KFtBLVphLXowLTkuXyUtXSopKFxcJlxcUyspPy8pO1xyXG5cclxuXHRcdFx0aWYgKGlkWzNdLmluZGV4T2YoJ3lvdXR1JykgPiAtMSkge1xyXG5cdFx0XHRcdHR5cGUgPSAneW91dHViZSc7XHJcblx0XHRcdH0gZWxzZSBpZiAoaWRbM10uaW5kZXhPZigndmltZW8nKSA+IC0xKSB7XHJcblx0XHRcdFx0dHlwZSA9ICd2aW1lbyc7XHJcblx0XHRcdH0gZWxzZSBpZiAoaWRbM10uaW5kZXhPZigndnphYXInKSA+IC0xKSB7XHJcblx0XHRcdFx0dHlwZSA9ICd2emFhcic7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdWaWRlbyBVUkwgbm90IHN1cHBvcnRlZC4nKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZCA9IGlkWzZdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHZpZGVvIFVSTC4nKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl92aWRlb3NbdXJsXSA9IHtcclxuXHRcdFx0dHlwZTogdHlwZSxcclxuXHRcdFx0aWQ6IGlkLFxyXG5cdFx0XHR3aWR0aDogd2lkdGgsXHJcblx0XHRcdGhlaWdodDogaGVpZ2h0XHJcblx0XHR9O1xyXG5cclxuXHRcdGl0ZW0uYXR0cignZGF0YS12aWRlbycsIHVybCk7XHJcblxyXG5cdFx0dGhpcy50aHVtYm5haWwodGFyZ2V0LCB0aGlzLl92aWRlb3NbdXJsXSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB2aWRlbyB0aHVtYm5haWwuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7alF1ZXJ5fSB0YXJnZXQgLSBUaGUgdGFyZ2V0IGNvbnRhaW5pbmcgdGhlIHZpZGVvIGRhdGEuXHJcblx0ICogQHBhcmFtIHtPYmplY3R9IGluZm8gLSBUaGUgdmlkZW8gaW5mbyBvYmplY3QuXHJcblx0ICogQHNlZSBgZmV0Y2hgXHJcblx0ICovXHJcblx0VmlkZW8ucHJvdG90eXBlLnRodW1ibmFpbCA9IGZ1bmN0aW9uKHRhcmdldCwgdmlkZW8pIHtcclxuXHRcdHZhciB0bkxpbmssXHJcblx0XHRcdGljb24sXHJcblx0XHRcdHBhdGgsXHJcblx0XHRcdGRpbWVuc2lvbnMgPSB2aWRlby53aWR0aCAmJiB2aWRlby5oZWlnaHQgPyAnc3R5bGU9XCJ3aWR0aDonICsgdmlkZW8ud2lkdGggKyAncHg7aGVpZ2h0OicgKyB2aWRlby5oZWlnaHQgKyAncHg7XCInIDogJycsXHJcblx0XHRcdGN1c3RvbVRuID0gdGFyZ2V0LmZpbmQoJ2ltZycpLFxyXG5cdFx0XHRzcmNUeXBlID0gJ3NyYycsXHJcblx0XHRcdGxhenlDbGFzcyA9ICcnLFxyXG5cdFx0XHRzZXR0aW5ncyA9IHRoaXMuX2NvcmUuc2V0dGluZ3MsXHJcblx0XHRcdGNyZWF0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcclxuXHRcdFx0XHRpY29uID0gJzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tcGxheS1pY29uXCI+PC9kaXY+JztcclxuXHJcblx0XHRcdFx0aWYgKHNldHRpbmdzLmxhenlMb2FkKSB7XHJcblx0XHRcdFx0XHR0bkxpbmsgPSAnPGRpdiBjbGFzcz1cIm93bC12aWRlby10biAnICsgbGF6eUNsYXNzICsgJ1wiICcgKyBzcmNUeXBlICsgJz1cIicgKyBwYXRoICsgJ1wiPjwvZGl2Pic7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRuTGluayA9ICc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXRuXCIgc3R5bGU9XCJvcGFjaXR5OjE7YmFja2dyb3VuZC1pbWFnZTp1cmwoJyArIHBhdGggKyAnKVwiPjwvZGl2Pic7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRhcmdldC5hZnRlcih0bkxpbmspO1xyXG5cdFx0XHRcdHRhcmdldC5hZnRlcihpY29uKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHQvLyB3cmFwIHZpZGVvIGNvbnRlbnQgaW50byBvd2wtdmlkZW8td3JhcHBlciBkaXZcclxuXHRcdHRhcmdldC53cmFwKCc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXdyYXBwZXJcIicgKyBkaW1lbnNpb25zICsgJz48L2Rpdj4nKTtcclxuXHJcblx0XHRpZiAodGhpcy5fY29yZS5zZXR0aW5ncy5sYXp5TG9hZCkge1xyXG5cdFx0XHRzcmNUeXBlID0gJ2RhdGEtc3JjJztcclxuXHRcdFx0bGF6eUNsYXNzID0gJ293bC1sYXp5JztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjdXN0b20gdGh1bWJuYWlsXHJcblx0XHRpZiAoY3VzdG9tVG4ubGVuZ3RoKSB7XHJcblx0XHRcdGNyZWF0ZShjdXN0b21Ubi5hdHRyKHNyY1R5cGUpKTtcclxuXHRcdFx0Y3VzdG9tVG4ucmVtb3ZlKCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodmlkZW8udHlwZSA9PT0gJ3lvdXR1YmUnKSB7XHJcblx0XHRcdHBhdGggPSBcIi8vaW1nLnlvdXR1YmUuY29tL3ZpL1wiICsgdmlkZW8uaWQgKyBcIi9ocWRlZmF1bHQuanBnXCI7XHJcblx0XHRcdGNyZWF0ZShwYXRoKTtcclxuXHRcdH0gZWxzZSBpZiAodmlkZW8udHlwZSA9PT0gJ3ZpbWVvJykge1xyXG5cdFx0XHQkLmFqYXgoe1xyXG5cdFx0XHRcdHR5cGU6ICdHRVQnLFxyXG5cdFx0XHRcdHVybDogJy8vdmltZW8uY29tL2FwaS92Mi92aWRlby8nICsgdmlkZW8uaWQgKyAnLmpzb24nLFxyXG5cdFx0XHRcdGpzb25wOiAnY2FsbGJhY2snLFxyXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbnAnLFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0XHRcdHBhdGggPSBkYXRhWzBdLnRodW1ibmFpbF9sYXJnZTtcclxuXHRcdFx0XHRcdGNyZWF0ZShwYXRoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIGlmICh2aWRlby50eXBlID09PSAndnphYXInKSB7XHJcblx0XHRcdCQuYWpheCh7XHJcblx0XHRcdFx0dHlwZTogJ0dFVCcsXHJcblx0XHRcdFx0dXJsOiAnLy92emFhci5jb20vYXBpL3ZpZGVvcy8nICsgdmlkZW8uaWQgKyAnLmpzb24nLFxyXG5cdFx0XHRcdGpzb25wOiAnY2FsbGJhY2snLFxyXG5cdFx0XHRcdGRhdGFUeXBlOiAnanNvbnAnLFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0XHRcdHBhdGggPSBkYXRhLmZyYW1lZ3JhYl91cmw7XHJcblx0XHRcdFx0XHRjcmVhdGUocGF0aCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTdG9wcyB0aGUgY3VycmVudCB2aWRlby5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0VmlkZW8ucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2NvcmUudHJpZ2dlcignc3RvcCcsIG51bGwsICd2aWRlbycpO1xyXG5cdFx0dGhpcy5fcGxheWluZy5maW5kKCcub3dsLXZpZGVvLWZyYW1lJykucmVtb3ZlKCk7XHJcblx0XHR0aGlzLl9wbGF5aW5nLnJlbW92ZUNsYXNzKCdvd2wtdmlkZW8tcGxheWluZycpO1xyXG5cdFx0dGhpcy5fcGxheWluZyA9IG51bGw7XHJcblx0XHR0aGlzLl9jb3JlLmxlYXZlKCdwbGF5aW5nJyk7XHJcblx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ3N0b3BwZWQnLCBudWxsLCAndmlkZW8nKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTdGFydHMgdGhlIGN1cnJlbnQgdmlkZW8uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gVGhlIGV2ZW50IGFyZ3VtZW50cy5cclxuXHQgKi9cclxuXHRWaWRlby5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHR2YXIgdGFyZ2V0ID0gJChldmVudC50YXJnZXQpLFxyXG5cdFx0XHRpdGVtID0gdGFyZ2V0LmNsb3Nlc3QoJy4nICsgdGhpcy5fY29yZS5zZXR0aW5ncy5pdGVtQ2xhc3MpLFxyXG5cdFx0XHR2aWRlbyA9IHRoaXMuX3ZpZGVvc1tpdGVtLmF0dHIoJ2RhdGEtdmlkZW8nKV0sXHJcblx0XHRcdHdpZHRoID0gdmlkZW8ud2lkdGggfHwgJzEwMCUnLFxyXG5cdFx0XHRoZWlnaHQgPSB2aWRlby5oZWlnaHQgfHwgdGhpcy5fY29yZS4kc3RhZ2UuaGVpZ2h0KCksXHJcblx0XHRcdGh0bWw7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3BsYXlpbmcpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2NvcmUuZW50ZXIoJ3BsYXlpbmcnKTtcclxuXHRcdHRoaXMuX2NvcmUudHJpZ2dlcigncGxheScsIG51bGwsICd2aWRlbycpO1xyXG5cclxuXHRcdGl0ZW0gPSB0aGlzLl9jb3JlLml0ZW1zKHRoaXMuX2NvcmUucmVsYXRpdmUoaXRlbS5pbmRleCgpKSk7XHJcblxyXG5cdFx0dGhpcy5fY29yZS5yZXNldChpdGVtLmluZGV4KCkpO1xyXG5cclxuXHRcdGlmICh2aWRlby50eXBlID09PSAneW91dHViZScpIHtcclxuXHRcdFx0aHRtbCA9ICc8aWZyYW1lIHdpZHRoPVwiJyArIHdpZHRoICsgJ1wiIGhlaWdodD1cIicgKyBoZWlnaHQgKyAnXCIgc3JjPVwiLy93d3cueW91dHViZS5jb20vZW1iZWQvJyArXHJcblx0XHRcdFx0dmlkZW8uaWQgKyAnP2F1dG9wbGF5PTEmcmVsPTAmdj0nICsgdmlkZW8uaWQgKyAnXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPic7XHJcblx0XHR9IGVsc2UgaWYgKHZpZGVvLnR5cGUgPT09ICd2aW1lbycpIHtcclxuXHRcdFx0aHRtbCA9ICc8aWZyYW1lIHNyYz1cIi8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nICsgdmlkZW8uaWQgK1xyXG5cdFx0XHRcdCc/YXV0b3BsYXk9MVwiIHdpZHRoPVwiJyArIHdpZHRoICsgJ1wiIGhlaWdodD1cIicgKyBoZWlnaHQgK1xyXG5cdFx0XHRcdCdcIiBmcmFtZWJvcmRlcj1cIjBcIiB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nO1xyXG5cdFx0fSBlbHNlIGlmICh2aWRlby50eXBlID09PSAndnphYXInKSB7XHJcblx0XHRcdGh0bWwgPSAnPGlmcmFtZSBmcmFtZWJvcmRlcj1cIjBcIicgKyAnaGVpZ2h0PVwiJyArIGhlaWdodCArICdcIicgKyAnd2lkdGg9XCInICsgd2lkdGggK1xyXG5cdFx0XHRcdCdcIiBhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIHdlYmtpdEFsbG93RnVsbFNjcmVlbiAnICtcclxuXHRcdFx0XHQnc3JjPVwiLy92aWV3LnZ6YWFyLmNvbS8nICsgdmlkZW8uaWQgKyAnL3BsYXllcj9hdXRvcGxheT10cnVlXCI+PC9pZnJhbWU+JztcclxuXHRcdH1cclxuXHJcblx0XHQkKCc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLWZyYW1lXCI+JyArIGh0bWwgKyAnPC9kaXY+JykuaW5zZXJ0QWZ0ZXIoaXRlbS5maW5kKCcub3dsLXZpZGVvJykpO1xyXG5cclxuXHRcdHRoaXMuX3BsYXlpbmcgPSBpdGVtLmFkZENsYXNzKCdvd2wtdmlkZW8tcGxheWluZycpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyB3aGV0aGVyIGFuIHZpZGVvIGlzIGN1cnJlbnRseSBpbiBmdWxsIHNjcmVlbiBtb2RlIG9yIG5vdC5cclxuXHQgKiBAdG9kbyBCYWQgc3R5bGUgYmVjYXVzZSBsb29rcyBsaWtlIGEgcmVhZG9ubHkgbWV0aG9kIGJ1dCBjaGFuZ2VzIG1lbWJlcnMuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEByZXR1cm5zIHtCb29sZWFufVxyXG5cdCAqL1xyXG5cdFZpZGVvLnByb3RvdHlwZS5pc0luRnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fCBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudCB8fFxyXG5cdFx0XHRcdGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50O1xyXG5cclxuXHRcdHJldHVybiBlbGVtZW50ICYmICQoZWxlbWVudCkucGFyZW50KCkuaGFzQ2xhc3MoJ293bC12aWRlby1mcmFtZScpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSBwbHVnaW4uXHJcblx0ICovXHJcblx0VmlkZW8ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoYW5kbGVyLCBwcm9wZXJ0eTtcclxuXHJcblx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZignY2xpY2sub3dsLnZpZGVvJyk7XHJcblxyXG5cdFx0Zm9yIChoYW5kbGVyIGluIHRoaXMuX2hhbmRsZXJzKSB7XHJcblx0XHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGhhbmRsZXIsIHRoaXMuX2hhbmRsZXJzW2hhbmRsZXJdKTtcclxuXHRcdH1cclxuXHRcdGZvciAocHJvcGVydHkgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcclxuXHRcdFx0dHlwZW9mIHRoaXNbcHJvcGVydHldICE9ICdmdW5jdGlvbicgJiYgKHRoaXNbcHJvcGVydHldID0gbnVsbCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLlZpZGVvID0gVmlkZW87XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogQW5pbWF0ZSBQbHVnaW5cclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBCYXJ0b3N6IFdvamNpZWNob3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB0aGUgYW5pbWF0ZSBwbHVnaW4uXHJcblx0ICogQGNsYXNzIFRoZSBOYXZpZ2F0aW9uIFBsdWdpblxyXG5cdCAqIEBwYXJhbSB7T3dsfSBzY29wZSAtIFRoZSBPd2wgQ2Fyb3VzZWxcclxuXHQgKi9cclxuXHR2YXIgQW5pbWF0ZSA9IGZ1bmN0aW9uKHNjb3BlKSB7XHJcblx0XHR0aGlzLmNvcmUgPSBzY29wZTtcclxuXHRcdHRoaXMuY29yZS5vcHRpb25zID0gJC5leHRlbmQoe30sIEFuaW1hdGUuRGVmYXVsdHMsIHRoaXMuY29yZS5vcHRpb25zKTtcclxuXHRcdHRoaXMuc3dhcHBpbmcgPSB0cnVlO1xyXG5cdFx0dGhpcy5wcmV2aW91cyA9IHVuZGVmaW5lZDtcclxuXHRcdHRoaXMubmV4dCA9IHVuZGVmaW5lZDtcclxuXHJcblx0XHR0aGlzLmhhbmRsZXJzID0ge1xyXG5cdFx0XHQnY2hhbmdlLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiBlLnByb3BlcnR5Lm5hbWUgPT0gJ3Bvc2l0aW9uJykge1xyXG5cdFx0XHRcdFx0dGhpcy5wcmV2aW91cyA9IHRoaXMuY29yZS5jdXJyZW50KCk7XHJcblx0XHRcdFx0XHR0aGlzLm5leHQgPSBlLnByb3BlcnR5LnZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdkcmFnLm93bC5jYXJvdXNlbCBkcmFnZ2VkLm93bC5jYXJvdXNlbCB0cmFuc2xhdGVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5zd2FwcGluZyA9IGUudHlwZSA9PSAndHJhbnNsYXRlZCc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3RyYW5zbGF0ZS5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5zd2FwcGluZyAmJiAodGhpcy5jb3JlLm9wdGlvbnMuYW5pbWF0ZU91dCB8fCB0aGlzLmNvcmUub3B0aW9ucy5hbmltYXRlSW4pKSB7XHJcblx0XHRcdFx0XHR0aGlzLnN3YXAoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpXHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuY29yZS4kZWxlbWVudC5vbih0aGlzLmhhbmRsZXJzKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEFuaW1hdGUuRGVmYXVsdHMgPSB7XHJcblx0XHRhbmltYXRlT3V0OiBmYWxzZSxcclxuXHRcdGFuaW1hdGVJbjogZmFsc2VcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBUb2dnbGVzIHRoZSBhbmltYXRpb24gY2xhc3NlcyB3aGVuZXZlciBhbiB0cmFuc2xhdGlvbnMgc3RhcnRzLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbnx1bmRlZmluZWR9XHJcblx0ICovXHJcblx0QW5pbWF0ZS5wcm90b3R5cGUuc3dhcCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdGlmICh0aGlzLmNvcmUuc2V0dGluZ3MuaXRlbXMgIT09IDEpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICghJC5zdXBwb3J0LmFuaW1hdGlvbiB8fCAhJC5zdXBwb3J0LnRyYW5zaXRpb24pIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuY29yZS5zcGVlZCgwKTtcclxuXHJcblx0XHR2YXIgbGVmdCxcclxuXHRcdFx0Y2xlYXIgPSAkLnByb3h5KHRoaXMuY2xlYXIsIHRoaXMpLFxyXG5cdFx0XHRwcmV2aW91cyA9IHRoaXMuY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLnByZXZpb3VzKSxcclxuXHRcdFx0bmV4dCA9IHRoaXMuY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLm5leHQpLFxyXG5cdFx0XHRpbmNvbWluZyA9IHRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlSW4sXHJcblx0XHRcdG91dGdvaW5nID0gdGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVPdXQ7XHJcblxyXG5cdFx0aWYgKHRoaXMuY29yZS5jdXJyZW50KCkgPT09IHRoaXMucHJldmlvdXMpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChvdXRnb2luZykge1xyXG5cdFx0XHRsZWZ0ID0gdGhpcy5jb3JlLmNvb3JkaW5hdGVzKHRoaXMucHJldmlvdXMpIC0gdGhpcy5jb3JlLmNvb3JkaW5hdGVzKHRoaXMubmV4dCk7XHJcblx0XHRcdHByZXZpb3VzLm9uZSgkLnN1cHBvcnQuYW5pbWF0aW9uLmVuZCwgY2xlYXIpXHJcblx0XHRcdFx0LmNzcyggeyAnbGVmdCc6IGxlZnQgKyAncHgnIH0gKVxyXG5cdFx0XHRcdC5hZGRDbGFzcygnYW5pbWF0ZWQgb3dsLWFuaW1hdGVkLW91dCcpXHJcblx0XHRcdFx0LmFkZENsYXNzKG91dGdvaW5nKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoaW5jb21pbmcpIHtcclxuXHRcdFx0bmV4dC5vbmUoJC5zdXBwb3J0LmFuaW1hdGlvbi5lbmQsIGNsZWFyKVxyXG5cdFx0XHRcdC5hZGRDbGFzcygnYW5pbWF0ZWQgb3dsLWFuaW1hdGVkLWluJylcclxuXHRcdFx0XHQuYWRkQ2xhc3MoaW5jb21pbmcpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdEFuaW1hdGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0JChlLnRhcmdldCkuY3NzKCB7ICdsZWZ0JzogJycgfSApXHJcblx0XHRcdC5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgb3dsLWFuaW1hdGVkLW91dCBvd2wtYW5pbWF0ZWQtaW4nKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVJbilcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlT3V0KTtcclxuXHRcdHRoaXMuY29yZS5vblRyYW5zaXRpb25FbmQoKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgcGx1Z2luLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRBbmltYXRlLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGFuZGxlciwgcHJvcGVydHk7XHJcblxyXG5cdFx0Zm9yIChoYW5kbGVyIGluIHRoaXMuaGFuZGxlcnMpIHtcclxuXHRcdFx0dGhpcy5jb3JlLiRlbGVtZW50Lm9mZihoYW5kbGVyLCB0aGlzLmhhbmRsZXJzW2hhbmRsZXJdKTtcclxuXHRcdH1cclxuXHRcdGZvciAocHJvcGVydHkgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcclxuXHRcdFx0dHlwZW9mIHRoaXNbcHJvcGVydHldICE9ICdmdW5jdGlvbicgJiYgKHRoaXNbcHJvcGVydHldID0gbnVsbCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkFuaW1hdGUgPSBBbmltYXRlO1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIEF1dG9wbGF5IFBsdWdpblxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIEJhcnRvc3ogV29qY2llY2hvd3NraVxyXG4gKiBAYXV0aG9yIEFydHVzIEtvbGFub3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB0aGUgYXV0b3BsYXkgcGx1Z2luLlxyXG5cdCAqIEBjbGFzcyBUaGUgQXV0b3BsYXkgUGx1Z2luXHJcblx0ICogQHBhcmFtIHtPd2x9IHNjb3BlIC0gVGhlIE93bCBDYXJvdXNlbFxyXG5cdCAqL1xyXG5cdHZhciBBdXRvcGxheSA9IGZ1bmN0aW9uKGNhcm91c2VsKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIFJlZmVyZW5jZSB0byB0aGUgY29yZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPd2x9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2NvcmUgPSBjYXJvdXNlbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFRoZSBhdXRvcGxheSB0aW1lb3V0LlxyXG5cdFx0ICogQHR5cGUge1RpbWVvdXR9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3RpbWVvdXQgPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogSW5kaWNhdGVzIHdoZW5ldmVyIHRoZSBhdXRvcGxheSBpcyBwYXVzZWQuXHJcblx0XHQgKiBAdHlwZSB7Qm9vbGVhbn1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fcGF1c2VkID0gZmFsc2U7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgZXZlbnQgaGFuZGxlcnMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYW5kbGVycyA9IHtcclxuXHRcdFx0J2NoYW5nZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIGUucHJvcGVydHkubmFtZSA9PT0gJ3NldHRpbmdzJykge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXkpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbGF5KCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnN0b3AoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2UgaWYgKGUubmFtZXNwYWNlICYmIGUucHJvcGVydHkubmFtZSA9PT0gJ3Bvc2l0aW9uJykge1xyXG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZygncGxheT8nLCBlKTtcclxuXHRcdFx0XHRcdGlmICh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5KSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuX3NldEF1dG9QbGF5SW50ZXJ2YWwoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXkpIHtcclxuXHRcdFx0XHRcdHRoaXMucGxheSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdwbGF5Lm93bC5hdXRvcGxheSc6ICQucHJveHkoZnVuY3Rpb24oZSwgdCwgcykge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5KHQsIHMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdzdG9wLm93bC5hdXRvcGxheSc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5zdG9wKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J21vdXNlb3Zlci5vd2wuYXV0b3BsYXknOiAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSAmJiB0aGlzLl9jb3JlLmlzKCdyb3RhdGluZycpKSB7XHJcblx0XHRcdFx0XHR0aGlzLnBhdXNlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J21vdXNlbGVhdmUub3dsLmF1dG9wbGF5JzogJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAodGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheUhvdmVyUGF1c2UgJiYgdGhpcy5fY29yZS5pcygncm90YXRpbmcnKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3RvdWNoc3RhcnQub3dsLmNvcmUnOiAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSAmJiB0aGlzLl9jb3JlLmlzKCdyb3RhdGluZycpKSB7XHJcblx0XHRcdFx0XHR0aGlzLnBhdXNlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3RvdWNoZW5kLm93bC5jb3JlJzogJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAodGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheUhvdmVyUGF1c2UpIHtcclxuXHRcdFx0XHRcdHRoaXMucGxheSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcylcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpO1xyXG5cclxuXHRcdC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcclxuXHRcdHRoaXMuX2NvcmUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBBdXRvcGxheS5EZWZhdWx0cywgdGhpcy5fY29yZS5vcHRpb25zKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEF1dG9wbGF5LkRlZmF1bHRzID0ge1xyXG5cdFx0YXV0b3BsYXk6IGZhbHNlLFxyXG5cdFx0YXV0b3BsYXlUaW1lb3V0OiA1MDAwLFxyXG5cdFx0YXV0b3BsYXlIb3ZlclBhdXNlOiBmYWxzZSxcclxuXHRcdGF1dG9wbGF5U3BlZWQ6IGZhbHNlXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU3RhcnRzIHRoZSBhdXRvcGxheS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFt0aW1lb3V0XSAtIFRoZSBpbnRlcnZhbCBiZWZvcmUgdGhlIG5leHQgYW5pbWF0aW9uIHN0YXJ0cy5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkXSAtIFRoZSBhbmltYXRpb24gc3BlZWQgZm9yIHRoZSBhbmltYXRpb25zLlxyXG5cdCAqL1xyXG5cdEF1dG9wbGF5LnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24odGltZW91dCwgc3BlZWQpIHtcclxuXHRcdHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xyXG5cclxuXHRcdGlmICh0aGlzLl9jb3JlLmlzKCdyb3RhdGluZycpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9jb3JlLmVudGVyKCdyb3RhdGluZycpO1xyXG5cclxuXHRcdHRoaXMuX3NldEF1dG9QbGF5SW50ZXJ2YWwoKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIGEgbmV3IHRpbWVvdXRcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbdGltZW91dF0gLSBUaGUgaW50ZXJ2YWwgYmVmb3JlIHRoZSBuZXh0IGFuaW1hdGlvbiBzdGFydHMuXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZF0gLSBUaGUgYW5pbWF0aW9uIHNwZWVkIGZvciB0aGUgYW5pbWF0aW9ucy5cclxuXHQgKiBAcmV0dXJuIHtUaW1lb3V0fVxyXG5cdCAqL1xyXG5cdEF1dG9wbGF5LnByb3RvdHlwZS5fZ2V0TmV4dFRpbWVvdXQgPSBmdW5jdGlvbih0aW1lb3V0LCBzcGVlZCkge1xyXG5cdFx0aWYgKCB0aGlzLl90aW1lb3V0ICkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICh0aGlzLl9wYXVzZWQgfHwgdGhpcy5fY29yZS5pcygnYnVzeScpIHx8IHRoaXMuX2NvcmUuaXMoJ2ludGVyYWN0aW5nJykgfHwgZG9jdW1lbnQuaGlkZGVuKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX2NvcmUubmV4dChzcGVlZCB8fCB0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5U3BlZWQpO1xyXG5cdFx0fSwgdGhpcyksIHRpbWVvdXQgfHwgdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheVRpbWVvdXQpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgYXV0b3BsYXkgaW4gbW90aW9uLlxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0QXV0b3BsYXkucHJvdG90eXBlLl9zZXRBdXRvUGxheUludGVydmFsID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl90aW1lb3V0ID0gdGhpcy5fZ2V0TmV4dFRpbWVvdXQoKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTdG9wcyB0aGUgYXV0b3BsYXkuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEF1dG9wbGF5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIXRoaXMuX2NvcmUuaXMoJ3JvdGF0aW5nJykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XHJcblx0XHR0aGlzLl9jb3JlLmxlYXZlKCdyb3RhdGluZycpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFN0b3BzIHRoZSBhdXRvcGxheS5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0QXV0b3BsYXkucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIXRoaXMuX2NvcmUuaXMoJ3JvdGF0aW5nJykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3BhdXNlZCA9IHRydWU7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIHBsdWdpbi5cclxuXHQgKi9cclxuXHRBdXRvcGxheS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhhbmRsZXIsIHByb3BlcnR5O1xyXG5cclxuXHRcdHRoaXMuc3RvcCgpO1xyXG5cclxuXHRcdGZvciAoaGFuZGxlciBpbiB0aGlzLl9oYW5kbGVycykge1xyXG5cdFx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihoYW5kbGVyLCB0aGlzLl9oYW5kbGVyc1toYW5kbGVyXSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKHByb3BlcnR5IGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XHJcblx0XHRcdHR5cGVvZiB0aGlzW3Byb3BlcnR5XSAhPSAnZnVuY3Rpb24nICYmICh0aGlzW3Byb3BlcnR5XSA9IG51bGwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5hdXRvcGxheSA9IEF1dG9wbGF5O1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIE5hdmlnYXRpb24gUGx1Z2luXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgQXJ0dXMgS29sYW5vd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB0aGUgbmF2aWdhdGlvbiBwbHVnaW4uXHJcblx0ICogQGNsYXNzIFRoZSBOYXZpZ2F0aW9uIFBsdWdpblxyXG5cdCAqIEBwYXJhbSB7T3dsfSBjYXJvdXNlbCAtIFRoZSBPd2wgQ2Fyb3VzZWwuXHJcblx0ICovXHJcblx0dmFyIE5hdmlnYXRpb24gPSBmdW5jdGlvbihjYXJvdXNlbCkge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIGNvcmUuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T3dsfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb3JlID0gY2Fyb3VzZWw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcGx1Z2luIGlzIGluaXRpYWxpemVkIG9yIG5vdC5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtCb29sZWFufVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9pbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogVGhlIGN1cnJlbnQgcGFnaW5nIGluZGV4ZXMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7QXJyYXl9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3BhZ2VzID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgRE9NIGVsZW1lbnRzIG9mIHRoZSB1c2VyIGludGVyZmFjZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2NvbnRyb2xzID0ge307XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBNYXJrdXAgZm9yIGFuIGluZGljYXRvci5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtBcnJheS48U3RyaW5nPn1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fdGVtcGxhdGVzID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBUaGUgY2Fyb3VzZWwgZWxlbWVudC5cclxuXHRcdCAqIEB0eXBlIHtqUXVlcnl9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuJGVsZW1lbnQgPSB0aGlzLl9jb3JlLiRlbGVtZW50O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogT3ZlcnJpZGRlbiBtZXRob2RzIG9mIHRoZSBjYXJvdXNlbC5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX292ZXJyaWRlcyA9IHtcclxuXHRcdFx0bmV4dDogdGhpcy5fY29yZS5uZXh0LFxyXG5cdFx0XHRwcmV2OiB0aGlzLl9jb3JlLnByZXYsXHJcblx0XHRcdHRvOiB0aGlzLl9jb3JlLnRvXHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIGV2ZW50IGhhbmRsZXJzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFuZGxlcnMgPSB7XHJcblx0XHRcdCdwcmVwYXJlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5kb3RzRGF0YSkge1xyXG5cdFx0XHRcdFx0dGhpcy5fdGVtcGxhdGVzLnB1c2goJzxkaXYgY2xhc3M9XCInICsgdGhpcy5fY29yZS5zZXR0aW5ncy5kb3RDbGFzcyArICdcIj4nICtcclxuXHRcdFx0XHRcdFx0JChlLmNvbnRlbnQpLmZpbmQoJ1tkYXRhLWRvdF0nKS5hZGRCYWNrKCdbZGF0YS1kb3RdJykuYXR0cignZGF0YS1kb3QnKSArICc8L2Rpdj4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnYWRkZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEpIHtcclxuXHRcdFx0XHRcdHRoaXMuX3RlbXBsYXRlcy5zcGxpY2UoZS5wb3NpdGlvbiwgMCwgdGhpcy5fdGVtcGxhdGVzLnBvcCgpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQncmVtb3ZlLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLmRvdHNEYXRhKSB7XHJcblx0XHRcdFx0XHR0aGlzLl90ZW1wbGF0ZXMuc3BsaWNlKGUucG9zaXRpb24sIDEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdjaGFuZ2VkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiBlLnByb3BlcnR5Lm5hbWUgPT0gJ3Bvc2l0aW9uJykge1xyXG5cdFx0XHRcdFx0dGhpcy5kcmF3KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2luaXRpYWxpemVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiAhdGhpcy5faW5pdGlhbGl6ZWQpIHtcclxuXHRcdFx0XHRcdHRoaXMuX2NvcmUudHJpZ2dlcignaW5pdGlhbGl6ZScsIG51bGwsICduYXZpZ2F0aW9uJyk7XHJcblx0XHRcdFx0XHR0aGlzLmluaXRpYWxpemUoKTtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHRcdFx0XHR0aGlzLmRyYXcoKTtcclxuXHRcdFx0XHRcdHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHRoaXMuX2NvcmUudHJpZ2dlcignaW5pdGlhbGl6ZWQnLCBudWxsLCAnbmF2aWdhdGlvbicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdyZWZyZXNoZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2luaXRpYWxpemVkKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ3JlZnJlc2gnLCBudWxsLCAnbmF2aWdhdGlvbicpO1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuZHJhdygpO1xyXG5cdFx0XHRcdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdyZWZyZXNoZWQnLCBudWxsLCAnbmF2aWdhdGlvbicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcylcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gc2V0IGRlZmF1bHQgb3B0aW9uc1xyXG5cdFx0dGhpcy5fY29yZS5vcHRpb25zID0gJC5leHRlbmQoe30sIE5hdmlnYXRpb24uRGVmYXVsdHMsIHRoaXMuX2NvcmUub3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHRvZG8gUmVuYW1lIGBzbGlkZUJ5YCB0byBgbmF2QnlgXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5EZWZhdWx0cyA9IHtcclxuXHRcdG5hdjogZmFsc2UsXHJcblx0XHRuYXZUZXh0OiBbICdwcmV2JywgJ25leHQnIF0sXHJcblx0XHRuYXZTcGVlZDogZmFsc2UsXHJcblx0XHRuYXZFbGVtZW50OiAnZGl2JyxcclxuXHRcdG5hdkNvbnRhaW5lcjogZmFsc2UsXHJcblx0XHRuYXZDb250YWluZXJDbGFzczogJ293bC1uYXYnLFxyXG5cdFx0bmF2Q2xhc3M6IFsgJ293bC1wcmV2JywgJ293bC1uZXh0JyBdLFxyXG5cdFx0c2xpZGVCeTogMSxcclxuXHRcdGRvdENsYXNzOiAnb3dsLWRvdCcsXHJcblx0XHRkb3RzQ2xhc3M6ICdvd2wtZG90cycsXHJcblx0XHRkb3RzOiB0cnVlLFxyXG5cdFx0ZG90c0VhY2g6IGZhbHNlLFxyXG5cdFx0ZG90c0RhdGE6IGZhbHNlLFxyXG5cdFx0ZG90c1NwZWVkOiBmYWxzZSxcclxuXHRcdGRvdHNDb250YWluZXI6IGZhbHNlXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSW5pdGlhbGl6ZXMgdGhlIGxheW91dCBvZiB0aGUgcGx1Z2luIGFuZCBleHRlbmRzIHRoZSBjYXJvdXNlbC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG92ZXJyaWRlLFxyXG5cdFx0XHRzZXR0aW5ncyA9IHRoaXMuX2NvcmUuc2V0dGluZ3M7XHJcblxyXG5cdFx0Ly8gY3JlYXRlIERPTSBzdHJ1Y3R1cmUgZm9yIHJlbGF0aXZlIG5hdmlnYXRpb25cclxuXHRcdHRoaXMuX2NvbnRyb2xzLiRyZWxhdGl2ZSA9IChzZXR0aW5ncy5uYXZDb250YWluZXIgPyAkKHNldHRpbmdzLm5hdkNvbnRhaW5lcilcclxuXHRcdFx0OiAkKCc8ZGl2PicpLmFkZENsYXNzKHNldHRpbmdzLm5hdkNvbnRhaW5lckNsYXNzKS5hcHBlbmRUbyh0aGlzLiRlbGVtZW50KSkuYWRkQ2xhc3MoJ2FueUNsYXNzJyk7XHJcblxyXG5cdFx0dGhpcy5fY29udHJvbHMuJHByZXZpb3VzID0gJCgnPCcgKyBzZXR0aW5ncy5uYXZFbGVtZW50ICsgJz4nKVxyXG5cdFx0XHQuYWRkQ2xhc3Moc2V0dGluZ3MubmF2Q2xhc3NbMF0pXHJcblx0XHRcdC5odG1sKHNldHRpbmdzLm5hdlRleHRbMF0pXHJcblx0XHRcdC5wcmVwZW5kVG8odGhpcy5fY29udHJvbHMuJHJlbGF0aXZlKVxyXG5cdFx0XHQub24oJ2NsaWNrJywgJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2KHNldHRpbmdzLm5hdlNwZWVkKTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0dGhpcy5fY29udHJvbHMuJG5leHQgPSAkKCc8JyArIHNldHRpbmdzLm5hdkVsZW1lbnQgKyAnPicpXHJcblx0XHRcdC5hZGRDbGFzcyhzZXR0aW5ncy5uYXZDbGFzc1sxXSlcclxuXHRcdFx0Lmh0bWwoc2V0dGluZ3MubmF2VGV4dFsxXSlcclxuXHRcdFx0LmFwcGVuZFRvKHRoaXMuX2NvbnRyb2xzLiRyZWxhdGl2ZSlcclxuXHRcdFx0Lm9uKCdjbGljaycsICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdHRoaXMubmV4dChzZXR0aW5ncy5uYXZTcGVlZCk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHQvLyBjcmVhdGUgRE9NIHN0cnVjdHVyZSBmb3IgYWJzb2x1dGUgbmF2aWdhdGlvblxyXG5cdFx0aWYgKCFzZXR0aW5ncy5kb3RzRGF0YSkge1xyXG5cdFx0XHR0aGlzLl90ZW1wbGF0ZXMgPSBbICQoJzxkaXY+JylcclxuXHRcdFx0XHQuYWRkQ2xhc3Moc2V0dGluZ3MuZG90Q2xhc3MpXHJcblx0XHRcdFx0LmFwcGVuZCgkKCc8c3Bhbj4nKSlcclxuXHRcdFx0XHQucHJvcCgnb3V0ZXJIVE1MJykgXTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9jb250cm9scy4kYWJzb2x1dGUgPSAoc2V0dGluZ3MuZG90c0NvbnRhaW5lciA/ICQoc2V0dGluZ3MuZG90c0NvbnRhaW5lcilcclxuXHRcdFx0OiAkKCc8ZGl2PicpLmFkZENsYXNzKHNldHRpbmdzLmRvdHNDbGFzcykuYXBwZW5kVG8odGhpcy4kZWxlbWVudCkpLmFkZENsYXNzKCdhbnlDbGFzcycpO1xyXG5cclxuXHRcdHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS5vbignY2xpY2snLCAnZGl2JywgJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdHZhciBpbmRleCA9ICQoZS50YXJnZXQpLnBhcmVudCgpLmlzKHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZSlcclxuXHRcdFx0XHQ/ICQoZS50YXJnZXQpLmluZGV4KCkgOiAkKGUudGFyZ2V0KS5wYXJlbnQoKS5pbmRleCgpO1xyXG5cclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0dGhpcy50byhpbmRleCwgc2V0dGluZ3MuZG90c1NwZWVkKTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHQvLyBvdmVycmlkZSBwdWJsaWMgbWV0aG9kcyBvZiB0aGUgY2Fyb3VzZWxcclxuXHRcdGZvciAob3ZlcnJpZGUgaW4gdGhpcy5fb3ZlcnJpZGVzKSB7XHJcblx0XHRcdHRoaXMuX2NvcmVbb3ZlcnJpZGVdID0gJC5wcm94eSh0aGlzW292ZXJyaWRlXSwgdGhpcyk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIHBsdWdpbi5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhhbmRsZXIsIGNvbnRyb2wsIHByb3BlcnR5LCBvdmVycmlkZTtcclxuXHJcblx0XHRmb3IgKGhhbmRsZXIgaW4gdGhpcy5faGFuZGxlcnMpIHtcclxuXHRcdFx0dGhpcy4kZWxlbWVudC5vZmYoaGFuZGxlciwgdGhpcy5faGFuZGxlcnNbaGFuZGxlcl0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChjb250cm9sIGluIHRoaXMuX2NvbnRyb2xzKSB7XHJcblx0XHRcdHRoaXMuX2NvbnRyb2xzW2NvbnRyb2xdLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChvdmVycmlkZSBpbiB0aGlzLm92ZXJpZGVzKSB7XHJcblx0XHRcdHRoaXMuX2NvcmVbb3ZlcnJpZGVdID0gdGhpcy5fb3ZlcnJpZGVzW292ZXJyaWRlXTtcclxuXHRcdH1cclxuXHRcdGZvciAocHJvcGVydHkgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcclxuXHRcdFx0dHlwZW9mIHRoaXNbcHJvcGVydHldICE9ICdmdW5jdGlvbicgJiYgKHRoaXNbcHJvcGVydHldID0gbnVsbCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlcyB0aGUgaW50ZXJuYWwgc3RhdGUuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGksIGosIGssXHJcblx0XHRcdGxvd2VyID0gdGhpcy5fY29yZS5jbG9uZXMoKS5sZW5ndGggLyAyLFxyXG5cdFx0XHR1cHBlciA9IGxvd2VyICsgdGhpcy5fY29yZS5pdGVtcygpLmxlbmd0aCxcclxuXHRcdFx0bWF4aW11bSA9IHRoaXMuX2NvcmUubWF4aW11bSh0cnVlKSxcclxuXHRcdFx0c2V0dGluZ3MgPSB0aGlzLl9jb3JlLnNldHRpbmdzLFxyXG5cdFx0XHRzaXplID0gc2V0dGluZ3MuY2VudGVyIHx8IHNldHRpbmdzLmF1dG9XaWR0aCB8fCBzZXR0aW5ncy5kb3RzRGF0YVxyXG5cdFx0XHRcdD8gMSA6IHNldHRpbmdzLmRvdHNFYWNoIHx8IHNldHRpbmdzLml0ZW1zO1xyXG5cclxuXHRcdGlmIChzZXR0aW5ncy5zbGlkZUJ5ICE9PSAncGFnZScpIHtcclxuXHRcdFx0c2V0dGluZ3Muc2xpZGVCeSA9IE1hdGgubWluKHNldHRpbmdzLnNsaWRlQnksIHNldHRpbmdzLml0ZW1zKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoc2V0dGluZ3MuZG90cyB8fCBzZXR0aW5ncy5zbGlkZUJ5ID09ICdwYWdlJykge1xyXG5cdFx0XHR0aGlzLl9wYWdlcyA9IFtdO1xyXG5cclxuXHRcdFx0Zm9yIChpID0gbG93ZXIsIGogPSAwLCBrID0gMDsgaSA8IHVwcGVyOyBpKyspIHtcclxuXHRcdFx0XHRpZiAoaiA+PSBzaXplIHx8IGogPT09IDApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3BhZ2VzLnB1c2goe1xyXG5cdFx0XHRcdFx0XHRzdGFydDogTWF0aC5taW4obWF4aW11bSwgaSAtIGxvd2VyKSxcclxuXHRcdFx0XHRcdFx0ZW5kOiBpIC0gbG93ZXIgKyBzaXplIC0gMVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRpZiAoTWF0aC5taW4obWF4aW11bSwgaSAtIGxvd2VyKSA9PT0gbWF4aW11bSkge1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGogPSAwLCArK2s7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGogKz0gdGhpcy5fY29yZS5tZXJnZXJzKHRoaXMuX2NvcmUucmVsYXRpdmUoaSkpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRHJhd3MgdGhlIHVzZXIgaW50ZXJmYWNlLlxyXG5cdCAqIEB0b2RvIFRoZSBvcHRpb24gYGRvdHNEYXRhYCB3b250IHdvcmsuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkaWZmZXJlbmNlLFxyXG5cdFx0XHRzZXR0aW5ncyA9IHRoaXMuX2NvcmUuc2V0dGluZ3MsXHJcbiAgICAgICAgICAgIGFueUNsYXNzID0gdGhpcy5fY29yZS5pdGVtcygpLmxlbmd0aCA8PSBzZXR0aW5ncy5pdGVtcyxcclxuXHRcdFx0aW5kZXggPSB0aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKSxcclxuXHRcdFx0bG9vcCA9IHNldHRpbmdzLmxvb3AgfHwgc2V0dGluZ3MucmV3aW5kO1xyXG5cclxuXHRcdHRoaXMuX2NvbnRyb2xzLiRyZWxhdGl2ZS50b2dnbGVDbGFzcygnYW55Q2xhc3MnLCAhc2V0dGluZ3MubmF2IHx8IGFueUNsYXNzKTtcclxuXHJcblx0XHRpZiAoc2V0dGluZ3MubmF2KSB7XHJcblx0XHRcdHRoaXMuX2NvbnRyb2xzLiRwcmV2aW91cy50b2dnbGVDbGFzcygnYW55Q2xhc3MnLCAhbG9vcCAmJiBpbmRleCA8PSB0aGlzLl9jb3JlLm1pbmltdW0odHJ1ZSkpO1xyXG5cdFx0XHR0aGlzLl9jb250cm9scy4kbmV4dC50b2dnbGVDbGFzcygnYW55Q2xhc3MnLCAhbG9vcCAmJiBpbmRleCA+PSB0aGlzLl9jb3JlLm1heGltdW0odHJ1ZSkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS50b2dnbGVDbGFzcygnYW55Q2xhc3MnLCAhc2V0dGluZ3MuZG90cyB8fCBhbnlDbGFzcyk7XHJcblxyXG5cdFx0aWYgKHNldHRpbmdzLmRvdHMpIHtcclxuXHRcdFx0ZGlmZmVyZW5jZSA9IHRoaXMuX3BhZ2VzLmxlbmd0aCAtIHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS5jaGlsZHJlbigpLmxlbmd0aDtcclxuXHJcblx0XHRcdGlmIChzZXR0aW5ncy5kb3RzRGF0YSAmJiBkaWZmZXJlbmNlICE9PSAwKSB7XHJcblx0XHRcdFx0dGhpcy5fY29udHJvbHMuJGFic29sdXRlLmh0bWwodGhpcy5fdGVtcGxhdGVzLmpvaW4oJycpKTtcclxuXHRcdFx0fSBlbHNlIGlmIChkaWZmZXJlbmNlID4gMCkge1xyXG5cdFx0XHRcdHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS5hcHBlbmQobmV3IEFycmF5KGRpZmZlcmVuY2UgKyAxKS5qb2luKHRoaXMuX3RlbXBsYXRlc1swXSkpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGRpZmZlcmVuY2UgPCAwKSB7XHJcblx0XHRcdFx0dGhpcy5fY29udHJvbHMuJGFic29sdXRlLmNoaWxkcmVuKCkuc2xpY2UoZGlmZmVyZW5jZSkucmVtb3ZlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHR0aGlzLl9jb250cm9scy4kYWJzb2x1dGUuY2hpbGRyZW4oKS5lcSgkLmluQXJyYXkodGhpcy5jdXJyZW50KCksIHRoaXMuX3BhZ2VzKSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEV4dGVuZHMgZXZlbnQgZGF0YS5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBUaGUgZXZlbnQgb2JqZWN0IHdoaWNoIGdldHMgdGhyb3duLlxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLm9uVHJpZ2dlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHR2YXIgc2V0dGluZ3MgPSB0aGlzLl9jb3JlLnNldHRpbmdzO1xyXG5cclxuXHRcdGV2ZW50LnBhZ2UgPSB7XHJcblx0XHRcdGluZGV4OiAkLmluQXJyYXkodGhpcy5jdXJyZW50KCksIHRoaXMuX3BhZ2VzKSxcclxuXHRcdFx0Y291bnQ6IHRoaXMuX3BhZ2VzLmxlbmd0aCxcclxuXHRcdFx0c2l6ZTogc2V0dGluZ3MgJiYgKHNldHRpbmdzLmNlbnRlciB8fCBzZXR0aW5ncy5hdXRvV2lkdGggfHwgc2V0dGluZ3MuZG90c0RhdGFcclxuXHRcdFx0XHQ/IDEgOiBzZXR0aW5ncy5kb3RzRWFjaCB8fCBzZXR0aW5ncy5pdGVtcylcclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgY3VycmVudCBwYWdlIHBvc2l0aW9uIG9mIHRoZSBjYXJvdXNlbC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHJldHVybnMge051bWJlcn1cclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS5jdXJyZW50ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY3VycmVudCA9IHRoaXMuX2NvcmUucmVsYXRpdmUodGhpcy5fY29yZS5jdXJyZW50KCkpO1xyXG5cdFx0cmV0dXJuICQuZ3JlcCh0aGlzLl9wYWdlcywgJC5wcm94eShmdW5jdGlvbihwYWdlLCBpbmRleCkge1xyXG5cdFx0XHRyZXR1cm4gcGFnZS5zdGFydCA8PSBjdXJyZW50ICYmIHBhZ2UuZW5kID49IGN1cnJlbnQ7XHJcblx0XHR9LCB0aGlzKSkucG9wKCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgY3VycmVudCBzdWNjZXNvci9wcmVkZWNlc3NvciBwb3NpdGlvbi5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHJldHVybnMge051bWJlcn1cclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uKHN1Y2Nlc3Nvcikge1xyXG5cdFx0dmFyIHBvc2l0aW9uLCBsZW5ndGgsXHJcblx0XHRcdHNldHRpbmdzID0gdGhpcy5fY29yZS5zZXR0aW5ncztcclxuXHJcblx0XHRpZiAoc2V0dGluZ3Muc2xpZGVCeSA9PSAncGFnZScpIHtcclxuXHRcdFx0cG9zaXRpb24gPSAkLmluQXJyYXkodGhpcy5jdXJyZW50KCksIHRoaXMuX3BhZ2VzKTtcclxuXHRcdFx0bGVuZ3RoID0gdGhpcy5fcGFnZXMubGVuZ3RoO1xyXG5cdFx0XHRzdWNjZXNzb3IgPyArK3Bvc2l0aW9uIDogLS1wb3NpdGlvbjtcclxuXHRcdFx0cG9zaXRpb24gPSB0aGlzLl9wYWdlc1soKHBvc2l0aW9uICUgbGVuZ3RoKSArIGxlbmd0aCkgJSBsZW5ndGhdLnN0YXJ0O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cG9zaXRpb24gPSB0aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKTtcclxuXHRcdFx0bGVuZ3RoID0gdGhpcy5fY29yZS5pdGVtcygpLmxlbmd0aDtcclxuXHRcdFx0c3VjY2Vzc29yID8gcG9zaXRpb24gKz0gc2V0dGluZ3Muc2xpZGVCeSA6IHBvc2l0aW9uIC09IHNldHRpbmdzLnNsaWRlQnk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHBvc2l0aW9uO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNsaWRlcyB0byB0aGUgbmV4dCBpdGVtIG9yIHBhZ2UuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWQ9ZmFsc2VdIC0gVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgdHJhbnNpdGlvbi5cclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oc3BlZWQpIHtcclxuXHRcdCQucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLCB0aGlzLl9jb3JlKSh0aGlzLmdldFBvc2l0aW9uKHRydWUpLCBzcGVlZCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2xpZGVzIHRvIHRoZSBwcmV2aW91cyBpdGVtIG9yIHBhZ2UuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWQ9ZmFsc2VdIC0gVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgdHJhbnNpdGlvbi5cclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24oc3BlZWQpIHtcclxuXHRcdCQucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLCB0aGlzLl9jb3JlKSh0aGlzLmdldFBvc2l0aW9uKGZhbHNlKSwgc3BlZWQpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNsaWRlcyB0byB0aGUgc3BlY2lmaWVkIGl0ZW0gb3IgcGFnZS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIC0gVGhlIHBvc2l0aW9uIG9mIHRoZSBpdGVtIG9yIHBhZ2UuXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZF0gLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgZm9yIHRoZSB0cmFuc2l0aW9uLlxyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3N0YW5kYXJkPWZhbHNlXSAtIFdoZXRoZXIgdG8gdXNlIHRoZSBzdGFuZGFyZCBiZWhhdmlvdXIgb3Igbm90LlxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLnRvID0gZnVuY3Rpb24ocG9zaXRpb24sIHNwZWVkLCBzdGFuZGFyZCkge1xyXG5cdFx0dmFyIGxlbmd0aDtcclxuXHJcblx0XHRpZiAoIXN0YW5kYXJkICYmIHRoaXMuX3BhZ2VzLmxlbmd0aCkge1xyXG5cdFx0XHRsZW5ndGggPSB0aGlzLl9wYWdlcy5sZW5ndGg7XHJcblx0XHRcdCQucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLCB0aGlzLl9jb3JlKSh0aGlzLl9wYWdlc1soKHBvc2l0aW9uICUgbGVuZ3RoKSArIGxlbmd0aCkgJSBsZW5ndGhdLnN0YXJ0LCBzcGVlZCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkLnByb3h5KHRoaXMuX292ZXJyaWRlcy50bywgdGhpcy5fY29yZSkocG9zaXRpb24sIHNwZWVkKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuTmF2aWdhdGlvbiA9IE5hdmlnYXRpb247XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogSGFzaCBQbHVnaW5cclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBBcnR1cyBLb2xhbm93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHRoZSBoYXNoIHBsdWdpbi5cclxuXHQgKiBAY2xhc3MgVGhlIEhhc2ggUGx1Z2luXHJcblx0ICogQHBhcmFtIHtPd2x9IGNhcm91c2VsIC0gVGhlIE93bCBDYXJvdXNlbFxyXG5cdCAqL1xyXG5cdHZhciBIYXNoID0gZnVuY3Rpb24oY2Fyb3VzZWwpIHtcclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmZXJlbmNlIHRvIHRoZSBjb3JlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge093bH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29yZSA9IGNhcm91c2VsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogSGFzaCBpbmRleCBmb3IgdGhlIGl0ZW1zLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFzaGVzID0ge307XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBUaGUgY2Fyb3VzZWwgZWxlbWVudC5cclxuXHRcdCAqIEB0eXBlIHtqUXVlcnl9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuJGVsZW1lbnQgPSB0aGlzLl9jb3JlLiRlbGVtZW50O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIGV2ZW50IGhhbmRsZXJzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFuZGxlcnMgPSB7XHJcblx0XHRcdCdpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5zdGFydFBvc2l0aW9uID09PSAnVVJMSGFzaCcpIHtcclxuXHRcdFx0XHRcdCQod2luZG93KS50cmlnZ2VyKCdoYXNoY2hhbmdlLm93bC5uYXZpZ2F0aW9uJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3ByZXBhcmVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSkge1xyXG5cdFx0XHRcdFx0dmFyIGhhc2ggPSAkKGUuY29udGVudCkuZmluZCgnW2RhdGEtaGFzaF0nKS5hZGRCYWNrKCdbZGF0YS1oYXNoXScpLmF0dHIoJ2RhdGEtaGFzaCcpO1xyXG5cclxuXHRcdFx0XHRcdGlmICghaGFzaCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0dGhpcy5faGFzaGVzW2hhc2hdID0gZS5jb250ZW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdjaGFuZ2VkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiBlLnByb3BlcnR5Lm5hbWUgPT09ICdwb3NpdGlvbicpIHtcclxuXHRcdFx0XHRcdHZhciBjdXJyZW50ID0gdGhpcy5fY29yZS5pdGVtcyh0aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKSksXHJcblx0XHRcdFx0XHRcdGhhc2ggPSAkLm1hcCh0aGlzLl9oYXNoZXMsIGZ1bmN0aW9uKGl0ZW0sIGhhc2gpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gaXRlbSA9PT0gY3VycmVudCA/IGhhc2ggOiBudWxsO1xyXG5cdFx0XHRcdFx0XHR9KS5qb2luKCk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCFoYXNoIHx8IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNsaWNlKDEpID09PSBoYXNoKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGhhc2g7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBzZXQgZGVmYXVsdCBvcHRpb25zXHJcblx0XHR0aGlzLl9jb3JlLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgSGFzaC5EZWZhdWx0cywgdGhpcy5fY29yZS5vcHRpb25zKTtcclxuXHJcblx0XHQvLyByZWdpc3RlciB0aGUgZXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpO1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVyIGZvciBoYXNoIG5hdmlnYXRpb25cclxuXHRcdCQod2luZG93KS5vbignaGFzaGNoYW5nZS5vd2wubmF2aWdhdGlvbicsICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cmluZygxKSxcclxuXHRcdFx0XHRpdGVtcyA9IHRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCksXHJcblx0XHRcdFx0cG9zaXRpb24gPSB0aGlzLl9oYXNoZXNbaGFzaF0gJiYgaXRlbXMuaW5kZXgodGhpcy5faGFzaGVzW2hhc2hdKTtcclxuXHJcblx0XHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uID09PSB0aGlzLl9jb3JlLmN1cnJlbnQoKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fY29yZS50byh0aGlzLl9jb3JlLnJlbGF0aXZlKHBvc2l0aW9uKSwgZmFsc2UsIHRydWUpO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0SGFzaC5EZWZhdWx0cyA9IHtcclxuXHRcdFVSTGhhc2hMaXN0ZW5lcjogZmFsc2VcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgcGx1Z2luLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRIYXNoLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGFuZGxlciwgcHJvcGVydHk7XHJcblxyXG5cdFx0JCh3aW5kb3cpLm9mZignaGFzaGNoYW5nZS5vd2wubmF2aWdhdGlvbicpO1xyXG5cclxuXHRcdGZvciAoaGFuZGxlciBpbiB0aGlzLl9oYW5kbGVycykge1xyXG5cdFx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihoYW5kbGVyLCB0aGlzLl9oYW5kbGVyc1toYW5kbGVyXSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKHByb3BlcnR5IGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XHJcblx0XHRcdHR5cGVvZiB0aGlzW3Byb3BlcnR5XSAhPSAnZnVuY3Rpb24nICYmICh0aGlzW3Byb3BlcnR5XSA9IG51bGwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5IYXNoID0gSGFzaDtcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBTdXBwb3J0IFBsdWdpblxyXG4gKlxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIFZpdmlkIFBsYW5ldCBTb2Z0d2FyZSBHbWJIXHJcbiAqIEBhdXRob3IgQXJ0dXMgS29sYW5vd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHR2YXIgc3R5bGUgPSAkKCc8c3VwcG9ydD4nKS5nZXQoMCkuc3R5bGUsXHJcblx0XHRwcmVmaXhlcyA9ICdXZWJraXQgTW96IE8gbXMnLnNwbGl0KCcgJyksXHJcblx0XHRldmVudHMgPSB7XHJcblx0XHRcdHRyYW5zaXRpb246IHtcclxuXHRcdFx0XHRlbmQ6IHtcclxuXHRcdFx0XHRcdFdlYmtpdFRyYW5zaXRpb246ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcclxuXHRcdFx0XHRcdE1velRyYW5zaXRpb246ICd0cmFuc2l0aW9uZW5kJyxcclxuXHRcdFx0XHRcdE9UcmFuc2l0aW9uOiAnb1RyYW5zaXRpb25FbmQnLFxyXG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRhbmltYXRpb246IHtcclxuXHRcdFx0XHRlbmQ6IHtcclxuXHRcdFx0XHRcdFdlYmtpdEFuaW1hdGlvbjogJ3dlYmtpdEFuaW1hdGlvbkVuZCcsXHJcblx0XHRcdFx0XHRNb3pBbmltYXRpb246ICdhbmltYXRpb25lbmQnLFxyXG5cdFx0XHRcdFx0T0FuaW1hdGlvbjogJ29BbmltYXRpb25FbmQnLFxyXG5cdFx0XHRcdFx0YW5pbWF0aW9uOiAnYW5pbWF0aW9uZW5kJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHRlc3RzID0ge1xyXG5cdFx0XHRjc3N0cmFuc2Zvcm1zOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gISF0ZXN0KCd0cmFuc2Zvcm0nKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y3NzdHJhbnNmb3JtczNkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gISF0ZXN0KCdwZXJzcGVjdGl2ZScpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjc3N0cmFuc2l0aW9uczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICEhdGVzdCgndHJhbnNpdGlvbicpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjc3NhbmltYXRpb25zOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gISF0ZXN0KCdhbmltYXRpb24nKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0ZnVuY3Rpb24gdGVzdChwcm9wZXJ0eSwgcHJlZml4ZWQpIHtcclxuXHRcdHZhciByZXN1bHQgPSBmYWxzZSxcclxuXHRcdFx0dXBwZXIgPSBwcm9wZXJ0eS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3BlcnR5LnNsaWNlKDEpO1xyXG5cclxuXHRcdCQuZWFjaCgocHJvcGVydHkgKyAnICcgKyBwcmVmaXhlcy5qb2luKHVwcGVyICsgJyAnKSArIHVwcGVyKS5zcGxpdCgnICcpLCBmdW5jdGlvbihpLCBwcm9wZXJ0eSkge1xyXG5cdFx0XHRpZiAoc3R5bGVbcHJvcGVydHldICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRyZXN1bHQgPSBwcmVmaXhlZCA/IHByb3BlcnR5IDogdHJ1ZTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBwcmVmaXhlZChwcm9wZXJ0eSkge1xyXG5cdFx0cmV0dXJuIHRlc3QocHJvcGVydHksIHRydWUpO1xyXG5cdH1cclxuXHJcblx0aWYgKHRlc3RzLmNzc3RyYW5zaXRpb25zKCkpIHtcclxuXHRcdC8qIGpzaGludCAtVzA1MyAqL1xyXG5cdFx0JC5zdXBwb3J0LnRyYW5zaXRpb24gPSBuZXcgU3RyaW5nKHByZWZpeGVkKCd0cmFuc2l0aW9uJykpXHJcblx0XHQkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQgPSBldmVudHMudHJhbnNpdGlvbi5lbmRbICQuc3VwcG9ydC50cmFuc2l0aW9uIF07XHJcblx0fVxyXG5cclxuXHRpZiAodGVzdHMuY3NzYW5pbWF0aW9ucygpKSB7XHJcblx0XHQvKiBqc2hpbnQgLVcwNTMgKi9cclxuXHRcdCQuc3VwcG9ydC5hbmltYXRpb24gPSBuZXcgU3RyaW5nKHByZWZpeGVkKCdhbmltYXRpb24nKSlcclxuXHRcdCQuc3VwcG9ydC5hbmltYXRpb24uZW5kID0gZXZlbnRzLmFuaW1hdGlvbi5lbmRbICQuc3VwcG9ydC5hbmltYXRpb24gXTtcclxuXHR9XHJcblxyXG5cdGlmICh0ZXN0cy5jc3N0cmFuc2Zvcm1zKCkpIHtcclxuXHRcdC8qIGpzaGludCAtVzA1MyAqL1xyXG5cdFx0JC5zdXBwb3J0LnRyYW5zZm9ybSA9IG5ldyBTdHJpbmcocHJlZml4ZWQoJ3RyYW5zZm9ybScpKTtcclxuXHRcdCQuc3VwcG9ydC50cmFuc2Zvcm0zZCA9IHRlc3RzLmNzc3RyYW5zZm9ybXMzZCgpO1xyXG5cdH1cclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuIiwiLyohXHJcbiAqIGpxdWVyeS5zdW1vc2VsZWN0IC0gdjMuMC4yXHJcbiAqIGh0dHA6Ly9oZW1hbnRuZWdpLmdpdGh1Yi5pby9qcXVlcnkuc3Vtb3NlbGVjdFxyXG4gKiAyMDE0LTA0LTA4XHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDE1IEhlbWFudCBOZWdpXHJcbiAqIEVtYWlsIDogaGVtYW50LmZybnpAZ21haWwuY29tXHJcbiAqIENvbXByZXNzb3IgaHR0cDovL3JlZnJlc2gtc2YuY29tL1xyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoJCkge1xyXG5cclxuICAgICduYW1lc3BhY2Ugc3Vtbyc7XHJcbiAgICAkLmZuLlN1bW9TZWxlY3QgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG5cclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBlYXNpZXN0IHdheSB0byBoYXZlIGRlZmF1bHQgb3B0aW9ucy5cclxuICAgICAgICB2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJywgICAvLyBEb250IGNoYW5nZSBpdCBoZXJlLlxyXG4gICAgICAgICAgICBjc3ZEaXNwQ291bnQ6IDMsICAgICAgICAgICAgICAvLyBkaXNwbGF5IG5vLiBvZiBpdGVtcyBpbiBtdWx0aXNlbGVjdC4gMCB0byBkaXNwbGF5IGFsbC5cclxuICAgICAgICAgICAgY2FwdGlvbkZvcm1hdDonezB9IFNlbGVjdGVkJywgLy8gZm9ybWF0IG9mIGNhcHRpb24gdGV4dC4geW91IGNhbiBzZXQgeW91ciBsb2NhbGUuXHJcbiAgICAgICAgICAgIGNhcHRpb25Gb3JtYXRBbGxTZWxlY3RlZDonezB9IGFsbCBzZWxlY3RlZCEnLCAvLyBmb3JtYXQgb2YgY2FwdGlvbiB0ZXh0IHdoZW4gYWxsIGVsZW1lbnRzIGFyZSBzZWxlY3RlZC4gc2V0IG51bGwgdG8gdXNlIGNhcHRpb25Gb3JtYXQuIEl0IHdpbGwgbm90IHdvcmsgaWYgdGhlcmUgYXJlIGRpc2FibGVkIGVsZW1lbnRzIGluIHNlbGVjdC5cclxuICAgICAgICAgICAgZmxvYXRXaWR0aDogNDAwLCAgICAgICAgICAgICAgLy8gU2NyZWVuIHdpZHRoIG9mIGRldmljZSBhdCB3aGljaCB0aGUgbGlzdCBpcyByZW5kZXJlZCBpbiBmbG9hdGluZyBwb3B1cCBmYXNoaW9uLlxyXG4gICAgICAgICAgICBmb3JjZUN1c3RvbVJlbmRlcmluZzogZmFsc2UsICAvLyBmb3JjZSB0aGUgY3VzdG9tIG1vZGFsIG9uIGFsbCBkZXZpY2VzIGJlbG93IGZsb2F0V2lkdGggcmVzb2x1dGlvbi5cclxuICAgICAgICAgICAgbmF0aXZlT25EZXZpY2U6IFsnQW5kcm9pZCcsICdCbGFja0JlcnJ5JywgJ2lQaG9uZScsICdpUGFkJywgJ2lQb2QnLCAnT3BlcmEgTWluaScsICdJRU1vYmlsZScsICdTaWxrJ10sIC8vXHJcbiAgICAgICAgICAgIG91dHB1dEFzQ1NWOiBmYWxzZSwgICAgICAgICAgIC8vIHRydWUgdG8gUE9TVCBkYXRhIGFzIGNzdiAoIGZhbHNlIGZvciBIdG1sIGNvbnRyb2wgYXJyYXkgaWUuIGRlZmF1bHQgc2VsZWN0IClcclxuICAgICAgICAgICAgY3N2U2VwQ2hhcjogJywnLCAgICAgICAgICAgICAgLy8gc2VwYXJhdGlvbiBjaGFyIGluIGNzdiBtb2RlXHJcbiAgICAgICAgICAgIG9rQ2FuY2VsSW5NdWx0aTogZmFsc2UsICAgICAgIC8vIGRpc3BsYXkgb2sgY2FuY2VsIGJ1dHRvbnMgaW4gZGVza3RvcCBtb2RlIG11bHRpc2VsZWN0IGFsc28uXHJcbiAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2VDb21iaW5lZDogdHJ1ZSwgIC8vIGltIG11bHRpIHNlbGVjdCBtb2RlIHdldGhlciB0byB0cmlnZ2VyIGNoYW5nZSBldmVudCBvbiBpbmRpdmlkdWFsIHNlbGVjdGlvbiBvciBjb21iaW5lZCBzZWxlY3Rpb24uXHJcbiAgICAgICAgICAgIHNlbGVjdEFsbDogZmFsc2UsICAgICAgICAgICAgIC8vIHRvIGRpc3BsYXkgc2VsZWN0IGFsbCBidXR0b24gaW4gbXVsdGlzZWxlY3QgbW9kZS58fCBhbHNvIHNlbGVjdCBhbGwgd2lsbCBub3QgYmUgYXZhaWxhYmxlIG9uIG1vYmlsZSBkZXZpY2VzLlxyXG5cclxuICAgICAgICAgICAgc2VhcmNoOiBmYWxzZSwgICAgICAgICAgICAgICAgLy8gdG8gZGlzcGxheSBpbnB1dCBmb3IgZmlsdGVyaW5nIGNvbnRlbnQuIHNlbGVjdEFsbHRleHQgd2lsbCBiZSBpbnB1dCB0ZXh0IHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgIHNlYXJjaFRleHQ6ICdTZWFyY2guLi4nLCAgICAgIC8vIHBsYWNlaG9sZGVyIGZvciBzZWFyY2ggaW5wdXRcclxuICAgICAgICAgICAgbm9NYXRjaDogJ05vIG1hdGNoZXMgZm9yIFwiezB9XCInLFxyXG4gICAgICAgICAgICBwcmVmaXg6ICcnLCAgICAgICAgICAgICAgICAgICAvLyBzb21lIHByZWZpeCB1c3VhbGx5IHRoZSBmaWVsZCBuYW1lLiBlZy4gJzxiPkhlbGxvPC9iPidcclxuICAgICAgICAgICAgbG9jYWxlOiBbJ09LJywgJ0NhbmNlbCcsICdTZWxlY3QgQWxsJ10sICAvLyBhbGwgdGV4dCB0aGF0IGlzIHVzZWQuIGRvbid0IGNoYW5nZSB0aGUgaW5kZXguXHJcbiAgICAgICAgICAgIHVwOiBmYWxzZSAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0cnVlIHRvIG9wZW4gdXBzaWRlLlxyXG4gICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB2YXIgcmV0ID0gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbE9iaiA9IHRoaXM7IC8vIHRoZSBvcmlnaW5hbCBzZWxlY3Qgb2JqZWN0LlxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdW1vIHx8ICEkKHRoaXMpLmlzKCdzZWxlY3QnKSkgcmV0dXJuOyAvL2FscmVhZHkgaW5pdGlhbGl6ZWRcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3VtbyA9IHtcclxuICAgICAgICAgICAgICAgIEU6ICQoc2VsT2JqKSwgICAvL3RoZSBqcXVlcnkgb2JqZWN0IG9mIG9yaWdpbmFsIHNlbGVjdCBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgaXNfbXVsdGk6ICQoc2VsT2JqKS5hdHRyKCdtdWx0aXBsZScpLCAgLy9pZiBpdHMgYSBtdWx0aXBsZSBzZWxlY3RcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogJycsXHJcbiAgICAgICAgICAgICAgICBjYXB0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcclxuICAgICAgICAgICAgICAgIG9wdERpdjogJycsXHJcbiAgICAgICAgICAgICAgICBDYXB0aW9uQ29udDogJycsXHJcbiAgICAgICAgICAgICAgICB1bDonJyxcclxuICAgICAgICAgICAgICAgIGlzX2Zsb2F0aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGlzX29wZW5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAvL2JhY2tkcm9wOiAnJyxcclxuICAgICAgICAgICAgICAgIG1vYjpmYWxzZSwgLy8gaWYgdG8gb3BlbiBkZXZpY2UgZGVmYXVsdCBzZWxlY3RcclxuICAgICAgICAgICAgICAgIFBzdGF0ZTogW10sXHJcblxyXG4gICAgICAgICAgICAgICAgY3JlYXRlRWxlbXM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5FLndyYXAoJzxkaXYgY2xhc3M9XCJTdW1vU2VsZWN0XCIgdGFiaW5kZXg9XCIwXCI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QgPSBPLkUucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5jYXB0aW9uID0gJCgnPHNwYW4+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5DYXB0aW9uQ29udCA9ICQoJzxwIGNsYXNzPVwiQ2FwdGlvbkNvbnRcIj48bGFiZWw+PGk+PC9pPjwvbGFiZWw+PC9wPicpLmFkZENsYXNzKCdTZWxlY3RCb3gnKS5hdHRyKCdzdHlsZScsIE8uRS5hdHRyKCdzdHlsZScpKS5wcmVwZW5kKE8uY2FwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QuYXBwZW5kKE8uQ2FwdGlvbkNvbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHR1cm4gb2ZmIGlmIG5vIG11bHRpc2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIU8uaXNfbXVsdGkpc2V0dGluZ3Mub2tDYW5jZWxJbk11bHRpID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoTy5FLmF0dHIoJ2Rpc2FibGVkJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LmFkZENsYXNzKCdkaXNhYmxlZCcpLnJlbW92ZUF0dHIoJ3RhYmluZGV4Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vaWYgb3V0cHV0IGFzIGNzdiBhbmQgaXMgYSBtdWx0aXNlbGVjdC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mub3V0cHV0QXNDU1YgJiYgTy5pc19tdWx0aSAmJiBPLkUuYXR0cignbmFtZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY3JlYXRlIGEgaGlkZGVuIGZpZWxkIHRvIHN0b3JlIGNzdiB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QuYXBwZW5kKCQoJzxpbnB1dCBjbGFzcz1cIkhFTUFOVDEyM1wiIHR5cGU9XCJoaWRkZW5cIiAvPicpLmF0dHIoJ25hbWUnLCBPLkUuYXR0cignbmFtZScpKS52YWwoTy5nZXRTZWxTdHIoKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc28gaXQgY2FuIG5vdCBwb3N0IHRoZSBvcmlnaW5hbCBzZWxlY3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5yZW1vdmVBdHRyKCduYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2JyZWFrIGZvciBtb2JpbGUgcmVuZHJpbmcuLiBpZiBmb3JjZUN1c3RvbVJlbmRlcmluZyBpcyBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPLmlzTW9iaWxlKCkgJiYgIXNldHRpbmdzLmZvcmNlQ3VzdG9tUmVuZGVyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0TmF0aXZlTW9iaWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgbmFtZSBhdHRyIGluIHNlbGVjdCBhZGQgYSBjbGFzcyB0byBjb250YWluZXIgZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoTy5FLmF0dHIoJ25hbWUnKSkgTy5zZWxlY3QuYWRkQ2xhc3MoJ3N1bW9fJytPLkUuYXR0cignbmFtZScpKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2hpZGUgb3JpZ2luYWwgc2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgTy5FLmFkZENsYXNzKCdTdW1vVW5kZXInKS5hdHRyKCd0YWJpbmRleCcsJy0xJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIyMgQ3JlYXRpbmcgdGhlIGxpc3QuLi5cclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdiA9ICQoJzxkaXYgY2xhc3M9XCJvcHRXcmFwcGVyICcrIChzZXR0aW5ncy51cD8ndXAnOicnKSArJ1wiPicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2JyYW5jaCBmb3IgZmxvYXRpbmcgbGlzdCBpbiBsb3cgcmVzIGRldmljZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5mbG9hdGluZ0xpc3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9DcmVhdGluZyB0aGUgbWFya3VwIGZvciB0aGUgYXZhaWxhYmxlIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICBPLnVsID0gJCgnPHVsIGNsYXNzPVwib3B0aW9uc1wiPicpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmFwcGVuZChPLnVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VsZWN0IGFsbCBmdW5jdGlvbmFsaXR5XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3Muc2VsZWN0QWxsKSBPLlNlbEFsbCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZnVuY3Rpb25hbGl0eVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLnNlYXJjaCkgTy5TZWFyY2goKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy51bC5hcHBlbmQoTy5wcmVwSXRlbXMoTy5FLmNoaWxkcmVuKCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9pZiBtdWx0aXBsZSB0aGVuIGFkZCB0aGUgY2xhc3MgbXVsdGlwbGUgYW5kIGFkZCBPSyAvIENBTkNFTCBidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19tdWx0aSkgTy5tdWx0aVNlbGVsZWN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LmFwcGVuZChPLm9wdERpdik7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5iYXNpY0V2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsQWxsU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgcHJlcEl0ZW1zOiBmdW5jdGlvbihvcHRzLCBkKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzID0gW10sIE89dGhpcztcclxuICAgICAgICAgICAgICAgICAgICAkKG9wdHMpLmVhY2goZnVuY3Rpb24gKGksIG9wdCkgeyAgICAgICAvLyBwYXJzaW5nIG9wdGlvbnMgdG8gbGlcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0ID0gJChvcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXMucHVzaChvcHQuaXMoJ29wdGdyb3VwJyk/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCc8bGkgY2xhc3M9XCJncm91cCAnKyAob3B0WzBdLmRpc2FibGVkPydkaXNhYmxlZCc6JycpICsnXCI+PGxhYmVsPicgKyBvcHQuYXR0cignbGFiZWwnKSArJzwvbGFiZWw+PHVsPjwvdWw+PGxpPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgndWwnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChPLnByZXBJdGVtcyhvcHQuY2hpbGRyZW4oKSwgb3B0WzBdLmRpc2FibGVkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbmQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5jcmVhdGVMaShvcHQsIGQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXM7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgQ3JlYXRlcyBhIExJIGVsZW1lbnQgZnJvbSBhIGdpdmVuIG9wdGlvbiBhbmQgYmluZHMgZXZlbnRzIHRvIGl0XHJcbiAgICAgICAgICAgICAgICAvLyMjIHJldHVybnMgdGhlIGpxdWVyeSBpbnN0YW5jZSBvZiBsaSAobm90IGluc2VydGVkIGluIGRvbSlcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUxpOiBmdW5jdGlvbiAob3B0LCBkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZighb3B0LmF0dHIoJ3ZhbHVlJykpb3B0LmF0dHIoJ3ZhbHVlJyxvcHQudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b2RvOiByZW1vdmUgdGhpcyBkYXRhIHZhbCBcclxuICAgICAgICAgICAgICAgICAgICBsaSA9ICQoJzxsaSBjbGFzcz1cIm9wdFwiPjxsYWJlbD4nICsgb3B0LnRleHQoKSArICc8L2xhYmVsPjwvbGk+Jyk7Ly8uZGF0YSgndmFsJyxvcHQudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmRhdGEoJ29wdCcsIG9wdCk7ICAgIC8vIHN0b3JlIGEgZGlyZWN0IHJlZmVyZW5jZSB0byBvcHRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0LmRhdGEoJ2xpJywgbGkpOyAgICAvLyBzdG9yZSBhIGRpcmVjdCByZWZlcmVuY2UgdG8gbGlzdCBpdGVtLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX211bHRpKSBsaS5wcmVwZW5kKCc8c3Bhbj48aT48L2k+PC9zcGFuPicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0WzBdLmRpc2FibGVkIHx8IGQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpID0gbGkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8ub25PcHRDbGljayhsaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRbMF0uc2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0LmF0dHIoJ2NsYXNzJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKG9wdC5hdHRyKCdjbGFzcycpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIFJldHVybnMgdGhlIHNlbGVjdGVkIGl0ZW1zIGFzIHN0cmluZyBpbiBhIE11bHRpc2VsZWN0LlxyXG4gICAgICAgICAgICAgICAgZ2V0U2VsU3RyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBwcmUgc2VsZWN0ZWQgaXRlbXMuXHJcbiAgICAgICAgICAgICAgICAgICAgc29wdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHsgc29wdC5wdXNoKCQodGhpcykudmFsKCkpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc29wdC5qb2luKHNldHRpbmdzLmNzdlNlcENoYXIpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIFRIT1NFIE9LL0NBTkNFTCBCVVRUT05TIE9OIE1VTFRJUExFIFNFTEVDVC5cclxuICAgICAgICAgICAgICAgIG11bHRpU2VsZWxlY3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuYWRkQ2xhc3MoJ211bHRpcGxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5va2J0biA9ICQoJzxwIGNsYXNzPVwiYnRuT2tcIj4nK3NldHRpbmdzLmxvY2FsZVswXSsnPC9wPicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgY29tYmluZWQgY2hhbmdlIGV2ZW50IGlzIHNldC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRyaWdnZXJDaGFuZ2VDb21iaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2hlY2sgZm9yIGEgY2hhbmdlIGluIHRoZSBzZWxlY3Rpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTy5FLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmxlbmd0aCAhPSBPLlBzdGF0ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uIChpLGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS5zZWxlY3RlZCAmJiBPLlBzdGF0ZS5pbmRleE9mKGkpIDwgMCkgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLmNhbGxDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnNldFRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLmhpZGVPcHRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5jYW5jZWxCdG4gPSAkKCc8cCBjbGFzcz1cImJ0bkNhbmNlbFwiPicrc2V0dGluZ3MubG9jYWxlWzFdKyc8L3A+JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLl9jbmJ0bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLmhpZGVPcHRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuYXBwZW5kKCQoJzxkaXYgY2xhc3M9XCJNdWx0aUNvbnRyb2xzXCI+JykuYXBwZW5kKE8ub2tidG4pLmFwcGVuZChPLmNhbmNlbEJ0bikpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBfY25idG46ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgYWxsIHNlbGVjdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmVhY2goZnVuY3Rpb24gKCkgeyB0aGlzLnNlbGVjdGVkID0gZmFsc2U7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5maW5kKCdsaS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc3RvcmUgc2VsZWN0aW9ucyBmcm9tIHNhdmVkIHN0YXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgTy5Qc3RhdGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5maW5kKCdvcHRpb24nKVtPLlBzdGF0ZVtpXV0uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy51bC5maW5kKCdsaS5vcHQnKS5lcShPLlBzdGF0ZVtpXSkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBPLnNlbEFsbFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIFNlbEFsbDpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZighTy5pc19tdWx0aSlyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxBbGwgPSAkKCc8cCBjbGFzcz1cInNlbGVjdC1hbGxcIj48c3Bhbj48aT48L2k+PC9zcGFuPjxsYWJlbD4nICsgc2V0dGluZ3MubG9jYWxlWzJdICsgJzwvbGFiZWw+PC9wPicpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsQWxsLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0Ly9PLnRvZ2dTZWxBbGwoISk7XHJcblx0XHRcdFx0XHRcdE8uc2VsQWxsLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG5cdFx0XHRcdFx0XHRPLm9wdERpdi5maW5kKCdsaS5vcHQnKS5ub3QoJy5oaWRkZW4nKS5lYWNoKGZ1bmN0aW9uKGl4LGUpe1xyXG5cdFx0XHRcdFx0XHRcdGUgPSAkKGUpO1xyXG5cdFx0XHRcdFx0XHRcdGlmKE8uc2VsQWxsLmhhc0NsYXNzKCdzZWxlY3RlZCcpKXtcclxuXHRcdFx0XHRcdFx0XHRcdGlmKCFlLmhhc0NsYXNzKCdzZWxlY3RlZCcpKWUudHJpZ2dlcignY2xpY2snKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYoZS5oYXNDbGFzcygnc2VsZWN0ZWQnKSllLnRyaWdnZXIoJ2NsaWNrJyk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LnByZXBlbmQoTy5zZWxBbGwpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZWFyY2ggbW9kdWxlIChjYW4gYmUgcmVtb3ZlZCBpZiBub3QgcmVxdWlyZWQuKVxyXG4gICAgICAgICAgICAgICAgU2VhcmNoOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MgPSBPLkNhcHRpb25Db250LmFkZENsYXNzKCdzZWFyY2gnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUCA9ICQoJzxwIGNsYXNzPVwibm8tbWF0Y2hcIj4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5mdHh0ID0gJCgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJzZWFyY2gtdHh0XCIgdmFsdWU9XCJcIiBwbGFjZWhvbGRlcj1cIicgKyBzZXR0aW5ncy5zZWFyY2hUZXh0ICsgJ1wiPicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmFwcGVuZChPLmZ0eHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmNoaWxkcmVuKCd1bCcpLmFmdGVyKFApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLmZ0eHQub24oJ2tleXVwLnN1bW8nLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoaWQgPSBPLm9wdERpdi5maW5kKCd1bC5vcHRpb25zIGxpLm9wdCcpLmVhY2goZnVuY3Rpb24oaXgsZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gJChlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihPLmZ0eHQudmFsKCkudG9Mb3dlckNhc2UoKSkgPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkubm90KCcuaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQLmh0bWwoc2V0dGluZ3Mubm9NYXRjaC5yZXBsYWNlKC9cXHswXFx9L2csIE8uZnR4dC52YWwoKSkpLnRvZ2dsZSghaGlkLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbEFsbFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHNlbEFsbFN0YXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zZWxlY3RBbGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjID0gMCwgdmMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5maW5kKCdsaS5vcHQnKS5ub3QoJy5oaWRkZW4nKS5lYWNoKGZ1bmN0aW9uIChpeCwgZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoZSkuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHNjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISQoZSkuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHZjKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NlbGVjdCBhbGwgY2hlY2tib3ggc3RhdGUgY2hhbmdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2MgPT0gdmMpIE8uc2VsQWxsLnJlbW92ZUNsYXNzKCdwYXJ0aWFsJykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNjID09IDApIE8uc2VsQWxsLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCBwYXJ0aWFsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgTy5zZWxBbGwuYWRkQ2xhc3MoJ3BhcnRpYWwnKS8vLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgc2hvd09wdHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8uRS5hdHRyKCdkaXNhYmxlZCcpKSByZXR1cm47IC8vIGlmIHNlbGVjdCBpcyBkaXNhYmxlZCB0aGVuIHJldHJ1blxyXG4gICAgICAgICAgICAgICAgICAgIE8uaXNfb3BlbmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5hZGRDbGFzcygnb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihPLmZ0eHQpTy5mdHh0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBPLnNlbGVjdC5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBoaWRlIG9wdGlvbnMgb24gY2xpY2sgb3V0c2lkZS5cclxuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2suc3VtbycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTy5zZWxlY3QuaXMoZS50YXJnZXQpICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHRhcmdldCBvZiB0aGUgY2xpY2sgaXNuJ3QgdGhlIGNvbnRhaW5lci4uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgTy5zZWxlY3QuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApeyAvLyAuLi4gbm9yIGEgZGVzY2VuZGFudCBvZiB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighTy5pc19vcGVuZWQpcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5oaWRlT3B0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLm9rQ2FuY2VsSW5NdWx0aSlPLl9jbmJ0bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX2Zsb2F0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEggPSBPLm9wdERpdi5jaGlsZHJlbigndWwnKS5vdXRlckhlaWdodCgpICsgMjsgIC8vICsyIGlzIGNsZWFyIGZpeFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19tdWx0aSkgSCA9IEggKyBwYXJzZUludChPLm9wdERpdi5jc3MoJ3BhZGRpbmctYm90dG9tJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5jc3MoJ2hlaWdodCcsIEgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3N1bW9TdG9wU2Nyb2xsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLnNldFBzdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvL21haW50YWluIHN0YXRlIHdoZW4gb2svY2FuY2VsIGJ1dHRvbnMgYXJlIGF2YWlsYWJsZSBzdG9yaW5nIHRoZSBpbmRleGVzLlxyXG4gICAgICAgICAgICAgICAgc2V0UHN0YXRlOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19tdWx0aSAmJiAoTy5pc19mbG9hdGluZyB8fCBzZXR0aW5ncy5va0NhbmNlbEluTXVsdGkpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5Qc3RhdGUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzdW1pbmcgdGhhdCBmaW5kIHJldHVybnMgZWxlbWVudHMgaW4gdHJlZSBvcmRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoaSwgZSl7aWYoZS5zZWxlY3RlZCkgTy5Qc3RhdGUucHVzaChpKTt9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGNhbGxDaGFuZ2U6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkUudHJpZ2dlcignY2hhbmdlJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgaGlkZU9wdHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoTy5pc19vcGVuZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLmlzX29wZW5lZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5yZW1vdmVDbGFzcygnb3BlbicpLmZpbmQoJ3VsIGxpLnNlbCcpLnJlbW92ZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay5zdW1vJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc3Vtb1N0b3BTY3JvbGwnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsZWFyIHRoZSBzZWFyY2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3Muc2VhcmNoKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uZnR4dC52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuZmluZCgndWwub3B0aW9ucyBsaScpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmZpbmQoJy5uby1tYXRjaCcpLnRvZ2dsZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNldE9uT3BlbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGkgPSBPLm9wdERpdi5maW5kKCdsaS5vcHQ6bm90KC5oaWRkZW4pJykuZXEoc2V0dGluZ3Muc2VhcmNoPzA6Ty5FWzBdLnNlbGVjdGVkSW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5maW5kKCdsaS5zZWwnKS5yZW1vdmVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2hvd09wdHMoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBuYXY6IGZ1bmN0aW9uICh1cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcywgYywgXHJcbiAgICAgICAgICAgICAgICAgICAgcz1PLnVsLmZpbmQoJ2xpLm9wdDpub3QoLmRpc2FibGVkLCAuaGlkZGVuKScpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbCA9IE8udWwuZmluZCgnbGkub3B0LnNlbDpub3QoLmhpZGRlbiknKSxcclxuICAgICAgICAgICAgICAgICAgICBpZHggPSBzLmluZGV4KHNlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfb3BlbmVkICYmIHNlbC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cCAmJiBpZHggPiAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHMuZXEoaWR4LTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKCF1cCAmJiBpZHggPCBzLmxlbmd0aC0xICYmIGlkeCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHMuZXEoaWR4KzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHJldHVybjsgLy8gaWYgbm8gaXRlbXMgYmVmb3JlIG9yIGFmdGVyXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWwucmVtb3ZlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWwgPSBjLmFkZENsYXNzKCdzZWwnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmcgc2VsIGl0ZW0gdG8gdmlzaWJsZSB2aWV3LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdWwgPSBPLnVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3QgPSB1bC5zY3JvbGxUb3AoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBzZWwucG9zaXRpb24oKS50b3AgKyBzdDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHQgPj0gc3QgKyB1bC5oZWlnaHQoKS1zZWwub3V0ZXJIZWlnaHQoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLnNjcm9sbFRvcCh0IC0gdWwuaGVpZ2h0KCkgKyBzZWwub3V0ZXJIZWlnaHQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHQ8c3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5zY3JvbGxUb3AodCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0T25PcGVuKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGJhc2ljRXZlbnRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uQ2FwdGlvbkNvbnQuY2xpY2soZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfb3BlbmVkKSBPLmhpZGVPcHRzKCk7IGVsc2UgTy5zaG93T3B0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5vbigna2V5ZG93bi5zdW1vJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZS53aGljaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6IC8vIHVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ubmF2KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDogLy8gZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLm5hdihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOiAvLyBzcGFjZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5zZWFyY2ggJiYgTy5mdHh0LmlzKGUudGFyZ2V0KSlyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzogLy8gZW50ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfb3BlbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuZmluZCgndWwgbGkuc2VsJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXRPbk9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICAgIGNhc2UgOTpcdCAvL3RhYlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6IC8vIGVzY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLm9rQ2FuY2VsSW5NdWx0aSlPLl9jbmJ0bigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLmhpZGVPcHRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBleGl0IHRoaXMgaGFuZGxlciBmb3Igb3RoZXIga2V5c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBwcmV2ZW50IHRoZSBkZWZhdWx0IGFjdGlvbiAoc2Nyb2xsIC8gbW92ZSBjYXJldClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQod2luZG93KS5vbigncmVzaXplLnN1bW8nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uZmxvYXRpbmdMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIG9uT3B0Q2xpY2s6IGZ1bmN0aW9uIChsaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBsaS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaSA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKXJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHh0ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfbXVsdGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGkuZGF0YSgnb3B0JylbMF0uc2VsZWN0ZWQgPSBsaS5oYXNDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsQWxsU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpLnBhcmVudCgpLmZpbmQoJ2xpLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7IC8vaWYgbm90IG11bHRpc2VsZWN0IHRoZW4gcmVtb3ZlIGFsbCBzZWxlY3Rpb25zIGZyb20gdGhpcyBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpLmRhdGEoJ29wdCcpWzBdLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9icmFuY2ggZm9yIGNvbWJpbmVkIGNoYW5nZSBldmVudC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoTy5pc19tdWx0aSAmJiBzZXR0aW5ncy50cmlnZ2VyQ2hhbmdlQ29tYmluZWQgJiYgKE8uaXNfZmxvYXRpbmcgfHwgc2V0dGluZ3Mub2tDYW5jZWxJbk11bHRpKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5jYWxsQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTy5pc19tdWx0aSkgTy5oaWRlT3B0cygpOyAvL2lmIGl0cyBub3QgYSBtdWx0aXNlbGVjdCB0aGVuIGhpZGUgb24gc2luZ2xlIHNlbGVjdC5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLnBsYWNlaG9sZGVyID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19tdWx0aSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxzID0gTy5FLmZpbmQoJzpzZWxlY3RlZCcpLm5vdCgnOmRpc2FibGVkJyk7IC8vc2VsZWN0ZWQgb3B0aW9ucy5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzZWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgKyAxID49IHNldHRpbmdzLmNzdkRpc3BDb3VudCAmJiBzZXR0aW5ncy5jc3ZEaXNwQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbHMubGVuZ3RoID09IE8uRS5maW5kKCdvcHRpb24nKS5sZW5ndGggJiYgc2V0dGluZ3MuY2FwdGlvbkZvcm1hdEFsbFNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnBsYWNlaG9sZGVyID0gc2V0dGluZ3MuY2FwdGlvbkZvcm1hdEFsbFNlbGVjdGVkLnJlcGxhY2UoL1xcezBcXH0vZywgc2Vscy5sZW5ndGgpKycsJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucGxhY2Vob2xkZXIgPSBzZXR0aW5ncy5jYXB0aW9uRm9ybWF0LnJlcGxhY2UoL1xcezBcXH0vZywgc2Vscy5sZW5ndGgpKycsJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgTy5wbGFjZWhvbGRlciArPSAkKHNlbHNbaV0pLnRleHQoKSArIFwiLCBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucGxhY2Vob2xkZXIgPSBPLnBsYWNlaG9sZGVyLnJlcGxhY2UoLywoW14sXSopJC8sICckMScpOyAvL3JlbW92ZSB1bmV4cGVjdGVkIFwiLFwiIGZyb20gbGFzdC5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8ucGxhY2Vob2xkZXIgPSBPLkUuZmluZCgnOnNlbGVjdGVkJykubm90KCc6ZGlzYWJsZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpc19wbGFjZWhvbGRlciA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIU8ucGxhY2Vob2xkZXIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzX3BsYWNlaG9sZGVyID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8ucGxhY2Vob2xkZXIgPSBPLkUuYXR0cigncGxhY2Vob2xkZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFPLnBsYWNlaG9sZGVyKSAgICAgICAgICAgICAgICAgIC8vaWYgcGxhY2Vob2xkZXIgaXMgdGhlcmUgdGhlbiBzZXQgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucGxhY2Vob2xkZXIgPSBPLkUuZmluZCgnb3B0aW9uOmRpc2FibGVkOnNlbGVjdGVkJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5wbGFjZWhvbGRlciA9IE8ucGxhY2Vob2xkZXIgPyAoc2V0dGluZ3MucHJlZml4ICsgJyAnICsgTy5wbGFjZWhvbGRlcikgOiBzZXR0aW5ncy5wbGFjZWhvbGRlclxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3NldCBkaXNwbGF5IHRleHRcclxuICAgICAgICAgICAgICAgICAgICBPLmNhcHRpb24uaHRtbChPLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBPLkNhcHRpb25Db250LmF0dHIoJ3RpdGxlJywgTy5wbGFjZWhvbGRlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0IHRoZSBoaWRkZW4gZmllbGQgaWYgcG9zdCBhcyBjc3YgaXMgdHJ1ZS5cclxuICAgICAgICAgICAgICAgICAgICBjc3ZGaWVsZCA9IE8uc2VsZWN0LmZpbmQoJ2lucHV0LkhFTUFOVDEyMycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjc3ZGaWVsZC5sZW5ndGgpIGNzdkZpZWxkLnZhbChPLmdldFNlbFN0cigpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9hZGQgY2xhc3MgcGxhY2Vob2xkZXIgaWYgaXRzIGEgcGxhY2Vob2xkZXIgdGV4dC5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNfcGxhY2Vob2xkZXIpIE8uY2FwdGlvbi5hZGRDbGFzcygncGxhY2Vob2xkZXInKTsgZWxzZSBPLmNhcHRpb24ucmVtb3ZlQ2xhc3MoJ3BsYWNlaG9sZGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE8ucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGlzTW9iaWxlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkYXB0ZWQgZnJvbSBodHRwOi8vd3d3LmRldGVjdG1vYmlsZWJyb3dzZXJzLmNvbVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnZlbmRvciB8fCB3aW5kb3cub3BlcmE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrcyBmb3IgaU9zLCBBbmRyb2lkLCBCbGFja2JlcnJ5LCBPcGVyYSBNaW5pLCBhbmQgV2luZG93cyBtb2JpbGUgZGV2aWNlc1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2V0dGluZ3MubmF0aXZlT25EZXZpY2UubGVuZ3RoOyBpKyspIGlmICh1YS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZXR0aW5ncy5uYXRpdmVPbkRldmljZVtpXS50b0xvd2VyQ2FzZSgpKSA+IDApIHJldHVybiBzZXR0aW5ncy5uYXRpdmVPbkRldmljZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHNldE5hdGl2ZU1vYmlsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLkUuYWRkQ2xhc3MoJ1NlbGVjdENsYXNzJykvLy5jc3MoJ2hlaWdodCcsIE8uc2VsZWN0Lm91dGVySGVpZ2h0KCkpO1xyXG5cdFx0XHRcdFx0Ty5tb2IgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uRS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNldFRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgZmxvYXRpbmdMaXN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY2FsbGVkIG9uIGluaXQgYW5kIGFsc28gb24gcmVzaXplLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vTy5pc19mbG9hdGluZyA9IHRydWUgaWYgd2luZG93IHdpZHRoIGlzIDwgc3BlY2lmaWVkIGZsb2F0IHdpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgTy5pc19mbG9hdGluZyA9ICQod2luZG93KS53aWR0aCgpIDw9IHNldHRpbmdzLmZsb2F0V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0IGNsYXNzIGlzRmxvYXRpbmdcclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi50b2dnbGVDbGFzcygnaXNGbG9hdGluZycsIE8uaXNfZmxvYXRpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSBoZWlnaHQgaWYgbm90IGZsb2F0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFPLmlzX2Zsb2F0aW5nKSBPLm9wdERpdi5jc3MoJ2hlaWdodCcsICcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy90b2dnbGUgY2xhc3MgYWNjb3JkaW5nIHRvIG9rQ2FuY2VsSW5NdWx0aSBmbGFnIG9ubHkgd2hlbiBpdCBpcyBub3QgZmxvYXRpbmdcclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi50b2dnbGVDbGFzcygnb2tDYW5jZWxJbk11bHRpJywgc2V0dGluZ3Mub2tDYW5jZWxJbk11bHRpICYmICFPLmlzX2Zsb2F0aW5nKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy9IRUxQRVJTIEZPUiBPVVRTSURFUlNcclxuICAgICAgICAgICAgICAgIC8vIHZhbGlkYXRlcyByYW5nZSBvZiBnaXZlbiBpdGVtIG9wZXJhdGlvbnNcclxuICAgICAgICAgICAgICAgIHZSYW5nZTogZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cyA9IE8uRS5maW5kKCdvcHRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5sZW5ndGggPD0gaSB8fCBpIDwgMCkgdGhyb3cgXCJpbmRleCBvdXQgb2YgYm91bmRzXCJcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTztcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy90b2dnbGVzIHNlbGVjdGlvbiBvbiBjIGFzIGJvb2xlYW4uXHJcbiAgICAgICAgICAgICAgICB0b2dnU2VsOiBmdW5jdGlvbiAoYywgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGkpID09PSBcIm51bWJlclwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy52UmFuZ2UoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdCA9IE8uRS5maW5kKCdvcHRpb24nKVtpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0ID0gTy5FLmZpbmQoJ29wdGlvblt2YWx1ZT1cIicraSsnXCJdJylbMF18fDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0IHx8IG9wdC5kaXNhYmxlZCkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYob3B0LnNlbGVjdGVkICE9IGMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHQuc2VsZWN0ZWQgPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighTy5tb2IpICQob3B0KS5kYXRhKCdsaScpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcsYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLmNhbGxDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXRQc3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXRUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsQWxsU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vdG9nZ2xlcyBkaXNhYmxlZCBvbiBjIGFzIGJvb2xlYW4uXHJcbiAgICAgICAgICAgICAgICB0b2dnRGlzOiBmdW5jdGlvbiAoYywgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcy52UmFuZ2UoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5FLmZpbmQoJ29wdGlvbicpW2ldLmRpc2FibGVkID0gYztcclxuICAgICAgICAgICAgICAgICAgICBpZihjKU8uRS5maW5kKCdvcHRpb24nKVtpXS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFPLm1vYilPLm9wdERpdi5maW5kKCd1bC5vcHRpb25zIGxpJykuZXEoaSkudG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJywgYykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZXRUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZSBkaXNhYmxlL2VuYWJsZSBvbiBjb21wbGV0ZSBzZWxlY3QgY29udHJvbFxyXG4gICAgICAgICAgICAgICAgdG9nZ1N1bW86IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLmVuYWJsZWQgPSB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QudG9nZ2xlQ2xhc3MoJ2Rpc2FibGVkJywgdmFsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LmF0dHIoJ3RhYmluZGV4JywnMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE87XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vdG9nZ2xlcyBhbGxvcHRpb24gb24gYyBhcyBib29sZWFuLlxyXG4gICAgICAgICAgICAgICAgdG9nZ1NlbEFsbDogZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5FLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKGl4LCBlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTy5FLmZpbmQoJ29wdGlvbicpWyQodGhpcykuaW5kZXgoKV0uZGlzYWJsZWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLmZpbmQoJ29wdGlvbicpWyQodGhpcykuaW5kZXgoKV0uc2VsZWN0ZWQgPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU8ubW9iKVxyXG5cdFx0XHRcdFx0XHRcdE8ub3B0RGl2LmZpbmQoJ3VsLm9wdGlvbnMgbGknKS5lcSgkKHRoaXMpLmluZGV4KCkpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcsIGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNldFRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZighTy5tb2IgJiYgTy5zZWxBbGwpTy5zZWxBbGwucmVtb3ZlQ2xhc3MoJ3BhcnRpYWwnKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnLGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uY2FsbENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2V0UHN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8qIG91dHNpZGUgYWNjZXNzaWJpbGl0eSBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZnJvbSB0aGUgZWxlbWVudCBpbnN0YW5jZS5cclxuICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICByZWxvYWQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxtID0gdGhpcy51bmxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJChlbG0pLlN1bW9TZWxlY3Qoc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICB1bmxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QuYmVmb3JlKE8uRSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5FLnNob3coKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLm91dHB1dEFzQ1NWICYmIE8uaXNfbXVsdGkgJiYgTy5zZWxlY3QuZmluZCgnaW5wdXQuSEVNQU5UMTIzJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5hdHRyKCduYW1lJywgTy5zZWxlY3QuZmluZCgnaW5wdXQuSEVNQU5UMTIzJykuYXR0cignbmFtZScpKTsgLy8gcmVzdG9yZSB0aGUgbmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNlbE9iai5zdW1vO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxPYmo7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgYWRkIGEgbmV3IG9wdGlvbiB0byBzZWxlY3QgYXQgYSBnaXZlbiBpbmRleC5cclxuICAgICAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gKHZhbCwgdHh0LCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT0gXCJ1bmRlZmluZWRcIikgdGhyb3cgXCJObyB2YWx1ZSB0byBhZGRcIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0cz1PLkUuZmluZCgnb3B0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHR4dCA9PSBcIm51bWJlclwiKSB7IGkgPSB0eHQ7IHR4dCA9IHZhbDsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdHh0ID09IFwidW5kZWZpbmVkXCIpIHsgdHh0ID0gdmFsOyB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG9wdCA9ICQoXCI8b3B0aW9uPjwvb3B0aW9uPlwiKS52YWwodmFsKS5odG1sKHR4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmxlbmd0aCA8IGkpIHRocm93IFwiaW5kZXggb3V0IG9mIGJvdW5kc1wiXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaSA9PSBcInVuZGVmaW5lZFwiIHx8IG9wdHMubGVuZ3RoID09IGkpIHsgLy8gYWRkIGl0IHRvIHRoZSBsYXN0IGlmIGdpdmVuIGluZGV4IGlzIGxhc3Qgbm8gb3Igbm8gaW5kZXggcHJvdmlkZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5hcHBlbmQob3B0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIU8ubW9iKU8udWwuYXBwZW5kKE8uY3JlYXRlTGkob3B0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzLmVxKGkpLmJlZm9yZShvcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighTy5tb2IpTy51bC5maW5kKCdsaS5vcHQnKS5lcShpKS5iZWZvcmUoTy5jcmVhdGVMaShvcHQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxPYmo7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgcmVtb3ZlcyBhbiBpdGVtIGF0IGEgZ2l2ZW4gaW5kZXguXHJcbiAgICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzLnZSYW5nZShpKTtcclxuICAgICAgICAgICAgICAgICAgICBPLkUuZmluZCgnb3B0aW9uJykuZXEoaSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIU8ubW9iKU8ub3B0RGl2LmZpbmQoJ3VsLm9wdGlvbnMgbGknKS5lcShpKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNldFRleHQoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBTZWxlY3QgYW4gaXRlbSBhdCBhIGdpdmVuIGluZGV4LlxyXG4gICAgICAgICAgICAgICAgc2VsZWN0SXRlbTogZnVuY3Rpb24gKGkpIHsgdGhpcy50b2dnU2VsKHRydWUsIGkpOyB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgVW5TZWxlY3QgYW4gaXRlbiBhdCBhIGdpdmVuIGluZGV4LlxyXG4gICAgICAgICAgICAgICAgdW5TZWxlY3RJdGVtOiBmdW5jdGlvbiAoaSkgeyB0aGlzLnRvZ2dTZWwoZmFsc2UsIGkpOyB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgU2VsZWN0IGFsbCBpdGVtcyAgb2YgdGhlIHNlbGVjdC5cclxuICAgICAgICAgICAgICAgIHNlbGVjdEFsbDogZnVuY3Rpb24gKCkgeyB0aGlzLnRvZ2dTZWxBbGwodHJ1ZSk7IH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBVblNlbGVjdCBhbGwgaXRlbXMgb2YgdGhlIHNlbGVjdC5cclxuICAgICAgICAgICAgICAgIHVuU2VsZWN0QWxsOiBmdW5jdGlvbiAoKSB7IHRoaXMudG9nZ1NlbEFsbChmYWxzZSk7IH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBEaXNhYmxlIGFuIGl0ZW4gYXQgYSBnaXZlbiBpbmRleC5cclxuICAgICAgICAgICAgICAgIGRpc2FibGVJdGVtOiBmdW5jdGlvbiAoaSkgeyB0aGlzLnRvZ2dEaXModHJ1ZSwgaSkgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIFJlbW92ZXMgZGlzYWJsZWQgYW4gaXRlbiBhdCBhIGdpdmVuIGluZGV4LlxyXG4gICAgICAgICAgICAgICAgZW5hYmxlSXRlbTogZnVuY3Rpb24gKGkpIHsgdGhpcy50b2dnRGlzKGZhbHNlLCBpKSB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgTmV3IHNpbXBsZSBtZXRob2RzIGFzIGdldHRlciBhbmQgc2V0dGVyIGFyZSBub3Qgd29ya2luZyBmaW5lIGluIGllOC1cclxuICAgICAgICAgICAgICAgIC8vIyMgdmFyaWFibGUgdG8gY2hlY2sgc3RhdGUgb2YgY29udHJvbCBpZiBlbmFibGVkIG9yIGRpc2FibGVkLlxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZCA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAvLyMjIEVuYWJsZXMgdGhlIGNvbnRyb2xcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2dnU3VtbyhmYWxzZSl9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgRGlzYWJsZXMgdGhlIGNvbnRyb2xcclxuICAgICAgICAgICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9nZ1N1bW8odHJ1ZSl9LFxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uY3JlYXRlRWxlbXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNldFRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gT1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHNlbE9iai5zdW1vLmluaXQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldC5sZW5ndGggPT0gMSA/IHJldFswXSA6IHJldDtcclxuICAgIH07XHJcblxyXG5cclxufShqUXVlcnkpKTtcclxuIiwiLyohXHJcbiAqIEZvdG9yYW1hIDQuNi40IHwgaHR0cDovL2ZvdG9yYW1hLmlvL2xpY2Vuc2UvXHJcbiAqL1xyXG5mb3RvcmFtYVZlcnNpb249XCI0LjYuNFwiLGZ1bmN0aW9uKGEsYixjLGQsZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZihhKXt2YXIgYj1cImJlel9cIitkLm1ha2VBcnJheShhcmd1bWVudHMpLmpvaW4oXCJfXCIpLnJlcGxhY2UoXCIuXCIsXCJwXCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGQuZWFzaW5nW2JdKXt2YXIgYz1mdW5jdGlvbihhLGIpe3ZhciBjPVtudWxsLG51bGxdLGQ9W251bGwsbnVsbF0sZT1bbnVsbCxudWxsXSxmPWZ1bmN0aW9uKGYsZyl7cmV0dXJuIGVbZ109MyphW2ddLGRbZ109MyooYltnXS1hW2ddKS1lW2ddLGNbZ109MS1lW2ddLWRbZ10sZiooZVtnXStmKihkW2ddK2YqY1tnXSkpfSxnPWZ1bmN0aW9uKGEpe3JldHVybiBlWzBdK2EqKDIqZFswXSszKmNbMF0qYSl9LGg9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9YSxkPTA7KytkPDE0JiYoYj1mKGMsMCktYSwhKE1hdGguYWJzKGIpPC4wMDEpKTspYy09Yi9nKGMpO3JldHVybiBjfTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGYoaChhKSwxKX19O2QuZWFzaW5nW2JdPWZ1bmN0aW9uKGIsZCxlLGYsZyl7cmV0dXJuIGYqYyhbYVswXSxhWzFdXSxbYVsyXSxhWzNdXSkoZC9nKStlfX1yZXR1cm4gYn1mdW5jdGlvbiBnKCl7fWZ1bmN0aW9uIGgoYSxiLGMpe3JldHVybiBNYXRoLm1heChpc05hTihiKT8tMS8wOmIsTWF0aC5taW4oaXNOYU4oYyk/MS8wOmMsYSkpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGEubWF0Y2goL21hLykmJmEubWF0Y2goLy0/XFxkKyg/IWQpL2cpW2EubWF0Y2goLzNkLyk/MTI6NF19ZnVuY3Rpb24gaihhKXtyZXR1cm4gSWM/K2koYS5jc3MoXCJ0cmFuc2Zvcm1cIikpOithLmNzcyhcImxlZnRcIikucmVwbGFjZShcInB4XCIsXCJcIil9ZnVuY3Rpb24gayhhKXt2YXIgYj17fTtyZXR1cm4gSWM/Yi50cmFuc2Zvcm09XCJ0cmFuc2xhdGUzZChcIithK1wicHgsMCwwKVwiOmIubGVmdD1hLGJ9ZnVuY3Rpb24gbChhKXtyZXR1cm57XCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCI6YStcIm1zXCJ9fWZ1bmN0aW9uIG0oYSxiKXtyZXR1cm4gaXNOYU4oYSk/YjphfWZ1bmN0aW9uIG4oYSxiKXtyZXR1cm4gbSgrU3RyaW5nKGEpLnJlcGxhY2UoYnx8XCJweFwiLFwiXCIpKX1mdW5jdGlvbiBvKGEpe3JldHVybi8lJC8udGVzdChhKT9uKGEsXCIlXCIpOmV9ZnVuY3Rpb24gcChhLGIpe3JldHVybiBtKG8oYSkvMTAwKmIsbihhKSl9ZnVuY3Rpb24gcShhKXtyZXR1cm4oIWlzTmFOKG4oYSkpfHwhaXNOYU4obihhLFwiJVwiKSkpJiZhfWZ1bmN0aW9uIHIoYSxiLGMsZCl7cmV0dXJuKGEtKGR8fDApKSooYisoY3x8MCkpfWZ1bmN0aW9uIHMoYSxiLGMsZCl7cmV0dXJuLU1hdGgucm91bmQoYS8oYisoY3x8MCkpLShkfHwwKSl9ZnVuY3Rpb24gdChhKXt2YXIgYj1hLmRhdGEoKTtpZighYi50RW5kKXt2YXIgYz1hWzBdLGQ9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kXCIsbXNUcmFuc2l0aW9uOlwiTVNUcmFuc2l0aW9uRW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn07VChjLGRbdWMucHJlZml4ZWQoXCJ0cmFuc2l0aW9uXCIpXSxmdW5jdGlvbihhKXtiLnRQcm9wJiZhLnByb3BlcnR5TmFtZS5tYXRjaChiLnRQcm9wKSYmYi5vbkVuZEZuKCl9KSxiLnRFbmQ9ITB9fWZ1bmN0aW9uIHUoYSxiLGMsZCl7dmFyIGUsZj1hLmRhdGEoKTtmJiYoZi5vbkVuZEZuPWZ1bmN0aW9uKCl7ZXx8KGU9ITAsY2xlYXJUaW1lb3V0KGYudFQpLGMoKSl9LGYudFByb3A9YixjbGVhclRpbWVvdXQoZi50VCksZi50VD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zi5vbkVuZEZuKCl9LDEuNSpkKSx0KGEpKX1mdW5jdGlvbiB2KGEsYil7aWYoYS5sZW5ndGgpe3ZhciBjPWEuZGF0YSgpO0ljPyhhLmNzcyhsKDApKSxjLm9uRW5kRm49ZyxjbGVhclRpbWVvdXQoYy50VCkpOmEuc3RvcCgpO3ZhciBkPXcoYixmdW5jdGlvbigpe3JldHVybiBqKGEpfSk7cmV0dXJuIGEuY3NzKGsoZCkpLGR9fWZ1bmN0aW9uIHcoKXtmb3IodmFyIGEsYj0wLGM9YXJndW1lbnRzLmxlbmd0aDtjPmImJihhPWI/YXJndW1lbnRzW2JdKCk6YXJndW1lbnRzW2JdLFwibnVtYmVyXCIhPXR5cGVvZiBhKTtiKyspO3JldHVybiBhfWZ1bmN0aW9uIHgoYSxiKXtyZXR1cm4gTWF0aC5yb3VuZChhKyhiLWEpLzEuNSl9ZnVuY3Rpb24geSgpe3JldHVybiB5LnA9eS5wfHwoXCJodHRwczpcIj09PWMucHJvdG9jb2w/XCJodHRwczovL1wiOlwiaHR0cDovL1wiKSx5LnB9ZnVuY3Rpb24geihhKXt2YXIgYz1iLmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiBjLmhyZWY9YSxjfWZ1bmN0aW9uIEEoYSxiKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gYTthPXooYSk7dmFyIGMsZDtpZihhLmhvc3QubWF0Y2goL3lvdXR1YmVcXC5jb20vKSYmYS5zZWFyY2gpe2lmKGM9YS5zZWFyY2guc3BsaXQoXCJ2PVwiKVsxXSl7dmFyIGU9Yy5pbmRleE9mKFwiJlwiKTstMSE9PWUmJihjPWMuc3Vic3RyaW5nKDAsZSkpLGQ9XCJ5b3V0dWJlXCJ9fWVsc2UgYS5ob3N0Lm1hdGNoKC95b3V0dWJlXFwuY29tfHlvdXR1XFwuYmUvKT8oYz1hLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8oZW1iZWRcXC98dlxcLyk/LyxcIlwiKS5yZXBsYWNlKC9cXC8uKi8sXCJcIiksZD1cInlvdXR1YmVcIik6YS5ob3N0Lm1hdGNoKC92aW1lb1xcLmNvbS8pJiYoZD1cInZpbWVvXCIsYz1hLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8odmlkZW9cXC8pPy8sXCJcIikucmVwbGFjZSgvXFwvLiovLFwiXCIpKTtyZXR1cm4gYyYmZHx8IWJ8fChjPWEuaHJlZixkPVwiY3VzdG9tXCIpLGM/e2lkOmMsdHlwZTpkLHM6YS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sXCJcIikscDp5KCl9OiExfWZ1bmN0aW9uIEIoYSxiLGMpe3ZhciBlLGYsZz1hLnZpZGVvO3JldHVyblwieW91dHViZVwiPT09Zy50eXBlPyhmPXkoKStcImltZy55b3V0dWJlLmNvbS92aS9cIitnLmlkK1wiL2RlZmF1bHQuanBnXCIsZT1mLnJlcGxhY2UoL1xcL2RlZmF1bHQuanBnJC8sXCIvaHFkZWZhdWx0LmpwZ1wiKSxhLnRodW1ic1JlYWR5PSEwKTpcInZpbWVvXCI9PT1nLnR5cGU/ZC5hamF4KHt1cmw6eSgpK1widmltZW8uY29tL2FwaS92Mi92aWRlby9cIitnLmlkK1wiLmpzb25cIixkYXRhVHlwZTpcImpzb25wXCIsc3VjY2VzczpmdW5jdGlvbihkKXthLnRodW1ic1JlYWR5PSEwLEMoYix7aW1nOmRbMF0udGh1bWJuYWlsX2xhcmdlLHRodW1iOmRbMF0udGh1bWJuYWlsX3NtYWxsfSxhLmksYyl9fSk6YS50aHVtYnNSZWFkeT0hMCx7aW1nOmUsdGh1bWI6Zn19ZnVuY3Rpb24gQyhhLGIsYyxlKXtmb3IodmFyIGY9MCxnPWEubGVuZ3RoO2c+ZjtmKyspe3ZhciBoPWFbZl07aWYoaC5pPT09YyYmaC50aHVtYnNSZWFkeSl7dmFyIGk9e3ZpZGVvUmVhZHk6ITB9O2lbWGNdPWlbWmNdPWlbWWNdPSExLGUuc3BsaWNlKGYsMSxkLmV4dGVuZCh7fSxoLGksYikpO2JyZWFrfX19ZnVuY3Rpb24gRChhKXtmdW5jdGlvbiBiKGEsYixlKXt2YXIgZj1hLmNoaWxkcmVuKFwiaW1nXCIpLmVxKDApLGc9YS5hdHRyKFwiaHJlZlwiKSxoPWEuYXR0cihcInNyY1wiKSxpPWYuYXR0cihcInNyY1wiKSxqPWIudmlkZW8saz1lP0EoZyxqPT09ITApOiExO2s/Zz0hMTprPWosYyhhLGYsZC5leHRlbmQoYix7dmlkZW86ayxpbWc6Yi5pbWd8fGd8fGh8fGksdGh1bWI6Yi50aHVtYnx8aXx8aHx8Z30pKX1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1jLnRodW1iJiZjLmltZyE9PWMudGh1bWIsZj1uKGMud2lkdGh8fGEuYXR0cihcIndpZHRoXCIpKSxnPW4oYy5oZWlnaHR8fGEuYXR0cihcImhlaWdodFwiKSk7ZC5leHRlbmQoYyx7d2lkdGg6ZixoZWlnaHQ6Zyx0aHVtYnJhdGlvOlMoYy50aHVtYnJhdGlvfHxuKGMudGh1bWJ3aWR0aHx8YiYmYi5hdHRyKFwid2lkdGhcIil8fGV8fGYpL24oYy50aHVtYmhlaWdodHx8YiYmYi5hdHRyKFwiaGVpZ2h0XCIpfHxlfHxnKSl9KX12YXIgZT1bXTtyZXR1cm4gYS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXt2YXIgYT1kKHRoaXMpLGY9UihkLmV4dGVuZChhLmRhdGEoKSx7aWQ6YS5hdHRyKFwiaWRcIil9KSk7aWYoYS5pcyhcImEsIGltZ1wiKSliKGEsZiwhMCk7ZWxzZXtpZihhLmlzKFwiOmVtcHR5XCIpKXJldHVybjtjKGEsbnVsbCxkLmV4dGVuZChmLHtodG1sOnRoaXMsX2h0bWw6YS5odG1sKCl9KSl9ZS5wdXNoKGYpfSksZX1mdW5jdGlvbiBFKGEpe3JldHVybiAwPT09YS5vZmZzZXRXaWR0aCYmMD09PWEub2Zmc2V0SGVpZ2h0fWZ1bmN0aW9uIEYoYSl7cmV0dXJuIWQuY29udGFpbnMoYi5kb2N1bWVudEVsZW1lbnQsYSl9ZnVuY3Rpb24gRyhhLGIsYyxkKXtyZXR1cm4gRy5pfHwoRy5pPTEsRy5paT1bITBdKSxkPWR8fEcuaSxcInVuZGVmaW5lZFwiPT10eXBlb2YgRy5paVtkXSYmKEcuaWlbZF09ITApLGEoKT9iKCk6Ry5paVtkXSYmc2V0VGltZW91dChmdW5jdGlvbigpe0cuaWlbZF0mJkcoYSxiLGMsZCl9LGN8fDEwMCksRy5pKyt9ZnVuY3Rpb24gSChhKXtjLnJlcGxhY2UoYy5wcm90b2NvbCtcIi8vXCIrYy5ob3N0K2MucGF0aG5hbWUucmVwbGFjZSgvXlxcLz8vLFwiL1wiKStjLnNlYXJjaCtcIiNcIithKX1mdW5jdGlvbiBJKGEsYixjLGQpe3ZhciBlPWEuZGF0YSgpLGY9ZS5tZWFzdXJlcztpZihmJiYoIWUubHx8ZS5sLlchPT1mLndpZHRofHxlLmwuSCE9PWYuaGVpZ2h0fHxlLmwuciE9PWYucmF0aW98fGUubC53IT09Yi53fHxlLmwuaCE9PWIuaHx8ZS5sLm0hPT1jfHxlLmwucCE9PWQpKXt2YXIgZz1mLndpZHRoLGk9Zi5oZWlnaHQsaj1iLncvYi5oLGs9Zi5yYXRpbz49aixsPVwic2NhbGVkb3duXCI9PT1jLG09XCJjb250YWluXCI9PT1jLG49XCJjb3ZlclwiPT09YyxvPSQoZCk7ayYmKGx8fG0pfHwhayYmbj8oZz1oKGIudywwLGw/ZzoxLzApLGk9Zy9mLnJhdGlvKTooayYmbnx8IWsmJihsfHxtKSkmJihpPWgoYi5oLDAsbD9pOjEvMCksZz1pKmYucmF0aW8pLGEuY3NzKHt3aWR0aDpnLGhlaWdodDppLGxlZnQ6cChvLngsYi53LWcpLHRvcDpwKG8ueSxiLmgtaSl9KSxlLmw9e1c6Zi53aWR0aCxIOmYuaGVpZ2h0LHI6Zi5yYXRpbyx3OmIudyxoOmIuaCxtOmMscDpkfX1yZXR1cm4hMH1mdW5jdGlvbiBKKGEsYil7dmFyIGM9YVswXTtjLnN0eWxlU2hlZXQ/Yy5zdHlsZVNoZWV0LmNzc1RleHQ9YjphLmh0bWwoYil9ZnVuY3Rpb24gSyhhLGIsYyl7cmV0dXJuIGI9PT1jPyExOmI+PWE/XCJsZWZ0XCI6YT49Yz9cInJpZ2h0XCI6XCJsZWZ0IHJpZ2h0XCJ9ZnVuY3Rpb24gTChhLGIsYyxkKXtpZighYylyZXR1cm4hMTtpZighaXNOYU4oYSkpcmV0dXJuIGEtKGQ/MDoxKTtmb3IodmFyIGUsZj0wLGc9Yi5sZW5ndGg7Zz5mO2YrKyl7dmFyIGg9YltmXTtpZihoLmlkPT09YSl7ZT1mO2JyZWFrfX1yZXR1cm4gZX1mdW5jdGlvbiBNKGEsYixjKXtjPWN8fHt9LGEuZWFjaChmdW5jdGlvbigpe3ZhciBhLGU9ZCh0aGlzKSxmPWUuZGF0YSgpO2YuY2xpY2tPbnx8KGYuY2xpY2tPbj0hMCxkLmV4dGVuZChjYihlLHtvblN0YXJ0OmZ1bmN0aW9uKGIpe2E9YiwoYy5vblN0YXJ0fHxnKS5jYWxsKHRoaXMsYil9LG9uTW92ZTpjLm9uTW92ZXx8ZyxvblRvdWNoRW5kOmMub25Ub3VjaEVuZHx8ZyxvbkVuZDpmdW5jdGlvbihjKXtjLm1vdmVkfHxiLmNhbGwodGhpcyxhKX19KSx7bm9Nb3ZlOiEwfSkpfSl9ZnVuY3Rpb24gTihhLGIpe3JldHVybic8ZGl2IGNsYXNzPVwiJythKydcIj4nKyhifHxcIlwiKStcIjwvZGl2PlwifWZ1bmN0aW9uIE8oYSl7Zm9yKHZhciBiPWEubGVuZ3RoO2I7KXt2YXIgYz1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYi0tKSxkPWFbYl07YVtiXT1hW2NdLGFbY109ZH1yZXR1cm4gYX1mdW5jdGlvbiBQKGEpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpJiZkLm1hcChhLGZ1bmN0aW9uKGEpe3JldHVybiBkLmV4dGVuZCh7fSxhKX0pfWZ1bmN0aW9uIFEoYSxiLGMpe2Euc2Nyb2xsTGVmdChifHwwKS5zY3JvbGxUb3AoY3x8MCl9ZnVuY3Rpb24gUihhKXtpZihhKXt2YXIgYj17fTtyZXR1cm4gZC5lYWNoKGEsZnVuY3Rpb24oYSxjKXtiW2EudG9Mb3dlckNhc2UoKV09Y30pLGJ9fWZ1bmN0aW9uIFMoYSl7aWYoYSl7dmFyIGI9K2E7cmV0dXJuIGlzTmFOKGIpPyhiPWEuc3BsaXQoXCIvXCIpLCtiWzBdLytiWzFdfHxlKTpifX1mdW5jdGlvbiBUKGEsYixjLGQpe2ImJihhLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKGIsYywhIWQpOmEuYXR0YWNoRXZlbnQoXCJvblwiK2IsYykpfWZ1bmN0aW9uIFUoYSl7cmV0dXJuISFhLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpfWZ1bmN0aW9uIFYoYSl7cmV0dXJue3RhYmluZGV4Oi0xKmErXCJcIixkaXNhYmxlZDphfX1mdW5jdGlvbiBXKGEsYil7VChhLFwia2V5dXBcIixmdW5jdGlvbihjKXtVKGEpfHwxMz09Yy5rZXlDb2RlJiZiLmNhbGwoYSxjKX0pfWZ1bmN0aW9uIFgoYSxiKXtUKGEsXCJmb2N1c1wiLGEub25mb2N1c2luPWZ1bmN0aW9uKGMpe2IuY2FsbChhLGMpfSwhMCl9ZnVuY3Rpb24gWShhLGIpe2EucHJldmVudERlZmF1bHQ/YS5wcmV2ZW50RGVmYXVsdCgpOmEucmV0dXJuVmFsdWU9ITEsYiYmYS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCl9ZnVuY3Rpb24gWihhKXtyZXR1cm4gYT9cIj5cIjpcIjxcIn1mdW5jdGlvbiAkKGEpe3JldHVybiBhPShhK1wiXCIpLnNwbGl0KC9cXHMrLykse3g6cShhWzBdKXx8YmQseTpxKGFbMV0pfHxiZH19ZnVuY3Rpb24gXyhhLGIpe3ZhciBjPWEuZGF0YSgpLGU9TWF0aC5yb3VuZChiLnBvcyksZj1mdW5jdGlvbigpe2Muc2xpZGluZz0hMSwoYi5vbkVuZHx8ZykoKX07XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIub3ZlclBvcyYmYi5vdmVyUG9zIT09Yi5wb3MmJihlPWIub3ZlclBvcyxmPWZ1bmN0aW9uKCl7XyhhLGQuZXh0ZW5kKHt9LGIse292ZXJQb3M6Yi5wb3MsdGltZTpNYXRoLm1heChRYyxiLnRpbWUvMil9KSl9KTt2YXIgaD1kLmV4dGVuZChrKGUpLGIud2lkdGgmJnt3aWR0aDpiLndpZHRofSk7Yy5zbGlkaW5nPSEwLEljPyhhLmNzcyhkLmV4dGVuZChsKGIudGltZSksaCkpLGIudGltZT4xMD91KGEsXCJ0cmFuc2Zvcm1cIixmLGIudGltZSk6ZigpKTphLnN0b3AoKS5hbmltYXRlKGgsYi50aW1lLF9jLGYpfWZ1bmN0aW9uIGFiKGEsYixjLGUsZixoKXt2YXIgaT1cInVuZGVmaW5lZFwiIT10eXBlb2YgaDtpZihpfHwoZi5wdXNoKGFyZ3VtZW50cyksQXJyYXkucHJvdG90eXBlLnB1c2guY2FsbChhcmd1bWVudHMsZi5sZW5ndGgpLCEoZi5sZW5ndGg+MSkpKXthPWF8fGQoYSksYj1ifHxkKGIpO3ZhciBqPWFbMF0saz1iWzBdLGw9XCJjcm9zc2ZhZGVcIj09PWUubWV0aG9kLG09ZnVuY3Rpb24oKXtpZighbS5kb25lKXttLmRvbmU9ITA7dmFyIGE9KGl8fGYuc2hpZnQoKSkmJmYuc2hpZnQoKTthJiZhYi5hcHBseSh0aGlzLGEpLChlLm9uRW5kfHxnKSghIWEpfX0sbj1lLnRpbWUvKGh8fDEpO2MucmVtb3ZlQ2xhc3MoUmIrXCIgXCIrUWIpLGEuc3RvcCgpLmFkZENsYXNzKFJiKSxiLnN0b3AoKS5hZGRDbGFzcyhRYiksbCYmayYmYS5mYWRlVG8oMCwwKSxhLmZhZGVUbyhsP246MCwxLGwmJm0pLGIuZmFkZVRvKG4sMCxtKSxqJiZsfHxrfHxtKCl9fWZ1bmN0aW9uIGJiKGEpe3ZhciBiPShhLnRvdWNoZXN8fFtdKVswXXx8YTthLl94PWIucGFnZVgsYS5feT1iLmNsaWVudFksYS5fbm93PWQubm93KCl9ZnVuY3Rpb24gY2IoYSxjKXtmdW5jdGlvbiBlKGEpe3JldHVybiBtPWQoYS50YXJnZXQpLHUuY2hlY2tlZD1wPXE9cz0hMSxrfHx1LmZsb3d8fGEudG91Y2hlcyYmYS50b3VjaGVzLmxlbmd0aD4xfHxhLndoaWNoPjF8fGVkJiZlZC50eXBlIT09YS50eXBlJiZnZHx8KHA9Yy5zZWxlY3QmJm0uaXMoYy5zZWxlY3QsdCkpP3A6KG89XCJ0b3VjaHN0YXJ0XCI9PT1hLnR5cGUscT1tLmlzKFwiYSwgYSAqXCIsdCksbj11LmNvbnRyb2wscj11Lm5vTW92ZXx8dS5ub1N3aXBlfHxuPzE2OnUuc25hcD8wOjQsYmIoYSksbD1lZD1hLGZkPWEudHlwZS5yZXBsYWNlKC9kb3dufHN0YXJ0LyxcIm1vdmVcIikucmVwbGFjZSgvRG93bi8sXCJNb3ZlXCIpLChjLm9uU3RhcnR8fGcpLmNhbGwodCxhLHtjb250cm9sOm4sJHRhcmdldDptfSksaz11LmZsb3c9ITAsdm9pZCgoIW98fHUuZ28pJiZZKGEpKSl9ZnVuY3Rpb24gZihhKXtpZihhLnRvdWNoZXMmJmEudG91Y2hlcy5sZW5ndGg+MXx8TmMmJiFhLmlzUHJpbWFyeXx8ZmQhPT1hLnR5cGV8fCFrKXJldHVybiBrJiZoKCksdm9pZChjLm9uVG91Y2hFbmR8fGcpKCk7YmIoYSk7dmFyIGI9TWF0aC5hYnMoYS5feC1sLl94KSxkPU1hdGguYWJzKGEuX3ktbC5feSksZT1iLWQsZj0odS5nb3x8dS54fHxlPj0wKSYmIXUubm9Td2lwZSxpPTA+ZTtvJiYhdS5jaGVja2VkPyhrPWYpJiZZKGEpOihZKGEpLChjLm9uTW92ZXx8ZykuY2FsbCh0LGEse3RvdWNoOm99KSksIXMmJk1hdGguc3FydChNYXRoLnBvdyhiLDIpK01hdGgucG93KGQsMikpPnImJihzPSEwKSx1LmNoZWNrZWQ9dS5jaGVja2VkfHxmfHxpfWZ1bmN0aW9uIGgoYSl7KGMub25Ub3VjaEVuZHx8ZykoKTt2YXIgYj1rO3UuY29udHJvbD1rPSExLGImJih1LmZsb3c9ITEpLCFifHxxJiYhdS5jaGVja2VkfHwoYSYmWShhKSxnZD0hMCxjbGVhclRpbWVvdXQoaGQpLGhkPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtnZD0hMX0sMWUzKSwoYy5vbkVuZHx8ZykuY2FsbCh0LHttb3ZlZDpzLCR0YXJnZXQ6bSxjb250cm9sOm4sdG91Y2g6byxzdGFydEV2ZW50OmwsYWJvcnRlZDohYXx8XCJNU1BvaW50ZXJDYW5jZWxcIj09PWEudHlwZX0pKX1mdW5jdGlvbiBpKCl7dS5mbG93fHxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dS5mbG93PSEwfSwxMCl9ZnVuY3Rpb24gaigpe3UuZmxvdyYmc2V0VGltZW91dChmdW5jdGlvbigpe3UuZmxvdz0hMX0sUGMpfXZhciBrLGwsbSxuLG8scCxxLHIscyx0PWFbMF0sdT17fTtyZXR1cm4gTmM/KFQodCxcIk1TUG9pbnRlckRvd25cIixlKSxUKGIsXCJNU1BvaW50ZXJNb3ZlXCIsZiksVChiLFwiTVNQb2ludGVyQ2FuY2VsXCIsaCksVChiLFwiTVNQb2ludGVyVXBcIixoKSk6KFQodCxcInRvdWNoc3RhcnRcIixlKSxUKHQsXCJ0b3VjaG1vdmVcIixmKSxUKHQsXCJ0b3VjaGVuZFwiLGgpLFQoYixcInRvdWNoc3RhcnRcIixpKSxUKGIsXCJ0b3VjaGVuZFwiLGopLFQoYixcInRvdWNoY2FuY2VsXCIsaiksRWMub24oXCJzY3JvbGxcIixqKSxhLm9uKFwibW91c2Vkb3duXCIsZSksRmMub24oXCJtb3VzZW1vdmVcIixmKS5vbihcIm1vdXNldXBcIixoKSksYS5vbihcImNsaWNrXCIsXCJhXCIsZnVuY3Rpb24oYSl7dS5jaGVja2VkJiZZKGEpfSksdX1mdW5jdGlvbiBkYihhLGIpe2Z1bmN0aW9uIGMoYyxkKXtBPSEwLGo9bD1jLl94LHE9Yy5fbm93LHA9W1txLGpdXSxtPW49RC5ub01vdmV8fGQ/MDp2KGEsKGIuZ2V0UG9zfHxnKSgpKSwoYi5vblN0YXJ0fHxnKS5jYWxsKEIsYyl9ZnVuY3Rpb24gZShhLGIpe3M9RC5taW4sdD1ELm1heCx1PUQuc25hcCx3PWEuYWx0S2V5LEE9ej0hMSx5PWIuY29udHJvbCx5fHxDLnNsaWRpbmd8fGMoYSl9ZnVuY3Rpb24gZihkLGUpe0Qubm9Td2lwZXx8KEF8fGMoZCksbD1kLl94LHAucHVzaChbZC5fbm93LGxdKSxuPW0tKGotbCksbz1LKG4scyx0KSxzPj1uP249eChuLHMpOm4+PXQmJihuPXgobix0KSksRC5ub01vdmV8fChhLmNzcyhrKG4pKSx6fHwoej0hMCxlLnRvdWNofHxOY3x8YS5hZGRDbGFzcyhlYykpLChiLm9uTW92ZXx8ZykuY2FsbChCLGQse3BvczpuLGVkZ2U6b30pKSl9ZnVuY3Rpb24gaShlKXtpZighRC5ub1N3aXBlfHwhZS5tb3ZlZCl7QXx8YyhlLnN0YXJ0RXZlbnQsITApLGUudG91Y2h8fE5jfHxhLnJlbW92ZUNsYXNzKGVjKSxyPWQubm93KCk7Zm9yKHZhciBmLGksaixrLG8scSx2LHgseSx6PXItUGMsQz1udWxsLEU9UWMsRj1iLmZyaWN0aW9uLEc9cC5sZW5ndGgtMTtHPj0wO0ctLSl7aWYoZj1wW0ddWzBdLGk9TWF0aC5hYnMoZi16KSxudWxsPT09Q3x8aj5pKUM9ZixrPXBbR11bMV07ZWxzZSBpZihDPT09enx8aT5qKWJyZWFrO2o9aX12PWgobixzLHQpO3ZhciBIPWstbCxJPUg+PTAsSj1yLUMsSz1KPlBjLEw9IUsmJm4hPT1tJiZ2PT09bjt1JiYodj1oKE1hdGhbTD9JP1wiZmxvb3JcIjpcImNlaWxcIjpcInJvdW5kXCJdKG4vdSkqdSxzLHQpLHM9dD12KSxMJiYodXx8dj09PW4pJiYoeT0tKEgvSiksRSo9aChNYXRoLmFicyh5KSxiLnRpbWVMb3csYi50aW1lSGlnaCksbz1NYXRoLnJvdW5kKG4reSpFL0YpLHV8fCh2PW8pLCghSSYmbz50fHxJJiZzPm8pJiYocT1JP3M6dCx4PW8tcSx1fHwodj1xKSx4PWgodisuMDMqeCxxLTUwLHErNTApLEU9TWF0aC5hYnMoKG4teCkvKHkvRikpKSksRSo9dz8xMDoxLChiLm9uRW5kfHxnKS5jYWxsKEIsZC5leHRlbmQoZSx7bW92ZWQ6ZS5tb3ZlZHx8SyYmdSxwb3M6bixuZXdQb3M6dixvdmVyUG9zOngsdGltZTpFfSkpfX12YXIgaixsLG0sbixvLHAscSxyLHMsdCx1LHcseSx6LEEsQj1hWzBdLEM9YS5kYXRhKCksRD17fTtyZXR1cm4gRD1kLmV4dGVuZChjYihiLiR3cmFwLGQuZXh0ZW5kKHt9LGIse29uU3RhcnQ6ZSxvbk1vdmU6ZixvbkVuZDppfSkpLEQpfWZ1bmN0aW9uIGViKGEsYil7dmFyIGMsZSxmLGg9YVswXSxpPXtwcmV2ZW50Ont9fTtyZXR1cm4gVChoLE9jLGZ1bmN0aW9uKGEpe3ZhciBoPWEud2hlZWxEZWx0YVl8fC0xKmEuZGVsdGFZfHwwLGo9YS53aGVlbERlbHRhWHx8LTEqYS5kZWx0YVh8fDAsaz1NYXRoLmFicyhqKSYmIU1hdGguYWJzKGgpLGw9WigwPmopLG09ZT09PWwsbj1kLm5vdygpLG89UGM+bi1mO2U9bCxmPW4sayYmaS5vayYmKCFpLnByZXZlbnRbbF18fGMpJiYoWShhLCEwKSxjJiZtJiZvfHwoYi5zaGlmdCYmKGM9ITAsY2xlYXJUaW1lb3V0KGkudCksaS50PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjPSExfSxSYykpLChiLm9uRW5kfHxnKShhLGIuc2hpZnQ/bDpqKSkpfSksaX1mdW5jdGlvbiBmYigpe2QuZWFjaChkLkZvdG9yYW1hLmluc3RhbmNlcyxmdW5jdGlvbihhLGIpe2IuaW5kZXg9YX0pfWZ1bmN0aW9uIGdiKGEpe2QuRm90b3JhbWEuaW5zdGFuY2VzLnB1c2goYSksZmIoKX1mdW5jdGlvbiBoYihhKXtkLkZvdG9yYW1hLmluc3RhbmNlcy5zcGxpY2UoYS5pbmRleCwxKSxmYigpfXZhciBpYj1cImZvdG9yYW1hXCIsamI9XCJmdWxsc2NyZWVuXCIsa2I9aWIrXCJfX3dyYXBcIixsYj1rYitcIi0tY3NzMlwiLG1iPWtiK1wiLS1jc3MzXCIsbmI9a2IrXCItLXZpZGVvXCIsb2I9a2IrXCItLWZhZGVcIixwYj1rYitcIi0tc2xpZGVcIixxYj1rYitcIi0tbm8tY29udHJvbHNcIixyYj1rYitcIi0tbm8tc2hhZG93c1wiLHNiPWtiK1wiLS1wYW4teVwiLHRiPWtiK1wiLS1ydGxcIix1Yj1rYitcIi0tb25seS1hY3RpdmVcIix2Yj1rYitcIi0tbm8tY2FwdGlvbnNcIix3Yj1rYitcIi0tdG9nZ2xlLWFycm93c1wiLHhiPWliK1wiX19zdGFnZVwiLHliPXhiK1wiX19mcmFtZVwiLHpiPXliK1wiLS12aWRlb1wiLEFiPXhiK1wiX19zaGFmdFwiLEJiPWliK1wiX19ncmFiXCIsQ2I9aWIrXCJfX3BvaW50ZXJcIixEYj1pYitcIl9fYXJyXCIsRWI9RGIrXCItLWRpc2FibGVkXCIsRmI9RGIrXCItLXByZXZcIixHYj1EYitcIi0tbmV4dFwiLEhiPWliK1wiX19uYXZcIixJYj1IYitcIi13cmFwXCIsSmI9SGIrXCJfX3NoYWZ0XCIsS2I9SGIrXCItLWRvdHNcIixMYj1IYitcIi0tdGh1bWJzXCIsTWI9SGIrXCJfX2ZyYW1lXCIsTmI9TWIrXCItLWRvdFwiLE9iPU1iK1wiLS10aHVtYlwiLFBiPWliK1wiX19mYWRlXCIsUWI9UGIrXCItZnJvbnRcIixSYj1QYitcIi1yZWFyXCIsU2I9aWIrXCJfX3NoYWRvd1wiLFRiPVNiK1wic1wiLFViPVRiK1wiLS1sZWZ0XCIsVmI9VGIrXCItLXJpZ2h0XCIsV2I9aWIrXCJfX2FjdGl2ZVwiLFhiPWliK1wiX19zZWxlY3RcIixZYj1pYitcIi0taGlkZGVuXCIsWmI9aWIrXCItLWZ1bGxzY3JlZW5cIiwkYj1pYitcIl9fZnVsbHNjcmVlbi1pY29uXCIsX2I9aWIrXCJfX2Vycm9yXCIsYWM9aWIrXCJfX2xvYWRpbmdcIixiYz1pYitcIl9fbG9hZGVkXCIsY2M9YmMrXCItLWZ1bGxcIixkYz1iYytcIi0taW1nXCIsZWM9aWIrXCJfX2dyYWJiaW5nXCIsZmM9aWIrXCJfX2ltZ1wiLGdjPWZjK1wiLS1mdWxsXCIsaGM9aWIrXCJfX2RvdFwiLGljPWliK1wiX190aHVtYlwiLGpjPWljK1wiLWJvcmRlclwiLGtjPWliK1wiX19odG1sXCIsbGM9aWIrXCJfX3ZpZGVvXCIsbWM9bGMrXCItcGxheVwiLG5jPWxjK1wiLWNsb3NlXCIsb2M9aWIrXCJfX2NhcHRpb25cIixwYz1pYitcIl9fY2FwdGlvbl9fd3JhcFwiLHFjPWliK1wiX19zcGlubmVyXCIscmM9J1wiIHRhYmluZGV4PVwiMFwiIHJvbGU9XCJidXR0b24nLHNjPWQmJmQuZm4uanF1ZXJ5LnNwbGl0KFwiLlwiKTtpZighc2N8fHNjWzBdPDF8fDE9PXNjWzBdJiZzY1sxXTw4KXRocm93XCJGb3RvcmFtYSByZXF1aXJlcyBqUXVlcnkgMS44IG9yIGxhdGVyIGFuZCB3aWxsIG5vdCBydW4gd2l0aG91dCBpdC5cIjt2YXIgdGM9e30sdWM9ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7ci5jc3NUZXh0PWF9ZnVuY3Rpb24gZShhLGIpe3JldHVybiB0eXBlb2YgYT09PWJ9ZnVuY3Rpb24gZihhLGIpe3JldHVybiEhfihcIlwiK2EpLmluZGV4T2YoYil9ZnVuY3Rpb24gZyhhLGIpe2Zvcih2YXIgZCBpbiBhKXt2YXIgZT1hW2RdO2lmKCFmKGUsXCItXCIpJiZyW2VdIT09YylyZXR1cm5cInBmeFwiPT1iP2U6ITB9cmV0dXJuITF9ZnVuY3Rpb24gaChhLGIsZCl7Zm9yKHZhciBmIGluIGEpe3ZhciBnPWJbYVtmXV07aWYoZyE9PWMpcmV0dXJuIGQ9PT0hMT9hW2ZdOmUoZyxcImZ1bmN0aW9uXCIpP2cuYmluZChkfHxiKTpnfXJldHVybiExfWZ1bmN0aW9uIGkoYSxiLGMpe3ZhciBkPWEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSxmPShhK1wiIFwiK3Uuam9pbihkK1wiIFwiKStkKS5zcGxpdChcIiBcIik7cmV0dXJuIGUoYixcInN0cmluZ1wiKXx8ZShiLFwidW5kZWZpbmVkXCIpP2coZixiKTooZj0oYStcIiBcIit2LmpvaW4oZCtcIiBcIikrZCkuc3BsaXQoXCIgXCIpLGgoZixiLGMpKX12YXIgaixrLGwsbT1cIjIuNi4yXCIsbj17fSxvPWIuZG9jdW1lbnRFbGVtZW50LHA9XCJtb2Rlcm5penJcIixxPWIuY3JlYXRlRWxlbWVudChwKSxyPXEuc3R5bGUscz0oe30udG9TdHJpbmcsXCIgLXdlYmtpdC0gLW1vei0gLW8tIC1tcy0gXCIuc3BsaXQoXCIgXCIpKSx0PVwiV2Via2l0IE1veiBPIG1zXCIsdT10LnNwbGl0KFwiIFwiKSx2PXQudG9Mb3dlckNhc2UoKS5zcGxpdChcIiBcIiksdz17fSx4PVtdLHk9eC5zbGljZSx6PWZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmLGcsaCxpLGo9Yi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGs9Yi5ib2R5LGw9a3x8Yi5jcmVhdGVFbGVtZW50KFwiYm9keVwiKTtpZihwYXJzZUludChkLDEwKSlmb3IoO2QtLTspaD1iLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksaC5pZD1lP2VbZF06cCsoZCsxKSxqLmFwcGVuZENoaWxkKGgpO3JldHVybiBmPVtcIiYjMTczO1wiLCc8c3R5bGUgaWQ9XCJzJyxwLCdcIj4nLGEsXCI8L3N0eWxlPlwiXS5qb2luKFwiXCIpLGouaWQ9cCwoaz9qOmwpLmlubmVySFRNTCs9ZixsLmFwcGVuZENoaWxkKGopLGt8fChsLnN0eWxlLmJhY2tncm91bmQ9XCJcIixsLnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCIsaT1vLnN0eWxlLm92ZXJmbG93LG8uc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIixvLmFwcGVuZENoaWxkKGwpKSxnPWMoaixhKSxrP2oucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChqKToobC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGwpLG8uc3R5bGUub3ZlcmZsb3c9aSksISFnfSxBPXt9Lmhhc093blByb3BlcnR5O2w9ZShBLFwidW5kZWZpbmVkXCIpfHxlKEEuY2FsbCxcInVuZGVmaW5lZFwiKT9mdW5jdGlvbihhLGIpe3JldHVybiBiIGluIGEmJmUoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGVbYl0sXCJ1bmRlZmluZWRcIil9OmZ1bmN0aW9uKGEsYil7cmV0dXJuIEEuY2FsbChhLGIpfSxGdW5jdGlvbi5wcm90b3R5cGUuYmluZHx8KEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgYil0aHJvdyBuZXcgVHlwZUVycm9yO3ZhciBjPXkuY2FsbChhcmd1bWVudHMsMSksZD1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBkKXt2YXIgZT1mdW5jdGlvbigpe307ZS5wcm90b3R5cGU9Yi5wcm90b3R5cGU7dmFyIGY9bmV3IGUsZz1iLmFwcGx5KGYsYy5jb25jYXQoeS5jYWxsKGFyZ3VtZW50cykpKTtyZXR1cm4gT2JqZWN0KGcpPT09Zz9nOmZ9cmV0dXJuIGIuYXBwbHkoYSxjLmNvbmNhdCh5LmNhbGwoYXJndW1lbnRzKSkpfTtyZXR1cm4gZH0pLHcuY3NzdHJhbnNmb3JtczNkPWZ1bmN0aW9uKCl7dmFyIGE9ISFpKFwicGVyc3BlY3RpdmVcIik7cmV0dXJuIGF9O2Zvcih2YXIgQiBpbiB3KWwodyxCKSYmKGs9Qi50b0xvd2VyQ2FzZSgpLG5ba109d1tCXSgpLHgucHVzaCgobltrXT9cIlwiOlwibm8tXCIpK2spKTtyZXR1cm4gbi5hZGRUZXN0PWZ1bmN0aW9uKGEsYil7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpZm9yKHZhciBkIGluIGEpbChhLGQpJiZuLmFkZFRlc3QoZCxhW2RdKTtlbHNle2lmKGE9YS50b0xvd2VyQ2FzZSgpLG5bYV0hPT1jKXJldHVybiBuO2I9XCJmdW5jdGlvblwiPT10eXBlb2YgYj9iKCk6YixcInVuZGVmaW5lZFwiIT10eXBlb2YgZW5hYmxlQ2xhc3NlcyYmZW5hYmxlQ2xhc3NlcyYmKG8uY2xhc3NOYW1lKz1cIiBcIisoYj9cIlwiOlwibm8tXCIpK2EpLG5bYV09Yn1yZXR1cm4gbn0sZChcIlwiKSxxPWo9bnVsbCxuLl92ZXJzaW9uPW0sbi5fcHJlZml4ZXM9cyxuLl9kb21QcmVmaXhlcz12LG4uX2Nzc29tUHJlZml4ZXM9dSxuLnRlc3RQcm9wPWZ1bmN0aW9uKGEpe3JldHVybiBnKFthXSl9LG4udGVzdEFsbFByb3BzPWksbi50ZXN0U3R5bGVzPXosbi5wcmVmaXhlZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI/aShhLGIsYyk6aShhLFwicGZ4XCIpfSxufShhLGIpLHZjPXtvazohMSxpczpmdW5jdGlvbigpe3JldHVybiExfSxyZXF1ZXN0OmZ1bmN0aW9uKCl7fSxjYW5jZWw6ZnVuY3Rpb24oKXt9LGV2ZW50OlwiXCIscHJlZml4OlwiXCJ9LHdjPVwid2Via2l0IG1veiBvIG1zIGtodG1sXCIuc3BsaXQoXCIgXCIpO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmNhbmNlbEZ1bGxTY3JlZW4pdmMub2s9ITA7ZWxzZSBmb3IodmFyIHhjPTAseWM9d2MubGVuZ3RoO3ljPnhjO3hjKyspaWYodmMucHJlZml4PXdjW3hjXSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYlt2Yy5wcmVmaXgrXCJDYW5jZWxGdWxsU2NyZWVuXCJdKXt2Yy5vaz0hMDticmVha312Yy5vayYmKHZjLmV2ZW50PXZjLnByZWZpeCtcImZ1bGxzY3JlZW5jaGFuZ2VcIix2Yy5pcz1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLnByZWZpeCl7Y2FzZVwiXCI6cmV0dXJuIGIuZnVsbFNjcmVlbjtjYXNlXCJ3ZWJraXRcIjpyZXR1cm4gYi53ZWJraXRJc0Z1bGxTY3JlZW47ZGVmYXVsdDpyZXR1cm4gYlt0aGlzLnByZWZpeCtcIkZ1bGxTY3JlZW5cIl19fSx2Yy5yZXF1ZXN0PWZ1bmN0aW9uKGEpe3JldHVyblwiXCI9PT10aGlzLnByZWZpeD9hLnJlcXVlc3RGdWxsU2NyZWVuKCk6YVt0aGlzLnByZWZpeCtcIlJlcXVlc3RGdWxsU2NyZWVuXCJdKCl9LHZjLmNhbmNlbD1mdW5jdGlvbigpe3JldHVyblwiXCI9PT10aGlzLnByZWZpeD9iLmNhbmNlbEZ1bGxTY3JlZW4oKTpiW3RoaXMucHJlZml4K1wiQ2FuY2VsRnVsbFNjcmVlblwiXSgpfSk7dmFyIHpjLEFjPXtsaW5lczoxMixsZW5ndGg6NSx3aWR0aDoyLHJhZGl1czo3LGNvcm5lcnM6MSxyb3RhdGU6MTUsY29sb3I6XCJyZ2JhKDEyOCwgMTI4LCAxMjgsIC43NSlcIixod2FjY2VsOiEwfSxCYz17dG9wOlwiYXV0b1wiLGxlZnQ6XCJhdXRvXCIsY2xhc3NOYW1lOlwiXCJ9OyFmdW5jdGlvbihhLGIpe3pjPWIoKX0odGhpcyxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSxjKXt2YXIgZCxlPWIuY3JlYXRlRWxlbWVudChhfHxcImRpdlwiKTtmb3IoZCBpbiBjKWVbZF09Y1tkXTtyZXR1cm4gZX1mdW5jdGlvbiBjKGEpe2Zvcih2YXIgYj0xLGM9YXJndW1lbnRzLmxlbmd0aDtjPmI7YisrKWEuYXBwZW5kQ2hpbGQoYXJndW1lbnRzW2JdKTtyZXR1cm4gYX1mdW5jdGlvbiBkKGEsYixjLGQpe3ZhciBlPVtcIm9wYWNpdHlcIixiLH5+KDEwMCphKSxjLGRdLmpvaW4oXCItXCIpLGY9LjAxK2MvZCoxMDAsZz1NYXRoLm1heCgxLSgxLWEpL2IqKDEwMC1mKSxhKSxoPW0uc3Vic3RyaW5nKDAsbS5pbmRleE9mKFwiQW5pbWF0aW9uXCIpKS50b0xvd2VyQ2FzZSgpLGk9aCYmXCItXCIraCtcIi1cInx8XCJcIjtyZXR1cm4gb1tlXXx8KHAuaW5zZXJ0UnVsZShcIkBcIitpK1wia2V5ZnJhbWVzIFwiK2UrXCJ7MCV7b3BhY2l0eTpcIitnK1wifVwiK2YrXCIle29wYWNpdHk6XCIrYStcIn1cIisoZisuMDEpK1wiJXtvcGFjaXR5OjF9XCIrKGYrYiklMTAwK1wiJXtvcGFjaXR5OlwiK2ErXCJ9MTAwJXtvcGFjaXR5OlwiK2crXCJ9fVwiLHAuY3NzUnVsZXMubGVuZ3RoKSxvW2VdPTEpLGV9ZnVuY3Rpb24gZihhLGIpe3ZhciBjLGQsZj1hLnN0eWxlO2ZvcihiPWIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPTA7ZDxuLmxlbmd0aDtkKyspaWYoYz1uW2RdK2IsZltjXSE9PWUpcmV0dXJuIGM7cmV0dXJuIGZbYl0hPT1lP2I6dm9pZCAwfWZ1bmN0aW9uIGcoYSxiKXtmb3IodmFyIGMgaW4gYilhLnN0eWxlW2YoYSxjKXx8Y109YltjXTtyZXR1cm4gYX1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj0xO2I8YXJndW1lbnRzLmxlbmd0aDtiKyspe3ZhciBjPWFyZ3VtZW50c1tiXTtmb3IodmFyIGQgaW4gYylhW2RdPT09ZSYmKGFbZF09Y1tkXSl9cmV0dXJuIGF9ZnVuY3Rpb24gaShhKXtmb3IodmFyIGI9e3g6YS5vZmZzZXRMZWZ0LHk6YS5vZmZzZXRUb3B9O2E9YS5vZmZzZXRQYXJlbnQ7KWIueCs9YS5vZmZzZXRMZWZ0LGIueSs9YS5vZmZzZXRUb3A7cmV0dXJuIGJ9ZnVuY3Rpb24gaihhLGIpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhP2E6YVtiJWEubGVuZ3RoXX1mdW5jdGlvbiBrKGEpe3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiB0aGlzP25ldyBrKGEpOnZvaWQodGhpcy5vcHRzPWgoYXx8e30say5kZWZhdWx0cyxxKSl9ZnVuY3Rpb24gbCgpe2Z1bmN0aW9uIGIoYixjKXtyZXR1cm4gYShcIjxcIitiKycgeG1sbnM9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQuY29tOnZtbFwiIGNsYXNzPVwic3Bpbi12bWxcIj4nLGMpfXAuYWRkUnVsZShcIi5zcGluLXZtbFwiLFwiYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIiksay5wcm90b3R5cGUubGluZXM9ZnVuY3Rpb24oYSxkKXtmdW5jdGlvbiBlKCl7cmV0dXJuIGcoYihcImdyb3VwXCIse2Nvb3Jkc2l6ZTprK1wiIFwiK2ssY29vcmRvcmlnaW46LWkrXCIgXCIrLWl9KSx7d2lkdGg6ayxoZWlnaHQ6a30pfWZ1bmN0aW9uIGYoYSxmLGgpe2MobSxjKGcoZSgpLHtyb3RhdGlvbjozNjAvZC5saW5lcyphK1wiZGVnXCIsbGVmdDp+fmZ9KSxjKGcoYihcInJvdW5kcmVjdFwiLHthcmNzaXplOmQuY29ybmVyc30pLHt3aWR0aDppLGhlaWdodDpkLndpZHRoLGxlZnQ6ZC5yYWRpdXMsdG9wOi1kLndpZHRoPj4xLGZpbHRlcjpofSksYihcImZpbGxcIix7Y29sb3I6aihkLmNvbG9yLGEpLG9wYWNpdHk6ZC5vcGFjaXR5fSksYihcInN0cm9rZVwiLHtvcGFjaXR5OjB9KSkpKX12YXIgaCxpPWQubGVuZ3RoK2Qud2lkdGgsaz0yKmksbD0yKi0oZC53aWR0aCtkLmxlbmd0aCkrXCJweFwiLG09ZyhlKCkse3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6bCxsZWZ0Omx9KTtpZihkLnNoYWRvdylmb3IoaD0xO2g8PWQubGluZXM7aCsrKWYoaCwtMixcInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5CbHVyKHBpeGVscmFkaXVzPTIsbWFrZXNoYWRvdz0xLHNoYWRvd29wYWNpdHk9LjMpXCIpO2ZvcihoPTE7aDw9ZC5saW5lcztoKyspZihoKTtyZXR1cm4gYyhhLG0pfSxrLnByb3RvdHlwZS5vcGFjaXR5PWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEuZmlyc3RDaGlsZDtkPWQuc2hhZG93JiZkLmxpbmVzfHwwLGUmJmIrZDxlLmNoaWxkTm9kZXMubGVuZ3RoJiYoZT1lLmNoaWxkTm9kZXNbYitkXSxlPWUmJmUuZmlyc3RDaGlsZCxlPWUmJmUuZmlyc3RDaGlsZCxlJiYoZS5vcGFjaXR5PWMpKX19dmFyIG0sbj1bXCJ3ZWJraXRcIixcIk1velwiLFwibXNcIixcIk9cIl0sbz17fSxwPWZ1bmN0aW9uKCl7dmFyIGQ9YShcInN0eWxlXCIse3R5cGU6XCJ0ZXh0L2Nzc1wifSk7cmV0dXJuIGMoYi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0sZCksZC5zaGVldHx8ZC5zdHlsZVNoZWV0fSgpLHE9e2xpbmVzOjEyLGxlbmd0aDo3LHdpZHRoOjUscmFkaXVzOjEwLHJvdGF0ZTowLGNvcm5lcnM6MSxjb2xvcjpcIiMwMDBcIixkaXJlY3Rpb246MSxzcGVlZDoxLHRyYWlsOjEwMCxvcGFjaXR5Oi4yNSxmcHM6MjAsekluZGV4OjJlOSxjbGFzc05hbWU6XCJzcGlubmVyXCIsdG9wOlwiYXV0b1wiLGxlZnQ6XCJhdXRvXCIscG9zaXRpb246XCJyZWxhdGl2ZVwifTtrLmRlZmF1bHRzPXt9LGgoay5wcm90b3R5cGUse3NwaW46ZnVuY3Rpb24oYil7dGhpcy5zdG9wKCk7dmFyIGMsZCxlPXRoaXMsZj1lLm9wdHMsaD1lLmVsPWcoYSgwLHtjbGFzc05hbWU6Zi5jbGFzc05hbWV9KSx7cG9zaXRpb246Zi5wb3NpdGlvbix3aWR0aDowLHpJbmRleDpmLnpJbmRleH0pLGo9Zi5yYWRpdXMrZi5sZW5ndGgrZi53aWR0aDtpZihiJiYoYi5pbnNlcnRCZWZvcmUoaCxiLmZpcnN0Q2hpbGR8fG51bGwpLGQ9aShiKSxjPWkoaCksZyhoLHtsZWZ0OihcImF1dG9cIj09Zi5sZWZ0P2QueC1jLngrKGIub2Zmc2V0V2lkdGg+PjEpOnBhcnNlSW50KGYubGVmdCwxMCkraikrXCJweFwiLHRvcDooXCJhdXRvXCI9PWYudG9wP2QueS1jLnkrKGIub2Zmc2V0SGVpZ2h0Pj4xKTpwYXJzZUludChmLnRvcCwxMCkraikrXCJweFwifSkpLGguc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJvZ3Jlc3NiYXJcIiksZS5saW5lcyhoLGUub3B0cyksIW0pe3ZhciBrLGw9MCxuPShmLmxpbmVzLTEpKigxLWYuZGlyZWN0aW9uKS8yLG89Zi5mcHMscD1vL2Yuc3BlZWQscT0oMS1mLm9wYWNpdHkpLyhwKmYudHJhaWwvMTAwKSxyPXAvZi5saW5lczshZnVuY3Rpb24gcygpe2wrKztmb3IodmFyIGE9MDthPGYubGluZXM7YSsrKWs9TWF0aC5tYXgoMS0obCsoZi5saW5lcy1hKSpyKSVwKnEsZi5vcGFjaXR5KSxlLm9wYWNpdHkoaCxhKmYuZGlyZWN0aW9uK24sayxmKTtlLnRpbWVvdXQ9ZS5lbCYmc2V0VGltZW91dChzLH5+KDFlMy9vKSl9KCl9cmV0dXJuIGV9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsO3JldHVybiBhJiYoY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCksYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSksdGhpcy5lbD1lKSx0aGlzfSxsaW5lczpmdW5jdGlvbihiLGUpe2Z1bmN0aW9uIGYoYixjKXtyZXR1cm4gZyhhKCkse3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix3aWR0aDplLmxlbmd0aCtlLndpZHRoK1wicHhcIixoZWlnaHQ6ZS53aWR0aCtcInB4XCIsYmFja2dyb3VuZDpiLGJveFNoYWRvdzpjLHRyYW5zZm9ybU9yaWdpbjpcImxlZnRcIix0cmFuc2Zvcm06XCJyb3RhdGUoXCIrfn4oMzYwL2UubGluZXMqaStlLnJvdGF0ZSkrXCJkZWcpIHRyYW5zbGF0ZShcIitlLnJhZGl1cytcInB4LDApXCIsYm9yZGVyUmFkaXVzOihlLmNvcm5lcnMqZS53aWR0aD4+MSkrXCJweFwifSl9Zm9yKHZhciBoLGk9MCxrPShlLmxpbmVzLTEpKigxLWUuZGlyZWN0aW9uKS8yO2k8ZS5saW5lcztpKyspaD1nKGEoKSx7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDoxK34oZS53aWR0aC8yKStcInB4XCIsdHJhbnNmb3JtOmUuaHdhY2NlbD9cInRyYW5zbGF0ZTNkKDAsMCwwKVwiOlwiXCIsb3BhY2l0eTplLm9wYWNpdHksYW5pbWF0aW9uOm0mJmQoZS5vcGFjaXR5LGUudHJhaWwsaytpKmUuZGlyZWN0aW9uLGUubGluZXMpK1wiIFwiKzEvZS5zcGVlZCtcInMgbGluZWFyIGluZmluaXRlXCJ9KSxlLnNoYWRvdyYmYyhoLGcoZihcIiMwMDBcIixcIjAgMCA0cHggIzAwMFwiKSx7dG9wOlwiMnB4XCJ9KSksYyhiLGMoaCxmKGooZS5jb2xvcixpKSxcIjAgMCAxcHggcmdiYSgwLDAsMCwuMSlcIikpKTtyZXR1cm4gYn0sb3BhY2l0eTpmdW5jdGlvbihhLGIsYyl7YjxhLmNoaWxkTm9kZXMubGVuZ3RoJiYoYS5jaGlsZE5vZGVzW2JdLnN0eWxlLm9wYWNpdHk9Yyl9fSk7dmFyIHI9ZyhhKFwiZ3JvdXBcIikse2JlaGF2aW9yOlwidXJsKCNkZWZhdWx0I1ZNTClcIn0pO3JldHVybiFmKHIsXCJ0cmFuc2Zvcm1cIikmJnIuYWRqP2woKTptPWYocixcImFuaW1hdGlvblwiKSxrfSk7dmFyIENjLERjLEVjPWQoYSksRmM9ZChiKSxHYz1cInF1aXJrc1wiPT09Yy5oYXNoLnJlcGxhY2UoXCIjXCIsXCJcIiksSGM9dWMuY3NzdHJhbnNmb3JtczNkLEljPUhjJiYhR2MsSmM9SGN8fFwiQ1NTMUNvbXBhdFwiPT09Yi5jb21wYXRNb2RlLEtjPXZjLm9rLExjPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fFdpbmRvd3MgUGhvbmUvaSksTWM9IUljfHxMYyxOYz1uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCxPYz1cIm9ud2hlZWxcImluIGIuY3JlYXRlRWxlbWVudChcImRpdlwiKT9cIndoZWVsXCI6Yi5vbm1vdXNld2hlZWwhPT1lP1wibW91c2V3aGVlbFwiOlwiRE9NTW91c2VTY3JvbGxcIixQYz0yNTAsUWM9MzAwLFJjPTE0MDAsU2M9NWUzLFRjPTIsVWM9NjQsVmM9NTAwLFdjPTMzMyxYYz1cIiRzdGFnZUZyYW1lXCIsWWM9XCIkbmF2RG90RnJhbWVcIixaYz1cIiRuYXZUaHVtYkZyYW1lXCIsJGM9XCJhdXRvXCIsX2M9ZihbLjEsMCwuMjUsMV0pLGFkPTk5OTk5LGJkPVwiNTAlXCIsY2Q9e3dpZHRoOm51bGwsbWlud2lkdGg6bnVsbCxtYXh3aWR0aDpcIjEwMCVcIixoZWlnaHQ6bnVsbCxtaW5oZWlnaHQ6bnVsbCxtYXhoZWlnaHQ6bnVsbCxyYXRpbzpudWxsLG1hcmdpbjpUYyxnbGltcHNlOjAsZml0OlwiY29udGFpblwiLHBvc2l0aW9uOmJkLHRodW1icG9zaXRpb246YmQsbmF2OlwiZG90c1wiLG5hdnBvc2l0aW9uOlwiYm90dG9tXCIsbmF2d2lkdGg6bnVsbCx0aHVtYndpZHRoOlVjLHRodW1iaGVpZ2h0OlVjLHRodW1ibWFyZ2luOlRjLHRodW1iYm9yZGVyd2lkdGg6VGMsdGh1bWJmaXQ6XCJjb3ZlclwiLGFsbG93ZnVsbHNjcmVlbjohMSx0cmFuc2l0aW9uOlwic2xpZGVcIixjbGlja3RyYW5zaXRpb246bnVsbCx0cmFuc2l0aW9uZHVyYXRpb246UWMsY2FwdGlvbnM6ITAsaGFzaDohMSxzdGFydGluZGV4OjAsbG9vcDohMSxhdXRvcGxheTohMSxzdG9wYXV0b3BsYXlvbnRvdWNoOiEwLGtleWJvYXJkOiExLGFycm93czohMCxjbGljazohMCxzd2lwZTohMCx0cmFja3BhZDohMSxlbmFibGVpZnNpbmdsZWZyYW1lOiExLGNvbnRyb2xzb25zdGFydDohMCxzaHVmZmxlOiExLGRpcmVjdGlvbjpcImx0clwiLHNoYWRvd3M6ITAsc3Bpbm5lcjpudWxsfSxkZD17bGVmdDohMCxyaWdodDohMCxkb3duOiExLHVwOiExLHNwYWNlOiExLGhvbWU6ITEsZW5kOiExfTtHLnN0b3A9ZnVuY3Rpb24oYSl7Ry5paVthXT0hMX07dmFyIGVkLGZkLGdkLGhkO2pRdWVyeS5Gb3RvcmFtYT1mdW5jdGlvbihhLGUpe2Z1bmN0aW9uIGYoKXtkLmVhY2goeWQsZnVuY3Rpb24oYSxiKXtpZighYi5pKXtiLmk9bWUrKzt2YXIgYz1BKGIudmlkZW8sITApO2lmKGMpe3ZhciBkPXt9O2IudmlkZW89YyxiLmltZ3x8Yi50aHVtYj9iLnRodW1ic1JlYWR5PSEwOmQ9QihiLHlkLGllKSxDKHlkLHtpbWc6ZC5pbWcsdGh1bWI6ZC50aHVtYn0sYi5pLGllKX19fSl9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gWmRbYV18fGllLmZ1bGxTY3JlZW59ZnVuY3Rpb24gaShhKXt2YXIgYj1cImtleWRvd24uXCIraWIsYz1pYitqZSxkPVwia2V5ZG93bi5cIitjLGY9XCJyZXNpemUuXCIrYytcIiBvcmllbnRhdGlvbmNoYW5nZS5cIitjO2E/KEZjLm9uKGQsZnVuY3Rpb24oYSl7dmFyIGIsYztDZCYmMjc9PT1hLmtleUNvZGU/KGI9ITAsbWQoQ2QsITAsITApKTooaWUuZnVsbFNjcmVlbnx8ZS5rZXlib2FyZCYmIWllLmluZGV4KSYmKDI3PT09YS5rZXlDb2RlPyhiPSEwLGllLmNhbmNlbEZ1bGxTY3JlZW4oKSk6YS5zaGlmdEtleSYmMzI9PT1hLmtleUNvZGUmJmcoXCJzcGFjZVwiKXx8Mzc9PT1hLmtleUNvZGUmJmcoXCJsZWZ0XCIpfHwzOD09PWEua2V5Q29kZSYmZyhcInVwXCIpP2M9XCI8XCI6MzI9PT1hLmtleUNvZGUmJmcoXCJzcGFjZVwiKXx8Mzk9PT1hLmtleUNvZGUmJmcoXCJyaWdodFwiKXx8NDA9PT1hLmtleUNvZGUmJmcoXCJkb3duXCIpP2M9XCI+XCI6MzY9PT1hLmtleUNvZGUmJmcoXCJob21lXCIpP2M9XCI8PFwiOjM1PT09YS5rZXlDb2RlJiZnKFwiZW5kXCIpJiYoYz1cIj4+XCIpKSwoYnx8YykmJlkoYSksYyYmaWUuc2hvdyh7aW5kZXg6YyxzbG93OmEuYWx0S2V5LHVzZXI6ITB9KX0pLGllLmluZGV4fHxGYy5vZmYoYikub24oYixcInRleHRhcmVhLCBpbnB1dCwgc2VsZWN0XCIsZnVuY3Rpb24oYSl7IURjLmhhc0NsYXNzKGpiKSYmYS5zdG9wUHJvcGFnYXRpb24oKX0pLEVjLm9uKGYsaWUucmVzaXplKSk6KEZjLm9mZihkKSxFYy5vZmYoZikpfWZ1bmN0aW9uIGooYil7YiE9PWouZiYmKGI/KGEuaHRtbChcIlwiKS5hZGRDbGFzcyhpYitcIiBcIitrZSkuYXBwZW5kKHFlKS5iZWZvcmUob2UpLmJlZm9yZShwZSksZ2IoaWUpKToocWUuZGV0YWNoKCksb2UuZGV0YWNoKCkscGUuZGV0YWNoKCksYS5odG1sKG5lLnVydGV4dCkucmVtb3ZlQ2xhc3Moa2UpLGhiKGllKSksaShiKSxqLmY9Yil9ZnVuY3Rpb24gbSgpe3lkPWllLmRhdGE9eWR8fFAoZS5kYXRhKXx8RChhKSx6ZD1pZS5zaXplPXlkLmxlbmd0aCwheGQub2smJmUuc2h1ZmZsZSYmTyh5ZCksZigpLEplPXkoSmUpLHpkJiZqKCEwKX1mdW5jdGlvbiBvKCl7dmFyIGE9Mj56ZCYmIWUuZW5hYmxlaWZzaW5nbGVmcmFtZXx8Q2Q7TWUubm9Nb3ZlPWF8fFNkLE1lLm5vU3dpcGU9YXx8IWUuc3dpcGUsIVdkJiZzZS50b2dnbGVDbGFzcyhCYiwhZS5jbGljayYmIU1lLm5vTW92ZSYmIU1lLm5vU3dpcGUpLE5jJiZxZS50b2dnbGVDbGFzcyhzYiwhTWUubm9Td2lwZSl9ZnVuY3Rpb24gdChhKXthPT09ITAmJihhPVwiXCIpLGUuYXV0b3BsYXk9TWF0aC5tYXgoK2F8fFNjLDEuNSpWZCl9ZnVuY3Rpb24gdSgpe2Z1bmN0aW9uIGEoYSxjKXtiW2E/XCJhZGRcIjpcInJlbW92ZVwiXS5wdXNoKGMpfWllLm9wdGlvbnM9ZT1SKGUpLFNkPVwiY3Jvc3NmYWRlXCI9PT1lLnRyYW5zaXRpb258fFwiZGlzc29sdmVcIj09PWUudHJhbnNpdGlvbixNZD1lLmxvb3AmJih6ZD4yfHxTZCYmKCFXZHx8XCJzbGlkZVwiIT09V2QpKSxWZD0rZS50cmFuc2l0aW9uZHVyYXRpb258fFFjLFlkPVwicnRsXCI9PT1lLmRpcmVjdGlvbixaZD1kLmV4dGVuZCh7fSxlLmtleWJvYXJkJiZkZCxlLmtleWJvYXJkKTt2YXIgYj17YWRkOltdLHJlbW92ZTpbXX07emQ+MXx8ZS5lbmFibGVpZnNpbmdsZWZyYW1lPyhOZD1lLm5hdixQZD1cInRvcFwiPT09ZS5uYXZwb3NpdGlvbixiLnJlbW92ZS5wdXNoKFhiKSx3ZS50b2dnbGUoISFlLmFycm93cykpOihOZD0hMSx3ZS5oaWRlKCkpLFJiKCksQmQ9bmV3IHpjKGQuZXh0ZW5kKEFjLGUuc3Bpbm5lcixCYyx7ZGlyZWN0aW9uOllkPy0xOjF9KSksR2MoKSxIYygpLGUuYXV0b3BsYXkmJnQoZS5hdXRvcGxheSksVGQ9bihlLnRodW1id2lkdGgpfHxVYyxVZD1uKGUudGh1bWJoZWlnaHQpfHxVYyxOZS5vaz1QZS5vaz1lLnRyYWNrcGFkJiYhTWMsbygpLGVkKGUsW0xlXSksT2Q9XCJ0aHVtYnNcIj09PU5kLE9kPyhsYyh6ZCxcIm5hdlRodW1iXCIpLEFkPUJlLGhlPVpjLEoob2UsZC5Gb3RvcmFtYS5qc3Quc3R5bGUoe3c6VGQsaDpVZCxiOmUudGh1bWJib3JkZXJ3aWR0aCxtOmUudGh1bWJtYXJnaW4sczpqZSxxOiFKY30pKSx5ZS5hZGRDbGFzcyhMYikucmVtb3ZlQ2xhc3MoS2IpKTpcImRvdHNcIj09PU5kPyhsYyh6ZCxcIm5hdkRvdFwiKSxBZD1BZSxoZT1ZYyx5ZS5hZGRDbGFzcyhLYikucmVtb3ZlQ2xhc3MoTGIpKTooTmQ9ITEseWUucmVtb3ZlQ2xhc3MoTGIrXCIgXCIrS2IpKSxOZCYmKFBkP3hlLmluc2VydEJlZm9yZShyZSk6eGUuaW5zZXJ0QWZ0ZXIocmUpLHdjLm5hdj0hMSx3YyhBZCx6ZSxcIm5hdlwiKSksUWQ9ZS5hbGxvd2Z1bGxzY3JlZW4sUWQ/KERlLnByZXBlbmRUbyhyZSksUmQ9S2MmJlwibmF0aXZlXCI9PT1RZCk6KERlLmRldGFjaCgpLFJkPSExKSxhKFNkLG9iKSxhKCFTZCxwYiksYSghZS5jYXB0aW9ucyx2YiksYShZZCx0YiksYShcImFsd2F5c1wiIT09ZS5hcnJvd3Msd2IpLFhkPWUuc2hhZG93cyYmIU1jLGEoIVhkLHJiKSxxZS5hZGRDbGFzcyhiLmFkZC5qb2luKFwiIFwiKSkucmVtb3ZlQ2xhc3MoYi5yZW1vdmUuam9pbihcIiBcIikpLEtlPWQuZXh0ZW5kKHt9LGUpfWZ1bmN0aW9uIHgoYSl7cmV0dXJuIDA+YT8oemQrYSV6ZCklemQ6YT49emQ/YSV6ZDphfWZ1bmN0aW9uIHkoYSl7cmV0dXJuIGgoYSwwLHpkLTEpfWZ1bmN0aW9uIHooYSl7cmV0dXJuIE1kP3goYSk6eShhKX1mdW5jdGlvbiBFKGEpe3JldHVybiBhPjB8fE1kP2EtMTohMX1mdW5jdGlvbiBVKGEpe3JldHVybiB6ZC0xPmF8fE1kP2ErMTohMX1mdW5jdGlvbiAkKCl7TWUubWluPU1kPy0xLzA6LXIoemQtMSxMZS53LGUubWFyZ2luLEZkKSxNZS5tYXg9TWQ/MS8wOi1yKDAsTGUudyxlLm1hcmdpbixGZCksTWUuc25hcD1MZS53K2UubWFyZ2lufWZ1bmN0aW9uIGJiKCl7T2UubWluPU1hdGgubWluKDAsTGUubnctemUud2lkdGgoKSksT2UubWF4PTAsemUudG9nZ2xlQ2xhc3MoQmIsIShPZS5ub01vdmU9T2UubWluPT09T2UubWF4KSl9ZnVuY3Rpb24gY2IoYSxiLGMpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhKXthPW5ldyBBcnJheShhKTt2YXIgZT0hMH1yZXR1cm4gZC5lYWNoKGEsZnVuY3Rpb24oYSxkKXtpZihlJiYoZD1hKSxcIm51bWJlclwiPT10eXBlb2YgZCl7dmFyIGY9eWRbeChkKV07aWYoZil7dmFyIGc9XCIkXCIrYitcIkZyYW1lXCIsaD1mW2ddO2MuY2FsbCh0aGlzLGEsZCxmLGgsZyxoJiZoLmRhdGEoKSl9fX0pfWZ1bmN0aW9uIGZiKGEsYixjLGQpeyghJGR8fFwiKlwiPT09JGQmJmQ9PT1MZCkmJihhPXEoZS53aWR0aCl8fHEoYSl8fFZjLGI9cShlLmhlaWdodCl8fHEoYil8fFdjLGllLnJlc2l6ZSh7d2lkdGg6YSxyYXRpbzplLnJhdGlvfHxjfHxhL2J9LDAsZCE9PUxkJiZcIipcIikpfWZ1bmN0aW9uIFBiKGEsYixjLGYsZyxoKXtjYihhLGIsZnVuY3Rpb24oYSxpLGosayxsLG0pe2Z1bmN0aW9uIG4oYSl7dmFyIGI9eChpKTtmZChhLHtpbmRleDpiLHNyYzp3LGZyYW1lOnlkW2JdfSl9ZnVuY3Rpb24gbygpe3QucmVtb3ZlKCksZC5Gb3RvcmFtYS5jYWNoZVt3XT1cImVycm9yXCIsai5odG1sJiZcInN0YWdlXCI9PT1ifHwheXx8eT09PXc/KCF3fHxqLmh0bWx8fHI/XCJzdGFnZVwiPT09YiYmKGsudHJpZ2dlcihcImY6bG9hZFwiKS5yZW1vdmVDbGFzcyhhYytcIiBcIitfYikuYWRkQ2xhc3MoYmMpLG4oXCJsb2FkXCIpLGZiKCkpOihrLnRyaWdnZXIoXCJmOmVycm9yXCIpLnJlbW92ZUNsYXNzKGFjKS5hZGRDbGFzcyhfYiksbihcImVycm9yXCIpKSxtLnN0YXRlPVwiZXJyb3JcIiwhKHpkPjEmJnlkW2ldPT09ail8fGouaHRtbHx8ai5kZWxldGVkfHxqLnZpZGVvfHxyfHwoai5kZWxldGVkPSEwLGllLnNwbGljZShpLDEpKSk6KGpbdl09dz15LFBiKFtpXSxiLGMsZixnLCEwKSl9ZnVuY3Rpb24gcCgpe2QuRm90b3JhbWEubWVhc3VyZXNbd109dS5tZWFzdXJlcz1kLkZvdG9yYW1hLm1lYXN1cmVzW3ddfHx7d2lkdGg6cy53aWR0aCxoZWlnaHQ6cy5oZWlnaHQscmF0aW86cy53aWR0aC9zLmhlaWdodH0sZmIodS5tZWFzdXJlcy53aWR0aCx1Lm1lYXN1cmVzLmhlaWdodCx1Lm1lYXN1cmVzLnJhdGlvLGkpLHQub2ZmKFwibG9hZCBlcnJvclwiKS5hZGRDbGFzcyhmYysocj9cIiBcIitnYzpcIlwiKSkucHJlcGVuZFRvKGspLEkodCwoZC5pc0Z1bmN0aW9uKGMpP2MoKTpjKXx8TGUsZnx8ai5maXR8fGUuZml0LGd8fGoucG9zaXRpb258fGUucG9zaXRpb24pLGQuRm90b3JhbWEuY2FjaGVbd109bS5zdGF0ZT1cImxvYWRlZFwiLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtrLnRyaWdnZXIoXCJmOmxvYWRcIikucmVtb3ZlQ2xhc3MoYWMrXCIgXCIrX2IpLmFkZENsYXNzKGJjK1wiIFwiKyhyP2NjOmRjKSksXCJzdGFnZVwiPT09Yj9uKFwibG9hZFwiKTooai50aHVtYnJhdGlvPT09JGN8fCFqLnRodW1icmF0aW8mJmUudGh1bWJyYXRpbz09PSRjKSYmKGoudGh1bWJyYXRpbz11Lm1lYXN1cmVzLnJhdGlvLHZkKCkpfSwwKX1mdW5jdGlvbiBxKCl7dmFyIGE9MTA7RyhmdW5jdGlvbigpe3JldHVybiFmZXx8IWEtLSYmIU1jfSxmdW5jdGlvbigpe3AoKX0pfWlmKGspe3ZhciByPWllLmZ1bGxTY3JlZW4mJmouZnVsbCYmai5mdWxsIT09ai5pbWcmJiFtLiRmdWxsJiZcInN0YWdlXCI9PT1iO2lmKCFtLiRpbWd8fGh8fHIpe3ZhciBzPW5ldyBJbWFnZSx0PWQocyksdT10LmRhdGEoKTttW3I/XCIkZnVsbFwiOlwiJGltZ1wiXT10O3ZhciB2PVwic3RhZ2VcIj09PWI/cj9cImZ1bGxcIjpcImltZ1wiOlwidGh1bWJcIix3PWpbdl0seT1yP251bGw6altcInN0YWdlXCI9PT1iP1widGh1bWJcIjpcImltZ1wiXTtpZihcIm5hdlRodW1iXCI9PT1iJiYoaz1tLiR3cmFwKSwhdylyZXR1cm4gdm9pZCBvKCk7ZC5Gb3RvcmFtYS5jYWNoZVt3XT8hZnVuY3Rpb24geigpe1wiZXJyb3JcIj09PWQuRm90b3JhbWEuY2FjaGVbd10/bygpOlwibG9hZGVkXCI9PT1kLkZvdG9yYW1hLmNhY2hlW3ddP3NldFRpbWVvdXQocSwwKTpzZXRUaW1lb3V0KHosMTAwKX0oKTooZC5Gb3RvcmFtYS5jYWNoZVt3XT1cIipcIix0Lm9uKFwibG9hZFwiLHEpLm9uKFwiZXJyb3JcIixvKSksbS5zdGF0ZT1cIlwiLHMuc3JjPXd9fX0pfWZ1bmN0aW9uIFFiKGEpe0llLmFwcGVuZChCZC5zcGluKCkuZWwpLmFwcGVuZFRvKGEpfWZ1bmN0aW9uIFJiKCl7SWUuZGV0YWNoKCksQmQmJkJkLnN0b3AoKX1mdW5jdGlvbiBTYigpe3ZhciBhPURkW1hjXTthJiYhYS5kYXRhKCkuc3RhdGUmJihRYihhKSxhLm9uKFwiZjpsb2FkIGY6ZXJyb3JcIixmdW5jdGlvbigpe2Eub2ZmKFwiZjpsb2FkIGY6ZXJyb3JcIiksUmIoKX0pKX1mdW5jdGlvbiBlYyhhKXtXKGEsc2QpLFgoYSxmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtRKHllKX0sMCksUmMoe3RpbWU6VmQsZ3Vlc3NJbmRleDpkKHRoaXMpLmRhdGEoKS5lcSxtaW5NYXg6T2V9KX0pfWZ1bmN0aW9uIGxjKGEsYil7Y2IoYSxiLGZ1bmN0aW9uKGEsYyxlLGYsZyxoKXtpZighZil7Zj1lW2ddPXFlW2ddLmNsb25lKCksaD1mLmRhdGEoKSxoLmRhdGE9ZTt2YXIgaT1mWzBdO1wic3RhZ2VcIj09PWI/KGUuaHRtbCYmZCgnPGRpdiBjbGFzcz1cIicra2MrJ1wiPjwvZGl2PicpLmFwcGVuZChlLl9odG1sP2QoZS5odG1sKS5yZW1vdmVBdHRyKFwiaWRcIikuaHRtbChlLl9odG1sKTplLmh0bWwpLmFwcGVuZFRvKGYpLGUuY2FwdGlvbiYmZChOKG9jLE4ocGMsZS5jYXB0aW9uKSkpLmFwcGVuZFRvKGYpLGUudmlkZW8mJmYuYWRkQ2xhc3MoemIpLmFwcGVuZChGZS5jbG9uZSgpKSxYKGksZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7UShyZSl9LDApLHBkKHtpbmRleDpoLmVxLHVzZXI6ITB9KX0pLHRlPXRlLmFkZChmKSk6XCJuYXZEb3RcIj09PWI/KGVjKGkpLEFlPUFlLmFkZChmKSk6XCJuYXZUaHVtYlwiPT09YiYmKGVjKGkpLGguJHdyYXA9Zi5jaGlsZHJlbihcIjpmaXJzdFwiKSxCZT1CZS5hZGQoZiksZS52aWRlbyYmaC4kd3JhcC5hcHBlbmQoRmUuY2xvbmUoKSkpfX0pfWZ1bmN0aW9uIHNjKGEsYixjLGQpe3JldHVybiBhJiZhLmxlbmd0aCYmSShhLGIsYyxkKX1mdW5jdGlvbiB0YyhhKXtjYihhLFwic3RhZ2VcIixmdW5jdGlvbihhLGIsYyxmLGcsaCl7aWYoZil7dmFyIGk9eChiKSxqPWMuZml0fHxlLmZpdCxrPWMucG9zaXRpb258fGUucG9zaXRpb247aC5lcT1pLFJlW1hjXVtpXT1mLmNzcyhkLmV4dGVuZCh7bGVmdDpTZD8wOnIoYixMZS53LGUubWFyZ2luLEZkKX0sU2QmJmwoMCkpKSxGKGZbMF0pJiYoZi5hcHBlbmRUbyhzZSksbWQoYy4kdmlkZW8pKSxzYyhoLiRpbWcsTGUsaixrKSxzYyhoLiRmdWxsLExlLGosayl9fSl9ZnVuY3Rpb24gdWMoYSxiKXtpZihcInRodW1ic1wiPT09TmQmJiFpc05hTihhKSl7dmFyIGM9LWEsZj0tYStMZS5udztCZS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGE9ZCh0aGlzKSxnPWEuZGF0YSgpLGg9Zy5lcSxpPWZ1bmN0aW9uKCl7cmV0dXJue2g6VWQsdzpnLnd9fSxqPWkoKSxrPXlkW2hdfHx7fSxsPWsudGh1bWJmaXR8fGUudGh1bWJmaXQsbT1rLnRodW1icG9zaXRpb258fGUudGh1bWJwb3NpdGlvbjtqLnc9Zy53LGcubCtnLnc8Y3x8Zy5sPmZ8fHNjKGcuJGltZyxqLGwsbSl8fGImJlBiKFtoXSxcIm5hdlRodW1iXCIsaSxsLG0pfSl9fWZ1bmN0aW9uIHdjKGEsYixjKXtpZighd2NbY10pe3ZhciBmPVwibmF2XCI9PT1jJiZPZCxnPTA7Yi5hcHBlbmQoYS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGEsYj1kKHRoaXMpLGM9Yi5kYXRhKCksZT0wLGY9eWQubGVuZ3RoO2Y+ZTtlKyspaWYoYy5kYXRhPT09eWRbZV0pe2E9ITAsYy5lcT1lO2JyZWFrfXJldHVybiBhfHxiLnJlbW92ZSgpJiYhMX0pLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZChhKS5kYXRhKCkuZXEtZChiKS5kYXRhKCkuZXF9KS5lYWNoKGZ1bmN0aW9uKCl7aWYoZil7dmFyIGE9ZCh0aGlzKSxiPWEuZGF0YSgpLGM9TWF0aC5yb3VuZChVZCpiLmRhdGEudGh1bWJyYXRpbyl8fFRkO2IubD1nLGIudz1jLGEuY3NzKHt3aWR0aDpjfSksZys9YytlLnRodW1ibWFyZ2lufX0pKSx3Y1tjXT0hMH19ZnVuY3Rpb24geGMoYSl7cmV0dXJuIGEtU2U+TGUudy8zfWZ1bmN0aW9uIHljKGEpe3JldHVybiEoTWR8fEplK2EmJkplLXpkK2F8fENkKX1mdW5jdGlvbiBHYygpe3ZhciBhPXljKDApLGI9eWMoMSk7dWUudG9nZ2xlQ2xhc3MoRWIsYSkuYXR0cihWKGEpKSx2ZS50b2dnbGVDbGFzcyhFYixiKS5hdHRyKFYoYikpfWZ1bmN0aW9uIEhjKCl7TmUub2smJihOZS5wcmV2ZW50PXtcIjxcIjp5YygwKSxcIj5cIjp5YygxKX0pfWZ1bmN0aW9uIExjKGEpe3ZhciBiLGMsZD1hLmRhdGEoKTtyZXR1cm4gT2Q/KGI9ZC5sLGM9ZC53KTooYj1hLnBvc2l0aW9uKCkubGVmdCxjPWEud2lkdGgoKSkse2M6YitjLzIsbWluOi1iKzEwKmUudGh1bWJtYXJnaW4sbWF4Oi1iK0xlLnctYy0xMCplLnRodW1ibWFyZ2lufX1mdW5jdGlvbiBPYyhhKXt2YXIgYj1EZFtoZV0uZGF0YSgpO18oQ2Use3RpbWU6MS4yKmEscG9zOmIubCx3aWR0aDpiLnctMiplLnRodW1iYm9yZGVyd2lkdGh9KX1mdW5jdGlvbiBSYyhhKXt2YXIgYj15ZFthLmd1ZXNzSW5kZXhdW2hlXTtpZihiKXt2YXIgYz1PZS5taW4hPT1PZS5tYXgsZD1hLm1pbk1heHx8YyYmTGMoRGRbaGVdKSxlPWMmJihhLmtlZXAmJlJjLmw/UmMubDpoKChhLmNvb3x8TGUubncvMiktTGMoYikuYyxkLm1pbixkLm1heCkpLGY9YyYmaChlLE9lLm1pbixPZS5tYXgpLGc9MS4xKmEudGltZTtfKHplLHt0aW1lOmcscG9zOmZ8fDAsb25FbmQ6ZnVuY3Rpb24oKXt1YyhmLCEwKX19KSxsZCh5ZSxLKGYsT2UubWluLE9lLm1heCkpLFJjLmw9ZX19ZnVuY3Rpb24gVGMoKXtfYyhoZSksUWVbaGVdLnB1c2goRGRbaGVdLmFkZENsYXNzKFdiKSl9ZnVuY3Rpb24gX2MoYSl7Zm9yKHZhciBiPVFlW2FdO2IubGVuZ3RoOyliLnNoaWZ0KCkucmVtb3ZlQ2xhc3MoV2IpfWZ1bmN0aW9uIGJkKGEpe3ZhciBiPVJlW2FdO2QuZWFjaChFZCxmdW5jdGlvbihhLGMpe2RlbGV0ZSBiW3goYyldfSksZC5lYWNoKGIsZnVuY3Rpb24oYSxjKXtkZWxldGUgYlthXSxjLmRldGFjaCgpfSl9ZnVuY3Rpb24gY2QoYSl7RmQ9R2Q9SmU7dmFyIGI9RGRbWGNdO2ImJihfYyhYYyksUWVbWGNdLnB1c2goYi5hZGRDbGFzcyhXYikpLGF8fGllLnNob3cub25FbmQoITApLHYoc2UsMCwhMCksYmQoWGMpLHRjKEVkKSwkKCksYmIoKSl9ZnVuY3Rpb24gZWQoYSxiKXthJiZkLmVhY2goYixmdW5jdGlvbihiLGMpe2MmJmQuZXh0ZW5kKGMse3dpZHRoOmEud2lkdGh8fGMud2lkdGgsaGVpZ2h0OmEuaGVpZ2h0LG1pbndpZHRoOmEubWlud2lkdGgsbWF4d2lkdGg6YS5tYXh3aWR0aCxtaW5oZWlnaHQ6YS5taW5oZWlnaHQsbWF4aGVpZ2h0OmEubWF4aGVpZ2h0LHJhdGlvOlMoYS5yYXRpbyl9KX0pfWZ1bmN0aW9uIGZkKGIsYyl7YS50cmlnZ2VyKGliK1wiOlwiK2IsW2llLGNdKX1mdW5jdGlvbiBnZCgpe2NsZWFyVGltZW91dChoZC50KSxmZT0xLGUuc3RvcGF1dG9wbGF5b250b3VjaD9pZS5zdG9wQXV0b3BsYXkoKTpjZT0hMH1mdW5jdGlvbiBoZCgpe2ZlJiYoZS5zdG9wYXV0b3BsYXlvbnRvdWNofHwoaWQoKSxqZCgpKSxoZC50PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmZT0wfSxRYytQYykpfWZ1bmN0aW9uIGlkKCl7Y2U9ISghQ2QmJiFkZSl9ZnVuY3Rpb24gamQoKXtpZihjbGVhclRpbWVvdXQoamQudCksRy5zdG9wKGpkLncpLCFlLmF1dG9wbGF5fHxjZSlyZXR1cm4gdm9pZChpZS5hdXRvcGxheSYmKGllLmF1dG9wbGF5PSExLGZkKFwic3RvcGF1dG9wbGF5XCIpKSk7aWUuYXV0b3BsYXl8fChpZS5hdXRvcGxheT0hMCxmZChcInN0YXJ0YXV0b3BsYXlcIikpO3ZhciBhPUplLGI9RGRbWGNdLmRhdGEoKTtqZC53PUcoZnVuY3Rpb24oKXtyZXR1cm4gYi5zdGF0ZXx8YSE9PUplfSxmdW5jdGlvbigpe2pkLnQ9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKCFjZSYmYT09PUplKXt2YXIgYj1LZCxjPXlkW2JdW1hjXS5kYXRhKCk7amQudz1HKGZ1bmN0aW9uKCl7cmV0dXJuIGMuc3RhdGV8fGIhPT1LZH0sZnVuY3Rpb24oKXtjZXx8YiE9PUtkfHxpZS5zaG93KE1kP1ooIVlkKTpLZCl9KX19LGUuYXV0b3BsYXkpfSl9ZnVuY3Rpb24ga2QoKXtpZS5mdWxsU2NyZWVuJiYoaWUuZnVsbFNjcmVlbj0hMSxLYyYmdmMuY2FuY2VsKGxlKSxEYy5yZW1vdmVDbGFzcyhqYiksQ2MucmVtb3ZlQ2xhc3MoamIpLGEucmVtb3ZlQ2xhc3MoWmIpLmluc2VydEFmdGVyKHBlKSxMZT1kLmV4dGVuZCh7fSxlZSksbWQoQ2QsITAsITApLHJkKFwieFwiLCExKSxpZS5yZXNpemUoKSxQYihFZCxcInN0YWdlXCIpLFEoRWMsYWUsX2QpLGZkKFwiZnVsbHNjcmVlbmV4aXRcIikpfWZ1bmN0aW9uIGxkKGEsYil7WGQmJihhLnJlbW92ZUNsYXNzKFViK1wiIFwiK1ZiKSxiJiYhQ2QmJmEuYWRkQ2xhc3MoYi5yZXBsYWNlKC9efFxccy9nLFwiIFwiK1RiK1wiLS1cIikpKX1mdW5jdGlvbiBtZChhLGIsYyl7YiYmKHFlLnJlbW92ZUNsYXNzKG5iKSxDZD0hMSxvKCkpLGEmJmEhPT1DZCYmKGEucmVtb3ZlKCksZmQoXCJ1bmxvYWR2aWRlb1wiKSksYyYmKGlkKCksamQoKSl9ZnVuY3Rpb24gbmQoYSl7cWUudG9nZ2xlQ2xhc3MocWIsYSl9ZnVuY3Rpb24gb2QoYSl7aWYoIU1lLmZsb3cpe3ZhciBiPWE/YS5wYWdlWDpvZC54LGM9YiYmIXljKHhjKGIpKSYmZS5jbGljaztvZC5wIT09YyYmcmUudG9nZ2xlQ2xhc3MoQ2IsYykmJihvZC5wPWMsb2QueD1iKX19ZnVuY3Rpb24gcGQoYSl7Y2xlYXJUaW1lb3V0KHBkLnQpLGUuY2xpY2t0cmFuc2l0aW9uJiZlLmNsaWNrdHJhbnNpdGlvbiE9PWUudHJhbnNpdGlvbj9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGI9ZS50cmFuc2l0aW9uO2llLnNldE9wdGlvbnMoe3RyYW5zaXRpb246ZS5jbGlja3RyYW5zaXRpb259KSxXZD1iLHBkLnQ9c2V0VGltZW91dChmdW5jdGlvbigpe2llLnNob3coYSl9LDEwKX0sMCk6aWUuc2hvdyhhKX1mdW5jdGlvbiBxZChhLGIpe3ZhciBjPWEudGFyZ2V0LGY9ZChjKTtmLmhhc0NsYXNzKG1jKT9pZS5wbGF5VmlkZW8oKTpjPT09RWU/aWUudG9nZ2xlRnVsbFNjcmVlbigpOkNkP2M9PT1IZSYmbWQoQ2QsITAsITApOmI/bmQoKTplLmNsaWNrJiZwZCh7aW5kZXg6YS5zaGlmdEtleXx8Wih4YyhhLl94KSksc2xvdzphLmFsdEtleSx1c2VyOiEwfSl9ZnVuY3Rpb24gcmQoYSxiKXtNZVthXT1PZVthXT1ifWZ1bmN0aW9uIHNkKGEpe3ZhciBiPWQodGhpcykuZGF0YSgpLmVxO3BkKHtpbmRleDpiLHNsb3c6YS5hbHRLZXksdXNlcjohMCxjb286YS5feC15ZS5vZmZzZXQoKS5sZWZ0fSl9ZnVuY3Rpb24gdGQoYSl7cGQoe2luZGV4OndlLmluZGV4KHRoaXMpP1wiPlwiOlwiPFwiLHNsb3c6YS5hbHRLZXksdXNlcjohMH0pfWZ1bmN0aW9uIHVkKGEpe1goYSxmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtRKHJlKX0sMCksbmQoITEpfSl9ZnVuY3Rpb24gdmQoKXtpZihtKCksdSgpLCF2ZC5pKXt2ZC5pPSEwO3ZhciBhPWUuc3RhcnRpbmRleDsoYXx8ZS5oYXNoJiZjLmhhc2gpJiYoTGQ9TChhfHxjLmhhc2gucmVwbGFjZSgvXiMvLFwiXCIpLHlkLDA9PT1pZS5pbmRleHx8YSxhKSksSmU9RmQ9R2Q9SGQ9TGQ9eihMZCl8fDB9aWYoemQpe2lmKHdkKCkpcmV0dXJuO0NkJiZtZChDZCwhMCksRWQ9W10sYmQoWGMpLHZkLm9rPSEwLGllLnNob3coe2luZGV4OkplLHRpbWU6MH0pLGllLnJlc2l6ZSgpfWVsc2UgaWUuZGVzdHJveSgpfWZ1bmN0aW9uIHdkKCl7cmV0dXJuIXdkLmY9PT1ZZD8od2QuZj1ZZCxKZT16ZC0xLUplLGllLnJldmVyc2UoKSwhMCk6dm9pZCAwfWZ1bmN0aW9uIHhkKCl7eGQub2t8fCh4ZC5vaz0hMCxmZChcInJlYWR5XCIpKX1DYz1kKFwiaHRtbFwiKSxEYz1kKFwiYm9keVwiKTt2YXIgeWQsemQsQWQsQmQsQ2QsRGQsRWQsRmQsR2QsSGQsSWQsSmQsS2QsTGQsTWQsTmQsT2QsUGQsUWQsUmQsU2QsVGQsVWQsVmQsV2QsWGQsWWQsWmQsJGQsX2QsYWUsYmUsY2UsZGUsZWUsZmUsZ2UsaGUsaWU9dGhpcyxqZT1kLm5vdygpLGtlPWliK2plLGxlPWFbMF0sbWU9MSxuZT1hLmRhdGEoKSxvZT1kKFwiPHN0eWxlPjwvc3R5bGU+XCIpLHBlPWQoTihZYikpLHFlPWQoTihrYikpLHJlPWQoTih4YikpLmFwcGVuZFRvKHFlKSxzZT0ocmVbMF0sZChOKEFiKSkuYXBwZW5kVG8ocmUpKSx0ZT1kKCksdWU9ZChOKERiK1wiIFwiK0ZiK3JjKSksdmU9ZChOKERiK1wiIFwiK0diK3JjKSksd2U9dWUuYWRkKHZlKS5hcHBlbmRUbyhyZSkseGU9ZChOKEliKSkseWU9ZChOKEhiKSkuYXBwZW5kVG8oeGUpLHplPWQoTihKYikpLmFwcGVuZFRvKHllKSxBZT1kKCksQmU9ZCgpLENlPShzZS5kYXRhKCksemUuZGF0YSgpLGQoTihqYykpLmFwcGVuZFRvKHplKSksRGU9ZChOKCRiK3JjKSksRWU9RGVbMF0sRmU9ZChOKG1jKSksR2U9ZChOKG5jKSkuYXBwZW5kVG8ocmUpLEhlPUdlWzBdLEllPWQoTihxYykpLEplPSExLEtlPXt9LExlPXt9LE1lPXt9LE5lPXt9LE9lPXt9LFBlPXt9LFFlPXt9LFJlPXt9LFNlPTAsVGU9W107XHJcbnFlW1hjXT1kKE4oeWIpKSxxZVtaY109ZChOKE1iK1wiIFwiK09iK3JjLE4oaWMpKSkscWVbWWNdPWQoTihNYitcIiBcIitOYityYyxOKGhjKSkpLFFlW1hjXT1bXSxRZVtaY109W10sUWVbWWNdPVtdLFJlW1hjXT17fSxxZS5hZGRDbGFzcyhJYz9tYjpsYikudG9nZ2xlQ2xhc3MocWIsIWUuY29udHJvbHNvbnN0YXJ0KSxuZS5mb3RvcmFtYT10aGlzLGllLnN0YXJ0QXV0b3BsYXk9ZnVuY3Rpb24oYSl7cmV0dXJuIGllLmF1dG9wbGF5P3RoaXM6KGNlPWRlPSExLHQoYXx8ZS5hdXRvcGxheSksamQoKSx0aGlzKX0saWUuc3RvcEF1dG9wbGF5PWZ1bmN0aW9uKCl7cmV0dXJuIGllLmF1dG9wbGF5JiYoY2U9ZGU9ITAsamQoKSksdGhpc30saWUuc2hvdz1mdW5jdGlvbihhKXt2YXIgYjtcIm9iamVjdFwiIT10eXBlb2YgYT8oYj1hLGE9e30pOmI9YS5pbmRleCxiPVwiPlwiPT09Yj9HZCsxOlwiPFwiPT09Yj9HZC0xOlwiPDxcIj09PWI/MDpcIj4+XCI9PT1iP3pkLTE6YixiPWlzTmFOKGIpP0woYix5ZCwhMCk6YixiPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBiP0plfHwwOmIsaWUuYWN0aXZlSW5kZXg9SmU9eihiKSxJZD1FKEplKSxKZD1VKEplKSxLZD14KEplKyhZZD8tMToxKSksRWQ9W0plLElkLEpkXSxHZD1NZD9iOkplO3ZhciBjPU1hdGguYWJzKEhkLUdkKSxkPXcoYS50aW1lLGZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWluKFZkKigxKyhjLTEpLzEyKSwyKlZkKX0pLGY9YS5vdmVyUG9zO2Euc2xvdyYmKGQqPTEwKTt2YXIgZz1EZDtpZS5hY3RpdmVGcmFtZT1EZD15ZFtKZV07dmFyIGk9Zz09PURkJiYhYS51c2VyO21kKENkLERkLmkhPT15ZFt4KEZkKV0uaSksbGMoRWQsXCJzdGFnZVwiKSx0YyhNYz9bR2RdOltHZCxFKEdkKSxVKEdkKV0pLHJkKFwiZ29cIiwhMCksaXx8ZmQoXCJzaG93XCIse3VzZXI6YS51c2VyLHRpbWU6ZH0pLGNlPSEwO3ZhciBqPWllLnNob3cub25FbmQ9ZnVuY3Rpb24oYil7aWYoIWoub2spe2lmKGoub2s9ITAsYnx8Y2QoITApLGl8fGZkKFwic2hvd2VuZFwiLHt1c2VyOmEudXNlcn0pLCFiJiZXZCYmV2QhPT1lLnRyYW5zaXRpb24pcmV0dXJuIGllLnNldE9wdGlvbnMoe3RyYW5zaXRpb246V2R9KSx2b2lkKFdkPSExKTtTYigpLFBiKEVkLFwic3RhZ2VcIikscmQoXCJnb1wiLCExKSxIYygpLG9kKCksaWQoKSxqZCgpfX07aWYoU2Qpe3ZhciBrPURkW1hjXSxsPUplIT09SGQ/eWRbSGRdW1hjXTpudWxsO2FiKGssbCx0ZSx7dGltZTpkLG1ldGhvZDplLnRyYW5zaXRpb24sb25FbmQ6an0sVGUpfWVsc2UgXyhzZSx7cG9zOi1yKEdkLExlLncsZS5tYXJnaW4sRmQpLG92ZXJQb3M6Zix0aW1lOmQsb25FbmQ6an0pO2lmKEdjKCksTmQpe1RjKCk7dmFyIG09eShKZStoKEdkLUhkLC0xLDEpKTtSYyh7dGltZTpkLGNvbzptIT09SmUmJmEuY29vLGd1ZXNzSW5kZXg6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuY29vP206SmUsa2VlcDppfSksT2QmJk9jKGQpfXJldHVybiBiZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgSGQmJkhkIT09SmUsSGQ9SmUsZS5oYXNoJiZiZSYmIWllLmVxJiZIKERkLmlkfHxKZSsxKSx0aGlzfSxpZS5yZXF1ZXN0RnVsbFNjcmVlbj1mdW5jdGlvbigpe3JldHVybiBRZCYmIWllLmZ1bGxTY3JlZW4mJihfZD1FYy5zY3JvbGxUb3AoKSxhZT1FYy5zY3JvbGxMZWZ0KCksUShFYykscmQoXCJ4XCIsITApLGVlPWQuZXh0ZW5kKHt9LExlKSxhLmFkZENsYXNzKFpiKS5hcHBlbmRUbyhEYy5hZGRDbGFzcyhqYikpLENjLmFkZENsYXNzKGpiKSxtZChDZCwhMCwhMCksaWUuZnVsbFNjcmVlbj0hMCxSZCYmdmMucmVxdWVzdChsZSksaWUucmVzaXplKCksUGIoRWQsXCJzdGFnZVwiKSxTYigpLGZkKFwiZnVsbHNjcmVlbmVudGVyXCIpKSx0aGlzfSxpZS5jYW5jZWxGdWxsU2NyZWVuPWZ1bmN0aW9uKCl7cmV0dXJuIFJkJiZ2Yy5pcygpP3ZjLmNhbmNlbChiKTprZCgpLHRoaXN9LGllLnRvZ2dsZUZ1bGxTY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4gaWVbKGllLmZ1bGxTY3JlZW4/XCJjYW5jZWxcIjpcInJlcXVlc3RcIikrXCJGdWxsU2NyZWVuXCJdKCl9LFQoYix2Yy5ldmVudCxmdW5jdGlvbigpeyF5ZHx8dmMuaXMoKXx8Q2R8fGtkKCl9KSxpZS5yZXNpemU9ZnVuY3Rpb24oYSl7aWYoIXlkKXJldHVybiB0aGlzO3ZhciBiPWFyZ3VtZW50c1sxXXx8MCxjPWFyZ3VtZW50c1syXTtlZChpZS5mdWxsU2NyZWVuP3t3aWR0aDpcIjEwMCVcIixtYXh3aWR0aDpudWxsLG1pbndpZHRoOm51bGwsaGVpZ2h0OlwiMTAwJVwiLG1heGhlaWdodDpudWxsLG1pbmhlaWdodDpudWxsfTpSKGEpLFtMZSxjfHxpZS5mdWxsU2NyZWVufHxlXSk7dmFyIGQ9TGUud2lkdGgsZj1MZS5oZWlnaHQsZz1MZS5yYXRpbyxpPUVjLmhlaWdodCgpLShOZD95ZS5oZWlnaHQoKTowKTtyZXR1cm4gcShkKSYmKHFlLmFkZENsYXNzKHViKS5jc3Moe3dpZHRoOmQsbWluV2lkdGg6TGUubWlud2lkdGh8fDAsbWF4V2lkdGg6TGUubWF4d2lkdGh8fGFkfSksZD1MZS5XPUxlLnc9cWUud2lkdGgoKSxMZS5udz1OZCYmcChlLm5hdndpZHRoLGQpfHxkLGUuZ2xpbXBzZSYmKExlLnctPU1hdGgucm91bmQoMioocChlLmdsaW1wc2UsZCl8fDApKSksc2UuY3NzKHt3aWR0aDpMZS53LG1hcmdpbkxlZnQ6KExlLlctTGUudykvMn0pLGY9cChmLGkpLGY9Znx8ZyYmZC9nLGYmJihkPU1hdGgucm91bmQoZCksZj1MZS5oPU1hdGgucm91bmQoaChmLHAoTGUubWluaGVpZ2h0LGkpLHAoTGUubWF4aGVpZ2h0LGkpKSkscmUuc3RvcCgpLmFuaW1hdGUoe3dpZHRoOmQsaGVpZ2h0OmZ9LGIsZnVuY3Rpb24oKXtxZS5yZW1vdmVDbGFzcyh1Yil9KSxjZCgpLE5kJiYoeWUuc3RvcCgpLmFuaW1hdGUoe3dpZHRoOkxlLm53fSxiKSxSYyh7Z3Vlc3NJbmRleDpKZSx0aW1lOmIsa2VlcDohMH0pLE9kJiZ3Yy5uYXYmJk9jKGIpKSwkZD1jfHwhMCx4ZCgpKSksU2U9cmUub2Zmc2V0KCkubGVmdCx0aGlzfSxpZS5zZXRPcHRpb25zPWZ1bmN0aW9uKGEpe3JldHVybiBkLmV4dGVuZChlLGEpLHZkKCksdGhpc30saWUuc2h1ZmZsZT1mdW5jdGlvbigpe3JldHVybiB5ZCYmTyh5ZCkmJnZkKCksdGhpc30saWUuZGVzdHJveT1mdW5jdGlvbigpe3JldHVybiBpZS5jYW5jZWxGdWxsU2NyZWVuKCksaWUuc3RvcEF1dG9wbGF5KCkseWQ9aWUuZGF0YT1udWxsLGooKSxFZD1bXSxiZChYYyksdmQub2s9ITEsdGhpc30saWUucGxheVZpZGVvPWZ1bmN0aW9uKCl7dmFyIGE9RGQsYj1hLnZpZGVvLGM9SmU7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGImJmEudmlkZW9SZWFkeSYmKFJkJiZpZS5mdWxsU2NyZWVuJiZpZS5jYW5jZWxGdWxsU2NyZWVuKCksRyhmdW5jdGlvbigpe3JldHVybiF2Yy5pcygpfHxjIT09SmV9LGZ1bmN0aW9uKCl7Yz09PUplJiYoYS4kdmlkZW89YS4kdmlkZW98fGQoZC5Gb3RvcmFtYS5qc3QudmlkZW8oYikpLGEuJHZpZGVvLmFwcGVuZFRvKGFbWGNdKSxxZS5hZGRDbGFzcyhuYiksQ2Q9YS4kdmlkZW8sbygpLHdlLmJsdXIoKSxEZS5ibHVyKCksZmQoXCJsb2FkdmlkZW9cIikpfSkpLHRoaXN9LGllLnN0b3BWaWRlbz1mdW5jdGlvbigpe3JldHVybiBtZChDZCwhMCwhMCksdGhpc30scmUub24oXCJtb3VzZW1vdmVcIixvZCksTWU9ZGIoc2Use29uU3RhcnQ6Z2Qsb25Nb3ZlOmZ1bmN0aW9uKGEsYil7bGQocmUsYi5lZGdlKX0sb25Ub3VjaEVuZDpoZCxvbkVuZDpmdW5jdGlvbihhKXtsZChyZSk7dmFyIGI9KE5jJiYhZ2V8fGEudG91Y2gpJiZlLmFycm93cyYmXCJhbHdheXNcIiE9PWUuYXJyb3dzO2lmKGEubW92ZWR8fGImJmEucG9zIT09YS5uZXdQb3MmJiFhLmNvbnRyb2wpe3ZhciBjPXMoYS5uZXdQb3MsTGUudyxlLm1hcmdpbixGZCk7aWUuc2hvdyh7aW5kZXg6Yyx0aW1lOlNkP1ZkOmEudGltZSxvdmVyUG9zOmEub3ZlclBvcyx1c2VyOiEwfSl9ZWxzZSBhLmFib3J0ZWR8fGEuY29udHJvbHx8cWQoYS5zdGFydEV2ZW50LGIpfSx0aW1lTG93OjEsdGltZUhpZ2g6MSxmcmljdGlvbjoyLHNlbGVjdDpcIi5cIitYYitcIiwgLlwiK1hiK1wiICpcIiwkd3JhcDpyZX0pLE9lPWRiKHplLHtvblN0YXJ0OmdkLG9uTW92ZTpmdW5jdGlvbihhLGIpe2xkKHllLGIuZWRnZSl9LG9uVG91Y2hFbmQ6aGQsb25FbmQ6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe1JjLmw9YS5uZXdQb3MsaWQoKSxqZCgpLHVjKGEubmV3UG9zLCEwKX1pZihhLm1vdmVkKWEucG9zIT09YS5uZXdQb3M/KGNlPSEwLF8oemUse3RpbWU6YS50aW1lLHBvczphLm5ld1BvcyxvdmVyUG9zOmEub3ZlclBvcyxvbkVuZDpifSksdWMoYS5uZXdQb3MpLFhkJiZsZCh5ZSxLKGEubmV3UG9zLE9lLm1pbixPZS5tYXgpKSk6YigpO2Vsc2V7dmFyIGM9YS4kdGFyZ2V0LmNsb3Nlc3QoXCIuXCIrTWIsemUpWzBdO2MmJnNkLmNhbGwoYyxhLnN0YXJ0RXZlbnQpfX0sdGltZUxvdzouNSx0aW1lSGlnaDoyLGZyaWN0aW9uOjUsJHdyYXA6eWV9KSxOZT1lYihyZSx7c2hpZnQ6ITAsb25FbmQ6ZnVuY3Rpb24oYSxiKXtnZCgpLGhkKCksaWUuc2hvdyh7aW5kZXg6YixzbG93OmEuYWx0S2V5fSl9fSksUGU9ZWIoeWUse29uRW5kOmZ1bmN0aW9uKGEsYil7Z2QoKSxoZCgpO3ZhciBjPXYoemUpKy4yNSpiO3plLmNzcyhrKGgoYyxPZS5taW4sT2UubWF4KSkpLFhkJiZsZCh5ZSxLKGMsT2UubWluLE9lLm1heCkpLFBlLnByZXZlbnQ9e1wiPFwiOmM+PU9lLm1heCxcIj5cIjpjPD1PZS5taW59LGNsZWFyVGltZW91dChQZS50KSxQZS50PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtSYy5sPWMsdWMoYywhMCl9LFBjKSx1YyhjKX19KSxxZS5ob3ZlcihmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtmZXx8bmQoIShnZT0hMCkpfSwwKX0sZnVuY3Rpb24oKXtnZSYmbmQoIShnZT0hMSkpfSksTSh3ZSxmdW5jdGlvbihhKXtZKGEpLHRkLmNhbGwodGhpcyxhKX0se29uU3RhcnQ6ZnVuY3Rpb24oKXtnZCgpLE1lLmNvbnRyb2w9ITB9LG9uVG91Y2hFbmQ6aGR9KSx3ZS5lYWNoKGZ1bmN0aW9uKCl7Vyh0aGlzLGZ1bmN0aW9uKGEpe3RkLmNhbGwodGhpcyxhKX0pLHVkKHRoaXMpfSksVyhFZSxpZS50b2dnbGVGdWxsU2NyZWVuKSx1ZChFZSksZC5lYWNoKFwibG9hZCBwdXNoIHBvcCBzaGlmdCB1bnNoaWZ0IHJldmVyc2Ugc29ydCBzcGxpY2VcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXtpZVtiXT1mdW5jdGlvbigpe3JldHVybiB5ZD15ZHx8W10sXCJsb2FkXCIhPT1iP0FycmF5LnByb3RvdHlwZVtiXS5hcHBseSh5ZCxhcmd1bWVudHMpOmFyZ3VtZW50c1swXSYmXCJvYmplY3RcIj09dHlwZW9mIGFyZ3VtZW50c1swXSYmYXJndW1lbnRzWzBdLmxlbmd0aCYmKHlkPVAoYXJndW1lbnRzWzBdKSksdmQoKSxpZX19KSx2ZCgpfSxkLmZuLmZvdG9yYW1hPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz10aGlzLGU9ZCh0aGlzKSxmPWUuZGF0YSgpLGc9Zi5mb3RvcmFtYTtnP2cuc2V0T3B0aW9ucyhiLCEwKTpHKGZ1bmN0aW9uKCl7cmV0dXJuIUUoYyl9LGZ1bmN0aW9uKCl7Zi51cnRleHQ9ZS5odG1sKCksbmV3IGQuRm90b3JhbWEoZSxkLmV4dGVuZCh7fSxjZCxhLmZvdG9yYW1hRGVmYXVsdHMsYixmKSl9KX0pfSxkLkZvdG9yYW1hLmluc3RhbmNlcz1bXSxkLkZvdG9yYW1hLmNhY2hlPXt9LGQuRm90b3JhbWEubWVhc3VyZXM9e30sZD1kfHx7fSxkLkZvdG9yYW1hPWQuRm90b3JhbWF8fHt9LGQuRm90b3JhbWEuanN0PWQuRm90b3JhbWEuanN0fHx7fSxkLkZvdG9yYW1hLmpzdC5zdHlsZT1mdW5jdGlvbihhKXt7dmFyIGIsYz1cIlwiO3RjLmVzY2FwZX1yZXR1cm4gYys9XCIuZm90b3JhbWFcIisobnVsbD09KGI9YS5zKT9cIlwiOmIpK1wiIC5mb3RvcmFtYV9fbmF2LS10aHVtYnMgLmZvdG9yYW1hX19uYXZfX2ZyYW1le1xcbnBhZGRpbmc6XCIrKG51bGw9PShiPWEubSk/XCJcIjpiKStcInB4O1xcbmhlaWdodDpcIisobnVsbD09KGI9YS5oKT9cIlwiOmIpK1wicHh9XFxuLmZvdG9yYW1hXCIrKG51bGw9PShiPWEucyk/XCJcIjpiKStcIiAuZm90b3JhbWFfX3RodW1iLWJvcmRlcntcXG5oZWlnaHQ6XCIrKG51bGw9PShiPWEuaC1hLmIqKGEucT8wOjIpKT9cIlwiOmIpK1wicHg7XFxuYm9yZGVyLXdpZHRoOlwiKyhudWxsPT0oYj1hLmIpP1wiXCI6YikrXCJweDtcXG5tYXJnaW4tdG9wOlwiKyhudWxsPT0oYj1hLm0pP1wiXCI6YikrXCJweH1cIn0sZC5Gb3RvcmFtYS5qc3QudmlkZW89ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2MrPWQuY2FsbChhcmd1bWVudHMsXCJcIil9dmFyIGM9XCJcIixkPSh0Yy5lc2NhcGUsQXJyYXkucHJvdG90eXBlLmpvaW4pO3JldHVybiBjKz0nPGRpdiBjbGFzcz1cImZvdG9yYW1hX192aWRlb1wiPjxpZnJhbWUgc3JjPVwiJyxiKChcInlvdXR1YmVcIj09YS50eXBlP2EucCtcInlvdXR1YmUuY29tL2VtYmVkL1wiK2EuaWQrXCI/YXV0b3BsYXk9MVwiOlwidmltZW9cIj09YS50eXBlP2EucCtcInBsYXllci52aW1lby5jb20vdmlkZW8vXCIrYS5pZCtcIj9hdXRvcGxheT0xJmJhZGdlPTBcIjphLmlkKSsoYS5zJiZcImN1c3RvbVwiIT1hLnR5cGU/XCImXCIrYS5zOlwiXCIpKSxjKz0nXCIgZnJhbWVib3JkZXI9XCIwXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPjwvZGl2Plxcbid9LGQoZnVuY3Rpb24oKXtkKFwiLlwiK2liKyc6bm90KFtkYXRhLWF1dG89XCJmYWxzZVwiXSknKS5mb3RvcmFtYSgpfSl9KHdpbmRvdyxkb2N1bWVudCxsb2NhdGlvbixcInVuZGVmaW5lZFwiIT10eXBlb2YgalF1ZXJ5JiZqUXVlcnkpOyIsIjskKCBmdW5jdGlvbigpXHJcbntcclxuICAgIHZhciB0YXJnZXRzID0gJCggJ1tyZWx+PXRvb2x0aXBdJyApLFxyXG4gICAgICAgIHRhcmdldCAgPSBmYWxzZSxcclxuICAgICAgICB0b29sdGlwID0gZmFsc2UsXHJcbiAgICAgICAgdGl0bGUgICA9IGZhbHNlO1xyXG5cclxuICAgIHRhcmdldHMuYmluZCggJ21vdXNlZW50ZXInLCBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdGFyZ2V0ICA9ICQoIHRoaXMgKTtcclxuICAgICAgICB0aXAgICAgID0gdGFyZ2V0LmF0dHIoICd0aXRsZScgKTtcclxuICAgICAgICB0b29sdGlwID0gJCggJzxkaXYgaWQ9XCJ0b29sdGlwXCI+PC9kaXY+JyApO1xyXG5cclxuICAgICAgICBpZiggIXRpcCB8fCB0aXAgPT0gJycgKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIHRhcmdldC5yZW1vdmVBdHRyKCAndGl0bGUnICk7XHJcbiAgICAgICAgdG9vbHRpcC5jc3MoICdvcGFjaXR5JywgMCApXHJcbiAgICAgICAgICAgIC5odG1sKCB0aXAgKVxyXG4gICAgICAgICAgICAuYXBwZW5kVG8oICdib2R5JyApO1xyXG5cclxuICAgICAgICB2YXIgaW5pdF90b29sdGlwID0gZnVuY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoICQoIHdpbmRvdyApLndpZHRoKCkgPCB0b29sdGlwLm91dGVyV2lkdGgoKSAqIDEuNSApXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLmNzcyggJ21heC13aWR0aCcsICQoIHdpbmRvdyApLndpZHRoKCkgLyAyICk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAuY3NzKCAnbWF4LXdpZHRoJywgMzQwICk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9zX2xlZnQgPSB0YXJnZXQub2Zmc2V0KCkubGVmdCArICggdGFyZ2V0Lm91dGVyV2lkdGgoKSAvIDIgKSAtICggdG9vbHRpcC5vdXRlcldpZHRoKCkgLyAyICksXHJcbiAgICAgICAgICAgICAgICBwb3NfdG9wICA9IHRhcmdldC5vZmZzZXQoKS50b3AgLSB0b29sdGlwLm91dGVySGVpZ2h0KCkgLSAyMDtcclxuXHJcbiAgICAgICAgICAgIGlmKCBwb3NfbGVmdCA8IDAgKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwb3NfbGVmdCA9IHRhcmdldC5vZmZzZXQoKS5sZWZ0ICsgdGFyZ2V0Lm91dGVyV2lkdGgoKSAvIDIgLSAyMDtcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAuYWRkQ2xhc3MoICdsZWZ0JyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAucmVtb3ZlQ2xhc3MoICdsZWZ0JyApO1xyXG5cclxuICAgICAgICAgICAgaWYoIHBvc19sZWZ0ICsgdG9vbHRpcC5vdXRlcldpZHRoKCkgPiAkKCB3aW5kb3cgKS53aWR0aCgpIClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcG9zX2xlZnQgPSB0YXJnZXQub2Zmc2V0KCkubGVmdCAtIHRvb2x0aXAub3V0ZXJXaWR0aCgpICsgdGFyZ2V0Lm91dGVyV2lkdGgoKSAvIDIgKyAyMDtcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAuYWRkQ2xhc3MoICdyaWdodCcgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLnJlbW92ZUNsYXNzKCAncmlnaHQnICk7XHJcblxyXG4gICAgICAgICAgICBpZiggcG9zX3RvcCA8IDAgKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9zX3RvcCAgPSB0YXJnZXQub2Zmc2V0KCkudG9wICsgdGFyZ2V0Lm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLmFkZENsYXNzKCAndG9wJyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAucmVtb3ZlQ2xhc3MoICd0b3AnICk7XHJcblxyXG4gICAgICAgICAgICB0b29sdGlwLmNzcyggeyBsZWZ0OiBwb3NfbGVmdCwgdG9wOiBwb3NfdG9wIH0gKVxyXG4gICAgICAgICAgICAgICAgLmFuaW1hdGUoIHsgdG9wOiAnKz0xMCcsIG9wYWNpdHk6IDEgfSwgNTAgKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpbml0X3Rvb2x0aXAoKTtcclxuICAgICAgICAkKCB3aW5kb3cgKS5yZXNpemUoIGluaXRfdG9vbHRpcCApO1xyXG5cclxuICAgICAgICB2YXIgcmVtb3ZlX3Rvb2x0aXAgPSBmdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0b29sdGlwLmFuaW1hdGUoIHsgdG9wOiAnLT0xMCcsIG9wYWNpdHk6IDAgfSwgNTAsIGZ1bmN0aW9uKClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJCggdGhpcyApLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRhcmdldC5hdHRyKCAndGl0bGUnLCB0aXAgKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0YXJnZXQuYmluZCggJ21vdXNlbGVhdmUnLCByZW1vdmVfdG9vbHRpcCApO1xyXG4gICAgICAgIHRvb2x0aXAuYmluZCggJ2NsaWNrJywgcmVtb3ZlX3Rvb2x0aXAgKTtcclxuICAgIH0pO1xyXG59KTsiLCJ2YXIgJGJvZHksXHJcblx0d2luZG93SGVpZ2h0LFxyXG5cdHdpbmRvd1dpZHRoLFxyXG5cdG1lZGlhUG9pbnQxID0gMTAyNCxcclxuXHRtZWRpYVBvaW50MiA9IDc2OCxcclxuXHRtZWRpYVBvaW50MyA9IDQ4MCxcclxuXHRtZWRpYVBvaW50NCA9IDMyMDtcclxuXHJcblxyXG4vL1xyXG4vLyB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FmZS1kZXNjcmlwdGlvbl9fdGV4dCcpO1xyXG4vLyBTaW1wbGVTY3JvbGxiYXIuaW5pdEVsKGVsKTtcclxuXHJcblxyXG4vL9C30LDQs9GA0YPQt9C60LAg0YHQutGA0LjQv9GC0LBcclxuLy8gdmFyIHNjcmlwdE1hcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4vLyBzY3JpcHRNYXAuc3JjID0gXCJodHRwczovL2FwaS1tYXBzLnlhbmRleC5ydS8yLjAvP2xvYWQ9cGFja2FnZS5zdGFuZGFyZCxwYWNrYWdlLmdlb09iamVjdHMmbGFuZz1ydS1SVVwiO1xyXG4vLyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0TWFwKTtcclxuXHJcbi8vIHZhciBzY3JpcHRUb29sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbi8vIHNjcmlwdFRvb2wuc3JjID0gXCJodHRwczovL2FiZXN0dXpoZXYuZ2l0aHViLmlvL2NhZmUtYW5kZXJzb24vYm93ZXJfY29tcG9uZW50cy90b29sdGlwc3Rlci9kaXN0L2pzL3Rvb2x0aXBzdGVyLmJ1bmRsZS5qc1wiO1xyXG4vLyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0VG9vbCk7XHJcblxyXG4vKm1haW4uanMqL1xyXG5cclxuXHJcbnZhciB3aW5kb3dXaWR0aCA9ICh3aW5kb3cuaW5uZXJXaWR0aCApOyAvLyDQstGB0Y8g0YjQuNGA0LjQvdCwINC+0LrQvdCwXHJcbnZhciBkb2N1bWVudFdpZHRoID0gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCApOyAvLyDRiNC40YDQuNC90LAg0LzQuNC90YPRgSDQv9GA0L7QutGA0YPRgtC60LBcclxuLy8gY29uc29sZS5sb2coJ9Co0LjRgNC40L3QsCB3aW5kb3c6ICcgKyB3aW5kb3dXaWR0aCk7XHJcbi8vIGNvbnNvbGUubG9nKCfQqNC40YDQuNC90LAgd3JhcHBlcjogJyArIGRvY3VtZW50V2lkdGgpO1xyXG52YXIgZG9jdW1lbnRIZWlnaHQgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCApO1xyXG4vLyBjb25zb2xlLmxvZygn0LLRi9GB0L7RgtCwICcgKyBkb2N1bWVudEhlaWdodCk7XHJcblxyXG5cclxuJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKXtcclxuXHJcblxyXG5cclxuICAgIC8q0YHQutGA0L7Qu9C7INC/0YDQuCDQstGL0LHQvtGA0LUg0LTQvtGB0YLQsNCy0LrQuCovXHJcbiAgICB2YXIgb3JkZXJEZWxpdmVyeU1hcCA9ICQoJy5vcmRlci1kZWxpdmVyeV9fbWFwJykuaGVpZ2h0KCksXHJcbiAgICAgICAgb3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0ID0gJCgnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2xpc3QnKSxcclxuICAgICAgICBvcmRlckRlbGl2ZXJ5QWRkcmVzc0xpc3RIZWlnaHQgPSBvcmRlckRlbGl2ZXJ5QWRkcmVzc0xpc3QuaGVpZ2h0KCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnb3JkZXJEZWxpdmVyeU1hcDogJyArIG9yZGVyRGVsaXZlcnlNYXApO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ29yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdDogJyArIG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdEhlaWdodCk7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUhlaWdodEFkZHJlc3NMaXN0ICgpe1xyXG4gICAgICAgIG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdC5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtKXtcclxuICAgICAgICAgICAgdmFyIGVsZW1IZWlnaHQgPSAgJChlbGVtKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2VsZW1IZWlnaHQ6ICcgKyBlbGVtSGVpZ2h0KTtcclxuICAgICAgICAgICAgaWYoZWxlbUhlaWdodCA+IDMyMCl7XHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgU2ltcGxlQmFyKG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdFswXSk7XHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgU2ltcGxlQmFyKG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdFsxXSk7XHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgU2ltcGxlQmFyKG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdFsyXSk7XHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgU2ltcGxlQmFyKG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdFszXSk7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW0pLmFkZENsYXNzKCdzY3JvbGwtd3JhcCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VIZWlnaHRBZGRyZXNzTGlzdCgpO1xyXG5cclxuICAgIC8v0YXQsNC6INC00LvRjyDQsdGL0YHRgtGA0L7Qs9C+INC+0LHRgNC10LfQsNC90LjRjyDQstGB0LXQs9C+INGB0L/QuNGB0LrQsCDQsiDQvNC+0LTQsNC70YzQvdC+0Lwg0L7QutC90LUg0LfQsNC60LDQt9CwINGC0L7RgNGC0LBcclxuXHJcbiAgICBmdW5jdGlvbiBhZGRDbGFzc0Nha2VzQWRkcmVzc0xpc3QoKXtcclxuICAgICAgICAkKCcucG9wdXAtY2FrZS1vcmRlciAub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCcpLmFkZENsYXNzKCdzY3JvbGwtd3JhcCcpO1xyXG4gICAgfVxyXG4gICAgYWRkQ2xhc3NDYWtlc0FkZHJlc3NMaXN0KCk7XHJcblxyXG4gICAgLy8gJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jYWtlLWNhcmRfX2hvdmVyJywgZnVuY3Rpb24oKXtcclxuICAgIC8vICAgICAkKCcucG9wdXAtY2FrZS1vcmRlciAub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCcpLmFkZENsYXNzKCdzY3JvbGwtd3JhcCcpO1xyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKCdzY3JvbGwtd3JhcCBhZGQnKTtcclxuICAgIC8vIH0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm9yZGVyLXRhYnNfX2l0ZW0nLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNoYW5nZUhlaWdodEFkZHJlc3NMaXN0KCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIHZhciBwZXJtaXRQYXRoID0gW1xyXG4gICAgJy9mYWN0b3J5LWhhcHBpbmVzcy5odG1sJyxcclxuICAgICcvY2FmZS1hbmRlcnNvbi9mYWN0b3J5LWhhcHBpbmVzcy5odG1sJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxFbGVtIChlbGVtKXtcclxuICAgICAgICBpZigkKHdpbmRvdykud2lkdGgoKSA8PSA4MDApIHtcclxuICAgICAgICAgICAgbmV3IFNpbXBsZUJhcigkKGVsZW0pWzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZihwZXJtaXRQYXRoLmluZGV4T2YobG9jYXRpb24ucGF0aG5hbWUpID4gLTEpe1xyXG4gICAgICAgIGdldFNjcm9sbEVsZW0oJy5mYWN0b3J5LWxheW91dCcpO1xyXG4gICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBnZXRTY3JvbGxFbGVtKCcuZmFjdG9yeS1sYXlvdXQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciAkZGF0ZXBpY2tlciA9ICQoJy5kYXRlcGlja2VyLWhlcmUnKTtcclxuICAgICRkYXRlcGlja2VyLmRhdGVwaWNrZXIoe1xyXG4gICAgICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgYXV0b0Nsb3NlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgICRkYXRlcGlja2VyLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5kYXRlcGlja2VyLWxheW91dCcpLmFkZENsYXNzKCdhY3RpdmUtZGF0ZXBpY2tlcicpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgICQoJyNkYXRlcGlja2VyQ3VzdG9tJykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICBhdXRvQ2xvc2U6IHRydWVcclxuICAgIH0pO1xyXG4gICAgJCgnI2RhdGVwaWNrZXJDdXN0b20nKS5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZGF0ZXBpY2tlci1sYXlvdXQnKS5hZGRDbGFzcygnYWN0aXZlLWRhdGVwaWNrZXInKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB2YXIgZGlzYWJsZWRQYXJ0eURheXMgPSBbMCwgNl07XHJcbiAgICAkKCcjcGFydHktZGF0ZXBpY2tlcicpLmRhdGVwaWNrZXIoe1xyXG4gICAgICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgaW5saW5lOiB0cnVlLFxyXG4gICAgICAgIG9uUmVuZGVyQ2VsbDogZnVuY3Rpb24gKGRhdGUsIGNlbGxUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmIChjZWxsVHlwZSA9PSAnZGF5Jykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCA9IGRpc2FibGVkUGFydHlEYXlzLmluZGV4T2YoZGF5KSAhPSAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9C60LDQu9C10L3QtNCw0YDRjCDQsiDQvNC10YDQvtC/0YDQuNGP0YLQuNGP0YVcclxuICAgIHZhciBldmVudERhdGVzID0gWzEsIDEwLCAxMiwgMjJdO1xyXG4gICAgJCgnI2V2ZW50LWRhdGVwaWNrZXInKS5kYXRlcGlja2VyKHtcclxuICAgICAgICBpbmxpbmU6IHRydWUsXHJcbiAgICAgICAgb25SZW5kZXJDZWxsOiBmdW5jdGlvbiAoZGF0ZSwgY2VsbFR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIGlmIChjZWxsVHlwZSA9PSAnZGF5JyAmJiBldmVudERhdGVzLmluZGV4T2YoY3VycmVudERhdGUpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWw6IGN1cnJlbnREYXRlICsgJzxzcGFuIGNsYXNzPVwiZHAtbm90ZVwiPjwvc3Bhbj4nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJy5qcy1ldmVudC1vcmRlci1kYXRlcGlja2VyJykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG59KTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgkKSB7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWN1c3RvbVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBpbml0Q3VzdG9tU2VsZWN0KGVsZW0pe1xyXG4gICAgICAgICQoZWxlbSkuU3Vtb1NlbGVjdCgpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZENsb25lUGFuZWwoYnRuLCBsaXN0KXtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBidG4gLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgLnBhcmVudHMoJy5jLWZvcm1fX2l0ZW0nKVxyXG4gICAgICAgICAgICAgICAgLnNpYmxpbmdzKCcucGFuZWwtd29yay10aW1lX19jb3B5JylcclxuICAgICAgICAgICAgICAgIC5jbG9uZSgpLmFwcGVuZFRvKGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgLy8gdmFyIHNlbGVjdCA9ICQodGhpcylcclxuXHJcbiAgICAgICAgICAgIGluaXRDdXN0b21TZWxlY3QoJy5wYW5lbC13b3JrLXRpbWVfX2xpc3Qgc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICQoJy5qcy1pbnB1dC0tdGVsJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICAgICAgICAgJCgnLmpzLWlucHV0LS1kYXRlJykubWFzaygnMDAuMDAuMDAwMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICAgICAgICAgJCgnLmpzLWlucHV0LS1tb2RlJykubWFzaygn0YEgMDA6MDAg0LTQviAwMDowMCcsIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySWZOb3RNYXRjaDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcItGBIF9fOl9fINC00L4gX186X19cIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGFkZENsb25lUGFuZWwoJyNqcy13b3JrLXRpbWUtY29mZmVlX19hZGQnLCAnI2pzLXBhbmVsLXdvcmstdGltZV9fY29mZmVlJyk7XHJcbiAgICBhZGRDbG9uZVBhbmVsKCcjanMtd29yay10aW1lLWNhZmVfX2FkZCcsICcjanMtcGFuZWwtd29yay10aW1lX19jYWZlJyk7XHJcbiAgICBhZGRDbG9uZVBhbmVsKCcjanMtd29yay10aW1lLW1wX19hZGQnLCAnI2pzLXBhbmVsLXdvcmstdGltZV9fbXAnKTtcclxuICAgIGFkZENsb25lUGFuZWwoJyNqcy1kaXNoLXZhcmlhdGlvbl9fYWRkJywgJyNqcy1kaXNoLXZhcmlhdGlvbl9fbGlzdCcpO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYy1mb3JtX19kZWwnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkZWxlbV9pdGVtID0gJCh0aGlzKS5wYXJlbnRzKCcucGFuZWwtd29yay10aW1lX19jb3B5Jyk7XHJcbiAgICAgICAgJGVsZW1faXRlbS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL9Cw0LTQvNC40L3QuNGB0YLRgNCw0YLQuNCy0L3QsNGPINC/0LDQvdC10LvRjFxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wYW5lbC1jYWZlX190aXRsZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdwYW5lbC1jYWZlLXNob3cnKTtcclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcucGFuZWwtY2FmZV9fYm9keScpLnNsaWRlVG9nZ2xlKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy/Rg9C/0YDQsNCy0LvQtdC90LjQtSDRgNCw0YHRgdGL0LvQutC+0LlcclxuICAgICQoJy5kaXNwYXRjaC1saXN0X190aXRsZSBpbnB1dCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcclxuICAgICAgICBpZihzZWxmLmlzKCBcIjpjaGVja2VkXCIgKSl7XHJcbiAgICAgICAgICAgIHNlbGYucGFyZW50cygnLmRpc3BhdGNoLWxpc3RfX3RpdGxlJylcclxuICAgICAgICAgICAgICAgIC5zaWJsaW5ncygnLmRpc3BhdGNoLWxpc3QnKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpXHJcbiAgICAgICAgICAgICAgICAucHJvcCggXCJjaGVja2VkXCIsIHRydWUgKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYucGFyZW50cygnLmRpc3BhdGNoLWxpc3RfX3RpdGxlJylcclxuICAgICAgICAgICAgICAgIC5zaWJsaW5ncygnLmRpc3BhdGNoLWxpc3QnKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpXHJcbiAgICAgICAgICAgICAgICAucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGxlbkV2ZW50ID0gJCgnLmRpc3BhdGNoLWxpc3RfX2l0ZW0gaW5wdXRbbmFtZSo9XCJkaXNwYXRjaC1ldmVudFwiXScpLmxlbmd0aDtcclxuICAgIC8vIGNvbnNvbGUubG9nKCfQutC+0LvQtNC40YfQtdGB0YLQstC+ICcgKyBsZW5FdmVudCk7XHJcblxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VEaXNwYXRjaENoZWNrYm94KGVsZW0pe1xyXG4gICAgICAgIHZhciBjb3VudDtcclxuXHJcbiAgICAgICAgJCgnJyArIGVsZW0gKyAnIGlucHV0JykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgICAgIGNvdW50ID0gaW5kZXgrMTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygn0LrQvtC70LjRh9C10YHRgtCy0L4gZWFjaCAnICsgZWxlbSArICc6ICcgKyBjb3VudCk7XHJcblxyXG4gICAgICAgICQoJycgKyBlbGVtICsgJyBpbnB1dCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIGlmKCFzZWxmLmlzKCBcIjpjaGVja2VkXCIgKSl7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnBhcmVudHMoJy5kaXNwYXRjaC1saXN0JylcclxuICAgICAgICAgICAgICAgICAgICAuc2libGluZ3MoJy5kaXNwYXRjaC1saXN0X190aXRsZScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZigkKCcnICsgZWxlbSArICcgaW5wdXRbdHlwZT1jaGVja2JveF06Y2hlY2tlZCcpLmxlbmd0aCA9PSBjb3VudCl7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnBhcmVudHMoJy5kaXNwYXRjaC1saXN0JylcclxuICAgICAgICAgICAgICAgICAgICAuc2libGluZ3MoJy5kaXNwYXRjaC1saXN0X190aXRsZScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnByb3AoIFwiY2hlY2tlZFwiLCB0cnVlICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VEaXNwYXRjaENoZWNrYm94KCcuanMtZGlzcGF0Y2gtbmV3cycpO1xyXG4gICAgY2hhbmdlRGlzcGF0Y2hDaGVja2JveCgnLmpzLWRpc3BhdGNoLWV2ZW50Jyk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLy/RhNGA0LDQvdGI0LjQt9CwXHJcbiAgICAkKCcuZnJhbmNoaXNlLXRpdGxlLWxheW91dCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xyXG4gICAgICAgIHNlbGYuc2libGluZ3MoJy5mcmFuY2hpc2UtY29udGVudCcpLnNsaWRlVG9nZ2xlKDEwMCk7XHJcbiAgICAgICAgc2VsZi5maW5kKCcuZnJhbmNoaXNlLXByaW50JykudG9nZ2xlKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gcHJpbnREYXRhKClcclxuICAgIHtcclxuICAgICAgICB2YXIgZGl2VG9QcmludCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnJhbmNoaXNlUHJpbnRcIik7XHJcbiAgICAgICAgdmFyIG5ld1dpbj0gd2luZG93Lm9wZW4oXCJcIik7XHJcbiAgICAgICAgbmV3V2luLmRvY3VtZW50LndyaXRlKGRpdlRvUHJpbnQub3V0ZXJIVE1MKTtcclxuICAgICAgICBuZXdXaW4ucHJpbnQoKTtcclxuICAgICAgICBuZXdXaW4uY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAkKCcuZnJhbmNoaXNlLXByaW50Jykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIHByaW50RGF0YSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYoJCgnaW5wdXQnKS5oYXNDbGFzcygnZGF0ZXBpY2tlci1jdXN0b20nKSB8fCAkKCdkaXYnKS5oYXNDbGFzcygnZGF0ZXBpY2tlci1jdXN0b20nKSl7XHJcbiAgICAgICAgJCgnLmRhdGVwaWNrZXItY3VzdG9tJykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGF1dG9DbG9zZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8q0YTRg9C90LrRhtC40Y8g0YTQvtGA0LzQsNGC0LjRgNC+0LLQsNC90LjRjyDQtNCw0YLRiyovXHJcbiAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcclxuICAgICAgICB2YXIgZGQgPSBkYXRlLmdldERhdGUoKTtcclxuICAgICAgICBpZiAoZGQgPCAxMCkgZGQgPSAnMCcgKyBkZDtcclxuXHJcbiAgICAgICAgdmFyIG1tID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICBpZiAobW0gPCAxMCkgbW0gPSAnMCcgKyBtbTtcclxuXHJcbiAgICAgICAgdmFyIHl5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIGlmICh5eSA8IDEwKSB5eSA9ICcwJyArIHl5O1xyXG5cclxuICAgICAgICByZXR1cm4gZGQgKyAnLicgKyBtbSArICcuJyArIHl5O1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCQoJ2lucHV0JykuaGFzQ2xhc3MoJ2RhdGVwaWNrZXItZGVsaXZlcnktdjInKSB8fCAkKCdkaXYnKS5oYXNDbGFzcygnZGF0ZXBpY2tlci1kZWxpdmVyeS12MicpKXtcclxuXHJcblxyXG4gICAgICAgIHZhciBkYXRlcGlja2VyRGVsaXZlcnkgPSBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBkYXRlcGlja2VyRGVsaXZlcnlWMj0gJCgnLmRhdGVwaWNrZXItZGVsaXZlcnktdjInKTtcclxuICAgICAgICAvLyBkYXRlcGlja2VyRGVsaXZlcnlWMi52YWwoZm9ybWF0RGF0ZShkYXRlcGlja2VyRGVsaXZlcnkpKTtcclxuICAgICAgICBkYXRlcGlja2VyRGVsaXZlcnlWMi5kYXRlcGlja2VyKHtcclxuICAgICAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgYXV0b0Nsb3NlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBcclxuXHJcbiAgICAkKCdkb2N1bWVudCcpLm9uKCdjbGljaycsICcub3JkZXJfX2J0bi5kaXNhYmxlZCcsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5leGN1cnNpb24tcGF5X19pdGVtIGxhYmVsJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5leGN1cnNpb24tcGF5X19pdGVtJykuc2libGluZ3MoKS5maW5kKCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgLy/QvNC+0LTQsNC70YzQvdC+0LUg0L7QutC90L4g0LIg0Y3QutGB0LrRg9GA0YHQuNGP0YVcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnI2V4Y3Vyc2lvbi1wYXktc2NvcmUnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCQodGhpcykucHJvcCggXCJjaGVja2VkXCIgKSl7XHJcbiAgICAgICAgICAgICQoJy5leGN1cnNpb24tcGF5LXNjb3JlJykuc2xpZGVEb3duKDMwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjZXhjdXJzaW9uLXBheS1jYXJkJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBpZigkKHRoaXMpLnByb3AoIFwiY2hlY2tlZFwiICkpe1xyXG4gICAgICAgICAgICAkKCcuZXhjdXJzaW9uLXBheS1zY29yZScpLnNsaWRlVXAoMzAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLyrQuNC30LzQtdC90LXQvdC40LUg0L7Qv9C70LDRgtGLKi9cclxuICAgICQoJy5vcmRlci1wYXlfX2l0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBwYXlSYWRpbyA9ICQodGhpcykuY2hpbGRyZW4oJ2lucHV0Jyk7XHJcbiAgICAgICAgaWYocGF5UmFkaW8ucHJvcChcImNoZWNrZWRcIikpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcub3JkZXItcGF5X19pdGVtJykuZmluZCgnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5maWx0ZXItaG9sZF9fZHJvcGRvd24nLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZmlsdGVyLWhvbGRfX2l0ZW0nKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5maWx0ZXItaG9sZF9faXRlbScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuZmlsdGVyLWhvbGRfX3N1Ym1lbnUnKS5zbGlkZURvd24oNTAwKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgLy8gZG9jdW1lbnRIZWlnaHRcclxuICAgIGZ1bmN0aW9uIGNoYW5nZUhlaWdodEJhc2tldFBvcHVwICgpe1xyXG4gICAgICAgIHZhciBiYXNrZXRTY3JvbGwgPSAkKCcucG9wdXAtYmFza2V0X19zY3JvbGwnKSxcclxuICAgICAgICAgICAgaGVpZ2h0QmFza2V0ID0gYmFza2V0U2Nyb2xsLmhlaWdodCgpO1xyXG5cclxuICAgICAgICBpZiAoaGVpZ2h0QmFza2V0ID49IGRvY3VtZW50SGVpZ2h0IC0gMTAwKXtcclxuICAgICAgICAgICAgYmFza2V0U2Nyb2xsLmFkZENsYXNzKCdmaXhlZC1oZWlnaHQtYmFza2V0Jyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdpZiAnICsgaGVpZ2h0QmFza2V0KTtcclxuICAgICAgICAgICAgLyrQutCw0YHRgtC+0LzQvdGL0Lkg0YHQutGA0L7Qu9C7Ki9cclxuICAgICAgICAgICAgYmFza2V0U2Nyb2xsLmpTY3JvbGxQYW5lKCk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBiYXNrZXRTY3JvbGwucmVtb3ZlQ2xhc3MoJ2ZpeGVkLWhlaWdodC1iYXNrZXQnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2Vsc2UgJyArIGhlaWdodEJhc2tldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZUhlaWdodEJhc2tldFBvcHVwKCk7XHJcblxyXG4gICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe1xyXG4gICAgICAgIGNoYW5nZUhlaWdodEJhc2tldFBvcHVwKCk7XHJcbiAgICB9KTtcclxuICAgIC8q0LrQsNGA0YLQuNC90LrQuCDQvtC00L3QvtC5INGI0LjRgNC40L3RiyovXHJcblxyXG4gICAgJCgnLmMtY2FyZC1jYXRhbG9nX19pbWcnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtKXtcclxuICAgICAgICB2YXIgaW1nID0gJChlbGVtKS5jaGlsZHJlbignaW1nJyksXHJcbiAgICAgICAgICAgIGltZ1dpZHRoID0gaW1nLndpZHRoKCksXHJcbiAgICAgICAgICAgICR0aGlzID0gJChlbGVtKTtcclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2VsZW1lbnQgJyArIGluZGV4ICsgJzogJyArICd3aWR0aDogJyArIGltZ1dpZHRoKTtcclxuICAgICAgICBpZihpbWdXaWR0aCA8IDM5MCApIHtcclxuICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2JpZy1wcm9kdWN0LWltZycpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn0LXRgdGC0Ywg0LrQsNGA0YLQuNC90LrQsCDQvNC10L3RjNGI0LUgMzkwJyk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnYmlnLXByb2R1Y3QtaW1nJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfRgNCw0LHQvtGC0LDQtdGCINC90L4g0LrQsNGA0YLQuNC90LrQuCDQvdC10YInKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy/Qv9C+0LrQsNC30LDRgtGMINCy0YHQtSDQvNC10YDQvtC/0YDQuNGP0YLQuNGPINC/0L4g0LTQvdGP0Lwg0L3QsCDRgdGC0YDQsNC90LjRhtC1INCc0LXRgNC+0L/RgNC40Y/RgtC40Y9cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYy1jYXJkLWV2ZW50LXRpbWVsaXN0X19tb3JlJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgIHZhciB0ZXh0QnRuID0gJHRoaXMuaHRtbCgpO1xyXG4gICAgICAgIGlmKHRleHRCdG4gPT0gXCLQv9C+0LrQsNC30LDRgtGMINCy0YHQtVwiKXtcclxuICAgICAgICAgICAgJHRoaXMuaHRtbChcItGB0LrRgNGL0YLRjFwiKTtcclxuICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJy5jLWNhcmQtZXZlbnQtdGltZWxpc3QnKS5hZGRDbGFzcygnc2hvdy1pdGVtLWFsbCcpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkdGhpcy5odG1sKFwi0L/QvtC60LDQt9Cw0YLRjCDQstGB0LVcIik7XHJcbiAgICAgICAgICAgICR0aGlzLnNpYmxpbmdzKCcuYy1jYXJkLWV2ZW50LXRpbWVsaXN0JykucmVtb3ZlQ2xhc3MoJ3Nob3ctaXRlbS1hbGwnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlUGFydHlUaXRsZVBvcHVwICgpe1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuanMtcGFydHktb3JkZXInLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgbGV0dGVyID0gJCh0aGlzKS5kYXRhKCduYW1lJyksXHJcbiAgICAgICAgICAgICAgICB0aXRsZSA9ICQoJy5wb3B1cC1wYXJ0eS1vcmRlciAucG9wdXAtdGl0bGUnKS5maW5kKCdzcGFuJyk7XHJcblxyXG4gICAgICAgICAgICB0aXRsZS50ZXh0KCcnKTtcclxuICAgICAgICAgICAgdGl0bGUuYXBwZW5kKGxldHRlcik7XHJcbiAgICAgICAgICAgICQoJyN0aXRsZS1wYXJ0eS1vcmRlcicpLnZhbChsZXR0ZXIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gY2hhbmdlUGFydHlUaXRsZVBvcHVwKCk7XHJcblxyXG5cclxuXHJcbiAgICAvL9C/0L7Rj9Cy0LvQtdC90LjQtSDQvNC+0LHQuNC70YzQvdC+0LPQviDRh9C10LrQsCDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5iYXNrZXRfX2NoZWNrLW1vYmlsZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcuYmFza2V0X19hc2lkZScpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v0LjQt9C80LXQvdC10L3QuNC1INCyINC+0YTQvtGA0LzQu9C10L3QuNC4INC30LDQutCw0LfQsCDQvdCwINC00YDRg9Cz0L7Qs9C+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjb3JkZXItdXNlcl9vdGhlciwgLm9yZGVyLXVzZXJfb3RoZXInLCAgZnVuY3Rpb24oKXtcclxuICAgICAgICBpZigkKHRoaXMpLnByb3AoIFwiY2hlY2tlZFwiICkpe1xyXG4gICAgICAgICAgICAkKCcub3JkZXItdXNlcl9fbGlzdCcpLmNzcygnZGlzcGxheScsJ25vbmUnKTtcclxuICAgICAgICAgICAgJCgnLm9yZGVyLXVzZXJfX290aGVyLWZvcm0nKS5jc3MoJ2Rpc3BsYXknLCdmbGV4Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNvcmRlci11c2VyX2F1dGgsICNvcmRlci11c2VyX2F1dGgtMScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoJCh0aGlzKS5wcm9wKCBcImNoZWNrZWRcIiApKXtcclxuICAgICAgICAgICAgJCgnLm9yZGVyLXVzZXJfX2xpc3QnKS5jc3MoJ2Rpc3BsYXknLCdmbGV4Jyk7XHJcbiAgICAgICAgICAgICQoJy5vcmRlci11c2VyX19vdGhlci1mb3JtJykuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8v0YDQtdC00LDQutGC0LjRgNC+0LLQsNGC0Ywg0L/RgNC+0YTQuNC70YxcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubGstcHJvZmlsZV9fbGluay1lZGl0JywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmxrLXByb2ZpbGVfX2l0ZW0nKVxyXG4gICAgICAgICAgICAuY2hpbGRyZW4oJ2RpdjpmaXJzdC1jaGlsZCcpXHJcbiAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGstcHJvZmlsZV9faXRlbScpXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbignLmxrLXByb2ZpbGUtZWRpdDplcSgwKScpXHJcbiAgICAgICAgICAgIC5zaG93KCk7XHJcblxyXG4gICAgICAgIGluaXRQcm9maWxlUGx1Z2luKCk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFByb2ZpbGVQbHVnaW4oKXtcclxuICAgICAgICAvL9C80LDRgdC60LBcclxuICAgICAgICAkKCcuanMtaW5wdXQtLXRlbCcpLm1hc2soJys3KDAwMCkwMDAtMDAtMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcbiAgICAgICAgJCgnLmpzLWlucHV0LS1kYXRlJykubWFzaygnMDAuMDAuMDAwMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuXHJcbiAgICAgICAgLyrRgdC10LvQtdC60YIqL1xyXG4gICAgICAgICQoJy5say1wcm9maWxlLWVkaXRfX2NoaWxkLWxpc3QgLmpzLXNlbGVjdC0tY2hpbGQnKS5TdW1vU2VsZWN0KCk7XHJcbiAgICAgICAgY2hhbmdlU2VsZWN0RmFjZSgnLmxrLXByb2ZpbGUtZWRpdF9fY2hpbGQtbGlzdCAuanMtc2VsZWN0LS1jaGlsZCcsICdNJywnaWNvbi1ib3ktc21pbGluZycsJ2ljb24tZ2lybC1zbWlsaW5nJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubGstcHJvZmlsZV9fZWRpdCAuYy1idXR0b25fX21lZGl1bScsIGZ1bmN0aW9uKCl7XHJcbiAgICAvLyAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGstcHJvZmlsZS1lZGl0JykuaGlkZTtcclxuICAgIC8vICAgICAkKHRoaXMpLnBhcmVudHMoJy5say1wcm9maWxlLWl0ZW0nKS5jaGlsZHJlbignZGl2OmZpcnN0LWNoaWxkJykuc2hvdygpO1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLyrRgdC70LDQudC00LXRgCDQtNC70Y8g0YHRgtGA0LDQvdC40YbRiyDQktGL0L/Rg9GB0LrQvdGL0LUqL1xyXG4gICAgJCgnLmdyYWR1YXRpb24tcGFydHktYmFubmVyX19zbGlkZXInKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgbG9vcDp0cnVlLFxyXG4gICAgICAgIGl0ZW1zOiAxLFxyXG4gICAgICAgIGF1dG9oZWlnaHQ6IHRydWUsXHJcbiAgICAgICAgbmF2OiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8v0L/Qu9Cw0LLQvdGL0Lkg0Y/QutC+0YDRjFxyXG4gICAgZnVuY3Rpb24gc2Nyb2xsVG9BbmNob3IgKGVsZW0pIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsIGVsZW0sIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgaWQgID0gJCh0aGlzKS5hdHRyKCdocmVmJyksXHJcbiAgICAgICAgICAgICAgICBtZW51SGVpZ2h0ID0gMCxcclxuICAgICAgICAgICAgICAgIHRvcCA9ICQoaWQpLm9mZnNldCgpLnRvcCxcclxuICAgICAgICAgICAgICAgIHRvcEluZGVudCA9IHRvcCAtIG1lbnVIZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0b3A6ICcgKyB0b3ApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndG9wSW5kZW50OiAnICsgdG9wSW5kZW50KTtcclxuICAgICAgICAgICAgJCgnaHRtbCcpLmFuaW1hdGUoe3Njcm9sbFRvcDogdG9wSW5kZW50fSwgMTAwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICQoJy5ncmFkdWF0aW9uLXBhcnR5LWJhbm5lcl9fYnRuJykuY2xpY2soZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSAkKCQodGhpcykuYXR0cignaHJlZicpKTtcclxuICAgICAgICBpZih0YXJnZXQubGVuZ3RoKXtcclxuXHJcbiAgICAgICAgICAgIHZhciBoZWlnaHRIZWFkZXIgPSAkKCcuaGVhZGVyJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHZhciBzY3JvbGxUbyA9IHRhcmdldC5vZmZzZXQoKS50b3AgLSAoK2hlaWdodEhlYWRlciArIDEwMCk7XHJcbiAgICAgICAgICAgICQoJ2JvZHksIGh0bWwnKS5hbmltYXRlKHtzY3JvbGxUb3A6IHNjcm9sbFRvKydweCd9LCA4MDApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vICQoJyNleGN1cnNpb24tcHJvZ3JhbS1idG4nKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgIC8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyAgICAgdmFyIHRhcmdldCA9ICQoJCh0aGlzKS5hdHRyKCdocmVmJykpO1xyXG4gICAgLy8gICAgIGlmKHRhcmdldC5sZW5ndGgpe1xyXG4gICAgLy9cclxuICAgIC8vICAgICAgICAgdmFyIGhlaWdodEhlYWRlciA9ICQoJy5oZWFkZXInKS5oZWlnaHQoKTtcclxuICAgIC8vICAgICAgICAgdmFyIHNjcm9sbFRvID0gdGFyZ2V0Lm9mZnNldCgpLnRvcCAtICgraGVpZ2h0SGVhZGVyICsgMTAwKTtcclxuICAgIC8vICAgICAgICAgJCgnYm9keSwgaHRtbCcpLmFuaW1hdGUoe3Njcm9sbFRvcDogc2Nyb2xsVG8rJ3B4J30sIDgwMCk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLy8gc2Nyb2xsVG9BbmNob3IoJy5ncmFkdWF0aW9uLXBhcnR5LWJhbm5lcl9fYnRuJyk7XHJcblxyXG5cclxuICAgIC8v0L/QvtC40YHQuiDQv9C+INC60LDRhNC1INC90LAg0YHRgtGA0LDQvdC40YbQtSDRgSDRgtC+0YDRgtCw0LzQuCDQuCDQsiDQvtGE0L7RgNC80LvQtdC90LjQuCDQt9Cw0LrQsNC30LBcclxuICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCBjaGFuZ2UnLCAnLmMtc2VhcmNoLXBhZ2VfX2lucHV0JywgZnVuY3Rpb24oKXtcclxuICAgICAgICBjaGVja0FsbCgnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2xpc3QgbGknLCAnLm9yZGVyLXJhZGlvJywgJy5jLXNlYXJjaC1wYWdlX19pbnB1dCcpO1xyXG4gICAgICAgIGNoZWNrQWxsKCcjanMtYm94LXNlYXJjaC1hZGRpdGl2ZSAuYy1ib3gtc2VhcmNoX19pdGVtJywgJy5jLWNoZWNrYm94JywgJyNqcy1ib3gtc2VhcmNoLWFkZGl0aXZlIC5jLXNlYXJjaC1wYWdlX19pbnB1dCcpO1xyXG4gICAgICAgIGNoZWNrQWxsKCcjanMtYm94LXNlYXJjaC1pbmdyZWRpZW50IC5jLWJveC1zZWFyY2hfX2l0ZW0nLCAnLmMtY2hlY2tib3gnLCAnI2pzLWJveC1zZWFyY2gtaW5ncmVkaWVudCAuYy1zZWFyY2gtcGFnZV9faW5wdXQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoZWNrQWxsKGVsZW0sIHdoZXJlU2VhcmNoLCBpbnB1dCkge1xyXG4gICAgICAgICQoZWxlbSkuZWFjaChmdW5jdGlvbihpLCBpdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICQodGhpcykuZmluZCh3aGVyZVNlYXJjaCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigkKGlucHV0KS52YWwoKS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgaWYgKCB2YWx1ZSA+PSAwICkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKHRoaXMpLmFkZENsYXNzKCdqcy1vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19zaG93Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIC8vICQodGhpcykucmVtb3ZlQ2xhc3MoJ2pzLW9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX3Nob3cnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrQWxsKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCBsaScsICcub3JkZXItcmFkaW8nLCAnLmMtc2VhcmNoLXBhZ2VfX2lucHV0Jyk7XHJcbiAgICBjaGVja0FsbCgnI2pzLWJveC1zZWFyY2gtYWRkaXRpdmUgLmMtYm94LXNlYXJjaF9faXRlbScsICcuYy1jaGVja2JveCcsICcjanMtYm94LXNlYXJjaC1hZGRpdGl2ZSAuYy1zZWFyY2gtcGFnZV9faW5wdXQnKTtcclxuICAgIGNoZWNrQWxsKCcjanMtYm94LXNlYXJjaC1pbmdyZWRpZW50IC5jLWJveC1zZWFyY2hfX2l0ZW0nLCAnIC5jLWNoZWNrYm94JywgJyNqcy1ib3gtc2VhcmNoLWluZ3JlZGllbnQgLmMtc2VhcmNoLXBhZ2VfX2lucHV0Jyk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jLWJveC1zZWFyY2hfX2NsZWFyJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5jLXNlYXJjaC1wYWdlX19pbnB1dCcpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnLmMtYm94LXNlYXJjaF9faXRlbScpLnNob3coKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9C+0YLQv9C40YHQsNGC0YzRgdGPINC+0YIg0L/QvtC00L/QuNGB0LrQuCDQsiDQu9C40YfQvdC+0Lwg0LrQsNCx0LjQvdC10YLQtVxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNsay1wcm9maWxlLXN1YnNjcmlwdGlvbl91bnN1YnNjcmliZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcubGstcHJvZmlsZSAubGstcHJvZmlsZS1zdWJzY3JpcHRpb25fX2JveCcpLmhpZGUoKTtcclxuICAgICAgICAkKCcubGstcHJvZmlsZSAubGstcHJvZmlsZS1zdWJzY3JpcHRpb24tZGVsJykuc2hvdygpO1xyXG5cclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNsay1wcm9maWxlLXN1YnNjcmlwdGlvbi1kZWxfX2NhbmNlbCcsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcubGstcHJvZmlsZSAubGstcHJvZmlsZS1zdWJzY3JpcHRpb24tZGVsJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5say1wcm9maWxlIC5say1wcm9maWxlLXN1YnNjcmlwdGlvbl9fYm94Jykuc2hvdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/QuNC30LzQtdC90L3QtdC40LUg0L/QsNGA0L7Qu9GPINCyINC/0YDQvtGE0LjQu9C1INC70LjRh9C90L7Qs9C+INC60LDQsdC40L3QtdGC0LBcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjbGstcHJvZmlsZV9fY2hhbmdlLXBhc3MnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgIC5wYXJlbnRzKCcubGstcHJvZmlsZS11c2VyJylcclxuICAgICAgICAuY3NzKCdkaXNwbGF5JywgJ25vbmUnKVxyXG4gICAgICAgIC5zaWJsaW5ncygnLmxrLXByb2ZpbGUtZWRpdF9fcGFzcycpXHJcbiAgICAgICAgLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g0LjQt9C80LXQvdC10L3QuNC1INC/0L7QtNC/0LjRgdC60Lgg0LIg0L/RgNC+0YTQuNC70LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAkKCcjbGstcHJvZmlsZV9jaGFuZ2Utc3Vic2NyaXB0aW9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcylcclxuICAgICAgICAucGFyZW50cygnLmxrLXByb2ZpbGUtc3Vic2NyaXB0aW9uX19ib3gnKVxyXG4gICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpXHJcbiAgICAgICAgLnNpYmxpbmdzKCcubGstcHJvZmlsZS1lZGl0JylcclxuICAgICAgICAuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XHJcbiAgICB9KTtcclxuICAgIC8vINC+0YLQvNC10L3QsCDQuNC30LzQtdC90LXQvdC40Y8g0L/QvtC00L/QuNGB0LrQuCDQsiDQv9GA0L7RhNC40LvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICQoJyNsay1wcm9maWxlX2NhbmNlbC1jaGFuZ2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgIC5wYXJlbnRzKCcubGstcHJvZmlsZS1lZGl0JylcclxuICAgICAgICAuY3NzKCdkaXNwbGF5JywgJ25vbmUnKVxyXG4gICAgICAgIC5zaWJsaW5ncygnLmxrLXByb2ZpbGUtc3Vic2NyaXB0aW9uX19ib3gnKVxyXG4gICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v0LTQvtCx0LDQstC70Y/QtdC8INGN0LvQtdC80LXQvdGC0Ysg0LIg0L/RgNC+0YTQuNC70LUg0LvQuNGH0L3QvtCz0L4g0LrQsNCx0LjQvdC10YLQsFxyXG4gICAgLy/QtNC+0LHQsNCy0LvQtdC90LjQtSDQstGC0L7RgNC+0LPQviBlbWFpbFxyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjanMtbGstcHJvZmlsZV9fYWRkLWVtYWlsJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgICAgIC5wYXJlbnRzKCcuYy1mb3JtX19pdGVtJylcclxuICAgICAgICAgICAgLnNpYmxpbmdzKCcubGstcHJvZmlsZS1lZGl0X19jb3B5JylcclxuICAgICAgICAgICAgLmNsb25lKCkuYXBwZW5kVG8oXCIubGstcHJvZmlsZS1lZGl0X19lbWFpbC1saXN0XCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNqcy1say1wcm9maWxlX19hZGQtdGVsJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgICAgIC5wYXJlbnRzKCcuYy1mb3JtX19pdGVtJylcclxuICAgICAgICAgICAgLnNpYmxpbmdzKCcubGstcHJvZmlsZS1lZGl0X19jb3B5JylcclxuICAgICAgICAgICAgLmNsb25lKCkuYXBwZW5kVG8oXCIubGstcHJvZmlsZS1lZGl0X190ZWwtbGlzdFwiKTtcclxuICAgICAgICAkKCcuanMtaW5wdXQtLXRlbCcpLm1hc2soJys3KDAwMCkwMDAtMDAtMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC00L7QsdCw0LLQu9C10L3QuNC1INC/0L7Qu9C10Lkg0LIg0LrQvtC90YLQsNC60YLQsNGFINCb0JoqL1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNqcy1say1wcm9maWxlX19hZGQtaW5mby1hbGwnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjb3JyZWN0Jyk7XHJcbiAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAucGFyZW50cygnLmxrLXByb2ZpbGUtZWRpdF9fbGluZScpXHJcbiAgICAgICAgICAgIC5zaWJsaW5ncygnLmxrLXByb2ZpbGUtZWRpdF9fY29weScpXHJcbiAgICAgICAgICAgIC5jbG9uZSgpLmFwcGVuZFRvKFwiLmxrLXByb2ZpbGUtZWRpdF9fY29udGFjdC1saXN0XCIpO1xyXG4gICAgICAgIC8vICQoJy5qcy1pbnB1dC0tZGF0ZScpLm1hc2soJys3KDAwMCkwMDAtMDAtMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcblxyXG4gICAgICAgIC8vIGluaXRQcm9maWxlUGx1Z2luKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC00L7QsdCw0LLQu9C10L3QuNC1INGA0LXQsdC10L3QutCwINCyINC/0YDQvtGE0LjQu9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyovXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2pzLWxrLXByb2ZpbGVfX2FkZC1jaGlsZCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAucGFyZW50cygnLmxrLXByb2ZpbGUtZWRpdF9fbGluZScpXHJcbiAgICAgICAgICAgIC5zaWJsaW5ncygnLmxrLXByb2ZpbGUtZWRpdF9fY29weScpXHJcbiAgICAgICAgICAgIC5jbG9uZSgpLmFwcGVuZFRvKFwiLmxrLXByb2ZpbGUtZWRpdF9fY2hpbGQtbGlzdFwiKTtcclxuICAgICAgICAkKCcuanMtaW5wdXQtLWRhdGUnKS5tYXNrKCcwMC4wMC4wMDAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG5cclxuICAgICAgICBpbml0UHJvZmlsZVBsdWdpbigpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjanMtbGstcHJvZmlsZS1lZGl0X19hZGRyZXNzJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgICAgIC5wYXJlbnRzKCcubGstcHJvZmlsZS1lZGl0X19saW5lJylcclxuICAgICAgICAgICAgLnNpYmxpbmdzKCcubGstcHJvZmlsZS1lZGl0X19jb3B5JylcclxuICAgICAgICAgICAgLmNsb25lKCkuYXBwZW5kVG8oXCIubGstcHJvZmlsZS1lZGl0X19hZGRyZXNzLWxpc3RcIik7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jLWZvcm1fX2RlbCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyICRlbGVtX2l0ZW0gPSAkKHRoaXMpLnBhcmVudHMoJy5jLWZvcm1fX2l0ZW0nKTtcclxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAgJCh0aGlzKS5wYXJlbnRzKCcubGstcHJvZmlsZS1lZGl0X19jb3B5Jyk7XHJcbiAgICAgICAgJGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgJGVsZW1faXRlbS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v0YHQutGA0YvRgtGML9C/0L7QutCw0LfQsNGC0Ywg0LfQsNC60LDQtyDQsiDQuNGB0YLQvtGA0LjQuCDQt9Cw0LrQsNC30L7QslxyXG4gICAgJCgnLmxrLWhpc3RvcnktaXRlbV9faGVhZGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmxrLWhpc3RvcnktaXRlbScpLnRvZ2dsZUNsYXNzKCdsay1oaXN0b3J5LWl0ZW1fX2JvZHktc2hvdycpO1xyXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5say1oaXN0b3J5LWl0ZW1fX2JvZHknKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8v0L7Rh9C40YHRgtC40YLRjCDRhNC+0YDQvNGDINC/0L7QuNGB0LrQsFxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5vcmRlci1kZWxpdmVyeS1zZWFyY2hfX2NsZWFyJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLm9yZGVyLWRlbGl2ZXJ5LXNlYXJjaF9faXRlbScpLnNpYmxpbmdzKCkuZmluZCgnaW5wdXQnKS52YWwoJycpO1xyXG4gICAgICAgICQoJy5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19hbGwnKS5yZW1vdmVDbGFzcygnc2hvdy1pdGVtLWFsbCcpO1xyXG5cclxuICAgICAgICAvLyBzaG93RGVsaXZlcnlBZGRyZXNzQ2FrZSgnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2l0ZW0nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v0L/QvtC60LDQt9Cw0YLRjCDQstGB0LUg0LDQtNGA0LXRgdCwINC60LDRhNC1INCyINC30LDQutCw0LfQtVxyXG4gICAgZnVuY3Rpb24gc2hvd0RlbGl2ZXJ5QWRkcmVzc0Nha2UgKGVsZW0pe1xyXG4gICAgICAgICQoZWxlbSkuZWFjaChmdW5jdGlvbihpLCBlbGVtKXtcclxuICAgICAgICAgICAgaSA8IDYgPyAkKGVsZW0pLnNob3coKSA6ICQoZWxlbSkuaGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gc2hvd0RlbGl2ZXJ5QWRkcmVzc0Nha2UoJy5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19pdGVtJyk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19hbGwnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fYWxsJyk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICB2YXIgdGV4dEJ0biA9ICR0aGlzLmh0bWwoKTtcclxuICAgICAgICBpZih0ZXh0QnRuID09IFwi0L/QvtC60LDQt9Cw0YLRjCDQstGB0LVcIil7XHJcbiAgICAgICAgICAgICR0aGlzLmh0bWwoXCLRgdC60YDRi9GC0YxcIik7XHJcbiAgICAgICAgICAgICR0aGlzLnNpYmxpbmdzKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCcpLmFkZENsYXNzKCdzaG93LWl0ZW0tYWxsJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICR0aGlzLmh0bWwoXCLQv9C+0LrQsNC30LDRgtGMINCy0YHQtVwiKTtcclxuICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJy5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19saXN0JykucmVtb3ZlQ2xhc3MoJ3Nob3ctaXRlbS1hbGwnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgLy/RgdGC0YDQsNC90LjRhtCwINCe0YTQvtGA0LzQu9C10L3QuNC1INC30LDQutCw0LfQsC4g0J/RgNC4INGE0L7QutGD0YHQtSDQvdCwINC40L3Qv9GD0YIg0YEg0LDQtNGA0LXRgdC+0LwsINC00LXQu9Cw0LXQvCDQsNC60YLQuNCy0L3Ri9C5IHJhZGlvIGJ1dHRvblxyXG4gICAgJCgnLm9yZGVyLWRlbGl2ZXJ5LWN1c3RvbV9faXRlbSBpbnB1dCwgLm9yZGVyLWRlbGl2ZXJ5LWN1c3RvbV9faXRlbSB0ZXh0YXJlYScpLmZvY3VzKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAvLyB2YXIgJHRoaXNSYWRpb0lucHV0ID0gJCh0aGlzKS5wYXJlbnRzKCdsYWJlbCcpLnNpYmxpbmdzKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKTtcclxuICAgICAgICAkdGhpcy5wYXJlbnRzKCdsYWJlbCcpLnNpYmxpbmdzKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0nKS5wcm9wKCBcImNoZWNrZWRcIix0cnVlKTtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIC8v0YHQstC10YDQvdGD0YLRjC/RgNCw0LfQstC10YDQvdGD0YLRjCDQsdC70L7QuiDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgJCgnLmJhc2tldC1pdGVtX19oZWFkZXInKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICAkKHRoaXMpO1xyXG4gICAgICAgICR0aGlzLnBhcmVudHMoJy5iYXNrZXQtaXRlbScpLnRvZ2dsZUNsYXNzKCdiYXNrZXQtYm9keV9fc2hvdycpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgfSwgMTUwKTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmJhc2tldC1pdGVtX19ib2R5Jykuc2xpZGVUb2dnbGUoMTAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5iYXNrZXQtbWl4X19pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgJCgnLmJhc2tldC1pdGVtX19oZWFkZXInKS5wYXJlbnRzKCcuYmFza2V0LWl0ZW0nKS5hZGRDbGFzcygnYmFza2V0LWJvZHlfX3Nob3cnKTtcclxuICAgICAgICAkKCcuYmFza2V0LWl0ZW1fX2JvZHknKS5zbGlkZURvd24oMTAwKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgLyrQv9C+0LrQsNC30YvQstCw0LXQvCDQv9C+0L/QsNC/INC90LAg0YHRgtGA0LDQvdC40YbQtSDQodC+0LfQtNCw0YLQtdC70Lgg0JDQvdC00LXRgNGB0L7QvSovXHJcbiAgICAkKCcucGhvdG8tcG9pbnRfX2ljb24nKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBzdHIgPSAkKHRoaXMpLnNpYmxpbmdzKCcucGhvdG8tcG9pbnRfX2Rlc2NyaXB0aW9uJykuZmluZCgnc3BhbicpLnRleHQoKS50cmltKCksXHJcbiAgICAgICAgICAgIGFyciA9IHN0ci5zcGxpdCgnICcpLFxyXG4gICAgICAgICAgICBuYW1lID0gYXJyWzBdICsgJyAnICsgYXJyWzFdLFxyXG4gICAgICAgICAgICBkZXNjID0gJyc7XHJcbiAgICAgICAgYXJyLnNwbGljZSgwLCAyKTtcclxuICAgICAgICBkZXNjID0gYXJyLmpvaW4oJyAnKTtcclxuICAgICAgICAkKCcuY3JlYXRvcnMgLnBvcHVwLXRpdGxlJykuZmluZCgnc3BhbicpLnRleHQobmFtZSk7XHJcbiAgICAgICAgJCgnLmNyZWF0b3JzIC5wb3B1cC1ib2R5JykuZmluZCgncCcpLnRleHQoZGVzYyk7XHJcbiAgICAgICAgdmFyIHBvcHVwID0gJCgnLmNyZWF0b3JzIC5wb3B1cCcpO1xyXG4gICAgICAgIHBvcHVwLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgcG9wdXAuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5jcmVhdG9ycyAucG9wdXAtY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5jcmVhdG9ycyAucG9wdXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrRhNCw0LHRgNC40LrQsCDRgdGH0LDRgdGC0YzRjywg0LrQu9C40Log0L/QviDQv9C+0LjQvdGC0YMqL1xyXG4gICAgJCgnLmZhY3RvcnktcG9pbnRfX2ltZycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLnBvcHVwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcucG9wdXAnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmZhY3RvcnktcG9pbnQgLnBvcHVwLWNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5wb3B1cCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC/0L7QutCw0LfRi9Cy0LDQtdC8INC80LDQu9C10L3RjNC60LjQuSDQsdC70L7QuiDRgSDQstGL0LHRgNCw0L3QvdGL0LzQuCDRgtC+0LLQsNGA0LDQvNC4INCyINC60LDRgNGC0L7Rh9C60LUg0YLQvtCy0LDRgNCwICjQvNC+0LHQuNC70YzQvdCw0Y8g0LLQtdGA0YHQuNGPKSovXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBvcHVwLXByb2R1Y3RfX2NoZWNrLW1vYmlsZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcucG9wdXAtcHJvZHVjdCAucG9wdXAtbWluaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG4gICAgLyrQt9Cw0LrRgNGL0LLQsNC10Lwg0LzQsNC70LXQvdGM0LrQuNC5INC/0L7Qv9Cw0L8g0YEg0YLQvtCy0LDRgNCw0LzQuCovXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBvcHVwLXByb2R1Y3RfX2NoZWNrLWNsb3NlJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5wb3B1cC1wcm9kdWN0IC5wb3B1cC1taW5pJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnBvcHVwLW1pbmknKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQv9C+0LrQsNC30YvQstCw0LXQvCDQutCw0YLQtdCz0L7RgNC40Lgg0LzQtdC90Y4g0LIg0LrQsNGC0LDQu9C+0LPQtSovXHJcbiAgICB2YXIgZmlsdGVyQmFnZSA9ICQoJy5maWx0ZXItYmFnZScpO1xyXG5cclxuICAgIGZpbHRlckJhZ2Uub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5jYXRhbG9nLWJvZHknKS50b2dnbGVDbGFzcygnc2hvdy1jYXRlZ29yeScpO1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2pzLWhpZGUtd29yZCcpO1xyXG4gICAgICAgICQodGhpcykuZmluZCgnLmZpbHRlci1iYWdlX190aXRsZSBzcGFuJykuaHRtbCgn0J/QvtC60LDQt9Cw0YLRjCcpO1xyXG4gICAgICAgICQoJy5qcy1oaWRlLXdvcmQnKS5maW5kKCcuZmlsdGVyLWJhZ2VfX3RpdGxlIHNwYW4nKS5odG1sKCfQodC60YDRi9GC0YwnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5maWx0ZXItaG9sZF9fY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZmlsdGVyQmFnZS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmNhdGFsb2ctYm9keScpLnJlbW92ZUNsYXNzKCdzaG93LWNhdGVnb3J5Jyk7XHJcbiAgICAgICAgZmlsdGVyQmFnZS50b2dnbGVDbGFzcygnanMtaGlkZS13b3JkJyk7XHJcbiAgICAgICAgJCgnLmZpbHRlci1iYWdlX190aXRsZSBzcGFuJykuaHRtbCgn0J/QvtC60LDQt9Cw0YLRjCcpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBcdGlmKHdpbmRvd1dpZHRoIDw9IDczMCl7XHJcbiAgICBcdCAgICAkKCcuZmlsdGVyLWhvbGRfX2Nsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBcdCAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZmlsdGVyLWhvbGQnKS5zbGlkZVVwKDYwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmKHdpbmRvd1dpZHRoIDw9IDczMCl7XHJcbiAgICAgICAgJCgnLmZpbHRlci1ob2xkX19jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50cygnLmZpbHRlci1ob2xkJykuc2xpZGVVcCg2MDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAvKtGB0LvQsNC50LTQtdGAINC60LDRgNGD0YHQtdC70YwqL1xyXG4gICAgJCgnLmNhcm91c2VsLXNsaWRlcicpLm93bENhcm91c2VsKHtcclxuICAgICAgICBsb29wOnRydWUsXHJcbiAgICAgICAgLy8gbmF2OnRydWUsXHJcbiAgICAgICAgbWFyZ2luOjIwLFxyXG4gICAgICAgIC8vIGl0ZW1zOiA0LFxyXG4gICAgICAgIC8vIGNlbnRlcjogdHJ1ZSxcclxuICAgICAgICByZXNwb25zaXZlQ2xhc3M6IHRydWUsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTp7XHJcbiAgICAgICAgICAgIDA6e1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6MVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA1NDA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6MlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA3ODA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6M1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxMjAwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTYwMDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczo1XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuYy1jYXJkLXByb2R1Y3RfX3NsaWRlcicpLm93bENhcm91c2VsKHtcclxuICAgICAgICBsb29wOnRydWUsXHJcbiAgICAgICAgLy8gbmF2OnRydWUsXHJcbiAgICAgICAgbWFyZ2luOjIwLFxyXG4gICAgICAgIC8vIGl0ZW1zOiA0LFxyXG4gICAgICAgIC8vIGNlbnRlcjogdHJ1ZSxcclxuICAgICAgICByZXNwb25zaXZlOntcclxuICAgICAgICAgICAgMDp7XHJcbiAgICAgICAgICAgICAgICBpdGVtczoxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDYwMDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczoyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDEyMDA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6M1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxNjAwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8q0YHQu9Cw0LnQtNC10YAg0LrQsNGA0YPRgdC10LvRjCovXHJcbiAgICAkKCcucHVibGljYXRpb25zLXNsaWRlcicpLm93bENhcm91c2VsKHtcclxuICAgICAgICBsb29wOnRydWUsXHJcbiAgICAgICAgbmF2OnRydWUsXHJcbiAgICAgICAgbWFyZ2luOjIwLFxyXG4gICAgICAgIGl0ZW1zOiA3LFxyXG4gICAgICAgIC8vIGNlbnRlcjogdHJ1ZSxcclxuICAgICAgICBzdGFnZVBhZGRpbmc6IDEwLFxyXG4gICAgICAgIHJlc3BvbnNpdmVDbGFzczogdHJ1ZSxcclxuICAgICAgICByZXNwb25zaXZlOntcclxuICAgICAgICAgICAgMDp7XHJcbiAgICAgICAgICAgICAgICBpdGVtczoxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDQ4MDp7XHJcbiAgICAgICAgICAgICAgICBpdGVtczoyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDc4MDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczozXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDk4MDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczo0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDEyMDA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6NFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxNjAwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTkyMDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczo3XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJCgnI2ZpbHRlci1jYWZlLWFsbCwgI2ZpbHRlci1jYWZlX19tb2JpbGUtYWxsJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgJGVsZW0gPSAkKCcuZmlsdGVyLWl0ZW0nKTtcclxuICAgICAgICBpZigkdGhpcy5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAkZWxlbS5hZGRDbGFzcygnZGlzYWJsZScpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkZWxlbS5yZW1vdmVDbGFzcygnZGlzYWJsZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy50b3AtbWVzc2FnZV9fY2xvc2UnKS5vbignY2xpY2snLGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcudG9wLW1lc3NhZ2UnKS5oaWRlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtCy0L/QuNGB0YvQstCw0LXQvCBpbWcg0LIg0LHQu9C+0Log0L/RgNC4INC70Y7QsdC+0Lwg0YDQsNC30LzQtdGA0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyovXHJcbiAgICBmdW5jdGlvbiBmaXhfc2l6ZSgpIHtcclxuICAgICAgICB2YXIgaW1hZ2VzID0gJCgnLmMtcGljX2xpbmsgaW1nJyk7XHJcbiAgICAgICAgaW1hZ2VzLmVhY2goc2V0c2l6ZSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldHNpemUoKSB7XHJcbiAgICAgICAgICAgIHZhciBpbWcgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgaW1nX2RvbSA9IGltZy5nZXQoMCksXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBpbWcucGFyZW50cygnLmMtcGljX2xpbmsnKTtcclxuICAgICAgICAgICAgaWYgKGltZ19kb20uY29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgIHJlc2l6ZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaW1nLm9uZSgnbG9hZCcsIHJlc2l6ZSk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNpemUoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGNvbnRhaW5lci53aWR0aCgpIC8gY29udGFpbmVyLmhlaWdodCgpKSA8IChpbWdfZG9tLndpZHRoIC8gaW1nX2RvbS5oZWlnaHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLndpZHRoKCdhdXRvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLmhlaWdodCgnMTAwJScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGltZy5oZWlnaHQoJ2F1dG8nKTtcclxuICAgICAgICAgICAgICAgIGltZy53aWR0aCgnMTAwJScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIC8vICQod2luZG93KS5vbigncmVzaXplJywgZml4X3NpemUpO1xyXG4gICAgLy8gZml4X3NpemUoKTtcclxuICAgIC8vXHJcbiAgICAvLyBpZiAodHlwZW9mIF9jdXJyZW50ICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAvLyAgICAgdmFyIG1hcEltYWdlcyA9IF9jdXJyZW50O1xyXG4gICAgLy8gfSBlbHNlIHtcclxuICAgIC8vICAgICB2YXIgbWFwSW1hZ2VzID0gJCgnLmMtY2FyZC1jYWZlX19pbWcgaW1nJyk7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgLyrQtdGB0LvQuCDQsiDQs9C+0YDQvtC00LUg0L7QtNC90L4g0LrQsNGE0LUsINC00LXQu9Cw0LXQvCDQtdCz0L4gaW5saW5lKi9cclxuICAgICQoJy5jYWZlLWxpc3RfX2NpdHknKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY291bnRFbGVtID0gJHRoaXMuZmluZCgnLmMtY29sLTYnKS5sZW5ndGg7XHJcbiAgICAgICAgaWYoY291bnRFbGVtID09IDEpe1xyXG4gICAgICAgICAgICAkKCR0aGlzKS5hZGRDbGFzcygnY2FmZS1saXN0X19vbmUnKTtcclxuXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICQoJHRoaXMpLnJlbW92ZUNsYXNzKCdjYWZlLWxpc3RfX29uZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgLy/Qv9C+0LTQutC70Y7Rh9C10L3QuNC1INGC0YPQu9GC0LjQv9CwXHJcbiAgICAkKCAnLnRvb2x0aXAnICkudG9vbHRpcHN0ZXIoe1xyXG4gICAgICAgIGFuaW1hdGlvbjogJ2dyb3cnLFxyXG4gICAgICAgIGRlbGF5OiAxMDAsXHJcbiAgICAgICAgdHJpZ2dlciA6ICdjdXN0b20nICxcclxuICAgICAgICBtYXhXaWR0aDogNTAwLFxyXG4gICAgICAgIGNvbnRlbnRBc0hUTUw6IHRydWUsXHJcbiAgICAgICAgaW50ZXJhY3RpdmU6IHRydWUsXHJcbiAgICAgICAgdHJpZ2dlck9wZW4gOiB7XHJcbiAgICAgICAgICAgIG1vdXNlZW50ZXIgOiB0cnVlICxcclxuICAgICAgICAgICAgdG91Y2hzdGFydCA6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyaWdnZXJDbG9zZSA6IHtcclxuICAgICAgICAgICAgbW91c2VsZWF2ZSA6IHRydWUsXHJcbiAgICAgICAgICAgIGNsaWNrIDogdHJ1ZSAsXHJcbiAgICAgICAgICAgIHNjcm9sbCA6IHRydWUgLFxyXG4gICAgICAgICAgICB0YXAgOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8v0L/QvtC00LrQu9GO0YfQtdC90LjQtSDRgtGD0LvRgtC40L/QsFxyXG4gICAgJCggJy50b29sdGlwLWNhdGFsb2cnICkudG9vbHRpcHN0ZXIoe1xyXG4gICAgICAgIGFuaW1hdGlvbjogJ2dyb3cnLFxyXG4gICAgICAgIGRlbGF5OiAxMDAsXHJcbiAgICAgICAgdHJpZ2dlciA6ICdjbGljaycgLFxyXG4gICAgICAgIG1heFdpZHRoOiA1MDAsXHJcbiAgICAgICAgZnVuY3Rpb25CZWZvcmU6IGZ1bmN0aW9uKGluc3RhbmNlLCBoZWxwZXIpe1xyXG4gICAgICAgICAgICBpZiAoaGVscGVyLmV2ZW50LnR5cGUgPT0gJ2NsaWNrJykge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuY29udGVudCgnWW91IG9wZW5lZCBtZSB3aXRoIGEgcmVndWxhciBtb3VzZSA8YSBocmVmPVwiaHR0cHM6Ly93d3cuZ29vZ2xlLnJ1Lz9obD1ydVwiPmNsaWNrIDopPC9hPi4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbnRlbnQoJ1lvdSBvcGVuZWQgbWUgYnkgYSB0YXAgb24gdGhlIHNjcmVlbiA6KScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250ZW50QXNIVE1MOiB0cnVlLFxyXG4gICAgICAgIGludGVyYWN0aXZlOiB0cnVlLFxyXG4gICAgICAgIHRyaWdnZXJPcGVuIDoge1xyXG4gICAgICAgICAgICBtb3VzZWVudGVyIDogdHJ1ZSAsXHJcbiAgICAgICAgICAgIHRvdWNoc3RhcnQgOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0cmlnZ2VyQ2xvc2UgOiB7XHJcbiAgICAgICAgICAgIG1vdXNlbGVhdmUgOiB0cnVlLFxyXG4gICAgICAgICAgICBjbGljayA6IHRydWUgLFxyXG4gICAgICAgICAgICBzY3JvbGwgOiB0cnVlICxcclxuICAgICAgICAgICAgdGFwIDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgJChcIi5vd2wtY2Fyb3VzZWxcIikub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgIGl0ZW1zOiAxLFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgY2VudGVyOiB0cnVlLFxyXG4gICAgICAgIGF1dG9IZWlnaHQ6dHJ1ZSxcclxuICAgICAgICBuYXY6IHRydWVcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkKCcuY2FmZS1mb3RvcmFtYScpLm9uKCdmb3RvcmFtYTpyZWFkeScsIGZ1bmN0aW9uIChlLCBmb3RvcmFtYSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGUudHlwZSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coIGZvdG9yYW1hLmFjdGl2ZUluZGV4KTtcclxuICAgICAgICB2YXIgcGF0aCA9IGZvdG9yYW1hLmFjdGl2ZUZyYW1lLmltZztcclxuICAgICAgICAkKCcuYmctYmx1cicpLmF0dHIoJ3NyYycsIHBhdGgpO1xyXG4gICAgfSkuZm90b3JhbWEoe1xyXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgLy8gbWF4d2lkdGg6ICcxMDAlJyxcclxuICAgICAgICByYXRpbzogMTcvMTEsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICB0aHVtYndpZHRoOiA4OCxcclxuICAgICAgICBhbGxvd2Z1bGxzY3JlZW46IHRydWUsXHJcbiAgICAgICAgbmF2OiAndGh1bWJzJyxcclxuICAgICAgICBmaXQ6J2NvdmVyJ1xyXG4gICAgfSk7O1xyXG5cclxuICAgIC8q0KTQvtGC0L7RgNCw0LzQsCwg0YHQu9Cw0LnQtNC10YAg0LzQtdGA0L7Qv9GA0LjRj9GC0LjQuSwg0YHQu9Cw0LnQtNC10YAg0L7RgtC30YvQstC+0LIqL1xyXG4gICAgLy8gdmFyICRzbGlkZXIgPSAkKCcuY2FmZS1mb3RvcmFtYScpLmZvdG9yYW1hKHtcclxuICAgIC8vICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgLy8gICAgIC8vIG1heHdpZHRoOiAnMTAwJScsXHJcbiAgICAvLyAgICAgcmF0aW86IDE3LzExLFxyXG4gICAgLy8gICAgIGxvb3A6IHRydWUsXHJcbiAgICAvLyAgICAgdGh1bWJ3aWR0aDogODgsXHJcbiAgICAvLyAgICAgYWxsb3dmdWxsc2NyZWVuOiB0cnVlLFxyXG4gICAgLy8gICAgIG5hdjogJ3RodW1icycsXHJcbiAgICAvLyAgICAgZml0Oidjb3ZlcidcclxuICAgIC8vIH0pO1xyXG5cclxuICAgIC8vICRzbGlkZXJcclxuICAgIC8vICAgICAub24oJ2ZvdG9yYW1hOnNob3cnLCBmdW5jdGlvbiAoZSwgZm90b3JhbWEpIHtcclxuICAgIC8vICAgICAgICAgLy8gcGljayB0aGUgYWN0aXZlIHRodW1iIGJ5IGlkXHJcbiAgICAvLyAgICAgICAgIHZhciBwYXRoID0gZm90b3JhbWEuYWN0aXZlRnJhbWUuaW1nO1xyXG4gICAgLy8gICAgICAgICAkKCcuYmctYmx1cicpLmF0dHIoJ3NyYycsIHBhdGgpO1xyXG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgIC8vICAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAvLyAkc2xpZGVyLm9uKCdmb3RvcmFtYTpsb2FkJywgZnVuY3Rpb24gKGUsIGZvdG9yYW1hLCBleHRyYSkge1xyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKGV4dHJhLnNyYyArICcgaXMgbG9hZGVkJyk7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ2hlbGxvJyk7XHJcbiAgICAvLyB9KTtcclxuXHJcblxyXG4gICAgJCgnLmNhZmUtaG9saWRheS1zbGlkZXInKS5mb3RvcmFtYSh7XHJcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICBtYXh3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgIC8vIHJhdGlvOiAxNi85LFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgYWxsb3dmdWxsc2NyZWVuOiB0cnVlLFxyXG4gICAgICAgIGZpdDonY292ZXInXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyAkKCcuY2FmZS1yZXZpZXdzLXNsaWRlcicpLmZvdG9yYW1hKHtcclxuICAgIC8vICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgLy8gICAgIGhlaWdodDogJ2F1dG8nLFxyXG4gICAgLy8gICAgIG1heHdpZHRoOiAnMTAwJScsXHJcbiAgICAvLyAgICAgbG9vcDogdHJ1ZSxcclxuICAgIC8vICAgICByYXRpbzogMTYvNVxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLyrQvNCw0YHQutC4INC00LvRjyDRgtC10LvQtdGE0L7QvdCwKi9cclxuICAgICQoJyNyZXF1ZXN0LWNhbGxfX3RlbCwgI3JlZ19fcGhvbmUnKS5tYXNrKCcrNygwMDApMDAwLTAwLTAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG4gICAgJCgnI3JlcXVlc3QtY2FsbF9fdGVsLCAjcmVnX19waG9uZScpLm1hc2soJys3KDAwMCkwMDAtMDAtMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcbiAgICAkKCcuanMtaW5wdXQtLXRlbCcpLm1hc2soJys3KDAwMCkwMDAtMDAtMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcbiAgICAkKCcuanMtaW5wdXQtLWRhdGUnKS5tYXNrKCcwMC4wMC4wMDAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG4gICAgJCgnLmpzLWlucHV0LS1sb3lhbHR5JykubWFzaygnMDAwLTAwMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWUgfSk7XHJcblxyXG4gICAgJCgnLmpzLWlucHV0LS1tb2RlJykubWFzaygn0YEgMDA6MDAg0LTQviAwMDowMCcsIHtcclxuICAgICAgICBjbGVhcklmTm90TWF0Y2g6IHRydWUsXHJcbiAgICAgICAgcGxhY2Vob2xkZXI6IFwi0YEgX186X18g0LTQviBfXzpfX1wiXHJcbiAgICB9KTtcclxuICAgICQoJ2lucHV0W25hbWU9XCJmb3JtX3RleHRfMzBcIl0nKS5tYXNrKCcrNygwMDApMDAwLTAwLTAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG4gICAgJCgnaW5wdXRbbmFtZT1cImZvcm1fdGV4dF81MlwiXScpLm1hc2soJys3KDAwMCkwMDAtMDAtMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcblxyXG4gICAgLyrQv9C+0LrQsNC3INC90L7QvNC10YDQsCDRgtC10LvQtdGE0L7QvdCwINCyINC60LDRgNGC0L7Rh9C60LUg0LrQsNGE0LUqL1xyXG4gICAgJCgnLmNhZmUtaW5mb19faXRlbS1jb2wgLmMtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmwtYnV0dG9uJykuc2libGluZ3MoJy5jYWZlLWluZm9fX3Bob25lLW51bWJlcicpLnNob3coKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0YTRg9C90LrRhtC40Y8g0L/QvtC60LDQt9CwINC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwKi9cclxuICAgIGZ1bmN0aW9uIHNob3dQb3B1cChpY29uLCBwb3B1cCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGljb24sIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciAkaHRtbCA9ICQoJ2h0bWwnKTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKHBvcHVwKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAkKCcubWZwLWJnJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuXHJcblxyXG4gICAgICAgICAgICAkaHRtbC5hZGRDbGFzcygnbG9jay1odG1sJyk7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZml4ZWQtaW5wdXQnKTtcclxuICAgICAgICAgICAgaWYod2luZG93V2lkdGggPiBkb2N1bWVudFdpZHRoKXtcclxuICAgICAgICAgICAgICAgICRodG1sLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzE3cHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoJy5tZnAtd3JhcCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOidzY3JvbGwnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfQldGB0YLRjCDQv9C+0LvQvtGB0LAg0L/RgNC+0LrRgNGD0YLQutC4Jyk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfQndC10YIg0L/QvtC70L7RgdGLINC/0YDQvtC60YDRg9GC0LrQuCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wb3B1cC1jbG9zZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkaHRtbCA9ICQoJ2h0bWwnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tZnAtd3JhcCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLm1mcC1iZycpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJGh0bWwuY3NzKHtcclxuICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzAnXHJcbiAgICAgICAgfSkucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZml4ZWQtaW5wdXQnKTtcclxuICAgICAgICAkKCcuaGVhZGVyLnN0aWNreScpLmNzcyh7XHJcbiAgICAgICAgICAgIC8vICdyaWdodCc6JzAnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3BvcHVwLWNsb3NlISEhIScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qcy1wb3B1cC1jbG9zZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkaHRtbCA9ICQoJ2h0bWwnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tZnAtd3JhcCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLm1mcC1iZycpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJGh0bWwuY3NzKHtcclxuICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzAnXHJcbiAgICAgICAgfSkucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgICAgICQoJy53cmFwcGVyJykucmVtb3ZlQ2xhc3MoJ2ZpeGVkLWlucHV0Jyk7XHJcbiAgICAgICAgJCgnLmhlYWRlci5zdGlja3knKS5jc3Moe1xyXG4gICAgICAgICAgICAvLyAncmlnaHQnOicwJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIHNob3dQb3B1cChcIi5oZWFkZXItcGhvbmVcIiwgJy5wb3B1cF9fcmVxdWVzdC1jYWxsJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuaGVhZGVyLWVtYWlsXCIsICcucG9wdXBfX3dyaXRlLXRvLXVzJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuanMtaGVhZGVyLWNhYmluZXRcIiwgJy5wb3B1cC1hdXRob3JpemF0aW9uJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuaGVhZGVyLWNpdHkgPiBhXCIsICcucG9wdXAtY2l0eScpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmhlYWRlci1tb2JpbGVfX2NpdHlcIiwgJy5wb3B1cC1jaXR5Jyk7XHJcbiAgICBzaG93UG9wdXAoXCIuYy1jYXJkLWNhZmVfX21lbnVcIiwgJy5wb3B1cF9fbWVudScpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmMtY2FyZC12YWNhbmN5IC5jLWJ1dHRvblwiLCAnLnBvcHVwX192YWNhbmN5Jyk7XHJcbiAgICBzaG93UG9wdXAoXCIuYy1jYXJkX21lbnVcIiwgJy5wb3B1cF9fbWVudScpO1xyXG4gICAgLy8gc2hvd1BvcHVwKFwiLmMtcmV2aWV3cy1wb3NpdGl2ZVwiLCAnLnBvcHVwX19yZXZpZXcnKTtcclxuICAgIC8vIHNob3dQb3B1cChcIi5jLXJldmlld3MtbmVnYXRpdmVcIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICBzaG93UG9wdXAoXCIuZm9vdGVyLXJldmlld3NfX2ljb25cIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICAvLyBzaG93UG9wdXAoXCIucG9wdXAtZm9yZ290LXBhc3N3b3JkXCIsICcucG9wdXBfX3JlY292ZXJ5LXBhc3N3b3JkJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuY2F0YWxvZy1wcm9kdWN0IC5jLWNhcmQtY2F0YWxvZ19faW1nXCIsICcucG9wdXAtcHJvZHVjdCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmNhdGFsb2ctcHJvZHVjdCAuYy1jYXJkLWNhdGFsb2dfX3RpdGxlXCIsICcucG9wdXAtcHJvZHVjdCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiI2xvYWRDYWtlXCIsICcucG9wdXAtY2FrZS1vcmRlcicpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmNha2UtY2FyZF9faG92ZXJcIiwgJy5wb3B1cC1jYWtlLW9yZGVyJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuanMtZWFzdGVyLWJ0blwiLCAnLnBvcHVwLWNha2Utb3JkZXInKTtcclxuICAgIHNob3dQb3B1cChcIiNsay1wcm9maWxlLXN1YnNjcmlwdGlvbi1kZWxfX29rXCIsICcucG9wdXAtc3Vic2NyaXB0aW9uLWRlbCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmpzLXBhcnR5LW9yZGVyXCIsICcucG9wdXAtcGFydHktb3JkZXInKTtcclxuICAgIHNob3dQb3B1cChcIi5jLWNhcmQtZXZlbnRfX2xpbmstLW1vcmVcIiwgJy5wb3B1cC1ldmVudCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmMtY2FyZC1ldmVudF9fbGluay0tYmFza2V0XCIsICcucG9wdXAtZXZlbnQtYmFza2V0Jyk7XHJcbiAgICBzaG93UG9wdXAoXCIuYy1jYXJkLWV2ZW50X19saW5rLS1vbmUtY2xpY2tcIiwgJy5wb3B1cC1ldmVudC1vbmUtY2xpY2snKTtcclxuICAgIHNob3dQb3B1cChcIi5leGN1cnNpb24tYnRuXCIsICcucG9wdXAtZXhjdXJzaW9uLW9yZGVyJyk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLy8gJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNjYWtlLW9yZGVyLWlzc3VlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIC8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyAgICAgJCh0aGlzKS5wYXJlbnRzKCcucG9wdXAtY2FrZS1vcmRlcicpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAvLyAgICAgJCgnLnBvcHVwLWNha2Utb3JkZXItY29uZ3JhdHVsYXRpb24nKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jLWNhcmQtZXZlbnRfX2J0bi0tY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wb3B1cC1ldmVudCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLnBvcHVwLWV2ZW50LW9uZS1jbGljaycpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5mYWN0b3J5LXBvaW50IC5jLWJ1dHRvbicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmZhY3RvcnktcG9pbnQgLnBvcHVwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcucG9wdXAtZ2FsbGVyeScpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLm1mcC1iZycpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnaHRtbCcpLmNzcyh7XHJcbiAgICAgICAgICAgICdtYXJnaW4tcmlnaHQnOicwJ1xyXG4gICAgICAgIH0pLmFkZENsYXNzKCdsb2NrLWh0bWwnKTtcclxuXHJcbiAgICAgICAgaWYod2luZG93V2lkdGggPiBkb2N1bWVudFdpZHRoKXtcclxuICAgICAgICAgICAgJCgnaHRtbCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnbWFyZ2luLXJpZ2h0JzonMTdweCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJy5tZnAtd3JhcCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnb3ZlcmZsb3cteSc6J3Njcm9sbCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfQldGB0YLRjCDQv9C+0LvQvtGB0LAg0L/RgNC+0LrRgNGD0YLQutC4Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYy1jYXJkLWV2ZW50X19idG4tLWJhc2tldCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLnBvcHVwLWV2ZW50JykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcucG9wdXAtZXZlbnQtYmFza2V0JykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucG9wdXAtZm9yZ290LXBhc3N3b3JkJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIC8vICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAvLyAgICAgJCh0aGlzKS5wYXJlbnRzKCcucG9wdXAtYXV0aG9yaXphdGlvbicpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAvLyAgICAgJCgnLnBvcHVwX19yZWNvdmVyeS1wYXNzd29yZCcpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAvLyB9KTtcclxuXHJcblxyXG4gICAgJCgnLnBvcHVwLWF1dGhvcml6YXRpb24gLnBvcHVwLWF1dGhvcml6YXRpb25fX3JlZycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLnBvcHVwLWF1dGhvcml6YXRpb24nKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5wb3B1cC1yZWcnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnBvcHVwLXJlZyAucG9wdXAtYXV0aG9yaXphdGlvbl9fYXV0aCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLnBvcHVwLXJlZycpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLnBvcHVwLWF1dGhvcml6YXRpb24nKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQvNC+0LHQuNC70YzQvdGL0LUg0LrQvdC+0L/QutC4INC/0L7QutCw0LfQsCDQv9C+0L/QsNC/0L7QsiDQoNC10LPQuNGB0YLRgNCw0YbQuNGPL9CQ0LLRgtC+0YDQuNC30LDRhtC40Y8qL1xyXG4gICAgJChcIiNtb2JpbGUtcmVnXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5wb3B1cCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLnBvcHVwLXJlZycpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLm1mcC1iZycpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdmaXhlZC1pbnB1dCcpO1xyXG4gICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnbG9jay1odG1sJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyLW1vYmlsZV9fYXV0aCcpLnJlbW92ZUNsYXNzKCcucG9wdXAtc2xpZGVfX3Nob3cnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIjbW9iaWxlLWF1dGhcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnBvcHVwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcucG9wdXAtYXV0aG9yaXphdGlvbicpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLm1mcC1iZycpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdmaXhlZC1pbnB1dCcpO1xyXG4gICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnbG9jay1odG1sJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyLW1vYmlsZV9fYXV0aCcpLnJlbW92ZUNsYXNzKCcucG9wdXAtc2xpZGVfX3Nob3cnKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAgIC8q0L/QvtC40YHQuiDQsiDRiNCw0L/QutC1Ki9cclxuICAgICQoXCIuaGVhZGVyLXNlYXJjaCAuaWNvbi1zZWFyY2gsIC5oZWFkZXItc2VhcmNoIC5zeW1ib2wtc2VhcmNoXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5oZWFkZXItc2VhcmNoX19mb3JtJykudG9nZ2xlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcuaGVhZGVyLXNlYXJjaC1yZXN1bHQnKS50b2dnbGVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQv9C+0LrQsNC3INC80L7QsdC40LvRjNC90L7Qs9C+INC/0L7QuNGB0LrQsCovXHJcbiAgICAkKFwiLmhlYWRlci1tb2JpbGVfX3NlYXJjaCAuaWNvbi1zZWFyY2gsIC5oZWFkZXItbW9iaWxlX19zZWFyY2ggLnN5bWJvbC1zZWFyY2hcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaC1ib3gnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX21lbnUnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaCAuaWNvbi1zZWFyY2gsIC5oZWFkZXItbW9iaWxlX19zZWFyY2ggLnN5bWJvbC1zZWFyY2gnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmljb24tc2VhcmNoLW1vYmlsZScpLnNob3coKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoLWlucHV0JykuZm9jdXMoKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fYXV0aCcpLnJlbW92ZUNsYXNzKCdwb3B1cC1zbGlkZV9fc2hvdycpO1xyXG4gICAgICAgIC8vICQoJy5oZWFkZXInKS5hZGRDbGFzcygnaGVhZGVyLXRvcF9faGlkZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrRgdC60YDRi9Cy0LDQtdC8INC80L7QsdC40LvRjNC90YvQuSDQv9C+0LjRgdC6Ki9cclxuICAgICQoXCIuaWNvbi1zZWFyY2gtbW9iaWxlXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2gtYm94JykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19tZW51Jykuc2hvdygpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2ggLmljb24tc2VhcmNoJykuc2hvdygpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2ggLnN5bWJvbC1zZWFyY2gnKS5zaG93KCk7XHJcbiAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgLy8gJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdoZWFkZXItdG9wX19oaWRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uIChlKSB7IC8vINGB0L7QsdGL0YLQuNC1INC60LvQuNC60LAg0L/QviDQstC10LEt0LTQvtC60YPQvNC10L3RgtGDXHJcbiAgICAgICAgdmFyIGRpdiA9ICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2gtYm94Jyk7IC8vINGC0YPRgiDRg9C60LDQt9GL0LLQsNC10LwgSUQg0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgICAgIGlmICghZGl2LmlzKGUudGFyZ2V0KSAvLyDQtdGB0LvQuCDQutC70LjQuiDQsdGL0Lsg0L3QtSDQv9C+INC90LDRiNC10LzRgyDQsdC70L7QutGDXHJcbiAgICAgICAgICAgICYmIGRpdi5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkgeyAvLyDQuCDQvdC1INC/0L4g0LXQs9C+INC00L7Rh9C10YDQvdC40Lwg0Y3Qu9C10LzQtdC90YLQsNC8XHJcblxyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fbWVudScpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaC1ib3gnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2ggLmljb24tc2VhcmNoJykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoIC5pY29uLXNlYXJjaC1tb2JpbGUnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIC8vICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnaGVhZGVyLXRvcF9faGlkZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vINC30LDQutGA0YvRgtC40LUg0L/QviDQutC70LjQutGDINCy0YHQtSDQvtCx0LvQsNGB0YLQuCDRjdC60YDQsNC90LBcclxuICAgICQoXCIucG9wdXAtYmdcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnBvcHVwJykucGFyZW50cygpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgLy8gJCgnLmZpeGVkLW92ZXJsYXknKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnYm9keS1wb3B1cCcpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyrQutC70LjQuiDQstC90LUg0L7QsdC70LDRgdGC0Lgg0Y3QutGA0LDQvdCwINC00LvRjyDQutC+0YDQt9C40L3RiyovXHJcbiAgICBmdW5jdGlvbiBoaWRlUG9wdXAgKGVsZW1lbnQsIGluc3RydW1lbnRIaWRlKXtcclxuICAgICAgICAkKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uIChlKSB7IC8vINGB0L7QsdGL0YLQuNC1INC60LvQuNC60LAg0L/QviDQstC10LEt0LTQvtC60YPQvNC10L3RgtGDXHJcbiAgICAgICAgICAgIHZhciBkaXYgPSAkKGVsZW1lbnQpOyAvLyDRgtGD0YIg0YPQutCw0LfRi9Cy0LDQtdC8IElEINGN0LvQtdC80LXQvdGC0LBcclxuICAgICAgICAgICAgaWYgKCFkaXYuaXMoZS50YXJnZXQpIC8vINC10YHQu9C4INC60LvQuNC6INCx0YvQuyDQvdC1INC/0L4g0L3QsNGI0LXQvNGDINCx0LvQvtC60YNcclxuICAgICAgICAgICAgICAgICYmIGRpdi5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkgeyAvLyDQuCDQvdC1INC/0L4g0LXQs9C+INC00L7Rh9C10YDQvdC40Lwg0Y3Qu9C10LzQtdC90YLQsNC8XHJcbiAgICAgICAgICAgICAgICBkaXYucmVtb3ZlQ2xhc3MoaW5zdHJ1bWVudEhpZGUpOyAvLyDRgdC60YDRi9Cy0LDQtdC8INC10LPQvlxyXG4gICAgICAgICAgICAgICAgLy8gJCgnLmZpeGVkLW92ZXJsYXknKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgLy8gJCgnYm9keScpLnJlbW92ZUNsYXNzKCdib2R5LXBvcHVwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDRgdC+0LHRi9GC0LjQtSDQutC70LjQutCwINC/0L4g0LLQtdCxLdC00L7QutGD0LzQtdC90YLRg1xyXG4gICAgLy8gJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSkge1xyXG4gICAgLy9cclxuICAgIC8vICAgICB2YXIgcG9wdXAgPSAkKCcucG9wdXAnKTtcclxuICAgIC8vICAgICBpZiAoIXBvcHVwLmlzKGUudGFyZ2V0KVxyXG4gICAgLy8gICAgICAgICAmJiAhcG9wdXAuaGFzKGUudGFyZ2V0KS5sZW5ndGhcclxuICAgIC8vICAgICAgICAgJiYgISQoJy5wb3B1cC1taW5pJykuaXMoZS50YXJnZXQpXHJcbiAgICAvLyAgICAgKSB7XHJcbiAgICAvLyAgICAgICAgIHBvcHVwLnBhcmVudHMoJy5tZnAtd3JhcCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAvLyAgICAgICAgICQoJy5tZnAtYmcnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgLy8gICAgICAgICAkKCdodG1sJykuY3NzKHtcclxuICAgIC8vICAgICAgICAgICAgICdtYXJnaW4tcmlnaHQnOicwJ1xyXG4gICAgLy8gICAgICAgICB9KS5yZW1vdmVDbGFzcygnbG9jay1odG1sJyk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLyrRgdC60YDRi9Cy0LDQtdC8INC/0L7Qv9Cw0L/RiyDQstC90LUg0LfQvtC90Ysg0Y3Qu9C10LzQtdC90YLQsCDQtNC70Y8g0LrQsNGA0YLQvtGH0LrQuCDRgtC+0LLQsNGA0LAqL1xyXG4gICAgJChkb2N1bWVudCkubW91c2Vkb3duKGZ1bmN0aW9uIChlKSB7IC8vINGB0L7QsdGL0YLQuNC1INC60LvQuNC60LAg0L/QviDQstC10LEt0LTQvtC60YPQvNC10L3RgtGDXHJcbiAgICAgICAgLy8gdmFyIGRpdiA9ICQoJy5wb3B1cCcpO1xyXG4gICAgICAgIC8vINGC0YPRgiDRg9C60LDQt9GL0LLQsNC10LwgSUQg0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgICAgIC8vIHZhciBkaXYyID0gJCgnLnBvcHVwLW1pbmknKTtcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGhpZGVPdXRab25lKGVsZW0sIGVsZW0yLCBlbGVtMywgZWxlbTQpe1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gJChlbGVtKTtcclxuICAgICAgICAgICAgdmFyIGRpdjIgPSAkKGVsZW0yKTtcclxuICAgICAgICAgICAgdmFyIGRpdjMgPSAkKGVsZW0zKTtcclxuICAgICAgICAgICAgdmFyIGRpdjQgPSAkKGVsZW00KTtcclxuICAgICAgICAgICAgaWYgKCFkaXYuaXMoZS50YXJnZXQpXHJcbiAgICAgICAgICAgICAgICAmJiBkaXYuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgICAgICYmICFkaXYyLmlzKGUudGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgJiYgZGl2Mi5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICAgICAgJiYgIWRpdjMuaXMoZS50YXJnZXQpXHJcbiAgICAgICAgICAgICAgICAmJiBkaXYzLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwXHJcbiAgICAgICAgICAgICAgICAmJiAhZGl2NC5pcyhlLnRhcmdldClcclxuICAgICAgICAgICAgICAgICYmIGRpdjQuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpdi5yZW1vdmVDbGFzcyhpbnN0cnVtZW50SGlkZSk7IC8vINGB0LrRgNGL0LLQsNC10Lwg0LXQs9C+XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2LnBhcmVudHMoJy5tZnAtd3JhcCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBkaXYucGFyZW50cygnaHRtbCcpLmZpbmQoJy5tZnAtYmcgJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdi5wYXJlbnRzKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpLmNzcygnbWFyZ2luLXJpZ2h0JywnMCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gZGl2LmZpbmQoJy5wb3B1cC1jbG9zZScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiYWNrVXJsJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodXJsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsIHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJiYWNrVXJsXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRpdjIucGFyZW50cygnLm1mcC13cmFwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdjIucGFyZW50cygnaHRtbCcpLmZpbmQoJy5tZnAtYmcgJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdjIucGFyZW50cygnaHRtbCcpLnJlbW92ZUNsYXNzKCdsb2NrLWh0bWwnKS5jc3MoJ21hcmdpbi1yaWdodCcsJzAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaXYzLnBhcmVudHMoJy5tZnAtd3JhcCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBkaXYzLnBhcmVudHMoJ2h0bWwnKS5maW5kKCcubWZwLWJnICcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBkaXYzLnBhcmVudHMoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbG9jay1odG1sJykuY3NzKCdtYXJnaW4tcmlnaHQnLCcwJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZGl2NC5wYXJlbnRzKCcubWZwLXdyYXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2NC5wYXJlbnRzKCdodG1sJykuZmluZCgnLm1mcC1iZyAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2NC5wYXJlbnRzKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpLmNzcygnbWFyZ2luLXJpZ2h0JywnMCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAvLyBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JhY2tVcmwnKSAhPT0gbnVsbCkge1xyXG4gICAgICAgIC8vICAgICB2YXIgc2VyaWFsT2JqID0gSlNPTi5zdHJpbmdpZnkoYmFja1VybCk7XHJcbiAgICAgICAgLy8gICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCAnL2Vhc3Rlci8nKTtcclxuICAgICAgICAvLyAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JhY2tVcmwnLCBzZXJpYWxPYmopO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiYmFja1VybFwiKTtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBpZiAoZS53aGljaCA9PT0gMSkge1xyXG4gICAgICAgICAgICBoaWRlT3V0Wm9uZSgnLnBvcHVwJywgJy5wb3B1cC1taW5pJywgJy5kYXRlcGlja2VyJywgJy5tYWluLXVzZXItY29uc2VudC1yZXF1ZXN0LXBvcHVwJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBoaWRlUG9wdXAoJy5wb3B1cC1iYXNrZXQnLCAncG9wdXAtc2xpZGVfX3Nob3cnKTtcclxuICAgIGhpZGVQb3B1cCgnLmhlYWRlci1tb2JpbGVfX2F1dGgnLCAncG9wdXAtc2xpZGVfX3Nob3cnKTtcclxuICAgIGhpZGVQb3B1cCgnLmhlYWRlci1zZWFyY2hfX2Zvcm0nLCAnaXMtdmlzaWJsZScpO1xyXG4gICAgaGlkZVBvcHVwKCcuaGVhZGVyLXNlYXJjaC1yZXN1bHQnLCAnaXMtdmlzaWJsZScpO1xyXG5cclxuXHJcbiAgICAvKtGO0L7QutC+0LLRi9C1INC60L3QvtC/0LrQuCDQvtGC0LfRi9Cy0LAqL1xyXG4gICAgdmFyICRyZXZpZXdzX2J0biA9ICQoXCIuYy1yZXZpZXdzX19idG5cIiksXHJcbiAgICAgICAgY2xpY2tDb3VudDtcclxuICAgICRyZXZpZXdzX2J0bi5hdHRyKFwiZGF0YS1jb3VudFwiLCBcIjBcIik7XHJcbiAgICB2YXIgaXNNb2JpbGUgPSB7XHJcbiAgICAgICAgQW5kcm9pZDogICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKSA/IHRydWUgOiBmYWxzZTsgfSxcclxuICAgICAgICBCbGFja0JlcnJ5OiAgICAgZnVuY3Rpb24oKSB7IHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9CbGFja0JlcnJ5L2kpID8gdHJ1ZSA6IGZhbHNlOyB9LFxyXG4gICAgICAgIGlPUzogICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQaG9uZXxpUGFkfGlQb2QvaSkgPyB0cnVlIDogZmFsc2U7IH0sXHJcbiAgICAgICAgV2luZG93czogICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvSUVNb2JpbGUvaSkgPyB0cnVlIDogZmFsc2U7IH0sXHJcbiAgICAgICAgYW55OiAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gKGlzTW9iaWxlLkFuZHJvaWQoKSB8fCBpc01vYmlsZS5CbGFja0JlcnJ5KCkgfHwgaXNNb2JpbGUuaU9TKCkgfHwgaXNNb2JpbGUuV2luZG93cygpKTsgIH1cclxuICAgIH07XHJcbiAgICBpZiAoIGlzTW9iaWxlLmFueSgpICkge1xyXG4gICAgICAgICRyZXZpZXdzX2J0bi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNsaWNrQ291bnQgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvdW50XCIpO1xyXG4gICAgICAgICAgICBjbGlja0NvdW50ICsrO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmMtcmV2aWV3c19faXRlbScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoY2xpY2tDb3VudCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvdW50XCIsIGNsaWNrQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoJy5jLXJldmlld3NfX2l0ZW0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xpY2tDb3VudCA9PSAyKXtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuYy1yZXZpZXdzX19pdGVtJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwiZGF0YS1jb3VudFwiLCBcIjBcIik7XHJcbiAgICAgICAgICAgICAgICBzaG93UG9wdXAoXCIuYy1yZXZpZXdzLXBvc2l0aXZlXCIsICcucG9wdXBfX3JldmlldycpO1xyXG4gICAgICAgICAgICAgICAgc2hvd1BvcHVwKFwiLmMtcmV2aWV3cy1uZWdhdGl2ZVwiLCAnLnBvcHVwX19yZXZpZXcnKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoICFpc01vYmlsZS5hbnkoKSApIHtcclxuICAgICAgICAkcmV2aWV3c19idG4uaG92ZXIoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY2xpY2tDb3VudCA9ICQodGhpcykuYXR0cihcImRhdGEtY291bnRcIik7XHJcbiAgICAgICAgICAgIGNsaWNrQ291bnQgKys7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuYy1yZXZpZXdzX19pdGVtJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGlmIChjbGlja0NvdW50ID09IDEpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImRhdGEtY291bnRcIiwgY2xpY2tDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmMtcmV2aWV3c19faXRlbScpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNsaWNrQ291bnQgPT0gMil7XHJcbiAgICAgICAgICAgICAgICBzaG93UG9wdXAoXCIuYy1yZXZpZXdzLXBvc2l0aXZlXCIsICcucG9wdXBfX3JldmlldycpO1xyXG4gICAgICAgICAgICAgICAgc2hvd1BvcHVwKFwiLmMtcmV2aWV3cy1uZWdhdGl2ZVwiLCAnLnBvcHVwX19yZXZpZXcnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuYy1yZXZpZXdzX19pdGVtJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwiZGF0YS1jb3VudFwiLCBcIjBcIik7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vINC80L7QsdC40LvRjNC90YvQuSDQt9Cw0LrQsNC30LDRgtGMINC30LLQvtC90L7Quiwg0L/QvtC60LDQt9GL0LLQsNC10Lwg0YTQvtGA0LzRgyDQuCDRg9C00LDQu9GP0LXQvCDQvdCw0LTQv9C40YHRjFxyXG4gICAgJChcIi5tb2JpbGUtcmVxdWVzdC1jYWxsX2lucXVpcnlcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5jc3Moe1xyXG4gICAgICAgICAgICAnb3BhY2l0eSc6ICcwJyxcclxuICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAnaGlkZGVuJyxcclxuICAgICAgICAgICAgJ2Rpc3BsYXknOidub25lJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5tb2JpbGUtcmVxdWVzdC1jYWxsX19mb3JtJykuY3NzKHtcclxuICAgICAgICAgICAgJ29wYWNpdHknOiAnMScsXHJcbiAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ3Zpc2libGUnLFxyXG4gICAgICAgICAgICAnZGlzcGxheSc6J2Jsb2NrJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrRgdC+0LPQu9Cw0YjQtdC90LjQtSDQvdCwINC+0LHRgNCw0LHQvtGC0LrRgyDQv9C10YDRgdC+0L3QsNC70YzQvdGL0YUg0LTQsNC90L3Ri9GFKi9cclxuICAgIGZ1bmN0aW9uIERpc2FibGVkRm9ybUJ1dHRvbihmb3JtLCBjaGVjaywgYnRuX2Zvcm0pe1xyXG4gICAgICAgICQoXCJmb3JtIGlucHV0W3R5cGU9J2NoZWNrYm94J11cIikub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmKCQoY2hlY2spLnByb3AoJ2NoZWNrZWQnKSl7XHJcbiAgICAgICAgICAgICAgICAkKGJ0bl9mb3JtKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNrJyk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICQoYnRuX2Zvcm0pLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2sgZWxzZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgRGlzYWJsZWRGb3JtQnV0dG9uKCcjcG9wdXAtcmVnJywnI3JlZ19fcmVndWxhdGlvbnMnLCcjcG9wdXAtcmVnIGJ1dHRvbicpO1xyXG4gICAgRGlzYWJsZWRGb3JtQnV0dG9uKCcjcG9wdXBfX3dyaXRlLXRvLXVzJywnI3dyaXRlLXRvLXVzX19yZWd1bGF0aW9ucycsJyNwb3B1cF9fd3JpdGUtdG8tdXMgYnV0dG9uJyk7XHJcbiAgICBEaXNhYmxlZEZvcm1CdXR0b24oJyNwb3B1cF9fcmVxdWVzdC1jYWxsJywnI3JlcXVlc3QtY2FsbF9fcmVndWxhdGlvbnMnLCcjcG9wdXBfX3JlcXVlc3QtY2FsbCBidXR0b24nKTtcclxuICAgIERpc2FibGVkRm9ybUJ1dHRvbignI3BvcHVwX192YWNhbmN5JywnI3ZhY2FuY3lfX3JlZ3VsYXRpb25zJywnI3BvcHVwX192YWNhbmN5IGJ1dHRvbicpO1xyXG4gICAgRGlzYWJsZWRGb3JtQnV0dG9uKCcjb3JkZXItYXV0aC1uZXcnLCcjb3JkZXItYXV0aC1uZXdfX3JlZ3VsYXRpb25zJywnI29yZGVyLWF1dGgtbmV3IGJ1dHRvbicpO1xyXG4gICAgRGlzYWJsZWRGb3JtQnV0dG9uKCcjY2FrZS1vcmRlci1mb3JtJywnI2Nha2Utb3JkZXJfX3JlZ3VsYXRpb25zJywnI2Nha2Utb3JkZXItZm9ybSBidXR0b24nKTtcclxuICAgIERpc2FibGVkRm9ybUJ1dHRvbignI2V4Y3Vyc2lvbi1mb3JtJywnI2V4Y3Vyc2lvbl9fcmVndWxhdGlvbnMnLCcjZXhjdXJzaW9uLWZvcm0gYnV0dG9uJyk7XHJcblxyXG5cclxuXHJcbiAgICAvKtC/0L7QutCw0LfRi9Cy0LDQtdC8INCyINC/0L7Qv9Cw0L/QtSDQt9Cw0LrQsNC30LDRgtGMINC30LLQvtC90L7QuiDRgdC/0LjRgdC+0Log0LPQvtGA0L7QtNC+0LIqL1xyXG4gICAgJChcIi5tb2JpbGUtcmVxdWVzdC1jYWxsX2NpdHlcIikub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrIGNsaWNrJyk7XHJcbiAgICAgICAgLy8gJCgnLnBvcHVwLXJlcXVlc3QtY2l0eScpLnNob3coKTtcclxuICAgICAgICAkKCcucG9wdXAtcmVxdWVzdC1jaXR5JykuYWRkQ2xhc3MoJ3BvcHVwLXNob3cnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoXCIucG9wdXAtcmVxdWVzdC1jaXR5XCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5wb3B1cC1yZXF1ZXN0LWNpdHknKS5yZW1vdmVDbGFzcygncG9wdXAtc2hvdycpO1xyXG4gICAgICAgIC8vICQoJy5wb3B1cC1yZXF1ZXN0LWNpdHknKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLnBvcHVwX19yZXF1ZXN0LWNhbGwnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5tZnAtYmcnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJ2h0bWwnKS5jc3Moe1xyXG4gICAgICAgICAgICAnb3ZlcmZsb3cnOidoaWRkZW4nLFxyXG4gICAgICAgICAgICAnbWFyZ2luLXJpZ2h0JzonMTdweCdcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0L/QvtC/0LDQvyDQutC+0YDQt9C40L3RiyovXHJcbiAgICAkKCcuaWNvbi1iYXNrZXQsIC5oZWFkZXIgLnN5bWJvbC1iYXNrZXQsIC5oZWFkZXIgLnN5bWJvbC1iYXNrZXQtMiwgLmhlYWRlci1iYXNrZXRfX2NvdW50Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5wb3B1cC1iYXNrZXQnKS5hZGRDbGFzcygncG9wdXAtc2xpZGVfX3Nob3cnKTtcclxuICAgICAgICAkKCcuaGVhZGVyJykuYWRkQ2xhc3MoJ2hlYWRlci10b3BfX25vLWhpZGUnKTtcclxuICAgICAgICAvLyAkKCdodG1sJykuYWRkQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnBvcHVwLWJhc2tldF9fY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnBvcHVwLWJhc2tldCcpLnJlbW92ZUNsYXNzKCdwb3B1cC1zbGlkZV9fc2hvdycpO1xyXG4gICAgICAgICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnaGVhZGVyLXRvcF9fbm8taGlkZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnBvcHVwLWJhc2tldF9fc2Nyb2xsJykub24oICdtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsJywgZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgdmFyIGUwID0gZS5vcmlnaW5hbEV2ZW50O1xyXG4gICAgICAgIHZhciBkZWx0YSA9IGUwLndoZWVsRGVsdGEgfHwgLWUwLmRldGFpbDtcclxuXHJcbiAgICAgICAgdGhpcy5zY3JvbGxUb3AgKz0gKCBkZWx0YSA8IDAgPyAxIDogLTEgKSAqIDMwO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvKtC/0YDQvtCy0LXRgNGP0LXRgiDQsiDRhNC40LvRjNGC0YDQtSDQvdCw0LvQuNGH0LjQtSDRgdC10LvQtdC60YLQsCDQuCDQtdGB0LvQuNGCINC10YHRgtGMINC00LXQu9Cw0LXRgiDRgNC+0LTQuNGC0LXQu9GMINCx0LvQvtGH0L3Ri9C8INC00LvRjyDQvtGC0L7QsdGA0LDQttC10L3QuNGPINCyINC80L7QsdC40LvRjNC90L7QuSDQstC10YDRgdC40LgqL1xyXG4gICAgJCgnLmZpbHRlcicpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgJGZpbHRlckJvZHkgPSAgJCgnLmZpbHRlci1pdGVtX19ib2R5Jyk7XHJcbiAgICAgICAgJGZpbHRlckJvZHkuaGFzKCdzZWxlY3QnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgICAkZmlsdGVyQm9keS5oYXMoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XHJcbiAgICAgICAgJGZpbHRlckJvZHkuaGFzKCdzZWxlY3QnKS5wYXJlbnRzKCcuZmlsdGVyLWl0ZW0nKS5jc3MoJ2JvcmRlcicsJ25vbmUnKTtcclxuICAgICAgICAkZmlsdGVyQm9keS5oYXMoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykucGFyZW50cygnLmZpbHRlci1pdGVtJykuY3NzKCdib3JkZXInLCdub25lJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC/0L7Rj9Cy0LvQtdC90LjQtSDRhNC40LvRjNGC0YDQsCDQsiDQvNC+0LHQuNC70YzQvdC+0Lkg0LLQtdGA0YHQuNC4Ki9cclxuXHJcbiAgICBmdW5jdGlvbiBTaG93TW9iaWxlQnRuRmlsdGVyIChidG4sIHNob3dCbG9jaykge1xyXG4gICAgICAgICQoYnRuKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2Ryb3Bkb3duLXNob3cnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncyhzaG93QmxvY2spLnNsaWRlVG9nZ2xlKDIwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBTaG93TW9iaWxlQnRuRmlsdGVyKCcuZmlsdGVyLW1vYmlsZS1idG4nLCAnLmZpbHRlcicpO1xyXG4gICAgU2hvd01vYmlsZUJ0bkZpbHRlcignLmZpbHRlci1tb2JpbGUtYnRuJywgJy5yZXZpZXdzLWZvcm0nKTtcclxuICAgIFNob3dNb2JpbGVCdG5GaWx0ZXIoJy5maWx0ZXItaG9sZC1tb2JpbGUtYnRuJywgJy5maWx0ZXItaG9sZCcpO1xyXG5cclxuXHJcblxyXG4gICAgLyrQv9C+0LrQsNC3INC/0L7QtNC80LXQvdGOINCyINC80L7QsdC40LvRjNC90L7QuSDQstC10YDRgdC40Lgg0LzQtdC90Y4qL1xyXG4gICAgJCgnLmhlYWRlci1tb2JpbGVfX2xpc3QgLmljb24tZHJvcGRvd24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdkcm9wZG93bi1zaG93Jyk7XHJcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmhlYWRlci1tb2JpbGVfX3N1Ymxpc3QnKS5zbGlkZVRvZ2dsZSgyMDApO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmhlYWRlci1tb2JpbGVfX2l0ZW0nKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtGE0YPQvdC60YbQuNGPINGB0YfQtdGC0LAg0LHQvtC70YzRiNC1L9C80LXQvdGM0YjQtSovXHJcbiAgICBmdW5jdGlvbiBjYXRhbG9nSXRlbUNvdW50ZXIoZmllbGQpIHtcclxuICAgICAgICB2YXIgZmllbGRDb3VudCA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICB2YXJcclxuICAgICAgICAgICAgICAgIC8vINCc0LjQvS4g0LfQvdCw0YfQtdC90LjQtVxyXG4gICAgICAgICAgICAgICAgbWluID0gZWwuZGF0YSgnbWluJykgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAvLyDQnNCw0LrRgS4g0LfQvdCw0YfQtdC90LjQtVxyXG4gICAgICAgICAgICAgICAgbWF4ID0gZWwuZGF0YSgnbWF4JykgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAvLyDQmtC90L7Qv9C60LAg0YPQvNC10L3RjNGI0LXQvdC40Y8g0LrQvtC7LdCy0LBcclxuICAgICAgICAgICAgICAgIGRlYyA9IGVsLnByZXYoJy5kZWMnKSxcclxuICAgICAgICAgICAgICAgIC8vINCa0L3QvtC/0LrQsCDRg9Cy0LXQu9C40YfQtdC90LjRjyDQutC+0Lst0LLQsFxyXG4gICAgICAgICAgICAgICAgaW5jID0gZWwubmV4dCgnLmluYycpO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBpbml0KGVsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWVsLmF0dHIoJ2Rpc2FibGVkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWMub24oJ2NsaWNrJywgZGVjcmVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBpbmMub24oJ2NsaWNrJywgaW5jcmVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vINCj0LzQtdC90YzRiNC40Lwg0LfQvdCw0YfQtdC90LjQtVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZGVjcmVtZW50KCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlSW50KGVsWzBdLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS0tO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1pbiB8fCB2YWx1ZSA+PSBtaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxbMF0udmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgLy8g0KPQstC10LvQuNGH0LjQvCDQt9C90LDRh9C10L3QuNC1XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbmNyZW1lbnQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VJbnQoZWxbMF0udmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSsrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1heCB8fCB2YWx1ZSA8PSBtYXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxbMF0udmFsdWUgPSB2YWx1ZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWwuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0KCQodGhpcykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICQoZmllbGQpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmaWVsZENvdW50KCQodGhpcykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gY2F0YWxvZ0l0ZW1Db3VudGVyKCcuZmllbGRDb3VudCcpO1xyXG5cclxuICAgLyrQvNC+0LHQuNC70YzQvdC+0LUg0LzQtdC90Y4qL1xyXG5cdCQoJy5oZWFkZXItbW9iaWxlX19tZW51Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuXHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ2ljb24tbWVudV9fdHJhbnNmb3JtJyk7XHJcblx0XHQkKCcuaGVhZGVyLW1vYmlsZV9fZHJvcGRvd24nKS50b2dnbGVDbGFzcygncG9wdXAtc2hvdycpO1xyXG5cdFx0Ly8gJCgnLmhlYWRlcicpLnRvZ2dsZUNsYXNzKCdoZWFkZXItdG9wX19oaWRlJyk7XHJcbiAgICAgICAgJCgnaHRtbCcpLnRvZ2dsZUNsYXNzKCdvdmVyZmxvdycpO1xyXG4gICAgICAgICQoJy5jLXJldmlld3NfX2l0ZW0nKS50b2dnbGVDbGFzcygnaXMtaGlkZScpO1xyXG5cclxuXHJcbiAgICAgICAgaWYoJCgnLmhlYWRlcicpLmhhc0NsYXNzKCdzdGlja3knKSl7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19kcm9wZG93bicpLmFkZENsYXNzKCdtZW51LXN0aWNreScpO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX2Ryb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ21lbnUtc3RpY2t5Jyk7XHJcbiAgICAgICAgfVxyXG5cdH0pO1xyXG4gICAgLy8gJCgnLmhlYWRlcicpLmhhc0NsYXNzKCcuc3RpY2t5JykuY2hpbGRyZW4oJy5oZWFkZXItbW9iaWxlX19kcm9wZG93bicpLmFkZENsYXNzKCdtZW51LXN0aWNreScpO1xyXG5cclxuICAgICQoJy5oZWFkZXItbW9iaWxlX19kcm9wZG93bi1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX21lbnUnKS50b2dnbGVDbGFzcygnaWNvbi1tZW51X190cmFuc2Zvcm0nKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fZHJvcGRvd24nKS50b2dnbGVDbGFzcygncG9wdXAtc2hvdycpO1xyXG4gICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnb3ZlcmZsb3cnKTtcclxuICAgICAgICAkKCcuYy1yZXZpZXdzX19pdGVtJykucmVtb3ZlQ2xhc3MoJ2lzLWhpZGUnKTtcclxuXHR9KTtcclxuXHJcblxyXG5cdCQoJy5oZWFkZXItbW9iaWxlX19jYWJpbmV0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuXHRcdCQoJy5oZWFkZXItbW9iaWxlX19hdXRoJykudG9nZ2xlQ2xhc3MoJ3BvcHVwLXNsaWRlX19zaG93Jyk7XHJcblx0fSk7XHJcblxyXG4gICAgLy/QutC90L7Qv9C60LAg0LLQstC10YDRhVxyXG4gICAgZnVuY3Rpb24gYmFja1RvVG9wIChidG5FbGVtLCBwYXJlbnRFbGVtKXtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gMzAwLFxyXG4gICAgICAgICAgICBvZmZzZXRfb3BhY2l0eSA9IDEyMDAsXHJcbiAgICAgICAgICAgIHNjcm9sbF90b3BfZHVyYXRpb24gPSA3MDAsXHJcbiAgICAgICAgICAgICRiYWNrX3RvX3RvcCA9ICQoYnRuRWxlbSk7XHJcbiAgICAgICAgLy/QutC90L7Qv9C60LAg0L3QsNC30LDQtFxyXG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgKCAkKHRoaXMpLnNjcm9sbFRvcCgpID4gb2Zmc2V0ICkgPyAkYmFja190b190b3AuYWRkQ2xhc3MoJ2NkLWlzLXZpc2libGUnKSA6ICRiYWNrX3RvX3RvcC5yZW1vdmVDbGFzcygnY2QtaXMtdmlzaWJsZSBjZC1mYWRlLW91dCcpO1xyXG4gICAgICAgICAgICBpZiggJCh0aGlzKS5zY3JvbGxUb3AoKSA+IG9mZnNldF9vcGFjaXR5ICkge1xyXG4gICAgICAgICAgICAgICAgJGJhY2tfdG9fdG9wLmFkZENsYXNzKCdjZC1mYWRlLW91dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRiYWNrX3RvX3RvcC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQocGFyZW50RWxlbSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwXHJcbiAgICAgICAgICAgICAgICB9LCBzY3JvbGxfdG9wX2R1cmF0aW9uXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmFja1RvVG9wKCcuY2QtdG9wJywgJ2JvZHksaHRtbCcpO1xyXG4gICAgYmFja1RvVG9wKCcucG9wdXAtcHJvZHVjdF9fYnRuLWJhY2snLCAnLnBvcHVwJyk7XHJcblxyXG5cclxuXHJcbiAgICAvKtC70LjQv9C60LDRjyDRiNCw0L/QutCwKi9cclxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgYm8gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgdmFyICRoZWFkZXIgPSAkKFwiLmhlYWRlclwiKTtcclxuICAgICAgICB2YXIgJGhlYWRlcldyYXAgPSAkKFwiLmhlYWRlci13cmFwXCIpO1xyXG4gICAgICAgIHZhciAkbG9nbyA9ICQoXCIjc3ltYm9sLWxvZ29cIik7XHJcbiAgICAgICAgdmFyICRoZWRlckhlaWdodCA9ICRoZWFkZXJXcmFwLmhlaWdodCgpO1xyXG4gICAgICAgIGlmICggYm8gPj0gMTA2ICkge1xyXG4gICAgICAgICAgICAkaGVhZGVyLmFkZENsYXNzKCdoZWFkZXItdG9wX19oaWRlJyk7XHJcbiAgICAgICAgICAgIC8vICRoZWFkZXIuYWRkQ2xhc3MoJ3N0aWNreScpO1xyXG4gICAgICAgICAgICAkaGVhZGVyV3JhcC5hZGRDbGFzcygnc3RpY2t5Jyk7XHJcbiAgICAgICAgICAgICRsb2dvLmFkZENsYXNzKCdmaXhlZC1sb2dvJyk7XHJcblxyXG4gICAgICAgICAgICAkKCdtYWluJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdwYWRkaW5nLXRvcCc6ICRoZWRlckhlaWdodFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gJGhlYWRlci5hZGRDbGFzcygnZml4ZWQtaGVhZGVyJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJGhlYWRlci5yZW1vdmVDbGFzcygnaGVhZGVyLXRvcF9faGlkZScpO1xyXG4gICAgICAgICAgICAvLyAkaGVhZGVyLnJlbW92ZUNsYXNzKCdzdGlja3knKTtcclxuICAgICAgICAgICAgJGhlYWRlcldyYXAucmVtb3ZlQ2xhc3MoJ3N0aWNreScpO1xyXG4gICAgICAgICAgICAkbG9nby5yZW1vdmVDbGFzcygnZml4ZWQtbG9nbycpO1xyXG4gICAgICAgICAgICAvLyAkaGVhZGVyLnJlbW92ZUNsYXNzKCdmaXhlZC1oZWFkZXInKTtcclxuICAgICAgICAgICAgJCgnbWFpbicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAncGFkZGluZy10b3AnOiAnMCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQutCw0YHRgtC+0LzQvdGL0Lkg0YHQtdC70LXQutGCKi9cclxuICAgICQoJy5jLXNlbGVjdCcpLlN1bW9TZWxlY3QoIHtcclxuICAgICAgICBmb3JjZUN1c3RvbVJlbmRlcmluZzogZmFsc2VcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dOZWdhdGl2ZShjbGlja0VsZW0pe1xyXG4gICAgICAgICQoY2xpY2tFbGVtKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gJCgnLnBvcHVwX19yZXZpZXcgLmMtc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIHNlbGVjdC52YWwoJzQ4Jyk7XHJcbiAgICAgICAgICAgIHNlbGVjdFswXS5zdW1vLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAvLyBzZWxlY3RbMF0uc3Vtby5zZWxlY3RJdGVtKCc0OCcpO1xyXG4gICAgICAgICAgICB2YXIgJGljb24gPSBzZWxlY3QucGFyZW50cygnLnJldmlld3MtZm9ybV9fdHlwZScpLmZpbmQoJy5yZXZpZXdzLWZvcm1fX3R5cGUtaWNvbicpO1xyXG4gICAgICAgICAgICAkaWNvbi5yZW1vdmVDbGFzcygnaWNvbi1yYWJiaXQtcG9zaXRpdmUnKTtcclxuICAgICAgICAgICAgJGljb24uYWRkQ2xhc3MoJ2ljb24tcmFiYml0LW5lZ2F0aXZlJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfRhNGD0L3QutGG0LjRjyDRgdGA0LDQsdC+0YLQsNC70LAg0L/RgNC4INC60LvQuNC60LUganMtbmVnYXRpdmUnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VsZWN0LnZhbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNob3dOZWdhdGl2ZSgnLmpzLW5lZ2F0aXZlJyk7XHJcbiAgICBzaG93TmVnYXRpdmUoJy5jLXJldmlld3MtbmVnYXRpdmUnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzaG93UG9zaXRpdmUoY2xpY2tFbGVtKXtcclxuICAgICAgICAkKGNsaWNrRWxlbSkub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdCA9ICQoJy5wb3B1cF9fcmV2aWV3IC5jLXNlbGVjdCcpO1xyXG4gICAgICAgICAgICBzZWxlY3QudmFsKCc0NycpO1xyXG4gICAgICAgICAgICBzZWxlY3RbMF0uc3Vtby5yZWxvYWQoKTtcclxuICAgICAgICAgICAgdmFyICRpY29uID0gc2VsZWN0LnBhcmVudHMoJy5yZXZpZXdzLWZvcm1fX3R5cGUnKS5maW5kKCcucmV2aWV3cy1mb3JtX190eXBlLWljb24nKTtcclxuICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoJ2ljb24tcmFiYml0LW5lZ2F0aXZlJyk7XHJcbiAgICAgICAgICAgICRpY29uLmFkZENsYXNzKCdpY29uLXJhYmJpdC1wb3NpdGl2ZScpO1xyXG4gICAgICAgICAgICAvLyBzZWxlY3RbMF0uc3Vtby5zZWxlY3RJdGVtKCc0NycpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn0YTRg9C90LrRhtC40Y8g0YHRgNCw0LHQvtGC0LDQu9CwINC/0YDQuCDQutC70LjQutC1IGpzLXBvc2l0aXZlJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdC52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzaG93UG9zaXRpdmUoJy5qcy1wb3NpdGl2ZScpO1xyXG4gICAgc2hvd1Bvc2l0aXZlKCcuYy1yZXZpZXdzLXBvc2l0aXZlJyk7XHJcblxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VSYWJiaXRGYWNlIChzZWxlY3Qpe1xyXG4gICAgICAgICQoc2VsZWN0KS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsUmV2aWV3ID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyICRpY29uID0gJCh0aGlzKS5wYXJlbnRzKCcucmV2aWV3cy1mb3JtX190eXBlJykuZmluZCgnLnJldmlld3MtZm9ybV9fdHlwZS1pY29uJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsUmV2aWV3ID09IDQ4ICkge1xyXG4gICAgICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoJ2ljb24tcmFiYml0LXBvc2l0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkaWNvbi5hZGRDbGFzcygnaWNvbi1yYWJiaXQtbmVnYXRpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRpY29uLnJlbW92ZUNsYXNzKCdpY29uLXJhYmJpdC1uZWdhdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJGljb24uYWRkQ2xhc3MoJ2ljb24tcmFiYml0LXBvc2l0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VSYWJiaXRGYWNlKCcjZm9ybV9kcm9wZG93bl9TSU1QTEVfUVVFU1RJT05fMjU3Jyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlU2VsZWN0RmFjZSAoc2VsZWN0LCB2YWx1ZSwgaWNvbl8xLCBpY29uXzIpe1xyXG4gICAgICAgICQoc2VsZWN0KS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsUmV2aWV3ID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyICRpY29uID0gJCh0aGlzKS5wYXJlbnRzKCcuYy1zZWxlY3QtbGF5b3V0JykuZmluZCgnLmMtc2VsZWN0X19pY29uJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2VTZWxlY3RGYWNlJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsUmV2aWV3ID09IHZhbHVlICkge1xyXG4gICAgICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoaWNvbl8yKTtcclxuICAgICAgICAgICAgICAgICRpY29uLmFkZENsYXNzKGljb25fMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYm95Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkaWNvbi5yZW1vdmVDbGFzcyhpY29uXzEpO1xyXG4gICAgICAgICAgICAgICAgJGljb24uYWRkQ2xhc3MoaWNvbl8yKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnaXJsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VTZWxlY3RGYWNlKCcubGstcHJvZmlsZV9fY2hpbGQtZ2VuZGVyJywgJ00nLCdpY29uLWJveS1zbWlsaW5nJywnaWNvbi1naXJsLXNtaWxpbmcnKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIC8q0L/RgNC+0YHRgtGL0LUg0YLQsNCx0YsqL1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy50YWJzLW1lbnUgYScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiY3VycmVudFwiKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG4gICAgICAgIHZhciB0YWIgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLnRhYnMtbWVudScpLnBhcmVudCgpLnNpYmxpbmdzKCcudGFiJykuZmluZChcIi50YWItY29udGVudFwiKS5ub3QodGFiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAkKHRhYikuZmFkZUluKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKnNjcm9sbCovXHJcbiAgICAvLyAkKFwiLnBvcHVwLWJhc2tldF9fc2Nyb2xsXCIpLnNjcm9sbEJveCgpO1xyXG4gICAgLy8gJCgnI3Njcm9sbGJhclknKS50aW55c2Nyb2xsYmFyKCk7XHJcblxyXG4gICAgLypob3ZlciDQsiDQvNC10L3RjiovXHJcbiAgICAvLyAkKCcuaGVhZGVyLW1lbnVfX2l0ZW0tLWFib3V0JykuaG92ZXIoIGZ1bmN0aW9uKCl7XHJcbiAgICAvLyAgICAkKCcuaGVhZGVyLXN1Ym5hdmlnYXRpb24nKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvL1xyXG4gICAgLy8gJCgnLmhlYWRlci1zdWJuYXZpZ2F0aW9uJykubW91c2VsZWF2ZShmdW5jdGlvbigpe1xyXG4gICAgLy8gICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vIH0pO1xyXG5cclxuLyrRgdC60YDQvtC7INC60LDRgNGC0YsqL1xyXG4gICAgLy8gdmFyIHRhcmdldCA9ICQoJyNtYXAnKTtcclxuICAgIC8vIHZhciB0YXJnZXRQb3MgPSB0YXJnZXQub2Zmc2V0KCkudG9wO1xyXG4gICAgLy8gdmFyIHdpbkhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgIC8vIHZhciBzY3JvbGxUb0VsZW0gPSB0YXJnZXRQb3MgLSB3aW5IZWlnaHQ7XHJcbiAgICAvLyAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCl7XHJcbiAgICAvLyAgICAgdmFyIHdpblNjcm9sbFRvcCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcbiAgICAvLyAgICAgaWYod2luU2Nyb2xsVG9wID4gc2Nyb2xsVG9FbGVtKXtcclxuICAgIC8vICAgICAgICAgLy/RgdGA0LDQsdC+0YLQsNC10YIg0LrQvtCz0LTQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LTQvtGB0LrRgNC+0LvQu9C40YIg0Log0Y3Qu9C10LzQtdC90YLRgyDRgSDQutC70LDRgdGB0L7QvCAuZWxlbVxyXG4gICAgLy8gICAgICAgICAkKHdpbmRvdykub2Zmc2V0KDYwKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvKtCf0L7RgNC+0Lkg0L3QsCDRgdGC0YDQsNC90LjRhtCw0YUg0YEgwqvRgNC10LfQuNC90L7QstC+0LnCuyDQstC10YDRgdGC0LrQvtC5INC90LXQvtCx0YXQvtC00LjQvNC+INC30L3QsNGC0Ywg0YjQuNGA0LjQvdGDINGB0LrRgNC+0LvQsdCw0YDQsCwg0YfRgtC+0LHRiyDQv9GA0LDQstC40LvRjNC90L4g0LLRi9GH0LjRgdC70LjRgtGMINGA0LDQt9C80LXRgNGLINCy0L3Rg9GC0YDQtdC90L3QuNGFINGN0LvQtdC80LXQvdGC0L7QsiDQuCDQuNGFINC/0L7Qu9C+0LbQtdC90LjQtS4g0K3RgtCwINC30LDQtNCw0YfQsCDRgNC10YjQsNC10YLRgdGPINGBINC/0L7QvNC+0YnRjNGOINGB0LvQtdC00YPRjtGJ0LXQs9C+INCw0LvQs9C+0YDQuNGC0LzQsDpcclxuXHJcbtC00L7QsdCw0LLQuNGC0Ywg0LTQstCwIGRpdiDQsiBib2R5INC4INGA0LDQt9C80LXRgdGC0LjRgtGMINC40YUg0LfQsCDQv9GA0LXQtNC10LvQsNC80Lgg0Y3QutGA0LDQvdCwO1xyXG7QvtC/0YDQtdC00LXQu9C40YLRjCDRiNC40YDQuNC90YMg0LLQvdGD0YLRgNC10L3QvdC10LPQviBkaXY7XHJcbtGD0YHRgtCw0L3QvtCy0LjRgtGMINC30L3QsNGH0LXQvdC40LUgwqtzY3JvbGzCuyDRgdCy0L7QudGB0YLQstCwIG92ZXJmbG93INGDINCy0L3QtdGI0L3QtdCz0L4gZGl2O1xyXG7QvtC/0Y/RgtGMINC+0L/RgNC10LTQtdC70LjRgtGMINGI0LjRgNC40L3RgyDQstC90YPRgtGA0LXQvdC90LXQs9C+IGRpdjtcclxu0YPQtNCw0LvQuNGC0Ywg0L7QsdCwIGRpdjtcclxu0LLQtdGA0L3Rg9GC0Ywg0YDQsNC30L3QuNGG0YMg0LzQtdC20LTRgyDQuNC30LzQtdGA0LXQvdC90YvQvNC4INGA0LDQvdC10LUg0LfQvdCw0YfQtdC90LjRj9C80Lgg0YjQuNGA0LjQvdGLLiovXHJcbiAgICAvLyBmdW5jdGlvbiBzY3JvbGxiYXJXaWR0aCgpIHtcclxuICAgIC8vICAgICB2YXIgZGl2ID0gJCgnPGRpdiBzdHlsZT1cIndpZHRoOjUwcHg7IGhlaWdodDo1MHB4OyBvdmVyZmxvdzpoaWRkZW47IHBvc2l0aW9uOmFic29sdXRlOyB0b3A6LTIwMHB4OyBsZWZ0Oi0yMDBweDtcIj48ZGl2IHN0eWxlPVwiaGVpZ2h0OjEwMHB4O1wiPjwvZGl2PjwvZGl2PicpLmFwcGVuZFRvKCdib2R5Jyk7XHJcbiAgICAvLyAgICAgdmFyIHcxID0gJCgnZGl2JywgZGl2KS5pbm5lcldpZHRoKCk7XHJcbiAgICAvLyAgICAgZGl2LmNzcygnb3ZlcmZsb3cteScsICdzY3JvbGwnKTtcclxuICAgIC8vICAgICB2YXIgdzIgPSAkKCdkaXYnLCBkaXYpLmlubmVyV2lkdGgoKTtcclxuICAgIC8vICAgICAkKGRpdikucmVtb3ZlKCk7XHJcbiAgICAvLyAgICAgcmV0dXJuICh3MSAtIHcyKTtcclxuICAgIC8vIH1cclxuICAgIC8vXHJcbiAgICAvLyB2YXIgcmVzU2Nyb2xsV2lkdG4gPSBzY3JvbGxiYXJXaWR0aCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ9Co0LjRgNC40L3QsCDRgdC60YDQvtC70LHQsNGA0LAg0YHRgtGA0LDQvdC40YbRizogJyArIHJlc1Njcm9sbFdpZHRuKTtcclxuXHJcbn0pO1xyXG5cclxuXHJcblxyXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuLy8gfSk7XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1jdXN0b20jIyNcclxuLy9cclxuLy8gXHQkYm9keSA9ICQoJ2JvZHknKTtcclxuLy8gXHR3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG4vLyBcdHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuLy9cclxuLy8gXHRwYWdlV2lkZ2V0KFsnaW5kZXgnXSk7XHJcbi8vIFx0Z2V0QWxsQ2xhc3NlcygnaHRtbCcsJy5lbGVtZW50c19saXN0Jyk7XHJcbi8vIH0pO1xyXG4vL1xyXG4vLyAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbi8vIFx0bG9hZEZ1bmMoKTtcclxuLy8gfSk7XHJcbi8vXHJcbi8vICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4vLyBcdHJlc2l6ZUZ1bmMoKTtcclxuLy8gfSk7XHJcbi8vXHJcbi8vICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG4vLyBcdHNjcm9sbEZ1bmMoKTtcclxuLy8gfSk7XHJcbi8vXHJcbi8vIGZ1bmN0aW9uIGxvYWRGdW5jKCkge1xyXG4vL1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIHJlc2l6ZUZ1bmMoKSB7XHJcbi8vIFx0dXBkYXRlU2l6ZXMoKTtcclxuLy8gfVxyXG4vL1xyXG4vLyBmdW5jdGlvbiBzY3JvbGxGdW5jKCkge1xyXG4vLyBcdHVwZGF0ZVNpemVzKCk7XHJcbi8vIH1cclxuLy9cclxuLy8gZnVuY3Rpb24gdXBkYXRlU2l6ZXMoKSB7XHJcbi8vIFx0d2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuLy8gXHR3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbi8vIH1cclxuXHJcbi8vIGlmICgnb2JqZWN0Rml0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgPT09IGZhbHNlKSB7XHJcbi8vIFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuLy8gXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nW2RhdGEtb2JqZWN0LWZpdF0nKSwgZnVuY3Rpb24gKGltYWdlKSB7XHJcbi8vIFx0XHRcdChpbWFnZS5ydW50aW1lU3R5bGUgfHwgaW1hZ2Uuc3R5bGUpLmJhY2tncm91bmQgPSAndXJsKFwiJyArIGltYWdlLnNyYyArICdcIikgbm8tcmVwZWF0IDUwJS8nICsgKGltYWdlLmN1cnJlbnRTdHlsZSA/IGltYWdlLmN1cnJlbnRTdHlsZVsnb2JqZWN0LWZpdCddIDogaW1hZ2UuZ2V0QXR0cmlidXRlKCdkYXRhLW9iamVjdC1maXQnKSk7XHJcbi8vXHJcbi8vIFx0XHRcdGltYWdlLnNyYyA9ICdkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPVxcJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFwnIHdpZHRoPVxcJycgKyBpbWFnZS53aWR0aCArICdcXCcgaGVpZ2h0PVxcJycgKyBpbWFnZS5oZWlnaHQgKyAnXFwnJTNFJTNDL3N2ZyUzRSc7XHJcbi8vIFx0XHR9KTtcclxuLy8gXHR9KTtcclxuLy8gfVxyXG5cclxuLy9GdW5jdGlvbnMgZm9yIGRldmVsb3BtZW50XHJcbi8vIGZ1bmN0aW9uIGdldEFsbENsYXNzZXMoY29udGV4dCwgb3V0cHV0KSB7XHJcbi8vIFx0dmFyIGZpbmFsQXJyYXkgPSBbXSxcclxuLy8gXHRcdG1haW5BcnJheSA9IFtdLFxyXG4vLyBcdFx0YWxsRWxlbWVudHMgPSAkKGNvbnRleHQpLmZpbmQoJCgnKicpKTsvL2dldCBhbGwgZWxlbWVudHMgb2Ygb3VyIHBhZ2VcclxuLy8gXHQvL0lmIGVsZW1lbnQgaGFzIGNsYXNzIHB1c2ggdGhpcyBjbGFzcyB0byBtYWluQXJyYXlcclxuLy8gXHRmb3IgKHZhciBpID0gMDsgaSA8IGFsbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbi8vIFx0XHR2YXIgc29tZUVsZW1lbnQgPSBhbGxFbGVtZW50c1tpXSxcclxuLy8gXHRcdFx0ZWxlbWVudENsYXNzID0gc29tZUVsZW1lbnQuY2xhc3NOYW1lO1xyXG4vLyBcdFx0aWYgKGVsZW1lbnRDbGFzcy5sZW5ndGggPiAwKSB7Ly9pZiBlbGVtZW50IGhhdmUgbm90IGVtcHR5IGNsYXNzXHJcbi8vIFx0XHRcdC8vSWYgZWxlbWVudCBoYXZlIG11bHRpcGxlIGNsYXNzZXMgLSBzZXBhcmF0ZSB0aGVtXHJcbi8vIFx0XHRcdHZhciBlbGVtZW50Q2xhc3NBcnJheSA9IGVsZW1lbnRDbGFzcy5zcGxpdCgnICcpLFxyXG4vLyBcdFx0XHRcdGNsYXNzZXNBbW91bnQgPSBlbGVtZW50Q2xhc3NBcnJheS5sZW5ndGg7XHJcbi8vIFx0XHRcdGlmIChjbGFzc2VzQW1vdW50ID09PSAxKSB7XHJcbi8vIFx0XHRcdFx0bWFpbkFycmF5LnB1c2goJy4nICsgZWxlbWVudENsYXNzQXJyYXlbMF0gKyAnIHsnKTtcclxuLy8gXHRcdFx0fSBlbHNlIHtcclxuLy8gXHRcdFx0XHR2YXIgY2FzY2FkID0gJy4nICsgZWxlbWVudENsYXNzQXJyYXlbMF0gKyAnIHsnO1xyXG4vLyBcdFx0XHRcdGZvciAodmFyIGogPSAxOyBqIDwgZWxlbWVudENsYXNzQXJyYXkubGVuZ3RoOyBqKyspIHtcclxuLy8gXHRcdFx0XHRcdGNhc2NhZCArPSAnICYuJyArIGVsZW1lbnRDbGFzc0FycmF5W2pdICsgJyB7IH0nO1xyXG4vLyBcdFx0XHRcdH1cclxuLy8gXHRcdFx0XHRtYWluQXJyYXkucHVzaChjYXNjYWQpO1xyXG4vLyBcdFx0XHR9XHJcbi8vIFx0XHR9XHJcbi8vIFx0fVxyXG5cclxuXHQvL2NyZWF0aW5nIGZpbmFsQXJyYXksIHRoYXQgZG9uJ3QgaGF2ZSByZXBlYXRpbmcgZWxlbWVudHNcclxuLy8gXHR2YXIgbm9SZXBlYXRpbmdBcnJheSA9IHVuaXF1ZShtYWluQXJyYXkpO1xyXG4vLyBcdG5vUmVwZWF0aW5nQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4vLyBcdFx0dmFyIGhhcyA9IGZhbHNlO1xyXG4vLyBcdFx0dmFyIHByZVdvcmRzID0gaXRlbS5zcGxpdCgnJicpO1xyXG4vLyBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBmaW5hbEFycmF5Lmxlbmd0aDsgKytpKSB7XHJcbi8vIFx0XHRcdHZhciBuZXdXb3JkcyA9IGZpbmFsQXJyYXlbaV0uc3BsaXQoJyYnKTtcclxuLy8gXHRcdFx0aWYgKG5ld1dvcmRzWzBdID09IHByZVdvcmRzWzBdKSB7XHJcbi8vIFx0XHRcdFx0aGFzID0gdHJ1ZTtcclxuLy8gXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHByZVdvcmRzLmxlbmd0aDsgKytqKSB7XHJcbi8vIFx0XHRcdFx0XHRpZiAobmV3V29yZHMuaW5kZXhPZihwcmVXb3Jkc1tqXSkgPCAwKSB7XHJcbi8vIFx0XHRcdFx0XHRcdG5ld1dvcmRzLnB1c2gocHJlV29yZHNbal0pO1xyXG4vLyBcdFx0XHRcdFx0fVxyXG4vLyBcdFx0XHRcdH1cclxuLy8gXHRcdFx0XHRmaW5hbEFycmF5W2ldID0gbmV3V29yZHMuam9pbignJicpO1xyXG4vLyBcdFx0XHR9XHJcbi8vIFx0XHR9XHJcbi8vIFx0XHRpZiAoIWhhcykge1xyXG4vLyBcdFx0XHRmaW5hbEFycmF5LnB1c2goaXRlbSk7XHJcbi8vIFx0XHR9XHJcbi8vIFx0fSk7XHJcbi8vIFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBmaW5hbEFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbi8vIFx0XHQkKCc8ZGl2PicgKyBmaW5hbEFycmF5W2ldICsgJyB9PC9kaXY+JykuYXBwZW5kVG8ob3V0cHV0KTtcclxuLy8gXHR9XHJcbi8vXHJcbi8vIFx0Ly9mdW5jdGlvbiB0aGF0IGRlbGV0ZSByZXBlYXRpbmcgZWxlbWVudHMgZnJvbSBhcnJheXMsIGZvciBtb3JlIGluZm9ybWF0aW9uIHZpc2l0IGh0dHA6Ly9tYXRoaGVscHBsYW5ldC5jb20vc3RhdGljLnBocD9wPWphdmFzY3JpcHQtYWxnb3JpdG15LW9icmFib3RraS1tYXNzaXZvdlxyXG4vLyBcdGZ1bmN0aW9uIHVuaXF1ZShBKSB7XHJcbi8vIFx0XHR2YXIgbiA9IEEubGVuZ3RoLCBrID0gMCwgQiA9IFtdO1xyXG4vLyBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuLy8gXHRcdFx0dmFyIGogPSAwO1xyXG4vLyBcdFx0XHR3aGlsZSAoaiA8IGsgJiYgQltqXSAhPT0gQVtpXSkgaisrO1xyXG4vLyBcdFx0XHRpZiAoaiA9PSBrKSBCW2srK10gPSBBW2ldO1xyXG4vLyBcdFx0fVxyXG4vLyBcdFx0cmV0dXJuIEI7XHJcbi8vIFx0fVxyXG4vLyB9XHJcbi8qXHJcbmZ1bmN0aW9uIHBhZ2VXaWRnZXQocGFnZXMpIHtcclxuXHR2YXIgd2lkZ2V0V3JhcCA9ICQoJzxkaXYgY2xhc3M9XCJ3aWRnZXRfd3JhcFwiPjx1bCBjbGFzcz1cIndpZGdldF9saXN0XCI+PC91bD48L2Rpdj4nKTtcclxuXHR3aWRnZXRXcmFwLnByZXBlbmRUbyhcImJvZHlcIik7XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0JCgnPGxpIGNsYXNzPVwid2lkZ2V0X2l0ZW1cIj48YSBjbGFzcz1cIndpZGdldF9saW5rXCIgaHJlZj1cIicgKyBwYWdlc1tpXSArICcuaHRtbCcgKyAnXCI+JyArIHBhZ2VzW2ldICsgJzwvYT48L2xpPicpLmFwcGVuZFRvKCcud2lkZ2V0X2xpc3QnKTtcclxuXHR9XHJcblx0dmFyIHdpZGdldFN0aWxpemF0aW9uID0gJCgnPHN0eWxlPmJvZHkge3Bvc2l0aW9uOnJlbGF0aXZlfSAud2lkZ2V0X3dyYXB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3otaW5kZXg6OTk5OTtwYWRkaW5nOjEwcHggMjBweDtiYWNrZ3JvdW5kOiMyMjI7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MTBweDstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3RyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtMTAwJSwwKTstbXMtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtMTAwJSwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlKC0xMDAlLDApfS53aWRnZXRfd3JhcDphZnRlcntjb250ZW50OlwiIFwiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MTAwJTt3aWR0aDoyNHB4O2hlaWdodDoyNHB4O2JhY2tncm91bmQ6IzIyMiB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQWdNQUFBQmluUmZ5QUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUF4UVRGUkYvLy8vLy8vL0FBQUEvLy8vQlFCa3dnQUFBQU4wVWs1VHhNTUFqQWQrendBQUFDTkpSRUZVQ05kanFQLy8veS9EZnlCZytMVnExWG9vOFc4L0NrRllBbXdBMEtnL0FGY0FOVDVmZTdsNEFBQUFBRWxGVGtTdVFtQ0MpIG5vLXJlcGVhdCA1MCUgNTAlO2N1cnNvcjpwb2ludGVyfS53aWRnZXRfd3JhcDpob3Zlcnstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoMCwwKTstbXMtdHJhbnNmb3JtOnRyYW5zbGF0ZSgwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUoMCwwKX0ud2lkZ2V0X2l0ZW17cGFkZGluZzowIDAgMTBweH0ud2lkZ2V0X2xpbmt7Y29sb3I6I2ZmZjt0ZXh0LWRlY29yYXRpb246bm9uZTtmb250LXNpemU6MTVweDt9LndpZGdldF9saW5rOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9IDwvc3R5bGU+Jyk7XHJcblx0d2lkZ2V0U3RpbGl6YXRpb24ucHJlcGVuZFRvKFwiLndpZGdldF93cmFwXCIpO1xyXG59XHJcbiovXHJcblxyXG4vKlxyXG5cdEJ5IE9zdmFsZGFzIFZhbHV0aXMsIHd3dy5vc3ZhbGRhcy5pbmZvXHJcblx0QXZhaWxhYmxlIGZvciB1c2UgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXHJcbiovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG47KCBmdW5jdGlvbiAoIGRvY3VtZW50LCB3aW5kb3csIGluZGV4IClcclxue1xyXG4gICAgdmFyIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcuYy1pbnB1dGZpbGVfX2lucHV0JyApO1xyXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCggaW5wdXRzLCBmdW5jdGlvbiggaW5wdXQgKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBsYWJlbFx0ID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLFxyXG4gICAgICAgICAgICBsYWJlbFZhbCA9IGxhYmVsLmlubmVySFRNTDtcclxuXHJcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lciggJ2NoYW5nZScsIGZ1bmN0aW9uKCBlIClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9ICcnO1xyXG4gICAgICAgICAgICBpZiggdGhpcy5maWxlcyAmJiB0aGlzLmZpbGVzLmxlbmd0aCA+IDEgKVxyXG4gICAgICAgICAgICAgICAgZmlsZU5hbWUgPSAoIHRoaXMuZ2V0QXR0cmlidXRlKCAnZGF0YS1tdWx0aXBsZS1jYXB0aW9uJyApIHx8ICcnICkucmVwbGFjZSggJ3tjb3VudH0nLCB0aGlzLmZpbGVzLmxlbmd0aCApO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGUudGFyZ2V0LnZhbHVlLnNwbGl0KCAnXFxcXCcgKS5wb3AoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCBmaWxlTmFtZSApXHJcbiAgICAgICAgICAgICAgICBsYWJlbC5xdWVyeVNlbGVjdG9yKCAnc3BhbicgKS5pbm5lckhUTUwgPSBmaWxlTmFtZTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gbGFiZWxWYWw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEZpcmVmb3ggYnVnIGZpeFxyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoICdmb2N1cycsIGZ1bmN0aW9uKCl7IGlucHV0LmNsYXNzTGlzdC5hZGQoICdoYXMtZm9jdXMnICk7IH0pO1xyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoICdibHVyJywgZnVuY3Rpb24oKXsgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSggJ2hhcy1mb2N1cycgKTsgfSk7XHJcbiAgICB9KTtcclxufSggZG9jdW1lbnQsIHdpbmRvdywgMCApKTtcclxuIl19

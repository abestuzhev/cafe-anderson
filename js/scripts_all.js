// document.body.onload = function(){
//     setTimeout(function(){
//         var preloader = document.getElementById('page-preloader');
//         if(!preloader.classList.contains('done')){
//             preloader.classList.add('done');
//         }
//     }, 1000);
// };

/*новый прелоудер*/
document.body.onload = function(){

    if(document.body.classList.contains('is-content-hidden')){
        document.body.classList.add('visible');
    }

    document.body.classList.add('onloadContent');

};



// функция подключения всех скриптов
// function dynamicallyLoadScript() {

//     var script,
//         listScripts = document.getElementById('listScripts'),
//         src = [
//             // 'https://api-maps.yandex.ru/2.1/?lang=ru_RU',
//             './js/custom-map.js',
//             './bower_components/jquery-mask-plugin/dist/jquery.mask.js',
//             './js/jscrollpane/jquery.mousewheel.js',
//             './js/jscrollpane/jquery.jscrollpane.min.js',
//             // 'https://abestuzhev.github.io/cafe-anderson/bower_components/tooltipster/dist/js/tooltipster.bundle.js',
//             './js/simplebar.js',
//             './js/owlcarousel/owl.carousel.js',
//             './bower_components/sumoselect/jquery.sumoselect.js',
//             './bower_components/fotorama/fotorama.js'
//         ];

//     for(var i = 0; i < src.length; i++){
//         script = document.createElement("script");
//         script.src = src[i];
//         listScripts.appendChild(script);
//     }  
// };

//   dynamicallyLoadScript();

/**
 * tooltipster http://iamceege.github.io/tooltipster/
 * A rockin' custom tooltip jQuery plugin
 * Developed by Caleb Jacob and Louis Ameline
 * MIT license
 */
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module unless amdModuleId is set
    define(["jquery"], function (a0) {
      return (factory(a0));
    });
  } else if (typeof exports === 'object') {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory(require("jquery"));
  } else {
    factory(jQuery);
  }
}(this, function ($) {

// This file will be UMDified by a build task.

var defaults = {
		animation: 'fade',
		animationDuration: 350,
		content: null,
		contentAsHTML: false,
		contentCloning: false,
		debug: true,
		delay: 300,
		delayTouch: [300, 500],
		functionInit: null,
		functionBefore: null,
		functionReady: null,
		functionAfter: null,
		functionFormat: null,
		IEmin: 6,
		interactive: false,
		multiple: false,
		// will default to document.body, or must be an element positioned at (0, 0)
		// in the document, typically like the very top views of an app.
		parent: null,
		plugins: ['sideTip'],
		repositionOnScroll: false,
		restoration: 'none',
		selfDestruction: true,
		theme: [],
		timer: 0,
		trackerInterval: 500,
		trackOrigin: false,
		trackTooltip: false,
		trigger: 'hover',
		triggerClose: {
			click: false,
			mouseleave: false,
			originClick: false,
			scroll: false,
			tap: false,
			touchleave: false
		},
		triggerOpen: {
			click: false,
			mouseenter: false,
			tap: false,
			touchstart: false
		},
		updateAnimation: 'rotate',
		zIndex: 9999999
	},
	// we'll avoid using the 'window' global as a good practice but npm's
	// jquery@<2.1.0 package actually requires a 'window' global, so not sure
	// it's useful at all
	win = (typeof window != 'undefined') ? window : null,
	// env will be proxied by the core for plugins to have access its properties
	env = {
		// detect if this device can trigger touch events. Better have a false
		// positive (unused listeners, that's ok) than a false negative.
		// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js
		// http://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript
		hasTouchCapability: !!(
			win
			&&	(	'ontouchstart' in win
				||	(win.DocumentTouch && win.document instanceof win.DocumentTouch)
				||	win.navigator.maxTouchPoints
			)
		),
		hasTransitions: transitionSupport(),
		IE: false,
		// don't set manually, it will be updated by a build task after the manifest
		semVer: '4.2.5',
		window: win
	},
	core = function() {
		
		// core variables
		
		// the core emitters
		this.__$emitterPrivate = $({});
		this.__$emitterPublic = $({});
		this.__instancesLatestArr = [];
		// collects plugin constructors
		this.__plugins = {};
		// proxy env variables for plugins who might use them
		this._env = env;
	};

// core methods
core.prototype = {
	
	/**
	 * A function to proxy the public methods of an object onto another
	 *
	 * @param {object} constructor The constructor to bridge
	 * @param {object} obj The object that will get new methods (an instance or the core)
	 * @param {string} pluginName A plugin name for the console log message
	 * @return {core}
	 * @private
	 */
	__bridge: function(constructor, obj, pluginName) {
		
		// if it's not already bridged
		if (!obj[pluginName]) {
			
			var fn = function() {};
			fn.prototype = constructor;
			
			var pluginInstance = new fn();
			
			// the _init method has to exist in instance constructors but might be missing
			// in core constructors
			if (pluginInstance.__init) {
				pluginInstance.__init(obj);
			}
			
			$.each(constructor, function(methodName, fn) {
				
				// don't proxy "private" methods, only "protected" and public ones
				if (methodName.indexOf('__') != 0) {
					
					// if the method does not exist yet
					if (!obj[methodName]) {
						
						obj[methodName] = function() {
							return pluginInstance[methodName].apply(pluginInstance, Array.prototype.slice.apply(arguments));
						};
						
						// remember to which plugin this method corresponds (several plugins may
						// have methods of the same name, we need to be sure)
						obj[methodName].bridged = pluginInstance;
					}
					else if (defaults.debug) {
						
						console.log('The '+ methodName +' method of the '+ pluginName
							+' plugin conflicts with another plugin or native methods');
					}
				}
			});
			
			obj[pluginName] = pluginInstance;
		}
		
		return this;
	},
	
	/**
	 * For mockup in Node env if need be, for testing purposes
	 *
	 * @return {core}
	 * @private
	 */
	__setWindow: function(window) {
		env.window = window;
		return this;
	},
	
	/**
	 * Returns a ruler, a tool to help measure the size of a tooltip under
	 * various settings. Meant for plugins
	 * 
	 * @see Ruler
	 * @return {object} A Ruler instance
	 * @protected
	 */
	_getRuler: function($tooltip) {
		return new Ruler($tooltip);
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_off: function() {
		this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_on: function() {
		this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_one: function() {
		this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Returns (getter) or adds (setter) a plugin
	 *
	 * @param {string|object} plugin Provide a string (in the full form
	 * "namespace.name") to use as as getter, an object to use as a setter
	 * @return {object|core}
	 * @protected
	 */
	_plugin: function(plugin) {
		
		var self = this;
		
		// getter
		if (typeof plugin == 'string') {
			
			var pluginName = plugin,
				p = null;
			
			// if the namespace is provided, it's easy to search
			if (pluginName.indexOf('.') > 0) {
				p = self.__plugins[pluginName];
			}
			// otherwise, return the first name that matches
			else {
				$.each(self.__plugins, function(i, plugin) {
					
					if (plugin.name.substring(plugin.name.length - pluginName.length - 1) == '.'+ pluginName) {
						p = plugin;
						return false;
					}
				});
			}
			
			return p;
		}
		// setter
		else {
			
			// force namespaces
			if (plugin.name.indexOf('.') < 0) {
				throw new Error('Plugins must be namespaced');
			}
			
			self.__plugins[plugin.name] = plugin;
			
			// if the plugin has core features
			if (plugin.core) {
				
				// bridge non-private methods onto the core to allow new core methods
				self.__bridge(plugin.core, self, plugin.name);
			}
			
			return this;
		}
	},
	
	/**
	 * Trigger events on the core emitters
	 * 
	 * @returns {core}
	 * @protected
	 */
	_trigger: function() {
		
		var args = Array.prototype.slice.apply(arguments);
		
		if (typeof args[0] == 'string') {
			args[0] = { type: args[0] };
		}
		
		// note: the order of emitters matters
		this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, args);
		this.__$emitterPublic.trigger.apply(this.__$emitterPublic, args);
		
		return this;
	},
	
	/**
	 * Returns instances of all tooltips in the page or an a given element
	 *
	 * @param {string|HTML object collection} selector optional Use this
	 * parameter to restrict the set of objects that will be inspected
	 * for the retrieval of instances. By default, all instances in the
	 * page are returned.
	 * @return {array} An array of instance objects
	 * @public
	 */
	instances: function(selector) {
		
		var instances = [],
			sel = selector || '.tooltipstered';
		
		$(sel).each(function() {
			
			var $this = $(this),
				ns = $this.data('tooltipster-ns');
			
			if (ns) {
				
				$.each(ns, function(i, namespace) {
					instances.push($this.data(namespace));
				});
			}
		});
		
		return instances;
	},
	
	/**
	 * Returns the Tooltipster objects generated by the last initializing call
	 *
	 * @return {array} An array of instance objects
	 * @public
	 */
	instancesLatest: function() {
		return this.__instancesLatestArr;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_off() instead)
	 *
	 * @return {core}
	 * @public
	 */
	off: function() {
		this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_on() instead)
	 *
	 * @return {core}
	 * @public
	 */
	on: function() {
		this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_one() instead)
	 * 
	 * @return {core}
	 * @public
	 */
	one: function() {
		this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Returns all HTML elements which have one or more tooltips
	 *
	 * @param {string} selector optional Use this to restrict the results
	 * to the descendants of an element
	 * @return {array} An array of HTML elements
	 * @public
	 */
	origins: function(selector) {
		
		var sel = selector ?
			selector +' ' :
			'';
		
		return $(sel +'.tooltipstered').toArray();
	},
	
	/**
	 * Change default options for all future instances
	 *
	 * @param {object} d The options that should be made defaults
	 * @return {core}
	 * @public
	 */
	setDefaults: function(d) {
		$.extend(defaults, d);
		return this;
	},
	
	/**
	 * For users to trigger their handlers on the public emitter
	 * 
	 * @returns {core}
	 * @public
	 */
	triggerHandler: function() {
		this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	}
};

// $.tooltipster will be used to call core methods
$.tooltipster = new core();

// the Tooltipster instance class (mind the capital T)
$.Tooltipster = function(element, options) {
	
	// list of instance variables
	
	// stack of custom callbacks provided as parameters to API methods
	this.__callbacks = {
		close: [],
		open: []
	};
	// the schedule time of DOM removal
	this.__closingTime;
	// this will be the user content shown in the tooltip. A capital "C" is used
	// because there is also a method called content()
	this.__Content;
	// for the size tracker
	this.__contentBcr;
	// to disable the tooltip after destruction
	this.__destroyed = false;
	// we can't emit directly on the instance because if a method with the same
	// name as the event exists, it will be called by jQuery. Se we use a plain
	// object as emitter. This emitter is for internal use by plugins,
	// if needed.
	this.__$emitterPrivate = $({});
	// this emitter is for the user to listen to events without risking to mess
	// with our internal listeners
	this.__$emitterPublic = $({});
	this.__enabled = true;
	// the reference to the gc interval
	this.__garbageCollector;
	// various position and size data recomputed before each repositioning
	this.__Geometry;
	// the tooltip position, saved after each repositioning by a plugin
	this.__lastPosition;
	// a unique namespace per instance
	this.__namespace = 'tooltipster-'+ Math.round(Math.random()*1000000);
	this.__options;
	// will be used to support origins in scrollable areas
	this.__$originParents;
	this.__pointerIsOverOrigin = false;
	// to remove themes if needed
	this.__previousThemes = [];
	// the state can be either: appearing, stable, disappearing, closed
	this.__state = 'closed';
	// timeout references
	this.__timeouts = {
		close: [],
		open: null
	};
	// store touch events to be able to detect emulated mouse events
	this.__touchEvents = [];
	// the reference to the tracker interval
	this.__tracker = null;
	// the element to which this tooltip is associated
	this._$origin;
	// this will be the tooltip element (jQuery wrapped HTML element).
	// It's the job of a plugin to create it and append it to the DOM
	this._$tooltip;
	
	// launch
	this.__init(element, options);
};

$.Tooltipster.prototype = {
	
	/**
	 * @param origin
	 * @param options
	 * @private
	 */
	__init: function(origin, options) {
		
		var self = this;
		
		self._$origin = $(origin);
		self.__options = $.extend(true, {}, defaults, options);
		
		// some options may need to be reformatted
		self.__optionsFormat();
		
		// don't run on old IE if asked no to
		if (	!env.IE
			||	env.IE >= self.__options.IEmin
		) {
			
			// note: the content is null (empty) by default and can stay that
			// way if the plugin remains initialized but not fed any content. The
			// tooltip will just not appear.
			
			// let's save the initial value of the title attribute for later
			// restoration if need be.
			var initialTitle = null;
			
			// it will already have been saved in case of multiple tooltips
			if (self._$origin.data('tooltipster-initialTitle') === undefined) {
				
				initialTitle = self._$origin.attr('title');
				
				// we do not want initialTitle to be "undefined" because
				// of how jQuery's .data() method works
				if (initialTitle === undefined) initialTitle = null;
				
				self._$origin.data('tooltipster-initialTitle', initialTitle);
			}
			
			// If content is provided in the options, it has precedence over the
			// title attribute.
			// Note: an empty string is considered content, only 'null' represents
			// the absence of content.
			// Also, an existing title="" attribute will result in an empty string
			// content
			if (self.__options.content !== null) {
				self.__contentSet(self.__options.content);
			}
			else {
				
				var selector = self._$origin.attr('data-tooltip-content'),
					$el;
				
				if (selector){
					$el = $(selector);
				}
				
				if ($el && $el[0]) {
					self.__contentSet($el.first());
				}
				else {
					self.__contentSet(initialTitle);
				}
			}
			
			self._$origin
				// strip the title off of the element to prevent the default tooltips
				// from popping up
				.removeAttr('title')
				// to be able to find all instances on the page later (upon window
				// events in particular)
				.addClass('tooltipstered');
			
			// set listeners on the origin
			self.__prepareOrigin();
			
			// set the garbage collector
			self.__prepareGC();
			
			// init plugins
			$.each(self.__options.plugins, function(i, pluginName) {
				self._plug(pluginName);
			});
			
			// to detect swiping
			if (env.hasTouchCapability) {
				$(env.window.document.body).on('touchmove.'+ self.__namespace +'-triggerOpen', function(event) {
					self._touchRecordEvent(event);
				});
			}
			
			self
				// prepare the tooltip when it gets created. This event must
				// be fired by a plugin
				._on('created', function() {
					self.__prepareTooltip();
				})
				// save position information when it's sent by a plugin
				._on('repositioned', function(e) {
					self.__lastPosition = e.position;
				});
		}
		else {
			self.__options.disabled = true;
		}
	},
	
	/**
	 * Insert the content into the appropriate HTML element of the tooltip
	 * 
	 * @returns {self}
	 * @private
	 */
	__contentInsert: function() {
		
		var self = this,
			$el = self._$tooltip.find('.tooltipster-content'),
			formattedContent = self.__Content,
			format = function(content) {
				formattedContent = content;
			};
		
		self._trigger({
			type: 'format',
			content: self.__Content,
			format: format
		});
		
		if (self.__options.functionFormat) {
			
			formattedContent = self.__options.functionFormat.call(
				self,
				self,
				{ origin: self._$origin[0] },
				self.__Content
			);
		}
		
		if (typeof formattedContent === 'string' && !self.__options.contentAsHTML) {
			$el.text(formattedContent);
		}
		else {
			$el
				.empty()
				.append(formattedContent);
		}
		
		return self;
	},
	
	/**
	 * Save the content, cloning it beforehand if need be
	 * 
	 * @param content
	 * @returns {self}
	 * @private
	 */
	__contentSet: function(content) {
		
		// clone if asked. Cloning the object makes sure that each instance has its
		// own version of the content (in case a same object were provided for several
		// instances)
		// reminder: typeof null === object
		if (content instanceof $ && this.__options.contentCloning) {
			content = content.clone(true);
		}
		
		this.__Content = content;
		
		this._trigger({
			type: 'updated',
			content: content
		});
		
		return this;
	},
	
	/**
	 * Error message about a method call made after destruction
	 * 
	 * @private
	 */
	__destroyError: function() {
		throw new Error('This tooltip has been destroyed and cannot execute your method call.');
	},
	
	/**
	 * Gather all information about dimensions and available space,
	 * called before every repositioning
	 * 
	 * @private
	 * @returns {object}
	 */
	__geometry: function() {
		
		var	self = this,
			$target = self._$origin,
			originIsArea = self._$origin.is('area');
		
		// if this._$origin is a map area, the target we'll need
		// the dimensions of is actually the image using the map,
		// not the area itself
		if (originIsArea) {
			
			var mapName = self._$origin.parent().attr('name');
			
			$target = $('img[usemap="#'+ mapName +'"]');
		}
		
		var bcr = $target[0].getBoundingClientRect(),
			$document = $(env.window.document),
			$window = $(env.window),
			$parent = $target,
			// some useful properties of important elements
			geo = {
				// available space for the tooltip, see down below
				available: {
					document: null,
					window: null
				},
				document: {
					size: {
						height: $document.height(),
						width: $document.width()
					}
				},
				window: {
					scroll: {
						// the second ones are for IE compatibility
						left: env.window.scrollX || env.window.document.documentElement.scrollLeft,
						top: env.window.scrollY || env.window.document.documentElement.scrollTop
					},
					size: {
						height: $window.height(),
						width: $window.width()
					}
				},
				origin: {
					// the origin has a fixed lineage if itself or one of its
					// ancestors has a fixed position
					fixedLineage: false,
					// relative to the document
					offset: {},
					size: {
						height: bcr.bottom - bcr.top,
						width: bcr.right - bcr.left
					},
					usemapImage: originIsArea ? $target[0] : null,
					// relative to the window
					windowOffset: {
						bottom: bcr.bottom,
						left: bcr.left,
						right: bcr.right,
						top: bcr.top
					}
				}
			},
			geoFixed = false;
		
		// if the element is a map area, some properties may need
		// to be recalculated
		if (originIsArea) {
			
			var shape = self._$origin.attr('shape'),
				coords = self._$origin.attr('coords');
			
			if (coords) {
				
				coords = coords.split(',');
				
				$.map(coords, function(val, i) {
					coords[i] = parseInt(val);
				});
			}
			
			// if the image itself is the area, nothing more to do
			if (shape != 'default') {
				
				switch(shape) {
					
					case 'circle':
						
						var circleCenterLeft = coords[0],
							circleCenterTop = coords[1],
							circleRadius = coords[2],
							areaTopOffset = circleCenterTop - circleRadius,
							areaLeftOffset = circleCenterLeft - circleRadius;
						
						geo.origin.size.height = circleRadius * 2;
						geo.origin.size.width = geo.origin.size.height;
						
						geo.origin.windowOffset.left += areaLeftOffset;
						geo.origin.windowOffset.top += areaTopOffset;
						
						break;
					
					case 'rect':
						
						var areaLeft = coords[0],
							areaTop = coords[1],
							areaRight = coords[2],
							areaBottom = coords[3];
						
						geo.origin.size.height = areaBottom - areaTop;
						geo.origin.size.width = areaRight - areaLeft;
						
						geo.origin.windowOffset.left += areaLeft;
						geo.origin.windowOffset.top += areaTop;
						
						break;
					
					case 'poly':
						
						var areaSmallestX = 0,
							areaSmallestY = 0,
							areaGreatestX = 0,
							areaGreatestY = 0,
							arrayAlternate = 'even';
						
						for (var i = 0; i < coords.length; i++) {
							
							var areaNumber = coords[i];
							
							if (arrayAlternate == 'even') {
								
								if (areaNumber > areaGreatestX) {
									
									areaGreatestX = areaNumber;
									
									if (i === 0) {
										areaSmallestX = areaGreatestX;
									}
								}
								
								if (areaNumber < areaSmallestX) {
									areaSmallestX = areaNumber;
								}
								
								arrayAlternate = 'odd';
							}
							else {
								if (areaNumber > areaGreatestY) {
									
									areaGreatestY = areaNumber;
									
									if (i == 1) {
										areaSmallestY = areaGreatestY;
									}
								}
								
								if (areaNumber < areaSmallestY) {
									areaSmallestY = areaNumber;
								}
								
								arrayAlternate = 'even';
							}
						}
						
						geo.origin.size.height = areaGreatestY - areaSmallestY;
						geo.origin.size.width = areaGreatestX - areaSmallestX;
						
						geo.origin.windowOffset.left += areaSmallestX;
						geo.origin.windowOffset.top += areaSmallestY;
						
						break;
				}
			}
		}
		
		// user callback through an event
		var edit = function(r) {
			geo.origin.size.height = r.height,
				geo.origin.windowOffset.left = r.left,
				geo.origin.windowOffset.top = r.top,
				geo.origin.size.width = r.width
		};
		
		self._trigger({
			type: 'geometry',
			edit: edit,
			geometry: {
				height: geo.origin.size.height,
				left: geo.origin.windowOffset.left,
				top: geo.origin.windowOffset.top,
				width: geo.origin.size.width
			}
		});
		
		// calculate the remaining properties with what we got
		
		geo.origin.windowOffset.right = geo.origin.windowOffset.left + geo.origin.size.width;
		geo.origin.windowOffset.bottom = geo.origin.windowOffset.top + geo.origin.size.height;
		
		geo.origin.offset.left = geo.origin.windowOffset.left + geo.window.scroll.left;
		geo.origin.offset.top = geo.origin.windowOffset.top + geo.window.scroll.top;
		geo.origin.offset.bottom = geo.origin.offset.top + geo.origin.size.height;
		geo.origin.offset.right = geo.origin.offset.left + geo.origin.size.width;
		
		// the space that is available to display the tooltip relatively to the document
		geo.available.document = {
			bottom: {
				height: geo.document.size.height - geo.origin.offset.bottom,
				width: geo.document.size.width
			},
			left: {
				height: geo.document.size.height,
				width: geo.origin.offset.left
			},
			right: {
				height: geo.document.size.height,
				width: geo.document.size.width - geo.origin.offset.right
			},
			top: {
				height: geo.origin.offset.top,
				width: geo.document.size.width
			}
		};
		
		// the space that is available to display the tooltip relatively to the viewport
		// (the resulting values may be negative if the origin overflows the viewport)
		geo.available.window = {
			bottom: {
				// the inner max is here to make sure the available height is no bigger
				// than the viewport height (when the origin is off screen at the top).
				// The outer max just makes sure that the height is not negative (when
				// the origin overflows at the bottom).
				height: Math.max(geo.window.size.height - Math.max(geo.origin.windowOffset.bottom, 0), 0),
				width: geo.window.size.width
			},
			left: {
				height: geo.window.size.height,
				width: Math.max(geo.origin.windowOffset.left, 0)
			},
			right: {
				height: geo.window.size.height,
				width: Math.max(geo.window.size.width - Math.max(geo.origin.windowOffset.right, 0), 0)
			},
			top: {
				height: Math.max(geo.origin.windowOffset.top, 0),
				width: geo.window.size.width
			}
		};
		
		while ($parent[0].tagName.toLowerCase() != 'html') {
			
			if ($parent.css('position') == 'fixed') {
				geo.origin.fixedLineage = true;
				break;
			}
			
			$parent = $parent.parent();
		}
		
		return geo;
	},
	
	/**
	 * Some options may need to be formated before being used
	 * 
	 * @returns {self}
	 * @private
	 */
	__optionsFormat: function() {
		
		if (typeof this.__options.animationDuration == 'number') {
			this.__options.animationDuration = [this.__options.animationDuration, this.__options.animationDuration];
		}
		
		if (typeof this.__options.delay == 'number') {
			this.__options.delay = [this.__options.delay, this.__options.delay];
		}
		
		if (typeof this.__options.delayTouch == 'number') {
			this.__options.delayTouch = [this.__options.delayTouch, this.__options.delayTouch];
		}
		
		if (typeof this.__options.theme == 'string') {
			this.__options.theme = [this.__options.theme];
		}
		
		// determine the future parent
		if (this.__options.parent === null) {
			this.__options.parent = $(env.window.document.body);
		}
		else if (typeof this.__options.parent == 'string') {
			this.__options.parent = $(this.__options.parent);
		}
		
		if (this.__options.trigger == 'hover') {
			
			this.__options.triggerOpen = {
				mouseenter: true,
				touchstart: true
			};
			
			this.__options.triggerClose = {
				mouseleave: true,
				originClick: true,
				touchleave: true
			};
		}
		else if (this.__options.trigger == 'click') {
			
			this.__options.triggerOpen = {
				click: true,
				tap: true
			};
			
			this.__options.triggerClose = {
				click: true,
				tap: true
			};
		}
		
		// for the plugins
		this._trigger('options');
		
		return this;
	},
	
	/**
	 * Schedules or cancels the garbage collector task
	 *
	 * @returns {self}
	 * @private
	 */
	__prepareGC: function() {
		
		var self = this;
		
		// in case the selfDestruction option has been changed by a method call
		if (self.__options.selfDestruction) {
			
			// the GC task
			self.__garbageCollector = setInterval(function() {
				
				var now = new Date().getTime();
				
				// forget the old events
				self.__touchEvents = $.grep(self.__touchEvents, function(event, i) {
					// 1 minute
					return now - event.time > 60000;
				});
				
				// auto-destruct if the origin is gone
				if (!bodyContains(self._$origin)) {
					
					self.close(function(){
						self.destroy();
					});
				}
			}, 20000);
		}
		else {
			clearInterval(self.__garbageCollector);
		}
		
		return self;
	},
	
	/**
	 * Sets listeners on the origin if the open triggers require them.
	 * Unlike the listeners set at opening time, these ones
	 * remain even when the tooltip is closed. It has been made a
	 * separate method so it can be called when the triggers are
	 * changed in the options. Closing is handled in _open()
	 * because of the bindings that may be needed on the tooltip
	 * itself
	 *
	 * @returns {self}
	 * @private
	 */
	__prepareOrigin: function() {
		
		var self = this;
		
		// in case we're resetting the triggers
		self._$origin.off('.'+ self.__namespace +'-triggerOpen');
		
		// if the device is touch capable, even if only mouse triggers
		// are asked, we need to listen to touch events to know if the mouse
		// events are actually emulated (so we can ignore them)
		if (env.hasTouchCapability) {
			
			self._$origin.on(
				'touchstart.'+ self.__namespace +'-triggerOpen ' +
				'touchend.'+ self.__namespace +'-triggerOpen ' +
				'touchcancel.'+ self.__namespace +'-triggerOpen',
				function(event){
					self._touchRecordEvent(event);
				}
			);
		}
		
		// mouse click and touch tap work the same way
		if (	self.__options.triggerOpen.click
			||	(self.__options.triggerOpen.tap && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerOpen.click) {
				eventNames += 'click.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerOpen.tap && env.hasTouchCapability) {
				eventNames += 'touchend.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				if (self._touchIsMeaningfulEvent(event)) {
					self._open(event);
				}
			});
		}
		
		// mouseenter and touch start work the same way
		if (	self.__options.triggerOpen.mouseenter
			||	(self.__options.triggerOpen.touchstart && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerOpen.mouseenter) {
				eventNames += 'mouseenter.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerOpen.touchstart && env.hasTouchCapability) {
				eventNames += 'touchstart.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				if (	self._touchIsTouchEvent(event)
					||	!self._touchIsEmulatedEvent(event)
				) {
					self.__pointerIsOverOrigin = true;
					self._openShortly(event);
				}
			});
		}
		
		// info for the mouseleave/touchleave close triggers when they use a delay
		if (	self.__options.triggerClose.mouseleave
			||	(self.__options.triggerClose.touchleave && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerClose.mouseleave) {
				eventNames += 'mouseleave.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerClose.touchleave && env.hasTouchCapability) {
				eventNames += 'touchend.'+ self.__namespace +'-triggerOpen touchcancel.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				
				if (self._touchIsMeaningfulEvent(event)) {
					self.__pointerIsOverOrigin = false;
				}
			});
		}
		
		return self;
	},
	
	/**
	 * Do the things that need to be done only once after the tooltip
	 * HTML element it has been created. It has been made a separate
	 * method so it can be called when options are changed. Remember
	 * that the tooltip may actually exist in the DOM before it is
	 * opened, and present after it has been closed: it's the display
	 * plugin that takes care of handling it.
	 * 
	 * @returns {self}
	 * @private
	 */
	__prepareTooltip: function() {
		
		var self = this,
			p = self.__options.interactive ? 'auto' : '';
		
		// this will be useful to know quickly if the tooltip is in
		// the DOM or not 
		self._$tooltip
			.attr('id', self.__namespace)
			.css({
				// pointer events
				'pointer-events': p,
				zIndex: self.__options.zIndex
			});
		
		// themes
		// remove the old ones and add the new ones
		$.each(self.__previousThemes, function(i, theme) {
			self._$tooltip.removeClass(theme);
		});
		$.each(self.__options.theme, function(i, theme) {
			self._$tooltip.addClass(theme);
		});
		
		self.__previousThemes = $.merge([], self.__options.theme);
		
		return self;
	},
	
	/**
	 * Handles the scroll on any of the parents of the origin (when the
	 * tooltip is open)
	 *
	 * @param {object} event
	 * @returns {self}
	 * @private
	 */
	__scrollHandler: function(event) {
		
		var self = this;
		
		if (self.__options.triggerClose.scroll) {
			self._close(event);
		}
		else {
			
			// if the origin or tooltip have been removed: do nothing, the tracker will
			// take care of it later
			if (bodyContains(self._$origin) && bodyContains(self._$tooltip)) {
				
				var geo = null;
				
				// if the scroll happened on the window
				if (event.target === env.window.document) {
					
					// if the origin has a fixed lineage, window scroll will have no
					// effect on its position nor on the position of the tooltip
					if (!self.__Geometry.origin.fixedLineage) {
						
						// we don't need to do anything unless repositionOnScroll is true
						// because the tooltip will already have moved with the window
						// (and of course with the origin)
						if (self.__options.repositionOnScroll) {
							self.reposition(event);
						}
					}
				}
				// if the scroll happened on another parent of the tooltip, it means
				// that it's in a scrollable area and now needs to have its position
				// adjusted or recomputed, depending ont the repositionOnScroll
				// option. Also, if the origin is partly hidden due to a parent that
				// hides its overflow, we'll just hide (not close) the tooltip.
				else {
					
					geo = self.__geometry();
					
					var overflows = false;
					
					// a fixed position origin is not affected by the overflow hiding
					// of a parent
					if (self._$origin.css('position') != 'fixed') {
						
						self.__$originParents.each(function(i, el) {
							
							var $el = $(el),
								overflowX = $el.css('overflow-x'),
								overflowY = $el.css('overflow-y');
							
							if (overflowX != 'visible' || overflowY != 'visible') {
								
								var bcr = el.getBoundingClientRect();
								
								if (overflowX != 'visible') {
									
									if (	geo.origin.windowOffset.left < bcr.left
										||	geo.origin.windowOffset.right > bcr.right
									) {
										overflows = true;
										return false;
									}
								}
								
								if (overflowY != 'visible') {
									
									if (	geo.origin.windowOffset.top < bcr.top
										||	geo.origin.windowOffset.bottom > bcr.bottom
									) {
										overflows = true;
										return false;
									}
								}
							}
							
							// no need to go further if fixed, for the same reason as above
							if ($el.css('position') == 'fixed') {
								return false;
							}
						});
					}
					
					if (overflows) {
						self._$tooltip.css('visibility', 'hidden');
					}
					else {
						
						self._$tooltip.css('visibility', 'visible');
						
						// reposition
						if (self.__options.repositionOnScroll) {
							self.reposition(event);
						}
						// or just adjust offset
						else {
							
							// we have to use offset and not windowOffset because this way,
							// only the scroll distance of the scrollable areas are taken into
							// account (the scrolltop value of the main window must be
							// ignored since the tooltip already moves with it)
							var offsetLeft = geo.origin.offset.left - self.__Geometry.origin.offset.left,
								offsetTop = geo.origin.offset.top - self.__Geometry.origin.offset.top;
							
							// add the offset to the position initially computed by the display plugin
							self._$tooltip.css({
								left: self.__lastPosition.coord.left + offsetLeft,
								top: self.__lastPosition.coord.top + offsetTop
							});
						}
					}
				}
				
				self._trigger({
					type: 'scroll',
					event: event,
					geo: geo
				});
			}
		}
		
		return self;
	},
	
	/**
	 * Changes the state of the tooltip
	 *
	 * @param {string} state
	 * @returns {self}
	 * @private
	 */
	__stateSet: function(state) {
		
		this.__state = state;
		
		this._trigger({
			type: 'state',
			state: state
		});
		
		return this;
	},
	
	/**
	 * Clear appearance timeouts
	 *
	 * @returns {self}
	 * @private
	 */
	__timeoutsClear: function() {
		
		// there is only one possible open timeout: the delayed opening
		// when the mouseenter/touchstart open triggers are used
		clearTimeout(this.__timeouts.open);
		this.__timeouts.open = null;
		
		// ... but several close timeouts: the delayed closing when the
		// mouseleave close trigger is used and the timer option
		$.each(this.__timeouts.close, function(i, timeout) {
			clearTimeout(timeout);
		});
		this.__timeouts.close = [];
		
		return this;
	},
	
	/**
	 * Start the tracker that will make checks at regular intervals
	 * 
	 * @returns {self}
	 * @private
	 */
	__trackerStart: function() {
		
		var self = this,
			$content = self._$tooltip.find('.tooltipster-content');
		
		// get the initial content size
		if (self.__options.trackTooltip) {
			self.__contentBcr = $content[0].getBoundingClientRect();
		}
		
		self.__tracker = setInterval(function() {
			
			// if the origin or tooltip elements have been removed.
			// Note: we could destroy the instance now if the origin has
			// been removed but we'll leave that task to our garbage collector
			if (!bodyContains(self._$origin) || !bodyContains(self._$tooltip)) {
				self._close();
			}
			// if everything is alright
			else {
				
				// compare the former and current positions of the origin to reposition
				// the tooltip if need be
				if (self.__options.trackOrigin) {
					
					var g = self.__geometry(),
						identical = false;
					
					// compare size first (a change requires repositioning too)
					if (areEqual(g.origin.size, self.__Geometry.origin.size)) {
						
						// for elements that have a fixed lineage (see __geometry()), we track the
						// top and left properties (relative to window)
						if (self.__Geometry.origin.fixedLineage) {
							if (areEqual(g.origin.windowOffset, self.__Geometry.origin.windowOffset)) {
								identical = true;
							}
						}
						// otherwise, track total offset (relative to document)
						else {
							if (areEqual(g.origin.offset, self.__Geometry.origin.offset)) {
								identical = true;
							}
						}
					}
					
					if (!identical) {
						
						// close the tooltip when using the mouseleave close trigger
						// (see https://github.com/iamceege/tooltipster/pull/253)
						if (self.__options.triggerClose.mouseleave) {
							self._close();
						}
						else {
							self.reposition();
						}
					}
				}
				
				if (self.__options.trackTooltip) {
					
					var currentBcr = $content[0].getBoundingClientRect();
					
					if (	currentBcr.height !== self.__contentBcr.height
						||	currentBcr.width !== self.__contentBcr.width
					) {
						self.reposition();
						self.__contentBcr = currentBcr;
					}
				}
			}
		}, self.__options.trackerInterval);
		
		return self;
	},
	
	/**
	 * Closes the tooltip (after the closing delay)
	 * 
	 * @param event
	 * @param callback
	 * @param force Set to true to override a potential refusal of the user's function
	 * @returns {self}
	 * @protected
	 */
	_close: function(event, callback, force) {
		
		var self = this,
			ok = true;
		
		self._trigger({
			type: 'close',
			event: event,
			stop: function() {
				ok = false;
			}
		});
		
		// a destroying tooltip (force == true) may not refuse to close
		if (ok || force) {
			
			// save the method custom callback and cancel any open method custom callbacks
			if (callback) self.__callbacks.close.push(callback);
			self.__callbacks.open = [];
			
			// clear open/close timeouts
			self.__timeoutsClear();
			
			var finishCallbacks = function() {
				
				// trigger any close method custom callbacks and reset them
				$.each(self.__callbacks.close, function(i,c) {
					c.call(self, self, {
						event: event,
						origin: self._$origin[0]
					});
				});
				
				self.__callbacks.close = [];
			};
			
			if (self.__state != 'closed') {
				
				var necessary = true,
					d = new Date(),
					now = d.getTime(),
					newClosingTime = now + self.__options.animationDuration[1];
				
				// the tooltip may already already be disappearing, but if a new
				// call to close() is made after the animationDuration was changed
				// to 0 (for example), we ought to actually close it sooner than
				// previously scheduled. In that case it should be noted that the
				// browser will not adapt the animation duration to the new
				// animationDuration that was set after the start of the closing
				// animation.
				// Note: the same thing could be considered at opening, but is not
				// really useful since the tooltip is actually opened immediately
				// upon a call to _open(). Since it would not make the opening
				// animation finish sooner, its sole impact would be to trigger the
				// state event and the open callbacks sooner than the actual end of
				// the opening animation, which is not great.
				if (self.__state == 'disappearing') {
					
					if (	newClosingTime > self.__closingTime
						// in case closing is actually overdue because the script
						// execution was suspended. See #679
						&&	self.__options.animationDuration[1] > 0
					) {
						necessary = false;
					}
				}
				
				if (necessary) {
					
					self.__closingTime = newClosingTime;
					
					if (self.__state != 'disappearing') {
						self.__stateSet('disappearing');
					}
					
					var finish = function() {
						
						// stop the tracker
						clearInterval(self.__tracker);
						
						// a "beforeClose" option has been asked several times but would
						// probably useless since the content element is still accessible
						// via ::content(), and because people can always use listeners
						// inside their content to track what's going on. For the sake of
						// simplicity, this has been denied. Bur for the rare people who
						// really need the option (for old browsers or for the case where
						// detaching the content is actually destructive, for file or
						// password inputs for example), this event will do the work.
						self._trigger({
							type: 'closing',
							event: event
						});
						
						// unbind listeners which are no longer needed
						
						self._$tooltip
							.off('.'+ self.__namespace +'-triggerClose')
							.removeClass('tooltipster-dying');
						
						// orientationchange, scroll and resize listeners
						$(env.window).off('.'+ self.__namespace +'-triggerClose');
						
						// scroll listeners
						self.__$originParents.each(function(i, el) {
							$(el).off('scroll.'+ self.__namespace +'-triggerClose');
						});
						// clear the array to prevent memory leaks
						self.__$originParents = null;
						
						$(env.window.document.body).off('.'+ self.__namespace +'-triggerClose');
						
						self._$origin.off('.'+ self.__namespace +'-triggerClose');
						
						self._off('dismissable');
						
						// a plugin that would like to remove the tooltip from the
						// DOM when closed should bind on this
						self.__stateSet('closed');
						
						// trigger event
						self._trigger({
							type: 'after',
							event: event
						});
						
						// call our constructor custom callback function
						if (self.__options.functionAfter) {
							self.__options.functionAfter.call(self, self, {
								event: event,
								origin: self._$origin[0]
							});
						}
						
						// call our method custom callbacks functions
						finishCallbacks();
					};
					
					if (env.hasTransitions) {
						
						self._$tooltip.css({
							'-moz-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-ms-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-o-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-webkit-animation-duration': self.__options.animationDuration[1] + 'ms',
							'animation-duration': self.__options.animationDuration[1] + 'ms',
							'transition-duration': self.__options.animationDuration[1] + 'ms'
						});
						
						self._$tooltip
							// clear both potential open and close tasks
							.clearQueue()
							.removeClass('tooltipster-show')
							// for transitions only
							.addClass('tooltipster-dying');
						
						if (self.__options.animationDuration[1] > 0) {
							self._$tooltip.delay(self.__options.animationDuration[1]);
						}
						
						self._$tooltip.queue(finish);
					}
					else {
						
						self._$tooltip
							.stop()
							.fadeOut(self.__options.animationDuration[1], finish);
					}
				}
			}
			// if the tooltip is already closed, we still need to trigger
			// the method custom callbacks
			else {
				finishCallbacks();
			}
		}
		
		return self;
	},
	
	/**
	 * For internal use by plugins, if needed
	 * 
	 * @returns {self}
	 * @protected
	 */
	_off: function() {
		this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @returns {self}
	 * @protected
	 */
	_on: function() {
		this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @returns {self}
	 * @protected
	 */
	_one: function() {
		this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Opens the tooltip right away.
	 *
	 * @param event
	 * @param callback Will be called when the opening animation is over
	 * @returns {self}
	 * @protected
	 */
	_open: function(event, callback) {
		
		var self = this;
		
		// if the destruction process has not begun and if this was not
		// triggered by an unwanted emulated click event
		if (!self.__destroying) {
			
			// check that the origin is still in the DOM
			if (	bodyContains(self._$origin)
				// if the tooltip is enabled
				&&	self.__enabled
			) {
				
				var ok = true;
				
				// if the tooltip is not open yet, we need to call functionBefore.
				// otherwise we can jst go on
				if (self.__state == 'closed') {
					
					// trigger an event. The event.stop function allows the callback
					// to prevent the opening of the tooltip
					self._trigger({
						type: 'before',
						event: event,
						stop: function() {
							ok = false;
						}
					});
					
					if (ok && self.__options.functionBefore) {
						
						// call our custom function before continuing
						ok = self.__options.functionBefore.call(self, self, {
							event: event,
							origin: self._$origin[0]
						});
					}
				}
				
				if (ok !== false) {
					
					// if there is some content
					if (self.__Content !== null) {
						
						// save the method callback and cancel close method callbacks
						if (callback) {
							self.__callbacks.open.push(callback);
						}
						self.__callbacks.close = [];
						
						// get rid of any appearance timeouts
						self.__timeoutsClear();
						
						var extraTime,
							finish = function() {
								
								if (self.__state != 'stable') {
									self.__stateSet('stable');
								}
								
								// trigger any open method custom callbacks and reset them
								$.each(self.__callbacks.open, function(i,c) {
									c.call(self, self, {
										origin: self._$origin[0],
										tooltip: self._$tooltip[0]
									});
								});
								
								self.__callbacks.open = [];
							};
						
						// if the tooltip is already open
						if (self.__state !== 'closed') {
							
							// the timer (if any) will start (or restart) right now
							extraTime = 0;
							
							// if it was disappearing, cancel that
							if (self.__state === 'disappearing') {
								
								self.__stateSet('appearing');
								
								if (env.hasTransitions) {
									
									self._$tooltip
										.clearQueue()
										.removeClass('tooltipster-dying')
										.addClass('tooltipster-show');
									
									if (self.__options.animationDuration[0] > 0) {
										self._$tooltip.delay(self.__options.animationDuration[0]);
									}
									
									self._$tooltip.queue(finish);
								}
								else {
									// in case the tooltip was currently fading out, bring it back
									// to life
									self._$tooltip
										.stop()
										.fadeIn(finish);
								}
							}
							// if the tooltip is already open, we still need to trigger the method
							// custom callback
							else if (self.__state == 'stable') {
								finish();
							}
						}
						// if the tooltip isn't already open, open it
						else {
							
							// a plugin must bind on this and store the tooltip in this._$tooltip
							self.__stateSet('appearing');
							
							// the timer (if any) will start when the tooltip has fully appeared
							// after its transition
							extraTime = self.__options.animationDuration[0];
							
							// insert the content inside the tooltip
							self.__contentInsert();
							
							// reposition the tooltip and attach to the DOM
							self.reposition(event, true);
							
							// animate in the tooltip. If the display plugin wants no css
							// animations, it may override the animation option with a
							// dummy value that will produce no effect
							if (env.hasTransitions) {
								
								// note: there seems to be an issue with start animations which
								// are randomly not played on fast devices in both Chrome and FF,
								// couldn't find a way to solve it yet. It seems that applying
								// the classes before appending to the DOM helps a little, but
								// it messes up some CSS transitions. The issue almost never
								// happens when delay[0]==0 though
								self._$tooltip
									.addClass('tooltipster-'+ self.__options.animation)
									.addClass('tooltipster-initial')
									.css({
										'-moz-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-ms-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-o-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-webkit-animation-duration': self.__options.animationDuration[0] + 'ms',
										'animation-duration': self.__options.animationDuration[0] + 'ms',
										'transition-duration': self.__options.animationDuration[0] + 'ms'
									});
								
								setTimeout(
									function() {
										
										// a quick hover may have already triggered a mouseleave
										if (self.__state != 'closed') {
											
											self._$tooltip
												.addClass('tooltipster-show')
												.removeClass('tooltipster-initial');
											
											if (self.__options.animationDuration[0] > 0) {
												self._$tooltip.delay(self.__options.animationDuration[0]);
											}
											
											self._$tooltip.queue(finish);
										}
									},
									0
								);
							}
							else {
								
								// old browsers will have to live with this
								self._$tooltip
									.css('display', 'none')
									.fadeIn(self.__options.animationDuration[0], finish);
							}
							
							// checks if the origin is removed while the tooltip is open
							self.__trackerStart();
							
							// NOTE: the listeners below have a '-triggerClose' namespace
							// because we'll remove them when the tooltip closes (unlike
							// the '-triggerOpen' listeners). So some of them are actually
							// not about close triggers, rather about positioning.
							
							$(env.window)
								// reposition on resize
								.on('resize.'+ self.__namespace +'-triggerClose', function(e) {
									
									var $ae = $(document.activeElement);
									
									// reposition only if the resize event was not triggered upon the opening
									// of a virtual keyboard due to an input field being focused within the tooltip
									// (otherwise the repositioning would lose the focus)
									if (	(!$ae.is('input') && !$ae.is('textarea'))
										||	!$.contains(self._$tooltip[0], $ae[0])
									) {
										self.reposition(e);
									}
								})
								// same as below for parents
								.on('scroll.'+ self.__namespace +'-triggerClose', function(e) {
									self.__scrollHandler(e);
								});
							
							self.__$originParents = self._$origin.parents();
							
							// scrolling may require the tooltip to be moved or even
							// repositioned in some cases
							self.__$originParents.each(function(i, parent) {
								
								$(parent).on('scroll.'+ self.__namespace +'-triggerClose', function(e) {
									self.__scrollHandler(e);
								});
							});
							
							if (	self.__options.triggerClose.mouseleave
								||	(self.__options.triggerClose.touchleave && env.hasTouchCapability)
							) {
								
								// we use an event to allow users/plugins to control when the mouseleave/touchleave
								// close triggers will come to action. It allows to have more triggering elements
								// than just the origin and the tooltip for example, or to cancel/delay the closing,
								// or to make the tooltip interactive even if it wasn't when it was open, etc.
								self._on('dismissable', function(event) {
									
									if (event.dismissable) {
										
										if (event.delay) {
											
											timeout = setTimeout(function() {
												// event.event may be undefined
												self._close(event.event);
											}, event.delay);
											
											self.__timeouts.close.push(timeout);
										}
										else {
											self._close(event);
										}
									}
									else {
										clearTimeout(timeout);
									}
								});
								
								// now set the listeners that will trigger 'dismissable' events
								var $elements = self._$origin,
									eventNamesIn = '',
									eventNamesOut = '',
									timeout = null;
								
								// if we have to allow interaction, bind on the tooltip too
								if (self.__options.interactive) {
									$elements = $elements.add(self._$tooltip);
								}
								
								if (self.__options.triggerClose.mouseleave) {
									eventNamesIn += 'mouseenter.'+ self.__namespace +'-triggerClose ';
									eventNamesOut += 'mouseleave.'+ self.__namespace +'-triggerClose ';
								}
								if (self.__options.triggerClose.touchleave && env.hasTouchCapability) {
									eventNamesIn += 'touchstart.'+ self.__namespace +'-triggerClose';
									eventNamesOut += 'touchend.'+ self.__namespace +'-triggerClose touchcancel.'+ self.__namespace +'-triggerClose';
								}
								
								$elements
									// close after some time spent outside of the elements
									.on(eventNamesOut, function(event) {
										
										// it's ok if the touch gesture ended up to be a swipe,
										// it's still a "touch leave" situation
										if (	self._touchIsTouchEvent(event)
											||	!self._touchIsEmulatedEvent(event)
										) {
											
											var delay = (event.type == 'mouseleave') ?
												self.__options.delay :
												self.__options.delayTouch;
											
											self._trigger({
												delay: delay[1],
												dismissable: true,
												event: event,
												type: 'dismissable'
											});
										}
									})
									// suspend the mouseleave timeout when the pointer comes back
									// over the elements
									.on(eventNamesIn, function(event) {
										
										// it's also ok if the touch event is a swipe gesture
										if (	self._touchIsTouchEvent(event)
											||	!self._touchIsEmulatedEvent(event)
										) {
											self._trigger({
												dismissable: false,
												event: event,
												type: 'dismissable'
											});
										}
									});
							}
							
							// close the tooltip when the origin gets a mouse click (common behavior of
							// native tooltips)
							if (self.__options.triggerClose.originClick) {
								
								self._$origin.on('click.'+ self.__namespace + '-triggerClose', function(event) {
									
									// we could actually let a tap trigger this but this feature just
									// does not make sense on touch devices
									if (	!self._touchIsTouchEvent(event)
										&&	!self._touchIsEmulatedEvent(event)
									) {
										self._close(event);
									}
								});
							}
							
							// set the same bindings for click and touch on the body to close the tooltip
							if (	self.__options.triggerClose.click
								||	(self.__options.triggerClose.tap && env.hasTouchCapability)
							) {
								
								// don't set right away since the click/tap event which triggered this method
								// (if it was a click/tap) is going to bubble up to the body, we don't want it
								// to close the tooltip immediately after it opened
								setTimeout(function() {
									
									if (self.__state != 'closed') {
										
										var eventNames = '',
											$body = $(env.window.document.body);
										
										if (self.__options.triggerClose.click) {
											eventNames += 'click.'+ self.__namespace +'-triggerClose ';
										}
										if (self.__options.triggerClose.tap && env.hasTouchCapability) {
											eventNames += 'touchend.'+ self.__namespace +'-triggerClose';
										}
										
										$body.on(eventNames, function(event) {
											
											if (self._touchIsMeaningfulEvent(event)) {
												
												self._touchRecordEvent(event);
												
												if (!self.__options.interactive || !$.contains(self._$tooltip[0], event.target)) {
													self._close(event);
												}
											}
										});
										
										// needed to detect and ignore swiping
										if (self.__options.triggerClose.tap && env.hasTouchCapability) {
											
											$body.on('touchstart.'+ self.__namespace +'-triggerClose', function(event) {
												self._touchRecordEvent(event);
											});
										}
									}
								}, 0);
							}
							
							self._trigger('ready');
							
							// call our custom callback
							if (self.__options.functionReady) {
								self.__options.functionReady.call(self, self, {
									origin: self._$origin[0],
									tooltip: self._$tooltip[0]
								});
							}
						}
						
						// if we have a timer set, let the countdown begin
						if (self.__options.timer > 0) {
							
							var timeout = setTimeout(function() {
								self._close();
							}, self.__options.timer + extraTime);
							
							self.__timeouts.close.push(timeout);
						}
					}
				}
			}
		}
		
		return self;
	},
	
	/**
	 * When using the mouseenter/touchstart open triggers, this function will
	 * schedule the opening of the tooltip after the delay, if there is one
	 *
	 * @param event
	 * @returns {self}
	 * @protected
 	 */
	_openShortly: function(event) {
		
		var self = this,
			ok = true;
		
		if (self.__state != 'stable' && self.__state != 'appearing') {
			
			// if a timeout is not already running
			if (!self.__timeouts.open) {
				
				self._trigger({
					type: 'start',
					event: event,
					stop: function() {
						ok = false;
					}
				});
				
				if (ok) {
					
					var delay = (event.type.indexOf('touch') == 0) ?
						self.__options.delayTouch :
						self.__options.delay;
					
					if (delay[0]) {
						
						self.__timeouts.open = setTimeout(function() {
							
							self.__timeouts.open = null;
							
							// open only if the pointer (mouse or touch) is still over the origin.
							// The check on the "meaningful event" can only be made here, after some
							// time has passed (to know if the touch was a swipe or not)
							if (self.__pointerIsOverOrigin && self._touchIsMeaningfulEvent(event)) {
								
								// signal that we go on
								self._trigger('startend');
								
								self._open(event);
							}
							else {
								// signal that we cancel
								self._trigger('startcancel');
							}
						}, delay[0]);
					}
					else {
						// signal that we go on
						self._trigger('startend');
						
						self._open(event);
					}
				}
			}
		}
		
		return self;
	},
	
	/**
	 * Meant for plugins to get their options
	 * 
	 * @param {string} pluginName The name of the plugin that asks for its options
	 * @param {object} defaultOptions The default options of the plugin
	 * @returns {object} The options
	 * @protected
	 */
	_optionsExtract: function(pluginName, defaultOptions) {
		
		var self = this,
			options = $.extend(true, {}, defaultOptions);
		
		// if the plugin options were isolated in a property named after the
		// plugin, use them (prevents conflicts with other plugins)
		var pluginOptions = self.__options[pluginName];
		
		// if not, try to get them as regular options
		if (!pluginOptions){
			
			pluginOptions = {};
			
			$.each(defaultOptions, function(optionName, value) {
				
				var o = self.__options[optionName];
				
				if (o !== undefined) {
					pluginOptions[optionName] = o;
				}
			});
		}
		
		// let's merge the default options and the ones that were provided. We'd want
		// to do a deep copy but not let jQuery merge arrays, so we'll do a shallow
		// extend on two levels, that will be enough if options are not more than 1
		// level deep
		$.each(options, function(optionName, value) {
			
			if (pluginOptions[optionName] !== undefined) {
				
				if ((		typeof value == 'object'
						&&	!(value instanceof Array)
						&&	value != null
					)
					&&
					(		typeof pluginOptions[optionName] == 'object'
						&&	!(pluginOptions[optionName] instanceof Array)
						&&	pluginOptions[optionName] != null
					)
				) {
					$.extend(options[optionName], pluginOptions[optionName]);
				}
				else {
					options[optionName] = pluginOptions[optionName];
				}
			}
		});
		
		return options;
	},
	
	/**
	 * Used at instantiation of the plugin, or afterwards by plugins that activate themselves
	 * on existing instances
	 * 
	 * @param {object} pluginName
	 * @returns {self}
	 * @protected
	 */
	_plug: function(pluginName) {
		
		var plugin = $.tooltipster._plugin(pluginName);
		
		if (plugin) {
			
			// if there is a constructor for instances
			if (plugin.instance) {
				
				// proxy non-private methods on the instance to allow new instance methods
				$.tooltipster.__bridge(plugin.instance, this, plugin.name);
			}
		}
		else {
			throw new Error('The "'+ pluginName +'" plugin is not defined');
		}
		
		return this;
	},
	
	/**
	 * This will return true if the event is a mouse event which was
	 * emulated by the browser after a touch event. This allows us to
	 * really dissociate mouse and touch triggers.
	 * 
	 * There is a margin of error if a real mouse event is fired right
	 * after (within the delay shown below) a touch event on the same
	 * element, but hopefully it should not happen often.
	 * 
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsEmulatedEvent: function(event) {
		
		var isEmulated = false,
			now = new Date().getTime();
		
		for (var i = this.__touchEvents.length - 1; i >= 0; i--) {
			
			var e = this.__touchEvents[i];
			
			// delay, in milliseconds. It's supposed to be 300ms in
			// most browsers (350ms on iOS) to allow a double tap but
			// can be less (check out FastClick for more info)
			if (now - e.time < 500) {
				
				if (e.target === event.target) {
					isEmulated = true;
				}
			}
			else {
				break;
			}
		}
		
		return isEmulated;
	},
	
	/**
	 * Returns false if the event was an emulated mouse event or
	 * a touch event involved in a swipe gesture.
	 * 
	 * @param {object} event
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsMeaningfulEvent: function(event) {
		return (
				(this._touchIsTouchEvent(event) && !this._touchSwiped(event.target))
			||	(!this._touchIsTouchEvent(event) && !this._touchIsEmulatedEvent(event))
		);
	},
	
	/**
	 * Checks if an event is a touch event
	 * 
	 * @param {object} event
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsTouchEvent: function(event){
		return event.type.indexOf('touch') == 0;
	},
	
	/**
	 * Store touch events for a while to detect swiping and emulated mouse events
	 * 
	 * @param {object} event
	 * @returns {self}
	 * @protected
	 */
	_touchRecordEvent: function(event) {
		
		if (this._touchIsTouchEvent(event)) {
			event.time = new Date().getTime();
			this.__touchEvents.push(event);
		}
		
		return this;
	},
	
	/**
	 * Returns true if a swipe happened after the last touchstart event fired on
	 * event.target.
	 * 
	 * We need to differentiate a swipe from a tap before we let the event open
	 * or close the tooltip. A swipe is when a touchmove (scroll) event happens
	 * on the body between the touchstart and the touchend events of an element.
	 * 
	 * @param {object} target The HTML element that may have triggered the swipe
	 * @returns {boolean}
	 * @protected
	 */
	_touchSwiped: function(target) {
		
		var swiped = false;
		
		for (var i = this.__touchEvents.length - 1; i >= 0; i--) {
			
			var e = this.__touchEvents[i];
			
			if (e.type == 'touchmove') {
				swiped = true;
				break;
			}
			else if (
				e.type == 'touchstart'
				&&	target === e.target
			) {
				break;
			}
		}
		
		return swiped;
	},
	
	/**
	 * Triggers an event on the instance emitters
	 * 
	 * @returns {self}
	 * @protected
	 */
	_trigger: function() {
		
		var args = Array.prototype.slice.apply(arguments);
		
		if (typeof args[0] == 'string') {
			args[0] = { type: args[0] };
		}
		
		// add properties to the event
		args[0].instance = this;
		args[0].origin = this._$origin ? this._$origin[0] : null;
		args[0].tooltip = this._$tooltip ? this._$tooltip[0] : null;
		
		// note: the order of emitters matters
		this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, args);
		$.tooltipster._trigger.apply($.tooltipster, args);
		this.__$emitterPublic.trigger.apply(this.__$emitterPublic, args);
		
		return this;
	},
	
	/**
	 * Deactivate a plugin on this instance
	 * 
	 * @returns {self}
	 * @protected
	 */
	_unplug: function(pluginName) {
		
		var self = this;
		
		// if the plugin has been activated on this instance
		if (self[pluginName]) {
			
			var plugin = $.tooltipster._plugin(pluginName);
			
			// if there is a constructor for instances
			if (plugin.instance) {
				
				// unbridge
				$.each(plugin.instance, function(methodName, fn) {
					
					// if the method exists (privates methods do not) and comes indeed from
					// this plugin (may be missing or come from a conflicting plugin).
					if (	self[methodName]
						&&	self[methodName].bridged === self[pluginName]
					) {
						delete self[methodName];
					}
				});
			}
			
			// destroy the plugin
			if (self[pluginName].__destroy) {
				self[pluginName].__destroy();
			}
			
			// remove the reference to the plugin instance
			delete self[pluginName];
		}
		
		return self;
	},
	
	/**
	 * @see self::_close
	 * @returns {self}
	 * @public
	 */
	close: function(callback) {
		
		if (!this.__destroyed) {
			this._close(null, callback);
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Sets or gets the content of the tooltip
	 * 
	 * @returns {mixed|self}
	 * @public
	 */
	content: function(content) {
		
		var self = this;
		
		// getter method
		if (content === undefined) {
			return self.__Content;
		}
		// setter method
		else {
			
			if (!self.__destroyed) {
				
				// change the content
				self.__contentSet(content);
				
				if (self.__Content !== null) {
					
					// update the tooltip if it is open
					if (self.__state !== 'closed') {
						
						// reset the content in the tooltip
						self.__contentInsert();
						
						// reposition and resize the tooltip
						self.reposition();
						
						// if we want to play a little animation showing the content changed
						if (self.__options.updateAnimation) {
							
							if (env.hasTransitions) {
								
								// keep the reference in the local scope
								var animation = self.__options.updateAnimation;
								
								self._$tooltip.addClass('tooltipster-update-'+ animation);
								
								// remove the class after a while. The actual duration of the
								// update animation may be shorter, it's set in the CSS rules
								setTimeout(function() {
									
									if (self.__state != 'closed') {
										
										self._$tooltip.removeClass('tooltipster-update-'+ animation);
									}
								}, 1000);
							}
							else {
								self._$tooltip.fadeTo(200, 0.5, function() {
									if (self.__state != 'closed') {
										self._$tooltip.fadeTo(200, 1);
									}
								});
							}
						}
					}
				}
				else {
					self._close();
				}
			}
			else {
				self.__destroyError();
			}
			
			return self;
		}
	},
	
	/**
	 * Destroys the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	destroy: function() {
		
		var self = this;
		
		if (!self.__destroyed) {
			
			if(self.__state != 'closed'){
				
				// no closing delay
				self.option('animationDuration', 0)
					// force closing
					._close(null, null, true);
			}
			else {
				// there might be an open timeout still running
				self.__timeoutsClear();
			}
			
			// send event
			self._trigger('destroy');
			
			self.__destroyed = true;
			
			self._$origin
				.removeData(self.__namespace)
				// remove the open trigger listeners
				.off('.'+ self.__namespace +'-triggerOpen');
			
			// remove the touch listener
			$(env.window.document.body).off('.' + self.__namespace +'-triggerOpen');
			
			var ns = self._$origin.data('tooltipster-ns');
			
			// if the origin has been removed from DOM, its data may
			// well have been destroyed in the process and there would
			// be nothing to clean up or restore
			if (ns) {
				
				// if there are no more tooltips on this element
				if (ns.length === 1) {
					
					// optional restoration of a title attribute
					var title = null;
					if (self.__options.restoration == 'previous') {
						title = self._$origin.data('tooltipster-initialTitle');
					}
					else if (self.__options.restoration == 'current') {
						
						// old school technique to stringify when outerHTML is not supported
						title = (typeof self.__Content == 'string') ?
							self.__Content :
							$('<div></div>').append(self.__Content).html();
					}
					
					if (title) {
						self._$origin.attr('title', title);
					}
					
					// final cleaning
					
					self._$origin.removeClass('tooltipstered');
					
					self._$origin
						.removeData('tooltipster-ns')
						.removeData('tooltipster-initialTitle');
				}
				else {
					// remove the instance namespace from the list of namespaces of
					// tooltips present on the element
					ns = $.grep(ns, function(el, i) {
						return el !== self.__namespace;
					});
					self._$origin.data('tooltipster-ns', ns);
				}
			}
			
			// last event
			self._trigger('destroyed');
			
			// unbind private and public event listeners
			self._off();
			self.off();
			
			// remove external references, just in case
			self.__Content = null;
			self.__$emitterPrivate = null;
			self.__$emitterPublic = null;
			self.__options.parent = null;
			self._$origin = null;
			self._$tooltip = null;
			
			// make sure the object is no longer referenced in there to prevent
			// memory leaks
			$.tooltipster.__instancesLatestArr = $.grep($.tooltipster.__instancesLatestArr, function(el, i) {
				return self !== el;
			});
			
			clearInterval(self.__garbageCollector);
		}
		else {
			self.__destroyError();
		}
		
		// we return the scope rather than true so that the call to
		// .tooltipster('destroy') actually returns the matched elements
		// and applies to all of them
		return self;
	},
	
	/**
	 * Disables the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	disable: function() {
		
		if (!this.__destroyed) {
			
			// close first, in case the tooltip would not disappear on
			// its own (no close trigger)
			this._close();
			this.__enabled = false;
			
			return this;
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Returns the HTML element of the origin
	 *
	 * @returns {self}
	 * @public
	 */
	elementOrigin: function() {
		
		if (!this.__destroyed) {
			return this._$origin[0];
		}
		else {
			this.__destroyError();
		}
	},
	
	/**
	 * Returns the HTML element of the tooltip
	 *
	 * @returns {self}
	 * @public
	 */
	elementTooltip: function() {
		return this._$tooltip ? this._$tooltip[0] : null;
	},
	
	/**
	 * Enables the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	enable: function() {
		this.__enabled = true;
		return this;
	},
	
	/**
	 * Alias, deprecated in 4.0.0
	 * 
	 * @param {function} callback
	 * @returns {self}
	 * @public
	 */
	hide: function(callback) {
		return this.close(callback);
	},
	
	/**
	 * Returns the instance
	 * 
	 * @returns {self}
	 * @public
	 */
	instance: function() {
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_off() instead)
	 * 
	 * @returns {self}
	 * @public
	 */
	off: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_on() instead)
	 *
	 * @returns {self}
	 * @public
	 */
	on: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins
	 *
	 * @returns {self}
	 * @public
	 */
	one: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * @see self::_open
	 * @returns {self}
	 * @public
	 */
	open: function(callback) {
		
		if (!this.__destroyed) {
			this._open(null, callback);
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Get or set options. For internal use and advanced users only.
	 * 
	 * @param {string} o Option name
	 * @param {mixed} val optional A new value for the option
	 * @return {mixed|self} If val is omitted, the value of the option
	 * is returned, otherwise the instance itself is returned
	 * @public
	 */ 
	option: function(o, val) {
		
		// getter
		if (val === undefined) {
			return this.__options[o];
		}
		// setter
		else {
			
			if (!this.__destroyed) {
				
				// change value
				this.__options[o] = val;
				
				// format
				this.__optionsFormat();
				
				// re-prepare the triggers if needed
				if ($.inArray(o, ['trigger', 'triggerClose', 'triggerOpen']) >= 0) {
					this.__prepareOrigin();
				}
				
				if (o === 'selfDestruction') {
					this.__prepareGC();
				}
			}
			else {
				this.__destroyError();
			}
			
			return this;
		}
	},
	
	/**
	 * This method is in charge of setting the position and size properties of the tooltip.
	 * All the hard work is delegated to the display plugin.
	 * Note: The tooltip may be detached from the DOM at the moment the method is called 
	 * but must be attached by the end of the method call.
	 * 
	 * @param {object} event For internal use only. Defined if an event such as
	 * window resizing triggered the repositioning
	 * @param {boolean} tooltipIsDetached For internal use only. Set this to true if you
	 * know that the tooltip not being in the DOM is not an issue (typically when the
	 * tooltip element has just been created but has not been added to the DOM yet).
	 * @returns {self}
	 * @public
	 */
	reposition: function(event, tooltipIsDetached) {
		
		var self = this;
		
		if (!self.__destroyed) {
			
			// if the tooltip is still open and the origin is still in the DOM
			if (self.__state != 'closed' && bodyContains(self._$origin)) {
				
				// if the tooltip has not been removed from DOM manually (or if it
				// has been detached on purpose)
				if (tooltipIsDetached || bodyContains(self._$tooltip)) {
					
					if (!tooltipIsDetached) {
						// detach in case the tooltip overflows the window and adds
						// scrollbars to it, so __geometry can be accurate
						self._$tooltip.detach();
					}
					
					// refresh the geometry object before passing it as a helper
					self.__Geometry = self.__geometry();
					
					// let a plugin fo the rest
					self._trigger({
						type: 'reposition',
						event: event,
						helper: {
							geo: self.__Geometry
						}
					});
				}
			}
		}
		else {
			self.__destroyError();
		}
		
		return self;
	},
	
	/**
	 * Alias, deprecated in 4.0.0
	 *
	 * @param callback
	 * @returns {self}
	 * @public
	 */
	show: function(callback) {
		return this.open(callback);
	},
	
	/**
	 * Returns some properties about the instance
	 * 
	 * @returns {object}
	 * @public
	 */
	status: function() {
		
		return {
			destroyed: this.__destroyed,
			enabled: this.__enabled,
			open: this.__state !== 'closed',
			state: this.__state
		};
	},
	
	/**
	 * For public use only, not to be used by plugins
	 *
	 * @returns {self}
	 * @public
	 */
	triggerHandler: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	}
};

$.fn.tooltipster = function() {
	
	// for using in closures
	var args = Array.prototype.slice.apply(arguments),
		// common mistake: an HTML element can't be in several tooltips at the same time
		contentCloningWarning = 'You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.';
	
	// this happens with $(sel).tooltipster(...) when $(sel) does not match anything
	if (this.length === 0) {
		
		// still chainable
		return this;
	}
	// this happens when calling $(sel).tooltipster('methodName or options')
	// where $(sel) matches one or more elements
	else {
		
		// method calls
		if (typeof args[0] === 'string') {
			
			var v = '#*$~&';
			
			this.each(function() {
				
				// retrieve the namepaces of the tooltip(s) that exist on that element.
				// We will interact with the first tooltip only.
				var ns = $(this).data('tooltipster-ns'),
					// self represents the instance of the first tooltipster plugin
					// associated to the current HTML object of the loop
					self = ns ? $(this).data(ns[0]) : null;
				
				// if the current element holds a tooltipster instance
				if (self) {
					
					if (typeof self[args[0]] === 'function') {
						
						if (	this.length > 1
							&&	args[0] == 'content'
							&&	(	args[1] instanceof $
								|| (typeof args[1] == 'object' && args[1] != null && args[1].tagName)
							)
							&&	!self.__options.contentCloning
							&&	self.__options.debug
						) {
							console.log(contentCloningWarning);
						}
						
						// note : args[1] and args[2] may not be defined
						var resp = self[args[0]](args[1], args[2]);
					}
					else {
						throw new Error('Unknown method "'+ args[0] +'"');
					}
					
					// if the function returned anything other than the instance
					// itself (which implies chaining, except for the `instance` method)
					if (resp !== self || args[0] === 'instance') {
						
						v = resp;
						
						// return false to stop .each iteration on the first element
						// matched by the selector
						return false;
					}
				}
				else {
					throw new Error('You called Tooltipster\'s "'+ args[0] +'" method on an uninitialized element');
				}
			});
			
			return (v !== '#*$~&') ? v : this;
		}
		// first argument is undefined or an object: the tooltip is initializing
		else {
			
			// reset the array of last initialized objects
			$.tooltipster.__instancesLatestArr = [];
			
			// is there a defined value for the multiple option in the options object ?
			var	multipleIsSet = args[0] && args[0].multiple !== undefined,
				// if the multiple option is set to true, or if it's not defined but
				// set to true in the defaults
				multiple = (multipleIsSet && args[0].multiple) || (!multipleIsSet && defaults.multiple),
				// same for content
				contentIsSet = args[0] && args[0].content !== undefined,
				content = (contentIsSet && args[0].content) || (!contentIsSet && defaults.content),
				// same for contentCloning
				contentCloningIsSet = args[0] && args[0].contentCloning !== undefined,
				contentCloning =
						(contentCloningIsSet && args[0].contentCloning)
					||	(!contentCloningIsSet && defaults.contentCloning),
				// same for debug
				debugIsSet = args[0] && args[0].debug !== undefined,
				debug = (debugIsSet && args[0].debug) || (!debugIsSet && defaults.debug);
			
			if (	this.length > 1
				&&	(	content instanceof $
					|| (typeof content == 'object' && content != null && content.tagName)
				)
				&&	!contentCloning
				&&	debug
			) {
				console.log(contentCloningWarning);
			}
			
			// create a tooltipster instance for each element if it doesn't
			// already have one or if the multiple option is set, and attach the
			// object to it
			this.each(function() {
				
				var go = false,
					$this = $(this),
					ns = $this.data('tooltipster-ns'),
					obj = null;
				
				if (!ns) {
					go = true;
				}
				else if (multiple) {
					go = true;
				}
				else if (debug) {
					// console.log('Tooltipster: one or more tooltips are already attached to the element below. Ignoring.');
					// console.log(this);
				}
				
				if (go) {
					obj = new $.Tooltipster(this, args[0]);
					
					// save the reference of the new instance
					if (!ns) ns = [];
					ns.push(obj.__namespace);
					$this.data('tooltipster-ns', ns);
					
					// save the instance itself
					$this.data(obj.__namespace, obj);
					
					// call our constructor custom function.
					// we do this here and not in ::init() because we wanted
					// the object to be saved in $this.data before triggering
					// it
					if (obj.__options.functionInit) {
						obj.__options.functionInit.call(obj, obj, {
							origin: this
						});
					}
					
					// and now the event, for the plugins and core emitter
					obj._trigger('init');
				}
				
				$.tooltipster.__instancesLatestArr.push(obj);
			});
			
			return this;
		}
	}
};

// Utilities

/**
 * A class to check if a tooltip can fit in given dimensions
 * 
 * @param {object} $tooltip The jQuery wrapped tooltip element, or a clone of it
 */
function Ruler($tooltip) {
	
	// list of instance variables
	
	this.$container;
	this.constraints = null;
	this.__$tooltip;
	
	this.__init($tooltip);
}

Ruler.prototype = {
	
	/**
	 * Move the tooltip into an invisible div that does not allow overflow to make
	 * size tests. Note: the tooltip may or may not be attached to the DOM at the
	 * moment this method is called, it does not matter.
	 * 
	 * @param {object} $tooltip The object to test. May be just a clone of the
	 * actual tooltip.
	 * @private
	 */
	__init: function($tooltip) {
		
		this.__$tooltip = $tooltip;
		
		this.__$tooltip
			.css({
				// for some reason we have to specify top and left 0
				left: 0,
				// any overflow will be ignored while measuring
				overflow: 'hidden',
				// positions at (0,0) without the div using 100% of the available width
				position: 'absolute',
				top: 0
			})
			// overflow must be auto during the test. We re-set this in case
			// it were modified by the user
			.find('.tooltipster-content')
				.css('overflow', 'auto');
		
		this.$container = $('<div class="tooltipster-ruler"></div>')
			.append(this.__$tooltip)
			.appendTo(env.window.document.body);
	},
	
	/**
	 * Force the browser to redraw (re-render) the tooltip immediately. This is required
	 * when you changed some CSS properties and need to make something with it
	 * immediately, without waiting for the browser to redraw at the end of instructions.
	 *
	 * @see http://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes
	 * @private
	 */
	__forceRedraw: function() {
		
		// note: this would work but for Webkit only
		//this.__$tooltip.close();
		//this.__$tooltip[0].offsetHeight;
		//this.__$tooltip.open();
		
		// works in FF too
		var $p = this.__$tooltip.parent();
		this.__$tooltip.detach();
		this.__$tooltip.appendTo($p);
	},
	
	/**
	 * Set maximum dimensions for the tooltip. A call to ::measure afterwards
	 * will tell us if the content overflows or if it's ok
	 *
	 * @param {int} width
	 * @param {int} height
	 * @return {Ruler}
	 * @public
	 */
	constrain: function(width, height) {
		
		this.constraints = {
			width: width,
			height: height
		};
		
		this.__$tooltip.css({
			// we disable display:flex, otherwise the content would overflow without
			// creating horizontal scrolling (which we need to detect).
			display: 'block',
			// reset any previous height
			height: '',
			// we'll check if horizontal scrolling occurs
			overflow: 'auto',
			// we'll set the width and see what height is generated and if there
			// is horizontal overflow
			width: width
		});
		
		return this;
	},
	
	/**
	 * Reset the tooltip content overflow and remove the test container
	 * 
	 * @returns {Ruler}
	 * @public
	 */
	destroy: function() {
		
		// in case the element was not a clone
		this.__$tooltip
			.detach()
			.find('.tooltipster-content')
				.css({
					// reset to CSS value
					display: '',
					overflow: ''
				});
		
		this.$container.remove();
	},
	
	/**
	 * Removes any constraints
	 * 
	 * @returns {Ruler}
	 * @public
	 */
	free: function() {
		
		this.constraints = null;
		
		// reset to natural size
		this.__$tooltip.css({
			display: '',
			height: '',
			overflow: 'visible',
			width: ''
		});
		
		return this;
	},
	
	/**
	 * Returns the size of the tooltip. When constraints are applied, also returns
	 * whether the tooltip fits in the provided dimensions.
	 * The idea is to see if the new height is small enough and if the content does
	 * not overflow horizontally.
	 *
	 * @param {int} width
	 * @param {int} height
	 * @returns {object} An object with a bool `fits` property and a `size` property
	 * @public
	 */
	measure: function() {
		
		this.__forceRedraw();
		
		var tooltipBcr = this.__$tooltip[0].getBoundingClientRect(),
			result = { size: {
				// bcr.width/height are not defined in IE8- but in this
				// case, bcr.right/bottom will have the same value
				// except in iOS 8+ where tooltipBcr.bottom/right are wrong
				// after scrolling for reasons yet to be determined.
				// tooltipBcr.top/left might not be 0, see issue #514
				height: tooltipBcr.height || (tooltipBcr.bottom - tooltipBcr.top),
				width: tooltipBcr.width || (tooltipBcr.right - tooltipBcr.left)
			}};
		
		if (this.constraints) {
			
			// note: we used to use offsetWidth instead of boundingRectClient but
			// it returned rounded values, causing issues with sub-pixel layouts.
			
			// note2: noticed that the bcrWidth of text content of a div was once
			// greater than the bcrWidth of its container by 1px, causing the final
			// tooltip box to be too small for its content. However, evaluating
			// their widths one against the other (below) surprisingly returned
			// equality. Happened only once in Chrome 48, was not able to reproduce
			// => just having fun with float position values...
			
			var $content = this.__$tooltip.find('.tooltipster-content'),
				height = this.__$tooltip.outerHeight(),
				contentBcr = $content[0].getBoundingClientRect(),
				fits = {
					height: height <= this.constraints.height,
					width: (
						// this condition accounts for min-width property that
						// may apply
						tooltipBcr.width <= this.constraints.width
							// the -1 is here because scrollWidth actually returns
							// a rounded value, and may be greater than bcr.width if
							// it was rounded up. This may cause an issue for contents
							// which actually really overflow  by 1px or so, but that
							// should be rare. Not sure how to solve this efficiently.
							// See http://blogs.msdn.com/b/ie/archive/2012/02/17/sub-pixel-rendering-and-the-css-object-model.aspx
						&&	contentBcr.width >= $content[0].scrollWidth - 1
					)
				};
			
			result.fits = fits.height && fits.width;
		}
		
		// old versions of IE get the width wrong for some reason and it causes
		// the text to be broken to a new line, so we round it up. If the width
		// is the width of the screen though, we can assume it is accurate.
		if (	env.IE
			&&	env.IE <= 11
			&&	result.size.width !== env.window.document.documentElement.clientWidth
		) {
			result.size.width = Math.ceil(result.size.width) + 1;
		}
		
		return result;
	}
};

// quick & dirty compare function, not bijective nor multidimensional
function areEqual(a,b) {
	var same = true;
	$.each(a, function(i, _) {
		if (b[i] === undefined || a[i] !== b[i]) {
			same = false;
			return false;
		}
	});
	return same;
}

/**
 * A fast function to check if an element is still in the DOM. It
 * tries to use an id as ids are indexed by the browser, or falls
 * back to jQuery's `contains` method. May fail if two elements
 * have the same id, but so be it
 *
 * @param {object} $obj A jQuery-wrapped HTML element
 * @return {boolean}
 */
function bodyContains($obj) {
	var id = $obj.attr('id'),
		el = id ? env.window.document.getElementById(id) : null;
	// must also check that the element with the id is the one we want
	return el ? el === $obj[0] : $.contains(env.window.document.body, $obj[0]);
}

// detect IE versions for dirty fixes
var uA = navigator.userAgent.toLowerCase();
if (uA.indexOf('msie') != -1) env.IE = parseInt(uA.split('msie')[1]);
else if (uA.toLowerCase().indexOf('trident') !== -1 && uA.indexOf(' rv:11') !== -1) env.IE = 11;
else if (uA.toLowerCase().indexOf('edge/') != -1) env.IE = parseInt(uA.toLowerCase().split('edge/')[1]);

// detecting support for CSS transitions
function transitionSupport() {
	
	// env.window is not defined yet when this is called
	if (!win) return false;
	
	var b = win.document.body || win.document.documentElement,
		s = b.style,
		p = 'transition',
		v = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'];
	
	if (typeof s[p] == 'string') { return true; }
	
	p = p.charAt(0).toUpperCase() + p.substr(1);
	for (var i=0; i<v.length; i++) {
		if (typeof s[v[i] + p] == 'string') { return true; }
	}
	return false;
}

// we'll return jQuery for plugins not to have to declare it as a dependency,
// but it's done by a build task since it should be included only once at the
// end when we concatenate the main file with a plugin
// sideTip is Tooltipster's default plugin.
// This file will be UMDified by a build task.

var pluginName = 'tooltipster.sideTip';

$.tooltipster._plugin({
	name: pluginName,
	instance: {
		/**
		 * Defaults are provided as a function for an easy override by inheritance
		 *
		 * @return {object} An object with the defaults options
		 * @private
		 */
		__defaults: function() {
			
			return {
				// if the tooltip should display an arrow that points to the origin
				arrow: true,
				// the distance in pixels between the tooltip and the origin
				distance: 6,
				// allows to easily change the position of the tooltip
				functionPosition: null,
				maxWidth: null,
				// used to accomodate the arrow of tooltip if there is one.
				// First to make sure that the arrow target is not too close
				// to the edge of the tooltip, so the arrow does not overflow
				// the tooltip. Secondly when we reposition the tooltip to
				// make sure that it's positioned in such a way that the arrow is
				// still pointing at the target (and not a few pixels beyond it).
				// It should be equal to or greater than half the width of
				// the arrow (by width we mean the size of the side which touches
				// the side of the tooltip).
				minIntersection: 16,
				minWidth: 0,
				// deprecated in 4.0.0. Listed for _optionsExtract to pick it up
				position: null,
				side: 'top',
				// set to false to position the tooltip relatively to the document rather
				// than the window when we open it
				viewportAware: true
			};
		},
		
		/**
		 * Run once: at instantiation of the plugin
		 *
		 * @param {object} instance The tooltipster object that instantiated this plugin
		 * @private
		 */
		__init: function(instance) {
			
			var self = this;
			
			// list of instance variables
			
			self.__instance = instance;
			self.__namespace = 'tooltipster-sideTip-'+ Math.round(Math.random()*1000000);
			self.__previousState = 'closed';
			self.__options;
			
			// initial formatting
			self.__optionsFormat();
			
			self.__instance._on('state.'+ self.__namespace, function(event) {
				
				if (event.state == 'closed') {
					self.__close();
				}
				else if (event.state == 'appearing' && self.__previousState == 'closed') {
					self.__create();
				}
				
				self.__previousState = event.state;
			});
			
			// reformat every time the options are changed
			self.__instance._on('options.'+ self.__namespace, function() {
				self.__optionsFormat();
			});
			
			self.__instance._on('reposition.'+ self.__namespace, function(e) {
				self.__reposition(e.event, e.helper);
			});
		},
		
		/**
		 * Called when the tooltip has closed
		 * 
		 * @private
		 */
		__close: function() {
			
			// detach our content object first, so the next jQuery's remove()
			// call does not unbind its event handlers
			if (this.__instance.content() instanceof $) {
				this.__instance.content().detach();
			}
			
			// remove the tooltip from the DOM
			this.__instance._$tooltip.remove();
			this.__instance._$tooltip = null;
		},
		
		/**
		 * Creates the HTML element of the tooltip.
		 * 
		 * @private
		 */
		__create: function() {
			
			// note: we wrap with a .tooltipster-box div to be able to set a margin on it
			// (.tooltipster-base must not have one)
			var $html = $(
				'<div class="tooltipster-base tooltipster-sidetip">' +
					'<div class="tooltipster-box">' +
						'<div class="tooltipster-content"></div>' +
					'</div>' +
					'<div class="tooltipster-arrow">' +
						'<div class="tooltipster-arrow-uncropped">' +
							'<div class="tooltipster-arrow-border"></div>' +
							'<div class="tooltipster-arrow-background"></div>' +
						'</div>' +
					'</div>' +
				'</div>'
			);
			
			// hide arrow if asked
			if (!this.__options.arrow) {
				$html
					.find('.tooltipster-box')
						.css('margin', 0)
						.end()
					.find('.tooltipster-arrow')
						.hide();
			}
			
			// apply min/max width if asked
			if (this.__options.minWidth) {
				$html.css('min-width', this.__options.minWidth + 'px');
			}
			if (this.__options.maxWidth) {
				$html.css('max-width', this.__options.maxWidth + 'px');
			}
			
			this.__instance._$tooltip = $html;
			
			// tell the instance that the tooltip element has been created
			this.__instance._trigger('created');
		},
		
		/**
		 * Used when the plugin is to be unplugged
		 *
		 * @private
		 */
		__destroy: function() {
			this.__instance._off('.'+ self.__namespace);
		},
		
		/**
		 * (Re)compute this.__options from the options declared to the instance
		 *
		 * @private
		 */
		__optionsFormat: function() {
			
			var self = this;
			
			// get the options
			self.__options = self.__instance._optionsExtract(pluginName, self.__defaults());
			
			// for backward compatibility, deprecated in v4.0.0
			if (self.__options.position) {
				self.__options.side = self.__options.position;
			}
			
			// options formatting
			
			// format distance as a four-cell array if it ain't one yet and then make
			// it an object with top/bottom/left/right properties
			if (typeof self.__options.distance != 'object') {
				self.__options.distance = [self.__options.distance];
			}
			if (self.__options.distance.length < 4) {
				
				if (self.__options.distance[1] === undefined) self.__options.distance[1] = self.__options.distance[0];
				if (self.__options.distance[2] === undefined) self.__options.distance[2] = self.__options.distance[0];
				if (self.__options.distance[3] === undefined) self.__options.distance[3] = self.__options.distance[1];
				
				self.__options.distance = {
					top: self.__options.distance[0],
					right: self.__options.distance[1],
					bottom: self.__options.distance[2],
					left: self.__options.distance[3]
				};
			}
			
			// let's transform:
			// 'top' into ['top', 'bottom', 'right', 'left']
			// 'right' into ['right', 'left', 'top', 'bottom']
			// 'bottom' into ['bottom', 'top', 'right', 'left']
			// 'left' into ['left', 'right', 'top', 'bottom']
			if (typeof self.__options.side == 'string') {
				
				var opposites = {
					'top': 'bottom',
					'right': 'left',
					'bottom': 'top',
					'left': 'right'
				};
				
				self.__options.side = [self.__options.side, opposites[self.__options.side]];
				
				if (self.__options.side[0] == 'left' || self.__options.side[0] == 'right') {
					self.__options.side.push('top', 'bottom');
				}
				else {
					self.__options.side.push('right', 'left');
				}
			}
			
			// misc
			// disable the arrow in IE6 unless the arrow option was explicitly set to true
			if (	$.tooltipster._env.IE === 6
				&&	self.__options.arrow !== true
			) {
				self.__options.arrow = false;
			}
		},
		
		/**
		 * This method must compute and set the positioning properties of the
		 * tooltip (left, top, width, height, etc.). It must also make sure the
		 * tooltip is eventually appended to its parent (since the element may be
		 * detached from the DOM at the moment the method is called).
		 *
		 * We'll evaluate positioning scenarios to find which side can contain the
		 * tooltip in the best way. We'll consider things relatively to the window
		 * (unless the user asks not to), then to the document (if need be, or if the
		 * user explicitly requires the tests to run on the document). For each
		 * scenario, measures are taken, allowing us to know how well the tooltip
		 * is going to fit. After that, a sorting function will let us know what
		 * the best scenario is (we also allow the user to choose his favorite
		 * scenario by using an event).
		 * 
		 * @param {object} helper An object that contains variables that plugin
		 * creators may find useful (see below)
		 * @param {object} helper.geo An object with many layout properties
		 * about objects of interest (window, document, origin). This should help
		 * plugin users compute the optimal position of the tooltip
		 * @private
		 */
		__reposition: function(event, helper) {
			
			var self = this,
				finalResult,
				// to know where to put the tooltip, we need to know on which point
				// of the x or y axis we should center it. That coordinate is the target
				targets = self.__targetFind(helper),
				testResults = [];
			
			// make sure the tooltip is detached while we make tests on a clone
			self.__instance._$tooltip.detach();
			
			// we could actually provide the original element to the Ruler and
			// not a clone, but it just feels right to keep it out of the
			// machinery.
			var $clone = self.__instance._$tooltip.clone(),
				// start position tests session
				ruler = $.tooltipster._getRuler($clone),
				satisfied = false,
				animation = self.__instance.option('animation');
			
			// an animation class could contain properties that distort the size
			if (animation) {
				$clone.removeClass('tooltipster-'+ animation);
			}
			
			// start evaluating scenarios
			$.each(['window', 'document'], function(i, container) {
				
				var takeTest = null;
				
				// let the user decide to keep on testing or not
				self.__instance._trigger({
					container: container,
					helper: helper,
					satisfied: satisfied,
					takeTest: function(bool) {
						takeTest = bool;
					},
					results: testResults,
					type: 'positionTest'
				});
				
				if (	takeTest == true
					||	(	takeTest != false
						&&	satisfied == false
							// skip the window scenarios if asked. If they are reintegrated by
							// the callback of the positionTest event, they will have to be
							// excluded using the callback of positionTested
						&&	(container != 'window' || self.__options.viewportAware)
					)
				) {
					
					// for each allowed side
					for (var i=0; i < self.__options.side.length; i++) {
						
						var distance = {
								horizontal: 0,
								vertical: 0
							},
							side = self.__options.side[i];
						
						if (side == 'top' || side == 'bottom') {
							distance.vertical = self.__options.distance[side];
						}
						else {
							distance.horizontal = self.__options.distance[side];
						}
						
						// this may have an effect on the size of the tooltip if there are css
						// rules for the arrow or something else
						self.__sideChange($clone, side);
						
						$.each(['natural', 'constrained'], function(i, mode) {
							
							takeTest = null;
							
							// emit an event on the instance
							self.__instance._trigger({
								container: container,
								event: event,
								helper: helper,
								mode: mode,
								results: testResults,
								satisfied: satisfied,
								side: side,
								takeTest: function(bool) {
									takeTest = bool;
								},
								type: 'positionTest'
							});
							
							if (	takeTest == true
								||	(	takeTest != false
									&&	satisfied == false
								)
							) {
								
								var testResult = {
									container: container,
									// we let the distance as an object here, it can make things a little easier
									// during the user's calculations at positionTest/positionTested
									distance: distance,
									// whether the tooltip can fit in the size of the viewport (does not mean
									// that we'll be able to make it initially entirely visible, see 'whole')
									fits: null,
									mode: mode,
									outerSize: null,
									side: side,
									size: null,
									target: targets[side],
									// check if the origin has enough surface on screen for the tooltip to
									// aim at it without overflowing the viewport (this is due to the thickness
									// of the arrow represented by the minIntersection length).
									// If not, the tooltip will have to be partly or entirely off screen in
									// order to stay docked to the origin. This value will stay null when the
									// container is the document, as it is not relevant
									whole: null
								};
								
								// get the size of the tooltip with or without size constraints
								var rulerConfigured = (mode == 'natural') ?
										ruler.free() :
										ruler.constrain(
											helper.geo.available[container][side].width - distance.horizontal,
											helper.geo.available[container][side].height - distance.vertical
										),
									rulerResults = rulerConfigured.measure();
								
								testResult.size = rulerResults.size;
								testResult.outerSize = {
									height: rulerResults.size.height + distance.vertical,
									width: rulerResults.size.width + distance.horizontal
								};
								
								if (mode == 'natural') {
									
									if(		helper.geo.available[container][side].width >= testResult.outerSize.width
										&&	helper.geo.available[container][side].height >= testResult.outerSize.height
									) {
										testResult.fits = true;
									}
									else {
										testResult.fits = false;
									}
								}
								else {
									testResult.fits = rulerResults.fits;
								}
								
								if (container == 'window') {
									
									if (!testResult.fits) {
										testResult.whole = false;
									}
									else {
										if (side == 'top' || side == 'bottom') {
											
											testResult.whole = (
													helper.geo.origin.windowOffset.right >= self.__options.minIntersection
												&&	helper.geo.window.size.width - helper.geo.origin.windowOffset.left >= self.__options.minIntersection
											);
										}
										else {
											testResult.whole = (
													helper.geo.origin.windowOffset.bottom >= self.__options.minIntersection
												&&	helper.geo.window.size.height - helper.geo.origin.windowOffset.top >= self.__options.minIntersection
											);
										}
									}
								}
								
								testResults.push(testResult);
								
								// we don't need to compute more positions if we have one fully on screen
								if (testResult.whole) {
									satisfied = true;
								}
								else {
									// don't run the constrained test unless the natural width was greater
									// than the available width, otherwise it's pointless as we know it
									// wouldn't fit either
									if (	testResult.mode == 'natural'
										&&	(	testResult.fits
											||	testResult.size.width <= helper.geo.available[container][side].width
										)
									) {
										return false;
									}
								}
							}
						});
					}
				}
			});
			
			// the user may eliminate the unwanted scenarios from testResults, but he's
			// not supposed to alter them at this point. functionPosition and the
			// position event serve that purpose.
			self.__instance._trigger({
				edit: function(r) {
					testResults = r;
				},
				event: event,
				helper: helper,
				results: testResults,
				type: 'positionTested'
			});
			
			/**
			 * Sort the scenarios to find the favorite one.
			 * 
			 * The favorite scenario is when we can fully display the tooltip on screen,
			 * even if it means that the middle of the tooltip is no longer centered on
			 * the middle of the origin (when the origin is near the edge of the screen
			 * or even partly off screen). We want the tooltip on the preferred side,
			 * even if it means that we have to use a constrained size rather than a
			 * natural one (as long as it fits). When the origin is off screen at the top
			 * the tooltip will be positioned at the bottom (if allowed), if the origin
			 * is off screen on the right, it will be positioned on the left, etc.
			 * If there are no scenarios where the tooltip can fit on screen, or if the
			 * user does not want the tooltip to fit on screen (viewportAware == false),
			 * we fall back to the scenarios relative to the document.
			 * 
			 * When the tooltip is bigger than the viewport in either dimension, we stop
			 * looking at the window scenarios and consider the document scenarios only,
			 * with the same logic to find on which side it would fit best.
			 * 
			 * If the tooltip cannot fit the document on any side, we force it at the
			 * bottom, so at least the user can scroll to see it.
 			 */
			testResults.sort(function(a, b) {
				
				// best if it's whole (the tooltip fits and adapts to the viewport)
				if (a.whole && !b.whole) {
					return -1;
				}
				else if (!a.whole && b.whole) {
					return 1;
				}
				else if (a.whole && b.whole) {
					
					var ai = self.__options.side.indexOf(a.side),
						bi = self.__options.side.indexOf(b.side);
					
					// use the user's sides fallback array
					if (ai < bi) {
						return -1;
					}
					else if (ai > bi) {
						return 1;
					}
					else {
						// will be used if the user forced the tests to continue
						return a.mode == 'natural' ? -1 : 1;
					}
				}
				else {
					
					// better if it fits
					if (a.fits && !b.fits) {
						return -1;
					}
					else if (!a.fits && b.fits) {
						return 1;
					}
					else if (a.fits && b.fits) {
						
						var ai = self.__options.side.indexOf(a.side),
							bi = self.__options.side.indexOf(b.side);
						
						// use the user's sides fallback array
						if (ai < bi) {
							return -1;
						}
						else if (ai > bi) {
							return 1;
						}
						else {
							// will be used if the user forced the tests to continue
							return a.mode == 'natural' ? -1 : 1;
						}
					}
					else {
						
						// if everything failed, this will give a preference to the case where
						// the tooltip overflows the document at the bottom
						if (	a.container == 'document'
							&&	a.side == 'bottom'
							&&	a.mode == 'natural'
						) {
							return -1;
						}
						else {
							return 1;
						}
					}
				}
			});
			
			finalResult = testResults[0];
			
			
			// now let's find the coordinates of the tooltip relatively to the window
			finalResult.coord = {};
			
			switch (finalResult.side) {
				
				case 'left':
				case 'right':
					finalResult.coord.top = Math.floor(finalResult.target - finalResult.size.height / 2);
					break;
				
				case 'bottom':
				case 'top':
					finalResult.coord.left = Math.floor(finalResult.target - finalResult.size.width / 2);
					break;
			}
			
			switch (finalResult.side) {
				
				case 'left':
					finalResult.coord.left = helper.geo.origin.windowOffset.left - finalResult.outerSize.width;
					break;
				
				case 'right':
					finalResult.coord.left = helper.geo.origin.windowOffset.right + finalResult.distance.horizontal;
					break;
				
				case 'top':
					finalResult.coord.top = helper.geo.origin.windowOffset.top - finalResult.outerSize.height;
					break;
				
				case 'bottom':
					finalResult.coord.top = helper.geo.origin.windowOffset.bottom + finalResult.distance.vertical;
					break;
			}
			
			// if the tooltip can potentially be contained within the viewport dimensions
			// and that we are asked to make it fit on screen
			if (finalResult.container == 'window') {
				
				// if the tooltip overflows the viewport, we'll move it accordingly (then it will
				// not be centered on the middle of the origin anymore). We only move horizontally
				// for top and bottom tooltips and vice versa.
				if (finalResult.side == 'top' || finalResult.side == 'bottom') {
					
					// if there is an overflow on the left
					if (finalResult.coord.left < 0) {
						
						// prevent the overflow unless the origin itself gets off screen (minus the
						// margin needed to keep the arrow pointing at the target)
						if (helper.geo.origin.windowOffset.right - this.__options.minIntersection >= 0) {
							finalResult.coord.left = 0;
						}
						else {
							finalResult.coord.left = helper.geo.origin.windowOffset.right - this.__options.minIntersection - 1;
						}
					}
					// or an overflow on the right
					else if (finalResult.coord.left > helper.geo.window.size.width - finalResult.size.width) {
						
						if (helper.geo.origin.windowOffset.left + this.__options.minIntersection <= helper.geo.window.size.width) {
							finalResult.coord.left = helper.geo.window.size.width - finalResult.size.width;
						}
						else {
							finalResult.coord.left = helper.geo.origin.windowOffset.left + this.__options.minIntersection + 1 - finalResult.size.width;
						}
					}
				}
				else {
					
					// overflow at the top
					if (finalResult.coord.top < 0) {
						
						if (helper.geo.origin.windowOffset.bottom - this.__options.minIntersection >= 0) {
							finalResult.coord.top = 0;
						}
						else {
							finalResult.coord.top = helper.geo.origin.windowOffset.bottom - this.__options.minIntersection - 1;
						}
					}
					// or at the bottom
					else if (finalResult.coord.top > helper.geo.window.size.height - finalResult.size.height) {
						
						if (helper.geo.origin.windowOffset.top + this.__options.minIntersection <= helper.geo.window.size.height) {
							finalResult.coord.top = helper.geo.window.size.height - finalResult.size.height;
						}
						else {
							finalResult.coord.top = helper.geo.origin.windowOffset.top + this.__options.minIntersection + 1 - finalResult.size.height;
						}
					}
				}
			}
			else {
				
				// there might be overflow here too but it's easier to handle. If there has
				// to be an overflow, we'll make sure it's on the right side of the screen
				// (because the browser will extend the document size if there is an overflow
				// on the right, but not on the left). The sort function above has already
				// made sure that a bottom document overflow is preferred to a top overflow,
				// so we don't have to care about it.
				
				// if there is an overflow on the right
				if (finalResult.coord.left > helper.geo.window.size.width - finalResult.size.width) {
					
					// this may actually create on overflow on the left but we'll fix it in a sec
					finalResult.coord.left = helper.geo.window.size.width - finalResult.size.width;
				}
				
				// if there is an overflow on the left
				if (finalResult.coord.left < 0) {
					
					// don't care if it overflows the right after that, we made our best
					finalResult.coord.left = 0;
				}
			}
			
			
			// submit the positioning proposal to the user function which may choose to change
			// the side, size and/or the coordinates
			
			// first, set the rules that corresponds to the proposed side: it may change
			// the size of the tooltip, and the custom functionPosition may want to detect the
			// size of something before making a decision. So let's make things easier for the
			// implementor
			self.__sideChange($clone, finalResult.side);
			
			// add some variables to the helper
			helper.tooltipClone = $clone[0];
			helper.tooltipParent = self.__instance.option('parent').parent[0];
			// move informative values to the helper
			helper.mode = finalResult.mode;
			helper.whole = finalResult.whole;
			// add some variables to the helper for the functionPosition callback (these
			// will also be added to the event fired by self.__instance._trigger but that's
			// ok, we're just being consistent)
			helper.origin = self.__instance._$origin[0];
			helper.tooltip = self.__instance._$tooltip[0];
			
			// leave only the actionable values in there for functionPosition
			delete finalResult.container;
			delete finalResult.fits;
			delete finalResult.mode;
			delete finalResult.outerSize;
			delete finalResult.whole;
			
			// keep only the distance on the relevant side, for clarity
			finalResult.distance = finalResult.distance.horizontal || finalResult.distance.vertical;
			
			// beginners may not be comfortable with the concept of editing the object
			//  passed by reference, so we provide an edit function and pass a clone
			var finalResultClone = $.extend(true, {}, finalResult);
			
			// emit an event on the instance
			self.__instance._trigger({
				edit: function(result) {
					finalResult = result;
				},
				event: event,
				helper: helper,
				position: finalResultClone,
				type: 'position'
			});
			
			if (self.__options.functionPosition) {
				
				var result = self.__options.functionPosition.call(self, self.__instance, helper, finalResultClone);
				
				if (result) finalResult = result;
			}
			
			// end the positioning tests session (the user might have had a
			// use for it during the position event, now it's over)
			ruler.destroy();
			
			// compute the position of the target relatively to the tooltip root
			// element so we can place the arrow and make the needed adjustments
			var arrowCoord,
				maxVal;
			
			if (finalResult.side == 'top' || finalResult.side == 'bottom') {
				
				arrowCoord = {
					prop: 'left',
					val: finalResult.target - finalResult.coord.left
				};
				maxVal = finalResult.size.width - this.__options.minIntersection;
			}
			else {
				
				arrowCoord = {
					prop: 'top',
					val: finalResult.target - finalResult.coord.top
				};
				maxVal = finalResult.size.height - this.__options.minIntersection;
			}
			
			// cannot lie beyond the boundaries of the tooltip, minus the
			// arrow margin
			if (arrowCoord.val < this.__options.minIntersection) {
				arrowCoord.val = this.__options.minIntersection;
			}
			else if (arrowCoord.val > maxVal) {
				arrowCoord.val = maxVal;
			}
			
			var originParentOffset;
			
			// let's convert the window-relative coordinates into coordinates relative to the
			// future positioned parent that the tooltip will be appended to
			if (helper.geo.origin.fixedLineage) {
				
				// same as windowOffset when the position is fixed
				originParentOffset = helper.geo.origin.windowOffset;
			}
			else {
				
				// this assumes that the parent of the tooltip is located at
				// (0, 0) in the document, typically like when the parent is
				// <body>.
				// If we ever allow other types of parent, .tooltipster-ruler
				// will have to be appended to the parent to inherit css style
				// values that affect the display of the text and such.
				originParentOffset = {
					left: helper.geo.origin.windowOffset.left + helper.geo.window.scroll.left,
					top: helper.geo.origin.windowOffset.top + helper.geo.window.scroll.top
				};
			}
			
			finalResult.coord = {
				left: originParentOffset.left + (finalResult.coord.left - helper.geo.origin.windowOffset.left),
				top: originParentOffset.top + (finalResult.coord.top - helper.geo.origin.windowOffset.top)
			};
			
			// set position values on the original tooltip element
			
			self.__sideChange(self.__instance._$tooltip, finalResult.side);
			
			if (helper.geo.origin.fixedLineage) {
				self.__instance._$tooltip
					.css('position', 'fixed');
			}
			else {
				// CSS default
				self.__instance._$tooltip
					.css('position', '');
			}
			
			self.__instance._$tooltip
				.css({
					left: finalResult.coord.left,
					top: finalResult.coord.top,
					// we need to set a size even if the tooltip is in its natural size
					// because when the tooltip is positioned beyond the width of the body
					// (which is by default the width of the window; it will happen when
					// you scroll the window horizontally to get to the origin), its text
					// content will otherwise break lines at each word to keep up with the
					// body overflow strategy.
					height: finalResult.size.height,
					width: finalResult.size.width
				})
				.find('.tooltipster-arrow')
					.css({
						'left': '',
						'top': ''
					})
					.css(arrowCoord.prop, arrowCoord.val);
			
			// append the tooltip HTML element to its parent
			self.__instance._$tooltip.appendTo(self.__instance.option('parent'));
			
			self.__instance._trigger({
				type: 'repositioned',
				event: event,
				position: finalResult
			});
		},
		
		/**
		 * Make whatever modifications are needed when the side is changed. This has
		 * been made an independant method for easy inheritance in custom plugins based
		 * on this default plugin.
		 *
		 * @param {object} $obj
		 * @param {string} side
		 * @private
		 */
		__sideChange: function($obj, side) {
			
			$obj
				.removeClass('tooltipster-bottom')
				.removeClass('tooltipster-left')
				.removeClass('tooltipster-right')
				.removeClass('tooltipster-top')
				.addClass('tooltipster-'+ side);
		},
		
		/**
		 * Returns the target that the tooltip should aim at for a given side.
		 * The calculated value is a distance from the edge of the window
		 * (left edge for top/bottom sides, top edge for left/right side). The
		 * tooltip will be centered on that position and the arrow will be
		 * positioned there (as much as possible).
		 *
		 * @param {object} helper
		 * @return {integer}
		 * @private
		 */
		__targetFind: function(helper) {
			
			var target = {},
				rects = this.__instance._$origin[0].getClientRects();
			
			// these lines fix a Chrome bug (issue #491)
			if (rects.length > 1) {
				var opacity = this.__instance._$origin.css('opacity');
				if(opacity == 1) {
					this.__instance._$origin.css('opacity', 0.99);
					rects = this.__instance._$origin[0].getClientRects();
					this.__instance._$origin.css('opacity', 1);
				}
			}
			
			// by default, the target will be the middle of the origin
			if (rects.length < 2) {
				
				target.top = Math.floor(helper.geo.origin.windowOffset.left + (helper.geo.origin.size.width / 2));
				target.bottom = target.top;
				
				target.left = Math.floor(helper.geo.origin.windowOffset.top + (helper.geo.origin.size.height / 2));
				target.right = target.left;
			}
			// if multiple client rects exist, the element may be text split
			// up into multiple lines and the middle of the origin may not be
			// best option anymore. We need to choose the best target client rect
			else {
				
				// top: the first
				var targetRect = rects[0];
				target.top = Math.floor(targetRect.left + (targetRect.right - targetRect.left) / 2);
		
				// right: the middle line, rounded down in case there is an even
				// number of lines (looks more centered => check out the
				// demo with 4 split lines)
				if (rects.length > 2) {
					targetRect = rects[Math.ceil(rects.length / 2) - 1];
				}
				else {
					targetRect = rects[0];
				}
				target.right = Math.floor(targetRect.top + (targetRect.bottom - targetRect.top) / 2);
		
				// bottom: the last
				targetRect = rects[rects.length - 1];
				target.bottom = Math.floor(targetRect.left + (targetRect.right - targetRect.left) / 2);
		
				// left: the middle line, rounded up
				if (rects.length > 2) {
					targetRect = rects[Math.ceil((rects.length + 1) / 2) - 1];
				}
				else {
					targetRect = rects[rects.length - 1];
				}
				
				target.left = Math.floor(targetRect.top + (targetRect.bottom - targetRect.top) / 2);
			}
			
			return target;
		}
	}
});

/* a build task will add "return $;" here */
return $;

}));

/**
 * jquery.mask.js
 * @version: v1.14.12
 * @author: Igor Escobar
 *
 * Created by Igor Escobar on 2012-03-10. Please report any bug at http://blog.igorescobar.com
 *
 * Copyright (c) 2012 Igor Escobar http://blog.igorescobar.com
 *
 * The MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

/* jshint laxbreak: true */
/* jshint maxcomplexity:17 */
/* global define */

'use strict';

// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.
// https://github.com/umdjs/umd/blob/master/jqueryPluginCommonjs.js
(function (factory, jQuery, Zepto) {

    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        module.exports = factory(require('jquery'));
    } else {
        factory(jQuery || Zepto);
    }

}(function ($) {

    var Mask = function (el, mask, options) {

        var p = {
            invalid: [],
            getCaret: function () {
                try {
                    var sel,
                        pos = 0,
                        ctrl = el.get(0),
                        dSel = document.selection,
                        cSelStart = ctrl.selectionStart;

                    // IE Support
                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {
                        sel = dSel.createRange();
                        sel.moveStart('character', -p.val().length);
                        pos = sel.text.length;
                    }
                    // Firefox support
                    else if (cSelStart || cSelStart === '0') {
                        pos = cSelStart;
                    }

                    return pos;
                } catch (e) {}
            },
            setCaret: function(pos) {
                try {
                    if (el.is(':focus')) {
                        var range, ctrl = el.get(0);

                        // Firefox, WebKit, etc..
                        if (ctrl.setSelectionRange) {
                            ctrl.setSelectionRange(pos, pos);
                        } else { // IE
                            range = ctrl.createTextRange();
                            range.collapse(true);
                            range.moveEnd('character', pos);
                            range.moveStart('character', pos);
                            range.select();
                        }
                    }
                } catch (e) {}
            },
            events: function() {
                el
                .on('keydown.mask', function(e) {
                    el.data('mask-keycode', e.keyCode || e.which);
                    el.data('mask-previus-value', el.val());
                    el.data('mask-previus-caret-pos', p.getCaret());
                    p.maskDigitPosMapOld = p.maskDigitPosMap;
                })
                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)
                .on('paste.mask drop.mask', function() {
                    setTimeout(function() {
                        el.keydown().keyup();
                    }, 100);
                })
                .on('change.mask', function(){
                    el.data('changed', true);
                })
                .on('blur.mask', function(){
                    if (oldValue !== p.val() && !el.data('changed')) {
                        el.trigger('change');
                    }
                    el.data('changed', false);
                })
                // it's very important that this callback remains in this position
                // otherwhise oldValue it's going to work buggy
                .on('blur.mask', function() {
                    oldValue = p.val();
                })
                // select all text on focus
                .on('focus.mask', function (e) {
                    if (options.selectOnFocus === true) {
                        $(e.target).select();
                    }
                })
                // clear the value if it not complete the mask
                .on('focusout.mask', function() {
                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {
                       p.val('');
                   }
                });
            },
            getRegexMask: function() {
                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;

                for (var i = 0; i < mask.length; i++) {
                    translation = jMask.translation[mask.charAt(i)];

                    if (translation) {

                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');
                        optional = translation.optional;
                        recursive = translation.recursive;

                        if (recursive) {
                            maskChunks.push(mask.charAt(i));
                            oRecursive = {digit: mask.charAt(i), pattern: pattern};
                        } else {
                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));
                        }

                    } else {
                        maskChunks.push(mask.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'));
                    }
                }

                r = maskChunks.join('');

                if (oRecursive) {
                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')
                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);
                }

                return new RegExp(r);
            },
            destroyEvents: function() {
                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));
            },
            val: function(v) {
                var isInput = el.is('input'),
                    method = isInput ? 'val' : 'text',
                    r;

                if (arguments.length > 0) {
                    if (el[method]() !== v) {
                        el[method](v);
                    }
                    r = el;
                } else {
                    r = el[method]();
                }

                return r;
            },
            calculateCaretPosition: function() {
                var oldVal = el.data('mask-previus-value') || '',
                    newVal = p.getMasked(),
                    caretPosNew = p.getCaret();
                if (oldVal !== newVal) {
                    var caretPosOld = el.data('mask-previus-caret-pos') || 0,
                        newValL = newVal.length,
                        oldValL = oldVal.length,
                        maskDigitsBeforeCaret = 0,
                        maskDigitsAfterCaret = 0,
                        maskDigitsBeforeCaretAll = 0,
                        maskDigitsBeforeCaretAllOld = 0,
                        i = 0;

                    for (i = caretPosNew; i < newValL; i++) {
                        if (!p.maskDigitPosMap[i]) {
                            break;
                        }
                        maskDigitsAfterCaret++;
                    }

                    for (i = caretPosNew - 1; i >= 0; i--) {
                        if (!p.maskDigitPosMap[i]) {
                            break;
                        }
                        maskDigitsBeforeCaret++;
                    }

                    for (i = caretPosNew - 1; i >= 0; i--) {
                        if (p.maskDigitPosMap[i]) {
                            maskDigitsBeforeCaretAll++;
                        }
                    }

                    for (i = caretPosOld - 1; i >= 0; i--) {
                        if (p.maskDigitPosMapOld[i]) {
                            maskDigitsBeforeCaretAllOld++;
                        }
                    }

                    // if the cursor is at the end keep it there
                    if (caretPosNew > oldValL) {
                      caretPosNew = newValL * 10;
                    } else if (caretPosOld >= caretPosNew && caretPosOld !== oldValL) {
                        if (!p.maskDigitPosMapOld[caretPosNew])  {
                          var caretPos = caretPosNew;
                          caretPosNew -= maskDigitsBeforeCaretAllOld - maskDigitsBeforeCaretAll;
                          caretPosNew -= maskDigitsBeforeCaret;
                          if (p.maskDigitPosMap[caretPosNew])  {
                            caretPosNew = caretPos;
                          }
                        }
                    }
                    else if (caretPosNew > caretPosOld) {
                        caretPosNew += maskDigitsBeforeCaretAll - maskDigitsBeforeCaretAllOld;
                        caretPosNew += maskDigitsAfterCaret;
                    }
                }
                return caretPosNew;
            },
            behaviour: function(e) {
                e = e || window.event;
                p.invalid = [];

                var keyCode = el.data('mask-keycode');

                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {
                    var newVal   = p.getMasked(),
                        caretPos = p.getCaret();

                    // this is a compensation to devices/browsers that don't compensate
                    // caret positioning the right way
                    setTimeout(function() {
                      p.setCaret(p.calculateCaretPosition());
                    }, 10);

                    p.val(newVal);
                    p.setCaret(caretPos);
                    return p.callbacks(e);
                }
            },
            getMasked: function(skipMaskChars, val) {
                var buf = [],
                    value = val === undefined ? p.val() : val + '',
                    m = 0, maskLen = mask.length,
                    v = 0, valLen = value.length,
                    offset = 1, addMethod = 'push',
                    resetPos = -1,
                    maskDigitCount = 0,
                    maskDigitPosArr = [],
                    lastMaskChar,
                    check;

                if (options.reverse) {
                    addMethod = 'unshift';
                    offset = -1;
                    lastMaskChar = 0;
                    m = maskLen - 1;
                    v = valLen - 1;
                    check = function () {
                        return m > -1 && v > -1;
                    };
                } else {
                    lastMaskChar = maskLen - 1;
                    check = function () {
                        return m < maskLen && v < valLen;
                    };
                }

                var lastUntranslatedMaskChar;
                while (check()) {
                    var maskDigit = mask.charAt(m),
                        valDigit = value.charAt(v),
                        translation = jMask.translation[maskDigit];

                    if (translation) {
                        if (valDigit.match(translation.pattern)) {
                            buf[addMethod](valDigit);
                             if (translation.recursive) {
                                if (resetPos === -1) {
                                    resetPos = m;
                                } else if (m === lastMaskChar) {
                                    m = resetPos - offset;
                                }

                                if (lastMaskChar === resetPos) {
                                    m -= offset;
                                }
                            }
                            m += offset;
                        } else if (valDigit === lastUntranslatedMaskChar) {
                            // matched the last untranslated (raw) mask character that we encountered
                            // likely an insert offset the mask character from the last entry; fall
                            // through and only increment v
                            maskDigitCount--;
                            lastUntranslatedMaskChar = undefined;
                        } else if (translation.optional) {
                            m += offset;
                            v -= offset;
                        } else if (translation.fallback) {
                            buf[addMethod](translation.fallback);
                            m += offset;
                            v -= offset;
                        } else {
                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});
                        }
                        v += offset;
                    } else {
                        if (!skipMaskChars) {
                            buf[addMethod](maskDigit);
                        }

                        if (valDigit === maskDigit) {
                            maskDigitPosArr.push(v);
                            v += offset;
                        } else {
                            lastUntranslatedMaskChar = maskDigit;
                            maskDigitPosArr.push(v + maskDigitCount);
                            maskDigitCount++;
                        }

                        m += offset;
                    }
                }

                var lastMaskCharDigit = mask.charAt(lastMaskChar);
                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {
                    buf.push(lastMaskCharDigit);
                }

                var newVal = buf.join('');
                p.mapMaskdigitPositions(newVal, maskDigitPosArr, valLen);
                return newVal;
            },
            mapMaskdigitPositions: function(newVal, maskDigitPosArr, valLen) {
              var maskDiff = options.reverse ? newVal.length - valLen : 0;
              p.maskDigitPosMap = {};
              for (var i = 0; i < maskDigitPosArr.length; i++) {
                p.maskDigitPosMap[maskDigitPosArr[i] + maskDiff] = 1;
              }
            },
            callbacks: function (e) {
                var val = p.val(),
                    changed = val !== oldValue,
                    defaultArgs = [val, e, el, options],
                    callback = function(name, criteria, args) {
                        if (typeof options[name] === 'function' && criteria) {
                            options[name].apply(this, args);
                        }
                    };

                callback('onChange', changed === true, defaultArgs);
                callback('onKeyPress', changed === true, defaultArgs);
                callback('onComplete', val.length === mask.length, defaultArgs);
                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);
            }
        };

        el = $(el);
        var jMask = this, oldValue = p.val(), regexMask;

        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;

        // public methods
        jMask.mask = mask;
        jMask.options = options;
        jMask.remove = function() {
            var caret = p.getCaret();
            p.destroyEvents();
            p.val(jMask.getCleanVal());
            p.setCaret(caret);
            return el;
        };

        // get value without mask
        jMask.getCleanVal = function() {
           return p.getMasked(true);
        };

        // get masked value without the value being in the input or element
        jMask.getMaskedVal = function(val) {
           return p.getMasked(false, val);
        };

       jMask.init = function(onlyMask) {
            onlyMask = onlyMask || false;
            options = options || {};

            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;
            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;
            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);

            jMask = $.extend(true, {}, jMask, options);

            regexMask = p.getRegexMask();

            if (onlyMask) {
                p.events();
                p.val(p.getMasked());
            } else {
                if (options.placeholder) {
                    el.attr('placeholder' , options.placeholder);
                }

                // this is necessary, otherwise if the user submit the form
                // and then press the "back" button, the autocomplete will erase
                // the data. Works fine on IE9+, FF, Opera, Safari.
                if (el.data('mask')) {
                  el.attr('autocomplete', 'off');
                }

                // detect if is necessary let the user type freely.
                // for is a lot faster than forEach.
                for (var i = 0, maxlength = true; i < mask.length; i++) {
                    var translation = jMask.translation[mask.charAt(i)];
                    if (translation && translation.recursive) {
                        maxlength = false;
                        break;
                    }
                }

                if (maxlength) {
                    el.attr('maxlength', mask.length);
                }

                p.destroyEvents();
                p.events();

                var caret = p.getCaret();
                p.val(p.getMasked());
                p.setCaret(caret);
            }
        };

        jMask.init(!el.is('input'));
    };

    $.maskWatchers = {};
    var HTMLAttributes = function () {
        var input = $(this),
            options = {},
            prefix = 'data-mask-',
            mask = input.attr('data-mask');

        if (input.attr(prefix + 'reverse')) {
            options.reverse = true;
        }

        if (input.attr(prefix + 'clearifnotmatch')) {
            options.clearIfNotMatch = true;
        }

        if (input.attr(prefix + 'selectonfocus') === 'true') {
           options.selectOnFocus = true;
        }

        if (notSameMaskObject(input, mask, options)) {
            return input.data('mask', new Mask(this, mask, options));
        }
    },
    notSameMaskObject = function(field, mask, options) {
        options = options || {};
        var maskObject = $(field).data('mask'),
            stringify = JSON.stringify,
            value = $(field).val() || $(field).text();
        try {
            if (typeof mask === 'function') {
                mask = mask(value);
            }
            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;
        } catch (e) {}
    },
    eventSupported = function(eventName) {
        var el = document.createElement('div'), isSupported;

        eventName = 'on' + eventName;
        isSupported = (eventName in el);

        if ( !isSupported ) {
            el.setAttribute(eventName, 'return;');
            isSupported = typeof el[eventName] === 'function';
        }
        el = null;

        return isSupported;
    };

    $.fn.mask = function(mask, options) {
        options = options || {};
        var selector = this.selector,
            globals = $.jMaskGlobals,
            interval = globals.watchInterval,
            watchInputs = options.watchInputs || globals.watchInputs,
            maskFunction = function() {
                if (notSameMaskObject(this, mask, options)) {
                    return $(this).data('mask', new Mask(this, mask, options));
                }
            };

        $(this).each(maskFunction);

        if (selector && selector !== '' && watchInputs) {
            clearInterval($.maskWatchers[selector]);
            $.maskWatchers[selector] = setInterval(function(){
                $(document).find(selector).each(maskFunction);
            }, interval);
        }
        return this;
    };

    $.fn.masked = function(val) {
        return this.data('mask').getMaskedVal(val);
    };

    $.fn.unmask = function() {
        clearInterval($.maskWatchers[this.selector]);
        delete $.maskWatchers[this.selector];
        return this.each(function() {
            var dataMask = $(this).data('mask');
            if (dataMask) {
                dataMask.remove().removeData('mask');
            }
        });
    };

    $.fn.cleanVal = function() {
        return this.data('mask').getCleanVal();
    };

    $.applyDataMask = function(selector) {
        selector = selector || $.jMaskGlobals.maskElements;
        var $selector = (selector instanceof $) ? selector : $(selector);
        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);
    };

    var globals = {
        maskElements: 'input,td,span,div',
        dataMaskAttr: '*[data-mask]',
        dataMask: true,
        watchInterval: 300,
        watchInputs: true,
        // old versions of chrome dont work great with input event
        useInput: !/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent) && eventSupported('input'),
        watchDataMask: false,
        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],
        translation: {
            '0': {pattern: /\d/},
            '9': {pattern: /\d/, optional: true},
            '#': {pattern: /\d/, recursive: true},
            'A': {pattern: /[a-zA-Z0-9]/},
            'S': {pattern: /[a-zA-Z]/}
        }
    };

    $.jMaskGlobals = $.jMaskGlobals || {};
    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);

    // looking for inputs with data-mask attribute
    if (globals.dataMask) {
        $.applyDataMask();
    }

    setInterval(function() {
        if ($.jMaskGlobals.watchDataMask) {
            $.applyDataMask();
        }
    }, globals.watchInterval);
}, window.jQuery, window.Zepto));

/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

(function (factory) {
    if ( typeof define === 'function' && define.amd ) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS style for Browserify
        module.exports = factory;
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {

    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?
                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice  = Array.prototype.slice,
        nullLowestDeltaTimeout, lowestDelta;

    if ( $.event.fixHooks ) {
        for ( var i = toFix.length; i; ) {
            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;
        }
    }

    var special = $.event.special.mousewheel = {
        version: '3.1.12',

        setup: function() {
            if ( this.addEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.addEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = handler;
            }
            // Store the line height and page height for this particular element
            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
        },

        teardown: function() {
            if ( this.removeEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.removeEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = null;
            }
            // Clean up the data we added to the element
            $.removeData(this, 'mousewheel-line-height');
            $.removeData(this, 'mousewheel-page-height');
        },

        getLineHeight: function(elem) {
            var $elem = $(elem),
                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();
            if (!$parent.length) {
                $parent = $('body');
            }
            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;
        },

        getPageHeight: function(elem) {
            return $(elem).height();
        },

        settings: {
            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below
            normalizeOffset: true  // calls getBoundingClientRect for each event
        }
    };

    $.fn.extend({
        mousewheel: function(fn) {
            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
        },

        unmousewheel: function(fn) {
            return this.unbind('mousewheel', fn);
        }
    });


    function handler(event) {
        var orgEvent   = event || window.event,
            args       = slice.call(arguments, 1),
            delta      = 0,
            deltaX     = 0,
            deltaY     = 0,
            absDelta   = 0,
            offsetX    = 0,
            offsetY    = 0;
        event = $.event.fix(orgEvent);
        event.type = 'mousewheel';

        // Old school scrollwheel delta
        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }
        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }
        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }
        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }

        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
            deltaX = deltaY * -1;
            deltaY = 0;
        }

        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
        delta = deltaY === 0 ? deltaX : deltaY;

        // New school wheel delta (wheel event)
        if ( 'deltaY' in orgEvent ) {
            deltaY = orgEvent.deltaY * -1;
            delta  = deltaY;
        }
        if ( 'deltaX' in orgEvent ) {
            deltaX = orgEvent.deltaX;
            if ( deltaY === 0 ) { delta  = deltaX * -1; }
        }

        // No change actually happened, no reason to go any further
        if ( deltaY === 0 && deltaX === 0 ) { return; }

        // Need to convert lines and pages to pixels if we aren't already in pixels
        // There are three delta modes:
        //   * deltaMode 0 is by pixels, nothing to do
        //   * deltaMode 1 is by lines
        //   * deltaMode 2 is by pages
        if ( orgEvent.deltaMode === 1 ) {
            var lineHeight = $.data(this, 'mousewheel-line-height');
            delta  *= lineHeight;
            deltaY *= lineHeight;
            deltaX *= lineHeight;
        } else if ( orgEvent.deltaMode === 2 ) {
            var pageHeight = $.data(this, 'mousewheel-page-height');
            delta  *= pageHeight;
            deltaY *= pageHeight;
            deltaX *= pageHeight;
        }

        // Store lowest absolute delta to normalize the delta values
        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );

        if ( !lowestDelta || absDelta < lowestDelta ) {
            lowestDelta = absDelta;

            // Adjust older deltas if necessary
            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
                lowestDelta /= 40;
            }
        }

        // Adjust older deltas if necessary
        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
            // Divide all the things by 40!
            delta  /= 40;
            deltaX /= 40;
            deltaY /= 40;
        }

        // Get a whole, normalized value for the deltas
        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);
        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);
        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);

        // Normalise offsetX and offsetY properties
        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {
            var boundingRect = this.getBoundingClientRect();
            offsetX = event.clientX - boundingRect.left;
            offsetY = event.clientY - boundingRect.top;
        }

        // Add information to the event object
        event.deltaX = deltaX;
        event.deltaY = deltaY;
        event.deltaFactor = lowestDelta;
        event.offsetX = offsetX;
        event.offsetY = offsetY;
        // Go ahead and set deltaMode to 0 since we converted to pixels
        // Although this is a little odd since we overwrite the deltaX/Y
        // properties with normalized deltas.
        event.deltaMode = 0;

        // Add event and delta to the front of the arguments
        args.unshift(event, delta, deltaX, deltaY);

        // Clearout lowestDelta after sometime to better
        // handle multiple device types that give different
        // a different lowestDelta
        // Ex: trackpad = 3 and mouse wheel = 120
        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }
        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

        return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
        lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
        // If this is an older event and the delta is divisable by 120,
        // then we are assuming that the browser is treating this as an
        // older mouse wheel event and that we should divide the deltas
        // by 40 to try and get a more usable deltaFactor.
        // Side note, this actually impacts the reported scroll distance
        // in older browsers and can cause scrolling to be slower than native.
        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }

}));

/*!
 * jScrollPane - v2.0.23 - 2016-01-28
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2014 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.fn.jScrollPane=function(b){function c(b,c){function d(c){var f,h,j,k,l,o,p=!1,q=!1;if(N=c,void 0===O)l=b.scrollTop(),o=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),P=b.innerWidth()+rb,Q=b.innerHeight(),b.width(P),O=a('<div class="jspPane" />').css("padding",qb).append(b.children()),R=a('<div class="jspContainer" />').css({width:P+"px",height:Q+"px"}).append(O).appendTo(b);else{if(b.css("width",""),p=N.stickToBottom&&A(),q=N.stickToRight&&B(),k=b.innerWidth()+rb!=P||b.outerHeight()!=Q,k&&(P=b.innerWidth()+rb,Q=b.innerHeight(),R.css({width:P+"px",height:Q+"px"})),!k&&sb==S&&O.outerHeight()==T)return void b.width(P);sb=S,O.css("width",""),b.width(P),R.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}O.css("overflow","auto"),S=c.contentWidth?c.contentWidth:O[0].scrollWidth,T=O[0].scrollHeight,O.css("overflow",""),U=S/P,V=T/Q,W=V>1,X=U>1,X||W?(b.addClass("jspScrollable"),f=N.maintainPosition&&($||bb),f&&(h=y(),j=z()),e(),g(),i(),f&&(w(q?S-P:h,!1),v(p?T-Q:j,!1)),F(),C(),L(),N.enableKeyboardNavigation&&H(),N.clickOnTrack&&m(),J(),N.hijackInternalLinks&&K()):(b.removeClass("jspScrollable"),O.css({top:0,left:0,width:R.width()-rb}),D(),G(),I(),n()),N.autoReinitialise&&!pb?pb=setInterval(function(){d(N)},N.autoReinitialiseDelay):!N.autoReinitialise&&pb&&clearInterval(pb),l&&b.scrollTop(0)&&v(l,!1),o&&b.scrollLeft(0)&&w(o,!1),b.trigger("jsp-initialised",[X||W])}function e(){W&&(R.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />'))),cb=R.find(">.jspVerticalBar"),db=cb.find(">.jspTrack"),Y=db.find(">.jspDrag"),N.showArrows&&(hb=a('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",k(0,-1)).bind("click.jsp",E),ib=a('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",k(0,1)).bind("click.jsp",E),N.arrowScrollOnHover&&(hb.bind("mouseover.jsp",k(0,-1,hb)),ib.bind("mouseover.jsp",k(0,1,ib))),j(db,N.verticalArrowPositions,hb,ib)),fb=Q,R.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){fb-=a(this).outerHeight()}),Y.hover(function(){Y.addClass("jspHover")},function(){Y.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),Y.addClass("jspActive");var c=b.pageY-Y.position().top;return a("html").bind("mousemove.jsp",function(a){p(a.pageY-c,!1)}).bind("mouseup.jsp mouseleave.jsp",o),!1}),f())}function f(){db.height(fb+"px"),$=0,eb=N.verticalGutter+db.outerWidth(),O.width(P-eb-rb);try{0===cb.position().left&&O.css("margin-left",eb+"px")}catch(a){}}function g(){X&&(R.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),jb=R.find(">.jspHorizontalBar"),kb=jb.find(">.jspTrack"),_=kb.find(">.jspDrag"),N.showArrows&&(nb=a('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",k(-1,0)).bind("click.jsp",E),ob=a('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",k(1,0)).bind("click.jsp",E),N.arrowScrollOnHover&&(nb.bind("mouseover.jsp",k(-1,0,nb)),ob.bind("mouseover.jsp",k(1,0,ob))),j(kb,N.horizontalArrowPositions,nb,ob)),_.hover(function(){_.addClass("jspHover")},function(){_.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),_.addClass("jspActive");var c=b.pageX-_.position().left;return a("html").bind("mousemove.jsp",function(a){r(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",o),!1}),lb=R.innerWidth(),h())}function h(){R.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){lb-=a(this).outerWidth()}),kb.width(lb+"px"),bb=0}function i(){if(X&&W){var b=kb.outerHeight(),c=db.outerWidth();fb-=b,a(jb).find(">.jspCap:visible,>.jspArrow").each(function(){lb+=a(this).outerWidth()}),lb-=c,Q-=c,P-=b,kb.parent().append(a('<div class="jspCorner" />').css("width",b+"px")),f(),h()}X&&O.width(R.outerWidth()-rb+"px"),T=O.outerHeight(),V=T/Q,X&&(mb=Math.ceil(1/U*lb),mb>N.horizontalDragMaxWidth?mb=N.horizontalDragMaxWidth:mb<N.horizontalDragMinWidth&&(mb=N.horizontalDragMinWidth),_.width(mb+"px"),ab=lb-mb,s(bb)),W&&(gb=Math.ceil(1/V*fb),gb>N.verticalDragMaxHeight?gb=N.verticalDragMaxHeight:gb<N.verticalDragMinHeight&&(gb=N.verticalDragMinHeight),Y.height(gb+"px"),Z=fb-gb,q($))}function j(a,b,c,d){var e,f="before",g="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split"),b==f?g=b:b==g&&(f=b,e=c,c=d,d=e),a[f](c)[g](d)}function k(a,b,c){return function(){return l(a,b,this,c),this.blur(),!1}}function l(b,c,d,e){d=a(d).addClass("jspActive");var f,g,h=!0,i=function(){0!==b&&tb.scrollByX(b*N.arrowButtonSpeed),0!==c&&tb.scrollByY(c*N.arrowButtonSpeed),g=setTimeout(i,h?N.initialDelay:N.arrowRepeatFreq),h=!1};i(),f=e?"mouseout.jsp":"mouseup.jsp",e=e||a("html"),e.bind(f,function(){d.removeClass("jspActive"),g&&clearTimeout(g),g=null,e.unbind(f)})}function m(){n(),W&&db.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageY-e.top-$,g=!0,h=function(){var a=d.offset(),e=b.pageY-a.top-gb/2,j=Q*N.scrollPagePercent,k=Z*j/(T-Q);if(0>f)$-k>e?tb.scrollByY(-j):p(e);else{if(!(f>0))return void i();e>$+k?tb.scrollByY(j):p(e)}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i)};return h(),a(document).bind("mouseup.jsp",i),!1}}),X&&kb.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageX-e.left-bb,g=!0,h=function(){var a=d.offset(),e=b.pageX-a.left-mb/2,j=P*N.scrollPagePercent,k=ab*j/(S-P);if(0>f)bb-k>e?tb.scrollByX(-j):r(e);else{if(!(f>0))return void i();e>bb+k?tb.scrollByX(j):r(e)}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i)};return h(),a(document).bind("mouseup.jsp",i),!1}})}function n(){kb&&kb.unbind("mousedown.jsp"),db&&db.unbind("mousedown.jsp")}function o(){a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Y&&Y.removeClass("jspActive"),_&&_.removeClass("jspActive")}function p(c,d){if(W){0>c?c=0:c>Z&&(c=Z);var e=new a.Event("jsp-will-scroll-y");if(b.trigger(e,[c]),!e.isDefaultPrevented()){var f=c||0,g=0===f,h=f==Z,i=c/Z,j=-i*(T-Q);void 0===d&&(d=N.animateScroll),d?tb.animate(Y,"top",c,q,function(){b.trigger("jsp-user-scroll-y",[-j,g,h])}):(Y.css("top",c),q(c),b.trigger("jsp-user-scroll-y",[-j,g,h]))}}}function q(a){void 0===a&&(a=Y.position().top),R.scrollTop(0),$=a||0;var c=0===$,d=$==Z,e=a/Z,f=-e*(T-Q);(ub!=c||wb!=d)&&(ub=c,wb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),t(c,d),O.css("top",f),b.trigger("jsp-scroll-y",[-f,c,d]).trigger("scroll")}function r(c,d){if(X){0>c?c=0:c>ab&&(c=ab);var e=new a.Event("jsp-will-scroll-x");if(b.trigger(e,[c]),!e.isDefaultPrevented()){var f=c||0,g=0===f,h=f==ab,i=c/ab,j=-i*(S-P);void 0===d&&(d=N.animateScroll),d?tb.animate(_,"left",c,s,function(){b.trigger("jsp-user-scroll-x",[-j,g,h])}):(_.css("left",c),s(c),b.trigger("jsp-user-scroll-x",[-j,g,h]))}}}function s(a){void 0===a&&(a=_.position().left),R.scrollTop(0),bb=a||0;var c=0===bb,d=bb==ab,e=a/ab,f=-e*(S-P);(vb!=c||xb!=d)&&(vb=c,xb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),u(c,d),O.css("left",f),b.trigger("jsp-scroll-x",[-f,c,d]).trigger("scroll")}function t(a,b){N.showArrows&&(hb[a?"addClass":"removeClass"]("jspDisabled"),ib[b?"addClass":"removeClass"]("jspDisabled"))}function u(a,b){N.showArrows&&(nb[a?"addClass":"removeClass"]("jspDisabled"),ob[b?"addClass":"removeClass"]("jspDisabled"))}function v(a,b){var c=a/(T-Q);p(c*Z,b)}function w(a,b){var c=a/(S-P);r(c*ab,b)}function x(b,c,d){var e,f,g,h,i,j,k,l,m,n=0,o=0;try{e=a(b)}catch(p){return}for(f=e.outerHeight(),g=e.outerWidth(),R.scrollTop(0),R.scrollLeft(0);!e.is(".jspPane");)if(n+=e.position().top,o+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;h=z(),j=h+Q,h>n||c?l=n-N.horizontalGutter:n+f>j&&(l=n-Q+f+N.horizontalGutter),isNaN(l)||v(l,d),i=y(),k=i+P,i>o||c?m=o-N.horizontalGutter:o+g>k&&(m=o-P+g+N.horizontalGutter),isNaN(m)||w(m,d)}function y(){return-O.position().left}function z(){return-O.position().top}function A(){var a=T-Q;return a>20&&a-z()<10}function B(){var a=S-P;return a>20&&a-y()<10}function C(){R.unbind(zb).bind(zb,function(a,b,c,d){bb||(bb=0),$||($=0);var e=bb,f=$,g=a.deltaFactor||N.mouseWheelSpeed;return tb.scrollBy(c*g,-d*g,!1),e==bb&&f==$})}function D(){R.unbind(zb)}function E(){return!1}function F(){O.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){x(a.target,!1)})}function G(){O.find(":input,a").unbind("focus.jsp")}function H(){function c(){var a=bb,b=$;switch(d){case 40:tb.scrollByY(N.keyboardSpeed,!1);break;case 38:tb.scrollByY(-N.keyboardSpeed,!1);break;case 34:case 32:tb.scrollByY(Q*N.scrollPagePercent,!1);break;case 33:tb.scrollByY(-Q*N.scrollPagePercent,!1);break;case 39:tb.scrollByX(N.keyboardSpeed,!1);break;case 37:tb.scrollByX(-N.keyboardSpeed,!1)}return e=a!=bb||b!=$}var d,e,f=[];X&&f.push(jb[0]),W&&f.push(cb[0]),O.bind("focus.jsp",function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(b){if(b.target===this||f.length&&a(b.target).closest(f).length){var g=bb,h=$;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=b.keyCode,c();break;case 35:v(T-Q),d=null;break;case 36:v(0),d=null}return e=b.keyCode==d&&g!=bb||h!=$,!e}}).bind("keypress.jsp",function(b){return b.keyCode==d&&c(),b.target===this||f.length&&a(b.target).closest(f).length?!e:void 0}),N.hideFocus?(b.css("outline","none"),"hideFocus"in R[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in R[0]&&b.attr("hideFocus",!1))}function I(){b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),O.unbind(".jsp")}function J(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash.substr(1));try{b=a("#"+d+', a[name="'+d+'"]')}catch(e){return}b.length&&O.find(d)&&(0===R.scrollTop()?c=setInterval(function(){R.scrollTop()>0&&(x(b,!0),a(document).scrollTop(R.position().top),clearInterval(c))},50):(x(b,!0),a(document).scrollTop(R.position().top)))}}function K(){a(document.body).data("jspHijack")||(a(document.body).data("jspHijack",!0),a(document.body).delegate('a[href*="#"]',"click",function(b){var c,d,e,f,g,h,i=this.href.substr(0,this.href.indexOf("#")),j=location.href;if(-1!==location.href.indexOf("#")&&(j=location.href.substr(0,location.href.indexOf("#"))),i===j){c=escape(this.href.substr(this.href.indexOf("#")+1));try{d=a("#"+c+', a[name="'+c+'"]')}catch(k){return}d.length&&(e=d.closest(".jspScrollable"),f=e.data("jsp"),f.scrollToElement(d,!0),e[0].scrollIntoView&&(g=a(window).scrollTop(),h=d.offset().top,(g>h||h>g+a(window).height())&&e[0].scrollIntoView()),b.preventDefault())}}))}function L(){var a,b,c,d,e,f=!1;R.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){var h=g.originalEvent.touches[0];a=y(),b=z(),c=h.pageX,d=h.pageY,e=!1,f=!0}).bind("touchmove.jsp",function(g){if(f){var h=g.originalEvent.touches[0],i=bb,j=$;return tb.scrollTo(a+c-h.pageX,b+d-h.pageY),e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,i==bb&&j==$}}).bind("touchend.jsp",function(){f=!1}).bind("click.jsp-touchclick",function(){return e?(e=!1,!1):void 0})}function M(){var a=z(),c=y();b.removeClass("jspScrollable").unbind(".jsp"),O.unbind(".jsp"),b.replaceWith(yb.append(O.children())),yb.scrollTop(a),yb.scrollLeft(c),pb&&clearInterval(pb)}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb=this,ub=!0,vb=!0,wb=!1,xb=!1,yb=b.clone(!1,!1).empty(),zb=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===b.css("box-sizing")?(qb=0,rb=0):(qb=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),rb=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0)),a.extend(tb,{reinitialise:function(b){b=a.extend({},N,b),d(b)},scrollToElement:function(a,b,c){x(a,b,c)},scrollTo:function(a,b,c){w(a,c),v(b,c)},scrollToX:function(a,b){w(a,b)},scrollToY:function(a,b){v(a,b)},scrollToPercentX:function(a,b){w(a*(S-P),b)},scrollToPercentY:function(a,b){v(a*(T-Q),b)},scrollBy:function(a,b,c){tb.scrollByX(a,c),tb.scrollByY(b,c)},scrollByX:function(a,b){var c=y()+Math[0>a?"floor":"ceil"](a),d=c/(S-P);r(d*ab,b)},scrollByY:function(a,b){var c=z()+Math[0>a?"floor":"ceil"](a),d=c/(T-Q);p(d*Z,b)},positionDragX:function(a,b){r(a,b)},positionDragY:function(a,b){p(a,b)},animate:function(a,b,c,d,e){var f={};f[b]=c,a.animate(f,{duration:N.animateDuration,easing:N.animateEase,queue:!1,step:d,complete:e})},getContentPositionX:function(){return y()},getContentPositionY:function(){return z()},getContentWidth:function(){return S},getContentHeight:function(){return T},getPercentScrolledX:function(){return y()/(S-P)},getPercentScrolledY:function(){return z()/(T-Q)},getIsScrollableH:function(){return X},getIsScrollableV:function(){return W},getContentPane:function(){return O},scrollToBottom:function(a){p(Z,a)},hijackInternalLinks:a.noop,destroy:function(){M()}}),d(c)}return b=a.extend({},a.fn.jScrollPane.defaults,b),a.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){b[this]=b[this]||b.speed}),this.each(function(){var d=a(this),e=d.data("jsp");e?e.reinitialise(b):(a("script",d).filter('[type="text/javascript"],:not([type])').remove(),e=new c(d,b),d.data("jsp",e))})},a.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}});
/*!
 * 
 *             SimpleBar.js - v2.4.3
 *             Scrollbars, simpler.
 *             https://grsmto.github.io/simplebar/
 *             
 *             Made by Adrien Grsmto from a fork by Jonathan Nicol
 *             Under MIT License
 *         
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.SimpleBar=n():t.SimpleBar=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=e(194),s=r(c),u=e(191),a=r(u),f=e(193),l=r(f);e(169),e(174),e(177),e(178),e(172),e(175),e(173),e(176),e(170),e(171),e(113),e(160),e(179),e(180),e(142),e(143),e(144),e(145),e(148),e(146),e(147),e(149),e(150),e(151),e(152),e(154),e(153),e(141),e(168),e(138),e(139),e(140),e(112),e(165),e(163),e(161),e(166),e(167),e(162),e(164),e(155),e(156),e(157),e(159),e(158),e(110),e(111),e(106),e(109),e(108),e(107),e(66),e(132),e(133),e(135),e(134),e(131),e(137),e(136),e(114),e(115),e(116),e(117),e(118),e(119),e(120),e(121),e(122),e(123),e(125),e(124),e(126),e(127),e(128),e(129),e(130),e(181),e(184),e(182),e(183),e(186),e(185),e(189),e(188),e(187),e(192),e(190);var h=function(){function t(n,e){i(this,t),this.el=n,this.flashTimeout,this.contentEl,this.scrollContentEl,this.dragOffset={x:0,y:0},this.isVisible={x:!0,y:!0},this.scrollOffsetAttr={x:"scrollLeft",y:"scrollTop"},this.sizeAttr={x:"offsetWidth",y:"offsetHeight"},this.scrollSizeAttr={x:"scrollWidth",y:"scrollHeight"},this.offsetAttr={x:"left",y:"top"},this.globalObserver,this.mutationObserver,this.resizeObserver,this.currentAxis,this.options=Object.assign({},t.defaultOptions,e),this.classNames=this.options.classNames,this.scrollbarWidth=(0,s.default)(),this.offsetSize=20,this.flashScrollbar=this.flashScrollbar.bind(this),this.onDragY=this.onDragY.bind(this),this.onDragX=this.onDragX.bind(this),this.onScrollY=this.onScrollY.bind(this),this.onScrollX=this.onScrollX.bind(this),this.drag=this.drag.bind(this),this.onEndDrag=this.onEndDrag.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.recalculate=(0,a.default)(this.recalculate,100,{leading:!0,trailing:!1}),this.init()}return o(t,[{key:"init",value:function(){this.el.SimpleBar=this,this.initDOM(),this.scrollbarX=this.trackX.querySelector("."+this.classNames.scrollbar),this.scrollbarY=this.trackY.querySelector("."+this.classNames.scrollbar),this.scrollContentEl.style.paddingRight=(this.scrollbarWidth||this.offsetSize)+"px",this.scrollContentEl.style.marginBottom="-"+(2*this.scrollbarWidth||this.offsetSize)+"px",this.contentEl.style.paddingBottom=(this.scrollbarWidth||this.offsetSize)+"px",0!==this.scrollbarWidth&&(this.contentEl.style.marginRight="-"+this.scrollbarWidth+"px"),this.recalculate(),this.initListeners()}},{key:"initDOM",value:function(){var t=this;if(Array.from(this.el.children).find(function(n){return n.classList.contains(t.classNames.scrollContent)}))this.trackX=this.el.querySelector("."+this.classNames.track+".horizontal"),this.trackY=this.el.querySelector("."+this.classNames.track+".vertical"),this.scrollContentEl=this.el.querySelector("."+this.classNames.scrollContent),this.contentEl=this.el.querySelector("."+this.classNames.content);else{for(this.scrollContentEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.scrollContentEl.classList.add(this.classNames.scrollContent),this.contentEl.classList.add(this.classNames.content);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.scrollContentEl.appendChild(this.contentEl),this.el.appendChild(this.scrollContentEl)}if(!this.trackX||!this.trackY){var n=document.createElement("div"),e=document.createElement("div");n.classList.add(this.classNames.track),e.classList.add(this.classNames.scrollbar),n.appendChild(e),this.trackX=n.cloneNode(!0),this.trackX.classList.add("horizontal"),this.trackY=n.cloneNode(!0),this.trackY.classList.add("vertical"),this.el.insertBefore(this.trackX,this.el.firstChild),this.el.insertBefore(this.trackY,this.el.firstChild)}this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var t=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),this.scrollbarY.addEventListener("mousedown",this.onDragY),this.scrollbarX.addEventListener("mousedown",this.onDragX),this.scrollContentEl.addEventListener("scroll",this.onScrollY),this.contentEl.addEventListener("scroll",this.onScrollX),"undefined"!=typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(n){n.forEach(function(n){(t.isChildNode(n.target)||n.addedNodes.length)&&t.recalculate()})}),this.mutationObserver.observe(this.el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.resizeObserver=new l.default(this.recalculate.bind(this)),this.resizeObserver.observe(this.el)}},{key:"removeListeners",value:function(){this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),this.scrollbarX.removeEventListener("mousedown",this.onDragX),this.scrollbarY.removeEventListener("mousedown",this.onDragY),this.scrollContentEl.removeEventListener("scroll",this.onScrollY),this.contentEl.removeEventListener("scroll",this.onScrollX),this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"onDragX",value:function(t){this.onDrag(t,"x")}},{key:"onDragY",value:function(t){this.onDrag(t,"y")}},{key:"onDrag",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";t.preventDefault();var e="y"===n?this.scrollbarY:this.scrollbarX,r="y"===n?t.pageY:t.pageX;this.dragOffset[n]=r-e.getBoundingClientRect()[this.offsetAttr[n]],this.currentAxis=n,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.onEndDrag)}},{key:"drag",value:function(t){var n=void 0,e=void 0,r=void 0;t.preventDefault(),"y"===this.currentAxis?(n=t.pageY,e=this.trackY,r=this.scrollContentEl):(n=t.pageX,e=this.trackX,r=this.contentEl);var i=n-e.getBoundingClientRect()[this.offsetAttr[this.currentAxis]]-this.dragOffset[this.currentAxis],o=i/e[this.sizeAttr[this.currentAxis]],c=o*this.contentEl[this.scrollSizeAttr[this.currentAxis]];r[this.scrollOffsetAttr[this.currentAxis]]=c}},{key:"onEndDrag",value:function(){document.removeEventListener("mousemove",this.drag),document.removeEventListener("mouseup",this.onEndDrag)}},{key:"resizeScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",n=void 0,e=void 0,r=void 0,i=void 0,o=void 0;"x"===t?(n=this.trackX,e=this.scrollbarX,r=this.contentEl[this.scrollOffsetAttr[t]],i=this.contentSizeX,o=this.scrollbarXSize):(n=this.trackY,e=this.scrollbarY,r=this.scrollContentEl[this.scrollOffsetAttr[t]],i=this.contentSizeY,o=this.scrollbarYSize);var c=o/i,s=r/(i-o),u=Math.max(~~(c*(o-2))-2,this.options.scrollbarMinSize),a=~~((o-4-u)*s+2);this.isVisible[t]=o<i,this.isVisible[t]?(n.style.visibility="visible","x"===t?(e.style.left=a+"px",e.style.width=u+"px"):(e.style.top=a+"px",e.style.height=u+"px")):n.style.visibility="hidden"}},{key:"onScrollX",value:function(){this.flashScrollbar("x")}},{key:"onScrollY",value:function(){this.flashScrollbar("y")}},{key:"onMouseEnter",value:function(){this.flashScrollbar("x"),this.flashScrollbar("y")}},{key:"flashScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.resizeScrollbar(t),this.showScrollbar(t)}},{key:"showScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.isVisible[t]&&("x"===t?this.scrollbarX.classList.add("visible"):this.scrollbarY.classList.add("visible"),this.options.autoHide&&("number"==typeof this.flashTimeout&&window.clearTimeout(this.flashTimeout),this.flashTimeout=window.setTimeout(this.hideScrollbar.bind(this),1e3)))}},{key:"hideScrollbar",value:function(){this.scrollbarX.classList.remove("visible"),this.scrollbarY.classList.remove("visible"),"number"==typeof this.flashTimeout&&window.clearTimeout(this.flashTimeout)}},{key:"recalculate",value:function(){this.contentSizeX=this.contentEl[this.scrollSizeAttr.x],this.contentSizeY=this.contentEl[this.scrollSizeAttr.y]-(this.scrollbarWidth||this.offsetSize),this.scrollbarXSize=this.trackX[this.sizeAttr.x],this.scrollbarYSize=this.trackY[this.sizeAttr.y],this.resizeScrollbar("x"),this.resizeScrollbar("y"),this.options.autoHide||(this.showScrollbar("x"),this.showScrollbar("y"))}},{key:"getScrollElement",value:function(){return this.scrollContentEl}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"unMount",value:function(){this.removeListeners(),this.el.SimpleBar=null}},{key:"isChildNode",value:function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))}}],[{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(n){n.forEach(function(n){Array.from(n.addedNodes).forEach(function(n){1===n.nodeType&&(n.hasAttribute("data-simplebar")?!n.SimpleBar&&new t(n,t.getElOptions(n)):Array.from(n.querySelectorAll("[data-simplebar]")).forEach(function(n){!n.SimpleBar&&new t(n,t.getElOptions(n))}))}),Array.from(n.removedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?t.SimpleBar&&t.SimpleBar.unMount():Array.from(t.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar&&t.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements.bind(this)):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"getElOptions",value:function(n){var e=Object.keys(t.htmlAttributes).reduce(function(e,r){var i=t.htmlAttributes[r];return n.hasAttribute(i)&&(e[r]=JSON.parse(n.getAttribute(i)||!0)),e},{});return e}},{key:"removeObserver",value:function(){this.globalObserver.disconnect()}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.from(document.querySelectorAll("[data-simplebar]")).forEach(function(n){n.SimpleBar||new t(n,t.getElOptions(n))})}},{key:"defaultOptions",get:function(){return{autoHide:!0,classNames:{content:"simplebar-content",scrollContent:"simplebar-scroll-content",scrollbar:"simplebar-scrollbar",track:"simplebar-track"},scrollbarMinSize:25}}},{key:"htmlAttributes",get:function(){return{autoHide:"data-simplebar-autohide",scrollbarMinSize:"data-simplebar-scrollbar-min-size"}}}]),t}();n.default=h,h.initHtmlApi(),t.exports=n.default},function(t,n,e){var r=e(3),i=e(34),o=e(11),c=e(16),s=e(12),u="prototype",a=function(t,n,e){var f,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,m=t&a.B,b=d?r:y?r[n]||(r[n]={}):(r[n]||{})[u],_=d?i:i[n]||(i[n]={}),w=_[u]||(_[u]={});d&&(e=n);for(f in e)l=!p&&b&&void 0!==b[f],h=(l?b:e)[f],v=m&&l?s(h,r):g&&"function"==typeof h?s(Function.call,h):h,b&&c(b,f,h,t&a.U),_[f]!=h&&o(_,f,v),g&&w[f]!=h&&(w[f]=h)};r.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,e){var r=e(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,e){var r=e(60)("wks"),i=e(22),o=e(3).Symbol,c="function"==typeof o,s=t.exports=function(t){return r[t]||(r[t]=c&&o[t]||(c?o:i)("Symbol."+t))};s.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(2),i=e(71),o=e(40),c=Object.defineProperty;n.f=e(9)?Object.defineProperty:function(t,n,e){if(r(t),n=o(n,!0),r(e),i)try{return c(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(20),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,n,e){t.exports=!e(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(7),i=e(19);t.exports=e(9)?function(t,n,e){return r.f(t,n,i(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(17);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(54),i=e(18);t.exports=function(t){return r(i(t))}},function(t,n,e){"use strict";if(e(9)){var r=e(27),i=e(3),o=e(6),c=e(1),s=e(64),u=e(88),a=e(12),f=e(24),l=e(19),h=e(11),v=e(29),p=e(20),d=e(8),y=e(87),g=e(31),m=e(40),b=e(10),_=e(49),w=e(4),S=e(21),x=e(55),E=e(36),O=e(38),M=e(37).f,A=e(65),L=e(22),j=e(5),k=e(33),T=e(48),P=e(61),F=e(66),N=e(26),C=e(44),R=e(46),D=e(47),I=e(67),W=e(7),z=e(15),B=W.f,Y=z.f,X=i.RangeError,G=i.TypeError,V=i.Uint8Array,U="ArrayBuffer",q="Shared"+U,H="BYTES_PER_ELEMENT",K="prototype",J=Array[K],$=u.ArrayBuffer,Q=u.DataView,Z=k(0),tt=k(2),nt=k(3),et=k(4),rt=k(5),it=k(6),ot=T(!0),ct=T(!1),st=F.values,ut=F.keys,at=F.entries,ft=J.lastIndexOf,lt=J.reduce,ht=J.reduceRight,vt=J.join,pt=J.sort,dt=J.slice,yt=J.toString,gt=J.toLocaleString,mt=j("iterator"),bt=j("toStringTag"),_t=L("typed_constructor"),wt=L("def_constructor"),St=s.CONSTR,xt=s.TYPED,Et=s.VIEW,Ot="Wrong length!",Mt=k(1,function(t,n){return Tt(P(t,t[wt]),n)}),At=o(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Lt=!!V&&!!V[K].set&&o(function(){new V(1).set({})}),jt=function(t,n){var e=p(t);if(e<0||e%n)throw X("Wrong offset!");return e},kt=function(t){if(w(t)&&xt in t)return t;throw G(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&_t in t))throw G("It is not a typed array constructor!");return new t(n)},Pt=function(t,n){return Ft(P(t,t[wt]),n)},Ft=function(t,n){for(var e=0,r=n.length,i=Tt(t,r);r>e;)i[e]=n[e++];return i},Nt=function(t,n,e){B(t,n,{get:function(){return this._d[e]}})},Ct=function(t){var n,e,r,i,o,c,s=S(t),u=arguments.length,f=u>1?arguments[1]:void 0,l=void 0!==f,h=A(s);if(void 0!=h&&!x(h)){for(c=h.call(s),r=[],n=0;!(o=c.next()).done;n++)r.push(o.value);s=r}for(l&&u>2&&(f=a(f,arguments[2],2)),n=0,e=d(s.length),i=Tt(this,e);e>n;n++)i[n]=l?f(s[n],n):s[n];return i},Rt=function(){for(var t=0,n=arguments.length,e=Tt(this,n);n>t;)e[t]=arguments[t++];return e},Dt=!!V&&o(function(){gt.call(new V(1))}),It=function(){return gt.apply(Dt?dt.call(kt(this)):kt(this),arguments)},Wt={copyWithin:function(t,n){return I.call(kt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return et(kt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return D.apply(kt(this),arguments)},filter:function(t){return Pt(this,tt(kt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(kt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(kt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(kt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ct(kt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(kt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(kt(this),arguments)},lastIndexOf:function(t){return ft.apply(kt(this),arguments)},map:function(t){return Mt(kt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(kt(this),arguments)},reduceRight:function(t){return ht.apply(kt(this),arguments)},reverse:function(){for(var t,n=this,e=kt(n).length,r=Math.floor(e/2),i=0;i<r;)t=n[i],n[i++]=n[--e],n[e]=t;return n},some:function(t){return nt(kt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(kt(this),t)},subarray:function(t,n){var e=kt(this),r=e.length,i=g(t,r);return new(P(e,e[wt]))(e.buffer,e.byteOffset+i*e.BYTES_PER_ELEMENT,d((void 0===n?r:g(n,r))-i))}},zt=function(t,n){return Pt(this,dt.call(kt(this),t,n))},Bt=function(t){kt(this);var n=jt(arguments[1],1),e=this.length,r=S(t),i=d(r.length),o=0;if(i+n>e)throw X(Ot);for(;o<i;)this[n+o]=r[o++]},Yt={entries:function(){return at.call(kt(this))},keys:function(){return ut.call(kt(this))},values:function(){return st.call(kt(this))}},Xt=function(t,n){return w(t)&&t[xt]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},Gt=function(t,n){return Xt(t,n=m(n,!0))?l(2,t[n]):Y(t,n)},Vt=function(t,n,e){return!(Xt(t,n=m(n,!0))&&w(e)&&b(e,"value"))||b(e,"get")||b(e,"set")||e.configurable||b(e,"writable")&&!e.writable||b(e,"enumerable")&&!e.enumerable?B(t,n,e):(t[n]=e.value,t)};St||(z.f=Gt,W.f=Vt),c(c.S+c.F*!St,"Object",{getOwnPropertyDescriptor:Gt,defineProperty:Vt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Ut=v({},Wt);v(Ut,Yt),h(Ut,mt,Yt.values),v(Ut,{slice:zt,set:Bt,constructor:function(){},toString:yt,toLocaleString:It}),Nt(Ut,"buffer","b"),Nt(Ut,"byteOffset","o"),Nt(Ut,"byteLength","l"),Nt(Ut,"length","e"),B(Ut,bt,{get:function(){return this[xt]}}),t.exports=function(t,n,e,u){u=!!u;var a=t+(u?"Clamped":"")+"Array",l="get"+t,v="set"+t,p=i[a],g=p||{},m=p&&O(p),b=!p||!s.ABV,S={},x=p&&p[K],A=function(t,e){var r=t._d;return r.v[l](e*n+r.o,At)},L=function(t,e,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[v](e*n+i.o,r,At)},j=function(t,n){B(t,n,{get:function(){return A(this,n)},set:function(t){return L(this,n,t)},enumerable:!0})};b?(p=e(function(t,e,r,i){f(t,p,a,"_d");var o,c,s,u,l=0,v=0;if(w(e)){if(!(e instanceof $||(u=_(e))==U||u==q))return xt in e?Ft(p,e):Ct.call(p,e);o=e,v=jt(r,n);var g=e.byteLength;if(void 0===i){if(g%n)throw X(Ot);if(c=g-v,c<0)throw X(Ot)}else if(c=d(i)*n,c+v>g)throw X(Ot);s=c/n}else s=y(e),c=s*n,o=new $(c);for(h(t,"_d",{b:o,o:v,l:c,e:s,v:new Q(o)});l<s;)j(t,l++)}),x=p[K]=E(Ut),h(x,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&C(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=e(function(t,e,r,i){f(t,p,a);var o;return w(e)?e instanceof $||(o=_(e))==U||o==q?void 0!==i?new g(e,jt(r,n),i):void 0!==r?new g(e,jt(r,n)):new g(e):xt in e?Ft(p,e):Ct.call(p,e):new g(y(e))}),Z(m!==Function.prototype?M(g).concat(M(m)):M(g),function(t){t in p||h(p,t,g[t])}),p[K]=x,r||(x.constructor=p));var k=x[mt],T=!!k&&("values"==k.name||void 0==k.name),P=Yt.values;h(p,_t,!0),h(x,xt,a),h(x,Et,!0),h(x,wt,p),(u?new p(1)[bt]==a:bt in x)||B(x,bt,{get:function(){return a}}),S[a]=p,c(c.G+c.W+c.F*(p!=g),S),c(c.S,a,{BYTES_PER_ELEMENT:n}),c(c.S+c.F*o(function(){g.of.call(p,1)}),a,{from:Ct,of:Rt}),H in x||h(x,H,n),c(c.P,a,Wt),R(a),c(c.P+c.F*Lt,a,{set:Bt}),c(c.P+c.F*!T,a,Yt),r||x.toString==yt||(x.toString=yt),c(c.P+c.F*o(function(){new p(1).slice()}),a,{slice:zt}),c(c.P+c.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){x.toLocaleString.call([1,2])})),a,{toLocaleString:It}),N[a]=T?k:P,r||T||h(x,mt,P)}}else t.exports=function(){}},function(t,n,e){var r=e(39),i=e(19),o=e(13),c=e(40),s=e(10),u=e(71),a=Object.getOwnPropertyDescriptor;n.f=e(9)?a:function(t,n){if(t=o(t),n=c(n,!0),u)try{return a(t,n)}catch(t){}if(s(t,n))return i(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),i=e(11),o=e(10),c=e(22)("src"),s="toString",u=Function[s],a=(""+u).split(s);e(34).inspectSource=function(t){return u.call(t)},(t.exports=function(t,n,e,s){var u="function"==typeof e;u&&(o(e,"name")||i(e,"name",n)),t[n]!==e&&(u&&(o(e,c)||i(e,c,t[n]?""+t[n]:a.join(String(n)))),t===r?t[n]=e:s?t[n]?t[n]=e:i(t,n,e):(delete t[n],i(t,n,e)))})(Function.prototype,s,function(){return"function"==typeof this&&this[c]||u.call(this)})},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(18);t.exports=function(t){return Object(r(t))}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n,e){var r=e(5)("unscopables"),i=Array.prototype;void 0==i[r]&&e(11)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,n){t.exports=function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!");return t}},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n){t.exports={}},function(t,n){t.exports=!1},function(t,n,e){var r=e(82),i=e(52);t.exports=Object.keys||function(t){return r(t,i)}},function(t,n,e){var r=e(16);t.exports=function(t,n,e){for(var i in n)r(t,i,n[i],e);return t}},function(t,n,e){var r=e(7).f,i=e(10),o=e(5)("toStringTag");t.exports=function(t,n,e){t&&!i(t=e?t:t.prototype,o)&&r(t,o,{configurable:!0,value:n})}},function(t,n,e){var r=e(20),i=Math.max,o=Math.min;t.exports=function(t,n){return t=r(t),t<0?i(t+n,0):o(t,n)}},function(t,n,e){var r=e(4);t.exports=function(t,n){if(!r(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,e){var r=e(12),i=e(54),o=e(21),c=e(8),s=e(91);t.exports=function(t,n){var e=1==t,u=2==t,a=3==t,f=4==t,l=6==t,h=5==t||l,v=n||s;return function(n,s,p){for(var d,y,g=o(n),m=i(g),b=r(s,p,3),_=c(m.length),w=0,S=e?v(n,_):u?v(n,0):void 0;_>w;w++)if((h||w in m)&&(d=m[w],y=b(d,w,g),t))if(e)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(f)return!1;return l?-1:a||f?f:S}}},function(t,n){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)},function(t,n,e){var r=e(22)("meta"),i=e(4),o=e(10),c=e(7).f,s=0,u=Object.isExtensible||function(){return!0},a=!e(6)(function(){return u(Object.preventExtensions({}))}),f=function(t){c(t,r,{value:{i:"O"+ ++s,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!n)return"E";f(t)}return t[r].i},h=function(t,n){if(!o(t,r)){if(!u(t))return!0;if(!n)return!1;f(t)}return t[r].w},v=function(t){return a&&p.NEED&&u(t)&&!o(t,r)&&f(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,e){var r=e(2),i=e(99),o=e(52),c=e(59)("IE_PROTO"),s=function(){},u="prototype",a=function(){var t,n=e(51)("iframe"),r=o.length,i="<",c=">";for(n.style.display="none",e(70).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(i+"script"+c+"document.F=Object"+i+"/script"+c),t.close(),a=t.F;r--;)delete a[u][o[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(s[u]=r(t),e=new s,s[u]=null,e[c]=t):e=a(),void 0===n?e:i(e,n)}},function(t,n,e){var r=e(82),i=e(52).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,n,e){var r=e(10),i=e(21),o=e(59)("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(4);t.exports=function(t,n){if(!r(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!r(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){"use strict";var r=e(3),i=e(1),o=e(16),c=e(29),s=e(35),u=e(43),a=e(24),f=e(4),l=e(6),h=e(44),v=e(30),p=e(95);t.exports=function(t,n,e,d,y,g){var m=r[t],b=m,_=y?"set":"add",w=b&&b.prototype,S={},x=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!f(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!f(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})};if("function"==typeof b&&(g||w.forEach&&!l(function(){(new b).entries().next()}))){var E=new b,O=E[_](g?{}:-0,1)!=E,M=l(function(){E.has(1)}),A=h(function(t){new b(t)}),L=!g&&l(function(){for(var t=new b,n=5;n--;)t[_](n,n);return!t.has(-0)});A||(b=n(function(n,e){a(n,b,t);var r=p(new m,n,b);return void 0!=e&&u(e,y,r[_],r),r}),b.prototype=w,w.constructor=b),(M||L)&&(x("delete"),x("has"),y&&x("get")),(L||O)&&x(_),g&&w.clear&&delete w.clear}else b=d.getConstructor(n,t,y,_),c(b.prototype,e),s.NEED=!0;return v(b,t),S[t]=b,i(i.G+i.W+i.F*(b!=m),S),g||d.setStrong(b,t,y),b}},function(t,n,e){"use strict";var r=e(11),i=e(16),o=e(6),c=e(18),s=e(5);t.exports=function(t,n,e){var u=s(t),a=e(c,u,""[t]),f=a[0],l=a[1];o(function(){var n={};return n[u]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,f),r(RegExp.prototype,u,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}},function(t,n,e){var r=e(12),i=e(76),o=e(55),c=e(2),s=e(8),u=e(65),a={},f={},n=t.exports=function(t,n,e,l,h){var v,p,d,y,g=h?function(){return t}:u(t),m=r(e,l,n?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=s(t.length);v>b;b++)if(y=n?m(c(p=t[b])[0],p[1]):m(t[b]),y===a||y===f)return y}else for(d=g.call(t);!(p=d.next()).done;)if(y=i(d,m,p.value,n),y===a||y===f)return y};n.BREAK=a,n.RETURN=f},function(t,n,e){var r=e(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var e=!1;try{var o=[7],c=o[r]();c.next=function(){return{done:e=!0}},o[r]=function(){return c},t(o)}catch(t){}return e}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){"use strict";var r=e(3),i=e(7),o=e(9),c=e(5)("species");t.exports=function(t){var n=r[t];o&&n&&!n[c]&&i.f(n,c,{configurable:!0,get:function(){return this}})}},function(t,n,e){"use strict";var r=e(21),i=e(31),o=e(8);t.exports=function(t){for(var n=r(this),e=o(n.length),c=arguments.length,s=i(c>1?arguments[1]:void 0,e),u=c>2?arguments[2]:void 0,a=void 0===u?e:i(u,e);a>s;)n[s++]=t;return n}},function(t,n,e){var r=e(13),i=e(8),o=e(31);t.exports=function(t){return function(n,e,c){var s,u=r(n),a=i(u.length),f=o(c,a);if(t&&e!=e){for(;a>f;)if(s=u[f++],s!=s)return!0}else for(;a>f;f++)if((t||f in u)&&u[f]===e)return t||f||0;return!t&&-1}}},function(t,n,e){var r=e(25),i=e(5)("toStringTag"),o="Arguments"==r(function(){return arguments}()),c=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,e,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=c(n=Object(t),i))?e:o?r(n):"Object"==(s=r(n))&&"function"==typeof n.callee?"Arguments":s}},function(t,n,e){"use strict";var r=e(7),i=e(19);t.exports=function(t,n,e){n in t?r.f(t,n,i(0,e)):t[n]=e}},function(t,n,e){var r=e(4),i=e(3).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,e){var r=e(5)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,e){var r=e(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(26),i=e(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,n){var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,e){var r=e(4),i=e(2),o=function(t,n){if(i(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=e(12)(Function.call,e(15).f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},function(t,n,e){var r=e(60)("keys"),i=e(22);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,n,e){var r=e(3),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,e){var r=e(2),i=e(17),o=e(5)("species");t.exports=function(t,n){var e,c=r(t).constructor;return void 0===c||void 0==(e=r(c)[o])?n:i(e)}},function(t,n,e){var r=e(75),i=e(18);t.exports=function(t,n,e){if(r(n))throw TypeError("String#"+e+" doesn't accept regex!");return String(i(t))}},function(t,n,e){var r,i,o,c=e(12),s=e(72),u=e(70),a=e(51),f=e(3),l=f.process,h=f.setImmediate,v=f.clearImmediate,p=f.MessageChannel,d=f.Dispatch,y=0,g={},m="onreadystatechange",b=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},_=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return g[++y]=function(){s("function"==typeof t?t:Function(t),n)},r(y),y},v=function(t){delete g[t]},"process"==e(25)(l)?r=function(t){l.nextTick(c(b,t,1))}:d&&d.now?r=function(t){d.now(c(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=_,r=c(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",_,!1)):r=m in a("script")?function(t){u.appendChild(a("script"))[m]=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(c(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,e){for(var r,i=e(3),o=e(11),c=e(22),s=c("typed_array"),u=c("view"),a=!(!i.ArrayBuffer||!i.DataView),f=a,l=0,h=9,v="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<h;)(r=i[v[l++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):f=!1;t.exports={ABV:a,CONSTR:f,TYPED:s,VIEW:u}},function(t,n,e){var r=e(49),i=e(5)("iterator"),o=e(26);t.exports=e(34).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,n,e){"use strict";var r=e(23),i=e(78),o=e(26),c=e(13);t.exports=e(77)(Array,"Array",function(t,n){this._t=c(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,e):"values"==n?i(0,t[e]):i(0,[e,t[e]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,n,e){"use strict";var r=e(21),i=e(31),o=e(8);t.exports=[].copyWithin||function(t,n){var e=r(this),c=o(e.length),s=i(t,c),u=i(n,c),a=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===a?c:i(a,c))-u,c-s),l=1;for(u<s&&s<u+f&&(l=-1,u+=f-1,s+=f-1);f-- >0;)u in e?e[s]=e[u]:delete e[s],s+=l,u+=l;return e}},function(t,n,e){"use strict";var r=e(7).f,i=e(36),o=e(29),c=e(12),s=e(24),u=e(43),a=e(77),f=e(78),l=e(46),h=e(9),v=e(35).fastKey,p=e(32),d=h?"_s":"size",y=function(t,n){var e,r=v(n);if("F"!==r)return t._i[r];for(e=t._f;e;e=e.n)if(e.k==n)return e};t.exports={getConstructor:function(t,n,e,a){var f=t(function(t,r){s(t,f,n,"_i"),t._t=n,t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=r&&u(r,e,t[a],t)});return o(f.prototype,{
clear:function(){for(var t=p(this,n),e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var e=p(this,n),r=y(e,t);if(r){var i=r.n,o=r.p;delete e._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),e._f==r&&(e._f=i),e._l==r&&(e._l=o),e[d]--}return!!r},forEach:function(t){p(this,n);for(var e,r=c(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!y(p(this,n),t)}}),h&&r(f.prototype,"size",{get:function(){return p(this,n)[d]}}),f},def:function(t,n,e){var r,i,o=y(t,n);return o?o.v=e:(t._l=o={i:i=v(n,!0),k:n,v:e,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,e){a(t,n,function(t,e){this._t=p(t,n),this._k=e,this._l=void 0},function(){for(var t=this,n=t._k,e=t._l;e&&e.r;)e=e.p;return t._t&&(t._l=e=e?e.n:t._t._f)?"keys"==n?f(0,e.k):"values"==n?f(0,e.v):f(0,[e.k,e.v]):(t._t=void 0,f(1))},e?"entries":"values",!e,!0),l(n)}}},function(t,n,e){"use strict";var r=e(29),i=e(35).getWeak,o=e(2),c=e(4),s=e(24),u=e(43),a=e(33),f=e(10),l=e(32),h=a(5),v=a(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return h(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var e=g(this,t);e?e[1]=n:this.a.push([t,n])},delete:function(t){var n=v(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,e,o){var a=t(function(t,r){s(t,a,n,"_i"),t._t=n,t._i=p++,t._l=void 0,void 0!=r&&u(r,e,t[o],t)});return r(a.prototype,{delete:function(t){if(!c(t))return!1;var e=i(t);return e===!0?d(l(this,n)).delete(t):e&&f(e,this._i)&&delete e[this._i]},has:function(t){if(!c(t))return!1;var e=i(t);return e===!0?d(l(this,n)).has(t):e&&f(e,this._i)}}),a},def:function(t,n,e){var r=i(o(n),!0);return r===!0?d(t).set(n,e):r[t._i]=e,t},ufstore:d}},function(t,n,e){var r=e(3).document;t.exports=r&&r.documentElement},function(t,n,e){t.exports=!e(9)&&!e(6)(function(){return 7!=Object.defineProperty(e(51)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,e){var r=void 0===e;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)}},function(t,n,e){var r=e(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){var r=e(4),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,n,e){var r=e(4),i=e(25),o=e(5)("match");t.exports=function(t){var n;return r(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,e){var r=e(2);t.exports=function(t,n,e,i){try{return i?n(r(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&r(o.call(t)),n}}},function(t,n,e){"use strict";var r=e(27),i=e(1),o=e(16),c=e(11),s=e(10),u=e(26),a=e(96),f=e(30),l=e(38),h=e(5)("iterator"),v=!([].keys&&"next"in[].keys()),p="@@iterator",d="keys",y="values",g=function(){return this};t.exports=function(t,n,e,m,b,_,w){a(e,n,m);var S,x,E,O=function(t){if(!v&&t in j)return j[t];switch(t){case d:return function(){return new e(this,t)};case y:return function(){return new e(this,t)}}return function(){return new e(this,t)}},M=n+" Iterator",A=b==y,L=!1,j=t.prototype,k=j[h]||j[p]||b&&j[b],T=k||O(b),P=b?A?O("entries"):T:void 0,F="Array"==n?j.entries||k:k;if(F&&(E=l(F.call(new t)),E!==Object.prototype&&E.next&&(f(E,M,!0),r||s(E,h)||c(E,h,g))),A&&k&&k.name!==y&&(L=!0,T=function(){return k.call(this)}),r&&!w||!v&&!L&&j[h]||c(j,h,T),u[n]=T,u[M]=g,b)if(S={values:A?T:O(y),keys:_?T:O(d),entries:P},w)for(x in S)x in j||o(j,x,S[x]);else i(i.P+i.F*(v||L),n,S);return S}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,e){"use strict";function r(t){var n,e;this.promise=new t(function(t,r){if(void 0!==n||void 0!==e)throw TypeError("Bad Promise constructor");n=t,e=r}),this.resolve=i(n),this.reject=i(e)}var i=e(17);t.exports.f=function(t){return new r(t)}},function(t,n,e){"use strict";var r=e(28),i=e(45),o=e(39),c=e(21),s=e(54),u=Object.assign;t.exports=!u||e(6)(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=u({},t)[e]||Object.keys(u({},n)).join("")!=r})?function(t,n){for(var e=c(t),u=arguments.length,a=1,f=i.f,l=o.f;u>a;)for(var h,v=s(arguments[a++]),p=f?r(v).concat(f(v)):r(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(e[h]=v[h]);return e}:u},function(t,n,e){var r=e(10),i=e(13),o=e(48)(!1),c=e(59)("IE_PROTO");t.exports=function(t,n){var e,s=i(t),u=0,a=[];for(e in s)e!=c&&r(s,e)&&a.push(e);for(;n.length>u;)r(s,e=n[u++])&&(~o(a,e)||a.push(e));return a}},function(t,n,e){var r=e(28),i=e(13),o=e(39).f;t.exports=function(t){return function(n){for(var e,c=i(n),s=r(c),u=s.length,a=0,f=[];u>a;)o.call(c,e=s[a++])&&f.push(t?[e,c[e]]:c[e]);return f}}},function(t,n,e){var r=e(37),i=e(45),o=e(2),c=e(3).Reflect;t.exports=c&&c.ownKeys||function(t){var n=r.f(o(t)),e=i.f;return e?n.concat(e(t)):n}},function(t,n,e){var r=e(8),i=e(86),o=e(18);t.exports=function(t,n,e,c){var s=String(o(t)),u=s.length,a=void 0===e?" ":String(e),f=r(n);if(f<=u||""==a)return s;var l=f-u,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),c?h+s:s+h}},function(t,n,e){"use strict";var r=e(20),i=e(18);t.exports=function(t){var n=String(i(this)),e="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(e+=n);return e}},function(t,n,e){var r=e(20),i=e(8);t.exports=function(t){if(void 0===t)return 0;var n=r(t),e=i(n);if(n!==e)throw RangeError("Wrong length!");return e}},function(t,n,e){"use strict";function r(t,n,e){var r,i,o,c=Array(e),s=8*e-n-1,u=(1<<s)-1,a=u>>1,f=23===n?B(2,-24)-B(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=z(t),t!=t||t===I?(i=t!=t?1:0,r=u):(r=Y(X(t)/G),t*(o=B(2,-r))<1&&(r--,o*=2),t+=r+a>=1?f/o:f*B(2,1-a),t*o>=2&&(r++,o/=2),r+a>=u?(i=0,r=u):r+a>=1?(i=(t*o-1)*B(2,n),r+=a):(i=t*B(2,a-1)*B(2,n),r=0));n>=8;c[l++]=255&i,i/=256,n-=8);for(r=r<<n|i,s+=n;s>0;c[l++]=255&r,r/=256,s-=8);return c[--l]|=128*h,c}function i(t,n,e){var r,i=8*e-n-1,o=(1<<i)-1,c=o>>1,s=i-7,u=e-1,a=t[u--],f=127&a;for(a>>=7;s>0;f=256*f+t[u],u--,s-=8);for(r=f&(1<<-s)-1,f>>=-s,s+=n;s>0;r=256*r+t[u],u--,s-=8);if(0===f)f=1-c;else{if(f===o)return r?NaN:a?-I:I;r+=B(2,n),f-=c}return(a?-1:1)*r*B(2,f-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function c(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function u(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return r(t,52,8)}function f(t){return r(t,23,4)}function l(t,n,e){M(t[T],n,{get:function(){return this[e]}})}function h(t,n,e,r){var i=+e,o=E(i);if(o+n>t[K])throw D(F);var c=t[H]._b,s=o+t[J],u=c.slice(s,s+n);return r?u:u.reverse()}function v(t,n,e,r,i,o){var c=+e,s=E(c);if(s+n>t[K])throw D(F);for(var u=t[H]._b,a=s+t[J],f=r(+i),l=0;l<n;l++)u[a+l]=f[o?l:n-l-1]}var p=e(3),d=e(9),y=e(27),g=e(64),m=e(11),b=e(29),_=e(6),w=e(24),S=e(20),x=e(8),E=e(87),O=e(37).f,M=e(7).f,A=e(47),L=e(30),j="ArrayBuffer",k="DataView",T="prototype",P="Wrong length!",F="Wrong index!",N=p[j],C=p[k],R=p.Math,D=p.RangeError,I=p.Infinity,W=N,z=R.abs,B=R.pow,Y=R.floor,X=R.log,G=R.LN2,V="buffer",U="byteLength",q="byteOffset",H=d?"_b":V,K=d?"_l":U,J=d?"_o":q;if(g.ABV){if(!_(function(){N(1)})||!_(function(){new N(-1)})||_(function(){return new N,new N(1.5),new N(NaN),N.name!=j})){N=function(t){return w(this,N),new W(E(t))};for(var $,Q=N[T]=W[T],Z=O(W),tt=0;Z.length>tt;)($=Z[tt++])in N||m(N,$,W[$]);y||(Q.constructor=N)}var nt=new C(new N(2)),et=C[T].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||b(C[T],{setInt8:function(t,n){et.call(this,t,n<<24>>24)},setUint8:function(t,n){et.call(this,t,n<<24>>24)}},!0)}else N=function(t){w(this,N,j);var n=E(t);this._b=A.call(Array(n),0),this[K]=n},C=function(t,n,e){w(this,C,k),w(t,N,k);var r=t[K],i=S(n);if(i<0||i>r)throw D("Wrong offset!");if(e=void 0===e?r-i:x(e),i+e>r)throw D(P);this[H]=t,this[J]=i,this[K]=e},d&&(l(N,U,"_l"),l(C,V,"_b"),l(C,U,"_l"),l(C,q,"_o")),b(C[T],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,c,n)},setUint8:function(t,n){v(this,1,t,c,n)},setInt16:function(t,n){v(this,2,t,s,n,arguments[2])},setUint16:function(t,n){v(this,2,t,s,n,arguments[2])},setInt32:function(t,n){v(this,4,t,u,n,arguments[2])},setUint32:function(t,n){v(this,4,t,u,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});L(N,j),L(C,k),m(C[T],g.VIEW,!0),n[j]=N,n[k]=C},function(t,n,e){n.f=e(5)},function(t,n,e){var r=e(4),i=e(73),o=e(5)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),r(n)&&(n=n[o],null===n&&(n=void 0))),void 0===n?Array:n}},function(t,n,e){var r=e(90);t.exports=function(t,n){return new(r(t))(n)}},function(t,n,e){"use strict";var r=e(17),i=e(4),o=e(72),c=[].slice,s={},u=function(t,n,e){if(!(n in s)){for(var r=[],i=0;i<n;i++)r[i]="a["+i+"]";s[n]=Function("F,a","return new F("+r.join(",")+")")}return s[n](t,e)};t.exports=Function.bind||function(t){var n=r(this),e=c.call(arguments,1),s=function(){var r=e.concat(c.call(arguments));return this instanceof s?u(n,r.length,r):o(n,r,t)};return i(n.prototype)&&(s.prototype=n.prototype),s}},function(t,n,e){var r=e(28),i=e(45),o=e(39);t.exports=function(t){var n=r(t),e=i.f;if(e)for(var c,s=e(t),u=o.f,a=0;s.length>a;)u.call(t,c=s[a++])&&n.push(c);return n}},function(t,n,e){"use strict";var r=e(2);t.exports=function(){var t=r(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,e){var r=e(4),i=e(58).set;t.exports=function(t,n,e){var o,c=n.constructor;return c!==e&&"function"==typeof c&&(o=c.prototype)!==e.prototype&&r(o)&&i&&i(t,o),t}},function(t,n,e){"use strict";var r=e(36),i=e(19),o=e(30),c={};e(11)(c,e(5)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(c,{next:i(1,e)}),o(t,n+" Iterator")}},function(t,n,e){var r=e(57),i=Math.pow,o=i(2,-52),c=i(2,-23),s=i(2,127)*(2-c),u=i(2,-126),a=function(t){return t+1/o-1/o};t.exports=Math.fround||function(t){var n,e,i=Math.abs(t),f=r(t);return i<u?f*a(i/u/c)*u*c:(n=(1+c/o)*i,e=n-(n-i),e>s||e!=e?f*(1/0):f*e)}},function(t,n,e){var r=e(3),i=e(63).set,o=r.MutationObserver||r.WebKitMutationObserver,c=r.process,s=r.Promise,u="process"==e(25)(c);t.exports=function(){var t,n,e,a=function(){var r,i;for(u&&(r=c.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?e():n=void 0,r}}n=void 0,r&&r.enter()};if(u)e=function(){c.nextTick(a)};else if(o){var f=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),e=function(){l.data=f=!f}}else if(s&&s.resolve){var h=s.resolve();e=function(){h.then(a)}}else e=function(){i.call(r,a)};return function(r){var i={fn:r,next:void 0};n&&(n.next=i),t||(t=i,e()),n=i}}},function(t,n,e){var r=e(7),i=e(2),o=e(28);t.exports=e(9)?Object.defineProperties:function(t,n){i(t);for(var e,c=o(n),s=c.length,u=0;s>u;)r.f(t,e=c[u++],n[e]);return t}},function(t,n,e){var r=e(13),i=e(37).f,o={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return c.slice()}};t.exports.f=function(t){return c&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,e){var r=e(2),i=e(4),o=e(80);t.exports=function(t,n){if(r(t),i(n)&&n.constructor===t)return n;var e=o.f(t),c=e.resolve;return c(n),e.promise}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t===1/n:t!=t&&n!=n}},function(t,n,e){var r=e(20),i=e(18);t.exports=function(t){return function(n,e){var o,c,s=String(i(n)),u=r(e),a=s.length;return u<0||u>=a?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===a||(c=s.charCodeAt(u+1))<56320||c>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(c-56320)+65536)}}},function(t,n,e){var r=e(3),i=e(34),o=e(27),c=e(89),s=e(7).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||s(n,t,{value:c.f(t)})}},function(t,n,e){var r=e(1);r(r.P,"Array",{copyWithin:e(67)}),e(23)("copyWithin")},function(t,n,e){var r=e(1);r(r.P,"Array",{fill:e(47)}),e(23)("fill")},function(t,n,e){"use strict";var r=e(1),i=e(33)(6),o="findIndex",c=!0;o in[]&&Array(1)[o](function(){c=!1}),r(r.P+r.F*c,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)(o)},function(t,n,e){"use strict";var r=e(1),i=e(33)(5),o="find",c=!0;o in[]&&Array(1)[o](function(){c=!1}),r(r.P+r.F*c,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)(o)},function(t,n,e){"use strict";var r=e(12),i=e(1),o=e(21),c=e(76),s=e(55),u=e(8),a=e(50),f=e(65);i(i.S+i.F*!e(44)(function(t){Array.from(t)}),"Array",{from:function(t){var n,e,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,m=f(h);if(y&&(d=r(d,p>2?arguments[2]:void 0,2)),void 0==m||v==Array&&s(m))for(n=u(h.length),e=new v(n);n>g;g++)a(e,g,y?d(h[g],g):h[g]);else for(l=m.call(h),e=new v;!(i=l.next()).done;g++)a(e,g,y?c(l,d,[i.value,g],!0):i.value);return e.length=g,e}})},function(t,n,e){"use strict";var r=e(1),i=e(50);r(r.S+r.F*e(6)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,e=new("function"==typeof this?this:Array)(n);n>t;)i(e,t,arguments[t++]);return e.length=n,e}})},function(t,n,e){var r=e(7).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,c="name";c in i||e(9)&&r(i,c,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,e){"use strict";var r=e(68),i=e(32),o="Map";t.exports=e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=r.getEntry(i(this,o),t);return n&&n.v},set:function(t,n){return r.def(i(this,o),0===t?0:t,n)}},r,!0)},function(t,n,e){var r=e(1),i=e(79),o=Math.sqrt,c=Math.acosh;r(r.S+r.F*!(c&&710==Math.floor(c(Number.MAX_VALUE))&&c(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,e){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=e(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(t,n,e){var r=e(1),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,e){var r=e(1),i=e(57);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,e){var r=e(1);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,e){var r=e(1),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,e){var r=e(1),i=e(56);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,e){var r=e(1);r(r.S,"Math",{fround:e(97)})},function(t,n,e){var r=e(1),i=Math.abs;r(r.S,"Math",{hypot:function(t,n){for(var e,r,o=0,c=0,s=arguments.length,u=0;c<s;)e=i(arguments[c++]),u<e?(r=u/e,o=o*r*r+1,u=e):e>0?(r=e/u,o+=r*r):o+=e;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,n,e){var r=e(1),i=Math.imul;r(r.S+r.F*e(6)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(t,n){var e=65535,r=+t,i=+n,o=e&r,c=e&i;return 0|o*c+((e&r>>>16)*c+o*(e&i>>>16)<<16>>>0)}})},function(t,n,e){var r=e(1);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,e){var r=e(1);r(r.S,"Math",{log1p:e(79)})},function(t,n,e){var r=e(1);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,e){var r=e(1);r(r.S,"Math",{sign:e(57)})},function(t,n,e){var r=e(1),i=e(56),o=Math.exp;r(r.S+r.F*e(6)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,e){var r=e(1),i=e(56),o=Math.exp;r(r.S,"Math",{tanh:function(t){var n=i(t=+t),e=i(-t);return n==1/0?1:e==1/0?-1:(n-e)/(o(t)+o(-t))}})},function(t,n,e){var r=e(1);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,e){var r=e(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,e){var r=e(1),i=e(3).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,e){var r=e(1);r(r.S,"Number",{isInteger:e(74)})},function(t,n,e){var r=e(1);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,e){var r=e(1),i=e(74),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,e){var r=e(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,e){var r=e(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,e){var r=e(1);r(r.S+r.F,"Object",{assign:e(81)})},function(t,n,e){var r=e(1);r(r.S,"Object",{is:e(103)})},function(t,n,e){var r=e(1);r(r.S,"Object",{setPrototypeOf:e(58).set})},function(t,n,e){"use strict";var r,i,o,c,s=e(27),u=e(3),a=e(12),f=e(49),l=e(1),h=e(4),v=e(17),p=e(24),d=e(43),y=e(61),g=e(63).set,m=e(98)(),b=e(80),_=e(101),w=e(102),S="Promise",x=u.TypeError,E=u.process,O=u[S],M="process"==f(E),A=function(){},L=i=b.f,j=!!function(){try{var t=O.resolve(1),n=(t.constructor={})[e(5)("species")]=function(t){t(A,A)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n}catch(t){}}(),k=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},T=function(t,n){if(!t._n){t._n=!0;var e=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,c=function(n){var e,o,c=i?n.ok:n.fail,s=n.resolve,u=n.reject,a=n.domain;try{c?(i||(2==t._h&&N(t),t._h=1),c===!0?e=r:(a&&a.enter(),e=c(r),a&&a.exit()),e===n.promise?u(x("Promise-chain cycle")):(o=k(e))?o.call(e,s,u):s(e)):u(r)}catch(t){u(t)}};e.length>o;)c(e[o++]);t._c=[],t._n=!1,n&&!t._h&&P(t)})}},P=function(t){g.call(u,function(){var n,e,r,i=t._v,o=F(t);if(o&&(n=_(function(){M?E.emit("unhandledRejection",i,t):(e=u.onunhandledrejection)?e({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=M||F(t)?2:1),t._a=void 0,o&&n.e)throw n.v})},F=function(t){if(1==t._h)return!1;for(var n,e=t._a||t._c,r=0;e.length>r;)if(n=e[r++],n.fail||!F(n.promise))return!1;return!0},N=function(t){g.call(u,function(){var n;M?E.emit("rejectionHandled",t):(n=u.onrejectionhandled)&&n({promise:t,reason:t._v})})},C=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},R=function(t){var n,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw x("Promise can't be resolved itself");(n=k(t))?m(function(){var r={_w:e,_d:!1};try{n.call(t,a(R,r,1),a(C,r,1))}catch(t){C.call(r,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){C.call({_w:e,_d:!1},t)}}};j||(O=function(t){p(this,O,S,"_h"),v(t),r.call(this);try{t(a(R,this,1),a(C,this,1))}catch(t){C.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e(29)(O.prototype,{then:function(t,n){var e=L(y(this,O));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=M?E.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&T(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=a(R,t,1),this.reject=a(C,t,1)},b.f=L=function(t){return t===O||t===c?new o(t):i(t)}),l(l.G+l.W+l.F*!j,{Promise:O}),e(30)(O,S),e(46)(S),c=e(34)[S],l(l.S+l.F*!j,S,{reject:function(t){var n=L(this),e=n.reject;return e(t),n.promise}}),l(l.S+l.F*(s||!j),S,{resolve:function(t){return w(s&&this===c?O:this,t)}}),l(l.S+l.F*!(j&&e(44)(function(t){O.all(t).catch(A)})),S,{all:function(t){var n=this,e=L(n),r=e.resolve,i=e.reject,o=_(function(){var e=[],o=0,c=1;d(t,!1,function(t){var s=o++,u=!1;e.push(void 0),c++,n.resolve(t).then(function(t){u||(u=!0,e[s]=t,--c||r(e))},i)}),--c||r(e)});return o.e&&i(o.v),e.promise},race:function(t){var n=this,e=L(n),r=e.reject,i=_(function(){d(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return i.e&&r(i.v),e.promise}})},function(t,n,e){var r=e(1),i=e(17),o=e(2),c=(e(3).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!e(6)(function(){c(function(){})}),"Reflect",{apply:function(t,n,e){var r=i(t),u=o(e);return c?c(r,n,u):s.call(r,n,u)}})},function(t,n,e){var r=e(1),i=e(36),o=e(17),c=e(2),s=e(4),u=e(6),a=e(92),f=(e(3).Reflect||{}).construct,l=u(function(){function t(){}return!(f(function(){},[],t)instanceof t)}),h=!u(function(){f(function(){})});r(r.S+r.F*(l||h),"Reflect",{construct:function(t,n){o(t),c(n);var e=arguments.length<3?t:o(arguments[2]);if(h&&!l)return f(t,n,e);if(t==e){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var r=[null];return r.push.apply(r,n),new(a.apply(t,r))}var u=e.prototype,v=i(s(u)?u:Object.prototype),p=Function.apply.call(t,v,n);return s(p)?p:v}})},function(t,n,e){var r=e(7),i=e(1),o=e(2),c=e(40);i(i.S+i.F*e(6)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,e){o(t),n=c(n,!0),o(e);try{return r.f(t,n,e),!0}catch(t){return!1}}})},function(t,n,e){var r=e(1),i=e(15).f,o=e(2);r(r.S,"Reflect",{deleteProperty:function(t,n){var e=i(o(t),n);return!(e&&!e.configurable)&&delete t[n]}})},function(t,n,e){var r=e(15),i=e(1),o=e(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return r.f(o(t),n)}})},function(t,n,e){var r=e(1),i=e(38),o=e(2);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,e){function r(t,n){var e,s,f=arguments.length<3?t:arguments[2];return a(t)===f?t[n]:(e=i.f(t,n))?c(e,"value")?e.value:void 0!==e.get?e.get.call(f):void 0:u(s=o(t))?r(s,n,f):void 0}var i=e(15),o=e(38),c=e(10),s=e(1),u=e(4),a=e(2);s(s.S,"Reflect",{get:r})},function(t,n,e){var r=e(1);r(r.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,e){var r=e(1),i=e(2),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,e){var r=e(1);r(r.S,"Reflect",{ownKeys:e(84)})},function(t,n,e){var r=e(1),i=e(2),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,e){var r=e(1),i=e(58);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,e){function r(t,n,e){var u,h,v=arguments.length<4?t:arguments[3],p=o.f(f(t),n);if(!p){if(l(h=c(t)))return r(h,n,e,v);p=a(0)}return s(p,"value")?!(p.writable===!1||!l(v))&&(u=o.f(v,n)||a(0),u.value=e,i.f(v,n,u),!0):void 0!==p.set&&(p.set.call(v,e),!0)}var i=e(7),o=e(15),c=e(38),s=e(10),u=e(1),a=e(19),f=e(2),l=e(4);u(u.S,"Reflect",{set:r})},function(t,n,e){e(9)&&"g"!=/./g.flags&&e(7).f(RegExp.prototype,"flags",{configurable:!0,get:e(94)})},function(t,n,e){e(42)("match",1,function(t,n,e){return[function(e){"use strict";var r=t(this),i=void 0==e?void 0:e[n];return void 0!==i?i.call(e,r):new RegExp(e)[n](String(r))},e]})},function(t,n,e){e(42)("replace",2,function(t,n,e){return[function(r,i){"use strict";var o=t(this),c=void 0==r?void 0:r[n];return void 0!==c?c.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,e){e(42)("search",1,function(t,n,e){return[function(e){"use strict";var r=t(this),i=void 0==e?void 0:e[n];return void 0!==i?i.call(e,r):new RegExp(e)[n](String(r))},e]})},function(t,n,e){e(42)("split",2,function(t,n,r){"use strict";var i=e(75),o=r,c=[].push,s="split",u="length",a="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[u]||2!="ab"[s](/(?:ab)*/)[u]||4!="."[s](/(.?)(.?)/)[u]||"."[s](/()()/)[u]>1||""[s](/.?/)[u]){var f=void 0===/()??/.exec("")[1];r=function(t,n){var e=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(e,t,n);var r,s,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,m=new RegExp(t.source,d+"g");for(f||(r=new RegExp("^"+m.source+"$(?!\\s)",d));(s=m.exec(e))&&(l=s.index+s[0][u],!(l>y&&(p.push(e.slice(y,s.index)),!f&&s[u]>1&&s[0].replace(r,function(){for(v=1;v<arguments[u]-2;v++)void 0===arguments[v]&&(s[v]=void 0)}),s[u]>1&&s.index<e[u]&&c.apply(p,s.slice(1)),h=s[0][u],y=l,p[u]>=g)));)m[a]===s.index&&m[a]++;return y===e[u]?!h&&m.test("")||p.push(""):p.push(e.slice(y)),p[u]>g?p.slice(0,g):p}}else"0"[s](void 0,0)[u]&&(r=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(e,i){var o=t(this),c=void 0==e?void 0:e[n];return void 0!==c?c.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,e){"use strict";var r=e(68),i=e(32),o="Set";t.exports=e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t=0===t?0:t,t)}},r)},function(t,n,e){"use strict";var r=e(1),i=e(104)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,e){"use strict";var r=e(1),i=e(8),o=e(62),c="endsWith",s=""[c];r(r.P+r.F*e(53)(c),"String",{endsWith:function(t){var n=o(this,t,c),e=arguments.length>1?arguments[1]:void 0,r=i(n.length),u=void 0===e?r:Math.min(i(e),r),a=String(t);return s?s.call(n,a,u):n.slice(u-a.length,u)===a}})},function(t,n,e){var r=e(1),i=e(31),o=String.fromCharCode,c=String.fromCodePoint;r(r.S+r.F*(!!c&&1!=c.length),"String",{fromCodePoint:function(t){for(var n,e=[],r=arguments.length,c=0;r>c;){if(n=+arguments[c++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");e.push(n<65536?o(n):o(((n-=65536)>>10)+55296,n%1024+56320))}return e.join("")}})},function(t,n,e){"use strict";var r=e(1),i=e(62),o="includes";r(r.P+r.F*e(53)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,e){var r=e(1),i=e(13),o=e(8);r(r.S,"String",{raw:function(t){for(var n=i(t.raw),e=o(n.length),r=arguments.length,c=[],s=0;e>s;)c.push(String(n[s++])),s<r&&c.push(String(arguments[s]));return c.join("")}})},function(t,n,e){var r=e(1);r(r.P,"String",{repeat:e(86)})},function(t,n,e){"use strict";var r=e(1),i=e(8),o=e(62),c="startsWith",s=""[c];r(r.P+r.F*e(53)(c),"String",{startsWith:function(t){var n=o(this,t,c),e=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),r=String(t);return s?s.call(n,r,e):n.slice(e,e+r.length)===r}})},function(t,n,e){"use strict";var r=e(3),i=e(10),o=e(9),c=e(1),s=e(16),u=e(35).KEY,a=e(6),f=e(60),l=e(30),h=e(22),v=e(5),p=e(89),d=e(105),y=e(93),g=e(73),m=e(2),b=e(13),_=e(40),w=e(19),S=e(36),x=e(100),E=e(15),O=e(7),M=e(28),A=E.f,L=O.f,j=x.f,k=r.Symbol,T=r.JSON,P=T&&T.stringify,F="prototype",N=v("_hidden"),C=v("toPrimitive"),R={}.propertyIsEnumerable,D=f("symbol-registry"),I=f("symbols"),W=f("op-symbols"),z=Object[F],B="function"==typeof k,Y=r.QObject,X=!Y||!Y[F]||!Y[F].findChild,G=o&&a(function(){return 7!=S(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=A(z,n);r&&delete z[n],L(t,n,e),r&&t!==z&&L(z,n,r)}:L,V=function(t){var n=I[t]=S(k[F]);return n._k=t,n},U=B&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},q=function(t,n,e){return t===z&&q(W,n,e),m(t),n=_(n,!0),m(e),i(I,n)?(e.enumerable?(i(t,N)&&t[N][n]&&(t[N][n]=!1),e=S(e,{enumerable:w(0,!1)})):(i(t,N)||L(t,N,w(1,{})),t[N][n]=!0),G(t,n,e)):L(t,n,e)},H=function(t,n){m(t);for(var e,r=y(n=b(n)),i=0,o=r.length;o>i;)q(t,e=r[i++],n[e]);return t},K=function(t,n){return void 0===n?S(t):H(S(t),n)},J=function(t){var n=R.call(this,t=_(t,!0));return!(this===z&&i(I,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(I,t)||i(this,N)&&this[N][t])||n)},$=function(t,n){if(t=b(t),n=_(n,!0),t!==z||!i(I,n)||i(W,n)){var e=A(t,n);return!e||!i(I,n)||i(t,N)&&t[N][n]||(e.enumerable=!0),e}},Q=function(t){for(var n,e=j(b(t)),r=[],o=0;e.length>o;)i(I,n=e[o++])||n==N||n==u||r.push(n);return r},Z=function(t){for(var n,e=t===z,r=j(e?W:b(t)),o=[],c=0;r.length>c;)!i(I,n=r[c++])||e&&!i(z,n)||o.push(I[n]);return o};B||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(e){this===z&&n.call(W,e),i(this,N)&&i(this[N],t)&&(this[N][t]=!1),G(this,t,w(1,e))};return o&&X&&G(z,t,{configurable:!0,set:n}),V(t)},s(k[F],"toString",function(){return this._k}),E.f=$,O.f=q,e(37).f=x.f=Q,e(39).f=J,e(45).f=Z,o&&!e(27)&&s(z,"propertyIsEnumerable",J,!0),p.f=function(t){return V(v(t))}),c(c.G+c.W+c.F*!B,{Symbol:k});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)v(tt[nt++]);for(var et=M(v.store),rt=0;et.length>rt;)d(et[rt++]);c(c.S+c.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=k(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var n in D)if(D[n]===t)return n},useSetter:function(){X=!0},useSimple:function(){X=!1}}),c(c.S+c.F*!B,"Object",{create:K,defineProperty:q,defineProperties:H,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),T&&c(c.S+c.F*(!B||a(function(){var t=k();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!U(t)){for(var n,e,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return n=r[1],"function"==typeof n&&(e=n),!e&&g(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!U(n))return n}),r[1]=n,P.apply(T,r)}}}),k[F][C]||e(11)(k[F],C,k[F].valueOf),l(k,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){"use strict";var r=e(1),i=e(64),o=e(88),c=e(2),s=e(31),u=e(8),a=e(4),f=e(3).ArrayBuffer,l=e(61),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&f.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(f!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),r(r.P+r.U+r.F*e(6)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(c(this),t);for(var e=c(this).byteLength,r=s(t,e),i=s(void 0===n?e:n,e),o=new(l(this,h))(u(i-r)),a=new v(this),f=new v(o),p=0;r<i;)f.setUint8(p++,a.getUint8(r++));return o}}),e(46)(g)},function(t,n,e){e(14)("Float32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Float64",8,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int16",2,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int8",1,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint16",2,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint8",1,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint8",1,function(t){return function(n,e,r){return t(this,n,e,r)}},!0)},function(t,n,e){"use strict";var r,i=e(33)(0),o=e(16),c=e(35),s=e(81),u=e(69),a=e(4),f=e(6),l=e(32),h="WeakMap",v=c.getWeak,p=Object.isExtensible,d=u.ufstore,y={},g=function(t){
return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(a(t)){var n=v(t);return n===!0?d(l(this,h)).get(t):n?n[this._i]:void 0}},set:function(t,n){return u.def(l(this,h),t,n)}},b=t.exports=e(41)(h,g,m,u,!0,!0);f(function(){return 7!=(new b).set((Object.freeze||Object)(y),7).get(y)})&&(r=u.getConstructor(g,h),s(r.prototype,m),c.NEED=!0,i(["delete","has","get","set"],function(t){var n=b.prototype,e=n[t];o(n,t,function(n,i){if(a(n)&&!p(n)){this._f||(this._f=new r);var o=this._f[t](n,i);return"set"==t?this:o}return e.call(this,n,i)})}))},function(t,n,e){"use strict";var r=e(69),i=e(32),o="WeakSet";e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t,!0)}},r,!1,!0)},function(t,n,e){"use strict";var r=e(1),i=e(48)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)("includes")},function(t,n,e){var r=e(1),i=e(83)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,n,e){var r=e(1),i=e(84),o=e(13),c=e(15),s=e(50);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,e,r=o(t),u=c.f,a=i(r),f={},l=0;a.length>l;)e=u(r,n=a[l++]),void 0!==e&&s(f,n,e);return f}})},function(t,n,e){var r=e(1),i=e(83)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,n,e){"use strict";var r=e(1),i=e(85);r(r.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,e){"use strict";var r=e(1),i=e(85);r(r.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,e){for(var r=e(66),i=e(28),o=e(16),c=e(3),s=e(11),u=e(26),a=e(5),f=a("iterator"),l=a("toStringTag"),h=u.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],m=v[g],b=c[g],_=b&&b.prototype;if(_&&(_[f]||s(_,f,h),_[l]||s(_,l,g),u[g]=h,m))for(y in r)_[y]||o(_,y,r[y],!0)}},function(t,n,e){var r=e(1),i=e(63);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,e){var r=e(3),i=e(1),o=r.navigator,c=[].slice,s=!!o&&/MSIE .\./.test(o.userAgent),u=function(t){return function(n,e){var r=arguments.length>2,i=!!r&&c.call(arguments,2);return t(r?function(){("function"==typeof n?n:Function(n)).apply(this,i)}:n,e)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,n){},function(t,n){(function(n){function e(t,n,e){function i(n){var e=d,r=y;return d=y=void 0,E=n,m=t.apply(r,e)}function o(t){return E=t,b=setTimeout(f,n),O?i(t):m}function u(t){var e=t-x,r=t-E,i=n-e;return M?w(i,g-r):i}function a(t){var e=t-x,r=t-E;return void 0===x||e>=n||e<0||M&&r>=g}function f(){var t=S();return a(t)?l(t):void(b=setTimeout(f,u(t)))}function l(t){return b=void 0,A&&d?i(t):(d=y=void 0,m)}function h(){void 0!==b&&clearTimeout(b),E=0,d=x=y=b=void 0}function v(){return void 0===b?m:l(S())}function p(){var t=S(),e=a(t);if(d=arguments,y=this,x=t,e){if(void 0===b)return o(x);if(M)return b=setTimeout(f,n),i(x)}return void 0===b&&(b=setTimeout(f,n)),m}var d,y,g,m,b,x,E=0,O=!1,M=!1,A=!0;if("function"!=typeof t)throw new TypeError(s);return n=c(n)||0,r(e)&&(O=!!e.leading,M="maxWait"in e,g=M?_(c(e.maxWait)||0,n):g,A="trailing"in e?!!e.trailing:A),p.cancel=h,p.flush=v,p}function r(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function i(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||i(t)&&b.call(t)==a}function c(t){if("number"==typeof t)return t;if(o(t))return u;if(r(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=r(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(f,"");var e=h.test(t);return e||v.test(t)?p(t.slice(2),e?2:8):l.test(t)?u:+t}var s="Expected a function",u=NaN,a="[object Symbol]",f=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,v=/^0o[0-7]+$/i,p=parseInt,d="object"==typeof n&&n&&n.Object===Object&&n,y="object"==typeof self&&self&&self.Object===Object&&self,g=d||y||Function("return this")(),m=Object.prototype,b=m.toString,_=Math.max,w=Math.min,S=function(){return g.Date.now()};t.exports=e}).call(n,function(){return this}())},function(t,n){!function(n){"use strict";function e(t,n,e,r){var o=n&&n.prototype instanceof i?n:i,c=Object.create(o.prototype),s=new v(r||[]);return c._invoke=a(t,e,s),c}function r(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function c(){}function s(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(t){function n(e,i,o,c){var s=r(t[e],t,i);if("throw"!==s.type){var u=s.arg,a=u.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,c)},function(t){n("throw",t,o,c)}):Promise.resolve(a).then(function(t){u.value=t,o(u)},c)}c(s.arg)}function e(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=e}function a(t,n,e){var i=O;return function(o,c){if(i===A)throw new Error("Generator is already running");if(i===L){if("throw"===o)throw c;return d()}for(e.method=o,e.arg=c;;){var s=e.delegate;if(s){var u=f(s,e);if(u){if(u===j)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(i===O)throw i=L,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);i=A;var a=r(t,n,e);if("normal"===a.type){if(i=e.done?L:M,a.arg===j)continue;return{value:a.arg,done:e.done}}"throw"===a.type&&(i=L,e.method="throw",e.arg=a.arg)}}}function f(t,n){var e=t.iterator[n.method];if(e===y){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=y,f(t,n),"throw"===n.method))return j;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var i=r(e,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,j;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=y),n.delegate=null,j):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,j)}function l(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function h(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function v(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function p(t){if(t){var n=t[_];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,r=function n(){for(;++e<t.length;)if(m.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=y,n.done=!0,n};return r.next=r}}return{next:d}}function d(){return{value:y,done:!0}}var y,g=Object.prototype,m=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",x="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(x&&(t.exports=E));E=n.regeneratorRuntime=x?t.exports:{},E.wrap=e;var O="suspendedStart",M="suspendedYield",A="executing",L="completed",j={},k={};k[_]=function(){return this};var T=Object.getPrototypeOf,P=T&&T(T(p([])));P&&P!==g&&m.call(P,_)&&(k=P);var F=c.prototype=i.prototype=Object.create(k);o.prototype=F.constructor=c,c.constructor=o,c[S]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===o||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,S in t||(t[S]="GeneratorFunction")),t.prototype=Object.create(F),t},E.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[w]=function(){return this},E.AsyncIterator=u,E.async=function(t,n,r,i){var o=new u(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(F),F[S]="Generator",F[_]=function(){return this},F.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},E.values=p,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=y),!!r}if(this.done)throw t;for(var e=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,j):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),j},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),h(e),j}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var i=r.arg;h(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:p(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=y),j}}}(function(){return this}()||Function("return this")())},function(t,n,e){!function(n,e){t.exports=e()}(this,function(){"use strict";function t(t){return parseFloat(t)||0}function n(n){var e=Array.prototype.slice.call(arguments,1);return e.reduce(function(e,r){var i=n["border-"+r+"-width"];return e+t(i)},0)}function e(n){for(var e=["top","right","bottom","left"],r={},i=0,o=e;i<o.length;i+=1){var c=o[i],s=n["padding-"+c];r[c]=t(s)}return r}function r(t){var n=t.getBBox();return u(0,0,n.width,n.height)}function i(r){var i=r.clientWidth,c=r.clientHeight;if(!i&&!c)return _;var s=getComputedStyle(r),a=e(s),f=a.left+a.right,l=a.top+a.bottom,h=t(s.width),v=t(s.height);if("border-box"===s.boxSizing&&(Math.round(h+f)!==i&&(h-=n(s,"left","right")+f),Math.round(v+l)!==c&&(v-=n(s,"top","bottom")+l)),!o(r)){var p=Math.round(h+f)-i,d=Math.round(v+l)-c;1!==Math.abs(p)&&(h-=p),1!==Math.abs(d)&&(v-=d)}return u(a.left,a.top,h,v)}function o(t){return t===document.documentElement}function c(t){return f?w(t)?r(t):i(t):_}function s(t){var n=t.x,e=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(o.prototype);return b(c,{x:n,y:e,width:r,height:i,top:e,right:n+r,bottom:i+e,left:n}),c}function u(t,n,e,r){return{x:t,y:n,width:e,height:r}}var a=function(){function t(t,n){var e=-1;return t.some(function(t,r){return t[0]===n&&(e=r,!0)}),e}return"undefined"!=typeof Map?Map:function(){function n(){this.__entries__=[]}var e={size:{}};return e.size.get=function(){return this.__entries__.length},n.prototype.get=function(n){var e=t(this.__entries__,n),r=this.__entries__[e];return r&&r[1]},n.prototype.set=function(n,e){var r=t(this.__entries__,n);~r?this.__entries__[r][1]=e:this.__entries__.push([n,e])},n.prototype.delete=function(n){var e=this.__entries__,r=t(e,n);~r&&e.splice(r,1)},n.prototype.has=function(n){return!!~t(this.__entries__,n)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(t,n){void 0===n&&(n=null);for(var e=0,r=this.__entries__;e<r.length;e+=1){var i=r[e];t.call(n,i[1],i[0])}},Object.defineProperties(n.prototype,e),n}()}(),f="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),h=2,v=function(t,n){function e(){o&&(o=!1,t()),c&&i()}function r(){l(e)}function i(){var t=Date.now();if(o){if(t-s<h)return;c=!0}else o=!0,c=!1,setTimeout(r,n);s=t}var o=!1,c=!1,s=0;return i},p=20,d=["top","right","bottom","left","width","height","size","weight"],y="undefined"!=typeof navigator&&/Trident\/.*rv:11/.test(navigator.userAgent),g="undefined"!=typeof MutationObserver&&!y,m=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=v(this.refresh.bind(this),p)};m.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},m.prototype.removeObserver=function(t){var n=this.observers_,e=n.indexOf(t);~e&&n.splice(e,1),!n.length&&this.connected_&&this.disconnect_()},m.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},m.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},m.prototype.connect_=function(){f&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),g?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},m.prototype.disconnect_=function(){f&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},m.prototype.onTransitionEnd_=function(t){var n=t.propertyName,e=d.some(function(t){return!!~n.indexOf(t)});e&&this.refresh()},m.getInstance=function(){return this.instance_||(this.instance_=new m),this.instance_},m.instance_=null;var b=function(t,n){for(var e=0,r=Object.keys(n);e<r.length;e+=1){var i=r[e];Object.defineProperty(t,i,{value:n[i],enumerable:!1,writable:!1,configurable:!0})}return t},_=u(0,0,0,0),w=function(){return"undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof SVGGraphicsElement}:function(t){return t instanceof SVGElement&&"function"==typeof t.getBBox}}(),S=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=u(0,0,0,0),this.target=t};S.prototype.isActive=function(){var t=c(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},S.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var x=function(t,n){var e=s(n);b(this,{target:t,contentRect:e})},E=function(t,n,e){if("function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.activeObservations_=[],this.observations_=new a,this.callback_=t,this.controller_=n,this.callbackCtx_=e};E.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new S(t)),this.controller_.addObserver(this),this.controller_.refresh())}},E.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},E.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},E.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},E.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(t){return new x(t.target,t.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},E.prototype.clearActive=function(){this.activeObservations_.splice(0)},E.prototype.hasActive=function(){return this.activeObservations_.length>0};var O="undefined"!=typeof WeakMap?new WeakMap:new a,M=function(t){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=m.getInstance(),e=new E(t,n,this);O.set(this,e)};["observe","unobserve","disconnect"].forEach(function(t){M.prototype[t]=function(){return(n=O.get(this))[t].apply(n,arguments);var n}});var A=function(){return"undefined"!=typeof ResizeObserver?ResizeObserver:M}();return A})},function(t,n,e){var r,i,o;/*! scrollbarWidth.js v0.1.0 | felixexter | MIT | https://github.com/felixexter/scrollbarWidth */
!function(e,c){i=[],r=c,o="function"==typeof r?r.apply(n,i):r,!(void 0!==o&&(t.exports=o))}(this,function(){"use strict";function t(){var t,n=document.body,e=document.createElement("div"),r=e.style;return r.position="absolute",r.top=r.left="-9999px",r.width=r.height="100px",r.overflow="scroll",n.appendChild(e),t=e.offsetWidth-e.clientWidth,n.removeChild(e),t}return t})}])});
/**
 * Owl Carousel v2.2.1
 * Copyright 2013-2017 David Deutsch
 * Licensed under  ()
 */
/**
 * Owl carousel
 * @version 2.1.6
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 * @todo Lazy Load Icon
 * @todo prevent animationend bubling
 * @todo itemsScaleUp
 * @todo Test Zepto
 * @todo stagePadding calculate wrong active classes
 */
;(function($, window, document, undefined) {

	/**
	 * Creates a carousel.
	 * @class The Owl Carousel.
	 * @public
	 * @param {HTMLElement|jQuery} element - The element to create the carousel for.
	 * @param {Object} [options] - The options
	 */
	function Owl(element, options) {

		/**
		 * Current settings for the carousel.
		 * @public
		 */
		this.settings = null;

		/**
		 * Current options set by the caller including defaults.
		 * @public
		 */
		this.options = $.extend({}, Owl.Defaults, options);

		/**
		 * Plugin element.
		 * @public
		 */
		this.$element = $(element);

		/**
		 * Proxied event handlers.
		 * @protected
		 */
		this._handlers = {};

		/**
		 * References to the running plugins of this carousel.
		 * @protected
		 */
		this._plugins = {};

		/**
		 * Currently suppressed events to prevent them from beeing retriggered.
		 * @protected
		 */
		this._supress = {};

		/**
		 * Absolute current position.
		 * @protected
		 */
		this._current = null;

		/**
		 * Animation speed in milliseconds.
		 * @protected
		 */
		this._speed = null;

		/**
		 * Coordinates of all items in pixel.
		 * @todo The name of this member is missleading.
		 * @protected
		 */
		this._coordinates = [];

		/**
		 * Current breakpoint.
		 * @todo Real media queries would be nice.
		 * @protected
		 */
		this._breakpoint = null;

		/**
		 * Current width of the plugin element.
		 */
		this._width = null;

		/**
		 * All real items.
		 * @protected
		 */
		this._items = [];

		/**
		 * All cloned items.
		 * @protected
		 */
		this._clones = [];

		/**
		 * Merge values of all items.
		 * @todo Maybe this could be part of a plugin.
		 * @protected
		 */
		this._mergers = [];

		/**
		 * Widths of all items.
		 */
		this._widths = [];

		/**
		 * Invalidated parts within the update process.
		 * @protected
		 */
		this._invalidated = {};

		/**
		 * Ordered list of workers for the update process.
		 * @protected
		 */
		this._pipe = [];

		/**
		 * Current state information for the drag operation.
		 * @todo #261
		 * @protected
		 */
		this._drag = {
			time: null,
			target: null,
			pointer: null,
			stage: {
				start: null,
				current: null
			},
			direction: null
		};

		/**
		 * Current state information and their tags.
		 * @type {Object}
		 * @protected
		 */
		this._states = {
			current: {},
			tags: {
				'initializing': [ 'busy' ],
				'animating': [ 'busy' ],
				'dragging': [ 'interacting' ]
			}
		};

		$.each([ 'onResize', 'onThrottledResize' ], $.proxy(function(i, handler) {
			this._handlers[handler] = $.proxy(this[handler], this);
		}, this));

		$.each(Owl.Plugins, $.proxy(function(key, plugin) {
			this._plugins[key.charAt(0).toLowerCase() + key.slice(1)]
				= new plugin(this);
		}, this));

		$.each(Owl.Workers, $.proxy(function(priority, worker) {
			this._pipe.push({
				'filter': worker.filter,
				'run': $.proxy(worker.run, this)
			});
		}, this));

		this.setup();
		this.initialize();
	}

	/**
	 * Default options for the carousel.
	 * @public
	 */
	Owl.Defaults = {
		items: 3,
		loop: false,
		center: false,
		rewind: false,

		mouseDrag: true,
		touchDrag: true,
		pullDrag: true,
		freeDrag: false,

		margin: 0,
		stagePadding: 0,

		merge: false,
		mergeFit: true,
		autoWidth: false,

		startPosition: 0,
		rtl: false,

		smartSpeed: 250,
		fluidSpeed: false,
		dragEndSpeed: false,

		responsive: {},
		responsiveRefreshRate: 200,
		responsiveBaseElement: window,

		fallbackEasing: 'swing',

		info: false,

		nestedItemSelector: false,
		itemElement: 'div',
		stageElement: 'div',

		refreshClass: 'owl-refresh',
		loadedClass: 'owl-loaded',
		loadingClass: 'owl-loading',
		rtlClass: 'owl-rtl',
		responsiveClass: 'owl-responsive',
		dragClass: 'owl-drag',
		itemClass: 'owl-item',
		stageClass: 'owl-stage',
		stageOuterClass: 'owl-stage-outer',
		grabClass: 'owl-grab'
	};

	/**
	 * Enumeration for width.
	 * @public
	 * @readonly
	 * @enum {String}
	 */
	Owl.Width = {
		Default: 'default',
		Inner: 'inner',
		Outer: 'outer'
	};

	/**
	 * Enumeration for types.
	 * @public
	 * @readonly
	 * @enum {String}
	 */
	Owl.Type = {
		Event: 'event',
		State: 'state'
	};

	/**
	 * Contains all registered plugins.
	 * @public
	 */
	Owl.Plugins = {};

	/**
	 * List of workers involved in the update process.
	 */
	Owl.Workers = [ {
		filter: [ 'width', 'settings' ],
		run: function() {
			this._width = this.$element.width();
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			cache.current = this._items && this._items[this.relative(this._current)];
		}
	}, {
		filter: [ 'items', 'settings' ],
		run: function() {
			this.$stage.children('.cloned').remove();
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var margin = this.settings.margin || '',
				grid = !this.settings.autoWidth,
				rtl = this.settings.rtl,
				css = {
					'width': 'auto',
					'margin-left': rtl ? margin : '',
					'margin-right': rtl ? '' : margin
				};

			!grid && this.$stage.children().css(css);

			cache.css = css;
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var width = (this.width() / this.settings.items).toFixed(3) - this.settings.margin,
				merge = null,
				iterator = this._items.length,
				grid = !this.settings.autoWidth,
				widths = [];

			cache.items = {
				merge: false,
				width: width
			};

			while (iterator--) {
				merge = this._mergers[iterator];
				merge = this.settings.mergeFit && Math.min(merge, this.settings.items) || merge;

				cache.items.merge = merge > 1 || cache.items.merge;

				widths[iterator] = !grid ? this._items[iterator].width() : width * merge;
			}

			this._widths = widths;
		}
	}, {
		filter: [ 'items', 'settings' ],
		run: function() {
			var clones = [],
				items = this._items,
				settings = this.settings,
				// TODO: Should be computed from number of min width items in stage
				view = Math.max(settings.items * 2, 4),
				size = Math.ceil(items.length / 2) * 2,
				repeat = settings.loop && items.length ? settings.rewind ? view : Math.max(view, size) : 0,
				append = '',
				prepend = '';

			repeat /= 2;

			while (repeat--) {
				// Switch to only using appended clones
				clones.push(this.normalize(clones.length / 2, true));
				append = append + items[clones[clones.length - 1]][0].outerHTML;
				clones.push(this.normalize(items.length - 1 - (clones.length - 1) / 2, true));
				prepend = items[clones[clones.length - 1]][0].outerHTML + prepend;
			}

			this._clones = clones;

			$(append).addClass('cloned').appendTo(this.$stage);
			$(prepend).addClass('cloned').prependTo(this.$stage);
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function() {
			var rtl = this.settings.rtl ? 1 : -1,
				size = this._clones.length + this._items.length,
				iterator = -1,
				previous = 0,
				current = 0,
				coordinates = [];

			while (++iterator < size) {
				previous = coordinates[iterator - 1] || 0;
				current = this._widths[this.relative(iterator)] + this.settings.margin;
				coordinates.push(previous + current * rtl);
			}

			this._coordinates = coordinates;
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function() {
			var padding = this.settings.stagePadding,
				coordinates = this._coordinates,
				css = {
					'width': Math.ceil(Math.abs(coordinates[coordinates.length - 1])) + padding * 2,
					'padding-left': padding || '',
					'padding-right': padding || ''
				};

			this.$stage.css(css);
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var iterator = this._coordinates.length,
				grid = !this.settings.autoWidth,
				items = this.$stage.children();

			if (grid && cache.items.merge) {
				while (iterator--) {
					cache.css.width = this._widths[this.relative(iterator)];
					items.eq(iterator).css(cache.css);
				}
			} else if (grid) {
				cache.css.width = cache.items.width;
				items.css(cache.css);
			}
		}
	}, {
		filter: [ 'items' ],
		run: function() {
			this._coordinates.length < 1 && this.$stage.removeAttr('style');
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			cache.current = cache.current ? this.$stage.children().index(cache.current) : 0;
			cache.current = Math.max(this.minimum(), Math.min(this.maximum(), cache.current));
			this.reset(cache.current);
		}
	}, {
		filter: [ 'position' ],
		run: function() {
			this.animate(this.coordinates(this._current));
		}
	}, {
		filter: [ 'width', 'position', 'items', 'settings' ],
		run: function() {
			var rtl = this.settings.rtl ? 1 : -1,
				padding = this.settings.stagePadding * 2,
				begin = this.coordinates(this.current()) + padding,
				end = begin + this.width() * rtl,
				inner, outer, matches = [], i, n;

			for (i = 0, n = this._coordinates.length; i < n; i++) {
				inner = this._coordinates[i - 1] || 0;
				outer = Math.abs(this._coordinates[i]) + padding * rtl;

				if ((this.op(inner, '<=', begin) && (this.op(inner, '>', end)))
					|| (this.op(outer, '<', begin) && this.op(outer, '>', end))) {
					matches.push(i);
				}
			}

			this.$stage.children('.active').removeClass('active');
			this.$stage.children(':eq(' + matches.join('), :eq(') + ')').addClass('active');

			if (this.settings.center) {
				this.$stage.children('.center').removeClass('center');
				this.$stage.children().eq(this.current()).addClass('center');
			}
		}
	} ];

	/**
	 * Initializes the carousel.
	 * @protected
	 */
	Owl.prototype.initialize = function() {
		this.enter('initializing');
		this.trigger('initialize');

		this.$element.toggleClass(this.settings.rtlClass, this.settings.rtl);

		if (this.settings.autoWidth && !this.is('pre-loading')) {
			var imgs, nestedSelector, width;
			imgs = this.$element.find('img');
			nestedSelector = this.settings.nestedItemSelector ? '.' + this.settings.nestedItemSelector : undefined;
			width = this.$element.children(nestedSelector).width();

			if (imgs.length && width <= 0) {
				this.preloadAutoWidthImages(imgs);
			}
		}

		this.$element.addClass(this.options.loadingClass);

		// create stage
		this.$stage = $('<' + this.settings.stageElement + ' class="' + this.settings.stageClass + '"/>')
			.wrap('<div class="' + this.settings.stageOuterClass + '"/>');

		// append stage
		this.$element.append(this.$stage.parent());

		// append content
		this.replace(this.$element.children().not(this.$stage.parent()));

		// check visibility
		if (this.$element.is(':visible')) {
			// update view
			this.refresh();
		} else {
			// invalidate width
			this.invalidate('width');
		}

		this.$element
			.removeClass(this.options.loadingClass)
			.addClass(this.options.loadedClass);

		// register event handlers
		this.registerEventHandlers();

		this.leave('initializing');
		this.trigger('initialized');
	};

	/**
	 * Setups the current settings.
	 * @todo Remove responsive classes. Why should adaptive designs be brought into IE8?
	 * @todo Support for media queries by using `matchMedia` would be nice.
	 * @public
	 */
	Owl.prototype.setup = function() {
		var viewport = this.viewport(),
			overwrites = this.options.responsive,
			match = -1,
			settings = null;

		if (!overwrites) {
			settings = $.extend({}, this.options);
		} else {
			$.each(overwrites, function(breakpoint) {
				if (breakpoint <= viewport && breakpoint > match) {
					match = Number(breakpoint);
				}
			});

			settings = $.extend({}, this.options, overwrites[match]);
			if (typeof settings.stagePadding === 'function') {
				settings.stagePadding = settings.stagePadding();
			}
			delete settings.responsive;

			// responsive class
			if (settings.responsiveClass) {
				this.$element.attr('class',
					this.$element.attr('class').replace(new RegExp('(' + this.options.responsiveClass + '-)\\S+\\s', 'g'), '$1' + match)
				);
			}
		}

		this.trigger('change', { property: { name: 'settings', value: settings } });
		this._breakpoint = match;
		this.settings = settings;
		this.invalidate('settings');
		this.trigger('changed', { property: { name: 'settings', value: this.settings } });
	};

	/**
	 * Updates option logic if necessery.
	 * @protected
	 */
	Owl.prototype.optionsLogic = function() {
		if (this.settings.autoWidth) {
			this.settings.stagePadding = false;
			this.settings.merge = false;
		}
	};

	/**
	 * Prepares an item before add.
	 * @todo Rename event parameter `content` to `item`.
	 * @protected
	 * @returns {jQuery|HTMLElement} - The item container.
	 */
	Owl.prototype.prepare = function(item) {
		var event = this.trigger('prepare', { content: item });

		if (!event.data) {
			event.data = $('<' + this.settings.itemElement + '/>')
				.addClass(this.options.itemClass).append(item)
		}

		this.trigger('prepared', { content: event.data });

		return event.data;
	};

	/**
	 * Updates the view.
	 * @public
	 */
	Owl.prototype.update = function() {
		var i = 0,
			n = this._pipe.length,
			filter = $.proxy(function(p) { return this[p] }, this._invalidated),
			cache = {};

		while (i < n) {
			if (this._invalidated.all || $.grep(this._pipe[i].filter, filter).length > 0) {
				this._pipe[i].run(cache);
			}
			i++;
		}

		this._invalidated = {};

		!this.is('valid') && this.enter('valid');
	};

	/**
	 * Gets the width of the view.
	 * @public
	 * @param {Owl.Width} [dimension=Owl.Width.Default] - The dimension to return.
	 * @returns {Number} - The width of the view in pixel.
	 */
	Owl.prototype.width = function(dimension) {
		dimension = dimension || Owl.Width.Default;
		switch (dimension) {
			case Owl.Width.Inner:
			case Owl.Width.Outer:
				return this._width;
			default:
				return this._width - this.settings.stagePadding * 2 + this.settings.margin;
		}
	};

	/**
	 * Refreshes the carousel primarily for adaptive purposes.
	 * @public
	 */
	Owl.prototype.refresh = function() {
		this.enter('refreshing');
		this.trigger('refresh');

		this.setup();

		this.optionsLogic();

		this.$element.addClass(this.options.refreshClass);

		this.update();

		this.$element.removeClass(this.options.refreshClass);

		this.leave('refreshing');
		this.trigger('refreshed');
	};

	/**
	 * Checks window `resize` event.
	 * @protected
	 */
	Owl.prototype.onThrottledResize = function() {
		window.clearTimeout(this.resizeTimer);
		this.resizeTimer = window.setTimeout(this._handlers.onResize, this.settings.responsiveRefreshRate);
	};

	/**
	 * Checks window `resize` event.
	 * @protected
	 */
	Owl.prototype.onResize = function() {
		if (!this._items.length) {
			return false;
		}

		if (this._width === this.$element.width()) {
			return false;
		}

		if (!this.$element.is(':visible')) {
			return false;
		}

		this.enter('resizing');

		if (this.trigger('resize').isDefaultPrevented()) {
			this.leave('resizing');
			return false;
		}

		this.invalidate('width');

		this.refresh();

		this.leave('resizing');
		this.trigger('resized');
	};

	/**
	 * Registers event handlers.
	 * @todo Check `msPointerEnabled`
	 * @todo #261
	 * @protected
	 */
	Owl.prototype.registerEventHandlers = function() {
		if ($.support.transition) {
			this.$stage.on($.support.transition.end + '.owl.core', $.proxy(this.onTransitionEnd, this));
		}

		if (this.settings.responsive !== false) {
			this.on(window, 'resize', this._handlers.onThrottledResize);
		}

		if (this.settings.mouseDrag) {
			this.$element.addClass(this.options.dragClass);
			this.$stage.on('mousedown.owl.core', $.proxy(this.onDragStart, this));
			this.$stage.on('dragstart.owl.core selectstart.owl.core', function() { return false });
		}

		if (this.settings.touchDrag){
			this.$stage.on('touchstart.owl.core', $.proxy(this.onDragStart, this));
			this.$stage.on('touchcancel.owl.core', $.proxy(this.onDragEnd, this));
		}
	};

	/**
	 * Handles `touchstart` and `mousedown` events.
	 * @todo Horizontal swipe threshold as option
	 * @todo #261
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragStart = function(event) {
		var stage = null;

		if (event.which === 3) {
			return;
		}

		if ($.support.transform) {
			stage = this.$stage.css('transform').replace(/.*\(|\)| /g, '').split(',');
			stage = {
				x: stage[stage.length === 16 ? 12 : 4],
				y: stage[stage.length === 16 ? 13 : 5]
			};
		} else {
			stage = this.$stage.position();
			stage = {
				x: this.settings.rtl ?
					stage.left + this.$stage.width() - this.width() + this.settings.margin :
					stage.left,
				y: stage.top
			};
		}

		if (this.is('animating')) {
			$.support.transform ? this.animate(stage.x) : this.$stage.stop()
			this.invalidate('position');
		}

		this.$element.toggleClass(this.options.grabClass, event.type === 'mousedown');

		this.speed(0);

		this._drag.time = new Date().getTime();
		this._drag.target = $(event.target);
		this._drag.stage.start = stage;
		this._drag.stage.current = stage;
		this._drag.pointer = this.pointer(event);

		$(document).on('mouseup.owl.core touchend.owl.core', $.proxy(this.onDragEnd, this));

		$(document).one('mousemove.owl.core touchmove.owl.core', $.proxy(function(event) {
			var delta = this.difference(this._drag.pointer, this.pointer(event));

			$(document).on('mousemove.owl.core touchmove.owl.core', $.proxy(this.onDragMove, this));

			if (Math.abs(delta.x) < Math.abs(delta.y) && this.is('valid')) {
				return;
			}

			event.preventDefault();

			this.enter('dragging');
			this.trigger('drag');
		}, this));
	};

	/**
	 * Handles the `touchmove` and `mousemove` events.
	 * @todo #261
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragMove = function(event) {
		var minimum = null,
			maximum = null,
			pull = null,
			delta = this.difference(this._drag.pointer, this.pointer(event)),
			stage = this.difference(this._drag.stage.start, delta);

		if (!this.is('dragging')) {
			return;
		}

		event.preventDefault();

		if (this.settings.loop) {
			minimum = this.coordinates(this.minimum());
			maximum = this.coordinates(this.maximum() + 1) - minimum;
			stage.x = (((stage.x - minimum) % maximum + maximum) % maximum) + minimum;
		} else {
			minimum = this.settings.rtl ? this.coordinates(this.maximum()) : this.coordinates(this.minimum());
			maximum = this.settings.rtl ? this.coordinates(this.minimum()) : this.coordinates(this.maximum());
			pull = this.settings.pullDrag ? -1 * delta.x / 5 : 0;
			stage.x = Math.max(Math.min(stage.x, minimum + pull), maximum + pull);
		}

		this._drag.stage.current = stage;

		this.animate(stage.x);
	};

	/**
	 * Handles the `touchend` and `mouseup` events.
	 * @todo #261
	 * @todo Threshold for click event
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragEnd = function(event) {
		var delta = this.difference(this._drag.pointer, this.pointer(event)),
			stage = this._drag.stage.current,
			direction = delta.x > 0 ^ this.settings.rtl ? 'left' : 'right';

		$(document).off('.owl.core');

		this.$element.removeClass(this.options.grabClass);

		if (delta.x !== 0 && this.is('dragging') || !this.is('valid')) {
			this.speed(this.settings.dragEndSpeed || this.settings.smartSpeed);
			this.current(this.closest(stage.x, delta.x !== 0 ? direction : this._drag.direction));
			this.invalidate('position');
			this.update();

			this._drag.direction = direction;

			if (Math.abs(delta.x) > 3 || new Date().getTime() - this._drag.time > 300) {
				this._drag.target.one('click.owl.core', function() { return false; });
			}
		}

		if (!this.is('dragging')) {
			return;
		}

		this.leave('dragging');
		this.trigger('dragged');
	};

	/**
	 * Gets absolute position of the closest item for a coordinate.
	 * @todo Setting `freeDrag` makes `closest` not reusable. See #165.
	 * @protected
	 * @param {Number} coordinate - The coordinate in pixel.
	 * @param {String} direction - The direction to check for the closest item. Ether `left` or `right`.
	 * @return {Number} - The absolute position of the closest item.
	 */
	Owl.prototype.closest = function(coordinate, direction) {
		var position = -1,
			pull = 30,
			width = this.width(),
			coordinates = this.coordinates();

		if (!this.settings.freeDrag) {
			// check closest item
			$.each(coordinates, $.proxy(function(index, value) {
				// on a left pull, check on current index
				if (direction === 'left' && coordinate > value - pull && coordinate < value + pull) {
					position = index;
				// on a right pull, check on previous index
				// to do so, subtract width from value and set position = index + 1
				} else if (direction === 'right' && coordinate > value - width - pull && coordinate < value - width + pull) {
					position = index + 1;
				} else if (this.op(coordinate, '<', value)
					&& this.op(coordinate, '>', coordinates[index + 1] || value - width)) {
					position = direction === 'left' ? index + 1 : index;
				}
				return position === -1;
			}, this));
		}

		if (!this.settings.loop) {
			// non loop boundries
			if (this.op(coordinate, '>', coordinates[this.minimum()])) {
				position = coordinate = this.minimum();
			} else if (this.op(coordinate, '<', coordinates[this.maximum()])) {
				position = coordinate = this.maximum();
			}
		}

		return position;
	};

	/**
	 * Animates the stage.
	 * @todo #270
	 * @public
	 * @param {Number} coordinate - The coordinate in pixels.
	 */
	Owl.prototype.animate = function(coordinate) {
		var animate = this.speed() > 0;

		this.is('animating') && this.onTransitionEnd();

		if (animate) {
			this.enter('animating');
			this.trigger('translate');
		}

		if ($.support.transform3d && $.support.transition) {
			this.$stage.css({
				transform: 'translate3d(' + coordinate + 'px,0px,0px)',
				transition: (this.speed() / 1000) + 's'
			});
		} else if (animate) {
			this.$stage.animate({
				left: coordinate + 'px'
			}, this.speed(), this.settings.fallbackEasing, $.proxy(this.onTransitionEnd, this));
		} else {
			this.$stage.css({
				left: coordinate + 'px'
			});
		}
	};

	/**
	 * Checks whether the carousel is in a specific state or not.
	 * @param {String} state - The state to check.
	 * @returns {Boolean} - The flag which indicates if the carousel is busy.
	 */
	Owl.prototype.is = function(state) {
		return this._states.current[state] && this._states.current[state] > 0;
	};

	/**
	 * Sets the absolute position of the current item.
	 * @public
	 * @param {Number} [position] - The new absolute position or nothing to leave it unchanged.
	 * @returns {Number} - The absolute position of the current item.
	 */
	Owl.prototype.current = function(position) {
		if (position === undefined) {
			return this._current;
		}

		if (this._items.length === 0) {
			return undefined;
		}

		position = this.normalize(position);

		if (this._current !== position) {
			var event = this.trigger('change', { property: { name: 'position', value: position } });

			if (event.data !== undefined) {
				position = this.normalize(event.data);
			}

			this._current = position;

			this.invalidate('position');

			this.trigger('changed', { property: { name: 'position', value: this._current } });
		}

		return this._current;
	};

	/**
	 * Invalidates the given part of the update routine.
	 * @param {String} [part] - The part to invalidate.
	 * @returns {Array.<String>} - The invalidated parts.
	 */
	Owl.prototype.invalidate = function(part) {
		if ($.type(part) === 'string') {
			this._invalidated[part] = true;
			this.is('valid') && this.leave('valid');
		}
		return $.map(this._invalidated, function(v, i) { return i });
	};

	/**
	 * Resets the absolute position of the current item.
	 * @public
	 * @param {Number} position - The absolute position of the new item.
	 */
	Owl.prototype.reset = function(position) {
		position = this.normalize(position);

		if (position === undefined) {
			return;
		}

		this._speed = 0;
		this._current = position;

		this.suppress([ 'translate', 'translated' ]);

		this.animate(this.coordinates(position));

		this.release([ 'translate', 'translated' ]);
	};

	/**
	 * Normalizes an absolute or a relative position of an item.
	 * @public
	 * @param {Number} position - The absolute or relative position to normalize.
	 * @param {Boolean} [relative=false] - Whether the given position is relative or not.
	 * @returns {Number} - The normalized position.
	 */
	Owl.prototype.normalize = function(position, relative) {
		var n = this._items.length,
			m = relative ? 0 : this._clones.length;

		if (!this.isNumeric(position) || n < 1) {
			position = undefined;
		} else if (position < 0 || position >= n + m) {
			position = ((position - m / 2) % n + n) % n + m / 2;
		}

		return position;
	};

	/**
	 * Converts an absolute position of an item into a relative one.
	 * @public
	 * @param {Number} position - The absolute position to convert.
	 * @returns {Number} - The converted position.
	 */
	Owl.prototype.relative = function(position) {
		position -= this._clones.length / 2;
		return this.normalize(position, true);
	};

	/**
	 * Gets the maximum position for the current item.
	 * @public
	 * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
	 * @returns {Number}
	 */
	Owl.prototype.maximum = function(relative) {
		var settings = this.settings,
			maximum = this._coordinates.length,
			iterator,
			reciprocalItemsWidth,
			elementWidth;

		if (settings.loop) {
			maximum = this._clones.length / 2 + this._items.length - 1;
		} else if (settings.autoWidth || settings.merge) {
			iterator = this._items.length;
			reciprocalItemsWidth = this._items[--iterator].width();
			elementWidth = this.$element.width();
			while (iterator--) {
				reciprocalItemsWidth += this._items[iterator].width() + this.settings.margin;
				if (reciprocalItemsWidth > elementWidth) {
					break;
				}
			}
			maximum = iterator + 1;
		} else if (settings.center) {
			maximum = this._items.length - 1;
		} else {
			maximum = this._items.length - settings.items;
		}

		if (relative) {
			maximum -= this._clones.length / 2;
		}

		return Math.max(maximum, 0);
	};

	/**
	 * Gets the minimum position for the current item.
	 * @public
	 * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
	 * @returns {Number}
	 */
	Owl.prototype.minimum = function(relative) {
		return relative ? 0 : this._clones.length / 2;
	};

	/**
	 * Gets an item at the specified relative position.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
	 */
	Owl.prototype.items = function(position) {
		if (position === undefined) {
			return this._items.slice();
		}

		position = this.normalize(position, true);
		return this._items[position];
	};

	/**
	 * Gets an item at the specified relative position.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
	 */
	Owl.prototype.mergers = function(position) {
		if (position === undefined) {
			return this._mergers.slice();
		}

		position = this.normalize(position, true);
		return this._mergers[position];
	};

	/**
	 * Gets the absolute positions of clones for an item.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @returns {Array.<Number>} - The absolute positions of clones for the item or all if no position was given.
	 */
	Owl.prototype.clones = function(position) {
		var odd = this._clones.length / 2,
			even = odd + this._items.length,
			map = function(index) { return index % 2 === 0 ? even + index / 2 : odd - (index + 1) / 2 };

		if (position === undefined) {
			return $.map(this._clones, function(v, i) { return map(i) });
		}

		return $.map(this._clones, function(v, i) { return v === position ? map(i) : null });
	};

	/**
	 * Sets the current animation speed.
	 * @public
	 * @param {Number} [speed] - The animation speed in milliseconds or nothing to leave it unchanged.
	 * @returns {Number} - The current animation speed in milliseconds.
	 */
	Owl.prototype.speed = function(speed) {
		if (speed !== undefined) {
			this._speed = speed;
		}

		return this._speed;
	};

	/**
	 * Gets the coordinate of an item.
	 * @todo The name of this method is missleanding.
	 * @public
	 * @param {Number} position - The absolute position of the item within `minimum()` and `maximum()`.
	 * @returns {Number|Array.<Number>} - The coordinate of the item in pixel or all coordinates.
	 */
	Owl.prototype.coordinates = function(position) {
		var multiplier = 1,
			newPosition = position - 1,
			coordinate;

		if (position === undefined) {
			return $.map(this._coordinates, $.proxy(function(coordinate, index) {
				return this.coordinates(index);
			}, this));
		}

		if (this.settings.center) {
			if (this.settings.rtl) {
				multiplier = -1;
				newPosition = position + 1;
			}

			coordinate = this._coordinates[position];
			coordinate += (this.width() - coordinate + (this._coordinates[newPosition] || 0)) / 2 * multiplier;
		} else {
			coordinate = this._coordinates[newPosition] || 0;
		}

		coordinate = Math.ceil(coordinate);

		return coordinate;
	};

	/**
	 * Calculates the speed for a translation.
	 * @protected
	 * @param {Number} from - The absolute position of the start item.
	 * @param {Number} to - The absolute position of the target item.
	 * @param {Number} [factor=undefined] - The time factor in milliseconds.
	 * @returns {Number} - The time in milliseconds for the translation.
	 */
	Owl.prototype.duration = function(from, to, factor) {
		if (factor === 0) {
			return 0;
		}

		return Math.min(Math.max(Math.abs(to - from), 1), 6) * Math.abs((factor || this.settings.smartSpeed));
	};

	/**
	 * Slides to the specified item.
	 * @public
	 * @param {Number} position - The position of the item.
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.to = function(position, speed) {
		var current = this.current(),
			revert = null,
			distance = position - this.relative(current),
			direction = (distance > 0) - (distance < 0),
			items = this._items.length,
			minimum = this.minimum(),
			maximum = this.maximum();

		if (this.settings.loop) {
			if (!this.settings.rewind && Math.abs(distance) > items / 2) {
				distance += direction * -1 * items;
			}

			position = current + distance;
			revert = ((position - minimum) % items + items) % items + minimum;

			if (revert !== position && revert - distance <= maximum && revert - distance > 0) {
				current = revert - distance;
				position = revert;
				this.reset(current);
			}
		} else if (this.settings.rewind) {
			maximum += 1;
			position = (position % maximum + maximum) % maximum;
		} else {
			position = Math.max(minimum, Math.min(maximum, position));
		}

		this.speed(this.duration(current, position, speed));
		this.current(position);

		if (this.$element.is(':visible')) {
			this.update();
		}
	};

	/**
	 * Slides to the next item.
	 * @public
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.next = function(speed) {
		speed = speed || false;
		this.to(this.relative(this.current()) + 1, speed);
	};

	/**
	 * Slides to the previous item.
	 * @public
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.prev = function(speed) {
		speed = speed || false;
		this.to(this.relative(this.current()) - 1, speed);
	};

	/**
	 * Handles the end of an animation.
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onTransitionEnd = function(event) {

		// if css2 animation then event object is undefined
		if (event !== undefined) {
			event.stopPropagation();

			// Catch only owl-stage transitionEnd event
			if ((event.target || event.srcElement || event.originalTarget) !== this.$stage.get(0)) {
				return false;
			}
		}

		this.leave('animating');
		this.trigger('translated');
	};

	/**
	 * Gets viewport width.
	 * @protected
	 * @return {Number} - The width in pixel.
	 */
	Owl.prototype.viewport = function() {
		var width;
		if (this.options.responsiveBaseElement !== window) {
			width = $(this.options.responsiveBaseElement).width();
		} else if (window.innerWidth) {
			width = window.innerWidth;
		} else if (document.documentElement && document.documentElement.clientWidth) {
			width = document.documentElement.clientWidth;
		} else {
			console.warn('Can not detect viewport width.');
		}
		return width;
	};

	/**
	 * Replaces the current content.
	 * @public
	 * @param {HTMLElement|jQuery|String} content - The new content.
	 */
	Owl.prototype.replace = function(content) {
		this.$stage.empty();
		this._items = [];

		if (content) {
			content = (content instanceof jQuery) ? content : $(content);
		}

		if (this.settings.nestedItemSelector) {
			content = content.find('.' + this.settings.nestedItemSelector);
		}

		content.filter(function() {
			return this.nodeType === 1;
		}).each($.proxy(function(index, item) {
			item = this.prepare(item);
			this.$stage.append(item);
			this._items.push(item);
			this._mergers.push(item.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		}, this));

		this.reset(this.isNumeric(this.settings.startPosition) ? this.settings.startPosition : 0);

		this.invalidate('items');
	};

	/**
	 * Adds an item.
	 * @todo Use `item` instead of `content` for the event arguments.
	 * @public
	 * @param {HTMLElement|jQuery|String} content - The item content to add.
	 * @param {Number} [position] - The relative position at which to insert the item otherwise the item will be added to the end.
	 */
	Owl.prototype.add = function(content, position) {
		var current = this.relative(this._current);

		position = position === undefined ? this._items.length : this.normalize(position, true);
		content = content instanceof jQuery ? content : $(content);

		this.trigger('add', { content: content, position: position });

		content = this.prepare(content);

		if (this._items.length === 0 || position === this._items.length) {
			this._items.length === 0 && this.$stage.append(content);
			this._items.length !== 0 && this._items[position - 1].after(content);
			this._items.push(content);
			this._mergers.push(content.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		} else {
			this._items[position].before(content);
			this._items.splice(position, 0, content);
			this._mergers.splice(position, 0, content.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		}

		this._items[current] && this.reset(this._items[current].index());

		this.invalidate('items');

		this.trigger('added', { content: content, position: position });
	};

	/**
	 * Removes an item by its position.
	 * @todo Use `item` instead of `content` for the event arguments.
	 * @public
	 * @param {Number} position - The relative position of the item to remove.
	 */
	Owl.prototype.remove = function(position) {
		position = this.normalize(position, true);

		if (position === undefined) {
			return;
		}

		this.trigger('remove', { content: this._items[position], position: position });

		this._items[position].remove();
		this._items.splice(position, 1);
		this._mergers.splice(position, 1);

		this.invalidate('items');

		this.trigger('removed', { content: null, position: position });
	};

	/**
	 * Preloads images with auto width.
	 * @todo Replace by a more generic approach
	 * @protected
	 */
	Owl.prototype.preloadAutoWidthImages = function(images) {
		images.each($.proxy(function(i, element) {
			this.enter('pre-loading');
			element = $(element);
			$(new Image()).one('load', $.proxy(function(e) {
				element.attr('src', e.target.src);
				element.css('opacity', 1);
				this.leave('pre-loading');
				!this.is('pre-loading') && !this.is('initializing') && this.refresh();
			}, this)).attr('src', element.attr('src') || element.attr('data-src') || element.attr('data-src-retina'));
		}, this));
	};

	/**
	 * Destroys the carousel.
	 * @public
	 */
	Owl.prototype.destroy = function() {

		this.$element.off('.owl.core');
		this.$stage.off('.owl.core');
		$(document).off('.owl.core');

		if (this.settings.responsive !== false) {
			window.clearTimeout(this.resizeTimer);
			this.off(window, 'resize', this._handlers.onThrottledResize);
		}

		for (var i in this._plugins) {
			this._plugins[i].destroy();
		}

		this.$stage.children('.cloned').remove();

		this.$stage.unwrap();
		this.$stage.children().contents().unwrap();
		this.$stage.children().unwrap();

		this.$element
			.removeClass(this.options.refreshClass)
			.removeClass(this.options.loadingClass)
			.removeClass(this.options.loadedClass)
			.removeClass(this.options.rtlClass)
			.removeClass(this.options.dragClass)
			.removeClass(this.options.grabClass)
			.attr('class', this.$element.attr('class').replace(new RegExp(this.options.responsiveClass + '-\\S+\\s', 'g'), ''))
			.removeData('owl.carousel');
	};

	/**
	 * Operators to calculate right-to-left and left-to-right.
	 * @protected
	 * @param {Number} [a] - The left side operand.
	 * @param {String} [o] - The operator.
	 * @param {Number} [b] - The right side operand.
	 */
	Owl.prototype.op = function(a, o, b) {
		var rtl = this.settings.rtl;
		switch (o) {
			case '<':
				return rtl ? a > b : a < b;
			case '>':
				return rtl ? a < b : a > b;
			case '>=':
				return rtl ? a <= b : a >= b;
			case '<=':
				return rtl ? a >= b : a <= b;
			default:
				break;
		}
	};

	/**
	 * Attaches to an internal event.
	 * @protected
	 * @param {HTMLElement} element - The event source.
	 * @param {String} event - The event name.
	 * @param {Function} listener - The event handler to attach.
	 * @param {Boolean} capture - Wether the event should be handled at the capturing phase or not.
	 */
	Owl.prototype.on = function(element, event, listener, capture) {
		if (element.addEventListener) {
			element.addEventListener(event, listener, capture);
		} else if (element.attachEvent) {
			element.attachEvent('on' + event, listener);
		}
	};

	/**
	 * Detaches from an internal event.
	 * @protected
	 * @param {HTMLElement} element - The event source.
	 * @param {String} event - The event name.
	 * @param {Function} listener - The attached event handler to detach.
	 * @param {Boolean} capture - Wether the attached event handler was registered as a capturing listener or not.
	 */
	Owl.prototype.off = function(element, event, listener, capture) {
		if (element.removeEventListener) {
			element.removeEventListener(event, listener, capture);
		} else if (element.detachEvent) {
			element.detachEvent('on' + event, listener);
		}
	};

	/**
	 * Triggers a public event.
	 * @todo Remove `status`, `relatedTarget` should be used instead.
	 * @protected
	 * @param {String} name - The event name.
	 * @param {*} [data=null] - The event data.
	 * @param {String} [namespace=carousel] - The event namespace.
	 * @param {String} [state] - The state which is associated with the event.
	 * @param {Boolean} [enter=false] - Indicates if the call enters the specified state or not.
	 * @returns {Event} - The event arguments.
	 */
	Owl.prototype.trigger = function(name, data, namespace, state, enter) {
		var status = {
			item: { count: this._items.length, index: this.current() }
		}, handler = $.camelCase(
			$.grep([ 'on', name, namespace ], function(v) { return v })
				.join('-').toLowerCase()
		), event = $.Event(
			[ name, 'owl', namespace || 'carousel' ].join('.').toLowerCase(),
			$.extend({ relatedTarget: this }, status, data)
		);

		if (!this._supress[name]) {
			$.each(this._plugins, function(name, plugin) {
				if (plugin.onTrigger) {
					plugin.onTrigger(event);
				}
			});

			this.register({ type: Owl.Type.Event, name: name });
			this.$element.trigger(event);

			if (this.settings && typeof this.settings[handler] === 'function') {
				this.settings[handler].call(this, event);
			}
		}

		return event;
	};

	/**
	 * Enters a state.
	 * @param name - The state name.
	 */
	Owl.prototype.enter = function(name) {
		$.each([ name ].concat(this._states.tags[name] || []), $.proxy(function(i, name) {
			if (this._states.current[name] === undefined) {
				this._states.current[name] = 0;
			}

			this._states.current[name]++;
		}, this));
	};

	/**
	 * Leaves a state.
	 * @param name - The state name.
	 */
	Owl.prototype.leave = function(name) {
		$.each([ name ].concat(this._states.tags[name] || []), $.proxy(function(i, name) {
			this._states.current[name]--;
		}, this));
	};

	/**
	 * Registers an event or state.
	 * @public
	 * @param {Object} object - The event or state to register.
	 */
	Owl.prototype.register = function(object) {
		if (object.type === Owl.Type.Event) {
			if (!$.event.special[object.name]) {
				$.event.special[object.name] = {};
			}

			if (!$.event.special[object.name].owl) {
				var _default = $.event.special[object.name]._default;
				$.event.special[object.name]._default = function(e) {
					if (_default && _default.apply && (!e.namespace || e.namespace.indexOf('owl') === -1)) {
						return _default.apply(this, arguments);
					}
					return e.namespace && e.namespace.indexOf('owl') > -1;
				};
				$.event.special[object.name].owl = true;
			}
		} else if (object.type === Owl.Type.State) {
			if (!this._states.tags[object.name]) {
				this._states.tags[object.name] = object.tags;
			} else {
				this._states.tags[object.name] = this._states.tags[object.name].concat(object.tags);
			}

			this._states.tags[object.name] = $.grep(this._states.tags[object.name], $.proxy(function(tag, i) {
				return $.inArray(tag, this._states.tags[object.name]) === i;
			}, this));
		}
	};

	/**
	 * Suppresses events.
	 * @protected
	 * @param {Array.<String>} events - The events to suppress.
	 */
	Owl.prototype.suppress = function(events) {
		$.each(events, $.proxy(function(index, event) {
			this._supress[event] = true;
		}, this));
	};

	/**
	 * Releases suppressed events.
	 * @protected
	 * @param {Array.<String>} events - The events to release.
	 */
	Owl.prototype.release = function(events) {
		$.each(events, $.proxy(function(index, event) {
			delete this._supress[event];
		}, this));
	};

	/**
	 * Gets unified pointer coordinates from event.
	 * @todo #261
	 * @protected
	 * @param {Event} - The `mousedown` or `touchstart` event.
	 * @returns {Object} - Contains `x` and `y` coordinates of current pointer position.
	 */
	Owl.prototype.pointer = function(event) {
		var result = { x: null, y: null };

		event = event.originalEvent || event || window.event;

		event = event.touches && event.touches.length ?
			event.touches[0] : event.changedTouches && event.changedTouches.length ?
				event.changedTouches[0] : event;

		if (event.pageX) {
			result.x = event.pageX;
			result.y = event.pageY;
		} else {
			result.x = event.clientX;
			result.y = event.clientY;
		}

		return result;
	};

	/**
	 * Determines if the input is a Number or something that can be coerced to a Number
	 * @protected
	 * @param {Number|String|Object|Array|Boolean|RegExp|Function|Symbol} - The input to be tested
	 * @returns {Boolean} - An indication if the input is a Number or can be coerced to a Number
	 */
	Owl.prototype.isNumeric = function(number) {
		return !isNaN(parseFloat(number));
	};

	/**
	 * Gets the difference of two vectors.
	 * @todo #261
	 * @protected
	 * @param {Object} - The first vector.
	 * @param {Object} - The second vector.
	 * @returns {Object} - The difference.
	 */
	Owl.prototype.difference = function(first, second) {
		return {
			x: first.x - second.x,
			y: first.y - second.y
		};
	};

	/**
	 * The jQuery Plugin for the Owl Carousel
	 * @todo Navigation plugin `next` and `prev`
	 * @public
	 */
	$.fn.owlCarousel = function(option) {
		var args = Array.prototype.slice.call(arguments, 1);

		return this.each(function() {
			var $this = $(this),
				data = $this.data('owl.carousel');

			if (!data) {
				data = new Owl(this, typeof option == 'object' && option);
				$this.data('owl.carousel', data);

				$.each([
					'next', 'prev', 'to', 'destroy', 'refresh', 'replace', 'add', 'remove'
				], function(i, event) {
					data.register({ type: Owl.Type.Event, name: event });
					data.$element.on(event + '.owl.carousel.core', $.proxy(function(e) {
						if (e.namespace && e.relatedTarget !== this) {
							this.suppress([ event ]);
							data[event].apply(this, [].slice.call(arguments, 1));
							this.release([ event ]);
						}
					}, data));
				});
			}

			if (typeof option == 'string' && option.charAt(0) !== '_') {
				data[option].apply(data, args);
			}
		});
	};

	/**
	 * The constructor for the jQuery Plugin
	 * @public
	 */
	$.fn.owlCarousel.Constructor = Owl;

})(window.Zepto || window.jQuery, window, document);

/**
 * AutoRefresh Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the auto refresh plugin.
	 * @class The Auto Refresh Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var AutoRefresh = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Refresh interval.
		 * @protected
		 * @type {number}
		 */
		this._interval = null;

		/**
		 * Whether the element is currently visible or not.
		 * @protected
		 * @type {Boolean}
		 */
		this._visible = null;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoRefresh) {
					this.watch();
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, AutoRefresh.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	AutoRefresh.Defaults = {
		autoRefresh: true,
		autoRefreshInterval: 500
	};

	/**
	 * Watches the element.
	 */
	AutoRefresh.prototype.watch = function() {
		if (this._interval) {
			return;
		}

		this._visible = this._core.$element.is(':visible');
		this._interval = window.setInterval($.proxy(this.refresh, this), this._core.settings.autoRefreshInterval);
	};

	/**
	 * Refreshes the element.
	 */
	AutoRefresh.prototype.refresh = function() {
		if (this._core.$element.is(':visible') === this._visible) {
			return;
		}

		this._visible = !this._visible;

		this._core.$element.toggleClass('owl-hidden', !this._visible);

		this._visible && (this._core.invalidate('width') && this._core.refresh());
	};

	/**
	 * Destroys the plugin.
	 */
	AutoRefresh.prototype.destroy = function() {
		var handler, property;

		window.clearInterval(this._interval);

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.AutoRefresh = AutoRefresh;

})(window.Zepto || window.jQuery, window, document);

/**
 * Lazy Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the lazy plugin.
	 * @class The Lazy Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Lazy = function(carousel) {

		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Already loaded items.
		 * @protected
		 * @type {Array.<jQuery>}
		 */
		this._loaded = [];

		/**
		 * Event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel change.owl.carousel resized.owl.carousel': $.proxy(function(e) {
				if (!e.namespace) {
					return;
				}

				if (!this._core.settings || !this._core.settings.lazyLoad) {
					return;
				}

				if ((e.property && e.property.name == 'position') || e.type == 'initialized') {
					var settings = this._core.settings,
						n = (settings.center && Math.ceil(settings.items / 2) || settings.items),
						i = ((settings.center && n * -1) || 0),
						position = (e.property && e.property.value !== undefined ? e.property.value : this._core.current()) + i,
						clones = this._core.clones().length,
						load = $.proxy(function(i, v) { this.load(v) }, this);

					while (i++ < n) {
						this.load(clones / 2 + this._core.relative(position));
						clones && $.each(this._core.clones(this._core.relative(position)), load);
						position++;
					}
				}
			}, this)
		};

		// set the default options
		this._core.options = $.extend({}, Lazy.Defaults, this._core.options);

		// register event handler
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	Lazy.Defaults = {
		lazyLoad: false
	};

	/**
	 * Loads all resources of an item at the specified position.
	 * @param {Number} position - The absolute position of the item.
	 * @protected
	 */
	Lazy.prototype.load = function(position) {
		var $item = this._core.$stage.children().eq(position),
			$elements = $item && $item.find('.owl-lazy');

		if (!$elements || $.inArray($item.get(0), this._loaded) > -1) {
			return;
		}

		$elements.each($.proxy(function(index, element) {
			var $element = $(element), image,
				url = (window.devicePixelRatio > 1 && $element.attr('data-src-retina')) || $element.attr('data-src');

			this._core.trigger('load', { element: $element, url: url }, 'lazy');

			if ($element.is('img')) {
				$element.one('load.owl.lazy', $.proxy(function() {
					$element.css('opacity', 1);
					this._core.trigger('loaded', { element: $element, url: url }, 'lazy');
				}, this)).attr('src', url);
			} else {
				image = new Image();
				image.onload = $.proxy(function() {
					$element.css({
						'background-image': 'url("' + url + '")',
						'opacity': '1'
					});
					this._core.trigger('loaded', { element: $element, url: url }, 'lazy');
				}, this);
				image.src = url;
			}
		}, this));

		this._loaded.push($item.get(0));
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Lazy.prototype.destroy = function() {
		var handler, property;

		for (handler in this.handlers) {
			this._core.$element.off(handler, this.handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Lazy = Lazy;

})(window.Zepto || window.jQuery, window, document);

/**
 * AutoHeight Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the auto height plugin.
	 * @class The Auto Height Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var AutoHeight = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight) {
					this.update();
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight && e.property.name == 'position'){
					this.update();
				}
			}, this),
			'loaded.owl.lazy': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight
					&& e.element.closest('.' + this._core.settings.itemClass).index() === this._core.current()) {
					this.update();
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, AutoHeight.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	AutoHeight.Defaults = {
		autoHeight: false,
		autoHeightClass: 'owl-height'
	};

	/**
	 * Updates the view.
	 */
	AutoHeight.prototype.update = function() {
		var start = this._core._current,
			end = start + this._core.settings.items,
			visible = this._core.$stage.children().toArray().slice(start, end),
			heights = [],
			maxheight = 0;

		$.each(visible, function(index, item) {
			heights.push($(item).height());
		});

		maxheight = Math.max.apply(null, heights);

		this._core.$stage.parent()
			.height(maxheight)
			.addClass(this._core.settings.autoHeightClass);
	};

	AutoHeight.prototype.destroy = function() {
		var handler, property;

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.AutoHeight = AutoHeight;

})(window.Zepto || window.jQuery, window, document);

/**
 * Video Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the video plugin.
	 * @class The Video Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Video = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Cache all video URLs.
		 * @protected
		 * @type {Object}
		 */
		this._videos = {};

		/**
		 * Current playing item.
		 * @protected
		 * @type {jQuery}
		 */
		this._playing = null;

		/**
		 * All event handlers.
		 * @todo The cloned content removale is too late
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					this._core.register({ type: 'state', name: 'playing', tags: [ 'interacting' ] });
				}
			}, this),
			'resize.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.video && this.isInFullScreen()) {
					e.preventDefault();
				}
			}, this),
			'refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.is('resizing')) {
					this._core.$stage.find('.cloned .owl-video-frame').remove();
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'position' && this._playing) {
					this.stop();
				}
			}, this),
			'prepared.owl.carousel': $.proxy(function(e) {
				if (!e.namespace) {
					return;
				}

				var $element = $(e.content).find('.owl-video');

				if ($element.length) {
					$element.css('display', 'none');
					this.fetch($element, $(e.content));
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Video.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);

		this._core.$element.on('click.owl.video', '.owl-video-play-icon', $.proxy(function(e) {
			this.play(e);
		}, this));
	};

	/**
	 * Default options.
	 * @public
	 */
	Video.Defaults = {
		video: false,
		videoHeight: false,
		videoWidth: false
	};

	/**
	 * Gets the video ID and the type (YouTube/Vimeo/vzaar only).
	 * @protected
	 * @param {jQuery} target - The target containing the video data.
	 * @param {jQuery} item - The item containing the video.
	 */
	Video.prototype.fetch = function(target, item) {
			var type = (function() {
					if (target.attr('data-vimeo-id')) {
						return 'vimeo';
					} else if (target.attr('data-vzaar-id')) {
						return 'vzaar'
					} else {
						return 'youtube';
					}
				})(),
				id = target.attr('data-vimeo-id') || target.attr('data-youtube-id') || target.attr('data-vzaar-id'),
				width = target.attr('data-width') || this._core.settings.videoWidth,
				height = target.attr('data-height') || this._core.settings.videoHeight,
				url = target.attr('href');

		if (url) {

			/*
					Parses the id's out of the following urls (and probably more):
					https://www.youtube.com/watch?v=:id
					https://youtu.be/:id
					https://vimeo.com/:id
					https://vimeo.com/channels/:channel/:id
					https://vimeo.com/groups/:group/videos/:id
					https://app.vzaar.com/videos/:id

					Visual example: https://regexper.com/#(http%3A%7Chttps%3A%7C)%5C%2F%5C%2F(player.%7Cwww.%7Capp.)%3F(vimeo%5C.com%7Cyoutu(be%5C.com%7C%5C.be%7Cbe%5C.googleapis%5C.com)%7Cvzaar%5C.com)%5C%2F(video%5C%2F%7Cvideos%5C%2F%7Cembed%5C%2F%7Cchannels%5C%2F.%2B%5C%2F%7Cgroups%5C%2F.%2B%5C%2F%7Cwatch%5C%3Fv%3D%7Cv%5C%2F)%3F(%5BA-Za-z0-9._%25-%5D*)(%5C%26%5CS%2B)%3F
			*/

			id = url.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);

			if (id[3].indexOf('youtu') > -1) {
				type = 'youtube';
			} else if (id[3].indexOf('vimeo') > -1) {
				type = 'vimeo';
			} else if (id[3].indexOf('vzaar') > -1) {
				type = 'vzaar';
			} else {
				throw new Error('Video URL not supported.');
			}
			id = id[6];
		} else {
			throw new Error('Missing video URL.');
		}

		this._videos[url] = {
			type: type,
			id: id,
			width: width,
			height: height
		};

		item.attr('data-video', url);

		this.thumbnail(target, this._videos[url]);
	};

	/**
	 * Creates video thumbnail.
	 * @protected
	 * @param {jQuery} target - The target containing the video data.
	 * @param {Object} info - The video info object.
	 * @see `fetch`
	 */
	Video.prototype.thumbnail = function(target, video) {
		var tnLink,
			icon,
			path,
			dimensions = video.width && video.height ? 'style="width:' + video.width + 'px;height:' + video.height + 'px;"' : '',
			customTn = target.find('img'),
			srcType = 'src',
			lazyClass = '',
			settings = this._core.settings,
			create = function(path) {
				icon = '<div class="owl-video-play-icon"></div>';

				if (settings.lazyLoad) {
					tnLink = '<div class="owl-video-tn ' + lazyClass + '" ' + srcType + '="' + path + '"></div>';
				} else {
					tnLink = '<div class="owl-video-tn" style="opacity:1;background-image:url(' + path + ')"></div>';
				}
				target.after(tnLink);
				target.after(icon);
			};

		// wrap video content into owl-video-wrapper div
		target.wrap('<div class="owl-video-wrapper"' + dimensions + '></div>');

		if (this._core.settings.lazyLoad) {
			srcType = 'data-src';
			lazyClass = 'owl-lazy';
		}

		// custom thumbnail
		if (customTn.length) {
			create(customTn.attr(srcType));
			customTn.remove();
			return false;
		}

		if (video.type === 'youtube') {
			path = "//img.youtube.com/vi/" + video.id + "/hqdefault.jpg";
			create(path);
		} else if (video.type === 'vimeo') {
			$.ajax({
				type: 'GET',
				url: '//vimeo.com/api/v2/video/' + video.id + '.json',
				jsonp: 'callback',
				dataType: 'jsonp',
				success: function(data) {
					path = data[0].thumbnail_large;
					create(path);
				}
			});
		} else if (video.type === 'vzaar') {
			$.ajax({
				type: 'GET',
				url: '//vzaar.com/api/videos/' + video.id + '.json',
				jsonp: 'callback',
				dataType: 'jsonp',
				success: function(data) {
					path = data.framegrab_url;
					create(path);
				}
			});
		}
	};

	/**
	 * Stops the current video.
	 * @public
	 */
	Video.prototype.stop = function() {
		this._core.trigger('stop', null, 'video');
		this._playing.find('.owl-video-frame').remove();
		this._playing.removeClass('owl-video-playing');
		this._playing = null;
		this._core.leave('playing');
		this._core.trigger('stopped', null, 'video');
	};

	/**
	 * Starts the current video.
	 * @public
	 * @param {Event} event - The event arguments.
	 */
	Video.prototype.play = function(event) {
		var target = $(event.target),
			item = target.closest('.' + this._core.settings.itemClass),
			video = this._videos[item.attr('data-video')],
			width = video.width || '100%',
			height = video.height || this._core.$stage.height(),
			html;

		if (this._playing) {
			return;
		}

		this._core.enter('playing');
		this._core.trigger('play', null, 'video');

		item = this._core.items(this._core.relative(item.index()));

		this._core.reset(item.index());

		if (video.type === 'youtube') {
			html = '<iframe width="' + width + '" height="' + height + '" src="//www.youtube.com/embed/' +
				video.id + '?autoplay=1&rel=0&v=' + video.id + '" frameborder="0" allowfullscreen></iframe>';
		} else if (video.type === 'vimeo') {
			html = '<iframe src="//player.vimeo.com/video/' + video.id +
				'?autoplay=1" width="' + width + '" height="' + height +
				'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';
		} else if (video.type === 'vzaar') {
			html = '<iframe frameborder="0"' + 'height="' + height + '"' + 'width="' + width +
				'" allowfullscreen mozallowfullscreen webkitAllowFullScreen ' +
				'src="//view.vzaar.com/' + video.id + '/player?autoplay=true"></iframe>';
		}

		$('<div class="owl-video-frame">' + html + '</div>').insertAfter(item.find('.owl-video'));

		this._playing = item.addClass('owl-video-playing');
	};

	/**
	 * Checks whether an video is currently in full screen mode or not.
	 * @todo Bad style because looks like a readonly method but changes members.
	 * @protected
	 * @returns {Boolean}
	 */
	Video.prototype.isInFullScreen = function() {
		var element = document.fullscreenElement || document.mozFullScreenElement ||
				document.webkitFullscreenElement;

		return element && $(element).parent().hasClass('owl-video-frame');
	};

	/**
	 * Destroys the plugin.
	 */
	Video.prototype.destroy = function() {
		var handler, property;

		this._core.$element.off('click.owl.video');

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Video = Video;

})(window.Zepto || window.jQuery, window, document);

/**
 * Animate Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the animate plugin.
	 * @class The Navigation Plugin
	 * @param {Owl} scope - The Owl Carousel
	 */
	var Animate = function(scope) {
		this.core = scope;
		this.core.options = $.extend({}, Animate.Defaults, this.core.options);
		this.swapping = true;
		this.previous = undefined;
		this.next = undefined;

		this.handlers = {
			'change.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name == 'position') {
					this.previous = this.core.current();
					this.next = e.property.value;
				}
			}, this),
			'drag.owl.carousel dragged.owl.carousel translated.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					this.swapping = e.type == 'translated';
				}
			}, this),
			'translate.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this.swapping && (this.core.options.animateOut || this.core.options.animateIn)) {
					this.swap();
				}
			}, this)
		};

		this.core.$element.on(this.handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	Animate.Defaults = {
		animateOut: false,
		animateIn: false
	};

	/**
	 * Toggles the animation classes whenever an translations starts.
	 * @protected
	 * @returns {Boolean|undefined}
	 */
	Animate.prototype.swap = function() {

		if (this.core.settings.items !== 1) {
			return;
		}

		if (!$.support.animation || !$.support.transition) {
			return;
		}

		this.core.speed(0);

		var left,
			clear = $.proxy(this.clear, this),
			previous = this.core.$stage.children().eq(this.previous),
			next = this.core.$stage.children().eq(this.next),
			incoming = this.core.settings.animateIn,
			outgoing = this.core.settings.animateOut;

		if (this.core.current() === this.previous) {
			return;
		}

		if (outgoing) {
			left = this.core.coordinates(this.previous) - this.core.coordinates(this.next);
			previous.one($.support.animation.end, clear)
				.css( { 'left': left + 'px' } )
				.addClass('animated owl-animated-out')
				.addClass(outgoing);
		}

		if (incoming) {
			next.one($.support.animation.end, clear)
				.addClass('animated owl-animated-in')
				.addClass(incoming);
		}
	};

	Animate.prototype.clear = function(e) {
		$(e.target).css( { 'left': '' } )
			.removeClass('animated owl-animated-out owl-animated-in')
			.removeClass(this.core.settings.animateIn)
			.removeClass(this.core.settings.animateOut);
		this.core.onTransitionEnd();
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Animate.prototype.destroy = function() {
		var handler, property;

		for (handler in this.handlers) {
			this.core.$element.off(handler, this.handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Animate = Animate;

})(window.Zepto || window.jQuery, window, document);

/**
 * Autoplay Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the autoplay plugin.
	 * @class The Autoplay Plugin
	 * @param {Owl} scope - The Owl Carousel
	 */
	var Autoplay = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * The autoplay timeout.
		 * @type {Timeout}
		 */
		this._timeout = null;

		/**
		 * Indicates whenever the autoplay is paused.
		 * @type {Boolean}
		 */
		this._paused = false;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'settings') {
					if (this._core.settings.autoplay) {
						this.play();
					} else {
						this.stop();
					}
				} else if (e.namespace && e.property.name === 'position') {
					//console.log('play?', e);
					if (this._core.settings.autoplay) {
						this._setAutoPlayInterval();
					}
				}
			}, this),
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoplay) {
					this.play();
				}
			}, this),
			'play.owl.autoplay': $.proxy(function(e, t, s) {
				if (e.namespace) {
					this.play(t, s);
				}
			}, this),
			'stop.owl.autoplay': $.proxy(function(e) {
				if (e.namespace) {
					this.stop();
				}
			}, this),
			'mouseover.owl.autoplay': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.pause();
				}
			}, this),
			'mouseleave.owl.autoplay': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.play();
				}
			}, this),
			'touchstart.owl.core': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.pause();
				}
			}, this),
			'touchend.owl.core': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause) {
					this.play();
				}
			}, this)
		};

		// register event handlers
		this._core.$element.on(this._handlers);

		// set default options
		this._core.options = $.extend({}, Autoplay.Defaults, this._core.options);
	};

	/**
	 * Default options.
	 * @public
	 */
	Autoplay.Defaults = {
		autoplay: false,
		autoplayTimeout: 5000,
		autoplayHoverPause: false,
		autoplaySpeed: false
	};

	/**
	 * Starts the autoplay.
	 * @public
	 * @param {Number} [timeout] - The interval before the next animation starts.
	 * @param {Number} [speed] - The animation speed for the animations.
	 */
	Autoplay.prototype.play = function(timeout, speed) {
		this._paused = false;

		if (this._core.is('rotating')) {
			return;
		}

		this._core.enter('rotating');

		this._setAutoPlayInterval();
	};

	/**
	 * Gets a new timeout
	 * @private
	 * @param {Number} [timeout] - The interval before the next animation starts.
	 * @param {Number} [speed] - The animation speed for the animations.
	 * @return {Timeout}
	 */
	Autoplay.prototype._getNextTimeout = function(timeout, speed) {
		if ( this._timeout ) {
			window.clearTimeout(this._timeout);
		}
		return window.setTimeout($.proxy(function() {
			if (this._paused || this._core.is('busy') || this._core.is('interacting') || document.hidden) {
				return;
			}
			this._core.next(speed || this._core.settings.autoplaySpeed);
		}, this), timeout || this._core.settings.autoplayTimeout);
	};

	/**
	 * Sets autoplay in motion.
	 * @private
	 */
	Autoplay.prototype._setAutoPlayInterval = function() {
		this._timeout = this._getNextTimeout();
	};

	/**
	 * Stops the autoplay.
	 * @public
	 */
	Autoplay.prototype.stop = function() {
		if (!this._core.is('rotating')) {
			return;
		}

		window.clearTimeout(this._timeout);
		this._core.leave('rotating');
	};

	/**
	 * Stops the autoplay.
	 * @public
	 */
	Autoplay.prototype.pause = function() {
		if (!this._core.is('rotating')) {
			return;
		}

		this._paused = true;
	};

	/**
	 * Destroys the plugin.
	 */
	Autoplay.prototype.destroy = function() {
		var handler, property;

		this.stop();

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.autoplay = Autoplay;

})(window.Zepto || window.jQuery, window, document);

/**
 * Navigation Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {
	'use strict';

	/**
	 * Creates the navigation plugin.
	 * @class The Navigation Plugin
	 * @param {Owl} carousel - The Owl Carousel.
	 */
	var Navigation = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Indicates whether the plugin is initialized or not.
		 * @protected
		 * @type {Boolean}
		 */
		this._initialized = false;

		/**
		 * The current paging indexes.
		 * @protected
		 * @type {Array}
		 */
		this._pages = [];

		/**
		 * All DOM elements of the user interface.
		 * @protected
		 * @type {Object}
		 */
		this._controls = {};

		/**
		 * Markup for an indicator.
		 * @protected
		 * @type {Array.<String>}
		 */
		this._templates = [];

		/**
		 * The carousel element.
		 * @type {jQuery}
		 */
		this.$element = this._core.$element;

		/**
		 * Overridden methods of the carousel.
		 * @protected
		 * @type {Object}
		 */
		this._overrides = {
			next: this._core.next,
			prev: this._core.prev,
			to: this._core.to
		};

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'prepared.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.push('<div class="' + this._core.settings.dotClass + '">' +
						$(e.content).find('[data-dot]').addBack('[data-dot]').attr('data-dot') + '</div>');
				}
			}, this),
			'added.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.splice(e.position, 0, this._templates.pop());
				}
			}, this),
			'remove.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.splice(e.position, 1);
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name == 'position') {
					this.draw();
				}
			}, this),
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && !this._initialized) {
					this._core.trigger('initialize', null, 'navigation');
					this.initialize();
					this.update();
					this.draw();
					this._initialized = true;
					this._core.trigger('initialized', null, 'navigation');
				}
			}, this),
			'refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._initialized) {
					this._core.trigger('refresh', null, 'navigation');
					this.update();
					this.draw();
					this._core.trigger('refreshed', null, 'navigation');
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Navigation.Defaults, this._core.options);

		// register event handlers
		this.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 * @todo Rename `slideBy` to `navBy`
	 */
	Navigation.Defaults = {
		nav: false,
		navText: [ 'prev', 'next' ],
		navSpeed: false,
		navElement: 'div',
		navContainer: false,
		navContainerClass: 'owl-nav',
		navClass: [ 'owl-prev', 'owl-next' ],
		slideBy: 1,
		dotClass: 'owl-dot',
		dotsClass: 'owl-dots',
		dots: true,
		dotsEach: false,
		dotsData: false,
		dotsSpeed: false,
		dotsContainer: false
	};

	/**
	 * Initializes the layout of the plugin and extends the carousel.
	 * @protected
	 */
	Navigation.prototype.initialize = function() {
		var override,
			settings = this._core.settings;

		// create DOM structure for relative navigation
		this._controls.$relative = (settings.navContainer ? $(settings.navContainer)
			: $('<div>').addClass(settings.navContainerClass).appendTo(this.$element)).addClass('anyClass');

		this._controls.$previous = $('<' + settings.navElement + '>')
			.addClass(settings.navClass[0])
			.html(settings.navText[0])
			.prependTo(this._controls.$relative)
			.on('click', $.proxy(function(e) {
				this.prev(settings.navSpeed);
			}, this));
		this._controls.$next = $('<' + settings.navElement + '>')
			.addClass(settings.navClass[1])
			.html(settings.navText[1])
			.appendTo(this._controls.$relative)
			.on('click', $.proxy(function(e) {
				this.next(settings.navSpeed);
			}, this));

		// create DOM structure for absolute navigation
		if (!settings.dotsData) {
			this._templates = [ $('<div>')
				.addClass(settings.dotClass)
				.append($('<span>'))
				.prop('outerHTML') ];
		}

		this._controls.$absolute = (settings.dotsContainer ? $(settings.dotsContainer)
			: $('<div>').addClass(settings.dotsClass).appendTo(this.$element)).addClass('anyClass');

		this._controls.$absolute.on('click', 'div', $.proxy(function(e) {
			var index = $(e.target).parent().is(this._controls.$absolute)
				? $(e.target).index() : $(e.target).parent().index();

			e.preventDefault();

			this.to(index, settings.dotsSpeed);
		}, this));

		// override public methods of the carousel
		for (override in this._overrides) {
			this._core[override] = $.proxy(this[override], this);
		}
	};

	/**
	 * Destroys the plugin.
	 * @protected
	 */
	Navigation.prototype.destroy = function() {
		var handler, control, property, override;

		for (handler in this._handlers) {
			this.$element.off(handler, this._handlers[handler]);
		}
		for (control in this._controls) {
			this._controls[control].remove();
		}
		for (override in this.overides) {
			this._core[override] = this._overrides[override];
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	/**
	 * Updates the internal state.
	 * @protected
	 */
	Navigation.prototype.update = function() {
		var i, j, k,
			lower = this._core.clones().length / 2,
			upper = lower + this._core.items().length,
			maximum = this._core.maximum(true),
			settings = this._core.settings,
			size = settings.center || settings.autoWidth || settings.dotsData
				? 1 : settings.dotsEach || settings.items;

		if (settings.slideBy !== 'page') {
			settings.slideBy = Math.min(settings.slideBy, settings.items);
		}

		if (settings.dots || settings.slideBy == 'page') {
			this._pages = [];

			for (i = lower, j = 0, k = 0; i < upper; i++) {
				if (j >= size || j === 0) {
					this._pages.push({
						start: Math.min(maximum, i - lower),
						end: i - lower + size - 1
					});
					if (Math.min(maximum, i - lower) === maximum) {
						break;
					}
					j = 0, ++k;
				}
				j += this._core.mergers(this._core.relative(i));
			}
		}
	};

	/**
	 * Draws the user interface.
	 * @todo The option `dotsData` wont work.
	 * @protected
	 */
	Navigation.prototype.draw = function() {
		var difference,
			settings = this._core.settings,
            anyClass = this._core.items().length <= settings.items,
			index = this._core.relative(this._core.current()),
			loop = settings.loop || settings.rewind;

		this._controls.$relative.toggleClass('anyClass', !settings.nav || anyClass);

		if (settings.nav) {
			this._controls.$previous.toggleClass('anyClass', !loop && index <= this._core.minimum(true));
			this._controls.$next.toggleClass('anyClass', !loop && index >= this._core.maximum(true));
		}

		this._controls.$absolute.toggleClass('anyClass', !settings.dots || anyClass);

		if (settings.dots) {
			difference = this._pages.length - this._controls.$absolute.children().length;

			if (settings.dotsData && difference !== 0) {
				this._controls.$absolute.html(this._templates.join(''));
			} else if (difference > 0) {
				this._controls.$absolute.append(new Array(difference + 1).join(this._templates[0]));
			} else if (difference < 0) {
				this._controls.$absolute.children().slice(difference).remove();
			}

			this._controls.$absolute.find('.active').removeClass('active');
			this._controls.$absolute.children().eq($.inArray(this.current(), this._pages)).addClass('active');
		}
	};

	/**
	 * Extends event data.
	 * @protected
	 * @param {Event} event - The event object which gets thrown.
	 */
	Navigation.prototype.onTrigger = function(event) {
		var settings = this._core.settings;

		event.page = {
			index: $.inArray(this.current(), this._pages),
			count: this._pages.length,
			size: settings && (settings.center || settings.autoWidth || settings.dotsData
				? 1 : settings.dotsEach || settings.items)
		};
	};

	/**
	 * Gets the current page position of the carousel.
	 * @protected
	 * @returns {Number}
	 */
	Navigation.prototype.current = function() {
		var current = this._core.relative(this._core.current());
		return $.grep(this._pages, $.proxy(function(page, index) {
			return page.start <= current && page.end >= current;
		}, this)).pop();
	};

	/**
	 * Gets the current succesor/predecessor position.
	 * @protected
	 * @returns {Number}
	 */
	Navigation.prototype.getPosition = function(successor) {
		var position, length,
			settings = this._core.settings;

		if (settings.slideBy == 'page') {
			position = $.inArray(this.current(), this._pages);
			length = this._pages.length;
			successor ? ++position : --position;
			position = this._pages[((position % length) + length) % length].start;
		} else {
			position = this._core.relative(this._core.current());
			length = this._core.items().length;
			successor ? position += settings.slideBy : position -= settings.slideBy;
		}

		return position;
	};

	/**
	 * Slides to the next item or page.
	 * @public
	 * @param {Number} [speed=false] - The time in milliseconds for the transition.
	 */
	Navigation.prototype.next = function(speed) {
		$.proxy(this._overrides.to, this._core)(this.getPosition(true), speed);
	};

	/**
	 * Slides to the previous item or page.
	 * @public
	 * @param {Number} [speed=false] - The time in milliseconds for the transition.
	 */
	Navigation.prototype.prev = function(speed) {
		$.proxy(this._overrides.to, this._core)(this.getPosition(false), speed);
	};

	/**
	 * Slides to the specified item or page.
	 * @public
	 * @param {Number} position - The position of the item or page.
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 * @param {Boolean} [standard=false] - Whether to use the standard behaviour or not.
	 */
	Navigation.prototype.to = function(position, speed, standard) {
		var length;

		if (!standard && this._pages.length) {
			length = this._pages.length;
			$.proxy(this._overrides.to, this._core)(this._pages[((position % length) + length) % length].start, speed);
		} else {
			$.proxy(this._overrides.to, this._core)(position, speed);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Navigation = Navigation;

})(window.Zepto || window.jQuery, window, document);

/**
 * Hash Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {
	'use strict';

	/**
	 * Creates the hash plugin.
	 * @class The Hash Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Hash = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Hash index for the items.
		 * @protected
		 * @type {Object}
		 */
		this._hashes = {};

		/**
		 * The carousel element.
		 * @type {jQuery}
		 */
		this.$element = this._core.$element;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.startPosition === 'URLHash') {
					$(window).trigger('hashchange.owl.navigation');
				}
			}, this),
			'prepared.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					var hash = $(e.content).find('[data-hash]').addBack('[data-hash]').attr('data-hash');

					if (!hash) {
						return;
					}

					this._hashes[hash] = e.content;
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'position') {
					var current = this._core.items(this._core.relative(this._core.current())),
						hash = $.map(this._hashes, function(item, hash) {
							return item === current ? hash : null;
						}).join();

					if (!hash || window.location.hash.slice(1) === hash) {
						return;
					}

					window.location.hash = hash;
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Hash.Defaults, this._core.options);

		// register the event handlers
		this.$element.on(this._handlers);

		// register event listener for hash navigation
		$(window).on('hashchange.owl.navigation', $.proxy(function(e) {
			var hash = window.location.hash.substring(1),
				items = this._core.$stage.children(),
				position = this._hashes[hash] && items.index(this._hashes[hash]);

			if (position === undefined || position === this._core.current()) {
				return;
			}

			this._core.to(this._core.relative(position), false, true);
		}, this));
	};

	/**
	 * Default options.
	 * @public
	 */
	Hash.Defaults = {
		URLhashListener: false
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Hash.prototype.destroy = function() {
		var handler, property;

		$(window).off('hashchange.owl.navigation');

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Hash = Hash;

})(window.Zepto || window.jQuery, window, document);

/**
 * Support Plugin
 *
 * @version 2.1.0
 * @author Vivid Planet Software GmbH
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	var style = $('<support>').get(0).style,
		prefixes = 'Webkit Moz O ms'.split(' '),
		events = {
			transition: {
				end: {
					WebkitTransition: 'webkitTransitionEnd',
					MozTransition: 'transitionend',
					OTransition: 'oTransitionEnd',
					transition: 'transitionend'
				}
			},
			animation: {
				end: {
					WebkitAnimation: 'webkitAnimationEnd',
					MozAnimation: 'animationend',
					OAnimation: 'oAnimationEnd',
					animation: 'animationend'
				}
			}
		},
		tests = {
			csstransforms: function() {
				return !!test('transform');
			},
			csstransforms3d: function() {
				return !!test('perspective');
			},
			csstransitions: function() {
				return !!test('transition');
			},
			cssanimations: function() {
				return !!test('animation');
			}
		};

	function test(property, prefixed) {
		var result = false,
			upper = property.charAt(0).toUpperCase() + property.slice(1);

		$.each((property + ' ' + prefixes.join(upper + ' ') + upper).split(' '), function(i, property) {
			if (style[property] !== undefined) {
				result = prefixed ? property : true;
				return false;
			}
		});

		return result;
	}

	function prefixed(property) {
		return test(property, true);
	}

	if (tests.csstransitions()) {
		/* jshint -W053 */
		$.support.transition = new String(prefixed('transition'))
		$.support.transition.end = events.transition.end[ $.support.transition ];
	}

	if (tests.cssanimations()) {
		/* jshint -W053 */
		$.support.animation = new String(prefixed('animation'))
		$.support.animation.end = events.animation.end[ $.support.animation ];
	}

	if (tests.csstransforms()) {
		/* jshint -W053 */
		$.support.transform = new String(prefixed('transform'));
		$.support.transform3d = tests.csstransforms3d();
	}

})(window.Zepto || window.jQuery, window, document);

/*!
 * jquery.sumoselect - v3.0.2
 * http://hemantnegi.github.io/jquery.sumoselect
 * 2014-04-08
 *
 * Copyright 2015 Hemant Negi
 * Email : hemant.frnz@gmail.com
 * Compressor http://refresh-sf.com/
 */

(function ($) {

    'namespace sumo';
    $.fn.SumoSelect = function (options) {

        // This is the easiest way to have default options.
        var settings = $.extend({
            placeholder: '',   // Dont change it here.
            csvDispCount: 3,              // display no. of items in multiselect. 0 to display all.
            captionFormat:'{0} Selected', // format of caption text. you can set your locale.
            captionFormatAllSelected:'{0} all selected!', // format of caption text when all elements are selected. set null to use captionFormat. It will not work if there are disabled elements in select.
            floatWidth: 400,              // Screen width of device at which the list is rendered in floating popup fashion.
            forceCustomRendering: false,  // force the custom modal on all devices below floatWidth resolution.
            nativeOnDevice: ['Android', 'BlackBerry', 'iPhone', 'iPad', 'iPod', 'Opera Mini', 'IEMobile', 'Silk'], //
            outputAsCSV: false,           // true to POST data as csv ( false for Html control array ie. default select )
            csvSepChar: ',',              // separation char in csv mode
            okCancelInMulti: false,       // display ok cancel buttons in desktop mode multiselect also.
            triggerChangeCombined: true,  // im multi select mode wether to trigger change event on individual selection or combined selection.
            selectAll: false,             // to display select all button in multiselect mode.|| also select all will not be available on mobile devices.

            search: false,                // to display input for filtering content. selectAlltext will be input text placeholder
            searchText: 'Search...',      // placeholder for search input
            noMatch: 'No matches for "{0}"',
            prefix: '',                   // some prefix usually the field name. eg. '<b>Hello</b>'
            locale: ['OK', 'Cancel', 'Select All'],  // all text that is used. don't change the index.
            up: false                     // set true to open upside.
        }, options);

        var ret = this.each(function () {
            var selObj = this; // the original select object.
            if (this.sumo || !$(this).is('select')) return; //already initialized

            this.sumo = {
                E: $(selObj),   //the jquery object of original select element.
                is_multi: $(selObj).attr('multiple'),  //if its a multiple select
                select: '',
                caption: '',
                placeholder: '',
                optDiv: '',
                CaptionCont: '',
                ul:'',
                is_floating: false,
                is_opened: false,
                //backdrop: '',
                mob:false, // if to open device default select
                Pstate: [],

                createElems: function () {
                    var O = this;
                    O.E.wrap('<div class="SumoSelect" tabindex="0">');
                    O.select = O.E.parent();
                    O.caption = $('<span>');
                    O.CaptionCont = $('<p class="CaptionCont"><label><i></i></label></p>').addClass('SelectBox').attr('style', O.E.attr('style')).prepend(O.caption);
                    O.select.append(O.CaptionCont);

                    // default turn off if no multiselect
                    if(!O.is_multi)settings.okCancelInMulti = false

                    if(O.E.attr('disabled'))
                        O.select.addClass('disabled').removeAttr('tabindex');

                    //if output as csv and is a multiselect.
                    if (settings.outputAsCSV && O.is_multi && O.E.attr('name')) {
                        //create a hidden field to store csv value.
                        O.select.append($('<input class="HEMANT123" type="hidden" />').attr('name', O.E.attr('name')).val(O.getSelStr()));

                        // so it can not post the original select.
                        O.E.removeAttr('name');
                    }

                    //break for mobile rendring.. if forceCustomRendering is false
                    if (O.isMobile() && !settings.forceCustomRendering) {
                        O.setNativeMobile();
                        return;
                    }

                    // if there is a name attr in select add a class to container div
                    if(O.E.attr('name')) O.select.addClass('sumo_'+O.E.attr('name'))

                    //hide original select
                    O.E.addClass('SumoUnder').attr('tabindex','-1');

                    //## Creating the list...
                    O.optDiv = $('<div class="optWrapper '+ (settings.up?'up':'') +'">');

                    //branch for floating list in low res devices.
                    O.floatingList();

                    //Creating the markup for the available options
                    O.ul = $('<ul class="options">');
                    O.optDiv.append(O.ul);

                    // Select all functionality
                    if(settings.selectAll) O.SelAll();

                    // search functionality
                    if(settings.search) O.Search();

                    O.ul.append(O.prepItems(O.E.children()));

                    //if multiple then add the class multiple and add OK / CANCEL button
                    if (O.is_multi) O.multiSelelect();

                    O.select.append(O.optDiv);
                    O.basicEvents();
                    O.selAllState();
                },

                prepItems: function(opts, d){
                    var lis = [], O=this;
                    $(opts).each(function (i, opt) {       // parsing options to li
                        opt = $(opt);
                        lis.push(opt.is('optgroup')?
                            $('<li class="group '+ (opt[0].disabled?'disabled':'') +'"><label>' + opt.attr('label') +'</label><ul></ul><li>')
                            .find('ul')
                            .append(O.prepItems(opt.children(), opt[0].disabled))
                            .end()
                            :
                            O.createLi(opt, d)
                            );
                    });
                    return lis;
                },

                //## Creates a LI element from a given option and binds events to it
                //## returns the jquery instance of li (not inserted in dom)
                createLi: function (opt, d) {
                    var O = this;

                    if(!opt.attr('value'))opt.attr('value',opt.val());
                                                                                    // todo: remove this data val 
                    li = $('<li class="opt"><label>' + opt.text() + '</label></li>');//.data('val',opt.val());
                    li.data('opt', opt);    // store a direct reference to option.
                    opt.data('li', li);    // store a direct reference to list item.
                    if (O.is_multi) li.prepend('<span><i></i></span>');

                    if (opt[0].disabled || d)
                        li = li.addClass('disabled');

                    O.onOptClick(li);

                    if (opt[0].selected)
                        li.addClass('selected');

                    if (opt.attr('class'))
                        li.addClass(opt.attr('class'));

                    return li;
                },

                //## Returns the selected items as string in a Multiselect.
                getSelStr: function () {
                    // get the pre selected items.
                    sopt = [];
                    this.E.find('option:selected').each(function () { sopt.push($(this).val()); });
                    return sopt.join(settings.csvSepChar);
                },

                //## THOSE OK/CANCEL BUTTONS ON MULTIPLE SELECT.
                multiSelelect: function () {
                    var O = this;
                    O.optDiv.addClass('multiple');
                    O.okbtn = $('<p class="btnOk">'+settings.locale[0]+'</p>').click(function () {

                        //if combined change event is set.
                        if (settings.triggerChangeCombined) {

                            //check for a change in the selection.
                            changed = false;
                            if (O.E.find('option:selected').length != O.Pstate.length) {
                                changed = true;
                            }
                            else {
                                O.E.find('option').each(function (i,e) {
                                    if(e.selected && O.Pstate.indexOf(i) < 0) changed = true;
                                });
                            }

                            if (changed) {
                                O.callChange();
                                O.setText();
                            }
                        }
                        O.hideOpts();
                    });
                    O.cancelBtn = $('<p class="btnCancel">'+settings.locale[1]+'</p>').click(function () {
                        O._cnbtn();
                        O.hideOpts();
                    });
                    O.optDiv.append($('<div class="MultiControls">').append(O.okbtn).append(O.cancelBtn));
                },

                _cnbtn:function(){
                    var O = this;
                    //remove all selections
                        O.E.find('option:selected').each(function () { this.selected = false; });
                        O.optDiv.find('li.selected').removeClass('selected')

                        //restore selections from saved state.
                        for(var i = 0; i < O.Pstate.length; i++) {
                            O.E.find('option')[O.Pstate[i]].selected = true;
                            O.ul.find('li.opt').eq(O.Pstate[i]).addClass('selected');
                        }
                    O.selAllState();
                },

                SelAll:function(){
                    var O = this;
                    if(!O.is_multi)return;
                    O.selAll = $('<p class="select-all"><span><i></i></span><label>' + settings.locale[2] + '</label></p>');
                    O.selAll.on('click',function(){
						//O.toggSelAll(!);
						O.selAll.toggleClass('selected');
						O.optDiv.find('li.opt').not('.hidden').each(function(ix,e){
							e = $(e);
							if(O.selAll.hasClass('selected')){
								if(!e.hasClass('selected'))e.trigger('click');
							}
							else
								if(e.hasClass('selected'))e.trigger('click');
						});
					});

                    O.optDiv.prepend(O.selAll);
                },

                // search module (can be removed if not required.)
                Search: function(){
                    var O = this,
                        cc = O.CaptionCont.addClass('search'),
                        P = $('<p class="no-match">');

                    O.ftxt = $('<input type="text" class="search-txt" value="" placeholder="' + settings.searchText + '">')
                        .on('click', function(e){
                            e.stopPropagation();
                        });
                    cc.append(O.ftxt);
                    O.optDiv.children('ul').after(P);

                    O.ftxt.on('keyup.sumo',function(){
                        var hid = O.optDiv.find('ul.options li.opt').each(function(ix,e){
                            e = $(e);
                            if(e.text().toLowerCase().indexOf(O.ftxt.val().toLowerCase()) > -1)
                                e.removeClass('hidden');
                            else
                                e.addClass('hidden');
                        }).not('.hidden');

                        P.html(settings.noMatch.replace(/\{0\}/g, O.ftxt.val())).toggle(!hid.length);

                        O.selAllState();
                    });
                },

                selAllState: function () {
                    var O = this;
                    if (settings.selectAll) {
                        var sc = 0, vc = 0;
                        O.optDiv.find('li.opt').not('.hidden').each(function (ix, e) {
                            if ($(e).hasClass('selected')) sc++;
                            if (!$(e).hasClass('disabled')) vc++;
                        });
                        //select all checkbox state change.
                        if (sc == vc) O.selAll.removeClass('partial').addClass('selected');
                        else if (sc == 0) O.selAll.removeClass('selected partial');
                        else O.selAll.addClass('partial')//.removeClass('selected');
                    }
                },

                showOpts: function () {
                    var O = this;
                    if (O.E.attr('disabled')) return; // if select is disabled then retrun
                    O.is_opened = true;
                    O.select.addClass('open');

                    if(O.ftxt)O.ftxt.focus();
                    else O.select.focus();

                    // hide options on click outside.
                    $(document).on('click.sumo', function (e) {
                        if (!O.select.is(e.target)                  // if the target of the click isn't the container...
                            && O.select.has(e.target).length === 0){ // ... nor a descendant of the container
                            if(!O.is_opened)return;
                            O.hideOpts();
                            if (settings.okCancelInMulti)O._cnbtn();
                        }
                    });

                    if (O.is_floating) {
                        H = O.optDiv.children('ul').outerHeight() + 2;  // +2 is clear fix
                        if (O.is_multi) H = H + parseInt(O.optDiv.css('padding-bottom'));
                        O.optDiv.css('height', H);
                        $('body').addClass('sumoStopScroll');
                    }

                    O.setPstate();
                },

                //maintain state when ok/cancel buttons are available storing the indexes.
                setPstate: function(){
                    var O = this;
                    if (O.is_multi && (O.is_floating || settings.okCancelInMulti)){
                        O.Pstate = [];
                        // assuming that find returns elements in tree order
                        O.E.find('option').each(function (i, e){if(e.selected) O.Pstate.push(i);});
                    }
                },

                callChange:function(){
                    this.E.trigger('change').trigger('click');
                },

                hideOpts: function () {
                    var O = this;
                    if(O.is_opened){
                        O.is_opened = false;
                        O.select.removeClass('open').find('ul li.sel').removeClass('sel');
                        $(document).off('click.sumo');
                        O.select.focus();
                        $('body').removeClass('sumoStopScroll');

                        // clear the search
                        if(settings.search){
                            O.ftxt.val('');
                            O.optDiv.find('ul.options li').removeClass('hidden');
                            O.optDiv.find('.no-match').toggle(false);
                        }
                    }
                 },
                setOnOpen: function () {
                    var O = this,
                        li = O.optDiv.find('li.opt:not(.hidden)').eq(settings.search?0:O.E[0].selectedIndex);

                    O.optDiv.find('li.sel').removeClass('sel');
                    li.addClass('sel');
                    O.showOpts();
                },
                nav: function (up) {
                    var O = this, c, 
                    s=O.ul.find('li.opt:not(.disabled, .hidden)'),
                    sel = O.ul.find('li.opt.sel:not(.hidden)'),
                    idx = s.index(sel);
                    if (O.is_opened && sel.length) {
                        
                        if (up && idx > 0)
                            c = s.eq(idx-1);
                        else if(!up && idx < s.length-1 && idx > -1)
                            c = s.eq(idx+1);
                        else return; // if no items before or after

                        sel.removeClass('sel');
                        sel = c.addClass('sel');

                        // setting sel item to visible view.
                        var ul = O.ul,
                            st = ul.scrollTop(),
                            t = sel.position().top + st;                            
                        if(t >= st + ul.height()-sel.outerHeight())
                            ul.scrollTop(t - ul.height() + sel.outerHeight());
                        if(t<st)
                            ul.scrollTop(t);

                    }
                    else
                        O.setOnOpen();
                },

                basicEvents: function () {
                    var O = this;
                    O.CaptionCont.click(function (evt) {
                        O.E.trigger('click');
                        if (O.is_opened) O.hideOpts(); else O.showOpts();
                        evt.stopPropagation();
                    });

                        O.select.on('keydown.sumo', function (e) {
                            switch (e.which) {
                                case 38: // up
                                    O.nav(true);
                                    break;

                                case 40: // down
                                    O.nav(false);
                                    break;

                                case 32: // space
                                    if(settings.search && O.ftxt.is(e.target))return;
                                case 13: // enter
                                    if (O.is_opened)
                                        O.optDiv.find('ul li.sel').trigger('click');
                                    else
                                        O.setOnOpen();
                                    break;
				                case 9:	 //tab
                                case 27: // esc
                                     if (settings.okCancelInMulti)O._cnbtn();
                                    O.hideOpts();
                                    return;

                                default:
                                    return; // exit this handler for other keys
                            }
                            e.preventDefault(); // prevent the default action (scroll / move caret)
                        });

                    $(window).on('resize.sumo', function () {
                        O.floatingList();
                    });
                },

                onOptClick: function (li) {
                    var O = this;
                    li.click(function () {
                        var li = $(this);
                        if(li.hasClass('disabled'))return;
                        txt = "";
                        if (O.is_multi) {
                            li.toggleClass('selected');
                            li.data('opt')[0].selected = li.hasClass('selected');
                            O.selAllState();
                        }
                        else {
                            li.parent().find('li.selected').removeClass('selected'); //if not multiselect then remove all selections from this list
                            li.toggleClass('selected');
                            li.data('opt')[0].selected = true;
                        }

                        //branch for combined change event.
                        if (!(O.is_multi && settings.triggerChangeCombined && (O.is_floating || settings.okCancelInMulti))) {
                            O.setText();
                            O.callChange();
                        }

                        if (!O.is_multi) O.hideOpts(); //if its not a multiselect then hide on single select.
                    });
                },

                setText: function () {
                    var O = this;
                    O.placeholder = "";
                    if (O.is_multi) {
                        sels = O.E.find(':selected').not(':disabled'); //selected options.

                        for (i = 0; i < sels.length; i++) {
                                if (i + 1 >= settings.csvDispCount && settings.csvDispCount) {
                                    if (sels.length == O.E.find('option').length && settings.captionFormatAllSelected) {
                                        O.placeholder = settings.captionFormatAllSelected.replace(/\{0\}/g, sels.length)+',';
                                    } else {
                                        O.placeholder = settings.captionFormat.replace(/\{0\}/g, sels.length)+',';
                                    }

                                    break;
                                }
                                else O.placeholder += $(sels[i]).text() + ", ";
                            }
                            O.placeholder = O.placeholder.replace(/,([^,]*)$/, '$1'); //remove unexpected "," from last.
                    }
                    else {
                        O.placeholder = O.E.find(':selected').not(':disabled').text();
                    }

                    is_placeholder = false;

                    if (!O.placeholder) {

                        is_placeholder = true;

                        O.placeholder = O.E.attr('placeholder');
                        if (!O.placeholder)                  //if placeholder is there then set it
                            O.placeholder = O.E.find('option:disabled:selected').text();
                    }

                    O.placeholder = O.placeholder ? (settings.prefix + ' ' + O.placeholder) : settings.placeholder

                    //set display text
                    O.caption.html(O.placeholder);
                    O.CaptionCont.attr('title', O.placeholder);

                    //set the hidden field if post as csv is true.
                    csvField = O.select.find('input.HEMANT123');
                    if (csvField.length) csvField.val(O.getSelStr());

                    //add class placeholder if its a placeholder text.
                    if (is_placeholder) O.caption.addClass('placeholder'); else O.caption.removeClass('placeholder');
                    return O.placeholder;
                },

                isMobile: function () {

                    // Adapted from http://www.detectmobilebrowsers.com
                    var ua = navigator.userAgent || navigator.vendor || window.opera;

                    // Checks for iOs, Android, Blackberry, Opera Mini, and Windows mobile devices
                    for (var i = 0; i < settings.nativeOnDevice.length; i++) if (ua.toString().toLowerCase().indexOf(settings.nativeOnDevice[i].toLowerCase()) > 0) return settings.nativeOnDevice[i];
                    return false;
                },

                setNativeMobile: function () {
                    var O = this;
                    O.E.addClass('SelectClass')//.css('height', O.select.outerHeight());
					O.mob = true;
                    O.E.change(function () {
                        O.setText();
                    });
                },

                floatingList: function () {
                    var O = this;
                    //called on init and also on resize.
                    //O.is_floating = true if window width is < specified float width
                    O.is_floating = $(window).width() <= settings.floatWidth;

                    //set class isFloating
                    O.optDiv.toggleClass('isFloating', O.is_floating);

                    //remove height if not floating
                    if (!O.is_floating) O.optDiv.css('height', '');

                    //toggle class according to okCancelInMulti flag only when it is not floating
                    O.optDiv.toggleClass('okCancelInMulti', settings.okCancelInMulti && !O.is_floating);
                },

                //HELPERS FOR OUTSIDERS
                // validates range of given item operations
                vRange: function (i) {
                    var O = this;
                    opts = O.E.find('option');
                    if (opts.length <= i || i < 0) throw "index out of bounds"
                    return O;
                },

                //toggles selection on c as boolean.
                toggSel: function (c, i) {
                    var O = this;
                    if (typeof(i) === "number"){
                        O.vRange(i);
                        opt = O.E.find('option')[i];
                    }
                    else{
                        opt = O.E.find('option[value="'+i+'"]')[0]||0;
                    }
                    if (!opt || opt.disabled) 
                        return;

                    if(opt.selected != c){
                        opt.selected = c;
                        if(!O.mob) $(opt).data('li').toggleClass('selected',c);
                        
                        O.callChange();
                        O.setPstate();
                        O.setText();
                        O.selAllState();
                    }
                },

                //toggles disabled on c as boolean.
                toggDis: function (c, i) {
                    var O = this.vRange(i);
                    O.E.find('option')[i].disabled = c;
                    if(c)O.E.find('option')[i].selected = false;
                    if(!O.mob)O.optDiv.find('ul.options li').eq(i).toggleClass('disabled', c).removeClass('selected');
                    O.setText();
                },

                // toggle disable/enable on complete select control
                toggSumo: function(val) {
                    var O = this;
                    O.enabled = val;
                    O.select.toggleClass('disabled', val);

                    if (val) {
                        O.E.attr('disabled', 'disabled');
                        O.select.removeAttr('tabindex');
                    }
                    else{
                        O.E.removeAttr('disabled');
                        O.select.attr('tabindex','0');
                    }

                    return O;
                },

                //toggles alloption on c as boolean.
                toggSelAll: function (c) {
                    var O = this;
                    O.E.find('option').each(function (ix, el) {
                        if (O.E.find('option')[$(this).index()].disabled) return;
                        O.E.find('option')[$(this).index()].selected = c;
                        if (!O.mob)
							O.optDiv.find('ul.options li').eq($(this).index()).toggleClass('selected', c);
                        O.setText();
                    });
                    if(!O.mob && O.selAll)O.selAll.removeClass('partial').toggleClass('selected',c);
                    O.callChange();
                    O.setPstate();
                },

                /* outside accessibility options
                   which can be accessed from the element instance.
                */
                reload:function(){
                    var elm = this.unload();
                    return $(elm).SumoSelect(settings);
                },

                unload: function () {
                    var O = this;
                    O.select.before(O.E);
                    O.E.show();

                    if (settings.outputAsCSV && O.is_multi && O.select.find('input.HEMANT123').length) {
                        O.E.attr('name', O.select.find('input.HEMANT123').attr('name')); // restore the name;
                    }
                    O.select.remove();
                    delete selObj.sumo;
                    return selObj;
                },

                //## add a new option to select at a given index.
                add: function (val, txt, i) {
                    if (typeof val == "undefined") throw "No value to add"

                    var O = this;
                    opts=O.E.find('option')
                    if (typeof txt == "number") { i = txt; txt = val; }
                    if (typeof txt == "undefined") { txt = val; }

                    opt = $("<option></option>").val(val).html(txt);

                    if (opts.length < i) throw "index out of bounds"

                    if (typeof i == "undefined" || opts.length == i) { // add it to the last if given index is last no or no index provides.
                        O.E.append(opt);
                        if(!O.mob)O.ul.append(O.createLi(opt));
                    }
                    else {
                        opts.eq(i).before(opt);
                        if(!O.mob)O.ul.find('li.opt').eq(i).before(O.createLi(opt));
                    }

                    return selObj;
                },

                //## removes an item at a given index.
                remove: function (i) {
                    var O = this.vRange(i);
                    O.E.find('option').eq(i).remove();
                    if(!O.mob)O.optDiv.find('ul.options li').eq(i).remove();
                    O.setText();
                },

                //## Select an item at a given index.
                selectItem: function (i) { this.toggSel(true, i); },

                //## UnSelect an iten at a given index.
                unSelectItem: function (i) { this.toggSel(false, i); },

                //## Select all items  of the select.
                selectAll: function () { this.toggSelAll(true); },

                //## UnSelect all items of the select.
                unSelectAll: function () { this.toggSelAll(false); },

                //## Disable an iten at a given index.
                disableItem: function (i) { this.toggDis(true, i) },

                //## Removes disabled an iten at a given index.
                enableItem: function (i) { this.toggDis(false, i) },

                //## New simple methods as getter and setter are not working fine in ie8-
                //## variable to check state of control if enabled or disabled.
                enabled : true,
                //## Enables the control
                enable: function(){return this.toggSumo(false)},

                //## Disables the control
                disable: function(){return this.toggSumo(true)},


                init: function () {
                    var O = this;
                    O.createElems();
                    O.setText();
                    return O
                }

            };

            selObj.sumo.init();
        });

        return ret.length == 1 ? ret[0] : ret;
    };


}(jQuery));

/*!
 * Fotorama 4.6.4 | http://fotorama.io/license/
 */
fotoramaVersion="4.6.4",function(a,b,c,d,e){"use strict";function f(a){var b="bez_"+d.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof d.easing[b]){var c=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))},g=function(a){return e[0]+a*(2*d[0]+3*c[0]*a)},h=function(a){for(var b,c=a,d=0;++d<14&&(b=f(c,0)-a,!(Math.abs(b)<.001));)c-=b/g(c);return c};return function(a){return f(h(a),1)}};d.easing[b]=function(b,d,e,f,g){return f*c([a[0],a[1]],[a[2],a[3]])(d/g)+e}}return b}function g(){}function h(a,b,c){return Math.max(isNaN(b)?-1/0:b,Math.min(isNaN(c)?1/0:c,a))}function i(a){return a.match(/ma/)&&a.match(/-?\d+(?!d)/g)[a.match(/3d/)?12:4]}function j(a){return Ic?+i(a.css("transform")):+a.css("left").replace("px","")}function k(a){var b={};return Ic?b.transform="translate3d("+a+"px,0,0)":b.left=a,b}function l(a){return{"transition-duration":a+"ms"}}function m(a,b){return isNaN(a)?b:a}function n(a,b){return m(+String(a).replace(b||"px",""))}function o(a){return/%$/.test(a)?n(a,"%"):e}function p(a,b){return m(o(a)/100*b,n(a))}function q(a){return(!isNaN(n(a))||!isNaN(n(a,"%")))&&a}function r(a,b,c,d){return(a-(d||0))*(b+(c||0))}function s(a,b,c,d){return-Math.round(a/(b+(c||0))-(d||0))}function t(a){var b=a.data();if(!b.tEnd){var c=a[0],d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};T(c,d[uc.prefixed("transition")],function(a){b.tProp&&a.propertyName.match(b.tProp)&&b.onEndFn()}),b.tEnd=!0}}function u(a,b,c,d){var e,f=a.data();f&&(f.onEndFn=function(){e||(e=!0,clearTimeout(f.tT),c())},f.tProp=b,clearTimeout(f.tT),f.tT=setTimeout(function(){f.onEndFn()},1.5*d),t(a))}function v(a,b){if(a.length){var c=a.data();Ic?(a.css(l(0)),c.onEndFn=g,clearTimeout(c.tT)):a.stop();var d=w(b,function(){return j(a)});return a.css(k(d)),d}}function w(){for(var a,b=0,c=arguments.length;c>b&&(a=b?arguments[b]():arguments[b],"number"!=typeof a);b++);return a}function x(a,b){return Math.round(a+(b-a)/1.5)}function y(){return y.p=y.p||("https:"===c.protocol?"https://":"http://"),y.p}function z(a){var c=b.createElement("a");return c.href=a,c}function A(a,b){if("string"!=typeof a)return a;a=z(a);var c,d;if(a.host.match(/youtube\.com/)&&a.search){if(c=a.search.split("v=")[1]){var e=c.indexOf("&");-1!==e&&(c=c.substring(0,e)),d="youtube"}}else a.host.match(/youtube\.com|youtu\.be/)?(c=a.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),d="youtube"):a.host.match(/vimeo\.com/)&&(d="vimeo",c=a.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return c&&d||!b||(c=a.href,d="custom"),c?{id:c,type:d,s:a.search.replace(/^\?/,""),p:y()}:!1}function B(a,b,c){var e,f,g=a.video;return"youtube"===g.type?(f=y()+"img.youtube.com/vi/"+g.id+"/default.jpg",e=f.replace(/\/default.jpg$/,"/hqdefault.jpg"),a.thumbsReady=!0):"vimeo"===g.type?d.ajax({url:y()+"vimeo.com/api/v2/video/"+g.id+".json",dataType:"jsonp",success:function(d){a.thumbsReady=!0,C(b,{img:d[0].thumbnail_large,thumb:d[0].thumbnail_small},a.i,c)}}):a.thumbsReady=!0,{img:e,thumb:f}}function C(a,b,c,e){for(var f=0,g=a.length;g>f;f++){var h=a[f];if(h.i===c&&h.thumbsReady){var i={videoReady:!0};i[Xc]=i[Zc]=i[Yc]=!1,e.splice(f,1,d.extend({},h,i,b));break}}}function D(a){function b(a,b,e){var f=a.children("img").eq(0),g=a.attr("href"),h=a.attr("src"),i=f.attr("src"),j=b.video,k=e?A(g,j===!0):!1;k?g=!1:k=j,c(a,f,d.extend(b,{video:k,img:b.img||g||h||i,thumb:b.thumb||i||h||g}))}function c(a,b,c){var e=c.thumb&&c.img!==c.thumb,f=n(c.width||a.attr("width")),g=n(c.height||a.attr("height"));d.extend(c,{width:f,height:g,thumbratio:S(c.thumbratio||n(c.thumbwidth||b&&b.attr("width")||e||f)/n(c.thumbheight||b&&b.attr("height")||e||g))})}var e=[];return a.children().each(function(){var a=d(this),f=R(d.extend(a.data(),{id:a.attr("id")}));if(a.is("a, img"))b(a,f,!0);else{if(a.is(":empty"))return;c(a,null,d.extend(f,{html:this,_html:a.html()}))}e.push(f)}),e}function E(a){return 0===a.offsetWidth&&0===a.offsetHeight}function F(a){return!d.contains(b.documentElement,a)}function G(a,b,c,d){return G.i||(G.i=1,G.ii=[!0]),d=d||G.i,"undefined"==typeof G.ii[d]&&(G.ii[d]=!0),a()?b():G.ii[d]&&setTimeout(function(){G.ii[d]&&G(a,b,c,d)},c||100),G.i++}function H(a){c.replace(c.protocol+"//"+c.host+c.pathname.replace(/^\/?/,"/")+c.search+"#"+a)}function I(a,b,c,d){var e=a.data(),f=e.measures;if(f&&(!e.l||e.l.W!==f.width||e.l.H!==f.height||e.l.r!==f.ratio||e.l.w!==b.w||e.l.h!==b.h||e.l.m!==c||e.l.p!==d)){var g=f.width,i=f.height,j=b.w/b.h,k=f.ratio>=j,l="scaledown"===c,m="contain"===c,n="cover"===c,o=$(d);k&&(l||m)||!k&&n?(g=h(b.w,0,l?g:1/0),i=g/f.ratio):(k&&n||!k&&(l||m))&&(i=h(b.h,0,l?i:1/0),g=i*f.ratio),a.css({width:g,height:i,left:p(o.x,b.w-g),top:p(o.y,b.h-i)}),e.l={W:f.width,H:f.height,r:f.ratio,w:b.w,h:b.h,m:c,p:d}}return!0}function J(a,b){var c=a[0];c.styleSheet?c.styleSheet.cssText=b:a.html(b)}function K(a,b,c){return b===c?!1:b>=a?"left":a>=c?"right":"left right"}function L(a,b,c,d){if(!c)return!1;if(!isNaN(a))return a-(d?0:1);for(var e,f=0,g=b.length;g>f;f++){var h=b[f];if(h.id===a){e=f;break}}return e}function M(a,b,c){c=c||{},a.each(function(){var a,e=d(this),f=e.data();f.clickOn||(f.clickOn=!0,d.extend(cb(e,{onStart:function(b){a=b,(c.onStart||g).call(this,b)},onMove:c.onMove||g,onTouchEnd:c.onTouchEnd||g,onEnd:function(c){c.moved||b.call(this,a)}}),{noMove:!0}))})}function N(a,b){return'<div class="'+a+'">'+(b||"")+"</div>"}function O(a){for(var b=a.length;b;){var c=Math.floor(Math.random()*b--),d=a[b];a[b]=a[c],a[c]=d}return a}function P(a){return"[object Array]"==Object.prototype.toString.call(a)&&d.map(a,function(a){return d.extend({},a)})}function Q(a,b,c){a.scrollLeft(b||0).scrollTop(c||0)}function R(a){if(a){var b={};return d.each(a,function(a,c){b[a.toLowerCase()]=c}),b}}function S(a){if(a){var b=+a;return isNaN(b)?(b=a.split("/"),+b[0]/+b[1]||e):b}}function T(a,b,c,d){b&&(a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent("on"+b,c))}function U(a){return!!a.getAttribute("disabled")}function V(a){return{tabindex:-1*a+"",disabled:a}}function W(a,b){T(a,"keyup",function(c){U(a)||13==c.keyCode&&b.call(a,c)})}function X(a,b){T(a,"focus",a.onfocusin=function(c){b.call(a,c)},!0)}function Y(a,b){a.preventDefault?a.preventDefault():a.returnValue=!1,b&&a.stopPropagation&&a.stopPropagation()}function Z(a){return a?">":"<"}function $(a){return a=(a+"").split(/\s+/),{x:q(a[0])||bd,y:q(a[1])||bd}}function _(a,b){var c=a.data(),e=Math.round(b.pos),f=function(){c.sliding=!1,(b.onEnd||g)()};"undefined"!=typeof b.overPos&&b.overPos!==b.pos&&(e=b.overPos,f=function(){_(a,d.extend({},b,{overPos:b.pos,time:Math.max(Qc,b.time/2)}))});var h=d.extend(k(e),b.width&&{width:b.width});c.sliding=!0,Ic?(a.css(d.extend(l(b.time),h)),b.time>10?u(a,"transform",f,b.time):f()):a.stop().animate(h,b.time,_c,f)}function ab(a,b,c,e,f,h){var i="undefined"!=typeof h;if(i||(f.push(arguments),Array.prototype.push.call(arguments,f.length),!(f.length>1))){a=a||d(a),b=b||d(b);var j=a[0],k=b[0],l="crossfade"===e.method,m=function(){if(!m.done){m.done=!0;var a=(i||f.shift())&&f.shift();a&&ab.apply(this,a),(e.onEnd||g)(!!a)}},n=e.time/(h||1);c.removeClass(Rb+" "+Qb),a.stop().addClass(Rb),b.stop().addClass(Qb),l&&k&&a.fadeTo(0,0),a.fadeTo(l?n:0,1,l&&m),b.fadeTo(n,0,m),j&&l||k||m()}}function bb(a){var b=(a.touches||[])[0]||a;a._x=b.pageX,a._y=b.clientY,a._now=d.now()}function cb(a,c){function e(a){return m=d(a.target),u.checked=p=q=s=!1,k||u.flow||a.touches&&a.touches.length>1||a.which>1||ed&&ed.type!==a.type&&gd||(p=c.select&&m.is(c.select,t))?p:(o="touchstart"===a.type,q=m.is("a, a *",t),n=u.control,r=u.noMove||u.noSwipe||n?16:u.snap?0:4,bb(a),l=ed=a,fd=a.type.replace(/down|start/,"move").replace(/Down/,"Move"),(c.onStart||g).call(t,a,{control:n,$target:m}),k=u.flow=!0,void((!o||u.go)&&Y(a)))}function f(a){if(a.touches&&a.touches.length>1||Nc&&!a.isPrimary||fd!==a.type||!k)return k&&h(),void(c.onTouchEnd||g)();bb(a);var b=Math.abs(a._x-l._x),d=Math.abs(a._y-l._y),e=b-d,f=(u.go||u.x||e>=0)&&!u.noSwipe,i=0>e;o&&!u.checked?(k=f)&&Y(a):(Y(a),(c.onMove||g).call(t,a,{touch:o})),!s&&Math.sqrt(Math.pow(b,2)+Math.pow(d,2))>r&&(s=!0),u.checked=u.checked||f||i}function h(a){(c.onTouchEnd||g)();var b=k;u.control=k=!1,b&&(u.flow=!1),!b||q&&!u.checked||(a&&Y(a),gd=!0,clearTimeout(hd),hd=setTimeout(function(){gd=!1},1e3),(c.onEnd||g).call(t,{moved:s,$target:m,control:n,touch:o,startEvent:l,aborted:!a||"MSPointerCancel"===a.type}))}function i(){u.flow||setTimeout(function(){u.flow=!0},10)}function j(){u.flow&&setTimeout(function(){u.flow=!1},Pc)}var k,l,m,n,o,p,q,r,s,t=a[0],u={};return Nc?(T(t,"MSPointerDown",e),T(b,"MSPointerMove",f),T(b,"MSPointerCancel",h),T(b,"MSPointerUp",h)):(T(t,"touchstart",e),T(t,"touchmove",f),T(t,"touchend",h),T(b,"touchstart",i),T(b,"touchend",j),T(b,"touchcancel",j),Ec.on("scroll",j),a.on("mousedown",e),Fc.on("mousemove",f).on("mouseup",h)),a.on("click","a",function(a){u.checked&&Y(a)}),u}function db(a,b){function c(c,d){A=!0,j=l=c._x,q=c._now,p=[[q,j]],m=n=D.noMove||d?0:v(a,(b.getPos||g)()),(b.onStart||g).call(B,c)}function e(a,b){s=D.min,t=D.max,u=D.snap,w=a.altKey,A=z=!1,y=b.control,y||C.sliding||c(a)}function f(d,e){D.noSwipe||(A||c(d),l=d._x,p.push([d._now,l]),n=m-(j-l),o=K(n,s,t),s>=n?n=x(n,s):n>=t&&(n=x(n,t)),D.noMove||(a.css(k(n)),z||(z=!0,e.touch||Nc||a.addClass(ec)),(b.onMove||g).call(B,d,{pos:n,edge:o})))}function i(e){if(!D.noSwipe||!e.moved){A||c(e.startEvent,!0),e.touch||Nc||a.removeClass(ec),r=d.now();for(var f,i,j,k,o,q,v,x,y,z=r-Pc,C=null,E=Qc,F=b.friction,G=p.length-1;G>=0;G--){if(f=p[G][0],i=Math.abs(f-z),null===C||j>i)C=f,k=p[G][1];else if(C===z||i>j)break;j=i}v=h(n,s,t);var H=k-l,I=H>=0,J=r-C,K=J>Pc,L=!K&&n!==m&&v===n;u&&(v=h(Math[L?I?"floor":"ceil":"round"](n/u)*u,s,t),s=t=v),L&&(u||v===n)&&(y=-(H/J),E*=h(Math.abs(y),b.timeLow,b.timeHigh),o=Math.round(n+y*E/F),u||(v=o),(!I&&o>t||I&&s>o)&&(q=I?s:t,x=o-q,u||(v=q),x=h(v+.03*x,q-50,q+50),E=Math.abs((n-x)/(y/F)))),E*=w?10:1,(b.onEnd||g).call(B,d.extend(e,{moved:e.moved||K&&u,pos:n,newPos:v,overPos:x,time:E}))}}var j,l,m,n,o,p,q,r,s,t,u,w,y,z,A,B=a[0],C=a.data(),D={};return D=d.extend(cb(b.$wrap,d.extend({},b,{onStart:e,onMove:f,onEnd:i})),D)}function eb(a,b){var c,e,f,h=a[0],i={prevent:{}};return T(h,Oc,function(a){var h=a.wheelDeltaY||-1*a.deltaY||0,j=a.wheelDeltaX||-1*a.deltaX||0,k=Math.abs(j)&&!Math.abs(h),l=Z(0>j),m=e===l,n=d.now(),o=Pc>n-f;e=l,f=n,k&&i.ok&&(!i.prevent[l]||c)&&(Y(a,!0),c&&m&&o||(b.shift&&(c=!0,clearTimeout(i.t),i.t=setTimeout(function(){c=!1},Rc)),(b.onEnd||g)(a,b.shift?l:j)))}),i}function fb(){d.each(d.Fotorama.instances,function(a,b){b.index=a})}function gb(a){d.Fotorama.instances.push(a),fb()}function hb(a){d.Fotorama.instances.splice(a.index,1),fb()}var ib="fotorama",jb="fullscreen",kb=ib+"__wrap",lb=kb+"--css2",mb=kb+"--css3",nb=kb+"--video",ob=kb+"--fade",pb=kb+"--slide",qb=kb+"--no-controls",rb=kb+"--no-shadows",sb=kb+"--pan-y",tb=kb+"--rtl",ub=kb+"--only-active",vb=kb+"--no-captions",wb=kb+"--toggle-arrows",xb=ib+"__stage",yb=xb+"__frame",zb=yb+"--video",Ab=xb+"__shaft",Bb=ib+"__grab",Cb=ib+"__pointer",Db=ib+"__arr",Eb=Db+"--disabled",Fb=Db+"--prev",Gb=Db+"--next",Hb=ib+"__nav",Ib=Hb+"-wrap",Jb=Hb+"__shaft",Kb=Hb+"--dots",Lb=Hb+"--thumbs",Mb=Hb+"__frame",Nb=Mb+"--dot",Ob=Mb+"--thumb",Pb=ib+"__fade",Qb=Pb+"-front",Rb=Pb+"-rear",Sb=ib+"__shadow",Tb=Sb+"s",Ub=Tb+"--left",Vb=Tb+"--right",Wb=ib+"__active",Xb=ib+"__select",Yb=ib+"--hidden",Zb=ib+"--fullscreen",$b=ib+"__fullscreen-icon",_b=ib+"__error",ac=ib+"__loading",bc=ib+"__loaded",cc=bc+"--full",dc=bc+"--img",ec=ib+"__grabbing",fc=ib+"__img",gc=fc+"--full",hc=ib+"__dot",ic=ib+"__thumb",jc=ic+"-border",kc=ib+"__html",lc=ib+"__video",mc=lc+"-play",nc=lc+"-close",oc=ib+"__caption",pc=ib+"__caption__wrap",qc=ib+"__spinner",rc='" tabindex="0" role="button',sc=d&&d.fn.jquery.split(".");if(!sc||sc[0]<1||1==sc[0]&&sc[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var tc={},uc=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&r[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+u.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+v.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.6.2",n={},o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),t="Webkit Moz O ms",u=t.split(" "),v=t.toLowerCase().split(" "),w={},x=[],y=x.slice,z=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:p+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',p,'">',a,"</style>"].join(""),j.id=p,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=o.style.overflow,o.style.overflow="hidden",o.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),o.style.overflow=i),!!g},A={}.hasOwnProperty;l=e(A,"undefined")||e(A.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=y.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(y.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(y.call(arguments)))};return d}),w.csstransforms3d=function(){var a=!!i("perspective");return a};for(var B in w)l(w,B)&&(k=B.toLowerCase(),n[k]=w[B](),x.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),q=j=null,n._version=m,n._prefixes=s,n._domPrefixes=v,n._cssomPrefixes=u,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=z,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},n}(a,b),vc={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},wc="webkit moz o ms khtml".split(" ");if("undefined"!=typeof b.cancelFullScreen)vc.ok=!0;else for(var xc=0,yc=wc.length;yc>xc;xc++)if(vc.prefix=wc[xc],"undefined"!=typeof b[vc.prefix+"CancelFullScreen"]){vc.ok=!0;break}vc.ok&&(vc.event=vc.prefix+"fullscreenchange",vc.is=function(){switch(this.prefix){case"":return b.fullScreen;case"webkit":return b.webkitIsFullScreen;default:return b[this.prefix+"FullScreen"]}},vc.request=function(a){return""===this.prefix?a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},vc.cancel=function(){return""===this.prefix?b.cancelFullScreen():b[this.prefix+"CancelFullScreen"]()});var zc,Ac={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},Bc={top:"auto",left:"auto",className:""};!function(a,b){zc=b()}(this,function(){function a(a,c){var d,e=b.createElement(a||"div");for(d in c)e[d]=c[d];return e}function c(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function d(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return o[e]||(p.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",p.cssRules.length),o[e]=1),e}function f(a,b){var c,d,f=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<n.length;d++)if(c=n[d]+b,f[c]!==e)return c;return f[b]!==e?b:void 0}function g(a,b){for(var c in b)a.style[f(a,c)||c]=b[c];return a}function h(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]===e&&(a[d]=c[d])}return a}function i(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function j(a,b){return"string"==typeof a?a:a[b%a.length]}function k(a){return"undefined"==typeof this?new k(a):void(this.opts=h(a||{},k.defaults,q))}function l(){function b(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}p.addRule(".spin-vml","behavior:url(#default#VML)"),k.prototype.lines=function(a,d){function e(){return g(b("group",{coordsize:k+" "+k,coordorigin:-i+" "+-i}),{width:k,height:k})}function f(a,f,h){c(m,c(g(e(),{rotation:360/d.lines*a+"deg",left:~~f}),c(g(b("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),b("fill",{color:j(d.color,a),opacity:d.opacity}),b("stroke",{opacity:0}))))}var h,i=d.length+d.width,k=2*i,l=2*-(d.width+d.length)+"px",m=g(e(),{position:"absolute",top:l,left:l});if(d.shadow)for(h=1;h<=d.lines;h++)f(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)f(h);return c(a,m)},k.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var m,n=["webkit","Moz","ms","O"],o={},p=function(){var d=a("style",{type:"text/css"});return c(b.getElementsByTagName("head")[0],d),d.sheet||d.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};k.defaults={},h(k.prototype,{spin:function(b){this.stop();var c,d,e=this,f=e.opts,h=e.el=g(a(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex}),j=f.radius+f.length+f.width;if(b&&(b.insertBefore(h,b.firstChild||null),d=i(b),c=i(h),g(h,{left:("auto"==f.left?d.x-c.x+(b.offsetWidth>>1):parseInt(f.left,10)+j)+"px",top:("auto"==f.top?d.y-c.y+(b.offsetHeight>>1):parseInt(f.top,10)+j)+"px"})),h.setAttribute("role","progressbar"),e.lines(h,e.opts),!m){var k,l=0,n=(f.lines-1)*(1-f.direction)/2,o=f.fps,p=o/f.speed,q=(1-f.opacity)/(p*f.trail/100),r=p/f.lines;!function s(){l++;for(var a=0;a<f.lines;a++)k=Math.max(1-(l+(f.lines-a)*r)%p*q,f.opacity),e.opacity(h,a*f.direction+n,k,f);e.timeout=e.el&&setTimeout(s,~~(1e3/o))}()}return e},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=e),this},lines:function(b,e){function f(b,c){return g(a(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*i+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var h,i=0,k=(e.lines-1)*(1-e.direction)/2;i<e.lines;i++)h=g(a(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:m&&d(e.opacity,e.trail,k+i*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&c(h,g(f("#000","0 0 4px #000"),{top:"2px"})),c(b,c(h,f(j(e.color,i),"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var r=g(a("group"),{behavior:"url(#default#VML)"});return!f(r,"transform")&&r.adj?l():m=f(r,"animation"),k});var Cc,Dc,Ec=d(a),Fc=d(b),Gc="quirks"===c.hash.replace("#",""),Hc=uc.csstransforms3d,Ic=Hc&&!Gc,Jc=Hc||"CSS1Compat"===b.compatMode,Kc=vc.ok,Lc=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),Mc=!Ic||Lc,Nc=navigator.msPointerEnabled,Oc="onwheel"in b.createElement("div")?"wheel":b.onmousewheel!==e?"mousewheel":"DOMMouseScroll",Pc=250,Qc=300,Rc=1400,Sc=5e3,Tc=2,Uc=64,Vc=500,Wc=333,Xc="$stageFrame",Yc="$navDotFrame",Zc="$navThumbFrame",$c="auto",_c=f([.1,0,.25,1]),ad=99999,bd="50%",cd={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:Tc,glimpse:0,fit:"contain",position:bd,thumbposition:bd,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:Uc,thumbheight:Uc,thumbmargin:Tc,thumbborderwidth:Tc,thumbfit:"cover",allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:Qc,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,enableifsingleframe:!1,controlsonstart:!0,shuffle:!1,direction:"ltr",shadows:!0,spinner:null},dd={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1};G.stop=function(a){G.ii[a]=!1};var ed,fd,gd,hd;jQuery.Fotorama=function(a,e){function f(){d.each(yd,function(a,b){if(!b.i){b.i=me++;var c=A(b.video,!0);if(c){var d={};b.video=c,b.img||b.thumb?b.thumbsReady=!0:d=B(b,yd,ie),C(yd,{img:d.img,thumb:d.thumb},b.i,ie)}}})}function g(a){return Zd[a]||ie.fullScreen}function i(a){var b="keydown."+ib,c=ib+je,d="keydown."+c,f="resize."+c+" orientationchange."+c;a?(Fc.on(d,function(a){var b,c;Cd&&27===a.keyCode?(b=!0,md(Cd,!0,!0)):(ie.fullScreen||e.keyboard&&!ie.index)&&(27===a.keyCode?(b=!0,ie.cancelFullScreen()):a.shiftKey&&32===a.keyCode&&g("space")||37===a.keyCode&&g("left")||38===a.keyCode&&g("up")?c="<":32===a.keyCode&&g("space")||39===a.keyCode&&g("right")||40===a.keyCode&&g("down")?c=">":36===a.keyCode&&g("home")?c="<<":35===a.keyCode&&g("end")&&(c=">>")),(b||c)&&Y(a),c&&ie.show({index:c,slow:a.altKey,user:!0})}),ie.index||Fc.off(b).on(b,"textarea, input, select",function(a){!Dc.hasClass(jb)&&a.stopPropagation()}),Ec.on(f,ie.resize)):(Fc.off(d),Ec.off(f))}function j(b){b!==j.f&&(b?(a.html("").addClass(ib+" "+ke).append(qe).before(oe).before(pe),gb(ie)):(qe.detach(),oe.detach(),pe.detach(),a.html(ne.urtext).removeClass(ke),hb(ie)),i(b),j.f=b)}function m(){yd=ie.data=yd||P(e.data)||D(a),zd=ie.size=yd.length,!xd.ok&&e.shuffle&&O(yd),f(),Je=y(Je),zd&&j(!0)}function o(){var a=2>zd&&!e.enableifsingleframe||Cd;Me.noMove=a||Sd,Me.noSwipe=a||!e.swipe,!Wd&&se.toggleClass(Bb,!e.click&&!Me.noMove&&!Me.noSwipe),Nc&&qe.toggleClass(sb,!Me.noSwipe)}function t(a){a===!0&&(a=""),e.autoplay=Math.max(+a||Sc,1.5*Vd)}function u(){function a(a,c){b[a?"add":"remove"].push(c)}ie.options=e=R(e),Sd="crossfade"===e.transition||"dissolve"===e.transition,Md=e.loop&&(zd>2||Sd&&(!Wd||"slide"!==Wd)),Vd=+e.transitionduration||Qc,Yd="rtl"===e.direction,Zd=d.extend({},e.keyboard&&dd,e.keyboard);var b={add:[],remove:[]};zd>1||e.enableifsingleframe?(Nd=e.nav,Pd="top"===e.navposition,b.remove.push(Xb),we.toggle(!!e.arrows)):(Nd=!1,we.hide()),Rb(),Bd=new zc(d.extend(Ac,e.spinner,Bc,{direction:Yd?-1:1})),Gc(),Hc(),e.autoplay&&t(e.autoplay),Td=n(e.thumbwidth)||Uc,Ud=n(e.thumbheight)||Uc,Ne.ok=Pe.ok=e.trackpad&&!Mc,o(),ed(e,[Le]),Od="thumbs"===Nd,Od?(lc(zd,"navThumb"),Ad=Be,he=Zc,J(oe,d.Fotorama.jst.style({w:Td,h:Ud,b:e.thumbborderwidth,m:e.thumbmargin,s:je,q:!Jc})),ye.addClass(Lb).removeClass(Kb)):"dots"===Nd?(lc(zd,"navDot"),Ad=Ae,he=Yc,ye.addClass(Kb).removeClass(Lb)):(Nd=!1,ye.removeClass(Lb+" "+Kb)),Nd&&(Pd?xe.insertBefore(re):xe.insertAfter(re),wc.nav=!1,wc(Ad,ze,"nav")),Qd=e.allowfullscreen,Qd?(De.prependTo(re),Rd=Kc&&"native"===Qd):(De.detach(),Rd=!1),a(Sd,ob),a(!Sd,pb),a(!e.captions,vb),a(Yd,tb),a("always"!==e.arrows,wb),Xd=e.shadows&&!Mc,a(!Xd,rb),qe.addClass(b.add.join(" ")).removeClass(b.remove.join(" ")),Ke=d.extend({},e)}function x(a){return 0>a?(zd+a%zd)%zd:a>=zd?a%zd:a}function y(a){return h(a,0,zd-1)}function z(a){return Md?x(a):y(a)}function E(a){return a>0||Md?a-1:!1}function U(a){return zd-1>a||Md?a+1:!1}function $(){Me.min=Md?-1/0:-r(zd-1,Le.w,e.margin,Fd),Me.max=Md?1/0:-r(0,Le.w,e.margin,Fd),Me.snap=Le.w+e.margin}function bb(){Oe.min=Math.min(0,Le.nw-ze.width()),Oe.max=0,ze.toggleClass(Bb,!(Oe.noMove=Oe.min===Oe.max))}function cb(a,b,c){if("number"==typeof a){a=new Array(a);var e=!0}return d.each(a,function(a,d){if(e&&(d=a),"number"==typeof d){var f=yd[x(d)];if(f){var g="$"+b+"Frame",h=f[g];c.call(this,a,d,f,h,g,h&&h.data())}}})}function fb(a,b,c,d){(!$d||"*"===$d&&d===Ld)&&(a=q(e.width)||q(a)||Vc,b=q(e.height)||q(b)||Wc,ie.resize({width:a,ratio:e.ratio||c||a/b},0,d!==Ld&&"*"))}function Pb(a,b,c,f,g,h){cb(a,b,function(a,i,j,k,l,m){function n(a){var b=x(i);fd(a,{index:b,src:w,frame:yd[b]})}function o(){t.remove(),d.Fotorama.cache[w]="error",j.html&&"stage"===b||!y||y===w?(!w||j.html||r?"stage"===b&&(k.trigger("f:load").removeClass(ac+" "+_b).addClass(bc),n("load"),fb()):(k.trigger("f:error").removeClass(ac).addClass(_b),n("error")),m.state="error",!(zd>1&&yd[i]===j)||j.html||j.deleted||j.video||r||(j.deleted=!0,ie.splice(i,1))):(j[v]=w=y,Pb([i],b,c,f,g,!0))}function p(){d.Fotorama.measures[w]=u.measures=d.Fotorama.measures[w]||{width:s.width,height:s.height,ratio:s.width/s.height},fb(u.measures.width,u.measures.height,u.measures.ratio,i),t.off("load error").addClass(fc+(r?" "+gc:"")).prependTo(k),I(t,(d.isFunction(c)?c():c)||Le,f||j.fit||e.fit,g||j.position||e.position),d.Fotorama.cache[w]=m.state="loaded",setTimeout(function(){k.trigger("f:load").removeClass(ac+" "+_b).addClass(bc+" "+(r?cc:dc)),"stage"===b?n("load"):(j.thumbratio===$c||!j.thumbratio&&e.thumbratio===$c)&&(j.thumbratio=u.measures.ratio,vd())},0)}function q(){var a=10;G(function(){return!fe||!a--&&!Mc},function(){p()})}if(k){var r=ie.fullScreen&&j.full&&j.full!==j.img&&!m.$full&&"stage"===b;if(!m.$img||h||r){var s=new Image,t=d(s),u=t.data();m[r?"$full":"$img"]=t;var v="stage"===b?r?"full":"img":"thumb",w=j[v],y=r?null:j["stage"===b?"thumb":"img"];if("navThumb"===b&&(k=m.$wrap),!w)return void o();d.Fotorama.cache[w]?!function z(){"error"===d.Fotorama.cache[w]?o():"loaded"===d.Fotorama.cache[w]?setTimeout(q,0):setTimeout(z,100)}():(d.Fotorama.cache[w]="*",t.on("load",q).on("error",o)),m.state="",s.src=w}}})}function Qb(a){Ie.append(Bd.spin().el).appendTo(a)}function Rb(){Ie.detach(),Bd&&Bd.stop()}function Sb(){var a=Dd[Xc];a&&!a.data().state&&(Qb(a),a.on("f:load f:error",function(){a.off("f:load f:error"),Rb()}))}function ec(a){W(a,sd),X(a,function(){setTimeout(function(){Q(ye)},0),Rc({time:Vd,guessIndex:d(this).data().eq,minMax:Oe})})}function lc(a,b){cb(a,b,function(a,c,e,f,g,h){if(!f){f=e[g]=qe[g].clone(),h=f.data(),h.data=e;var i=f[0];"stage"===b?(e.html&&d('<div class="'+kc+'"></div>').append(e._html?d(e.html).removeAttr("id").html(e._html):e.html).appendTo(f),e.caption&&d(N(oc,N(pc,e.caption))).appendTo(f),e.video&&f.addClass(zb).append(Fe.clone()),X(i,function(){setTimeout(function(){Q(re)},0),pd({index:h.eq,user:!0})}),te=te.add(f)):"navDot"===b?(ec(i),Ae=Ae.add(f)):"navThumb"===b&&(ec(i),h.$wrap=f.children(":first"),Be=Be.add(f),e.video&&h.$wrap.append(Fe.clone()))}})}function sc(a,b,c,d){return a&&a.length&&I(a,b,c,d)}function tc(a){cb(a,"stage",function(a,b,c,f,g,h){if(f){var i=x(b),j=c.fit||e.fit,k=c.position||e.position;h.eq=i,Re[Xc][i]=f.css(d.extend({left:Sd?0:r(b,Le.w,e.margin,Fd)},Sd&&l(0))),F(f[0])&&(f.appendTo(se),md(c.$video)),sc(h.$img,Le,j,k),sc(h.$full,Le,j,k)}})}function uc(a,b){if("thumbs"===Nd&&!isNaN(a)){var c=-a,f=-a+Le.nw;Be.each(function(){var a=d(this),g=a.data(),h=g.eq,i=function(){return{h:Ud,w:g.w}},j=i(),k=yd[h]||{},l=k.thumbfit||e.thumbfit,m=k.thumbposition||e.thumbposition;j.w=g.w,g.l+g.w<c||g.l>f||sc(g.$img,j,l,m)||b&&Pb([h],"navThumb",i,l,m)})}}function wc(a,b,c){if(!wc[c]){var f="nav"===c&&Od,g=0;b.append(a.filter(function(){for(var a,b=d(this),c=b.data(),e=0,f=yd.length;f>e;e++)if(c.data===yd[e]){a=!0,c.eq=e;break}return a||b.remove()&&!1}).sort(function(a,b){return d(a).data().eq-d(b).data().eq}).each(function(){if(f){var a=d(this),b=a.data(),c=Math.round(Ud*b.data.thumbratio)||Td;b.l=g,b.w=c,a.css({width:c}),g+=c+e.thumbmargin}})),wc[c]=!0}}function xc(a){return a-Se>Le.w/3}function yc(a){return!(Md||Je+a&&Je-zd+a||Cd)}function Gc(){var a=yc(0),b=yc(1);ue.toggleClass(Eb,a).attr(V(a)),ve.toggleClass(Eb,b).attr(V(b))}function Hc(){Ne.ok&&(Ne.prevent={"<":yc(0),">":yc(1)})}function Lc(a){var b,c,d=a.data();return Od?(b=d.l,c=d.w):(b=a.position().left,c=a.width()),{c:b+c/2,min:-b+10*e.thumbmargin,max:-b+Le.w-c-10*e.thumbmargin}}function Oc(a){var b=Dd[he].data();_(Ce,{time:1.2*a,pos:b.l,width:b.w-2*e.thumbborderwidth})}function Rc(a){var b=yd[a.guessIndex][he];if(b){var c=Oe.min!==Oe.max,d=a.minMax||c&&Lc(Dd[he]),e=c&&(a.keep&&Rc.l?Rc.l:h((a.coo||Le.nw/2)-Lc(b).c,d.min,d.max)),f=c&&h(e,Oe.min,Oe.max),g=1.1*a.time;_(ze,{time:g,pos:f||0,onEnd:function(){uc(f,!0)}}),ld(ye,K(f,Oe.min,Oe.max)),Rc.l=e}}function Tc(){_c(he),Qe[he].push(Dd[he].addClass(Wb))}function _c(a){for(var b=Qe[a];b.length;)b.shift().removeClass(Wb)}function bd(a){var b=Re[a];d.each(Ed,function(a,c){delete b[x(c)]}),d.each(b,function(a,c){delete b[a],c.detach()})}function cd(a){Fd=Gd=Je;var b=Dd[Xc];b&&(_c(Xc),Qe[Xc].push(b.addClass(Wb)),a||ie.show.onEnd(!0),v(se,0,!0),bd(Xc),tc(Ed),$(),bb())}function ed(a,b){a&&d.each(b,function(b,c){c&&d.extend(c,{width:a.width||c.width,height:a.height,minwidth:a.minwidth,maxwidth:a.maxwidth,minheight:a.minheight,maxheight:a.maxheight,ratio:S(a.ratio)})})}function fd(b,c){a.trigger(ib+":"+b,[ie,c])}function gd(){clearTimeout(hd.t),fe=1,e.stopautoplayontouch?ie.stopAutoplay():ce=!0}function hd(){fe&&(e.stopautoplayontouch||(id(),jd()),hd.t=setTimeout(function(){fe=0},Qc+Pc))}function id(){ce=!(!Cd&&!de)}function jd(){if(clearTimeout(jd.t),G.stop(jd.w),!e.autoplay||ce)return void(ie.autoplay&&(ie.autoplay=!1,fd("stopautoplay")));ie.autoplay||(ie.autoplay=!0,fd("startautoplay"));var a=Je,b=Dd[Xc].data();jd.w=G(function(){return b.state||a!==Je},function(){jd.t=setTimeout(function(){if(!ce&&a===Je){var b=Kd,c=yd[b][Xc].data();jd.w=G(function(){return c.state||b!==Kd},function(){ce||b!==Kd||ie.show(Md?Z(!Yd):Kd)})}},e.autoplay)})}function kd(){ie.fullScreen&&(ie.fullScreen=!1,Kc&&vc.cancel(le),Dc.removeClass(jb),Cc.removeClass(jb),a.removeClass(Zb).insertAfter(pe),Le=d.extend({},ee),md(Cd,!0,!0),rd("x",!1),ie.resize(),Pb(Ed,"stage"),Q(Ec,ae,_d),fd("fullscreenexit"))}function ld(a,b){Xd&&(a.removeClass(Ub+" "+Vb),b&&!Cd&&a.addClass(b.replace(/^|\s/g," "+Tb+"--")))}function md(a,b,c){b&&(qe.removeClass(nb),Cd=!1,o()),a&&a!==Cd&&(a.remove(),fd("unloadvideo")),c&&(id(),jd())}function nd(a){qe.toggleClass(qb,a)}function od(a){if(!Me.flow){var b=a?a.pageX:od.x,c=b&&!yc(xc(b))&&e.click;od.p!==c&&re.toggleClass(Cb,c)&&(od.p=c,od.x=b)}}function pd(a){clearTimeout(pd.t),e.clicktransition&&e.clicktransition!==e.transition?setTimeout(function(){var b=e.transition;ie.setOptions({transition:e.clicktransition}),Wd=b,pd.t=setTimeout(function(){ie.show(a)},10)},0):ie.show(a)}function qd(a,b){var c=a.target,f=d(c);f.hasClass(mc)?ie.playVideo():c===Ee?ie.toggleFullScreen():Cd?c===He&&md(Cd,!0,!0):b?nd():e.click&&pd({index:a.shiftKey||Z(xc(a._x)),slow:a.altKey,user:!0})}function rd(a,b){Me[a]=Oe[a]=b}function sd(a){var b=d(this).data().eq;pd({index:b,slow:a.altKey,user:!0,coo:a._x-ye.offset().left})}function td(a){pd({index:we.index(this)?">":"<",slow:a.altKey,user:!0})}function ud(a){X(a,function(){setTimeout(function(){Q(re)},0),nd(!1)})}function vd(){if(m(),u(),!vd.i){vd.i=!0;var a=e.startindex;(a||e.hash&&c.hash)&&(Ld=L(a||c.hash.replace(/^#/,""),yd,0===ie.index||a,a)),Je=Fd=Gd=Hd=Ld=z(Ld)||0}if(zd){if(wd())return;Cd&&md(Cd,!0),Ed=[],bd(Xc),vd.ok=!0,ie.show({index:Je,time:0}),ie.resize()}else ie.destroy()}function wd(){return!wd.f===Yd?(wd.f=Yd,Je=zd-1-Je,ie.reverse(),!0):void 0}function xd(){xd.ok||(xd.ok=!0,fd("ready"))}Cc=d("html"),Dc=d("body");var yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,Wd,Xd,Yd,Zd,$d,_d,ae,be,ce,de,ee,fe,ge,he,ie=this,je=d.now(),ke=ib+je,le=a[0],me=1,ne=a.data(),oe=d("<style></style>"),pe=d(N(Yb)),qe=d(N(kb)),re=d(N(xb)).appendTo(qe),se=(re[0],d(N(Ab)).appendTo(re)),te=d(),ue=d(N(Db+" "+Fb+rc)),ve=d(N(Db+" "+Gb+rc)),we=ue.add(ve).appendTo(re),xe=d(N(Ib)),ye=d(N(Hb)).appendTo(xe),ze=d(N(Jb)).appendTo(ye),Ae=d(),Be=d(),Ce=(se.data(),ze.data(),d(N(jc)).appendTo(ze)),De=d(N($b+rc)),Ee=De[0],Fe=d(N(mc)),Ge=d(N(nc)).appendTo(re),He=Ge[0],Ie=d(N(qc)),Je=!1,Ke={},Le={},Me={},Ne={},Oe={},Pe={},Qe={},Re={},Se=0,Te=[];
qe[Xc]=d(N(yb)),qe[Zc]=d(N(Mb+" "+Ob+rc,N(ic))),qe[Yc]=d(N(Mb+" "+Nb+rc,N(hc))),Qe[Xc]=[],Qe[Zc]=[],Qe[Yc]=[],Re[Xc]={},qe.addClass(Ic?mb:lb).toggleClass(qb,!e.controlsonstart),ne.fotorama=this,ie.startAutoplay=function(a){return ie.autoplay?this:(ce=de=!1,t(a||e.autoplay),jd(),this)},ie.stopAutoplay=function(){return ie.autoplay&&(ce=de=!0,jd()),this},ie.show=function(a){var b;"object"!=typeof a?(b=a,a={}):b=a.index,b=">"===b?Gd+1:"<"===b?Gd-1:"<<"===b?0:">>"===b?zd-1:b,b=isNaN(b)?L(b,yd,!0):b,b="undefined"==typeof b?Je||0:b,ie.activeIndex=Je=z(b),Id=E(Je),Jd=U(Je),Kd=x(Je+(Yd?-1:1)),Ed=[Je,Id,Jd],Gd=Md?b:Je;var c=Math.abs(Hd-Gd),d=w(a.time,function(){return Math.min(Vd*(1+(c-1)/12),2*Vd)}),f=a.overPos;a.slow&&(d*=10);var g=Dd;ie.activeFrame=Dd=yd[Je];var i=g===Dd&&!a.user;md(Cd,Dd.i!==yd[x(Fd)].i),lc(Ed,"stage"),tc(Mc?[Gd]:[Gd,E(Gd),U(Gd)]),rd("go",!0),i||fd("show",{user:a.user,time:d}),ce=!0;var j=ie.show.onEnd=function(b){if(!j.ok){if(j.ok=!0,b||cd(!0),i||fd("showend",{user:a.user}),!b&&Wd&&Wd!==e.transition)return ie.setOptions({transition:Wd}),void(Wd=!1);Sb(),Pb(Ed,"stage"),rd("go",!1),Hc(),od(),id(),jd()}};if(Sd){var k=Dd[Xc],l=Je!==Hd?yd[Hd][Xc]:null;ab(k,l,te,{time:d,method:e.transition,onEnd:j},Te)}else _(se,{pos:-r(Gd,Le.w,e.margin,Fd),overPos:f,time:d,onEnd:j});if(Gc(),Nd){Tc();var m=y(Je+h(Gd-Hd,-1,1));Rc({time:d,coo:m!==Je&&a.coo,guessIndex:"undefined"!=typeof a.coo?m:Je,keep:i}),Od&&Oc(d)}return be="undefined"!=typeof Hd&&Hd!==Je,Hd=Je,e.hash&&be&&!ie.eq&&H(Dd.id||Je+1),this},ie.requestFullScreen=function(){return Qd&&!ie.fullScreen&&(_d=Ec.scrollTop(),ae=Ec.scrollLeft(),Q(Ec),rd("x",!0),ee=d.extend({},Le),a.addClass(Zb).appendTo(Dc.addClass(jb)),Cc.addClass(jb),md(Cd,!0,!0),ie.fullScreen=!0,Rd&&vc.request(le),ie.resize(),Pb(Ed,"stage"),Sb(),fd("fullscreenenter")),this},ie.cancelFullScreen=function(){return Rd&&vc.is()?vc.cancel(b):kd(),this},ie.toggleFullScreen=function(){return ie[(ie.fullScreen?"cancel":"request")+"FullScreen"]()},T(b,vc.event,function(){!yd||vc.is()||Cd||kd()}),ie.resize=function(a){if(!yd)return this;var b=arguments[1]||0,c=arguments[2];ed(ie.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:R(a),[Le,c||ie.fullScreen||e]);var d=Le.width,f=Le.height,g=Le.ratio,i=Ec.height()-(Nd?ye.height():0);return q(d)&&(qe.addClass(ub).css({width:d,minWidth:Le.minwidth||0,maxWidth:Le.maxwidth||ad}),d=Le.W=Le.w=qe.width(),Le.nw=Nd&&p(e.navwidth,d)||d,e.glimpse&&(Le.w-=Math.round(2*(p(e.glimpse,d)||0))),se.css({width:Le.w,marginLeft:(Le.W-Le.w)/2}),f=p(f,i),f=f||g&&d/g,f&&(d=Math.round(d),f=Le.h=Math.round(h(f,p(Le.minheight,i),p(Le.maxheight,i))),re.stop().animate({width:d,height:f},b,function(){qe.removeClass(ub)}),cd(),Nd&&(ye.stop().animate({width:Le.nw},b),Rc({guessIndex:Je,time:b,keep:!0}),Od&&wc.nav&&Oc(b)),$d=c||!0,xd())),Se=re.offset().left,this},ie.setOptions=function(a){return d.extend(e,a),vd(),this},ie.shuffle=function(){return yd&&O(yd)&&vd(),this},ie.destroy=function(){return ie.cancelFullScreen(),ie.stopAutoplay(),yd=ie.data=null,j(),Ed=[],bd(Xc),vd.ok=!1,this},ie.playVideo=function(){var a=Dd,b=a.video,c=Je;return"object"==typeof b&&a.videoReady&&(Rd&&ie.fullScreen&&ie.cancelFullScreen(),G(function(){return!vc.is()||c!==Je},function(){c===Je&&(a.$video=a.$video||d(d.Fotorama.jst.video(b)),a.$video.appendTo(a[Xc]),qe.addClass(nb),Cd=a.$video,o(),we.blur(),De.blur(),fd("loadvideo"))})),this},ie.stopVideo=function(){return md(Cd,!0,!0),this},re.on("mousemove",od),Me=db(se,{onStart:gd,onMove:function(a,b){ld(re,b.edge)},onTouchEnd:hd,onEnd:function(a){ld(re);var b=(Nc&&!ge||a.touch)&&e.arrows&&"always"!==e.arrows;if(a.moved||b&&a.pos!==a.newPos&&!a.control){var c=s(a.newPos,Le.w,e.margin,Fd);ie.show({index:c,time:Sd?Vd:a.time,overPos:a.overPos,user:!0})}else a.aborted||a.control||qd(a.startEvent,b)},timeLow:1,timeHigh:1,friction:2,select:"."+Xb+", ."+Xb+" *",$wrap:re}),Oe=db(ze,{onStart:gd,onMove:function(a,b){ld(ye,b.edge)},onTouchEnd:hd,onEnd:function(a){function b(){Rc.l=a.newPos,id(),jd(),uc(a.newPos,!0)}if(a.moved)a.pos!==a.newPos?(ce=!0,_(ze,{time:a.time,pos:a.newPos,overPos:a.overPos,onEnd:b}),uc(a.newPos),Xd&&ld(ye,K(a.newPos,Oe.min,Oe.max))):b();else{var c=a.$target.closest("."+Mb,ze)[0];c&&sd.call(c,a.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:ye}),Ne=eb(re,{shift:!0,onEnd:function(a,b){gd(),hd(),ie.show({index:b,slow:a.altKey})}}),Pe=eb(ye,{onEnd:function(a,b){gd(),hd();var c=v(ze)+.25*b;ze.css(k(h(c,Oe.min,Oe.max))),Xd&&ld(ye,K(c,Oe.min,Oe.max)),Pe.prevent={"<":c>=Oe.max,">":c<=Oe.min},clearTimeout(Pe.t),Pe.t=setTimeout(function(){Rc.l=c,uc(c,!0)},Pc),uc(c)}}),qe.hover(function(){setTimeout(function(){fe||nd(!(ge=!0))},0)},function(){ge&&nd(!(ge=!1))}),M(we,function(a){Y(a),td.call(this,a)},{onStart:function(){gd(),Me.control=!0},onTouchEnd:hd}),we.each(function(){W(this,function(a){td.call(this,a)}),ud(this)}),W(Ee,ie.toggleFullScreen),ud(Ee),d.each("load push pop shift unshift reverse sort splice".split(" "),function(a,b){ie[b]=function(){return yd=yd||[],"load"!==b?Array.prototype[b].apply(yd,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(yd=P(arguments[0])),vd(),ie}}),vd()},d.fn.fotorama=function(b){return this.each(function(){var c=this,e=d(this),f=e.data(),g=f.fotorama;g?g.setOptions(b,!0):G(function(){return!E(c)},function(){f.urtext=e.html(),new d.Fotorama(e,d.extend({},cd,a.fotoramaDefaults,b,f))})})},d.Fotorama.instances=[],d.Fotorama.cache={},d.Fotorama.measures={},d=d||{},d.Fotorama=d.Fotorama||{},d.Fotorama.jst=d.Fotorama.jst||{},d.Fotorama.jst.style=function(a){{var b,c="";tc.escape}return c+=".fotorama"+(null==(b=a.s)?"":b)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:"+(null==(b=a.m)?"":b)+"px;\nheight:"+(null==(b=a.h)?"":b)+"px}\n.fotorama"+(null==(b=a.s)?"":b)+" .fotorama__thumb-border{\nheight:"+(null==(b=a.h-a.b*(a.q?0:2))?"":b)+"px;\nborder-width:"+(null==(b=a.b)?"":b)+"px;\nmargin-top:"+(null==(b=a.m)?"":b)+"px}"},d.Fotorama.jst.video=function(a){function b(){c+=d.call(arguments,"")}var c="",d=(tc.escape,Array.prototype.join);return c+='<div class="fotorama__video"><iframe src="',b(("youtube"==a.type?a.p+"youtube.com/embed/"+a.id+"?autoplay=1":"vimeo"==a.type?a.p+"player.vimeo.com/video/"+a.id+"?autoplay=1&badge=0":a.id)+(a.s&&"custom"!=a.type?"&"+a.s:"")),c+='" frameborder="0" allowfullscreen></iframe></div>\n'},d(function(){d("."+ib+':not([data-auto="false"])').fotorama()})}(window,document,location,"undefined"!=typeof jQuery&&jQuery);
;$( function()
{
    var targets = $( '[rel~=tooltip]' ),
        target  = false,
        tooltip = false,
        title   = false;

    targets.bind( 'mouseenter', function()
    {
        target  = $( this );
        tip     = target.attr( 'title' );
        tooltip = $( '<div id="tooltip"></div>' );

        if( !tip || tip == '' )
            return false;

        target.removeAttr( 'title' );
        tooltip.css( 'opacity', 0 )
            .html( tip )
            .appendTo( 'body' );

        var init_tooltip = function()
        {
            if( $( window ).width() < tooltip.outerWidth() * 1.5 )
                tooltip.css( 'max-width', $( window ).width() / 2 );
            else
                tooltip.css( 'max-width', 340 );

            var pos_left = target.offset().left + ( target.outerWidth() / 2 ) - ( tooltip.outerWidth() / 2 ),
                pos_top  = target.offset().top - tooltip.outerHeight() - 20;

            if( pos_left < 0 )
            {
                pos_left = target.offset().left + target.outerWidth() / 2 - 20;
                tooltip.addClass( 'left' );
            }
            else
                tooltip.removeClass( 'left' );

            if( pos_left + tooltip.outerWidth() > $( window ).width() )
            {
                pos_left = target.offset().left - tooltip.outerWidth() + target.outerWidth() / 2 + 20;
                tooltip.addClass( 'right' );
            }
            else
                tooltip.removeClass( 'right' );

            if( pos_top < 0 )
            {
                var pos_top  = target.offset().top + target.outerHeight();
                tooltip.addClass( 'top' );
            }
            else
                tooltip.removeClass( 'top' );

            tooltip.css( { left: pos_left, top: pos_top } )
                .animate( { top: '+=10', opacity: 1 }, 50 );
        };

        init_tooltip();
        $( window ).resize( init_tooltip );

        var remove_tooltip = function()
        {
            tooltip.animate( { top: '-=10', opacity: 0 }, 50, function()
            {
                $( this ).remove();
            });

            target.attr( 'title', tip );
        };

        target.bind( 'mouseleave', remove_tooltip );
        tooltip.bind( 'click', remove_tooltip );
    });
});
var $body,
	windowHeight,
	windowWidth,
	mediaPoint1 = 1024,
	mediaPoint2 = 768,
	mediaPoint3 = 480,
	mediaPoint4 = 320;


//
// var el = document.querySelector('.cafe-description__text');
// SimpleScrollbar.initEl(el);


//загрузка скрипта
// var scriptMap = document.createElement('script');
// scriptMap.src = "https://api-maps.yandex.ru/2.0/?load=package.standard,package.geoObjects&lang=ru-RU";
// document.documentElement.appendChild(scriptMap);

// var scriptTool = document.createElement('script');
// scriptTool.src = "https://abestuzhev.github.io/cafe-anderson/bower_components/tooltipster/dist/js/tooltipster.bundle.js";
// document.documentElement.appendChild(scriptTool);

/*main.js*/


var windowWidth = (window.innerWidth ); // вся ширина окна
var documentWidth = (document.documentElement.clientWidth ); // ширина минус прокрутка
// console.log('Ширина window: ' + windowWidth);
// console.log('Ширина wrapper: ' + documentWidth);
var documentHeight = (document.documentElement.clientHeight );
// console.log('высота ' + documentHeight);



$(window).on('load', function(){



    /*скролл при выборе доставки*/
    var orderDeliveryMap = $('.order-delivery__map').height(),
        orderDeliveryAddressList = $('.order-delivery-address__list'),
        orderDeliveryAddressListHeight = orderDeliveryAddressList.height();
    // console.log('orderDeliveryMap: ' + orderDeliveryMap);
    // console.log('orderDeliveryAddressList: ' + orderDeliveryAddressListHeight);


    function changeHeightAddressList (){
        orderDeliveryAddressList.each(function(index, elem){
            var elemHeight =  $(elem).height();
            // console.log('elemHeight: ' + elemHeight);
            if(elemHeight > 320){
                // new SimpleBar(orderDeliveryAddressList[0]);
                // new SimpleBar(orderDeliveryAddressList[1]);
                // new SimpleBar(orderDeliveryAddressList[2]);
                // new SimpleBar(orderDeliveryAddressList[3]);
                $(elem).addClass('scroll-wrap');
            }
        });
    }
    changeHeightAddressList();

    //хак для быстрого обрезания всего списка в модальном окне заказа торта

    function addClassCakesAddressList(){
        $('.popup-cake-order .order-delivery-address__list').addClass('scroll-wrap');
    }
    addClassCakesAddressList();

    // $(document).on('click', '.cake-card__hover', function(){
    //     $('.popup-cake-order .order-delivery-address__list').addClass('scroll-wrap');
    //     console.log('scroll-wrap add');
    // });




    if($('div').hasClass('js-mixed-list')){
        var containerEl = document.querySelector('.js-mixed-list');
        var mixer = mixitup(containerEl);
    }

    $(document).on('click', '.order-tabs__item', function(){
        changeHeightAddressList();
    });



    var permitPath = [
    '/factory-happiness.html',
    '/cafe-anderson/factory-happiness.html'
    ];

    function getScrollElem (elem){
        if($(window).width() <= 800) {
            new SimpleBar($(elem)[0]);
        }
    }
    if(permitPath.indexOf(location.pathname) > -1){
        getScrollElem('.factory-layout');
        $(window).on('resize', function () {
            getScrollElem('.factory-layout');
        });
    } else {
        return false;
    }

    var $datepicker = $('.datepicker-here');
    $datepicker.datepicker({
        minDate: new Date(),
        autoClose: true
    });
    $datepicker.on('focus', function () {
        $(this).parents('.datepicker-layout').addClass('active-datepicker');
    });


    $('#datepickerCustom').datepicker({
        minDate: new Date(),
        autoClose: true
    });
    $('#datepickerCustom').on('focus', function () {
        $(this).parents('.datepicker-layout').addClass('active-datepicker');
    });


    var disabledPartyDays = [0, 6];
    $('#party-datepicker').datepicker({
        minDate: new Date(),
        inline: true,
        onRenderCell: function (date, cellType) {
            if (cellType == 'day') {
                var day = date.getDay(),
                    isDisabled = disabledPartyDays.indexOf(day) != -1;

                return {
                    disabled: isDisabled
                }
            }
        }
    });

    //календарь в мероприятиях
    var eventDates = [1, 10, 12, 22];
    $('#event-datepicker').datepicker({
        inline: true,
        onRenderCell: function (date, cellType) {
            var currentDate = date.getDate();
            if (cellType == 'day' && eventDates.indexOf(currentDate) != -1) {
                return {
                    html: currentDate + '<span class="dp-note"></span>'
                }
            }
        }
    });
    $('.js-event-order-datepicker').datepicker({
        minDate: new Date()
    });









});

$(document).ready(function ($) {
    //------------------------------------------------------------custom

    function addReadonlyInput(elem){
        $(elem).attr('readonly', 'readonly');
    }

    addReadonlyInput('.datepicker-here');
    addReadonlyInput('.datepicker-custom');
    addReadonlyInput('#minMaxExample');
    addReadonlyInput('.datepicker-delivery-v2');
    addReadonlyInput('#event-datepicker');
    addReadonlyInput('.js-event-order-datepicker');
    addReadonlyInput('#party-datepicker');
    addReadonlyInput('.datepicker-layout input');
    addReadonlyInput('.datepicker-layout-v2 input');

    /*хлебные крошки - выпадающий список*/
    $(document).on('click', '.c-breadcrumb-word__active span', function(e){
        e.preventDefault();
        $(this).parent('.dropdown').toggleClass('open');
        $(this).siblings('.c-breadcrumb-dropdown__layout').toggleClass('is-visible');
    })


    function initCustomSelect(elem){
        $(elem).SumoSelect();

    }

    function initCustomSelectSearch(elem){
        $(elem).SumoSelect({
            search: true,
            searchText: 'Искать...'
        });
    }

    function initCustomDatepicker(elem){
       $(elem).datepicker({
            minDate: new Date()
            // autoClose: true

        });

       // var value = $(elem).val();
       // $(elem).val(value);
       // console.log(value);
       // elem.val(value);
    }


    function reloadValueDatepicker (elem){
        $.each($(elem), function(){
            // var value = $(this).val();
            // $(this).data('value', value);
            var dataValue = $(this).data('value');
            $(this).val(dataValue);
            // console.log(value);
            console.log($(this).val());
        });
    }



    // reloadValueDatepicker('#js-event-data__list .datepicker-custom-clock');



    var countCheckbox = 0;

    function addClonePanel(btn, list){
        var rand;
        function randomInteger(min, max) {
            rand = min - 0.5 + Math.random() * (max - min + 1);
            rand = Math.round(rand);
            return rand;
        }

        initCustomSelectSearch('#js-event-data__list .js-select-search-copy');
        initCustomSelect('#js-event-data__list .panel-event-date__item select');



        $(document).on('click', btn , function(e) {
            e.preventDefault();
            $(this)
                .parents('.c-form__item')
                .siblings('.panel-work-time__copy')
                .clone().appendTo(list);

            // var select = $(this)

            initCustomSelectSearch('#js-event-data__list .js-select-search-copy');
            initCustomSelectSearch('#js-dish-variation__list .js-select-search-copy');

            initCustomDatepicker('#js-event-data__list .panel-work-time__copy:last-child .datepicker-custom-clock');

            // reloadValueDatepicker('#js-event-data__list .datepicker-custom-clock');

            initCustomSelect('' + list + ' select');
            initCustomSelect('#js-dish-variation__list .panel-dish-variation__item:last-child select');
            initCustomSelect('#js-event-data__list .panel-event-date__item:last-child select');
            // console.log('initCustomSelectSearch');
            $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
            $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});
            $('.js-input--mode').mask('00:00 — 00:00', {
                clearIfNotMatch: true,
                placeholder: "__:__ — __:__"
            });

            randomInteger(1, 99999);


            countCheckbox +=1;
            // console.log(count);



            var checkbox = $(this)
                .parents('.c-form__item')
                .siblings('.panel-work-time__copy').find('input[type="checkbox"]');
            var checkLabel = $(this)
                .parents('.c-form__item')
                .siblings('.panel-work-time__copy').find('input[type="checkbox"]').siblings('label');

            // checkbox.attr('name', );

            checkbox.attr('name', 'panel-event-free-' + rand);
            checkbox.attr('id', 'panel-event-free-' + rand);
            checkLabel.attr('for', 'panel-event-free-' + rand);
            // console.log(checkLabel);


        });
    }



    addClonePanel('#js-work-time-coffee__add', '#js-panel-work-time__coffee');
    addClonePanel('#js-work-time-cafe__add', '#js-panel-work-time__cafe');
    addClonePanel('#js-work-time-mp__add', '#js-panel-work-time__mp');
    addClonePanel('#js-work-time-animator__add', '#js-panel-work-time__animator');
    addClonePanel('#js-dish-variation__add', '#js-dish-variation__list');
    addClonePanel('#js-event-data__add', '#js-event-data__list');

    $(document).on('click', '.c-form__del', function(e) {
        e.preventDefault();
        var $elem_item = $(this).parents('.panel-work-time__copy');
        $elem_item.remove();
    });

    $(document).on('click', '.testReload', function(e) {
        e.preventDefault();
    //    panel-dish-variation__list
    //     $('.panel-dish-variation__list select').each(function(index){
    //         $(this)[index].sumo.reload();
    //         console.log(index);
    //     });
        $('.panel-dish-variation__list select')[1].sumo.reload();
        console.log('OK!!!');


    });


    //административная панель
    $(document).on('click', '.panel-cafe__title', function(e){
        e.preventDefault();
        $(this).toggleClass('panel-cafe-show');
        $(this).siblings('.panel-cafe__body').slideToggle(100);
    });

    $(document).on('click', '.panel-cafe__title', function(e){
        e.preventDefault();
        $(this).toggleClass('panel-cafe-show');
        $(this).siblings('.panel-hall__body').slideToggle(100);
    });



    //управление рассылкой
    $('.dispatch-list__title input').on('change', function(){
        var self = $(this);
        if(self.is( ":checked" )){
            self.parents('.dispatch-list__title')
                .siblings('.dispatch-list')
                .find('input[type="checkbox"]')
                .prop( "checked", true );
        }else {
            self.parents('.dispatch-list__title')
                .siblings('.dispatch-list')
                .find('input[type="checkbox"]')
                .prop( "checked", false );
        }
    });

    var lenEvent = $('.dispatch-list__item input[name*="dispatch-event"]').length;
    // console.log('колдичество ' + lenEvent);



    function changeDispatchCheckbox(elem){
        var count;

        $('' + elem + ' input').each(function(index){
            count = index+1;
        });
        // console.log('количество each ' + elem + ': ' + count);

        $('' + elem + ' input').on('change', function(){
            var self = $(this);
            if(!self.is( ":checked" )){
                self.parents('.dispatch-list')
                    .siblings('.dispatch-list__title')
                    .find('input[type="checkbox"]')
                    .prop( "checked", false );
            }

            if($('' + elem + ' input[type=checkbox]:checked').length == count){
                self.parents('.dispatch-list')
                    .siblings('.dispatch-list__title')
                    .find('input[type="checkbox"]')
                    .prop( "checked", true );
            }
        });
    }

    changeDispatchCheckbox('.js-dispatch-news');
    changeDispatchCheckbox('.js-dispatch-event');




    //франшиза
    $('.franchise-title-layout').on('click', function(){
        var self = $(this);
        self.siblings('.franchise-content').slideToggle(100);
        self.find('.franchise-print').toggle();
    });


    function printData()
    {
        var divToPrint = document.getElementById("franchisePrint");
        var newWin= window.open("");
        newWin.document.write(divToPrint.outerHTML);
        newWin.print();
        newWin.close();
    }

    $('.franchise-print').on('click',function(){
        printData();
    });

    if($('input').hasClass('datepicker-custom') || $('div').hasClass('datepicker-custom')){
        $('.datepicker-custom').datepicker({
            minDate: new Date(),
            autoClose: true
        });
    }

    if($('input').hasClass('datepicker-custom-clock') || $('div').hasClass('datepicker-custom-clock')){
        $('.datepicker-custom-clock').datepicker({
            minDate: new Date(),
            // onSelect: function(formattedDate){
            //     $(this).val(formattedDate);
            //     var datePick = formattedDate;
            //     $(this).data('value', datePick);
            //     console.log('Выводит data-value: ' + $(this).data('value'));
            // }
        });
    }


    /*функция форматирования даты*/
    function formatDate(date) {
        var dd = date.getDate();
        if (dd < 10) dd = '0' + dd;

        var mm = date.getMonth() + 1;
        if (mm < 10) mm = '0' + mm;

        var yy = date.getFullYear();
        if (yy < 10) yy = '0' + yy;

        return dd + '.' + mm + '.' + yy;
    }

    if($('input').hasClass('datepicker-delivery-v2') || $('div').hasClass('datepicker-delivery-v2')){


        var datepickerDelivery = new Date(),
            datepickerDeliveryV2= $('.datepicker-delivery-v2');
        // datepickerDeliveryV2.val(formatDate(datepickerDelivery));
        datepickerDeliveryV2.datepicker({
            minDate: new Date(),
            autoClose: true
        });




    }


    

    $('document').on('click', '.order__btn.disabled', function(e){
        e.preventDefault();
    });

    $('.excursion-pay__item label').on('click', function(){
        $(this).parents('.excursion-pay__item').siblings().find('label').removeClass('active');
        $(this).addClass('active');
    });



    //модальное окно в экскурсиях
    $(document).on('change', '#excursion-pay-score', function(){
        if($(this).prop( "checked" )){
            $('.excursion-pay-score').slideDown(300);
        }
    });

    $(document).on('change', '#excursion-pay-card', function(){
        if($(this).prop( "checked" )){
            $('.excursion-pay-score').slideUp(300);
        }
    });


    /*изменение оплаты*/
    $('.order-pay__item').on('click', function(){
        var payRadio = $(this).children('input');
        if(payRadio.prop("checked")){
            $(this).siblings('.order-pay__item').find('label').removeClass('active');
            $(this).children('label').addClass('active');
        }
    });



    $(document).on('click', '.filter-hold__dropdown', function(e){
        e.preventDefault();
        $(this).parents('.filter-hold__item').siblings().removeClass('active');
        $(this).parents('.filter-hold__item').addClass('active');
        $(this).siblings('.filter-hold__submenu').slideDown(500);
    });



    // documentHeight
    function changeHeightBasketPopup (){
        var basketScroll = $('.popup-basket__scroll'),
            heightBasket = basketScroll.height();

        if (heightBasket >= documentHeight - 100){
            basketScroll.addClass('fixed-height-basket');
            // console.log('if ' + heightBasket);
            /*кастомный скролл*/
            basketScroll.jScrollPane();
        }else {
            basketScroll.removeClass('fixed-height-basket');
            // console.log('else ' + heightBasket);
        }
    }

    changeHeightBasketPopup();

    $(window).resize(function(){
        changeHeightBasketPopup();
    });
    /*картинки одной ширины*/

    $('.c-card-catalog__img').each(function(index, elem){
        var img = $(elem).children('img'),
            imgWidth = img.width(),
            $this = $(elem);

        // console.log('element ' + index + ': ' + 'width: ' + imgWidth);
        if(imgWidth < 390 ) {
            $this.addClass('big-product-img');
            // console.log('есть картинка меньше 390');
        }else {
            $this.removeClass('big-product-img');
            // console.log('работает но картинки нет');
        }
    });


    //показать все мероприятия по дням на странице Мероприятия
    $(document).on('click', '.c-card-event-timelist__more', function(e){
        e.preventDefault();
        var $this = $(this);

        var textBtn = $this.html();
        if(textBtn == "показать все"){
            $this.html("скрыть");
            $this.siblings('.c-card-event-timelist').addClass('show-item-all');
        }else{
            $this.html("показать все");
            $this.siblings('.c-card-event-timelist').removeClass('show-item-all');
        }
    });


    function changePartyTitlePopup (){
        $(document).on('click', '.js-party-order', function(){
            var letter = $(this).data('name'),
                title = $('.popup-party-order .popup-title').find('span');

            title.text('');
            title.append(letter);
            $('#title-party-order').val(letter);
        });
    }
    // changePartyTitlePopup();



    //появление мобильного чека в корзине
    $(document).on('click', '.basket__check-mobile', function(e){
        e.preventDefault();
        $('.basket__aside').toggleClass('active');
    });

    //изменение в оформлении заказа на другого пользователя
    $(document).on('change', '#order-user_other, .order-user_other',  function(){
        if($(this).prop( "checked" )){
            $('.order-user__list').css('display','none');
            $('.order-user__other-form').css('display','flex');
        }
    });
    $(document).on('change', '#order-user_auth, #order-user_auth-1', function(){
        if($(this).prop( "checked" )){
            $('.order-user__list').css('display','flex');
            $('.order-user__other-form').css('display','none');
        }
    });

    //редактировать профиль
    $(document).on('click', '.lk-profile__link-edit', function(e){
        e.preventDefault();
        $(this).parents('.lk-profile__item')
            .children('div:first-child')
            .hide();
        $(this).parents('.lk-profile__item')
            .children('.lk-profile-edit:eq(0)')
            .show();

        initProfilePlugin();

    });

    function initProfilePlugin(){
        //маска
        $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
        $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});

        /*селект*/
        $('.lk-profile-edit__child-list .js-select--child').SumoSelect();
        changeSelectFace('.lk-profile-edit__child-list .js-select--child', 'M','icon-boy-smiling','icon-girl-smiling');
    };

    // $(document).on('click', '.lk-profile__edit .c-button__medium', function(){
    //     $(this).parents('.lk-profile-edit').hide;
    //     $(this).parents('.lk-profile-item').children('div:first-child').show();
    // });

    /*слайдер для страницы Выпускные*/
    $('.graduation-party-banner__slider').owlCarousel({
        loop:true,
        items: 1,
        autoheight: true,
        nav: false
    });


    //плавный якорь
    function scrollToAnchor (elem) {
        $(document).on("click", elem, function (event) {
            // event.preventDefault();
            var id  = $(this).attr('href'),
                menuHeight = 0,
                top = $(id).offset().top,
                topIndent = top - menuHeight;
            // console.log('top: ' + top);
            // console.log('topIndent: ' + topIndent);
            $('html').animate({scrollTop: topIndent}, 1000);
        });
    };

    $('.graduation-party-banner__btn').click(function(e){
        e.preventDefault();
        var target = $($(this).attr('href'));
        if(target.length){

            var heightHeader = $('.header').height();
            var scrollTo = target.offset().top - (+heightHeader + 100);
            $('body, html').animate({scrollTop: scrollTo+'px'}, 800);
        }
    });

    // $('#excursion-program-btn').click(function(e){
    //     e.preventDefault();
    //     var target = $($(this).attr('href'));
    //     if(target.length){
    //
    //         var heightHeader = $('.header').height();
    //         var scrollTo = target.offset().top - (+heightHeader + 100);
    //         $('body, html').animate({scrollTop: scrollTo+'px'}, 800);
    //     }
    // });

    // scrollToAnchor('.graduation-party-banner__btn');


    //поиск по кафе на странице с тортами и в оформлении заказа
    $(document).on('keyup change', '.c-search-page__input', function(){
        checkAll('.order-delivery-address__list li', '.order-radio', '.c-search-page__input');
        checkAll('#js-box-search-additive .c-box-search__item', '.c-checkbox', '#js-box-search-additive .c-search-page__input');
        checkAll('#js-box-search-ingredient .c-box-search__item', '.c-checkbox', '#js-box-search-ingredient .c-search-page__input');
        checkAll('#js-box-search-event .c-box-search__item', ' .order-radio', '#js-box-search-event .c-search-page__input');
    });

    function checkAll(elem, whereSearch, input) {
        $(elem).each(function(i, item) {
            var value = $(this).find(whereSearch).text().toLowerCase().indexOf($(input).val().toLowerCase());
            if ( value >= 0 ) {
                $(this).show();
                // $(this).addClass('js-order-delivery-address__show');
            } else {
                $(this).hide();
                // $(this).removeClass('js-order-delivery-address__show');
            }
        });
    }

    checkAll('.order-delivery-address__list li', '.order-radio', '.c-search-page__input');
    checkAll('#js-box-search-additive .c-box-search__item', '.c-checkbox', '#js-box-search-additive .c-search-page__input');
    checkAll('#js-box-search-ingredient .c-box-search__item', ' .c-checkbox', '#js-box-search-ingredient .c-search-page__input');
    checkAll('#js-box-search-event .c-box-search__item', ' .order-radio', '#js-box-search-event .c-search-page__input');

    $(document).on('click', '.c-box-search__clear', function(e){
        e.preventDefault();
        $('.c-search-page__input').val('');
        $('.c-box-search__item').show();

    });

    //отписаться от подписки в личном кабинете
    $(document).on('click', '#lk-profile-subscription_unsubscribe', function(e){
        e.preventDefault();
        $('.lk-profile .lk-profile-subscription__box').hide();
        $('.lk-profile .lk-profile-subscription-del').show();

    });
    $(document).on('click', '#lk-profile-subscription-del__cancel', function(e){
        e.preventDefault();
        $('.lk-profile .lk-profile-subscription-del').hide();
        $('.lk-profile .lk-profile-subscription__box').show();
    });

    //изменнеие пароля в профиле личного кабинета
    $(document).on('click', '#lk-profile__change-pass', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-user')
        .css('display', 'none')
        .siblings('.lk-profile-edit__pass')
        .css('display', 'block');
    });

    // изменение подписки в профиле пользователя
    $('#lk-profile_change-subscription').on('click', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-subscription__box')
        .css('display', 'none')
        .siblings('.lk-profile-edit')
        .css('display', 'block');
    });
    // отмена изменения подписки в профиле пользователя
    $('#lk-profile_cancel-change').on('click', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-edit')
        .css('display', 'none')
        .siblings('.lk-profile-subscription__box')
        .css('display', 'block');
    });

    //добавляем элементы в профиле личного кабинета
    //добавление второго email

    $(document).on('click', '#js-lk-profile__add-email', function(e) {
        e.preventDefault();
        $(this)
            .parents('.c-form__item')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__email-list");
    });

    $(document).on('click', '#js-lk-profile__add-tel', function(e) {
        e.preventDefault();
        $(this)
            .parents('.c-form__item')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__tel-list");
        $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    });

    /*добавление полей в контактах ЛК*/
    $(document).on('click', '#js-lk-profile__add-info-all', function(e) {
        e.preventDefault();
        console.log('correct');
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__contact-list");
        // $('.js-input--date').mask('+7(000)000-00-00', {clearIfNotMatch: true});

        // initProfilePlugin();
    });

    /*добавление ребенка в профиле пользователя*/
    $(document).on('click', '#js-lk-profile__add-child', function(e) {
        e.preventDefault();
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__child-list");
        $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});

        initProfilePlugin();
    });


    $(document).on('click', '#js-lk-profile-edit__address', function(e) {
        e.preventDefault();
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__address-list");
    });


    $(document).on('click', '.c-form__del', function(e) {
        e.preventDefault();
        var $elem_item = $(this).parents('.c-form__item');
        var $element =  $(this).parents('.lk-profile-edit__copy');
        $element.remove();
        $elem_item.remove();
    });

    //скрыть/показать заказ в истории заказов
    $('.lk-history-item__header').on('click', function(e){
        e.preventDefault();
        $(this).parents('.lk-history-item').toggleClass('lk-history-item__body-show');
        $(this).siblings('.lk-history-item__body').slideToggle(300);
    });


    //очистить форму поиска
    $(document).on('click', '.order-delivery-search__clear', function(e){
        e.preventDefault();
        $(this).parents('.order-delivery-search__item').siblings().find('input').val('');
        $('.order-delivery-address__all').removeClass('show-item-all');

        // showDeliveryAddressCake('.order-delivery-address__item');
    });

    //показать все адреса кафе в заказе
    function showDeliveryAddressCake (elem){
        $(elem).each(function(i, elem){
            i < 6 ? $(elem).show() : $(elem).hide();
        });
    }
    // showDeliveryAddressCake('.order-delivery-address__item');




    $(document).on('click', '.order-delivery-address__all', function(e){
        var $this = $('.order-delivery-address__all');
        e.preventDefault();

        var textBtn = $this.html();
        if(textBtn == "показать все"){
            $this.html("скрыть");
            $this.siblings('.order-delivery-address__list').addClass('show-item-all');
        }else{
            $this.html("показать все");
            $this.siblings('.order-delivery-address__list').removeClass('show-item-all');
        }

    });

    //страница Оформление заказа. При фокусе на инпут с адресом, делаем активный radio button
    $('.order-delivery-custom__item input, .order-delivery-custom__item textarea').focus(function(){
        var $this = $(this);
        // var $thisRadioInput = $(this).parents('label').siblings('input[type="radio"]');
        $this.parents('label').siblings('input[type="radio"]').prop( "checked",true);

    });



    //свернуть/развернуть блок в корзине
    $('.basket-item__header').on('click', function(){
        var $this =  $(this);
        $this.parents('.basket-item').toggleClass('basket-body__show');
        setTimeout(function(){

        }, 150);

        $(this).siblings('.basket-item__body').slideToggle(100);
    });

    $('.basket-mix__item').on('click', function(){

        $('.basket-item__header').parents('.basket-item').addClass('basket-body__show');
        $('.basket-item__body').slideDown(100);
    });



    /*показываем попап на странице Создатели Андерсон*/
    $('.photo-point__icon').on('click', function(){
        var str = $(this).siblings('.photo-point__description').find('span').text().trim(),
            arr = str.split(' '),
            name = arr[0] + ' ' + arr[1],
            desc = '';
        arr.splice(0, 2);
        desc = arr.join(' ');
        $('.creators .popup-title').find('span').text(name);
        $('.creators .popup-body').find('p').text(desc);
        var popup = $('.creators .popup');
        popup.removeClass('is-visible');
        popup.addClass('is-visible');
    });

    $('.creators .popup-close').on('click', function(){
        $('.creators .popup').removeClass('is-visible');
    });

    /*фабрика счастья, клик по поинту*/
    $('.factory-point__img').on('click', function(){
        $('.popup').removeClass('is-visible');
        $(this).siblings('.popup').addClass('is-visible');
    });

    $('.factory-point .popup-close').on('click', function(e){
        e.preventDefault();
        $('.popup').removeClass('is-visible');
    });

    /*показываем маленький блок с выбранными товарами в карточке товара (мобильная версия)*/
    $(document).on('click', '.popup-product__check-mobile', function(e){
        e.preventDefault();
        $('.popup-product .popup-mini').addClass('active');
    });
    /*закрываем маленький попап с товарами*/
    $(document).on('click', '.popup-product__check-close', function(e){
        e.preventDefault();
        $('.popup-product .popup-mini').removeClass('active');
    });

    $('.popup-mini').on('click', function(e){
        e.preventDefault();

    });

    /*показываем категории меню в каталоге*/
    var filterBage = $('.filter-bage');

    filterBage.on('click', function(e){
        e.preventDefault();
        $(this).hide();
        $('.catalog-body').toggleClass('show-category');
        $(this).toggleClass('js-hide-word');
        $(this).find('.filter-bage__title span').html('Показать');
        $('.js-hide-word').find('.filter-bage__title span').html('Скрыть');
    });

    $('.filter-hold__close').on('click', function(e){
        e.preventDefault();
        filterBage.show();
        $('.catalog-body').removeClass('show-category');
        filterBage.toggleClass('js-hide-word');
        $('.filter-bage__title span').html('Показать');
    });




    $(window).on('resize', function () {
    	if(windowWidth <= 730){
    	    $('.filter-hold__close').on('click', function(e){
                e.preventDefault();
    	        $(this).parents('.filter-hold').slideUp(600);
            });
        }
    });

    if(windowWidth <= 730){
        $('.filter-hold__close').on('click', function(e){
            e.preventDefault();
            $(this).parents('.filter-hold').slideUp(600);
        });
    }





    /*слайдер карусель*/
    $('.carousel-slider').owlCarousel({
        loop:true,
        // nav:true,
        margin:20,
        // items: 4,
        // center: true,
        responsiveClass: true,
        responsive:{
            0:{
                items:1
            },
            540:{
                nav: true,
                items:2
            },
            780:{
                nav: true,
                items:3
            },
            1200:{
                nav: true,
                items:4
            },
            1600:{
                nav: true,
                items:5
            }
        }
    });

    $('.c-card-product__slider').owlCarousel({
        loop:true,
        // nav:true,
        margin:20,
        // items: 4,
        // center: true,
        responsive:{
            0:{
                items:1
            },
            600:{
                nav: true,
                items:2
            },
            1200:{
                nav: true,
                items:3
            },
            1600:{
                nav: true,
                items:3
            }
        }
    });

    /*слайдер карусель*/
    $('.publications-slider').owlCarousel({
        loop:true,
        nav:true,
        margin:20,
        items: 7,
        // center: true,
        stagePadding: 10,
        responsiveClass: true,
        responsive:{
            0:{
                items:1
            },
            480:{
                items:2
            },
            780:{
                nav: true,
                items:3
            },
            980:{
                nav: true,
                items:4
            },
            1200:{
                nav: true,
                items:4
            },
            1600:{
                nav: true,
                items:7
            },
            1920:{
                nav: true,
                items:7
            }
        }
    });


    $('#filter-cafe-all, #filter-cafe__mobile-all').on('change', function(){
        var $this = $(this),
            $elem = $('.filter-item');
        if($this.is(':checked')) {
            $elem.addClass('disable');
        }else{
            $elem.removeClass('disable');
        }
    });

    $('.top-message__close').on('click',function(e){
        e.preventDefault();
        $('.top-message').hide();
    });

    /*вписываем img в блок при любом размере изображения*/
    function fix_size() {
        var images = $('.c-pic_link img');
        images.each(setsize);

        function setsize() {
            var img = $(this),
                img_dom = img.get(0),
                container = img.parents('.c-pic_link');
            if (img_dom.complete) {
                resize();
            } else img.one('load', resize);

            function resize() {
                if ((container.width() / container.height()) < (img_dom.width / img_dom.height)) {
                    img.width('auto');
                    img.height('100%');
                    return;
                }
                img.height('auto');
                img.width('100%');
            }
        }

    }
    // $(window).on('resize', fix_size);
    // fix_size();
    //
    // if (typeof _current != 'undefined') {
    //     var mapImages = _current;
    // } else {
    //     var mapImages = $('.c-card-cafe__img img');
    // }

    /*если в городе одно кафе, делаем его inline*/
    $('.cafe-list__city').each(function(){
        var $this = $(this);
        var countElem = $this.find('.c-col-6').length;
        if(countElem == 1){
            $($this).addClass('cafe-list__one');

        }else{
            $($this).removeClass('cafe-list__one');
        }
    });



    //подключение тултипа
    $( '.tooltip' ).tooltipster({
        animation: 'grow',
        delay: 100,
        trigger : 'custom' ,
        maxWidth: 500,
        contentAsHTML: true,
        interactive: true,
        triggerOpen : {
            mouseenter : true ,
            touchstart : true
        },
        triggerClose : {
            mouseleave : true,
            click : true ,
            scroll : true ,
            tap : true
        }
    });


    //подключение тултипа
    $( '.tooltip-catalog' ).tooltipster({
        animation: 'grow',
        delay: 100,
        trigger : 'click' ,
        maxWidth: 500,
        functionBefore: function(instance, helper){
            if (helper.event.type == 'click') {
                instance.content('You opened me with a regular mouse <a href="https://www.google.ru/?hl=ru">click :)</a>.');
            }
            else {
                instance.content('You opened me by a tap on the screen :)');
            }
        },
        contentAsHTML: true,
        interactive: true,
        triggerOpen : {
            mouseenter : true ,
            touchstart : true
        },
        triggerClose : {
            mouseleave : true,
            click : true ,
            scroll : true ,
            tap : true
        }
    });



    $(".owl-carousel").owlCarousel({
        items: 1,
        loop: true,
        center: true,
        autoHeight:true,
        nav: true
    });


    $('.cafe-fotorama').on('fotorama:ready', function (e, fotorama) {
        // console.log(e.type);
        // console.log( fotorama.activeIndex);
        var path = fotorama.activeFrame.img;
        $('.bg-blur').attr('src', path);
    }).fotorama({
        width: '100%',
        // maxwidth: '100%',
        ratio: 17/11,
        loop: true,
        thumbwidth: 88,
        allowfullscreen: true,
        nav: 'thumbs',
        fit:'cover'
    });;

    /*Фоторама, слайдер мероприятий, слайдер отзывов*/
    // var $slider = $('.cafe-fotorama').fotorama({
    //     width: '100%',
    //     // maxwidth: '100%',
    //     ratio: 17/11,
    //     loop: true,
    //     thumbwidth: 88,
    //     allowfullscreen: true,
    //     nav: 'thumbs',
    //     fit:'cover'
    // });

    // $slider
    //     .on('fotorama:show', function (e, fotorama) {
    //         // pick the active thumb by id
    //         var path = fotorama.activeFrame.img;
    //         $('.bg-blur').attr('src', path);
    //         console.log('hello');
    //     });




    // $slider.on('fotorama:load', function (e, fotorama, extra) {
    //     console.log(extra.src + ' is loaded');
    //     console.log('hello');
    // });


    $('.cafe-holiday-slider').fotorama({
        width: '100%',
        maxwidth: '100%',
        // ratio: 16/9,
        loop: true,
        allowfullscreen: true,
        fit:'cover'
    });

    // $('.cafe-reviews-slider').fotorama({
    //     width: '100%',
    //     height: 'auto',
    //     maxwidth: '100%',
    //     loop: true,
    //     ratio: 16/5
    // });

    /*маски для телефона*/
    $('#request-call__tel, #reg__phone').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('#request-call__tel, #reg__phone').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});
    $('.js-input--loyalty').mask('000-000', {clearIfNotMatch: true });

    $('.js-input--mode').mask('00:00 — 00:00', {
        clearIfNotMatch: true,
        placeholder: "__:__ — __:__"
    });
    $('input[name="form_text_30"]').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('input[name="form_text_52"]').mask('+7(000)000-00-00', {clearIfNotMatch: true});

    /*показ номера телефона в карточке кафе*/
    $('.cafe-info__item-col .c-button').on('click', function(e){
        e.preventDefault();
        $(this).hide();
        $(this).parents('.l-button').siblings('.cafe-info__phone-number').show();
    });

    /*функция показа модального окна*/
    function showPopup(icon, popup) {
        $(document).on('click', icon, function (e) {
            var $html = $('html');
            e.preventDefault();
            $(popup).addClass('is-visible');
            $('.mfp-bg').addClass('is-visible');


            $html.addClass('lock-html');
            $('body').addClass('fixed-input');
            if(windowWidth > documentWidth){
                $html.css({
                    'margin-right':'17px'
                });
                $('.mfp-wrap').css({
                    'overflow-y':'scroll'
                });
                // console.log('Есть полоса прокрутки');
            }else {
                // console.log('Нет полосы прокрутки');
            }
        });
    }

    $(document).on('click', '.popup-close', function (e) {
        e.preventDefault();
        var $html = $('html');
        $(this).parents('.mfp-wrap').removeClass('is-visible');
        $('.mfp-bg').removeClass('is-visible');
        $html.css({
            'margin-right':'0'
        }).removeClass('lock-html');
        $('body').removeClass('fixed-input');
        $('.header.sticky').css({
            // 'right':'0'
        });
        // console.log('popup-close!!!!');
    });

    $(document).on('click', '.js-popup-close', function (e) {
        e.preventDefault();
        var $html = $('html');
        $(this).parents('.mfp-wrap').removeClass('is-visible');
        $('.mfp-bg').removeClass('is-visible');
        $html.css({
            'margin-right':'0'
        }).removeClass('lock-html');
        $('.wrapper').removeClass('fixed-input');
        $('.header.sticky').css({
            // 'right':'0'
        });
    });


    showPopup(".header-phone", '.popup__request-call');
    showPopup(".header-email", '.popup__write-to-us');
    showPopup(".js-header-cabinet", '.popup-authorization');
    showPopup(".header-city > a", '.popup-city');
    showPopup(".header-mobile__city", '.popup-city');
    showPopup(".c-card-cafe__menu", '.popup__menu');
    showPopup(".c-card-vacancy .c-button", '.popup__vacancy');
    showPopup(".c-card_menu", '.popup__menu');
    // showPopup(".c-reviews-positive", '.popup__review');
    // showPopup(".c-reviews-negative", '.popup__review');
    showPopup(".footer-reviews__icon", '.popup__review');
    // showPopup(".popup-forgot-password", '.popup__recovery-password');
    // showPopup(".catalog-product .c-card-catalog__img", '.popup-product');
    // showPopup(".catalog-product .c-card-catalog__title", '.popup-product');
    showPopup(".js-show-product-order", '.popup-product');
    showPopup("#loadCake", '.popup-cake-order');
    showPopup(".cake-card__hover", '.popup-cake-order');
    showPopup(".js-easter-btn", '.popup-cake-order');
    showPopup("#lk-profile-subscription-del__ok", '.popup-subscription-del');
    showPopup(".js-party-order", '.popup-party-order');
    showPopup(".c-card-event__link--more", '.popup-event');
    showPopup(".c-card-event__link--basket", '.popup-event-basket');
    showPopup(".c-card-event__link--one-click", '.popup-event-one-click');
    showPopup(".excursion-btn", '.popup-excursion-order');

    showPopup(".js-show-cake-order", '.popup-cake-order');



    // $(document).on('click', '#cake-order-issue', function (e) {
    //     e.preventDefault();
    //     $(this).parents('.popup-cake-order').removeClass('is-visible');
    //     $('.popup-cake-order-congratulation').addClass('is-visible');
    // });

    $(document).on('click', '.c-card-event__btn--click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-event').removeClass('is-visible');
        $('.popup-event-one-click').addClass('is-visible');
    });

	$(document).on('click', '.factory-point .c-button', function (e) {
        e.preventDefault();
        $(this).parents('.factory-point .popup').removeClass('is-visible');
        $('.popup-gallery').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('html').css({
            'margin-right':'0'
        }).addClass('lock-html');

        if(windowWidth > documentWidth){
            $('html').css({
                'margin-right':'17px'
            });
            $('.mfp-wrap').css({
                'overflow-y':'scroll'
            });
            // console.log('Есть полоса прокрутки');
        }

    });

    $(document).on('click', '.c-card-event__btn--basket', function (e) {
        e.preventDefault();
        $(this).parents('.popup-event').removeClass('is-visible');
        $('.popup-event-basket').addClass('is-visible');
    });

    // $(document).on('click', '.popup-forgot-password', function (e) {
    //     e.preventDefault();
    //     $(this).parents('.popup-authorization').removeClass('is-visible');
    //     $('.popup__recovery-password').addClass('is-visible');
    // });


    $('.popup-authorization .popup-authorization__reg').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-authorization').removeClass('is-visible');
        $('.popup-reg').addClass('is-visible');
    });

    $('.popup-reg .popup-authorization__auth').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-reg').removeClass('is-visible');
        $('.popup-authorization').addClass('is-visible');
    });

    /*мобильные кнопки показа попапов Регистрация/Авторизация*/
    $("#mobile-reg").click(function (e) {
        e.preventDefault();
        $('.popup').removeClass('is-visible');
        $('.popup-reg').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('body').addClass('fixed-input');
        $('html').addClass('lock-html');
        $(this).parents('.header-mobile__auth').removeClass('.popup-slide__show');
    });

    $("#mobile-auth").click(function (e) {
        e.preventDefault();
        $('.popup').removeClass('is-visible');
        $('.popup-authorization').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('body').addClass('fixed-input');
        $('html').addClass('lock-html');
        $(this).parents('.header-mobile__auth').removeClass('.popup-slide__show');
    });




    /*поиск в шапке*/
    $(".header-search .icon-search, .header-search .symbol-search").click(function (e) {
        e.preventDefault();
        $('.header-search__form').toggleClass('is-visible');
        $('.header-search-result').toggleClass('is-visible');
    });

    /*показ мобильного поиска*/
    $(".header-mobile__search .icon-search, .header-mobile__search .symbol-search").click(function (e) {
        e.preventDefault();
        $('.header-mobile__search-box').show();
        $('.header-mobile__menu').hide();
        $('.header-mobile__search .icon-search, .header-mobile__search .symbol-search').hide();
        $('.icon-search-mobile').show();
        $('.header-mobile__search-input').focus();
        $('.header-mobile__auth').removeClass('popup-slide__show');
        // $('.header').addClass('header-top__hide');
    });

    /*скрываем мобильный поиск*/
    $(".icon-search-mobile").click(function (e) {
        e.preventDefault();
        $('.header-mobile__search-box').hide();
        $('.header-mobile__menu').show();
        $('.header-mobile__search .icon-search').show();
        $('.header-mobile__search .symbol-search').show();
        $(this).hide();
        // $('.header').removeClass('header-top__hide');
    });

    $(document).mouseup(function (e) { // событие клика по веб-документу
        var div = $('.header-mobile__search-box'); // тут указываем ID элемента
        if (!div.is(e.target) // если клик был не по нашему блоку
            && div.has(e.target).length === 0) { // и не по его дочерним элементам

            $('.header-mobile__menu').show();
            $('.header-mobile__search-box').hide();
            $('.header-mobile__search .icon-search').show();
            $('.header-mobile__search .icon-search-mobile').hide();
            // $('.header').removeClass('header-top__hide');
        }
    });

    // закрытие по клику все области экрана
    $(".popup-bg").click(function (e) {
        e.preventDefault();
        $('.popup').parents().removeClass('is-visible');
        // $('.fixed-overlay').removeClass('is-visible');
        $('html').removeClass('body-popup');
    });




    /*клик вне области экрана для корзины*/
    function hidePopup (element, instrumentHide){
        $(document).mouseup(function (e) { // событие клика по веб-документу
            var div = $(element); // тут указываем ID элемента
            if (!div.is(e.target) // если клик был не по нашему блоку
                && div.has(e.target).length === 0) { // и не по его дочерним элементам
                div.removeClass(instrumentHide); // скрываем его
                // $('.fixed-overlay').removeClass('is-visible');
                // $('body').removeClass('body-popup');
            }
        });
    }

    // событие клика по веб-документу
    // $(document).mouseup(function (e) {
    //
    //     var popup = $('.popup');
    //     if (!popup.is(e.target)
    //         && !popup.has(e.target).length
    //         && !$('.popup-mini').is(e.target)
    //     ) {
    //         popup.parents('.mfp-wrap').removeClass('is-visible');
    //         $('.mfp-bg').removeClass('is-visible');
    //         $('html').css({
    //             'margin-right':'0'
    //         }).removeClass('lock-html');
    //     }
    // });

    /*скрываем попапы вне зоны элемента для карточки товара*/
    $(document).mousedown(function (e) { // событие клика по веб-документу
        // var div = $('.popup');
        // тут указываем ID элемента
        // var div2 = $('.popup-mini');


        function hideOutZone(elem, elem2, elem3, elem4){
            var div = $(elem);
            var div2 = $(elem2);
            var div3 = $(elem3);
            var div4 = $(elem4);
            if (!div.is(e.target)
                && div.has(e.target).length === 0
                && !div2.is(e.target)
                && div2.has(e.target).length === 0
                && !div3.is(e.target)
                && div3.has(e.target).length === 0
                && !div4.is(e.target)
                && div4.has(e.target).length === 0) {
                // div.removeClass(instrumentHide); // скрываем его
                // console.log('true');
                div.parents('.mfp-wrap').removeClass('is-visible');
                div.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div.parents('html').removeClass('lock-html').css('margin-right','0');
                // div.find('.popup-close').trigger('click');

                var url = localStorage.getItem('backUrl');
                if (url !== null) {
                    window.history.pushState(null, null, url);
                    localStorage.removeItem("backUrl");
                }

                div2.parents('.mfp-wrap').removeClass('is-visible');
                div2.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div2.parents('html').removeClass('lock-html').css('margin-right','0');

                div3.parents('.mfp-wrap').removeClass('is-visible');
                div3.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div3.parents('html').removeClass('lock-html').css('margin-right','0');

                div4.parents('.mfp-wrap').removeClass('is-visible');
                div4.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div4.parents('html').removeClass('lock-html').css('margin-right','0');
            }

        }



        // if (localStorage.getItem('backUrl') !== null) {
        //     var serialObj = JSON.stringify(backUrl);
        //     window.history.pushState(null, null, '/easter/');
        //     localStorage.setItem('backUrl', serialObj);
        //
        //     localStorage.removeItem("backUrl");
        // } else {
        //     return false;
        // }




        if (e.which === 1) {
            hideOutZone('.popup', '.popup-mini', '.datepicker', '.main-user-consent-request-popup');
        }

    });


    hidePopup('.popup-basket', 'popup-slide__show');
    hidePopup('.header-mobile__auth', 'popup-slide__show');
    hidePopup('.header-search__form', 'is-visible');
    hidePopup('.header-search-result', 'is-visible');
    hidePopup('.c-breadcrumb-dropdown__layout', 'is-visible');
    hidePopup('.c-breadcrumb-word__active', 'open');


    /*юоковые кнопки отзыва*/
    var $reviews_btn = $(".c-reviews__btn"),
        clickCount;
    $reviews_btn.attr("data-count", "0");
    var isMobile = {
        Android:        function() { return navigator.userAgent.match(/Android/i) ? true : false; },
        BlackBerry:     function() { return navigator.userAgent.match(/BlackBerry/i) ? true : false; },
        iOS:            function() { return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false; },
        Windows:        function() { return navigator.userAgent.match(/IEMobile/i) ? true : false; },
        any:            function() { return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());  }
    };
    if ( isMobile.any() ) {
        $reviews_btn.on("click", function(){
            clickCount = $(this).attr("data-count");
            clickCount ++;
            $(this).parent('.c-reviews__item').siblings().removeClass('active');
            if (clickCount == 1) {
                $(this).attr("data-count", clickCount);
                $(this).parent('.c-reviews__item').addClass('active');
                return false;
            } else if (clickCount == 2){
                $(this).parent('.c-reviews__item').removeClass('active');
                $(this).attr("data-count", "0");
                showPopup(".c-reviews-positive", '.popup__review');
                showPopup(".c-reviews-negative", '.popup__review');
            }else {
                return true;
            }
        });
    }

    if ( !isMobile.any() ) {
        $reviews_btn.hover(function(){
            clickCount = $(this).attr("data-count");
            clickCount ++;
            $(this).parent('.c-reviews__item').siblings().removeClass('active');
            if (clickCount == 1) {
                $(this).attr("data-count", clickCount);
                $(this).parent('.c-reviews__item').addClass('active');
                return false;
            } else if (clickCount == 2){
                showPopup(".c-reviews-positive", '.popup__review');
                showPopup(".c-reviews-negative", '.popup__review');
                $(this).parent('.c-reviews__item').removeClass('active');
                $(this).attr("data-count", "0");
            }else {
                return true;
            }
        });
    }


    // мобильный заказать звонок, показываем форму и удаляем надпись
    $(".mobile-request-call_inquiry").click(function (e) {
        e.preventDefault();
        $(this).css({
            'opacity': '0',
            'visibility': 'hidden',
            'display':'none'
        });
        $('.mobile-request-call__form').css({
            'opacity': '1',
            'visibility': 'visible',
            'display':'block'
        });
    });

    /*соглашение на обработку персональных данных*/
    function DisabledFormButton(form, check, btn_form){
        $("form input[type='checkbox']").on('change', function(){
            if($(check).prop('checked')){
                $(btn_form).removeAttr('disabled');
                // console.log('check');
            }else {
                $(btn_form).attr('disabled', 'disabled');
                // console.log('check else');
            }
        });
    }

    DisabledFormButton('#popup-reg','#reg__regulations','#popup-reg button');
    DisabledFormButton('#popup__write-to-us','#write-to-us__regulations','#popup__write-to-us button');
    DisabledFormButton('#popup__request-call','#request-call__regulations','#popup__request-call button');
    DisabledFormButton('#popup__vacancy','#vacancy__regulations','#popup__vacancy button');
    DisabledFormButton('#order-auth-new','#order-auth-new__regulations','#order-auth-new button');
    DisabledFormButton('#cake-order-form','#cake-order__regulations','#cake-order-form button');
    DisabledFormButton('#excursion-form','#excursion__regulations','#excursion-form button');



    /*показываем в попапе заказать звонок список городов*/
    $(".mobile-request-call_city").on('click', function (e) {
        e.preventDefault();
        console.log('click click');
        // $('.popup-request-city').show();
        $('.popup-request-city').addClass('popup-show');
    });

    $(".popup-request-city").click(function (e) {
        e.preventDefault();
        $('.popup-request-city').removeClass('popup-show');
        // $('.popup-request-city').hide();
        $('.popup__request-call').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('html').css({
            'overflow':'hidden',
            'margin-right':'17px'
        });
    });

    /*попап корзины*/
    $('.icon-basket, .header .symbol-basket, .header .symbol-basket-2, .header-basket__count').on('click', function () {
        $('.popup-basket').addClass('popup-slide__show');
        $('.header').addClass('header-top__no-hide');
        // $('html').addClass('lock-html');
    });

    $('.popup-basket__close').on('click', function () {
        $('.popup-basket').removeClass('popup-slide__show');
        $('.header').removeClass('header-top__no-hide');
    });

    $('.popup-basket__scroll').on( 'mousewheel DOMMouseScroll', function (e) {

        var e0 = e.originalEvent;
        var delta = e0.wheelDelta || -e0.detail;

        this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
        e.preventDefault();
    });


    /*проверяет в фильтре наличие селекта и еслит есть делает родитель блочным для отображения в мобильной версии*/
    $('.filter').each(function(){
        var $filterBody =  $('.filter-item__body');
        $filterBody.has('select').css('display', 'block');
        $filterBody.has('input[type="text"]').css('display', 'block');
        $filterBody.has('select').parents('.filter-item').css('border','none');
        $filterBody.has('input[type="text"]').parents('.filter-item').css('border','none');
    });

    /*появление фильтра в мобильной версии*/

    function ShowMobileBtnFilter (btn, showBlock) {
        $(btn).on('click', function (e) {
            e.preventDefault();
            $(this).toggleClass('dropdown-show');
            $(this).siblings(showBlock).slideToggle(200);
        });
    }
    ShowMobileBtnFilter('.filter-mobile-btn', '.filter');
    ShowMobileBtnFilter('.filter-mobile-btn', '.reviews-form');
    ShowMobileBtnFilter('.filter-hold-mobile-btn', '.filter-hold');



    /*показ подменю в мобильной версии меню*/
    $('.header-mobile__list .icon-dropdown').on('click', function (e) {
        e.preventDefault();
        $(this).toggleClass('dropdown-show');
        $(this).siblings('.header-mobile__sublist').slideToggle(200);
        $(this).parents('.header-mobile__item').toggleClass('active');
    });

    /*функция счета больше/меньше*/
    function catalogItemCounter(field) {
        var fieldCount = function (el) {
            var
                // Мин. значение
                min = el.data('min') || false,
                // Макс. значение
                max = el.data('max') || false,
                // Кнопка уменьшения кол-ва
                dec = el.prev('.dec'),
                // Кнопка увеличения кол-ва
                inc = el.next('.inc');
            function init(el) {
                if (!el.attr('disabled')) {
                    dec.on('click', decrement);
                    inc.on('click', increment);
                }
                // Уменьшим значение
                function decrement() {
                    var value = parseInt(el[0].value);
                    value--;

                    if (!min || value >= min) {
                        el[0].value = value;
                    }
                };
                // Увеличим значение
                function increment() {
                    var value = parseInt(el[0].value);

                    value++;

                    if (!max || value <= max) {
                        el[0].value = value++;
                    }
                };
            }
            el.each(function () {
                init($(this));
            });
        };
        $(field).each(function () {
            fieldCount($(this));
        });
    }
    // catalogItemCounter('.fieldCount');

   /*мобильное меню*/
	$('.header-mobile__menu').on('click', function(){
		$(this).toggleClass('icon-menu__transform');
		$('.header-mobile__dropdown').toggleClass('popup-show');
		// $('.header').toggleClass('header-top__hide');
        $('html').toggleClass('overflow');
        $('.c-reviews__item').toggleClass('is-hide');


        if($('.header').hasClass('sticky')){
            $('.header-mobile__dropdown').addClass('menu-sticky');
        }else {
            $('.header-mobile__dropdown').removeClass('menu-sticky');
        }
	});
    // $('.header').hasClass('.sticky').children('.header-mobile__dropdown').addClass('menu-sticky');

    $('.header-mobile__dropdown-close').on('click', function(){
        $('.header-mobile__menu').toggleClass('icon-menu__transform');
        $('.header-mobile__dropdown').toggleClass('popup-show');
        $('html').removeClass('overflow');
        $('.c-reviews__item').removeClass('is-hide');
	});


	$('.header-mobile__cabinet').on('click', function(){
		$('.header-mobile__auth').toggleClass('popup-slide__show');
	});

    //кнопка вверх
    function backToTop (btnElem, parentElem){
        var offset = 300,
            offset_opacity = 1200,
            scroll_top_duration = 700,
            $back_to_top = $(btnElem);
        //кнопка назад
        $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) {
                $back_to_top.addClass('cd-fade-out');
            }
        });

        $back_to_top.on('click', function(event){
            event.preventDefault();
            $(parentElem).animate({
                    scrollTop: 0
                }, scroll_top_duration
            );
        });
    }

    backToTop('.cd-top', 'body,html');
    backToTop('.popup-product__btn-back', '.popup');


    var wrapperHeight = parseInt($('.wrapper').height());
    /*липкая шапка*/
    $(window).scroll(function(){
        var bo = $(window).scrollTop();
        var $header = $(".header");
        var $headerWrap = $(".header-wrap");
        var $logo = $("#symbol-logo");
        var $headerHeight = $headerWrap.height();
        if ( bo >= 1 ) {/*значение при котором не дергается ничего 106*/
            $header.addClass('header-top__hide');
            // $header.addClass('sticky');
            $headerWrap.addClass('sticky');
            $logo.addClass('fixed-logo');

            $('main').css({
                'padding-top': $headerHeight
            });
            // $header.addClass('fixed-header');
        } else {
            $header.removeClass('header-top__hide');
            // $header.removeClass('sticky');
            $headerWrap.removeClass('sticky');
            $logo.removeClass('fixed-logo');
            // $header.removeClass('fixed-header');
            $('main').css({
                'padding-top': '0'
            });
        }

        // console.log('высота wrapperHeight: ' + wrapperHeight)
        if( wrapperHeight + 10 > documentHeight){
            $('.wrapper').css({
                'padding-bottom': '7rem'
            })
        }

        if( wrapperHeight + 300 > documentHeight){
            $('.wrapper').css({
                'padding-bottom': '0'
            })
        }
    });

    /*кастомный селект*/
    $('.c-select').SumoSelect( {
        forceCustomRendering: false
    });
    $('.c-select--search').SumoSelect( {
        forceCustomRendering: false,
        search: true,
        searchText: 'Искать...'
    });

    function showNegative(clickElem){
        $(clickElem).on('click', function(){
            var select = $('.popup__review .c-select');
            select.val('48');
            select[0].sumo.reload();
            // select[0].sumo.selectItem('48');
            var $icon = select.parents('.reviews-form__type').find('.reviews-form__type-icon');
            $icon.removeClass('icon-rabbit-positive');
            $icon.addClass('icon-rabbit-negative');
            // console.log('функция сработала при клике js-negative');
            // console.log(select.val());
        });
    }
    showNegative('.js-negative');
    showNegative('.c-reviews-negative');

    function showPositive(clickElem){
        $(clickElem).on('click', function(){
            var select = $('.popup__review .c-select');
            select.val('47');
            select[0].sumo.reload();
            var $icon = select.parents('.reviews-form__type').find('.reviews-form__type-icon');
            $icon.removeClass('icon-rabbit-negative');
            $icon.addClass('icon-rabbit-positive');
            // select[0].sumo.selectItem('47');
            // console.log('функция сработала при клике js-positive');
            // console.log(select.val());
        });
    }
    showPositive('.js-positive');
    showPositive('.c-reviews-positive');



    function changeRabbitFace (select){
        $(select).on("change",function() {
            var valReview = $(this).val();
            var $icon = $(this).parents('.reviews-form__type').find('.reviews-form__type-icon');

            if (valReview == 48 ) {
                $icon.removeClass('icon-rabbit-positive');
                $icon.addClass('icon-rabbit-negative');
            } else {
                $icon.removeClass('icon-rabbit-negative');
                $icon.addClass('icon-rabbit-positive');
            }
        });
    }

    changeRabbitFace('#form_dropdown_SIMPLE_QUESTION_257');

    function changeSelectFace (select, value, icon_1, icon_2){
        $(select).on("change",function() {
            var valReview = $(this).val();
            var $icon = $(this).parents('.c-select-layout').find('.c-select__icon');
            console.log('changeSelectFace');

            if (valReview == value ) {
                $icon.removeClass(icon_2);
                $icon.addClass(icon_1);
                console.log('boy');
            } else {
                $icon.removeClass(icon_1);
                $icon.addClass(icon_2);
                console.log('girl');
            }
        });
    }

    changeSelectFace('.lk-profile__child-gender', 'M','icon-boy-smiling','icon-girl-smiling');






    /*простые табы*/
    $(document).on('click', '.tabs-menu a', function(event) {
        event.preventDefault();
        $(this).parent().addClass("current");
        $(this).parent().siblings().removeClass("current");
        var tab = $(this).attr("href");
        $(this).parents('.tabs-menu').parent().siblings('.tab').find(".tab-content").not(tab).css("display", "none");
        $(tab).fadeIn();
    });

    /*scroll*/
    // $(".popup-basket__scroll").scrollBox();
    // $('#scrollbarY').tinyscrollbar();

    /*hover в меню*/
    // $('.header-menu__item--about').hover( function(){
    //    $('.header-subnavigation').addClass('is-visible');
    // });
    //
    // $('.header-subnavigation').mouseleave(function(){
    //     $(this).removeClass('is-visible');
    // });

/*скрол карты*/
    // var target = $('#map');
    // var targetPos = target.offset().top;
    // var winHeight = $(window).height();
    // var scrollToElem = targetPos - winHeight;
    // $(window).scroll(function(){
    //     var winScrollTop = $(this).scrollTop();
    //     if(winScrollTop > scrollToElem){
    //         //сработает когда пользователь доскроллит к элементу с классом .elem
    //         $(window).offset(60);
    //     }
    // });

    /*Порой на страницах с «резиновой» версткой необходимо знать ширину скролбара, чтобы правильно вычислить размеры внутренних элементов и их положение. Эта задача решается с помощью следующего алгоритма:

добавить два div в body и разместить их за пределами экрана;
определить ширину внутреннего div;
установить значение «scroll» свойства overflow у внешнего div;
опять определить ширину внутреннего div;
удалить оба div;
вернуть разницу между измеренными ранее значениями ширины.*/
    // function scrollbarWidth() {
    //     var div = $('<div style="width:50px; height:50px; overflow:hidden; position:absolute; top:-200px; left:-200px;"><div style="height:100px;"></div></div>').appendTo('body');
    //     var w1 = $('div', div).innerWidth();
    //     div.css('overflow-y', 'scroll');
    //     var w2 = $('div', div).innerWidth();
    //     $(div).remove();
    //     return (w1 - w2);
    // }
    //
    // var resScrollWidtn = scrollbarWidth();
    // console.log('Ширина скролбара страницы: ' + resScrollWidtn);

});



    /*-------------------------------------------------------------*/

    /*-------------------------------------------------------------*/

// });

    //------------------------------------------------------------custom###
//
// 	$body = $('body');
// 	windowWidth = $(window).width();
// 	windowHeight = $(window).height();
//
// 	pageWidget(['index']);
// 	getAllClasses('html','.elements_list');
// });
//
// $(window).on('load', function () {
// 	loadFunc();
// });
//
// $(window).on('resize', function () {
// 	resizeFunc();
// });
//
// $(window).on('scroll', function () {
// 	scrollFunc();
// });
//
// function loadFunc() {
//
// }
// function resizeFunc() {
// 	updateSizes();
// }
//
// function scrollFunc() {
// 	updateSizes();
// }
//
// function updateSizes() {
// 	windowWidth = $(window).width();
// 	windowHeight = $(window).height();
// }

// if ('objectFit' in document.documentElement.style === false) {
// 	document.addEventListener('DOMContentLoaded', function () {
// 		Array.prototype.forEach.call(document.querySelectorAll('img[data-object-fit]'), function (image) {
// 			(image.runtimeStyle || image.style).background = 'url("' + image.src + '") no-repeat 50%/' + (image.currentStyle ? image.currentStyle['object-fit'] : image.getAttribute('data-object-fit'));
//
// 			image.src = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'' + image.width + '\' height=\'' + image.height + '\'%3E%3C/svg%3E';
// 		});
// 	});
// }

//Functions for development
// function getAllClasses(context, output) {
// 	var finalArray = [],
// 		mainArray = [],
// 		allElements = $(context).find($('*'));//get all elements of our page
// 	//If element has class push this class to mainArray
// 	for (var i = 0; i < allElements.length; i++) {
// 		var someElement = allElements[i],
// 			elementClass = someElement.className;
// 		if (elementClass.length > 0) {//if element have not empty class
// 			//If element have multiple classes - separate them
// 			var elementClassArray = elementClass.split(' '),
// 				classesAmount = elementClassArray.length;
// 			if (classesAmount === 1) {
// 				mainArray.push('.' + elementClassArray[0] + ' {');
// 			} else {
// 				var cascad = '.' + elementClassArray[0] + ' {';
// 				for (var j = 1; j < elementClassArray.length; j++) {
// 					cascad += ' &.' + elementClassArray[j] + ' { }';
// 				}
// 				mainArray.push(cascad);
// 			}
// 		}
// 	}

	//creating finalArray, that don't have repeating elements
// 	var noRepeatingArray = unique(mainArray);
// 	noRepeatingArray.forEach(function (item) {
// 		var has = false;
// 		var preWords = item.split('&');
// 		for (var i = 0; i < finalArray.length; ++i) {
// 			var newWords = finalArray[i].split('&');
// 			if (newWords[0] == preWords[0]) {
// 				has = true;
// 				for (var j = 0; j < preWords.length; ++j) {
// 					if (newWords.indexOf(preWords[j]) < 0) {
// 						newWords.push(preWords[j]);
// 					}
// 				}
// 				finalArray[i] = newWords.join('&');
// 			}
// 		}
// 		if (!has) {
// 			finalArray.push(item);
// 		}
// 	});
// 	for (var i = 0; i < finalArray.length; i++) {
// 		$('<div>' + finalArray[i] + ' }</div>').appendTo(output);
// 	}
//
// 	//function that delete repeating elements from arrays, for more information visit http://mathhelpplanet.com/static.php?p=javascript-algoritmy-obrabotki-massivov
// 	function unique(A) {
// 		var n = A.length, k = 0, B = [];
// 		for (var i = 0; i < n; i++) {
// 			var j = 0;
// 			while (j < k && B[j] !== A[i]) j++;
// 			if (j == k) B[k++] = A[i];
// 		}
// 		return B;
// 	}
// }
/*
function pageWidget(pages) {
	var widgetWrap = $('<div class="widget_wrap"><ul class="widget_list"></ul></div>');
	widgetWrap.prependTo("body");
	for (var i = 0; i < pages.length; i++) {
		$('<li class="widget_item"><a class="widget_link" href="' + pages[i] + '.html' + '">' + pages[i] + '</a></li>').appendTo('.widget_list');
	}
	var widgetStilization = $('<style>body {position:relative} .widget_wrap{position:absolute;top:0;left:0;z-index:9999;padding:10px 20px;background:#222;border-bottom-right-radius:10px;-webkit-transition:all .3s ease;transition:all .3s ease;-webkit-transform:translate(-100%,0);-ms-transform:translate(-100%,0);transform:translate(-100%,0)}.widget_wrap:after{content:" ";position:absolute;top:0;left:100%;width:24px;height:24px;background:#222 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAABGdBTUEAALGPC/xhBQAAAAxQTFRF////////AAAA////BQBkwgAAAAN0Uk5TxMMAjAd+zwAAACNJREFUCNdjqP///y/DfyBg+LVq1Xoo8W8/CkFYAmwA0Kg/AFcANT5fe7l4AAAAAElFTkSuQmCC) no-repeat 50% 50%;cursor:pointer}.widget_wrap:hover{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.widget_item{padding:0 0 10px}.widget_link{color:#fff;text-decoration:none;font-size:15px;}.widget_link:hover{text-decoration:underline} </style>');
	widgetStilization.prependTo(".widget_wrap");
}
*/

/*
	By Osvaldas Valutis, www.osvaldas.info
	Available for use under the MIT License
*/

'use strict';

;( function ( document, window, index )
{
    var inputs = document.querySelectorAll( '.c-inputfile__input' );
    Array.prototype.forEach.call( inputs, function( input )
    {
        var label	 = input.nextElementSibling,
            labelVal = label.innerHTML;

        input.addEventListener( 'change', function( e )
        {
            var fileName = '';
            if( this.files && this.files.length > 1 )
                fileName = ( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length );
            else
                fileName = e.target.value.split( '\\' ).pop();

            if( fileName )
                label.querySelector( 'span' ).innerHTML = fileName;
            else
                label.innerHTML = labelVal;
        });

        // Firefox bug fix
        input.addEventListener( 'focus', function(){ input.classList.add( 'has-focus' ); });
        input.addEventListener( 'blur', function(){ input.classList.remove( 'has-focus' ); });
    });
}( document, window, 0 ));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByZWxvYWRlci5qcyIsInRvb2x0aXBzdGVyLmJ1bmRsZS5qcyIsImpxdWVyeS5tYXNrLmpzIiwianF1ZXJ5Lm1vdXNld2hlZWwuanMiLCJqcXVlcnkuanNjcm9sbHBhbmUubWluLmpzIiwic2ltcGxlYmFyLmpzIiwib3dsLmNhcm91c2VsLmpzIiwianF1ZXJ5LnN1bW9zZWxlY3QuanMiLCJmb3RvcmFtYS5qcyIsInRvb2x0aXAuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqcklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0bEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNzR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InNjcmlwdHNfYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZG9jdW1lbnQuYm9keS5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG4vLyAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4vLyAgICAgICAgIHZhciBwcmVsb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS1wcmVsb2FkZXInKTtcclxuLy8gICAgICAgICBpZighcHJlbG9hZGVyLmNsYXNzTGlzdC5jb250YWlucygnZG9uZScpKXtcclxuLy8gICAgICAgICAgICAgcHJlbG9hZGVyLmNsYXNzTGlzdC5hZGQoJ2RvbmUnKTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9LCAxMDAwKTtcclxuLy8gfTtcclxuXHJcbi8q0L3QvtCy0YvQuSDQv9GA0LXQu9C+0YPQtNC10YAqL1xyXG5kb2N1bWVudC5ib2R5Lm9ubG9hZCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgaWYoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ2lzLWNvbnRlbnQtaGlkZGVuJykpe1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnb25sb2FkQ29udGVudCcpO1xyXG5cclxufTtcclxuXHJcblxyXG5cclxuLy8g0YTRg9C90LrRhtC40Y8g0L/QvtC00LrQu9GO0YfQtdC90LjRjyDQstGB0LXRhSDRgdC60YDQuNC/0YLQvtCyXHJcbi8vIGZ1bmN0aW9uIGR5bmFtaWNhbGx5TG9hZFNjcmlwdCgpIHtcclxuXHJcbi8vICAgICB2YXIgc2NyaXB0LFxyXG4vLyAgICAgICAgIGxpc3RTY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3RTY3JpcHRzJyksXHJcbi8vICAgICAgICAgc3JjID0gW1xyXG4vLyAgICAgICAgICAgICAvLyAnaHR0cHM6Ly9hcGktbWFwcy55YW5kZXgucnUvMi4xLz9sYW5nPXJ1X1JVJyxcclxuLy8gICAgICAgICAgICAgJy4vanMvY3VzdG9tLW1hcC5qcycsXHJcbi8vICAgICAgICAgICAgICcuL2Jvd2VyX2NvbXBvbmVudHMvanF1ZXJ5LW1hc2stcGx1Z2luL2Rpc3QvanF1ZXJ5Lm1hc2suanMnLFxyXG4vLyAgICAgICAgICAgICAnLi9qcy9qc2Nyb2xscGFuZS9qcXVlcnkubW91c2V3aGVlbC5qcycsXHJcbi8vICAgICAgICAgICAgICcuL2pzL2pzY3JvbGxwYW5lL2pxdWVyeS5qc2Nyb2xscGFuZS5taW4uanMnLFxyXG4vLyAgICAgICAgICAgICAvLyAnaHR0cHM6Ly9hYmVzdHV6aGV2LmdpdGh1Yi5pby9jYWZlLWFuZGVyc29uL2Jvd2VyX2NvbXBvbmVudHMvdG9vbHRpcHN0ZXIvZGlzdC9qcy90b29sdGlwc3Rlci5idW5kbGUuanMnLFxyXG4vLyAgICAgICAgICAgICAnLi9qcy9zaW1wbGViYXIuanMnLFxyXG4vLyAgICAgICAgICAgICAnLi9qcy9vd2xjYXJvdXNlbC9vd2wuY2Fyb3VzZWwuanMnLFxyXG4vLyAgICAgICAgICAgICAnLi9ib3dlcl9jb21wb25lbnRzL3N1bW9zZWxlY3QvanF1ZXJ5LnN1bW9zZWxlY3QuanMnLFxyXG4vLyAgICAgICAgICAgICAnLi9ib3dlcl9jb21wb25lbnRzL2ZvdG9yYW1hL2ZvdG9yYW1hLmpzJ1xyXG4vLyAgICAgICAgIF07XHJcblxyXG4vLyAgICAgZm9yKHZhciBpID0gMDsgaSA8IHNyYy5sZW5ndGg7IGkrKyl7XHJcbi8vICAgICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuLy8gICAgICAgICBzY3JpcHQuc3JjID0gc3JjW2ldO1xyXG4vLyAgICAgICAgIGxpc3RTY3JpcHRzLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbi8vICAgICB9ICBcclxuLy8gfTtcclxuXHJcbi8vICAgZHluYW1pY2FsbHlMb2FkU2NyaXB0KCk7XHJcbiIsIi8qKlxyXG4gKiB0b29sdGlwc3RlciBodHRwOi8vaWFtY2VlZ2UuZ2l0aHViLmlvL3Rvb2x0aXBzdGVyL1xyXG4gKiBBIHJvY2tpbicgY3VzdG9tIHRvb2x0aXAgalF1ZXJ5IHBsdWdpblxyXG4gKiBEZXZlbG9wZWQgYnkgQ2FsZWIgSmFjb2IgYW5kIExvdWlzIEFtZWxpbmVcclxuICogTUlUIGxpY2Vuc2VcclxuICovXHJcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xyXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZSB1bmxlc3MgYW1kTW9kdWxlSWQgaXMgc2V0XHJcbiAgICBkZWZpbmUoW1wianF1ZXJ5XCJdLCBmdW5jdGlvbiAoYTApIHtcclxuICAgICAgcmV0dXJuIChmYWN0b3J5KGEwKSk7XHJcbiAgICB9KTtcclxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xyXG4gICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XHJcbiAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcclxuICAgIC8vIGxpa2UgTm9kZS5cclxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZmFjdG9yeShqUXVlcnkpO1xyXG4gIH1cclxufSh0aGlzLCBmdW5jdGlvbiAoJCkge1xyXG5cclxuLy8gVGhpcyBmaWxlIHdpbGwgYmUgVU1EaWZpZWQgYnkgYSBidWlsZCB0YXNrLlxyXG5cclxudmFyIGRlZmF1bHRzID0ge1xyXG5cdFx0YW5pbWF0aW9uOiAnZmFkZScsXHJcblx0XHRhbmltYXRpb25EdXJhdGlvbjogMzUwLFxyXG5cdFx0Y29udGVudDogbnVsbCxcclxuXHRcdGNvbnRlbnRBc0hUTUw6IGZhbHNlLFxyXG5cdFx0Y29udGVudENsb25pbmc6IGZhbHNlLFxyXG5cdFx0ZGVidWc6IHRydWUsXHJcblx0XHRkZWxheTogMzAwLFxyXG5cdFx0ZGVsYXlUb3VjaDogWzMwMCwgNTAwXSxcclxuXHRcdGZ1bmN0aW9uSW5pdDogbnVsbCxcclxuXHRcdGZ1bmN0aW9uQmVmb3JlOiBudWxsLFxyXG5cdFx0ZnVuY3Rpb25SZWFkeTogbnVsbCxcclxuXHRcdGZ1bmN0aW9uQWZ0ZXI6IG51bGwsXHJcblx0XHRmdW5jdGlvbkZvcm1hdDogbnVsbCxcclxuXHRcdElFbWluOiA2LFxyXG5cdFx0aW50ZXJhY3RpdmU6IGZhbHNlLFxyXG5cdFx0bXVsdGlwbGU6IGZhbHNlLFxyXG5cdFx0Ly8gd2lsbCBkZWZhdWx0IHRvIGRvY3VtZW50LmJvZHksIG9yIG11c3QgYmUgYW4gZWxlbWVudCBwb3NpdGlvbmVkIGF0ICgwLCAwKVxyXG5cdFx0Ly8gaW4gdGhlIGRvY3VtZW50LCB0eXBpY2FsbHkgbGlrZSB0aGUgdmVyeSB0b3Agdmlld3Mgb2YgYW4gYXBwLlxyXG5cdFx0cGFyZW50OiBudWxsLFxyXG5cdFx0cGx1Z2luczogWydzaWRlVGlwJ10sXHJcblx0XHRyZXBvc2l0aW9uT25TY3JvbGw6IGZhbHNlLFxyXG5cdFx0cmVzdG9yYXRpb246ICdub25lJyxcclxuXHRcdHNlbGZEZXN0cnVjdGlvbjogdHJ1ZSxcclxuXHRcdHRoZW1lOiBbXSxcclxuXHRcdHRpbWVyOiAwLFxyXG5cdFx0dHJhY2tlckludGVydmFsOiA1MDAsXHJcblx0XHR0cmFja09yaWdpbjogZmFsc2UsXHJcblx0XHR0cmFja1Rvb2x0aXA6IGZhbHNlLFxyXG5cdFx0dHJpZ2dlcjogJ2hvdmVyJyxcclxuXHRcdHRyaWdnZXJDbG9zZToge1xyXG5cdFx0XHRjbGljazogZmFsc2UsXHJcblx0XHRcdG1vdXNlbGVhdmU6IGZhbHNlLFxyXG5cdFx0XHRvcmlnaW5DbGljazogZmFsc2UsXHJcblx0XHRcdHNjcm9sbDogZmFsc2UsXHJcblx0XHRcdHRhcDogZmFsc2UsXHJcblx0XHRcdHRvdWNobGVhdmU6IGZhbHNlXHJcblx0XHR9LFxyXG5cdFx0dHJpZ2dlck9wZW46IHtcclxuXHRcdFx0Y2xpY2s6IGZhbHNlLFxyXG5cdFx0XHRtb3VzZWVudGVyOiBmYWxzZSxcclxuXHRcdFx0dGFwOiBmYWxzZSxcclxuXHRcdFx0dG91Y2hzdGFydDogZmFsc2VcclxuXHRcdH0sXHJcblx0XHR1cGRhdGVBbmltYXRpb246ICdyb3RhdGUnLFxyXG5cdFx0ekluZGV4OiA5OTk5OTk5XHJcblx0fSxcclxuXHQvLyB3ZSdsbCBhdm9pZCB1c2luZyB0aGUgJ3dpbmRvdycgZ2xvYmFsIGFzIGEgZ29vZCBwcmFjdGljZSBidXQgbnBtJ3NcclxuXHQvLyBqcXVlcnlAPDIuMS4wIHBhY2thZ2UgYWN0dWFsbHkgcmVxdWlyZXMgYSAnd2luZG93JyBnbG9iYWwsIHNvIG5vdCBzdXJlXHJcblx0Ly8gaXQncyB1c2VmdWwgYXQgYWxsXHJcblx0d2luID0gKHR5cGVvZiB3aW5kb3cgIT0gJ3VuZGVmaW5lZCcpID8gd2luZG93IDogbnVsbCxcclxuXHQvLyBlbnYgd2lsbCBiZSBwcm94aWVkIGJ5IHRoZSBjb3JlIGZvciBwbHVnaW5zIHRvIGhhdmUgYWNjZXNzIGl0cyBwcm9wZXJ0aWVzXHJcblx0ZW52ID0ge1xyXG5cdFx0Ly8gZGV0ZWN0IGlmIHRoaXMgZGV2aWNlIGNhbiB0cmlnZ2VyIHRvdWNoIGV2ZW50cy4gQmV0dGVyIGhhdmUgYSBmYWxzZVxyXG5cdFx0Ly8gcG9zaXRpdmUgKHVudXNlZCBsaXN0ZW5lcnMsIHRoYXQncyBvaykgdGhhbiBhIGZhbHNlIG5lZ2F0aXZlLlxyXG5cdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL01vZGVybml6ci9Nb2Rlcm5penIvYmxvYi9tYXN0ZXIvZmVhdHVyZS1kZXRlY3RzL3RvdWNoZXZlbnRzLmpzXHJcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ4MTcwMjkvd2hhdHMtdGhlLWJlc3Qtd2F5LXRvLWRldGVjdC1hLXRvdWNoLXNjcmVlbi1kZXZpY2UtdXNpbmctamF2YXNjcmlwdFxyXG5cdFx0aGFzVG91Y2hDYXBhYmlsaXR5OiAhIShcclxuXHRcdFx0d2luXHJcblx0XHRcdCYmXHQoXHQnb250b3VjaHN0YXJ0JyBpbiB3aW5cclxuXHRcdFx0XHR8fFx0KHdpbi5Eb2N1bWVudFRvdWNoICYmIHdpbi5kb2N1bWVudCBpbnN0YW5jZW9mIHdpbi5Eb2N1bWVudFRvdWNoKVxyXG5cdFx0XHRcdHx8XHR3aW4ubmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzXHJcblx0XHRcdClcclxuXHRcdCksXHJcblx0XHRoYXNUcmFuc2l0aW9uczogdHJhbnNpdGlvblN1cHBvcnQoKSxcclxuXHRcdElFOiBmYWxzZSxcclxuXHRcdC8vIGRvbid0IHNldCBtYW51YWxseSwgaXQgd2lsbCBiZSB1cGRhdGVkIGJ5IGEgYnVpbGQgdGFzayBhZnRlciB0aGUgbWFuaWZlc3RcclxuXHRcdHNlbVZlcjogJzQuMi41JyxcclxuXHRcdHdpbmRvdzogd2luXHJcblx0fSxcclxuXHRjb3JlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdC8vIGNvcmUgdmFyaWFibGVzXHJcblx0XHRcclxuXHRcdC8vIHRoZSBjb3JlIGVtaXR0ZXJzXHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlID0gJCh7fSk7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMgPSAkKHt9KTtcclxuXHRcdHRoaXMuX19pbnN0YW5jZXNMYXRlc3RBcnIgPSBbXTtcclxuXHRcdC8vIGNvbGxlY3RzIHBsdWdpbiBjb25zdHJ1Y3RvcnNcclxuXHRcdHRoaXMuX19wbHVnaW5zID0ge307XHJcblx0XHQvLyBwcm94eSBlbnYgdmFyaWFibGVzIGZvciBwbHVnaW5zIHdobyBtaWdodCB1c2UgdGhlbVxyXG5cdFx0dGhpcy5fZW52ID0gZW52O1xyXG5cdH07XHJcblxyXG4vLyBjb3JlIG1ldGhvZHNcclxuY29yZS5wcm90b3R5cGUgPSB7XHJcblx0XHJcblx0LyoqXHJcblx0ICogQSBmdW5jdGlvbiB0byBwcm94eSB0aGUgcHVibGljIG1ldGhvZHMgb2YgYW4gb2JqZWN0IG9udG8gYW5vdGhlclxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IGNvbnN0cnVjdG9yIFRoZSBjb25zdHJ1Y3RvciB0byBicmlkZ2VcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gb2JqIFRoZSBvYmplY3QgdGhhdCB3aWxsIGdldCBuZXcgbWV0aG9kcyAoYW4gaW5zdGFuY2Ugb3IgdGhlIGNvcmUpXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBsdWdpbk5hbWUgQSBwbHVnaW4gbmFtZSBmb3IgdGhlIGNvbnNvbGUgbG9nIG1lc3NhZ2VcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19icmlkZ2U6IGZ1bmN0aW9uKGNvbnN0cnVjdG9yLCBvYmosIHBsdWdpbk5hbWUpIHtcclxuXHRcdFxyXG5cdFx0Ly8gaWYgaXQncyBub3QgYWxyZWFkeSBicmlkZ2VkXHJcblx0XHRpZiAoIW9ialtwbHVnaW5OYW1lXSkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGZuID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdFx0Zm4ucHJvdG90eXBlID0gY29uc3RydWN0b3I7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgcGx1Z2luSW5zdGFuY2UgPSBuZXcgZm4oKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHRoZSBfaW5pdCBtZXRob2QgaGFzIHRvIGV4aXN0IGluIGluc3RhbmNlIGNvbnN0cnVjdG9ycyBidXQgbWlnaHQgYmUgbWlzc2luZ1xyXG5cdFx0XHQvLyBpbiBjb3JlIGNvbnN0cnVjdG9yc1xyXG5cdFx0XHRpZiAocGx1Z2luSW5zdGFuY2UuX19pbml0KSB7XHJcblx0XHRcdFx0cGx1Z2luSW5zdGFuY2UuX19pbml0KG9iaik7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdCQuZWFjaChjb25zdHJ1Y3RvciwgZnVuY3Rpb24obWV0aG9kTmFtZSwgZm4pIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBkb24ndCBwcm94eSBcInByaXZhdGVcIiBtZXRob2RzLCBvbmx5IFwicHJvdGVjdGVkXCIgYW5kIHB1YmxpYyBvbmVzXHJcblx0XHRcdFx0aWYgKG1ldGhvZE5hbWUuaW5kZXhPZignX18nKSAhPSAwKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGlmIHRoZSBtZXRob2QgZG9lcyBub3QgZXhpc3QgeWV0XHJcblx0XHRcdFx0XHRpZiAoIW9ialttZXRob2ROYW1lXSkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0b2JqW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHBsdWdpbkluc3RhbmNlW21ldGhvZE5hbWVdLmFwcGx5KHBsdWdpbkluc3RhbmNlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyByZW1lbWJlciB0byB3aGljaCBwbHVnaW4gdGhpcyBtZXRob2QgY29ycmVzcG9uZHMgKHNldmVyYWwgcGx1Z2lucyBtYXlcclxuXHRcdFx0XHRcdFx0Ly8gaGF2ZSBtZXRob2RzIG9mIHRoZSBzYW1lIG5hbWUsIHdlIG5lZWQgdG8gYmUgc3VyZSlcclxuXHRcdFx0XHRcdFx0b2JqW21ldGhvZE5hbWVdLmJyaWRnZWQgPSBwbHVnaW5JbnN0YW5jZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKGRlZmF1bHRzLmRlYnVnKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnVGhlICcrIG1ldGhvZE5hbWUgKycgbWV0aG9kIG9mIHRoZSAnKyBwbHVnaW5OYW1lXHJcblx0XHRcdFx0XHRcdFx0KycgcGx1Z2luIGNvbmZsaWN0cyB3aXRoIGFub3RoZXIgcGx1Z2luIG9yIG5hdGl2ZSBtZXRob2RzJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdG9ialtwbHVnaW5OYW1lXSA9IHBsdWdpbkluc3RhbmNlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBtb2NrdXAgaW4gTm9kZSBlbnYgaWYgbmVlZCBiZSwgZm9yIHRlc3RpbmcgcHVycG9zZXNcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX3NldFdpbmRvdzogZnVuY3Rpb24od2luZG93KSB7XHJcblx0XHRlbnYud2luZG93ID0gd2luZG93O1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIGEgcnVsZXIsIGEgdG9vbCB0byBoZWxwIG1lYXN1cmUgdGhlIHNpemUgb2YgYSB0b29sdGlwIHVuZGVyXHJcblx0ICogdmFyaW91cyBzZXR0aW5ncy4gTWVhbnQgZm9yIHBsdWdpbnNcclxuXHQgKiBcclxuXHQgKiBAc2VlIFJ1bGVyXHJcblx0ICogQHJldHVybiB7b2JqZWN0fSBBIFJ1bGVyIGluc3RhbmNlXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9nZXRSdWxlcjogZnVuY3Rpb24oJHRvb2x0aXApIHtcclxuXHRcdHJldHVybiBuZXcgUnVsZXIoJHRvb2x0aXApO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIGludGVybmFsIHVzZSBieSBwbHVnaW5zLCBpZiBuZWVkZWRcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9vZmY6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vZmYuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgaW50ZXJuYWwgdXNlIGJ5IHBsdWdpbnMsIGlmIG5lZWRlZFxyXG5cdCAqXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X29uOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUub24uYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgaW50ZXJuYWwgdXNlIGJ5IHBsdWdpbnMsIGlmIG5lZWRlZFxyXG5cdCAqXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X29uZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLm9uZS5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgKGdldHRlcikgb3IgYWRkcyAoc2V0dGVyKSBhIHBsdWdpblxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSBwbHVnaW4gUHJvdmlkZSBhIHN0cmluZyAoaW4gdGhlIGZ1bGwgZm9ybVxyXG5cdCAqIFwibmFtZXNwYWNlLm5hbWVcIikgdG8gdXNlIGFzIGFzIGdldHRlciwgYW4gb2JqZWN0IHRvIHVzZSBhcyBhIHNldHRlclxyXG5cdCAqIEByZXR1cm4ge29iamVjdHxjb3JlfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfcGx1Z2luOiBmdW5jdGlvbihwbHVnaW4pIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHQvLyBnZXR0ZXJcclxuXHRcdGlmICh0eXBlb2YgcGx1Z2luID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgcGx1Z2luTmFtZSA9IHBsdWdpbixcclxuXHRcdFx0XHRwID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZSBuYW1lc3BhY2UgaXMgcHJvdmlkZWQsIGl0J3MgZWFzeSB0byBzZWFyY2hcclxuXHRcdFx0aWYgKHBsdWdpbk5hbWUuaW5kZXhPZignLicpID4gMCkge1xyXG5cdFx0XHRcdHAgPSBzZWxmLl9fcGx1Z2luc1twbHVnaW5OYW1lXTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBvdGhlcndpc2UsIHJldHVybiB0aGUgZmlyc3QgbmFtZSB0aGF0IG1hdGNoZXNcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0JC5lYWNoKHNlbGYuX19wbHVnaW5zLCBmdW5jdGlvbihpLCBwbHVnaW4pIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKHBsdWdpbi5uYW1lLnN1YnN0cmluZyhwbHVnaW4ubmFtZS5sZW5ndGggLSBwbHVnaW5OYW1lLmxlbmd0aCAtIDEpID09ICcuJysgcGx1Z2luTmFtZSkge1xyXG5cdFx0XHRcdFx0XHRwID0gcGx1Z2luO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBwO1xyXG5cdFx0fVxyXG5cdFx0Ly8gc2V0dGVyXHJcblx0XHRlbHNlIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGZvcmNlIG5hbWVzcGFjZXNcclxuXHRcdFx0aWYgKHBsdWdpbi5uYW1lLmluZGV4T2YoJy4nKSA8IDApIHtcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1BsdWdpbnMgbXVzdCBiZSBuYW1lc3BhY2VkJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuX19wbHVnaW5zW3BsdWdpbi5uYW1lXSA9IHBsdWdpbjtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZSBwbHVnaW4gaGFzIGNvcmUgZmVhdHVyZXNcclxuXHRcdFx0aWYgKHBsdWdpbi5jb3JlKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gYnJpZGdlIG5vbi1wcml2YXRlIG1ldGhvZHMgb250byB0aGUgY29yZSB0byBhbGxvdyBuZXcgY29yZSBtZXRob2RzXHJcblx0XHRcdFx0c2VsZi5fX2JyaWRnZShwbHVnaW4uY29yZSwgc2VsZiwgcGx1Z2luLm5hbWUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFRyaWdnZXIgZXZlbnRzIG9uIHRoZSBjb3JlIGVtaXR0ZXJzXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge2NvcmV9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF90cmlnZ2VyOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtcclxuXHRcdFxyXG5cdFx0aWYgKHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdGFyZ3NbMF0gPSB7IHR5cGU6IGFyZ3NbMF0gfTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gbm90ZTogdGhlIG9yZGVyIG9mIGVtaXR0ZXJzIG1hdHRlcnNcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUudHJpZ2dlci5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBhcmdzKTtcclxuXHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy50cmlnZ2VyLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgYXJncyk7XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyBpbnN0YW5jZXMgb2YgYWxsIHRvb2x0aXBzIGluIHRoZSBwYWdlIG9yIGFuIGEgZ2l2ZW4gZWxlbWVudFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd8SFRNTCBvYmplY3QgY29sbGVjdGlvbn0gc2VsZWN0b3Igb3B0aW9uYWwgVXNlIHRoaXNcclxuXHQgKiBwYXJhbWV0ZXIgdG8gcmVzdHJpY3QgdGhlIHNldCBvZiBvYmplY3RzIHRoYXQgd2lsbCBiZSBpbnNwZWN0ZWRcclxuXHQgKiBmb3IgdGhlIHJldHJpZXZhbCBvZiBpbnN0YW5jZXMuIEJ5IGRlZmF1bHQsIGFsbCBpbnN0YW5jZXMgaW4gdGhlXHJcblx0ICogcGFnZSBhcmUgcmV0dXJuZWQuXHJcblx0ICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIGluc3RhbmNlIG9iamVjdHNcclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0aW5zdGFuY2VzOiBmdW5jdGlvbihzZWxlY3Rvcikge1xyXG5cdFx0XHJcblx0XHR2YXIgaW5zdGFuY2VzID0gW10sXHJcblx0XHRcdHNlbCA9IHNlbGVjdG9yIHx8ICcudG9vbHRpcHN0ZXJlZCc7XHJcblx0XHRcclxuXHRcdCQoc2VsKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKSxcclxuXHRcdFx0XHRucyA9ICR0aGlzLmRhdGEoJ3Rvb2x0aXBzdGVyLW5zJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAobnMpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQkLmVhY2gobnMsIGZ1bmN0aW9uKGksIG5hbWVzcGFjZSkge1xyXG5cdFx0XHRcdFx0aW5zdGFuY2VzLnB1c2goJHRoaXMuZGF0YShuYW1lc3BhY2UpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiBpbnN0YW5jZXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRoZSBUb29sdGlwc3RlciBvYmplY3RzIGdlbmVyYXRlZCBieSB0aGUgbGFzdCBpbml0aWFsaXppbmcgY2FsbFxyXG5cdCAqXHJcblx0ICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIGluc3RhbmNlIG9iamVjdHNcclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0aW5zdGFuY2VzTGF0ZXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9faW5zdGFuY2VzTGF0ZXN0QXJyO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIHB1YmxpYyB1c2Ugb25seSwgbm90IHRvIGJlIHVzZWQgYnkgcGx1Z2lucyAodXNlIDo6X29mZigpIGluc3RlYWQpXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRvZmY6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLm9mZi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIHB1YmxpYyB1c2Ugb25seSwgbm90IHRvIGJlIHVzZWQgYnkgcGx1Z2lucyAodXNlIDo6X29uKCkgaW5zdGVhZClcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy5vbi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIHB1YmxpYyB1c2Ugb25seSwgbm90IHRvIGJlIHVzZWQgYnkgcGx1Z2lucyAodXNlIDo6X29uZSgpIGluc3RlYWQpXHJcblx0ICogXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0b25lOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy5vbmUuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgYWxsIEhUTUwgZWxlbWVudHMgd2hpY2ggaGF2ZSBvbmUgb3IgbW9yZSB0b29sdGlwc1xyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIG9wdGlvbmFsIFVzZSB0aGlzIHRvIHJlc3RyaWN0IHRoZSByZXN1bHRzXHJcblx0ICogdG8gdGhlIGRlc2NlbmRhbnRzIG9mIGFuIGVsZW1lbnRcclxuXHQgKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgb2YgSFRNTCBlbGVtZW50c1xyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRvcmlnaW5zOiBmdW5jdGlvbihzZWxlY3Rvcikge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsID0gc2VsZWN0b3IgP1xyXG5cdFx0XHRzZWxlY3RvciArJyAnIDpcclxuXHRcdFx0Jyc7XHJcblx0XHRcclxuXHRcdHJldHVybiAkKHNlbCArJy50b29sdGlwc3RlcmVkJykudG9BcnJheSgpO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQ2hhbmdlIGRlZmF1bHQgb3B0aW9ucyBmb3IgYWxsIGZ1dHVyZSBpbnN0YW5jZXNcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBkIFRoZSBvcHRpb25zIHRoYXQgc2hvdWxkIGJlIG1hZGUgZGVmYXVsdHNcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRzZXREZWZhdWx0czogZnVuY3Rpb24oZCkge1xyXG5cdFx0JC5leHRlbmQoZGVmYXVsdHMsIGQpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgdXNlcnMgdG8gdHJpZ2dlciB0aGVpciBoYW5kbGVycyBvbiB0aGUgcHVibGljIGVtaXR0ZXJcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7Y29yZX1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0dHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLnRyaWdnZXJIYW5kbGVyLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gJC50b29sdGlwc3RlciB3aWxsIGJlIHVzZWQgdG8gY2FsbCBjb3JlIG1ldGhvZHNcclxuJC50b29sdGlwc3RlciA9IG5ldyBjb3JlKCk7XHJcblxyXG4vLyB0aGUgVG9vbHRpcHN0ZXIgaW5zdGFuY2UgY2xhc3MgKG1pbmQgdGhlIGNhcGl0YWwgVClcclxuJC5Ub29sdGlwc3RlciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuXHRcclxuXHQvLyBsaXN0IG9mIGluc3RhbmNlIHZhcmlhYmxlc1xyXG5cdFxyXG5cdC8vIHN0YWNrIG9mIGN1c3RvbSBjYWxsYmFja3MgcHJvdmlkZWQgYXMgcGFyYW1ldGVycyB0byBBUEkgbWV0aG9kc1xyXG5cdHRoaXMuX19jYWxsYmFja3MgPSB7XHJcblx0XHRjbG9zZTogW10sXHJcblx0XHRvcGVuOiBbXVxyXG5cdH07XHJcblx0Ly8gdGhlIHNjaGVkdWxlIHRpbWUgb2YgRE9NIHJlbW92YWxcclxuXHR0aGlzLl9fY2xvc2luZ1RpbWU7XHJcblx0Ly8gdGhpcyB3aWxsIGJlIHRoZSB1c2VyIGNvbnRlbnQgc2hvd24gaW4gdGhlIHRvb2x0aXAuIEEgY2FwaXRhbCBcIkNcIiBpcyB1c2VkXHJcblx0Ly8gYmVjYXVzZSB0aGVyZSBpcyBhbHNvIGEgbWV0aG9kIGNhbGxlZCBjb250ZW50KClcclxuXHR0aGlzLl9fQ29udGVudDtcclxuXHQvLyBmb3IgdGhlIHNpemUgdHJhY2tlclxyXG5cdHRoaXMuX19jb250ZW50QmNyO1xyXG5cdC8vIHRvIGRpc2FibGUgdGhlIHRvb2x0aXAgYWZ0ZXIgZGVzdHJ1Y3Rpb25cclxuXHR0aGlzLl9fZGVzdHJveWVkID0gZmFsc2U7XHJcblx0Ly8gd2UgY2FuJ3QgZW1pdCBkaXJlY3RseSBvbiB0aGUgaW5zdGFuY2UgYmVjYXVzZSBpZiBhIG1ldGhvZCB3aXRoIHRoZSBzYW1lXHJcblx0Ly8gbmFtZSBhcyB0aGUgZXZlbnQgZXhpc3RzLCBpdCB3aWxsIGJlIGNhbGxlZCBieSBqUXVlcnkuIFNlIHdlIHVzZSBhIHBsYWluXHJcblx0Ly8gb2JqZWN0IGFzIGVtaXR0ZXIuIFRoaXMgZW1pdHRlciBpcyBmb3IgaW50ZXJuYWwgdXNlIGJ5IHBsdWdpbnMsXHJcblx0Ly8gaWYgbmVlZGVkLlxyXG5cdHRoaXMuX18kZW1pdHRlclByaXZhdGUgPSAkKHt9KTtcclxuXHQvLyB0aGlzIGVtaXR0ZXIgaXMgZm9yIHRoZSB1c2VyIHRvIGxpc3RlbiB0byBldmVudHMgd2l0aG91dCByaXNraW5nIHRvIG1lc3NcclxuXHQvLyB3aXRoIG91ciBpbnRlcm5hbCBsaXN0ZW5lcnNcclxuXHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMgPSAkKHt9KTtcclxuXHR0aGlzLl9fZW5hYmxlZCA9IHRydWU7XHJcblx0Ly8gdGhlIHJlZmVyZW5jZSB0byB0aGUgZ2MgaW50ZXJ2YWxcclxuXHR0aGlzLl9fZ2FyYmFnZUNvbGxlY3RvcjtcclxuXHQvLyB2YXJpb3VzIHBvc2l0aW9uIGFuZCBzaXplIGRhdGEgcmVjb21wdXRlZCBiZWZvcmUgZWFjaCByZXBvc2l0aW9uaW5nXHJcblx0dGhpcy5fX0dlb21ldHJ5O1xyXG5cdC8vIHRoZSB0b29sdGlwIHBvc2l0aW9uLCBzYXZlZCBhZnRlciBlYWNoIHJlcG9zaXRpb25pbmcgYnkgYSBwbHVnaW5cclxuXHR0aGlzLl9fbGFzdFBvc2l0aW9uO1xyXG5cdC8vIGEgdW5pcXVlIG5hbWVzcGFjZSBwZXIgaW5zdGFuY2VcclxuXHR0aGlzLl9fbmFtZXNwYWNlID0gJ3Rvb2x0aXBzdGVyLScrIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSoxMDAwMDAwKTtcclxuXHR0aGlzLl9fb3B0aW9ucztcclxuXHQvLyB3aWxsIGJlIHVzZWQgdG8gc3VwcG9ydCBvcmlnaW5zIGluIHNjcm9sbGFibGUgYXJlYXNcclxuXHR0aGlzLl9fJG9yaWdpblBhcmVudHM7XHJcblx0dGhpcy5fX3BvaW50ZXJJc092ZXJPcmlnaW4gPSBmYWxzZTtcclxuXHQvLyB0byByZW1vdmUgdGhlbWVzIGlmIG5lZWRlZFxyXG5cdHRoaXMuX19wcmV2aW91c1RoZW1lcyA9IFtdO1xyXG5cdC8vIHRoZSBzdGF0ZSBjYW4gYmUgZWl0aGVyOiBhcHBlYXJpbmcsIHN0YWJsZSwgZGlzYXBwZWFyaW5nLCBjbG9zZWRcclxuXHR0aGlzLl9fc3RhdGUgPSAnY2xvc2VkJztcclxuXHQvLyB0aW1lb3V0IHJlZmVyZW5jZXNcclxuXHR0aGlzLl9fdGltZW91dHMgPSB7XHJcblx0XHRjbG9zZTogW10sXHJcblx0XHRvcGVuOiBudWxsXHJcblx0fTtcclxuXHQvLyBzdG9yZSB0b3VjaCBldmVudHMgdG8gYmUgYWJsZSB0byBkZXRlY3QgZW11bGF0ZWQgbW91c2UgZXZlbnRzXHJcblx0dGhpcy5fX3RvdWNoRXZlbnRzID0gW107XHJcblx0Ly8gdGhlIHJlZmVyZW5jZSB0byB0aGUgdHJhY2tlciBpbnRlcnZhbFxyXG5cdHRoaXMuX190cmFja2VyID0gbnVsbDtcclxuXHQvLyB0aGUgZWxlbWVudCB0byB3aGljaCB0aGlzIHRvb2x0aXAgaXMgYXNzb2NpYXRlZFxyXG5cdHRoaXMuXyRvcmlnaW47XHJcblx0Ly8gdGhpcyB3aWxsIGJlIHRoZSB0b29sdGlwIGVsZW1lbnQgKGpRdWVyeSB3cmFwcGVkIEhUTUwgZWxlbWVudCkuXHJcblx0Ly8gSXQncyB0aGUgam9iIG9mIGEgcGx1Z2luIHRvIGNyZWF0ZSBpdCBhbmQgYXBwZW5kIGl0IHRvIHRoZSBET01cclxuXHR0aGlzLl8kdG9vbHRpcDtcclxuXHRcclxuXHQvLyBsYXVuY2hcclxuXHR0aGlzLl9faW5pdChlbGVtZW50LCBvcHRpb25zKTtcclxufTtcclxuXHJcbiQuVG9vbHRpcHN0ZXIucHJvdG90eXBlID0ge1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSBvcmlnaW5cclxuXHQgKiBAcGFyYW0gb3B0aW9uc1xyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19pbml0OiBmdW5jdGlvbihvcmlnaW4sIG9wdGlvbnMpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHRzZWxmLl8kb3JpZ2luID0gJChvcmlnaW4pO1xyXG5cdFx0c2VsZi5fX29wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cdFx0XHJcblx0XHQvLyBzb21lIG9wdGlvbnMgbWF5IG5lZWQgdG8gYmUgcmVmb3JtYXR0ZWRcclxuXHRcdHNlbGYuX19vcHRpb25zRm9ybWF0KCk7XHJcblx0XHRcclxuXHRcdC8vIGRvbid0IHJ1biBvbiBvbGQgSUUgaWYgYXNrZWQgbm8gdG9cclxuXHRcdGlmIChcdCFlbnYuSUVcclxuXHRcdFx0fHxcdGVudi5JRSA+PSBzZWxmLl9fb3B0aW9ucy5JRW1pblxyXG5cdFx0KSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBub3RlOiB0aGUgY29udGVudCBpcyBudWxsIChlbXB0eSkgYnkgZGVmYXVsdCBhbmQgY2FuIHN0YXkgdGhhdFxyXG5cdFx0XHQvLyB3YXkgaWYgdGhlIHBsdWdpbiByZW1haW5zIGluaXRpYWxpemVkIGJ1dCBub3QgZmVkIGFueSBjb250ZW50LiBUaGVcclxuXHRcdFx0Ly8gdG9vbHRpcCB3aWxsIGp1c3Qgbm90IGFwcGVhci5cclxuXHRcdFx0XHJcblx0XHRcdC8vIGxldCdzIHNhdmUgdGhlIGluaXRpYWwgdmFsdWUgb2YgdGhlIHRpdGxlIGF0dHJpYnV0ZSBmb3IgbGF0ZXJcclxuXHRcdFx0Ly8gcmVzdG9yYXRpb24gaWYgbmVlZCBiZS5cclxuXHRcdFx0dmFyIGluaXRpYWxUaXRsZSA9IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpdCB3aWxsIGFscmVhZHkgaGF2ZSBiZWVuIHNhdmVkIGluIGNhc2Ugb2YgbXVsdGlwbGUgdG9vbHRpcHNcclxuXHRcdFx0aWYgKHNlbGYuXyRvcmlnaW4uZGF0YSgndG9vbHRpcHN0ZXItaW5pdGlhbFRpdGxlJykgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGluaXRpYWxUaXRsZSA9IHNlbGYuXyRvcmlnaW4uYXR0cigndGl0bGUnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyB3ZSBkbyBub3Qgd2FudCBpbml0aWFsVGl0bGUgdG8gYmUgXCJ1bmRlZmluZWRcIiBiZWNhdXNlXHJcblx0XHRcdFx0Ly8gb2YgaG93IGpRdWVyeSdzIC5kYXRhKCkgbWV0aG9kIHdvcmtzXHJcblx0XHRcdFx0aWYgKGluaXRpYWxUaXRsZSA9PT0gdW5kZWZpbmVkKSBpbml0aWFsVGl0bGUgPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNlbGYuXyRvcmlnaW4uZGF0YSgndG9vbHRpcHN0ZXItaW5pdGlhbFRpdGxlJywgaW5pdGlhbFRpdGxlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSWYgY29udGVudCBpcyBwcm92aWRlZCBpbiB0aGUgb3B0aW9ucywgaXQgaGFzIHByZWNlZGVuY2Ugb3ZlciB0aGVcclxuXHRcdFx0Ly8gdGl0bGUgYXR0cmlidXRlLlxyXG5cdFx0XHQvLyBOb3RlOiBhbiBlbXB0eSBzdHJpbmcgaXMgY29uc2lkZXJlZCBjb250ZW50LCBvbmx5ICdudWxsJyByZXByZXNlbnRzXHJcblx0XHRcdC8vIHRoZSBhYnNlbmNlIG9mIGNvbnRlbnQuXHJcblx0XHRcdC8vIEFsc28sIGFuIGV4aXN0aW5nIHRpdGxlPVwiXCIgYXR0cmlidXRlIHdpbGwgcmVzdWx0IGluIGFuIGVtcHR5IHN0cmluZ1xyXG5cdFx0XHQvLyBjb250ZW50XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5jb250ZW50ICE9PSBudWxsKSB7XHJcblx0XHRcdFx0c2VsZi5fX2NvbnRlbnRTZXQoc2VsZi5fX29wdGlvbnMuY29udGVudCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIHNlbGVjdG9yID0gc2VsZi5fJG9yaWdpbi5hdHRyKCdkYXRhLXRvb2x0aXAtY29udGVudCcpLFxyXG5cdFx0XHRcdFx0JGVsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChzZWxlY3Rvcil7XHJcblx0XHRcdFx0XHQkZWwgPSAkKHNlbGVjdG9yKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCRlbCAmJiAkZWxbMF0pIHtcclxuXHRcdFx0XHRcdHNlbGYuX19jb250ZW50U2V0KCRlbC5maXJzdCgpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fY29udGVudFNldChpbml0aWFsVGl0bGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fJG9yaWdpblxyXG5cdFx0XHRcdC8vIHN0cmlwIHRoZSB0aXRsZSBvZmYgb2YgdGhlIGVsZW1lbnQgdG8gcHJldmVudCB0aGUgZGVmYXVsdCB0b29sdGlwc1xyXG5cdFx0XHRcdC8vIGZyb20gcG9wcGluZyB1cFxyXG5cdFx0XHRcdC5yZW1vdmVBdHRyKCd0aXRsZScpXHJcblx0XHRcdFx0Ly8gdG8gYmUgYWJsZSB0byBmaW5kIGFsbCBpbnN0YW5jZXMgb24gdGhlIHBhZ2UgbGF0ZXIgKHVwb24gd2luZG93XHJcblx0XHRcdFx0Ly8gZXZlbnRzIGluIHBhcnRpY3VsYXIpXHJcblx0XHRcdFx0LmFkZENsYXNzKCd0b29sdGlwc3RlcmVkJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBzZXQgbGlzdGVuZXJzIG9uIHRoZSBvcmlnaW5cclxuXHRcdFx0c2VsZi5fX3ByZXBhcmVPcmlnaW4oKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHNldCB0aGUgZ2FyYmFnZSBjb2xsZWN0b3JcclxuXHRcdFx0c2VsZi5fX3ByZXBhcmVHQygpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaW5pdCBwbHVnaW5zXHJcblx0XHRcdCQuZWFjaChzZWxmLl9fb3B0aW9ucy5wbHVnaW5zLCBmdW5jdGlvbihpLCBwbHVnaW5OYW1lKSB7XHJcblx0XHRcdFx0c2VsZi5fcGx1ZyhwbHVnaW5OYW1lKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyB0byBkZXRlY3Qgc3dpcGluZ1xyXG5cdFx0XHRpZiAoZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSkge1xyXG5cdFx0XHRcdCQoZW52LndpbmRvdy5kb2N1bWVudC5ib2R5KS5vbigndG91Y2htb3ZlLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4nLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFx0c2VsZi5fdG91Y2hSZWNvcmRFdmVudChldmVudCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHNlbGZcclxuXHRcdFx0XHQvLyBwcmVwYXJlIHRoZSB0b29sdGlwIHdoZW4gaXQgZ2V0cyBjcmVhdGVkLiBUaGlzIGV2ZW50IG11c3RcclxuXHRcdFx0XHQvLyBiZSBmaXJlZCBieSBhIHBsdWdpblxyXG5cdFx0XHRcdC5fb24oJ2NyZWF0ZWQnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNlbGYuX19wcmVwYXJlVG9vbHRpcCgpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0Ly8gc2F2ZSBwb3NpdGlvbiBpbmZvcm1hdGlvbiB3aGVuIGl0J3Mgc2VudCBieSBhIHBsdWdpblxyXG5cdFx0XHRcdC5fb24oJ3JlcG9zaXRpb25lZCcsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdHNlbGYuX19sYXN0UG9zaXRpb24gPSBlLnBvc2l0aW9uO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHNlbGYuX19vcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEluc2VydCB0aGUgY29udGVudCBpbnRvIHRoZSBhcHByb3ByaWF0ZSBIVE1MIGVsZW1lbnQgb2YgdGhlIHRvb2x0aXBcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fY29udGVudEluc2VydDogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0JGVsID0gc2VsZi5fJHRvb2x0aXAuZmluZCgnLnRvb2x0aXBzdGVyLWNvbnRlbnQnKSxcclxuXHRcdFx0Zm9ybWF0dGVkQ29udGVudCA9IHNlbGYuX19Db250ZW50LFxyXG5cdFx0XHRmb3JtYXQgPSBmdW5jdGlvbihjb250ZW50KSB7XHJcblx0XHRcdFx0Zm9ybWF0dGVkQ29udGVudCA9IGNvbnRlbnQ7XHJcblx0XHRcdH07XHJcblx0XHRcclxuXHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHR0eXBlOiAnZm9ybWF0JyxcclxuXHRcdFx0Y29udGVudDogc2VsZi5fX0NvbnRlbnQsXHJcblx0XHRcdGZvcm1hdDogZm9ybWF0XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0aWYgKHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uRm9ybWF0KSB7XHJcblx0XHRcdFxyXG5cdFx0XHRmb3JtYXR0ZWRDb250ZW50ID0gc2VsZi5fX29wdGlvbnMuZnVuY3Rpb25Gb3JtYXQuY2FsbChcclxuXHRcdFx0XHRzZWxmLFxyXG5cdFx0XHRcdHNlbGYsXHJcblx0XHRcdFx0eyBvcmlnaW46IHNlbGYuXyRvcmlnaW5bMF0gfSxcclxuXHRcdFx0XHRzZWxmLl9fQ29udGVudFxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAodHlwZW9mIGZvcm1hdHRlZENvbnRlbnQgPT09ICdzdHJpbmcnICYmICFzZWxmLl9fb3B0aW9ucy5jb250ZW50QXNIVE1MKSB7XHJcblx0XHRcdCRlbC50ZXh0KGZvcm1hdHRlZENvbnRlbnQpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdCRlbFxyXG5cdFx0XHRcdC5lbXB0eSgpXHJcblx0XHRcdFx0LmFwcGVuZChmb3JtYXR0ZWRDb250ZW50KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBTYXZlIHRoZSBjb250ZW50LCBjbG9uaW5nIGl0IGJlZm9yZWhhbmQgaWYgbmVlZCBiZVxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBjb250ZW50XHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX2NvbnRlbnRTZXQ6IGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuXHRcdFxyXG5cdFx0Ly8gY2xvbmUgaWYgYXNrZWQuIENsb25pbmcgdGhlIG9iamVjdCBtYWtlcyBzdXJlIHRoYXQgZWFjaCBpbnN0YW5jZSBoYXMgaXRzXHJcblx0XHQvLyBvd24gdmVyc2lvbiBvZiB0aGUgY29udGVudCAoaW4gY2FzZSBhIHNhbWUgb2JqZWN0IHdlcmUgcHJvdmlkZWQgZm9yIHNldmVyYWxcclxuXHRcdC8vIGluc3RhbmNlcylcclxuXHRcdC8vIHJlbWluZGVyOiB0eXBlb2YgbnVsbCA9PT0gb2JqZWN0XHJcblx0XHRpZiAoY29udGVudCBpbnN0YW5jZW9mICQgJiYgdGhpcy5fX29wdGlvbnMuY29udGVudENsb25pbmcpIHtcclxuXHRcdFx0Y29udGVudCA9IGNvbnRlbnQuY2xvbmUodHJ1ZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHRoaXMuX19Db250ZW50ID0gY29udGVudDtcclxuXHRcdFxyXG5cdFx0dGhpcy5fdHJpZ2dlcih7XHJcblx0XHRcdHR5cGU6ICd1cGRhdGVkJyxcclxuXHRcdFx0Y29udGVudDogY29udGVudFxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRXJyb3IgbWVzc2FnZSBhYm91dCBhIG1ldGhvZCBjYWxsIG1hZGUgYWZ0ZXIgZGVzdHJ1Y3Rpb25cclxuXHQgKiBcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fZGVzdHJveUVycm9yOiBmdW5jdGlvbigpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcignVGhpcyB0b29sdGlwIGhhcyBiZWVuIGRlc3Ryb3llZCBhbmQgY2Fubm90IGV4ZWN1dGUgeW91ciBtZXRob2QgY2FsbC4nKTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEdhdGhlciBhbGwgaW5mb3JtYXRpb24gYWJvdXQgZGltZW5zaW9ucyBhbmQgYXZhaWxhYmxlIHNwYWNlLFxyXG5cdCAqIGNhbGxlZCBiZWZvcmUgZXZlcnkgcmVwb3NpdGlvbmluZ1xyXG5cdCAqIFxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICogQHJldHVybnMge29iamVjdH1cclxuXHQgKi9cclxuXHRfX2dlb21ldHJ5OiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyXHRzZWxmID0gdGhpcyxcclxuXHRcdFx0JHRhcmdldCA9IHNlbGYuXyRvcmlnaW4sXHJcblx0XHRcdG9yaWdpbklzQXJlYSA9IHNlbGYuXyRvcmlnaW4uaXMoJ2FyZWEnKTtcclxuXHRcdFxyXG5cdFx0Ly8gaWYgdGhpcy5fJG9yaWdpbiBpcyBhIG1hcCBhcmVhLCB0aGUgdGFyZ2V0IHdlJ2xsIG5lZWRcclxuXHRcdC8vIHRoZSBkaW1lbnNpb25zIG9mIGlzIGFjdHVhbGx5IHRoZSBpbWFnZSB1c2luZyB0aGUgbWFwLFxyXG5cdFx0Ly8gbm90IHRoZSBhcmVhIGl0c2VsZlxyXG5cdFx0aWYgKG9yaWdpbklzQXJlYSkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIG1hcE5hbWUgPSBzZWxmLl8kb3JpZ2luLnBhcmVudCgpLmF0dHIoJ25hbWUnKTtcclxuXHRcdFx0XHJcblx0XHRcdCR0YXJnZXQgPSAkKCdpbWdbdXNlbWFwPVwiIycrIG1hcE5hbWUgKydcIl0nKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dmFyIGJjciA9ICR0YXJnZXRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcblx0XHRcdCRkb2N1bWVudCA9ICQoZW52LndpbmRvdy5kb2N1bWVudCksXHJcblx0XHRcdCR3aW5kb3cgPSAkKGVudi53aW5kb3cpLFxyXG5cdFx0XHQkcGFyZW50ID0gJHRhcmdldCxcclxuXHRcdFx0Ly8gc29tZSB1c2VmdWwgcHJvcGVydGllcyBvZiBpbXBvcnRhbnQgZWxlbWVudHNcclxuXHRcdFx0Z2VvID0ge1xyXG5cdFx0XHRcdC8vIGF2YWlsYWJsZSBzcGFjZSBmb3IgdGhlIHRvb2x0aXAsIHNlZSBkb3duIGJlbG93XHJcblx0XHRcdFx0YXZhaWxhYmxlOiB7XHJcblx0XHRcdFx0XHRkb2N1bWVudDogbnVsbCxcclxuXHRcdFx0XHRcdHdpbmRvdzogbnVsbFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZG9jdW1lbnQ6IHtcclxuXHRcdFx0XHRcdHNpemU6IHtcclxuXHRcdFx0XHRcdFx0aGVpZ2h0OiAkZG9jdW1lbnQuaGVpZ2h0KCksXHJcblx0XHRcdFx0XHRcdHdpZHRoOiAkZG9jdW1lbnQud2lkdGgoKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0d2luZG93OiB7XHJcblx0XHRcdFx0XHRzY3JvbGw6IHtcclxuXHRcdFx0XHRcdFx0Ly8gdGhlIHNlY29uZCBvbmVzIGFyZSBmb3IgSUUgY29tcGF0aWJpbGl0eVxyXG5cdFx0XHRcdFx0XHRsZWZ0OiBlbnYud2luZG93LnNjcm9sbFggfHwgZW52LndpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCxcclxuXHRcdFx0XHRcdFx0dG9wOiBlbnYud2luZG93LnNjcm9sbFkgfHwgZW52LndpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0c2l6ZToge1xyXG5cdFx0XHRcdFx0XHRoZWlnaHQ6ICR3aW5kb3cuaGVpZ2h0KCksXHJcblx0XHRcdFx0XHRcdHdpZHRoOiAkd2luZG93LndpZHRoKClcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdG9yaWdpbjoge1xyXG5cdFx0XHRcdFx0Ly8gdGhlIG9yaWdpbiBoYXMgYSBmaXhlZCBsaW5lYWdlIGlmIGl0c2VsZiBvciBvbmUgb2YgaXRzXHJcblx0XHRcdFx0XHQvLyBhbmNlc3RvcnMgaGFzIGEgZml4ZWQgcG9zaXRpb25cclxuXHRcdFx0XHRcdGZpeGVkTGluZWFnZTogZmFsc2UsXHJcblx0XHRcdFx0XHQvLyByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnRcclxuXHRcdFx0XHRcdG9mZnNldDoge30sXHJcblx0XHRcdFx0XHRzaXplOiB7XHJcblx0XHRcdFx0XHRcdGhlaWdodDogYmNyLmJvdHRvbSAtIGJjci50b3AsXHJcblx0XHRcdFx0XHRcdHdpZHRoOiBiY3IucmlnaHQgLSBiY3IubGVmdFxyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdHVzZW1hcEltYWdlOiBvcmlnaW5Jc0FyZWEgPyAkdGFyZ2V0WzBdIDogbnVsbCxcclxuXHRcdFx0XHRcdC8vIHJlbGF0aXZlIHRvIHRoZSB3aW5kb3dcclxuXHRcdFx0XHRcdHdpbmRvd09mZnNldDoge1xyXG5cdFx0XHRcdFx0XHRib3R0b206IGJjci5ib3R0b20sXHJcblx0XHRcdFx0XHRcdGxlZnQ6IGJjci5sZWZ0LFxyXG5cdFx0XHRcdFx0XHRyaWdodDogYmNyLnJpZ2h0LFxyXG5cdFx0XHRcdFx0XHR0b3A6IGJjci50b3BcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGdlb0ZpeGVkID0gZmFsc2U7XHJcblx0XHRcclxuXHRcdC8vIGlmIHRoZSBlbGVtZW50IGlzIGEgbWFwIGFyZWEsIHNvbWUgcHJvcGVydGllcyBtYXkgbmVlZFxyXG5cdFx0Ly8gdG8gYmUgcmVjYWxjdWxhdGVkXHJcblx0XHRpZiAob3JpZ2luSXNBcmVhKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgc2hhcGUgPSBzZWxmLl8kb3JpZ2luLmF0dHIoJ3NoYXBlJyksXHJcblx0XHRcdFx0Y29vcmRzID0gc2VsZi5fJG9yaWdpbi5hdHRyKCdjb29yZHMnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChjb29yZHMpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb29yZHMgPSBjb29yZHMuc3BsaXQoJywnKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQkLm1hcChjb29yZHMsIGZ1bmN0aW9uKHZhbCwgaSkge1xyXG5cdFx0XHRcdFx0Y29vcmRzW2ldID0gcGFyc2VJbnQodmFsKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlIGltYWdlIGl0c2VsZiBpcyB0aGUgYXJlYSwgbm90aGluZyBtb3JlIHRvIGRvXHJcblx0XHRcdGlmIChzaGFwZSAhPSAnZGVmYXVsdCcpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzd2l0Y2goc2hhcGUpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y2FzZSAnY2lyY2xlJzpcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHZhciBjaXJjbGVDZW50ZXJMZWZ0ID0gY29vcmRzWzBdLFxyXG5cdFx0XHRcdFx0XHRcdGNpcmNsZUNlbnRlclRvcCA9IGNvb3Jkc1sxXSxcclxuXHRcdFx0XHRcdFx0XHRjaXJjbGVSYWRpdXMgPSBjb29yZHNbMl0sXHJcblx0XHRcdFx0XHRcdFx0YXJlYVRvcE9mZnNldCA9IGNpcmNsZUNlbnRlclRvcCAtIGNpcmNsZVJhZGl1cyxcclxuXHRcdFx0XHRcdFx0XHRhcmVhTGVmdE9mZnNldCA9IGNpcmNsZUNlbnRlckxlZnQgLSBjaXJjbGVSYWRpdXM7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLnNpemUuaGVpZ2h0ID0gY2lyY2xlUmFkaXVzICogMjtcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi5zaXplLndpZHRoID0gZ2VvLm9yaWdpbi5zaXplLmhlaWdodDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKz0gYXJlYUxlZnRPZmZzZXQ7XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArPSBhcmVhVG9wT2Zmc2V0O1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNhc2UgJ3JlY3QnOlxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGFyZWFMZWZ0ID0gY29vcmRzWzBdLFxyXG5cdFx0XHRcdFx0XHRcdGFyZWFUb3AgPSBjb29yZHNbMV0sXHJcblx0XHRcdFx0XHRcdFx0YXJlYVJpZ2h0ID0gY29vcmRzWzJdLFxyXG5cdFx0XHRcdFx0XHRcdGFyZWFCb3R0b20gPSBjb29yZHNbM107XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLnNpemUuaGVpZ2h0ID0gYXJlYUJvdHRvbSAtIGFyZWFUb3A7XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4uc2l6ZS53aWR0aCA9IGFyZWFSaWdodCAtIGFyZWFMZWZ0O1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArPSBhcmVhTGVmdDtcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICs9IGFyZWFUb3A7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Y2FzZSAncG9seSc6XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2YXIgYXJlYVNtYWxsZXN0WCA9IDAsXHJcblx0XHRcdFx0XHRcdFx0YXJlYVNtYWxsZXN0WSA9IDAsXHJcblx0XHRcdFx0XHRcdFx0YXJlYUdyZWF0ZXN0WCA9IDAsXHJcblx0XHRcdFx0XHRcdFx0YXJlYUdyZWF0ZXN0WSA9IDAsXHJcblx0XHRcdFx0XHRcdFx0YXJyYXlBbHRlcm5hdGUgPSAnZXZlbic7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHZhciBhcmVhTnVtYmVyID0gY29vcmRzW2ldO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChhcnJheUFsdGVybmF0ZSA9PSAnZXZlbicpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGFyZWFOdW1iZXIgPiBhcmVhR3JlYXRlc3RYKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRhcmVhR3JlYXRlc3RYID0gYXJlYU51bWJlcjtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChpID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXJlYVNtYWxsZXN0WCA9IGFyZWFHcmVhdGVzdFg7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGFyZWFOdW1iZXIgPCBhcmVhU21hbGxlc3RYKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGFyZWFTbWFsbGVzdFggPSBhcmVhTnVtYmVyO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheUFsdGVybmF0ZSA9ICdvZGQnO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChhcmVhTnVtYmVyID4gYXJlYUdyZWF0ZXN0WSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXJlYUdyZWF0ZXN0WSA9IGFyZWFOdW1iZXI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaSA9PSAxKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXJlYVNtYWxsZXN0WSA9IGFyZWFHcmVhdGVzdFk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGFyZWFOdW1iZXIgPCBhcmVhU21hbGxlc3RZKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGFyZWFTbWFsbGVzdFkgPSBhcmVhTnVtYmVyO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRhcnJheUFsdGVybmF0ZSA9ICdldmVuJztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4uc2l6ZS5oZWlnaHQgPSBhcmVhR3JlYXRlc3RZIC0gYXJlYVNtYWxsZXN0WTtcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi5zaXplLndpZHRoID0gYXJlYUdyZWF0ZXN0WCAtIGFyZWFTbWFsbGVzdFg7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICs9IGFyZWFTbWFsbGVzdFg7XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArPSBhcmVhU21hbGxlc3RZO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIHVzZXIgY2FsbGJhY2sgdGhyb3VnaCBhbiBldmVudFxyXG5cdFx0dmFyIGVkaXQgPSBmdW5jdGlvbihyKSB7XHJcblx0XHRcdGdlby5vcmlnaW4uc2l6ZS5oZWlnaHQgPSByLmhlaWdodCxcclxuXHRcdFx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ID0gci5sZWZ0LFxyXG5cdFx0XHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCA9IHIudG9wLFxyXG5cdFx0XHRcdGdlby5vcmlnaW4uc2l6ZS53aWR0aCA9IHIud2lkdGhcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHR0eXBlOiAnZ2VvbWV0cnknLFxyXG5cdFx0XHRlZGl0OiBlZGl0LFxyXG5cdFx0XHRnZW9tZXRyeToge1xyXG5cdFx0XHRcdGhlaWdodDogZ2VvLm9yaWdpbi5zaXplLmhlaWdodCxcclxuXHRcdFx0XHRsZWZ0OiBnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0LFxyXG5cdFx0XHRcdHRvcDogZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wLFxyXG5cdFx0XHRcdHdpZHRoOiBnZW8ub3JpZ2luLnNpemUud2lkdGhcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIGNhbGN1bGF0ZSB0aGUgcmVtYWluaW5nIHByb3BlcnRpZXMgd2l0aCB3aGF0IHdlIGdvdFxyXG5cdFx0XHJcblx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCA9IGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyBnZW8ub3JpZ2luLnNpemUud2lkdGg7XHJcblx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gPSBnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyBnZW8ub3JpZ2luLnNpemUuaGVpZ2h0O1xyXG5cdFx0XHJcblx0XHRnZW8ub3JpZ2luLm9mZnNldC5sZWZ0ID0gZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIGdlby53aW5kb3cuc2Nyb2xsLmxlZnQ7XHJcblx0XHRnZW8ub3JpZ2luLm9mZnNldC50b3AgPSBnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyBnZW8ud2luZG93LnNjcm9sbC50b3A7XHJcblx0XHRnZW8ub3JpZ2luLm9mZnNldC5ib3R0b20gPSBnZW8ub3JpZ2luLm9mZnNldC50b3AgKyBnZW8ub3JpZ2luLnNpemUuaGVpZ2h0O1xyXG5cdFx0Z2VvLm9yaWdpbi5vZmZzZXQucmlnaHQgPSBnZW8ub3JpZ2luLm9mZnNldC5sZWZ0ICsgZ2VvLm9yaWdpbi5zaXplLndpZHRoO1xyXG5cdFx0XHJcblx0XHQvLyB0aGUgc3BhY2UgdGhhdCBpcyBhdmFpbGFibGUgdG8gZGlzcGxheSB0aGUgdG9vbHRpcCByZWxhdGl2ZWx5IHRvIHRoZSBkb2N1bWVudFxyXG5cdFx0Z2VvLmF2YWlsYWJsZS5kb2N1bWVudCA9IHtcclxuXHRcdFx0Ym90dG9tOiB7XHJcblx0XHRcdFx0aGVpZ2h0OiBnZW8uZG9jdW1lbnQuc2l6ZS5oZWlnaHQgLSBnZW8ub3JpZ2luLm9mZnNldC5ib3R0b20sXHJcblx0XHRcdFx0d2lkdGg6IGdlby5kb2N1bWVudC5zaXplLndpZHRoXHJcblx0XHRcdH0sXHJcblx0XHRcdGxlZnQ6IHtcclxuXHRcdFx0XHRoZWlnaHQ6IGdlby5kb2N1bWVudC5zaXplLmhlaWdodCxcclxuXHRcdFx0XHR3aWR0aDogZ2VvLm9yaWdpbi5vZmZzZXQubGVmdFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRyaWdodDoge1xyXG5cdFx0XHRcdGhlaWdodDogZ2VvLmRvY3VtZW50LnNpemUuaGVpZ2h0LFxyXG5cdFx0XHRcdHdpZHRoOiBnZW8uZG9jdW1lbnQuc2l6ZS53aWR0aCAtIGdlby5vcmlnaW4ub2Zmc2V0LnJpZ2h0XHJcblx0XHRcdH0sXHJcblx0XHRcdHRvcDoge1xyXG5cdFx0XHRcdGhlaWdodDogZ2VvLm9yaWdpbi5vZmZzZXQudG9wLFxyXG5cdFx0XHRcdHdpZHRoOiBnZW8uZG9jdW1lbnQuc2l6ZS53aWR0aFxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvLyB0aGUgc3BhY2UgdGhhdCBpcyBhdmFpbGFibGUgdG8gZGlzcGxheSB0aGUgdG9vbHRpcCByZWxhdGl2ZWx5IHRvIHRoZSB2aWV3cG9ydFxyXG5cdFx0Ly8gKHRoZSByZXN1bHRpbmcgdmFsdWVzIG1heSBiZSBuZWdhdGl2ZSBpZiB0aGUgb3JpZ2luIG92ZXJmbG93cyB0aGUgdmlld3BvcnQpXHJcblx0XHRnZW8uYXZhaWxhYmxlLndpbmRvdyA9IHtcclxuXHRcdFx0Ym90dG9tOiB7XHJcblx0XHRcdFx0Ly8gdGhlIGlubmVyIG1heCBpcyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGUgYXZhaWxhYmxlIGhlaWdodCBpcyBubyBiaWdnZXJcclxuXHRcdFx0XHQvLyB0aGFuIHRoZSB2aWV3cG9ydCBoZWlnaHQgKHdoZW4gdGhlIG9yaWdpbiBpcyBvZmYgc2NyZWVuIGF0IHRoZSB0b3ApLlxyXG5cdFx0XHRcdC8vIFRoZSBvdXRlciBtYXgganVzdCBtYWtlcyBzdXJlIHRoYXQgdGhlIGhlaWdodCBpcyBub3QgbmVnYXRpdmUgKHdoZW5cclxuXHRcdFx0XHQvLyB0aGUgb3JpZ2luIG92ZXJmbG93cyBhdCB0aGUgYm90dG9tKS5cclxuXHRcdFx0XHRoZWlnaHQ6IE1hdGgubWF4KGdlby53aW5kb3cuc2l6ZS5oZWlnaHQgLSBNYXRoLm1heChnZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20sIDApLCAwKSxcclxuXHRcdFx0XHR3aWR0aDogZ2VvLndpbmRvdy5zaXplLndpZHRoXHJcblx0XHRcdH0sXHJcblx0XHRcdGxlZnQ6IHtcclxuXHRcdFx0XHRoZWlnaHQ6IGdlby53aW5kb3cuc2l6ZS5oZWlnaHQsXHJcblx0XHRcdFx0d2lkdGg6IE1hdGgubWF4KGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQsIDApXHJcblx0XHRcdH0sXHJcblx0XHRcdHJpZ2h0OiB7XHJcblx0XHRcdFx0aGVpZ2h0OiBnZW8ud2luZG93LnNpemUuaGVpZ2h0LFxyXG5cdFx0XHRcdHdpZHRoOiBNYXRoLm1heChnZW8ud2luZG93LnNpemUud2lkdGggLSBNYXRoLm1heChnZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCwgMCksIDApXHJcblx0XHRcdH0sXHJcblx0XHRcdHRvcDoge1xyXG5cdFx0XHRcdGhlaWdodDogTWF0aC5tYXgoZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wLCAwKSxcclxuXHRcdFx0XHR3aWR0aDogZ2VvLndpbmRvdy5zaXplLndpZHRoXHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRcclxuXHRcdHdoaWxlICgkcGFyZW50WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPSAnaHRtbCcpIHtcclxuXHRcdFx0XHJcblx0XHRcdGlmICgkcGFyZW50LmNzcygncG9zaXRpb24nKSA9PSAnZml4ZWQnKSB7XHJcblx0XHRcdFx0Z2VvLm9yaWdpbi5maXhlZExpbmVhZ2UgPSB0cnVlO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQkcGFyZW50ID0gJHBhcmVudC5wYXJlbnQoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIGdlbztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNvbWUgb3B0aW9ucyBtYXkgbmVlZCB0byBiZSBmb3JtYXRlZCBiZWZvcmUgYmVpbmcgdXNlZFxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19vcHRpb25zRm9ybWF0OiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbiA9PSAnbnVtYmVyJykge1xyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbiA9IFt0aGlzLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbiwgdGhpcy5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25dO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAodHlwZW9mIHRoaXMuX19vcHRpb25zLmRlbGF5ID09ICdudW1iZXInKSB7XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLmRlbGF5ID0gW3RoaXMuX19vcHRpb25zLmRlbGF5LCB0aGlzLl9fb3B0aW9ucy5kZWxheV07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0eXBlb2YgdGhpcy5fX29wdGlvbnMuZGVsYXlUb3VjaCA9PSAnbnVtYmVyJykge1xyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy5kZWxheVRvdWNoID0gW3RoaXMuX19vcHRpb25zLmRlbGF5VG91Y2gsIHRoaXMuX19vcHRpb25zLmRlbGF5VG91Y2hdO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAodHlwZW9mIHRoaXMuX19vcHRpb25zLnRoZW1lID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLnRoZW1lID0gW3RoaXMuX19vcHRpb25zLnRoZW1lXTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gZGV0ZXJtaW5lIHRoZSBmdXR1cmUgcGFyZW50XHJcblx0XHRpZiAodGhpcy5fX29wdGlvbnMucGFyZW50ID09PSBudWxsKSB7XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLnBhcmVudCA9ICQoZW52LndpbmRvdy5kb2N1bWVudC5ib2R5KTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKHR5cGVvZiB0aGlzLl9fb3B0aW9ucy5wYXJlbnQgPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMucGFyZW50ID0gJCh0aGlzLl9fb3B0aW9ucy5wYXJlbnQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5fX29wdGlvbnMudHJpZ2dlciA9PSAnaG92ZXInKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy50cmlnZ2VyT3BlbiA9IHtcclxuXHRcdFx0XHRtb3VzZWVudGVyOiB0cnVlLFxyXG5cdFx0XHRcdHRvdWNoc3RhcnQ6IHRydWVcclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLnRyaWdnZXJDbG9zZSA9IHtcclxuXHRcdFx0XHRtb3VzZWxlYXZlOiB0cnVlLFxyXG5cdFx0XHRcdG9yaWdpbkNsaWNrOiB0cnVlLFxyXG5cdFx0XHRcdHRvdWNobGVhdmU6IHRydWVcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKHRoaXMuX19vcHRpb25zLnRyaWdnZXIgPT0gJ2NsaWNrJykge1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMudHJpZ2dlck9wZW4gPSB7XHJcblx0XHRcdFx0Y2xpY2s6IHRydWUsXHJcblx0XHRcdFx0dGFwOiB0cnVlXHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UgPSB7XHJcblx0XHRcdFx0Y2xpY2s6IHRydWUsXHJcblx0XHRcdFx0dGFwOiB0cnVlXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIGZvciB0aGUgcGx1Z2luc1xyXG5cdFx0dGhpcy5fdHJpZ2dlcignb3B0aW9ucycpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNjaGVkdWxlcyBvciBjYW5jZWxzIHRoZSBnYXJiYWdlIGNvbGxlY3RvciB0YXNrXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fcHJlcGFyZUdDOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHQvLyBpbiBjYXNlIHRoZSBzZWxmRGVzdHJ1Y3Rpb24gb3B0aW9uIGhhcyBiZWVuIGNoYW5nZWQgYnkgYSBtZXRob2QgY2FsbFxyXG5cdFx0aWYgKHNlbGYuX19vcHRpb25zLnNlbGZEZXN0cnVjdGlvbikge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gdGhlIEdDIHRhc2tcclxuXHRcdFx0c2VsZi5fX2dhcmJhZ2VDb2xsZWN0b3IgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gZm9yZ2V0IHRoZSBvbGQgZXZlbnRzXHJcblx0XHRcdFx0c2VsZi5fX3RvdWNoRXZlbnRzID0gJC5ncmVwKHNlbGYuX190b3VjaEV2ZW50cywgZnVuY3Rpb24oZXZlbnQsIGkpIHtcclxuXHRcdFx0XHRcdC8vIDEgbWludXRlXHJcblx0XHRcdFx0XHRyZXR1cm4gbm93IC0gZXZlbnQudGltZSA+IDYwMDAwO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGF1dG8tZGVzdHJ1Y3QgaWYgdGhlIG9yaWdpbiBpcyBnb25lXHJcblx0XHRcdFx0aWYgKCFib2R5Q29udGFpbnMoc2VsZi5fJG9yaWdpbikpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZShmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHRzZWxmLmRlc3Ryb3koKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgMjAwMDApO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGNsZWFySW50ZXJ2YWwoc2VsZi5fX2dhcmJhZ2VDb2xsZWN0b3IpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNldHMgbGlzdGVuZXJzIG9uIHRoZSBvcmlnaW4gaWYgdGhlIG9wZW4gdHJpZ2dlcnMgcmVxdWlyZSB0aGVtLlxyXG5cdCAqIFVubGlrZSB0aGUgbGlzdGVuZXJzIHNldCBhdCBvcGVuaW5nIHRpbWUsIHRoZXNlIG9uZXNcclxuXHQgKiByZW1haW4gZXZlbiB3aGVuIHRoZSB0b29sdGlwIGlzIGNsb3NlZC4gSXQgaGFzIGJlZW4gbWFkZSBhXHJcblx0ICogc2VwYXJhdGUgbWV0aG9kIHNvIGl0IGNhbiBiZSBjYWxsZWQgd2hlbiB0aGUgdHJpZ2dlcnMgYXJlXHJcblx0ICogY2hhbmdlZCBpbiB0aGUgb3B0aW9ucy4gQ2xvc2luZyBpcyBoYW5kbGVkIGluIF9vcGVuKClcclxuXHQgKiBiZWNhdXNlIG9mIHRoZSBiaW5kaW5ncyB0aGF0IG1heSBiZSBuZWVkZWQgb24gdGhlIHRvb2x0aXBcclxuXHQgKiBpdHNlbGZcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19wcmVwYXJlT3JpZ2luOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHQvLyBpbiBjYXNlIHdlJ3JlIHJlc2V0dGluZyB0aGUgdHJpZ2dlcnNcclxuXHRcdHNlbGYuXyRvcmlnaW4ub2ZmKCcuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbicpO1xyXG5cdFx0XHJcblx0XHQvLyBpZiB0aGUgZGV2aWNlIGlzIHRvdWNoIGNhcGFibGUsIGV2ZW4gaWYgb25seSBtb3VzZSB0cmlnZ2Vyc1xyXG5cdFx0Ly8gYXJlIGFza2VkLCB3ZSBuZWVkIHRvIGxpc3RlbiB0byB0b3VjaCBldmVudHMgdG8ga25vdyBpZiB0aGUgbW91c2VcclxuXHRcdC8vIGV2ZW50cyBhcmUgYWN0dWFsbHkgZW11bGF0ZWQgKHNvIHdlIGNhbiBpZ25vcmUgdGhlbSlcclxuXHRcdGlmIChlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KSB7XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl8kb3JpZ2luLm9uKFxyXG5cdFx0XHRcdCd0b3VjaHN0YXJ0LicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4gJyArXHJcblx0XHRcdFx0J3RvdWNoZW5kLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4gJyArXHJcblx0XHRcdFx0J3RvdWNoY2FuY2VsLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4nLFxyXG5cdFx0XHRcdGZ1bmN0aW9uKGV2ZW50KXtcclxuXHRcdFx0XHRcdHNlbGYuX3RvdWNoUmVjb3JkRXZlbnQoZXZlbnQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gbW91c2UgY2xpY2sgYW5kIHRvdWNoIHRhcCB3b3JrIHRoZSBzYW1lIHdheVxyXG5cdFx0aWYgKFx0c2VsZi5fX29wdGlvbnMudHJpZ2dlck9wZW4uY2xpY2tcclxuXHRcdFx0fHxcdChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi50YXAgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSlcclxuXHRcdCkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGV2ZW50TmFtZXMgPSAnJztcclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJPcGVuLmNsaWNrKSB7XHJcblx0XHRcdFx0ZXZlbnROYW1lcyArPSAnY2xpY2suJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbiAnO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi50YXAgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSkge1xyXG5cdFx0XHRcdGV2ZW50TmFtZXMgKz0gJ3RvdWNoZW5kLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4nO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl8kb3JpZ2luLm9uKGV2ZW50TmFtZXMsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0aWYgKHNlbGYuX3RvdWNoSXNNZWFuaW5nZnVsRXZlbnQoZXZlbnQpKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9vcGVuKGV2ZW50KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBtb3VzZWVudGVyIGFuZCB0b3VjaCBzdGFydCB3b3JrIHRoZSBzYW1lIHdheVxyXG5cdFx0aWYgKFx0c2VsZi5fX29wdGlvbnMudHJpZ2dlck9wZW4ubW91c2VlbnRlclxyXG5cdFx0XHR8fFx0KHNlbGYuX19vcHRpb25zLnRyaWdnZXJPcGVuLnRvdWNoc3RhcnQgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSlcclxuXHRcdCkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGV2ZW50TmFtZXMgPSAnJztcclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJPcGVuLm1vdXNlZW50ZXIpIHtcclxuXHRcdFx0XHRldmVudE5hbWVzICs9ICdtb3VzZWVudGVyLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4gJztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlck9wZW4udG91Y2hzdGFydCAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KSB7XHJcblx0XHRcdFx0ZXZlbnROYW1lcyArPSAndG91Y2hzdGFydC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuJztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fJG9yaWdpbi5vbihldmVudE5hbWVzLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdGlmIChcdHNlbGYuX3RvdWNoSXNUb3VjaEV2ZW50KGV2ZW50KVxyXG5cdFx0XHRcdFx0fHxcdCFzZWxmLl90b3VjaElzRW11bGF0ZWRFdmVudChldmVudClcclxuXHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdHNlbGYuX19wb2ludGVySXNPdmVyT3JpZ2luID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHNlbGYuX29wZW5TaG9ydGx5KGV2ZW50KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBpbmZvIGZvciB0aGUgbW91c2VsZWF2ZS90b3VjaGxlYXZlIGNsb3NlIHRyaWdnZXJzIHdoZW4gdGhleSB1c2UgYSBkZWxheVxyXG5cdFx0aWYgKFx0c2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmVcclxuXHRcdFx0fHxcdChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudG91Y2hsZWF2ZSAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KVxyXG5cdFx0KSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZXZlbnROYW1lcyA9ICcnO1xyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmUpIHtcclxuXHRcdFx0XHRldmVudE5hbWVzICs9ICdtb3VzZWxlYXZlLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4gJztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRvdWNobGVhdmUgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSkge1xyXG5cdFx0XHRcdGV2ZW50TmFtZXMgKz0gJ3RvdWNoZW5kLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4gdG91Y2hjYW5jZWwuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3Blbic7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuXyRvcmlnaW4ub24oZXZlbnROYW1lcywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoc2VsZi5fdG91Y2hJc01lYW5pbmdmdWxFdmVudChldmVudCkpIHtcclxuXHRcdFx0XHRcdHNlbGYuX19wb2ludGVySXNPdmVyT3JpZ2luID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBEbyB0aGUgdGhpbmdzIHRoYXQgbmVlZCB0byBiZSBkb25lIG9ubHkgb25jZSBhZnRlciB0aGUgdG9vbHRpcFxyXG5cdCAqIEhUTUwgZWxlbWVudCBpdCBoYXMgYmVlbiBjcmVhdGVkLiBJdCBoYXMgYmVlbiBtYWRlIGEgc2VwYXJhdGVcclxuXHQgKiBtZXRob2Qgc28gaXQgY2FuIGJlIGNhbGxlZCB3aGVuIG9wdGlvbnMgYXJlIGNoYW5nZWQuIFJlbWVtYmVyXHJcblx0ICogdGhhdCB0aGUgdG9vbHRpcCBtYXkgYWN0dWFsbHkgZXhpc3QgaW4gdGhlIERPTSBiZWZvcmUgaXQgaXNcclxuXHQgKiBvcGVuZWQsIGFuZCBwcmVzZW50IGFmdGVyIGl0IGhhcyBiZWVuIGNsb3NlZDogaXQncyB0aGUgZGlzcGxheVxyXG5cdCAqIHBsdWdpbiB0aGF0IHRha2VzIGNhcmUgb2YgaGFuZGxpbmcgaXQuXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX3ByZXBhcmVUb29sdGlwOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRwID0gc2VsZi5fX29wdGlvbnMuaW50ZXJhY3RpdmUgPyAnYXV0bycgOiAnJztcclxuXHRcdFxyXG5cdFx0Ly8gdGhpcyB3aWxsIGJlIHVzZWZ1bCB0byBrbm93IHF1aWNrbHkgaWYgdGhlIHRvb2x0aXAgaXMgaW5cclxuXHRcdC8vIHRoZSBET00gb3Igbm90IFxyXG5cdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0LmF0dHIoJ2lkJywgc2VsZi5fX25hbWVzcGFjZSlcclxuXHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0Ly8gcG9pbnRlciBldmVudHNcclxuXHRcdFx0XHQncG9pbnRlci1ldmVudHMnOiBwLFxyXG5cdFx0XHRcdHpJbmRleDogc2VsZi5fX29wdGlvbnMuekluZGV4XHJcblx0XHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyB0aGVtZXNcclxuXHRcdC8vIHJlbW92ZSB0aGUgb2xkIG9uZXMgYW5kIGFkZCB0aGUgbmV3IG9uZXNcclxuXHRcdCQuZWFjaChzZWxmLl9fcHJldmlvdXNUaGVtZXMsIGZ1bmN0aW9uKGksIHRoZW1lKSB7XHJcblx0XHRcdHNlbGYuXyR0b29sdGlwLnJlbW92ZUNsYXNzKHRoZW1lKTtcclxuXHRcdH0pO1xyXG5cdFx0JC5lYWNoKHNlbGYuX19vcHRpb25zLnRoZW1lLCBmdW5jdGlvbihpLCB0aGVtZSkge1xyXG5cdFx0XHRzZWxmLl8kdG9vbHRpcC5hZGRDbGFzcyh0aGVtZSk7XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0c2VsZi5fX3ByZXZpb3VzVGhlbWVzID0gJC5tZXJnZShbXSwgc2VsZi5fX29wdGlvbnMudGhlbWUpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgdGhlIHNjcm9sbCBvbiBhbnkgb2YgdGhlIHBhcmVudHMgb2YgdGhlIG9yaWdpbiAod2hlbiB0aGVcclxuXHQgKiB0b29sdGlwIGlzIG9wZW4pXHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fc2Nyb2xsSGFuZGxlcjogZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnNjcm9sbCkge1xyXG5cdFx0XHRzZWxmLl9jbG9zZShldmVudCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZSBvcmlnaW4gb3IgdG9vbHRpcCBoYXZlIGJlZW4gcmVtb3ZlZDogZG8gbm90aGluZywgdGhlIHRyYWNrZXIgd2lsbFxyXG5cdFx0XHQvLyB0YWtlIGNhcmUgb2YgaXQgbGF0ZXJcclxuXHRcdFx0aWYgKGJvZHlDb250YWlucyhzZWxmLl8kb3JpZ2luKSAmJiBib2R5Q29udGFpbnMoc2VsZi5fJHRvb2x0aXApKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGdlbyA9IG51bGw7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHNjcm9sbCBoYXBwZW5lZCBvbiB0aGUgd2luZG93XHJcblx0XHRcdFx0aWYgKGV2ZW50LnRhcmdldCA9PT0gZW52LndpbmRvdy5kb2N1bWVudCkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBpZiB0aGUgb3JpZ2luIGhhcyBhIGZpeGVkIGxpbmVhZ2UsIHdpbmRvdyBzY3JvbGwgd2lsbCBoYXZlIG5vXHJcblx0XHRcdFx0XHQvLyBlZmZlY3Qgb24gaXRzIHBvc2l0aW9uIG5vciBvbiB0aGUgcG9zaXRpb24gb2YgdGhlIHRvb2x0aXBcclxuXHRcdFx0XHRcdGlmICghc2VsZi5fX0dlb21ldHJ5Lm9yaWdpbi5maXhlZExpbmVhZ2UpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcgdW5sZXNzIHJlcG9zaXRpb25PblNjcm9sbCBpcyB0cnVlXHJcblx0XHRcdFx0XHRcdC8vIGJlY2F1c2UgdGhlIHRvb2x0aXAgd2lsbCBhbHJlYWR5IGhhdmUgbW92ZWQgd2l0aCB0aGUgd2luZG93XHJcblx0XHRcdFx0XHRcdC8vIChhbmQgb2YgY291cnNlIHdpdGggdGhlIG9yaWdpbilcclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnJlcG9zaXRpb25PblNjcm9sbCkge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYucmVwb3NpdGlvbihldmVudCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHNjcm9sbCBoYXBwZW5lZCBvbiBhbm90aGVyIHBhcmVudCBvZiB0aGUgdG9vbHRpcCwgaXQgbWVhbnNcclxuXHRcdFx0XHQvLyB0aGF0IGl0J3MgaW4gYSBzY3JvbGxhYmxlIGFyZWEgYW5kIG5vdyBuZWVkcyB0byBoYXZlIGl0cyBwb3NpdGlvblxyXG5cdFx0XHRcdC8vIGFkanVzdGVkIG9yIHJlY29tcHV0ZWQsIGRlcGVuZGluZyBvbnQgdGhlIHJlcG9zaXRpb25PblNjcm9sbFxyXG5cdFx0XHRcdC8vIG9wdGlvbi4gQWxzbywgaWYgdGhlIG9yaWdpbiBpcyBwYXJ0bHkgaGlkZGVuIGR1ZSB0byBhIHBhcmVudCB0aGF0XHJcblx0XHRcdFx0Ly8gaGlkZXMgaXRzIG92ZXJmbG93LCB3ZSdsbCBqdXN0IGhpZGUgKG5vdCBjbG9zZSkgdGhlIHRvb2x0aXAuXHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGdlbyA9IHNlbGYuX19nZW9tZXRyeSgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgb3ZlcmZsb3dzID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGEgZml4ZWQgcG9zaXRpb24gb3JpZ2luIGlzIG5vdCBhZmZlY3RlZCBieSB0aGUgb3ZlcmZsb3cgaGlkaW5nXHJcblx0XHRcdFx0XHQvLyBvZiBhIHBhcmVudFxyXG5cdFx0XHRcdFx0aWYgKHNlbGYuXyRvcmlnaW4uY3NzKCdwb3NpdGlvbicpICE9ICdmaXhlZCcpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuX18kb3JpZ2luUGFyZW50cy5lYWNoKGZ1bmN0aW9uKGksIGVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dmFyICRlbCA9ICQoZWwpLFxyXG5cdFx0XHRcdFx0XHRcdFx0b3ZlcmZsb3dYID0gJGVsLmNzcygnb3ZlcmZsb3cteCcpLFxyXG5cdFx0XHRcdFx0XHRcdFx0b3ZlcmZsb3dZID0gJGVsLmNzcygnb3ZlcmZsb3cteScpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChvdmVyZmxvd1ggIT0gJ3Zpc2libGUnIHx8IG92ZXJmbG93WSAhPSAndmlzaWJsZScpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIGJjciA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAob3ZlcmZsb3dYICE9ICd2aXNpYmxlJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCA8IGJjci5sZWZ0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fHxcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0ID4gYmNyLnJpZ2h0XHJcblx0XHRcdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG92ZXJmbG93cyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChvdmVyZmxvd1kgIT0gJ3Zpc2libGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoXHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgPCBiY3IudG9wXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fHxcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSA+IGJjci5ib3R0b21cclxuXHRcdFx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0b3ZlcmZsb3dzID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gbm8gbmVlZCB0byBnbyBmdXJ0aGVyIGlmIGZpeGVkLCBmb3IgdGhlIHNhbWUgcmVhc29uIGFzIGFib3ZlXHJcblx0XHRcdFx0XHRcdFx0aWYgKCRlbC5jc3MoJ3Bvc2l0aW9uJykgPT0gJ2ZpeGVkJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChvdmVyZmxvd3MpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gcmVwb3NpdGlvblxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMucmVwb3NpdGlvbk9uU2Nyb2xsKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5yZXBvc2l0aW9uKGV2ZW50KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQvLyBvciBqdXN0IGFkanVzdCBvZmZzZXRcclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gd2UgaGF2ZSB0byB1c2Ugb2Zmc2V0IGFuZCBub3Qgd2luZG93T2Zmc2V0IGJlY2F1c2UgdGhpcyB3YXksXHJcblx0XHRcdFx0XHRcdFx0Ly8gb25seSB0aGUgc2Nyb2xsIGRpc3RhbmNlIG9mIHRoZSBzY3JvbGxhYmxlIGFyZWFzIGFyZSB0YWtlbiBpbnRvXHJcblx0XHRcdFx0XHRcdFx0Ly8gYWNjb3VudCAodGhlIHNjcm9sbHRvcCB2YWx1ZSBvZiB0aGUgbWFpbiB3aW5kb3cgbXVzdCBiZVxyXG5cdFx0XHRcdFx0XHRcdC8vIGlnbm9yZWQgc2luY2UgdGhlIHRvb2x0aXAgYWxyZWFkeSBtb3ZlcyB3aXRoIGl0KVxyXG5cdFx0XHRcdFx0XHRcdHZhciBvZmZzZXRMZWZ0ID0gZ2VvLm9yaWdpbi5vZmZzZXQubGVmdCAtIHNlbGYuX19HZW9tZXRyeS5vcmlnaW4ub2Zmc2V0LmxlZnQsXHJcblx0XHRcdFx0XHRcdFx0XHRvZmZzZXRUb3AgPSBnZW8ub3JpZ2luLm9mZnNldC50b3AgLSBzZWxmLl9fR2VvbWV0cnkub3JpZ2luLm9mZnNldC50b3A7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gYWRkIHRoZSBvZmZzZXQgdG8gdGhlIHBvc2l0aW9uIGluaXRpYWxseSBjb21wdXRlZCBieSB0aGUgZGlzcGxheSBwbHVnaW5cclxuXHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5jc3Moe1xyXG5cdFx0XHRcdFx0XHRcdFx0bGVmdDogc2VsZi5fX2xhc3RQb3NpdGlvbi5jb29yZC5sZWZ0ICsgb2Zmc2V0TGVmdCxcclxuXHRcdFx0XHRcdFx0XHRcdHRvcDogc2VsZi5fX2xhc3RQb3NpdGlvbi5jb29yZC50b3AgKyBvZmZzZXRUb3BcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdHR5cGU6ICdzY3JvbGwnLFxyXG5cdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0Z2VvOiBnZW9cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIENoYW5nZXMgdGhlIHN0YXRlIG9mIHRoZSB0b29sdGlwXHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc3RhdGVcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fc3RhdGVTZXQ6IGZ1bmN0aW9uKHN0YXRlKSB7XHJcblx0XHRcclxuXHRcdHRoaXMuX19zdGF0ZSA9IHN0YXRlO1xyXG5cdFx0XHJcblx0XHR0aGlzLl90cmlnZ2VyKHtcclxuXHRcdFx0dHlwZTogJ3N0YXRlJyxcclxuXHRcdFx0c3RhdGU6IHN0YXRlXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBDbGVhciBhcHBlYXJhbmNlIHRpbWVvdXRzXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fdGltZW91dHNDbGVhcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdC8vIHRoZXJlIGlzIG9ubHkgb25lIHBvc3NpYmxlIG9wZW4gdGltZW91dDogdGhlIGRlbGF5ZWQgb3BlbmluZ1xyXG5cdFx0Ly8gd2hlbiB0aGUgbW91c2VlbnRlci90b3VjaHN0YXJ0IG9wZW4gdHJpZ2dlcnMgYXJlIHVzZWRcclxuXHRcdGNsZWFyVGltZW91dCh0aGlzLl9fdGltZW91dHMub3Blbik7XHJcblx0XHR0aGlzLl9fdGltZW91dHMub3BlbiA9IG51bGw7XHJcblx0XHRcclxuXHRcdC8vIC4uLiBidXQgc2V2ZXJhbCBjbG9zZSB0aW1lb3V0czogdGhlIGRlbGF5ZWQgY2xvc2luZyB3aGVuIHRoZVxyXG5cdFx0Ly8gbW91c2VsZWF2ZSBjbG9zZSB0cmlnZ2VyIGlzIHVzZWQgYW5kIHRoZSB0aW1lciBvcHRpb25cclxuXHRcdCQuZWFjaCh0aGlzLl9fdGltZW91dHMuY2xvc2UsIGZ1bmN0aW9uKGksIHRpbWVvdXQpIHtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLl9fdGltZW91dHMuY2xvc2UgPSBbXTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBTdGFydCB0aGUgdHJhY2tlciB0aGF0IHdpbGwgbWFrZSBjaGVja3MgYXQgcmVndWxhciBpbnRlcnZhbHNcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fdHJhY2tlclN0YXJ0OiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHQkY29udGVudCA9IHNlbGYuXyR0b29sdGlwLmZpbmQoJy50b29sdGlwc3Rlci1jb250ZW50Jyk7XHJcblx0XHRcclxuXHRcdC8vIGdldCB0aGUgaW5pdGlhbCBjb250ZW50IHNpemVcclxuXHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmFja1Rvb2x0aXApIHtcclxuXHRcdFx0c2VsZi5fX2NvbnRlbnRCY3IgPSAkY29udGVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0c2VsZi5fX3RyYWNrZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZSBvcmlnaW4gb3IgdG9vbHRpcCBlbGVtZW50cyBoYXZlIGJlZW4gcmVtb3ZlZC5cclxuXHRcdFx0Ly8gTm90ZTogd2UgY291bGQgZGVzdHJveSB0aGUgaW5zdGFuY2Ugbm93IGlmIHRoZSBvcmlnaW4gaGFzXHJcblx0XHRcdC8vIGJlZW4gcmVtb3ZlZCBidXQgd2UnbGwgbGVhdmUgdGhhdCB0YXNrIHRvIG91ciBnYXJiYWdlIGNvbGxlY3RvclxyXG5cdFx0XHRpZiAoIWJvZHlDb250YWlucyhzZWxmLl8kb3JpZ2luKSB8fCAhYm9keUNvbnRhaW5zKHNlbGYuXyR0b29sdGlwKSkge1xyXG5cdFx0XHRcdHNlbGYuX2Nsb3NlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gaWYgZXZlcnl0aGluZyBpcyBhbHJpZ2h0XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGNvbXBhcmUgdGhlIGZvcm1lciBhbmQgY3VycmVudCBwb3NpdGlvbnMgb2YgdGhlIG9yaWdpbiB0byByZXBvc2l0aW9uXHJcblx0XHRcdFx0Ly8gdGhlIHRvb2x0aXAgaWYgbmVlZCBiZVxyXG5cdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmFja09yaWdpbikge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgZyA9IHNlbGYuX19nZW9tZXRyeSgpLFxyXG5cdFx0XHRcdFx0XHRpZGVudGljYWwgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gY29tcGFyZSBzaXplIGZpcnN0IChhIGNoYW5nZSByZXF1aXJlcyByZXBvc2l0aW9uaW5nIHRvbylcclxuXHRcdFx0XHRcdGlmIChhcmVFcXVhbChnLm9yaWdpbi5zaXplLCBzZWxmLl9fR2VvbWV0cnkub3JpZ2luLnNpemUpKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIGEgZml4ZWQgbGluZWFnZSAoc2VlIF9fZ2VvbWV0cnkoKSksIHdlIHRyYWNrIHRoZVxyXG5cdFx0XHRcdFx0XHQvLyB0b3AgYW5kIGxlZnQgcHJvcGVydGllcyAocmVsYXRpdmUgdG8gd2luZG93KVxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX0dlb21ldHJ5Lm9yaWdpbi5maXhlZExpbmVhZ2UpIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoYXJlRXF1YWwoZy5vcmlnaW4ud2luZG93T2Zmc2V0LCBzZWxmLl9fR2VvbWV0cnkub3JpZ2luLndpbmRvd09mZnNldCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGlkZW50aWNhbCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIG90aGVyd2lzZSwgdHJhY2sgdG90YWwgb2Zmc2V0IChyZWxhdGl2ZSB0byBkb2N1bWVudClcclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGFyZUVxdWFsKGcub3JpZ2luLm9mZnNldCwgc2VsZi5fX0dlb21ldHJ5Lm9yaWdpbi5vZmZzZXQpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZGVudGljYWwgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoIWlkZW50aWNhbCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gY2xvc2UgdGhlIHRvb2x0aXAgd2hlbiB1c2luZyB0aGUgbW91c2VsZWF2ZSBjbG9zZSB0cmlnZ2VyXHJcblx0XHRcdFx0XHRcdC8vIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2lhbWNlZWdlL3Rvb2x0aXBzdGVyL3B1bGwvMjUzKVxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmUpIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9jbG9zZSgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYucmVwb3NpdGlvbigpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmFja1Rvb2x0aXApIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIGN1cnJlbnRCY3IgPSAkY29udGVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKFx0Y3VycmVudEJjci5oZWlnaHQgIT09IHNlbGYuX19jb250ZW50QmNyLmhlaWdodFxyXG5cdFx0XHRcdFx0XHR8fFx0Y3VycmVudEJjci53aWR0aCAhPT0gc2VsZi5fX2NvbnRlbnRCY3Iud2lkdGhcclxuXHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLnJlcG9zaXRpb24oKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fX2NvbnRlbnRCY3IgPSBjdXJyZW50QmNyO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSwgc2VsZi5fX29wdGlvbnMudHJhY2tlckludGVydmFsKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBDbG9zZXMgdGhlIHRvb2x0aXAgKGFmdGVyIHRoZSBjbG9zaW5nIGRlbGF5KVxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSBldmVudFxyXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xyXG5cdCAqIEBwYXJhbSBmb3JjZSBTZXQgdG8gdHJ1ZSB0byBvdmVycmlkZSBhIHBvdGVudGlhbCByZWZ1c2FsIG9mIHRoZSB1c2VyJ3MgZnVuY3Rpb25cclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X2Nsb3NlOiBmdW5jdGlvbihldmVudCwgY2FsbGJhY2ssIGZvcmNlKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0b2sgPSB0cnVlO1xyXG5cdFx0XHJcblx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0dHlwZTogJ2Nsb3NlJyxcclxuXHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRzdG9wOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRvayA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gYSBkZXN0cm95aW5nIHRvb2x0aXAgKGZvcmNlID09IHRydWUpIG1heSBub3QgcmVmdXNlIHRvIGNsb3NlXHJcblx0XHRpZiAob2sgfHwgZm9yY2UpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHNhdmUgdGhlIG1ldGhvZCBjdXN0b20gY2FsbGJhY2sgYW5kIGNhbmNlbCBhbnkgb3BlbiBtZXRob2QgY3VzdG9tIGNhbGxiYWNrc1xyXG5cdFx0XHRpZiAoY2FsbGJhY2spIHNlbGYuX19jYWxsYmFja3MuY2xvc2UucHVzaChjYWxsYmFjayk7XHJcblx0XHRcdHNlbGYuX19jYWxsYmFja3Mub3BlbiA9IFtdO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gY2xlYXIgb3Blbi9jbG9zZSB0aW1lb3V0c1xyXG5cdFx0XHRzZWxmLl9fdGltZW91dHNDbGVhcigpO1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGZpbmlzaENhbGxiYWNrcyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHRyaWdnZXIgYW55IGNsb3NlIG1ldGhvZCBjdXN0b20gY2FsbGJhY2tzIGFuZCByZXNldCB0aGVtXHJcblx0XHRcdFx0JC5lYWNoKHNlbGYuX19jYWxsYmFja3MuY2xvc2UsIGZ1bmN0aW9uKGksYykge1xyXG5cdFx0XHRcdFx0Yy5jYWxsKHNlbGYsIHNlbGYsIHtcclxuXHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0XHRvcmlnaW46IHNlbGYuXyRvcmlnaW5bMF1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNlbGYuX19jYWxsYmFja3MuY2xvc2UgPSBbXTtcclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgbmVjZXNzYXJ5ID0gdHJ1ZSxcclxuXHRcdFx0XHRcdGQgPSBuZXcgRGF0ZSgpLFxyXG5cdFx0XHRcdFx0bm93ID0gZC5nZXRUaW1lKCksXHJcblx0XHRcdFx0XHRuZXdDbG9zaW5nVGltZSA9IG5vdyArIHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHRoZSB0b29sdGlwIG1heSBhbHJlYWR5IGFscmVhZHkgYmUgZGlzYXBwZWFyaW5nLCBidXQgaWYgYSBuZXdcclxuXHRcdFx0XHQvLyBjYWxsIHRvIGNsb3NlKCkgaXMgbWFkZSBhZnRlciB0aGUgYW5pbWF0aW9uRHVyYXRpb24gd2FzIGNoYW5nZWRcclxuXHRcdFx0XHQvLyB0byAwIChmb3IgZXhhbXBsZSksIHdlIG91Z2h0IHRvIGFjdHVhbGx5IGNsb3NlIGl0IHNvb25lciB0aGFuXHJcblx0XHRcdFx0Ly8gcHJldmlvdXNseSBzY2hlZHVsZWQuIEluIHRoYXQgY2FzZSBpdCBzaG91bGQgYmUgbm90ZWQgdGhhdCB0aGVcclxuXHRcdFx0XHQvLyBicm93c2VyIHdpbGwgbm90IGFkYXB0IHRoZSBhbmltYXRpb24gZHVyYXRpb24gdG8gdGhlIG5ld1xyXG5cdFx0XHRcdC8vIGFuaW1hdGlvbkR1cmF0aW9uIHRoYXQgd2FzIHNldCBhZnRlciB0aGUgc3RhcnQgb2YgdGhlIGNsb3NpbmdcclxuXHRcdFx0XHQvLyBhbmltYXRpb24uXHJcblx0XHRcdFx0Ly8gTm90ZTogdGhlIHNhbWUgdGhpbmcgY291bGQgYmUgY29uc2lkZXJlZCBhdCBvcGVuaW5nLCBidXQgaXMgbm90XHJcblx0XHRcdFx0Ly8gcmVhbGx5IHVzZWZ1bCBzaW5jZSB0aGUgdG9vbHRpcCBpcyBhY3R1YWxseSBvcGVuZWQgaW1tZWRpYXRlbHlcclxuXHRcdFx0XHQvLyB1cG9uIGEgY2FsbCB0byBfb3BlbigpLiBTaW5jZSBpdCB3b3VsZCBub3QgbWFrZSB0aGUgb3BlbmluZ1xyXG5cdFx0XHRcdC8vIGFuaW1hdGlvbiBmaW5pc2ggc29vbmVyLCBpdHMgc29sZSBpbXBhY3Qgd291bGQgYmUgdG8gdHJpZ2dlciB0aGVcclxuXHRcdFx0XHQvLyBzdGF0ZSBldmVudCBhbmQgdGhlIG9wZW4gY2FsbGJhY2tzIHNvb25lciB0aGFuIHRoZSBhY3R1YWwgZW5kIG9mXHJcblx0XHRcdFx0Ly8gdGhlIG9wZW5pbmcgYW5pbWF0aW9uLCB3aGljaCBpcyBub3QgZ3JlYXQuXHJcblx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSA9PSAnZGlzYXBwZWFyaW5nJykge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoXHRuZXdDbG9zaW5nVGltZSA+IHNlbGYuX19jbG9zaW5nVGltZVxyXG5cdFx0XHRcdFx0XHQvLyBpbiBjYXNlIGNsb3NpbmcgaXMgYWN0dWFsbHkgb3ZlcmR1ZSBiZWNhdXNlIHRoZSBzY3JpcHRcclxuXHRcdFx0XHRcdFx0Ly8gZXhlY3V0aW9uIHdhcyBzdXNwZW5kZWQuIFNlZSAjNjc5XHJcblx0XHRcdFx0XHRcdCYmXHRzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSA+IDBcclxuXHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRuZWNlc3NhcnkgPSBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKG5lY2Vzc2FyeSkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRzZWxmLl9fY2xvc2luZ1RpbWUgPSBuZXdDbG9zaW5nVGltZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnZGlzYXBwZWFyaW5nJykge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9fc3RhdGVTZXQoJ2Rpc2FwcGVhcmluZycpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgZmluaXNoID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBzdG9wIHRoZSB0cmFja2VyXHJcblx0XHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoc2VsZi5fX3RyYWNrZXIpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gYSBcImJlZm9yZUNsb3NlXCIgb3B0aW9uIGhhcyBiZWVuIGFza2VkIHNldmVyYWwgdGltZXMgYnV0IHdvdWxkXHJcblx0XHRcdFx0XHRcdC8vIHByb2JhYmx5IHVzZWxlc3Mgc2luY2UgdGhlIGNvbnRlbnQgZWxlbWVudCBpcyBzdGlsbCBhY2Nlc3NpYmxlXHJcblx0XHRcdFx0XHRcdC8vIHZpYSA6OmNvbnRlbnQoKSwgYW5kIGJlY2F1c2UgcGVvcGxlIGNhbiBhbHdheXMgdXNlIGxpc3RlbmVyc1xyXG5cdFx0XHRcdFx0XHQvLyBpbnNpZGUgdGhlaXIgY29udGVudCB0byB0cmFjayB3aGF0J3MgZ29pbmcgb24uIEZvciB0aGUgc2FrZSBvZlxyXG5cdFx0XHRcdFx0XHQvLyBzaW1wbGljaXR5LCB0aGlzIGhhcyBiZWVuIGRlbmllZC4gQnVyIGZvciB0aGUgcmFyZSBwZW9wbGUgd2hvXHJcblx0XHRcdFx0XHRcdC8vIHJlYWxseSBuZWVkIHRoZSBvcHRpb24gKGZvciBvbGQgYnJvd3NlcnMgb3IgZm9yIHRoZSBjYXNlIHdoZXJlXHJcblx0XHRcdFx0XHRcdC8vIGRldGFjaGluZyB0aGUgY29udGVudCBpcyBhY3R1YWxseSBkZXN0cnVjdGl2ZSwgZm9yIGZpbGUgb3JcclxuXHRcdFx0XHRcdFx0Ly8gcGFzc3dvcmQgaW5wdXRzIGZvciBleGFtcGxlKSwgdGhpcyBldmVudCB3aWxsIGRvIHRoZSB3b3JrLlxyXG5cdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdFx0XHR0eXBlOiAnY2xvc2luZycsXHJcblx0XHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gdW5iaW5kIGxpc3RlbmVycyB3aGljaCBhcmUgbm8gbG9uZ2VyIG5lZWRlZFxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHQub2ZmKCcuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnKVxyXG5cdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItZHlpbmcnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIG9yaWVudGF0aW9uY2hhbmdlLCBzY3JvbGwgYW5kIHJlc2l6ZSBsaXN0ZW5lcnNcclxuXHRcdFx0XHRcdFx0JChlbnYud2luZG93KS5vZmYoJy4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gc2Nyb2xsIGxpc3RlbmVyc1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9fJG9yaWdpblBhcmVudHMuZWFjaChmdW5jdGlvbihpLCBlbCkge1xyXG5cdFx0XHRcdFx0XHRcdCQoZWwpLm9mZignc2Nyb2xsLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJyk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHQvLyBjbGVhciB0aGUgYXJyYXkgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcclxuXHRcdFx0XHRcdFx0c2VsZi5fXyRvcmlnaW5QYXJlbnRzID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdCQoZW52LndpbmRvdy5kb2N1bWVudC5ib2R5KS5vZmYoJy4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fJG9yaWdpbi5vZmYoJy4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fb2ZmKCdkaXNtaXNzYWJsZScpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gYSBwbHVnaW4gdGhhdCB3b3VsZCBsaWtlIHRvIHJlbW92ZSB0aGUgdG9vbHRpcCBmcm9tIHRoZVxyXG5cdFx0XHRcdFx0XHQvLyBET00gd2hlbiBjbG9zZWQgc2hvdWxkIGJpbmQgb24gdGhpc1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9fc3RhdGVTZXQoJ2Nsb3NlZCcpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gdHJpZ2dlciBldmVudFxyXG5cdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdFx0XHR0eXBlOiAnYWZ0ZXInLFxyXG5cdFx0XHRcdFx0XHRcdGV2ZW50OiBldmVudFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGNhbGwgb3VyIGNvbnN0cnVjdG9yIGN1c3RvbSBjYWxsYmFjayBmdW5jdGlvblxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuZnVuY3Rpb25BZnRlcikge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uQWZ0ZXIuY2FsbChzZWxmLCBzZWxmLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRcdFx0XHRvcmlnaW46IHNlbGYuXyRvcmlnaW5bMF1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gY2FsbCBvdXIgbWV0aG9kIGN1c3RvbSBjYWxsYmFja3MgZnVuY3Rpb25zXHJcblx0XHRcdFx0XHRcdGZpbmlzaENhbGxiYWNrcygpO1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKGVudi5oYXNUcmFuc2l0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuY3NzKHtcclxuXHRcdFx0XHRcdFx0XHQnLW1vei1hbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0Jy1tcy1hbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0Jy1vLWFuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHQnLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0J2FuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHQndHJhbnNpdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdICsgJ21zJ1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0Ly8gY2xlYXIgYm90aCBwb3RlbnRpYWwgb3BlbiBhbmQgY2xvc2UgdGFza3NcclxuXHRcdFx0XHRcdFx0XHQuY2xlYXJRdWV1ZSgpXHJcblx0XHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci1zaG93JylcclxuXHRcdFx0XHRcdFx0XHQvLyBmb3IgdHJhbnNpdGlvbnMgb25seVxyXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcygndG9vbHRpcHN0ZXItZHlpbmcnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5kZWxheShzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLnF1ZXVlKGZpbmlzaCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0LnN0b3AoKVxyXG5cdFx0XHRcdFx0XHRcdC5mYWRlT3V0KHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzFdLCBmaW5pc2gpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBpcyBhbHJlYWR5IGNsb3NlZCwgd2Ugc3RpbGwgbmVlZCB0byB0cmlnZ2VyXHJcblx0XHRcdC8vIHRoZSBtZXRob2QgY3VzdG9tIGNhbGxiYWNrc1xyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRmaW5pc2hDYWxsYmFja3MoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBpbnRlcm5hbCB1c2UgYnkgcGx1Z2lucywgaWYgbmVlZGVkXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9vZmY6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vZmYuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgaW50ZXJuYWwgdXNlIGJ5IHBsdWdpbnMsIGlmIG5lZWRlZFxyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9vbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLm9uLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIGludGVybmFsIHVzZSBieSBwbHVnaW5zLCBpZiBuZWVkZWRcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfb25lOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUub25lLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogT3BlbnMgdGhlIHRvb2x0aXAgcmlnaHQgYXdheS5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBldmVudFxyXG5cdCAqIEBwYXJhbSBjYWxsYmFjayBXaWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBvcGVuaW5nIGFuaW1hdGlvbiBpcyBvdmVyXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9vcGVuOiBmdW5jdGlvbihldmVudCwgY2FsbGJhY2spIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHQvLyBpZiB0aGUgZGVzdHJ1Y3Rpb24gcHJvY2VzcyBoYXMgbm90IGJlZ3VuIGFuZCBpZiB0aGlzIHdhcyBub3RcclxuXHRcdC8vIHRyaWdnZXJlZCBieSBhbiB1bndhbnRlZCBlbXVsYXRlZCBjbGljayBldmVudFxyXG5cdFx0aWYgKCFzZWxmLl9fZGVzdHJveWluZykge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gY2hlY2sgdGhhdCB0aGUgb3JpZ2luIGlzIHN0aWxsIGluIHRoZSBET01cclxuXHRcdFx0aWYgKFx0Ym9keUNvbnRhaW5zKHNlbGYuXyRvcmlnaW4pXHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdCYmXHRzZWxmLl9fZW5hYmxlZFxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgb2sgPSB0cnVlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGlzIG5vdCBvcGVuIHlldCwgd2UgbmVlZCB0byBjYWxsIGZ1bmN0aW9uQmVmb3JlLlxyXG5cdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBjYW4ganN0IGdvIG9uXHJcblx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSA9PSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyB0cmlnZ2VyIGFuIGV2ZW50LiBUaGUgZXZlbnQuc3RvcCBmdW5jdGlvbiBhbGxvd3MgdGhlIGNhbGxiYWNrXHJcblx0XHRcdFx0XHQvLyB0byBwcmV2ZW50IHRoZSBvcGVuaW5nIG9mIHRoZSB0b29sdGlwXHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdFx0dHlwZTogJ2JlZm9yZScsXHJcblx0XHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdFx0c3RvcDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0b2sgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChvayAmJiBzZWxmLl9fb3B0aW9ucy5mdW5jdGlvbkJlZm9yZSkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gY2FsbCBvdXIgY3VzdG9tIGZ1bmN0aW9uIGJlZm9yZSBjb250aW51aW5nXHJcblx0XHRcdFx0XHRcdG9rID0gc2VsZi5fX29wdGlvbnMuZnVuY3Rpb25CZWZvcmUuY2FsbChzZWxmLCBzZWxmLCB7XHJcblx0XHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0XHRcdG9yaWdpbjogc2VsZi5fJG9yaWdpblswXVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKG9rICE9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBpZiB0aGVyZSBpcyBzb21lIGNvbnRlbnRcclxuXHRcdFx0XHRcdGlmIChzZWxmLl9fQ29udGVudCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gc2F2ZSB0aGUgbWV0aG9kIGNhbGxiYWNrIGFuZCBjYW5jZWwgY2xvc2UgbWV0aG9kIGNhbGxiYWNrc1xyXG5cdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2spIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fY2FsbGJhY2tzLm9wZW4ucHVzaChjYWxsYmFjayk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0c2VsZi5fX2NhbGxiYWNrcy5jbG9zZSA9IFtdO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gZ2V0IHJpZCBvZiBhbnkgYXBwZWFyYW5jZSB0aW1lb3V0c1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9fdGltZW91dHNDbGVhcigpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGV4dHJhVGltZSxcclxuXHRcdFx0XHRcdFx0XHRmaW5pc2ggPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnc3RhYmxlJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fc3RhdGVTZXQoJ3N0YWJsZScpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyB0cmlnZ2VyIGFueSBvcGVuIG1ldGhvZCBjdXN0b20gY2FsbGJhY2tzIGFuZCByZXNldCB0aGVtXHJcblx0XHRcdFx0XHRcdFx0XHQkLmVhY2goc2VsZi5fX2NhbGxiYWNrcy5vcGVuLCBmdW5jdGlvbihpLGMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Yy5jYWxsKHNlbGYsIHNlbGYsIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRvcmlnaW46IHNlbGYuXyRvcmlnaW5bMF0sXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dG9vbHRpcDogc2VsZi5fJHRvb2x0aXBbMF1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fX2NhbGxiYWNrcy5vcGVuID0gW107XHJcblx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGlzIGFscmVhZHkgb3BlblxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9PSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIHRoZSB0aW1lciAoaWYgYW55KSB3aWxsIHN0YXJ0IChvciByZXN0YXJ0KSByaWdodCBub3dcclxuXHRcdFx0XHRcdFx0XHRleHRyYVRpbWUgPSAwO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGlmIGl0IHdhcyBkaXNhcHBlYXJpbmcsIGNhbmNlbCB0aGF0XHJcblx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSA9PT0gJ2Rpc2FwcGVhcmluZycpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fX3N0YXRlU2V0KCdhcHBlYXJpbmcnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGVudi5oYXNUcmFuc2l0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuY2xlYXJRdWV1ZSgpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci1keWluZycpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCd0b29sdGlwc3Rlci1zaG93Jyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuZGVsYXkoc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5xdWV1ZShmaW5pc2gpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGluIGNhc2UgdGhlIHRvb2x0aXAgd2FzIGN1cnJlbnRseSBmYWRpbmcgb3V0LCBicmluZyBpdCBiYWNrXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHRvIGxpZmVcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuc3RvcCgpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmZhZGVJbihmaW5pc2gpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBpcyBhbHJlYWR5IG9wZW4sIHdlIHN0aWxsIG5lZWQgdG8gdHJpZ2dlciB0aGUgbWV0aG9kXHJcblx0XHRcdFx0XHRcdFx0Ly8gY3VzdG9tIGNhbGxiYWNrXHJcblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoc2VsZi5fX3N0YXRlID09ICdzdGFibGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRmaW5pc2goKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgaXNuJ3QgYWxyZWFkeSBvcGVuLCBvcGVuIGl0XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGEgcGx1Z2luIG11c3QgYmluZCBvbiB0aGlzIGFuZCBzdG9yZSB0aGUgdG9vbHRpcCBpbiB0aGlzLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX19zdGF0ZVNldCgnYXBwZWFyaW5nJyk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gdGhlIHRpbWVyIChpZiBhbnkpIHdpbGwgc3RhcnQgd2hlbiB0aGUgdG9vbHRpcCBoYXMgZnVsbHkgYXBwZWFyZWRcclxuXHRcdFx0XHRcdFx0XHQvLyBhZnRlciBpdHMgdHJhbnNpdGlvblxyXG5cdFx0XHRcdFx0XHRcdGV4dHJhVGltZSA9IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGluc2VydCB0aGUgY29udGVudCBpbnNpZGUgdGhlIHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fY29udGVudEluc2VydCgpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIHJlcG9zaXRpb24gdGhlIHRvb2x0aXAgYW5kIGF0dGFjaCB0byB0aGUgRE9NXHJcblx0XHRcdFx0XHRcdFx0c2VsZi5yZXBvc2l0aW9uKGV2ZW50LCB0cnVlKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBhbmltYXRlIGluIHRoZSB0b29sdGlwLiBJZiB0aGUgZGlzcGxheSBwbHVnaW4gd2FudHMgbm8gY3NzXHJcblx0XHRcdFx0XHRcdFx0Ly8gYW5pbWF0aW9ucywgaXQgbWF5IG92ZXJyaWRlIHRoZSBhbmltYXRpb24gb3B0aW9uIHdpdGggYVxyXG5cdFx0XHRcdFx0XHRcdC8vIGR1bW15IHZhbHVlIHRoYXQgd2lsbCBwcm9kdWNlIG5vIGVmZmVjdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChlbnYuaGFzVHJhbnNpdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gbm90ZTogdGhlcmUgc2VlbXMgdG8gYmUgYW4gaXNzdWUgd2l0aCBzdGFydCBhbmltYXRpb25zIHdoaWNoXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBhcmUgcmFuZG9tbHkgbm90IHBsYXllZCBvbiBmYXN0IGRldmljZXMgaW4gYm90aCBDaHJvbWUgYW5kIEZGLFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gY291bGRuJ3QgZmluZCBhIHdheSB0byBzb2x2ZSBpdCB5ZXQuIEl0IHNlZW1zIHRoYXQgYXBwbHlpbmdcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHRoZSBjbGFzc2VzIGJlZm9yZSBhcHBlbmRpbmcgdG8gdGhlIERPTSBoZWxwcyBhIGxpdHRsZSwgYnV0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBpdCBtZXNzZXMgdXAgc29tZSBDU1MgdHJhbnNpdGlvbnMuIFRoZSBpc3N1ZSBhbG1vc3QgbmV2ZXJcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGhhcHBlbnMgd2hlbiBkZWxheVswXT09MCB0aG91Z2hcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5hZGRDbGFzcygndG9vbHRpcHN0ZXItJysgc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoJ3Rvb2x0aXBzdGVyLWluaXRpYWwnKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuY3NzKHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnLW1vei1hbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jy1tcy1hbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jy1vLWFuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnLXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0J2FuaW1hdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdICsgJ21zJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQndHJhbnNpdGlvbi1kdXJhdGlvbic6IHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdICsgJ21zJ1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYSBxdWljayBob3ZlciBtYXkgaGF2ZSBhbHJlYWR5IHRyaWdnZXJlZCBhIG1vdXNlbGVhdmVcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5hZGRDbGFzcygndG9vbHRpcHN0ZXItc2hvdycpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItaW5pdGlhbCcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmRlbGF5KHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAucXVldWUoZmluaXNoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdFx0XHRcdDBcclxuXHRcdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBvbGQgYnJvd3NlcnMgd2lsbCBoYXZlIHRvIGxpdmUgd2l0aCB0aGlzXHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuY3NzKCdkaXNwbGF5JywgJ25vbmUnKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuZmFkZUluKHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdLCBmaW5pc2gpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBjaGVja3MgaWYgdGhlIG9yaWdpbiBpcyByZW1vdmVkIHdoaWxlIHRoZSB0b29sdGlwIGlzIG9wZW5cclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fdHJhY2tlclN0YXJ0KCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gTk9URTogdGhlIGxpc3RlbmVycyBiZWxvdyBoYXZlIGEgJy10cmlnZ2VyQ2xvc2UnIG5hbWVzcGFjZVxyXG5cdFx0XHRcdFx0XHRcdC8vIGJlY2F1c2Ugd2UnbGwgcmVtb3ZlIHRoZW0gd2hlbiB0aGUgdG9vbHRpcCBjbG9zZXMgKHVubGlrZVxyXG5cdFx0XHRcdFx0XHRcdC8vIHRoZSAnLXRyaWdnZXJPcGVuJyBsaXN0ZW5lcnMpLiBTbyBzb21lIG9mIHRoZW0gYXJlIGFjdHVhbGx5XHJcblx0XHRcdFx0XHRcdFx0Ly8gbm90IGFib3V0IGNsb3NlIHRyaWdnZXJzLCByYXRoZXIgYWJvdXQgcG9zaXRpb25pbmcuXHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0JChlbnYud2luZG93KVxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gcmVwb3NpdGlvbiBvbiByZXNpemVcclxuXHRcdFx0XHRcdFx0XHRcdC5vbigncmVzaXplLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyICRhZSA9ICQoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyByZXBvc2l0aW9uIG9ubHkgaWYgdGhlIHJlc2l6ZSBldmVudCB3YXMgbm90IHRyaWdnZXJlZCB1cG9uIHRoZSBvcGVuaW5nXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIG9mIGEgdmlydHVhbCBrZXlib2FyZCBkdWUgdG8gYW4gaW5wdXQgZmllbGQgYmVpbmcgZm9jdXNlZCB3aXRoaW4gdGhlIHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gKG90aGVyd2lzZSB0aGUgcmVwb3NpdGlvbmluZyB3b3VsZCBsb3NlIHRoZSBmb2N1cylcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKFx0KCEkYWUuaXMoJ2lucHV0JykgJiYgISRhZS5pcygndGV4dGFyZWEnKSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR8fFx0ISQuY29udGFpbnMoc2VsZi5fJHRvb2x0aXBbMF0sICRhZVswXSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5yZXBvc2l0aW9uKGUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2FtZSBhcyBiZWxvdyBmb3IgcGFyZW50c1xyXG5cdFx0XHRcdFx0XHRcdFx0Lm9uKCdzY3JvbGwuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX19zY3JvbGxIYW5kbGVyKGUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fXyRvcmlnaW5QYXJlbnRzID0gc2VsZi5fJG9yaWdpbi5wYXJlbnRzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gc2Nyb2xsaW5nIG1heSByZXF1aXJlIHRoZSB0b29sdGlwIHRvIGJlIG1vdmVkIG9yIGV2ZW5cclxuXHRcdFx0XHRcdFx0XHQvLyByZXBvc2l0aW9uZWQgaW4gc29tZSBjYXNlc1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX18kb3JpZ2luUGFyZW50cy5lYWNoKGZ1bmN0aW9uKGksIHBhcmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQkKHBhcmVudCkub24oJ3Njcm9sbC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fX3Njcm9sbEhhbmRsZXIoZSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRpZiAoXHRzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UubW91c2VsZWF2ZVxyXG5cdFx0XHRcdFx0XHRcdFx0fHxcdChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudG91Y2hsZWF2ZSAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KVxyXG5cdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyB3ZSB1c2UgYW4gZXZlbnQgdG8gYWxsb3cgdXNlcnMvcGx1Z2lucyB0byBjb250cm9sIHdoZW4gdGhlIG1vdXNlbGVhdmUvdG91Y2hsZWF2ZVxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gY2xvc2UgdHJpZ2dlcnMgd2lsbCBjb21lIHRvIGFjdGlvbi4gSXQgYWxsb3dzIHRvIGhhdmUgbW9yZSB0cmlnZ2VyaW5nIGVsZW1lbnRzXHJcblx0XHRcdFx0XHRcdFx0XHQvLyB0aGFuIGp1c3QgdGhlIG9yaWdpbiBhbmQgdGhlIHRvb2x0aXAgZm9yIGV4YW1wbGUsIG9yIHRvIGNhbmNlbC9kZWxheSB0aGUgY2xvc2luZyxcclxuXHRcdFx0XHRcdFx0XHRcdC8vIG9yIHRvIG1ha2UgdGhlIHRvb2x0aXAgaW50ZXJhY3RpdmUgZXZlbiBpZiBpdCB3YXNuJ3Qgd2hlbiBpdCB3YXMgb3BlbiwgZXRjLlxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fb24oJ2Rpc21pc3NhYmxlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChldmVudC5kaXNtaXNzYWJsZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChldmVudC5kZWxheSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZXZlbnQuZXZlbnQgbWF5IGJlIHVuZGVmaW5lZFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9jbG9zZShldmVudC5ldmVudCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LCBldmVudC5kZWxheSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX190aW1lb3V0cy5jbG9zZS5wdXNoKHRpbWVvdXQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX2Nsb3NlKGV2ZW50KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gbm93IHNldCB0aGUgbGlzdGVuZXJzIHRoYXQgd2lsbCB0cmlnZ2VyICdkaXNtaXNzYWJsZScgZXZlbnRzXHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgJGVsZW1lbnRzID0gc2VsZi5fJG9yaWdpbixcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnROYW1lc0luID0gJycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50TmFtZXNPdXQgPSAnJyxcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGltZW91dCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGlmIHdlIGhhdmUgdG8gYWxsb3cgaW50ZXJhY3Rpb24sIGJpbmQgb24gdGhlIHRvb2x0aXAgdG9vXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuaW50ZXJhY3RpdmUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0JGVsZW1lbnRzID0gJGVsZW1lbnRzLmFkZChzZWxmLl8kdG9vbHRpcCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UubW91c2VsZWF2ZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRldmVudE5hbWVzSW4gKz0gJ21vdXNlZW50ZXIuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UgJztcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnROYW1lc091dCArPSAnbW91c2VsZWF2ZS4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZSAnO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50b3VjaGxlYXZlICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnROYW1lc0luICs9ICd0b3VjaHN0YXJ0LicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJztcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnROYW1lc091dCArPSAndG91Y2hlbmQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UgdG91Y2hjYW5jZWwuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQkZWxlbWVudHNcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gY2xvc2UgYWZ0ZXIgc29tZSB0aW1lIHNwZW50IG91dHNpZGUgb2YgdGhlIGVsZW1lbnRzXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5vbihldmVudE5hbWVzT3V0LCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGl0J3Mgb2sgaWYgdGhlIHRvdWNoIGdlc3R1cmUgZW5kZWQgdXAgdG8gYmUgYSBzd2lwZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpdCdzIHN0aWxsIGEgXCJ0b3VjaCBsZWF2ZVwiIHNpdHVhdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChcdHNlbGYuX3RvdWNoSXNUb3VjaEV2ZW50KGV2ZW50KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fHxcdCFzZWxmLl90b3VjaElzRW11bGF0ZWRFdmVudChldmVudClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGRlbGF5ID0gKGV2ZW50LnR5cGUgPT0gJ21vdXNlbGVhdmUnKSA/XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX19vcHRpb25zLmRlbGF5IDpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fX29wdGlvbnMuZGVsYXlUb3VjaDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlbGF5OiBkZWxheVsxXSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGlzbWlzc2FibGU6IHRydWUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogJ2Rpc21pc3NhYmxlJ1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBzdXNwZW5kIHRoZSBtb3VzZWxlYXZlIHRpbWVvdXQgd2hlbiB0aGUgcG9pbnRlciBjb21lcyBiYWNrXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIG92ZXIgdGhlIGVsZW1lbnRzXHJcblx0XHRcdFx0XHRcdFx0XHRcdC5vbihldmVudE5hbWVzSW4sIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaXQncyBhbHNvIG9rIGlmIHRoZSB0b3VjaCBldmVudCBpcyBhIHN3aXBlIGdlc3R1cmVcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoXHRzZWxmLl90b3VjaElzVG91Y2hFdmVudChldmVudClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHx8XHQhc2VsZi5fdG91Y2hJc0VtdWxhdGVkRXZlbnQoZXZlbnQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGlzbWlzc2FibGU6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6ICdkaXNtaXNzYWJsZSdcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGNsb3NlIHRoZSB0b29sdGlwIHdoZW4gdGhlIG9yaWdpbiBnZXRzIGEgbW91c2UgY2xpY2sgKGNvbW1vbiBiZWhhdmlvciBvZlxyXG5cdFx0XHRcdFx0XHRcdC8vIG5hdGl2ZSB0b29sdGlwcylcclxuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm9yaWdpbkNsaWNrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuXyRvcmlnaW4ub24oJ2NsaWNrLicrIHNlbGYuX19uYW1lc3BhY2UgKyAnLXRyaWdnZXJDbG9zZScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB3ZSBjb3VsZCBhY3R1YWxseSBsZXQgYSB0YXAgdHJpZ2dlciB0aGlzIGJ1dCB0aGlzIGZlYXR1cmUganVzdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBkb2VzIG5vdCBtYWtlIHNlbnNlIG9uIHRvdWNoIGRldmljZXNcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKFx0IXNlbGYuX3RvdWNoSXNUb3VjaEV2ZW50KGV2ZW50KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCYmXHQhc2VsZi5fdG91Y2hJc0VtdWxhdGVkRXZlbnQoZXZlbnQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX2Nsb3NlKGV2ZW50KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIHNldCB0aGUgc2FtZSBiaW5kaW5ncyBmb3IgY2xpY2sgYW5kIHRvdWNoIG9uIHRoZSBib2R5IHRvIGNsb3NlIHRoZSB0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0aWYgKFx0c2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLmNsaWNrXHJcblx0XHRcdFx0XHRcdFx0XHR8fFx0KHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50YXAgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSlcclxuXHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZG9uJ3Qgc2V0IHJpZ2h0IGF3YXkgc2luY2UgdGhlIGNsaWNrL3RhcCBldmVudCB3aGljaCB0cmlnZ2VyZWQgdGhpcyBtZXRob2RcclxuXHRcdFx0XHRcdFx0XHRcdC8vIChpZiBpdCB3YXMgYSBjbGljay90YXApIGlzIGdvaW5nIHRvIGJ1YmJsZSB1cCB0byB0aGUgYm9keSwgd2UgZG9uJ3Qgd2FudCBpdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gdG8gY2xvc2UgdGhlIHRvb2x0aXAgaW1tZWRpYXRlbHkgYWZ0ZXIgaXQgb3BlbmVkXHJcblx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBldmVudE5hbWVzID0gJycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkYm9keSA9ICQoZW52LndpbmRvdy5kb2N1bWVudC5ib2R5KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLmNsaWNrKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRldmVudE5hbWVzICs9ICdjbGljay4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZSAnO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRhcCAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRldmVudE5hbWVzICs9ICd0b3VjaGVuZC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZSc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCRib2R5Lm9uKGV2ZW50TmFtZXMsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl90b3VjaElzTWVhbmluZ2Z1bEV2ZW50KGV2ZW50KSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fdG91Y2hSZWNvcmRFdmVudChldmVudCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXNlbGYuX19vcHRpb25zLmludGVyYWN0aXZlIHx8ICEkLmNvbnRhaW5zKHNlbGYuXyR0b29sdGlwWzBdLCBldmVudC50YXJnZXQpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fY2xvc2UoZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gbmVlZGVkIHRvIGRldGVjdCBhbmQgaWdub3JlIHN3aXBpbmdcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRhcCAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCRib2R5Lm9uKCd0b3VjaHN0YXJ0LicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fdG91Y2hSZWNvcmRFdmVudChldmVudCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0sIDApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCdyZWFkeScpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGNhbGwgb3VyIGN1c3RvbSBjYWxsYmFja1xyXG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5mdW5jdGlvblJlYWR5KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5mdW5jdGlvblJlYWR5LmNhbGwoc2VsZiwgc2VsZiwge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRvcmlnaW46IHNlbGYuXyRvcmlnaW5bMF0sXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRvb2x0aXA6IHNlbGYuXyR0b29sdGlwWzBdXHJcblx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGlmIHdlIGhhdmUgYSB0aW1lciBzZXQsIGxldCB0aGUgY291bnRkb3duIGJlZ2luXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50aW1lciA+IDApIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl9jbG9zZSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0sIHNlbGYuX19vcHRpb25zLnRpbWVyICsgZXh0cmFUaW1lKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fdGltZW91dHMuY2xvc2UucHVzaCh0aW1lb3V0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFdoZW4gdXNpbmcgdGhlIG1vdXNlZW50ZXIvdG91Y2hzdGFydCBvcGVuIHRyaWdnZXJzLCB0aGlzIGZ1bmN0aW9uIHdpbGxcclxuXHQgKiBzY2hlZHVsZSB0aGUgb3BlbmluZyBvZiB0aGUgdG9vbHRpcCBhZnRlciB0aGUgZGVsYXksIGlmIHRoZXJlIGlzIG9uZVxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGV2ZW50XHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG4gXHQgKi9cclxuXHRfb3BlblNob3J0bHk6IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0b2sgPSB0cnVlO1xyXG5cdFx0XHJcblx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdzdGFibGUnICYmIHNlbGYuX19zdGF0ZSAhPSAnYXBwZWFyaW5nJykge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgYSB0aW1lb3V0IGlzIG5vdCBhbHJlYWR5IHJ1bm5pbmdcclxuXHRcdFx0aWYgKCFzZWxmLl9fdGltZW91dHMub3Blbikge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0dHlwZTogJ3N0YXJ0JyxcclxuXHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdHN0b3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRvayA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChvaykge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHR2YXIgZGVsYXkgPSAoZXZlbnQudHlwZS5pbmRleE9mKCd0b3VjaCcpID09IDApID9cclxuXHRcdFx0XHRcdFx0c2VsZi5fX29wdGlvbnMuZGVsYXlUb3VjaCA6XHJcblx0XHRcdFx0XHRcdHNlbGYuX19vcHRpb25zLmRlbGF5O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoZGVsYXlbMF0pIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuX190aW1lb3V0cy5vcGVuID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fdGltZW91dHMub3BlbiA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gb3BlbiBvbmx5IGlmIHRoZSBwb2ludGVyIChtb3VzZSBvciB0b3VjaCkgaXMgc3RpbGwgb3ZlciB0aGUgb3JpZ2luLlxyXG5cdFx0XHRcdFx0XHRcdC8vIFRoZSBjaGVjayBvbiB0aGUgXCJtZWFuaW5nZnVsIGV2ZW50XCIgY2FuIG9ubHkgYmUgbWFkZSBoZXJlLCBhZnRlciBzb21lXHJcblx0XHRcdFx0XHRcdFx0Ly8gdGltZSBoYXMgcGFzc2VkICh0byBrbm93IGlmIHRoZSB0b3VjaCB3YXMgYSBzd2lwZSBvciBub3QpXHJcblx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19wb2ludGVySXNPdmVyT3JpZ2luICYmIHNlbGYuX3RvdWNoSXNNZWFuaW5nZnVsRXZlbnQoZXZlbnQpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHNpZ25hbCB0aGF0IHdlIGdvIG9uXHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCdzdGFydGVuZCcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl9vcGVuKGV2ZW50KTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBzaWduYWwgdGhhdCB3ZSBjYW5jZWxcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoJ3N0YXJ0Y2FuY2VsJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9LCBkZWxheVswXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0Ly8gc2lnbmFsIHRoYXQgd2UgZ28gb25cclxuXHRcdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcignc3RhcnRlbmQnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuX29wZW4oZXZlbnQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIE1lYW50IGZvciBwbHVnaW5zIHRvIGdldCB0aGVpciBvcHRpb25zXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBsdWdpbk5hbWUgVGhlIG5hbWUgb2YgdGhlIHBsdWdpbiB0aGF0IGFza3MgZm9yIGl0cyBvcHRpb25zXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IGRlZmF1bHRPcHRpb25zIFRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgdGhlIHBsdWdpblxyXG5cdCAqIEByZXR1cm5zIHtvYmplY3R9IFRoZSBvcHRpb25zXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9vcHRpb25zRXh0cmFjdDogZnVuY3Rpb24ocGx1Z2luTmFtZSwgZGVmYXVsdE9wdGlvbnMpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRvcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIGRlZmF1bHRPcHRpb25zKTtcclxuXHRcdFxyXG5cdFx0Ly8gaWYgdGhlIHBsdWdpbiBvcHRpb25zIHdlcmUgaXNvbGF0ZWQgaW4gYSBwcm9wZXJ0eSBuYW1lZCBhZnRlciB0aGVcclxuXHRcdC8vIHBsdWdpbiwgdXNlIHRoZW0gKHByZXZlbnRzIGNvbmZsaWN0cyB3aXRoIG90aGVyIHBsdWdpbnMpXHJcblx0XHR2YXIgcGx1Z2luT3B0aW9ucyA9IHNlbGYuX19vcHRpb25zW3BsdWdpbk5hbWVdO1xyXG5cdFx0XHJcblx0XHQvLyBpZiBub3QsIHRyeSB0byBnZXQgdGhlbSBhcyByZWd1bGFyIG9wdGlvbnNcclxuXHRcdGlmICghcGx1Z2luT3B0aW9ucyl7XHJcblx0XHRcdFxyXG5cdFx0XHRwbHVnaW5PcHRpb25zID0ge307XHJcblx0XHRcdFxyXG5cdFx0XHQkLmVhY2goZGVmYXVsdE9wdGlvbnMsIGZ1bmN0aW9uKG9wdGlvbk5hbWUsIHZhbHVlKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIG8gPSBzZWxmLl9fb3B0aW9uc1tvcHRpb25OYW1lXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAobyAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRwbHVnaW5PcHRpb25zW29wdGlvbk5hbWVdID0gbztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBsZXQncyBtZXJnZSB0aGUgZGVmYXVsdCBvcHRpb25zIGFuZCB0aGUgb25lcyB0aGF0IHdlcmUgcHJvdmlkZWQuIFdlJ2Qgd2FudFxyXG5cdFx0Ly8gdG8gZG8gYSBkZWVwIGNvcHkgYnV0IG5vdCBsZXQgalF1ZXJ5IG1lcmdlIGFycmF5cywgc28gd2UnbGwgZG8gYSBzaGFsbG93XHJcblx0XHQvLyBleHRlbmQgb24gdHdvIGxldmVscywgdGhhdCB3aWxsIGJlIGVub3VnaCBpZiBvcHRpb25zIGFyZSBub3QgbW9yZSB0aGFuIDFcclxuXHRcdC8vIGxldmVsIGRlZXBcclxuXHRcdCQuZWFjaChvcHRpb25zLCBmdW5jdGlvbihvcHRpb25OYW1lLCB2YWx1ZSkge1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHBsdWdpbk9wdGlvbnNbb3B0aW9uTmFtZV0gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICgoXHRcdHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0J1xyXG5cdFx0XHRcdFx0XHQmJlx0ISh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KVxyXG5cdFx0XHRcdFx0XHQmJlx0dmFsdWUgIT0gbnVsbFxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0JiZcclxuXHRcdFx0XHRcdChcdFx0dHlwZW9mIHBsdWdpbk9wdGlvbnNbb3B0aW9uTmFtZV0gPT0gJ29iamVjdCdcclxuXHRcdFx0XHRcdFx0JiZcdCEocGx1Z2luT3B0aW9uc1tvcHRpb25OYW1lXSBpbnN0YW5jZW9mIEFycmF5KVxyXG5cdFx0XHRcdFx0XHQmJlx0cGx1Z2luT3B0aW9uc1tvcHRpb25OYW1lXSAhPSBudWxsXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHQkLmV4dGVuZChvcHRpb25zW29wdGlvbk5hbWVdLCBwbHVnaW5PcHRpb25zW29wdGlvbk5hbWVdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRvcHRpb25zW29wdGlvbk5hbWVdID0gcGx1Z2luT3B0aW9uc1tvcHRpb25OYW1lXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gb3B0aW9ucztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFVzZWQgYXQgaW5zdGFudGlhdGlvbiBvZiB0aGUgcGx1Z2luLCBvciBhZnRlcndhcmRzIGJ5IHBsdWdpbnMgdGhhdCBhY3RpdmF0ZSB0aGVtc2VsdmVzXHJcblx0ICogb24gZXhpc3RpbmcgaW5zdGFuY2VzXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IHBsdWdpbk5hbWVcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3BsdWc6IGZ1bmN0aW9uKHBsdWdpbk5hbWUpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHBsdWdpbiA9ICQudG9vbHRpcHN0ZXIuX3BsdWdpbihwbHVnaW5OYW1lKTtcclxuXHRcdFxyXG5cdFx0aWYgKHBsdWdpbikge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgYSBjb25zdHJ1Y3RvciBmb3IgaW5zdGFuY2VzXHJcblx0XHRcdGlmIChwbHVnaW4uaW5zdGFuY2UpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBwcm94eSBub24tcHJpdmF0ZSBtZXRob2RzIG9uIHRoZSBpbnN0YW5jZSB0byBhbGxvdyBuZXcgaW5zdGFuY2UgbWV0aG9kc1xyXG5cdFx0XHRcdCQudG9vbHRpcHN0ZXIuX19icmlkZ2UocGx1Z2luLmluc3RhbmNlLCB0aGlzLCBwbHVnaW4ubmFtZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcIicrIHBsdWdpbk5hbWUgKydcIiBwbHVnaW4gaXMgbm90IGRlZmluZWQnKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBUaGlzIHdpbGwgcmV0dXJuIHRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbW91c2UgZXZlbnQgd2hpY2ggd2FzXHJcblx0ICogZW11bGF0ZWQgYnkgdGhlIGJyb3dzZXIgYWZ0ZXIgYSB0b3VjaCBldmVudC4gVGhpcyBhbGxvd3MgdXMgdG9cclxuXHQgKiByZWFsbHkgZGlzc29jaWF0ZSBtb3VzZSBhbmQgdG91Y2ggdHJpZ2dlcnMuXHJcblx0ICogXHJcblx0ICogVGhlcmUgaXMgYSBtYXJnaW4gb2YgZXJyb3IgaWYgYSByZWFsIG1vdXNlIGV2ZW50IGlzIGZpcmVkIHJpZ2h0XHJcblx0ICogYWZ0ZXIgKHdpdGhpbiB0aGUgZGVsYXkgc2hvd24gYmVsb3cpIGEgdG91Y2ggZXZlbnQgb24gdGhlIHNhbWVcclxuXHQgKiBlbGVtZW50LCBidXQgaG9wZWZ1bGx5IGl0IHNob3VsZCBub3QgaGFwcGVuIG9mdGVuLlxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfdG91Y2hJc0VtdWxhdGVkRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcclxuXHRcdHZhciBpc0VtdWxhdGVkID0gZmFsc2UsXHJcblx0XHRcdG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0XHJcblx0XHRmb3IgKHZhciBpID0gdGhpcy5fX3RvdWNoRXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZSA9IHRoaXMuX190b3VjaEV2ZW50c1tpXTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGRlbGF5LCBpbiBtaWxsaXNlY29uZHMuIEl0J3Mgc3VwcG9zZWQgdG8gYmUgMzAwbXMgaW5cclxuXHRcdFx0Ly8gbW9zdCBicm93c2VycyAoMzUwbXMgb24gaU9TKSB0byBhbGxvdyBhIGRvdWJsZSB0YXAgYnV0XHJcblx0XHRcdC8vIGNhbiBiZSBsZXNzIChjaGVjayBvdXQgRmFzdENsaWNrIGZvciBtb3JlIGluZm8pXHJcblx0XHRcdGlmIChub3cgLSBlLnRpbWUgPCA1MDApIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZS50YXJnZXQgPT09IGV2ZW50LnRhcmdldCkge1xyXG5cdFx0XHRcdFx0aXNFbXVsYXRlZCA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBpc0VtdWxhdGVkO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyBmYWxzZSBpZiB0aGUgZXZlbnQgd2FzIGFuIGVtdWxhdGVkIG1vdXNlIGV2ZW50IG9yXHJcblx0ICogYSB0b3VjaCBldmVudCBpbnZvbHZlZCBpbiBhIHN3aXBlIGdlc3R1cmUuXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XHJcblx0ICogQHJldHVybnMge2Jvb2xlYW59XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF90b3VjaElzTWVhbmluZ2Z1bEV2ZW50OiBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0cmV0dXJuIChcclxuXHRcdFx0XHQodGhpcy5fdG91Y2hJc1RvdWNoRXZlbnQoZXZlbnQpICYmICF0aGlzLl90b3VjaFN3aXBlZChldmVudC50YXJnZXQpKVxyXG5cdFx0XHR8fFx0KCF0aGlzLl90b3VjaElzVG91Y2hFdmVudChldmVudCkgJiYgIXRoaXMuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGV2ZW50KSlcclxuXHRcdCk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBDaGVja3MgaWYgYW4gZXZlbnQgaXMgYSB0b3VjaCBldmVudFxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxyXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfdG91Y2hJc1RvdWNoRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KXtcclxuXHRcdHJldHVybiBldmVudC50eXBlLmluZGV4T2YoJ3RvdWNoJykgPT0gMDtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFN0b3JlIHRvdWNoIGV2ZW50cyBmb3IgYSB3aGlsZSB0byBkZXRlY3Qgc3dpcGluZyBhbmQgZW11bGF0ZWQgbW91c2UgZXZlbnRzXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF90b3VjaFJlY29yZEV2ZW50OiBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5fdG91Y2hJc1RvdWNoRXZlbnQoZXZlbnQpKSB7XHJcblx0XHRcdGV2ZW50LnRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdFx0dGhpcy5fX3RvdWNoRXZlbnRzLnB1c2goZXZlbnQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdHJ1ZSBpZiBhIHN3aXBlIGhhcHBlbmVkIGFmdGVyIHRoZSBsYXN0IHRvdWNoc3RhcnQgZXZlbnQgZmlyZWQgb25cclxuXHQgKiBldmVudC50YXJnZXQuXHJcblx0ICogXHJcblx0ICogV2UgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGEgc3dpcGUgZnJvbSBhIHRhcCBiZWZvcmUgd2UgbGV0IHRoZSBldmVudCBvcGVuXHJcblx0ICogb3IgY2xvc2UgdGhlIHRvb2x0aXAuIEEgc3dpcGUgaXMgd2hlbiBhIHRvdWNobW92ZSAoc2Nyb2xsKSBldmVudCBoYXBwZW5zXHJcblx0ICogb24gdGhlIGJvZHkgYmV0d2VlbiB0aGUgdG91Y2hzdGFydCBhbmQgdGhlIHRvdWNoZW5kIGV2ZW50cyBvZiBhbiBlbGVtZW50LlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXQgVGhlIEhUTUwgZWxlbWVudCB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZCB0aGUgc3dpcGVcclxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3RvdWNoU3dpcGVkOiBmdW5jdGlvbih0YXJnZXQpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHN3aXBlZCA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHRmb3IgKHZhciBpID0gdGhpcy5fX3RvdWNoRXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgZSA9IHRoaXMuX190b3VjaEV2ZW50c1tpXTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChlLnR5cGUgPT0gJ3RvdWNobW92ZScpIHtcclxuXHRcdFx0XHRzd2lwZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKFxyXG5cdFx0XHRcdGUudHlwZSA9PSAndG91Y2hzdGFydCdcclxuXHRcdFx0XHQmJlx0dGFyZ2V0ID09PSBlLnRhcmdldFxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc3dpcGVkO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogVHJpZ2dlcnMgYW4gZXZlbnQgb24gdGhlIGluc3RhbmNlIGVtaXR0ZXJzXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF90cmlnZ2VyOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtcclxuXHRcdFxyXG5cdFx0aWYgKHR5cGVvZiBhcmdzWzBdID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdGFyZ3NbMF0gPSB7IHR5cGU6IGFyZ3NbMF0gfTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gYWRkIHByb3BlcnRpZXMgdG8gdGhlIGV2ZW50XHJcblx0XHRhcmdzWzBdLmluc3RhbmNlID0gdGhpcztcclxuXHRcdGFyZ3NbMF0ub3JpZ2luID0gdGhpcy5fJG9yaWdpbiA/IHRoaXMuXyRvcmlnaW5bMF0gOiBudWxsO1xyXG5cdFx0YXJnc1swXS50b29sdGlwID0gdGhpcy5fJHRvb2x0aXAgPyB0aGlzLl8kdG9vbHRpcFswXSA6IG51bGw7XHJcblx0XHRcclxuXHRcdC8vIG5vdGU6IHRoZSBvcmRlciBvZiBlbWl0dGVycyBtYXR0ZXJzXHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLnRyaWdnZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgYXJncyk7XHJcblx0XHQkLnRvb2x0aXBzdGVyLl90cmlnZ2VyLmFwcGx5KCQudG9vbHRpcHN0ZXIsIGFyZ3MpO1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLnRyaWdnZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBhcmdzKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBEZWFjdGl2YXRlIGEgcGx1Z2luIG9uIHRoaXMgaW5zdGFuY2VcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3VucGx1ZzogZnVuY3Rpb24ocGx1Z2luTmFtZSkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdC8vIGlmIHRoZSBwbHVnaW4gaGFzIGJlZW4gYWN0aXZhdGVkIG9uIHRoaXMgaW5zdGFuY2VcclxuXHRcdGlmIChzZWxmW3BsdWdpbk5hbWVdKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgcGx1Z2luID0gJC50b29sdGlwc3Rlci5fcGx1Z2luKHBsdWdpbk5hbWUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgYSBjb25zdHJ1Y3RvciBmb3IgaW5zdGFuY2VzXHJcblx0XHRcdGlmIChwbHVnaW4uaW5zdGFuY2UpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyB1bmJyaWRnZVxyXG5cdFx0XHRcdCQuZWFjaChwbHVnaW4uaW5zdGFuY2UsIGZ1bmN0aW9uKG1ldGhvZE5hbWUsIGZuKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGlmIHRoZSBtZXRob2QgZXhpc3RzIChwcml2YXRlcyBtZXRob2RzIGRvIG5vdCkgYW5kIGNvbWVzIGluZGVlZCBmcm9tXHJcblx0XHRcdFx0XHQvLyB0aGlzIHBsdWdpbiAobWF5IGJlIG1pc3Npbmcgb3IgY29tZSBmcm9tIGEgY29uZmxpY3RpbmcgcGx1Z2luKS5cclxuXHRcdFx0XHRcdGlmIChcdHNlbGZbbWV0aG9kTmFtZV1cclxuXHRcdFx0XHRcdFx0JiZcdHNlbGZbbWV0aG9kTmFtZV0uYnJpZGdlZCA9PT0gc2VsZltwbHVnaW5OYW1lXVxyXG5cdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdGRlbGV0ZSBzZWxmW21ldGhvZE5hbWVdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBkZXN0cm95IHRoZSBwbHVnaW5cclxuXHRcdFx0aWYgKHNlbGZbcGx1Z2luTmFtZV0uX19kZXN0cm95KSB7XHJcblx0XHRcdFx0c2VsZltwbHVnaW5OYW1lXS5fX2Rlc3Ryb3koKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gcmVtb3ZlIHRoZSByZWZlcmVuY2UgdG8gdGhlIHBsdWdpbiBpbnN0YW5jZVxyXG5cdFx0XHRkZWxldGUgc2VsZltwbHVnaW5OYW1lXTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBAc2VlIHNlbGY6Ol9jbG9zZVxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRjbG9zZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuXHRcdFxyXG5cdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdHRoaXMuX2Nsb3NlKG51bGwsIGNhbGxiYWNrKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogU2V0cyBvciBnZXRzIHRoZSBjb250ZW50IG9mIHRoZSB0b29sdGlwXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge21peGVkfHNlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGNvbnRlbnQ6IGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHQvLyBnZXR0ZXIgbWV0aG9kXHJcblx0XHRpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiBzZWxmLl9fQ29udGVudDtcclxuXHRcdH1cclxuXHRcdC8vIHNldHRlciBtZXRob2RcclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFzZWxmLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gY2hhbmdlIHRoZSBjb250ZW50XHJcblx0XHRcdFx0c2VsZi5fX2NvbnRlbnRTZXQoY29udGVudCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHNlbGYuX19Db250ZW50ICE9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIHVwZGF0ZSB0aGUgdG9vbHRpcCBpZiBpdCBpcyBvcGVuXHJcblx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9PSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gcmVzZXQgdGhlIGNvbnRlbnQgaW4gdGhlIHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0c2VsZi5fX2NvbnRlbnRJbnNlcnQoKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHJlcG9zaXRpb24gYW5kIHJlc2l6ZSB0aGUgdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRzZWxmLnJlcG9zaXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGlmIHdlIHdhbnQgdG8gcGxheSBhIGxpdHRsZSBhbmltYXRpb24gc2hvd2luZyB0aGUgY29udGVudCBjaGFuZ2VkXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy51cGRhdGVBbmltYXRpb24pIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRpZiAoZW52Lmhhc1RyYW5zaXRpb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGtlZXAgdGhlIHJlZmVyZW5jZSBpbiB0aGUgbG9jYWwgc2NvcGVcclxuXHRcdFx0XHRcdFx0XHRcdHZhciBhbmltYXRpb24gPSBzZWxmLl9fb3B0aW9ucy51cGRhdGVBbmltYXRpb247XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmFkZENsYXNzKCd0b29sdGlwc3Rlci11cGRhdGUtJysgYW5pbWF0aW9uKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gcmVtb3ZlIHRoZSBjbGFzcyBhZnRlciBhIHdoaWxlLiBUaGUgYWN0dWFsIGR1cmF0aW9uIG9mIHRoZVxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gdXBkYXRlIGFuaW1hdGlvbiBtYXkgYmUgc2hvcnRlciwgaXQncyBzZXQgaW4gdGhlIENTUyBydWxlc1xyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItdXBkYXRlLScrIGFuaW1hdGlvbik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmZhZGVUbygyMDAsIDAuNSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5mYWRlVG8oMjAwLCAxKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0c2VsZi5fY2xvc2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0c2VsZi5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gc2VsZjtcclxuXHRcdH1cclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSB0b29sdGlwXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdGlmICghc2VsZi5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHRcclxuXHRcdFx0aWYoc2VsZi5fX3N0YXRlICE9ICdjbG9zZWQnKXtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBubyBjbG9zaW5nIGRlbGF5XHJcblx0XHRcdFx0c2VsZi5vcHRpb24oJ2FuaW1hdGlvbkR1cmF0aW9uJywgMClcclxuXHRcdFx0XHRcdC8vIGZvcmNlIGNsb3NpbmdcclxuXHRcdFx0XHRcdC5fY2xvc2UobnVsbCwgbnVsbCwgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0Ly8gdGhlcmUgbWlnaHQgYmUgYW4gb3BlbiB0aW1lb3V0IHN0aWxsIHJ1bm5pbmdcclxuXHRcdFx0XHRzZWxmLl9fdGltZW91dHNDbGVhcigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBzZW5kIGV2ZW50XHJcblx0XHRcdHNlbGYuX3RyaWdnZXIoJ2Rlc3Ryb3knKTtcclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuX19kZXN0cm95ZWQgPSB0cnVlO1xyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fJG9yaWdpblxyXG5cdFx0XHRcdC5yZW1vdmVEYXRhKHNlbGYuX19uYW1lc3BhY2UpXHJcblx0XHRcdFx0Ly8gcmVtb3ZlIHRoZSBvcGVuIHRyaWdnZXIgbGlzdGVuZXJzXHJcblx0XHRcdFx0Lm9mZignLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4nKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHJlbW92ZSB0aGUgdG91Y2ggbGlzdGVuZXJcclxuXHRcdFx0JChlbnYud2luZG93LmRvY3VtZW50LmJvZHkpLm9mZignLicgKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuJyk7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgbnMgPSBzZWxmLl8kb3JpZ2luLmRhdGEoJ3Rvb2x0aXBzdGVyLW5zJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGUgb3JpZ2luIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBET00sIGl0cyBkYXRhIG1heVxyXG5cdFx0XHQvLyB3ZWxsIGhhdmUgYmVlbiBkZXN0cm95ZWQgaW4gdGhlIHByb2Nlc3MgYW5kIHRoZXJlIHdvdWxkXHJcblx0XHRcdC8vIGJlIG5vdGhpbmcgdG8gY2xlYW4gdXAgb3IgcmVzdG9yZVxyXG5cdFx0XHRpZiAobnMpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBpZiB0aGVyZSBhcmUgbm8gbW9yZSB0b29sdGlwcyBvbiB0aGlzIGVsZW1lbnRcclxuXHRcdFx0XHRpZiAobnMubGVuZ3RoID09PSAxKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIG9wdGlvbmFsIHJlc3RvcmF0aW9uIG9mIGEgdGl0bGUgYXR0cmlidXRlXHJcblx0XHRcdFx0XHR2YXIgdGl0bGUgPSBudWxsO1xyXG5cdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnJlc3RvcmF0aW9uID09ICdwcmV2aW91cycpIHtcclxuXHRcdFx0XHRcdFx0dGl0bGUgPSBzZWxmLl8kb3JpZ2luLmRhdGEoJ3Rvb2x0aXBzdGVyLWluaXRpYWxUaXRsZScpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoc2VsZi5fX29wdGlvbnMucmVzdG9yYXRpb24gPT0gJ2N1cnJlbnQnKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBvbGQgc2Nob29sIHRlY2huaXF1ZSB0byBzdHJpbmdpZnkgd2hlbiBvdXRlckhUTUwgaXMgbm90IHN1cHBvcnRlZFxyXG5cdFx0XHRcdFx0XHR0aXRsZSA9ICh0eXBlb2Ygc2VsZi5fX0NvbnRlbnQgPT0gJ3N0cmluZycpID9cclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fQ29udGVudCA6XHJcblx0XHRcdFx0XHRcdFx0JCgnPGRpdj48L2Rpdj4nKS5hcHBlbmQoc2VsZi5fX0NvbnRlbnQpLmh0bWwoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKHRpdGxlKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuXyRvcmlnaW4uYXR0cigndGl0bGUnLCB0aXRsZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGZpbmFsIGNsZWFuaW5nXHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHNlbGYuXyRvcmlnaW4ucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyZWQnKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0c2VsZi5fJG9yaWdpblxyXG5cdFx0XHRcdFx0XHQucmVtb3ZlRGF0YSgndG9vbHRpcHN0ZXItbnMnKVxyXG5cdFx0XHRcdFx0XHQucmVtb3ZlRGF0YSgndG9vbHRpcHN0ZXItaW5pdGlhbFRpdGxlJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gcmVtb3ZlIHRoZSBpbnN0YW5jZSBuYW1lc3BhY2UgZnJvbSB0aGUgbGlzdCBvZiBuYW1lc3BhY2VzIG9mXHJcblx0XHRcdFx0XHQvLyB0b29sdGlwcyBwcmVzZW50IG9uIHRoZSBlbGVtZW50XHJcblx0XHRcdFx0XHRucyA9ICQuZ3JlcChucywgZnVuY3Rpb24oZWwsIGkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGVsICE9PSBzZWxmLl9fbmFtZXNwYWNlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRzZWxmLl8kb3JpZ2luLmRhdGEoJ3Rvb2x0aXBzdGVyLW5zJywgbnMpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbGFzdCBldmVudFxyXG5cdFx0XHRzZWxmLl90cmlnZ2VyKCdkZXN0cm95ZWQnKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHVuYmluZCBwcml2YXRlIGFuZCBwdWJsaWMgZXZlbnQgbGlzdGVuZXJzXHJcblx0XHRcdHNlbGYuX29mZigpO1xyXG5cdFx0XHRzZWxmLm9mZigpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gcmVtb3ZlIGV4dGVybmFsIHJlZmVyZW5jZXMsIGp1c3QgaW4gY2FzZVxyXG5cdFx0XHRzZWxmLl9fQ29udGVudCA9IG51bGw7XHJcblx0XHRcdHNlbGYuX18kZW1pdHRlclByaXZhdGUgPSBudWxsO1xyXG5cdFx0XHRzZWxmLl9fJGVtaXR0ZXJQdWJsaWMgPSBudWxsO1xyXG5cdFx0XHRzZWxmLl9fb3B0aW9ucy5wYXJlbnQgPSBudWxsO1xyXG5cdFx0XHRzZWxmLl8kb3JpZ2luID0gbnVsbDtcclxuXHRcdFx0c2VsZi5fJHRvb2x0aXAgPSBudWxsO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRoZSBvYmplY3QgaXMgbm8gbG9uZ2VyIHJlZmVyZW5jZWQgaW4gdGhlcmUgdG8gcHJldmVudFxyXG5cdFx0XHQvLyBtZW1vcnkgbGVha3NcclxuXHRcdFx0JC50b29sdGlwc3Rlci5fX2luc3RhbmNlc0xhdGVzdEFyciA9ICQuZ3JlcCgkLnRvb2x0aXBzdGVyLl9faW5zdGFuY2VzTGF0ZXN0QXJyLCBmdW5jdGlvbihlbCwgaSkge1xyXG5cdFx0XHRcdHJldHVybiBzZWxmICE9PSBlbDtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRjbGVhckludGVydmFsKHNlbGYuX19nYXJiYWdlQ29sbGVjdG9yKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRzZWxmLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIHdlIHJldHVybiB0aGUgc2NvcGUgcmF0aGVyIHRoYW4gdHJ1ZSBzbyB0aGF0IHRoZSBjYWxsIHRvXHJcblx0XHQvLyAudG9vbHRpcHN0ZXIoJ2Rlc3Ryb3knKSBhY3R1YWxseSByZXR1cm5zIHRoZSBtYXRjaGVkIGVsZW1lbnRzXHJcblx0XHQvLyBhbmQgYXBwbGllcyB0byBhbGwgb2YgdGhlbVxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBEaXNhYmxlcyB0aGUgdG9vbHRpcFxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBjbG9zZSBmaXJzdCwgaW4gY2FzZSB0aGUgdG9vbHRpcCB3b3VsZCBub3QgZGlzYXBwZWFyIG9uXHJcblx0XHRcdC8vIGl0cyBvd24gKG5vIGNsb3NlIHRyaWdnZXIpXHJcblx0XHRcdHRoaXMuX2Nsb3NlKCk7XHJcblx0XHRcdHRoaXMuX19lbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgSFRNTCBlbGVtZW50IG9mIHRoZSBvcmlnaW5cclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRlbGVtZW50T3JpZ2luOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl8kb3JpZ2luWzBdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIEhUTUwgZWxlbWVudCBvZiB0aGUgdG9vbHRpcFxyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGVsZW1lbnRUb29sdGlwOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl8kdG9vbHRpcCA/IHRoaXMuXyR0b29sdGlwWzBdIDogbnVsbDtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEVuYWJsZXMgdGhlIHRvb2x0aXBcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0ZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX19lbmFibGVkID0gdHJ1ZTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQWxpYXMsIGRlcHJlY2F0ZWQgaW4gNC4wLjBcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRoaWRlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG5cdFx0cmV0dXJuIHRoaXMuY2xvc2UoY2FsbGJhY2spO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgaW5zdGFuY2VcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0aW5zdGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgcHVibGljIHVzZSBvbmx5LCBub3QgdG8gYmUgdXNlZCBieSBwbHVnaW5zICh1c2UgOjpfb2ZmKCkgaW5zdGVhZClcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0b2ZmOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy5vZmYuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIHB1YmxpYyB1c2Ugb25seSwgbm90IHRvIGJlIHVzZWQgYnkgcGx1Z2lucyAodXNlIDo6X29uKCkgaW5zdGVhZClcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub24uYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBwdWJsaWMgdXNlIG9ubHksIG5vdCB0byBiZSB1c2VkIGJ5IHBsdWdpbnNcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRvbmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLm9uZS5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQHNlZSBzZWxmOjpfb3BlblxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRvcGVuOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG5cdFx0XHJcblx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0dGhpcy5fb3BlbihudWxsLCBjYWxsYmFjayk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEdldCBvciBzZXQgb3B0aW9ucy4gRm9yIGludGVybmFsIHVzZSBhbmQgYWR2YW5jZWQgdXNlcnMgb25seS5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbyBPcHRpb24gbmFtZVxyXG5cdCAqIEBwYXJhbSB7bWl4ZWR9IHZhbCBvcHRpb25hbCBBIG5ldyB2YWx1ZSBmb3IgdGhlIG9wdGlvblxyXG5cdCAqIEByZXR1cm4ge21peGVkfHNlbGZ9IElmIHZhbCBpcyBvbWl0dGVkLCB0aGUgdmFsdWUgb2YgdGhlIG9wdGlvblxyXG5cdCAqIGlzIHJldHVybmVkLCBvdGhlcndpc2UgdGhlIGluc3RhbmNlIGl0c2VsZiBpcyByZXR1cm5lZFxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi8gXHJcblx0b3B0aW9uOiBmdW5jdGlvbihvLCB2YWwpIHtcclxuXHRcdFxyXG5cdFx0Ly8gZ2V0dGVyXHJcblx0XHRpZiAodmFsID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX19vcHRpb25zW29dO1xyXG5cdFx0fVxyXG5cdFx0Ly8gc2V0dGVyXHJcblx0XHRlbHNlIHtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGNoYW5nZSB2YWx1ZVxyXG5cdFx0XHRcdHRoaXMuX19vcHRpb25zW29dID0gdmFsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGZvcm1hdFxyXG5cdFx0XHRcdHRoaXMuX19vcHRpb25zRm9ybWF0KCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gcmUtcHJlcGFyZSB0aGUgdHJpZ2dlcnMgaWYgbmVlZGVkXHJcblx0XHRcdFx0aWYgKCQuaW5BcnJheShvLCBbJ3RyaWdnZXInLCAndHJpZ2dlckNsb3NlJywgJ3RyaWdnZXJPcGVuJ10pID49IDApIHtcclxuXHRcdFx0XHRcdHRoaXMuX19wcmVwYXJlT3JpZ2luKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChvID09PSAnc2VsZkRlc3RydWN0aW9uJykge1xyXG5cdFx0XHRcdFx0dGhpcy5fX3ByZXBhcmVHQygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHR0aGlzLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogVGhpcyBtZXRob2QgaXMgaW4gY2hhcmdlIG9mIHNldHRpbmcgdGhlIHBvc2l0aW9uIGFuZCBzaXplIHByb3BlcnRpZXMgb2YgdGhlIHRvb2x0aXAuXHJcblx0ICogQWxsIHRoZSBoYXJkIHdvcmsgaXMgZGVsZWdhdGVkIHRvIHRoZSBkaXNwbGF5IHBsdWdpbi5cclxuXHQgKiBOb3RlOiBUaGUgdG9vbHRpcCBtYXkgYmUgZGV0YWNoZWQgZnJvbSB0aGUgRE9NIGF0IHRoZSBtb21lbnQgdGhlIG1ldGhvZCBpcyBjYWxsZWQgXHJcblx0ICogYnV0IG11c3QgYmUgYXR0YWNoZWQgYnkgdGhlIGVuZCBvZiB0aGUgbWV0aG9kIGNhbGwuXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IEZvciBpbnRlcm5hbCB1c2Ugb25seS4gRGVmaW5lZCBpZiBhbiBldmVudCBzdWNoIGFzXHJcblx0ICogd2luZG93IHJlc2l6aW5nIHRyaWdnZXJlZCB0aGUgcmVwb3NpdGlvbmluZ1xyXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gdG9vbHRpcElzRGV0YWNoZWQgRm9yIGludGVybmFsIHVzZSBvbmx5LiBTZXQgdGhpcyB0byB0cnVlIGlmIHlvdVxyXG5cdCAqIGtub3cgdGhhdCB0aGUgdG9vbHRpcCBub3QgYmVpbmcgaW4gdGhlIERPTSBpcyBub3QgYW4gaXNzdWUgKHR5cGljYWxseSB3aGVuIHRoZVxyXG5cdCAqIHRvb2x0aXAgZWxlbWVudCBoYXMganVzdCBiZWVuIGNyZWF0ZWQgYnV0IGhhcyBub3QgYmVlbiBhZGRlZCB0byB0aGUgRE9NIHlldCkuXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdHJlcG9zaXRpb246IGZ1bmN0aW9uKGV2ZW50LCB0b29sdGlwSXNEZXRhY2hlZCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdGlmICghc2VsZi5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgaXMgc3RpbGwgb3BlbiBhbmQgdGhlIG9yaWdpbiBpcyBzdGlsbCBpbiB0aGUgRE9NXHJcblx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ2Nsb3NlZCcgJiYgYm9keUNvbnRhaW5zKHNlbGYuXyRvcmlnaW4pKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgaGFzIG5vdCBiZWVuIHJlbW92ZWQgZnJvbSBET00gbWFudWFsbHkgKG9yIGlmIGl0XHJcblx0XHRcdFx0Ly8gaGFzIGJlZW4gZGV0YWNoZWQgb24gcHVycG9zZSlcclxuXHRcdFx0XHRpZiAodG9vbHRpcElzRGV0YWNoZWQgfHwgYm9keUNvbnRhaW5zKHNlbGYuXyR0b29sdGlwKSkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAoIXRvb2x0aXBJc0RldGFjaGVkKSB7XHJcblx0XHRcdFx0XHRcdC8vIGRldGFjaCBpbiBjYXNlIHRoZSB0b29sdGlwIG92ZXJmbG93cyB0aGUgd2luZG93IGFuZCBhZGRzXHJcblx0XHRcdFx0XHRcdC8vIHNjcm9sbGJhcnMgdG8gaXQsIHNvIF9fZ2VvbWV0cnkgY2FuIGJlIGFjY3VyYXRlXHJcblx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmRldGFjaCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyByZWZyZXNoIHRoZSBnZW9tZXRyeSBvYmplY3QgYmVmb3JlIHBhc3NpbmcgaXQgYXMgYSBoZWxwZXJcclxuXHRcdFx0XHRcdHNlbGYuX19HZW9tZXRyeSA9IHNlbGYuX19nZW9tZXRyeSgpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBsZXQgYSBwbHVnaW4gZm8gdGhlIHJlc3RcclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0XHR0eXBlOiAncmVwb3NpdGlvbicsXHJcblx0XHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdFx0aGVscGVyOiB7XHJcblx0XHRcdFx0XHRcdFx0Z2VvOiBzZWxmLl9fR2VvbWV0cnlcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0c2VsZi5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2VsZjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEFsaWFzLCBkZXByZWNhdGVkIGluIDQuMC4wXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0c2hvdzogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuXHRcdHJldHVybiB0aGlzLm9wZW4oY2FsbGJhY2spO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyBzb21lIHByb3BlcnRpZXMgYWJvdXQgdGhlIGluc3RhbmNlXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge29iamVjdH1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0c3RhdHVzOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZGVzdHJveWVkOiB0aGlzLl9fZGVzdHJveWVkLFxyXG5cdFx0XHRlbmFibGVkOiB0aGlzLl9fZW5hYmxlZCxcclxuXHRcdFx0b3BlbjogdGhpcy5fX3N0YXRlICE9PSAnY2xvc2VkJyxcclxuXHRcdFx0c3RhdGU6IHRoaXMuX19zdGF0ZVxyXG5cdFx0fTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBwdWJsaWMgdXNlIG9ubHksIG5vdCB0byBiZSB1c2VkIGJ5IHBsdWdpbnNcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHR0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMudHJpZ2dlckhhbmRsZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcbn07XHJcblxyXG4kLmZuLnRvb2x0aXBzdGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcblx0Ly8gZm9yIHVzaW5nIGluIGNsb3N1cmVzXHJcblx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSxcclxuXHRcdC8vIGNvbW1vbiBtaXN0YWtlOiBhbiBIVE1MIGVsZW1lbnQgY2FuJ3QgYmUgaW4gc2V2ZXJhbCB0b29sdGlwcyBhdCB0aGUgc2FtZSB0aW1lXHJcblx0XHRjb250ZW50Q2xvbmluZ1dhcm5pbmcgPSAnWW91IGFyZSB1c2luZyBhIHNpbmdsZSBIVE1MIGVsZW1lbnQgYXMgY29udGVudCBmb3Igc2V2ZXJhbCB0b29sdGlwcy4gWW91IHByb2JhYmx5IHdhbnQgdG8gc2V0IHRoZSBjb250ZW50Q2xvbmluZyBvcHRpb24gdG8gVFJVRS4nO1xyXG5cdFxyXG5cdC8vIHRoaXMgaGFwcGVucyB3aXRoICQoc2VsKS50b29sdGlwc3RlciguLi4pIHdoZW4gJChzZWwpIGRvZXMgbm90IG1hdGNoIGFueXRoaW5nXHJcblx0aWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcclxuXHRcdC8vIHN0aWxsIGNoYWluYWJsZVxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cdC8vIHRoaXMgaGFwcGVucyB3aGVuIGNhbGxpbmcgJChzZWwpLnRvb2x0aXBzdGVyKCdtZXRob2ROYW1lIG9yIG9wdGlvbnMnKVxyXG5cdC8vIHdoZXJlICQoc2VsKSBtYXRjaGVzIG9uZSBvciBtb3JlIGVsZW1lbnRzXHJcblx0ZWxzZSB7XHJcblx0XHRcclxuXHRcdC8vIG1ldGhvZCBjYWxsc1xyXG5cdFx0aWYgKHR5cGVvZiBhcmdzWzBdID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHYgPSAnIyokfiYnO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHJldHJpZXZlIHRoZSBuYW1lcGFjZXMgb2YgdGhlIHRvb2x0aXAocykgdGhhdCBleGlzdCBvbiB0aGF0IGVsZW1lbnQuXHJcblx0XHRcdFx0Ly8gV2Ugd2lsbCBpbnRlcmFjdCB3aXRoIHRoZSBmaXJzdCB0b29sdGlwIG9ubHkuXHJcblx0XHRcdFx0dmFyIG5zID0gJCh0aGlzKS5kYXRhKCd0b29sdGlwc3Rlci1ucycpLFxyXG5cdFx0XHRcdFx0Ly8gc2VsZiByZXByZXNlbnRzIHRoZSBpbnN0YW5jZSBvZiB0aGUgZmlyc3QgdG9vbHRpcHN0ZXIgcGx1Z2luXHJcblx0XHRcdFx0XHQvLyBhc3NvY2lhdGVkIHRvIHRoZSBjdXJyZW50IEhUTUwgb2JqZWN0IG9mIHRoZSBsb29wXHJcblx0XHRcdFx0XHRzZWxmID0gbnMgPyAkKHRoaXMpLmRhdGEobnNbMF0pIDogbnVsbDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBpZiB0aGUgY3VycmVudCBlbGVtZW50IGhvbGRzIGEgdG9vbHRpcHN0ZXIgaW5zdGFuY2VcclxuXHRcdFx0XHRpZiAoc2VsZikge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIHNlbGZbYXJnc1swXV0gPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChcdHRoaXMubGVuZ3RoID4gMVxyXG5cdFx0XHRcdFx0XHRcdCYmXHRhcmdzWzBdID09ICdjb250ZW50J1xyXG5cdFx0XHRcdFx0XHRcdCYmXHQoXHRhcmdzWzFdIGluc3RhbmNlb2YgJFxyXG5cdFx0XHRcdFx0XHRcdFx0fHwgKHR5cGVvZiBhcmdzWzFdID09ICdvYmplY3QnICYmIGFyZ3NbMV0gIT0gbnVsbCAmJiBhcmdzWzFdLnRhZ05hbWUpXHJcblx0XHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHRcdCYmXHQhc2VsZi5fX29wdGlvbnMuY29udGVudENsb25pbmdcclxuXHRcdFx0XHRcdFx0XHQmJlx0c2VsZi5fX29wdGlvbnMuZGVidWdcclxuXHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coY29udGVudENsb25pbmdXYXJuaW5nKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gbm90ZSA6IGFyZ3NbMV0gYW5kIGFyZ3NbMl0gbWF5IG5vdCBiZSBkZWZpbmVkXHJcblx0XHRcdFx0XHRcdHZhciByZXNwID0gc2VsZlthcmdzWzBdXShhcmdzWzFdLCBhcmdzWzJdKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gbWV0aG9kIFwiJysgYXJnc1swXSArJ1wiJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGlmIHRoZSBmdW5jdGlvbiByZXR1cm5lZCBhbnl0aGluZyBvdGhlciB0aGFuIHRoZSBpbnN0YW5jZVxyXG5cdFx0XHRcdFx0Ly8gaXRzZWxmICh3aGljaCBpbXBsaWVzIGNoYWluaW5nLCBleGNlcHQgZm9yIHRoZSBgaW5zdGFuY2VgIG1ldGhvZClcclxuXHRcdFx0XHRcdGlmIChyZXNwICE9PSBzZWxmIHx8IGFyZ3NbMF0gPT09ICdpbnN0YW5jZScpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHYgPSByZXNwO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gcmV0dXJuIGZhbHNlIHRvIHN0b3AgLmVhY2ggaXRlcmF0aW9uIG9uIHRoZSBmaXJzdCBlbGVtZW50XHJcblx0XHRcdFx0XHRcdC8vIG1hdGNoZWQgYnkgdGhlIHNlbGVjdG9yXHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1lvdSBjYWxsZWQgVG9vbHRpcHN0ZXJcXCdzIFwiJysgYXJnc1swXSArJ1wiIG1ldGhvZCBvbiBhbiB1bmluaXRpYWxpemVkIGVsZW1lbnQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuICh2ICE9PSAnIyokfiYnKSA/IHYgOiB0aGlzO1xyXG5cdFx0fVxyXG5cdFx0Ly8gZmlyc3QgYXJndW1lbnQgaXMgdW5kZWZpbmVkIG9yIGFuIG9iamVjdDogdGhlIHRvb2x0aXAgaXMgaW5pdGlhbGl6aW5nXHJcblx0XHRlbHNlIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHJlc2V0IHRoZSBhcnJheSBvZiBsYXN0IGluaXRpYWxpemVkIG9iamVjdHNcclxuXHRcdFx0JC50b29sdGlwc3Rlci5fX2luc3RhbmNlc0xhdGVzdEFyciA9IFtdO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaXMgdGhlcmUgYSBkZWZpbmVkIHZhbHVlIGZvciB0aGUgbXVsdGlwbGUgb3B0aW9uIGluIHRoZSBvcHRpb25zIG9iamVjdCA/XHJcblx0XHRcdHZhclx0bXVsdGlwbGVJc1NldCA9IGFyZ3NbMF0gJiYgYXJnc1swXS5tdWx0aXBsZSAhPT0gdW5kZWZpbmVkLFxyXG5cdFx0XHRcdC8vIGlmIHRoZSBtdWx0aXBsZSBvcHRpb24gaXMgc2V0IHRvIHRydWUsIG9yIGlmIGl0J3Mgbm90IGRlZmluZWQgYnV0XHJcblx0XHRcdFx0Ly8gc2V0IHRvIHRydWUgaW4gdGhlIGRlZmF1bHRzXHJcblx0XHRcdFx0bXVsdGlwbGUgPSAobXVsdGlwbGVJc1NldCAmJiBhcmdzWzBdLm11bHRpcGxlKSB8fCAoIW11bHRpcGxlSXNTZXQgJiYgZGVmYXVsdHMubXVsdGlwbGUpLFxyXG5cdFx0XHRcdC8vIHNhbWUgZm9yIGNvbnRlbnRcclxuXHRcdFx0XHRjb250ZW50SXNTZXQgPSBhcmdzWzBdICYmIGFyZ3NbMF0uY29udGVudCAhPT0gdW5kZWZpbmVkLFxyXG5cdFx0XHRcdGNvbnRlbnQgPSAoY29udGVudElzU2V0ICYmIGFyZ3NbMF0uY29udGVudCkgfHwgKCFjb250ZW50SXNTZXQgJiYgZGVmYXVsdHMuY29udGVudCksXHJcblx0XHRcdFx0Ly8gc2FtZSBmb3IgY29udGVudENsb25pbmdcclxuXHRcdFx0XHRjb250ZW50Q2xvbmluZ0lzU2V0ID0gYXJnc1swXSAmJiBhcmdzWzBdLmNvbnRlbnRDbG9uaW5nICE9PSB1bmRlZmluZWQsXHJcblx0XHRcdFx0Y29udGVudENsb25pbmcgPVxyXG5cdFx0XHRcdFx0XHQoY29udGVudENsb25pbmdJc1NldCAmJiBhcmdzWzBdLmNvbnRlbnRDbG9uaW5nKVxyXG5cdFx0XHRcdFx0fHxcdCghY29udGVudENsb25pbmdJc1NldCAmJiBkZWZhdWx0cy5jb250ZW50Q2xvbmluZyksXHJcblx0XHRcdFx0Ly8gc2FtZSBmb3IgZGVidWdcclxuXHRcdFx0XHRkZWJ1Z0lzU2V0ID0gYXJnc1swXSAmJiBhcmdzWzBdLmRlYnVnICE9PSB1bmRlZmluZWQsXHJcblx0XHRcdFx0ZGVidWcgPSAoZGVidWdJc1NldCAmJiBhcmdzWzBdLmRlYnVnKSB8fCAoIWRlYnVnSXNTZXQgJiYgZGVmYXVsdHMuZGVidWcpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKFx0dGhpcy5sZW5ndGggPiAxXHJcblx0XHRcdFx0JiZcdChcdGNvbnRlbnQgaW5zdGFuY2VvZiAkXHJcblx0XHRcdFx0XHR8fCAodHlwZW9mIGNvbnRlbnQgPT0gJ29iamVjdCcgJiYgY29udGVudCAhPSBudWxsICYmIGNvbnRlbnQudGFnTmFtZSlcclxuXHRcdFx0XHQpXHJcblx0XHRcdFx0JiZcdCFjb250ZW50Q2xvbmluZ1xyXG5cdFx0XHRcdCYmXHRkZWJ1Z1xyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhjb250ZW50Q2xvbmluZ1dhcm5pbmcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBjcmVhdGUgYSB0b29sdGlwc3RlciBpbnN0YW5jZSBmb3IgZWFjaCBlbGVtZW50IGlmIGl0IGRvZXNuJ3RcclxuXHRcdFx0Ly8gYWxyZWFkeSBoYXZlIG9uZSBvciBpZiB0aGUgbXVsdGlwbGUgb3B0aW9uIGlzIHNldCwgYW5kIGF0dGFjaCB0aGVcclxuXHRcdFx0Ly8gb2JqZWN0IHRvIGl0XHJcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgZ28gPSBmYWxzZSxcclxuXHRcdFx0XHRcdCR0aGlzID0gJCh0aGlzKSxcclxuXHRcdFx0XHRcdG5zID0gJHRoaXMuZGF0YSgndG9vbHRpcHN0ZXItbnMnKSxcclxuXHRcdFx0XHRcdG9iaiA9IG51bGw7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCFucykge1xyXG5cdFx0XHRcdFx0Z28gPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmIChtdWx0aXBsZSkge1xyXG5cdFx0XHRcdFx0Z28gPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmIChkZWJ1Zykge1xyXG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ1Rvb2x0aXBzdGVyOiBvbmUgb3IgbW9yZSB0b29sdGlwcyBhcmUgYWxyZWFkeSBhdHRhY2hlZCB0byB0aGUgZWxlbWVudCBiZWxvdy4gSWdub3JpbmcuJyk7XHJcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGdvKSB7XHJcblx0XHRcdFx0XHRvYmogPSBuZXcgJC5Ub29sdGlwc3Rlcih0aGlzLCBhcmdzWzBdKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gc2F2ZSB0aGUgcmVmZXJlbmNlIG9mIHRoZSBuZXcgaW5zdGFuY2VcclxuXHRcdFx0XHRcdGlmICghbnMpIG5zID0gW107XHJcblx0XHRcdFx0XHRucy5wdXNoKG9iai5fX25hbWVzcGFjZSk7XHJcblx0XHRcdFx0XHQkdGhpcy5kYXRhKCd0b29sdGlwc3Rlci1ucycsIG5zKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gc2F2ZSB0aGUgaW5zdGFuY2UgaXRzZWxmXHJcblx0XHRcdFx0XHQkdGhpcy5kYXRhKG9iai5fX25hbWVzcGFjZSwgb2JqKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gY2FsbCBvdXIgY29uc3RydWN0b3IgY3VzdG9tIGZ1bmN0aW9uLlxyXG5cdFx0XHRcdFx0Ly8gd2UgZG8gdGhpcyBoZXJlIGFuZCBub3QgaW4gOjppbml0KCkgYmVjYXVzZSB3ZSB3YW50ZWRcclxuXHRcdFx0XHRcdC8vIHRoZSBvYmplY3QgdG8gYmUgc2F2ZWQgaW4gJHRoaXMuZGF0YSBiZWZvcmUgdHJpZ2dlcmluZ1xyXG5cdFx0XHRcdFx0Ly8gaXRcclxuXHRcdFx0XHRcdGlmIChvYmouX19vcHRpb25zLmZ1bmN0aW9uSW5pdCkge1xyXG5cdFx0XHRcdFx0XHRvYmouX19vcHRpb25zLmZ1bmN0aW9uSW5pdC5jYWxsKG9iaiwgb2JqLCB7XHJcblx0XHRcdFx0XHRcdFx0b3JpZ2luOiB0aGlzXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBhbmQgbm93IHRoZSBldmVudCwgZm9yIHRoZSBwbHVnaW5zIGFuZCBjb3JlIGVtaXR0ZXJcclxuXHRcdFx0XHRcdG9iai5fdHJpZ2dlcignaW5pdCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQkLnRvb2x0aXBzdGVyLl9faW5zdGFuY2VzTGF0ZXN0QXJyLnB1c2gob2JqKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG4vLyBVdGlsaXRpZXNcclxuXHJcbi8qKlxyXG4gKiBBIGNsYXNzIHRvIGNoZWNrIGlmIGEgdG9vbHRpcCBjYW4gZml0IGluIGdpdmVuIGRpbWVuc2lvbnNcclxuICogXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSAkdG9vbHRpcCBUaGUgalF1ZXJ5IHdyYXBwZWQgdG9vbHRpcCBlbGVtZW50LCBvciBhIGNsb25lIG9mIGl0XHJcbiAqL1xyXG5mdW5jdGlvbiBSdWxlcigkdG9vbHRpcCkge1xyXG5cdFxyXG5cdC8vIGxpc3Qgb2YgaW5zdGFuY2UgdmFyaWFibGVzXHJcblx0XHJcblx0dGhpcy4kY29udGFpbmVyO1xyXG5cdHRoaXMuY29uc3RyYWludHMgPSBudWxsO1xyXG5cdHRoaXMuX18kdG9vbHRpcDtcclxuXHRcclxuXHR0aGlzLl9faW5pdCgkdG9vbHRpcCk7XHJcbn1cclxuXHJcblJ1bGVyLnByb3RvdHlwZSA9IHtcclxuXHRcclxuXHQvKipcclxuXHQgKiBNb3ZlIHRoZSB0b29sdGlwIGludG8gYW4gaW52aXNpYmxlIGRpdiB0aGF0IGRvZXMgbm90IGFsbG93IG92ZXJmbG93IHRvIG1ha2VcclxuXHQgKiBzaXplIHRlc3RzLiBOb3RlOiB0aGUgdG9vbHRpcCBtYXkgb3IgbWF5IG5vdCBiZSBhdHRhY2hlZCB0byB0aGUgRE9NIGF0IHRoZVxyXG5cdCAqIG1vbWVudCB0aGlzIG1ldGhvZCBpcyBjYWxsZWQsIGl0IGRvZXMgbm90IG1hdHRlci5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gJHRvb2x0aXAgVGhlIG9iamVjdCB0byB0ZXN0LiBNYXkgYmUganVzdCBhIGNsb25lIG9mIHRoZVxyXG5cdCAqIGFjdHVhbCB0b29sdGlwLlxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19pbml0OiBmdW5jdGlvbigkdG9vbHRpcCkge1xyXG5cdFx0XHJcblx0XHR0aGlzLl9fJHRvb2x0aXAgPSAkdG9vbHRpcDtcclxuXHRcdFxyXG5cdFx0dGhpcy5fXyR0b29sdGlwXHJcblx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdC8vIGZvciBzb21lIHJlYXNvbiB3ZSBoYXZlIHRvIHNwZWNpZnkgdG9wIGFuZCBsZWZ0IDBcclxuXHRcdFx0XHRsZWZ0OiAwLFxyXG5cdFx0XHRcdC8vIGFueSBvdmVyZmxvdyB3aWxsIGJlIGlnbm9yZWQgd2hpbGUgbWVhc3VyaW5nXHJcblx0XHRcdFx0b3ZlcmZsb3c6ICdoaWRkZW4nLFxyXG5cdFx0XHRcdC8vIHBvc2l0aW9ucyBhdCAoMCwwKSB3aXRob3V0IHRoZSBkaXYgdXNpbmcgMTAwJSBvZiB0aGUgYXZhaWxhYmxlIHdpZHRoXHJcblx0XHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXHJcblx0XHRcdFx0dG9wOiAwXHJcblx0XHRcdH0pXHJcblx0XHRcdC8vIG92ZXJmbG93IG11c3QgYmUgYXV0byBkdXJpbmcgdGhlIHRlc3QuIFdlIHJlLXNldCB0aGlzIGluIGNhc2VcclxuXHRcdFx0Ly8gaXQgd2VyZSBtb2RpZmllZCBieSB0aGUgdXNlclxyXG5cdFx0XHQuZmluZCgnLnRvb2x0aXBzdGVyLWNvbnRlbnQnKVxyXG5cdFx0XHRcdC5jc3MoJ292ZXJmbG93JywgJ2F1dG8nKTtcclxuXHRcdFxyXG5cdFx0dGhpcy4kY29udGFpbmVyID0gJCgnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLXJ1bGVyXCI+PC9kaXY+JylcclxuXHRcdFx0LmFwcGVuZCh0aGlzLl9fJHRvb2x0aXApXHJcblx0XHRcdC5hcHBlbmRUbyhlbnYud2luZG93LmRvY3VtZW50LmJvZHkpO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yY2UgdGhlIGJyb3dzZXIgdG8gcmVkcmF3IChyZS1yZW5kZXIpIHRoZSB0b29sdGlwIGltbWVkaWF0ZWx5LiBUaGlzIGlzIHJlcXVpcmVkXHJcblx0ICogd2hlbiB5b3UgY2hhbmdlZCBzb21lIENTUyBwcm9wZXJ0aWVzIGFuZCBuZWVkIHRvIG1ha2Ugc29tZXRoaW5nIHdpdGggaXRcclxuXHQgKiBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgYnJvd3NlciB0byByZWRyYXcgYXQgdGhlIGVuZCBvZiBpbnN0cnVjdGlvbnMuXHJcblx0ICpcclxuXHQgKiBAc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ4NTM2NS9ob3ctY2FuLWktZm9yY2Utd2Via2l0LXRvLXJlZHJhdy1yZXBhaW50LXRvLXByb3BhZ2F0ZS1zdHlsZS1jaGFuZ2VzXHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX2ZvcmNlUmVkcmF3OiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0Ly8gbm90ZTogdGhpcyB3b3VsZCB3b3JrIGJ1dCBmb3IgV2Via2l0IG9ubHlcclxuXHRcdC8vdGhpcy5fXyR0b29sdGlwLmNsb3NlKCk7XHJcblx0XHQvL3RoaXMuX18kdG9vbHRpcFswXS5vZmZzZXRIZWlnaHQ7XHJcblx0XHQvL3RoaXMuX18kdG9vbHRpcC5vcGVuKCk7XHJcblx0XHRcclxuXHRcdC8vIHdvcmtzIGluIEZGIHRvb1xyXG5cdFx0dmFyICRwID0gdGhpcy5fXyR0b29sdGlwLnBhcmVudCgpO1xyXG5cdFx0dGhpcy5fXyR0b29sdGlwLmRldGFjaCgpO1xyXG5cdFx0dGhpcy5fXyR0b29sdGlwLmFwcGVuZFRvKCRwKTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNldCBtYXhpbXVtIGRpbWVuc2lvbnMgZm9yIHRoZSB0b29sdGlwLiBBIGNhbGwgdG8gOjptZWFzdXJlIGFmdGVyd2FyZHNcclxuXHQgKiB3aWxsIHRlbGwgdXMgaWYgdGhlIGNvbnRlbnQgb3ZlcmZsb3dzIG9yIGlmIGl0J3Mgb2tcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7aW50fSB3aWR0aFxyXG5cdCAqIEBwYXJhbSB7aW50fSBoZWlnaHRcclxuXHQgKiBAcmV0dXJuIHtSdWxlcn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0Y29uc3RyYWluOiBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KSB7XHJcblx0XHRcclxuXHRcdHRoaXMuY29uc3RyYWludHMgPSB7XHJcblx0XHRcdHdpZHRoOiB3aWR0aCxcclxuXHRcdFx0aGVpZ2h0OiBoZWlnaHRcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdHRoaXMuX18kdG9vbHRpcC5jc3Moe1xyXG5cdFx0XHQvLyB3ZSBkaXNhYmxlIGRpc3BsYXk6ZmxleCwgb3RoZXJ3aXNlIHRoZSBjb250ZW50IHdvdWxkIG92ZXJmbG93IHdpdGhvdXRcclxuXHRcdFx0Ly8gY3JlYXRpbmcgaG9yaXpvbnRhbCBzY3JvbGxpbmcgKHdoaWNoIHdlIG5lZWQgdG8gZGV0ZWN0KS5cclxuXHRcdFx0ZGlzcGxheTogJ2Jsb2NrJyxcclxuXHRcdFx0Ly8gcmVzZXQgYW55IHByZXZpb3VzIGhlaWdodFxyXG5cdFx0XHRoZWlnaHQ6ICcnLFxyXG5cdFx0XHQvLyB3ZSdsbCBjaGVjayBpZiBob3Jpem9udGFsIHNjcm9sbGluZyBvY2N1cnNcclxuXHRcdFx0b3ZlcmZsb3c6ICdhdXRvJyxcclxuXHRcdFx0Ly8gd2UnbGwgc2V0IHRoZSB3aWR0aCBhbmQgc2VlIHdoYXQgaGVpZ2h0IGlzIGdlbmVyYXRlZCBhbmQgaWYgdGhlcmVcclxuXHRcdFx0Ly8gaXMgaG9yaXpvbnRhbCBvdmVyZmxvd1xyXG5cdFx0XHR3aWR0aDogd2lkdGhcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJlc2V0IHRoZSB0b29sdGlwIGNvbnRlbnQgb3ZlcmZsb3cgYW5kIHJlbW92ZSB0aGUgdGVzdCBjb250YWluZXJcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7UnVsZXJ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHQvLyBpbiBjYXNlIHRoZSBlbGVtZW50IHdhcyBub3QgYSBjbG9uZVxyXG5cdFx0dGhpcy5fXyR0b29sdGlwXHJcblx0XHRcdC5kZXRhY2goKVxyXG5cdFx0XHQuZmluZCgnLnRvb2x0aXBzdGVyLWNvbnRlbnQnKVxyXG5cdFx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdFx0Ly8gcmVzZXQgdG8gQ1NTIHZhbHVlXHJcblx0XHRcdFx0XHRkaXNwbGF5OiAnJyxcclxuXHRcdFx0XHRcdG92ZXJmbG93OiAnJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHJcblx0XHR0aGlzLiRjb250YWluZXIucmVtb3ZlKCk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZW1vdmVzIGFueSBjb25zdHJhaW50c1xyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtSdWxlcn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0ZnJlZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHRoaXMuY29uc3RyYWludHMgPSBudWxsO1xyXG5cdFx0XHJcblx0XHQvLyByZXNldCB0byBuYXR1cmFsIHNpemVcclxuXHRcdHRoaXMuX18kdG9vbHRpcC5jc3Moe1xyXG5cdFx0XHRkaXNwbGF5OiAnJyxcclxuXHRcdFx0aGVpZ2h0OiAnJyxcclxuXHRcdFx0b3ZlcmZsb3c6ICd2aXNpYmxlJyxcclxuXHRcdFx0d2lkdGg6ICcnXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRoZSBzaXplIG9mIHRoZSB0b29sdGlwLiBXaGVuIGNvbnN0cmFpbnRzIGFyZSBhcHBsaWVkLCBhbHNvIHJldHVybnNcclxuXHQgKiB3aGV0aGVyIHRoZSB0b29sdGlwIGZpdHMgaW4gdGhlIHByb3ZpZGVkIGRpbWVuc2lvbnMuXHJcblx0ICogVGhlIGlkZWEgaXMgdG8gc2VlIGlmIHRoZSBuZXcgaGVpZ2h0IGlzIHNtYWxsIGVub3VnaCBhbmQgaWYgdGhlIGNvbnRlbnQgZG9lc1xyXG5cdCAqIG5vdCBvdmVyZmxvdyBob3Jpem9udGFsbHkuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge2ludH0gd2lkdGhcclxuXHQgKiBAcGFyYW0ge2ludH0gaGVpZ2h0XHJcblx0ICogQHJldHVybnMge29iamVjdH0gQW4gb2JqZWN0IHdpdGggYSBib29sIGBmaXRzYCBwcm9wZXJ0eSBhbmQgYSBgc2l6ZWAgcHJvcGVydHlcclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0bWVhc3VyZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHRoaXMuX19mb3JjZVJlZHJhdygpO1xyXG5cdFx0XHJcblx0XHR2YXIgdG9vbHRpcEJjciA9IHRoaXMuX18kdG9vbHRpcFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuXHRcdFx0cmVzdWx0ID0geyBzaXplOiB7XHJcblx0XHRcdFx0Ly8gYmNyLndpZHRoL2hlaWdodCBhcmUgbm90IGRlZmluZWQgaW4gSUU4LSBidXQgaW4gdGhpc1xyXG5cdFx0XHRcdC8vIGNhc2UsIGJjci5yaWdodC9ib3R0b20gd2lsbCBoYXZlIHRoZSBzYW1lIHZhbHVlXHJcblx0XHRcdFx0Ly8gZXhjZXB0IGluIGlPUyA4KyB3aGVyZSB0b29sdGlwQmNyLmJvdHRvbS9yaWdodCBhcmUgd3JvbmdcclxuXHRcdFx0XHQvLyBhZnRlciBzY3JvbGxpbmcgZm9yIHJlYXNvbnMgeWV0IHRvIGJlIGRldGVybWluZWQuXHJcblx0XHRcdFx0Ly8gdG9vbHRpcEJjci50b3AvbGVmdCBtaWdodCBub3QgYmUgMCwgc2VlIGlzc3VlICM1MTRcclxuXHRcdFx0XHRoZWlnaHQ6IHRvb2x0aXBCY3IuaGVpZ2h0IHx8ICh0b29sdGlwQmNyLmJvdHRvbSAtIHRvb2x0aXBCY3IudG9wKSxcclxuXHRcdFx0XHR3aWR0aDogdG9vbHRpcEJjci53aWR0aCB8fCAodG9vbHRpcEJjci5yaWdodCAtIHRvb2x0aXBCY3IubGVmdClcclxuXHRcdFx0fX07XHJcblx0XHRcclxuXHRcdGlmICh0aGlzLmNvbnN0cmFpbnRzKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBub3RlOiB3ZSB1c2VkIHRvIHVzZSBvZmZzZXRXaWR0aCBpbnN0ZWFkIG9mIGJvdW5kaW5nUmVjdENsaWVudCBidXRcclxuXHRcdFx0Ly8gaXQgcmV0dXJuZWQgcm91bmRlZCB2YWx1ZXMsIGNhdXNpbmcgaXNzdWVzIHdpdGggc3ViLXBpeGVsIGxheW91dHMuXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBub3RlMjogbm90aWNlZCB0aGF0IHRoZSBiY3JXaWR0aCBvZiB0ZXh0IGNvbnRlbnQgb2YgYSBkaXYgd2FzIG9uY2VcclxuXHRcdFx0Ly8gZ3JlYXRlciB0aGFuIHRoZSBiY3JXaWR0aCBvZiBpdHMgY29udGFpbmVyIGJ5IDFweCwgY2F1c2luZyB0aGUgZmluYWxcclxuXHRcdFx0Ly8gdG9vbHRpcCBib3ggdG8gYmUgdG9vIHNtYWxsIGZvciBpdHMgY29udGVudC4gSG93ZXZlciwgZXZhbHVhdGluZ1xyXG5cdFx0XHQvLyB0aGVpciB3aWR0aHMgb25lIGFnYWluc3QgdGhlIG90aGVyIChiZWxvdykgc3VycHJpc2luZ2x5IHJldHVybmVkXHJcblx0XHRcdC8vIGVxdWFsaXR5LiBIYXBwZW5lZCBvbmx5IG9uY2UgaW4gQ2hyb21lIDQ4LCB3YXMgbm90IGFibGUgdG8gcmVwcm9kdWNlXHJcblx0XHRcdC8vID0+IGp1c3QgaGF2aW5nIGZ1biB3aXRoIGZsb2F0IHBvc2l0aW9uIHZhbHVlcy4uLlxyXG5cdFx0XHRcclxuXHRcdFx0dmFyICRjb250ZW50ID0gdGhpcy5fXyR0b29sdGlwLmZpbmQoJy50b29sdGlwc3Rlci1jb250ZW50JyksXHJcblx0XHRcdFx0aGVpZ2h0ID0gdGhpcy5fXyR0b29sdGlwLm91dGVySGVpZ2h0KCksXHJcblx0XHRcdFx0Y29udGVudEJjciA9ICRjb250ZW50WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG5cdFx0XHRcdGZpdHMgPSB7XHJcblx0XHRcdFx0XHRoZWlnaHQ6IGhlaWdodCA8PSB0aGlzLmNvbnN0cmFpbnRzLmhlaWdodCxcclxuXHRcdFx0XHRcdHdpZHRoOiAoXHJcblx0XHRcdFx0XHRcdC8vIHRoaXMgY29uZGl0aW9uIGFjY291bnRzIGZvciBtaW4td2lkdGggcHJvcGVydHkgdGhhdFxyXG5cdFx0XHRcdFx0XHQvLyBtYXkgYXBwbHlcclxuXHRcdFx0XHRcdFx0dG9vbHRpcEJjci53aWR0aCA8PSB0aGlzLmNvbnN0cmFpbnRzLndpZHRoXHJcblx0XHRcdFx0XHRcdFx0Ly8gdGhlIC0xIGlzIGhlcmUgYmVjYXVzZSBzY3JvbGxXaWR0aCBhY3R1YWxseSByZXR1cm5zXHJcblx0XHRcdFx0XHRcdFx0Ly8gYSByb3VuZGVkIHZhbHVlLCBhbmQgbWF5IGJlIGdyZWF0ZXIgdGhhbiBiY3Iud2lkdGggaWZcclxuXHRcdFx0XHRcdFx0XHQvLyBpdCB3YXMgcm91bmRlZCB1cC4gVGhpcyBtYXkgY2F1c2UgYW4gaXNzdWUgZm9yIGNvbnRlbnRzXHJcblx0XHRcdFx0XHRcdFx0Ly8gd2hpY2ggYWN0dWFsbHkgcmVhbGx5IG92ZXJmbG93ICBieSAxcHggb3Igc28sIGJ1dCB0aGF0XHJcblx0XHRcdFx0XHRcdFx0Ly8gc2hvdWxkIGJlIHJhcmUuIE5vdCBzdXJlIGhvdyB0byBzb2x2ZSB0aGlzIGVmZmljaWVudGx5LlxyXG5cdFx0XHRcdFx0XHRcdC8vIFNlZSBodHRwOi8vYmxvZ3MubXNkbi5jb20vYi9pZS9hcmNoaXZlLzIwMTIvMDIvMTcvc3ViLXBpeGVsLXJlbmRlcmluZy1hbmQtdGhlLWNzcy1vYmplY3QtbW9kZWwuYXNweFxyXG5cdFx0XHRcdFx0XHQmJlx0Y29udGVudEJjci53aWR0aCA+PSAkY29udGVudFswXS5zY3JvbGxXaWR0aCAtIDFcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0cmVzdWx0LmZpdHMgPSBmaXRzLmhlaWdodCAmJiBmaXRzLndpZHRoO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBvbGQgdmVyc2lvbnMgb2YgSUUgZ2V0IHRoZSB3aWR0aCB3cm9uZyBmb3Igc29tZSByZWFzb24gYW5kIGl0IGNhdXNlc1xyXG5cdFx0Ly8gdGhlIHRleHQgdG8gYmUgYnJva2VuIHRvIGEgbmV3IGxpbmUsIHNvIHdlIHJvdW5kIGl0IHVwLiBJZiB0aGUgd2lkdGhcclxuXHRcdC8vIGlzIHRoZSB3aWR0aCBvZiB0aGUgc2NyZWVuIHRob3VnaCwgd2UgY2FuIGFzc3VtZSBpdCBpcyBhY2N1cmF0ZS5cclxuXHRcdGlmIChcdGVudi5JRVxyXG5cdFx0XHQmJlx0ZW52LklFIDw9IDExXHJcblx0XHRcdCYmXHRyZXN1bHQuc2l6ZS53aWR0aCAhPT0gZW52LndpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGhcclxuXHRcdCkge1xyXG5cdFx0XHRyZXN1bHQuc2l6ZS53aWR0aCA9IE1hdGguY2VpbChyZXN1bHQuc2l6ZS53aWR0aCkgKyAxO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxufTtcclxuXHJcbi8vIHF1aWNrICYgZGlydHkgY29tcGFyZSBmdW5jdGlvbiwgbm90IGJpamVjdGl2ZSBub3IgbXVsdGlkaW1lbnNpb25hbFxyXG5mdW5jdGlvbiBhcmVFcXVhbChhLGIpIHtcclxuXHR2YXIgc2FtZSA9IHRydWU7XHJcblx0JC5lYWNoKGEsIGZ1bmN0aW9uKGksIF8pIHtcclxuXHRcdGlmIChiW2ldID09PSB1bmRlZmluZWQgfHwgYVtpXSAhPT0gYltpXSkge1xyXG5cdFx0XHRzYW1lID0gZmFsc2U7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRyZXR1cm4gc2FtZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgZmFzdCBmdW5jdGlvbiB0byBjaGVjayBpZiBhbiBlbGVtZW50IGlzIHN0aWxsIGluIHRoZSBET00uIEl0XHJcbiAqIHRyaWVzIHRvIHVzZSBhbiBpZCBhcyBpZHMgYXJlIGluZGV4ZWQgYnkgdGhlIGJyb3dzZXIsIG9yIGZhbGxzXHJcbiAqIGJhY2sgdG8galF1ZXJ5J3MgYGNvbnRhaW5zYCBtZXRob2QuIE1heSBmYWlsIGlmIHR3byBlbGVtZW50c1xyXG4gKiBoYXZlIHRoZSBzYW1lIGlkLCBidXQgc28gYmUgaXRcclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9ICRvYmogQSBqUXVlcnktd3JhcHBlZCBIVE1MIGVsZW1lbnRcclxuICogQHJldHVybiB7Ym9vbGVhbn1cclxuICovXHJcbmZ1bmN0aW9uIGJvZHlDb250YWlucygkb2JqKSB7XHJcblx0dmFyIGlkID0gJG9iai5hdHRyKCdpZCcpLFxyXG5cdFx0ZWwgPSBpZCA/IGVudi53aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpIDogbnVsbDtcclxuXHQvLyBtdXN0IGFsc28gY2hlY2sgdGhhdCB0aGUgZWxlbWVudCB3aXRoIHRoZSBpZCBpcyB0aGUgb25lIHdlIHdhbnRcclxuXHRyZXR1cm4gZWwgPyBlbCA9PT0gJG9ialswXSA6ICQuY29udGFpbnMoZW52LndpbmRvdy5kb2N1bWVudC5ib2R5LCAkb2JqWzBdKTtcclxufVxyXG5cclxuLy8gZGV0ZWN0IElFIHZlcnNpb25zIGZvciBkaXJ0eSBmaXhlc1xyXG52YXIgdUEgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbmlmICh1QS5pbmRleE9mKCdtc2llJykgIT0gLTEpIGVudi5JRSA9IHBhcnNlSW50KHVBLnNwbGl0KCdtc2llJylbMV0pO1xyXG5lbHNlIGlmICh1QS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ3RyaWRlbnQnKSAhPT0gLTEgJiYgdUEuaW5kZXhPZignIHJ2OjExJykgIT09IC0xKSBlbnYuSUUgPSAxMTtcclxuZWxzZSBpZiAodUEudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdlZGdlLycpICE9IC0xKSBlbnYuSUUgPSBwYXJzZUludCh1QS50b0xvd2VyQ2FzZSgpLnNwbGl0KCdlZGdlLycpWzFdKTtcclxuXHJcbi8vIGRldGVjdGluZyBzdXBwb3J0IGZvciBDU1MgdHJhbnNpdGlvbnNcclxuZnVuY3Rpb24gdHJhbnNpdGlvblN1cHBvcnQoKSB7XHJcblx0XHJcblx0Ly8gZW52LndpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXQgd2hlbiB0aGlzIGlzIGNhbGxlZFxyXG5cdGlmICghd2luKSByZXR1cm4gZmFsc2U7XHJcblx0XHJcblx0dmFyIGIgPSB3aW4uZG9jdW1lbnQuYm9keSB8fCB3aW4uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxyXG5cdFx0cyA9IGIuc3R5bGUsXHJcblx0XHRwID0gJ3RyYW5zaXRpb24nLFxyXG5cdFx0diA9IFsnTW96JywgJ1dlYmtpdCcsICdLaHRtbCcsICdPJywgJ21zJ107XHJcblx0XHJcblx0aWYgKHR5cGVvZiBzW3BdID09ICdzdHJpbmcnKSB7IHJldHVybiB0cnVlOyB9XHJcblx0XHJcblx0cCA9IHAuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwLnN1YnN0cigxKTtcclxuXHRmb3IgKHZhciBpPTA7IGk8di5sZW5ndGg7IGkrKykge1xyXG5cdFx0aWYgKHR5cGVvZiBzW3ZbaV0gKyBwXSA9PSAnc3RyaW5nJykgeyByZXR1cm4gdHJ1ZTsgfVxyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8vIHdlJ2xsIHJldHVybiBqUXVlcnkgZm9yIHBsdWdpbnMgbm90IHRvIGhhdmUgdG8gZGVjbGFyZSBpdCBhcyBhIGRlcGVuZGVuY3ksXHJcbi8vIGJ1dCBpdCdzIGRvbmUgYnkgYSBidWlsZCB0YXNrIHNpbmNlIGl0IHNob3VsZCBiZSBpbmNsdWRlZCBvbmx5IG9uY2UgYXQgdGhlXHJcbi8vIGVuZCB3aGVuIHdlIGNvbmNhdGVuYXRlIHRoZSBtYWluIGZpbGUgd2l0aCBhIHBsdWdpblxyXG4vLyBzaWRlVGlwIGlzIFRvb2x0aXBzdGVyJ3MgZGVmYXVsdCBwbHVnaW4uXHJcbi8vIFRoaXMgZmlsZSB3aWxsIGJlIFVNRGlmaWVkIGJ5IGEgYnVpbGQgdGFzay5cclxuXHJcbnZhciBwbHVnaW5OYW1lID0gJ3Rvb2x0aXBzdGVyLnNpZGVUaXAnO1xyXG5cclxuJC50b29sdGlwc3Rlci5fcGx1Z2luKHtcclxuXHRuYW1lOiBwbHVnaW5OYW1lLFxyXG5cdGluc3RhbmNlOiB7XHJcblx0XHQvKipcclxuXHRcdCAqIERlZmF1bHRzIGFyZSBwcm92aWRlZCBhcyBhIGZ1bmN0aW9uIGZvciBhbiBlYXN5IG92ZXJyaWRlIGJ5IGluaGVyaXRhbmNlXHJcblx0XHQgKlxyXG5cdFx0ICogQHJldHVybiB7b2JqZWN0fSBBbiBvYmplY3Qgd2l0aCB0aGUgZGVmYXVsdHMgb3B0aW9uc1xyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X19kZWZhdWx0czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIHNob3VsZCBkaXNwbGF5IGFuIGFycm93IHRoYXQgcG9pbnRzIHRvIHRoZSBvcmlnaW5cclxuXHRcdFx0XHRhcnJvdzogdHJ1ZSxcclxuXHRcdFx0XHQvLyB0aGUgZGlzdGFuY2UgaW4gcGl4ZWxzIGJldHdlZW4gdGhlIHRvb2x0aXAgYW5kIHRoZSBvcmlnaW5cclxuXHRcdFx0XHRkaXN0YW5jZTogNixcclxuXHRcdFx0XHQvLyBhbGxvd3MgdG8gZWFzaWx5IGNoYW5nZSB0aGUgcG9zaXRpb24gb2YgdGhlIHRvb2x0aXBcclxuXHRcdFx0XHRmdW5jdGlvblBvc2l0aW9uOiBudWxsLFxyXG5cdFx0XHRcdG1heFdpZHRoOiBudWxsLFxyXG5cdFx0XHRcdC8vIHVzZWQgdG8gYWNjb21vZGF0ZSB0aGUgYXJyb3cgb2YgdG9vbHRpcCBpZiB0aGVyZSBpcyBvbmUuXHJcblx0XHRcdFx0Ly8gRmlyc3QgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGFycm93IHRhcmdldCBpcyBub3QgdG9vIGNsb3NlXHJcblx0XHRcdFx0Ly8gdG8gdGhlIGVkZ2Ugb2YgdGhlIHRvb2x0aXAsIHNvIHRoZSBhcnJvdyBkb2VzIG5vdCBvdmVyZmxvd1xyXG5cdFx0XHRcdC8vIHRoZSB0b29sdGlwLiBTZWNvbmRseSB3aGVuIHdlIHJlcG9zaXRpb24gdGhlIHRvb2x0aXAgdG9cclxuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCBpdCdzIHBvc2l0aW9uZWQgaW4gc3VjaCBhIHdheSB0aGF0IHRoZSBhcnJvdyBpc1xyXG5cdFx0XHRcdC8vIHN0aWxsIHBvaW50aW5nIGF0IHRoZSB0YXJnZXQgKGFuZCBub3QgYSBmZXcgcGl4ZWxzIGJleW9uZCBpdCkuXHJcblx0XHRcdFx0Ly8gSXQgc2hvdWxkIGJlIGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbiBoYWxmIHRoZSB3aWR0aCBvZlxyXG5cdFx0XHRcdC8vIHRoZSBhcnJvdyAoYnkgd2lkdGggd2UgbWVhbiB0aGUgc2l6ZSBvZiB0aGUgc2lkZSB3aGljaCB0b3VjaGVzXHJcblx0XHRcdFx0Ly8gdGhlIHNpZGUgb2YgdGhlIHRvb2x0aXApLlxyXG5cdFx0XHRcdG1pbkludGVyc2VjdGlvbjogMTYsXHJcblx0XHRcdFx0bWluV2lkdGg6IDAsXHJcblx0XHRcdFx0Ly8gZGVwcmVjYXRlZCBpbiA0LjAuMC4gTGlzdGVkIGZvciBfb3B0aW9uc0V4dHJhY3QgdG8gcGljayBpdCB1cFxyXG5cdFx0XHRcdHBvc2l0aW9uOiBudWxsLFxyXG5cdFx0XHRcdHNpZGU6ICd0b3AnLFxyXG5cdFx0XHRcdC8vIHNldCB0byBmYWxzZSB0byBwb3NpdGlvbiB0aGUgdG9vbHRpcCByZWxhdGl2ZWx5IHRvIHRoZSBkb2N1bWVudCByYXRoZXJcclxuXHRcdFx0XHQvLyB0aGFuIHRoZSB3aW5kb3cgd2hlbiB3ZSBvcGVuIGl0XHJcblx0XHRcdFx0dmlld3BvcnRBd2FyZTogdHJ1ZVxyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBSdW4gb25jZTogYXQgaW5zdGFudGlhdGlvbiBvZiB0aGUgcGx1Z2luXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IGluc3RhbmNlIFRoZSB0b29sdGlwc3RlciBvYmplY3QgdGhhdCBpbnN0YW50aWF0ZWQgdGhpcyBwbHVnaW5cclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9faW5pdDogZnVuY3Rpb24oaW5zdGFuY2UpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0XHJcblx0XHRcdC8vIGxpc3Qgb2YgaW5zdGFuY2UgdmFyaWFibGVzXHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuXHRcdFx0c2VsZi5fX25hbWVzcGFjZSA9ICd0b29sdGlwc3Rlci1zaWRlVGlwLScrIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSoxMDAwMDAwKTtcclxuXHRcdFx0c2VsZi5fX3ByZXZpb3VzU3RhdGUgPSAnY2xvc2VkJztcclxuXHRcdFx0c2VsZi5fX29wdGlvbnM7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpbml0aWFsIGZvcm1hdHRpbmdcclxuXHRcdFx0c2VsZi5fX29wdGlvbnNGb3JtYXQoKTtcclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fb24oJ3N0YXRlLicrIHNlbGYuX19uYW1lc3BhY2UsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGV2ZW50LnN0YXRlID09ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fY2xvc2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoZXZlbnQuc3RhdGUgPT0gJ2FwcGVhcmluZycgJiYgc2VsZi5fX3ByZXZpb3VzU3RhdGUgPT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdHNlbGYuX19jcmVhdGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2VsZi5fX3ByZXZpb3VzU3RhdGUgPSBldmVudC5zdGF0ZTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyByZWZvcm1hdCBldmVyeSB0aW1lIHRoZSBvcHRpb25zIGFyZSBjaGFuZ2VkXHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fb24oJ29wdGlvbnMuJysgc2VsZi5fX25hbWVzcGFjZSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5fX29wdGlvbnNGb3JtYXQoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuX29uKCdyZXBvc2l0aW9uLicrIHNlbGYuX19uYW1lc3BhY2UsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRzZWxmLl9fcmVwb3NpdGlvbihlLmV2ZW50LCBlLmhlbHBlcik7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBDYWxsZWQgd2hlbiB0aGUgdG9vbHRpcCBoYXMgY2xvc2VkXHJcblx0XHQgKiBcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9fY2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZGV0YWNoIG91ciBjb250ZW50IG9iamVjdCBmaXJzdCwgc28gdGhlIG5leHQgalF1ZXJ5J3MgcmVtb3ZlKClcclxuXHRcdFx0Ly8gY2FsbCBkb2VzIG5vdCB1bmJpbmQgaXRzIGV2ZW50IGhhbmRsZXJzXHJcblx0XHRcdGlmICh0aGlzLl9faW5zdGFuY2UuY29udGVudCgpIGluc3RhbmNlb2YgJCkge1xyXG5cdFx0XHRcdHRoaXMuX19pbnN0YW5jZS5jb250ZW50KCkuZGV0YWNoKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIHJlbW92ZSB0aGUgdG9vbHRpcCBmcm9tIHRoZSBET01cclxuXHRcdFx0dGhpcy5fX2luc3RhbmNlLl8kdG9vbHRpcC5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy5fX2luc3RhbmNlLl8kdG9vbHRpcCA9IG51bGw7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIENyZWF0ZXMgdGhlIEhUTUwgZWxlbWVudCBvZiB0aGUgdG9vbHRpcC5cclxuXHRcdCAqIFxyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X19jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbm90ZTogd2Ugd3JhcCB3aXRoIGEgLnRvb2x0aXBzdGVyLWJveCBkaXYgdG8gYmUgYWJsZSB0byBzZXQgYSBtYXJnaW4gb24gaXRcclxuXHRcdFx0Ly8gKC50b29sdGlwc3Rlci1iYXNlIG11c3Qgbm90IGhhdmUgb25lKVxyXG5cdFx0XHR2YXIgJGh0bWwgPSAkKFxyXG5cdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYmFzZSB0b29sdGlwc3Rlci1zaWRldGlwXCI+JyArXHJcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWJveFwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWNvbnRlbnRcIj48L2Rpdj4nICtcclxuXHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYXJyb3dcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1hcnJvdy11bmNyb3BwZWRcIj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWFycm93LWJvcmRlclwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYXJyb3ctYmFja2dyb3VuZFwiPjwvZGl2PicgK1xyXG5cdFx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0JzwvZGl2PidcclxuXHRcdFx0KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGhpZGUgYXJyb3cgaWYgYXNrZWRcclxuXHRcdFx0aWYgKCF0aGlzLl9fb3B0aW9ucy5hcnJvdykge1xyXG5cdFx0XHRcdCRodG1sXHJcblx0XHRcdFx0XHQuZmluZCgnLnRvb2x0aXBzdGVyLWJveCcpXHJcblx0XHRcdFx0XHRcdC5jc3MoJ21hcmdpbicsIDApXHJcblx0XHRcdFx0XHRcdC5lbmQoKVxyXG5cdFx0XHRcdFx0LmZpbmQoJy50b29sdGlwc3Rlci1hcnJvdycpXHJcblx0XHRcdFx0XHRcdC5oaWRlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGFwcGx5IG1pbi9tYXggd2lkdGggaWYgYXNrZWRcclxuXHRcdFx0aWYgKHRoaXMuX19vcHRpb25zLm1pbldpZHRoKSB7XHJcblx0XHRcdFx0JGh0bWwuY3NzKCdtaW4td2lkdGgnLCB0aGlzLl9fb3B0aW9ucy5taW5XaWR0aCArICdweCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLl9fb3B0aW9ucy5tYXhXaWR0aCkge1xyXG5cdFx0XHRcdCRodG1sLmNzcygnbWF4LXdpZHRoJywgdGhpcy5fX29wdGlvbnMubWF4V2lkdGggKyAncHgnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5fX2luc3RhbmNlLl8kdG9vbHRpcCA9ICRodG1sO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gdGVsbCB0aGUgaW5zdGFuY2UgdGhhdCB0aGUgdG9vbHRpcCBlbGVtZW50IGhhcyBiZWVuIGNyZWF0ZWRcclxuXHRcdFx0dGhpcy5fX2luc3RhbmNlLl90cmlnZ2VyKCdjcmVhdGVkJyk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFVzZWQgd2hlbiB0aGUgcGx1Z2luIGlzIHRvIGJlIHVucGx1Z2dlZFxyXG5cdFx0ICpcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9fZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX19pbnN0YW5jZS5fb2ZmKCcuJysgc2VsZi5fX25hbWVzcGFjZSk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIChSZSljb21wdXRlIHRoaXMuX19vcHRpb25zIGZyb20gdGhlIG9wdGlvbnMgZGVjbGFyZWQgdG8gdGhlIGluc3RhbmNlXHJcblx0XHQgKlxyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X19vcHRpb25zRm9ybWF0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0XHJcblx0XHRcdC8vIGdldCB0aGUgb3B0aW9uc1xyXG5cdFx0XHRzZWxmLl9fb3B0aW9ucyA9IHNlbGYuX19pbnN0YW5jZS5fb3B0aW9uc0V4dHJhY3QocGx1Z2luTmFtZSwgc2VsZi5fX2RlZmF1bHRzKCkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIGRlcHJlY2F0ZWQgaW4gdjQuMC4wXHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5wb3NpdGlvbikge1xyXG5cdFx0XHRcdHNlbGYuX19vcHRpb25zLnNpZGUgPSBzZWxmLl9fb3B0aW9ucy5wb3NpdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gb3B0aW9ucyBmb3JtYXR0aW5nXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBmb3JtYXQgZGlzdGFuY2UgYXMgYSBmb3VyLWNlbGwgYXJyYXkgaWYgaXQgYWluJ3Qgb25lIHlldCBhbmQgdGhlbiBtYWtlXHJcblx0XHRcdC8vIGl0IGFuIG9iamVjdCB3aXRoIHRvcC9ib3R0b20vbGVmdC9yaWdodCBwcm9wZXJ0aWVzXHJcblx0XHRcdGlmICh0eXBlb2Ygc2VsZi5fX29wdGlvbnMuZGlzdGFuY2UgIT0gJ29iamVjdCcpIHtcclxuXHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZSA9IFtzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZV07XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmRpc3RhbmNlLmxlbmd0aCA8IDQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMV0gPT09IHVuZGVmaW5lZCkgc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMV0gPSBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVswXTtcclxuXHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMl0gPT09IHVuZGVmaW5lZCkgc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMl0gPSBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVswXTtcclxuXHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbM10gPT09IHVuZGVmaW5lZCkgc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbM10gPSBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVsxXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZSA9IHtcclxuXHRcdFx0XHRcdHRvcDogc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMF0sXHJcblx0XHRcdFx0XHRyaWdodDogc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMV0sXHJcblx0XHRcdFx0XHRib3R0b206IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzJdLFxyXG5cdFx0XHRcdFx0bGVmdDogc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbM11cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBsZXQncyB0cmFuc2Zvcm06XHJcblx0XHRcdC8vICd0b3AnIGludG8gWyd0b3AnLCAnYm90dG9tJywgJ3JpZ2h0JywgJ2xlZnQnXVxyXG5cdFx0XHQvLyAncmlnaHQnIGludG8gWydyaWdodCcsICdsZWZ0JywgJ3RvcCcsICdib3R0b20nXVxyXG5cdFx0XHQvLyAnYm90dG9tJyBpbnRvIFsnYm90dG9tJywgJ3RvcCcsICdyaWdodCcsICdsZWZ0J11cclxuXHRcdFx0Ly8gJ2xlZnQnIGludG8gWydsZWZ0JywgJ3JpZ2h0JywgJ3RvcCcsICdib3R0b20nXVxyXG5cdFx0XHRpZiAodHlwZW9mIHNlbGYuX19vcHRpb25zLnNpZGUgPT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgb3Bwb3NpdGVzID0ge1xyXG5cdFx0XHRcdFx0J3RvcCc6ICdib3R0b20nLFxyXG5cdFx0XHRcdFx0J3JpZ2h0JzogJ2xlZnQnLFxyXG5cdFx0XHRcdFx0J2JvdHRvbSc6ICd0b3AnLFxyXG5cdFx0XHRcdFx0J2xlZnQnOiAncmlnaHQnXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5zaWRlID0gW3NlbGYuX19vcHRpb25zLnNpZGUsIG9wcG9zaXRlc1tzZWxmLl9fb3B0aW9ucy5zaWRlXV07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnNpZGVbMF0gPT0gJ2xlZnQnIHx8IHNlbGYuX19vcHRpb25zLnNpZGVbMF0gPT0gJ3JpZ2h0Jykge1xyXG5cdFx0XHRcdFx0c2VsZi5fX29wdGlvbnMuc2lkZS5wdXNoKCd0b3AnLCAnYm90dG9tJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0c2VsZi5fX29wdGlvbnMuc2lkZS5wdXNoKCdyaWdodCcsICdsZWZ0Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBtaXNjXHJcblx0XHRcdC8vIGRpc2FibGUgdGhlIGFycm93IGluIElFNiB1bmxlc3MgdGhlIGFycm93IG9wdGlvbiB3YXMgZXhwbGljaXRseSBzZXQgdG8gdHJ1ZVxyXG5cdFx0XHRpZiAoXHQkLnRvb2x0aXBzdGVyLl9lbnYuSUUgPT09IDZcclxuXHRcdFx0XHQmJlx0c2VsZi5fX29wdGlvbnMuYXJyb3cgIT09IHRydWVcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0c2VsZi5fX29wdGlvbnMuYXJyb3cgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBUaGlzIG1ldGhvZCBtdXN0IGNvbXB1dGUgYW5kIHNldCB0aGUgcG9zaXRpb25pbmcgcHJvcGVydGllcyBvZiB0aGVcclxuXHRcdCAqIHRvb2x0aXAgKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCwgZXRjLikuIEl0IG11c3QgYWxzbyBtYWtlIHN1cmUgdGhlXHJcblx0XHQgKiB0b29sdGlwIGlzIGV2ZW50dWFsbHkgYXBwZW5kZWQgdG8gaXRzIHBhcmVudCAoc2luY2UgdGhlIGVsZW1lbnQgbWF5IGJlXHJcblx0XHQgKiBkZXRhY2hlZCBmcm9tIHRoZSBET00gYXQgdGhlIG1vbWVudCB0aGUgbWV0aG9kIGlzIGNhbGxlZCkuXHJcblx0XHQgKlxyXG5cdFx0ICogV2UnbGwgZXZhbHVhdGUgcG9zaXRpb25pbmcgc2NlbmFyaW9zIHRvIGZpbmQgd2hpY2ggc2lkZSBjYW4gY29udGFpbiB0aGVcclxuXHRcdCAqIHRvb2x0aXAgaW4gdGhlIGJlc3Qgd2F5LiBXZSdsbCBjb25zaWRlciB0aGluZ3MgcmVsYXRpdmVseSB0byB0aGUgd2luZG93XHJcblx0XHQgKiAodW5sZXNzIHRoZSB1c2VyIGFza3Mgbm90IHRvKSwgdGhlbiB0byB0aGUgZG9jdW1lbnQgKGlmIG5lZWQgYmUsIG9yIGlmIHRoZVxyXG5cdFx0ICogdXNlciBleHBsaWNpdGx5IHJlcXVpcmVzIHRoZSB0ZXN0cyB0byBydW4gb24gdGhlIGRvY3VtZW50KS4gRm9yIGVhY2hcclxuXHRcdCAqIHNjZW5hcmlvLCBtZWFzdXJlcyBhcmUgdGFrZW4sIGFsbG93aW5nIHVzIHRvIGtub3cgaG93IHdlbGwgdGhlIHRvb2x0aXBcclxuXHRcdCAqIGlzIGdvaW5nIHRvIGZpdC4gQWZ0ZXIgdGhhdCwgYSBzb3J0aW5nIGZ1bmN0aW9uIHdpbGwgbGV0IHVzIGtub3cgd2hhdFxyXG5cdFx0ICogdGhlIGJlc3Qgc2NlbmFyaW8gaXMgKHdlIGFsc28gYWxsb3cgdGhlIHVzZXIgdG8gY2hvb3NlIGhpcyBmYXZvcml0ZVxyXG5cdFx0ICogc2NlbmFyaW8gYnkgdXNpbmcgYW4gZXZlbnQpLlxyXG5cdFx0ICogXHJcblx0XHQgKiBAcGFyYW0ge29iamVjdH0gaGVscGVyIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHZhcmlhYmxlcyB0aGF0IHBsdWdpblxyXG5cdFx0ICogY3JlYXRvcnMgbWF5IGZpbmQgdXNlZnVsIChzZWUgYmVsb3cpXHJcblx0XHQgKiBAcGFyYW0ge29iamVjdH0gaGVscGVyLmdlbyBBbiBvYmplY3Qgd2l0aCBtYW55IGxheW91dCBwcm9wZXJ0aWVzXHJcblx0XHQgKiBhYm91dCBvYmplY3RzIG9mIGludGVyZXN0ICh3aW5kb3csIGRvY3VtZW50LCBvcmlnaW4pLiBUaGlzIHNob3VsZCBoZWxwXHJcblx0XHQgKiBwbHVnaW4gdXNlcnMgY29tcHV0ZSB0aGUgb3B0aW1hbCBwb3NpdGlvbiBvZiB0aGUgdG9vbHRpcFxyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X19yZXBvc2l0aW9uOiBmdW5jdGlvbihldmVudCwgaGVscGVyKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0ZmluYWxSZXN1bHQsXHJcblx0XHRcdFx0Ly8gdG8ga25vdyB3aGVyZSB0byBwdXQgdGhlIHRvb2x0aXAsIHdlIG5lZWQgdG8ga25vdyBvbiB3aGljaCBwb2ludFxyXG5cdFx0XHRcdC8vIG9mIHRoZSB4IG9yIHkgYXhpcyB3ZSBzaG91bGQgY2VudGVyIGl0LiBUaGF0IGNvb3JkaW5hdGUgaXMgdGhlIHRhcmdldFxyXG5cdFx0XHRcdHRhcmdldHMgPSBzZWxmLl9fdGFyZ2V0RmluZChoZWxwZXIpLFxyXG5cdFx0XHRcdHRlc3RSZXN1bHRzID0gW107XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdGhlIHRvb2x0aXAgaXMgZGV0YWNoZWQgd2hpbGUgd2UgbWFrZSB0ZXN0cyBvbiBhIGNsb25lXHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fJHRvb2x0aXAuZGV0YWNoKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyB3ZSBjb3VsZCBhY3R1YWxseSBwcm92aWRlIHRoZSBvcmlnaW5hbCBlbGVtZW50IHRvIHRoZSBSdWxlciBhbmRcclxuXHRcdFx0Ly8gbm90IGEgY2xvbmUsIGJ1dCBpdCBqdXN0IGZlZWxzIHJpZ2h0IHRvIGtlZXAgaXQgb3V0IG9mIHRoZVxyXG5cdFx0XHQvLyBtYWNoaW5lcnkuXHJcblx0XHRcdHZhciAkY2xvbmUgPSBzZWxmLl9faW5zdGFuY2UuXyR0b29sdGlwLmNsb25lKCksXHJcblx0XHRcdFx0Ly8gc3RhcnQgcG9zaXRpb24gdGVzdHMgc2Vzc2lvblxyXG5cdFx0XHRcdHJ1bGVyID0gJC50b29sdGlwc3Rlci5fZ2V0UnVsZXIoJGNsb25lKSxcclxuXHRcdFx0XHRzYXRpc2ZpZWQgPSBmYWxzZSxcclxuXHRcdFx0XHRhbmltYXRpb24gPSBzZWxmLl9faW5zdGFuY2Uub3B0aW9uKCdhbmltYXRpb24nKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGFuIGFuaW1hdGlvbiBjbGFzcyBjb3VsZCBjb250YWluIHByb3BlcnRpZXMgdGhhdCBkaXN0b3J0IHRoZSBzaXplXHJcblx0XHRcdGlmIChhbmltYXRpb24pIHtcclxuXHRcdFx0XHQkY2xvbmUucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLScrIGFuaW1hdGlvbik7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIHN0YXJ0IGV2YWx1YXRpbmcgc2NlbmFyaW9zXHJcblx0XHRcdCQuZWFjaChbJ3dpbmRvdycsICdkb2N1bWVudCddLCBmdW5jdGlvbihpLCBjb250YWluZXIpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgdGFrZVRlc3QgPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGxldCB0aGUgdXNlciBkZWNpZGUgdG8ga2VlcCBvbiB0ZXN0aW5nIG9yIG5vdFxyXG5cdFx0XHRcdHNlbGYuX19pbnN0YW5jZS5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHRjb250YWluZXI6IGNvbnRhaW5lcixcclxuXHRcdFx0XHRcdGhlbHBlcjogaGVscGVyLFxyXG5cdFx0XHRcdFx0c2F0aXNmaWVkOiBzYXRpc2ZpZWQsXHJcblx0XHRcdFx0XHR0YWtlVGVzdDogZnVuY3Rpb24oYm9vbCkge1xyXG5cdFx0XHRcdFx0XHR0YWtlVGVzdCA9IGJvb2w7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0cmVzdWx0czogdGVzdFJlc3VsdHMsXHJcblx0XHRcdFx0XHR0eXBlOiAncG9zaXRpb25UZXN0J1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChcdHRha2VUZXN0ID09IHRydWVcclxuXHRcdFx0XHRcdHx8XHQoXHR0YWtlVGVzdCAhPSBmYWxzZVxyXG5cdFx0XHRcdFx0XHQmJlx0c2F0aXNmaWVkID09IGZhbHNlXHJcblx0XHRcdFx0XHRcdFx0Ly8gc2tpcCB0aGUgd2luZG93IHNjZW5hcmlvcyBpZiBhc2tlZC4gSWYgdGhleSBhcmUgcmVpbnRlZ3JhdGVkIGJ5XHJcblx0XHRcdFx0XHRcdFx0Ly8gdGhlIGNhbGxiYWNrIG9mIHRoZSBwb3NpdGlvblRlc3QgZXZlbnQsIHRoZXkgd2lsbCBoYXZlIHRvIGJlXHJcblx0XHRcdFx0XHRcdFx0Ly8gZXhjbHVkZWQgdXNpbmcgdGhlIGNhbGxiYWNrIG9mIHBvc2l0aW9uVGVzdGVkXHJcblx0XHRcdFx0XHRcdCYmXHQoY29udGFpbmVyICE9ICd3aW5kb3cnIHx8IHNlbGYuX19vcHRpb25zLnZpZXdwb3J0QXdhcmUpXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGZvciBlYWNoIGFsbG93ZWQgc2lkZVxyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaT0wOyBpIDwgc2VsZi5fX29wdGlvbnMuc2lkZS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGRpc3RhbmNlID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aG9yaXpvbnRhbDogMCxcclxuXHRcdFx0XHRcdFx0XHRcdHZlcnRpY2FsOiAwXHJcblx0XHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0XHRzaWRlID0gc2VsZi5fX29wdGlvbnMuc2lkZVtpXTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChzaWRlID09ICd0b3AnIHx8IHNpZGUgPT0gJ2JvdHRvbScpIHtcclxuXHRcdFx0XHRcdFx0XHRkaXN0YW5jZS52ZXJ0aWNhbCA9IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlW3NpZGVdO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGRpc3RhbmNlLmhvcml6b250YWwgPSBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVtzaWRlXTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gdGhpcyBtYXkgaGF2ZSBhbiBlZmZlY3Qgb24gdGhlIHNpemUgb2YgdGhlIHRvb2x0aXAgaWYgdGhlcmUgYXJlIGNzc1xyXG5cdFx0XHRcdFx0XHQvLyBydWxlcyBmb3IgdGhlIGFycm93IG9yIHNvbWV0aGluZyBlbHNlXHJcblx0XHRcdFx0XHRcdHNlbGYuX19zaWRlQ2hhbmdlKCRjbG9uZSwgc2lkZSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQkLmVhY2goWyduYXR1cmFsJywgJ2NvbnN0cmFpbmVkJ10sIGZ1bmN0aW9uKGksIG1vZGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHR0YWtlVGVzdCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gZW1pdCBhbiBldmVudCBvbiB0aGUgaW5zdGFuY2VcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9faW5zdGFuY2UuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyOiBjb250YWluZXIsXHJcblx0XHRcdFx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRcdFx0XHRoZWxwZXI6IGhlbHBlcixcclxuXHRcdFx0XHRcdFx0XHRcdG1vZGU6IG1vZGUsXHJcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzOiB0ZXN0UmVzdWx0cyxcclxuXHRcdFx0XHRcdFx0XHRcdHNhdGlzZmllZDogc2F0aXNmaWVkLFxyXG5cdFx0XHRcdFx0XHRcdFx0c2lkZTogc2lkZSxcclxuXHRcdFx0XHRcdFx0XHRcdHRha2VUZXN0OiBmdW5jdGlvbihib29sKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRha2VUZXN0ID0gYm9vbDtcclxuXHRcdFx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiAncG9zaXRpb25UZXN0J1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChcdHRha2VUZXN0ID09IHRydWVcclxuXHRcdFx0XHRcdFx0XHRcdHx8XHQoXHR0YWtlVGVzdCAhPSBmYWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQmJlx0c2F0aXNmaWVkID09IGZhbHNlXHJcblx0XHRcdFx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHZhciB0ZXN0UmVzdWx0ID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXI6IGNvbnRhaW5lcixcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gd2UgbGV0IHRoZSBkaXN0YW5jZSBhcyBhbiBvYmplY3QgaGVyZSwgaXQgY2FuIG1ha2UgdGhpbmdzIGEgbGl0dGxlIGVhc2llclxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBkdXJpbmcgdGhlIHVzZXIncyBjYWxjdWxhdGlvbnMgYXQgcG9zaXRpb25UZXN0L3Bvc2l0aW9uVGVzdGVkXHJcblx0XHRcdFx0XHRcdFx0XHRcdGRpc3RhbmNlOiBkaXN0YW5jZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gd2hldGhlciB0aGUgdG9vbHRpcCBjYW4gZml0IGluIHRoZSBzaXplIG9mIHRoZSB2aWV3cG9ydCAoZG9lcyBub3QgbWVhblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB0aGF0IHdlJ2xsIGJlIGFibGUgdG8gbWFrZSBpdCBpbml0aWFsbHkgZW50aXJlbHkgdmlzaWJsZSwgc2VlICd3aG9sZScpXHJcblx0XHRcdFx0XHRcdFx0XHRcdGZpdHM6IG51bGwsXHJcblx0XHRcdFx0XHRcdFx0XHRcdG1vZGU6IG1vZGUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdG91dGVyU2l6ZTogbnVsbCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2lkZTogc2lkZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2l6ZTogbnVsbCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0OiB0YXJnZXRzW3NpZGVdLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBjaGVjayBpZiB0aGUgb3JpZ2luIGhhcyBlbm91Z2ggc3VyZmFjZSBvbiBzY3JlZW4gZm9yIHRoZSB0b29sdGlwIHRvXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGFpbSBhdCBpdCB3aXRob3V0IG92ZXJmbG93aW5nIHRoZSB2aWV3cG9ydCAodGhpcyBpcyBkdWUgdG8gdGhlIHRoaWNrbmVzc1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBvZiB0aGUgYXJyb3cgcmVwcmVzZW50ZWQgYnkgdGhlIG1pbkludGVyc2VjdGlvbiBsZW5ndGgpLlxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJZiBub3QsIHRoZSB0b29sdGlwIHdpbGwgaGF2ZSB0byBiZSBwYXJ0bHkgb3IgZW50aXJlbHkgb2ZmIHNjcmVlbiBpblxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBvcmRlciB0byBzdGF5IGRvY2tlZCB0byB0aGUgb3JpZ2luLiBUaGlzIHZhbHVlIHdpbGwgc3RheSBudWxsIHdoZW4gdGhlXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGNvbnRhaW5lciBpcyB0aGUgZG9jdW1lbnQsIGFzIGl0IGlzIG5vdCByZWxldmFudFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR3aG9sZTogbnVsbFxyXG5cdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gZ2V0IHRoZSBzaXplIG9mIHRoZSB0b29sdGlwIHdpdGggb3Igd2l0aG91dCBzaXplIGNvbnN0cmFpbnRzXHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgcnVsZXJDb25maWd1cmVkID0gKG1vZGUgPT0gJ25hdHVyYWwnKSA/XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cnVsZXIuZnJlZSgpIDpcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRydWxlci5jb25zdHJhaW4oXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoZWxwZXIuZ2VvLmF2YWlsYWJsZVtjb250YWluZXJdW3NpZGVdLndpZHRoIC0gZGlzdGFuY2UuaG9yaXpvbnRhbCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhlbHBlci5nZW8uYXZhaWxhYmxlW2NvbnRhaW5lcl1bc2lkZV0uaGVpZ2h0IC0gZGlzdGFuY2UudmVydGljYWxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRydWxlclJlc3VsdHMgPSBydWxlckNvbmZpZ3VyZWQubWVhc3VyZSgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0LnNpemUgPSBydWxlclJlc3VsdHMuc2l6ZTtcclxuXHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHQub3V0ZXJTaXplID0ge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRoZWlnaHQ6IHJ1bGVyUmVzdWx0cy5zaXplLmhlaWdodCArIGRpc3RhbmNlLnZlcnRpY2FsLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR3aWR0aDogcnVsZXJSZXN1bHRzLnNpemUud2lkdGggKyBkaXN0YW5jZS5ob3Jpem9udGFsXHJcblx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAobW9kZSA9PSAnbmF0dXJhbCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmKFx0XHRoZWxwZXIuZ2VvLmF2YWlsYWJsZVtjb250YWluZXJdW3NpZGVdLndpZHRoID49IHRlc3RSZXN1bHQub3V0ZXJTaXplLndpZHRoXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JiZcdGhlbHBlci5nZW8uYXZhaWxhYmxlW2NvbnRhaW5lcl1bc2lkZV0uaGVpZ2h0ID49IHRlc3RSZXN1bHQub3V0ZXJTaXplLmhlaWdodFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0LmZpdHMgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHQuZml0cyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdC5maXRzID0gcnVsZXJSZXN1bHRzLmZpdHM7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChjb250YWluZXIgPT0gJ3dpbmRvdycpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghdGVzdFJlc3VsdC5maXRzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdC53aG9sZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzaWRlID09ICd0b3AnIHx8IHNpZGUgPT0gJ2JvdHRvbScpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdC53aG9sZSA9IChcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgPj0gc2VsZi5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCYmXHRoZWxwZXIuZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgPj0gc2VsZi5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHQud2hvbGUgPSAoXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSA+PSBzZWxmLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0JiZcdGhlbHBlci5nZW8ud2luZG93LnNpemUuaGVpZ2h0IC0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCA+PSBzZWxmLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHRzLnB1c2godGVzdFJlc3VsdCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHdlIGRvbid0IG5lZWQgdG8gY29tcHV0ZSBtb3JlIHBvc2l0aW9ucyBpZiB3ZSBoYXZlIG9uZSBmdWxseSBvbiBzY3JlZW5cclxuXHRcdFx0XHRcdFx0XHRcdGlmICh0ZXN0UmVzdWx0Lndob2xlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNhdGlzZmllZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gZG9uJ3QgcnVuIHRoZSBjb25zdHJhaW5lZCB0ZXN0IHVubGVzcyB0aGUgbmF0dXJhbCB3aWR0aCB3YXMgZ3JlYXRlclxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB0aGFuIHRoZSBhdmFpbGFibGUgd2lkdGgsIG90aGVyd2lzZSBpdCdzIHBvaW50bGVzcyBhcyB3ZSBrbm93IGl0XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHdvdWxkbid0IGZpdCBlaXRoZXJcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKFx0dGVzdFJlc3VsdC5tb2RlID09ICduYXR1cmFsJ1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCYmXHQoXHR0ZXN0UmVzdWx0LmZpdHNcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHx8XHR0ZXN0UmVzdWx0LnNpemUud2lkdGggPD0gaGVscGVyLmdlby5hdmFpbGFibGVbY29udGFpbmVyXVtzaWRlXS53aWR0aFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gdGhlIHVzZXIgbWF5IGVsaW1pbmF0ZSB0aGUgdW53YW50ZWQgc2NlbmFyaW9zIGZyb20gdGVzdFJlc3VsdHMsIGJ1dCBoZSdzXHJcblx0XHRcdC8vIG5vdCBzdXBwb3NlZCB0byBhbHRlciB0aGVtIGF0IHRoaXMgcG9pbnQuIGZ1bmN0aW9uUG9zaXRpb24gYW5kIHRoZVxyXG5cdFx0XHQvLyBwb3NpdGlvbiBldmVudCBzZXJ2ZSB0aGF0IHB1cnBvc2UuXHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fdHJpZ2dlcih7XHJcblx0XHRcdFx0ZWRpdDogZnVuY3Rpb24ocikge1xyXG5cdFx0XHRcdFx0dGVzdFJlc3VsdHMgPSByO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdGhlbHBlcjogaGVscGVyLFxyXG5cdFx0XHRcdHJlc3VsdHM6IHRlc3RSZXN1bHRzLFxyXG5cdFx0XHRcdHR5cGU6ICdwb3NpdGlvblRlc3RlZCdcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvKipcclxuXHRcdFx0ICogU29ydCB0aGUgc2NlbmFyaW9zIHRvIGZpbmQgdGhlIGZhdm9yaXRlIG9uZS5cclxuXHRcdFx0ICogXHJcblx0XHRcdCAqIFRoZSBmYXZvcml0ZSBzY2VuYXJpbyBpcyB3aGVuIHdlIGNhbiBmdWxseSBkaXNwbGF5IHRoZSB0b29sdGlwIG9uIHNjcmVlbixcclxuXHRcdFx0ICogZXZlbiBpZiBpdCBtZWFucyB0aGF0IHRoZSBtaWRkbGUgb2YgdGhlIHRvb2x0aXAgaXMgbm8gbG9uZ2VyIGNlbnRlcmVkIG9uXHJcblx0XHRcdCAqIHRoZSBtaWRkbGUgb2YgdGhlIG9yaWdpbiAod2hlbiB0aGUgb3JpZ2luIGlzIG5lYXIgdGhlIGVkZ2Ugb2YgdGhlIHNjcmVlblxyXG5cdFx0XHQgKiBvciBldmVuIHBhcnRseSBvZmYgc2NyZWVuKS4gV2Ugd2FudCB0aGUgdG9vbHRpcCBvbiB0aGUgcHJlZmVycmVkIHNpZGUsXHJcblx0XHRcdCAqIGV2ZW4gaWYgaXQgbWVhbnMgdGhhdCB3ZSBoYXZlIHRvIHVzZSBhIGNvbnN0cmFpbmVkIHNpemUgcmF0aGVyIHRoYW4gYVxyXG5cdFx0XHQgKiBuYXR1cmFsIG9uZSAoYXMgbG9uZyBhcyBpdCBmaXRzKS4gV2hlbiB0aGUgb3JpZ2luIGlzIG9mZiBzY3JlZW4gYXQgdGhlIHRvcFxyXG5cdFx0XHQgKiB0aGUgdG9vbHRpcCB3aWxsIGJlIHBvc2l0aW9uZWQgYXQgdGhlIGJvdHRvbSAoaWYgYWxsb3dlZCksIGlmIHRoZSBvcmlnaW5cclxuXHRcdFx0ICogaXMgb2ZmIHNjcmVlbiBvbiB0aGUgcmlnaHQsIGl0IHdpbGwgYmUgcG9zaXRpb25lZCBvbiB0aGUgbGVmdCwgZXRjLlxyXG5cdFx0XHQgKiBJZiB0aGVyZSBhcmUgbm8gc2NlbmFyaW9zIHdoZXJlIHRoZSB0b29sdGlwIGNhbiBmaXQgb24gc2NyZWVuLCBvciBpZiB0aGVcclxuXHRcdFx0ICogdXNlciBkb2VzIG5vdCB3YW50IHRoZSB0b29sdGlwIHRvIGZpdCBvbiBzY3JlZW4gKHZpZXdwb3J0QXdhcmUgPT0gZmFsc2UpLFxyXG5cdFx0XHQgKiB3ZSBmYWxsIGJhY2sgdG8gdGhlIHNjZW5hcmlvcyByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnQuXHJcblx0XHRcdCAqIFxyXG5cdFx0XHQgKiBXaGVuIHRoZSB0b29sdGlwIGlzIGJpZ2dlciB0aGFuIHRoZSB2aWV3cG9ydCBpbiBlaXRoZXIgZGltZW5zaW9uLCB3ZSBzdG9wXHJcblx0XHRcdCAqIGxvb2tpbmcgYXQgdGhlIHdpbmRvdyBzY2VuYXJpb3MgYW5kIGNvbnNpZGVyIHRoZSBkb2N1bWVudCBzY2VuYXJpb3Mgb25seSxcclxuXHRcdFx0ICogd2l0aCB0aGUgc2FtZSBsb2dpYyB0byBmaW5kIG9uIHdoaWNoIHNpZGUgaXQgd291bGQgZml0IGJlc3QuXHJcblx0XHRcdCAqIFxyXG5cdFx0XHQgKiBJZiB0aGUgdG9vbHRpcCBjYW5ub3QgZml0IHRoZSBkb2N1bWVudCBvbiBhbnkgc2lkZSwgd2UgZm9yY2UgaXQgYXQgdGhlXHJcblx0XHRcdCAqIGJvdHRvbSwgc28gYXQgbGVhc3QgdGhlIHVzZXIgY2FuIHNjcm9sbCB0byBzZWUgaXQuXHJcbiBcdFx0XHQgKi9cclxuXHRcdFx0dGVzdFJlc3VsdHMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gYmVzdCBpZiBpdCdzIHdob2xlICh0aGUgdG9vbHRpcCBmaXRzIGFuZCBhZGFwdHMgdG8gdGhlIHZpZXdwb3J0KVxyXG5cdFx0XHRcdGlmIChhLndob2xlICYmICFiLndob2xlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gLTE7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKCFhLndob2xlICYmIGIud2hvbGUpIHtcclxuXHRcdFx0XHRcdHJldHVybiAxO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmIChhLndob2xlICYmIGIud2hvbGUpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIGFpID0gc2VsZi5fX29wdGlvbnMuc2lkZS5pbmRleE9mKGEuc2lkZSksXHJcblx0XHRcdFx0XHRcdGJpID0gc2VsZi5fX29wdGlvbnMuc2lkZS5pbmRleE9mKGIuc2lkZSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIHVzZSB0aGUgdXNlcidzIHNpZGVzIGZhbGxiYWNrIGFycmF5XHJcblx0XHRcdFx0XHRpZiAoYWkgPCBiaSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gLTE7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmIChhaSA+IGJpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vIHdpbGwgYmUgdXNlZCBpZiB0aGUgdXNlciBmb3JjZWQgdGhlIHRlc3RzIHRvIGNvbnRpbnVlXHJcblx0XHRcdFx0XHRcdHJldHVybiBhLm1vZGUgPT0gJ25hdHVyYWwnID8gLTEgOiAxO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gYmV0dGVyIGlmIGl0IGZpdHNcclxuXHRcdFx0XHRcdGlmIChhLmZpdHMgJiYgIWIuZml0cykge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gLTE7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmICghYS5maXRzICYmIGIuZml0cykge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKGEuZml0cyAmJiBiLmZpdHMpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHZhciBhaSA9IHNlbGYuX19vcHRpb25zLnNpZGUuaW5kZXhPZihhLnNpZGUpLFxyXG5cdFx0XHRcdFx0XHRcdGJpID0gc2VsZi5fX29wdGlvbnMuc2lkZS5pbmRleE9mKGIuc2lkZSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyB1c2UgdGhlIHVzZXIncyBzaWRlcyBmYWxsYmFjayBhcnJheVxyXG5cdFx0XHRcdFx0XHRpZiAoYWkgPCBiaSkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiAtMTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIGlmIChhaSA+IGJpKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gd2lsbCBiZSB1c2VkIGlmIHRoZSB1c2VyIGZvcmNlZCB0aGUgdGVzdHMgdG8gY29udGludWVcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYS5tb2RlID09ICduYXR1cmFsJyA/IC0xIDogMTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBpZiBldmVyeXRoaW5nIGZhaWxlZCwgdGhpcyB3aWxsIGdpdmUgYSBwcmVmZXJlbmNlIHRvIHRoZSBjYXNlIHdoZXJlXHJcblx0XHRcdFx0XHRcdC8vIHRoZSB0b29sdGlwIG92ZXJmbG93cyB0aGUgZG9jdW1lbnQgYXQgdGhlIGJvdHRvbVxyXG5cdFx0XHRcdFx0XHRpZiAoXHRhLmNvbnRhaW5lciA9PSAnZG9jdW1lbnQnXHJcblx0XHRcdFx0XHRcdFx0JiZcdGEuc2lkZSA9PSAnYm90dG9tJ1xyXG5cdFx0XHRcdFx0XHRcdCYmXHRhLm1vZGUgPT0gJ25hdHVyYWwnXHJcblx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiAtMTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRmaW5hbFJlc3VsdCA9IHRlc3RSZXN1bHRzWzBdO1xyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHRcdC8vIG5vdyBsZXQncyBmaW5kIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgdG9vbHRpcCByZWxhdGl2ZWx5IHRvIHRoZSB3aW5kb3dcclxuXHRcdFx0ZmluYWxSZXN1bHQuY29vcmQgPSB7fTtcclxuXHRcdFx0XHJcblx0XHRcdHN3aXRjaCAoZmluYWxSZXN1bHQuc2lkZSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgJ2xlZnQnOlxyXG5cdFx0XHRcdGNhc2UgJ3JpZ2h0JzpcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA9IE1hdGguZmxvb3IoZmluYWxSZXN1bHQudGFyZ2V0IC0gZmluYWxSZXN1bHQuc2l6ZS5oZWlnaHQgLyAyKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgJ2JvdHRvbSc6XHJcblx0XHRcdFx0Y2FzZSAndG9wJzpcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSBNYXRoLmZsb29yKGZpbmFsUmVzdWx0LnRhcmdldCAtIGZpbmFsUmVzdWx0LnNpemUud2lkdGggLyAyKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRzd2l0Y2ggKGZpbmFsUmVzdWx0LnNpZGUpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjYXNlICdsZWZ0JzpcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCAtIGZpbmFsUmVzdWx0Lm91dGVyU2l6ZS53aWR0aDtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgJ3JpZ2h0JzpcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgKyBmaW5hbFJlc3VsdC5kaXN0YW5jZS5ob3Jpem9udGFsO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2FzZSAndG9wJzpcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgLSBmaW5hbFJlc3VsdC5vdXRlclNpemUuaGVpZ2h0O1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2FzZSAnYm90dG9tJzpcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gKyBmaW5hbFJlc3VsdC5kaXN0YW5jZS52ZXJ0aWNhbDtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBjYW4gcG90ZW50aWFsbHkgYmUgY29udGFpbmVkIHdpdGhpbiB0aGUgdmlld3BvcnQgZGltZW5zaW9uc1xyXG5cdFx0XHQvLyBhbmQgdGhhdCB3ZSBhcmUgYXNrZWQgdG8gbWFrZSBpdCBmaXQgb24gc2NyZWVuXHJcblx0XHRcdGlmIChmaW5hbFJlc3VsdC5jb250YWluZXIgPT0gJ3dpbmRvdycpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBvdmVyZmxvd3MgdGhlIHZpZXdwb3J0LCB3ZSdsbCBtb3ZlIGl0IGFjY29yZGluZ2x5ICh0aGVuIGl0IHdpbGxcclxuXHRcdFx0XHQvLyBub3QgYmUgY2VudGVyZWQgb24gdGhlIG1pZGRsZSBvZiB0aGUgb3JpZ2luIGFueW1vcmUpLiBXZSBvbmx5IG1vdmUgaG9yaXpvbnRhbGx5XHJcblx0XHRcdFx0Ly8gZm9yIHRvcCBhbmQgYm90dG9tIHRvb2x0aXBzIGFuZCB2aWNlIHZlcnNhLlxyXG5cdFx0XHRcdGlmIChmaW5hbFJlc3VsdC5zaWRlID09ICd0b3AnIHx8IGZpbmFsUmVzdWx0LnNpZGUgPT0gJ2JvdHRvbScpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gaWYgdGhlcmUgaXMgYW4gb3ZlcmZsb3cgb24gdGhlIGxlZnRcclxuXHRcdFx0XHRcdGlmIChmaW5hbFJlc3VsdC5jb29yZC5sZWZ0IDwgMCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gcHJldmVudCB0aGUgb3ZlcmZsb3cgdW5sZXNzIHRoZSBvcmlnaW4gaXRzZWxmIGdldHMgb2ZmIHNjcmVlbiAobWludXMgdGhlXHJcblx0XHRcdFx0XHRcdC8vIG1hcmdpbiBuZWVkZWQgdG8ga2VlcCB0aGUgYXJyb3cgcG9pbnRpbmcgYXQgdGhlIHRhcmdldClcclxuXHRcdFx0XHRcdFx0aWYgKGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiA+PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IDA7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiAtIDE7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIG9yIGFuIG92ZXJmbG93IG9uIHRoZSByaWdodFxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoZmluYWxSZXN1bHQuY29vcmQubGVmdCA+IGhlbHBlci5nZW8ud2luZG93LnNpemUud2lkdGggLSBmaW5hbFJlc3VsdC5zaXplLndpZHRoKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPD0gaGVscGVyLmdlby53aW5kb3cuc2l6ZS53aWR0aCkge1xyXG5cdFx0XHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSBoZWxwZXIuZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gZmluYWxSZXN1bHQuc2l6ZS53aWR0aDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gKyAxIC0gZmluYWxSZXN1bHQuc2l6ZS53aWR0aDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gb3ZlcmZsb3cgYXQgdGhlIHRvcFxyXG5cdFx0XHRcdFx0aWYgKGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA8IDApIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmIChoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tIC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uID49IDApIHtcclxuXHRcdFx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC50b3AgPSAwO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gLSAxO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBvciBhdCB0aGUgYm90dG9tXHJcblx0XHRcdFx0XHRlbHNlIGlmIChmaW5hbFJlc3VsdC5jb29yZC50b3AgPiBoZWxwZXIuZ2VvLndpbmRvdy5zaXplLmhlaWdodCAtIGZpbmFsUmVzdWx0LnNpemUuaGVpZ2h0KSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiA8PSBoZWxwZXIuZ2VvLndpbmRvdy5zaXplLmhlaWdodCkge1xyXG5cdFx0XHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA9IGhlbHBlci5nZW8ud2luZG93LnNpemUuaGVpZ2h0IC0gZmluYWxSZXN1bHQuc2l6ZS5oZWlnaHQ7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQudG9wID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiArIDEgLSBmaW5hbFJlc3VsdC5zaXplLmhlaWdodDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyB0aGVyZSBtaWdodCBiZSBvdmVyZmxvdyBoZXJlIHRvbyBidXQgaXQncyBlYXNpZXIgdG8gaGFuZGxlLiBJZiB0aGVyZSBoYXNcclxuXHRcdFx0XHQvLyB0byBiZSBhbiBvdmVyZmxvdywgd2UnbGwgbWFrZSBzdXJlIGl0J3Mgb24gdGhlIHJpZ2h0IHNpZGUgb2YgdGhlIHNjcmVlblxyXG5cdFx0XHRcdC8vIChiZWNhdXNlIHRoZSBicm93c2VyIHdpbGwgZXh0ZW5kIHRoZSBkb2N1bWVudCBzaXplIGlmIHRoZXJlIGlzIGFuIG92ZXJmbG93XHJcblx0XHRcdFx0Ly8gb24gdGhlIHJpZ2h0LCBidXQgbm90IG9uIHRoZSBsZWZ0KS4gVGhlIHNvcnQgZnVuY3Rpb24gYWJvdmUgaGFzIGFscmVhZHlcclxuXHRcdFx0XHQvLyBtYWRlIHN1cmUgdGhhdCBhIGJvdHRvbSBkb2N1bWVudCBvdmVyZmxvdyBpcyBwcmVmZXJyZWQgdG8gYSB0b3Agb3ZlcmZsb3csXHJcblx0XHRcdFx0Ly8gc28gd2UgZG9uJ3QgaGF2ZSB0byBjYXJlIGFib3V0IGl0LlxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmIHRoZXJlIGlzIGFuIG92ZXJmbG93IG9uIHRoZSByaWdodFxyXG5cdFx0XHRcdGlmIChmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID4gaGVscGVyLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGZpbmFsUmVzdWx0LnNpemUud2lkdGgpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gdGhpcyBtYXkgYWN0dWFsbHkgY3JlYXRlIG9uIG92ZXJmbG93IG9uIHRoZSBsZWZ0IGJ1dCB3ZSdsbCBmaXggaXQgaW4gYSBzZWNcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSBoZWxwZXIuZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gZmluYWxSZXN1bHQuc2l6ZS53aWR0aDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gaWYgdGhlcmUgaXMgYW4gb3ZlcmZsb3cgb24gdGhlIGxlZnRcclxuXHRcdFx0XHRpZiAoZmluYWxSZXN1bHQuY29vcmQubGVmdCA8IDApIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gZG9uJ3QgY2FyZSBpZiBpdCBvdmVyZmxvd3MgdGhlIHJpZ2h0IGFmdGVyIHRoYXQsIHdlIG1hZGUgb3VyIGJlc3RcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHRcdC8vIHN1Ym1pdCB0aGUgcG9zaXRpb25pbmcgcHJvcG9zYWwgdG8gdGhlIHVzZXIgZnVuY3Rpb24gd2hpY2ggbWF5IGNob29zZSB0byBjaGFuZ2VcclxuXHRcdFx0Ly8gdGhlIHNpZGUsIHNpemUgYW5kL29yIHRoZSBjb29yZGluYXRlc1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZmlyc3QsIHNldCB0aGUgcnVsZXMgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgcHJvcG9zZWQgc2lkZTogaXQgbWF5IGNoYW5nZVxyXG5cdFx0XHQvLyB0aGUgc2l6ZSBvZiB0aGUgdG9vbHRpcCwgYW5kIHRoZSBjdXN0b20gZnVuY3Rpb25Qb3NpdGlvbiBtYXkgd2FudCB0byBkZXRlY3QgdGhlXHJcblx0XHRcdC8vIHNpemUgb2Ygc29tZXRoaW5nIGJlZm9yZSBtYWtpbmcgYSBkZWNpc2lvbi4gU28gbGV0J3MgbWFrZSB0aGluZ3MgZWFzaWVyIGZvciB0aGVcclxuXHRcdFx0Ly8gaW1wbGVtZW50b3JcclxuXHRcdFx0c2VsZi5fX3NpZGVDaGFuZ2UoJGNsb25lLCBmaW5hbFJlc3VsdC5zaWRlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGFkZCBzb21lIHZhcmlhYmxlcyB0byB0aGUgaGVscGVyXHJcblx0XHRcdGhlbHBlci50b29sdGlwQ2xvbmUgPSAkY2xvbmVbMF07XHJcblx0XHRcdGhlbHBlci50b29sdGlwUGFyZW50ID0gc2VsZi5fX2luc3RhbmNlLm9wdGlvbigncGFyZW50JykucGFyZW50WzBdO1xyXG5cdFx0XHQvLyBtb3ZlIGluZm9ybWF0aXZlIHZhbHVlcyB0byB0aGUgaGVscGVyXHJcblx0XHRcdGhlbHBlci5tb2RlID0gZmluYWxSZXN1bHQubW9kZTtcclxuXHRcdFx0aGVscGVyLndob2xlID0gZmluYWxSZXN1bHQud2hvbGU7XHJcblx0XHRcdC8vIGFkZCBzb21lIHZhcmlhYmxlcyB0byB0aGUgaGVscGVyIGZvciB0aGUgZnVuY3Rpb25Qb3NpdGlvbiBjYWxsYmFjayAodGhlc2VcclxuXHRcdFx0Ly8gd2lsbCBhbHNvIGJlIGFkZGVkIHRvIHRoZSBldmVudCBmaXJlZCBieSBzZWxmLl9faW5zdGFuY2UuX3RyaWdnZXIgYnV0IHRoYXQnc1xyXG5cdFx0XHQvLyBvaywgd2UncmUganVzdCBiZWluZyBjb25zaXN0ZW50KVxyXG5cdFx0XHRoZWxwZXIub3JpZ2luID0gc2VsZi5fX2luc3RhbmNlLl8kb3JpZ2luWzBdO1xyXG5cdFx0XHRoZWxwZXIudG9vbHRpcCA9IHNlbGYuX19pbnN0YW5jZS5fJHRvb2x0aXBbMF07XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBsZWF2ZSBvbmx5IHRoZSBhY3Rpb25hYmxlIHZhbHVlcyBpbiB0aGVyZSBmb3IgZnVuY3Rpb25Qb3NpdGlvblxyXG5cdFx0XHRkZWxldGUgZmluYWxSZXN1bHQuY29udGFpbmVyO1xyXG5cdFx0XHRkZWxldGUgZmluYWxSZXN1bHQuZml0cztcclxuXHRcdFx0ZGVsZXRlIGZpbmFsUmVzdWx0Lm1vZGU7XHJcblx0XHRcdGRlbGV0ZSBmaW5hbFJlc3VsdC5vdXRlclNpemU7XHJcblx0XHRcdGRlbGV0ZSBmaW5hbFJlc3VsdC53aG9sZTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGtlZXAgb25seSB0aGUgZGlzdGFuY2Ugb24gdGhlIHJlbGV2YW50IHNpZGUsIGZvciBjbGFyaXR5XHJcblx0XHRcdGZpbmFsUmVzdWx0LmRpc3RhbmNlID0gZmluYWxSZXN1bHQuZGlzdGFuY2UuaG9yaXpvbnRhbCB8fCBmaW5hbFJlc3VsdC5kaXN0YW5jZS52ZXJ0aWNhbDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGJlZ2lubmVycyBtYXkgbm90IGJlIGNvbWZvcnRhYmxlIHdpdGggdGhlIGNvbmNlcHQgb2YgZWRpdGluZyB0aGUgb2JqZWN0XHJcblx0XHRcdC8vICBwYXNzZWQgYnkgcmVmZXJlbmNlLCBzbyB3ZSBwcm92aWRlIGFuIGVkaXQgZnVuY3Rpb24gYW5kIHBhc3MgYSBjbG9uZVxyXG5cdFx0XHR2YXIgZmluYWxSZXN1bHRDbG9uZSA9ICQuZXh0ZW5kKHRydWUsIHt9LCBmaW5hbFJlc3VsdCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBlbWl0IGFuIGV2ZW50IG9uIHRoZSBpbnN0YW5jZVxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdGVkaXQ6IGZ1bmN0aW9uKHJlc3VsdCkge1xyXG5cdFx0XHRcdFx0ZmluYWxSZXN1bHQgPSByZXN1bHQ7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0aGVscGVyOiBoZWxwZXIsXHJcblx0XHRcdFx0cG9zaXRpb246IGZpbmFsUmVzdWx0Q2xvbmUsXHJcblx0XHRcdFx0dHlwZTogJ3Bvc2l0aW9uJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5mdW5jdGlvblBvc2l0aW9uKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIHJlc3VsdCA9IHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uUG9zaXRpb24uY2FsbChzZWxmLCBzZWxmLl9faW5zdGFuY2UsIGhlbHBlciwgZmluYWxSZXN1bHRDbG9uZSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHJlc3VsdCkgZmluYWxSZXN1bHQgPSByZXN1bHQ7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGVuZCB0aGUgcG9zaXRpb25pbmcgdGVzdHMgc2Vzc2lvbiAodGhlIHVzZXIgbWlnaHQgaGF2ZSBoYWQgYVxyXG5cdFx0XHQvLyB1c2UgZm9yIGl0IGR1cmluZyB0aGUgcG9zaXRpb24gZXZlbnQsIG5vdyBpdCdzIG92ZXIpXHJcblx0XHRcdHJ1bGVyLmRlc3Ryb3koKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGNvbXB1dGUgdGhlIHBvc2l0aW9uIG9mIHRoZSB0YXJnZXQgcmVsYXRpdmVseSB0byB0aGUgdG9vbHRpcCByb290XHJcblx0XHRcdC8vIGVsZW1lbnQgc28gd2UgY2FuIHBsYWNlIHRoZSBhcnJvdyBhbmQgbWFrZSB0aGUgbmVlZGVkIGFkanVzdG1lbnRzXHJcblx0XHRcdHZhciBhcnJvd0Nvb3JkLFxyXG5cdFx0XHRcdG1heFZhbDtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChmaW5hbFJlc3VsdC5zaWRlID09ICd0b3AnIHx8IGZpbmFsUmVzdWx0LnNpZGUgPT0gJ2JvdHRvbScpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRhcnJvd0Nvb3JkID0ge1xyXG5cdFx0XHRcdFx0cHJvcDogJ2xlZnQnLFxyXG5cdFx0XHRcdFx0dmFsOiBmaW5hbFJlc3VsdC50YXJnZXQgLSBmaW5hbFJlc3VsdC5jb29yZC5sZWZ0XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRtYXhWYWwgPSBmaW5hbFJlc3VsdC5zaXplLndpZHRoIC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGFycm93Q29vcmQgPSB7XHJcblx0XHRcdFx0XHRwcm9wOiAndG9wJyxcclxuXHRcdFx0XHRcdHZhbDogZmluYWxSZXN1bHQudGFyZ2V0IC0gZmluYWxSZXN1bHQuY29vcmQudG9wXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHRtYXhWYWwgPSBmaW5hbFJlc3VsdC5zaXplLmhlaWdodCAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gY2Fubm90IGxpZSBiZXlvbmQgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIHRvb2x0aXAsIG1pbnVzIHRoZVxyXG5cdFx0XHQvLyBhcnJvdyBtYXJnaW5cclxuXHRcdFx0aWYgKGFycm93Q29vcmQudmFsIDwgdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uKSB7XHJcblx0XHRcdFx0YXJyb3dDb29yZC52YWwgPSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb247XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoYXJyb3dDb29yZC52YWwgPiBtYXhWYWwpIHtcclxuXHRcdFx0XHRhcnJvd0Nvb3JkLnZhbCA9IG1heFZhbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0dmFyIG9yaWdpblBhcmVudE9mZnNldDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGxldCdzIGNvbnZlcnQgdGhlIHdpbmRvdy1yZWxhdGl2ZSBjb29yZGluYXRlcyBpbnRvIGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHRoZVxyXG5cdFx0XHQvLyBmdXR1cmUgcG9zaXRpb25lZCBwYXJlbnQgdGhhdCB0aGUgdG9vbHRpcCB3aWxsIGJlIGFwcGVuZGVkIHRvXHJcblx0XHRcdGlmIChoZWxwZXIuZ2VvLm9yaWdpbi5maXhlZExpbmVhZ2UpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBzYW1lIGFzIHdpbmRvd09mZnNldCB3aGVuIHRoZSBwb3NpdGlvbiBpcyBmaXhlZFxyXG5cdFx0XHRcdG9yaWdpblBhcmVudE9mZnNldCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldDtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyB0aGlzIGFzc3VtZXMgdGhhdCB0aGUgcGFyZW50IG9mIHRoZSB0b29sdGlwIGlzIGxvY2F0ZWQgYXRcclxuXHRcdFx0XHQvLyAoMCwgMCkgaW4gdGhlIGRvY3VtZW50LCB0eXBpY2FsbHkgbGlrZSB3aGVuIHRoZSBwYXJlbnQgaXNcclxuXHRcdFx0XHQvLyA8Ym9keT4uXHJcblx0XHRcdFx0Ly8gSWYgd2UgZXZlciBhbGxvdyBvdGhlciB0eXBlcyBvZiBwYXJlbnQsIC50b29sdGlwc3Rlci1ydWxlclxyXG5cdFx0XHRcdC8vIHdpbGwgaGF2ZSB0byBiZSBhcHBlbmRlZCB0byB0aGUgcGFyZW50IHRvIGluaGVyaXQgY3NzIHN0eWxlXHJcblx0XHRcdFx0Ly8gdmFsdWVzIHRoYXQgYWZmZWN0IHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXh0IGFuZCBzdWNoLlxyXG5cdFx0XHRcdG9yaWdpblBhcmVudE9mZnNldCA9IHtcclxuXHRcdFx0XHRcdGxlZnQ6IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgaGVscGVyLmdlby53aW5kb3cuc2Nyb2xsLmxlZnQsXHJcblx0XHRcdFx0XHR0b3A6IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyBoZWxwZXIuZ2VvLndpbmRvdy5zY3JvbGwudG9wXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0ZmluYWxSZXN1bHQuY29vcmQgPSB7XHJcblx0XHRcdFx0bGVmdDogb3JpZ2luUGFyZW50T2Zmc2V0LmxlZnQgKyAoZmluYWxSZXN1bHQuY29vcmQubGVmdCAtIGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0KSxcclxuXHRcdFx0XHR0b3A6IG9yaWdpblBhcmVudE9mZnNldC50b3AgKyAoZmluYWxSZXN1bHQuY29vcmQudG9wIC0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcClcclxuXHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHNldCBwb3NpdGlvbiB2YWx1ZXMgb24gdGhlIG9yaWdpbmFsIHRvb2x0aXAgZWxlbWVudFxyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fX3NpZGVDaGFuZ2Uoc2VsZi5fX2luc3RhbmNlLl8kdG9vbHRpcCwgZmluYWxSZXN1bHQuc2lkZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaGVscGVyLmdlby5vcmlnaW4uZml4ZWRMaW5lYWdlKSB7XHJcblx0XHRcdFx0c2VsZi5fX2luc3RhbmNlLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0LmNzcygncG9zaXRpb24nLCAnZml4ZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQvLyBDU1MgZGVmYXVsdFxyXG5cdFx0XHRcdHNlbGYuX19pbnN0YW5jZS5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdC5jc3MoJ3Bvc2l0aW9uJywgJycpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuXyR0b29sdGlwXHJcblx0XHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0XHRsZWZ0OiBmaW5hbFJlc3VsdC5jb29yZC5sZWZ0LFxyXG5cdFx0XHRcdFx0dG9wOiBmaW5hbFJlc3VsdC5jb29yZC50b3AsXHJcblx0XHRcdFx0XHQvLyB3ZSBuZWVkIHRvIHNldCBhIHNpemUgZXZlbiBpZiB0aGUgdG9vbHRpcCBpcyBpbiBpdHMgbmF0dXJhbCBzaXplXHJcblx0XHRcdFx0XHQvLyBiZWNhdXNlIHdoZW4gdGhlIHRvb2x0aXAgaXMgcG9zaXRpb25lZCBiZXlvbmQgdGhlIHdpZHRoIG9mIHRoZSBib2R5XHJcblx0XHRcdFx0XHQvLyAod2hpY2ggaXMgYnkgZGVmYXVsdCB0aGUgd2lkdGggb2YgdGhlIHdpbmRvdzsgaXQgd2lsbCBoYXBwZW4gd2hlblxyXG5cdFx0XHRcdFx0Ly8geW91IHNjcm9sbCB0aGUgd2luZG93IGhvcml6b250YWxseSB0byBnZXQgdG8gdGhlIG9yaWdpbiksIGl0cyB0ZXh0XHJcblx0XHRcdFx0XHQvLyBjb250ZW50IHdpbGwgb3RoZXJ3aXNlIGJyZWFrIGxpbmVzIGF0IGVhY2ggd29yZCB0byBrZWVwIHVwIHdpdGggdGhlXHJcblx0XHRcdFx0XHQvLyBib2R5IG92ZXJmbG93IHN0cmF0ZWd5LlxyXG5cdFx0XHRcdFx0aGVpZ2h0OiBmaW5hbFJlc3VsdC5zaXplLmhlaWdodCxcclxuXHRcdFx0XHRcdHdpZHRoOiBmaW5hbFJlc3VsdC5zaXplLndpZHRoXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuZmluZCgnLnRvb2x0aXBzdGVyLWFycm93JylcclxuXHRcdFx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdFx0XHQnbGVmdCc6ICcnLFxyXG5cdFx0XHRcdFx0XHQndG9wJzogJydcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuY3NzKGFycm93Q29vcmQucHJvcCwgYXJyb3dDb29yZC52YWwpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gYXBwZW5kIHRoZSB0b29sdGlwIEhUTUwgZWxlbWVudCB0byBpdHMgcGFyZW50XHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fJHRvb2x0aXAuYXBwZW5kVG8oc2VsZi5fX2luc3RhbmNlLm9wdGlvbigncGFyZW50JykpO1xyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl90cmlnZ2VyKHtcclxuXHRcdFx0XHR0eXBlOiAncmVwb3NpdGlvbmVkJyxcclxuXHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0cG9zaXRpb246IGZpbmFsUmVzdWx0XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBNYWtlIHdoYXRldmVyIG1vZGlmaWNhdGlvbnMgYXJlIG5lZWRlZCB3aGVuIHRoZSBzaWRlIGlzIGNoYW5nZWQuIFRoaXMgaGFzXHJcblx0XHQgKiBiZWVuIG1hZGUgYW4gaW5kZXBlbmRhbnQgbWV0aG9kIGZvciBlYXN5IGluaGVyaXRhbmNlIGluIGN1c3RvbSBwbHVnaW5zIGJhc2VkXHJcblx0XHQgKiBvbiB0aGlzIGRlZmF1bHQgcGx1Z2luLlxyXG5cdFx0ICpcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSAkb2JqXHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gc2lkZVxyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X19zaWRlQ2hhbmdlOiBmdW5jdGlvbigkb2JqLCBzaWRlKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQkb2JqXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci1ib3R0b20nKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItbGVmdCcpXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci1yaWdodCcpXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci10b3AnKVxyXG5cdFx0XHRcdC5hZGRDbGFzcygndG9vbHRpcHN0ZXItJysgc2lkZSk7XHJcblx0XHR9LFxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFJldHVybnMgdGhlIHRhcmdldCB0aGF0IHRoZSB0b29sdGlwIHNob3VsZCBhaW0gYXQgZm9yIGEgZ2l2ZW4gc2lkZS5cclxuXHRcdCAqIFRoZSBjYWxjdWxhdGVkIHZhbHVlIGlzIGEgZGlzdGFuY2UgZnJvbSB0aGUgZWRnZSBvZiB0aGUgd2luZG93XHJcblx0XHQgKiAobGVmdCBlZGdlIGZvciB0b3AvYm90dG9tIHNpZGVzLCB0b3AgZWRnZSBmb3IgbGVmdC9yaWdodCBzaWRlKS4gVGhlXHJcblx0XHQgKiB0b29sdGlwIHdpbGwgYmUgY2VudGVyZWQgb24gdGhhdCBwb3NpdGlvbiBhbmQgdGhlIGFycm93IHdpbGwgYmVcclxuXHRcdCAqIHBvc2l0aW9uZWQgdGhlcmUgKGFzIG11Y2ggYXMgcG9zc2libGUpLlxyXG5cdFx0ICpcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBoZWxwZXJcclxuXHRcdCAqIEByZXR1cm4ge2ludGVnZXJ9XHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX3RhcmdldEZpbmQ6IGZ1bmN0aW9uKGhlbHBlcikge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHRhcmdldCA9IHt9LFxyXG5cdFx0XHRcdHJlY3RzID0gdGhpcy5fX2luc3RhbmNlLl8kb3JpZ2luWzBdLmdldENsaWVudFJlY3RzKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyB0aGVzZSBsaW5lcyBmaXggYSBDaHJvbWUgYnVnIChpc3N1ZSAjNDkxKVxyXG5cdFx0XHRpZiAocmVjdHMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHRcdHZhciBvcGFjaXR5ID0gdGhpcy5fX2luc3RhbmNlLl8kb3JpZ2luLmNzcygnb3BhY2l0eScpO1xyXG5cdFx0XHRcdGlmKG9wYWNpdHkgPT0gMSkge1xyXG5cdFx0XHRcdFx0dGhpcy5fX2luc3RhbmNlLl8kb3JpZ2luLmNzcygnb3BhY2l0eScsIDAuOTkpO1xyXG5cdFx0XHRcdFx0cmVjdHMgPSB0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW5bMF0uZ2V0Q2xpZW50UmVjdHMoKTtcclxuXHRcdFx0XHRcdHRoaXMuX19pbnN0YW5jZS5fJG9yaWdpbi5jc3MoJ29wYWNpdHknLCAxKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGJ5IGRlZmF1bHQsIHRoZSB0YXJnZXQgd2lsbCBiZSB0aGUgbWlkZGxlIG9mIHRoZSBvcmlnaW5cclxuXHRcdFx0aWYgKHJlY3RzLmxlbmd0aCA8IDIpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0YXJnZXQudG9wID0gTWF0aC5mbG9vcihoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIChoZWxwZXIuZ2VvLm9yaWdpbi5zaXplLndpZHRoIC8gMikpO1xyXG5cdFx0XHRcdHRhcmdldC5ib3R0b20gPSB0YXJnZXQudG9wO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRhcmdldC5sZWZ0ID0gTWF0aC5mbG9vcihoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgKGhlbHBlci5nZW8ub3JpZ2luLnNpemUuaGVpZ2h0IC8gMikpO1xyXG5cdFx0XHRcdHRhcmdldC5yaWdodCA9IHRhcmdldC5sZWZ0O1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIGlmIG11bHRpcGxlIGNsaWVudCByZWN0cyBleGlzdCwgdGhlIGVsZW1lbnQgbWF5IGJlIHRleHQgc3BsaXRcclxuXHRcdFx0Ly8gdXAgaW50byBtdWx0aXBsZSBsaW5lcyBhbmQgdGhlIG1pZGRsZSBvZiB0aGUgb3JpZ2luIG1heSBub3QgYmVcclxuXHRcdFx0Ly8gYmVzdCBvcHRpb24gYW55bW9yZS4gV2UgbmVlZCB0byBjaG9vc2UgdGhlIGJlc3QgdGFyZ2V0IGNsaWVudCByZWN0XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHRvcDogdGhlIGZpcnN0XHJcblx0XHRcdFx0dmFyIHRhcmdldFJlY3QgPSByZWN0c1swXTtcclxuXHRcdFx0XHR0YXJnZXQudG9wID0gTWF0aC5mbG9vcih0YXJnZXRSZWN0LmxlZnQgKyAodGFyZ2V0UmVjdC5yaWdodCAtIHRhcmdldFJlY3QubGVmdCkgLyAyKTtcclxuXHRcdFxyXG5cdFx0XHRcdC8vIHJpZ2h0OiB0aGUgbWlkZGxlIGxpbmUsIHJvdW5kZWQgZG93biBpbiBjYXNlIHRoZXJlIGlzIGFuIGV2ZW5cclxuXHRcdFx0XHQvLyBudW1iZXIgb2YgbGluZXMgKGxvb2tzIG1vcmUgY2VudGVyZWQgPT4gY2hlY2sgb3V0IHRoZVxyXG5cdFx0XHRcdC8vIGRlbW8gd2l0aCA0IHNwbGl0IGxpbmVzKVxyXG5cdFx0XHRcdGlmIChyZWN0cy5sZW5ndGggPiAyKSB7XHJcblx0XHRcdFx0XHR0YXJnZXRSZWN0ID0gcmVjdHNbTWF0aC5jZWlsKHJlY3RzLmxlbmd0aCAvIDIpIC0gMV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0dGFyZ2V0UmVjdCA9IHJlY3RzWzBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0YXJnZXQucmlnaHQgPSBNYXRoLmZsb29yKHRhcmdldFJlY3QudG9wICsgKHRhcmdldFJlY3QuYm90dG9tIC0gdGFyZ2V0UmVjdC50b3ApIC8gMik7XHJcblx0XHRcclxuXHRcdFx0XHQvLyBib3R0b206IHRoZSBsYXN0XHJcblx0XHRcdFx0dGFyZ2V0UmVjdCA9IHJlY3RzW3JlY3RzLmxlbmd0aCAtIDFdO1xyXG5cdFx0XHRcdHRhcmdldC5ib3R0b20gPSBNYXRoLmZsb29yKHRhcmdldFJlY3QubGVmdCArICh0YXJnZXRSZWN0LnJpZ2h0IC0gdGFyZ2V0UmVjdC5sZWZ0KSAvIDIpO1xyXG5cdFx0XHJcblx0XHRcdFx0Ly8gbGVmdDogdGhlIG1pZGRsZSBsaW5lLCByb3VuZGVkIHVwXHJcblx0XHRcdFx0aWYgKHJlY3RzLmxlbmd0aCA+IDIpIHtcclxuXHRcdFx0XHRcdHRhcmdldFJlY3QgPSByZWN0c1tNYXRoLmNlaWwoKHJlY3RzLmxlbmd0aCArIDEpIC8gMikgLSAxXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHR0YXJnZXRSZWN0ID0gcmVjdHNbcmVjdHMubGVuZ3RoIC0gMV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRhcmdldC5sZWZ0ID0gTWF0aC5mbG9vcih0YXJnZXRSZWN0LnRvcCArICh0YXJnZXRSZWN0LmJvdHRvbSAtIHRhcmdldFJlY3QudG9wKSAvIDIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gdGFyZ2V0O1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG4vKiBhIGJ1aWxkIHRhc2sgd2lsbCBhZGQgXCJyZXR1cm4gJDtcIiBoZXJlICovXHJcbnJldHVybiAkO1xyXG5cclxufSkpO1xyXG4iLCIvKipcclxuICoganF1ZXJ5Lm1hc2suanNcclxuICogQHZlcnNpb246IHYxLjE0LjEyXHJcbiAqIEBhdXRob3I6IElnb3IgRXNjb2JhclxyXG4gKlxyXG4gKiBDcmVhdGVkIGJ5IElnb3IgRXNjb2JhciBvbiAyMDEyLTAzLTEwLiBQbGVhc2UgcmVwb3J0IGFueSBidWcgYXQgaHR0cDovL2Jsb2cuaWdvcmVzY29iYXIuY29tXHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBJZ29yIEVzY29iYXIgaHR0cDovL2Jsb2cuaWdvcmVzY29iYXIuY29tXHJcbiAqXHJcbiAqIFRoZSBNSVQgTGljZW5zZSAoaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHApXHJcbiAqXHJcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uXHJcbiAqIG9idGFpbmluZyBhIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uXHJcbiAqIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dFxyXG4gKiByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSxcclxuICogY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlXHJcbiAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nXHJcbiAqIGNvbmRpdGlvbnM6XHJcbiAqXHJcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXHJcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxyXG4gKlxyXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELFxyXG4gKiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVNcclxuICogT0YgTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcclxuICogTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFRcclxuICogSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksXHJcbiAqIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lOR1xyXG4gKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SXHJcbiAqIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cclxuICovXHJcblxyXG4vKiBqc2hpbnQgbGF4YnJlYWs6IHRydWUgKi9cclxuLyoganNoaW50IG1heGNvbXBsZXhpdHk6MTcgKi9cclxuLyogZ2xvYmFsIGRlZmluZSAqL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuLy8gVU1EIChVbml2ZXJzYWwgTW9kdWxlIERlZmluaXRpb24pIHBhdHRlcm5zIGZvciBKYXZhU2NyaXB0IG1vZHVsZXMgdGhhdCB3b3JrIGV2ZXJ5d2hlcmUuXHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS91bWRqcy91bWQvYmxvYi9tYXN0ZXIvanF1ZXJ5UGx1Z2luQ29tbW9uanMuanNcclxuKGZ1bmN0aW9uIChmYWN0b3J5LCBqUXVlcnksIFplcHRvKSB7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmFjdG9yeShqUXVlcnkgfHwgWmVwdG8pO1xyXG4gICAgfVxyXG5cclxufShmdW5jdGlvbiAoJCkge1xyXG5cclxuICAgIHZhciBNYXNrID0gZnVuY3Rpb24gKGVsLCBtYXNrLCBvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIHZhciBwID0ge1xyXG4gICAgICAgICAgICBpbnZhbGlkOiBbXSxcclxuICAgICAgICAgICAgZ2V0Q2FyZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3RybCA9IGVsLmdldCgwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZFNlbCA9IGRvY3VtZW50LnNlbGVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY1NlbFN0YXJ0ID0gY3RybC5zZWxlY3Rpb25TdGFydDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSUUgU3VwcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkU2VsICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ01TSUUgMTAnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsID0gZFNlbC5jcmVhdGVSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWwubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCAtcC52YWwoKS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBzZWwudGV4dC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggc3VwcG9ydFxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNTZWxTdGFydCB8fCBjU2VsU3RhcnQgPT09ICcwJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3MgPSBjU2VsU3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0Q2FyZXQ6IGZ1bmN0aW9uKHBvcykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWwuaXMoJzpmb2N1cycpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSwgY3RybCA9IGVsLmdldCgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3gsIFdlYktpdCwgZXRjLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0cmwuc2V0U2VsZWN0aW9uUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0U2VsZWN0aW9uUmFuZ2UocG9zLCBwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBJRVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSBjdHJsLmNyZWF0ZVRleHRSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCBwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBwb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBldmVudHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZWxcclxuICAgICAgICAgICAgICAgIC5vbigna2V5ZG93bi5tYXNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmRhdGEoJ21hc2sta2V5Y29kZScsIGUua2V5Q29kZSB8fCBlLndoaWNoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbC5kYXRhKCdtYXNrLXByZXZpdXMtdmFsdWUnLCBlbC52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuZGF0YSgnbWFzay1wcmV2aXVzLWNhcmV0LXBvcycsIHAuZ2V0Q2FyZXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5tYXNrRGlnaXRQb3NNYXBPbGQgPSBwLm1hc2tEaWdpdFBvc01hcDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oJC5qTWFza0dsb2JhbHMudXNlSW5wdXQgPyAnaW5wdXQubWFzaycgOiAna2V5dXAubWFzaycsIHAuYmVoYXZpb3VyKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdwYXN0ZS5tYXNrIGRyb3AubWFzaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLmtleWRvd24oKS5rZXl1cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKCdjaGFuZ2UubWFzaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuZGF0YSgnY2hhbmdlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbignYmx1ci5tYXNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IHAudmFsKCkgJiYgIWVsLmRhdGEoJ2NoYW5nZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuZGF0YSgnY2hhbmdlZCcsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyBpdCdzIHZlcnkgaW1wb3J0YW50IHRoYXQgdGhpcyBjYWxsYmFjayByZW1haW5zIGluIHRoaXMgcG9zaXRpb25cclxuICAgICAgICAgICAgICAgIC8vIG90aGVyd2hpc2Ugb2xkVmFsdWUgaXQncyBnb2luZyB0byB3b3JrIGJ1Z2d5XHJcbiAgICAgICAgICAgICAgICAub24oJ2JsdXIubWFzaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gcC52YWwoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyBzZWxlY3QgYWxsIHRleHQgb24gZm9jdXNcclxuICAgICAgICAgICAgICAgIC5vbignZm9jdXMubWFzaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2VsZWN0T25Gb2N1cyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5zZWxlY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIHZhbHVlIGlmIGl0IG5vdCBjb21wbGV0ZSB0aGUgbWFza1xyXG4gICAgICAgICAgICAgICAgLm9uKCdmb2N1c291dC5tYXNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2xlYXJJZk5vdE1hdGNoICYmICFyZWdleE1hc2sudGVzdChwLnZhbCgpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHAudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRSZWdleE1hc2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hc2tDaHVua3MgPSBbXSwgdHJhbnNsYXRpb24sIHBhdHRlcm4sIG9wdGlvbmFsLCByZWN1cnNpdmUsIG9SZWN1cnNpdmUsIHI7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXNrLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb24gPSBqTWFzay50cmFuc2xhdGlvblttYXNrLmNoYXJBdChpKV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2xhdGlvbikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IHRyYW5zbGF0aW9uLnBhdHRlcm4udG9TdHJpbmcoKS5yZXBsYWNlKC8uezF9JHxeLnsxfS9nLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsID0gdHJhbnNsYXRpb24ub3B0aW9uYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZSA9IHRyYW5zbGF0aW9uLnJlY3Vyc2l2ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWN1cnNpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tDaHVua3MucHVzaChtYXNrLmNoYXJBdChpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvUmVjdXJzaXZlID0ge2RpZ2l0OiBtYXNrLmNoYXJBdChpKSwgcGF0dGVybjogcGF0dGVybn07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrQ2h1bmtzLnB1c2goIW9wdGlvbmFsICYmICFyZWN1cnNpdmUgPyBwYXR0ZXJuIDogKHBhdHRlcm4gKyAnPycpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrQ2h1bmtzLnB1c2gobWFzay5jaGFyQXQoaSkucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByID0gbWFza0NodW5rcy5qb2luKCcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob1JlY3Vyc2l2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHIgPSByLnJlcGxhY2UobmV3IFJlZ0V4cCgnKCcgKyBvUmVjdXJzaXZlLmRpZ2l0ICsgJyguKicgKyBvUmVjdXJzaXZlLmRpZ2l0ICsgJyk/KScpLCAnKCQxKT8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UobmV3IFJlZ0V4cChvUmVjdXJzaXZlLmRpZ2l0LCAnZycpLCBvUmVjdXJzaXZlLnBhdHRlcm4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZXN0cm95RXZlbnRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGVsLm9mZihbJ2lucHV0JywgJ2tleWRvd24nLCAna2V5dXAnLCAncGFzdGUnLCAnZHJvcCcsICdibHVyJywgJ2ZvY3Vzb3V0JywgJyddLmpvaW4oJy5tYXNrICcpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdmFsOiBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGVsLmlzKCdpbnB1dCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IGlzSW5wdXQgPyAndmFsJyA6ICd0ZXh0JyxcclxuICAgICAgICAgICAgICAgICAgICByO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbFttZXRob2RdKCkgIT09IHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxbbWV0aG9kXSh2KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgciA9IGVsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByID0gZWxbbWV0aG9kXSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxjdWxhdGVDYXJldFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvbGRWYWwgPSBlbC5kYXRhKCdtYXNrLXByZXZpdXMtdmFsdWUnKSB8fCAnJyxcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWwgPSBwLmdldE1hc2tlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3ID0gcC5nZXRDYXJldCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9sZFZhbCAhPT0gbmV3VmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhcmV0UG9zT2xkID0gZWwuZGF0YSgnbWFzay1wcmV2aXVzLWNhcmV0LXBvcycpIHx8IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbEwgPSBuZXdWYWwubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWxMID0gb2xkVmFsLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0FmdGVyQ2FyZXQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGwgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGxPbGQgPSAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gY2FyZXRQb3NOZXc7IGkgPCBuZXdWYWxMOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLm1hc2tEaWdpdFBvc01hcFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0FmdGVyQ2FyZXQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IGNhcmV0UG9zTmV3IC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLm1hc2tEaWdpdFBvc01hcFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBjYXJldFBvc05ldyAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLm1hc2tEaWdpdFBvc01hcFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IGNhcmV0UG9zT2xkIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAubWFza0RpZ2l0UG9zTWFwT2xkW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGxPbGQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGN1cnNvciBpcyBhdCB0aGUgZW5kIGtlZXAgaXQgdGhlcmVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FyZXRQb3NOZXcgPiBvbGRWYWxMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvc05ldyA9IG5ld1ZhbEwgKiAxMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNhcmV0UG9zT2xkID49IGNhcmV0UG9zTmV3ICYmIGNhcmV0UG9zT2xkICE9PSBvbGRWYWxMKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcC5tYXNrRGlnaXRQb3NNYXBPbGRbY2FyZXRQb3NOZXddKSAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYXJldFBvcyA9IGNhcmV0UG9zTmV3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3IC09IG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbE9sZCAtIG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvc05ldyAtPSBtYXNrRGlnaXRzQmVmb3JlQ2FyZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAubWFza0RpZ2l0UG9zTWFwW2NhcmV0UG9zTmV3XSkgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3ID0gY2FyZXRQb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNhcmV0UG9zTmV3ID4gY2FyZXRQb3NPbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgKz0gbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsIC0gbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsT2xkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvc05ldyArPSBtYXNrRGlnaXRzQWZ0ZXJDYXJldDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FyZXRQb3NOZXc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJlaGF2aW91cjogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xyXG4gICAgICAgICAgICAgICAgcC5pbnZhbGlkID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGtleUNvZGUgPSBlbC5kYXRhKCdtYXNrLWtleWNvZGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KGtleUNvZGUsIGpNYXNrLmJ5UGFzc0tleXMpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdWYWwgICA9IHAuZ2V0TWFza2VkKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zID0gcC5nZXRDYXJldCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIGEgY29tcGVuc2F0aW9uIHRvIGRldmljZXMvYnJvd3NlcnMgdGhhdCBkb24ndCBjb21wZW5zYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FyZXQgcG9zaXRpb25pbmcgdGhlIHJpZ2h0IHdheVxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBwLnNldENhcmV0KHAuY2FsY3VsYXRlQ2FyZXRQb3NpdGlvbigpKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHAudmFsKG5ld1ZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcC5zZXRDYXJldChjYXJldFBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAuY2FsbGJhY2tzKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXRNYXNrZWQ6IGZ1bmN0aW9uKHNraXBNYXNrQ2hhcnMsIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ1ZiA9IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsID09PSB1bmRlZmluZWQgPyBwLnZhbCgpIDogdmFsICsgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbSA9IDAsIG1hc2tMZW4gPSBtYXNrLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICB2ID0gMCwgdmFsTGVuID0gdmFsdWUubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IDEsIGFkZE1ldGhvZCA9ICdwdXNoJyxcclxuICAgICAgICAgICAgICAgICAgICByZXNldFBvcyA9IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdENvdW50ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRQb3NBcnIgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TWFza0NoYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2s7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZE1ldGhvZCA9ICd1bnNoaWZ0JztcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAtMTtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TWFza0NoYXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG0gPSBtYXNrTGVuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICB2ID0gdmFsTGVuIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjaGVjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0gPiAtMSAmJiB2ID4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE1hc2tDaGFyID0gbWFza0xlbiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtIDwgbWFza0xlbiAmJiB2IDwgdmFsTGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RVbnRyYW5zbGF0ZWRNYXNrQ2hhcjtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChjaGVjaygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hc2tEaWdpdCA9IG1hc2suY2hhckF0KG0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxEaWdpdCA9IHZhbHVlLmNoYXJBdCh2KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb24gPSBqTWFzay50cmFuc2xhdGlvblttYXNrRGlnaXRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbERpZ2l0Lm1hdGNoKHRyYW5zbGF0aW9uLnBhdHRlcm4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZbYWRkTWV0aG9kXSh2YWxEaWdpdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zbGF0aW9uLnJlY3Vyc2l2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNldFBvcyA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRQb3MgPSBtO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobSA9PT0gbGFzdE1hc2tDaGFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSByZXNldFBvcyAtIG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0TWFza0NoYXIgPT09IHJlc2V0UG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gLT0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbERpZ2l0ID09PSBsYXN0VW50cmFuc2xhdGVkTWFza0NoYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoZWQgdGhlIGxhc3QgdW50cmFuc2xhdGVkIChyYXcpIG1hc2sgY2hhcmFjdGVyIHRoYXQgd2UgZW5jb3VudGVyZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpa2VseSBhbiBpbnNlcnQgb2Zmc2V0IHRoZSBtYXNrIGNoYXJhY3RlciBmcm9tIHRoZSBsYXN0IGVudHJ5OyBmYWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aHJvdWdoIGFuZCBvbmx5IGluY3JlbWVudCB2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRDb3VudC0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFVudHJhbnNsYXRlZE1hc2tDaGFyID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uLm9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtICs9IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgLT0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zbGF0aW9uLmZhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZbYWRkTWV0aG9kXSh0cmFuc2xhdGlvbi5mYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtICs9IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgLT0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHAuaW52YWxpZC5wdXNoKHtwOiB2LCB2OiB2YWxEaWdpdCwgZTogdHJhbnNsYXRpb24ucGF0dGVybn0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2tpcE1hc2tDaGFycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmW2FkZE1ldGhvZF0obWFza0RpZ2l0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbERpZ2l0ID09PSBtYXNrRGlnaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdFBvc0Fyci5wdXNoKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdiArPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VW50cmFuc2xhdGVkTWFza0NoYXIgPSBtYXNrRGlnaXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRQb3NBcnIucHVzaCh2ICsgbWFza0RpZ2l0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0Q291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbSArPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsYXN0TWFza0NoYXJEaWdpdCA9IG1hc2suY2hhckF0KGxhc3RNYXNrQ2hhcik7XHJcbiAgICAgICAgICAgICAgICBpZiAobWFza0xlbiA9PT0gdmFsTGVuICsgMSAmJiAhak1hc2sudHJhbnNsYXRpb25bbGFzdE1hc2tDaGFyRGlnaXRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmLnB1c2gobGFzdE1hc2tDaGFyRGlnaXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBuZXdWYWwgPSBidWYuam9pbignJyk7XHJcbiAgICAgICAgICAgICAgICBwLm1hcE1hc2tkaWdpdFBvc2l0aW9ucyhuZXdWYWwsIG1hc2tEaWdpdFBvc0FyciwgdmFsTGVuKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdWYWw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1hcE1hc2tkaWdpdFBvc2l0aW9uczogZnVuY3Rpb24obmV3VmFsLCBtYXNrRGlnaXRQb3NBcnIsIHZhbExlbikge1xyXG4gICAgICAgICAgICAgIHZhciBtYXNrRGlmZiA9IG9wdGlvbnMucmV2ZXJzZSA/IG5ld1ZhbC5sZW5ndGggLSB2YWxMZW4gOiAwO1xyXG4gICAgICAgICAgICAgIHAubWFza0RpZ2l0UG9zTWFwID0ge307XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXNrRGlnaXRQb3NBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHAubWFza0RpZ2l0UG9zTWFwW21hc2tEaWdpdFBvc0FycltpXSArIG1hc2tEaWZmXSA9IDE7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjYWxsYmFja3M6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gcC52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdmFsICE9PSBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0QXJncyA9IFt2YWwsIGUsIGVsLCBvcHRpb25zXSxcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uKG5hbWUsIGNyaXRlcmlhLCBhcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc1tuYW1lXSA9PT0gJ2Z1bmN0aW9uJyAmJiBjcml0ZXJpYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1tuYW1lXS5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soJ29uQ2hhbmdlJywgY2hhbmdlZCA9PT0gdHJ1ZSwgZGVmYXVsdEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soJ29uS2V5UHJlc3MnLCBjaGFuZ2VkID09PSB0cnVlLCBkZWZhdWx0QXJncyk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygnb25Db21wbGV0ZScsIHZhbC5sZW5ndGggPT09IG1hc2subGVuZ3RoLCBkZWZhdWx0QXJncyk7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygnb25JbnZhbGlkJywgcC5pbnZhbGlkLmxlbmd0aCA+IDAsIFt2YWwsIGUsIGVsLCBwLmludmFsaWQsIG9wdGlvbnNdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGVsID0gJChlbCk7XHJcbiAgICAgICAgdmFyIGpNYXNrID0gdGhpcywgb2xkVmFsdWUgPSBwLnZhbCgpLCByZWdleE1hc2s7XHJcblxyXG4gICAgICAgIG1hc2sgPSB0eXBlb2YgbWFzayA9PT0gJ2Z1bmN0aW9uJyA/IG1hc2socC52YWwoKSwgdW5kZWZpbmVkLCBlbCwgIG9wdGlvbnMpIDogbWFzaztcclxuXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZHNcclxuICAgICAgICBqTWFzay5tYXNrID0gbWFzaztcclxuICAgICAgICBqTWFzay5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICBqTWFzay5yZW1vdmUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGNhcmV0ID0gcC5nZXRDYXJldCgpO1xyXG4gICAgICAgICAgICBwLmRlc3Ryb3lFdmVudHMoKTtcclxuICAgICAgICAgICAgcC52YWwoak1hc2suZ2V0Q2xlYW5WYWwoKSk7XHJcbiAgICAgICAgICAgIHAuc2V0Q2FyZXQoY2FyZXQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZWw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gZ2V0IHZhbHVlIHdpdGhvdXQgbWFza1xyXG4gICAgICAgIGpNYXNrLmdldENsZWFuVmFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIHAuZ2V0TWFza2VkKHRydWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGdldCBtYXNrZWQgdmFsdWUgd2l0aG91dCB0aGUgdmFsdWUgYmVpbmcgaW4gdGhlIGlucHV0IG9yIGVsZW1lbnRcclxuICAgICAgICBqTWFzay5nZXRNYXNrZWRWYWwgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICByZXR1cm4gcC5nZXRNYXNrZWQoZmFsc2UsIHZhbCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICBqTWFzay5pbml0ID0gZnVuY3Rpb24ob25seU1hc2spIHtcclxuICAgICAgICAgICAgb25seU1hc2sgPSBvbmx5TWFzayB8fCBmYWxzZTtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICBqTWFzay5jbGVhcklmTm90TWF0Y2ggID0gJC5qTWFza0dsb2JhbHMuY2xlYXJJZk5vdE1hdGNoO1xyXG4gICAgICAgICAgICBqTWFzay5ieVBhc3NLZXlzICAgICAgID0gJC5qTWFza0dsb2JhbHMuYnlQYXNzS2V5cztcclxuICAgICAgICAgICAgak1hc2sudHJhbnNsYXRpb24gICAgICA9ICQuZXh0ZW5kKHt9LCAkLmpNYXNrR2xvYmFscy50cmFuc2xhdGlvbiwgb3B0aW9ucy50cmFuc2xhdGlvbik7XHJcblxyXG4gICAgICAgICAgICBqTWFzayA9ICQuZXh0ZW5kKHRydWUsIHt9LCBqTWFzaywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICByZWdleE1hc2sgPSBwLmdldFJlZ2V4TWFzaygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9ubHlNYXNrKSB7XHJcbiAgICAgICAgICAgICAgICBwLmV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgcC52YWwocC5nZXRNYXNrZWQoKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmF0dHIoJ3BsYWNlaG9sZGVyJyAsIG9wdGlvbnMucGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5LCBvdGhlcndpc2UgaWYgdGhlIHVzZXIgc3VibWl0IHRoZSBmb3JtXHJcbiAgICAgICAgICAgICAgICAvLyBhbmQgdGhlbiBwcmVzcyB0aGUgXCJiYWNrXCIgYnV0dG9uLCB0aGUgYXV0b2NvbXBsZXRlIHdpbGwgZXJhc2VcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBkYXRhLiBXb3JrcyBmaW5lIG9uIElFOSssIEZGLCBPcGVyYSwgU2FmYXJpLlxyXG4gICAgICAgICAgICAgICAgaWYgKGVsLmRhdGEoJ21hc2snKSkge1xyXG4gICAgICAgICAgICAgICAgICBlbC5hdHRyKCdhdXRvY29tcGxldGUnLCAnb2ZmJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGV0ZWN0IGlmIGlzIG5lY2Vzc2FyeSBsZXQgdGhlIHVzZXIgdHlwZSBmcmVlbHkuXHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgaXMgYSBsb3QgZmFzdGVyIHRoYW4gZm9yRWFjaC5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXhsZW5ndGggPSB0cnVlOyBpIDwgbWFzay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGlvbiA9IGpNYXNrLnRyYW5zbGF0aW9uW21hc2suY2hhckF0KGkpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24gJiYgdHJhbnNsYXRpb24ucmVjdXJzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGxlbmd0aCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1heGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmF0dHIoJ21heGxlbmd0aCcsIG1hc2subGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwLmRlc3Ryb3lFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIHAuZXZlbnRzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNhcmV0ID0gcC5nZXRDYXJldCgpO1xyXG4gICAgICAgICAgICAgICAgcC52YWwocC5nZXRNYXNrZWQoKSk7XHJcbiAgICAgICAgICAgICAgICBwLnNldENhcmV0KGNhcmV0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGpNYXNrLmluaXQoIWVsLmlzKCdpbnB1dCcpKTtcclxuICAgIH07XHJcblxyXG4gICAgJC5tYXNrV2F0Y2hlcnMgPSB7fTtcclxuICAgIHZhciBIVE1MQXR0cmlidXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5wdXQgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICBvcHRpb25zID0ge30sXHJcbiAgICAgICAgICAgIHByZWZpeCA9ICdkYXRhLW1hc2stJyxcclxuICAgICAgICAgICAgbWFzayA9IGlucHV0LmF0dHIoJ2RhdGEtbWFzaycpO1xyXG5cclxuICAgICAgICBpZiAoaW5wdXQuYXR0cihwcmVmaXggKyAncmV2ZXJzZScpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaW5wdXQuYXR0cihwcmVmaXggKyAnY2xlYXJpZm5vdG1hdGNoJykpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5jbGVhcklmTm90TWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlucHV0LmF0dHIocHJlZml4ICsgJ3NlbGVjdG9uZm9jdXMnKSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgb3B0aW9ucy5zZWxlY3RPbkZvY3VzID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChub3RTYW1lTWFza09iamVjdChpbnB1dCwgbWFzaywgb3B0aW9ucykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlucHV0LmRhdGEoJ21hc2snLCBuZXcgTWFzayh0aGlzLCBtYXNrLCBvcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG5vdFNhbWVNYXNrT2JqZWN0ID0gZnVuY3Rpb24oZmllbGQsIG1hc2ssIG9wdGlvbnMpIHtcclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICB2YXIgbWFza09iamVjdCA9ICQoZmllbGQpLmRhdGEoJ21hc2snKSxcclxuICAgICAgICAgICAgc3RyaW5naWZ5ID0gSlNPTi5zdHJpbmdpZnksXHJcbiAgICAgICAgICAgIHZhbHVlID0gJChmaWVsZCkudmFsKCkgfHwgJChmaWVsZCkudGV4dCgpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWFzayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgbWFzayA9IG1hc2sodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgbWFza09iamVjdCAhPT0gJ29iamVjdCcgfHwgc3RyaW5naWZ5KG1hc2tPYmplY3Qub3B0aW9ucykgIT09IHN0cmluZ2lmeShvcHRpb25zKSB8fCBtYXNrT2JqZWN0Lm1hc2sgIT09IG1hc2s7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge31cclxuICAgIH0sXHJcbiAgICBldmVudFN1cHBvcnRlZCA9IGZ1bmN0aW9uKGV2ZW50TmFtZSkge1xyXG4gICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCBpc1N1cHBvcnRlZDtcclxuXHJcbiAgICAgICAgZXZlbnROYW1lID0gJ29uJyArIGV2ZW50TmFtZTtcclxuICAgICAgICBpc1N1cHBvcnRlZCA9IChldmVudE5hbWUgaW4gZWwpO1xyXG5cclxuICAgICAgICBpZiAoICFpc1N1cHBvcnRlZCApIHtcclxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKGV2ZW50TmFtZSwgJ3JldHVybjsnKTtcclxuICAgICAgICAgICAgaXNTdXBwb3J0ZWQgPSB0eXBlb2YgZWxbZXZlbnROYW1lXSA9PT0gJ2Z1bmN0aW9uJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWwgPSBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4gaXNTdXBwb3J0ZWQ7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4ubWFzayA9IGZ1bmN0aW9uKG1hc2ssIG9wdGlvbnMpIHtcclxuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICB2YXIgc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yLFxyXG4gICAgICAgICAgICBnbG9iYWxzID0gJC5qTWFza0dsb2JhbHMsXHJcbiAgICAgICAgICAgIGludGVydmFsID0gZ2xvYmFscy53YXRjaEludGVydmFsLFxyXG4gICAgICAgICAgICB3YXRjaElucHV0cyA9IG9wdGlvbnMud2F0Y2hJbnB1dHMgfHwgZ2xvYmFscy53YXRjaElucHV0cyxcclxuICAgICAgICAgICAgbWFza0Z1bmN0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobm90U2FtZU1hc2tPYmplY3QodGhpcywgbWFzaywgb3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5kYXRhKCdtYXNrJywgbmV3IE1hc2sodGhpcywgbWFzaywgb3B0aW9ucykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAkKHRoaXMpLmVhY2gobWFza0Z1bmN0aW9uKTtcclxuXHJcbiAgICAgICAgaWYgKHNlbGVjdG9yICYmIHNlbGVjdG9yICE9PSAnJyAmJiB3YXRjaElucHV0cykge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKCQubWFza1dhdGNoZXJzW3NlbGVjdG9yXSk7XHJcbiAgICAgICAgICAgICQubWFza1dhdGNoZXJzW3NlbGVjdG9yXSA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKHNlbGVjdG9yKS5lYWNoKG1hc2tGdW5jdGlvbik7XHJcbiAgICAgICAgICAgIH0sIGludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4ubWFza2VkID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgnbWFzaycpLmdldE1hc2tlZFZhbCh2YWwpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmZuLnVubWFzayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoJC5tYXNrV2F0Y2hlcnNbdGhpcy5zZWxlY3Rvcl0pO1xyXG4gICAgICAgIGRlbGV0ZSAkLm1hc2tXYXRjaGVyc1t0aGlzLnNlbGVjdG9yXTtcclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YU1hc2sgPSAkKHRoaXMpLmRhdGEoJ21hc2snKTtcclxuICAgICAgICAgICAgaWYgKGRhdGFNYXNrKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhTWFzay5yZW1vdmUoKS5yZW1vdmVEYXRhKCdtYXNrJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5jbGVhblZhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEoJ21hc2snKS5nZXRDbGVhblZhbCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmFwcGx5RGF0YU1hc2sgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xyXG4gICAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IgfHwgJC5qTWFza0dsb2JhbHMubWFza0VsZW1lbnRzO1xyXG4gICAgICAgIHZhciAkc2VsZWN0b3IgPSAoc2VsZWN0b3IgaW5zdGFuY2VvZiAkKSA/IHNlbGVjdG9yIDogJChzZWxlY3Rvcik7XHJcbiAgICAgICAgJHNlbGVjdG9yLmZpbHRlcigkLmpNYXNrR2xvYmFscy5kYXRhTWFza0F0dHIpLmVhY2goSFRNTEF0dHJpYnV0ZXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZ2xvYmFscyA9IHtcclxuICAgICAgICBtYXNrRWxlbWVudHM6ICdpbnB1dCx0ZCxzcGFuLGRpdicsXHJcbiAgICAgICAgZGF0YU1hc2tBdHRyOiAnKltkYXRhLW1hc2tdJyxcclxuICAgICAgICBkYXRhTWFzazogdHJ1ZSxcclxuICAgICAgICB3YXRjaEludGVydmFsOiAzMDAsXHJcbiAgICAgICAgd2F0Y2hJbnB1dHM6IHRydWUsXHJcbiAgICAgICAgLy8gb2xkIHZlcnNpb25zIG9mIGNocm9tZSBkb250IHdvcmsgZ3JlYXQgd2l0aCBpbnB1dCBldmVudFxyXG4gICAgICAgIHVzZUlucHV0OiAhL0Nocm9tZVxcL1syLTRdWzAtOV18U2Ftc3VuZ0Jyb3dzZXIvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpICYmIGV2ZW50U3VwcG9ydGVkKCdpbnB1dCcpLFxyXG4gICAgICAgIHdhdGNoRGF0YU1hc2s6IGZhbHNlLFxyXG4gICAgICAgIGJ5UGFzc0tleXM6IFs5LCAxNiwgMTcsIDE4LCAzNiwgMzcsIDM4LCAzOSwgNDAsIDkxXSxcclxuICAgICAgICB0cmFuc2xhdGlvbjoge1xyXG4gICAgICAgICAgICAnMCc6IHtwYXR0ZXJuOiAvXFxkL30sXHJcbiAgICAgICAgICAgICc5Jzoge3BhdHRlcm46IC9cXGQvLCBvcHRpb25hbDogdHJ1ZX0sXHJcbiAgICAgICAgICAgICcjJzoge3BhdHRlcm46IC9cXGQvLCByZWN1cnNpdmU6IHRydWV9LFxyXG4gICAgICAgICAgICAnQSc6IHtwYXR0ZXJuOiAvW2EtekEtWjAtOV0vfSxcclxuICAgICAgICAgICAgJ1MnOiB7cGF0dGVybjogL1thLXpBLVpdL31cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICQuak1hc2tHbG9iYWxzID0gJC5qTWFza0dsb2JhbHMgfHwge307XHJcbiAgICBnbG9iYWxzID0gJC5qTWFza0dsb2JhbHMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZ2xvYmFscywgJC5qTWFza0dsb2JhbHMpO1xyXG5cclxuICAgIC8vIGxvb2tpbmcgZm9yIGlucHV0cyB3aXRoIGRhdGEtbWFzayBhdHRyaWJ1dGVcclxuICAgIGlmIChnbG9iYWxzLmRhdGFNYXNrKSB7XHJcbiAgICAgICAgJC5hcHBseURhdGFNYXNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYgKCQuak1hc2tHbG9iYWxzLndhdGNoRGF0YU1hc2spIHtcclxuICAgICAgICAgICAgJC5hcHBseURhdGFNYXNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgZ2xvYmFscy53YXRjaEludGVydmFsKTtcclxufSwgd2luZG93LmpRdWVyeSwgd2luZG93LlplcHRvKSk7XHJcbiIsIi8qIVxyXG4gKiBqUXVlcnkgTW91c2V3aGVlbCAzLjEuMTJcclxuICpcclxuICogQ29weXJpZ2h0IDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuICovXHJcblxyXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xyXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIC8vIE5vZGUvQ29tbW9uSlMgc3R5bGUgZm9yIEJyb3dzZXJpZnlcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xyXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcclxuICAgIH1cclxufShmdW5jdGlvbiAoJCkge1xyXG5cclxuICAgIHZhciB0b0ZpeCAgPSBbJ3doZWVsJywgJ21vdXNld2hlZWwnLCAnRE9NTW91c2VTY3JvbGwnLCAnTW96TW91c2VQaXhlbFNjcm9sbCddLFxyXG4gICAgICAgIHRvQmluZCA9ICggJ29ud2hlZWwnIGluIGRvY3VtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+PSA5ICkgP1xyXG4gICAgICAgICAgICAgICAgICAgIFsnd2hlZWwnXSA6IFsnbW91c2V3aGVlbCcsICdEb21Nb3VzZVNjcm9sbCcsICdNb3pNb3VzZVBpeGVsU2Nyb2xsJ10sXHJcbiAgICAgICAgc2xpY2UgID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxyXG4gICAgICAgIG51bGxMb3dlc3REZWx0YVRpbWVvdXQsIGxvd2VzdERlbHRhO1xyXG5cclxuICAgIGlmICggJC5ldmVudC5maXhIb29rcyApIHtcclxuICAgICAgICBmb3IgKCB2YXIgaSA9IHRvRml4Lmxlbmd0aDsgaTsgKSB7XHJcbiAgICAgICAgICAgICQuZXZlbnQuZml4SG9va3NbIHRvRml4Wy0taV0gXSA9ICQuZXZlbnQubW91c2VIb29rcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHNwZWNpYWwgPSAkLmV2ZW50LnNwZWNpYWwubW91c2V3aGVlbCA9IHtcclxuICAgICAgICB2ZXJzaW9uOiAnMy4xLjEyJyxcclxuXHJcbiAgICAgICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciApIHtcclxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gdG9CaW5kLmxlbmd0aDsgaTsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCB0b0JpbmRbLS1pXSwgaGFuZGxlciwgZmFsc2UgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25tb3VzZXdoZWVsID0gaGFuZGxlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgbGluZSBoZWlnaHQgYW5kIHBhZ2UgaGVpZ2h0IGZvciB0aGlzIHBhcnRpY3VsYXIgZWxlbWVudFxyXG4gICAgICAgICAgICAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtbGluZS1oZWlnaHQnLCBzcGVjaWFsLmdldExpbmVIZWlnaHQodGhpcykpO1xyXG4gICAgICAgICAgICAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnLCBzcGVjaWFsLmdldFBhZ2VIZWlnaHQodGhpcykpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IHRvQmluZC5sZW5ndGg7IGk7ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lciggdG9CaW5kWy0taV0sIGhhbmRsZXIsIGZhbHNlICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9ubW91c2V3aGVlbCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGRhdGEgd2UgYWRkZWQgdG8gdGhlIGVsZW1lbnRcclxuICAgICAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMsICdtb3VzZXdoZWVsLWxpbmUtaGVpZ2h0Jyk7XHJcbiAgICAgICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLCAnbW91c2V3aGVlbC1wYWdlLWhlaWdodCcpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldExpbmVIZWlnaHQ6IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgICAgICAgICAgdmFyICRlbGVtID0gJChlbGVtKSxcclxuICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkZWxlbVsnb2Zmc2V0UGFyZW50JyBpbiAkLmZuID8gJ29mZnNldFBhcmVudCcgOiAncGFyZW50J10oKTtcclxuICAgICAgICAgICAgaWYgKCEkcGFyZW50Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgJHBhcmVudCA9ICQoJ2JvZHknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoJHBhcmVudC5jc3MoJ2ZvbnRTaXplJyksIDEwKSB8fCBwYXJzZUludCgkZWxlbS5jc3MoJ2ZvbnRTaXplJyksIDEwKSB8fCAxNjtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRQYWdlSGVpZ2h0OiBmdW5jdGlvbihlbGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkKGVsZW0pLmhlaWdodCgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgIGFkanVzdE9sZERlbHRhczogdHJ1ZSwgLy8gc2VlIHNob3VsZEFkanVzdE9sZERlbHRhcygpIGJlbG93XHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZU9mZnNldDogdHJ1ZSAgLy8gY2FsbHMgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZvciBlYWNoIGV2ZW50XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkLmZuLmV4dGVuZCh7XHJcbiAgICAgICAgbW91c2V3aGVlbDogZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZuID8gdGhpcy5iaW5kKCdtb3VzZXdoZWVsJywgZm4pIDogdGhpcy50cmlnZ2VyKCdtb3VzZXdoZWVsJyk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgdW5tb3VzZXdoZWVsOiBmdW5jdGlvbihmbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bmJpbmQoJ21vdXNld2hlZWwnLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZXIoZXZlbnQpIHtcclxuICAgICAgICB2YXIgb3JnRXZlbnQgICA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudCxcclxuICAgICAgICAgICAgYXJncyAgICAgICA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSxcclxuICAgICAgICAgICAgZGVsdGEgICAgICA9IDAsXHJcbiAgICAgICAgICAgIGRlbHRhWCAgICAgPSAwLFxyXG4gICAgICAgICAgICBkZWx0YVkgICAgID0gMCxcclxuICAgICAgICAgICAgYWJzRGVsdGEgICA9IDAsXHJcbiAgICAgICAgICAgIG9mZnNldFggICAgPSAwLFxyXG4gICAgICAgICAgICBvZmZzZXRZICAgID0gMDtcclxuICAgICAgICBldmVudCA9ICQuZXZlbnQuZml4KG9yZ0V2ZW50KTtcclxuICAgICAgICBldmVudC50eXBlID0gJ21vdXNld2hlZWwnO1xyXG5cclxuICAgICAgICAvLyBPbGQgc2Nob29sIHNjcm9sbHdoZWVsIGRlbHRhXHJcbiAgICAgICAgaWYgKCAnZGV0YWlsJyAgICAgIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC5kZXRhaWwgKiAtMTsgICAgICB9XHJcbiAgICAgICAgaWYgKCAnd2hlZWxEZWx0YScgIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC53aGVlbERlbHRhOyAgICAgICB9XHJcbiAgICAgICAgaWYgKCAnd2hlZWxEZWx0YVknIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC53aGVlbERlbHRhWTsgICAgICB9XHJcbiAgICAgICAgaWYgKCAnd2hlZWxEZWx0YVgnIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVggPSBvcmdFdmVudC53aGVlbERlbHRhWCAqIC0xOyB9XHJcblxyXG4gICAgICAgIC8vIEZpcmVmb3ggPCAxNyBob3Jpem9udGFsIHNjcm9sbGluZyByZWxhdGVkIHRvIERPTU1vdXNlU2Nyb2xsIGV2ZW50XHJcbiAgICAgICAgaWYgKCAnYXhpcycgaW4gb3JnRXZlbnQgJiYgb3JnRXZlbnQuYXhpcyA9PT0gb3JnRXZlbnQuSE9SSVpPTlRBTF9BWElTICkge1xyXG4gICAgICAgICAgICBkZWx0YVggPSBkZWx0YVkgKiAtMTtcclxuICAgICAgICAgICAgZGVsdGFZID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNldCBkZWx0YSB0byBiZSBkZWx0YVkgb3IgZGVsdGFYIGlmIGRlbHRhWSBpcyAwIGZvciBiYWNrd2FyZHMgY29tcGF0YWJpbGl0aXlcclxuICAgICAgICBkZWx0YSA9IGRlbHRhWSA9PT0gMCA/IGRlbHRhWCA6IGRlbHRhWTtcclxuXHJcbiAgICAgICAgLy8gTmV3IHNjaG9vbCB3aGVlbCBkZWx0YSAod2hlZWwgZXZlbnQpXHJcbiAgICAgICAgaWYgKCAnZGVsdGFZJyBpbiBvcmdFdmVudCApIHtcclxuICAgICAgICAgICAgZGVsdGFZID0gb3JnRXZlbnQuZGVsdGFZICogLTE7XHJcbiAgICAgICAgICAgIGRlbHRhICA9IGRlbHRhWTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCAnZGVsdGFYJyBpbiBvcmdFdmVudCApIHtcclxuICAgICAgICAgICAgZGVsdGFYID0gb3JnRXZlbnQuZGVsdGFYO1xyXG4gICAgICAgICAgICBpZiAoIGRlbHRhWSA9PT0gMCApIHsgZGVsdGEgID0gZGVsdGFYICogLTE7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5vIGNoYW5nZSBhY3R1YWxseSBoYXBwZW5lZCwgbm8gcmVhc29uIHRvIGdvIGFueSBmdXJ0aGVyXHJcbiAgICAgICAgaWYgKCBkZWx0YVkgPT09IDAgJiYgZGVsdGFYID09PSAwICkgeyByZXR1cm47IH1cclxuXHJcbiAgICAgICAgLy8gTmVlZCB0byBjb252ZXJ0IGxpbmVzIGFuZCBwYWdlcyB0byBwaXhlbHMgaWYgd2UgYXJlbid0IGFscmVhZHkgaW4gcGl4ZWxzXHJcbiAgICAgICAgLy8gVGhlcmUgYXJlIHRocmVlIGRlbHRhIG1vZGVzOlxyXG4gICAgICAgIC8vICAgKiBkZWx0YU1vZGUgMCBpcyBieSBwaXhlbHMsIG5vdGhpbmcgdG8gZG9cclxuICAgICAgICAvLyAgICogZGVsdGFNb2RlIDEgaXMgYnkgbGluZXNcclxuICAgICAgICAvLyAgICogZGVsdGFNb2RlIDIgaXMgYnkgcGFnZXNcclxuICAgICAgICBpZiAoIG9yZ0V2ZW50LmRlbHRhTW9kZSA9PT0gMSApIHtcclxuICAgICAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSAkLmRhdGEodGhpcywgJ21vdXNld2hlZWwtbGluZS1oZWlnaHQnKTtcclxuICAgICAgICAgICAgZGVsdGEgICo9IGxpbmVIZWlnaHQ7XHJcbiAgICAgICAgICAgIGRlbHRhWSAqPSBsaW5lSGVpZ2h0O1xyXG4gICAgICAgICAgICBkZWx0YVggKj0gbGluZUhlaWdodDtcclxuICAgICAgICB9IGVsc2UgaWYgKCBvcmdFdmVudC5kZWx0YU1vZGUgPT09IDIgKSB7XHJcbiAgICAgICAgICAgIHZhciBwYWdlSGVpZ2h0ID0gJC5kYXRhKHRoaXMsICdtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0Jyk7XHJcbiAgICAgICAgICAgIGRlbHRhICAqPSBwYWdlSGVpZ2h0O1xyXG4gICAgICAgICAgICBkZWx0YVkgKj0gcGFnZUhlaWdodDtcclxuICAgICAgICAgICAgZGVsdGFYICo9IHBhZ2VIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdG9yZSBsb3dlc3QgYWJzb2x1dGUgZGVsdGEgdG8gbm9ybWFsaXplIHRoZSBkZWx0YSB2YWx1ZXNcclxuICAgICAgICBhYnNEZWx0YSA9IE1hdGgubWF4KCBNYXRoLmFicyhkZWx0YVkpLCBNYXRoLmFicyhkZWx0YVgpICk7XHJcblxyXG4gICAgICAgIGlmICggIWxvd2VzdERlbHRhIHx8IGFic0RlbHRhIDwgbG93ZXN0RGVsdGEgKSB7XHJcbiAgICAgICAgICAgIGxvd2VzdERlbHRhID0gYWJzRGVsdGE7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGp1c3Qgb2xkZXIgZGVsdGFzIGlmIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICBpZiAoIHNob3VsZEFkanVzdE9sZERlbHRhcyhvcmdFdmVudCwgYWJzRGVsdGEpICkge1xyXG4gICAgICAgICAgICAgICAgbG93ZXN0RGVsdGEgLz0gNDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkanVzdCBvbGRlciBkZWx0YXMgaWYgbmVjZXNzYXJ5XHJcbiAgICAgICAgaWYgKCBzaG91bGRBZGp1c3RPbGREZWx0YXMob3JnRXZlbnQsIGFic0RlbHRhKSApIHtcclxuICAgICAgICAgICAgLy8gRGl2aWRlIGFsbCB0aGUgdGhpbmdzIGJ5IDQwIVxyXG4gICAgICAgICAgICBkZWx0YSAgLz0gNDA7XHJcbiAgICAgICAgICAgIGRlbHRhWCAvPSA0MDtcclxuICAgICAgICAgICAgZGVsdGFZIC89IDQwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gR2V0IGEgd2hvbGUsIG5vcm1hbGl6ZWQgdmFsdWUgZm9yIHRoZSBkZWx0YXNcclxuICAgICAgICBkZWx0YSAgPSBNYXRoWyBkZWx0YSAgPj0gMSA/ICdmbG9vcicgOiAnY2VpbCcgXShkZWx0YSAgLyBsb3dlc3REZWx0YSk7XHJcbiAgICAgICAgZGVsdGFYID0gTWF0aFsgZGVsdGFYID49IDEgPyAnZmxvb3InIDogJ2NlaWwnIF0oZGVsdGFYIC8gbG93ZXN0RGVsdGEpO1xyXG4gICAgICAgIGRlbHRhWSA9IE1hdGhbIGRlbHRhWSA+PSAxID8gJ2Zsb29yJyA6ICdjZWlsJyBdKGRlbHRhWSAvIGxvd2VzdERlbHRhKTtcclxuXHJcbiAgICAgICAgLy8gTm9ybWFsaXNlIG9mZnNldFggYW5kIG9mZnNldFkgcHJvcGVydGllc1xyXG4gICAgICAgIGlmICggc3BlY2lhbC5zZXR0aW5ncy5ub3JtYWxpemVPZmZzZXQgJiYgdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QgKSB7XHJcbiAgICAgICAgICAgIHZhciBib3VuZGluZ1JlY3QgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICBvZmZzZXRYID0gZXZlbnQuY2xpZW50WCAtIGJvdW5kaW5nUmVjdC5sZWZ0O1xyXG4gICAgICAgICAgICBvZmZzZXRZID0gZXZlbnQuY2xpZW50WSAtIGJvdW5kaW5nUmVjdC50b3A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGQgaW5mb3JtYXRpb24gdG8gdGhlIGV2ZW50IG9iamVjdFxyXG4gICAgICAgIGV2ZW50LmRlbHRhWCA9IGRlbHRhWDtcclxuICAgICAgICBldmVudC5kZWx0YVkgPSBkZWx0YVk7XHJcbiAgICAgICAgZXZlbnQuZGVsdGFGYWN0b3IgPSBsb3dlc3REZWx0YTtcclxuICAgICAgICBldmVudC5vZmZzZXRYID0gb2Zmc2V0WDtcclxuICAgICAgICBldmVudC5vZmZzZXRZID0gb2Zmc2V0WTtcclxuICAgICAgICAvLyBHbyBhaGVhZCBhbmQgc2V0IGRlbHRhTW9kZSB0byAwIHNpbmNlIHdlIGNvbnZlcnRlZCB0byBwaXhlbHNcclxuICAgICAgICAvLyBBbHRob3VnaCB0aGlzIGlzIGEgbGl0dGxlIG9kZCBzaW5jZSB3ZSBvdmVyd3JpdGUgdGhlIGRlbHRhWC9ZXHJcbiAgICAgICAgLy8gcHJvcGVydGllcyB3aXRoIG5vcm1hbGl6ZWQgZGVsdGFzLlxyXG4gICAgICAgIGV2ZW50LmRlbHRhTW9kZSA9IDA7XHJcblxyXG4gICAgICAgIC8vIEFkZCBldmVudCBhbmQgZGVsdGEgdG8gdGhlIGZyb250IG9mIHRoZSBhcmd1bWVudHNcclxuICAgICAgICBhcmdzLnVuc2hpZnQoZXZlbnQsIGRlbHRhLCBkZWx0YVgsIGRlbHRhWSk7XHJcblxyXG4gICAgICAgIC8vIENsZWFyb3V0IGxvd2VzdERlbHRhIGFmdGVyIHNvbWV0aW1lIHRvIGJldHRlclxyXG4gICAgICAgIC8vIGhhbmRsZSBtdWx0aXBsZSBkZXZpY2UgdHlwZXMgdGhhdCBnaXZlIGRpZmZlcmVudFxyXG4gICAgICAgIC8vIGEgZGlmZmVyZW50IGxvd2VzdERlbHRhXHJcbiAgICAgICAgLy8gRXg6IHRyYWNrcGFkID0gMyBhbmQgbW91c2Ugd2hlZWwgPSAxMjBcclxuICAgICAgICBpZiAobnVsbExvd2VzdERlbHRhVGltZW91dCkgeyBjbGVhclRpbWVvdXQobnVsbExvd2VzdERlbHRhVGltZW91dCk7IH1cclxuICAgICAgICBudWxsTG93ZXN0RGVsdGFUaW1lb3V0ID0gc2V0VGltZW91dChudWxsTG93ZXN0RGVsdGEsIDIwMCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoJC5ldmVudC5kaXNwYXRjaCB8fCAkLmV2ZW50LmhhbmRsZSkuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbnVsbExvd2VzdERlbHRhKCkge1xyXG4gICAgICAgIGxvd2VzdERlbHRhID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzaG91bGRBZGp1c3RPbGREZWx0YXMob3JnRXZlbnQsIGFic0RlbHRhKSB7XHJcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBvbGRlciBldmVudCBhbmQgdGhlIGRlbHRhIGlzIGRpdmlzYWJsZSBieSAxMjAsXHJcbiAgICAgICAgLy8gdGhlbiB3ZSBhcmUgYXNzdW1pbmcgdGhhdCB0aGUgYnJvd3NlciBpcyB0cmVhdGluZyB0aGlzIGFzIGFuXHJcbiAgICAgICAgLy8gb2xkZXIgbW91c2Ugd2hlZWwgZXZlbnQgYW5kIHRoYXQgd2Ugc2hvdWxkIGRpdmlkZSB0aGUgZGVsdGFzXHJcbiAgICAgICAgLy8gYnkgNDAgdG8gdHJ5IGFuZCBnZXQgYSBtb3JlIHVzYWJsZSBkZWx0YUZhY3Rvci5cclxuICAgICAgICAvLyBTaWRlIG5vdGUsIHRoaXMgYWN0dWFsbHkgaW1wYWN0cyB0aGUgcmVwb3J0ZWQgc2Nyb2xsIGRpc3RhbmNlXHJcbiAgICAgICAgLy8gaW4gb2xkZXIgYnJvd3NlcnMgYW5kIGNhbiBjYXVzZSBzY3JvbGxpbmcgdG8gYmUgc2xvd2VyIHRoYW4gbmF0aXZlLlxyXG4gICAgICAgIC8vIFR1cm4gdGhpcyBvZmYgYnkgc2V0dGluZyAkLmV2ZW50LnNwZWNpYWwubW91c2V3aGVlbC5zZXR0aW5ncy5hZGp1c3RPbGREZWx0YXMgdG8gZmFsc2UuXHJcbiAgICAgICAgcmV0dXJuIHNwZWNpYWwuc2V0dGluZ3MuYWRqdXN0T2xkRGVsdGFzICYmIG9yZ0V2ZW50LnR5cGUgPT09ICdtb3VzZXdoZWVsJyAmJiBhYnNEZWx0YSAlIDEyMCA9PT0gMDtcclxuICAgIH1cclxuXHJcbn0pKTtcclxuIiwiLyohXHJcbiAqIGpTY3JvbGxQYW5lIC0gdjIuMC4yMyAtIDIwMTYtMDEtMjhcclxuICogaHR0cDovL2pzY3JvbGxwYW5lLmtlbHZpbmx1Y2suY29tL1xyXG4gKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgS2VsdmluIEx1Y2tcclxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBsaWNlbnNlcy5cclxuICovXHJcbiFmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiXSxhKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hKHJlcXVpcmUoXCJqcXVlcnlcIikpOmEoalF1ZXJ5KX0oZnVuY3Rpb24oYSl7YS5mbi5qU2Nyb2xsUGFuZT1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKGIsYyl7ZnVuY3Rpb24gZChjKXt2YXIgZixoLGosayxsLG8scD0hMSxxPSExO2lmKE49Yyx2b2lkIDA9PT1PKWw9Yi5zY3JvbGxUb3AoKSxvPWIuc2Nyb2xsTGVmdCgpLGIuY3NzKHtvdmVyZmxvdzpcImhpZGRlblwiLHBhZGRpbmc6MH0pLFA9Yi5pbm5lcldpZHRoKCkrcmIsUT1iLmlubmVySGVpZ2h0KCksYi53aWR0aChQKSxPPWEoJzxkaXYgY2xhc3M9XCJqc3BQYW5lXCIgLz4nKS5jc3MoXCJwYWRkaW5nXCIscWIpLmFwcGVuZChiLmNoaWxkcmVuKCkpLFI9YSgnPGRpdiBjbGFzcz1cImpzcENvbnRhaW5lclwiIC8+JykuY3NzKHt3aWR0aDpQK1wicHhcIixoZWlnaHQ6UStcInB4XCJ9KS5hcHBlbmQoTykuYXBwZW5kVG8oYik7ZWxzZXtpZihiLmNzcyhcIndpZHRoXCIsXCJcIikscD1OLnN0aWNrVG9Cb3R0b20mJkEoKSxxPU4uc3RpY2tUb1JpZ2h0JiZCKCksaz1iLmlubmVyV2lkdGgoKStyYiE9UHx8Yi5vdXRlckhlaWdodCgpIT1RLGsmJihQPWIuaW5uZXJXaWR0aCgpK3JiLFE9Yi5pbm5lckhlaWdodCgpLFIuY3NzKHt3aWR0aDpQK1wicHhcIixoZWlnaHQ6UStcInB4XCJ9KSksIWsmJnNiPT1TJiZPLm91dGVySGVpZ2h0KCk9PVQpcmV0dXJuIHZvaWQgYi53aWR0aChQKTtzYj1TLE8uY3NzKFwid2lkdGhcIixcIlwiKSxiLndpZHRoKFApLFIuZmluZChcIj4uanNwVmVydGljYWxCYXIsPi5qc3BIb3Jpem9udGFsQmFyXCIpLnJlbW92ZSgpLmVuZCgpfU8uY3NzKFwib3ZlcmZsb3dcIixcImF1dG9cIiksUz1jLmNvbnRlbnRXaWR0aD9jLmNvbnRlbnRXaWR0aDpPWzBdLnNjcm9sbFdpZHRoLFQ9T1swXS5zY3JvbGxIZWlnaHQsTy5jc3MoXCJvdmVyZmxvd1wiLFwiXCIpLFU9Uy9QLFY9VC9RLFc9Vj4xLFg9VT4xLFh8fFc/KGIuYWRkQ2xhc3MoXCJqc3BTY3JvbGxhYmxlXCIpLGY9Ti5tYWludGFpblBvc2l0aW9uJiYoJHx8YmIpLGYmJihoPXkoKSxqPXooKSksZSgpLGcoKSxpKCksZiYmKHcocT9TLVA6aCwhMSksdihwP1QtUTpqLCExKSksRigpLEMoKSxMKCksTi5lbmFibGVLZXlib2FyZE5hdmlnYXRpb24mJkgoKSxOLmNsaWNrT25UcmFjayYmbSgpLEooKSxOLmhpamFja0ludGVybmFsTGlua3MmJksoKSk6KGIucmVtb3ZlQ2xhc3MoXCJqc3BTY3JvbGxhYmxlXCIpLE8uY3NzKHt0b3A6MCxsZWZ0OjAsd2lkdGg6Ui53aWR0aCgpLXJifSksRCgpLEcoKSxJKCksbigpKSxOLmF1dG9SZWluaXRpYWxpc2UmJiFwYj9wYj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2QoTil9LE4uYXV0b1JlaW5pdGlhbGlzZURlbGF5KTohTi5hdXRvUmVpbml0aWFsaXNlJiZwYiYmY2xlYXJJbnRlcnZhbChwYiksbCYmYi5zY3JvbGxUb3AoMCkmJnYobCwhMSksbyYmYi5zY3JvbGxMZWZ0KDApJiZ3KG8sITEpLGIudHJpZ2dlcihcImpzcC1pbml0aWFsaXNlZFwiLFtYfHxXXSl9ZnVuY3Rpb24gZSgpe1cmJihSLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwVmVydGljYWxCYXJcIiAvPicpLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwQ2FwIGpzcENhcFRvcFwiIC8+JyksYSgnPGRpdiBjbGFzcz1cImpzcFRyYWNrXCIgLz4nKS5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcERyYWdcIiAvPicpLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwRHJhZ1RvcFwiIC8+JyksYSgnPGRpdiBjbGFzcz1cImpzcERyYWdCb3R0b21cIiAvPicpKSksYSgnPGRpdiBjbGFzcz1cImpzcENhcCBqc3BDYXBCb3R0b21cIiAvPicpKSksY2I9Ui5maW5kKFwiPi5qc3BWZXJ0aWNhbEJhclwiKSxkYj1jYi5maW5kKFwiPi5qc3BUcmFja1wiKSxZPWRiLmZpbmQoXCI+LmpzcERyYWdcIiksTi5zaG93QXJyb3dzJiYoaGI9YSgnPGEgY2xhc3M9XCJqc3BBcnJvdyBqc3BBcnJvd1VwXCIgLz4nKS5iaW5kKFwibW91c2Vkb3duLmpzcFwiLGsoMCwtMSkpLmJpbmQoXCJjbGljay5qc3BcIixFKSxpYj1hKCc8YSBjbGFzcz1cImpzcEFycm93IGpzcEFycm93RG93blwiIC8+JykuYmluZChcIm1vdXNlZG93bi5qc3BcIixrKDAsMSkpLmJpbmQoXCJjbGljay5qc3BcIixFKSxOLmFycm93U2Nyb2xsT25Ib3ZlciYmKGhiLmJpbmQoXCJtb3VzZW92ZXIuanNwXCIsaygwLC0xLGhiKSksaWIuYmluZChcIm1vdXNlb3Zlci5qc3BcIixrKDAsMSxpYikpKSxqKGRiLE4udmVydGljYWxBcnJvd1Bvc2l0aW9ucyxoYixpYikpLGZiPVEsUi5maW5kKFwiPi5qc3BWZXJ0aWNhbEJhcj4uanNwQ2FwOnZpc2libGUsPi5qc3BWZXJ0aWNhbEJhcj4uanNwQXJyb3dcIikuZWFjaChmdW5jdGlvbigpe2ZiLT1hKHRoaXMpLm91dGVySGVpZ2h0KCl9KSxZLmhvdmVyKGZ1bmN0aW9uKCl7WS5hZGRDbGFzcyhcImpzcEhvdmVyXCIpfSxmdW5jdGlvbigpe1kucmVtb3ZlQ2xhc3MoXCJqc3BIb3ZlclwiKX0pLmJpbmQoXCJtb3VzZWRvd24uanNwXCIsZnVuY3Rpb24oYil7YShcImh0bWxcIikuYmluZChcImRyYWdzdGFydC5qc3Agc2VsZWN0c3RhcnQuanNwXCIsRSksWS5hZGRDbGFzcyhcImpzcEFjdGl2ZVwiKTt2YXIgYz1iLnBhZ2VZLVkucG9zaXRpb24oKS50b3A7cmV0dXJuIGEoXCJodG1sXCIpLmJpbmQoXCJtb3VzZW1vdmUuanNwXCIsZnVuY3Rpb24oYSl7cChhLnBhZ2VZLWMsITEpfSkuYmluZChcIm1vdXNldXAuanNwIG1vdXNlbGVhdmUuanNwXCIsbyksITF9KSxmKCkpfWZ1bmN0aW9uIGYoKXtkYi5oZWlnaHQoZmIrXCJweFwiKSwkPTAsZWI9Ti52ZXJ0aWNhbEd1dHRlcitkYi5vdXRlcldpZHRoKCksTy53aWR0aChQLWViLXJiKTt0cnl7MD09PWNiLnBvc2l0aW9uKCkubGVmdCYmTy5jc3MoXCJtYXJnaW4tbGVmdFwiLGViK1wicHhcIil9Y2F0Y2goYSl7fX1mdW5jdGlvbiBnKCl7WCYmKFIuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BIb3Jpem9udGFsQmFyXCIgLz4nKS5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcENhcCBqc3BDYXBMZWZ0XCIgLz4nKSxhKCc8ZGl2IGNsYXNzPVwianNwVHJhY2tcIiAvPicpLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwRHJhZ1wiIC8+JykuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BEcmFnTGVmdFwiIC8+JyksYSgnPGRpdiBjbGFzcz1cImpzcERyYWdSaWdodFwiIC8+JykpKSxhKCc8ZGl2IGNsYXNzPVwianNwQ2FwIGpzcENhcFJpZ2h0XCIgLz4nKSkpLGpiPVIuZmluZChcIj4uanNwSG9yaXpvbnRhbEJhclwiKSxrYj1qYi5maW5kKFwiPi5qc3BUcmFja1wiKSxfPWtiLmZpbmQoXCI+LmpzcERyYWdcIiksTi5zaG93QXJyb3dzJiYobmI9YSgnPGEgY2xhc3M9XCJqc3BBcnJvdyBqc3BBcnJvd0xlZnRcIiAvPicpLmJpbmQoXCJtb3VzZWRvd24uanNwXCIsaygtMSwwKSkuYmluZChcImNsaWNrLmpzcFwiLEUpLG9iPWEoJzxhIGNsYXNzPVwianNwQXJyb3cganNwQXJyb3dSaWdodFwiIC8+JykuYmluZChcIm1vdXNlZG93bi5qc3BcIixrKDEsMCkpLmJpbmQoXCJjbGljay5qc3BcIixFKSxOLmFycm93U2Nyb2xsT25Ib3ZlciYmKG5iLmJpbmQoXCJtb3VzZW92ZXIuanNwXCIsaygtMSwwLG5iKSksb2IuYmluZChcIm1vdXNlb3Zlci5qc3BcIixrKDEsMCxvYikpKSxqKGtiLE4uaG9yaXpvbnRhbEFycm93UG9zaXRpb25zLG5iLG9iKSksXy5ob3ZlcihmdW5jdGlvbigpe18uYWRkQ2xhc3MoXCJqc3BIb3ZlclwiKX0sZnVuY3Rpb24oKXtfLnJlbW92ZUNsYXNzKFwianNwSG92ZXJcIil9KS5iaW5kKFwibW91c2Vkb3duLmpzcFwiLGZ1bmN0aW9uKGIpe2EoXCJodG1sXCIpLmJpbmQoXCJkcmFnc3RhcnQuanNwIHNlbGVjdHN0YXJ0LmpzcFwiLEUpLF8uYWRkQ2xhc3MoXCJqc3BBY3RpdmVcIik7dmFyIGM9Yi5wYWdlWC1fLnBvc2l0aW9uKCkubGVmdDtyZXR1cm4gYShcImh0bWxcIikuYmluZChcIm1vdXNlbW92ZS5qc3BcIixmdW5jdGlvbihhKXtyKGEucGFnZVgtYywhMSl9KS5iaW5kKFwibW91c2V1cC5qc3AgbW91c2VsZWF2ZS5qc3BcIixvKSwhMX0pLGxiPVIuaW5uZXJXaWR0aCgpLGgoKSl9ZnVuY3Rpb24gaCgpe1IuZmluZChcIj4uanNwSG9yaXpvbnRhbEJhcj4uanNwQ2FwOnZpc2libGUsPi5qc3BIb3Jpem9udGFsQmFyPi5qc3BBcnJvd1wiKS5lYWNoKGZ1bmN0aW9uKCl7bGItPWEodGhpcykub3V0ZXJXaWR0aCgpfSksa2Iud2lkdGgobGIrXCJweFwiKSxiYj0wfWZ1bmN0aW9uIGkoKXtpZihYJiZXKXt2YXIgYj1rYi5vdXRlckhlaWdodCgpLGM9ZGIub3V0ZXJXaWR0aCgpO2ZiLT1iLGEoamIpLmZpbmQoXCI+LmpzcENhcDp2aXNpYmxlLD4uanNwQXJyb3dcIikuZWFjaChmdW5jdGlvbigpe2xiKz1hKHRoaXMpLm91dGVyV2lkdGgoKX0pLGxiLT1jLFEtPWMsUC09YixrYi5wYXJlbnQoKS5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcENvcm5lclwiIC8+JykuY3NzKFwid2lkdGhcIixiK1wicHhcIikpLGYoKSxoKCl9WCYmTy53aWR0aChSLm91dGVyV2lkdGgoKS1yYitcInB4XCIpLFQ9Ty5vdXRlckhlaWdodCgpLFY9VC9RLFgmJihtYj1NYXRoLmNlaWwoMS9VKmxiKSxtYj5OLmhvcml6b250YWxEcmFnTWF4V2lkdGg/bWI9Ti5ob3Jpem9udGFsRHJhZ01heFdpZHRoOm1iPE4uaG9yaXpvbnRhbERyYWdNaW5XaWR0aCYmKG1iPU4uaG9yaXpvbnRhbERyYWdNaW5XaWR0aCksXy53aWR0aChtYitcInB4XCIpLGFiPWxiLW1iLHMoYmIpKSxXJiYoZ2I9TWF0aC5jZWlsKDEvVipmYiksZ2I+Ti52ZXJ0aWNhbERyYWdNYXhIZWlnaHQ/Z2I9Ti52ZXJ0aWNhbERyYWdNYXhIZWlnaHQ6Z2I8Ti52ZXJ0aWNhbERyYWdNaW5IZWlnaHQmJihnYj1OLnZlcnRpY2FsRHJhZ01pbkhlaWdodCksWS5oZWlnaHQoZ2IrXCJweFwiKSxaPWZiLWdiLHEoJCkpfWZ1bmN0aW9uIGooYSxiLGMsZCl7dmFyIGUsZj1cImJlZm9yZVwiLGc9XCJhZnRlclwiO1wib3NcIj09YiYmKGI9L01hYy8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pP1wiYWZ0ZXJcIjpcInNwbGl0XCIpLGI9PWY/Zz1iOmI9PWcmJihmPWIsZT1jLGM9ZCxkPWUpLGFbZl0oYylbZ10oZCl9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGwoYSxiLHRoaXMsYyksdGhpcy5ibHVyKCksITF9fWZ1bmN0aW9uIGwoYixjLGQsZSl7ZD1hKGQpLmFkZENsYXNzKFwianNwQWN0aXZlXCIpO3ZhciBmLGcsaD0hMCxpPWZ1bmN0aW9uKCl7MCE9PWImJnRiLnNjcm9sbEJ5WChiKk4uYXJyb3dCdXR0b25TcGVlZCksMCE9PWMmJnRiLnNjcm9sbEJ5WShjKk4uYXJyb3dCdXR0b25TcGVlZCksZz1zZXRUaW1lb3V0KGksaD9OLmluaXRpYWxEZWxheTpOLmFycm93UmVwZWF0RnJlcSksaD0hMX07aSgpLGY9ZT9cIm1vdXNlb3V0LmpzcFwiOlwibW91c2V1cC5qc3BcIixlPWV8fGEoXCJodG1sXCIpLGUuYmluZChmLGZ1bmN0aW9uKCl7ZC5yZW1vdmVDbGFzcyhcImpzcEFjdGl2ZVwiKSxnJiZjbGVhclRpbWVvdXQoZyksZz1udWxsLGUudW5iaW5kKGYpfSl9ZnVuY3Rpb24gbSgpe24oKSxXJiZkYi5iaW5kKFwibW91c2Vkb3duLmpzcFwiLGZ1bmN0aW9uKGIpe2lmKHZvaWQgMD09PWIub3JpZ2luYWxUYXJnZXR8fGIub3JpZ2luYWxUYXJnZXQ9PWIuY3VycmVudFRhcmdldCl7dmFyIGMsZD1hKHRoaXMpLGU9ZC5vZmZzZXQoKSxmPWIucGFnZVktZS50b3AtJCxnPSEwLGg9ZnVuY3Rpb24oKXt2YXIgYT1kLm9mZnNldCgpLGU9Yi5wYWdlWS1hLnRvcC1nYi8yLGo9USpOLnNjcm9sbFBhZ2VQZXJjZW50LGs9WipqLyhULVEpO2lmKDA+ZikkLWs+ZT90Yi5zY3JvbGxCeVkoLWopOnAoZSk7ZWxzZXtpZighKGY+MCkpcmV0dXJuIHZvaWQgaSgpO2U+JCtrP3RiLnNjcm9sbEJ5WShqKTpwKGUpfWM9c2V0VGltZW91dChoLGc/Ti5pbml0aWFsRGVsYXk6Ti50cmFja0NsaWNrUmVwZWF0RnJlcSksZz0hMX0saT1mdW5jdGlvbigpe2MmJmNsZWFyVGltZW91dChjKSxjPW51bGwsYShkb2N1bWVudCkudW5iaW5kKFwibW91c2V1cC5qc3BcIixpKX07cmV0dXJuIGgoKSxhKGRvY3VtZW50KS5iaW5kKFwibW91c2V1cC5qc3BcIixpKSwhMX19KSxYJiZrYi5iaW5kKFwibW91c2Vkb3duLmpzcFwiLGZ1bmN0aW9uKGIpe2lmKHZvaWQgMD09PWIub3JpZ2luYWxUYXJnZXR8fGIub3JpZ2luYWxUYXJnZXQ9PWIuY3VycmVudFRhcmdldCl7dmFyIGMsZD1hKHRoaXMpLGU9ZC5vZmZzZXQoKSxmPWIucGFnZVgtZS5sZWZ0LWJiLGc9ITAsaD1mdW5jdGlvbigpe3ZhciBhPWQub2Zmc2V0KCksZT1iLnBhZ2VYLWEubGVmdC1tYi8yLGo9UCpOLnNjcm9sbFBhZ2VQZXJjZW50LGs9YWIqai8oUy1QKTtpZigwPmYpYmItaz5lP3RiLnNjcm9sbEJ5WCgtaik6cihlKTtlbHNle2lmKCEoZj4wKSlyZXR1cm4gdm9pZCBpKCk7ZT5iYitrP3RiLnNjcm9sbEJ5WChqKTpyKGUpfWM9c2V0VGltZW91dChoLGc/Ti5pbml0aWFsRGVsYXk6Ti50cmFja0NsaWNrUmVwZWF0RnJlcSksZz0hMX0saT1mdW5jdGlvbigpe2MmJmNsZWFyVGltZW91dChjKSxjPW51bGwsYShkb2N1bWVudCkudW5iaW5kKFwibW91c2V1cC5qc3BcIixpKX07cmV0dXJuIGgoKSxhKGRvY3VtZW50KS5iaW5kKFwibW91c2V1cC5qc3BcIixpKSwhMX19KX1mdW5jdGlvbiBuKCl7a2ImJmtiLnVuYmluZChcIm1vdXNlZG93bi5qc3BcIiksZGImJmRiLnVuYmluZChcIm1vdXNlZG93bi5qc3BcIil9ZnVuY3Rpb24gbygpe2EoXCJodG1sXCIpLnVuYmluZChcImRyYWdzdGFydC5qc3Agc2VsZWN0c3RhcnQuanNwIG1vdXNlbW92ZS5qc3AgbW91c2V1cC5qc3AgbW91c2VsZWF2ZS5qc3BcIiksWSYmWS5yZW1vdmVDbGFzcyhcImpzcEFjdGl2ZVwiKSxfJiZfLnJlbW92ZUNsYXNzKFwianNwQWN0aXZlXCIpfWZ1bmN0aW9uIHAoYyxkKXtpZihXKXswPmM/Yz0wOmM+WiYmKGM9Wik7dmFyIGU9bmV3IGEuRXZlbnQoXCJqc3Atd2lsbC1zY3JvbGwteVwiKTtpZihiLnRyaWdnZXIoZSxbY10pLCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgZj1jfHwwLGc9MD09PWYsaD1mPT1aLGk9Yy9aLGo9LWkqKFQtUSk7dm9pZCAwPT09ZCYmKGQ9Ti5hbmltYXRlU2Nyb2xsKSxkP3RiLmFuaW1hdGUoWSxcInRvcFwiLGMscSxmdW5jdGlvbigpe2IudHJpZ2dlcihcImpzcC11c2VyLXNjcm9sbC15XCIsWy1qLGcsaF0pfSk6KFkuY3NzKFwidG9wXCIsYykscShjKSxiLnRyaWdnZXIoXCJqc3AtdXNlci1zY3JvbGwteVwiLFstaixnLGhdKSl9fX1mdW5jdGlvbiBxKGEpe3ZvaWQgMD09PWEmJihhPVkucG9zaXRpb24oKS50b3ApLFIuc2Nyb2xsVG9wKDApLCQ9YXx8MDt2YXIgYz0wPT09JCxkPSQ9PVosZT1hL1osZj0tZSooVC1RKTsodWIhPWN8fHdiIT1kKSYmKHViPWMsd2I9ZCxiLnRyaWdnZXIoXCJqc3AtYXJyb3ctY2hhbmdlXCIsW3ViLHdiLHZiLHhiXSkpLHQoYyxkKSxPLmNzcyhcInRvcFwiLGYpLGIudHJpZ2dlcihcImpzcC1zY3JvbGwteVwiLFstZixjLGRdKS50cmlnZ2VyKFwic2Nyb2xsXCIpfWZ1bmN0aW9uIHIoYyxkKXtpZihYKXswPmM/Yz0wOmM+YWImJihjPWFiKTt2YXIgZT1uZXcgYS5FdmVudChcImpzcC13aWxsLXNjcm9sbC14XCIpO2lmKGIudHJpZ2dlcihlLFtjXSksIWUuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBmPWN8fDAsZz0wPT09ZixoPWY9PWFiLGk9Yy9hYixqPS1pKihTLVApO3ZvaWQgMD09PWQmJihkPU4uYW5pbWF0ZVNjcm9sbCksZD90Yi5hbmltYXRlKF8sXCJsZWZ0XCIsYyxzLGZ1bmN0aW9uKCl7Yi50cmlnZ2VyKFwianNwLXVzZXItc2Nyb2xsLXhcIixbLWosZyxoXSl9KTooXy5jc3MoXCJsZWZ0XCIsYykscyhjKSxiLnRyaWdnZXIoXCJqc3AtdXNlci1zY3JvbGwteFwiLFstaixnLGhdKSl9fX1mdW5jdGlvbiBzKGEpe3ZvaWQgMD09PWEmJihhPV8ucG9zaXRpb24oKS5sZWZ0KSxSLnNjcm9sbFRvcCgwKSxiYj1hfHwwO3ZhciBjPTA9PT1iYixkPWJiPT1hYixlPWEvYWIsZj0tZSooUy1QKTsodmIhPWN8fHhiIT1kKSYmKHZiPWMseGI9ZCxiLnRyaWdnZXIoXCJqc3AtYXJyb3ctY2hhbmdlXCIsW3ViLHdiLHZiLHhiXSkpLHUoYyxkKSxPLmNzcyhcImxlZnRcIixmKSxiLnRyaWdnZXIoXCJqc3Atc2Nyb2xsLXhcIixbLWYsYyxkXSkudHJpZ2dlcihcInNjcm9sbFwiKX1mdW5jdGlvbiB0KGEsYil7Ti5zaG93QXJyb3dzJiYoaGJbYT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImpzcERpc2FibGVkXCIpLGliW2I/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3BEaXNhYmxlZFwiKSl9ZnVuY3Rpb24gdShhLGIpe04uc2hvd0Fycm93cyYmKG5iW2E/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3BEaXNhYmxlZFwiKSxvYltiP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwianNwRGlzYWJsZWRcIikpfWZ1bmN0aW9uIHYoYSxiKXt2YXIgYz1hLyhULVEpO3AoYypaLGIpfWZ1bmN0aW9uIHcoYSxiKXt2YXIgYz1hLyhTLVApO3IoYyphYixiKX1mdW5jdGlvbiB4KGIsYyxkKXt2YXIgZSxmLGcsaCxpLGosayxsLG0sbj0wLG89MDt0cnl7ZT1hKGIpfWNhdGNoKHApe3JldHVybn1mb3IoZj1lLm91dGVySGVpZ2h0KCksZz1lLm91dGVyV2lkdGgoKSxSLnNjcm9sbFRvcCgwKSxSLnNjcm9sbExlZnQoMCk7IWUuaXMoXCIuanNwUGFuZVwiKTspaWYobis9ZS5wb3NpdGlvbigpLnRvcCxvKz1lLnBvc2l0aW9uKCkubGVmdCxlPWUub2Zmc2V0UGFyZW50KCksL15ib2R5fGh0bWwkL2kudGVzdChlWzBdLm5vZGVOYW1lKSlyZXR1cm47aD16KCksaj1oK1EsaD5ufHxjP2w9bi1OLmhvcml6b250YWxHdXR0ZXI6bitmPmomJihsPW4tUStmK04uaG9yaXpvbnRhbEd1dHRlciksaXNOYU4obCl8fHYobCxkKSxpPXkoKSxrPWkrUCxpPm98fGM/bT1vLU4uaG9yaXpvbnRhbEd1dHRlcjpvK2c+ayYmKG09by1QK2crTi5ob3Jpem9udGFsR3V0dGVyKSxpc05hTihtKXx8dyhtLGQpfWZ1bmN0aW9uIHkoKXtyZXR1cm4tTy5wb3NpdGlvbigpLmxlZnR9ZnVuY3Rpb24geigpe3JldHVybi1PLnBvc2l0aW9uKCkudG9wfWZ1bmN0aW9uIEEoKXt2YXIgYT1ULVE7cmV0dXJuIGE+MjAmJmEteigpPDEwfWZ1bmN0aW9uIEIoKXt2YXIgYT1TLVA7cmV0dXJuIGE+MjAmJmEteSgpPDEwfWZ1bmN0aW9uIEMoKXtSLnVuYmluZCh6YikuYmluZCh6YixmdW5jdGlvbihhLGIsYyxkKXtiYnx8KGJiPTApLCR8fCgkPTApO3ZhciBlPWJiLGY9JCxnPWEuZGVsdGFGYWN0b3J8fE4ubW91c2VXaGVlbFNwZWVkO3JldHVybiB0Yi5zY3JvbGxCeShjKmcsLWQqZywhMSksZT09YmImJmY9PSR9KX1mdW5jdGlvbiBEKCl7Ui51bmJpbmQoemIpfWZ1bmN0aW9uIEUoKXtyZXR1cm4hMX1mdW5jdGlvbiBGKCl7Ty5maW5kKFwiOmlucHV0LGFcIikudW5iaW5kKFwiZm9jdXMuanNwXCIpLmJpbmQoXCJmb2N1cy5qc3BcIixmdW5jdGlvbihhKXt4KGEudGFyZ2V0LCExKX0pfWZ1bmN0aW9uIEcoKXtPLmZpbmQoXCI6aW5wdXQsYVwiKS51bmJpbmQoXCJmb2N1cy5qc3BcIil9ZnVuY3Rpb24gSCgpe2Z1bmN0aW9uIGMoKXt2YXIgYT1iYixiPSQ7c3dpdGNoKGQpe2Nhc2UgNDA6dGIuc2Nyb2xsQnlZKE4ua2V5Ym9hcmRTcGVlZCwhMSk7YnJlYWs7Y2FzZSAzODp0Yi5zY3JvbGxCeVkoLU4ua2V5Ym9hcmRTcGVlZCwhMSk7YnJlYWs7Y2FzZSAzNDpjYXNlIDMyOnRiLnNjcm9sbEJ5WShRKk4uc2Nyb2xsUGFnZVBlcmNlbnQsITEpO2JyZWFrO2Nhc2UgMzM6dGIuc2Nyb2xsQnlZKC1RKk4uc2Nyb2xsUGFnZVBlcmNlbnQsITEpO2JyZWFrO2Nhc2UgMzk6dGIuc2Nyb2xsQnlYKE4ua2V5Ym9hcmRTcGVlZCwhMSk7YnJlYWs7Y2FzZSAzNzp0Yi5zY3JvbGxCeVgoLU4ua2V5Ym9hcmRTcGVlZCwhMSl9cmV0dXJuIGU9YSE9YmJ8fGIhPSR9dmFyIGQsZSxmPVtdO1gmJmYucHVzaChqYlswXSksVyYmZi5wdXNoKGNiWzBdKSxPLmJpbmQoXCJmb2N1cy5qc3BcIixmdW5jdGlvbigpe2IuZm9jdXMoKX0pLGIuYXR0cihcInRhYmluZGV4XCIsMCkudW5iaW5kKFwia2V5ZG93bi5qc3Aga2V5cHJlc3MuanNwXCIpLmJpbmQoXCJrZXlkb3duLmpzcFwiLGZ1bmN0aW9uKGIpe2lmKGIudGFyZ2V0PT09dGhpc3x8Zi5sZW5ndGgmJmEoYi50YXJnZXQpLmNsb3Nlc3QoZikubGVuZ3RoKXt2YXIgZz1iYixoPSQ7c3dpdGNoKGIua2V5Q29kZSl7Y2FzZSA0MDpjYXNlIDM4OmNhc2UgMzQ6Y2FzZSAzMjpjYXNlIDMzOmNhc2UgMzk6Y2FzZSAzNzpkPWIua2V5Q29kZSxjKCk7YnJlYWs7Y2FzZSAzNTp2KFQtUSksZD1udWxsO2JyZWFrO2Nhc2UgMzY6digwKSxkPW51bGx9cmV0dXJuIGU9Yi5rZXlDb2RlPT1kJiZnIT1iYnx8aCE9JCwhZX19KS5iaW5kKFwia2V5cHJlc3MuanNwXCIsZnVuY3Rpb24oYil7cmV0dXJuIGIua2V5Q29kZT09ZCYmYygpLGIudGFyZ2V0PT09dGhpc3x8Zi5sZW5ndGgmJmEoYi50YXJnZXQpLmNsb3Nlc3QoZikubGVuZ3RoPyFlOnZvaWQgMH0pLE4uaGlkZUZvY3VzPyhiLmNzcyhcIm91dGxpbmVcIixcIm5vbmVcIiksXCJoaWRlRm9jdXNcImluIFJbMF0mJmIuYXR0cihcImhpZGVGb2N1c1wiLCEwKSk6KGIuY3NzKFwib3V0bGluZVwiLFwiXCIpLFwiaGlkZUZvY3VzXCJpbiBSWzBdJiZiLmF0dHIoXCJoaWRlRm9jdXNcIiwhMSkpfWZ1bmN0aW9uIEkoKXtiLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIikucmVtb3ZlQXR0cihcInRhYmluZGV4XCIpLnVuYmluZChcImtleWRvd24uanNwIGtleXByZXNzLmpzcFwiKSxPLnVuYmluZChcIi5qc3BcIil9ZnVuY3Rpb24gSigpe2lmKGxvY2F0aW9uLmhhc2gmJmxvY2F0aW9uLmhhc2gubGVuZ3RoPjEpe3ZhciBiLGMsZD1lc2NhcGUobG9jYXRpb24uaGFzaC5zdWJzdHIoMSkpO3RyeXtiPWEoXCIjXCIrZCsnLCBhW25hbWU9XCInK2QrJ1wiXScpfWNhdGNoKGUpe3JldHVybn1iLmxlbmd0aCYmTy5maW5kKGQpJiYoMD09PVIuc2Nyb2xsVG9wKCk/Yz1zZXRJbnRlcnZhbChmdW5jdGlvbigpe1Iuc2Nyb2xsVG9wKCk+MCYmKHgoYiwhMCksYShkb2N1bWVudCkuc2Nyb2xsVG9wKFIucG9zaXRpb24oKS50b3ApLGNsZWFySW50ZXJ2YWwoYykpfSw1MCk6KHgoYiwhMCksYShkb2N1bWVudCkuc2Nyb2xsVG9wKFIucG9zaXRpb24oKS50b3ApKSl9fWZ1bmN0aW9uIEsoKXthKGRvY3VtZW50LmJvZHkpLmRhdGEoXCJqc3BIaWphY2tcIil8fChhKGRvY3VtZW50LmJvZHkpLmRhdGEoXCJqc3BIaWphY2tcIiwhMCksYShkb2N1bWVudC5ib2R5KS5kZWxlZ2F0ZSgnYVtocmVmKj1cIiNcIl0nLFwiY2xpY2tcIixmdW5jdGlvbihiKXt2YXIgYyxkLGUsZixnLGgsaT10aGlzLmhyZWYuc3Vic3RyKDAsdGhpcy5ocmVmLmluZGV4T2YoXCIjXCIpKSxqPWxvY2F0aW9uLmhyZWY7aWYoLTEhPT1sb2NhdGlvbi5ocmVmLmluZGV4T2YoXCIjXCIpJiYoaj1sb2NhdGlvbi5ocmVmLnN1YnN0cigwLGxvY2F0aW9uLmhyZWYuaW5kZXhPZihcIiNcIikpKSxpPT09ail7Yz1lc2NhcGUodGhpcy5ocmVmLnN1YnN0cih0aGlzLmhyZWYuaW5kZXhPZihcIiNcIikrMSkpO3RyeXtkPWEoXCIjXCIrYysnLCBhW25hbWU9XCInK2MrJ1wiXScpfWNhdGNoKGspe3JldHVybn1kLmxlbmd0aCYmKGU9ZC5jbG9zZXN0KFwiLmpzcFNjcm9sbGFibGVcIiksZj1lLmRhdGEoXCJqc3BcIiksZi5zY3JvbGxUb0VsZW1lbnQoZCwhMCksZVswXS5zY3JvbGxJbnRvVmlldyYmKGc9YSh3aW5kb3cpLnNjcm9sbFRvcCgpLGg9ZC5vZmZzZXQoKS50b3AsKGc+aHx8aD5nK2Eod2luZG93KS5oZWlnaHQoKSkmJmVbMF0uc2Nyb2xsSW50b1ZpZXcoKSksYi5wcmV2ZW50RGVmYXVsdCgpKX19KSl9ZnVuY3Rpb24gTCgpe3ZhciBhLGIsYyxkLGUsZj0hMTtSLnVuYmluZChcInRvdWNoc3RhcnQuanNwIHRvdWNobW92ZS5qc3AgdG91Y2hlbmQuanNwIGNsaWNrLmpzcC10b3VjaGNsaWNrXCIpLmJpbmQoXCJ0b3VjaHN0YXJ0LmpzcFwiLGZ1bmN0aW9uKGcpe3ZhciBoPWcub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdO2E9eSgpLGI9eigpLGM9aC5wYWdlWCxkPWgucGFnZVksZT0hMSxmPSEwfSkuYmluZChcInRvdWNobW92ZS5qc3BcIixmdW5jdGlvbihnKXtpZihmKXt2YXIgaD1nLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSxpPWJiLGo9JDtyZXR1cm4gdGIuc2Nyb2xsVG8oYStjLWgucGFnZVgsYitkLWgucGFnZVkpLGU9ZXx8TWF0aC5hYnMoYy1oLnBhZ2VYKT41fHxNYXRoLmFicyhkLWgucGFnZVkpPjUsaT09YmImJmo9PSR9fSkuYmluZChcInRvdWNoZW5kLmpzcFwiLGZ1bmN0aW9uKCl7Zj0hMX0pLmJpbmQoXCJjbGljay5qc3AtdG91Y2hjbGlja1wiLGZ1bmN0aW9uKCl7cmV0dXJuIGU/KGU9ITEsITEpOnZvaWQgMH0pfWZ1bmN0aW9uIE0oKXt2YXIgYT16KCksYz15KCk7Yi5yZW1vdmVDbGFzcyhcImpzcFNjcm9sbGFibGVcIikudW5iaW5kKFwiLmpzcFwiKSxPLnVuYmluZChcIi5qc3BcIiksYi5yZXBsYWNlV2l0aCh5Yi5hcHBlbmQoTy5jaGlsZHJlbigpKSkseWIuc2Nyb2xsVG9wKGEpLHliLnNjcm9sbExlZnQoYykscGImJmNsZWFySW50ZXJ2YWwocGIpfXZhciBOLE8sUCxRLFIsUyxULFUsVixXLFgsWSxaLCQsXyxhYixiYixjYixkYixlYixmYixnYixoYixpYixqYixrYixsYixtYixuYixvYixwYixxYixyYixzYix0Yj10aGlzLHViPSEwLHZiPSEwLHdiPSExLHhiPSExLHliPWIuY2xvbmUoITEsITEpLmVtcHR5KCksemI9YS5mbi5td2hlZWxJbnRlbnQ/XCJtd2hlZWxJbnRlbnQuanNwXCI6XCJtb3VzZXdoZWVsLmpzcFwiO1wiYm9yZGVyLWJveFwiPT09Yi5jc3MoXCJib3gtc2l6aW5nXCIpPyhxYj0wLHJiPTApOihxYj1iLmNzcyhcInBhZGRpbmdUb3BcIikrXCIgXCIrYi5jc3MoXCJwYWRkaW5nUmlnaHRcIikrXCIgXCIrYi5jc3MoXCJwYWRkaW5nQm90dG9tXCIpK1wiIFwiK2IuY3NzKFwicGFkZGluZ0xlZnRcIikscmI9KHBhcnNlSW50KGIuY3NzKFwicGFkZGluZ0xlZnRcIiksMTApfHwwKSsocGFyc2VJbnQoYi5jc3MoXCJwYWRkaW5nUmlnaHRcIiksMTApfHwwKSksYS5leHRlbmQodGIse3JlaW5pdGlhbGlzZTpmdW5jdGlvbihiKXtiPWEuZXh0ZW5kKHt9LE4sYiksZChiKX0sc2Nyb2xsVG9FbGVtZW50OmZ1bmN0aW9uKGEsYixjKXt4KGEsYixjKX0sc2Nyb2xsVG86ZnVuY3Rpb24oYSxiLGMpe3coYSxjKSx2KGIsYyl9LHNjcm9sbFRvWDpmdW5jdGlvbihhLGIpe3coYSxiKX0sc2Nyb2xsVG9ZOmZ1bmN0aW9uKGEsYil7dihhLGIpfSxzY3JvbGxUb1BlcmNlbnRYOmZ1bmN0aW9uKGEsYil7dyhhKihTLVApLGIpfSxzY3JvbGxUb1BlcmNlbnRZOmZ1bmN0aW9uKGEsYil7dihhKihULVEpLGIpfSxzY3JvbGxCeTpmdW5jdGlvbihhLGIsYyl7dGIuc2Nyb2xsQnlYKGEsYyksdGIuc2Nyb2xsQnlZKGIsYyl9LHNjcm9sbEJ5WDpmdW5jdGlvbihhLGIpe3ZhciBjPXkoKStNYXRoWzA+YT9cImZsb29yXCI6XCJjZWlsXCJdKGEpLGQ9Yy8oUy1QKTtyKGQqYWIsYil9LHNjcm9sbEJ5WTpmdW5jdGlvbihhLGIpe3ZhciBjPXooKStNYXRoWzA+YT9cImZsb29yXCI6XCJjZWlsXCJdKGEpLGQ9Yy8oVC1RKTtwKGQqWixiKX0scG9zaXRpb25EcmFnWDpmdW5jdGlvbihhLGIpe3IoYSxiKX0scG9zaXRpb25EcmFnWTpmdW5jdGlvbihhLGIpe3AoYSxiKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXt9O2ZbYl09YyxhLmFuaW1hdGUoZix7ZHVyYXRpb246Ti5hbmltYXRlRHVyYXRpb24sZWFzaW5nOk4uYW5pbWF0ZUVhc2UscXVldWU6ITEsc3RlcDpkLGNvbXBsZXRlOmV9KX0sZ2V0Q29udGVudFBvc2l0aW9uWDpmdW5jdGlvbigpe3JldHVybiB5KCl9LGdldENvbnRlbnRQb3NpdGlvblk6ZnVuY3Rpb24oKXtyZXR1cm4geigpfSxnZXRDb250ZW50V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gU30sZ2V0Q29udGVudEhlaWdodDpmdW5jdGlvbigpe3JldHVybiBUfSxnZXRQZXJjZW50U2Nyb2xsZWRYOmZ1bmN0aW9uKCl7cmV0dXJuIHkoKS8oUy1QKX0sZ2V0UGVyY2VudFNjcm9sbGVkWTpmdW5jdGlvbigpe3JldHVybiB6KCkvKFQtUSl9LGdldElzU2Nyb2xsYWJsZUg6ZnVuY3Rpb24oKXtyZXR1cm4gWH0sZ2V0SXNTY3JvbGxhYmxlVjpmdW5jdGlvbigpe3JldHVybiBXfSxnZXRDb250ZW50UGFuZTpmdW5jdGlvbigpe3JldHVybiBPfSxzY3JvbGxUb0JvdHRvbTpmdW5jdGlvbihhKXtwKFosYSl9LGhpamFja0ludGVybmFsTGlua3M6YS5ub29wLGRlc3Ryb3k6ZnVuY3Rpb24oKXtNKCl9fSksZChjKX1yZXR1cm4gYj1hLmV4dGVuZCh7fSxhLmZuLmpTY3JvbGxQYW5lLmRlZmF1bHRzLGIpLGEuZWFjaChbXCJhcnJvd0J1dHRvblNwZWVkXCIsXCJ0cmFja0NsaWNrU3BlZWRcIixcImtleWJvYXJkU3BlZWRcIl0sZnVuY3Rpb24oKXtiW3RoaXNdPWJbdGhpc118fGIuc3BlZWR9KSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwianNwXCIpO2U/ZS5yZWluaXRpYWxpc2UoYik6KGEoXCJzY3JpcHRcIixkKS5maWx0ZXIoJ1t0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCJdLDpub3QoW3R5cGVdKScpLnJlbW92ZSgpLGU9bmV3IGMoZCxiKSxkLmRhdGEoXCJqc3BcIixlKSl9KX0sYS5mbi5qU2Nyb2xsUGFuZS5kZWZhdWx0cz17c2hvd0Fycm93czohMSxtYWludGFpblBvc2l0aW9uOiEwLHN0aWNrVG9Cb3R0b206ITEsc3RpY2tUb1JpZ2h0OiExLGNsaWNrT25UcmFjazohMCxhdXRvUmVpbml0aWFsaXNlOiExLGF1dG9SZWluaXRpYWxpc2VEZWxheTo1MDAsdmVydGljYWxEcmFnTWluSGVpZ2h0OjAsdmVydGljYWxEcmFnTWF4SGVpZ2h0Ojk5OTk5LGhvcml6b250YWxEcmFnTWluV2lkdGg6MCxob3Jpem9udGFsRHJhZ01heFdpZHRoOjk5OTk5LGNvbnRlbnRXaWR0aDp2b2lkIDAsYW5pbWF0ZVNjcm9sbDohMSxhbmltYXRlRHVyYXRpb246MzAwLGFuaW1hdGVFYXNlOlwibGluZWFyXCIsaGlqYWNrSW50ZXJuYWxMaW5rczohMSx2ZXJ0aWNhbEd1dHRlcjo0LGhvcml6b250YWxHdXR0ZXI6NCxtb3VzZVdoZWVsU3BlZWQ6MyxhcnJvd0J1dHRvblNwZWVkOjAsYXJyb3dSZXBlYXRGcmVxOjUwLGFycm93U2Nyb2xsT25Ib3ZlcjohMSx0cmFja0NsaWNrU3BlZWQ6MCx0cmFja0NsaWNrUmVwZWF0RnJlcTo3MCx2ZXJ0aWNhbEFycm93UG9zaXRpb25zOlwic3BsaXRcIixob3Jpem9udGFsQXJyb3dQb3NpdGlvbnM6XCJzcGxpdFwiLGVuYWJsZUtleWJvYXJkTmF2aWdhdGlvbjohMCxoaWRlRm9jdXM6ITEsa2V5Ym9hcmRTcGVlZDowLGluaXRpYWxEZWxheTozMDAsc3BlZWQ6MzAsc2Nyb2xsUGFnZVBlcmNlbnQ6Ljh9fSk7IiwiLyohXHJcbiAqIFxyXG4gKiAgICAgICAgICAgICBTaW1wbGVCYXIuanMgLSB2Mi40LjNcclxuICogICAgICAgICAgICAgU2Nyb2xsYmFycywgc2ltcGxlci5cclxuICogICAgICAgICAgICAgaHR0cHM6Ly9ncnNtdG8uZ2l0aHViLmlvL3NpbXBsZWJhci9cclxuICogICAgICAgICAgICAgXHJcbiAqICAgICAgICAgICAgIE1hZGUgYnkgQWRyaWVuIEdyc210byBmcm9tIGEgZm9yayBieSBKb25hdGhhbiBOaWNvbFxyXG4gKiAgICAgICAgICAgICBVbmRlciBNSVQgTGljZW5zZVxyXG4gKiAgICAgICAgIFxyXG4gKi9cclxuIWZ1bmN0aW9uKHQsbil7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9bigpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sbik6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5TaW1wbGVCYXI9bigpOnQuU2ltcGxlQmFyPW4oKX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtmdW5jdGlvbiBuKHIpe2lmKGVbcl0pcmV0dXJuIGVbcl0uZXhwb3J0czt2YXIgaT1lW3JdPXtleHBvcnRzOnt9LGlkOnIsbG9hZGVkOiExfTtyZXR1cm4gdFtyXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyxuKSxpLmxvYWRlZD0hMCxpLmV4cG9ydHN9dmFyIGU9e307cmV0dXJuIG4ubT10LG4uYz1lLG4ucD1cIlwiLG4oMCl9KFtmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcih0KXtyZXR1cm4gdCYmdC5fX2VzTW9kdWxlP3Q6e2RlZmF1bHQ6dH19ZnVuY3Rpb24gaSh0LG4pe2lmKCEodCBpbnN0YW5jZW9mIG4pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsbil7Zm9yKHZhciBlPTA7ZTxuLmxlbmd0aDtlKyspe3ZhciByPW5bZV07ci5lbnVtZXJhYmxlPXIuZW51bWVyYWJsZXx8ITEsci5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gciYmKHIud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIua2V5LHIpfX1yZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiBlJiZ0KG4ucHJvdG90eXBlLGUpLHImJnQobixyKSxufX0oKSxjPWUoMTk0KSxzPXIoYyksdT1lKDE5MSksYT1yKHUpLGY9ZSgxOTMpLGw9cihmKTtlKDE2OSksZSgxNzQpLGUoMTc3KSxlKDE3OCksZSgxNzIpLGUoMTc1KSxlKDE3MyksZSgxNzYpLGUoMTcwKSxlKDE3MSksZSgxMTMpLGUoMTYwKSxlKDE3OSksZSgxODApLGUoMTQyKSxlKDE0MyksZSgxNDQpLGUoMTQ1KSxlKDE0OCksZSgxNDYpLGUoMTQ3KSxlKDE0OSksZSgxNTApLGUoMTUxKSxlKDE1MiksZSgxNTQpLGUoMTUzKSxlKDE0MSksZSgxNjgpLGUoMTM4KSxlKDEzOSksZSgxNDApLGUoMTEyKSxlKDE2NSksZSgxNjMpLGUoMTYxKSxlKDE2NiksZSgxNjcpLGUoMTYyKSxlKDE2NCksZSgxNTUpLGUoMTU2KSxlKDE1NyksZSgxNTkpLGUoMTU4KSxlKDExMCksZSgxMTEpLGUoMTA2KSxlKDEwOSksZSgxMDgpLGUoMTA3KSxlKDY2KSxlKDEzMiksZSgxMzMpLGUoMTM1KSxlKDEzNCksZSgxMzEpLGUoMTM3KSxlKDEzNiksZSgxMTQpLGUoMTE1KSxlKDExNiksZSgxMTcpLGUoMTE4KSxlKDExOSksZSgxMjApLGUoMTIxKSxlKDEyMiksZSgxMjMpLGUoMTI1KSxlKDEyNCksZSgxMjYpLGUoMTI3KSxlKDEyOCksZSgxMjkpLGUoMTMwKSxlKDE4MSksZSgxODQpLGUoMTgyKSxlKDE4MyksZSgxODYpLGUoMTg1KSxlKDE4OSksZSgxODgpLGUoMTg3KSxlKDE5MiksZSgxOTApO3ZhciBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChuLGUpe2kodGhpcyx0KSx0aGlzLmVsPW4sdGhpcy5mbGFzaFRpbWVvdXQsdGhpcy5jb250ZW50RWwsdGhpcy5zY3JvbGxDb250ZW50RWwsdGhpcy5kcmFnT2Zmc2V0PXt4OjAseTowfSx0aGlzLmlzVmlzaWJsZT17eDohMCx5OiEwfSx0aGlzLnNjcm9sbE9mZnNldEF0dHI9e3g6XCJzY3JvbGxMZWZ0XCIseTpcInNjcm9sbFRvcFwifSx0aGlzLnNpemVBdHRyPXt4Olwib2Zmc2V0V2lkdGhcIix5Olwib2Zmc2V0SGVpZ2h0XCJ9LHRoaXMuc2Nyb2xsU2l6ZUF0dHI9e3g6XCJzY3JvbGxXaWR0aFwiLHk6XCJzY3JvbGxIZWlnaHRcIn0sdGhpcy5vZmZzZXRBdHRyPXt4OlwibGVmdFwiLHk6XCJ0b3BcIn0sdGhpcy5nbG9iYWxPYnNlcnZlcix0aGlzLm11dGF0aW9uT2JzZXJ2ZXIsdGhpcy5yZXNpemVPYnNlcnZlcix0aGlzLmN1cnJlbnRBeGlzLHRoaXMub3B0aW9ucz1PYmplY3QuYXNzaWduKHt9LHQuZGVmYXVsdE9wdGlvbnMsZSksdGhpcy5jbGFzc05hbWVzPXRoaXMub3B0aW9ucy5jbGFzc05hbWVzLHRoaXMuc2Nyb2xsYmFyV2lkdGg9KDAscy5kZWZhdWx0KSgpLHRoaXMub2Zmc2V0U2l6ZT0yMCx0aGlzLmZsYXNoU2Nyb2xsYmFyPXRoaXMuZmxhc2hTY3JvbGxiYXIuYmluZCh0aGlzKSx0aGlzLm9uRHJhZ1k9dGhpcy5vbkRyYWdZLmJpbmQodGhpcyksdGhpcy5vbkRyYWdYPXRoaXMub25EcmFnWC5iaW5kKHRoaXMpLHRoaXMub25TY3JvbGxZPXRoaXMub25TY3JvbGxZLmJpbmQodGhpcyksdGhpcy5vblNjcm9sbFg9dGhpcy5vblNjcm9sbFguYmluZCh0aGlzKSx0aGlzLmRyYWc9dGhpcy5kcmFnLmJpbmQodGhpcyksdGhpcy5vbkVuZERyYWc9dGhpcy5vbkVuZERyYWcuYmluZCh0aGlzKSx0aGlzLm9uTW91c2VFbnRlcj10aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpLHRoaXMucmVjYWxjdWxhdGU9KDAsYS5kZWZhdWx0KSh0aGlzLnJlY2FsY3VsYXRlLDEwMCx7bGVhZGluZzohMCx0cmFpbGluZzohMX0pLHRoaXMuaW5pdCgpfXJldHVybiBvKHQsW3trZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmVsLlNpbXBsZUJhcj10aGlzLHRoaXMuaW5pdERPTSgpLHRoaXMuc2Nyb2xsYmFyWD10aGlzLnRyYWNrWC5xdWVyeVNlbGVjdG9yKFwiLlwiK3RoaXMuY2xhc3NOYW1lcy5zY3JvbGxiYXIpLHRoaXMuc2Nyb2xsYmFyWT10aGlzLnRyYWNrWS5xdWVyeVNlbGVjdG9yKFwiLlwiK3RoaXMuY2xhc3NOYW1lcy5zY3JvbGxiYXIpLHRoaXMuc2Nyb2xsQ29udGVudEVsLnN0eWxlLnBhZGRpbmdSaWdodD0odGhpcy5zY3JvbGxiYXJXaWR0aHx8dGhpcy5vZmZzZXRTaXplKStcInB4XCIsdGhpcy5zY3JvbGxDb250ZW50RWwuc3R5bGUubWFyZ2luQm90dG9tPVwiLVwiKygyKnRoaXMuc2Nyb2xsYmFyV2lkdGh8fHRoaXMub2Zmc2V0U2l6ZSkrXCJweFwiLHRoaXMuY29udGVudEVsLnN0eWxlLnBhZGRpbmdCb3R0b209KHRoaXMuc2Nyb2xsYmFyV2lkdGh8fHRoaXMub2Zmc2V0U2l6ZSkrXCJweFwiLDAhPT10aGlzLnNjcm9sbGJhcldpZHRoJiYodGhpcy5jb250ZW50RWwuc3R5bGUubWFyZ2luUmlnaHQ9XCItXCIrdGhpcy5zY3JvbGxiYXJXaWR0aCtcInB4XCIpLHRoaXMucmVjYWxjdWxhdGUoKSx0aGlzLmluaXRMaXN0ZW5lcnMoKX19LHtrZXk6XCJpbml0RE9NXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKEFycmF5LmZyb20odGhpcy5lbC5jaGlsZHJlbikuZmluZChmdW5jdGlvbihuKXtyZXR1cm4gbi5jbGFzc0xpc3QuY29udGFpbnModC5jbGFzc05hbWVzLnNjcm9sbENvbnRlbnQpfSkpdGhpcy50cmFja1g9dGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLlwiK3RoaXMuY2xhc3NOYW1lcy50cmFjaytcIi5ob3Jpem9udGFsXCIpLHRoaXMudHJhY2tZPXRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5cIit0aGlzLmNsYXNzTmFtZXMudHJhY2srXCIudmVydGljYWxcIiksdGhpcy5zY3JvbGxDb250ZW50RWw9dGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLlwiK3RoaXMuY2xhc3NOYW1lcy5zY3JvbGxDb250ZW50KSx0aGlzLmNvbnRlbnRFbD10aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuXCIrdGhpcy5jbGFzc05hbWVzLmNvbnRlbnQpO2Vsc2V7Zm9yKHRoaXMuc2Nyb2xsQ29udGVudEVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5jb250ZW50RWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLnNjcm9sbENvbnRlbnRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3NOYW1lcy5zY3JvbGxDb250ZW50KSx0aGlzLmNvbnRlbnRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3NOYW1lcy5jb250ZW50KTt0aGlzLmVsLmZpcnN0Q2hpbGQ7KXRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKHRoaXMuZWwuZmlyc3RDaGlsZCk7dGhpcy5zY3JvbGxDb250ZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWwpLHRoaXMuZWwuYXBwZW5kQ2hpbGQodGhpcy5zY3JvbGxDb250ZW50RWwpfWlmKCF0aGlzLnRyYWNrWHx8IXRoaXMudHJhY2tZKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc05hbWVzLnRyYWNrKSxlLmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc05hbWVzLnNjcm9sbGJhciksbi5hcHBlbmRDaGlsZChlKSx0aGlzLnRyYWNrWD1uLmNsb25lTm9kZSghMCksdGhpcy50cmFja1guY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIiksdGhpcy50cmFja1k9bi5jbG9uZU5vZGUoITApLHRoaXMudHJhY2tZLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKSx0aGlzLmVsLmluc2VydEJlZm9yZSh0aGlzLnRyYWNrWCx0aGlzLmVsLmZpcnN0Q2hpbGQpLHRoaXMuZWwuaW5zZXJ0QmVmb3JlKHRoaXMudHJhY2tZLHRoaXMuZWwuZmlyc3RDaGlsZCl9dGhpcy5lbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNpbXBsZWJhclwiLFwiaW5pdFwiKX19LHtrZXk6XCJpbml0TGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMub3B0aW9ucy5hdXRvSGlkZSYmdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHRoaXMub25Nb3VzZUVudGVyKSx0aGlzLnNjcm9sbGJhclkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25EcmFnWSksdGhpcy5zY3JvbGxiYXJYLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uRHJhZ1gpLHRoaXMuc2Nyb2xsQ29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLm9uU2Nyb2xsWSksdGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMub25TY3JvbGxYKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgTXV0YXRpb25PYnNlcnZlciYmKHRoaXMubXV0YXRpb25PYnNlcnZlcj1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7KHQuaXNDaGlsZE5vZGUobi50YXJnZXQpfHxuLmFkZGVkTm9kZXMubGVuZ3RoKSYmdC5yZWNhbGN1bGF0ZSgpfSl9KSx0aGlzLm11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsLHthdHRyaWJ1dGVzOiEwLGNoaWxkTGlzdDohMCxjaGFyYWN0ZXJEYXRhOiEwLHN1YnRyZWU6ITB9KSksdGhpcy5yZXNpemVPYnNlcnZlcj1uZXcgbC5kZWZhdWx0KHRoaXMucmVjYWxjdWxhdGUuYmluZCh0aGlzKSksdGhpcy5yZXNpemVPYnNlcnZlci5vYnNlcnZlKHRoaXMuZWwpfX0se2tleTpcInJlbW92ZUxpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmF1dG9IaWRlJiZ0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdGhpcy5vbk1vdXNlRW50ZXIpLHRoaXMuc2Nyb2xsYmFyWC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbkRyYWdYKSx0aGlzLnNjcm9sbGJhclkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25EcmFnWSksdGhpcy5zY3JvbGxDb250ZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMub25TY3JvbGxZKSx0aGlzLmNvbnRlbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbFgpLHRoaXMubXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCksdGhpcy5yZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCl9fSx7a2V5Olwib25EcmFnWFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMub25EcmFnKHQsXCJ4XCIpfX0se2tleTpcIm9uRHJhZ1lcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLm9uRHJhZyh0LFwieVwiKX19LHtrZXk6XCJvbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJ5XCI7dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPVwieVwiPT09bj90aGlzLnNjcm9sbGJhclk6dGhpcy5zY3JvbGxiYXJYLHI9XCJ5XCI9PT1uP3QucGFnZVk6dC5wYWdlWDt0aGlzLmRyYWdPZmZzZXRbbl09ci1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RoaXMub2Zmc2V0QXR0cltuXV0sdGhpcy5jdXJyZW50QXhpcz1uLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLmRyYWcpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbkVuZERyYWcpfX0se2tleTpcImRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj12b2lkIDAsZT12b2lkIDAscj12b2lkIDA7dC5wcmV2ZW50RGVmYXVsdCgpLFwieVwiPT09dGhpcy5jdXJyZW50QXhpcz8obj10LnBhZ2VZLGU9dGhpcy50cmFja1kscj10aGlzLnNjcm9sbENvbnRlbnRFbCk6KG49dC5wYWdlWCxlPXRoaXMudHJhY2tYLHI9dGhpcy5jb250ZW50RWwpO3ZhciBpPW4tZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0aGlzLm9mZnNldEF0dHJbdGhpcy5jdXJyZW50QXhpc11dLXRoaXMuZHJhZ09mZnNldFt0aGlzLmN1cnJlbnRBeGlzXSxvPWkvZVt0aGlzLnNpemVBdHRyW3RoaXMuY3VycmVudEF4aXNdXSxjPW8qdGhpcy5jb250ZW50RWxbdGhpcy5zY3JvbGxTaXplQXR0clt0aGlzLmN1cnJlbnRBeGlzXV07clt0aGlzLnNjcm9sbE9mZnNldEF0dHJbdGhpcy5jdXJyZW50QXhpc11dPWN9fSx7a2V5Olwib25FbmREcmFnXCIsdmFsdWU6ZnVuY3Rpb24oKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5kcmFnKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25FbmREcmFnKX19LHtrZXk6XCJyZXNpemVTY3JvbGxiYXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcInlcIixuPXZvaWQgMCxlPXZvaWQgMCxyPXZvaWQgMCxpPXZvaWQgMCxvPXZvaWQgMDtcInhcIj09PXQ/KG49dGhpcy50cmFja1gsZT10aGlzLnNjcm9sbGJhclgscj10aGlzLmNvbnRlbnRFbFt0aGlzLnNjcm9sbE9mZnNldEF0dHJbdF1dLGk9dGhpcy5jb250ZW50U2l6ZVgsbz10aGlzLnNjcm9sbGJhclhTaXplKToobj10aGlzLnRyYWNrWSxlPXRoaXMuc2Nyb2xsYmFyWSxyPXRoaXMuc2Nyb2xsQ29udGVudEVsW3RoaXMuc2Nyb2xsT2Zmc2V0QXR0clt0XV0saT10aGlzLmNvbnRlbnRTaXplWSxvPXRoaXMuc2Nyb2xsYmFyWVNpemUpO3ZhciBjPW8vaSxzPXIvKGktbyksdT1NYXRoLm1heCh+fihjKihvLTIpKS0yLHRoaXMub3B0aW9ucy5zY3JvbGxiYXJNaW5TaXplKSxhPX5+KChvLTQtdSkqcysyKTt0aGlzLmlzVmlzaWJsZVt0XT1vPGksdGhpcy5pc1Zpc2libGVbdF0/KG4uc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIixcInhcIj09PXQ/KGUuc3R5bGUubGVmdD1hK1wicHhcIixlLnN0eWxlLndpZHRoPXUrXCJweFwiKTooZS5zdHlsZS50b3A9YStcInB4XCIsZS5zdHlsZS5oZWlnaHQ9dStcInB4XCIpKTpuLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIn19LHtrZXk6XCJvblNjcm9sbFhcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZmxhc2hTY3JvbGxiYXIoXCJ4XCIpfX0se2tleTpcIm9uU2Nyb2xsWVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5mbGFzaFNjcm9sbGJhcihcInlcIil9fSx7a2V5Olwib25Nb3VzZUVudGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZsYXNoU2Nyb2xsYmFyKFwieFwiKSx0aGlzLmZsYXNoU2Nyb2xsYmFyKFwieVwiKX19LHtrZXk6XCJmbGFzaFNjcm9sbGJhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlwieVwiO3RoaXMucmVzaXplU2Nyb2xsYmFyKHQpLHRoaXMuc2hvd1Njcm9sbGJhcih0KX19LHtrZXk6XCJzaG93U2Nyb2xsYmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06XCJ5XCI7dGhpcy5pc1Zpc2libGVbdF0mJihcInhcIj09PXQ/dGhpcy5zY3JvbGxiYXJYLmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpOnRoaXMuc2Nyb2xsYmFyWS5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKSx0aGlzLm9wdGlvbnMuYXV0b0hpZGUmJihcIm51bWJlclwiPT10eXBlb2YgdGhpcy5mbGFzaFRpbWVvdXQmJndpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5mbGFzaFRpbWVvdXQpLHRoaXMuZmxhc2hUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuaGlkZVNjcm9sbGJhci5iaW5kKHRoaXMpLDFlMykpKX19LHtrZXk6XCJoaWRlU2Nyb2xsYmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbGJhclguY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIiksdGhpcy5zY3JvbGxiYXJZLmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpLFwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLmZsYXNoVGltZW91dCYmd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmZsYXNoVGltZW91dCl9fSx7a2V5OlwicmVjYWxjdWxhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY29udGVudFNpemVYPXRoaXMuY29udGVudEVsW3RoaXMuc2Nyb2xsU2l6ZUF0dHIueF0sdGhpcy5jb250ZW50U2l6ZVk9dGhpcy5jb250ZW50RWxbdGhpcy5zY3JvbGxTaXplQXR0ci55XS0odGhpcy5zY3JvbGxiYXJXaWR0aHx8dGhpcy5vZmZzZXRTaXplKSx0aGlzLnNjcm9sbGJhclhTaXplPXRoaXMudHJhY2tYW3RoaXMuc2l6ZUF0dHIueF0sdGhpcy5zY3JvbGxiYXJZU2l6ZT10aGlzLnRyYWNrWVt0aGlzLnNpemVBdHRyLnldLHRoaXMucmVzaXplU2Nyb2xsYmFyKFwieFwiKSx0aGlzLnJlc2l6ZVNjcm9sbGJhcihcInlcIiksdGhpcy5vcHRpb25zLmF1dG9IaWRlfHwodGhpcy5zaG93U2Nyb2xsYmFyKFwieFwiKSx0aGlzLnNob3dTY3JvbGxiYXIoXCJ5XCIpKX19LHtrZXk6XCJnZXRTY3JvbGxFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGxDb250ZW50RWx9fSx7a2V5OlwiZ2V0Q29udGVudEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnRFbH19LHtrZXk6XCJ1bk1vdW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxpc3RlbmVycygpLHRoaXMuZWwuU2ltcGxlQmFyPW51bGx9fSx7a2V5OlwiaXNDaGlsZE5vZGVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gbnVsbCE9PXQmJih0PT09dGhpcy5lbHx8dGhpcy5pc0NoaWxkTm9kZSh0LnBhcmVudE5vZGUpKX19XSxbe2tleTpcImluaXRIdG1sQXBpXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmluaXRET01Mb2FkZWRFbGVtZW50cz10aGlzLmluaXRET01Mb2FkZWRFbGVtZW50cy5iaW5kKHRoaXMpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyJiYodGhpcy5nbG9iYWxPYnNlcnZlcj1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7QXJyYXkuZnJvbShuLmFkZGVkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24obil7MT09PW4ubm9kZVR5cGUmJihuLmhhc0F0dHJpYnV0ZShcImRhdGEtc2ltcGxlYmFyXCIpPyFuLlNpbXBsZUJhciYmbmV3IHQobix0LmdldEVsT3B0aW9ucyhuKSk6QXJyYXkuZnJvbShuLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1zaW1wbGViYXJdXCIpKS5mb3JFYWNoKGZ1bmN0aW9uKG4peyFuLlNpbXBsZUJhciYmbmV3IHQobix0LmdldEVsT3B0aW9ucyhuKSl9KSl9KSxBcnJheS5mcm9tKG4ucmVtb3ZlZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpezE9PT10Lm5vZGVUeXBlJiYodC5oYXNBdHRyaWJ1dGUoXCJkYXRhLXNpbXBsZWJhclwiKT90LlNpbXBsZUJhciYmdC5TaW1wbGVCYXIudW5Nb3VudCgpOkFycmF5LmZyb20odC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtc2ltcGxlYmFyXVwiKSkuZm9yRWFjaChmdW5jdGlvbih0KXt0LlNpbXBsZUJhciYmdC5TaW1wbGVCYXIudW5Nb3VudCgpfSkpfSl9KX0pLHRoaXMuZ2xvYmFsT2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudCx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KSksXCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8XCJsb2FkaW5nXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlJiYhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP3dpbmRvdy5zZXRUaW1lb3V0KHRoaXMuaW5pdERPTUxvYWRlZEVsZW1lbnRzLmJpbmQodGhpcykpOihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLHRoaXMuaW5pdERPTUxvYWRlZEVsZW1lbnRzKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzLmluaXRET01Mb2FkZWRFbGVtZW50cykpfX0se2tleTpcImdldEVsT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKG4pe3ZhciBlPU9iamVjdC5rZXlzKHQuaHRtbEF0dHJpYnV0ZXMpLnJlZHVjZShmdW5jdGlvbihlLHIpe3ZhciBpPXQuaHRtbEF0dHJpYnV0ZXNbcl07cmV0dXJuIG4uaGFzQXR0cmlidXRlKGkpJiYoZVtyXT1KU09OLnBhcnNlKG4uZ2V0QXR0cmlidXRlKGkpfHwhMCkpLGV9LHt9KTtyZXR1cm4gZX19LHtrZXk6XCJyZW1vdmVPYnNlcnZlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5nbG9iYWxPYnNlcnZlci5kaXNjb25uZWN0KCl9fSx7a2V5OlwiaW5pdERPTUxvYWRlZEVsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLHRoaXMuaW5pdERPTUxvYWRlZEVsZW1lbnRzKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIix0aGlzLmluaXRET01Mb2FkZWRFbGVtZW50cyksQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtc2ltcGxlYmFyXVwiKSkuZm9yRWFjaChmdW5jdGlvbihuKXtuLlNpbXBsZUJhcnx8bmV3IHQobix0LmdldEVsT3B0aW9ucyhuKSl9KX19LHtrZXk6XCJkZWZhdWx0T3B0aW9uc1wiLGdldDpmdW5jdGlvbigpe3JldHVybnthdXRvSGlkZTohMCxjbGFzc05hbWVzOntjb250ZW50Olwic2ltcGxlYmFyLWNvbnRlbnRcIixzY3JvbGxDb250ZW50Olwic2ltcGxlYmFyLXNjcm9sbC1jb250ZW50XCIsc2Nyb2xsYmFyOlwic2ltcGxlYmFyLXNjcm9sbGJhclwiLHRyYWNrOlwic2ltcGxlYmFyLXRyYWNrXCJ9LHNjcm9sbGJhck1pblNpemU6MjV9fX0se2tleTpcImh0bWxBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2F1dG9IaWRlOlwiZGF0YS1zaW1wbGViYXItYXV0b2hpZGVcIixzY3JvbGxiYXJNaW5TaXplOlwiZGF0YS1zaW1wbGViYXItc2Nyb2xsYmFyLW1pbi1zaXplXCJ9fX1dKSx0fSgpO24uZGVmYXVsdD1oLGguaW5pdEh0bWxBcGkoKSx0LmV4cG9ydHM9bi5kZWZhdWx0fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzKSxpPWUoMzQpLG89ZSgxMSksYz1lKDE2KSxzPWUoMTIpLHU9XCJwcm90b3R5cGVcIixhPWZ1bmN0aW9uKHQsbixlKXt2YXIgZixsLGgsdixwPXQmYS5GLGQ9dCZhLkcseT10JmEuUyxnPXQmYS5QLG09dCZhLkIsYj1kP3I6eT9yW25dfHwocltuXT17fSk6KHJbbl18fHt9KVt1XSxfPWQ/aTppW25dfHwoaVtuXT17fSksdz1fW3VdfHwoX1t1XT17fSk7ZCYmKGU9bik7Zm9yKGYgaW4gZSlsPSFwJiZiJiZ2b2lkIDAhPT1iW2ZdLGg9KGw/YjplKVtmXSx2PW0mJmw/cyhoLHIpOmcmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGg/cyhGdW5jdGlvbi5jYWxsLGgpOmgsYiYmYyhiLGYsaCx0JmEuVSksX1tmXSE9aCYmbyhfLGYsdiksZyYmd1tmXSE9aCYmKHdbZl09aCl9O3IuY29yZT1pLGEuRj0xLGEuRz0yLGEuUz00LGEuUD04LGEuQj0xNixhLlc9MzIsYS5VPTY0LGEuUj0xMjgsdC5leHBvcnRzPWF9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZighcih0KSl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYW4gb2JqZWN0IVwiKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsbil7dmFyIGU9dC5leHBvcnRzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5NYXRoPT1NYXRoP3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmc2VsZi5NYXRoPT1NYXRoP3NlbGY6RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1wibnVtYmVyXCI9PXR5cGVvZiBfX2cmJihfX2c9ZSl9LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0P251bGwhPT10OlwiZnVuY3Rpb25cIj09dHlwZW9mIHR9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg2MCkoXCJ3a3NcIiksaT1lKDIyKSxvPWUoMykuU3ltYm9sLGM9XCJmdW5jdGlvblwiPT10eXBlb2YgbyxzPXQuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gclt0XXx8KHJbdF09YyYmb1t0XXx8KGM/bzppKShcIlN5bWJvbC5cIit0KSl9O3Muc3RvcmU9cn0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiEhdCgpfWNhdGNoKHQpe3JldHVybiEwfX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIpLGk9ZSg3MSksbz1lKDQwKSxjPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTtuLmY9ZSg5KT9PYmplY3QuZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24odCxuLGUpe2lmKHIodCksbj1vKG4sITApLHIoZSksaSl0cnl7cmV0dXJuIGModCxuLGUpfWNhdGNoKHQpe31pZihcImdldFwiaW4gZXx8XCJzZXRcImluIGUpdGhyb3cgVHlwZUVycm9yKFwiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhXCIpO3JldHVyblwidmFsdWVcImluIGUmJih0W25dPWUudmFsdWUpLHR9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyMCksaT1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9pKHIodCksOTAwNzE5OTI1NDc0MDk5MSk6MH19LGZ1bmN0aW9uKHQsbixlKXt0LmV4cG9ydHM9IWUoNikoZnVuY3Rpb24oKXtyZXR1cm4gNyE9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwiYVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gN319KS5hfSl9LGZ1bmN0aW9uKHQsbil7dmFyIGU9e30uaGFzT3duUHJvcGVydHk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4pfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNyksaT1lKDE5KTt0LmV4cG9ydHM9ZSg5KT9mdW5jdGlvbih0LG4sZSl7cmV0dXJuIHIuZih0LG4saSgxLGUpKX06ZnVuY3Rpb24odCxuLGUpe3JldHVybiB0W25dPWUsdH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDE3KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe2lmKHIodCksdm9pZCAwPT09bilyZXR1cm4gdDtzd2l0Y2goZSl7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdC5jYWxsKG4sZSl9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5jYWxsKG4sZSxyKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihlLHIsaSl7cmV0dXJuIHQuY2FsbChuLGUscixpKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkobixhcmd1bWVudHMpfX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDU0KSxpPWUoMTgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gcihpKHQpKX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjtpZihlKDkpKXt2YXIgcj1lKDI3KSxpPWUoMyksbz1lKDYpLGM9ZSgxKSxzPWUoNjQpLHU9ZSg4OCksYT1lKDEyKSxmPWUoMjQpLGw9ZSgxOSksaD1lKDExKSx2PWUoMjkpLHA9ZSgyMCksZD1lKDgpLHk9ZSg4NyksZz1lKDMxKSxtPWUoNDApLGI9ZSgxMCksXz1lKDQ5KSx3PWUoNCksUz1lKDIxKSx4PWUoNTUpLEU9ZSgzNiksTz1lKDM4KSxNPWUoMzcpLmYsQT1lKDY1KSxMPWUoMjIpLGo9ZSg1KSxrPWUoMzMpLFQ9ZSg0OCksUD1lKDYxKSxGPWUoNjYpLE49ZSgyNiksQz1lKDQ0KSxSPWUoNDYpLEQ9ZSg0NyksST1lKDY3KSxXPWUoNyksej1lKDE1KSxCPVcuZixZPXouZixYPWkuUmFuZ2VFcnJvcixHPWkuVHlwZUVycm9yLFY9aS5VaW50OEFycmF5LFU9XCJBcnJheUJ1ZmZlclwiLHE9XCJTaGFyZWRcIitVLEg9XCJCWVRFU19QRVJfRUxFTUVOVFwiLEs9XCJwcm90b3R5cGVcIixKPUFycmF5W0tdLCQ9dS5BcnJheUJ1ZmZlcixRPXUuRGF0YVZpZXcsWj1rKDApLHR0PWsoMiksbnQ9aygzKSxldD1rKDQpLHJ0PWsoNSksaXQ9ayg2KSxvdD1UKCEwKSxjdD1UKCExKSxzdD1GLnZhbHVlcyx1dD1GLmtleXMsYXQ9Ri5lbnRyaWVzLGZ0PUoubGFzdEluZGV4T2YsbHQ9Si5yZWR1Y2UsaHQ9Si5yZWR1Y2VSaWdodCx2dD1KLmpvaW4scHQ9Si5zb3J0LGR0PUouc2xpY2UseXQ9Si50b1N0cmluZyxndD1KLnRvTG9jYWxlU3RyaW5nLG10PWooXCJpdGVyYXRvclwiKSxidD1qKFwidG9TdHJpbmdUYWdcIiksX3Q9TChcInR5cGVkX2NvbnN0cnVjdG9yXCIpLHd0PUwoXCJkZWZfY29uc3RydWN0b3JcIiksU3Q9cy5DT05TVFIseHQ9cy5UWVBFRCxFdD1zLlZJRVcsT3Q9XCJXcm9uZyBsZW5ndGghXCIsTXQ9aygxLGZ1bmN0aW9uKHQsbil7cmV0dXJuIFR0KFAodCx0W3d0XSksbil9KSxBdD1vKGZ1bmN0aW9uKCl7cmV0dXJuIDE9PT1uZXcgVihuZXcgVWludDE2QXJyYXkoWzFdKS5idWZmZXIpWzBdfSksTHQ9ISFWJiYhIVZbS10uc2V0JiZvKGZ1bmN0aW9uKCl7bmV3IFYoMSkuc2V0KHt9KX0pLGp0PWZ1bmN0aW9uKHQsbil7dmFyIGU9cCh0KTtpZihlPDB8fGUlbil0aHJvdyBYKFwiV3Jvbmcgb2Zmc2V0IVwiKTtyZXR1cm4gZX0sa3Q9ZnVuY3Rpb24odCl7aWYodyh0KSYmeHQgaW4gdClyZXR1cm4gdDt0aHJvdyBHKHQrXCIgaXMgbm90IGEgdHlwZWQgYXJyYXkhXCIpfSxUdD1mdW5jdGlvbih0LG4pe2lmKCEodyh0KSYmX3QgaW4gdCkpdGhyb3cgRyhcIkl0IGlzIG5vdCBhIHR5cGVkIGFycmF5IGNvbnN0cnVjdG9yIVwiKTtyZXR1cm4gbmV3IHQobil9LFB0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIEZ0KFAodCx0W3d0XSksbil9LEZ0PWZ1bmN0aW9uKHQsbil7Zm9yKHZhciBlPTAscj1uLmxlbmd0aCxpPVR0KHQscik7cj5lOylpW2VdPW5bZSsrXTtyZXR1cm4gaX0sTnQ9ZnVuY3Rpb24odCxuLGUpe0IodCxuLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZFtlXX19KX0sQ3Q9ZnVuY3Rpb24odCl7dmFyIG4sZSxyLGksbyxjLHM9Uyh0KSx1PWFyZ3VtZW50cy5sZW5ndGgsZj11PjE/YXJndW1lbnRzWzFdOnZvaWQgMCxsPXZvaWQgMCE9PWYsaD1BKHMpO2lmKHZvaWQgMCE9aCYmIXgoaCkpe2ZvcihjPWguY2FsbChzKSxyPVtdLG49MDshKG89Yy5uZXh0KCkpLmRvbmU7bisrKXIucHVzaChvLnZhbHVlKTtzPXJ9Zm9yKGwmJnU+MiYmKGY9YShmLGFyZ3VtZW50c1syXSwyKSksbj0wLGU9ZChzLmxlbmd0aCksaT1UdCh0aGlzLGUpO2U+bjtuKyspaVtuXT1sP2Yoc1tuXSxuKTpzW25dO3JldHVybiBpfSxSdD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLG49YXJndW1lbnRzLmxlbmd0aCxlPVR0KHRoaXMsbik7bj50OyllW3RdPWFyZ3VtZW50c1t0KytdO3JldHVybiBlfSxEdD0hIVYmJm8oZnVuY3Rpb24oKXtndC5jYWxsKG5ldyBWKDEpKX0pLEl0PWZ1bmN0aW9uKCl7cmV0dXJuIGd0LmFwcGx5KER0P2R0LmNhbGwoa3QodGhpcykpOmt0KHRoaXMpLGFyZ3VtZW50cyl9LFd0PXtjb3B5V2l0aGluOmZ1bmN0aW9uKHQsbil7cmV0dXJuIEkuY2FsbChrdCh0aGlzKSx0LG4sYXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDApfSxldmVyeTpmdW5jdGlvbih0KXtyZXR1cm4gZXQoa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGZpbGw6ZnVuY3Rpb24odCl7cmV0dXJuIEQuYXBwbHkoa3QodGhpcyksYXJndW1lbnRzKX0sZmlsdGVyOmZ1bmN0aW9uKHQpe3JldHVybiBQdCh0aGlzLHR0KGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApKX0sZmluZDpmdW5jdGlvbih0KXtyZXR1cm4gcnQoa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGZpbmRJbmRleDpmdW5jdGlvbih0KXtyZXR1cm4gaXQoa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGZvckVhY2g6ZnVuY3Rpb24odCl7WihrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0saW5kZXhPZjpmdW5jdGlvbih0KXtyZXR1cm4gY3Qoa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGluY2x1ZGVzOmZ1bmN0aW9uKHQpe3JldHVybiBvdChrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX0sam9pbjpmdW5jdGlvbih0KXtyZXR1cm4gdnQuYXBwbHkoa3QodGhpcyksYXJndW1lbnRzKX0sbGFzdEluZGV4T2Y6ZnVuY3Rpb24odCl7cmV0dXJuIGZ0LmFwcGx5KGt0KHRoaXMpLGFyZ3VtZW50cyl9LG1hcDpmdW5jdGlvbih0KXtyZXR1cm4gTXQoa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LHJlZHVjZTpmdW5jdGlvbih0KXtyZXR1cm4gbHQuYXBwbHkoa3QodGhpcyksYXJndW1lbnRzKX0scmVkdWNlUmlnaHQ6ZnVuY3Rpb24odCl7cmV0dXJuIGh0LmFwcGx5KGt0KHRoaXMpLGFyZ3VtZW50cyl9LHJldmVyc2U6ZnVuY3Rpb24oKXtmb3IodmFyIHQsbj10aGlzLGU9a3QobikubGVuZ3RoLHI9TWF0aC5mbG9vcihlLzIpLGk9MDtpPHI7KXQ9bltpXSxuW2krK109blstLWVdLG5bZV09dDtyZXR1cm4gbn0sc29tZTpmdW5jdGlvbih0KXtyZXR1cm4gbnQoa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LHNvcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHB0LmNhbGwoa3QodGhpcyksdCl9LHN1YmFycmF5OmZ1bmN0aW9uKHQsbil7dmFyIGU9a3QodGhpcykscj1lLmxlbmd0aCxpPWcodCxyKTtyZXR1cm4gbmV3KFAoZSxlW3d0XSkpKGUuYnVmZmVyLGUuYnl0ZU9mZnNldCtpKmUuQllURVNfUEVSX0VMRU1FTlQsZCgodm9pZCAwPT09bj9yOmcobixyKSktaSkpfX0senQ9ZnVuY3Rpb24odCxuKXtyZXR1cm4gUHQodGhpcyxkdC5jYWxsKGt0KHRoaXMpLHQsbikpfSxCdD1mdW5jdGlvbih0KXtrdCh0aGlzKTt2YXIgbj1qdChhcmd1bWVudHNbMV0sMSksZT10aGlzLmxlbmd0aCxyPVModCksaT1kKHIubGVuZ3RoKSxvPTA7aWYoaStuPmUpdGhyb3cgWChPdCk7Zm9yKDtvPGk7KXRoaXNbbitvXT1yW28rK119LFl0PXtlbnRyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIGF0LmNhbGwoa3QodGhpcykpfSxrZXlzOmZ1bmN0aW9uKCl7cmV0dXJuIHV0LmNhbGwoa3QodGhpcykpfSx2YWx1ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gc3QuY2FsbChrdCh0aGlzKSl9fSxYdD1mdW5jdGlvbih0LG4pe3JldHVybiB3KHQpJiZ0W3h0XSYmXCJzeW1ib2xcIiE9dHlwZW9mIG4mJm4gaW4gdCYmU3RyaW5nKCtuKT09U3RyaW5nKG4pfSxHdD1mdW5jdGlvbih0LG4pe3JldHVybiBYdCh0LG49bShuLCEwKSk/bCgyLHRbbl0pOlkodCxuKX0sVnQ9ZnVuY3Rpb24odCxuLGUpe3JldHVybiEoWHQodCxuPW0obiwhMCkpJiZ3KGUpJiZiKGUsXCJ2YWx1ZVwiKSl8fGIoZSxcImdldFwiKXx8YihlLFwic2V0XCIpfHxlLmNvbmZpZ3VyYWJsZXx8YihlLFwid3JpdGFibGVcIikmJiFlLndyaXRhYmxlfHxiKGUsXCJlbnVtZXJhYmxlXCIpJiYhZS5lbnVtZXJhYmxlP0IodCxuLGUpOih0W25dPWUudmFsdWUsdCl9O1N0fHwoei5mPUd0LFcuZj1WdCksYyhjLlMrYy5GKiFTdCxcIk9iamVjdFwiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6R3QsZGVmaW5lUHJvcGVydHk6VnR9KSxvKGZ1bmN0aW9uKCl7eXQuY2FsbCh7fSl9KSYmKHl0PWd0PWZ1bmN0aW9uKCl7cmV0dXJuIHZ0LmNhbGwodGhpcyl9KTt2YXIgVXQ9dih7fSxXdCk7dihVdCxZdCksaChVdCxtdCxZdC52YWx1ZXMpLHYoVXQse3NsaWNlOnp0LHNldDpCdCxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe30sdG9TdHJpbmc6eXQsdG9Mb2NhbGVTdHJpbmc6SXR9KSxOdChVdCxcImJ1ZmZlclwiLFwiYlwiKSxOdChVdCxcImJ5dGVPZmZzZXRcIixcIm9cIiksTnQoVXQsXCJieXRlTGVuZ3RoXCIsXCJsXCIpLE50KFV0LFwibGVuZ3RoXCIsXCJlXCIpLEIoVXQsYnQse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzW3h0XX19KSx0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUsdSl7dT0hIXU7dmFyIGE9dCsodT9cIkNsYW1wZWRcIjpcIlwiKStcIkFycmF5XCIsbD1cImdldFwiK3Qsdj1cInNldFwiK3QscD1pW2FdLGc9cHx8e30sbT1wJiZPKHApLGI9IXB8fCFzLkFCVixTPXt9LHg9cCYmcFtLXSxBPWZ1bmN0aW9uKHQsZSl7dmFyIHI9dC5fZDtyZXR1cm4gci52W2xdKGUqbityLm8sQXQpfSxMPWZ1bmN0aW9uKHQsZSxyKXt2YXIgaT10Ll9kO3UmJihyPShyPU1hdGgucm91bmQocikpPDA/MDpyPjI1NT8yNTU6MjU1JnIpLGkudlt2XShlKm4raS5vLHIsQXQpfSxqPWZ1bmN0aW9uKHQsbil7Qih0LG4se2dldDpmdW5jdGlvbigpe3JldHVybiBBKHRoaXMsbil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gTCh0aGlzLG4sdCl9LGVudW1lcmFibGU6ITB9KX07Yj8ocD1lKGZ1bmN0aW9uKHQsZSxyLGkpe2YodCxwLGEsXCJfZFwiKTt2YXIgbyxjLHMsdSxsPTAsdj0wO2lmKHcoZSkpe2lmKCEoZSBpbnN0YW5jZW9mICR8fCh1PV8oZSkpPT1VfHx1PT1xKSlyZXR1cm4geHQgaW4gZT9GdChwLGUpOkN0LmNhbGwocCxlKTtvPWUsdj1qdChyLG4pO3ZhciBnPWUuYnl0ZUxlbmd0aDtpZih2b2lkIDA9PT1pKXtpZihnJW4pdGhyb3cgWChPdCk7aWYoYz1nLXYsYzwwKXRocm93IFgoT3QpfWVsc2UgaWYoYz1kKGkpKm4sYyt2PmcpdGhyb3cgWChPdCk7cz1jL259ZWxzZSBzPXkoZSksYz1zKm4sbz1uZXcgJChjKTtmb3IoaCh0LFwiX2RcIix7YjpvLG86dixsOmMsZTpzLHY6bmV3IFEobyl9KTtsPHM7KWoodCxsKyspfSkseD1wW0tdPUUoVXQpLGgoeCxcImNvbnN0cnVjdG9yXCIscCkpOm8oZnVuY3Rpb24oKXtwKDEpfSkmJm8oZnVuY3Rpb24oKXtuZXcgcCgtMSl9KSYmQyhmdW5jdGlvbih0KXtuZXcgcCxuZXcgcChudWxsKSxuZXcgcCgxLjUpLG5ldyBwKHQpfSwhMCl8fChwPWUoZnVuY3Rpb24odCxlLHIsaSl7Zih0LHAsYSk7dmFyIG87cmV0dXJuIHcoZSk/ZSBpbnN0YW5jZW9mICR8fChvPV8oZSkpPT1VfHxvPT1xP3ZvaWQgMCE9PWk/bmV3IGcoZSxqdChyLG4pLGkpOnZvaWQgMCE9PXI/bmV3IGcoZSxqdChyLG4pKTpuZXcgZyhlKTp4dCBpbiBlP0Z0KHAsZSk6Q3QuY2FsbChwLGUpOm5ldyBnKHkoZSkpfSksWihtIT09RnVuY3Rpb24ucHJvdG90eXBlP00oZykuY29uY2F0KE0obSkpOk0oZyksZnVuY3Rpb24odCl7dCBpbiBwfHxoKHAsdCxnW3RdKX0pLHBbS109eCxyfHwoeC5jb25zdHJ1Y3Rvcj1wKSk7dmFyIGs9eFttdF0sVD0hIWsmJihcInZhbHVlc1wiPT1rLm5hbWV8fHZvaWQgMD09ay5uYW1lKSxQPVl0LnZhbHVlcztoKHAsX3QsITApLGgoeCx4dCxhKSxoKHgsRXQsITApLGgoeCx3dCxwKSwodT9uZXcgcCgxKVtidF09PWE6YnQgaW4geCl8fEIoeCxidCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGF9fSksU1thXT1wLGMoYy5HK2MuVytjLkYqKHAhPWcpLFMpLGMoYy5TLGEse0JZVEVTX1BFUl9FTEVNRU5UOm59KSxjKGMuUytjLkYqbyhmdW5jdGlvbigpe2cub2YuY2FsbChwLDEpfSksYSx7ZnJvbTpDdCxvZjpSdH0pLEggaW4geHx8aCh4LEgsbiksYyhjLlAsYSxXdCksUihhKSxjKGMuUCtjLkYqTHQsYSx7c2V0OkJ0fSksYyhjLlArYy5GKiFULGEsWXQpLHJ8fHgudG9TdHJpbmc9PXl0fHwoeC50b1N0cmluZz15dCksYyhjLlArYy5GKm8oZnVuY3Rpb24oKXtuZXcgcCgxKS5zbGljZSgpfSksYSx7c2xpY2U6enR9KSxjKGMuUCtjLkYqKG8oZnVuY3Rpb24oKXtyZXR1cm5bMSwyXS50b0xvY2FsZVN0cmluZygpIT1uZXcgcChbMSwyXSkudG9Mb2NhbGVTdHJpbmcoKX0pfHwhbyhmdW5jdGlvbigpe3gudG9Mb2NhbGVTdHJpbmcuY2FsbChbMSwyXSl9KSksYSx7dG9Mb2NhbGVTdHJpbmc6SXR9KSxOW2FdPVQ/azpQLHJ8fFR8fGgoeCxtdCxQKX19ZWxzZSB0LmV4cG9ydHM9ZnVuY3Rpb24oKXt9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzOSksaT1lKDE5KSxvPWUoMTMpLGM9ZSg0MCkscz1lKDEwKSx1PWUoNzEpLGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtuLmY9ZSg5KT9hOmZ1bmN0aW9uKHQsbil7aWYodD1vKHQpLG49YyhuLCEwKSx1KXRyeXtyZXR1cm4gYSh0LG4pfWNhdGNoKHQpe31pZihzKHQsbikpcmV0dXJuIGkoIXIuZi5jYWxsKHQsbiksdFtuXSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzKSxpPWUoMTEpLG89ZSgxMCksYz1lKDIyKShcInNyY1wiKSxzPVwidG9TdHJpbmdcIix1PUZ1bmN0aW9uW3NdLGE9KFwiXCIrdSkuc3BsaXQocyk7ZSgzNCkuaW5zcGVjdFNvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gdS5jYWxsKHQpfSwodC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlLHMpe3ZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIGU7dSYmKG8oZSxcIm5hbWVcIil8fGkoZSxcIm5hbWVcIixuKSksdFtuXSE9PWUmJih1JiYobyhlLGMpfHxpKGUsYyx0W25dP1wiXCIrdFtuXTphLmpvaW4oU3RyaW5nKG4pKSkpLHQ9PT1yP3Rbbl09ZTpzP3Rbbl0/dFtuXT1lOmkodCxuLGUpOihkZWxldGUgdFtuXSxpKHQsbixlKSkpfSkoRnVuY3Rpb24ucHJvdG90eXBlLHMsZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzJiZ0aGlzW2NdfHx1LmNhbGwodGhpcyl9KX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK3QpO3JldHVybiB0fX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtyZXR1cm57ZW51bWVyYWJsZTohKDEmdCksY29uZmlndXJhYmxlOiEoMiZ0KSx3cml0YWJsZTohKDQmdCksdmFsdWU6bn19fSxmdW5jdGlvbih0LG4pe3ZhciBlPU1hdGguY2VpbCxyPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBpc05hTih0PSt0KT8wOih0PjA/cjplKSh0KX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDE4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdChyKHQpKX19LGZ1bmN0aW9uKHQsbil7dmFyIGU9MCxyPU1hdGgucmFuZG9tKCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVyblwiU3ltYm9sKFwiLmNvbmNhdCh2b2lkIDA9PT10P1wiXCI6dCxcIilfXCIsKCsrZStyKS50b1N0cmluZygzNikpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNSkoXCJ1bnNjb3BhYmxlc1wiKSxpPUFycmF5LnByb3RvdHlwZTt2b2lkIDA9PWlbcl0mJmUoMTEpKGkscix7fSksdC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lbcl1bdF09ITB9fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSxyKXtpZighKHQgaW5zdGFuY2VvZiBuKXx8dm9pZCAwIT09ciYmciBpbiB0KXRocm93IFR5cGVFcnJvcihlK1wiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LG4pe3ZhciBlPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZS5jYWxsKHQpLnNsaWNlKDgsLTEpfX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9e319LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPSExfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg4MiksaT1lKDUyKTt0LmV4cG9ydHM9T2JqZWN0LmtleXN8fGZ1bmN0aW9uKHQpe3JldHVybiByKHQsaSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxNik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXtmb3IodmFyIGkgaW4gbilyKHQsaSxuW2ldLGUpO3JldHVybiB0fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNykuZixpPWUoMTApLG89ZSg1KShcInRvU3RyaW5nVGFnXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7dCYmIWkodD1lP3Q6dC5wcm90b3R5cGUsbykmJnIodCxvLHtjb25maWd1cmFibGU6ITAsdmFsdWU6bn0pfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjApLGk9TWF0aC5tYXgsbz1NYXRoLm1pbjt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdD1yKHQpLHQ8MD9pKHQrbiwwKTpvKHQsbil9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtpZighcih0KXx8dC5fdCE9PW4pdGhyb3cgVHlwZUVycm9yKFwiSW5jb21wYXRpYmxlIHJlY2VpdmVyLCBcIituK1wiIHJlcXVpcmVkIVwiKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEyKSxpPWUoNTQpLG89ZSgyMSksYz1lKDgpLHM9ZSg5MSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7dmFyIGU9MT09dCx1PTI9PXQsYT0zPT10LGY9ND09dCxsPTY9PXQsaD01PT10fHxsLHY9bnx8cztyZXR1cm4gZnVuY3Rpb24obixzLHApe2Zvcih2YXIgZCx5LGc9byhuKSxtPWkoZyksYj1yKHMscCwzKSxfPWMobS5sZW5ndGgpLHc9MCxTPWU/dihuLF8pOnU/dihuLDApOnZvaWQgMDtfPnc7dysrKWlmKChofHx3IGluIG0pJiYoZD1tW3ddLHk9YihkLHcsZyksdCkpaWYoZSlTW3ddPXk7ZWxzZSBpZih5KXN3aXRjaCh0KXtjYXNlIDM6cmV0dXJuITA7Y2FzZSA1OnJldHVybiBkO2Nhc2UgNjpyZXR1cm4gdztjYXNlIDI6Uy5wdXNoKGQpfWVsc2UgaWYoZilyZXR1cm4hMTtyZXR1cm4gbD8tMTphfHxmP2Y6U319fSxmdW5jdGlvbih0LG4pe3ZhciBlPXQuZXhwb3J0cz17dmVyc2lvbjpcIjIuNS4xXCJ9O1wibnVtYmVyXCI9PXR5cGVvZiBfX2UmJihfX2U9ZSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIyKShcIm1ldGFcIiksaT1lKDQpLG89ZSgxMCksYz1lKDcpLmYscz0wLHU9T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0sYT0hZSg2KShmdW5jdGlvbigpe3JldHVybiB1KE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucyh7fSkpfSksZj1mdW5jdGlvbih0KXtjKHQscix7dmFsdWU6e2k6XCJPXCIrICsrcyx3Ont9fX0pfSxsPWZ1bmN0aW9uKHQsbil7aWYoIWkodCkpcmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHQ/dDooXCJzdHJpbmdcIj09dHlwZW9mIHQ/XCJTXCI6XCJQXCIpK3Q7aWYoIW8odCxyKSl7aWYoIXUodCkpcmV0dXJuXCJGXCI7aWYoIW4pcmV0dXJuXCJFXCI7Zih0KX1yZXR1cm4gdFtyXS5pfSxoPWZ1bmN0aW9uKHQsbil7aWYoIW8odCxyKSl7aWYoIXUodCkpcmV0dXJuITA7aWYoIW4pcmV0dXJuITE7Zih0KX1yZXR1cm4gdFtyXS53fSx2PWZ1bmN0aW9uKHQpe3JldHVybiBhJiZwLk5FRUQmJnUodCkmJiFvKHQscikmJmYodCksdH0scD10LmV4cG9ydHM9e0tFWTpyLE5FRUQ6ITEsZmFzdEtleTpsLGdldFdlYWs6aCxvbkZyZWV6ZTp2fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMiksaT1lKDk5KSxvPWUoNTIpLGM9ZSg1OSkoXCJJRV9QUk9UT1wiKSxzPWZ1bmN0aW9uKCl7fSx1PVwicHJvdG90eXBlXCIsYT1mdW5jdGlvbigpe3ZhciB0LG49ZSg1MSkoXCJpZnJhbWVcIikscj1vLmxlbmd0aCxpPVwiPFwiLGM9XCI+XCI7Zm9yKG4uc3R5bGUuZGlzcGxheT1cIm5vbmVcIixlKDcwKS5hcHBlbmRDaGlsZChuKSxuLnNyYz1cImphdmFzY3JpcHQ6XCIsdD1uLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQsdC5vcGVuKCksdC53cml0ZShpK1wic2NyaXB0XCIrYytcImRvY3VtZW50LkY9T2JqZWN0XCIraStcIi9zY3JpcHRcIitjKSx0LmNsb3NlKCksYT10LkY7ci0tOylkZWxldGUgYVt1XVtvW3JdXTtyZXR1cm4gYSgpfTt0LmV4cG9ydHM9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24odCxuKXt2YXIgZTtyZXR1cm4gbnVsbCE9PXQ/KHNbdV09cih0KSxlPW5ldyBzLHNbdV09bnVsbCxlW2NdPXQpOmU9YSgpLHZvaWQgMD09PW4/ZTppKGUsbil9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg4MiksaT1lKDUyKS5jb25jYXQoXCJsZW5ndGhcIixcInByb3RvdHlwZVwiKTtuLmY9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXN8fGZ1bmN0aW9uKHQpe3JldHVybiByKHQsaSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxMCksaT1lKDIxKSxvPWUoNTkpKFwiSUVfUFJPVE9cIiksYz1PYmplY3QucHJvdG90eXBlO3QuZXhwb3J0cz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQpe3JldHVybiB0PWkodCkscih0LG8pP3Rbb106XCJmdW5jdGlvblwiPT10eXBlb2YgdC5jb25zdHJ1Y3RvciYmdCBpbnN0YW5jZW9mIHQuY29uc3RydWN0b3I/dC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6dCBpbnN0YW5jZW9mIE9iamVjdD9jOm51bGx9fSxmdW5jdGlvbih0LG4pe24uZj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7aWYoIXIodCkpcmV0dXJuIHQ7dmFyIGUsaTtpZihuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihlPXQudG9TdHJpbmcpJiYhcihpPWUuY2FsbCh0KSkpcmV0dXJuIGk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YoZT10LnZhbHVlT2YpJiYhcihpPWUuY2FsbCh0KSkpcmV0dXJuIGk7aWYoIW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mKGU9dC50b1N0cmluZykmJiFyKGk9ZS5jYWxsKHQpKSlyZXR1cm4gaTt0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjb252ZXJ0IG9iamVjdCB0byBwcmltaXRpdmUgdmFsdWVcIil9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgzKSxpPWUoMSksbz1lKDE2KSxjPWUoMjkpLHM9ZSgzNSksdT1lKDQzKSxhPWUoMjQpLGY9ZSg0KSxsPWUoNiksaD1lKDQ0KSx2PWUoMzApLHA9ZSg5NSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlLGQseSxnKXt2YXIgbT1yW3RdLGI9bSxfPXk/XCJzZXRcIjpcImFkZFwiLHc9YiYmYi5wcm90b3R5cGUsUz17fSx4PWZ1bmN0aW9uKHQpe3ZhciBuPXdbdF07byh3LHQsXCJkZWxldGVcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4hKGcmJiFmKHQpKSYmbi5jYWxsKHRoaXMsMD09PXQ/MDp0KX06XCJoYXNcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4hKGcmJiFmKHQpKSYmbi5jYWxsKHRoaXMsMD09PXQ/MDp0KX06XCJnZXRcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4gZyYmIWYodCk/dm9pZCAwOm4uY2FsbCh0aGlzLDA9PT10PzA6dCl9OlwiYWRkXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIG4uY2FsbCh0aGlzLDA9PT10PzA6dCksdGhpc306ZnVuY3Rpb24odCxlKXtyZXR1cm4gbi5jYWxsKHRoaXMsMD09PXQ/MDp0LGUpLHRoaXN9KX07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgYiYmKGd8fHcuZm9yRWFjaCYmIWwoZnVuY3Rpb24oKXsobmV3IGIpLmVudHJpZXMoKS5uZXh0KCl9KSkpe3ZhciBFPW5ldyBiLE89RVtfXShnP3t9Oi0wLDEpIT1FLE09bChmdW5jdGlvbigpe0UuaGFzKDEpfSksQT1oKGZ1bmN0aW9uKHQpe25ldyBiKHQpfSksTD0hZyYmbChmdW5jdGlvbigpe2Zvcih2YXIgdD1uZXcgYixuPTU7bi0tOyl0W19dKG4sbik7cmV0dXJuIXQuaGFzKC0wKX0pO0F8fChiPW4oZnVuY3Rpb24obixlKXthKG4sYix0KTt2YXIgcj1wKG5ldyBtLG4sYik7cmV0dXJuIHZvaWQgMCE9ZSYmdShlLHkscltfXSxyKSxyfSksYi5wcm90b3R5cGU9dyx3LmNvbnN0cnVjdG9yPWIpLChNfHxMKSYmKHgoXCJkZWxldGVcIikseChcImhhc1wiKSx5JiZ4KFwiZ2V0XCIpKSwoTHx8TykmJngoXyksZyYmdy5jbGVhciYmZGVsZXRlIHcuY2xlYXJ9ZWxzZSBiPWQuZ2V0Q29uc3RydWN0b3Iobix0LHksXyksYyhiLnByb3RvdHlwZSxlKSxzLk5FRUQ9ITA7cmV0dXJuIHYoYix0KSxTW3RdPWIsaShpLkcraS5XK2kuRiooYiE9bSksUyksZ3x8ZC5zZXRTdHJvbmcoYix0LHkpLGJ9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxMSksaT1lKDE2KSxvPWUoNiksYz1lKDE4KSxzPWUoNSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXt2YXIgdT1zKHQpLGE9ZShjLHUsXCJcIlt0XSksZj1hWzBdLGw9YVsxXTtvKGZ1bmN0aW9uKCl7dmFyIG49e307cmV0dXJuIG5bdV09ZnVuY3Rpb24oKXtyZXR1cm4gN30sNyE9XCJcIlt0XShuKX0pJiYoaShTdHJpbmcucHJvdG90eXBlLHQsZikscihSZWdFeHAucHJvdG90eXBlLHUsMj09bj9mdW5jdGlvbih0LG4pe3JldHVybiBsLmNhbGwodCx0aGlzLG4pfTpmdW5jdGlvbih0KXtyZXR1cm4gbC5jYWxsKHQsdGhpcyl9KSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxMiksaT1lKDc2KSxvPWUoNTUpLGM9ZSgyKSxzPWUoOCksdT1lKDY1KSxhPXt9LGY9e30sbj10LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUsbCxoKXt2YXIgdixwLGQseSxnPWg/ZnVuY3Rpb24oKXtyZXR1cm4gdH06dSh0KSxtPXIoZSxsLG4/MjoxKSxiPTA7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZyl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgaXRlcmFibGUhXCIpO2lmKG8oZykpe2Zvcih2PXModC5sZW5ndGgpO3Y+YjtiKyspaWYoeT1uP20oYyhwPXRbYl0pWzBdLHBbMV0pOm0odFtiXSkseT09PWF8fHk9PT1mKXJldHVybiB5fWVsc2UgZm9yKGQ9Zy5jYWxsKHQpOyEocD1kLm5leHQoKSkuZG9uZTspaWYoeT1pKGQsbSxwLnZhbHVlLG4pLHk9PT1hfHx5PT09ZilyZXR1cm4geX07bi5CUkVBSz1hLG4uUkVUVVJOPWZ9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDUpKFwiaXRlcmF0b3JcIiksaT0hMTt0cnl7dmFyIG89WzddW3JdKCk7by5yZXR1cm49ZnVuY3Rpb24oKXtpPSEwfSxBcnJheS5mcm9tKG8sZnVuY3Rpb24oKXt0aHJvdyAyfSl9Y2F0Y2godCl7fXQuZXhwb3J0cz1mdW5jdGlvbih0LG4pe2lmKCFuJiYhaSlyZXR1cm4hMTt2YXIgZT0hMTt0cnl7dmFyIG89WzddLGM9b1tyXSgpO2MubmV4dD1mdW5jdGlvbigpe3JldHVybntkb25lOmU9ITB9fSxvW3JdPWZ1bmN0aW9uKCl7cmV0dXJuIGN9LHQobyl9Y2F0Y2godCl7fXJldHVybiBlfX0sZnVuY3Rpb24odCxuKXtuLmY9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sc30sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMyksaT1lKDcpLG89ZSg5KSxjPWUoNSkoXCJzcGVjaWVzXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgbj1yW3RdO28mJm4mJiFuW2NdJiZpLmYobixjLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgyMSksaT1lKDMxKSxvPWUoOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1yKHRoaXMpLGU9byhuLmxlbmd0aCksYz1hcmd1bWVudHMubGVuZ3RoLHM9aShjPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxlKSx1PWM+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGE9dm9pZCAwPT09dT9lOmkodSxlKTthPnM7KW5bcysrXT10O3JldHVybiBufX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTMpLGk9ZSg4KSxvPWUoMzEpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLGMpe3ZhciBzLHU9cihuKSxhPWkodS5sZW5ndGgpLGY9byhjLGEpO2lmKHQmJmUhPWUpe2Zvcig7YT5mOylpZihzPXVbZisrXSxzIT1zKXJldHVybiEwfWVsc2UgZm9yKDthPmY7ZisrKWlmKCh0fHxmIGluIHUpJiZ1W2ZdPT09ZSlyZXR1cm4gdHx8Znx8MDtyZXR1cm4hdCYmLTF9fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjUpLGk9ZSg1KShcInRvU3RyaW5nVGFnXCIpLG89XCJBcmd1bWVudHNcIj09cihmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLGM9ZnVuY3Rpb24odCxuKXt0cnl7cmV0dXJuIHRbbl19Y2F0Y2godCl7fX07dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuLGUscztyZXR1cm4gdm9pZCAwPT09dD9cIlVuZGVmaW5lZFwiOm51bGw9PT10P1wiTnVsbFwiOlwic3RyaW5nXCI9PXR5cGVvZihlPWMobj1PYmplY3QodCksaSkpP2U6bz9yKG4pOlwiT2JqZWN0XCI9PShzPXIobikpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLmNhbGxlZT9cIkFyZ3VtZW50c1wiOnN9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSg3KSxpPWUoMTkpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7biBpbiB0P3IuZih0LG4saSgwLGUpKTp0W25dPWV9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KSxpPWUoMykuZG9jdW1lbnQsbz1yKGkpJiZyKGkuY3JlYXRlRWxlbWVudCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBvP2kuY3JlYXRlRWxlbWVudCh0KTp7fX19LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPVwiY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mXCIuc3BsaXQoXCIsXCIpfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg1KShcIm1hdGNoXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgbj0vLi87dHJ5e1wiLy4vXCJbdF0obil9Y2F0Y2goZSl7dHJ5e3JldHVybiBuW3JdPSExLCFcIi8uL1wiW3RdKG4pfWNhdGNoKHQpe319cmV0dXJuITB9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyNSk7dC5leHBvcnRzPU9iamVjdChcInpcIikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVyblwiU3RyaW5nXCI9PXIodCk/dC5zcGxpdChcIlwiKTpPYmplY3QodCl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyNiksaT1lKDUpKFwiaXRlcmF0b3JcIiksbz1BcnJheS5wcm90b3R5cGU7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiYoci5BcnJheT09PXR8fG9baV09PT10KX19LGZ1bmN0aW9uKHQsbil7dmFyIGU9TWF0aC5leHBtMTt0LmV4cG9ydHM9IWV8fGUoMTApPjIyMDI1LjQ2NTc5NDgwNjcxOHx8ZSgxMCk8MjIwMjUuNDY1Nzk0ODA2NzE4fHxlKC0yZS0xNykhPS0yZS0xNz9mdW5jdGlvbih0KXtyZXR1cm4gMD09KHQ9K3QpP3Q6dD4tMWUtNiYmdDwxZS02P3QrdCp0LzI6TWF0aC5leHAodCktMX06ZX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9TWF0aC5zaWdufHxmdW5jdGlvbih0KXtyZXR1cm4gMD09KHQ9K3QpfHx0IT10P3Q6dDwwPy0xOjF9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KSxpPWUoMiksbz1mdW5jdGlvbih0LG4pe2lmKGkodCksIXIobikmJm51bGwhPT1uKXRocm93IFR5cGVFcnJvcihuK1wiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlIVwiKX07dC5leHBvcnRzPXtzZXQ6T2JqZWN0LnNldFByb3RvdHlwZU9mfHwoXCJfX3Byb3RvX19cImlue30/ZnVuY3Rpb24odCxuLHIpe3RyeXtyPWUoMTIpKEZ1bmN0aW9uLmNhbGwsZSgxNSkuZihPYmplY3QucHJvdG90eXBlLFwiX19wcm90b19fXCIpLnNldCwyKSxyKHQsW10pLG49ISh0IGluc3RhbmNlb2YgQXJyYXkpfWNhdGNoKHQpe249ITB9cmV0dXJuIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG8odCxlKSxuP3QuX19wcm90b19fPWU6cih0LGUpLHR9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazpvfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNjApKFwia2V5c1wiKSxpPWUoMjIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gclt0XXx8KHJbdF09aSh0KSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzKSxpPVwiX19jb3JlLWpzX3NoYXJlZF9fXCIsbz1yW2ldfHwocltpXT17fSk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBvW3RdfHwob1t0XT17fSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyKSxpPWUoMTcpLG89ZSg1KShcInNwZWNpZXNcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7dmFyIGUsYz1yKHQpLmNvbnN0cnVjdG9yO3JldHVybiB2b2lkIDA9PT1jfHx2b2lkIDA9PShlPXIoYylbb10pP246aShlKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDc1KSxpPWUoMTgpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7aWYocihuKSl0aHJvdyBUeXBlRXJyb3IoXCJTdHJpbmcjXCIrZStcIiBkb2Vzbid0IGFjY2VwdCByZWdleCFcIik7cmV0dXJuIFN0cmluZyhpKHQpKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcixpLG8sYz1lKDEyKSxzPWUoNzIpLHU9ZSg3MCksYT1lKDUxKSxmPWUoMyksbD1mLnByb2Nlc3MsaD1mLnNldEltbWVkaWF0ZSx2PWYuY2xlYXJJbW1lZGlhdGUscD1mLk1lc3NhZ2VDaGFubmVsLGQ9Zi5EaXNwYXRjaCx5PTAsZz17fSxtPVwib25yZWFkeXN0YXRlY2hhbmdlXCIsYj1mdW5jdGlvbigpe3ZhciB0PSt0aGlzO2lmKGcuaGFzT3duUHJvcGVydHkodCkpe3ZhciBuPWdbdF07ZGVsZXRlIGdbdF0sbigpfX0sXz1mdW5jdGlvbih0KXtiLmNhbGwodC5kYXRhKX07aCYmdnx8KGg9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPVtdLGU9MTthcmd1bWVudHMubGVuZ3RoPmU7KW4ucHVzaChhcmd1bWVudHNbZSsrXSk7cmV0dXJuIGdbKyt5XT1mdW5jdGlvbigpe3MoXCJmdW5jdGlvblwiPT10eXBlb2YgdD90OkZ1bmN0aW9uKHQpLG4pfSxyKHkpLHl9LHY9ZnVuY3Rpb24odCl7ZGVsZXRlIGdbdF19LFwicHJvY2Vzc1wiPT1lKDI1KShsKT9yPWZ1bmN0aW9uKHQpe2wubmV4dFRpY2soYyhiLHQsMSkpfTpkJiZkLm5vdz9yPWZ1bmN0aW9uKHQpe2Qubm93KGMoYix0LDEpKX06cD8oaT1uZXcgcCxvPWkucG9ydDIsaS5wb3J0MS5vbm1lc3NhZ2U9XyxyPWMoby5wb3N0TWVzc2FnZSxvLDEpKTpmLmFkZEV2ZW50TGlzdGVuZXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHBvc3RNZXNzYWdlJiYhZi5pbXBvcnRTY3JpcHRzPyhyPWZ1bmN0aW9uKHQpe2YucG9zdE1lc3NhZ2UodCtcIlwiLFwiKlwiKX0sZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLF8sITEpKTpyPW0gaW4gYShcInNjcmlwdFwiKT9mdW5jdGlvbih0KXt1LmFwcGVuZENoaWxkKGEoXCJzY3JpcHRcIikpW21dPWZ1bmN0aW9uKCl7dS5yZW1vdmVDaGlsZCh0aGlzKSxiLmNhbGwodCl9fTpmdW5jdGlvbih0KXtzZXRUaW1lb3V0KGMoYix0LDEpLDApfSksdC5leHBvcnRzPXtzZXQ6aCxjbGVhcjp2fX0sZnVuY3Rpb24odCxuLGUpe2Zvcih2YXIgcixpPWUoMyksbz1lKDExKSxjPWUoMjIpLHM9YyhcInR5cGVkX2FycmF5XCIpLHU9YyhcInZpZXdcIiksYT0hKCFpLkFycmF5QnVmZmVyfHwhaS5EYXRhVmlldyksZj1hLGw9MCxoPTksdj1cIkludDhBcnJheSxVaW50OEFycmF5LFVpbnQ4Q2xhbXBlZEFycmF5LEludDE2QXJyYXksVWludDE2QXJyYXksSW50MzJBcnJheSxVaW50MzJBcnJheSxGbG9hdDMyQXJyYXksRmxvYXQ2NEFycmF5XCIuc3BsaXQoXCIsXCIpO2w8aDspKHI9aVt2W2wrK11dKT8obyhyLnByb3RvdHlwZSxzLCEwKSxvKHIucHJvdG90eXBlLHUsITApKTpmPSExO3QuZXhwb3J0cz17QUJWOmEsQ09OU1RSOmYsVFlQRUQ6cyxWSUVXOnV9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0OSksaT1lKDUpKFwiaXRlcmF0b3JcIiksbz1lKDI2KTt0LmV4cG9ydHM9ZSgzNCkuZ2V0SXRlcmF0b3JNZXRob2Q9ZnVuY3Rpb24odCl7aWYodm9pZCAwIT10KXJldHVybiB0W2ldfHx0W1wiQEBpdGVyYXRvclwiXXx8b1tyKHQpXX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDIzKSxpPWUoNzgpLG89ZSgyNiksYz1lKDEzKTt0LmV4cG9ydHM9ZSg3NykoQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKHQsbil7dGhpcy5fdD1jKHQpLHRoaXMuX2k9MCx0aGlzLl9rPW59LGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdCxuPXRoaXMuX2ssZT10aGlzLl9pKys7cmV0dXJuIXR8fGU+PXQubGVuZ3RoPyh0aGlzLl90PXZvaWQgMCxpKDEpKTpcImtleXNcIj09bj9pKDAsZSk6XCJ2YWx1ZXNcIj09bj9pKDAsdFtlXSk6aSgwLFtlLHRbZV1dKX0sXCJ2YWx1ZXNcIiksby5Bcmd1bWVudHM9by5BcnJheSxyKFwia2V5c1wiKSxyKFwidmFsdWVzXCIpLHIoXCJlbnRyaWVzXCIpfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgyMSksaT1lKDMxKSxvPWUoOCk7dC5leHBvcnRzPVtdLmNvcHlXaXRoaW58fGZ1bmN0aW9uKHQsbil7dmFyIGU9cih0aGlzKSxjPW8oZS5sZW5ndGgpLHM9aSh0LGMpLHU9aShuLGMpLGE9YXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTp2b2lkIDAsZj1NYXRoLm1pbigodm9pZCAwPT09YT9jOmkoYSxjKSktdSxjLXMpLGw9MTtmb3IodTxzJiZzPHUrZiYmKGw9LTEsdSs9Zi0xLHMrPWYtMSk7Zi0tID4wOyl1IGluIGU/ZVtzXT1lW3VdOmRlbGV0ZSBlW3NdLHMrPWwsdSs9bDtyZXR1cm4gZX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDcpLmYsaT1lKDM2KSxvPWUoMjkpLGM9ZSgxMikscz1lKDI0KSx1PWUoNDMpLGE9ZSg3NyksZj1lKDc4KSxsPWUoNDYpLGg9ZSg5KSx2PWUoMzUpLmZhc3RLZXkscD1lKDMyKSxkPWg/XCJfc1wiOlwic2l6ZVwiLHk9ZnVuY3Rpb24odCxuKXt2YXIgZSxyPXYobik7aWYoXCJGXCIhPT1yKXJldHVybiB0Ll9pW3JdO2ZvcihlPXQuX2Y7ZTtlPWUubilpZihlLms9PW4pcmV0dXJuIGV9O3QuZXhwb3J0cz17Z2V0Q29uc3RydWN0b3I6ZnVuY3Rpb24odCxuLGUsYSl7dmFyIGY9dChmdW5jdGlvbih0LHIpe3ModCxmLG4sXCJfaVwiKSx0Ll90PW4sdC5faT1pKG51bGwpLHQuX2Y9dm9pZCAwLHQuX2w9dm9pZCAwLHRbZF09MCx2b2lkIDAhPXImJnUocixlLHRbYV0sdCl9KTtyZXR1cm4gbyhmLnByb3RvdHlwZSx7XHJcbmNsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXAodGhpcyxuKSxlPXQuX2kscj10Ll9mO3I7cj1yLm4pci5yPSEwLHIucCYmKHIucD1yLnAubj12b2lkIDApLGRlbGV0ZSBlW3IuaV07dC5fZj10Ll9sPXZvaWQgMCx0W2RdPTB9LGRlbGV0ZTpmdW5jdGlvbih0KXt2YXIgZT1wKHRoaXMsbikscj15KGUsdCk7aWYocil7dmFyIGk9ci5uLG89ci5wO2RlbGV0ZSBlLl9pW3IuaV0sci5yPSEwLG8mJihvLm49aSksaSYmKGkucD1vKSxlLl9mPT1yJiYoZS5fZj1pKSxlLl9sPT1yJiYoZS5fbD1vKSxlW2RdLS19cmV0dXJuISFyfSxmb3JFYWNoOmZ1bmN0aW9uKHQpe3AodGhpcyxuKTtmb3IodmFyIGUscj1jKHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsMyk7ZT1lP2Uubjp0aGlzLl9mOylmb3IocihlLnYsZS5rLHRoaXMpO2UmJmUucjspZT1lLnB9LGhhczpmdW5jdGlvbih0KXtyZXR1cm4hIXkocCh0aGlzLG4pLHQpfX0pLGgmJnIoZi5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBwKHRoaXMsbilbZF19fSksZn0sZGVmOmZ1bmN0aW9uKHQsbixlKXt2YXIgcixpLG89eSh0LG4pO3JldHVybiBvP28udj1lOih0Ll9sPW89e2k6aT12KG4sITApLGs6bix2OmUscDpyPXQuX2wsbjp2b2lkIDAscjohMX0sdC5fZnx8KHQuX2Y9byksciYmKHIubj1vKSx0W2RdKyssXCJGXCIhPT1pJiYodC5faVtpXT1vKSksdH0sZ2V0RW50cnk6eSxzZXRTdHJvbmc6ZnVuY3Rpb24odCxuLGUpe2EodCxuLGZ1bmN0aW9uKHQsZSl7dGhpcy5fdD1wKHQsbiksdGhpcy5faz1lLHRoaXMuX2w9dm9pZCAwfSxmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLG49dC5fayxlPXQuX2w7ZSYmZS5yOyllPWUucDtyZXR1cm4gdC5fdCYmKHQuX2w9ZT1lP2Uubjp0Ll90Ll9mKT9cImtleXNcIj09bj9mKDAsZS5rKTpcInZhbHVlc1wiPT1uP2YoMCxlLnYpOmYoMCxbZS5rLGUudl0pOih0Ll90PXZvaWQgMCxmKDEpKX0sZT9cImVudHJpZXNcIjpcInZhbHVlc1wiLCFlLCEwKSxsKG4pfX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDI5KSxpPWUoMzUpLmdldFdlYWssbz1lKDIpLGM9ZSg0KSxzPWUoMjQpLHU9ZSg0MyksYT1lKDMzKSxmPWUoMTApLGw9ZSgzMiksaD1hKDUpLHY9YSg2KSxwPTAsZD1mdW5jdGlvbih0KXtyZXR1cm4gdC5fbHx8KHQuX2w9bmV3IHkpfSx5PWZ1bmN0aW9uKCl7dGhpcy5hPVtdfSxnPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGgodC5hLGZ1bmN0aW9uKHQpe3JldHVybiB0WzBdPT09bn0pfTt5LnByb3RvdHlwZT17Z2V0OmZ1bmN0aW9uKHQpe3ZhciBuPWcodGhpcyx0KTtpZihuKXJldHVybiBuWzFdfSxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuISFnKHRoaXMsdCl9LHNldDpmdW5jdGlvbih0LG4pe3ZhciBlPWcodGhpcyx0KTtlP2VbMV09bjp0aGlzLmEucHVzaChbdCxuXSl9LGRlbGV0ZTpmdW5jdGlvbih0KXt2YXIgbj12KHRoaXMuYSxmdW5jdGlvbihuKXtyZXR1cm4gblswXT09PXR9KTtyZXR1cm5+biYmdGhpcy5hLnNwbGljZShuLDEpLCEhfm59fSx0LmV4cG9ydHM9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsbixlLG8pe3ZhciBhPXQoZnVuY3Rpb24odCxyKXtzKHQsYSxuLFwiX2lcIiksdC5fdD1uLHQuX2k9cCsrLHQuX2w9dm9pZCAwLHZvaWQgMCE9ciYmdShyLGUsdFtvXSx0KX0pO3JldHVybiByKGEucHJvdG90eXBlLHtkZWxldGU6ZnVuY3Rpb24odCl7aWYoIWModCkpcmV0dXJuITE7dmFyIGU9aSh0KTtyZXR1cm4gZT09PSEwP2QobCh0aGlzLG4pKS5kZWxldGUodCk6ZSYmZihlLHRoaXMuX2kpJiZkZWxldGUgZVt0aGlzLl9pXX0saGFzOmZ1bmN0aW9uKHQpe2lmKCFjKHQpKXJldHVybiExO3ZhciBlPWkodCk7cmV0dXJuIGU9PT0hMD9kKGwodGhpcyxuKSkuaGFzKHQpOmUmJmYoZSx0aGlzLl9pKX19KSxhfSxkZWY6ZnVuY3Rpb24odCxuLGUpe3ZhciByPWkobyhuKSwhMCk7cmV0dXJuIHI9PT0hMD9kKHQpLnNldChuLGUpOnJbdC5faV09ZSx0fSx1ZnN0b3JlOmR9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzKS5kb2N1bWVudDt0LmV4cG9ydHM9ciYmci5kb2N1bWVudEVsZW1lbnR9LGZ1bmN0aW9uKHQsbixlKXt0LmV4cG9ydHM9IWUoOSkmJiFlKDYpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlKDUxKShcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7dmFyIHI9dm9pZCAwPT09ZTtzd2l0Y2gobi5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gcj90KCk6dC5jYWxsKGUpO2Nhc2UgMTpyZXR1cm4gcj90KG5bMF0pOnQuY2FsbChlLG5bMF0pO2Nhc2UgMjpyZXR1cm4gcj90KG5bMF0sblsxXSk6dC5jYWxsKGUsblswXSxuWzFdKTtjYXNlIDM6cmV0dXJuIHI/dChuWzBdLG5bMV0sblsyXSk6dC5jYWxsKGUsblswXSxuWzFdLG5bMl0pO2Nhc2UgNDpyZXR1cm4gcj90KG5bMF0sblsxXSxuWzJdLG5bM10pOnQuY2FsbChlLG5bMF0sblsxXSxuWzJdLG5bM10pfXJldHVybiB0LmFwcGx5KGUsbil9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyNSk7dC5leHBvcnRzPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiQXJyYXlcIj09cih0KX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpLGk9TWF0aC5mbG9vcjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIXIodCkmJmlzRmluaXRlKHQpJiZpKHQpPT09dH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpLGk9ZSgyNSksbz1lKDUpKFwibWF0Y2hcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuO3JldHVybiByKHQpJiYodm9pZCAwIT09KG49dFtvXSk/ISFuOlwiUmVnRXhwXCI9PWkodCkpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMik7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlLGkpe3RyeXtyZXR1cm4gaT9uKHIoZSlbMF0sZVsxXSk6bihlKX1jYXRjaChuKXt2YXIgbz10LnJldHVybjt0aHJvdyB2b2lkIDAhPT1vJiZyKG8uY2FsbCh0KSksbn19fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgyNyksaT1lKDEpLG89ZSgxNiksYz1lKDExKSxzPWUoMTApLHU9ZSgyNiksYT1lKDk2KSxmPWUoMzApLGw9ZSgzOCksaD1lKDUpKFwiaXRlcmF0b3JcIiksdj0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLHA9XCJAQGl0ZXJhdG9yXCIsZD1cImtleXNcIix5PVwidmFsdWVzXCIsZz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUsbSxiLF8sdyl7YShlLG4sbSk7dmFyIFMseCxFLE89ZnVuY3Rpb24odCl7aWYoIXYmJnQgaW4gailyZXR1cm4galt0XTtzd2l0Y2godCl7Y2FzZSBkOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzLHQpfTtjYXNlIHk6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMsdCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzLHQpfX0sTT1uK1wiIEl0ZXJhdG9yXCIsQT1iPT15LEw9ITEsaj10LnByb3RvdHlwZSxrPWpbaF18fGpbcF18fGImJmpbYl0sVD1rfHxPKGIpLFA9Yj9BP08oXCJlbnRyaWVzXCIpOlQ6dm9pZCAwLEY9XCJBcnJheVwiPT1uP2ouZW50cmllc3x8azprO2lmKEYmJihFPWwoRi5jYWxsKG5ldyB0KSksRSE9PU9iamVjdC5wcm90b3R5cGUmJkUubmV4dCYmKGYoRSxNLCEwKSxyfHxzKEUsaCl8fGMoRSxoLGcpKSksQSYmayYmay5uYW1lIT09eSYmKEw9ITAsVD1mdW5jdGlvbigpe3JldHVybiBrLmNhbGwodGhpcyl9KSxyJiYhd3x8IXYmJiFMJiZqW2hdfHxjKGosaCxUKSx1W25dPVQsdVtNXT1nLGIpaWYoUz17dmFsdWVzOkE/VDpPKHkpLGtleXM6Xz9UOk8oZCksZW50cmllczpQfSx3KWZvcih4IGluIFMpeCBpbiBqfHxvKGoseCxTW3hdKTtlbHNlIGkoaS5QK2kuRioodnx8TCksbixTKTtyZXR1cm4gU319LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7cmV0dXJue3ZhbHVlOm4sZG9uZTohIXR9fX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9TWF0aC5sb2cxcHx8ZnVuY3Rpb24odCl7cmV0dXJuKHQ9K3QpPi0xZS04JiZ0PDFlLTg/dC10KnQvMjpNYXRoLmxvZygxK3QpfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7dmFyIG4sZTt0aGlzLnByb21pc2U9bmV3IHQoZnVuY3Rpb24odCxyKXtpZih2b2lkIDAhPT1ufHx2b2lkIDAhPT1lKXRocm93IFR5cGVFcnJvcihcIkJhZCBQcm9taXNlIGNvbnN0cnVjdG9yXCIpO249dCxlPXJ9KSx0aGlzLnJlc29sdmU9aShuKSx0aGlzLnJlamVjdD1pKGUpfXZhciBpPWUoMTcpO3QuZXhwb3J0cy5mPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcih0KX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDI4KSxpPWUoNDUpLG89ZSgzOSksYz1lKDIxKSxzPWUoNTQpLHU9T2JqZWN0LmFzc2lnbjt0LmV4cG9ydHM9IXV8fGUoNikoZnVuY3Rpb24oKXt2YXIgdD17fSxuPXt9LGU9U3ltYm9sKCkscj1cImFiY2RlZmdoaWprbG1ub3BxcnN0XCI7cmV0dXJuIHRbZV09NyxyLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24odCl7blt0XT10fSksNyE9dSh7fSx0KVtlXXx8T2JqZWN0LmtleXModSh7fSxuKSkuam9pbihcIlwiKSE9cn0pP2Z1bmN0aW9uKHQsbil7Zm9yKHZhciBlPWModCksdT1hcmd1bWVudHMubGVuZ3RoLGE9MSxmPWkuZixsPW8uZjt1PmE7KWZvcih2YXIgaCx2PXMoYXJndW1lbnRzW2ErK10pLHA9Zj9yKHYpLmNvbmNhdChmKHYpKTpyKHYpLGQ9cC5sZW5ndGgseT0wO2Q+eTspbC5jYWxsKHYsaD1wW3krK10pJiYoZVtoXT12W2hdKTtyZXR1cm4gZX06dX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTApLGk9ZSgxMyksbz1lKDQ4KSghMSksYz1lKDU5KShcIklFX1BST1RPXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3ZhciBlLHM9aSh0KSx1PTAsYT1bXTtmb3IoZSBpbiBzKWUhPWMmJnIocyxlKSYmYS5wdXNoKGUpO2Zvcig7bi5sZW5ndGg+dTspcihzLGU9blt1KytdKSYmKH5vKGEsZSl8fGEucHVzaChlKSk7cmV0dXJuIGF9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyOCksaT1lKDEzKSxvPWUoMzkpLmY7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuKXtmb3IodmFyIGUsYz1pKG4pLHM9cihjKSx1PXMubGVuZ3RoLGE9MCxmPVtdO3U+YTspby5jYWxsKGMsZT1zW2ErK10pJiZmLnB1c2godD9bZSxjW2VdXTpjW2VdKTtyZXR1cm4gZn19fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzNyksaT1lKDQ1KSxvPWUoMiksYz1lKDMpLlJlZmxlY3Q7dC5leHBvcnRzPWMmJmMub3duS2V5c3x8ZnVuY3Rpb24odCl7dmFyIG49ci5mKG8odCkpLGU9aS5mO3JldHVybiBlP24uY29uY2F0KGUodCkpOm59fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg4KSxpPWUoODYpLG89ZSgxOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlLGMpe3ZhciBzPVN0cmluZyhvKHQpKSx1PXMubGVuZ3RoLGE9dm9pZCAwPT09ZT9cIiBcIjpTdHJpbmcoZSksZj1yKG4pO2lmKGY8PXV8fFwiXCI9PWEpcmV0dXJuIHM7dmFyIGw9Zi11LGg9aS5jYWxsKGEsTWF0aC5jZWlsKGwvYS5sZW5ndGgpKTtyZXR1cm4gaC5sZW5ndGg+bCYmKGg9aC5zbGljZSgwLGwpKSxjP2grczpzK2h9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgyMCksaT1lKDE4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG49U3RyaW5nKGkodGhpcykpLGU9XCJcIixvPXIodCk7aWYobzwwfHxvPT0xLzApdGhyb3cgUmFuZ2VFcnJvcihcIkNvdW50IGNhbid0IGJlIG5lZ2F0aXZlXCIpO2Zvcig7bz4wOyhvPj4+PTEpJiYobis9bikpMSZvJiYoZSs9bik7cmV0dXJuIGV9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyMCksaT1lKDgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtpZih2b2lkIDA9PT10KXJldHVybiAwO3ZhciBuPXIodCksZT1pKG4pO2lmKG4hPT1lKXRocm93IFJhbmdlRXJyb3IoXCJXcm9uZyBsZW5ndGghXCIpO3JldHVybiBlfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCxuLGUpe3ZhciByLGksbyxjPUFycmF5KGUpLHM9OCplLW4tMSx1PSgxPDxzKS0xLGE9dT4+MSxmPTIzPT09bj9CKDIsLTI0KS1CKDIsLTc3KTowLGw9MCxoPXQ8MHx8MD09PXQmJjEvdDwwPzE6MDtmb3IodD16KHQpLHQhPXR8fHQ9PT1JPyhpPXQhPXQ/MTowLHI9dSk6KHI9WShYKHQpL0cpLHQqKG89QigyLC1yKSk8MSYmKHItLSxvKj0yKSx0Kz1yK2E+PTE/Zi9vOmYqQigyLDEtYSksdCpvPj0yJiYocisrLG8vPTIpLHIrYT49dT8oaT0wLHI9dSk6cithPj0xPyhpPSh0Km8tMSkqQigyLG4pLHIrPWEpOihpPXQqQigyLGEtMSkqQigyLG4pLHI9MCkpO24+PTg7Y1tsKytdPTI1NSZpLGkvPTI1NixuLT04KTtmb3Iocj1yPDxufGkscys9bjtzPjA7Y1tsKytdPTI1NSZyLHIvPTI1NixzLT04KTtyZXR1cm4gY1stLWxdfD0xMjgqaCxjfWZ1bmN0aW9uIGkodCxuLGUpe3ZhciByLGk9OCplLW4tMSxvPSgxPDxpKS0xLGM9bz4+MSxzPWktNyx1PWUtMSxhPXRbdS0tXSxmPTEyNyZhO2ZvcihhPj49NztzPjA7Zj0yNTYqZit0W3VdLHUtLSxzLT04KTtmb3Iocj1mJigxPDwtcyktMSxmPj49LXMscys9bjtzPjA7cj0yNTYqcit0W3VdLHUtLSxzLT04KTtpZigwPT09ZilmPTEtYztlbHNle2lmKGY9PT1vKXJldHVybiByP05hTjphPy1JOkk7cis9QigyLG4pLGYtPWN9cmV0dXJuKGE/LTE6MSkqcipCKDIsZi1uKX1mdW5jdGlvbiBvKHQpe3JldHVybiB0WzNdPDwyNHx0WzJdPDwxNnx0WzFdPDw4fHRbMF19ZnVuY3Rpb24gYyh0KXtyZXR1cm5bMjU1JnRdfWZ1bmN0aW9uIHModCl7cmV0dXJuWzI1NSZ0LHQ+PjgmMjU1XX1mdW5jdGlvbiB1KHQpe3JldHVyblsyNTUmdCx0Pj44JjI1NSx0Pj4xNiYyNTUsdD4+MjQmMjU1XX1mdW5jdGlvbiBhKHQpe3JldHVybiByKHQsNTIsOCl9ZnVuY3Rpb24gZih0KXtyZXR1cm4gcih0LDIzLDQpfWZ1bmN0aW9uIGwodCxuLGUpe00odFtUXSxuLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlXX19KX1mdW5jdGlvbiBoKHQsbixlLHIpe3ZhciBpPStlLG89RShpKTtpZihvK24+dFtLXSl0aHJvdyBEKEYpO3ZhciBjPXRbSF0uX2Iscz1vK3RbSl0sdT1jLnNsaWNlKHMscytuKTtyZXR1cm4gcj91OnUucmV2ZXJzZSgpfWZ1bmN0aW9uIHYodCxuLGUscixpLG8pe3ZhciBjPStlLHM9RShjKTtpZihzK24+dFtLXSl0aHJvdyBEKEYpO2Zvcih2YXIgdT10W0hdLl9iLGE9cyt0W0pdLGY9cigraSksbD0wO2w8bjtsKyspdVthK2xdPWZbbz9sOm4tbC0xXX12YXIgcD1lKDMpLGQ9ZSg5KSx5PWUoMjcpLGc9ZSg2NCksbT1lKDExKSxiPWUoMjkpLF89ZSg2KSx3PWUoMjQpLFM9ZSgyMCkseD1lKDgpLEU9ZSg4NyksTz1lKDM3KS5mLE09ZSg3KS5mLEE9ZSg0NyksTD1lKDMwKSxqPVwiQXJyYXlCdWZmZXJcIixrPVwiRGF0YVZpZXdcIixUPVwicHJvdG90eXBlXCIsUD1cIldyb25nIGxlbmd0aCFcIixGPVwiV3JvbmcgaW5kZXghXCIsTj1wW2pdLEM9cFtrXSxSPXAuTWF0aCxEPXAuUmFuZ2VFcnJvcixJPXAuSW5maW5pdHksVz1OLHo9Ui5hYnMsQj1SLnBvdyxZPVIuZmxvb3IsWD1SLmxvZyxHPVIuTE4yLFY9XCJidWZmZXJcIixVPVwiYnl0ZUxlbmd0aFwiLHE9XCJieXRlT2Zmc2V0XCIsSD1kP1wiX2JcIjpWLEs9ZD9cIl9sXCI6VSxKPWQ/XCJfb1wiOnE7aWYoZy5BQlYpe2lmKCFfKGZ1bmN0aW9uKCl7TigxKX0pfHwhXyhmdW5jdGlvbigpe25ldyBOKC0xKX0pfHxfKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBOLG5ldyBOKDEuNSksbmV3IE4oTmFOKSxOLm5hbWUhPWp9KSl7Tj1mdW5jdGlvbih0KXtyZXR1cm4gdyh0aGlzLE4pLG5ldyBXKEUodCkpfTtmb3IodmFyICQsUT1OW1RdPVdbVF0sWj1PKFcpLHR0PTA7Wi5sZW5ndGg+dHQ7KSgkPVpbdHQrK10paW4gTnx8bShOLCQsV1skXSk7eXx8KFEuY29uc3RydWN0b3I9Til9dmFyIG50PW5ldyBDKG5ldyBOKDIpKSxldD1DW1RdLnNldEludDg7bnQuc2V0SW50OCgwLDIxNDc0ODM2NDgpLG50LnNldEludDgoMSwyMTQ3NDgzNjQ5KSwhbnQuZ2V0SW50OCgwKSYmbnQuZ2V0SW50OCgxKXx8YihDW1RdLHtzZXRJbnQ4OmZ1bmN0aW9uKHQsbil7ZXQuY2FsbCh0aGlzLHQsbjw8MjQ+PjI0KX0sc2V0VWludDg6ZnVuY3Rpb24odCxuKXtldC5jYWxsKHRoaXMsdCxuPDwyND4+MjQpfX0sITApfWVsc2UgTj1mdW5jdGlvbih0KXt3KHRoaXMsTixqKTt2YXIgbj1FKHQpO3RoaXMuX2I9QS5jYWxsKEFycmF5KG4pLDApLHRoaXNbS109bn0sQz1mdW5jdGlvbih0LG4sZSl7dyh0aGlzLEMsayksdyh0LE4sayk7dmFyIHI9dFtLXSxpPVMobik7aWYoaTwwfHxpPnIpdGhyb3cgRChcIldyb25nIG9mZnNldCFcIik7aWYoZT12b2lkIDA9PT1lP3ItaTp4KGUpLGkrZT5yKXRocm93IEQoUCk7dGhpc1tIXT10LHRoaXNbSl09aSx0aGlzW0tdPWV9LGQmJihsKE4sVSxcIl9sXCIpLGwoQyxWLFwiX2JcIiksbChDLFUsXCJfbFwiKSxsKEMscSxcIl9vXCIpKSxiKENbVF0se2dldEludDg6ZnVuY3Rpb24odCl7cmV0dXJuIGgodGhpcywxLHQpWzBdPDwyND4+MjR9LGdldFVpbnQ4OmZ1bmN0aW9uKHQpe3JldHVybiBoKHRoaXMsMSx0KVswXX0sZ2V0SW50MTY6ZnVuY3Rpb24odCl7dmFyIG49aCh0aGlzLDIsdCxhcmd1bWVudHNbMV0pO3JldHVybihuWzFdPDw4fG5bMF0pPDwxNj4+MTZ9LGdldFVpbnQxNjpmdW5jdGlvbih0KXt2YXIgbj1oKHRoaXMsMix0LGFyZ3VtZW50c1sxXSk7cmV0dXJuIG5bMV08PDh8blswXX0sZ2V0SW50MzI6ZnVuY3Rpb24odCl7cmV0dXJuIG8oaCh0aGlzLDQsdCxhcmd1bWVudHNbMV0pKX0sZ2V0VWludDMyOmZ1bmN0aW9uKHQpe3JldHVybiBvKGgodGhpcyw0LHQsYXJndW1lbnRzWzFdKSk+Pj4wfSxnZXRGbG9hdDMyOmZ1bmN0aW9uKHQpe3JldHVybiBpKGgodGhpcyw0LHQsYXJndW1lbnRzWzFdKSwyMyw0KX0sZ2V0RmxvYXQ2NDpmdW5jdGlvbih0KXtyZXR1cm4gaShoKHRoaXMsOCx0LGFyZ3VtZW50c1sxXSksNTIsOCl9LHNldEludDg6ZnVuY3Rpb24odCxuKXt2KHRoaXMsMSx0LGMsbil9LHNldFVpbnQ4OmZ1bmN0aW9uKHQsbil7dih0aGlzLDEsdCxjLG4pfSxzZXRJbnQxNjpmdW5jdGlvbih0LG4pe3YodGhpcywyLHQscyxuLGFyZ3VtZW50c1syXSl9LHNldFVpbnQxNjpmdW5jdGlvbih0LG4pe3YodGhpcywyLHQscyxuLGFyZ3VtZW50c1syXSl9LHNldEludDMyOmZ1bmN0aW9uKHQsbil7dih0aGlzLDQsdCx1LG4sYXJndW1lbnRzWzJdKX0sc2V0VWludDMyOmZ1bmN0aW9uKHQsbil7dih0aGlzLDQsdCx1LG4sYXJndW1lbnRzWzJdKX0sc2V0RmxvYXQzMjpmdW5jdGlvbih0LG4pe3YodGhpcyw0LHQsZixuLGFyZ3VtZW50c1syXSl9LHNldEZsb2F0NjQ6ZnVuY3Rpb24odCxuKXt2KHRoaXMsOCx0LGEsbixhcmd1bWVudHNbMl0pfX0pO0woTixqKSxMKEMsayksbShDW1RdLGcuVklFVywhMCksbltqXT1OLG5ba109Q30sZnVuY3Rpb24odCxuLGUpe24uZj1lKDUpfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KSxpPWUoNzMpLG89ZSg1KShcInNwZWNpZXNcIik7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuO3JldHVybiBpKHQpJiYobj10LmNvbnN0cnVjdG9yLFwiZnVuY3Rpb25cIiE9dHlwZW9mIG58fG4hPT1BcnJheSYmIWkobi5wcm90b3R5cGUpfHwobj12b2lkIDApLHIobikmJihuPW5bb10sbnVsbD09PW4mJihuPXZvaWQgMCkpKSx2b2lkIDA9PT1uP0FycmF5Om59fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg5MCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyhyKHQpKShuKX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDE3KSxpPWUoNCksbz1lKDcyKSxjPVtdLnNsaWNlLHM9e30sdT1mdW5jdGlvbih0LG4sZSl7aWYoIShuIGluIHMpKXtmb3IodmFyIHI9W10saT0wO2k8bjtpKyspcltpXT1cImFbXCIraStcIl1cIjtzW25dPUZ1bmN0aW9uKFwiRixhXCIsXCJyZXR1cm4gbmV3IEYoXCIrci5qb2luKFwiLFwiKStcIilcIil9cmV0dXJuIHNbbl0odCxlKX07dC5leHBvcnRzPUZ1bmN0aW9uLmJpbmR8fGZ1bmN0aW9uKHQpe3ZhciBuPXIodGhpcyksZT1jLmNhbGwoYXJndW1lbnRzLDEpLHM9ZnVuY3Rpb24oKXt2YXIgcj1lLmNvbmNhdChjLmNhbGwoYXJndW1lbnRzKSk7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBzP3UobixyLmxlbmd0aCxyKTpvKG4scix0KX07cmV0dXJuIGkobi5wcm90b3R5cGUpJiYocy5wcm90b3R5cGU9bi5wcm90b3R5cGUpLHN9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyOCksaT1lKDQ1KSxvPWUoMzkpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgbj1yKHQpLGU9aS5mO2lmKGUpZm9yKHZhciBjLHM9ZSh0KSx1PW8uZixhPTA7cy5sZW5ndGg+YTspdS5jYWxsKHQsYz1zW2ErK10pJiZuLnB1c2goYyk7cmV0dXJuIG59fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgyKTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdD1yKHRoaXMpLG49XCJcIjtyZXR1cm4gdC5nbG9iYWwmJihuKz1cImdcIiksdC5pZ25vcmVDYXNlJiYobis9XCJpXCIpLHQubXVsdGlsaW5lJiYobis9XCJtXCIpLHQudW5pY29kZSYmKG4rPVwidVwiKSx0LnN0aWNreSYmKG4rPVwieVwiKSxufX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCksaT1lKDU4KS5zZXQ7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXt2YXIgbyxjPW4uY29uc3RydWN0b3I7cmV0dXJuIGMhPT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjJiYobz1jLnByb3RvdHlwZSkhPT1lLnByb3RvdHlwZSYmcihvKSYmaSYmaSh0LG8pLHR9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgzNiksaT1lKDE5KSxvPWUoMzApLGM9e307ZSgxMSkoYyxlKDUpKFwiaXRlcmF0b3JcIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHQuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7dC5wcm90b3R5cGU9cihjLHtuZXh0OmkoMSxlKX0pLG8odCxuK1wiIEl0ZXJhdG9yXCIpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNTcpLGk9TWF0aC5wb3csbz1pKDIsLTUyKSxjPWkoMiwtMjMpLHM9aSgyLDEyNykqKDItYyksdT1pKDIsLTEyNiksYT1mdW5jdGlvbih0KXtyZXR1cm4gdCsxL28tMS9vfTt0LmV4cG9ydHM9TWF0aC5mcm91bmR8fGZ1bmN0aW9uKHQpe3ZhciBuLGUsaT1NYXRoLmFicyh0KSxmPXIodCk7cmV0dXJuIGk8dT9mKmEoaS91L2MpKnUqYzoobj0oMStjL28pKmksZT1uLShuLWkpLGU+c3x8ZSE9ZT9mKigxLzApOmYqZSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzKSxpPWUoNjMpLnNldCxvPXIuTXV0YXRpb25PYnNlcnZlcnx8ci5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLGM9ci5wcm9jZXNzLHM9ci5Qcm9taXNlLHU9XCJwcm9jZXNzXCI9PWUoMjUpKGMpO3QuZXhwb3J0cz1mdW5jdGlvbigpe3ZhciB0LG4sZSxhPWZ1bmN0aW9uKCl7dmFyIHIsaTtmb3IodSYmKHI9Yy5kb21haW4pJiZyLmV4aXQoKTt0Oyl7aT10LmZuLHQ9dC5uZXh0O3RyeXtpKCl9Y2F0Y2gocil7dGhyb3cgdD9lKCk6bj12b2lkIDAscn19bj12b2lkIDAsciYmci5lbnRlcigpfTtpZih1KWU9ZnVuY3Rpb24oKXtjLm5leHRUaWNrKGEpfTtlbHNlIGlmKG8pe3ZhciBmPSEwLGw9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIik7bmV3IG8oYSkub2JzZXJ2ZShsLHtjaGFyYWN0ZXJEYXRhOiEwfSksZT1mdW5jdGlvbigpe2wuZGF0YT1mPSFmfX1lbHNlIGlmKHMmJnMucmVzb2x2ZSl7dmFyIGg9cy5yZXNvbHZlKCk7ZT1mdW5jdGlvbigpe2gudGhlbihhKX19ZWxzZSBlPWZ1bmN0aW9uKCl7aS5jYWxsKHIsYSl9O3JldHVybiBmdW5jdGlvbihyKXt2YXIgaT17Zm46cixuZXh0OnZvaWQgMH07biYmKG4ubmV4dD1pKSx0fHwodD1pLGUoKSksbj1pfX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDcpLGk9ZSgyKSxvPWUoMjgpO3QuZXhwb3J0cz1lKDkpP09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzOmZ1bmN0aW9uKHQsbil7aSh0KTtmb3IodmFyIGUsYz1vKG4pLHM9Yy5sZW5ndGgsdT0wO3M+dTspci5mKHQsZT1jW3UrK10sbltlXSk7cmV0dXJuIHR9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxMyksaT1lKDM3KS5mLG89e30udG9TdHJpbmcsYz1cIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzP09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdyk6W10scz1mdW5jdGlvbih0KXt0cnl7cmV0dXJuIGkodCl9Y2F0Y2godCl7cmV0dXJuIGMuc2xpY2UoKX19O3QuZXhwb3J0cy5mPWZ1bmN0aW9uKHQpe3JldHVybiBjJiZcIltvYmplY3QgV2luZG93XVwiPT1vLmNhbGwodCk/cyh0KTppKHIodCkpfX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybntlOiExLHY6dCgpfX1jYXRjaCh0KXtyZXR1cm57ZTohMCx2OnR9fX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIpLGk9ZSg0KSxvPWUoODApO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe2lmKHIodCksaShuKSYmbi5jb25zdHJ1Y3Rvcj09PXQpcmV0dXJuIG47dmFyIGU9by5mKHQpLGM9ZS5yZXNvbHZlO3JldHVybiBjKG4pLGUucHJvbWlzZX19LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPU9iamVjdC5pc3x8ZnVuY3Rpb24odCxuKXtyZXR1cm4gdD09PW4/MCE9PXR8fDEvdD09PTEvbjp0IT10JiZuIT1ufX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjApLGk9ZSgxOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUpe3ZhciBvLGMscz1TdHJpbmcoaShuKSksdT1yKGUpLGE9cy5sZW5ndGg7cmV0dXJuIHU8MHx8dT49YT90P1wiXCI6dm9pZCAwOihvPXMuY2hhckNvZGVBdCh1KSxvPDU1Mjk2fHxvPjU2MzE5fHx1KzE9PT1hfHwoYz1zLmNoYXJDb2RlQXQodSsxKSk8NTYzMjB8fGM+NTczNDM/dD9zLmNoYXJBdCh1KTpvOnQ/cy5zbGljZSh1LHUrMik6KG8tNTUyOTY8PDEwKSsoYy01NjMyMCkrNjU1MzYpfX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDMpLGk9ZSgzNCksbz1lKDI3KSxjPWUoODkpLHM9ZSg3KS5mO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgbj1pLlN5bWJvbHx8KGkuU3ltYm9sPW8/e306ci5TeW1ib2x8fHt9KTtcIl9cIj09dC5jaGFyQXQoMCl8fHQgaW4gbnx8cyhuLHQse3ZhbHVlOmMuZih0KX0pfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlAsXCJBcnJheVwiLHtjb3B5V2l0aGluOmUoNjcpfSksZSgyMykoXCJjb3B5V2l0aGluXCIpfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUCxcIkFycmF5XCIse2ZpbGw6ZSg0Nyl9KSxlKDIzKShcImZpbGxcIil9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSgzMykoNiksbz1cImZpbmRJbmRleFwiLGM9ITA7byBpbltdJiZBcnJheSgxKVtvXShmdW5jdGlvbigpe2M9ITF9KSxyKHIuUCtyLkYqYyxcIkFycmF5XCIse2ZpbmRJbmRleDpmdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLGUoMjMpKG8pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoMzMpKDUpLG89XCJmaW5kXCIsYz0hMDtvIGluW10mJkFycmF5KDEpW29dKGZ1bmN0aW9uKCl7Yz0hMX0pLHIoci5QK3IuRipjLFwiQXJyYXlcIix7ZmluZDpmdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLGUoMjMpKG8pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxMiksaT1lKDEpLG89ZSgyMSksYz1lKDc2KSxzPWUoNTUpLHU9ZSg4KSxhPWUoNTApLGY9ZSg2NSk7aShpLlMraS5GKiFlKDQ0KShmdW5jdGlvbih0KXtBcnJheS5mcm9tKHQpfSksXCJBcnJheVwiLHtmcm9tOmZ1bmN0aW9uKHQpe3ZhciBuLGUsaSxsLGg9byh0KSx2PVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSxwPWFyZ3VtZW50cy5sZW5ndGgsZD1wPjE/YXJndW1lbnRzWzFdOnZvaWQgMCx5PXZvaWQgMCE9PWQsZz0wLG09ZihoKTtpZih5JiYoZD1yKGQscD4yP2FyZ3VtZW50c1syXTp2b2lkIDAsMikpLHZvaWQgMD09bXx8dj09QXJyYXkmJnMobSkpZm9yKG49dShoLmxlbmd0aCksZT1uZXcgdihuKTtuPmc7ZysrKWEoZSxnLHk/ZChoW2ddLGcpOmhbZ10pO2Vsc2UgZm9yKGw9bS5jYWxsKGgpLGU9bmV3IHY7IShpPWwubmV4dCgpKS5kb25lO2crKylhKGUsZyx5P2MobCxkLFtpLnZhbHVlLGddLCEwKTppLnZhbHVlKTtyZXR1cm4gZS5sZW5ndGg9ZyxlfX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoNTApO3Ioci5TK3IuRiplKDYpKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4hKEFycmF5Lm9mLmNhbGwodClpbnN0YW5jZW9mIHQpfSksXCJBcnJheVwiLHtvZjpmdW5jdGlvbigpe2Zvcih2YXIgdD0wLG49YXJndW1lbnRzLmxlbmd0aCxlPW5ldyhcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXkpKG4pO24+dDspaShlLHQsYXJndW1lbnRzW3QrK10pO3JldHVybiBlLmxlbmd0aD1uLGV9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDcpLmYsaT1GdW5jdGlvbi5wcm90b3R5cGUsbz0vXlxccypmdW5jdGlvbiAoW14gKF0qKS8sYz1cIm5hbWVcIjtjIGluIGl8fGUoOSkmJnIoaSxjLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7dHJ5e3JldHVybihcIlwiK3RoaXMpLm1hdGNoKG8pWzFdfWNhdGNoKHQpe3JldHVyblwiXCJ9fX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSg2OCksaT1lKDMyKSxvPVwiTWFwXCI7dC5leHBvcnRzPWUoNDEpKG8sZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7Z2V0OmZ1bmN0aW9uKHQpe3ZhciBuPXIuZ2V0RW50cnkoaSh0aGlzLG8pLHQpO3JldHVybiBuJiZuLnZ9LHNldDpmdW5jdGlvbih0LG4pe3JldHVybiByLmRlZihpKHRoaXMsbyksMD09PXQ/MDp0LG4pfX0sciwhMCl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg3OSksbz1NYXRoLnNxcnQsYz1NYXRoLmFjb3NoO3Ioci5TK3IuRiohKGMmJjcxMD09TWF0aC5mbG9vcihjKE51bWJlci5NQVhfVkFMVUUpKSYmYygxLzApPT0xLzApLFwiTWF0aFwiLHthY29zaDpmdW5jdGlvbih0KXtyZXR1cm4odD0rdCk8MT9OYU46dD45NDkwNjI2NS42MjQyNTE1Nj9NYXRoLmxvZyh0KStNYXRoLkxOMjppKHQtMStvKHQtMSkqbyh0KzEpKX19KX0sZnVuY3Rpb24odCxuLGUpe2Z1bmN0aW9uIHIodCl7cmV0dXJuIGlzRmluaXRlKHQ9K3QpJiYwIT10P3Q8MD8tcigtdCk6TWF0aC5sb2codCtNYXRoLnNxcnQodCp0KzEpKTp0fXZhciBpPWUoMSksbz1NYXRoLmFzaW5oO2koaS5TK2kuRiohKG8mJjEvbygwKT4wKSxcIk1hdGhcIix7YXNpbmg6cn0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPU1hdGguYXRhbmg7cihyLlMrci5GKiEoaSYmMS9pKC0wKTwwKSxcIk1hdGhcIix7YXRhbmg6ZnVuY3Rpb24odCl7cmV0dXJuIDA9PSh0PSt0KT90Ok1hdGgubG9nKCgxK3QpLygxLXQpKS8yfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoNTcpO3Ioci5TLFwiTWF0aFwiLHtjYnJ0OmZ1bmN0aW9uKHQpe3JldHVybiBpKHQ9K3QpKk1hdGgucG93KE1hdGguYWJzKHQpLDEvMyl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTWF0aFwiLHtjbHozMjpmdW5jdGlvbih0KXtyZXR1cm4odD4+Pj0wKT8zMS1NYXRoLmZsb29yKE1hdGgubG9nKHQrLjUpKk1hdGguTE9HMkUpOjMyfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPU1hdGguZXhwO3Ioci5TLFwiTWF0aFwiLHtjb3NoOmZ1bmN0aW9uKHQpe3JldHVybihpKHQ9K3QpK2koLXQpKS8yfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoNTYpO3Ioci5TK3IuRiooaSE9TWF0aC5leHBtMSksXCJNYXRoXCIse2V4cG0xOml9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJNYXRoXCIse2Zyb3VuZDplKDk3KX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPU1hdGguYWJzO3Ioci5TLFwiTWF0aFwiLHtoeXBvdDpmdW5jdGlvbih0LG4pe2Zvcih2YXIgZSxyLG89MCxjPTAscz1hcmd1bWVudHMubGVuZ3RoLHU9MDtjPHM7KWU9aShhcmd1bWVudHNbYysrXSksdTxlPyhyPXUvZSxvPW8qcipyKzEsdT1lKTplPjA/KHI9ZS91LG8rPXIqcik6bys9ZTtyZXR1cm4gdT09PTEvMD8xLzA6dSpNYXRoLnNxcnQobyl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9TWF0aC5pbXVsO3Ioci5TK3IuRiplKDYpKGZ1bmN0aW9uKCl7cmV0dXJuIGkoNDI5NDk2NzI5NSw1KSE9LTV8fDIhPWkubGVuZ3RofSksXCJNYXRoXCIse2ltdWw6ZnVuY3Rpb24odCxuKXt2YXIgZT02NTUzNSxyPSt0LGk9K24sbz1lJnIsYz1lJmk7cmV0dXJuIDB8bypjKygoZSZyPj4+MTYpKmMrbyooZSZpPj4+MTYpPDwxNj4+PjApfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk1hdGhcIix7bG9nMTA6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubG9nKHQpKk1hdGguTE9HMTBFfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk1hdGhcIix7bG9nMXA6ZSg3OSl9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJNYXRoXCIse2xvZzI6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubG9nKHQpL01hdGguTE4yfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk1hdGhcIix7c2lnbjplKDU3KX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoNTYpLG89TWF0aC5leHA7cihyLlMrci5GKmUoNikoZnVuY3Rpb24oKXtyZXR1cm4hTWF0aC5zaW5oKC0yZS0xNykhPS0yZS0xN30pLFwiTWF0aFwiLHtzaW5oOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmFicyh0PSt0KTwxPyhpKHQpLWkoLXQpKS8yOihvKHQtMSktbygtdC0xKSkqKE1hdGguRS8yKX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDU2KSxvPU1hdGguZXhwO3Ioci5TLFwiTWF0aFwiLHt0YW5oOmZ1bmN0aW9uKHQpe3ZhciBuPWkodD0rdCksZT1pKC10KTtyZXR1cm4gbj09MS8wPzE6ZT09MS8wPy0xOihuLWUpLyhvKHQpK28oLXQpKX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJNYXRoXCIse3RydW5jOmZ1bmN0aW9uKHQpe3JldHVybih0PjA/TWF0aC5mbG9vcjpNYXRoLmNlaWwpKHQpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk51bWJlclwiLHtFUFNJTE9OOk1hdGgucG93KDIsLTUyKX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMykuaXNGaW5pdGU7cihyLlMsXCJOdW1iZXJcIix7aXNGaW5pdGU6ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJmkodCl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTnVtYmVyXCIse2lzSW50ZWdlcjplKDc0KX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk51bWJlclwiLHtpc05hTjpmdW5jdGlvbih0KXtyZXR1cm4gdCE9dH19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDc0KSxvPU1hdGguYWJzO3Ioci5TLFwiTnVtYmVyXCIse2lzU2FmZUludGVnZXI6ZnVuY3Rpb24odCl7cmV0dXJuIGkodCkmJm8odCk8PTkwMDcxOTkyNTQ3NDA5OTF9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTnVtYmVyXCIse01BWF9TQUZFX0lOVEVHRVI6OTAwNzE5OTI1NDc0MDk5MX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk51bWJlclwiLHtNSU5fU0FGRV9JTlRFR0VSOi05MDA3MTk5MjU0NzQwOTkxfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TK3IuRixcIk9iamVjdFwiLHthc3NpZ246ZSg4MSl9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJPYmplY3RcIix7aXM6ZSgxMDMpfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiT2JqZWN0XCIse3NldFByb3RvdHlwZU9mOmUoNTgpLnNldH0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsaSxvLGMscz1lKDI3KSx1PWUoMyksYT1lKDEyKSxmPWUoNDkpLGw9ZSgxKSxoPWUoNCksdj1lKDE3KSxwPWUoMjQpLGQ9ZSg0MykseT1lKDYxKSxnPWUoNjMpLnNldCxtPWUoOTgpKCksYj1lKDgwKSxfPWUoMTAxKSx3PWUoMTAyKSxTPVwiUHJvbWlzZVwiLHg9dS5UeXBlRXJyb3IsRT11LnByb2Nlc3MsTz11W1NdLE09XCJwcm9jZXNzXCI9PWYoRSksQT1mdW5jdGlvbigpe30sTD1pPWIuZixqPSEhZnVuY3Rpb24oKXt0cnl7dmFyIHQ9Ty5yZXNvbHZlKDEpLG49KHQuY29uc3RydWN0b3I9e30pW2UoNSkoXCJzcGVjaWVzXCIpXT1mdW5jdGlvbih0KXt0KEEsQSl9O3JldHVybihNfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBQcm9taXNlUmVqZWN0aW9uRXZlbnQpJiZ0LnRoZW4oQSlpbnN0YW5jZW9mIG59Y2F0Y2godCl7fX0oKSxrPWZ1bmN0aW9uKHQpe3ZhciBuO3JldHVybiEoIWgodCl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mKG49dC50aGVuKSkmJm59LFQ9ZnVuY3Rpb24odCxuKXtpZighdC5fbil7dC5fbj0hMDt2YXIgZT10Ll9jO20oZnVuY3Rpb24oKXtmb3IodmFyIHI9dC5fdixpPTE9PXQuX3Msbz0wLGM9ZnVuY3Rpb24obil7dmFyIGUsbyxjPWk/bi5vazpuLmZhaWwscz1uLnJlc29sdmUsdT1uLnJlamVjdCxhPW4uZG9tYWluO3RyeXtjPyhpfHwoMj09dC5faCYmTih0KSx0Ll9oPTEpLGM9PT0hMD9lPXI6KGEmJmEuZW50ZXIoKSxlPWMociksYSYmYS5leGl0KCkpLGU9PT1uLnByb21pc2U/dSh4KFwiUHJvbWlzZS1jaGFpbiBjeWNsZVwiKSk6KG89ayhlKSk/by5jYWxsKGUscyx1KTpzKGUpKTp1KHIpfWNhdGNoKHQpe3UodCl9fTtlLmxlbmd0aD5vOyljKGVbbysrXSk7dC5fYz1bXSx0Ll9uPSExLG4mJiF0Ll9oJiZQKHQpfSl9fSxQPWZ1bmN0aW9uKHQpe2cuY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIG4sZSxyLGk9dC5fdixvPUYodCk7aWYobyYmKG49XyhmdW5jdGlvbigpe00/RS5lbWl0KFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsaSx0KTooZT11Lm9udW5oYW5kbGVkcmVqZWN0aW9uKT9lKHtwcm9taXNlOnQscmVhc29uOml9KToocj11LmNvbnNvbGUpJiZyLmVycm9yJiZyLmVycm9yKFwiVW5oYW5kbGVkIHByb21pc2UgcmVqZWN0aW9uXCIsaSl9KSx0Ll9oPU18fEYodCk/MjoxKSx0Ll9hPXZvaWQgMCxvJiZuLmUpdGhyb3cgbi52fSl9LEY9ZnVuY3Rpb24odCl7aWYoMT09dC5faClyZXR1cm4hMTtmb3IodmFyIG4sZT10Ll9hfHx0Ll9jLHI9MDtlLmxlbmd0aD5yOylpZihuPWVbcisrXSxuLmZhaWx8fCFGKG4ucHJvbWlzZSkpcmV0dXJuITE7cmV0dXJuITB9LE49ZnVuY3Rpb24odCl7Zy5jYWxsKHUsZnVuY3Rpb24oKXt2YXIgbjtNP0UuZW1pdChcInJlamVjdGlvbkhhbmRsZWRcIix0KToobj11Lm9ucmVqZWN0aW9uaGFuZGxlZCkmJm4oe3Byb21pc2U6dCxyZWFzb246dC5fdn0pfSl9LEM9ZnVuY3Rpb24odCl7dmFyIG49dGhpcztuLl9kfHwobi5fZD0hMCxuPW4uX3d8fG4sbi5fdj10LG4uX3M9MixuLl9hfHwobi5fYT1uLl9jLnNsaWNlKCkpLFQobiwhMCkpfSxSPWZ1bmN0aW9uKHQpe3ZhciBuLGU9dGhpcztpZighZS5fZCl7ZS5fZD0hMCxlPWUuX3d8fGU7dHJ5e2lmKGU9PT10KXRocm93IHgoXCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZlwiKTsobj1rKHQpKT9tKGZ1bmN0aW9uKCl7dmFyIHI9e193OmUsX2Q6ITF9O3RyeXtuLmNhbGwodCxhKFIsciwxKSxhKEMsciwxKSl9Y2F0Y2godCl7Qy5jYWxsKHIsdCl9fSk6KGUuX3Y9dCxlLl9zPTEsVChlLCExKSl9Y2F0Y2godCl7Qy5jYWxsKHtfdzplLF9kOiExfSx0KX19fTtqfHwoTz1mdW5jdGlvbih0KXtwKHRoaXMsTyxTLFwiX2hcIiksdih0KSxyLmNhbGwodGhpcyk7dHJ5e3QoYShSLHRoaXMsMSksYShDLHRoaXMsMSkpfWNhdGNoKHQpe0MuY2FsbCh0aGlzLHQpfX0scj1mdW5jdGlvbih0KXt0aGlzLl9jPVtdLHRoaXMuX2E9dm9pZCAwLHRoaXMuX3M9MCx0aGlzLl9kPSExLHRoaXMuX3Y9dm9pZCAwLHRoaXMuX2g9MCx0aGlzLl9uPSExfSxyLnByb3RvdHlwZT1lKDI5KShPLnByb3RvdHlwZSx7dGhlbjpmdW5jdGlvbih0LG4pe3ZhciBlPUwoeSh0aGlzLE8pKTtyZXR1cm4gZS5vaz1cImZ1bmN0aW9uXCIhPXR5cGVvZiB0fHx0LGUuZmFpbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiZuLGUuZG9tYWluPU0/RS5kb21haW46dm9pZCAwLHRoaXMuX2MucHVzaChlKSx0aGlzLl9hJiZ0aGlzLl9hLnB1c2goZSksdGhpcy5fcyYmVCh0aGlzLCExKSxlLnByb21pc2V9LGNhdGNoOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRoZW4odm9pZCAwLHQpfX0pLG89ZnVuY3Rpb24oKXt2YXIgdD1uZXcgcjt0aGlzLnByb21pc2U9dCx0aGlzLnJlc29sdmU9YShSLHQsMSksdGhpcy5yZWplY3Q9YShDLHQsMSl9LGIuZj1MPWZ1bmN0aW9uKHQpe3JldHVybiB0PT09T3x8dD09PWM/bmV3IG8odCk6aSh0KX0pLGwobC5HK2wuVytsLkYqIWose1Byb21pc2U6T30pLGUoMzApKE8sUyksZSg0NikoUyksYz1lKDM0KVtTXSxsKGwuUytsLkYqIWosUyx7cmVqZWN0OmZ1bmN0aW9uKHQpe3ZhciBuPUwodGhpcyksZT1uLnJlamVjdDtyZXR1cm4gZSh0KSxuLnByb21pc2V9fSksbChsLlMrbC5GKihzfHwhaiksUyx7cmVzb2x2ZTpmdW5jdGlvbih0KXtyZXR1cm4gdyhzJiZ0aGlzPT09Yz9POnRoaXMsdCl9fSksbChsLlMrbC5GKiEoaiYmZSg0NCkoZnVuY3Rpb24odCl7Ty5hbGwodCkuY2F0Y2goQSl9KSksUyx7YWxsOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsZT1MKG4pLHI9ZS5yZXNvbHZlLGk9ZS5yZWplY3Qsbz1fKGZ1bmN0aW9uKCl7dmFyIGU9W10sbz0wLGM9MTtkKHQsITEsZnVuY3Rpb24odCl7dmFyIHM9bysrLHU9ITE7ZS5wdXNoKHZvaWQgMCksYysrLG4ucmVzb2x2ZSh0KS50aGVuKGZ1bmN0aW9uKHQpe3V8fCh1PSEwLGVbc109dCwtLWN8fHIoZSkpfSxpKX0pLC0tY3x8cihlKX0pO3JldHVybiBvLmUmJmkoby52KSxlLnByb21pc2V9LHJhY2U6ZnVuY3Rpb24odCl7dmFyIG49dGhpcyxlPUwobikscj1lLnJlamVjdCxpPV8oZnVuY3Rpb24oKXtkKHQsITEsZnVuY3Rpb24odCl7bi5yZXNvbHZlKHQpLnRoZW4oZS5yZXNvbHZlLHIpfSl9KTtyZXR1cm4gaS5lJiZyKGkudiksZS5wcm9taXNlfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMTcpLG89ZSgyKSxjPShlKDMpLlJlZmxlY3R8fHt9KS5hcHBseSxzPUZ1bmN0aW9uLmFwcGx5O3Ioci5TK3IuRiohZSg2KShmdW5jdGlvbigpe2MoZnVuY3Rpb24oKXt9KX0pLFwiUmVmbGVjdFwiLHthcHBseTpmdW5jdGlvbih0LG4sZSl7dmFyIHI9aSh0KSx1PW8oZSk7cmV0dXJuIGM/YyhyLG4sdSk6cy5jYWxsKHIsbix1KX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDM2KSxvPWUoMTcpLGM9ZSgyKSxzPWUoNCksdT1lKDYpLGE9ZSg5MiksZj0oZSgzKS5SZWZsZWN0fHx7fSkuY29uc3RydWN0LGw9dShmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIShmKGZ1bmN0aW9uKCl7fSxbXSx0KWluc3RhbmNlb2YgdCl9KSxoPSF1KGZ1bmN0aW9uKCl7ZihmdW5jdGlvbigpe30pfSk7cihyLlMrci5GKihsfHxoKSxcIlJlZmxlY3RcIix7Y29uc3RydWN0OmZ1bmN0aW9uKHQsbil7byh0KSxjKG4pO3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg8Mz90Om8oYXJndW1lbnRzWzJdKTtpZihoJiYhbClyZXR1cm4gZih0LG4sZSk7aWYodD09ZSl7c3dpdGNoKG4ubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIG5ldyB0O2Nhc2UgMTpyZXR1cm4gbmV3IHQoblswXSk7Y2FzZSAyOnJldHVybiBuZXcgdChuWzBdLG5bMV0pO2Nhc2UgMzpyZXR1cm4gbmV3IHQoblswXSxuWzFdLG5bMl0pO2Nhc2UgNDpyZXR1cm4gbmV3IHQoblswXSxuWzFdLG5bMl0sblszXSl9dmFyIHI9W251bGxdO3JldHVybiByLnB1c2guYXBwbHkocixuKSxuZXcoYS5hcHBseSh0LHIpKX12YXIgdT1lLnByb3RvdHlwZSx2PWkocyh1KT91Ok9iamVjdC5wcm90b3R5cGUpLHA9RnVuY3Rpb24uYXBwbHkuY2FsbCh0LHYsbik7cmV0dXJuIHMocCk/cDp2fX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg3KSxpPWUoMSksbz1lKDIpLGM9ZSg0MCk7aShpLlMraS5GKmUoNikoZnVuY3Rpb24oKXtSZWZsZWN0LmRlZmluZVByb3BlcnR5KHIuZih7fSwxLHt2YWx1ZToxfSksMSx7dmFsdWU6Mn0pfSksXCJSZWZsZWN0XCIse2RlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsbixlKXtvKHQpLG49YyhuLCEwKSxvKGUpO3RyeXtyZXR1cm4gci5mKHQsbixlKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgxNSkuZixvPWUoMik7cihyLlMsXCJSZWZsZWN0XCIse2RlbGV0ZVByb3BlcnR5OmZ1bmN0aW9uKHQsbil7dmFyIGU9aShvKHQpLG4pO3JldHVybiEoZSYmIWUuY29uZmlndXJhYmxlKSYmZGVsZXRlIHRbbl19fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDE1KSxpPWUoMSksbz1lKDIpO2koaS5TLFwiUmVmbGVjdFwiLHtnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ZnVuY3Rpb24odCxuKXtyZXR1cm4gci5mKG8odCksbil9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgzOCksbz1lKDIpO3Ioci5TLFwiUmVmbGVjdFwiLHtnZXRQcm90b3R5cGVPZjpmdW5jdGlvbih0KXtyZXR1cm4gaShvKHQpKX19KX0sZnVuY3Rpb24odCxuLGUpe2Z1bmN0aW9uIHIodCxuKXt2YXIgZSxzLGY9YXJndW1lbnRzLmxlbmd0aDwzP3Q6YXJndW1lbnRzWzJdO3JldHVybiBhKHQpPT09Zj90W25dOihlPWkuZih0LG4pKT9jKGUsXCJ2YWx1ZVwiKT9lLnZhbHVlOnZvaWQgMCE9PWUuZ2V0P2UuZ2V0LmNhbGwoZik6dm9pZCAwOnUocz1vKHQpKT9yKHMsbixmKTp2b2lkIDB9dmFyIGk9ZSgxNSksbz1lKDM4KSxjPWUoMTApLHM9ZSgxKSx1PWUoNCksYT1lKDIpO3Mocy5TLFwiUmVmbGVjdFwiLHtnZXQ6cn0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIlJlZmxlY3RcIix7aGFzOmZ1bmN0aW9uKHQsbil7cmV0dXJuIG4gaW4gdH19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDIpLG89T2JqZWN0LmlzRXh0ZW5zaWJsZTtyKHIuUyxcIlJlZmxlY3RcIix7aXNFeHRlbnNpYmxlOmZ1bmN0aW9uKHQpe3JldHVybiBpKHQpLCFvfHxvKHQpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIlJlZmxlY3RcIix7b3duS2V5czplKDg0KX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMiksbz1PYmplY3QucHJldmVudEV4dGVuc2lvbnM7cihyLlMsXCJSZWZsZWN0XCIse3ByZXZlbnRFeHRlbnNpb25zOmZ1bmN0aW9uKHQpe2kodCk7dHJ5e3JldHVybiBvJiZvKHQpLCEwfWNhdGNoKHQpe3JldHVybiExfX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDU4KTtpJiZyKHIuUyxcIlJlZmxlY3RcIix7c2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCxuKXtpLmNoZWNrKHQsbik7dHJ5e3JldHVybiBpLnNldCh0LG4pLCEwfWNhdGNoKHQpe3JldHVybiExfX19KX0sZnVuY3Rpb24odCxuLGUpe2Z1bmN0aW9uIHIodCxuLGUpe3ZhciB1LGgsdj1hcmd1bWVudHMubGVuZ3RoPDQ/dDphcmd1bWVudHNbM10scD1vLmYoZih0KSxuKTtpZighcCl7aWYobChoPWModCkpKXJldHVybiByKGgsbixlLHYpO3A9YSgwKX1yZXR1cm4gcyhwLFwidmFsdWVcIik/IShwLndyaXRhYmxlPT09ITF8fCFsKHYpKSYmKHU9by5mKHYsbil8fGEoMCksdS52YWx1ZT1lLGkuZih2LG4sdSksITApOnZvaWQgMCE9PXAuc2V0JiYocC5zZXQuY2FsbCh2LGUpLCEwKX12YXIgaT1lKDcpLG89ZSgxNSksYz1lKDM4KSxzPWUoMTApLHU9ZSgxKSxhPWUoMTkpLGY9ZSgyKSxsPWUoNCk7dSh1LlMsXCJSZWZsZWN0XCIse3NldDpyfSl9LGZ1bmN0aW9uKHQsbixlKXtlKDkpJiZcImdcIiE9Ly4vZy5mbGFncyYmZSg3KS5mKFJlZ0V4cC5wcm90b3R5cGUsXCJmbGFnc1wiLHtjb25maWd1cmFibGU6ITAsZ2V0OmUoOTQpfSl9LGZ1bmN0aW9uKHQsbixlKXtlKDQyKShcIm1hdGNoXCIsMSxmdW5jdGlvbih0LG4sZSl7cmV0dXJuW2Z1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciByPXQodGhpcyksaT12b2lkIDA9PWU/dm9pZCAwOmVbbl07cmV0dXJuIHZvaWQgMCE9PWk/aS5jYWxsKGUscik6bmV3IFJlZ0V4cChlKVtuXShTdHJpbmcocikpfSxlXX0pfSxmdW5jdGlvbih0LG4sZSl7ZSg0MikoXCJyZXBsYWNlXCIsMixmdW5jdGlvbih0LG4sZSl7cmV0dXJuW2Z1bmN0aW9uKHIsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG89dCh0aGlzKSxjPXZvaWQgMD09cj92b2lkIDA6cltuXTtyZXR1cm4gdm9pZCAwIT09Yz9jLmNhbGwocixvLGkpOmUuY2FsbChTdHJpbmcobykscixpKX0sZV19KX0sZnVuY3Rpb24odCxuLGUpe2UoNDIpKFwic2VhcmNoXCIsMSxmdW5jdGlvbih0LG4sZSl7cmV0dXJuW2Z1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciByPXQodGhpcyksaT12b2lkIDA9PWU/dm9pZCAwOmVbbl07cmV0dXJuIHZvaWQgMCE9PWk/aS5jYWxsKGUscik6bmV3IFJlZ0V4cChlKVtuXShTdHJpbmcocikpfSxlXX0pfSxmdW5jdGlvbih0LG4sZSl7ZSg0MikoXCJzcGxpdFwiLDIsZnVuY3Rpb24odCxuLHIpe1widXNlIHN0cmljdFwiO3ZhciBpPWUoNzUpLG89cixjPVtdLnB1c2gscz1cInNwbGl0XCIsdT1cImxlbmd0aFwiLGE9XCJsYXN0SW5kZXhcIjtpZihcImNcIj09XCJhYmJjXCJbc10oLyhiKSovKVsxXXx8NCE9XCJ0ZXN0XCJbc10oLyg/OikvLC0xKVt1XXx8MiE9XCJhYlwiW3NdKC8oPzphYikqLylbdV18fDQhPVwiLlwiW3NdKC8oLj8pKC4/KS8pW3VdfHxcIi5cIltzXSgvKCkoKS8pW3VdPjF8fFwiXCJbc10oLy4/LylbdV0pe3ZhciBmPXZvaWQgMD09PS8oKT8/Ly5leGVjKFwiXCIpWzFdO3I9ZnVuY3Rpb24odCxuKXt2YXIgZT1TdHJpbmcodGhpcyk7aWYodm9pZCAwPT09dCYmMD09PW4pcmV0dXJuW107aWYoIWkodCkpcmV0dXJuIG8uY2FsbChlLHQsbik7dmFyIHIscyxsLGgsdixwPVtdLGQ9KHQuaWdub3JlQ2FzZT9cImlcIjpcIlwiKSsodC5tdWx0aWxpbmU/XCJtXCI6XCJcIikrKHQudW5pY29kZT9cInVcIjpcIlwiKSsodC5zdGlja3k/XCJ5XCI6XCJcIikseT0wLGc9dm9pZCAwPT09bj80Mjk0OTY3Mjk1Om4+Pj4wLG09bmV3IFJlZ0V4cCh0LnNvdXJjZSxkK1wiZ1wiKTtmb3IoZnx8KHI9bmV3IFJlZ0V4cChcIl5cIittLnNvdXJjZStcIiQoPyFcXFxccylcIixkKSk7KHM9bS5leGVjKGUpKSYmKGw9cy5pbmRleCtzWzBdW3VdLCEobD55JiYocC5wdXNoKGUuc2xpY2UoeSxzLmluZGV4KSksIWYmJnNbdV0+MSYmc1swXS5yZXBsYWNlKHIsZnVuY3Rpb24oKXtmb3Iodj0xO3Y8YXJndW1lbnRzW3VdLTI7disrKXZvaWQgMD09PWFyZ3VtZW50c1t2XSYmKHNbdl09dm9pZCAwKX0pLHNbdV0+MSYmcy5pbmRleDxlW3VdJiZjLmFwcGx5KHAscy5zbGljZSgxKSksaD1zWzBdW3VdLHk9bCxwW3VdPj1nKSkpOyltW2FdPT09cy5pbmRleCYmbVthXSsrO3JldHVybiB5PT09ZVt1XT8haCYmbS50ZXN0KFwiXCIpfHxwLnB1c2goXCJcIik6cC5wdXNoKGUuc2xpY2UoeSkpLHBbdV0+Zz9wLnNsaWNlKDAsZyk6cH19ZWxzZVwiMFwiW3NdKHZvaWQgMCwwKVt1XSYmKHI9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdm9pZCAwPT09dCYmMD09PW4/W106by5jYWxsKHRoaXMsdCxuKX0pO3JldHVybltmdW5jdGlvbihlLGkpe3ZhciBvPXQodGhpcyksYz12b2lkIDA9PWU/dm9pZCAwOmVbbl07cmV0dXJuIHZvaWQgMCE9PWM/Yy5jYWxsKGUsbyxpKTpyLmNhbGwoU3RyaW5nKG8pLGUsaSl9LHJdfSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDY4KSxpPWUoMzIpLG89XCJTZXRcIjt0LmV4cG9ydHM9ZSg0MSkobyxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHthZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHIuZGVmKGkodGhpcyxvKSx0PTA9PT10PzA6dCx0KX19LHIpfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoMTA0KSghMSk7cihyLlAsXCJTdHJpbmdcIix7Y29kZVBvaW50QXQ6ZnVuY3Rpb24odCl7cmV0dXJuIGkodGhpcyx0KX19KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDgpLG89ZSg2MiksYz1cImVuZHNXaXRoXCIscz1cIlwiW2NdO3Ioci5QK3IuRiplKDUzKShjKSxcIlN0cmluZ1wiLHtlbmRzV2l0aDpmdW5jdGlvbih0KXt2YXIgbj1vKHRoaXMsdCxjKSxlPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLHI9aShuLmxlbmd0aCksdT12b2lkIDA9PT1lP3I6TWF0aC5taW4oaShlKSxyKSxhPVN0cmluZyh0KTtyZXR1cm4gcz9zLmNhbGwobixhLHUpOm4uc2xpY2UodS1hLmxlbmd0aCx1KT09PWF9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgzMSksbz1TdHJpbmcuZnJvbUNoYXJDb2RlLGM9U3RyaW5nLmZyb21Db2RlUG9pbnQ7cihyLlMrci5GKighIWMmJjEhPWMubGVuZ3RoKSxcIlN0cmluZ1wiLHtmcm9tQ29kZVBvaW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgbixlPVtdLHI9YXJndW1lbnRzLmxlbmd0aCxjPTA7cj5jOyl7aWYobj0rYXJndW1lbnRzW2MrK10saShuLDExMTQxMTEpIT09bil0aHJvdyBSYW5nZUVycm9yKG4rXCIgaXMgbm90IGEgdmFsaWQgY29kZSBwb2ludFwiKTtlLnB1c2gobjw2NTUzNj9vKG4pOm8oKChuLT02NTUzNik+PjEwKSs1NTI5NixuJTEwMjQrNTYzMjApKX1yZXR1cm4gZS5qb2luKFwiXCIpfX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoNjIpLG89XCJpbmNsdWRlc1wiO3Ioci5QK3IuRiplKDUzKShvKSxcIlN0cmluZ1wiLHtpbmNsdWRlczpmdW5jdGlvbih0KXtyZXR1cm4hIX5pKHRoaXMsdCxvKS5pbmRleE9mKHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMTMpLG89ZSg4KTtyKHIuUyxcIlN0cmluZ1wiLHtyYXc6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPWkodC5yYXcpLGU9byhuLmxlbmd0aCkscj1hcmd1bWVudHMubGVuZ3RoLGM9W10scz0wO2U+czspYy5wdXNoKFN0cmluZyhuW3MrK10pKSxzPHImJmMucHVzaChTdHJpbmcoYXJndW1lbnRzW3NdKSk7cmV0dXJuIGMuam9pbihcIlwiKX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlAsXCJTdHJpbmdcIix7cmVwZWF0OmUoODYpfSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSg4KSxvPWUoNjIpLGM9XCJzdGFydHNXaXRoXCIscz1cIlwiW2NdO3Ioci5QK3IuRiplKDUzKShjKSxcIlN0cmluZ1wiLHtzdGFydHNXaXRoOmZ1bmN0aW9uKHQpe3ZhciBuPW8odGhpcyx0LGMpLGU9aShNYXRoLm1pbihhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxuLmxlbmd0aCkpLHI9U3RyaW5nKHQpO3JldHVybiBzP3MuY2FsbChuLHIsZSk6bi5zbGljZShlLGUrci5sZW5ndGgpPT09cn19KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMyksaT1lKDEwKSxvPWUoOSksYz1lKDEpLHM9ZSgxNiksdT1lKDM1KS5LRVksYT1lKDYpLGY9ZSg2MCksbD1lKDMwKSxoPWUoMjIpLHY9ZSg1KSxwPWUoODkpLGQ9ZSgxMDUpLHk9ZSg5MyksZz1lKDczKSxtPWUoMiksYj1lKDEzKSxfPWUoNDApLHc9ZSgxOSksUz1lKDM2KSx4PWUoMTAwKSxFPWUoMTUpLE89ZSg3KSxNPWUoMjgpLEE9RS5mLEw9Ty5mLGo9eC5mLGs9ci5TeW1ib2wsVD1yLkpTT04sUD1UJiZULnN0cmluZ2lmeSxGPVwicHJvdG90eXBlXCIsTj12KFwiX2hpZGRlblwiKSxDPXYoXCJ0b1ByaW1pdGl2ZVwiKSxSPXt9LnByb3BlcnR5SXNFbnVtZXJhYmxlLEQ9ZihcInN5bWJvbC1yZWdpc3RyeVwiKSxJPWYoXCJzeW1ib2xzXCIpLFc9ZihcIm9wLXN5bWJvbHNcIiksej1PYmplY3RbRl0sQj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBrLFk9ci5RT2JqZWN0LFg9IVl8fCFZW0ZdfHwhWVtGXS5maW5kQ2hpbGQsRz1vJiZhKGZ1bmN0aW9uKCl7cmV0dXJuIDchPVMoTCh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEwodGhpcyxcImFcIix7dmFsdWU6N30pLmF9fSkpLmF9KT9mdW5jdGlvbih0LG4sZSl7dmFyIHI9QSh6LG4pO3ImJmRlbGV0ZSB6W25dLEwodCxuLGUpLHImJnQhPT16JiZMKHosbixyKX06TCxWPWZ1bmN0aW9uKHQpe3ZhciBuPUlbdF09UyhrW0ZdKTtyZXR1cm4gbi5faz10LG59LFU9QiYmXCJzeW1ib2xcIj09dHlwZW9mIGsuaXRlcmF0b3I/ZnVuY3Rpb24odCl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Yga30scT1mdW5jdGlvbih0LG4sZSl7cmV0dXJuIHQ9PT16JiZxKFcsbixlKSxtKHQpLG49XyhuLCEwKSxtKGUpLGkoSSxuKT8oZS5lbnVtZXJhYmxlPyhpKHQsTikmJnRbTl1bbl0mJih0W05dW25dPSExKSxlPVMoZSx7ZW51bWVyYWJsZTp3KDAsITEpfSkpOihpKHQsTil8fEwodCxOLHcoMSx7fSkpLHRbTl1bbl09ITApLEcodCxuLGUpKTpMKHQsbixlKX0sSD1mdW5jdGlvbih0LG4pe20odCk7Zm9yKHZhciBlLHI9eShuPWIobikpLGk9MCxvPXIubGVuZ3RoO28+aTspcSh0LGU9cltpKytdLG5bZV0pO3JldHVybiB0fSxLPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHZvaWQgMD09PW4/Uyh0KTpIKFModCksbil9LEo9ZnVuY3Rpb24odCl7dmFyIG49Ui5jYWxsKHRoaXMsdD1fKHQsITApKTtyZXR1cm4hKHRoaXM9PT16JiZpKEksdCkmJiFpKFcsdCkpJiYoIShufHwhaSh0aGlzLHQpfHwhaShJLHQpfHxpKHRoaXMsTikmJnRoaXNbTl1bdF0pfHxuKX0sJD1mdW5jdGlvbih0LG4pe2lmKHQ9Yih0KSxuPV8obiwhMCksdCE9PXp8fCFpKEksbil8fGkoVyxuKSl7dmFyIGU9QSh0LG4pO3JldHVybiFlfHwhaShJLG4pfHxpKHQsTikmJnRbTl1bbl18fChlLmVudW1lcmFibGU9ITApLGV9fSxRPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbixlPWooYih0KSkscj1bXSxvPTA7ZS5sZW5ndGg+bzspaShJLG49ZVtvKytdKXx8bj09Tnx8bj09dXx8ci5wdXNoKG4pO3JldHVybiByfSxaPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbixlPXQ9PT16LHI9aihlP1c6Yih0KSksbz1bXSxjPTA7ci5sZW5ndGg+YzspIWkoSSxuPXJbYysrXSl8fGUmJiFpKHosbil8fG8ucHVzaChJW25dKTtyZXR1cm4gb307Qnx8KGs9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2Ygayl0aHJvdyBUeXBlRXJyb3IoXCJTeW1ib2wgaXMgbm90IGEgY29uc3RydWN0b3IhXCIpO3ZhciB0PWgoYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApLG49ZnVuY3Rpb24oZSl7dGhpcz09PXomJm4uY2FsbChXLGUpLGkodGhpcyxOKSYmaSh0aGlzW05dLHQpJiYodGhpc1tOXVt0XT0hMSksRyh0aGlzLHQsdygxLGUpKX07cmV0dXJuIG8mJlgmJkcoeix0LHtjb25maWd1cmFibGU6ITAsc2V0Om59KSxWKHQpfSxzKGtbRl0sXCJ0b1N0cmluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2t9KSxFLmY9JCxPLmY9cSxlKDM3KS5mPXguZj1RLGUoMzkpLmY9SixlKDQ1KS5mPVosbyYmIWUoMjcpJiZzKHosXCJwcm9wZXJ0eUlzRW51bWVyYWJsZVwiLEosITApLHAuZj1mdW5jdGlvbih0KXtyZXR1cm4gVih2KHQpKX0pLGMoYy5HK2MuVytjLkYqIUIse1N5bWJvbDprfSk7Zm9yKHZhciB0dD1cImhhc0luc3RhbmNlLGlzQ29uY2F0U3ByZWFkYWJsZSxpdGVyYXRvcixtYXRjaCxyZXBsYWNlLHNlYXJjaCxzcGVjaWVzLHNwbGl0LHRvUHJpbWl0aXZlLHRvU3RyaW5nVGFnLHVuc2NvcGFibGVzXCIuc3BsaXQoXCIsXCIpLG50PTA7dHQubGVuZ3RoPm50Oyl2KHR0W250KytdKTtmb3IodmFyIGV0PU0odi5zdG9yZSkscnQ9MDtldC5sZW5ndGg+cnQ7KWQoZXRbcnQrK10pO2MoYy5TK2MuRiohQixcIlN5bWJvbFwiLHtmb3I6ZnVuY3Rpb24odCl7cmV0dXJuIGkoRCx0Kz1cIlwiKT9EW3RdOkRbdF09ayh0KX0sa2V5Rm9yOmZ1bmN0aW9uKHQpe2lmKCFVKHQpKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBhIHN5bWJvbCFcIik7Zm9yKHZhciBuIGluIEQpaWYoRFtuXT09PXQpcmV0dXJuIG59LHVzZVNldHRlcjpmdW5jdGlvbigpe1g9ITB9LHVzZVNpbXBsZTpmdW5jdGlvbigpe1g9ITF9fSksYyhjLlMrYy5GKiFCLFwiT2JqZWN0XCIse2NyZWF0ZTpLLGRlZmluZVByb3BlcnR5OnEsZGVmaW5lUHJvcGVydGllczpILGdldE93blByb3BlcnR5RGVzY3JpcHRvcjokLGdldE93blByb3BlcnR5TmFtZXM6USxnZXRPd25Qcm9wZXJ0eVN5bWJvbHM6Wn0pLFQmJmMoYy5TK2MuRiooIUJ8fGEoZnVuY3Rpb24oKXt2YXIgdD1rKCk7cmV0dXJuXCJbbnVsbF1cIiE9UChbdF0pfHxcInt9XCIhPVAoe2E6dH0pfHxcInt9XCIhPVAoT2JqZWN0KHQpKX0pKSxcIkpTT05cIix7c3RyaW5naWZ5OmZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9PXQmJiFVKHQpKXtmb3IodmFyIG4sZSxyPVt0XSxpPTE7YXJndW1lbnRzLmxlbmd0aD5pOylyLnB1c2goYXJndW1lbnRzW2krK10pO3JldHVybiBuPXJbMV0sXCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKGU9biksIWUmJmcobil8fChuPWZ1bmN0aW9uKHQsbil7aWYoZSYmKG49ZS5jYWxsKHRoaXMsdCxuKSksIVUobikpcmV0dXJuIG59KSxyWzFdPW4sUC5hcHBseShULHIpfX19KSxrW0ZdW0NdfHxlKDExKShrW0ZdLEMsa1tGXS52YWx1ZU9mKSxsKGssXCJTeW1ib2xcIiksbChNYXRoLFwiTWF0aFwiLCEwKSxsKHIuSlNPTixcIkpTT05cIiwhMCl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSg2NCksbz1lKDg4KSxjPWUoMikscz1lKDMxKSx1PWUoOCksYT1lKDQpLGY9ZSgzKS5BcnJheUJ1ZmZlcixsPWUoNjEpLGg9by5BcnJheUJ1ZmZlcix2PW8uRGF0YVZpZXcscD1pLkFCViYmZi5pc1ZpZXcsZD1oLnByb3RvdHlwZS5zbGljZSx5PWkuVklFVyxnPVwiQXJyYXlCdWZmZXJcIjtyKHIuRytyLlcrci5GKihmIT09aCkse0FycmF5QnVmZmVyOmh9KSxyKHIuUytyLkYqIWkuQ09OU1RSLGcse2lzVmlldzpmdW5jdGlvbih0KXtyZXR1cm4gcCYmcCh0KXx8YSh0KSYmeSBpbiB0fX0pLHIoci5QK3IuVStyLkYqZSg2KShmdW5jdGlvbigpe3JldHVybiFuZXcgaCgyKS5zbGljZSgxLHZvaWQgMCkuYnl0ZUxlbmd0aH0pLGcse3NsaWNlOmZ1bmN0aW9uKHQsbil7aWYodm9pZCAwIT09ZCYmdm9pZCAwPT09bilyZXR1cm4gZC5jYWxsKGModGhpcyksdCk7Zm9yKHZhciBlPWModGhpcykuYnl0ZUxlbmd0aCxyPXModCxlKSxpPXModm9pZCAwPT09bj9lOm4sZSksbz1uZXcobCh0aGlzLGgpKSh1KGktcikpLGE9bmV3IHYodGhpcyksZj1uZXcgdihvKSxwPTA7cjxpOylmLnNldFVpbnQ4KHArKyxhLmdldFVpbnQ4KHIrKykpO3JldHVybiBvfX0pLGUoNDYpKGcpfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJGbG9hdDMyXCIsNCxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJGbG9hdDY0XCIsOCxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJJbnQxNlwiLDIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19KX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiSW50MzJcIiw0LGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIkludDhcIiwxLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIlVpbnQxNlwiLDIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19KX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiVWludDMyXCIsNCxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJVaW50OFwiLDEsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19KX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiVWludDhcIiwxLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSwhMCl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcixpPWUoMzMpKDApLG89ZSgxNiksYz1lKDM1KSxzPWUoODEpLHU9ZSg2OSksYT1lKDQpLGY9ZSg2KSxsPWUoMzIpLGg9XCJXZWFrTWFwXCIsdj1jLmdldFdlYWsscD1PYmplY3QuaXNFeHRlbnNpYmxlLGQ9dS51ZnN0b3JlLHk9e30sZz1mdW5jdGlvbih0KXtcclxucmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSxtPXtnZXQ6ZnVuY3Rpb24odCl7aWYoYSh0KSl7dmFyIG49dih0KTtyZXR1cm4gbj09PSEwP2QobCh0aGlzLGgpKS5nZXQodCk6bj9uW3RoaXMuX2ldOnZvaWQgMH19LHNldDpmdW5jdGlvbih0LG4pe3JldHVybiB1LmRlZihsKHRoaXMsaCksdCxuKX19LGI9dC5leHBvcnRzPWUoNDEpKGgsZyxtLHUsITAsITApO2YoZnVuY3Rpb24oKXtyZXR1cm4gNyE9KG5ldyBiKS5zZXQoKE9iamVjdC5mcmVlemV8fE9iamVjdCkoeSksNykuZ2V0KHkpfSkmJihyPXUuZ2V0Q29uc3RydWN0b3IoZyxoKSxzKHIucHJvdG90eXBlLG0pLGMuTkVFRD0hMCxpKFtcImRlbGV0ZVwiLFwiaGFzXCIsXCJnZXRcIixcInNldFwiXSxmdW5jdGlvbih0KXt2YXIgbj1iLnByb3RvdHlwZSxlPW5bdF07byhuLHQsZnVuY3Rpb24obixpKXtpZihhKG4pJiYhcChuKSl7dGhpcy5fZnx8KHRoaXMuX2Y9bmV3IHIpO3ZhciBvPXRoaXMuX2ZbdF0obixpKTtyZXR1cm5cInNldFwiPT10P3RoaXM6b31yZXR1cm4gZS5jYWxsKHRoaXMsbixpKX0pfSkpfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSg2OSksaT1lKDMyKSxvPVwiV2Vha1NldFwiO2UoNDEpKG8sZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7YWRkOmZ1bmN0aW9uKHQpe3JldHVybiByLmRlZihpKHRoaXMsbyksdCwhMCl9fSxyLCExLCEwKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDQ4KSghMCk7cihyLlAsXCJBcnJheVwiLHtpbmNsdWRlczpmdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfX0pLGUoMjMpKFwiaW5jbHVkZXNcIil9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg4MykoITApO3Ioci5TLFwiT2JqZWN0XCIse2VudHJpZXM6ZnVuY3Rpb24odCl7cmV0dXJuIGkodCl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg4NCksbz1lKDEzKSxjPWUoMTUpLHM9ZSg1MCk7cihyLlMsXCJPYmplY3RcIix7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yczpmdW5jdGlvbih0KXtmb3IodmFyIG4sZSxyPW8odCksdT1jLmYsYT1pKHIpLGY9e30sbD0wO2EubGVuZ3RoPmw7KWU9dShyLG49YVtsKytdKSx2b2lkIDAhPT1lJiZzKGYsbixlKTtyZXR1cm4gZn19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDgzKSghMSk7cihyLlMsXCJPYmplY3RcIix7dmFsdWVzOmZ1bmN0aW9uKHQpe3JldHVybiBpKHQpfX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoODUpO3Ioci5QLFwiU3RyaW5nXCIse3BhZEVuZDpmdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsITEpfX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoODUpO3Ioci5QLFwiU3RyaW5nXCIse3BhZFN0YXJ0OmZ1bmN0aW9uKHQpe3JldHVybiBpKHRoaXMsdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwhMCl9fSl9LGZ1bmN0aW9uKHQsbixlKXtmb3IodmFyIHI9ZSg2NiksaT1lKDI4KSxvPWUoMTYpLGM9ZSgzKSxzPWUoMTEpLHU9ZSgyNiksYT1lKDUpLGY9YShcIml0ZXJhdG9yXCIpLGw9YShcInRvU3RyaW5nVGFnXCIpLGg9dS5BcnJheSx2PXtDU1NSdWxlTGlzdDohMCxDU1NTdHlsZURlY2xhcmF0aW9uOiExLENTU1ZhbHVlTGlzdDohMSxDbGllbnRSZWN0TGlzdDohMSxET01SZWN0TGlzdDohMSxET01TdHJpbmdMaXN0OiExLERPTVRva2VuTGlzdDohMCxEYXRhVHJhbnNmZXJJdGVtTGlzdDohMSxGaWxlTGlzdDohMSxIVE1MQWxsQ29sbGVjdGlvbjohMSxIVE1MQ29sbGVjdGlvbjohMSxIVE1MRm9ybUVsZW1lbnQ6ITEsSFRNTFNlbGVjdEVsZW1lbnQ6ITEsTWVkaWFMaXN0OiEwLE1pbWVUeXBlQXJyYXk6ITEsTmFtZWROb2RlTWFwOiExLE5vZGVMaXN0OiEwLFBhaW50UmVxdWVzdExpc3Q6ITEsUGx1Z2luOiExLFBsdWdpbkFycmF5OiExLFNWR0xlbmd0aExpc3Q6ITEsU1ZHTnVtYmVyTGlzdDohMSxTVkdQYXRoU2VnTGlzdDohMSxTVkdQb2ludExpc3Q6ITEsU1ZHU3RyaW5nTGlzdDohMSxTVkdUcmFuc2Zvcm1MaXN0OiExLFNvdXJjZUJ1ZmZlckxpc3Q6ITEsU3R5bGVTaGVldExpc3Q6ITAsVGV4dFRyYWNrQ3VlTGlzdDohMSxUZXh0VHJhY2tMaXN0OiExLFRvdWNoTGlzdDohMX0scD1pKHYpLGQ9MDtkPHAubGVuZ3RoO2QrKyl7dmFyIHksZz1wW2RdLG09dltnXSxiPWNbZ10sXz1iJiZiLnByb3RvdHlwZTtpZihfJiYoX1tmXXx8cyhfLGYsaCksX1tsXXx8cyhfLGwsZyksdVtnXT1oLG0pKWZvcih5IGluIHIpX1t5XXx8byhfLHksclt5XSwhMCl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoNjMpO3Ioci5HK3IuQix7c2V0SW1tZWRpYXRlOmkuc2V0LGNsZWFySW1tZWRpYXRlOmkuY2xlYXJ9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMyksaT1lKDEpLG89ci5uYXZpZ2F0b3IsYz1bXS5zbGljZSxzPSEhbyYmL01TSUUgLlxcLi8udGVzdChvLnVzZXJBZ2VudCksdT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjIsaT0hIXImJmMuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIHQocj9mdW5jdGlvbigpeyhcImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246RnVuY3Rpb24obikpLmFwcGx5KHRoaXMsaSl9Om4sZSl9fTtpKGkuRytpLkIraS5GKnMse3NldFRpbWVvdXQ6dShyLnNldFRpbWVvdXQpLHNldEludGVydmFsOnUoci5zZXRJbnRlcnZhbCl9KX0sZnVuY3Rpb24odCxuKXt9LGZ1bmN0aW9uKHQsbil7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIGUodCxuLGUpe2Z1bmN0aW9uIGkobil7dmFyIGU9ZCxyPXk7cmV0dXJuIGQ9eT12b2lkIDAsRT1uLG09dC5hcHBseShyLGUpfWZ1bmN0aW9uIG8odCl7cmV0dXJuIEU9dCxiPXNldFRpbWVvdXQoZixuKSxPP2kodCk6bX1mdW5jdGlvbiB1KHQpe3ZhciBlPXQteCxyPXQtRSxpPW4tZTtyZXR1cm4gTT93KGksZy1yKTppfWZ1bmN0aW9uIGEodCl7dmFyIGU9dC14LHI9dC1FO3JldHVybiB2b2lkIDA9PT14fHxlPj1ufHxlPDB8fE0mJnI+PWd9ZnVuY3Rpb24gZigpe3ZhciB0PVMoKTtyZXR1cm4gYSh0KT9sKHQpOnZvaWQoYj1zZXRUaW1lb3V0KGYsdSh0KSkpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIGI9dm9pZCAwLEEmJmQ/aSh0KTooZD15PXZvaWQgMCxtKX1mdW5jdGlvbiBoKCl7dm9pZCAwIT09YiYmY2xlYXJUaW1lb3V0KGIpLEU9MCxkPXg9eT1iPXZvaWQgMH1mdW5jdGlvbiB2KCl7cmV0dXJuIHZvaWQgMD09PWI/bTpsKFMoKSl9ZnVuY3Rpb24gcCgpe3ZhciB0PVMoKSxlPWEodCk7aWYoZD1hcmd1bWVudHMseT10aGlzLHg9dCxlKXtpZih2b2lkIDA9PT1iKXJldHVybiBvKHgpO2lmKE0pcmV0dXJuIGI9c2V0VGltZW91dChmLG4pLGkoeCl9cmV0dXJuIHZvaWQgMD09PWImJihiPXNldFRpbWVvdXQoZixuKSksbX12YXIgZCx5LGcsbSxiLHgsRT0wLE89ITEsTT0hMSxBPSEwO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihzKTtyZXR1cm4gbj1jKG4pfHwwLHIoZSkmJihPPSEhZS5sZWFkaW5nLE09XCJtYXhXYWl0XCJpbiBlLGc9TT9fKGMoZS5tYXhXYWl0KXx8MCxuKTpnLEE9XCJ0cmFpbGluZ1wiaW4gZT8hIWUudHJhaWxpbmc6QSkscC5jYW5jZWw9aCxwLmZsdXNoPXYscH1mdW5jdGlvbiByKHQpe3ZhciBuPXR5cGVvZiB0O3JldHVybiEhdCYmKFwib2JqZWN0XCI9PW58fFwiZnVuY3Rpb25cIj09bil9ZnVuY3Rpb24gaSh0KXtyZXR1cm4hIXQmJlwib2JqZWN0XCI9PXR5cGVvZiB0fWZ1bmN0aW9uIG8odCl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIHR8fGkodCkmJmIuY2FsbCh0KT09YX1mdW5jdGlvbiBjKHQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiB0O2lmKG8odCkpcmV0dXJuIHU7aWYocih0KSl7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgdC52YWx1ZU9mP3QudmFsdWVPZigpOnQ7dD1yKG4pP24rXCJcIjpufWlmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXJldHVybiAwPT09dD90Oit0O3Q9dC5yZXBsYWNlKGYsXCJcIik7dmFyIGU9aC50ZXN0KHQpO3JldHVybiBlfHx2LnRlc3QodCk/cCh0LnNsaWNlKDIpLGU/Mjo4KTpsLnRlc3QodCk/dTordH12YXIgcz1cIkV4cGVjdGVkIGEgZnVuY3Rpb25cIix1PU5hTixhPVwiW29iamVjdCBTeW1ib2xdXCIsZj0vXlxccyt8XFxzKyQvZyxsPS9eWy0rXTB4WzAtOWEtZl0rJC9pLGg9L14wYlswMV0rJC9pLHY9L14wb1swLTddKyQvaSxwPXBhcnNlSW50LGQ9XCJvYmplY3RcIj09dHlwZW9mIG4mJm4mJm4uT2JqZWN0PT09T2JqZWN0JiZuLHk9XCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGYmJnNlbGYuT2JqZWN0PT09T2JqZWN0JiZzZWxmLGc9ZHx8eXx8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLG09T2JqZWN0LnByb3RvdHlwZSxiPW0udG9TdHJpbmcsXz1NYXRoLm1heCx3PU1hdGgubWluLFM9ZnVuY3Rpb24oKXtyZXR1cm4gZy5EYXRlLm5vdygpfTt0LmV4cG9ydHM9ZX0pLmNhbGwobixmdW5jdGlvbigpe3JldHVybiB0aGlzfSgpKX0sZnVuY3Rpb24odCxuKXshZnVuY3Rpb24obil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSh0LG4sZSxyKXt2YXIgbz1uJiZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIGk/bjppLGM9T2JqZWN0LmNyZWF0ZShvLnByb3RvdHlwZSkscz1uZXcgdihyfHxbXSk7cmV0dXJuIGMuX2ludm9rZT1hKHQsZSxzKSxjfWZ1bmN0aW9uIHIodCxuLGUpe3RyeXtyZXR1cm57dHlwZTpcIm5vcm1hbFwiLGFyZzp0LmNhbGwobixlKX19Y2F0Y2godCl7cmV0dXJue3R5cGU6XCJ0aHJvd1wiLGFyZzp0fX19ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBvKCl7fWZ1bmN0aW9uIGMoKXt9ZnVuY3Rpb24gcyh0KXtbXCJuZXh0XCIsXCJ0aHJvd1wiLFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obil7dFtuXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW52b2tlKG4sdCl9fSl9ZnVuY3Rpb24gdSh0KXtmdW5jdGlvbiBuKGUsaSxvLGMpe3ZhciBzPXIodFtlXSx0LGkpO2lmKFwidGhyb3dcIiE9PXMudHlwZSl7dmFyIHU9cy5hcmcsYT11LnZhbHVlO3JldHVybiBhJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmbS5jYWxsKGEsXCJfX2F3YWl0XCIpP1Byb21pc2UucmVzb2x2ZShhLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odCl7bihcIm5leHRcIix0LG8sYyl9LGZ1bmN0aW9uKHQpe24oXCJ0aHJvd1wiLHQsbyxjKX0pOlByb21pc2UucmVzb2x2ZShhKS50aGVuKGZ1bmN0aW9uKHQpe3UudmFsdWU9dCxvKHUpfSxjKX1jKHMuYXJnKX1mdW5jdGlvbiBlKHQsZSl7ZnVuY3Rpb24gcigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyLGkpe24odCxlLHIsaSl9KX1yZXR1cm4gaT1pP2kudGhlbihyLHIpOnIoKX12YXIgaTt0aGlzLl9pbnZva2U9ZX1mdW5jdGlvbiBhKHQsbixlKXt2YXIgaT1PO3JldHVybiBmdW5jdGlvbihvLGMpe2lmKGk9PT1BKXRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7aWYoaT09PUwpe2lmKFwidGhyb3dcIj09PW8pdGhyb3cgYztyZXR1cm4gZCgpfWZvcihlLm1ldGhvZD1vLGUuYXJnPWM7Oyl7dmFyIHM9ZS5kZWxlZ2F0ZTtpZihzKXt2YXIgdT1mKHMsZSk7aWYodSl7aWYodT09PWopY29udGludWU7cmV0dXJuIHV9fWlmKFwibmV4dFwiPT09ZS5tZXRob2QpZS5zZW50PWUuX3NlbnQ9ZS5hcmc7ZWxzZSBpZihcInRocm93XCI9PT1lLm1ldGhvZCl7aWYoaT09PU8pdGhyb3cgaT1MLGUuYXJnO2UuZGlzcGF0Y2hFeGNlcHRpb24oZS5hcmcpfWVsc2VcInJldHVyblwiPT09ZS5tZXRob2QmJmUuYWJydXB0KFwicmV0dXJuXCIsZS5hcmcpO2k9QTt2YXIgYT1yKHQsbixlKTtpZihcIm5vcm1hbFwiPT09YS50eXBlKXtpZihpPWUuZG9uZT9MOk0sYS5hcmc9PT1qKWNvbnRpbnVlO3JldHVybnt2YWx1ZTphLmFyZyxkb25lOmUuZG9uZX19XCJ0aHJvd1wiPT09YS50eXBlJiYoaT1MLGUubWV0aG9kPVwidGhyb3dcIixlLmFyZz1hLmFyZyl9fX1mdW5jdGlvbiBmKHQsbil7dmFyIGU9dC5pdGVyYXRvcltuLm1ldGhvZF07aWYoZT09PXkpe2lmKG4uZGVsZWdhdGU9bnVsbCxcInRocm93XCI9PT1uLm1ldGhvZCl7aWYodC5pdGVyYXRvci5yZXR1cm4mJihuLm1ldGhvZD1cInJldHVyblwiLG4uYXJnPXksZih0LG4pLFwidGhyb3dcIj09PW4ubWV0aG9kKSlyZXR1cm4gajtuLm1ldGhvZD1cInRocm93XCIsbi5hcmc9bmV3IFR5cGVFcnJvcihcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIil9cmV0dXJuIGp9dmFyIGk9cihlLHQuaXRlcmF0b3Isbi5hcmcpO2lmKFwidGhyb3dcIj09PWkudHlwZSlyZXR1cm4gbi5tZXRob2Q9XCJ0aHJvd1wiLG4uYXJnPWkuYXJnLG4uZGVsZWdhdGU9bnVsbCxqO3ZhciBvPWkuYXJnO3JldHVybiBvP28uZG9uZT8oblt0LnJlc3VsdE5hbWVdPW8udmFsdWUsbi5uZXh0PXQubmV4dExvYyxcInJldHVyblwiIT09bi5tZXRob2QmJihuLm1ldGhvZD1cIm5leHRcIixuLmFyZz15KSxuLmRlbGVnYXRlPW51bGwsaik6bzoobi5tZXRob2Q9XCJ0aHJvd1wiLG4uYXJnPW5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKSxuLmRlbGVnYXRlPW51bGwsail9ZnVuY3Rpb24gbCh0KXt2YXIgbj17dHJ5TG9jOnRbMF19OzEgaW4gdCYmKG4uY2F0Y2hMb2M9dFsxXSksMiBpbiB0JiYobi5maW5hbGx5TG9jPXRbMl0sbi5hZnRlckxvYz10WzNdKSx0aGlzLnRyeUVudHJpZXMucHVzaChuKX1mdW5jdGlvbiBoKHQpe3ZhciBuPXQuY29tcGxldGlvbnx8e307bi50eXBlPVwibm9ybWFsXCIsZGVsZXRlIG4uYXJnLHQuY29tcGxldGlvbj1ufWZ1bmN0aW9uIHYodCl7dGhpcy50cnlFbnRyaWVzPVt7dHJ5TG9jOlwicm9vdFwifV0sdC5mb3JFYWNoKGwsdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gcCh0KXtpZih0KXt2YXIgbj10W19dO2lmKG4pcmV0dXJuIG4uY2FsbCh0KTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm5leHQpcmV0dXJuIHQ7aWYoIWlzTmFOKHQubGVuZ3RoKSl7dmFyIGU9LTEscj1mdW5jdGlvbiBuKCl7Zm9yKDsrK2U8dC5sZW5ndGg7KWlmKG0uY2FsbCh0LGUpKXJldHVybiBuLnZhbHVlPXRbZV0sbi5kb25lPSExLG47cmV0dXJuIG4udmFsdWU9eSxuLmRvbmU9ITAsbn07cmV0dXJuIHIubmV4dD1yfX1yZXR1cm57bmV4dDpkfX1mdW5jdGlvbiBkKCl7cmV0dXJue3ZhbHVlOnksZG9uZTohMH19dmFyIHksZz1PYmplY3QucHJvdG90eXBlLG09Zy5oYXNPd25Qcm9wZXJ0eSxiPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbD9TeW1ib2w6e30sXz1iLml0ZXJhdG9yfHxcIkBAaXRlcmF0b3JcIix3PWIuYXN5bmNJdGVyYXRvcnx8XCJAQGFzeW5jSXRlcmF0b3JcIixTPWIudG9TdHJpbmdUYWd8fFwiQEB0b1N0cmluZ1RhZ1wiLHg9XCJvYmplY3RcIj09dHlwZW9mIHQsRT1uLnJlZ2VuZXJhdG9yUnVudGltZTtpZihFKXJldHVybiB2b2lkKHgmJih0LmV4cG9ydHM9RSkpO0U9bi5yZWdlbmVyYXRvclJ1bnRpbWU9eD90LmV4cG9ydHM6e30sRS53cmFwPWU7dmFyIE89XCJzdXNwZW5kZWRTdGFydFwiLE09XCJzdXNwZW5kZWRZaWVsZFwiLEE9XCJleGVjdXRpbmdcIixMPVwiY29tcGxldGVkXCIsaj17fSxrPXt9O2tbX109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dmFyIFQ9T2JqZWN0LmdldFByb3RvdHlwZU9mLFA9VCYmVChUKHAoW10pKSk7UCYmUCE9PWcmJm0uY2FsbChQLF8pJiYoaz1QKTt2YXIgRj1jLnByb3RvdHlwZT1pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGspO28ucHJvdG90eXBlPUYuY29uc3RydWN0b3I9YyxjLmNvbnN0cnVjdG9yPW8sY1tTXT1vLmRpc3BsYXlOYW1lPVwiR2VuZXJhdG9yRnVuY3Rpb25cIixFLmlzR2VuZXJhdG9yRnVuY3Rpb249ZnVuY3Rpb24odCl7dmFyIG49XCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdC5jb25zdHJ1Y3RvcjtyZXR1cm4hIW4mJihuPT09b3x8XCJHZW5lcmF0b3JGdW5jdGlvblwiPT09KG4uZGlzcGxheU5hbWV8fG4ubmFtZSkpfSxFLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxjKToodC5fX3Byb3RvX189YyxTIGluIHR8fCh0W1NdPVwiR2VuZXJhdG9yRnVuY3Rpb25cIikpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRiksdH0sRS5hd3JhcD1mdW5jdGlvbih0KXtyZXR1cm57X19hd2FpdDp0fX0scyh1LnByb3RvdHlwZSksdS5wcm90b3R5cGVbd109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sRS5Bc3luY0l0ZXJhdG9yPXUsRS5hc3luYz1mdW5jdGlvbih0LG4scixpKXt2YXIgbz1uZXcgdShlKHQsbixyLGkpKTtyZXR1cm4gRS5pc0dlbmVyYXRvckZ1bmN0aW9uKG4pP286by5uZXh0KCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdC5kb25lP3QudmFsdWU6by5uZXh0KCl9KX0scyhGKSxGW1NdPVwiR2VuZXJhdG9yXCIsRltfXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxGLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJbb2JqZWN0IEdlbmVyYXRvcl1cIn0sRS5rZXlzPWZ1bmN0aW9uKHQpe3ZhciBuPVtdO2Zvcih2YXIgZSBpbiB0KW4ucHVzaChlKTtyZXR1cm4gbi5yZXZlcnNlKCksZnVuY3Rpb24gZSgpe2Zvcig7bi5sZW5ndGg7KXt2YXIgcj1uLnBvcCgpO2lmKHIgaW4gdClyZXR1cm4gZS52YWx1ZT1yLGUuZG9uZT0hMSxlfXJldHVybiBlLmRvbmU9ITAsZX19LEUudmFsdWVzPXAsdi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOnYscmVzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9eSx0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPVwibmV4dFwiLHRoaXMuYXJnPXksdGhpcy50cnlFbnRyaWVzLmZvckVhY2goaCksIXQpZm9yKHZhciBuIGluIHRoaXMpXCJ0XCI9PT1uLmNoYXJBdCgwKSYmbS5jYWxsKHRoaXMsbikmJiFpc05hTigrbi5zbGljZSgxKSkmJih0aGlzW25dPXkpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5kb25lPSEwO3ZhciB0PXRoaXMudHJ5RW50cmllc1swXSxuPXQuY29tcGxldGlvbjtpZihcInRocm93XCI9PT1uLnR5cGUpdGhyb3cgbi5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24odCl7ZnVuY3Rpb24gbihuLHIpe3JldHVybiBvLnR5cGU9XCJ0aHJvd1wiLG8uYXJnPXQsZS5uZXh0PW4sciYmKGUubWV0aG9kPVwibmV4dFwiLGUuYXJnPXkpLCEhcn1pZih0aGlzLmRvbmUpdGhyb3cgdDtmb3IodmFyIGU9dGhpcyxyPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtyPj0wOy0tcil7dmFyIGk9dGhpcy50cnlFbnRyaWVzW3JdLG89aS5jb21wbGV0aW9uO2lmKFwicm9vdFwiPT09aS50cnlMb2MpcmV0dXJuIG4oXCJlbmRcIik7aWYoaS50cnlMb2M8PXRoaXMucHJldil7dmFyIGM9bS5jYWxsKGksXCJjYXRjaExvY1wiKSxzPW0uY2FsbChpLFwiZmluYWxseUxvY1wiKTtpZihjJiZzKXtpZih0aGlzLnByZXY8aS5jYXRjaExvYylyZXR1cm4gbihpLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8aS5maW5hbGx5TG9jKXJldHVybiBuKGkuZmluYWxseUxvYyl9ZWxzZSBpZihjKXtpZih0aGlzLnByZXY8aS5jYXRjaExvYylyZXR1cm4gbihpLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFzKXRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO2lmKHRoaXMucHJldjxpLmZpbmFsbHlMb2MpcmV0dXJuIG4oaS5maW5hbGx5TG9jKX19fX0sYWJydXB0OmZ1bmN0aW9uKHQsbil7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW2VdO2lmKHIudHJ5TG9jPD10aGlzLnByZXYmJm0uY2FsbChyLFwiZmluYWxseUxvY1wiKSYmdGhpcy5wcmV2PHIuZmluYWxseUxvYyl7dmFyIGk9cjticmVha319aSYmKFwiYnJlYWtcIj09PXR8fFwiY29udGludWVcIj09PXQpJiZpLnRyeUxvYzw9biYmbjw9aS5maW5hbGx5TG9jJiYoaT1udWxsKTt2YXIgbz1pP2kuY29tcGxldGlvbjp7fTtyZXR1cm4gby50eXBlPXQsby5hcmc9bixpPyh0aGlzLm1ldGhvZD1cIm5leHRcIix0aGlzLm5leHQ9aS5maW5hbGx5TG9jLGopOnRoaXMuY29tcGxldGUobyl9LGNvbXBsZXRlOmZ1bmN0aW9uKHQsbil7aWYoXCJ0aHJvd1wiPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVyblwiYnJlYWtcIj09PXQudHlwZXx8XCJjb250aW51ZVwiPT09dC50eXBlP3RoaXMubmV4dD10LmFyZzpcInJldHVyblwiPT09dC50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9dC5hcmcsdGhpcy5tZXRob2Q9XCJyZXR1cm5cIix0aGlzLm5leHQ9XCJlbmRcIik6XCJub3JtYWxcIj09PXQudHlwZSYmbiYmKHRoaXMubmV4dD1uKSxqfSxmaW5pc2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBuPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtuPj0wOy0tbil7dmFyIGU9dGhpcy50cnlFbnRyaWVzW25dO2lmKGUuZmluYWxseUxvYz09PXQpcmV0dXJuIHRoaXMuY29tcGxldGUoZS5jb21wbGV0aW9uLGUuYWZ0ZXJMb2MpLGgoZSksan19LGNhdGNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7bj49MDstLW4pe3ZhciBlPXRoaXMudHJ5RW50cmllc1tuXTtpZihlLnRyeUxvYz09PXQpe3ZhciByPWUuY29tcGxldGlvbjtpZihcInRocm93XCI9PT1yLnR5cGUpe3ZhciBpPXIuYXJnO2goZSl9cmV0dXJuIGl9fXRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKX0sZGVsZWdhdGVZaWVsZDpmdW5jdGlvbih0LG4sZSl7cmV0dXJuIHRoaXMuZGVsZWdhdGU9e2l0ZXJhdG9yOnAodCkscmVzdWx0TmFtZTpuLG5leHRMb2M6ZX0sXCJuZXh0XCI9PT10aGlzLm1ldGhvZCYmKHRoaXMuYXJnPXkpLGp9fX0oZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKXx8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpKX0sZnVuY3Rpb24odCxuLGUpeyFmdW5jdGlvbihuLGUpe3QuZXhwb3J0cz1lKCl9KHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQpe3JldHVybiBwYXJzZUZsb2F0KHQpfHwwfWZ1bmN0aW9uIG4obil7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBlLnJlZHVjZShmdW5jdGlvbihlLHIpe3ZhciBpPW5bXCJib3JkZXItXCIrcitcIi13aWR0aFwiXTtyZXR1cm4gZSt0KGkpfSwwKX1mdW5jdGlvbiBlKG4pe2Zvcih2YXIgZT1bXCJ0b3BcIixcInJpZ2h0XCIsXCJib3R0b21cIixcImxlZnRcIl0scj17fSxpPTAsbz1lO2k8by5sZW5ndGg7aSs9MSl7dmFyIGM9b1tpXSxzPW5bXCJwYWRkaW5nLVwiK2NdO3JbY109dChzKX1yZXR1cm4gcn1mdW5jdGlvbiByKHQpe3ZhciBuPXQuZ2V0QkJveCgpO3JldHVybiB1KDAsMCxuLndpZHRoLG4uaGVpZ2h0KX1mdW5jdGlvbiBpKHIpe3ZhciBpPXIuY2xpZW50V2lkdGgsYz1yLmNsaWVudEhlaWdodDtpZighaSYmIWMpcmV0dXJuIF87dmFyIHM9Z2V0Q29tcHV0ZWRTdHlsZShyKSxhPWUocyksZj1hLmxlZnQrYS5yaWdodCxsPWEudG9wK2EuYm90dG9tLGg9dChzLndpZHRoKSx2PXQocy5oZWlnaHQpO2lmKFwiYm9yZGVyLWJveFwiPT09cy5ib3hTaXppbmcmJihNYXRoLnJvdW5kKGgrZikhPT1pJiYoaC09bihzLFwibGVmdFwiLFwicmlnaHRcIikrZiksTWF0aC5yb3VuZCh2K2wpIT09YyYmKHYtPW4ocyxcInRvcFwiLFwiYm90dG9tXCIpK2wpKSwhbyhyKSl7dmFyIHA9TWF0aC5yb3VuZChoK2YpLWksZD1NYXRoLnJvdW5kKHYrbCktYzsxIT09TWF0aC5hYnMocCkmJihoLT1wKSwxIT09TWF0aC5hYnMoZCkmJih2LT1kKX1yZXR1cm4gdShhLmxlZnQsYS50b3AsaCx2KX1mdW5jdGlvbiBvKHQpe3JldHVybiB0PT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fWZ1bmN0aW9uIGModCl7cmV0dXJuIGY/dyh0KT9yKHQpOmkodCk6X31mdW5jdGlvbiBzKHQpe3ZhciBuPXQueCxlPXQueSxyPXQud2lkdGgsaT10LmhlaWdodCxvPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBET01SZWN0UmVhZE9ubHk/RE9NUmVjdFJlYWRPbmx5Ok9iamVjdCxjPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpO3JldHVybiBiKGMse3g6bix5OmUsd2lkdGg6cixoZWlnaHQ6aSx0b3A6ZSxyaWdodDpuK3IsYm90dG9tOmkrZSxsZWZ0Om59KSxjfWZ1bmN0aW9uIHUodCxuLGUscil7cmV0dXJue3g6dCx5Om4sd2lkdGg6ZSxoZWlnaHQ6cn19dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsbil7dmFyIGU9LTE7cmV0dXJuIHQuc29tZShmdW5jdGlvbih0LHIpe3JldHVybiB0WzBdPT09biYmKGU9ciwhMCl9KSxlfXJldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBNYXA/TWFwOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3RoaXMuX19lbnRyaWVzX189W119dmFyIGU9e3NpemU6e319O3JldHVybiBlLnNpemUuZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19lbnRyaWVzX18ubGVuZ3RofSxuLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24obil7dmFyIGU9dCh0aGlzLl9fZW50cmllc19fLG4pLHI9dGhpcy5fX2VudHJpZXNfX1tlXTtyZXR1cm4gciYmclsxXX0sbi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKG4sZSl7dmFyIHI9dCh0aGlzLl9fZW50cmllc19fLG4pO35yP3RoaXMuX19lbnRyaWVzX19bcl1bMV09ZTp0aGlzLl9fZW50cmllc19fLnB1c2goW24sZV0pfSxuLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24obil7dmFyIGU9dGhpcy5fX2VudHJpZXNfXyxyPXQoZSxuKTt+ciYmZS5zcGxpY2UociwxKX0sbi5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKG4pe3JldHVybiEhfnQodGhpcy5fX2VudHJpZXNfXyxuKX0sbi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZW50cmllc19fLnNwbGljZSgwKX0sbi5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0LG4pe3ZvaWQgMD09PW4mJihuPW51bGwpO2Zvcih2YXIgZT0wLHI9dGhpcy5fX2VudHJpZXNfXztlPHIubGVuZ3RoO2UrPTEpe3ZhciBpPXJbZV07dC5jYWxsKG4saVsxXSxpWzBdKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG4ucHJvdG90eXBlLGUpLG59KCl9KCksZj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJndpbmRvdy5kb2N1bWVudD09PWRvY3VtZW50LGw9ZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWU/cmVxdWVzdEFuaW1hdGlvbkZyYW1lOmZ1bmN0aW9uKHQpe3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHQoRGF0ZS5ub3coKSl9LDFlMy82MCl9fSgpLGg9Mix2PWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gZSgpe28mJihvPSExLHQoKSksYyYmaSgpfWZ1bmN0aW9uIHIoKXtsKGUpfWZ1bmN0aW9uIGkoKXt2YXIgdD1EYXRlLm5vdygpO2lmKG8pe2lmKHQtczxoKXJldHVybjtjPSEwfWVsc2Ugbz0hMCxjPSExLHNldFRpbWVvdXQocixuKTtzPXR9dmFyIG89ITEsYz0hMSxzPTA7cmV0dXJuIGl9LHA9MjAsZD1bXCJ0b3BcIixcInJpZ2h0XCIsXCJib3R0b21cIixcImxlZnRcIixcIndpZHRoXCIsXCJoZWlnaHRcIixcInNpemVcIixcIndlaWdodFwiXSx5PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJi9UcmlkZW50XFwvLipydjoxMS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxnPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyJiYheSxtPWZ1bmN0aW9uKCl7dGhpcy5jb25uZWN0ZWRfPSExLHRoaXMubXV0YXRpb25FdmVudHNBZGRlZF89ITEsdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl89bnVsbCx0aGlzLm9ic2VydmVyc189W10sdGhpcy5vblRyYW5zaXRpb25FbmRfPXRoaXMub25UcmFuc2l0aW9uRW5kXy5iaW5kKHRoaXMpLHRoaXMucmVmcmVzaD12KHRoaXMucmVmcmVzaC5iaW5kKHRoaXMpLHApfTttLnByb3RvdHlwZS5hZGRPYnNlcnZlcj1mdW5jdGlvbih0KXt+dGhpcy5vYnNlcnZlcnNfLmluZGV4T2YodCl8fHRoaXMub2JzZXJ2ZXJzXy5wdXNoKHQpLHRoaXMuY29ubmVjdGVkX3x8dGhpcy5jb25uZWN0XygpfSxtLnByb3RvdHlwZS5yZW1vdmVPYnNlcnZlcj1mdW5jdGlvbih0KXt2YXIgbj10aGlzLm9ic2VydmVyc18sZT1uLmluZGV4T2YodCk7fmUmJm4uc3BsaWNlKGUsMSksIW4ubGVuZ3RoJiZ0aGlzLmNvbm5lY3RlZF8mJnRoaXMuZGlzY29ubmVjdF8oKX0sbS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe3ZhciB0PXRoaXMudXBkYXRlT2JzZXJ2ZXJzXygpO3QmJnRoaXMucmVmcmVzaCgpfSxtLnByb3RvdHlwZS51cGRhdGVPYnNlcnZlcnNfPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vYnNlcnZlcnNfLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5nYXRoZXJBY3RpdmUoKSx0Lmhhc0FjdGl2ZSgpfSk7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5icm9hZGNhc3RBY3RpdmUoKX0pLHQubGVuZ3RoPjB9LG0ucHJvdG90eXBlLmNvbm5lY3RfPWZ1bmN0aW9uKCl7ZiYmIXRoaXMuY29ubmVjdGVkXyYmKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsdGhpcy5vblRyYW5zaXRpb25FbmRfKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMucmVmcmVzaCksZz8odGhpcy5tdXRhdGlvbnNPYnNlcnZlcl89bmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5yZWZyZXNoKSx0aGlzLm11dGF0aW9uc09ic2VydmVyXy5vYnNlcnZlKGRvY3VtZW50LHthdHRyaWJ1dGVzOiEwLGNoaWxkTGlzdDohMCxjaGFyYWN0ZXJEYXRhOiEwLHN1YnRyZWU6ITB9KSk6KGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01TdWJ0cmVlTW9kaWZpZWRcIix0aGlzLnJlZnJlc2gpLHRoaXMubXV0YXRpb25FdmVudHNBZGRlZF89ITApLHRoaXMuY29ubmVjdGVkXz0hMCl9LG0ucHJvdG90eXBlLmRpc2Nvbm5lY3RfPWZ1bmN0aW9uKCl7ZiYmdGhpcy5jb25uZWN0ZWRfJiYoZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIix0aGlzLm9uVHJhbnNpdGlvbkVuZF8pLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5yZWZyZXNoKSx0aGlzLm11dGF0aW9uc09ic2VydmVyXyYmdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8uZGlzY29ubmVjdCgpLHRoaXMubXV0YXRpb25FdmVudHNBZGRlZF8mJmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01TdWJ0cmVlTW9kaWZpZWRcIix0aGlzLnJlZnJlc2gpLHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfPW51bGwsdGhpcy5tdXRhdGlvbkV2ZW50c0FkZGVkXz0hMSx0aGlzLmNvbm5lY3RlZF89ITEpfSxtLnByb3RvdHlwZS5vblRyYW5zaXRpb25FbmRfPWZ1bmN0aW9uKHQpe3ZhciBuPXQucHJvcGVydHlOYW1lLGU9ZC5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiEhfm4uaW5kZXhPZih0KX0pO2UmJnRoaXMucmVmcmVzaCgpfSxtLmdldEluc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5zdGFuY2VffHwodGhpcy5pbnN0YW5jZV89bmV3IG0pLHRoaXMuaW5zdGFuY2VffSxtLmluc3RhbmNlXz1udWxsO3ZhciBiPWZ1bmN0aW9uKHQsbil7Zm9yKHZhciBlPTAscj1PYmplY3Qua2V5cyhuKTtlPHIubGVuZ3RoO2UrPTEpe3ZhciBpPXJbZV07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSx7dmFsdWU6bltpXSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pfXJldHVybiB0fSxfPXUoMCwwLDAsMCksdz1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBTVkdHcmFwaGljc0VsZW1lbnQ/ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBTVkdHcmFwaGljc0VsZW1lbnR9OmZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgU1ZHRWxlbWVudCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdC5nZXRCQm94fX0oKSxTPWZ1bmN0aW9uKHQpe3RoaXMuYnJvYWRjYXN0V2lkdGg9MCx0aGlzLmJyb2FkY2FzdEhlaWdodD0wLHRoaXMuY29udGVudFJlY3RfPXUoMCwwLDAsMCksdGhpcy50YXJnZXQ9dH07Uy5wcm90b3R5cGUuaXNBY3RpdmU9ZnVuY3Rpb24oKXt2YXIgdD1jKHRoaXMudGFyZ2V0KTtyZXR1cm4gdGhpcy5jb250ZW50UmVjdF89dCx0LndpZHRoIT09dGhpcy5icm9hZGNhc3RXaWR0aHx8dC5oZWlnaHQhPT10aGlzLmJyb2FkY2FzdEhlaWdodH0sUy5wcm90b3R5cGUuYnJvYWRjYXN0UmVjdD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29udGVudFJlY3RfO3JldHVybiB0aGlzLmJyb2FkY2FzdFdpZHRoPXQud2lkdGgsdGhpcy5icm9hZGNhc3RIZWlnaHQ9dC5oZWlnaHQsdH07dmFyIHg9ZnVuY3Rpb24odCxuKXt2YXIgZT1zKG4pO2IodGhpcyx7dGFyZ2V0OnQsY29udGVudFJlY3Q6ZX0pfSxFPWZ1bmN0aW9uKHQsbixlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgY2FsbGJhY2sgcHJvdmlkZWQgYXMgcGFyYW1ldGVyIDEgaXMgbm90IGEgZnVuY3Rpb24uXCIpO3RoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXz1bXSx0aGlzLm9ic2VydmF0aW9uc189bmV3IGEsdGhpcy5jYWxsYmFja189dCx0aGlzLmNvbnRyb2xsZXJfPW4sdGhpcy5jYWxsYmFja0N0eF89ZX07RS5wcm90b3R5cGUub2JzZXJ2ZT1mdW5jdGlvbih0KXtpZighYXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LlwiKTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgRWxlbWVudCYmRWxlbWVudCBpbnN0YW5jZW9mIE9iamVjdCl7aWYoISh0IGluc3RhbmNlb2YgRWxlbWVudCkpdGhyb3cgbmV3IFR5cGVFcnJvcigncGFyYW1ldGVyIDEgaXMgbm90IG9mIHR5cGUgXCJFbGVtZW50XCIuJyk7dmFyIG49dGhpcy5vYnNlcnZhdGlvbnNfO24uaGFzKHQpfHwobi5zZXQodCxuZXcgUyh0KSksdGhpcy5jb250cm9sbGVyXy5hZGRPYnNlcnZlcih0aGlzKSx0aGlzLmNvbnRyb2xsZXJfLnJlZnJlc2goKSl9fSxFLnByb3RvdHlwZS51bm9ic2VydmU9ZnVuY3Rpb24odCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IFR5cGVFcnJvcihcIjEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC5cIik7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEVsZW1lbnQmJkVsZW1lbnQgaW5zdGFuY2VvZiBPYmplY3Qpe2lmKCEodCBpbnN0YW5jZW9mIEVsZW1lbnQpKXRocm93IG5ldyBUeXBlRXJyb3IoJ3BhcmFtZXRlciAxIGlzIG5vdCBvZiB0eXBlIFwiRWxlbWVudFwiLicpO3ZhciBuPXRoaXMub2JzZXJ2YXRpb25zXztuLmhhcyh0KSYmKG4uZGVsZXRlKHQpLG4uc2l6ZXx8dGhpcy5jb250cm9sbGVyXy5yZW1vdmVPYnNlcnZlcih0aGlzKSl9fSxFLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7dGhpcy5jbGVhckFjdGl2ZSgpLHRoaXMub2JzZXJ2YXRpb25zXy5jbGVhcigpLHRoaXMuY29udHJvbGxlcl8ucmVtb3ZlT2JzZXJ2ZXIodGhpcyl9LEUucHJvdG90eXBlLmdhdGhlckFjdGl2ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jbGVhckFjdGl2ZSgpLHRoaXMub2JzZXJ2YXRpb25zXy5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uaXNBY3RpdmUoKSYmdC5hY3RpdmVPYnNlcnZhdGlvbnNfLnB1c2gobil9KX0sRS5wcm90b3R5cGUuYnJvYWRjYXN0QWN0aXZlPWZ1bmN0aW9uKCl7aWYodGhpcy5oYXNBY3RpdmUoKSl7dmFyIHQ9dGhpcy5jYWxsYmFja0N0eF8sbj10aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgeCh0LnRhcmdldCx0LmJyb2FkY2FzdFJlY3QoKSl9KTt0aGlzLmNhbGxiYWNrXy5jYWxsKHQsbix0KSx0aGlzLmNsZWFyQWN0aXZlKCl9fSxFLnByb3RvdHlwZS5jbGVhckFjdGl2ZT1mdW5jdGlvbigpe3RoaXMuYWN0aXZlT2JzZXJ2YXRpb25zXy5zcGxpY2UoMCl9LEUucHJvdG90eXBlLmhhc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18ubGVuZ3RoPjB9O3ZhciBPPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBXZWFrTWFwP25ldyBXZWFrTWFwOm5ldyBhLE09ZnVuY3Rpb24odCl7aWYoISh0aGlzIGluc3RhbmNlb2YgTSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtpZighYXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgMCBwcmVzZW50LlwiKTt2YXIgbj1tLmdldEluc3RhbmNlKCksZT1uZXcgRSh0LG4sdGhpcyk7Ty5zZXQodGhpcyxlKX07W1wib2JzZXJ2ZVwiLFwidW5vYnNlcnZlXCIsXCJkaXNjb25uZWN0XCJdLmZvckVhY2goZnVuY3Rpb24odCl7TS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtyZXR1cm4obj1PLmdldCh0aGlzKSlbdF0uYXBwbHkobixhcmd1bWVudHMpO3ZhciBufX0pO3ZhciBBPWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFJlc2l6ZU9ic2VydmVyP1Jlc2l6ZU9ic2VydmVyOk19KCk7cmV0dXJuIEF9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByLGksbzsvKiEgc2Nyb2xsYmFyV2lkdGguanMgdjAuMS4wIHwgZmVsaXhleHRlciB8IE1JVCB8IGh0dHBzOi8vZ2l0aHViLmNvbS9mZWxpeGV4dGVyL3Njcm9sbGJhcldpZHRoICovXHJcbiFmdW5jdGlvbihlLGMpe2k9W10scj1jLG89XCJmdW5jdGlvblwiPT10eXBlb2Ygcj9yLmFwcGx5KG4saSk6ciwhKHZvaWQgMCE9PW8mJih0LmV4cG9ydHM9bykpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCgpe3ZhciB0LG49ZG9jdW1lbnQuYm9keSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikscj1lLnN0eWxlO3JldHVybiByLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixyLnRvcD1yLmxlZnQ9XCItOTk5OXB4XCIsci53aWR0aD1yLmhlaWdodD1cIjEwMHB4XCIsci5vdmVyZmxvdz1cInNjcm9sbFwiLG4uYXBwZW5kQ2hpbGQoZSksdD1lLm9mZnNldFdpZHRoLWUuY2xpZW50V2lkdGgsbi5yZW1vdmVDaGlsZChlKSx0fXJldHVybiB0fSl9XSl9KTsiLCIvKipcclxuICogT3dsIENhcm91c2VsIHYyLjIuMVxyXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE3IERhdmlkIERldXRzY2hcclxuICogTGljZW5zZWQgdW5kZXIgICgpXHJcbiAqL1xyXG4vKipcclxuICogT3dsIGNhcm91c2VsXHJcbiAqIEB2ZXJzaW9uIDIuMS42XHJcbiAqIEBhdXRob3IgQmFydG9zeiBXb2pjaWVjaG93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICogQHRvZG8gTGF6eSBMb2FkIEljb25cclxuICogQHRvZG8gcHJldmVudCBhbmltYXRpb25lbmQgYnVibGluZ1xyXG4gKiBAdG9kbyBpdGVtc1NjYWxlVXBcclxuICogQHRvZG8gVGVzdCBaZXB0b1xyXG4gKiBAdG9kbyBzdGFnZVBhZGRpbmcgY2FsY3VsYXRlIHdyb25nIGFjdGl2ZSBjbGFzc2VzXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIGEgY2Fyb3VzZWwuXHJcblx0ICogQGNsYXNzIFRoZSBPd2wgQ2Fyb3VzZWwuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8alF1ZXJ5fSBlbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gY3JlYXRlIHRoZSBjYXJvdXNlbCBmb3IuXHJcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIFRoZSBvcHRpb25zXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gT3dsKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEN1cnJlbnQgc2V0dGluZ3MgZm9yIHRoZSBjYXJvdXNlbC5cclxuXHRcdCAqIEBwdWJsaWNcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDdXJyZW50IG9wdGlvbnMgc2V0IGJ5IHRoZSBjYWxsZXIgaW5jbHVkaW5nIGRlZmF1bHRzLlxyXG5cdFx0ICogQHB1YmxpY1xyXG5cdFx0ICovXHJcblx0XHR0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgT3dsLkRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFBsdWdpbiBlbGVtZW50LlxyXG5cdFx0ICogQHB1YmxpY1xyXG5cdFx0ICovXHJcblx0XHR0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFByb3hpZWQgZXZlbnQgaGFuZGxlcnMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhbmRsZXJzID0ge307XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZlcmVuY2VzIHRvIHRoZSBydW5uaW5nIHBsdWdpbnMgb2YgdGhpcyBjYXJvdXNlbC5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fcGx1Z2lucyA9IHt9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ3VycmVudGx5IHN1cHByZXNzZWQgZXZlbnRzIHRvIHByZXZlbnQgdGhlbSBmcm9tIGJlZWluZyByZXRyaWdnZXJlZC5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fc3VwcmVzcyA9IHt9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWJzb2x1dGUgY3VycmVudCBwb3NpdGlvbi5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY3VycmVudCA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbmltYXRpb24gc3BlZWQgaW4gbWlsbGlzZWNvbmRzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9zcGVlZCA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDb29yZGluYXRlcyBvZiBhbGwgaXRlbXMgaW4gcGl4ZWwuXHJcblx0XHQgKiBAdG9kbyBUaGUgbmFtZSBvZiB0aGlzIG1lbWJlciBpcyBtaXNzbGVhZGluZy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29vcmRpbmF0ZXMgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEN1cnJlbnQgYnJlYWtwb2ludC5cclxuXHRcdCAqIEB0b2RvIFJlYWwgbWVkaWEgcXVlcmllcyB3b3VsZCBiZSBuaWNlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9icmVha3BvaW50ID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEN1cnJlbnQgd2lkdGggb2YgdGhlIHBsdWdpbiBlbGVtZW50LlxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl93aWR0aCA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgcmVhbCBpdGVtcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faXRlbXMgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCBjbG9uZWQgaXRlbXMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2Nsb25lcyA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogTWVyZ2UgdmFsdWVzIG9mIGFsbCBpdGVtcy5cclxuXHRcdCAqIEB0b2RvIE1heWJlIHRoaXMgY291bGQgYmUgcGFydCBvZiBhIHBsdWdpbi5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fbWVyZ2VycyA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogV2lkdGhzIG9mIGFsbCBpdGVtcy5cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fd2lkdGhzID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBJbnZhbGlkYXRlZCBwYXJ0cyB3aXRoaW4gdGhlIHVwZGF0ZSBwcm9jZXNzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9pbnZhbGlkYXRlZCA9IHt9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogT3JkZXJlZCBsaXN0IG9mIHdvcmtlcnMgZm9yIHRoZSB1cGRhdGUgcHJvY2Vzcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fcGlwZSA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ3VycmVudCBzdGF0ZSBpbmZvcm1hdGlvbiBmb3IgdGhlIGRyYWcgb3BlcmF0aW9uLlxyXG5cdFx0ICogQHRvZG8gIzI2MVxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9kcmFnID0ge1xyXG5cdFx0XHR0aW1lOiBudWxsLFxyXG5cdFx0XHR0YXJnZXQ6IG51bGwsXHJcblx0XHRcdHBvaW50ZXI6IG51bGwsXHJcblx0XHRcdHN0YWdlOiB7XHJcblx0XHRcdFx0c3RhcnQ6IG51bGwsXHJcblx0XHRcdFx0Y3VycmVudDogbnVsbFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRkaXJlY3Rpb246IG51bGxcclxuXHRcdH07XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDdXJyZW50IHN0YXRlIGluZm9ybWF0aW9uIGFuZCB0aGVpciB0YWdzLlxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fc3RhdGVzID0ge1xyXG5cdFx0XHRjdXJyZW50OiB7fSxcclxuXHRcdFx0dGFnczoge1xyXG5cdFx0XHRcdCdpbml0aWFsaXppbmcnOiBbICdidXN5JyBdLFxyXG5cdFx0XHRcdCdhbmltYXRpbmcnOiBbICdidXN5JyBdLFxyXG5cdFx0XHRcdCdkcmFnZ2luZyc6IFsgJ2ludGVyYWN0aW5nJyBdXHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0JC5lYWNoKFsgJ29uUmVzaXplJywgJ29uVGhyb3R0bGVkUmVzaXplJyBdLCAkLnByb3h5KGZ1bmN0aW9uKGksIGhhbmRsZXIpIHtcclxuXHRcdFx0dGhpcy5faGFuZGxlcnNbaGFuZGxlcl0gPSAkLnByb3h5KHRoaXNbaGFuZGxlcl0sIHRoaXMpO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdCQuZWFjaChPd2wuUGx1Z2lucywgJC5wcm94eShmdW5jdGlvbihrZXksIHBsdWdpbikge1xyXG5cdFx0XHR0aGlzLl9wbHVnaW5zW2tleS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgxKV1cclxuXHRcdFx0XHQ9IG5ldyBwbHVnaW4odGhpcyk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0JC5lYWNoKE93bC5Xb3JrZXJzLCAkLnByb3h5KGZ1bmN0aW9uKHByaW9yaXR5LCB3b3JrZXIpIHtcclxuXHRcdFx0dGhpcy5fcGlwZS5wdXNoKHtcclxuXHRcdFx0XHQnZmlsdGVyJzogd29ya2VyLmZpbHRlcixcclxuXHRcdFx0XHQncnVuJzogJC5wcm94eSh3b3JrZXIucnVuLCB0aGlzKVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLnNldHVwKCk7XHJcblx0XHR0aGlzLmluaXRpYWxpemUoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIGNhcm91c2VsLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRPd2wuRGVmYXVsdHMgPSB7XHJcblx0XHRpdGVtczogMyxcclxuXHRcdGxvb3A6IGZhbHNlLFxyXG5cdFx0Y2VudGVyOiBmYWxzZSxcclxuXHRcdHJld2luZDogZmFsc2UsXHJcblxyXG5cdFx0bW91c2VEcmFnOiB0cnVlLFxyXG5cdFx0dG91Y2hEcmFnOiB0cnVlLFxyXG5cdFx0cHVsbERyYWc6IHRydWUsXHJcblx0XHRmcmVlRHJhZzogZmFsc2UsXHJcblxyXG5cdFx0bWFyZ2luOiAwLFxyXG5cdFx0c3RhZ2VQYWRkaW5nOiAwLFxyXG5cclxuXHRcdG1lcmdlOiBmYWxzZSxcclxuXHRcdG1lcmdlRml0OiB0cnVlLFxyXG5cdFx0YXV0b1dpZHRoOiBmYWxzZSxcclxuXHJcblx0XHRzdGFydFBvc2l0aW9uOiAwLFxyXG5cdFx0cnRsOiBmYWxzZSxcclxuXHJcblx0XHRzbWFydFNwZWVkOiAyNTAsXHJcblx0XHRmbHVpZFNwZWVkOiBmYWxzZSxcclxuXHRcdGRyYWdFbmRTcGVlZDogZmFsc2UsXHJcblxyXG5cdFx0cmVzcG9uc2l2ZToge30sXHJcblx0XHRyZXNwb25zaXZlUmVmcmVzaFJhdGU6IDIwMCxcclxuXHRcdHJlc3BvbnNpdmVCYXNlRWxlbWVudDogd2luZG93LFxyXG5cclxuXHRcdGZhbGxiYWNrRWFzaW5nOiAnc3dpbmcnLFxyXG5cclxuXHRcdGluZm86IGZhbHNlLFxyXG5cclxuXHRcdG5lc3RlZEl0ZW1TZWxlY3RvcjogZmFsc2UsXHJcblx0XHRpdGVtRWxlbWVudDogJ2RpdicsXHJcblx0XHRzdGFnZUVsZW1lbnQ6ICdkaXYnLFxyXG5cclxuXHRcdHJlZnJlc2hDbGFzczogJ293bC1yZWZyZXNoJyxcclxuXHRcdGxvYWRlZENsYXNzOiAnb3dsLWxvYWRlZCcsXHJcblx0XHRsb2FkaW5nQ2xhc3M6ICdvd2wtbG9hZGluZycsXHJcblx0XHRydGxDbGFzczogJ293bC1ydGwnLFxyXG5cdFx0cmVzcG9uc2l2ZUNsYXNzOiAnb3dsLXJlc3BvbnNpdmUnLFxyXG5cdFx0ZHJhZ0NsYXNzOiAnb3dsLWRyYWcnLFxyXG5cdFx0aXRlbUNsYXNzOiAnb3dsLWl0ZW0nLFxyXG5cdFx0c3RhZ2VDbGFzczogJ293bC1zdGFnZScsXHJcblx0XHRzdGFnZU91dGVyQ2xhc3M6ICdvd2wtc3RhZ2Utb3V0ZXInLFxyXG5cdFx0Z3JhYkNsYXNzOiAnb3dsLWdyYWInXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRW51bWVyYXRpb24gZm9yIHdpZHRoLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcmVhZG9ubHlcclxuXHQgKiBAZW51bSB7U3RyaW5nfVxyXG5cdCAqL1xyXG5cdE93bC5XaWR0aCA9IHtcclxuXHRcdERlZmF1bHQ6ICdkZWZhdWx0JyxcclxuXHRcdElubmVyOiAnaW5uZXInLFxyXG5cdFx0T3V0ZXI6ICdvdXRlcidcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBFbnVtZXJhdGlvbiBmb3IgdHlwZXMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEByZWFkb25seVxyXG5cdCAqIEBlbnVtIHtTdHJpbmd9XHJcblx0ICovXHJcblx0T3dsLlR5cGUgPSB7XHJcblx0XHRFdmVudDogJ2V2ZW50JyxcclxuXHRcdFN0YXRlOiAnc3RhdGUnXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ29udGFpbnMgYWxsIHJlZ2lzdGVyZWQgcGx1Z2lucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0T3dsLlBsdWdpbnMgPSB7fTtcclxuXHJcblx0LyoqXHJcblx0ICogTGlzdCBvZiB3b3JrZXJzIGludm9sdmVkIGluIHRoZSB1cGRhdGUgcHJvY2Vzcy5cclxuXHQgKi9cclxuXHRPd2wuV29ya2VycyA9IFsge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3dpZHRoID0gdGhpcy4kZWxlbWVudC53aWR0aCgpO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKGNhY2hlKSB7XHJcblx0XHRcdGNhY2hlLmN1cnJlbnQgPSB0aGlzLl9pdGVtcyAmJiB0aGlzLl9pdGVtc1t0aGlzLnJlbGF0aXZlKHRoaXMuX2N1cnJlbnQpXTtcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy4kc3RhZ2UuY2hpbGRyZW4oJy5jbG9uZWQnKS5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbihjYWNoZSkge1xyXG5cdFx0XHR2YXIgbWFyZ2luID0gdGhpcy5zZXR0aW5ncy5tYXJnaW4gfHwgJycsXHJcblx0XHRcdFx0Z3JpZCA9ICF0aGlzLnNldHRpbmdzLmF1dG9XaWR0aCxcclxuXHRcdFx0XHRydGwgPSB0aGlzLnNldHRpbmdzLnJ0bCxcclxuXHRcdFx0XHRjc3MgPSB7XHJcblx0XHRcdFx0XHQnd2lkdGgnOiAnYXV0bycsXHJcblx0XHRcdFx0XHQnbWFyZ2luLWxlZnQnOiBydGwgPyBtYXJnaW4gOiAnJyxcclxuXHRcdFx0XHRcdCdtYXJnaW4tcmlnaHQnOiBydGwgPyAnJyA6IG1hcmdpblxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHQhZ3JpZCAmJiB0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmNzcyhjc3MpO1xyXG5cclxuXHRcdFx0Y2FjaGUuY3NzID0gY3NzO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKGNhY2hlKSB7XHJcblx0XHRcdHZhciB3aWR0aCA9ICh0aGlzLndpZHRoKCkgLyB0aGlzLnNldHRpbmdzLml0ZW1zKS50b0ZpeGVkKDMpIC0gdGhpcy5zZXR0aW5ncy5tYXJnaW4sXHJcblx0XHRcdFx0bWVyZ2UgPSBudWxsLFxyXG5cdFx0XHRcdGl0ZXJhdG9yID0gdGhpcy5faXRlbXMubGVuZ3RoLFxyXG5cdFx0XHRcdGdyaWQgPSAhdGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgsXHJcblx0XHRcdFx0d2lkdGhzID0gW107XHJcblxyXG5cdFx0XHRjYWNoZS5pdGVtcyA9IHtcclxuXHRcdFx0XHRtZXJnZTogZmFsc2UsXHJcblx0XHRcdFx0d2lkdGg6IHdpZHRoXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHR3aGlsZSAoaXRlcmF0b3ItLSkge1xyXG5cdFx0XHRcdG1lcmdlID0gdGhpcy5fbWVyZ2Vyc1tpdGVyYXRvcl07XHJcblx0XHRcdFx0bWVyZ2UgPSB0aGlzLnNldHRpbmdzLm1lcmdlRml0ICYmIE1hdGgubWluKG1lcmdlLCB0aGlzLnNldHRpbmdzLml0ZW1zKSB8fCBtZXJnZTtcclxuXHJcblx0XHRcdFx0Y2FjaGUuaXRlbXMubWVyZ2UgPSBtZXJnZSA+IDEgfHwgY2FjaGUuaXRlbXMubWVyZ2U7XHJcblxyXG5cdFx0XHRcdHdpZHRoc1tpdGVyYXRvcl0gPSAhZ3JpZCA/IHRoaXMuX2l0ZW1zW2l0ZXJhdG9yXS53aWR0aCgpIDogd2lkdGggKiBtZXJnZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fd2lkdGhzID0gd2lkdGhzO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY2xvbmVzID0gW10sXHJcblx0XHRcdFx0aXRlbXMgPSB0aGlzLl9pdGVtcyxcclxuXHRcdFx0XHRzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3MsXHJcblx0XHRcdFx0Ly8gVE9ETzogU2hvdWxkIGJlIGNvbXB1dGVkIGZyb20gbnVtYmVyIG9mIG1pbiB3aWR0aCBpdGVtcyBpbiBzdGFnZVxyXG5cdFx0XHRcdHZpZXcgPSBNYXRoLm1heChzZXR0aW5ncy5pdGVtcyAqIDIsIDQpLFxyXG5cdFx0XHRcdHNpemUgPSBNYXRoLmNlaWwoaXRlbXMubGVuZ3RoIC8gMikgKiAyLFxyXG5cdFx0XHRcdHJlcGVhdCA9IHNldHRpbmdzLmxvb3AgJiYgaXRlbXMubGVuZ3RoID8gc2V0dGluZ3MucmV3aW5kID8gdmlldyA6IE1hdGgubWF4KHZpZXcsIHNpemUpIDogMCxcclxuXHRcdFx0XHRhcHBlbmQgPSAnJyxcclxuXHRcdFx0XHRwcmVwZW5kID0gJyc7XHJcblxyXG5cdFx0XHRyZXBlYXQgLz0gMjtcclxuXHJcblx0XHRcdHdoaWxlIChyZXBlYXQtLSkge1xyXG5cdFx0XHRcdC8vIFN3aXRjaCB0byBvbmx5IHVzaW5nIGFwcGVuZGVkIGNsb25lc1xyXG5cdFx0XHRcdGNsb25lcy5wdXNoKHRoaXMubm9ybWFsaXplKGNsb25lcy5sZW5ndGggLyAyLCB0cnVlKSk7XHJcblx0XHRcdFx0YXBwZW5kID0gYXBwZW5kICsgaXRlbXNbY2xvbmVzW2Nsb25lcy5sZW5ndGggLSAxXV1bMF0ub3V0ZXJIVE1MO1xyXG5cdFx0XHRcdGNsb25lcy5wdXNoKHRoaXMubm9ybWFsaXplKGl0ZW1zLmxlbmd0aCAtIDEgLSAoY2xvbmVzLmxlbmd0aCAtIDEpIC8gMiwgdHJ1ZSkpO1xyXG5cdFx0XHRcdHByZXBlbmQgPSBpdGVtc1tjbG9uZXNbY2xvbmVzLmxlbmd0aCAtIDFdXVswXS5vdXRlckhUTUwgKyBwcmVwZW5kO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9jbG9uZXMgPSBjbG9uZXM7XHJcblxyXG5cdFx0XHQkKGFwcGVuZCkuYWRkQ2xhc3MoJ2Nsb25lZCcpLmFwcGVuZFRvKHRoaXMuJHN0YWdlKTtcclxuXHRcdFx0JChwcmVwZW5kKS5hZGRDbGFzcygnY2xvbmVkJykucHJlcGVuZFRvKHRoaXMuJHN0YWdlKTtcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHJ0bCA9IHRoaXMuc2V0dGluZ3MucnRsID8gMSA6IC0xLFxyXG5cdFx0XHRcdHNpemUgPSB0aGlzLl9jbG9uZXMubGVuZ3RoICsgdGhpcy5faXRlbXMubGVuZ3RoLFxyXG5cdFx0XHRcdGl0ZXJhdG9yID0gLTEsXHJcblx0XHRcdFx0cHJldmlvdXMgPSAwLFxyXG5cdFx0XHRcdGN1cnJlbnQgPSAwLFxyXG5cdFx0XHRcdGNvb3JkaW5hdGVzID0gW107XHJcblxyXG5cdFx0XHR3aGlsZSAoKytpdGVyYXRvciA8IHNpemUpIHtcclxuXHRcdFx0XHRwcmV2aW91cyA9IGNvb3JkaW5hdGVzW2l0ZXJhdG9yIC0gMV0gfHwgMDtcclxuXHRcdFx0XHRjdXJyZW50ID0gdGhpcy5fd2lkdGhzW3RoaXMucmVsYXRpdmUoaXRlcmF0b3IpXSArIHRoaXMuc2V0dGluZ3MubWFyZ2luO1xyXG5cdFx0XHRcdGNvb3JkaW5hdGVzLnB1c2gocHJldmlvdXMgKyBjdXJyZW50ICogcnRsKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fY29vcmRpbmF0ZXMgPSBjb29yZGluYXRlcztcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZGRpbmcgPSB0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZyxcclxuXHRcdFx0XHRjb29yZGluYXRlcyA9IHRoaXMuX2Nvb3JkaW5hdGVzLFxyXG5cdFx0XHRcdGNzcyA9IHtcclxuXHRcdFx0XHRcdCd3aWR0aCc6IE1hdGguY2VpbChNYXRoLmFicyhjb29yZGluYXRlc1tjb29yZGluYXRlcy5sZW5ndGggLSAxXSkpICsgcGFkZGluZyAqIDIsXHJcblx0XHRcdFx0XHQncGFkZGluZy1sZWZ0JzogcGFkZGluZyB8fCAnJyxcclxuXHRcdFx0XHRcdCdwYWRkaW5nLXJpZ2h0JzogcGFkZGluZyB8fCAnJ1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHR0aGlzLiRzdGFnZS5jc3MoY3NzKTtcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbihjYWNoZSkge1xyXG5cdFx0XHR2YXIgaXRlcmF0b3IgPSB0aGlzLl9jb29yZGluYXRlcy5sZW5ndGgsXHJcblx0XHRcdFx0Z3JpZCA9ICF0aGlzLnNldHRpbmdzLmF1dG9XaWR0aCxcclxuXHRcdFx0XHRpdGVtcyA9IHRoaXMuJHN0YWdlLmNoaWxkcmVuKCk7XHJcblxyXG5cdFx0XHRpZiAoZ3JpZCAmJiBjYWNoZS5pdGVtcy5tZXJnZSkge1xyXG5cdFx0XHRcdHdoaWxlIChpdGVyYXRvci0tKSB7XHJcblx0XHRcdFx0XHRjYWNoZS5jc3Mud2lkdGggPSB0aGlzLl93aWR0aHNbdGhpcy5yZWxhdGl2ZShpdGVyYXRvcildO1xyXG5cdFx0XHRcdFx0aXRlbXMuZXEoaXRlcmF0b3IpLmNzcyhjYWNoZS5jc3MpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChncmlkKSB7XHJcblx0XHRcdFx0Y2FjaGUuY3NzLndpZHRoID0gY2FjaGUuaXRlbXMud2lkdGg7XHJcblx0XHRcdFx0aXRlbXMuY3NzKGNhY2hlLmNzcyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ2l0ZW1zJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fY29vcmRpbmF0ZXMubGVuZ3RoIDwgMSAmJiB0aGlzLiRzdGFnZS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKGNhY2hlKSB7XHJcblx0XHRcdGNhY2hlLmN1cnJlbnQgPSBjYWNoZS5jdXJyZW50ID8gdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5pbmRleChjYWNoZS5jdXJyZW50KSA6IDA7XHJcblx0XHRcdGNhY2hlLmN1cnJlbnQgPSBNYXRoLm1heCh0aGlzLm1pbmltdW0oKSwgTWF0aC5taW4odGhpcy5tYXhpbXVtKCksIGNhY2hlLmN1cnJlbnQpKTtcclxuXHRcdFx0dGhpcy5yZXNldChjYWNoZS5jdXJyZW50KTtcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3Bvc2l0aW9uJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5hbmltYXRlKHRoaXMuY29vcmRpbmF0ZXModGhpcy5fY3VycmVudCkpO1xyXG5cdFx0fVxyXG5cdH0sIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAncG9zaXRpb24nLCAnaXRlbXMnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcnRsID0gdGhpcy5zZXR0aW5ncy5ydGwgPyAxIDogLTEsXHJcblx0XHRcdFx0cGFkZGluZyA9IHRoaXMuc2V0dGluZ3Muc3RhZ2VQYWRkaW5nICogMixcclxuXHRcdFx0XHRiZWdpbiA9IHRoaXMuY29vcmRpbmF0ZXModGhpcy5jdXJyZW50KCkpICsgcGFkZGluZyxcclxuXHRcdFx0XHRlbmQgPSBiZWdpbiArIHRoaXMud2lkdGgoKSAqIHJ0bCxcclxuXHRcdFx0XHRpbm5lciwgb3V0ZXIsIG1hdGNoZXMgPSBbXSwgaSwgbjtcclxuXHJcblx0XHRcdGZvciAoaSA9IDAsIG4gPSB0aGlzLl9jb29yZGluYXRlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuXHRcdFx0XHRpbm5lciA9IHRoaXMuX2Nvb3JkaW5hdGVzW2kgLSAxXSB8fCAwO1xyXG5cdFx0XHRcdG91dGVyID0gTWF0aC5hYnModGhpcy5fY29vcmRpbmF0ZXNbaV0pICsgcGFkZGluZyAqIHJ0bDtcclxuXHJcblx0XHRcdFx0aWYgKCh0aGlzLm9wKGlubmVyLCAnPD0nLCBiZWdpbikgJiYgKHRoaXMub3AoaW5uZXIsICc+JywgZW5kKSkpXHJcblx0XHRcdFx0XHR8fCAodGhpcy5vcChvdXRlciwgJzwnLCBiZWdpbikgJiYgdGhpcy5vcChvdXRlciwgJz4nLCBlbmQpKSkge1xyXG5cdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKGkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy4kc3RhZ2UuY2hpbGRyZW4oJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdHRoaXMuJHN0YWdlLmNoaWxkcmVuKCc6ZXEoJyArIG1hdGNoZXMuam9pbignKSwgOmVxKCcpICsgJyknKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5jZW50ZXIpIHtcclxuXHRcdFx0XHR0aGlzLiRzdGFnZS5jaGlsZHJlbignLmNlbnRlcicpLnJlbW92ZUNsYXNzKCdjZW50ZXInKTtcclxuXHRcdFx0XHR0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmVxKHRoaXMuY3VycmVudCgpKS5hZGRDbGFzcygnY2VudGVyJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IF07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEluaXRpYWxpemVzIHRoZSBjYXJvdXNlbC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVudGVyKCdpbml0aWFsaXppbmcnKTtcclxuXHRcdHRoaXMudHJpZ2dlcignaW5pdGlhbGl6ZScpO1xyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnQudG9nZ2xlQ2xhc3ModGhpcy5zZXR0aW5ncy5ydGxDbGFzcywgdGhpcy5zZXR0aW5ncy5ydGwpO1xyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9XaWR0aCAmJiAhdGhpcy5pcygncHJlLWxvYWRpbmcnKSkge1xyXG5cdFx0XHR2YXIgaW1ncywgbmVzdGVkU2VsZWN0b3IsIHdpZHRoO1xyXG5cdFx0XHRpbWdzID0gdGhpcy4kZWxlbWVudC5maW5kKCdpbWcnKTtcclxuXHRcdFx0bmVzdGVkU2VsZWN0b3IgPSB0aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3RvciA/ICcuJyArIHRoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yIDogdW5kZWZpbmVkO1xyXG5cdFx0XHR3aWR0aCA9IHRoaXMuJGVsZW1lbnQuY2hpbGRyZW4obmVzdGVkU2VsZWN0b3IpLndpZHRoKCk7XHJcblxyXG5cdFx0XHRpZiAoaW1ncy5sZW5ndGggJiYgd2lkdGggPD0gMCkge1xyXG5cdFx0XHRcdHRoaXMucHJlbG9hZEF1dG9XaWR0aEltYWdlcyhpbWdzKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmxvYWRpbmdDbGFzcyk7XHJcblxyXG5cdFx0Ly8gY3JlYXRlIHN0YWdlXHJcblx0XHR0aGlzLiRzdGFnZSA9ICQoJzwnICsgdGhpcy5zZXR0aW5ncy5zdGFnZUVsZW1lbnQgKyAnIGNsYXNzPVwiJyArIHRoaXMuc2V0dGluZ3Muc3RhZ2VDbGFzcyArICdcIi8+JylcclxuXHRcdFx0LndyYXAoJzxkaXYgY2xhc3M9XCInICsgdGhpcy5zZXR0aW5ncy5zdGFnZU91dGVyQ2xhc3MgKyAnXCIvPicpO1xyXG5cclxuXHRcdC8vIGFwcGVuZCBzdGFnZVxyXG5cdFx0dGhpcy4kZWxlbWVudC5hcHBlbmQodGhpcy4kc3RhZ2UucGFyZW50KCkpO1xyXG5cclxuXHRcdC8vIGFwcGVuZCBjb250ZW50XHJcblx0XHR0aGlzLnJlcGxhY2UodGhpcy4kZWxlbWVudC5jaGlsZHJlbigpLm5vdCh0aGlzLiRzdGFnZS5wYXJlbnQoKSkpO1xyXG5cclxuXHRcdC8vIGNoZWNrIHZpc2liaWxpdHlcclxuXHRcdGlmICh0aGlzLiRlbGVtZW50LmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRcdC8vIHVwZGF0ZSB2aWV3XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gaW52YWxpZGF0ZSB3aWR0aFxyXG5cdFx0XHR0aGlzLmludmFsaWRhdGUoJ3dpZHRoJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmxvYWRpbmdDbGFzcylcclxuXHRcdFx0LmFkZENsYXNzKHRoaXMub3B0aW9ucy5sb2FkZWRDbGFzcyk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudEhhbmRsZXJzKCk7XHJcblxyXG5cdFx0dGhpcy5sZWF2ZSgnaW5pdGlhbGl6aW5nJyk7XHJcblx0XHR0aGlzLnRyaWdnZXIoJ2luaXRpYWxpemVkJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2V0dXBzIHRoZSBjdXJyZW50IHNldHRpbmdzLlxyXG5cdCAqIEB0b2RvIFJlbW92ZSByZXNwb25zaXZlIGNsYXNzZXMuIFdoeSBzaG91bGQgYWRhcHRpdmUgZGVzaWducyBiZSBicm91Z2h0IGludG8gSUU4P1xyXG5cdCAqIEB0b2RvIFN1cHBvcnQgZm9yIG1lZGlhIHF1ZXJpZXMgYnkgdXNpbmcgYG1hdGNoTWVkaWFgIHdvdWxkIGJlIG5pY2UuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuc2V0dXAgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB2aWV3cG9ydCA9IHRoaXMudmlld3BvcnQoKSxcclxuXHRcdFx0b3ZlcndyaXRlcyA9IHRoaXMub3B0aW9ucy5yZXNwb25zaXZlLFxyXG5cdFx0XHRtYXRjaCA9IC0xLFxyXG5cdFx0XHRzZXR0aW5ncyA9IG51bGw7XHJcblxyXG5cdFx0aWYgKCFvdmVyd3JpdGVzKSB7XHJcblx0XHRcdHNldHRpbmdzID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkLmVhY2gob3ZlcndyaXRlcywgZnVuY3Rpb24oYnJlYWtwb2ludCkge1xyXG5cdFx0XHRcdGlmIChicmVha3BvaW50IDw9IHZpZXdwb3J0ICYmIGJyZWFrcG9pbnQgPiBtYXRjaCkge1xyXG5cdFx0XHRcdFx0bWF0Y2ggPSBOdW1iZXIoYnJlYWtwb2ludCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHNldHRpbmdzID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgb3ZlcndyaXRlc1ttYXRjaF0pO1xyXG5cdFx0XHRpZiAodHlwZW9mIHNldHRpbmdzLnN0YWdlUGFkZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHNldHRpbmdzLnN0YWdlUGFkZGluZyA9IHNldHRpbmdzLnN0YWdlUGFkZGluZygpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGRlbGV0ZSBzZXR0aW5ncy5yZXNwb25zaXZlO1xyXG5cclxuXHRcdFx0Ly8gcmVzcG9uc2l2ZSBjbGFzc1xyXG5cdFx0XHRpZiAoc2V0dGluZ3MucmVzcG9uc2l2ZUNsYXNzKSB7XHJcblx0XHRcdFx0dGhpcy4kZWxlbWVudC5hdHRyKCdjbGFzcycsXHJcblx0XHRcdFx0XHR0aGlzLiRlbGVtZW50LmF0dHIoJ2NsYXNzJykucmVwbGFjZShuZXcgUmVnRXhwKCcoJyArIHRoaXMub3B0aW9ucy5yZXNwb25zaXZlQ2xhc3MgKyAnLSlcXFxcUytcXFxccycsICdnJyksICckMScgKyBtYXRjaClcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCB7IHByb3BlcnR5OiB7IG5hbWU6ICdzZXR0aW5ncycsIHZhbHVlOiBzZXR0aW5ncyB9IH0pO1xyXG5cdFx0dGhpcy5fYnJlYWtwb2ludCA9IG1hdGNoO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdFx0dGhpcy5pbnZhbGlkYXRlKCdzZXR0aW5ncycpO1xyXG5cdFx0dGhpcy50cmlnZ2VyKCdjaGFuZ2VkJywgeyBwcm9wZXJ0eTogeyBuYW1lOiAnc2V0dGluZ3MnLCB2YWx1ZTogdGhpcy5zZXR0aW5ncyB9IH0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZXMgb3B0aW9uIGxvZ2ljIGlmIG5lY2Vzc2VyeS5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vcHRpb25zTG9naWMgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9XaWR0aCkge1xyXG5cdFx0XHR0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZyA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLnNldHRpbmdzLm1lcmdlID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUHJlcGFyZXMgYW4gaXRlbSBiZWZvcmUgYWRkLlxyXG5cdCAqIEB0b2RvIFJlbmFtZSBldmVudCBwYXJhbWV0ZXIgYGNvbnRlbnRgIHRvIGBpdGVtYC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHJldHVybnMge2pRdWVyeXxIVE1MRWxlbWVudH0gLSBUaGUgaXRlbSBjb250YWluZXIuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5wcmVwYXJlID0gZnVuY3Rpb24oaXRlbSkge1xyXG5cdFx0dmFyIGV2ZW50ID0gdGhpcy50cmlnZ2VyKCdwcmVwYXJlJywgeyBjb250ZW50OiBpdGVtIH0pO1xyXG5cclxuXHRcdGlmICghZXZlbnQuZGF0YSkge1xyXG5cdFx0XHRldmVudC5kYXRhID0gJCgnPCcgKyB0aGlzLnNldHRpbmdzLml0ZW1FbGVtZW50ICsgJy8+JylcclxuXHRcdFx0XHQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLml0ZW1DbGFzcykuYXBwZW5kKGl0ZW0pXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy50cmlnZ2VyKCdwcmVwYXJlZCcsIHsgY29udGVudDogZXZlbnQuZGF0YSB9KTtcclxuXHJcblx0XHRyZXR1cm4gZXZlbnQuZGF0YTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGVzIHRoZSB2aWV3LlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGkgPSAwLFxyXG5cdFx0XHRuID0gdGhpcy5fcGlwZS5sZW5ndGgsXHJcblx0XHRcdGZpbHRlciA9ICQucHJveHkoZnVuY3Rpb24ocCkgeyByZXR1cm4gdGhpc1twXSB9LCB0aGlzLl9pbnZhbGlkYXRlZCksXHJcblx0XHRcdGNhY2hlID0ge307XHJcblxyXG5cdFx0d2hpbGUgKGkgPCBuKSB7XHJcblx0XHRcdGlmICh0aGlzLl9pbnZhbGlkYXRlZC5hbGwgfHwgJC5ncmVwKHRoaXMuX3BpcGVbaV0uZmlsdGVyLCBmaWx0ZXIpLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHR0aGlzLl9waXBlW2ldLnJ1bihjYWNoZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aSsrO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2ludmFsaWRhdGVkID0ge307XHJcblxyXG5cdFx0IXRoaXMuaXMoJ3ZhbGlkJykgJiYgdGhpcy5lbnRlcigndmFsaWQnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSB3aWR0aCBvZiB0aGUgdmlldy5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtPd2wuV2lkdGh9IFtkaW1lbnNpb249T3dsLldpZHRoLkRlZmF1bHRdIC0gVGhlIGRpbWVuc2lvbiB0byByZXR1cm4uXHJcblx0ICogQHJldHVybnMge051bWJlcn0gLSBUaGUgd2lkdGggb2YgdGhlIHZpZXcgaW4gcGl4ZWwuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uKGRpbWVuc2lvbikge1xyXG5cdFx0ZGltZW5zaW9uID0gZGltZW5zaW9uIHx8IE93bC5XaWR0aC5EZWZhdWx0O1xyXG5cdFx0c3dpdGNoIChkaW1lbnNpb24pIHtcclxuXHRcdFx0Y2FzZSBPd2wuV2lkdGguSW5uZXI6XHJcblx0XHRcdGNhc2UgT3dsLldpZHRoLk91dGVyOlxyXG5cdFx0XHRcdHJldHVybiB0aGlzLl93aWR0aDtcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fd2lkdGggLSB0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZyAqIDIgKyB0aGlzLnNldHRpbmdzLm1hcmdpbjtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoZXMgdGhlIGNhcm91c2VsIHByaW1hcmlseSBmb3IgYWRhcHRpdmUgcHVycG9zZXMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbnRlcigncmVmcmVzaGluZycpO1xyXG5cdFx0dGhpcy50cmlnZ2VyKCdyZWZyZXNoJyk7XHJcblxyXG5cdFx0dGhpcy5zZXR1cCgpO1xyXG5cclxuXHRcdHRoaXMub3B0aW9uc0xvZ2ljKCk7XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMucmVmcmVzaENsYXNzKTtcclxuXHJcblx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLnJlZnJlc2hDbGFzcyk7XHJcblxyXG5cdFx0dGhpcy5sZWF2ZSgncmVmcmVzaGluZycpO1xyXG5cdFx0dGhpcy50cmlnZ2VyKCdyZWZyZXNoZWQnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBDaGVja3Mgd2luZG93IGByZXNpemVgIGV2ZW50LlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9uVGhyb3R0bGVkUmVzaXplID0gZnVuY3Rpb24oKSB7XHJcblx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZXIpO1xyXG5cdFx0dGhpcy5yZXNpemVUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuX2hhbmRsZXJzLm9uUmVzaXplLCB0aGlzLnNldHRpbmdzLnJlc3BvbnNpdmVSZWZyZXNoUmF0ZSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2tzIHdpbmRvdyBgcmVzaXplYCBldmVudC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCF0aGlzLl9pdGVtcy5sZW5ndGgpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLl93aWR0aCA9PT0gdGhpcy4kZWxlbWVudC53aWR0aCgpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIXRoaXMuJGVsZW1lbnQuaXMoJzp2aXNpYmxlJykpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZW50ZXIoJ3Jlc2l6aW5nJyk7XHJcblxyXG5cdFx0aWYgKHRoaXMudHJpZ2dlcigncmVzaXplJykuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcclxuXHRcdFx0dGhpcy5sZWF2ZSgncmVzaXppbmcnKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuaW52YWxpZGF0ZSgnd2lkdGgnKTtcclxuXHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHJcblx0XHR0aGlzLmxlYXZlKCdyZXNpemluZycpO1xyXG5cdFx0dGhpcy50cmlnZ2VyKCdyZXNpemVkJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUmVnaXN0ZXJzIGV2ZW50IGhhbmRsZXJzLlxyXG5cdCAqIEB0b2RvIENoZWNrIGBtc1BvaW50ZXJFbmFibGVkYFxyXG5cdCAqIEB0b2RvICMyNjFcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5yZWdpc3RlckV2ZW50SGFuZGxlcnMgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmICgkLnN1cHBvcnQudHJhbnNpdGlvbikge1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5vbigkLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQgKyAnLm93bC5jb3JlJywgJC5wcm94eSh0aGlzLm9uVHJhbnNpdGlvbkVuZCwgdGhpcykpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnJlc3BvbnNpdmUgIT09IGZhbHNlKSB7XHJcblx0XHRcdHRoaXMub24od2luZG93LCAncmVzaXplJywgdGhpcy5faGFuZGxlcnMub25UaHJvdHRsZWRSZXNpemUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLm1vdXNlRHJhZykge1xyXG5cdFx0XHR0aGlzLiRlbGVtZW50LmFkZENsYXNzKHRoaXMub3B0aW9ucy5kcmFnQ2xhc3MpO1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5vbignbW91c2Vkb3duLm93bC5jb3JlJywgJC5wcm94eSh0aGlzLm9uRHJhZ1N0YXJ0LCB0aGlzKSk7XHJcblx0XHRcdHRoaXMuJHN0YWdlLm9uKCdkcmFnc3RhcnQub3dsLmNvcmUgc2VsZWN0c3RhcnQub3dsLmNvcmUnLCBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLnRvdWNoRHJhZyl7XHJcblx0XHRcdHRoaXMuJHN0YWdlLm9uKCd0b3VjaHN0YXJ0Lm93bC5jb3JlJywgJC5wcm94eSh0aGlzLm9uRHJhZ1N0YXJ0LCB0aGlzKSk7XHJcblx0XHRcdHRoaXMuJHN0YWdlLm9uKCd0b3VjaGNhbmNlbC5vd2wuY29yZScsICQucHJveHkodGhpcy5vbkRyYWdFbmQsIHRoaXMpKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIGB0b3VjaHN0YXJ0YCBhbmQgYG1vdXNlZG93bmAgZXZlbnRzLlxyXG5cdCAqIEB0b2RvIEhvcml6b250YWwgc3dpcGUgdGhyZXNob2xkIGFzIG9wdGlvblxyXG5cdCAqIEB0b2RvICMyNjFcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBUaGUgZXZlbnQgYXJndW1lbnRzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub25EcmFnU3RhcnQgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0dmFyIHN0YWdlID0gbnVsbDtcclxuXHJcblx0XHRpZiAoZXZlbnQud2hpY2ggPT09IDMpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgkLnN1cHBvcnQudHJhbnNmb3JtKSB7XHJcblx0XHRcdHN0YWdlID0gdGhpcy4kc3RhZ2UuY3NzKCd0cmFuc2Zvcm0nKS5yZXBsYWNlKC8uKlxcKHxcXCl8IC9nLCAnJykuc3BsaXQoJywnKTtcclxuXHRcdFx0c3RhZ2UgPSB7XHJcblx0XHRcdFx0eDogc3RhZ2Vbc3RhZ2UubGVuZ3RoID09PSAxNiA/IDEyIDogNF0sXHJcblx0XHRcdFx0eTogc3RhZ2Vbc3RhZ2UubGVuZ3RoID09PSAxNiA/IDEzIDogNV1cclxuXHRcdFx0fTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHN0YWdlID0gdGhpcy4kc3RhZ2UucG9zaXRpb24oKTtcclxuXHRcdFx0c3RhZ2UgPSB7XHJcblx0XHRcdFx0eDogdGhpcy5zZXR0aW5ncy5ydGwgP1xyXG5cdFx0XHRcdFx0c3RhZ2UubGVmdCArIHRoaXMuJHN0YWdlLndpZHRoKCkgLSB0aGlzLndpZHRoKCkgKyB0aGlzLnNldHRpbmdzLm1hcmdpbiA6XHJcblx0XHRcdFx0XHRzdGFnZS5sZWZ0LFxyXG5cdFx0XHRcdHk6IHN0YWdlLnRvcFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLmlzKCdhbmltYXRpbmcnKSkge1xyXG5cdFx0XHQkLnN1cHBvcnQudHJhbnNmb3JtID8gdGhpcy5hbmltYXRlKHN0YWdlLngpIDogdGhpcy4kc3RhZ2Uuc3RvcCgpXHJcblx0XHRcdHRoaXMuaW52YWxpZGF0ZSgncG9zaXRpb24nKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKHRoaXMub3B0aW9ucy5ncmFiQ2xhc3MsIGV2ZW50LnR5cGUgPT09ICdtb3VzZWRvd24nKTtcclxuXHJcblx0XHR0aGlzLnNwZWVkKDApO1xyXG5cclxuXHRcdHRoaXMuX2RyYWcudGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0dGhpcy5fZHJhZy50YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XHJcblx0XHR0aGlzLl9kcmFnLnN0YWdlLnN0YXJ0ID0gc3RhZ2U7XHJcblx0XHR0aGlzLl9kcmFnLnN0YWdlLmN1cnJlbnQgPSBzdGFnZTtcclxuXHRcdHRoaXMuX2RyYWcucG9pbnRlciA9IHRoaXMucG9pbnRlcihldmVudCk7XHJcblxyXG5cdFx0JChkb2N1bWVudCkub24oJ21vdXNldXAub3dsLmNvcmUgdG91Y2hlbmQub3dsLmNvcmUnLCAkLnByb3h5KHRoaXMub25EcmFnRW5kLCB0aGlzKSk7XHJcblxyXG5cdFx0JChkb2N1bWVudCkub25lKCdtb3VzZW1vdmUub3dsLmNvcmUgdG91Y2htb3ZlLm93bC5jb3JlJywgJC5wcm94eShmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHR2YXIgZGVsdGEgPSB0aGlzLmRpZmZlcmVuY2UodGhpcy5fZHJhZy5wb2ludGVyLCB0aGlzLnBvaW50ZXIoZXZlbnQpKTtcclxuXHJcblx0XHRcdCQoZG9jdW1lbnQpLm9uKCdtb3VzZW1vdmUub3dsLmNvcmUgdG91Y2htb3ZlLm93bC5jb3JlJywgJC5wcm94eSh0aGlzLm9uRHJhZ01vdmUsIHRoaXMpKTtcclxuXHJcblx0XHRcdGlmIChNYXRoLmFicyhkZWx0YS54KSA8IE1hdGguYWJzKGRlbHRhLnkpICYmIHRoaXMuaXMoJ3ZhbGlkJykpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHR0aGlzLmVudGVyKCdkcmFnZ2luZycpO1xyXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2RyYWcnKTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHRoZSBgdG91Y2htb3ZlYCBhbmQgYG1vdXNlbW92ZWAgZXZlbnRzLlxyXG5cdCAqIEB0b2RvICMyNjFcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBUaGUgZXZlbnQgYXJndW1lbnRzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub25EcmFnTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHR2YXIgbWluaW11bSA9IG51bGwsXHJcblx0XHRcdG1heGltdW0gPSBudWxsLFxyXG5cdFx0XHRwdWxsID0gbnVsbCxcclxuXHRcdFx0ZGVsdGEgPSB0aGlzLmRpZmZlcmVuY2UodGhpcy5fZHJhZy5wb2ludGVyLCB0aGlzLnBvaW50ZXIoZXZlbnQpKSxcclxuXHRcdFx0c3RhZ2UgPSB0aGlzLmRpZmZlcmVuY2UodGhpcy5fZHJhZy5zdGFnZS5zdGFydCwgZGVsdGEpO1xyXG5cclxuXHRcdGlmICghdGhpcy5pcygnZHJhZ2dpbmcnKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5sb29wKSB7XHJcblx0XHRcdG1pbmltdW0gPSB0aGlzLmNvb3JkaW5hdGVzKHRoaXMubWluaW11bSgpKTtcclxuXHRcdFx0bWF4aW11bSA9IHRoaXMuY29vcmRpbmF0ZXModGhpcy5tYXhpbXVtKCkgKyAxKSAtIG1pbmltdW07XHJcblx0XHRcdHN0YWdlLnggPSAoKChzdGFnZS54IC0gbWluaW11bSkgJSBtYXhpbXVtICsgbWF4aW11bSkgJSBtYXhpbXVtKSArIG1pbmltdW07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRtaW5pbXVtID0gdGhpcy5zZXR0aW5ncy5ydGwgPyB0aGlzLmNvb3JkaW5hdGVzKHRoaXMubWF4aW11bSgpKSA6IHRoaXMuY29vcmRpbmF0ZXModGhpcy5taW5pbXVtKCkpO1xyXG5cdFx0XHRtYXhpbXVtID0gdGhpcy5zZXR0aW5ncy5ydGwgPyB0aGlzLmNvb3JkaW5hdGVzKHRoaXMubWluaW11bSgpKSA6IHRoaXMuY29vcmRpbmF0ZXModGhpcy5tYXhpbXVtKCkpO1xyXG5cdFx0XHRwdWxsID0gdGhpcy5zZXR0aW5ncy5wdWxsRHJhZyA/IC0xICogZGVsdGEueCAvIDUgOiAwO1xyXG5cdFx0XHRzdGFnZS54ID0gTWF0aC5tYXgoTWF0aC5taW4oc3RhZ2UueCwgbWluaW11bSArIHB1bGwpLCBtYXhpbXVtICsgcHVsbCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fZHJhZy5zdGFnZS5jdXJyZW50ID0gc3RhZ2U7XHJcblxyXG5cdFx0dGhpcy5hbmltYXRlKHN0YWdlLngpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEhhbmRsZXMgdGhlIGB0b3VjaGVuZGAgYW5kIGBtb3VzZXVwYCBldmVudHMuXHJcblx0ICogQHRvZG8gIzI2MVxyXG5cdCAqIEB0b2RvIFRocmVzaG9sZCBmb3IgY2xpY2sgZXZlbnRcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBUaGUgZXZlbnQgYXJndW1lbnRzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub25EcmFnRW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdHZhciBkZWx0YSA9IHRoaXMuZGlmZmVyZW5jZSh0aGlzLl9kcmFnLnBvaW50ZXIsIHRoaXMucG9pbnRlcihldmVudCkpLFxyXG5cdFx0XHRzdGFnZSA9IHRoaXMuX2RyYWcuc3RhZ2UuY3VycmVudCxcclxuXHRcdFx0ZGlyZWN0aW9uID0gZGVsdGEueCA+IDAgXiB0aGlzLnNldHRpbmdzLnJ0bCA/ICdsZWZ0JyA6ICdyaWdodCc7XHJcblxyXG5cdFx0JChkb2N1bWVudCkub2ZmKCcub3dsLmNvcmUnKTtcclxuXHJcblx0XHR0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5ncmFiQ2xhc3MpO1xyXG5cclxuXHRcdGlmIChkZWx0YS54ICE9PSAwICYmIHRoaXMuaXMoJ2RyYWdnaW5nJykgfHwgIXRoaXMuaXMoJ3ZhbGlkJykpIHtcclxuXHRcdFx0dGhpcy5zcGVlZCh0aGlzLnNldHRpbmdzLmRyYWdFbmRTcGVlZCB8fCB0aGlzLnNldHRpbmdzLnNtYXJ0U3BlZWQpO1xyXG5cdFx0XHR0aGlzLmN1cnJlbnQodGhpcy5jbG9zZXN0KHN0YWdlLngsIGRlbHRhLnggIT09IDAgPyBkaXJlY3Rpb24gOiB0aGlzLl9kcmFnLmRpcmVjdGlvbikpO1xyXG5cdFx0XHR0aGlzLmludmFsaWRhdGUoJ3Bvc2l0aW9uJyk7XHJcblx0XHRcdHRoaXMudXBkYXRlKCk7XHJcblxyXG5cdFx0XHR0aGlzLl9kcmFnLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuXHJcblx0XHRcdGlmIChNYXRoLmFicyhkZWx0YS54KSA+IDMgfHwgbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLl9kcmFnLnRpbWUgPiAzMDApIHtcclxuXHRcdFx0XHR0aGlzLl9kcmFnLnRhcmdldC5vbmUoJ2NsaWNrLm93bC5jb3JlJywgZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZTsgfSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIXRoaXMuaXMoJ2RyYWdnaW5nJykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMubGVhdmUoJ2RyYWdnaW5nJyk7XHJcblx0XHR0aGlzLnRyaWdnZXIoJ2RyYWdnZWQnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBjbG9zZXN0IGl0ZW0gZm9yIGEgY29vcmRpbmF0ZS5cclxuXHQgKiBAdG9kbyBTZXR0aW5nIGBmcmVlRHJhZ2AgbWFrZXMgYGNsb3Nlc3RgIG5vdCByZXVzYWJsZS4gU2VlICMxNjUuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBjb29yZGluYXRlIC0gVGhlIGNvb3JkaW5hdGUgaW4gcGl4ZWwuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRpcmVjdGlvbiAtIFRoZSBkaXJlY3Rpb24gdG8gY2hlY2sgZm9yIHRoZSBjbG9zZXN0IGl0ZW0uIEV0aGVyIGBsZWZ0YCBvciBgcmlnaHRgLlxyXG5cdCAqIEByZXR1cm4ge051bWJlcn0gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGNsb3Nlc3QgaXRlbS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbihjb29yZGluYXRlLCBkaXJlY3Rpb24pIHtcclxuXHRcdHZhciBwb3NpdGlvbiA9IC0xLFxyXG5cdFx0XHRwdWxsID0gMzAsXHJcblx0XHRcdHdpZHRoID0gdGhpcy53aWR0aCgpLFxyXG5cdFx0XHRjb29yZGluYXRlcyA9IHRoaXMuY29vcmRpbmF0ZXMoKTtcclxuXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuZnJlZURyYWcpIHtcclxuXHRcdFx0Ly8gY2hlY2sgY2xvc2VzdCBpdGVtXHJcblx0XHRcdCQuZWFjaChjb29yZGluYXRlcywgJC5wcm94eShmdW5jdGlvbihpbmRleCwgdmFsdWUpIHtcclxuXHRcdFx0XHQvLyBvbiBhIGxlZnQgcHVsbCwgY2hlY2sgb24gY3VycmVudCBpbmRleFxyXG5cdFx0XHRcdGlmIChkaXJlY3Rpb24gPT09ICdsZWZ0JyAmJiBjb29yZGluYXRlID4gdmFsdWUgLSBwdWxsICYmIGNvb3JkaW5hdGUgPCB2YWx1ZSArIHB1bGwpIHtcclxuXHRcdFx0XHRcdHBvc2l0aW9uID0gaW5kZXg7XHJcblx0XHRcdFx0Ly8gb24gYSByaWdodCBwdWxsLCBjaGVjayBvbiBwcmV2aW91cyBpbmRleFxyXG5cdFx0XHRcdC8vIHRvIGRvIHNvLCBzdWJ0cmFjdCB3aWR0aCBmcm9tIHZhbHVlIGFuZCBzZXQgcG9zaXRpb24gPSBpbmRleCArIDFcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3JpZ2h0JyAmJiBjb29yZGluYXRlID4gdmFsdWUgLSB3aWR0aCAtIHB1bGwgJiYgY29vcmRpbmF0ZSA8IHZhbHVlIC0gd2lkdGggKyBwdWxsKSB7XHJcblx0XHRcdFx0XHRwb3NpdGlvbiA9IGluZGV4ICsgMTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMub3AoY29vcmRpbmF0ZSwgJzwnLCB2YWx1ZSlcclxuXHRcdFx0XHRcdCYmIHRoaXMub3AoY29vcmRpbmF0ZSwgJz4nLCBjb29yZGluYXRlc1tpbmRleCArIDFdIHx8IHZhbHVlIC0gd2lkdGgpKSB7XHJcblx0XHRcdFx0XHRwb3NpdGlvbiA9IGRpcmVjdGlvbiA9PT0gJ2xlZnQnID8gaW5kZXggKyAxIDogaW5kZXg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBwb3NpdGlvbiA9PT0gLTE7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MubG9vcCkge1xyXG5cdFx0XHQvLyBub24gbG9vcCBib3VuZHJpZXNcclxuXHRcdFx0aWYgKHRoaXMub3AoY29vcmRpbmF0ZSwgJz4nLCBjb29yZGluYXRlc1t0aGlzLm1pbmltdW0oKV0pKSB7XHJcblx0XHRcdFx0cG9zaXRpb24gPSBjb29yZGluYXRlID0gdGhpcy5taW5pbXVtKCk7XHJcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5vcChjb29yZGluYXRlLCAnPCcsIGNvb3JkaW5hdGVzW3RoaXMubWF4aW11bSgpXSkpIHtcclxuXHRcdFx0XHRwb3NpdGlvbiA9IGNvb3JkaW5hdGUgPSB0aGlzLm1heGltdW0oKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBwb3NpdGlvbjtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBBbmltYXRlcyB0aGUgc3RhZ2UuXHJcblx0ICogQHRvZG8gIzI3MFxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29vcmRpbmF0ZSAtIFRoZSBjb29yZGluYXRlIGluIHBpeGVscy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbihjb29yZGluYXRlKSB7XHJcblx0XHR2YXIgYW5pbWF0ZSA9IHRoaXMuc3BlZWQoKSA+IDA7XHJcblxyXG5cdFx0dGhpcy5pcygnYW5pbWF0aW5nJykgJiYgdGhpcy5vblRyYW5zaXRpb25FbmQoKTtcclxuXHJcblx0XHRpZiAoYW5pbWF0ZSkge1xyXG5cdFx0XHR0aGlzLmVudGVyKCdhbmltYXRpbmcnKTtcclxuXHRcdFx0dGhpcy50cmlnZ2VyKCd0cmFuc2xhdGUnKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoJC5zdXBwb3J0LnRyYW5zZm9ybTNkICYmICQuc3VwcG9ydC50cmFuc2l0aW9uKSB7XHJcblx0XHRcdHRoaXMuJHN0YWdlLmNzcyh7XHJcblx0XHRcdFx0dHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoJyArIGNvb3JkaW5hdGUgKyAncHgsMHB4LDBweCknLFxyXG5cdFx0XHRcdHRyYW5zaXRpb246ICh0aGlzLnNwZWVkKCkgLyAxMDAwKSArICdzJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSBpZiAoYW5pbWF0ZSkge1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5hbmltYXRlKHtcclxuXHRcdFx0XHRsZWZ0OiBjb29yZGluYXRlICsgJ3B4J1xyXG5cdFx0XHR9LCB0aGlzLnNwZWVkKCksIHRoaXMuc2V0dGluZ3MuZmFsbGJhY2tFYXNpbmcsICQucHJveHkodGhpcy5vblRyYW5zaXRpb25FbmQsIHRoaXMpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuJHN0YWdlLmNzcyh7XHJcblx0XHRcdFx0bGVmdDogY29vcmRpbmF0ZSArICdweCdcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2tzIHdoZXRoZXIgdGhlIGNhcm91c2VsIGlzIGluIGEgc3BlY2lmaWMgc3RhdGUgb3Igbm90LlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdGF0ZSAtIFRoZSBzdGF0ZSB0byBjaGVjay5cclxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn0gLSBUaGUgZmxhZyB3aGljaCBpbmRpY2F0ZXMgaWYgdGhlIGNhcm91c2VsIGlzIGJ1c3kuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5pcyA9IGZ1bmN0aW9uKHN0YXRlKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGVzLmN1cnJlbnRbc3RhdGVdICYmIHRoaXMuX3N0YXRlcy5jdXJyZW50W3N0YXRlXSA+IDA7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2V0cyB0aGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGN1cnJlbnQgaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtwb3NpdGlvbl0gLSBUaGUgbmV3IGFic29sdXRlIHBvc2l0aW9uIG9yIG5vdGhpbmcgdG8gbGVhdmUgaXQgdW5jaGFuZ2VkLlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IC0gVGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBjdXJyZW50IGl0ZW0uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5jdXJyZW50ID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9jdXJyZW50O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLl9pdGVtcy5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcclxuXHRcdH1cclxuXHJcblx0XHRwb3NpdGlvbiA9IHRoaXMubm9ybWFsaXplKHBvc2l0aW9uKTtcclxuXHJcblx0XHRpZiAodGhpcy5fY3VycmVudCAhPT0gcG9zaXRpb24pIHtcclxuXHRcdFx0dmFyIGV2ZW50ID0gdGhpcy50cmlnZ2VyKCdjaGFuZ2UnLCB7IHByb3BlcnR5OiB7IG5hbWU6ICdwb3NpdGlvbicsIHZhbHVlOiBwb3NpdGlvbiB9IH0pO1xyXG5cclxuXHRcdFx0aWYgKGV2ZW50LmRhdGEgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHBvc2l0aW9uID0gdGhpcy5ub3JtYWxpemUoZXZlbnQuZGF0YSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2N1cnJlbnQgPSBwb3NpdGlvbjtcclxuXHJcblx0XHRcdHRoaXMuaW52YWxpZGF0ZSgncG9zaXRpb24nKTtcclxuXHJcblx0XHRcdHRoaXMudHJpZ2dlcignY2hhbmdlZCcsIHsgcHJvcGVydHk6IHsgbmFtZTogJ3Bvc2l0aW9uJywgdmFsdWU6IHRoaXMuX2N1cnJlbnQgfSB9KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fY3VycmVudDtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBJbnZhbGlkYXRlcyB0aGUgZ2l2ZW4gcGFydCBvZiB0aGUgdXBkYXRlIHJvdXRpbmUuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtwYXJ0XSAtIFRoZSBwYXJ0IHRvIGludmFsaWRhdGUuXHJcblx0ICogQHJldHVybnMge0FycmF5LjxTdHJpbmc+fSAtIFRoZSBpbnZhbGlkYXRlZCBwYXJ0cy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmludmFsaWRhdGUgPSBmdW5jdGlvbihwYXJ0KSB7XHJcblx0XHRpZiAoJC50eXBlKHBhcnQpID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHR0aGlzLl9pbnZhbGlkYXRlZFtwYXJ0XSA9IHRydWU7XHJcblx0XHRcdHRoaXMuaXMoJ3ZhbGlkJykgJiYgdGhpcy5sZWF2ZSgndmFsaWQnKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiAkLm1hcCh0aGlzLl9pbnZhbGlkYXRlZCwgZnVuY3Rpb24odiwgaSkgeyByZXR1cm4gaSB9KTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZXNldHMgdGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBjdXJyZW50IGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgbmV3IGl0ZW0uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHRwb3NpdGlvbiA9IHRoaXMubm9ybWFsaXplKHBvc2l0aW9uKTtcclxuXHJcblx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3BlZWQgPSAwO1xyXG5cdFx0dGhpcy5fY3VycmVudCA9IHBvc2l0aW9uO1xyXG5cclxuXHRcdHRoaXMuc3VwcHJlc3MoWyAndHJhbnNsYXRlJywgJ3RyYW5zbGF0ZWQnIF0pO1xyXG5cclxuXHRcdHRoaXMuYW5pbWF0ZSh0aGlzLmNvb3JkaW5hdGVzKHBvc2l0aW9uKSk7XHJcblxyXG5cdFx0dGhpcy5yZWxlYXNlKFsgJ3RyYW5zbGF0ZScsICd0cmFuc2xhdGVkJyBdKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBOb3JtYWxpemVzIGFuIGFic29sdXRlIG9yIGEgcmVsYXRpdmUgcG9zaXRpb24gb2YgYW4gaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIC0gVGhlIGFic29sdXRlIG9yIHJlbGF0aXZlIHBvc2l0aW9uIHRvIG5vcm1hbGl6ZS5cclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZWxhdGl2ZT1mYWxzZV0gLSBXaGV0aGVyIHRoZSBnaXZlbiBwb3NpdGlvbiBpcyByZWxhdGl2ZSBvciBub3QuXHJcblx0ICogQHJldHVybnMge051bWJlcn0gLSBUaGUgbm9ybWFsaXplZCBwb3NpdGlvbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKHBvc2l0aW9uLCByZWxhdGl2ZSkge1xyXG5cdFx0dmFyIG4gPSB0aGlzLl9pdGVtcy5sZW5ndGgsXHJcblx0XHRcdG0gPSByZWxhdGl2ZSA/IDAgOiB0aGlzLl9jbG9uZXMubGVuZ3RoO1xyXG5cclxuXHRcdGlmICghdGhpcy5pc051bWVyaWMocG9zaXRpb24pIHx8IG4gPCAxKSB7XHJcblx0XHRcdHBvc2l0aW9uID0gdW5kZWZpbmVkO1xyXG5cdFx0fSBlbHNlIGlmIChwb3NpdGlvbiA8IDAgfHwgcG9zaXRpb24gPj0gbiArIG0pIHtcclxuXHRcdFx0cG9zaXRpb24gPSAoKHBvc2l0aW9uIC0gbSAvIDIpICUgbiArIG4pICUgbiArIG0gLyAyO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBwb3NpdGlvbjtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBDb252ZXJ0cyBhbiBhYnNvbHV0ZSBwb3NpdGlvbiBvZiBhbiBpdGVtIGludG8gYSByZWxhdGl2ZSBvbmUuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbiB0byBjb252ZXJ0LlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IC0gVGhlIGNvbnZlcnRlZCBwb3NpdGlvbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnJlbGF0aXZlID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdHBvc2l0aW9uIC09IHRoaXMuX2Nsb25lcy5sZW5ndGggLyAyO1xyXG5cdFx0cmV0dXJuIHRoaXMubm9ybWFsaXplKHBvc2l0aW9uLCB0cnVlKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBtYXhpbXVtIHBvc2l0aW9uIGZvciB0aGUgY3VycmVudCBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZWxhdGl2ZT1mYWxzZV0gLSBXaGV0aGVyIHRvIHJldHVybiBhbiBhYnNvbHV0ZSBwb3NpdGlvbiBvciBhIHJlbGF0aXZlIHBvc2l0aW9uLlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5tYXhpbXVtID0gZnVuY3Rpb24ocmVsYXRpdmUpIHtcclxuXHRcdHZhciBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3MsXHJcblx0XHRcdG1heGltdW0gPSB0aGlzLl9jb29yZGluYXRlcy5sZW5ndGgsXHJcblx0XHRcdGl0ZXJhdG9yLFxyXG5cdFx0XHRyZWNpcHJvY2FsSXRlbXNXaWR0aCxcclxuXHRcdFx0ZWxlbWVudFdpZHRoO1xyXG5cclxuXHRcdGlmIChzZXR0aW5ncy5sb29wKSB7XHJcblx0XHRcdG1heGltdW0gPSB0aGlzLl9jbG9uZXMubGVuZ3RoIC8gMiArIHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDE7XHJcblx0XHR9IGVsc2UgaWYgKHNldHRpbmdzLmF1dG9XaWR0aCB8fCBzZXR0aW5ncy5tZXJnZSkge1xyXG5cdFx0XHRpdGVyYXRvciA9IHRoaXMuX2l0ZW1zLmxlbmd0aDtcclxuXHRcdFx0cmVjaXByb2NhbEl0ZW1zV2lkdGggPSB0aGlzLl9pdGVtc1stLWl0ZXJhdG9yXS53aWR0aCgpO1xyXG5cdFx0XHRlbGVtZW50V2lkdGggPSB0aGlzLiRlbGVtZW50LndpZHRoKCk7XHJcblx0XHRcdHdoaWxlIChpdGVyYXRvci0tKSB7XHJcblx0XHRcdFx0cmVjaXByb2NhbEl0ZW1zV2lkdGggKz0gdGhpcy5faXRlbXNbaXRlcmF0b3JdLndpZHRoKCkgKyB0aGlzLnNldHRpbmdzLm1hcmdpbjtcclxuXHRcdFx0XHRpZiAocmVjaXByb2NhbEl0ZW1zV2lkdGggPiBlbGVtZW50V2lkdGgpIHtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRtYXhpbXVtID0gaXRlcmF0b3IgKyAxO1xyXG5cdFx0fSBlbHNlIGlmIChzZXR0aW5ncy5jZW50ZXIpIHtcclxuXHRcdFx0bWF4aW11bSA9IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDE7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRtYXhpbXVtID0gdGhpcy5faXRlbXMubGVuZ3RoIC0gc2V0dGluZ3MuaXRlbXM7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHJlbGF0aXZlKSB7XHJcblx0XHRcdG1heGltdW0gLT0gdGhpcy5fY2xvbmVzLmxlbmd0aCAvIDI7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIE1hdGgubWF4KG1heGltdW0sIDApO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIG1pbmltdW0gcG9zaXRpb24gZm9yIHRoZSBjdXJyZW50IGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JlbGF0aXZlPWZhbHNlXSAtIFdoZXRoZXIgdG8gcmV0dXJuIGFuIGFic29sdXRlIHBvc2l0aW9uIG9yIGEgcmVsYXRpdmUgcG9zaXRpb24uXHJcblx0ICogQHJldHVybnMge051bWJlcn1cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm1pbmltdW0gPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xyXG5cdFx0cmV0dXJuIHJlbGF0aXZlID8gMCA6IHRoaXMuX2Nsb25lcy5sZW5ndGggLyAyO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgYW4gaXRlbSBhdCB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHBvc2l0aW9uLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3Bvc2l0aW9uXSAtIFRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiB0aGUgaXRlbS5cclxuXHQgKiBAcmV0dXJuIHtqUXVlcnl8QXJyYXkuPGpRdWVyeT59IC0gVGhlIGl0ZW0gYXQgdGhlIGdpdmVuIHBvc2l0aW9uIG9yIGFsbCBpdGVtcyBpZiBubyBwb3NpdGlvbiB3YXMgZ2l2ZW4uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5pdGVtcyA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5faXRlbXMuc2xpY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRwb3NpdGlvbiA9IHRoaXMubm9ybWFsaXplKHBvc2l0aW9uLCB0cnVlKTtcclxuXHRcdHJldHVybiB0aGlzLl9pdGVtc1twb3NpdGlvbl07XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyBhbiBpdGVtIGF0IHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgcG9zaXRpb24uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbcG9zaXRpb25dIC0gVGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBpdGVtLlxyXG5cdCAqIEByZXR1cm4ge2pRdWVyeXxBcnJheS48alF1ZXJ5Pn0gLSBUaGUgaXRlbSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24gb3IgYWxsIGl0ZW1zIGlmIG5vIHBvc2l0aW9uIHdhcyBnaXZlbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm1lcmdlcnMgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX21lcmdlcnMuc2xpY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRwb3NpdGlvbiA9IHRoaXMubm9ybWFsaXplKHBvc2l0aW9uLCB0cnVlKTtcclxuXHRcdHJldHVybiB0aGlzLl9tZXJnZXJzW3Bvc2l0aW9uXTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbnMgb2YgY2xvbmVzIGZvciBhbiBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3Bvc2l0aW9uXSAtIFRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiB0aGUgaXRlbS5cclxuXHQgKiBAcmV0dXJucyB7QXJyYXkuPE51bWJlcj59IC0gVGhlIGFic29sdXRlIHBvc2l0aW9ucyBvZiBjbG9uZXMgZm9yIHRoZSBpdGVtIG9yIGFsbCBpZiBubyBwb3NpdGlvbiB3YXMgZ2l2ZW4uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5jbG9uZXMgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0dmFyIG9kZCA9IHRoaXMuX2Nsb25lcy5sZW5ndGggLyAyLFxyXG5cdFx0XHRldmVuID0gb2RkICsgdGhpcy5faXRlbXMubGVuZ3RoLFxyXG5cdFx0XHRtYXAgPSBmdW5jdGlvbihpbmRleCkgeyByZXR1cm4gaW5kZXggJSAyID09PSAwID8gZXZlbiArIGluZGV4IC8gMiA6IG9kZCAtIChpbmRleCArIDEpIC8gMiB9O1xyXG5cclxuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiAkLm1hcCh0aGlzLl9jbG9uZXMsIGZ1bmN0aW9uKHYsIGkpIHsgcmV0dXJuIG1hcChpKSB9KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gJC5tYXAodGhpcy5fY2xvbmVzLCBmdW5jdGlvbih2LCBpKSB7IHJldHVybiB2ID09PSBwb3NpdGlvbiA/IG1hcChpKSA6IG51bGwgfSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2V0cyB0aGUgY3VycmVudCBhbmltYXRpb24gc3BlZWQuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWRdIC0gVGhlIGFuaW1hdGlvbiBzcGVlZCBpbiBtaWxsaXNlY29uZHMgb3Igbm90aGluZyB0byBsZWF2ZSBpdCB1bmNoYW5nZWQuXHJcblx0ICogQHJldHVybnMge051bWJlcn0gLSBUaGUgY3VycmVudCBhbmltYXRpb24gc3BlZWQgaW4gbWlsbGlzZWNvbmRzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuc3BlZWQgPSBmdW5jdGlvbihzcGVlZCkge1xyXG5cdFx0aWYgKHNwZWVkICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0dGhpcy5fc3BlZWQgPSBzcGVlZDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3BlZWQ7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgY29vcmRpbmF0ZSBvZiBhbiBpdGVtLlxyXG5cdCAqIEB0b2RvIFRoZSBuYW1lIG9mIHRoaXMgbWV0aG9kIGlzIG1pc3NsZWFuZGluZy5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIC0gVGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBpdGVtIHdpdGhpbiBgbWluaW11bSgpYCBhbmQgYG1heGltdW0oKWAuXHJcblx0ICogQHJldHVybnMge051bWJlcnxBcnJheS48TnVtYmVyPn0gLSBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgaXRlbSBpbiBwaXhlbCBvciBhbGwgY29vcmRpbmF0ZXMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5jb29yZGluYXRlcyA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHR2YXIgbXVsdGlwbGllciA9IDEsXHJcblx0XHRcdG5ld1Bvc2l0aW9uID0gcG9zaXRpb24gLSAxLFxyXG5cdFx0XHRjb29yZGluYXRlO1xyXG5cclxuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiAkLm1hcCh0aGlzLl9jb29yZGluYXRlcywgJC5wcm94eShmdW5jdGlvbihjb29yZGluYXRlLCBpbmRleCkge1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmNvb3JkaW5hdGVzKGluZGV4KTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmNlbnRlcikge1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5ydGwpIHtcclxuXHRcdFx0XHRtdWx0aXBsaWVyID0gLTE7XHJcblx0XHRcdFx0bmV3UG9zaXRpb24gPSBwb3NpdGlvbiArIDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvb3JkaW5hdGUgPSB0aGlzLl9jb29yZGluYXRlc1twb3NpdGlvbl07XHJcblx0XHRcdGNvb3JkaW5hdGUgKz0gKHRoaXMud2lkdGgoKSAtIGNvb3JkaW5hdGUgKyAodGhpcy5fY29vcmRpbmF0ZXNbbmV3UG9zaXRpb25dIHx8IDApKSAvIDIgKiBtdWx0aXBsaWVyO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29vcmRpbmF0ZSA9IHRoaXMuX2Nvb3JkaW5hdGVzW25ld1Bvc2l0aW9uXSB8fCAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvb3JkaW5hdGUgPSBNYXRoLmNlaWwoY29vcmRpbmF0ZSk7XHJcblxyXG5cdFx0cmV0dXJuIGNvb3JkaW5hdGU7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ2FsY3VsYXRlcyB0aGUgc3BlZWQgZm9yIGEgdHJhbnNsYXRpb24uXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBmcm9tIC0gVGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBzdGFydCBpdGVtLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB0byAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgdGFyZ2V0IGl0ZW0uXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtmYWN0b3I9dW5kZWZpbmVkXSAtIFRoZSB0aW1lIGZhY3RvciBpbiBtaWxsaXNlY29uZHMuXHJcblx0ICogQHJldHVybnMge051bWJlcn0gLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgZm9yIHRoZSB0cmFuc2xhdGlvbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmR1cmF0aW9uID0gZnVuY3Rpb24oZnJvbSwgdG8sIGZhY3Rvcikge1xyXG5cdFx0aWYgKGZhY3RvciA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gMDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoTWF0aC5hYnModG8gLSBmcm9tKSwgMSksIDYpICogTWF0aC5hYnMoKGZhY3RvciB8fCB0aGlzLnNldHRpbmdzLnNtYXJ0U3BlZWQpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTbGlkZXMgdG8gdGhlIHNwZWNpZmllZCBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gLSBUaGUgcG9zaXRpb24gb2YgdGhlIGl0ZW0uXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZF0gLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgZm9yIHRoZSB0cmFuc2l0aW9uLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUudG8gPSBmdW5jdGlvbihwb3NpdGlvbiwgc3BlZWQpIHtcclxuXHRcdHZhciBjdXJyZW50ID0gdGhpcy5jdXJyZW50KCksXHJcblx0XHRcdHJldmVydCA9IG51bGwsXHJcblx0XHRcdGRpc3RhbmNlID0gcG9zaXRpb24gLSB0aGlzLnJlbGF0aXZlKGN1cnJlbnQpLFxyXG5cdFx0XHRkaXJlY3Rpb24gPSAoZGlzdGFuY2UgPiAwKSAtIChkaXN0YW5jZSA8IDApLFxyXG5cdFx0XHRpdGVtcyA9IHRoaXMuX2l0ZW1zLmxlbmd0aCxcclxuXHRcdFx0bWluaW11bSA9IHRoaXMubWluaW11bSgpLFxyXG5cdFx0XHRtYXhpbXVtID0gdGhpcy5tYXhpbXVtKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubG9vcCkge1xyXG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MucmV3aW5kICYmIE1hdGguYWJzKGRpc3RhbmNlKSA+IGl0ZW1zIC8gMikge1xyXG5cdFx0XHRcdGRpc3RhbmNlICs9IGRpcmVjdGlvbiAqIC0xICogaXRlbXM7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHBvc2l0aW9uID0gY3VycmVudCArIGRpc3RhbmNlO1xyXG5cdFx0XHRyZXZlcnQgPSAoKHBvc2l0aW9uIC0gbWluaW11bSkgJSBpdGVtcyArIGl0ZW1zKSAlIGl0ZW1zICsgbWluaW11bTtcclxuXHJcblx0XHRcdGlmIChyZXZlcnQgIT09IHBvc2l0aW9uICYmIHJldmVydCAtIGRpc3RhbmNlIDw9IG1heGltdW0gJiYgcmV2ZXJ0IC0gZGlzdGFuY2UgPiAwKSB7XHJcblx0XHRcdFx0Y3VycmVudCA9IHJldmVydCAtIGRpc3RhbmNlO1xyXG5cdFx0XHRcdHBvc2l0aW9uID0gcmV2ZXJ0O1xyXG5cdFx0XHRcdHRoaXMucmVzZXQoY3VycmVudCk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAodGhpcy5zZXR0aW5ncy5yZXdpbmQpIHtcclxuXHRcdFx0bWF4aW11bSArPSAxO1xyXG5cdFx0XHRwb3NpdGlvbiA9IChwb3NpdGlvbiAlIG1heGltdW0gKyBtYXhpbXVtKSAlIG1heGltdW07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwb3NpdGlvbiA9IE1hdGgubWF4KG1pbmltdW0sIE1hdGgubWluKG1heGltdW0sIHBvc2l0aW9uKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zcGVlZCh0aGlzLmR1cmF0aW9uKGN1cnJlbnQsIHBvc2l0aW9uLCBzcGVlZCkpO1xyXG5cdFx0dGhpcy5jdXJyZW50KHBvc2l0aW9uKTtcclxuXHJcblx0XHRpZiAodGhpcy4kZWxlbWVudC5pcygnOnZpc2libGUnKSkge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNsaWRlcyB0byB0aGUgbmV4dCBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkXSAtIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIHRyYW5zaXRpb24uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oc3BlZWQpIHtcclxuXHRcdHNwZWVkID0gc3BlZWQgfHwgZmFsc2U7XHJcblx0XHR0aGlzLnRvKHRoaXMucmVsYXRpdmUodGhpcy5jdXJyZW50KCkpICsgMSwgc3BlZWQpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNsaWRlcyB0byB0aGUgcHJldmlvdXMgaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZF0gLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgZm9yIHRoZSB0cmFuc2l0aW9uLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uKHNwZWVkKSB7XHJcblx0XHRzcGVlZCA9IHNwZWVkIHx8IGZhbHNlO1xyXG5cdFx0dGhpcy50byh0aGlzLnJlbGF0aXZlKHRoaXMuY3VycmVudCgpKSAtIDEsIHNwZWVkKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHRoZSBlbmQgb2YgYW4gYW5pbWF0aW9uLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIFRoZSBldmVudCBhcmd1bWVudHMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vblRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbihldmVudCkge1xyXG5cclxuXHRcdC8vIGlmIGNzczIgYW5pbWF0aW9uIHRoZW4gZXZlbnQgb2JqZWN0IGlzIHVuZGVmaW5lZFxyXG5cdFx0aWYgKGV2ZW50ICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG5cdFx0XHQvLyBDYXRjaCBvbmx5IG93bC1zdGFnZSB0cmFuc2l0aW9uRW5kIGV2ZW50XHJcblx0XHRcdGlmICgoZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQgfHwgZXZlbnQub3JpZ2luYWxUYXJnZXQpICE9PSB0aGlzLiRzdGFnZS5nZXQoMCkpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmxlYXZlKCdhbmltYXRpbmcnKTtcclxuXHRcdHRoaXMudHJpZ2dlcigndHJhbnNsYXRlZCcpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdmlld3BvcnQgd2lkdGguXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEByZXR1cm4ge051bWJlcn0gLSBUaGUgd2lkdGggaW4gcGl4ZWwuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS52aWV3cG9ydCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdpZHRoO1xyXG5cdFx0aWYgKHRoaXMub3B0aW9ucy5yZXNwb25zaXZlQmFzZUVsZW1lbnQgIT09IHdpbmRvdykge1xyXG5cdFx0XHR3aWR0aCA9ICQodGhpcy5vcHRpb25zLnJlc3BvbnNpdmVCYXNlRWxlbWVudCkud2lkdGgoKTtcclxuXHRcdH0gZWxzZSBpZiAod2luZG93LmlubmVyV2lkdGgpIHtcclxuXHRcdFx0d2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHRcdH0gZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkge1xyXG5cdFx0XHR3aWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignQ2FuIG5vdCBkZXRlY3Qgdmlld3BvcnQgd2lkdGguJyk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gd2lkdGg7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUmVwbGFjZXMgdGhlIGN1cnJlbnQgY29udGVudC5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudHxqUXVlcnl8U3RyaW5nfSBjb250ZW50IC0gVGhlIG5ldyBjb250ZW50LlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uKGNvbnRlbnQpIHtcclxuXHRcdHRoaXMuJHN0YWdlLmVtcHR5KCk7XHJcblx0XHR0aGlzLl9pdGVtcyA9IFtdO1xyXG5cclxuXHRcdGlmIChjb250ZW50KSB7XHJcblx0XHRcdGNvbnRlbnQgPSAoY29udGVudCBpbnN0YW5jZW9mIGpRdWVyeSkgPyBjb250ZW50IDogJChjb250ZW50KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5uZXN0ZWRJdGVtU2VsZWN0b3IpIHtcclxuXHRcdFx0Y29udGVudCA9IGNvbnRlbnQuZmluZCgnLicgKyB0aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3Rvcik7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29udGVudC5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm5vZGVUeXBlID09PSAxO1xyXG5cdFx0fSkuZWFjaCgkLnByb3h5KGZ1bmN0aW9uKGluZGV4LCBpdGVtKSB7XHJcblx0XHRcdGl0ZW0gPSB0aGlzLnByZXBhcmUoaXRlbSk7XHJcblx0XHRcdHRoaXMuJHN0YWdlLmFwcGVuZChpdGVtKTtcclxuXHRcdFx0dGhpcy5faXRlbXMucHVzaChpdGVtKTtcclxuXHRcdFx0dGhpcy5fbWVyZ2Vycy5wdXNoKGl0ZW0uZmluZCgnW2RhdGEtbWVyZ2VdJykuYWRkQmFjaygnW2RhdGEtbWVyZ2VdJykuYXR0cignZGF0YS1tZXJnZScpICogMSB8fCAxKTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLnJlc2V0KHRoaXMuaXNOdW1lcmljKHRoaXMuc2V0dGluZ3Muc3RhcnRQb3NpdGlvbikgPyB0aGlzLnNldHRpbmdzLnN0YXJ0UG9zaXRpb24gOiAwKTtcclxuXHJcblx0XHR0aGlzLmludmFsaWRhdGUoJ2l0ZW1zJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQWRkcyBhbiBpdGVtLlxyXG5cdCAqIEB0b2RvIFVzZSBgaXRlbWAgaW5zdGVhZCBvZiBgY29udGVudGAgZm9yIHRoZSBldmVudCBhcmd1bWVudHMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8alF1ZXJ5fFN0cmluZ30gY29udGVudCAtIFRoZSBpdGVtIGNvbnRlbnQgdG8gYWRkLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbcG9zaXRpb25dIC0gVGhlIHJlbGF0aXZlIHBvc2l0aW9uIGF0IHdoaWNoIHRvIGluc2VydCB0aGUgaXRlbSBvdGhlcndpc2UgdGhlIGl0ZW0gd2lsbCBiZSBhZGRlZCB0byB0aGUgZW5kLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oY29udGVudCwgcG9zaXRpb24pIHtcclxuXHRcdHZhciBjdXJyZW50ID0gdGhpcy5yZWxhdGl2ZSh0aGlzLl9jdXJyZW50KTtcclxuXHJcblx0XHRwb3NpdGlvbiA9IHBvc2l0aW9uID09PSB1bmRlZmluZWQgPyB0aGlzLl9pdGVtcy5sZW5ndGggOiB0aGlzLm5vcm1hbGl6ZShwb3NpdGlvbiwgdHJ1ZSk7XHJcblx0XHRjb250ZW50ID0gY29udGVudCBpbnN0YW5jZW9mIGpRdWVyeSA/IGNvbnRlbnQgOiAkKGNvbnRlbnQpO1xyXG5cclxuXHRcdHRoaXMudHJpZ2dlcignYWRkJywgeyBjb250ZW50OiBjb250ZW50LCBwb3NpdGlvbjogcG9zaXRpb24gfSk7XHJcblxyXG5cdFx0Y29udGVudCA9IHRoaXMucHJlcGFyZShjb250ZW50KTtcclxuXHJcblx0XHRpZiAodGhpcy5faXRlbXMubGVuZ3RoID09PSAwIHx8IHBvc2l0aW9uID09PSB0aGlzLl9pdGVtcy5sZW5ndGgpIHtcclxuXHRcdFx0dGhpcy5faXRlbXMubGVuZ3RoID09PSAwICYmIHRoaXMuJHN0YWdlLmFwcGVuZChjb250ZW50KTtcclxuXHRcdFx0dGhpcy5faXRlbXMubGVuZ3RoICE9PSAwICYmIHRoaXMuX2l0ZW1zW3Bvc2l0aW9uIC0gMV0uYWZ0ZXIoY29udGVudCk7XHJcblx0XHRcdHRoaXMuX2l0ZW1zLnB1c2goY29udGVudCk7XHJcblx0XHRcdHRoaXMuX21lcmdlcnMucHVzaChjb250ZW50LmZpbmQoJ1tkYXRhLW1lcmdlXScpLmFkZEJhY2soJ1tkYXRhLW1lcmdlXScpLmF0dHIoJ2RhdGEtbWVyZ2UnKSAqIDEgfHwgMSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9pdGVtc1twb3NpdGlvbl0uYmVmb3JlKGNvbnRlbnQpO1xyXG5cdFx0XHR0aGlzLl9pdGVtcy5zcGxpY2UocG9zaXRpb24sIDAsIGNvbnRlbnQpO1xyXG5cdFx0XHR0aGlzLl9tZXJnZXJzLnNwbGljZShwb3NpdGlvbiwgMCwgY29udGVudC5maW5kKCdbZGF0YS1tZXJnZV0nKS5hZGRCYWNrKCdbZGF0YS1tZXJnZV0nKS5hdHRyKCdkYXRhLW1lcmdlJykgKiAxIHx8IDEpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2l0ZW1zW2N1cnJlbnRdICYmIHRoaXMucmVzZXQodGhpcy5faXRlbXNbY3VycmVudF0uaW5kZXgoKSk7XHJcblxyXG5cdFx0dGhpcy5pbnZhbGlkYXRlKCdpdGVtcycpO1xyXG5cclxuXHRcdHRoaXMudHJpZ2dlcignYWRkZWQnLCB7IGNvbnRlbnQ6IGNvbnRlbnQsIHBvc2l0aW9uOiBwb3NpdGlvbiB9KTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZW1vdmVzIGFuIGl0ZW0gYnkgaXRzIHBvc2l0aW9uLlxyXG5cdCAqIEB0b2RvIFVzZSBgaXRlbWAgaW5zdGVhZCBvZiBgY29udGVudGAgZm9yIHRoZSBldmVudCBhcmd1bWVudHMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiAtIFRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiB0aGUgaXRlbSB0byByZW1vdmUuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0cG9zaXRpb24gPSB0aGlzLm5vcm1hbGl6ZShwb3NpdGlvbiwgdHJ1ZSk7XHJcblxyXG5cdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudHJpZ2dlcigncmVtb3ZlJywgeyBjb250ZW50OiB0aGlzLl9pdGVtc1twb3NpdGlvbl0sIHBvc2l0aW9uOiBwb3NpdGlvbiB9KTtcclxuXHJcblx0XHR0aGlzLl9pdGVtc1twb3NpdGlvbl0ucmVtb3ZlKCk7XHJcblx0XHR0aGlzLl9pdGVtcy5zcGxpY2UocG9zaXRpb24sIDEpO1xyXG5cdFx0dGhpcy5fbWVyZ2Vycy5zcGxpY2UocG9zaXRpb24sIDEpO1xyXG5cclxuXHRcdHRoaXMuaW52YWxpZGF0ZSgnaXRlbXMnKTtcclxuXHJcblx0XHR0aGlzLnRyaWdnZXIoJ3JlbW92ZWQnLCB7IGNvbnRlbnQ6IG51bGwsIHBvc2l0aW9uOiBwb3NpdGlvbiB9KTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBQcmVsb2FkcyBpbWFnZXMgd2l0aCBhdXRvIHdpZHRoLlxyXG5cdCAqIEB0b2RvIFJlcGxhY2UgYnkgYSBtb3JlIGdlbmVyaWMgYXBwcm9hY2hcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5wcmVsb2FkQXV0b1dpZHRoSW1hZ2VzID0gZnVuY3Rpb24oaW1hZ2VzKSB7XHJcblx0XHRpbWFnZXMuZWFjaCgkLnByb3h5KGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcclxuXHRcdFx0dGhpcy5lbnRlcigncHJlLWxvYWRpbmcnKTtcclxuXHRcdFx0ZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblx0XHRcdCQobmV3IEltYWdlKCkpLm9uZSgnbG9hZCcsICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGVsZW1lbnQuYXR0cignc3JjJywgZS50YXJnZXQuc3JjKTtcclxuXHRcdFx0XHRlbGVtZW50LmNzcygnb3BhY2l0eScsIDEpO1xyXG5cdFx0XHRcdHRoaXMubGVhdmUoJ3ByZS1sb2FkaW5nJyk7XHJcblx0XHRcdFx0IXRoaXMuaXMoJ3ByZS1sb2FkaW5nJykgJiYgIXRoaXMuaXMoJ2luaXRpYWxpemluZycpICYmIHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0XHR9LCB0aGlzKSkuYXR0cignc3JjJywgZWxlbWVudC5hdHRyKCdzcmMnKSB8fCBlbGVtZW50LmF0dHIoJ2RhdGEtc3JjJykgfHwgZWxlbWVudC5hdHRyKCdkYXRhLXNyYy1yZXRpbmEnKSk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIGNhcm91c2VsLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHR0aGlzLiRlbGVtZW50Lm9mZignLm93bC5jb3JlJyk7XHJcblx0XHR0aGlzLiRzdGFnZS5vZmYoJy5vd2wuY29yZScpO1xyXG5cdFx0JChkb2N1bWVudCkub2ZmKCcub3dsLmNvcmUnKTtcclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlICE9PSBmYWxzZSkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmVzaXplVGltZXIpO1xyXG5cdFx0XHR0aGlzLm9mZih3aW5kb3csICdyZXNpemUnLCB0aGlzLl9oYW5kbGVycy5vblRocm90dGxlZFJlc2l6ZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yICh2YXIgaSBpbiB0aGlzLl9wbHVnaW5zKSB7XHJcblx0XHRcdHRoaXMuX3BsdWdpbnNbaV0uZGVzdHJveSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuJHN0YWdlLmNoaWxkcmVuKCcuY2xvbmVkJykucmVtb3ZlKCk7XHJcblxyXG5cdFx0dGhpcy4kc3RhZ2UudW53cmFwKCk7XHJcblx0XHR0aGlzLiRzdGFnZS5jaGlsZHJlbigpLmNvbnRlbnRzKCkudW53cmFwKCk7XHJcblx0XHR0aGlzLiRzdGFnZS5jaGlsZHJlbigpLnVud3JhcCgpO1xyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnRcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5yZWZyZXNoQ2xhc3MpXHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMubG9hZGluZ0NsYXNzKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmxvYWRlZENsYXNzKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLnJ0bENsYXNzKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmRyYWdDbGFzcylcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5ncmFiQ2xhc3MpXHJcblx0XHRcdC5hdHRyKCdjbGFzcycsIHRoaXMuJGVsZW1lbnQuYXR0cignY2xhc3MnKS5yZXBsYWNlKG5ldyBSZWdFeHAodGhpcy5vcHRpb25zLnJlc3BvbnNpdmVDbGFzcyArICctXFxcXFMrXFxcXHMnLCAnZycpLCAnJykpXHJcblx0XHRcdC5yZW1vdmVEYXRhKCdvd2wuY2Fyb3VzZWwnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBPcGVyYXRvcnMgdG8gY2FsY3VsYXRlIHJpZ2h0LXRvLWxlZnQgYW5kIGxlZnQtdG8tcmlnaHQuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbYV0gLSBUaGUgbGVmdCBzaWRlIG9wZXJhbmQuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtvXSAtIFRoZSBvcGVyYXRvci5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW2JdIC0gVGhlIHJpZ2h0IHNpZGUgb3BlcmFuZC5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9wID0gZnVuY3Rpb24oYSwgbywgYikge1xyXG5cdFx0dmFyIHJ0bCA9IHRoaXMuc2V0dGluZ3MucnRsO1xyXG5cdFx0c3dpdGNoIChvKSB7XHJcblx0XHRcdGNhc2UgJzwnOlxyXG5cdFx0XHRcdHJldHVybiBydGwgPyBhID4gYiA6IGEgPCBiO1xyXG5cdFx0XHRjYXNlICc+JzpcclxuXHRcdFx0XHRyZXR1cm4gcnRsID8gYSA8IGIgOiBhID4gYjtcclxuXHRcdFx0Y2FzZSAnPj0nOlxyXG5cdFx0XHRcdHJldHVybiBydGwgPyBhIDw9IGIgOiBhID49IGI7XHJcblx0XHRcdGNhc2UgJzw9JzpcclxuXHRcdFx0XHRyZXR1cm4gcnRsID8gYSA+PSBiIDogYSA8PSBiO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEF0dGFjaGVzIHRvIGFuIGludGVybmFsIGV2ZW50LlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gVGhlIGV2ZW50IHNvdXJjZS5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgLSBUaGUgZXZlbnQgbmFtZS5cclxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciAtIFRoZSBldmVudCBoYW5kbGVyIHRvIGF0dGFjaC5cclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmUgLSBXZXRoZXIgdGhlIGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkIGF0IHRoZSBjYXB0dXJpbmcgcGhhc2Ugb3Igbm90LlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub24gPSBmdW5jdGlvbihlbGVtZW50LCBldmVudCwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcclxuXHRcdGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuXHRcdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lciwgY2FwdHVyZSk7XHJcblx0XHR9IGVsc2UgaWYgKGVsZW1lbnQuYXR0YWNoRXZlbnQpIHtcclxuXHRcdFx0ZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnQsIGxpc3RlbmVyKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXRhY2hlcyBmcm9tIGFuIGludGVybmFsIGV2ZW50LlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IC0gVGhlIGV2ZW50IHNvdXJjZS5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgLSBUaGUgZXZlbnQgbmFtZS5cclxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciAtIFRoZSBhdHRhY2hlZCBldmVudCBoYW5kbGVyIHRvIGRldGFjaC5cclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGNhcHR1cmUgLSBXZXRoZXIgdGhlIGF0dGFjaGVkIGV2ZW50IGhhbmRsZXIgd2FzIHJlZ2lzdGVyZWQgYXMgYSBjYXB0dXJpbmcgbGlzdGVuZXIgb3Igbm90LlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQsIGxpc3RlbmVyLCBjYXB0dXJlKSB7XHJcblx0XHRpZiAoZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKSB7XHJcblx0XHRcdGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGNhcHR1cmUpO1xyXG5cdFx0fSBlbHNlIGlmIChlbGVtZW50LmRldGFjaEV2ZW50KSB7XHJcblx0XHRcdGVsZW1lbnQuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogVHJpZ2dlcnMgYSBwdWJsaWMgZXZlbnQuXHJcblx0ICogQHRvZG8gUmVtb3ZlIGBzdGF0dXNgLCBgcmVsYXRlZFRhcmdldGAgc2hvdWxkIGJlIHVzZWQgaW5zdGVhZC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBUaGUgZXZlbnQgbmFtZS5cclxuXHQgKiBAcGFyYW0geyp9IFtkYXRhPW51bGxdIC0gVGhlIGV2ZW50IGRhdGEuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lc3BhY2U9Y2Fyb3VzZWxdIC0gVGhlIGV2ZW50IG5hbWVzcGFjZS5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3N0YXRlXSAtIFRoZSBzdGF0ZSB3aGljaCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIGV2ZW50LlxyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VudGVyPWZhbHNlXSAtIEluZGljYXRlcyBpZiB0aGUgY2FsbCBlbnRlcnMgdGhlIHNwZWNpZmllZCBzdGF0ZSBvciBub3QuXHJcblx0ICogQHJldHVybnMge0V2ZW50fSAtIFRoZSBldmVudCBhcmd1bWVudHMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24obmFtZSwgZGF0YSwgbmFtZXNwYWNlLCBzdGF0ZSwgZW50ZXIpIHtcclxuXHRcdHZhciBzdGF0dXMgPSB7XHJcblx0XHRcdGl0ZW06IHsgY291bnQ6IHRoaXMuX2l0ZW1zLmxlbmd0aCwgaW5kZXg6IHRoaXMuY3VycmVudCgpIH1cclxuXHRcdH0sIGhhbmRsZXIgPSAkLmNhbWVsQ2FzZShcclxuXHRcdFx0JC5ncmVwKFsgJ29uJywgbmFtZSwgbmFtZXNwYWNlIF0sIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHYgfSlcclxuXHRcdFx0XHQuam9pbignLScpLnRvTG93ZXJDYXNlKClcclxuXHRcdCksIGV2ZW50ID0gJC5FdmVudChcclxuXHRcdFx0WyBuYW1lLCAnb3dsJywgbmFtZXNwYWNlIHx8ICdjYXJvdXNlbCcgXS5qb2luKCcuJykudG9Mb3dlckNhc2UoKSxcclxuXHRcdFx0JC5leHRlbmQoeyByZWxhdGVkVGFyZ2V0OiB0aGlzIH0sIHN0YXR1cywgZGF0YSlcclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLl9zdXByZXNzW25hbWVdKSB7XHJcblx0XHRcdCQuZWFjaCh0aGlzLl9wbHVnaW5zLCBmdW5jdGlvbihuYW1lLCBwbHVnaW4pIHtcclxuXHRcdFx0XHRpZiAocGx1Z2luLm9uVHJpZ2dlcikge1xyXG5cdFx0XHRcdFx0cGx1Z2luLm9uVHJpZ2dlcihldmVudCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMucmVnaXN0ZXIoeyB0eXBlOiBPd2wuVHlwZS5FdmVudCwgbmFtZTogbmFtZSB9KTtcclxuXHRcdFx0dGhpcy4kZWxlbWVudC50cmlnZ2VyKGV2ZW50KTtcclxuXHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzICYmIHR5cGVvZiB0aGlzLnNldHRpbmdzW2hhbmRsZXJdID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5nc1toYW5kbGVyXS5jYWxsKHRoaXMsIGV2ZW50KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBldmVudDtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBFbnRlcnMgYSBzdGF0ZS5cclxuXHQgKiBAcGFyYW0gbmFtZSAtIFRoZSBzdGF0ZSBuYW1lLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuZW50ZXIgPSBmdW5jdGlvbihuYW1lKSB7XHJcblx0XHQkLmVhY2goWyBuYW1lIF0uY29uY2F0KHRoaXMuX3N0YXRlcy50YWdzW25hbWVdIHx8IFtdKSwgJC5wcm94eShmdW5jdGlvbihpLCBuYW1lKSB7XHJcblx0XHRcdGlmICh0aGlzLl9zdGF0ZXMuY3VycmVudFtuYW1lXSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dGhpcy5fc3RhdGVzLmN1cnJlbnRbbmFtZV0gPSAwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9zdGF0ZXMuY3VycmVudFtuYW1lXSsrO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIExlYXZlcyBhIHN0YXRlLlxyXG5cdCAqIEBwYXJhbSBuYW1lIC0gVGhlIHN0YXRlIG5hbWUuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5sZWF2ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuXHRcdCQuZWFjaChbIG5hbWUgXS5jb25jYXQodGhpcy5fc3RhdGVzLnRhZ3NbbmFtZV0gfHwgW10pLCAkLnByb3h5KGZ1bmN0aW9uKGksIG5hbWUpIHtcclxuXHRcdFx0dGhpcy5fc3RhdGVzLmN1cnJlbnRbbmFtZV0tLTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZWdpc3RlcnMgYW4gZXZlbnQgb3Igc3RhdGUuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgLSBUaGUgZXZlbnQgb3Igc3RhdGUgdG8gcmVnaXN0ZXIuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uKG9iamVjdCkge1xyXG5cdFx0aWYgKG9iamVjdC50eXBlID09PSBPd2wuVHlwZS5FdmVudCkge1xyXG5cdFx0XHRpZiAoISQuZXZlbnQuc3BlY2lhbFtvYmplY3QubmFtZV0pIHtcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWxbb2JqZWN0Lm5hbWVdID0ge307XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICghJC5ldmVudC5zcGVjaWFsW29iamVjdC5uYW1lXS5vd2wpIHtcclxuXHRcdFx0XHR2YXIgX2RlZmF1bHQgPSAkLmV2ZW50LnNwZWNpYWxbb2JqZWN0Lm5hbWVdLl9kZWZhdWx0O1xyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbFtvYmplY3QubmFtZV0uX2RlZmF1bHQgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRpZiAoX2RlZmF1bHQgJiYgX2RlZmF1bHQuYXBwbHkgJiYgKCFlLm5hbWVzcGFjZSB8fCBlLm5hbWVzcGFjZS5pbmRleE9mKCdvd2wnKSA9PT0gLTEpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBfZGVmYXVsdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuIGUubmFtZXNwYWNlICYmIGUubmFtZXNwYWNlLmluZGV4T2YoJ293bCcpID4gLTE7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWxbb2JqZWN0Lm5hbWVdLm93bCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAob2JqZWN0LnR5cGUgPT09IE93bC5UeXBlLlN0YXRlKSB7XHJcblx0XHRcdGlmICghdGhpcy5fc3RhdGVzLnRhZ3Nbb2JqZWN0Lm5hbWVdKSB7XHJcblx0XHRcdFx0dGhpcy5fc3RhdGVzLnRhZ3Nbb2JqZWN0Lm5hbWVdID0gb2JqZWN0LnRhZ3M7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5fc3RhdGVzLnRhZ3Nbb2JqZWN0Lm5hbWVdID0gdGhpcy5fc3RhdGVzLnRhZ3Nbb2JqZWN0Lm5hbWVdLmNvbmNhdChvYmplY3QudGFncyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3N0YXRlcy50YWdzW29iamVjdC5uYW1lXSA9ICQuZ3JlcCh0aGlzLl9zdGF0ZXMudGFnc1tvYmplY3QubmFtZV0sICQucHJveHkoZnVuY3Rpb24odGFnLCBpKSB7XHJcblx0XHRcdFx0cmV0dXJuICQuaW5BcnJheSh0YWcsIHRoaXMuX3N0YXRlcy50YWdzW29iamVjdC5uYW1lXSkgPT09IGk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTdXBwcmVzc2VzIGV2ZW50cy5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtBcnJheS48U3RyaW5nPn0gZXZlbnRzIC0gVGhlIGV2ZW50cyB0byBzdXBwcmVzcy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnN1cHByZXNzID0gZnVuY3Rpb24oZXZlbnRzKSB7XHJcblx0XHQkLmVhY2goZXZlbnRzLCAkLnByb3h5KGZ1bmN0aW9uKGluZGV4LCBldmVudCkge1xyXG5cdFx0XHR0aGlzLl9zdXByZXNzW2V2ZW50XSA9IHRydWU7XHJcblx0XHR9LCB0aGlzKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUmVsZWFzZXMgc3VwcHJlc3NlZCBldmVudHMuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7QXJyYXkuPFN0cmluZz59IGV2ZW50cyAtIFRoZSBldmVudHMgdG8gcmVsZWFzZS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbihldmVudHMpIHtcclxuXHRcdCQuZWFjaChldmVudHMsICQucHJveHkoZnVuY3Rpb24oaW5kZXgsIGV2ZW50KSB7XHJcblx0XHRcdGRlbGV0ZSB0aGlzLl9zdXByZXNzW2V2ZW50XTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHVuaWZpZWQgcG9pbnRlciBjb29yZGluYXRlcyBmcm9tIGV2ZW50LlxyXG5cdCAqIEB0b2RvICMyNjFcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtFdmVudH0gLSBUaGUgYG1vdXNlZG93bmAgb3IgYHRvdWNoc3RhcnRgIGV2ZW50LlxyXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IC0gQ29udGFpbnMgYHhgIGFuZCBgeWAgY29vcmRpbmF0ZXMgb2YgY3VycmVudCBwb2ludGVyIHBvc2l0aW9uLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucG9pbnRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHR2YXIgcmVzdWx0ID0geyB4OiBudWxsLCB5OiBudWxsIH07XHJcblxyXG5cdFx0ZXZlbnQgPSBldmVudC5vcmlnaW5hbEV2ZW50IHx8IGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcclxuXHJcblx0XHRldmVudCA9IGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggP1xyXG5cdFx0XHRldmVudC50b3VjaGVzWzBdIDogZXZlbnQuY2hhbmdlZFRvdWNoZXMgJiYgZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoID9cclxuXHRcdFx0XHRldmVudC5jaGFuZ2VkVG91Y2hlc1swXSA6IGV2ZW50O1xyXG5cclxuXHRcdGlmIChldmVudC5wYWdlWCkge1xyXG5cdFx0XHRyZXN1bHQueCA9IGV2ZW50LnBhZ2VYO1xyXG5cdFx0XHRyZXN1bHQueSA9IGV2ZW50LnBhZ2VZO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVzdWx0LnggPSBldmVudC5jbGllbnRYO1xyXG5cdFx0XHRyZXN1bHQueSA9IGV2ZW50LmNsaWVudFk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXRlcm1pbmVzIGlmIHRoZSBpbnB1dCBpcyBhIE51bWJlciBvciBzb21ldGhpbmcgdGhhdCBjYW4gYmUgY29lcmNlZCB0byBhIE51bWJlclxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd8T2JqZWN0fEFycmF5fEJvb2xlYW58UmVnRXhwfEZ1bmN0aW9ufFN5bWJvbH0gLSBUaGUgaW5wdXQgdG8gYmUgdGVzdGVkXHJcblx0ICogQHJldHVybnMge0Jvb2xlYW59IC0gQW4gaW5kaWNhdGlvbiBpZiB0aGUgaW5wdXQgaXMgYSBOdW1iZXIgb3IgY2FuIGJlIGNvZXJjZWQgdG8gYSBOdW1iZXJcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmlzTnVtZXJpYyA9IGZ1bmN0aW9uKG51bWJlcikge1xyXG5cdFx0cmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG51bWJlcikpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIGRpZmZlcmVuY2Ugb2YgdHdvIHZlY3RvcnMuXHJcblx0ICogQHRvZG8gIzI2MVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge09iamVjdH0gLSBUaGUgZmlyc3QgdmVjdG9yLlxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSAtIFRoZSBzZWNvbmQgdmVjdG9yLlxyXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IC0gVGhlIGRpZmZlcmVuY2UuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5kaWZmZXJlbmNlID0gZnVuY3Rpb24oZmlyc3QsIHNlY29uZCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0eDogZmlyc3QueCAtIHNlY29uZC54LFxyXG5cdFx0XHR5OiBmaXJzdC55IC0gc2Vjb25kLnlcclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGpRdWVyeSBQbHVnaW4gZm9yIHRoZSBPd2wgQ2Fyb3VzZWxcclxuXHQgKiBAdG9kbyBOYXZpZ2F0aW9uIHBsdWdpbiBgbmV4dGAgYW5kIGBwcmV2YFxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHQkLmZuLm93bENhcm91c2VsID0gZnVuY3Rpb24ob3B0aW9uKSB7XHJcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKSxcclxuXHRcdFx0XHRkYXRhID0gJHRoaXMuZGF0YSgnb3dsLmNhcm91c2VsJyk7XHJcblxyXG5cdFx0XHRpZiAoIWRhdGEpIHtcclxuXHRcdFx0XHRkYXRhID0gbmV3IE93bCh0aGlzLCB0eXBlb2Ygb3B0aW9uID09ICdvYmplY3QnICYmIG9wdGlvbik7XHJcblx0XHRcdFx0JHRoaXMuZGF0YSgnb3dsLmNhcm91c2VsJywgZGF0YSk7XHJcblxyXG5cdFx0XHRcdCQuZWFjaChbXHJcblx0XHRcdFx0XHQnbmV4dCcsICdwcmV2JywgJ3RvJywgJ2Rlc3Ryb3knLCAncmVmcmVzaCcsICdyZXBsYWNlJywgJ2FkZCcsICdyZW1vdmUnXHJcblx0XHRcdFx0XSwgZnVuY3Rpb24oaSwgZXZlbnQpIHtcclxuXHRcdFx0XHRcdGRhdGEucmVnaXN0ZXIoeyB0eXBlOiBPd2wuVHlwZS5FdmVudCwgbmFtZTogZXZlbnQgfSk7XHJcblx0XHRcdFx0XHRkYXRhLiRlbGVtZW50Lm9uKGV2ZW50ICsgJy5vd2wuY2Fyb3VzZWwuY29yZScsICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgZS5yZWxhdGVkVGFyZ2V0ICE9PSB0aGlzKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5zdXBwcmVzcyhbIGV2ZW50IF0pO1xyXG5cdFx0XHRcdFx0XHRcdGRhdGFbZXZlbnRdLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5yZWxlYXNlKFsgZXZlbnQgXSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIGRhdGEpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHR5cGVvZiBvcHRpb24gPT0gJ3N0cmluZycgJiYgb3B0aW9uLmNoYXJBdCgwKSAhPT0gJ18nKSB7XHJcblx0XHRcdFx0ZGF0YVtvcHRpb25dLmFwcGx5KGRhdGEsIGFyZ3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgY29uc3RydWN0b3IgZm9yIHRoZSBqUXVlcnkgUGx1Z2luXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IgPSBPd2w7XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogQXV0b1JlZnJlc2ggUGx1Z2luXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgQXJ0dXMgS29sYW5vd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHRoZSBhdXRvIHJlZnJlc2ggcGx1Z2luLlxyXG5cdCAqIEBjbGFzcyBUaGUgQXV0byBSZWZyZXNoIFBsdWdpblxyXG5cdCAqIEBwYXJhbSB7T3dsfSBjYXJvdXNlbCAtIFRoZSBPd2wgQ2Fyb3VzZWxcclxuXHQgKi9cclxuXHR2YXIgQXV0b1JlZnJlc2ggPSBmdW5jdGlvbihjYXJvdXNlbCkge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIGNvcmUuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T3dsfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb3JlID0gY2Fyb3VzZWw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZyZXNoIGludGVydmFsLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge251bWJlcn1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faW50ZXJ2YWwgPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogV2hldGhlciB0aGUgZWxlbWVudCBpcyBjdXJyZW50bHkgdmlzaWJsZSBvciBub3QuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7Qm9vbGVhbn1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fdmlzaWJsZSA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgZXZlbnQgaGFuZGxlcnMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYW5kbGVycyA9IHtcclxuXHRcdFx0J2luaXRpYWxpemVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9SZWZyZXNoKSB7XHJcblx0XHRcdFx0XHR0aGlzLndhdGNoKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBzZXQgZGVmYXVsdCBvcHRpb25zXHJcblx0XHR0aGlzLl9jb3JlLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQXV0b1JlZnJlc2guRGVmYXVsdHMsIHRoaXMuX2NvcmUub3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0QXV0b1JlZnJlc2guRGVmYXVsdHMgPSB7XHJcblx0XHRhdXRvUmVmcmVzaDogdHJ1ZSxcclxuXHRcdGF1dG9SZWZyZXNoSW50ZXJ2YWw6IDUwMFxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFdhdGNoZXMgdGhlIGVsZW1lbnQuXHJcblx0ICovXHJcblx0QXV0b1JlZnJlc2gucHJvdG90eXBlLndhdGNoID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAodGhpcy5faW50ZXJ2YWwpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3Zpc2libGUgPSB0aGlzLl9jb3JlLiRlbGVtZW50LmlzKCc6dmlzaWJsZScpO1xyXG5cdFx0dGhpcy5faW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoJC5wcm94eSh0aGlzLnJlZnJlc2gsIHRoaXMpLCB0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9SZWZyZXNoSW50ZXJ2YWwpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZnJlc2hlcyB0aGUgZWxlbWVudC5cclxuXHQgKi9cclxuXHRBdXRvUmVmcmVzaC5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKHRoaXMuX2NvcmUuJGVsZW1lbnQuaXMoJzp2aXNpYmxlJykgPT09IHRoaXMuX3Zpc2libGUpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3Zpc2libGUgPSAhdGhpcy5fdmlzaWJsZTtcclxuXHJcblx0XHR0aGlzLl9jb3JlLiRlbGVtZW50LnRvZ2dsZUNsYXNzKCdvd2wtaGlkZGVuJywgIXRoaXMuX3Zpc2libGUpO1xyXG5cclxuXHRcdHRoaXMuX3Zpc2libGUgJiYgKHRoaXMuX2NvcmUuaW52YWxpZGF0ZSgnd2lkdGgnKSAmJiB0aGlzLl9jb3JlLnJlZnJlc2goKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIHBsdWdpbi5cclxuXHQgKi9cclxuXHRBdXRvUmVmcmVzaC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhhbmRsZXIsIHByb3BlcnR5O1xyXG5cclxuXHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsKTtcclxuXHJcblx0XHRmb3IgKGhhbmRsZXIgaW4gdGhpcy5faGFuZGxlcnMpIHtcclxuXHRcdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoaGFuZGxlciwgdGhpcy5faGFuZGxlcnNbaGFuZGxlcl0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSkge1xyXG5cdFx0XHR0eXBlb2YgdGhpc1twcm9wZXJ0eV0gIT0gJ2Z1bmN0aW9uJyAmJiAodGhpc1twcm9wZXJ0eV0gPSBudWxsKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuQXV0b1JlZnJlc2ggPSBBdXRvUmVmcmVzaDtcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBMYXp5IFBsdWdpblxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIEJhcnRvc3ogV29qY2llY2hvd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHRoZSBsYXp5IHBsdWdpbi5cclxuXHQgKiBAY2xhc3MgVGhlIExhenkgUGx1Z2luXHJcblx0ICogQHBhcmFtIHtPd2x9IGNhcm91c2VsIC0gVGhlIE93bCBDYXJvdXNlbFxyXG5cdCAqL1xyXG5cdHZhciBMYXp5ID0gZnVuY3Rpb24oY2Fyb3VzZWwpIHtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFJlZmVyZW5jZSB0byB0aGUgY29yZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPd2x9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2NvcmUgPSBjYXJvdXNlbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFscmVhZHkgbG9hZGVkIGl0ZW1zLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge0FycmF5LjxqUXVlcnk+fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9sb2FkZWQgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEV2ZW50IGhhbmRsZXJzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFuZGxlcnMgPSB7XHJcblx0XHRcdCdpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwgY2hhbmdlLm93bC5jYXJvdXNlbCByZXNpemVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmICghZS5uYW1lc3BhY2UpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICghdGhpcy5fY29yZS5zZXR0aW5ncyB8fCAhdGhpcy5fY29yZS5zZXR0aW5ncy5sYXp5TG9hZCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKChlLnByb3BlcnR5ICYmIGUucHJvcGVydHkubmFtZSA9PSAncG9zaXRpb24nKSB8fCBlLnR5cGUgPT0gJ2luaXRpYWxpemVkJykge1xyXG5cdFx0XHRcdFx0dmFyIHNldHRpbmdzID0gdGhpcy5fY29yZS5zZXR0aW5ncyxcclxuXHRcdFx0XHRcdFx0biA9IChzZXR0aW5ncy5jZW50ZXIgJiYgTWF0aC5jZWlsKHNldHRpbmdzLml0ZW1zIC8gMikgfHwgc2V0dGluZ3MuaXRlbXMpLFxyXG5cdFx0XHRcdFx0XHRpID0gKChzZXR0aW5ncy5jZW50ZXIgJiYgbiAqIC0xKSB8fCAwKSxcclxuXHRcdFx0XHRcdFx0cG9zaXRpb24gPSAoZS5wcm9wZXJ0eSAmJiBlLnByb3BlcnR5LnZhbHVlICE9PSB1bmRlZmluZWQgPyBlLnByb3BlcnR5LnZhbHVlIDogdGhpcy5fY29yZS5jdXJyZW50KCkpICsgaSxcclxuXHRcdFx0XHRcdFx0Y2xvbmVzID0gdGhpcy5fY29yZS5jbG9uZXMoKS5sZW5ndGgsXHJcblx0XHRcdFx0XHRcdGxvYWQgPSAkLnByb3h5KGZ1bmN0aW9uKGksIHYpIHsgdGhpcy5sb2FkKHYpIH0sIHRoaXMpO1xyXG5cclxuXHRcdFx0XHRcdHdoaWxlIChpKysgPCBuKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMubG9hZChjbG9uZXMgLyAyICsgdGhpcy5fY29yZS5yZWxhdGl2ZShwb3NpdGlvbikpO1xyXG5cdFx0XHRcdFx0XHRjbG9uZXMgJiYgJC5lYWNoKHRoaXMuX2NvcmUuY2xvbmVzKHRoaXMuX2NvcmUucmVsYXRpdmUocG9zaXRpb24pKSwgbG9hZCk7XHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uKys7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBzZXQgdGhlIGRlZmF1bHQgb3B0aW9uc1xyXG5cdFx0dGhpcy5fY29yZS5vcHRpb25zID0gJC5leHRlbmQoe30sIExhenkuRGVmYXVsdHMsIHRoaXMuX2NvcmUub3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlclxyXG5cdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRMYXp5LkRlZmF1bHRzID0ge1xyXG5cdFx0bGF6eUxvYWQ6IGZhbHNlXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogTG9hZHMgYWxsIHJlc291cmNlcyBvZiBhbiBpdGVtIGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb24uXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIC0gVGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBpdGVtLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRMYXp5LnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdHZhciAkaXRlbSA9IHRoaXMuX2NvcmUuJHN0YWdlLmNoaWxkcmVuKCkuZXEocG9zaXRpb24pLFxyXG5cdFx0XHQkZWxlbWVudHMgPSAkaXRlbSAmJiAkaXRlbS5maW5kKCcub3dsLWxhenknKTtcclxuXHJcblx0XHRpZiAoISRlbGVtZW50cyB8fCAkLmluQXJyYXkoJGl0ZW0uZ2V0KDApLCB0aGlzLl9sb2FkZWQpID4gLTEpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdCRlbGVtZW50cy5lYWNoKCQucHJveHkoZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcclxuXHRcdFx0dmFyICRlbGVtZW50ID0gJChlbGVtZW50KSwgaW1hZ2UsXHJcblx0XHRcdFx0dXJsID0gKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMSAmJiAkZWxlbWVudC5hdHRyKCdkYXRhLXNyYy1yZXRpbmEnKSkgfHwgJGVsZW1lbnQuYXR0cignZGF0YS1zcmMnKTtcclxuXHJcblx0XHRcdHRoaXMuX2NvcmUudHJpZ2dlcignbG9hZCcsIHsgZWxlbWVudDogJGVsZW1lbnQsIHVybDogdXJsIH0sICdsYXp5Jyk7XHJcblxyXG5cdFx0XHRpZiAoJGVsZW1lbnQuaXMoJ2ltZycpKSB7XHJcblx0XHRcdFx0JGVsZW1lbnQub25lKCdsb2FkLm93bC5sYXp5JywgJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCRlbGVtZW50LmNzcygnb3BhY2l0eScsIDEpO1xyXG5cdFx0XHRcdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdsb2FkZWQnLCB7IGVsZW1lbnQ6ICRlbGVtZW50LCB1cmw6IHVybCB9LCAnbGF6eScpO1xyXG5cdFx0XHRcdH0sIHRoaXMpKS5hdHRyKCdzcmMnLCB1cmwpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGltYWdlID0gbmV3IEltYWdlKCk7XHJcblx0XHRcdFx0aW1hZ2Uub25sb2FkID0gJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCRlbGVtZW50LmNzcyh7XHJcblx0XHRcdFx0XHRcdCdiYWNrZ3JvdW5kLWltYWdlJzogJ3VybChcIicgKyB1cmwgKyAnXCIpJyxcclxuXHRcdFx0XHRcdFx0J29wYWNpdHknOiAnMSdcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdsb2FkZWQnLCB7IGVsZW1lbnQ6ICRlbGVtZW50LCB1cmw6IHVybCB9LCAnbGF6eScpO1xyXG5cdFx0XHRcdH0sIHRoaXMpO1xyXG5cdFx0XHRcdGltYWdlLnNyYyA9IHVybDtcclxuXHRcdFx0fVxyXG5cdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdHRoaXMuX2xvYWRlZC5wdXNoKCRpdGVtLmdldCgwKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIHBsdWdpbi5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0TGF6eS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhhbmRsZXIsIHByb3BlcnR5O1xyXG5cclxuXHRcdGZvciAoaGFuZGxlciBpbiB0aGlzLmhhbmRsZXJzKSB7XHJcblx0XHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGhhbmRsZXIsIHRoaXMuaGFuZGxlcnNbaGFuZGxlcl0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSkge1xyXG5cdFx0XHR0eXBlb2YgdGhpc1twcm9wZXJ0eV0gIT0gJ2Z1bmN0aW9uJyAmJiAodGhpc1twcm9wZXJ0eV0gPSBudWxsKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuTGF6eSA9IExhenk7XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogQXV0b0hlaWdodCBQbHVnaW5cclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBCYXJ0b3N6IFdvamNpZWNob3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB0aGUgYXV0byBoZWlnaHQgcGx1Z2luLlxyXG5cdCAqIEBjbGFzcyBUaGUgQXV0byBIZWlnaHQgUGx1Z2luXHJcblx0ICogQHBhcmFtIHtPd2x9IGNhcm91c2VsIC0gVGhlIE93bCBDYXJvdXNlbFxyXG5cdCAqL1xyXG5cdHZhciBBdXRvSGVpZ2h0ID0gZnVuY3Rpb24oY2Fyb3VzZWwpIHtcclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmZXJlbmNlIHRvIHRoZSBjb3JlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge093bH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29yZSA9IGNhcm91c2VsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIGV2ZW50IGhhbmRsZXJzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFuZGxlcnMgPSB7XHJcblx0XHRcdCdpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwgcmVmcmVzaGVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHQpIHtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2NoYW5nZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodCAmJiBlLnByb3BlcnR5Lm5hbWUgPT0gJ3Bvc2l0aW9uJyl7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdsb2FkZWQub3dsLmxhenknOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0XHJcblx0XHRcdFx0XHQmJiBlLmVsZW1lbnQuY2xvc2VzdCgnLicgKyB0aGlzLl9jb3JlLnNldHRpbmdzLml0ZW1DbGFzcykuaW5kZXgoKSA9PT0gdGhpcy5fY29yZS5jdXJyZW50KCkpIHtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBzZXQgZGVmYXVsdCBvcHRpb25zXHJcblx0XHR0aGlzLl9jb3JlLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQXV0b0hlaWdodC5EZWZhdWx0cywgdGhpcy5fY29yZS5vcHRpb25zKTtcclxuXHJcblx0XHQvLyByZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRBdXRvSGVpZ2h0LkRlZmF1bHRzID0ge1xyXG5cdFx0YXV0b0hlaWdodDogZmFsc2UsXHJcblx0XHRhdXRvSGVpZ2h0Q2xhc3M6ICdvd2wtaGVpZ2h0J1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZXMgdGhlIHZpZXcuXHJcblx0ICovXHJcblx0QXV0b0hlaWdodC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc3RhcnQgPSB0aGlzLl9jb3JlLl9jdXJyZW50LFxyXG5cdFx0XHRlbmQgPSBzdGFydCArIHRoaXMuX2NvcmUuc2V0dGluZ3MuaXRlbXMsXHJcblx0XHRcdHZpc2libGUgPSB0aGlzLl9jb3JlLiRzdGFnZS5jaGlsZHJlbigpLnRvQXJyYXkoKS5zbGljZShzdGFydCwgZW5kKSxcclxuXHRcdFx0aGVpZ2h0cyA9IFtdLFxyXG5cdFx0XHRtYXhoZWlnaHQgPSAwO1xyXG5cclxuXHRcdCQuZWFjaCh2aXNpYmxlLCBmdW5jdGlvbihpbmRleCwgaXRlbSkge1xyXG5cdFx0XHRoZWlnaHRzLnB1c2goJChpdGVtKS5oZWlnaHQoKSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRtYXhoZWlnaHQgPSBNYXRoLm1heC5hcHBseShudWxsLCBoZWlnaHRzKTtcclxuXHJcblx0XHR0aGlzLl9jb3JlLiRzdGFnZS5wYXJlbnQoKVxyXG5cdFx0XHQuaGVpZ2h0KG1heGhlaWdodClcclxuXHRcdFx0LmFkZENsYXNzKHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodENsYXNzKTtcclxuXHR9O1xyXG5cclxuXHRBdXRvSGVpZ2h0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGFuZGxlciwgcHJvcGVydHk7XHJcblxyXG5cdFx0Zm9yIChoYW5kbGVyIGluIHRoaXMuX2hhbmRsZXJzKSB7XHJcblx0XHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGhhbmRsZXIsIHRoaXMuX2hhbmRsZXJzW2hhbmRsZXJdKTtcclxuXHRcdH1cclxuXHRcdGZvciAocHJvcGVydHkgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcclxuXHRcdFx0dHlwZW9mIHRoaXNbcHJvcGVydHldICE9ICdmdW5jdGlvbicgJiYgKHRoaXNbcHJvcGVydHldID0gbnVsbCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkF1dG9IZWlnaHQgPSBBdXRvSGVpZ2h0O1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIFZpZGVvIFBsdWdpblxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIEJhcnRvc3ogV29qY2llY2hvd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHRoZSB2aWRlbyBwbHVnaW4uXHJcblx0ICogQGNsYXNzIFRoZSBWaWRlbyBQbHVnaW5cclxuXHQgKiBAcGFyYW0ge093bH0gY2Fyb3VzZWwgLSBUaGUgT3dsIENhcm91c2VsXHJcblx0ICovXHJcblx0dmFyIFZpZGVvID0gZnVuY3Rpb24oY2Fyb3VzZWwpIHtcclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmZXJlbmNlIHRvIHRoZSBjb3JlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge093bH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29yZSA9IGNhcm91c2VsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ2FjaGUgYWxsIHZpZGVvIFVSTHMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl92aWRlb3MgPSB7fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEN1cnJlbnQgcGxheWluZyBpdGVtLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge2pRdWVyeX1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fcGxheWluZyA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgZXZlbnQgaGFuZGxlcnMuXHJcblx0XHQgKiBAdG9kbyBUaGUgY2xvbmVkIGNvbnRlbnQgcmVtb3ZhbGUgaXMgdG9vIGxhdGVcclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhbmRsZXJzID0ge1xyXG5cdFx0XHQnaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9jb3JlLnJlZ2lzdGVyKHsgdHlwZTogJ3N0YXRlJywgbmFtZTogJ3BsYXlpbmcnLCB0YWdzOiBbICdpbnRlcmFjdGluZycgXSB9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQncmVzaXplLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvICYmIHRoaXMuaXNJbkZ1bGxTY3JlZW4oKSkge1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdyZWZyZXNoZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuaXMoJ3Jlc2l6aW5nJykpIHtcclxuXHRcdFx0XHRcdHRoaXMuX2NvcmUuJHN0YWdlLmZpbmQoJy5jbG9uZWQgLm93bC12aWRlby1mcmFtZScpLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdjaGFuZ2VkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiBlLnByb3BlcnR5Lm5hbWUgPT09ICdwb3NpdGlvbicgJiYgdGhpcy5fcGxheWluZykge1xyXG5cdFx0XHRcdFx0dGhpcy5zdG9wKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3ByZXBhcmVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmICghZS5uYW1lc3BhY2UpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciAkZWxlbWVudCA9ICQoZS5jb250ZW50KS5maW5kKCcub3dsLXZpZGVvJyk7XHJcblxyXG5cdFx0XHRcdGlmICgkZWxlbWVudC5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdCRlbGVtZW50LmNzcygnZGlzcGxheScsICdub25lJyk7XHJcblx0XHRcdFx0XHR0aGlzLmZldGNoKCRlbGVtZW50LCAkKGUuY29udGVudCkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcylcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gc2V0IGRlZmF1bHQgb3B0aW9uc1xyXG5cdFx0dGhpcy5fY29yZS5vcHRpb25zID0gJC5leHRlbmQoe30sIFZpZGVvLkRlZmF1bHRzLCB0aGlzLl9jb3JlLm9wdGlvbnMpO1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKTtcclxuXHJcblx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKCdjbGljay5vd2wudmlkZW8nLCAnLm93bC12aWRlby1wbGF5LWljb24nLCAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0dGhpcy5wbGF5KGUpO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0VmlkZW8uRGVmYXVsdHMgPSB7XHJcblx0XHR2aWRlbzogZmFsc2UsXHJcblx0XHR2aWRlb0hlaWdodDogZmFsc2UsXHJcblx0XHR2aWRlb1dpZHRoOiBmYWxzZVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIHZpZGVvIElEIGFuZCB0aGUgdHlwZSAoWW91VHViZS9WaW1lby92emFhciBvbmx5KS5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtqUXVlcnl9IHRhcmdldCAtIFRoZSB0YXJnZXQgY29udGFpbmluZyB0aGUgdmlkZW8gZGF0YS5cclxuXHQgKiBAcGFyYW0ge2pRdWVyeX0gaXRlbSAtIFRoZSBpdGVtIGNvbnRhaW5pbmcgdGhlIHZpZGVvLlxyXG5cdCAqL1xyXG5cdFZpZGVvLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKHRhcmdldCwgaXRlbSkge1xyXG5cdFx0XHR2YXIgdHlwZSA9IChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGlmICh0YXJnZXQuYXR0cignZGF0YS12aW1lby1pZCcpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAndmltZW8nO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0YXJnZXQuYXR0cignZGF0YS12emFhci1pZCcpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAndnphYXInXHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gJ3lvdXR1YmUnO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pKCksXHJcblx0XHRcdFx0aWQgPSB0YXJnZXQuYXR0cignZGF0YS12aW1lby1pZCcpIHx8IHRhcmdldC5hdHRyKCdkYXRhLXlvdXR1YmUtaWQnKSB8fCB0YXJnZXQuYXR0cignZGF0YS12emFhci1pZCcpLFxyXG5cdFx0XHRcdHdpZHRoID0gdGFyZ2V0LmF0dHIoJ2RhdGEtd2lkdGgnKSB8fCB0aGlzLl9jb3JlLnNldHRpbmdzLnZpZGVvV2lkdGgsXHJcblx0XHRcdFx0aGVpZ2h0ID0gdGFyZ2V0LmF0dHIoJ2RhdGEtaGVpZ2h0JykgfHwgdGhpcy5fY29yZS5zZXR0aW5ncy52aWRlb0hlaWdodCxcclxuXHRcdFx0XHR1cmwgPSB0YXJnZXQuYXR0cignaHJlZicpO1xyXG5cclxuXHRcdGlmICh1cmwpIHtcclxuXHJcblx0XHRcdC8qXHJcblx0XHRcdFx0XHRQYXJzZXMgdGhlIGlkJ3Mgb3V0IG9mIHRoZSBmb2xsb3dpbmcgdXJscyAoYW5kIHByb2JhYmx5IG1vcmUpOlxyXG5cdFx0XHRcdFx0aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj06aWRcclxuXHRcdFx0XHRcdGh0dHBzOi8veW91dHUuYmUvOmlkXHJcblx0XHRcdFx0XHRodHRwczovL3ZpbWVvLmNvbS86aWRcclxuXHRcdFx0XHRcdGh0dHBzOi8vdmltZW8uY29tL2NoYW5uZWxzLzpjaGFubmVsLzppZFxyXG5cdFx0XHRcdFx0aHR0cHM6Ly92aW1lby5jb20vZ3JvdXBzLzpncm91cC92aWRlb3MvOmlkXHJcblx0XHRcdFx0XHRodHRwczovL2FwcC52emFhci5jb20vdmlkZW9zLzppZFxyXG5cclxuXHRcdFx0XHRcdFZpc3VhbCBleGFtcGxlOiBodHRwczovL3JlZ2V4cGVyLmNvbS8jKGh0dHAlM0ElN0NodHRwcyUzQSU3QyklNUMlMkYlNUMlMkYocGxheWVyLiU3Q3d3dy4lN0NhcHAuKSUzRih2aW1lbyU1Qy5jb20lN0N5b3V0dShiZSU1Qy5jb20lN0MlNUMuYmUlN0NiZSU1Qy5nb29nbGVhcGlzJTVDLmNvbSklN0N2emFhciU1Qy5jb20pJTVDJTJGKHZpZGVvJTVDJTJGJTdDdmlkZW9zJTVDJTJGJTdDZW1iZWQlNUMlMkYlN0NjaGFubmVscyU1QyUyRi4lMkIlNUMlMkYlN0Nncm91cHMlNUMlMkYuJTJCJTVDJTJGJTdDd2F0Y2glNUMlM0Z2JTNEJTdDdiU1QyUyRiklM0YoJTVCQS1aYS16MC05Ll8lMjUtJTVEKikoJTVDJTI2JTVDUyUyQiklM0ZcclxuXHRcdFx0Ki9cclxuXHJcblx0XHRcdGlkID0gdXJsLm1hdGNoKC8oaHR0cDp8aHR0cHM6fClcXC9cXC8ocGxheWVyLnx3d3cufGFwcC4pPyh2aW1lb1xcLmNvbXx5b3V0dShiZVxcLmNvbXxcXC5iZXxiZVxcLmdvb2dsZWFwaXNcXC5jb20pfHZ6YWFyXFwuY29tKVxcLyh2aWRlb1xcL3x2aWRlb3NcXC98ZW1iZWRcXC98Y2hhbm5lbHNcXC8uK1xcL3xncm91cHNcXC8uK1xcL3x3YXRjaFxcP3Y9fHZcXC8pPyhbQS1aYS16MC05Ll8lLV0qKShcXCZcXFMrKT8vKTtcclxuXHJcblx0XHRcdGlmIChpZFszXS5pbmRleE9mKCd5b3V0dScpID4gLTEpIHtcclxuXHRcdFx0XHR0eXBlID0gJ3lvdXR1YmUnO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGlkWzNdLmluZGV4T2YoJ3ZpbWVvJykgPiAtMSkge1xyXG5cdFx0XHRcdHR5cGUgPSAndmltZW8nO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGlkWzNdLmluZGV4T2YoJ3Z6YWFyJykgPiAtMSkge1xyXG5cdFx0XHRcdHR5cGUgPSAndnphYXInO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignVmlkZW8gVVJMIG5vdCBzdXBwb3J0ZWQuJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWQgPSBpZFs2XTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRocm93IG5ldyBFcnJvcignTWlzc2luZyB2aWRlbyBVUkwuJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdmlkZW9zW3VybF0gPSB7XHJcblx0XHRcdHR5cGU6IHR5cGUsXHJcblx0XHRcdGlkOiBpZCxcclxuXHRcdFx0d2lkdGg6IHdpZHRoLFxyXG5cdFx0XHRoZWlnaHQ6IGhlaWdodFxyXG5cdFx0fTtcclxuXHJcblx0XHRpdGVtLmF0dHIoJ2RhdGEtdmlkZW8nLCB1cmwpO1xyXG5cclxuXHRcdHRoaXMudGh1bWJuYWlsKHRhcmdldCwgdGhpcy5fdmlkZW9zW3VybF0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdmlkZW8gdGh1bWJuYWlsLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge2pRdWVyeX0gdGFyZ2V0IC0gVGhlIHRhcmdldCBjb250YWluaW5nIHRoZSB2aWRlbyBkYXRhLlxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBpbmZvIC0gVGhlIHZpZGVvIGluZm8gb2JqZWN0LlxyXG5cdCAqIEBzZWUgYGZldGNoYFxyXG5cdCAqL1xyXG5cdFZpZGVvLnByb3RvdHlwZS50aHVtYm5haWwgPSBmdW5jdGlvbih0YXJnZXQsIHZpZGVvKSB7XHJcblx0XHR2YXIgdG5MaW5rLFxyXG5cdFx0XHRpY29uLFxyXG5cdFx0XHRwYXRoLFxyXG5cdFx0XHRkaW1lbnNpb25zID0gdmlkZW8ud2lkdGggJiYgdmlkZW8uaGVpZ2h0ID8gJ3N0eWxlPVwid2lkdGg6JyArIHZpZGVvLndpZHRoICsgJ3B4O2hlaWdodDonICsgdmlkZW8uaGVpZ2h0ICsgJ3B4O1wiJyA6ICcnLFxyXG5cdFx0XHRjdXN0b21UbiA9IHRhcmdldC5maW5kKCdpbWcnKSxcclxuXHRcdFx0c3JjVHlwZSA9ICdzcmMnLFxyXG5cdFx0XHRsYXp5Q2xhc3MgPSAnJyxcclxuXHRcdFx0c2V0dGluZ3MgPSB0aGlzLl9jb3JlLnNldHRpbmdzLFxyXG5cdFx0XHRjcmVhdGUgPSBmdW5jdGlvbihwYXRoKSB7XHJcblx0XHRcdFx0aWNvbiA9ICc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXBsYXktaWNvblwiPjwvZGl2Pic7XHJcblxyXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5sYXp5TG9hZCkge1xyXG5cdFx0XHRcdFx0dG5MaW5rID0gJzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tdG4gJyArIGxhenlDbGFzcyArICdcIiAnICsgc3JjVHlwZSArICc9XCInICsgcGF0aCArICdcIj48L2Rpdj4nO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0bkxpbmsgPSAnPGRpdiBjbGFzcz1cIm93bC12aWRlby10blwiIHN0eWxlPVwib3BhY2l0eToxO2JhY2tncm91bmQtaW1hZ2U6dXJsKCcgKyBwYXRoICsgJylcIj48L2Rpdj4nO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0YXJnZXQuYWZ0ZXIodG5MaW5rKTtcclxuXHRcdFx0XHR0YXJnZXQuYWZ0ZXIoaWNvbik7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0Ly8gd3JhcCB2aWRlbyBjb250ZW50IGludG8gb3dsLXZpZGVvLXdyYXBwZXIgZGl2XHJcblx0XHR0YXJnZXQud3JhcCgnPGRpdiBjbGFzcz1cIm93bC12aWRlby13cmFwcGVyXCInICsgZGltZW5zaW9ucyArICc+PC9kaXY+Jyk7XHJcblxyXG5cdFx0aWYgKHRoaXMuX2NvcmUuc2V0dGluZ3MubGF6eUxvYWQpIHtcclxuXHRcdFx0c3JjVHlwZSA9ICdkYXRhLXNyYyc7XHJcblx0XHRcdGxhenlDbGFzcyA9ICdvd2wtbGF6eSc7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY3VzdG9tIHRodW1ibmFpbFxyXG5cdFx0aWYgKGN1c3RvbVRuLmxlbmd0aCkge1xyXG5cdFx0XHRjcmVhdGUoY3VzdG9tVG4uYXR0cihzcmNUeXBlKSk7XHJcblx0XHRcdGN1c3RvbVRuLnJlbW92ZSgpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHZpZGVvLnR5cGUgPT09ICd5b3V0dWJlJykge1xyXG5cdFx0XHRwYXRoID0gXCIvL2ltZy55b3V0dWJlLmNvbS92aS9cIiArIHZpZGVvLmlkICsgXCIvaHFkZWZhdWx0LmpwZ1wiO1xyXG5cdFx0XHRjcmVhdGUocGF0aCk7XHJcblx0XHR9IGVsc2UgaWYgKHZpZGVvLnR5cGUgPT09ICd2aW1lbycpIHtcclxuXHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR0eXBlOiAnR0VUJyxcclxuXHRcdFx0XHR1cmw6ICcvL3ZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vJyArIHZpZGVvLmlkICsgJy5qc29uJyxcclxuXHRcdFx0XHRqc29ucDogJ2NhbGxiYWNrJyxcclxuXHRcdFx0XHRkYXRhVHlwZTogJ2pzb25wJyxcclxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcblx0XHRcdFx0XHRwYXRoID0gZGF0YVswXS50aHVtYm5haWxfbGFyZ2U7XHJcblx0XHRcdFx0XHRjcmVhdGUocGF0aCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSBpZiAodmlkZW8udHlwZSA9PT0gJ3Z6YWFyJykge1xyXG5cdFx0XHQkLmFqYXgoe1xyXG5cdFx0XHRcdHR5cGU6ICdHRVQnLFxyXG5cdFx0XHRcdHVybDogJy8vdnphYXIuY29tL2FwaS92aWRlb3MvJyArIHZpZGVvLmlkICsgJy5qc29uJyxcclxuXHRcdFx0XHRqc29ucDogJ2NhbGxiYWNrJyxcclxuXHRcdFx0XHRkYXRhVHlwZTogJ2pzb25wJyxcclxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcblx0XHRcdFx0XHRwYXRoID0gZGF0YS5mcmFtZWdyYWJfdXJsO1xyXG5cdFx0XHRcdFx0Y3JlYXRlKHBhdGgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU3RvcHMgdGhlIGN1cnJlbnQgdmlkZW8uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdFZpZGVvLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ3N0b3AnLCBudWxsLCAndmlkZW8nKTtcclxuXHRcdHRoaXMuX3BsYXlpbmcuZmluZCgnLm93bC12aWRlby1mcmFtZScpLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5fcGxheWluZy5yZW1vdmVDbGFzcygnb3dsLXZpZGVvLXBsYXlpbmcnKTtcclxuXHRcdHRoaXMuX3BsYXlpbmcgPSBudWxsO1xyXG5cdFx0dGhpcy5fY29yZS5sZWF2ZSgncGxheWluZycpO1xyXG5cdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdzdG9wcGVkJywgbnVsbCwgJ3ZpZGVvJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU3RhcnRzIHRoZSBjdXJyZW50IHZpZGVvLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIFRoZSBldmVudCBhcmd1bWVudHMuXHJcblx0ICovXHJcblx0VmlkZW8ucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0dmFyIHRhcmdldCA9ICQoZXZlbnQudGFyZ2V0KSxcclxuXHRcdFx0aXRlbSA9IHRhcmdldC5jbG9zZXN0KCcuJyArIHRoaXMuX2NvcmUuc2V0dGluZ3MuaXRlbUNsYXNzKSxcclxuXHRcdFx0dmlkZW8gPSB0aGlzLl92aWRlb3NbaXRlbS5hdHRyKCdkYXRhLXZpZGVvJyldLFxyXG5cdFx0XHR3aWR0aCA9IHZpZGVvLndpZHRoIHx8ICcxMDAlJyxcclxuXHRcdFx0aGVpZ2h0ID0gdmlkZW8uaGVpZ2h0IHx8IHRoaXMuX2NvcmUuJHN0YWdlLmhlaWdodCgpLFxyXG5cdFx0XHRodG1sO1xyXG5cclxuXHRcdGlmICh0aGlzLl9wbGF5aW5nKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9jb3JlLmVudGVyKCdwbGF5aW5nJyk7XHJcblx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ3BsYXknLCBudWxsLCAndmlkZW8nKTtcclxuXHJcblx0XHRpdGVtID0gdGhpcy5fY29yZS5pdGVtcyh0aGlzLl9jb3JlLnJlbGF0aXZlKGl0ZW0uaW5kZXgoKSkpO1xyXG5cclxuXHRcdHRoaXMuX2NvcmUucmVzZXQoaXRlbS5pbmRleCgpKTtcclxuXHJcblx0XHRpZiAodmlkZW8udHlwZSA9PT0gJ3lvdXR1YmUnKSB7XHJcblx0XHRcdGh0bWwgPSAnPGlmcmFtZSB3aWR0aD1cIicgKyB3aWR0aCArICdcIiBoZWlnaHQ9XCInICsgaGVpZ2h0ICsgJ1wiIHNyYz1cIi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLycgK1xyXG5cdFx0XHRcdHZpZGVvLmlkICsgJz9hdXRvcGxheT0xJnJlbD0wJnY9JyArIHZpZGVvLmlkICsgJ1wiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nO1xyXG5cdFx0fSBlbHNlIGlmICh2aWRlby50eXBlID09PSAndmltZW8nKSB7XHJcblx0XHRcdGh0bWwgPSAnPGlmcmFtZSBzcmM9XCIvL3BsYXllci52aW1lby5jb20vdmlkZW8vJyArIHZpZGVvLmlkICtcclxuXHRcdFx0XHQnP2F1dG9wbGF5PTFcIiB3aWR0aD1cIicgKyB3aWR0aCArICdcIiBoZWlnaHQ9XCInICsgaGVpZ2h0ICtcclxuXHRcdFx0XHQnXCIgZnJhbWVib3JkZXI9XCIwXCIgd2Via2l0YWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JztcclxuXHRcdH0gZWxzZSBpZiAodmlkZW8udHlwZSA9PT0gJ3Z6YWFyJykge1xyXG5cdFx0XHRodG1sID0gJzxpZnJhbWUgZnJhbWVib3JkZXI9XCIwXCInICsgJ2hlaWdodD1cIicgKyBoZWlnaHQgKyAnXCInICsgJ3dpZHRoPVwiJyArIHdpZHRoICtcclxuXHRcdFx0XHQnXCIgYWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiB3ZWJraXRBbGxvd0Z1bGxTY3JlZW4gJyArXHJcblx0XHRcdFx0J3NyYz1cIi8vdmlldy52emFhci5jb20vJyArIHZpZGVvLmlkICsgJy9wbGF5ZXI/YXV0b3BsYXk9dHJ1ZVwiPjwvaWZyYW1lPic7XHJcblx0XHR9XHJcblxyXG5cdFx0JCgnPGRpdiBjbGFzcz1cIm93bC12aWRlby1mcmFtZVwiPicgKyBodG1sICsgJzwvZGl2PicpLmluc2VydEFmdGVyKGl0ZW0uZmluZCgnLm93bC12aWRlbycpKTtcclxuXHJcblx0XHR0aGlzLl9wbGF5aW5nID0gaXRlbS5hZGRDbGFzcygnb3dsLXZpZGVvLXBsYXlpbmcnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBDaGVja3Mgd2hldGhlciBhbiB2aWRlbyBpcyBjdXJyZW50bHkgaW4gZnVsbCBzY3JlZW4gbW9kZSBvciBub3QuXHJcblx0ICogQHRvZG8gQmFkIHN0eWxlIGJlY2F1c2UgbG9va3MgbGlrZSBhIHJlYWRvbmx5IG1ldGhvZCBidXQgY2hhbmdlcyBtZW1iZXJzLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcmV0dXJucyB7Qm9vbGVhbn1cclxuXHQgKi9cclxuXHRWaWRlby5wcm90b3R5cGUuaXNJbkZ1bGxTY3JlZW4gPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHxcclxuXHRcdFx0XHRkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudDtcclxuXHJcblx0XHRyZXR1cm4gZWxlbWVudCAmJiAkKGVsZW1lbnQpLnBhcmVudCgpLmhhc0NsYXNzKCdvd2wtdmlkZW8tZnJhbWUnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgcGx1Z2luLlxyXG5cdCAqL1xyXG5cdFZpZGVvLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGFuZGxlciwgcHJvcGVydHk7XHJcblxyXG5cdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoJ2NsaWNrLm93bC52aWRlbycpO1xyXG5cclxuXHRcdGZvciAoaGFuZGxlciBpbiB0aGlzLl9oYW5kbGVycykge1xyXG5cdFx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihoYW5kbGVyLCB0aGlzLl9oYW5kbGVyc1toYW5kbGVyXSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKHByb3BlcnR5IGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XHJcblx0XHRcdHR5cGVvZiB0aGlzW3Byb3BlcnR5XSAhPSAnZnVuY3Rpb24nICYmICh0aGlzW3Byb3BlcnR5XSA9IG51bGwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5WaWRlbyA9IFZpZGVvO1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIEFuaW1hdGUgUGx1Z2luXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgQmFydG9zeiBXb2pjaWVjaG93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdGhlIGFuaW1hdGUgcGx1Z2luLlxyXG5cdCAqIEBjbGFzcyBUaGUgTmF2aWdhdGlvbiBQbHVnaW5cclxuXHQgKiBAcGFyYW0ge093bH0gc2NvcGUgLSBUaGUgT3dsIENhcm91c2VsXHJcblx0ICovXHJcblx0dmFyIEFuaW1hdGUgPSBmdW5jdGlvbihzY29wZSkge1xyXG5cdFx0dGhpcy5jb3JlID0gc2NvcGU7XHJcblx0XHR0aGlzLmNvcmUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBBbmltYXRlLkRlZmF1bHRzLCB0aGlzLmNvcmUub3B0aW9ucyk7XHJcblx0XHR0aGlzLnN3YXBwaW5nID0gdHJ1ZTtcclxuXHRcdHRoaXMucHJldmlvdXMgPSB1bmRlZmluZWQ7XHJcblx0XHR0aGlzLm5leHQgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGVycyA9IHtcclxuXHRcdFx0J2NoYW5nZS5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgZS5wcm9wZXJ0eS5uYW1lID09ICdwb3NpdGlvbicpIHtcclxuXHRcdFx0XHRcdHRoaXMucHJldmlvdXMgPSB0aGlzLmNvcmUuY3VycmVudCgpO1xyXG5cdFx0XHRcdFx0dGhpcy5uZXh0ID0gZS5wcm9wZXJ0eS52YWx1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnZHJhZy5vd2wuY2Fyb3VzZWwgZHJhZ2dlZC5vd2wuY2Fyb3VzZWwgdHJhbnNsYXRlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UpIHtcclxuXHRcdFx0XHRcdHRoaXMuc3dhcHBpbmcgPSBlLnR5cGUgPT0gJ3RyYW5zbGF0ZWQnO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCd0cmFuc2xhdGUub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuc3dhcHBpbmcgJiYgKHRoaXMuY29yZS5vcHRpb25zLmFuaW1hdGVPdXQgfHwgdGhpcy5jb3JlLm9wdGlvbnMuYW5pbWF0ZUluKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5zd2FwKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKVxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmNvcmUuJGVsZW1lbnQub24odGhpcy5oYW5kbGVycyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRBbmltYXRlLkRlZmF1bHRzID0ge1xyXG5cdFx0YW5pbWF0ZU91dDogZmFsc2UsXHJcblx0XHRhbmltYXRlSW46IGZhbHNlXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogVG9nZ2xlcyB0aGUgYW5pbWF0aW9uIGNsYXNzZXMgd2hlbmV2ZXIgYW4gdHJhbnNsYXRpb25zIHN0YXJ0cy5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHJldHVybnMge0Jvb2xlYW58dW5kZWZpbmVkfVxyXG5cdCAqL1xyXG5cdEFuaW1hdGUucHJvdG90eXBlLnN3YXAgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRpZiAodGhpcy5jb3JlLnNldHRpbmdzLml0ZW1zICE9PSAxKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoISQuc3VwcG9ydC5hbmltYXRpb24gfHwgISQuc3VwcG9ydC50cmFuc2l0aW9uKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmNvcmUuc3BlZWQoMCk7XHJcblxyXG5cdFx0dmFyIGxlZnQsXHJcblx0XHRcdGNsZWFyID0gJC5wcm94eSh0aGlzLmNsZWFyLCB0aGlzKSxcclxuXHRcdFx0cHJldmlvdXMgPSB0aGlzLmNvcmUuJHN0YWdlLmNoaWxkcmVuKCkuZXEodGhpcy5wcmV2aW91cyksXHJcblx0XHRcdG5leHQgPSB0aGlzLmNvcmUuJHN0YWdlLmNoaWxkcmVuKCkuZXEodGhpcy5uZXh0KSxcclxuXHRcdFx0aW5jb21pbmcgPSB0aGlzLmNvcmUuc2V0dGluZ3MuYW5pbWF0ZUluLFxyXG5cdFx0XHRvdXRnb2luZyA9IHRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlT3V0O1xyXG5cclxuXHRcdGlmICh0aGlzLmNvcmUuY3VycmVudCgpID09PSB0aGlzLnByZXZpb3VzKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAob3V0Z29pbmcpIHtcclxuXHRcdFx0bGVmdCA9IHRoaXMuY29yZS5jb29yZGluYXRlcyh0aGlzLnByZXZpb3VzKSAtIHRoaXMuY29yZS5jb29yZGluYXRlcyh0aGlzLm5leHQpO1xyXG5cdFx0XHRwcmV2aW91cy5vbmUoJC5zdXBwb3J0LmFuaW1hdGlvbi5lbmQsIGNsZWFyKVxyXG5cdFx0XHRcdC5jc3MoIHsgJ2xlZnQnOiBsZWZ0ICsgJ3B4JyB9IClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoJ2FuaW1hdGVkIG93bC1hbmltYXRlZC1vdXQnKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyhvdXRnb2luZyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGluY29taW5nKSB7XHJcblx0XHRcdG5leHQub25lKCQuc3VwcG9ydC5hbmltYXRpb24uZW5kLCBjbGVhcilcclxuXHRcdFx0XHQuYWRkQ2xhc3MoJ2FuaW1hdGVkIG93bC1hbmltYXRlZC1pbicpXHJcblx0XHRcdFx0LmFkZENsYXNzKGluY29taW5nKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRBbmltYXRlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdCQoZS50YXJnZXQpLmNzcyggeyAnbGVmdCc6ICcnIH0gKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIG93bC1hbmltYXRlZC1vdXQgb3dsLWFuaW1hdGVkLWluJylcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMuY29yZS5zZXR0aW5ncy5hbmltYXRlSW4pXHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLmNvcmUuc2V0dGluZ3MuYW5pbWF0ZU91dCk7XHJcblx0XHR0aGlzLmNvcmUub25UcmFuc2l0aW9uRW5kKCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIHBsdWdpbi5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0QW5pbWF0ZS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhhbmRsZXIsIHByb3BlcnR5O1xyXG5cclxuXHRcdGZvciAoaGFuZGxlciBpbiB0aGlzLmhhbmRsZXJzKSB7XHJcblx0XHRcdHRoaXMuY29yZS4kZWxlbWVudC5vZmYoaGFuZGxlciwgdGhpcy5oYW5kbGVyc1toYW5kbGVyXSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKHByb3BlcnR5IGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XHJcblx0XHRcdHR5cGVvZiB0aGlzW3Byb3BlcnR5XSAhPSAnZnVuY3Rpb24nICYmICh0aGlzW3Byb3BlcnR5XSA9IG51bGwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5BbmltYXRlID0gQW5pbWF0ZTtcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBBdXRvcGxheSBQbHVnaW5cclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBCYXJ0b3N6IFdvamNpZWNob3dza2lcclxuICogQGF1dGhvciBBcnR1cyBLb2xhbm93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdGhlIGF1dG9wbGF5IHBsdWdpbi5cclxuXHQgKiBAY2xhc3MgVGhlIEF1dG9wbGF5IFBsdWdpblxyXG5cdCAqIEBwYXJhbSB7T3dsfSBzY29wZSAtIFRoZSBPd2wgQ2Fyb3VzZWxcclxuXHQgKi9cclxuXHR2YXIgQXV0b3BsYXkgPSBmdW5jdGlvbihjYXJvdXNlbCkge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIGNvcmUuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T3dsfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb3JlID0gY2Fyb3VzZWw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBUaGUgYXV0b3BsYXkgdGltZW91dC5cclxuXHRcdCAqIEB0eXBlIHtUaW1lb3V0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl90aW1lb3V0ID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEluZGljYXRlcyB3aGVuZXZlciB0aGUgYXV0b3BsYXkgaXMgcGF1c2VkLlxyXG5cdFx0ICogQHR5cGUge0Jvb2xlYW59XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIGV2ZW50IGhhbmRsZXJzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFuZGxlcnMgPSB7XHJcblx0XHRcdCdjaGFuZ2VkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiBlLnByb3BlcnR5Lm5hbWUgPT09ICdzZXR0aW5ncycpIHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5KSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGxheSgpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5zdG9wKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIGlmIChlLm5hbWVzcGFjZSAmJiBlLnByb3BlcnR5Lm5hbWUgPT09ICdwb3NpdGlvbicpIHtcclxuXHRcdFx0XHRcdC8vY29uc29sZS5sb2coJ3BsYXk/JywgZSk7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheSkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLl9zZXRBdXRvUGxheUludGVydmFsKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2luaXRpYWxpemVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5KSB7XHJcblx0XHRcdFx0XHR0aGlzLnBsYXkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQncGxheS5vd2wuYXV0b3BsYXknOiAkLnByb3h5KGZ1bmN0aW9uKGUsIHQsIHMpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UpIHtcclxuXHRcdFx0XHRcdHRoaXMucGxheSh0LCBzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnc3RvcC5vd2wuYXV0b3BsYXknOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UpIHtcclxuXHRcdFx0XHRcdHRoaXMuc3RvcCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdtb3VzZW92ZXIub3dsLmF1dG9wbGF5JzogJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAodGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheUhvdmVyUGF1c2UgJiYgdGhpcy5fY29yZS5pcygncm90YXRpbmcnKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5wYXVzZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdtb3VzZWxlYXZlLm93bC5hdXRvcGxheSc6ICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlIb3ZlclBhdXNlICYmIHRoaXMuX2NvcmUuaXMoJ3JvdGF0aW5nJykpIHtcclxuXHRcdFx0XHRcdHRoaXMucGxheSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCd0b3VjaHN0YXJ0Lm93bC5jb3JlJzogJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAodGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheUhvdmVyUGF1c2UgJiYgdGhpcy5fY29yZS5pcygncm90YXRpbmcnKSkge1xyXG5cdFx0XHRcdFx0dGhpcy5wYXVzZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCd0b3VjaGVuZC5vd2wuY29yZSc6ICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlIb3ZlclBhdXNlKSB7XHJcblx0XHRcdFx0XHR0aGlzLnBsYXkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKTtcclxuXHJcblx0XHQvLyBzZXQgZGVmYXVsdCBvcHRpb25zXHJcblx0XHR0aGlzLl9jb3JlLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQXV0b3BsYXkuRGVmYXVsdHMsIHRoaXMuX2NvcmUub3B0aW9ucyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRBdXRvcGxheS5EZWZhdWx0cyA9IHtcclxuXHRcdGF1dG9wbGF5OiBmYWxzZSxcclxuXHRcdGF1dG9wbGF5VGltZW91dDogNTAwMCxcclxuXHRcdGF1dG9wbGF5SG92ZXJQYXVzZTogZmFsc2UsXHJcblx0XHRhdXRvcGxheVNwZWVkOiBmYWxzZVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFN0YXJ0cyB0aGUgYXV0b3BsYXkuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbdGltZW91dF0gLSBUaGUgaW50ZXJ2YWwgYmVmb3JlIHRoZSBuZXh0IGFuaW1hdGlvbiBzdGFydHMuXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZF0gLSBUaGUgYW5pbWF0aW9uIHNwZWVkIGZvciB0aGUgYW5pbWF0aW9ucy5cclxuXHQgKi9cclxuXHRBdXRvcGxheS5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKHRpbWVvdXQsIHNwZWVkKSB7XHJcblx0XHR0aGlzLl9wYXVzZWQgPSBmYWxzZTtcclxuXHJcblx0XHRpZiAodGhpcy5fY29yZS5pcygncm90YXRpbmcnKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY29yZS5lbnRlcigncm90YXRpbmcnKTtcclxuXHJcblx0XHR0aGlzLl9zZXRBdXRvUGxheUludGVydmFsKCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyBhIG5ldyB0aW1lb3V0XHJcblx0ICogQHByaXZhdGVcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3RpbWVvdXRdIC0gVGhlIGludGVydmFsIGJlZm9yZSB0aGUgbmV4dCBhbmltYXRpb24gc3RhcnRzLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWRdIC0gVGhlIGFuaW1hdGlvbiBzcGVlZCBmb3IgdGhlIGFuaW1hdGlvbnMuXHJcblx0ICogQHJldHVybiB7VGltZW91dH1cclxuXHQgKi9cclxuXHRBdXRvcGxheS5wcm90b3R5cGUuX2dldE5leHRUaW1lb3V0ID0gZnVuY3Rpb24odGltZW91dCwgc3BlZWQpIHtcclxuXHRcdGlmICggdGhpcy5fdGltZW91dCApIHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB3aW5kb3cuc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAodGhpcy5fcGF1c2VkIHx8IHRoaXMuX2NvcmUuaXMoJ2J1c3knKSB8fCB0aGlzLl9jb3JlLmlzKCdpbnRlcmFjdGluZycpIHx8IGRvY3VtZW50LmhpZGRlbikge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9jb3JlLm5leHQoc3BlZWQgfHwgdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheVNwZWVkKTtcclxuXHRcdH0sIHRoaXMpLCB0aW1lb3V0IHx8IHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlUaW1lb3V0KTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIGF1dG9wbGF5IGluIG1vdGlvbi5cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdEF1dG9wbGF5LnByb3RvdHlwZS5fc2V0QXV0b1BsYXlJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fdGltZW91dCA9IHRoaXMuX2dldE5leHRUaW1lb3V0KCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU3RvcHMgdGhlIGF1dG9wbGF5LlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRBdXRvcGxheS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCF0aGlzLl9jb3JlLmlzKCdyb3RhdGluZycpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpO1xyXG5cdFx0dGhpcy5fY29yZS5sZWF2ZSgncm90YXRpbmcnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTdG9wcyB0aGUgYXV0b3BsYXkuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEF1dG9wbGF5LnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCF0aGlzLl9jb3JlLmlzKCdyb3RhdGluZycpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9wYXVzZWQgPSB0cnVlO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSBwbHVnaW4uXHJcblx0ICovXHJcblx0QXV0b3BsYXkucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoYW5kbGVyLCBwcm9wZXJ0eTtcclxuXHJcblx0XHR0aGlzLnN0b3AoKTtcclxuXHJcblx0XHRmb3IgKGhhbmRsZXIgaW4gdGhpcy5faGFuZGxlcnMpIHtcclxuXHRcdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoaGFuZGxlciwgdGhpcy5faGFuZGxlcnNbaGFuZGxlcl0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSkge1xyXG5cdFx0XHR0eXBlb2YgdGhpc1twcm9wZXJ0eV0gIT0gJ2Z1bmN0aW9uJyAmJiAodGhpc1twcm9wZXJ0eV0gPSBudWxsKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuYXV0b3BsYXkgPSBBdXRvcGxheTtcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBOYXZpZ2F0aW9uIFBsdWdpblxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIEFydHVzIEtvbGFub3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdGhlIG5hdmlnYXRpb24gcGx1Z2luLlxyXG5cdCAqIEBjbGFzcyBUaGUgTmF2aWdhdGlvbiBQbHVnaW5cclxuXHQgKiBAcGFyYW0ge093bH0gY2Fyb3VzZWwgLSBUaGUgT3dsIENhcm91c2VsLlxyXG5cdCAqL1xyXG5cdHZhciBOYXZpZ2F0aW9uID0gZnVuY3Rpb24oY2Fyb3VzZWwpIHtcclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmZXJlbmNlIHRvIHRoZSBjb3JlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge093bH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29yZSA9IGNhcm91c2VsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHBsdWdpbiBpcyBpbml0aWFsaXplZCBvciBub3QuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7Qm9vbGVhbn1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFRoZSBjdXJyZW50IHBhZ2luZyBpbmRleGVzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge0FycmF5fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9wYWdlcyA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIERPTSBlbGVtZW50cyBvZiB0aGUgdXNlciBpbnRlcmZhY2UuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb250cm9scyA9IHt9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogTWFya3VwIGZvciBhbiBpbmRpY2F0b3IuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7QXJyYXkuPFN0cmluZz59XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3RlbXBsYXRlcyA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogVGhlIGNhcm91c2VsIGVsZW1lbnQuXHJcblx0XHQgKiBAdHlwZSB7alF1ZXJ5fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLiRlbGVtZW50ID0gdGhpcy5fY29yZS4kZWxlbWVudDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIE92ZXJyaWRkZW4gbWV0aG9kcyBvZiB0aGUgY2Fyb3VzZWwuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9vdmVycmlkZXMgPSB7XHJcblx0XHRcdG5leHQ6IHRoaXMuX2NvcmUubmV4dCxcclxuXHRcdFx0cHJldjogdGhpcy5fY29yZS5wcmV2LFxyXG5cdFx0XHR0bzogdGhpcy5fY29yZS50b1xyXG5cdFx0fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCBldmVudCBoYW5kbGVycy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhbmRsZXJzID0ge1xyXG5cdFx0XHQncHJlcGFyZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEpIHtcclxuXHRcdFx0XHRcdHRoaXMuX3RlbXBsYXRlcy5wdXNoKCc8ZGl2IGNsYXNzPVwiJyArIHRoaXMuX2NvcmUuc2V0dGluZ3MuZG90Q2xhc3MgKyAnXCI+JyArXHJcblx0XHRcdFx0XHRcdCQoZS5jb250ZW50KS5maW5kKCdbZGF0YS1kb3RdJykuYWRkQmFjaygnW2RhdGEtZG90XScpLmF0dHIoJ2RhdGEtZG90JykgKyAnPC9kaXY+Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2FkZGVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLmRvdHNEYXRhKSB7XHJcblx0XHRcdFx0XHR0aGlzLl90ZW1wbGF0ZXMuc3BsaWNlKGUucG9zaXRpb24sIDAsIHRoaXMuX3RlbXBsYXRlcy5wb3AoKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3JlbW92ZS5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5kb3RzRGF0YSkge1xyXG5cdFx0XHRcdFx0dGhpcy5fdGVtcGxhdGVzLnNwbGljZShlLnBvc2l0aW9uLCAxKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnY2hhbmdlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgZS5wcm9wZXJ0eS5uYW1lID09ICdwb3NpdGlvbicpIHtcclxuXHRcdFx0XHRcdHRoaXMuZHJhdygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgIXRoaXMuX2luaXRpYWxpemVkKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ2luaXRpYWxpemUnLCBudWxsLCAnbmF2aWdhdGlvbicpO1xyXG5cdFx0XHRcdFx0dGhpcy5pbml0aWFsaXplKCk7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cdFx0XHRcdFx0dGhpcy5kcmF3KCk7XHJcblx0XHRcdFx0XHR0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XHJcblx0XHRcdFx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ2luaXRpYWxpemVkJywgbnVsbCwgJ25hdmlnYXRpb24nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQncmVmcmVzaGVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9pbml0aWFsaXplZCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdyZWZyZXNoJywgbnVsbCwgJ25hdmlnYXRpb24nKTtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHRcdFx0XHR0aGlzLmRyYXcoKTtcclxuXHRcdFx0XHRcdHRoaXMuX2NvcmUudHJpZ2dlcigncmVmcmVzaGVkJywgbnVsbCwgJ25hdmlnYXRpb24nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcclxuXHRcdHRoaXMuX2NvcmUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBOYXZpZ2F0aW9uLkRlZmF1bHRzLCB0aGlzLl9jb3JlLm9wdGlvbnMpO1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEB0b2RvIFJlbmFtZSBgc2xpZGVCeWAgdG8gYG5hdkJ5YFxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24uRGVmYXVsdHMgPSB7XHJcblx0XHRuYXY6IGZhbHNlLFxyXG5cdFx0bmF2VGV4dDogWyAncHJldicsICduZXh0JyBdLFxyXG5cdFx0bmF2U3BlZWQ6IGZhbHNlLFxyXG5cdFx0bmF2RWxlbWVudDogJ2RpdicsXHJcblx0XHRuYXZDb250YWluZXI6IGZhbHNlLFxyXG5cdFx0bmF2Q29udGFpbmVyQ2xhc3M6ICdvd2wtbmF2JyxcclxuXHRcdG5hdkNsYXNzOiBbICdvd2wtcHJldicsICdvd2wtbmV4dCcgXSxcclxuXHRcdHNsaWRlQnk6IDEsXHJcblx0XHRkb3RDbGFzczogJ293bC1kb3QnLFxyXG5cdFx0ZG90c0NsYXNzOiAnb3dsLWRvdHMnLFxyXG5cdFx0ZG90czogdHJ1ZSxcclxuXHRcdGRvdHNFYWNoOiBmYWxzZSxcclxuXHRcdGRvdHNEYXRhOiBmYWxzZSxcclxuXHRcdGRvdHNTcGVlZDogZmFsc2UsXHJcblx0XHRkb3RzQ29udGFpbmVyOiBmYWxzZVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEluaXRpYWxpemVzIHRoZSBsYXlvdXQgb2YgdGhlIHBsdWdpbiBhbmQgZXh0ZW5kcyB0aGUgY2Fyb3VzZWwuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvdmVycmlkZSxcclxuXHRcdFx0c2V0dGluZ3MgPSB0aGlzLl9jb3JlLnNldHRpbmdzO1xyXG5cclxuXHRcdC8vIGNyZWF0ZSBET00gc3RydWN0dXJlIGZvciByZWxhdGl2ZSBuYXZpZ2F0aW9uXHJcblx0XHR0aGlzLl9jb250cm9scy4kcmVsYXRpdmUgPSAoc2V0dGluZ3MubmF2Q29udGFpbmVyID8gJChzZXR0aW5ncy5uYXZDb250YWluZXIpXHJcblx0XHRcdDogJCgnPGRpdj4nKS5hZGRDbGFzcyhzZXR0aW5ncy5uYXZDb250YWluZXJDbGFzcykuYXBwZW5kVG8odGhpcy4kZWxlbWVudCkpLmFkZENsYXNzKCdhbnlDbGFzcycpO1xyXG5cclxuXHRcdHRoaXMuX2NvbnRyb2xzLiRwcmV2aW91cyA9ICQoJzwnICsgc2V0dGluZ3MubmF2RWxlbWVudCArICc+JylcclxuXHRcdFx0LmFkZENsYXNzKHNldHRpbmdzLm5hdkNsYXNzWzBdKVxyXG5cdFx0XHQuaHRtbChzZXR0aW5ncy5uYXZUZXh0WzBdKVxyXG5cdFx0XHQucHJlcGVuZFRvKHRoaXMuX2NvbnRyb2xzLiRyZWxhdGl2ZSlcclxuXHRcdFx0Lm9uKCdjbGljaycsICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdHRoaXMucHJldihzZXR0aW5ncy5uYXZTcGVlZCk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdHRoaXMuX2NvbnRyb2xzLiRuZXh0ID0gJCgnPCcgKyBzZXR0aW5ncy5uYXZFbGVtZW50ICsgJz4nKVxyXG5cdFx0XHQuYWRkQ2xhc3Moc2V0dGluZ3MubmF2Q2xhc3NbMV0pXHJcblx0XHRcdC5odG1sKHNldHRpbmdzLm5hdlRleHRbMV0pXHJcblx0XHRcdC5hcHBlbmRUbyh0aGlzLl9jb250cm9scy4kcmVsYXRpdmUpXHJcblx0XHRcdC5vbignY2xpY2snLCAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHR0aGlzLm5leHQoc2V0dGluZ3MubmF2U3BlZWQpO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0Ly8gY3JlYXRlIERPTSBzdHJ1Y3R1cmUgZm9yIGFic29sdXRlIG5hdmlnYXRpb25cclxuXHRcdGlmICghc2V0dGluZ3MuZG90c0RhdGEpIHtcclxuXHRcdFx0dGhpcy5fdGVtcGxhdGVzID0gWyAkKCc8ZGl2PicpXHJcblx0XHRcdFx0LmFkZENsYXNzKHNldHRpbmdzLmRvdENsYXNzKVxyXG5cdFx0XHRcdC5hcHBlbmQoJCgnPHNwYW4+JykpXHJcblx0XHRcdFx0LnByb3AoJ291dGVySFRNTCcpIF07XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY29udHJvbHMuJGFic29sdXRlID0gKHNldHRpbmdzLmRvdHNDb250YWluZXIgPyAkKHNldHRpbmdzLmRvdHNDb250YWluZXIpXHJcblx0XHRcdDogJCgnPGRpdj4nKS5hZGRDbGFzcyhzZXR0aW5ncy5kb3RzQ2xhc3MpLmFwcGVuZFRvKHRoaXMuJGVsZW1lbnQpKS5hZGRDbGFzcygnYW55Q2xhc3MnKTtcclxuXHJcblx0XHR0aGlzLl9jb250cm9scy4kYWJzb2x1dGUub24oJ2NsaWNrJywgJ2RpdicsICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHR2YXIgaW5kZXggPSAkKGUudGFyZ2V0KS5wYXJlbnQoKS5pcyh0aGlzLl9jb250cm9scy4kYWJzb2x1dGUpXHJcblx0XHRcdFx0PyAkKGUudGFyZ2V0KS5pbmRleCgpIDogJChlLnRhcmdldCkucGFyZW50KCkuaW5kZXgoKTtcclxuXHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdHRoaXMudG8oaW5kZXgsIHNldHRpbmdzLmRvdHNTcGVlZCk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0Ly8gb3ZlcnJpZGUgcHVibGljIG1ldGhvZHMgb2YgdGhlIGNhcm91c2VsXHJcblx0XHRmb3IgKG92ZXJyaWRlIGluIHRoaXMuX292ZXJyaWRlcykge1xyXG5cdFx0XHR0aGlzLl9jb3JlW292ZXJyaWRlXSA9ICQucHJveHkodGhpc1tvdmVycmlkZV0sIHRoaXMpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSBwbHVnaW4uXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoYW5kbGVyLCBjb250cm9sLCBwcm9wZXJ0eSwgb3ZlcnJpZGU7XHJcblxyXG5cdFx0Zm9yIChoYW5kbGVyIGluIHRoaXMuX2hhbmRsZXJzKSB7XHJcblx0XHRcdHRoaXMuJGVsZW1lbnQub2ZmKGhhbmRsZXIsIHRoaXMuX2hhbmRsZXJzW2hhbmRsZXJdKTtcclxuXHRcdH1cclxuXHRcdGZvciAoY29udHJvbCBpbiB0aGlzLl9jb250cm9scykge1xyXG5cdFx0XHR0aGlzLl9jb250cm9sc1tjb250cm9sXS5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHRcdGZvciAob3ZlcnJpZGUgaW4gdGhpcy5vdmVyaWRlcykge1xyXG5cdFx0XHR0aGlzLl9jb3JlW292ZXJyaWRlXSA9IHRoaXMuX292ZXJyaWRlc1tvdmVycmlkZV07XHJcblx0XHR9XHJcblx0XHRmb3IgKHByb3BlcnR5IGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XHJcblx0XHRcdHR5cGVvZiB0aGlzW3Byb3BlcnR5XSAhPSAnZnVuY3Rpb24nICYmICh0aGlzW3Byb3BlcnR5XSA9IG51bGwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZXMgdGhlIGludGVybmFsIHN0YXRlLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpLCBqLCBrLFxyXG5cdFx0XHRsb3dlciA9IHRoaXMuX2NvcmUuY2xvbmVzKCkubGVuZ3RoIC8gMixcclxuXHRcdFx0dXBwZXIgPSBsb3dlciArIHRoaXMuX2NvcmUuaXRlbXMoKS5sZW5ndGgsXHJcblx0XHRcdG1heGltdW0gPSB0aGlzLl9jb3JlLm1heGltdW0odHJ1ZSksXHJcblx0XHRcdHNldHRpbmdzID0gdGhpcy5fY29yZS5zZXR0aW5ncyxcclxuXHRcdFx0c2l6ZSA9IHNldHRpbmdzLmNlbnRlciB8fCBzZXR0aW5ncy5hdXRvV2lkdGggfHwgc2V0dGluZ3MuZG90c0RhdGFcclxuXHRcdFx0XHQ/IDEgOiBzZXR0aW5ncy5kb3RzRWFjaCB8fCBzZXR0aW5ncy5pdGVtcztcclxuXHJcblx0XHRpZiAoc2V0dGluZ3Muc2xpZGVCeSAhPT0gJ3BhZ2UnKSB7XHJcblx0XHRcdHNldHRpbmdzLnNsaWRlQnkgPSBNYXRoLm1pbihzZXR0aW5ncy5zbGlkZUJ5LCBzZXR0aW5ncy5pdGVtcyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHNldHRpbmdzLmRvdHMgfHwgc2V0dGluZ3Muc2xpZGVCeSA9PSAncGFnZScpIHtcclxuXHRcdFx0dGhpcy5fcGFnZXMgPSBbXTtcclxuXHJcblx0XHRcdGZvciAoaSA9IGxvd2VyLCBqID0gMCwgayA9IDA7IGkgPCB1cHBlcjsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKGogPj0gc2l6ZSB8fCBqID09PSAwKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9wYWdlcy5wdXNoKHtcclxuXHRcdFx0XHRcdFx0c3RhcnQ6IE1hdGgubWluKG1heGltdW0sIGkgLSBsb3dlciksXHJcblx0XHRcdFx0XHRcdGVuZDogaSAtIGxvd2VyICsgc2l6ZSAtIDFcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0aWYgKE1hdGgubWluKG1heGltdW0sIGkgLSBsb3dlcikgPT09IG1heGltdW0pIHtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRqID0gMCwgKytrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRqICs9IHRoaXMuX2NvcmUubWVyZ2Vycyh0aGlzLl9jb3JlLnJlbGF0aXZlKGkpKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERyYXdzIHRoZSB1c2VyIGludGVyZmFjZS5cclxuXHQgKiBAdG9kbyBUaGUgb3B0aW9uIGBkb3RzRGF0YWAgd29udCB3b3JrLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZGlmZmVyZW5jZSxcclxuXHRcdFx0c2V0dGluZ3MgPSB0aGlzLl9jb3JlLnNldHRpbmdzLFxyXG4gICAgICAgICAgICBhbnlDbGFzcyA9IHRoaXMuX2NvcmUuaXRlbXMoKS5sZW5ndGggPD0gc2V0dGluZ3MuaXRlbXMsXHJcblx0XHRcdGluZGV4ID0gdGhpcy5fY29yZS5yZWxhdGl2ZSh0aGlzLl9jb3JlLmN1cnJlbnQoKSksXHJcblx0XHRcdGxvb3AgPSBzZXR0aW5ncy5sb29wIHx8IHNldHRpbmdzLnJld2luZDtcclxuXHJcblx0XHR0aGlzLl9jb250cm9scy4kcmVsYXRpdmUudG9nZ2xlQ2xhc3MoJ2FueUNsYXNzJywgIXNldHRpbmdzLm5hdiB8fCBhbnlDbGFzcyk7XHJcblxyXG5cdFx0aWYgKHNldHRpbmdzLm5hdikge1xyXG5cdFx0XHR0aGlzLl9jb250cm9scy4kcHJldmlvdXMudG9nZ2xlQ2xhc3MoJ2FueUNsYXNzJywgIWxvb3AgJiYgaW5kZXggPD0gdGhpcy5fY29yZS5taW5pbXVtKHRydWUpKTtcclxuXHRcdFx0dGhpcy5fY29udHJvbHMuJG5leHQudG9nZ2xlQ2xhc3MoJ2FueUNsYXNzJywgIWxvb3AgJiYgaW5kZXggPj0gdGhpcy5fY29yZS5tYXhpbXVtKHRydWUpKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9jb250cm9scy4kYWJzb2x1dGUudG9nZ2xlQ2xhc3MoJ2FueUNsYXNzJywgIXNldHRpbmdzLmRvdHMgfHwgYW55Q2xhc3MpO1xyXG5cclxuXHRcdGlmIChzZXR0aW5ncy5kb3RzKSB7XHJcblx0XHRcdGRpZmZlcmVuY2UgPSB0aGlzLl9wYWdlcy5sZW5ndGggLSB0aGlzLl9jb250cm9scy4kYWJzb2x1dGUuY2hpbGRyZW4oKS5sZW5ndGg7XHJcblxyXG5cdFx0XHRpZiAoc2V0dGluZ3MuZG90c0RhdGEgJiYgZGlmZmVyZW5jZSAhPT0gMCkge1xyXG5cdFx0XHRcdHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS5odG1sKHRoaXMuX3RlbXBsYXRlcy5qb2luKCcnKSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZGlmZmVyZW5jZSA+IDApIHtcclxuXHRcdFx0XHR0aGlzLl9jb250cm9scy4kYWJzb2x1dGUuYXBwZW5kKG5ldyBBcnJheShkaWZmZXJlbmNlICsgMSkuam9pbih0aGlzLl90ZW1wbGF0ZXNbMF0pKTtcclxuXHRcdFx0fSBlbHNlIGlmIChkaWZmZXJlbmNlIDwgMCkge1xyXG5cdFx0XHRcdHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS5jaGlsZHJlbigpLnNsaWNlKGRpZmZlcmVuY2UpLnJlbW92ZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9jb250cm9scy4kYWJzb2x1dGUuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0dGhpcy5fY29udHJvbHMuJGFic29sdXRlLmNoaWxkcmVuKCkuZXEoJC5pbkFycmF5KHRoaXMuY3VycmVudCgpLCB0aGlzLl9wYWdlcykpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBFeHRlbmRzIGV2ZW50IGRhdGEuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gVGhlIGV2ZW50IG9iamVjdCB3aGljaCBnZXRzIHRocm93bi5cclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS5vblRyaWdnZXIgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0dmFyIHNldHRpbmdzID0gdGhpcy5fY29yZS5zZXR0aW5ncztcclxuXHJcblx0XHRldmVudC5wYWdlID0ge1xyXG5cdFx0XHRpbmRleDogJC5pbkFycmF5KHRoaXMuY3VycmVudCgpLCB0aGlzLl9wYWdlcyksXHJcblx0XHRcdGNvdW50OiB0aGlzLl9wYWdlcy5sZW5ndGgsXHJcblx0XHRcdHNpemU6IHNldHRpbmdzICYmIChzZXR0aW5ncy5jZW50ZXIgfHwgc2V0dGluZ3MuYXV0b1dpZHRoIHx8IHNldHRpbmdzLmRvdHNEYXRhXHJcblx0XHRcdFx0PyAxIDogc2V0dGluZ3MuZG90c0VhY2ggfHwgc2V0dGluZ3MuaXRlbXMpXHJcblx0XHR9O1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIGN1cnJlbnQgcGFnZSBwb3NpdGlvbiBvZiB0aGUgY2Fyb3VzZWwuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUuY3VycmVudCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGN1cnJlbnQgPSB0aGlzLl9jb3JlLnJlbGF0aXZlKHRoaXMuX2NvcmUuY3VycmVudCgpKTtcclxuXHRcdHJldHVybiAkLmdyZXAodGhpcy5fcGFnZXMsICQucHJveHkoZnVuY3Rpb24ocGFnZSwgaW5kZXgpIHtcclxuXHRcdFx0cmV0dXJuIHBhZ2Uuc3RhcnQgPD0gY3VycmVudCAmJiBwYWdlLmVuZCA+PSBjdXJyZW50O1xyXG5cdFx0fSwgdGhpcykpLnBvcCgpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIGN1cnJlbnQgc3VjY2Vzb3IvcHJlZGVjZXNzb3IgcG9zaXRpb24uXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbihzdWNjZXNzb3IpIHtcclxuXHRcdHZhciBwb3NpdGlvbiwgbGVuZ3RoLFxyXG5cdFx0XHRzZXR0aW5ncyA9IHRoaXMuX2NvcmUuc2V0dGluZ3M7XHJcblxyXG5cdFx0aWYgKHNldHRpbmdzLnNsaWRlQnkgPT0gJ3BhZ2UnKSB7XHJcblx0XHRcdHBvc2l0aW9uID0gJC5pbkFycmF5KHRoaXMuY3VycmVudCgpLCB0aGlzLl9wYWdlcyk7XHJcblx0XHRcdGxlbmd0aCA9IHRoaXMuX3BhZ2VzLmxlbmd0aDtcclxuXHRcdFx0c3VjY2Vzc29yID8gKytwb3NpdGlvbiA6IC0tcG9zaXRpb247XHJcblx0XHRcdHBvc2l0aW9uID0gdGhpcy5fcGFnZXNbKChwb3NpdGlvbiAlIGxlbmd0aCkgKyBsZW5ndGgpICUgbGVuZ3RoXS5zdGFydDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHBvc2l0aW9uID0gdGhpcy5fY29yZS5yZWxhdGl2ZSh0aGlzLl9jb3JlLmN1cnJlbnQoKSk7XHJcblx0XHRcdGxlbmd0aCA9IHRoaXMuX2NvcmUuaXRlbXMoKS5sZW5ndGg7XHJcblx0XHRcdHN1Y2Nlc3NvciA/IHBvc2l0aW9uICs9IHNldHRpbmdzLnNsaWRlQnkgOiBwb3NpdGlvbiAtPSBzZXR0aW5ncy5zbGlkZUJ5O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBwb3NpdGlvbjtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTbGlkZXMgdG8gdGhlIG5leHQgaXRlbSBvciBwYWdlLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkPWZhbHNlXSAtIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIHRyYW5zaXRpb24uXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHNwZWVkKSB7XHJcblx0XHQkLnByb3h5KHRoaXMuX292ZXJyaWRlcy50bywgdGhpcy5fY29yZSkodGhpcy5nZXRQb3NpdGlvbih0cnVlKSwgc3BlZWQpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNsaWRlcyB0byB0aGUgcHJldmlvdXMgaXRlbSBvciBwYWdlLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkPWZhbHNlXSAtIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIHRyYW5zaXRpb24uXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uKHNwZWVkKSB7XHJcblx0XHQkLnByb3h5KHRoaXMuX292ZXJyaWRlcy50bywgdGhpcy5fY29yZSkodGhpcy5nZXRQb3NpdGlvbihmYWxzZSksIHNwZWVkKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTbGlkZXMgdG8gdGhlIHNwZWNpZmllZCBpdGVtIG9yIHBhZ2UuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgaXRlbSBvciBwYWdlLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWRdIC0gVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgdHJhbnNpdGlvbi5cclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtzdGFuZGFyZD1mYWxzZV0gLSBXaGV0aGVyIHRvIHVzZSB0aGUgc3RhbmRhcmQgYmVoYXZpb3VyIG9yIG5vdC5cclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uKHBvc2l0aW9uLCBzcGVlZCwgc3RhbmRhcmQpIHtcclxuXHRcdHZhciBsZW5ndGg7XHJcblxyXG5cdFx0aWYgKCFzdGFuZGFyZCAmJiB0aGlzLl9wYWdlcy5sZW5ndGgpIHtcclxuXHRcdFx0bGVuZ3RoID0gdGhpcy5fcGFnZXMubGVuZ3RoO1xyXG5cdFx0XHQkLnByb3h5KHRoaXMuX292ZXJyaWRlcy50bywgdGhpcy5fY29yZSkodGhpcy5fcGFnZXNbKChwb3NpdGlvbiAlIGxlbmd0aCkgKyBsZW5ndGgpICUgbGVuZ3RoXS5zdGFydCwgc3BlZWQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JC5wcm94eSh0aGlzLl9vdmVycmlkZXMudG8sIHRoaXMuX2NvcmUpKHBvc2l0aW9uLCBzcGVlZCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLk5hdmlnYXRpb24gPSBOYXZpZ2F0aW9uO1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIEhhc2ggUGx1Z2luXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgQXJ0dXMgS29sYW5vd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB0aGUgaGFzaCBwbHVnaW4uXHJcblx0ICogQGNsYXNzIFRoZSBIYXNoIFBsdWdpblxyXG5cdCAqIEBwYXJhbSB7T3dsfSBjYXJvdXNlbCAtIFRoZSBPd2wgQ2Fyb3VzZWxcclxuXHQgKi9cclxuXHR2YXIgSGFzaCA9IGZ1bmN0aW9uKGNhcm91c2VsKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIFJlZmVyZW5jZSB0byB0aGUgY29yZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPd2x9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2NvcmUgPSBjYXJvdXNlbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEhhc2ggaW5kZXggZm9yIHRoZSBpdGVtcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhc2hlcyA9IHt9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogVGhlIGNhcm91c2VsIGVsZW1lbnQuXHJcblx0XHQgKiBAdHlwZSB7alF1ZXJ5fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLiRlbGVtZW50ID0gdGhpcy5fY29yZS4kZWxlbWVudDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCBldmVudCBoYW5kbGVycy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhbmRsZXJzID0ge1xyXG5cdFx0XHQnaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3Muc3RhcnRQb3NpdGlvbiA9PT0gJ1VSTEhhc2gnKSB7XHJcblx0XHRcdFx0XHQkKHdpbmRvdykudHJpZ2dlcignaGFzaGNoYW5nZS5vd2wubmF2aWdhdGlvbicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdwcmVwYXJlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UpIHtcclxuXHRcdFx0XHRcdHZhciBoYXNoID0gJChlLmNvbnRlbnQpLmZpbmQoJ1tkYXRhLWhhc2hdJykuYWRkQmFjaygnW2RhdGEtaGFzaF0nKS5hdHRyKCdkYXRhLWhhc2gnKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIWhhc2gpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHRoaXMuX2hhc2hlc1toYXNoXSA9IGUuY29udGVudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnY2hhbmdlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgZS5wcm9wZXJ0eS5uYW1lID09PSAncG9zaXRpb24nKSB7XHJcblx0XHRcdFx0XHR2YXIgY3VycmVudCA9IHRoaXMuX2NvcmUuaXRlbXModGhpcy5fY29yZS5yZWxhdGl2ZSh0aGlzLl9jb3JlLmN1cnJlbnQoKSkpLFxyXG5cdFx0XHRcdFx0XHRoYXNoID0gJC5tYXAodGhpcy5faGFzaGVzLCBmdW5jdGlvbihpdGVtLCBoYXNoKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGl0ZW0gPT09IGN1cnJlbnQgPyBoYXNoIDogbnVsbDtcclxuXHRcdFx0XHRcdFx0fSkuam9pbigpO1xyXG5cclxuXHRcdFx0XHRcdGlmICghaGFzaCB8fCB3aW5kb3cubG9jYXRpb24uaGFzaC5zbGljZSgxKSA9PT0gaGFzaCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcylcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gc2V0IGRlZmF1bHQgb3B0aW9uc1xyXG5cdFx0dGhpcy5fY29yZS5vcHRpb25zID0gJC5leHRlbmQoe30sIEhhc2guRGVmYXVsdHMsIHRoaXMuX2NvcmUub3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgdGhlIGV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKTtcclxuXHJcblx0XHQvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lciBmb3IgaGFzaCBuYXZpZ2F0aW9uXHJcblx0XHQkKHdpbmRvdykub24oJ2hhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb24nLCAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSksXHJcblx0XHRcdFx0aXRlbXMgPSB0aGlzLl9jb3JlLiRzdGFnZS5jaGlsZHJlbigpLFxyXG5cdFx0XHRcdHBvc2l0aW9uID0gdGhpcy5faGFzaGVzW2hhc2hdICYmIGl0ZW1zLmluZGV4KHRoaXMuX2hhc2hlc1toYXNoXSk7XHJcblxyXG5cdFx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCBwb3NpdGlvbiA9PT0gdGhpcy5fY29yZS5jdXJyZW50KCkpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2NvcmUudG8odGhpcy5fY29yZS5yZWxhdGl2ZShwb3NpdGlvbiksIGZhbHNlLCB0cnVlKTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEhhc2guRGVmYXVsdHMgPSB7XHJcblx0XHRVUkxoYXNoTGlzdGVuZXI6IGZhbHNlXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIHBsdWdpbi5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0SGFzaC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhhbmRsZXIsIHByb3BlcnR5O1xyXG5cclxuXHRcdCQod2luZG93KS5vZmYoJ2hhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb24nKTtcclxuXHJcblx0XHRmb3IgKGhhbmRsZXIgaW4gdGhpcy5faGFuZGxlcnMpIHtcclxuXHRcdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoaGFuZGxlciwgdGhpcy5faGFuZGxlcnNbaGFuZGxlcl0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSkge1xyXG5cdFx0XHR0eXBlb2YgdGhpc1twcm9wZXJ0eV0gIT0gJ2Z1bmN0aW9uJyAmJiAodGhpc1twcm9wZXJ0eV0gPSBudWxsKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuSGFzaCA9IEhhc2g7XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogU3VwcG9ydCBQbHVnaW5cclxuICpcclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBWaXZpZCBQbGFuZXQgU29mdHdhcmUgR21iSFxyXG4gKiBAYXV0aG9yIEFydHVzIEtvbGFub3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcblx0dmFyIHN0eWxlID0gJCgnPHN1cHBvcnQ+JykuZ2V0KDApLnN0eWxlLFxyXG5cdFx0cHJlZml4ZXMgPSAnV2Via2l0IE1veiBPIG1zJy5zcGxpdCgnICcpLFxyXG5cdFx0ZXZlbnRzID0ge1xyXG5cdFx0XHR0cmFuc2l0aW9uOiB7XHJcblx0XHRcdFx0ZW5kOiB7XHJcblx0XHRcdFx0XHRXZWJraXRUcmFuc2l0aW9uOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXHJcblx0XHRcdFx0XHRNb3pUcmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcsXHJcblx0XHRcdFx0XHRPVHJhbnNpdGlvbjogJ29UcmFuc2l0aW9uRW5kJyxcclxuXHRcdFx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2l0aW9uZW5kJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0YW5pbWF0aW9uOiB7XHJcblx0XHRcdFx0ZW5kOiB7XHJcblx0XHRcdFx0XHRXZWJraXRBbmltYXRpb246ICd3ZWJraXRBbmltYXRpb25FbmQnLFxyXG5cdFx0XHRcdFx0TW96QW5pbWF0aW9uOiAnYW5pbWF0aW9uZW5kJyxcclxuXHRcdFx0XHRcdE9BbmltYXRpb246ICdvQW5pbWF0aW9uRW5kJyxcclxuXHRcdFx0XHRcdGFuaW1hdGlvbjogJ2FuaW1hdGlvbmVuZCdcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHR0ZXN0cyA9IHtcclxuXHRcdFx0Y3NzdHJhbnNmb3JtczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICEhdGVzdCgndHJhbnNmb3JtJyk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNzc3RyYW5zZm9ybXMzZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICEhdGVzdCgncGVyc3BlY3RpdmUnKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y3NzdHJhbnNpdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAhIXRlc3QoJ3RyYW5zaXRpb24nKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Y3NzYW5pbWF0aW9uczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICEhdGVzdCgnYW5pbWF0aW9uJyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdGZ1bmN0aW9uIHRlc3QocHJvcGVydHksIHByZWZpeGVkKSB7XHJcblx0XHR2YXIgcmVzdWx0ID0gZmFsc2UsXHJcblx0XHRcdHVwcGVyID0gcHJvcGVydHkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wZXJ0eS5zbGljZSgxKTtcclxuXHJcblx0XHQkLmVhY2goKHByb3BlcnR5ICsgJyAnICsgcHJlZml4ZXMuam9pbih1cHBlciArICcgJykgKyB1cHBlcikuc3BsaXQoJyAnKSwgZnVuY3Rpb24oaSwgcHJvcGVydHkpIHtcclxuXHRcdFx0aWYgKHN0eWxlW3Byb3BlcnR5XSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0cmVzdWx0ID0gcHJlZml4ZWQgPyBwcm9wZXJ0eSA6IHRydWU7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcHJlZml4ZWQocHJvcGVydHkpIHtcclxuXHRcdHJldHVybiB0ZXN0KHByb3BlcnR5LCB0cnVlKTtcclxuXHR9XHJcblxyXG5cdGlmICh0ZXN0cy5jc3N0cmFuc2l0aW9ucygpKSB7XHJcblx0XHQvKiBqc2hpbnQgLVcwNTMgKi9cclxuXHRcdCQuc3VwcG9ydC50cmFuc2l0aW9uID0gbmV3IFN0cmluZyhwcmVmaXhlZCgndHJhbnNpdGlvbicpKVxyXG5cdFx0JC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kID0gZXZlbnRzLnRyYW5zaXRpb24uZW5kWyAkLnN1cHBvcnQudHJhbnNpdGlvbiBdO1xyXG5cdH1cclxuXHJcblx0aWYgKHRlc3RzLmNzc2FuaW1hdGlvbnMoKSkge1xyXG5cdFx0LyoganNoaW50IC1XMDUzICovXHJcblx0XHQkLnN1cHBvcnQuYW5pbWF0aW9uID0gbmV3IFN0cmluZyhwcmVmaXhlZCgnYW5pbWF0aW9uJykpXHJcblx0XHQkLnN1cHBvcnQuYW5pbWF0aW9uLmVuZCA9IGV2ZW50cy5hbmltYXRpb24uZW5kWyAkLnN1cHBvcnQuYW5pbWF0aW9uIF07XHJcblx0fVxyXG5cclxuXHRpZiAodGVzdHMuY3NzdHJhbnNmb3JtcygpKSB7XHJcblx0XHQvKiBqc2hpbnQgLVcwNTMgKi9cclxuXHRcdCQuc3VwcG9ydC50cmFuc2Zvcm0gPSBuZXcgU3RyaW5nKHByZWZpeGVkKCd0cmFuc2Zvcm0nKSk7XHJcblx0XHQkLnN1cHBvcnQudHJhbnNmb3JtM2QgPSB0ZXN0cy5jc3N0cmFuc2Zvcm1zM2QoKTtcclxuXHR9XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcbiIsIi8qIVxyXG4gKiBqcXVlcnkuc3Vtb3NlbGVjdCAtIHYzLjAuMlxyXG4gKiBodHRwOi8vaGVtYW50bmVnaS5naXRodWIuaW8vanF1ZXJ5LnN1bW9zZWxlY3RcclxuICogMjAxNC0wNC0wOFxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBIZW1hbnQgTmVnaVxyXG4gKiBFbWFpbCA6IGhlbWFudC5mcm56QGdtYWlsLmNvbVxyXG4gKiBDb21wcmVzc29yIGh0dHA6Ly9yZWZyZXNoLXNmLmNvbS9cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCQpIHtcclxuXHJcbiAgICAnbmFtZXNwYWNlIHN1bW8nO1xyXG4gICAgJC5mbi5TdW1vU2VsZWN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgLy8gVGhpcyBpcyB0aGUgZWFzaWVzdCB3YXkgdG8gaGF2ZSBkZWZhdWx0IG9wdGlvbnMuXHJcbiAgICAgICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsICAgLy8gRG9udCBjaGFuZ2UgaXQgaGVyZS5cclxuICAgICAgICAgICAgY3N2RGlzcENvdW50OiAzLCAgICAgICAgICAgICAgLy8gZGlzcGxheSBuby4gb2YgaXRlbXMgaW4gbXVsdGlzZWxlY3QuIDAgdG8gZGlzcGxheSBhbGwuXHJcbiAgICAgICAgICAgIGNhcHRpb25Gb3JtYXQ6J3swfSBTZWxlY3RlZCcsIC8vIGZvcm1hdCBvZiBjYXB0aW9uIHRleHQuIHlvdSBjYW4gc2V0IHlvdXIgbG9jYWxlLlxyXG4gICAgICAgICAgICBjYXB0aW9uRm9ybWF0QWxsU2VsZWN0ZWQ6J3swfSBhbGwgc2VsZWN0ZWQhJywgLy8gZm9ybWF0IG9mIGNhcHRpb24gdGV4dCB3aGVuIGFsbCBlbGVtZW50cyBhcmUgc2VsZWN0ZWQuIHNldCBudWxsIHRvIHVzZSBjYXB0aW9uRm9ybWF0LiBJdCB3aWxsIG5vdCB3b3JrIGlmIHRoZXJlIGFyZSBkaXNhYmxlZCBlbGVtZW50cyBpbiBzZWxlY3QuXHJcbiAgICAgICAgICAgIGZsb2F0V2lkdGg6IDQwMCwgICAgICAgICAgICAgIC8vIFNjcmVlbiB3aWR0aCBvZiBkZXZpY2UgYXQgd2hpY2ggdGhlIGxpc3QgaXMgcmVuZGVyZWQgaW4gZmxvYXRpbmcgcG9wdXAgZmFzaGlvbi5cclxuICAgICAgICAgICAgZm9yY2VDdXN0b21SZW5kZXJpbmc6IGZhbHNlLCAgLy8gZm9yY2UgdGhlIGN1c3RvbSBtb2RhbCBvbiBhbGwgZGV2aWNlcyBiZWxvdyBmbG9hdFdpZHRoIHJlc29sdXRpb24uXHJcbiAgICAgICAgICAgIG5hdGl2ZU9uRGV2aWNlOiBbJ0FuZHJvaWQnLCAnQmxhY2tCZXJyeScsICdpUGhvbmUnLCAnaVBhZCcsICdpUG9kJywgJ09wZXJhIE1pbmknLCAnSUVNb2JpbGUnLCAnU2lsayddLCAvL1xyXG4gICAgICAgICAgICBvdXRwdXRBc0NTVjogZmFsc2UsICAgICAgICAgICAvLyB0cnVlIHRvIFBPU1QgZGF0YSBhcyBjc3YgKCBmYWxzZSBmb3IgSHRtbCBjb250cm9sIGFycmF5IGllLiBkZWZhdWx0IHNlbGVjdCApXHJcbiAgICAgICAgICAgIGNzdlNlcENoYXI6ICcsJywgICAgICAgICAgICAgIC8vIHNlcGFyYXRpb24gY2hhciBpbiBjc3YgbW9kZVxyXG4gICAgICAgICAgICBva0NhbmNlbEluTXVsdGk6IGZhbHNlLCAgICAgICAvLyBkaXNwbGF5IG9rIGNhbmNlbCBidXR0b25zIGluIGRlc2t0b3AgbW9kZSBtdWx0aXNlbGVjdCBhbHNvLlxyXG4gICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlQ29tYmluZWQ6IHRydWUsICAvLyBpbSBtdWx0aSBzZWxlY3QgbW9kZSB3ZXRoZXIgdG8gdHJpZ2dlciBjaGFuZ2UgZXZlbnQgb24gaW5kaXZpZHVhbCBzZWxlY3Rpb24gb3IgY29tYmluZWQgc2VsZWN0aW9uLlxyXG4gICAgICAgICAgICBzZWxlY3RBbGw6IGZhbHNlLCAgICAgICAgICAgICAvLyB0byBkaXNwbGF5IHNlbGVjdCBhbGwgYnV0dG9uIGluIG11bHRpc2VsZWN0IG1vZGUufHwgYWxzbyBzZWxlY3QgYWxsIHdpbGwgbm90IGJlIGF2YWlsYWJsZSBvbiBtb2JpbGUgZGV2aWNlcy5cclxuXHJcbiAgICAgICAgICAgIHNlYXJjaDogZmFsc2UsICAgICAgICAgICAgICAgIC8vIHRvIGRpc3BsYXkgaW5wdXQgZm9yIGZpbHRlcmluZyBjb250ZW50LiBzZWxlY3RBbGx0ZXh0IHdpbGwgYmUgaW5wdXQgdGV4dCBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICBzZWFyY2hUZXh0OiAnU2VhcmNoLi4uJywgICAgICAvLyBwbGFjZWhvbGRlciBmb3Igc2VhcmNoIGlucHV0XHJcbiAgICAgICAgICAgIG5vTWF0Y2g6ICdObyBtYXRjaGVzIGZvciBcInswfVwiJyxcclxuICAgICAgICAgICAgcHJlZml4OiAnJywgICAgICAgICAgICAgICAgICAgLy8gc29tZSBwcmVmaXggdXN1YWxseSB0aGUgZmllbGQgbmFtZS4gZWcuICc8Yj5IZWxsbzwvYj4nXHJcbiAgICAgICAgICAgIGxvY2FsZTogWydPSycsICdDYW5jZWwnLCAnU2VsZWN0IEFsbCddLCAgLy8gYWxsIHRleHQgdGhhdCBpcyB1c2VkLiBkb24ndCBjaGFuZ2UgdGhlIGluZGV4LlxyXG4gICAgICAgICAgICB1cDogZmFsc2UgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdHJ1ZSB0byBvcGVuIHVwc2lkZS5cclxuICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdmFyIHJldCA9IHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxPYmogPSB0aGlzOyAvLyB0aGUgb3JpZ2luYWwgc2VsZWN0IG9iamVjdC5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3VtbyB8fCAhJCh0aGlzKS5pcygnc2VsZWN0JykpIHJldHVybjsgLy9hbHJlYWR5IGluaXRpYWxpemVkXHJcblxyXG4gICAgICAgICAgICB0aGlzLnN1bW8gPSB7XHJcbiAgICAgICAgICAgICAgICBFOiAkKHNlbE9iaiksICAgLy90aGUganF1ZXJ5IG9iamVjdCBvZiBvcmlnaW5hbCBzZWxlY3QgZWxlbWVudC5cclxuICAgICAgICAgICAgICAgIGlzX211bHRpOiAkKHNlbE9iaikuYXR0cignbXVsdGlwbGUnKSwgIC8vaWYgaXRzIGEgbXVsdGlwbGUgc2VsZWN0XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICcnLFxyXG4gICAgICAgICAgICAgICAgY2FwdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXHJcbiAgICAgICAgICAgICAgICBvcHREaXY6ICcnLFxyXG4gICAgICAgICAgICAgICAgQ2FwdGlvbkNvbnQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgdWw6JycsXHJcbiAgICAgICAgICAgICAgICBpc19mbG9hdGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc19vcGVuZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgLy9iYWNrZHJvcDogJycsXHJcbiAgICAgICAgICAgICAgICBtb2I6ZmFsc2UsIC8vIGlmIHRvIG9wZW4gZGV2aWNlIGRlZmF1bHQgc2VsZWN0XHJcbiAgICAgICAgICAgICAgICBQc3RhdGU6IFtdLFxyXG5cclxuICAgICAgICAgICAgICAgIGNyZWF0ZUVsZW1zOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uRS53cmFwKCc8ZGl2IGNsYXNzPVwiU3Vtb1NlbGVjdFwiIHRhYmluZGV4PVwiMFwiPicpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0ID0gTy5FLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uY2FwdGlvbiA9ICQoJzxzcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uQ2FwdGlvbkNvbnQgPSAkKCc8cCBjbGFzcz1cIkNhcHRpb25Db250XCI+PGxhYmVsPjxpPjwvaT48L2xhYmVsPjwvcD4nKS5hZGRDbGFzcygnU2VsZWN0Qm94JykuYXR0cignc3R5bGUnLCBPLkUuYXR0cignc3R5bGUnKSkucHJlcGVuZChPLmNhcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LmFwcGVuZChPLkNhcHRpb25Db250KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVmYXVsdCB0dXJuIG9mZiBpZiBubyBtdWx0aXNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFPLmlzX211bHRpKXNldHRpbmdzLm9rQ2FuY2VsSW5NdWx0aSA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKE8uRS5hdHRyKCdkaXNhYmxlZCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5hZGRDbGFzcygnZGlzYWJsZWQnKS5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2lmIG91dHB1dCBhcyBjc3YgYW5kIGlzIGEgbXVsdGlzZWxlY3QuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLm91dHB1dEFzQ1NWICYmIE8uaXNfbXVsdGkgJiYgTy5FLmF0dHIoJ25hbWUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NyZWF0ZSBhIGhpZGRlbiBmaWVsZCB0byBzdG9yZSBjc3YgdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LmFwcGVuZCgkKCc8aW5wdXQgY2xhc3M9XCJIRU1BTlQxMjNcIiB0eXBlPVwiaGlkZGVuXCIgLz4nKS5hdHRyKCduYW1lJywgTy5FLmF0dHIoJ25hbWUnKSkudmFsKE8uZ2V0U2VsU3RyKCkpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvIGl0IGNhbiBub3QgcG9zdCB0aGUgb3JpZ2luYWwgc2VsZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUucmVtb3ZlQXR0cignbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9icmVhayBmb3IgbW9iaWxlIHJlbmRyaW5nLi4gaWYgZm9yY2VDdXN0b21SZW5kZXJpbmcgaXMgZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc01vYmlsZSgpICYmICFzZXR0aW5ncy5mb3JjZUN1c3RvbVJlbmRlcmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNldE5hdGl2ZU1vYmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIG5hbWUgYXR0ciBpbiBzZWxlY3QgYWRkIGEgY2xhc3MgdG8gY29udGFpbmVyIGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKE8uRS5hdHRyKCduYW1lJykpIE8uc2VsZWN0LmFkZENsYXNzKCdzdW1vXycrTy5FLmF0dHIoJ25hbWUnKSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9oaWRlIG9yaWdpbmFsIHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgICAgIE8uRS5hZGRDbGFzcygnU3Vtb1VuZGVyJykuYXR0cigndGFiaW5kZXgnLCctMScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyMjIENyZWF0aW5nIHRoZSBsaXN0Li4uXHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYgPSAkKCc8ZGl2IGNsYXNzPVwib3B0V3JhcHBlciAnKyAoc2V0dGluZ3MudXA/J3VwJzonJykgKydcIj4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9icmFuY2ggZm9yIGZsb2F0aW5nIGxpc3QgaW4gbG93IHJlcyBkZXZpY2VzLlxyXG4gICAgICAgICAgICAgICAgICAgIE8uZmxvYXRpbmdMaXN0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vQ3JlYXRpbmcgdGhlIG1hcmt1cCBmb3IgdGhlIGF2YWlsYWJsZSBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgTy51bCA9ICQoJzx1bCBjbGFzcz1cIm9wdGlvbnNcIj4nKTtcclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5hcHBlbmQoTy51bCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNlbGVjdCBhbGwgZnVuY3Rpb25hbGl0eVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLnNlbGVjdEFsbCkgTy5TZWxBbGwoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZ1bmN0aW9uYWxpdHlcclxuICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5zZWFyY2gpIE8uU2VhcmNoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8udWwuYXBwZW5kKE8ucHJlcEl0ZW1zKE8uRS5jaGlsZHJlbigpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vaWYgbXVsdGlwbGUgdGhlbiBhZGQgdGhlIGNsYXNzIG11bHRpcGxlIGFuZCBhZGQgT0sgLyBDQU5DRUwgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfbXVsdGkpIE8ubXVsdGlTZWxlbGVjdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5hcHBlbmQoTy5vcHREaXYpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uYmFzaWNFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNlbEFsbFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHByZXBJdGVtczogZnVuY3Rpb24ob3B0cywgZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpcyA9IFtdLCBPPXRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgJChvcHRzKS5lYWNoKGZ1bmN0aW9uIChpLCBvcHQpIHsgICAgICAgLy8gcGFyc2luZyBvcHRpb25zIHRvIGxpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdCA9ICQob3B0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzLnB1c2gob3B0LmlzKCdvcHRncm91cCcpP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGxpIGNsYXNzPVwiZ3JvdXAgJysgKG9wdFswXS5kaXNhYmxlZD8nZGlzYWJsZWQnOicnKSArJ1wiPjxsYWJlbD4nICsgb3B0LmF0dHIoJ2xhYmVsJykgKyc8L2xhYmVsPjx1bD48L3VsPjxsaT4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJ3VsJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoTy5wcmVwSXRlbXMob3B0LmNoaWxkcmVuKCksIG9wdFswXS5kaXNhYmxlZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZW5kKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uY3JlYXRlTGkob3B0LCBkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlzO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIENyZWF0ZXMgYSBMSSBlbGVtZW50IGZyb20gYSBnaXZlbiBvcHRpb24gYW5kIGJpbmRzIGV2ZW50cyB0byBpdFxyXG4gICAgICAgICAgICAgICAgLy8jIyByZXR1cm5zIHRoZSBqcXVlcnkgaW5zdGFuY2Ugb2YgbGkgKG5vdCBpbnNlcnRlZCBpbiBkb20pXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVMaTogZnVuY3Rpb24gKG9wdCwgZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIW9wdC5hdHRyKCd2YWx1ZScpKW9wdC5hdHRyKCd2YWx1ZScsb3B0LnZhbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9kbzogcmVtb3ZlIHRoaXMgZGF0YSB2YWwgXHJcbiAgICAgICAgICAgICAgICAgICAgbGkgPSAkKCc8bGkgY2xhc3M9XCJvcHRcIj48bGFiZWw+JyArIG9wdC50ZXh0KCkgKyAnPC9sYWJlbD48L2xpPicpOy8vLmRhdGEoJ3ZhbCcsb3B0LnZhbCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBsaS5kYXRhKCdvcHQnLCBvcHQpOyAgICAvLyBzdG9yZSBhIGRpcmVjdCByZWZlcmVuY2UgdG8gb3B0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIG9wdC5kYXRhKCdsaScsIGxpKTsgICAgLy8gc3RvcmUgYSBkaXJlY3QgcmVmZXJlbmNlIHRvIGxpc3QgaXRlbS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19tdWx0aSkgbGkucHJlcGVuZCgnPHNwYW4+PGk+PC9pPjwvc3Bhbj4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdFswXS5kaXNhYmxlZCB8fCBkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaSA9IGxpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLm9uT3B0Q2xpY2sobGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0WzBdLnNlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdC5hdHRyKCdjbGFzcycpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcyhvcHQuYXR0cignY2xhc3MnKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBSZXR1cm5zIHRoZSBzZWxlY3RlZCBpdGVtcyBhcyBzdHJpbmcgaW4gYSBNdWx0aXNlbGVjdC5cclxuICAgICAgICAgICAgICAgIGdldFNlbFN0cjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgcHJlIHNlbGVjdGVkIGl0ZW1zLlxyXG4gICAgICAgICAgICAgICAgICAgIHNvcHQgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkUuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykuZWFjaChmdW5jdGlvbiAoKSB7IHNvcHQucHVzaCgkKHRoaXMpLnZhbCgpKTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvcHQuam9pbihzZXR0aW5ncy5jc3ZTZXBDaGFyKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBUSE9TRSBPSy9DQU5DRUwgQlVUVE9OUyBPTiBNVUxUSVBMRSBTRUxFQ1QuXHJcbiAgICAgICAgICAgICAgICBtdWx0aVNlbGVsZWN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmFkZENsYXNzKCdtdWx0aXBsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8ub2tidG4gPSAkKCc8cCBjbGFzcz1cImJ0bk9rXCI+JytzZXR0aW5ncy5sb2NhbGVbMF0rJzwvcD4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIGNvbWJpbmVkIGNoYW5nZSBldmVudCBpcyBzZXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy50cmlnZ2VyQ2hhbmdlQ29tYmluZWQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NoZWNrIGZvciBhIGNoYW5nZSBpbiB0aGUgc2VsZWN0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE8uRS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5sZW5ndGggIT0gTy5Qc3RhdGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLkUuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoaSxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGUuc2VsZWN0ZWQgJiYgTy5Qc3RhdGUuaW5kZXhPZihpKSA8IDApIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5jYWxsQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXRUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5oaWRlT3B0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uY2FuY2VsQnRuID0gJCgnPHAgY2xhc3M9XCJidG5DYW5jZWxcIj4nK3NldHRpbmdzLmxvY2FsZVsxXSsnPC9wPicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5fY25idG4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5oaWRlT3B0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmFwcGVuZCgkKCc8ZGl2IGNsYXNzPVwiTXVsdGlDb250cm9sc1wiPicpLmFwcGVuZChPLm9rYnRuKS5hcHBlbmQoTy5jYW5jZWxCdG4pKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgX2NuYnRuOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIGFsbCBzZWxlY3Rpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHsgdGhpcy5zZWxlY3RlZCA9IGZhbHNlOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuZmluZCgnbGkuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXN0b3JlIHNlbGVjdGlvbnMgZnJvbSBzYXZlZCBzdGF0ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IE8uUHN0YXRlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLkUuZmluZCgnb3B0aW9uJylbTy5Qc3RhdGVbaV1dLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8udWwuZmluZCgnbGkub3B0JykuZXEoTy5Qc3RhdGVbaV0pLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxBbGxTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBTZWxBbGw6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIU8uaXNfbXVsdGkpcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsQWxsID0gJCgnPHAgY2xhc3M9XCJzZWxlY3QtYWxsXCI+PHNwYW4+PGk+PC9pPjwvc3Bhbj48bGFiZWw+JyArIHNldHRpbmdzLmxvY2FsZVsyXSArICc8L2xhYmVsPjwvcD4nKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNlbEFsbC5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcblx0XHRcdFx0XHRcdC8vTy50b2dnU2VsQWxsKCEpO1xyXG5cdFx0XHRcdFx0XHRPLnNlbEFsbC50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHRcdFx0Ty5vcHREaXYuZmluZCgnbGkub3B0Jykubm90KCcuaGlkZGVuJykuZWFjaChmdW5jdGlvbihpeCxlKXtcclxuXHRcdFx0XHRcdFx0XHRlID0gJChlKTtcclxuXHRcdFx0XHRcdFx0XHRpZihPLnNlbEFsbC5oYXNDbGFzcygnc2VsZWN0ZWQnKSl7XHJcblx0XHRcdFx0XHRcdFx0XHRpZighZS5oYXNDbGFzcygnc2VsZWN0ZWQnKSllLnRyaWdnZXIoJ2NsaWNrJyk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdFx0XHRcdGlmKGUuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpZS50cmlnZ2VyKCdjbGljaycpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5wcmVwZW5kKE8uc2VsQWxsKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2VhcmNoIG1vZHVsZSAoY2FuIGJlIHJlbW92ZWQgaWYgbm90IHJlcXVpcmVkLilcclxuICAgICAgICAgICAgICAgIFNlYXJjaDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjID0gTy5DYXB0aW9uQ29udC5hZGRDbGFzcygnc2VhcmNoJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFAgPSAkKCc8cCBjbGFzcz1cIm5vLW1hdGNoXCI+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8uZnR4dCA9ICQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwic2VhcmNoLXR4dFwiIHZhbHVlPVwiXCIgcGxhY2Vob2xkZXI9XCInICsgc2V0dGluZ3Muc2VhcmNoVGV4dCArICdcIj4nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5hcHBlbmQoTy5mdHh0KTtcclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5jaGlsZHJlbigndWwnKS5hZnRlcihQKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5mdHh0Lm9uKCdrZXl1cC5zdW1vJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGlkID0gTy5vcHREaXYuZmluZCgndWwub3B0aW9ucyBsaS5vcHQnKS5lYWNoKGZ1bmN0aW9uKGl4LGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9ICQoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoTy5mdHh0LnZhbCgpLnRvTG93ZXJDYXNlKCkpID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLm5vdCgnLmhpZGRlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgUC5odG1sKHNldHRpbmdzLm5vTWF0Y2gucmVwbGFjZSgvXFx7MFxcfS9nLCBPLmZ0eHQudmFsKCkpKS50b2dnbGUoIWhpZC5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxBbGxTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxBbGxTdGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2VsZWN0QWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzYyA9IDAsIHZjID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuZmluZCgnbGkub3B0Jykubm90KCcuaGlkZGVuJykuZWFjaChmdW5jdGlvbiAoaXgsIGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKGUpLmhhc0NsYXNzKCdzZWxlY3RlZCcpKSBzYysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkKGUpLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB2YysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zZWxlY3QgYWxsIGNoZWNrYm94IHN0YXRlIGNoYW5nZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjID09IHZjKSBPLnNlbEFsbC5yZW1vdmVDbGFzcygncGFydGlhbCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzYyA9PSAwKSBPLnNlbEFsbC5yZW1vdmVDbGFzcygnc2VsZWN0ZWQgcGFydGlhbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIE8uc2VsQWxsLmFkZENsYXNzKCdwYXJ0aWFsJykvLy5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHNob3dPcHRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPLkUuYXR0cignZGlzYWJsZWQnKSkgcmV0dXJuOyAvLyBpZiBzZWxlY3QgaXMgZGlzYWJsZWQgdGhlbiByZXRydW5cclxuICAgICAgICAgICAgICAgICAgICBPLmlzX29wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QuYWRkQ2xhc3MoJ29wZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoTy5mdHh0KU8uZnR4dC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgTy5zZWxlY3QuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGlkZSBvcHRpb25zIG9uIGNsaWNrIG91dHNpZGUuXHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrLnN1bW8nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU8uc2VsZWN0LmlzKGUudGFyZ2V0KSAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB0YXJnZXQgb2YgdGhlIGNsaWNrIGlzbid0IHRoZSBjb250YWluZXIuLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIE8uc2VsZWN0LmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKXsgLy8gLi4uIG5vciBhIGRlc2NlbmRhbnQgb2YgdGhlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIU8uaXNfb3BlbmVkKXJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uaGlkZU9wdHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5va0NhbmNlbEluTXVsdGkpTy5fY25idG4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19mbG9hdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBIID0gTy5vcHREaXYuY2hpbGRyZW4oJ3VsJykub3V0ZXJIZWlnaHQoKSArIDI7ICAvLyArMiBpcyBjbGVhciBmaXhcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfbXVsdGkpIEggPSBIICsgcGFyc2VJbnQoTy5vcHREaXYuY3NzKCdwYWRkaW5nLWJvdHRvbScpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuY3NzKCdoZWlnaHQnLCBIKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdzdW1vU3RvcFNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZXRQc3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy9tYWludGFpbiBzdGF0ZSB3aGVuIG9rL2NhbmNlbCBidXR0b25zIGFyZSBhdmFpbGFibGUgc3RvcmluZyB0aGUgaW5kZXhlcy5cclxuICAgICAgICAgICAgICAgIHNldFBzdGF0ZTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfbXVsdGkgJiYgKE8uaXNfZmxvYXRpbmcgfHwgc2V0dGluZ3Mub2tDYW5jZWxJbk11bHRpKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uUHN0YXRlID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc3VtaW5nIHRoYXQgZmluZCByZXR1cm5zIGVsZW1lbnRzIGluIHRyZWUgb3JkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKGksIGUpe2lmKGUuc2VsZWN0ZWQpIE8uUHN0YXRlLnB1c2goaSk7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBjYWxsQ2hhbmdlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5FLnRyaWdnZXIoJ2NoYW5nZScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGhpZGVPcHRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKE8uaXNfb3BlbmVkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5pc19vcGVuZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QucmVtb3ZlQ2xhc3MoJ29wZW4nKS5maW5kKCd1bCBsaS5zZWwnKS5yZW1vdmVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2suc3VtbycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ3N1bW9TdG9wU2Nyb2xsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGVhciB0aGUgc2VhcmNoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLnNlYXJjaCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLmZ0eHQudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmZpbmQoJ3VsLm9wdGlvbnMgbGknKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5maW5kKCcubm8tbWF0Y2gnKS50b2dnbGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzZXRPbk9wZW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpID0gTy5vcHREaXYuZmluZCgnbGkub3B0Om5vdCguaGlkZGVuKScpLmVxKHNldHRpbmdzLnNlYXJjaD8wOk8uRVswXS5zZWxlY3RlZEluZGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuZmluZCgnbGkuc2VsJykucmVtb3ZlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNob3dPcHRzKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgbmF2OiBmdW5jdGlvbiAodXApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXMsIGMsIFxyXG4gICAgICAgICAgICAgICAgICAgIHM9Ty51bC5maW5kKCdsaS5vcHQ6bm90KC5kaXNhYmxlZCwgLmhpZGRlbiknKSxcclxuICAgICAgICAgICAgICAgICAgICBzZWwgPSBPLnVsLmZpbmQoJ2xpLm9wdC5zZWw6bm90KC5oaWRkZW4pJyksXHJcbiAgICAgICAgICAgICAgICAgICAgaWR4ID0gcy5pbmRleChzZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX29wZW5lZCAmJiBzZWwubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXAgJiYgaWR4ID4gMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBzLmVxKGlkeC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZighdXAgJiYgaWR4IDwgcy5sZW5ndGgtMSAmJiBpZHggPiAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBzLmVxKGlkeCsxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSByZXR1cm47IC8vIGlmIG5vIGl0ZW1zIGJlZm9yZSBvciBhZnRlclxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsLnJlbW92ZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsID0gYy5hZGRDbGFzcygnc2VsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5nIHNlbCBpdGVtIHRvIHZpc2libGUgdmlldy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gTy51bCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ID0gdWwuc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gc2VsLnBvc2l0aW9uKCkudG9wICsgc3Q7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0ID49IHN0ICsgdWwuaGVpZ2h0KCktc2VsLm91dGVySGVpZ2h0KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bC5zY3JvbGxUb3AodCAtIHVsLmhlaWdodCgpICsgc2VsLm91dGVySGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0PHN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuc2Nyb2xsVG9wKHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNldE9uT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBiYXNpY0V2ZW50czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLkNhcHRpb25Db250LmNsaWNrKGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX29wZW5lZCkgTy5oaWRlT3B0cygpOyBlbHNlIE8uc2hvd09wdHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3Qub24oJ2tleWRvd24uc3VtbycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUud2hpY2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OiAvLyB1cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLm5hdih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6IC8vIGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5uYXYoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjogLy8gc3BhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3Muc2VhcmNoICYmIE8uZnR4dC5pcyhlLnRhcmdldCkpcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6IC8vIGVudGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX29wZW5lZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmZpbmQoJ3VsIGxpLnNlbCcpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0T25PcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICBjYXNlIDk6XHQgLy90YWJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OiAvLyBlc2NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5va0NhbmNlbEluTXVsdGkpTy5fY25idG4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5oaWRlT3B0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gZXhpdCB0aGlzIGhhbmRsZXIgZm9yIG90aGVyIGtleXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gcHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24gKHNjcm9sbCAvIG1vdmUgY2FyZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZS5zdW1vJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLmZsb2F0aW5nTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBvbk9wdENsaWNrOiBmdW5jdGlvbiAobGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsaS5oYXNDbGFzcygnZGlzYWJsZWQnKSlyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4dCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX211bHRpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpLmRhdGEoJ29wdCcpWzBdLnNlbGVjdGVkID0gbGkuaGFzQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnNlbEFsbFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaS5wYXJlbnQoKS5maW5kKCdsaS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOyAvL2lmIG5vdCBtdWx0aXNlbGVjdCB0aGVuIHJlbW92ZSBhbGwgc2VsZWN0aW9ucyBmcm9tIHRoaXMgbGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGkudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaS5kYXRhKCdvcHQnKVswXS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYnJhbmNoIGZvciBjb21iaW5lZCBjaGFuZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKE8uaXNfbXVsdGkgJiYgc2V0dGluZ3MudHJpZ2dlckNoYW5nZUNvbWJpbmVkICYmIChPLmlzX2Zsb2F0aW5nIHx8IHNldHRpbmdzLm9rQ2FuY2VsSW5NdWx0aSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnNldFRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uY2FsbENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU8uaXNfbXVsdGkpIE8uaGlkZU9wdHMoKTsgLy9pZiBpdHMgbm90IGEgbXVsdGlzZWxlY3QgdGhlbiBoaWRlIG9uIHNpbmdsZSBzZWxlY3QuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHNldFRleHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5wbGFjZWhvbGRlciA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfbXVsdGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VscyA9IE8uRS5maW5kKCc6c2VsZWN0ZWQnKS5ub3QoJzpkaXNhYmxlZCcpOyAvL3NlbGVjdGVkIG9wdGlvbnMuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2Vscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICsgMSA+PSBzZXR0aW5ncy5jc3ZEaXNwQ291bnQgJiYgc2V0dGluZ3MuY3N2RGlzcENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxzLmxlbmd0aCA9PSBPLkUuZmluZCgnb3B0aW9uJykubGVuZ3RoICYmIHNldHRpbmdzLmNhcHRpb25Gb3JtYXRBbGxTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wbGFjZWhvbGRlciA9IHNldHRpbmdzLmNhcHRpb25Gb3JtYXRBbGxTZWxlY3RlZC5yZXBsYWNlKC9cXHswXFx9L2csIHNlbHMubGVuZ3RoKSsnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnBsYWNlaG9sZGVyID0gc2V0dGluZ3MuY2FwdGlvbkZvcm1hdC5yZXBsYWNlKC9cXHswXFx9L2csIHNlbHMubGVuZ3RoKSsnLCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIE8ucGxhY2Vob2xkZXIgKz0gJChzZWxzW2ldKS50ZXh0KCkgKyBcIiwgXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnBsYWNlaG9sZGVyID0gTy5wbGFjZWhvbGRlci5yZXBsYWNlKC8sKFteLF0qKSQvLCAnJDEnKTsgLy9yZW1vdmUgdW5leHBlY3RlZCBcIixcIiBmcm9tIGxhc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnBsYWNlaG9sZGVyID0gTy5FLmZpbmQoJzpzZWxlY3RlZCcpLm5vdCgnOmRpc2FibGVkJykudGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaXNfcGxhY2Vob2xkZXIgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFPLnBsYWNlaG9sZGVyKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19wbGFjZWhvbGRlciA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnBsYWNlaG9sZGVyID0gTy5FLmF0dHIoJ3BsYWNlaG9sZGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTy5wbGFjZWhvbGRlcikgICAgICAgICAgICAgICAgICAvL2lmIHBsYWNlaG9sZGVyIGlzIHRoZXJlIHRoZW4gc2V0IGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnBsYWNlaG9sZGVyID0gTy5FLmZpbmQoJ29wdGlvbjpkaXNhYmxlZDpzZWxlY3RlZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8ucGxhY2Vob2xkZXIgPSBPLnBsYWNlaG9sZGVyID8gKHNldHRpbmdzLnByZWZpeCArICcgJyArIE8ucGxhY2Vob2xkZXIpIDogc2V0dGluZ3MucGxhY2Vob2xkZXJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zZXQgZGlzcGxheSB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgTy5jYXB0aW9uLmh0bWwoTy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5DYXB0aW9uQ29udC5hdHRyKCd0aXRsZScsIE8ucGxhY2Vob2xkZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3NldCB0aGUgaGlkZGVuIGZpZWxkIGlmIHBvc3QgYXMgY3N2IGlzIHRydWUuXHJcbiAgICAgICAgICAgICAgICAgICAgY3N2RmllbGQgPSBPLnNlbGVjdC5maW5kKCdpbnB1dC5IRU1BTlQxMjMnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3N2RmllbGQubGVuZ3RoKSBjc3ZGaWVsZC52YWwoTy5nZXRTZWxTdHIoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vYWRkIGNsYXNzIHBsYWNlaG9sZGVyIGlmIGl0cyBhIHBsYWNlaG9sZGVyIHRleHQuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzX3BsYWNlaG9sZGVyKSBPLmNhcHRpb24uYWRkQ2xhc3MoJ3BsYWNlaG9sZGVyJyk7IGVsc2UgTy5jYXB0aW9uLnJlbW92ZUNsYXNzKCdwbGFjZWhvbGRlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPLnBsYWNlaG9sZGVyO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBpc01vYmlsZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGFwdGVkIGZyb20gaHR0cDovL3d3dy5kZXRlY3Rtb2JpbGVicm93c2Vycy5jb21cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVja3MgZm9yIGlPcywgQW5kcm9pZCwgQmxhY2tiZXJyeSwgT3BlcmEgTWluaSwgYW5kIFdpbmRvd3MgbW9iaWxlIGRldmljZXNcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHRpbmdzLm5hdGl2ZU9uRGV2aWNlLmxlbmd0aDsgaSsrKSBpZiAodWEudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2V0dGluZ3MubmF0aXZlT25EZXZpY2VbaV0udG9Mb3dlckNhc2UoKSkgPiAwKSByZXR1cm4gc2V0dGluZ3MubmF0aXZlT25EZXZpY2VbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBzZXROYXRpdmVNb2JpbGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5FLmFkZENsYXNzKCdTZWxlY3RDbGFzcycpLy8uY3NzKCdoZWlnaHQnLCBPLnNlbGVjdC5vdXRlckhlaWdodCgpKTtcclxuXHRcdFx0XHRcdE8ubW9iID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBPLkUuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXRUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGZsb2F0aW5nTGlzdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAvL2NhbGxlZCBvbiBpbml0IGFuZCBhbHNvIG9uIHJlc2l6ZS5cclxuICAgICAgICAgICAgICAgICAgICAvL08uaXNfZmxvYXRpbmcgPSB0cnVlIGlmIHdpbmRvdyB3aWR0aCBpcyA8IHNwZWNpZmllZCBmbG9hdCB3aWR0aFxyXG4gICAgICAgICAgICAgICAgICAgIE8uaXNfZmxvYXRpbmcgPSAkKHdpbmRvdykud2lkdGgoKSA8PSBzZXR0aW5ncy5mbG9hdFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3NldCBjbGFzcyBpc0Zsb2F0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYudG9nZ2xlQ2xhc3MoJ2lzRmxvYXRpbmcnLCBPLmlzX2Zsb2F0aW5nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgaGVpZ2h0IGlmIG5vdCBmbG9hdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghTy5pc19mbG9hdGluZykgTy5vcHREaXYuY3NzKCdoZWlnaHQnLCAnJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vdG9nZ2xlIGNsYXNzIGFjY29yZGluZyB0byBva0NhbmNlbEluTXVsdGkgZmxhZyBvbmx5IHdoZW4gaXQgaXMgbm90IGZsb2F0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYudG9nZ2xlQ2xhc3MoJ29rQ2FuY2VsSW5NdWx0aScsIHNldHRpbmdzLm9rQ2FuY2VsSW5NdWx0aSAmJiAhTy5pc19mbG9hdGluZyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vSEVMUEVSUyBGT1IgT1VUU0lERVJTXHJcbiAgICAgICAgICAgICAgICAvLyB2YWxpZGF0ZXMgcmFuZ2Ugb2YgZ2l2ZW4gaXRlbSBvcGVyYXRpb25zXHJcbiAgICAgICAgICAgICAgICB2UmFuZ2U6IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHMgPSBPLkUuZmluZCgnb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMubGVuZ3RoIDw9IGkgfHwgaSA8IDApIHRocm93IFwiaW5kZXggb3V0IG9mIGJvdW5kc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE87XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vdG9nZ2xlcyBzZWxlY3Rpb24gb24gYyBhcyBib29sZWFuLlxyXG4gICAgICAgICAgICAgICAgdG9nZ1NlbDogZnVuY3Rpb24gKGMsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihpKSA9PT0gXCJudW1iZXJcIil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8udlJhbmdlKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHQgPSBPLkUuZmluZCgnb3B0aW9uJylbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdCA9IE8uRS5maW5kKCdvcHRpb25bdmFsdWU9XCInK2krJ1wiXScpWzBdfHwwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdCB8fCBvcHQuZGlzYWJsZWQpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9wdC5zZWxlY3RlZCAhPSBjKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0LnNlbGVjdGVkID0gYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIU8ubW9iKSAkKG9wdCkuZGF0YSgnbGknKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnLGMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5jYWxsQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0UHN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbEFsbFN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvL3RvZ2dsZXMgZGlzYWJsZWQgb24gYyBhcyBib29sZWFuLlxyXG4gICAgICAgICAgICAgICAgdG9nZ0RpczogZnVuY3Rpb24gKGMsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXMudlJhbmdlKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uRS5maW5kKCdvcHRpb24nKVtpXS5kaXNhYmxlZCA9IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYylPLkUuZmluZCgnb3B0aW9uJylbaV0uc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZighTy5tb2IpTy5vcHREaXYuZmluZCgndWwub3B0aW9ucyBsaScpLmVxKGkpLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcsIGMpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0b2dnbGUgZGlzYWJsZS9lbmFibGUgb24gY29tcGxldGUgc2VsZWN0IGNvbnRyb2xcclxuICAgICAgICAgICAgICAgIHRvZ2dTdW1vOiBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5lbmFibGVkID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcsIHZhbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LnJlbW92ZUF0dHIoJ3RhYmluZGV4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5hdHRyKCd0YWJpbmRleCcsJzAnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvL3RvZ2dsZXMgYWxsb3B0aW9uIG9uIGMgYXMgYm9vbGVhbi5cclxuICAgICAgICAgICAgICAgIHRvZ2dTZWxBbGw6IGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uRS5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uIChpeCwgZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE8uRS5maW5kKCdvcHRpb24nKVskKHRoaXMpLmluZGV4KCldLmRpc2FibGVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5maW5kKCdvcHRpb24nKVskKHRoaXMpLmluZGV4KCldLnNlbGVjdGVkID0gYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFPLm1vYilcclxuXHRcdFx0XHRcdFx0XHRPLm9wdERpdi5maW5kKCd1bC5vcHRpb25zIGxpJykuZXEoJCh0aGlzKS5pbmRleCgpKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnLCBjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXRUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIU8ubW9iICYmIE8uc2VsQWxsKU8uc2VsQWxsLnJlbW92ZUNsYXNzKCdwYXJ0aWFsJykudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJyxjKTtcclxuICAgICAgICAgICAgICAgICAgICBPLmNhbGxDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNldFBzdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBvdXRzaWRlIGFjY2Vzc2liaWxpdHkgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGZyb20gdGhlIGVsZW1lbnQgaW5zdGFuY2UuXHJcbiAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgcmVsb2FkOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsbSA9IHRoaXMudW5sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoZWxtKS5TdW1vU2VsZWN0KHNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgdW5sb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LmJlZm9yZShPLkUpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uRS5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5vdXRwdXRBc0NTViAmJiBPLmlzX211bHRpICYmIE8uc2VsZWN0LmZpbmQoJ2lucHV0LkhFTUFOVDEyMycpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUuYXR0cignbmFtZScsIE8uc2VsZWN0LmZpbmQoJ2lucHV0LkhFTUFOVDEyMycpLmF0dHIoJ25hbWUnKSk7IC8vIHJlc3RvcmUgdGhlIG5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzZWxPYmouc3VtbztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsT2JqO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIGFkZCBhIG5ldyBvcHRpb24gdG8gc2VsZWN0IGF0IGEgZ2l2ZW4gaW5kZXguXHJcbiAgICAgICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uICh2YWwsIHR4dCwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09IFwidW5kZWZpbmVkXCIpIHRocm93IFwiTm8gdmFsdWUgdG8gYWRkXCJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdHM9Ty5FLmZpbmQoJ29wdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0eHQgPT0gXCJudW1iZXJcIikgeyBpID0gdHh0OyB0eHQgPSB2YWw7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHR4dCA9PSBcInVuZGVmaW5lZFwiKSB7IHR4dCA9IHZhbDsgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBvcHQgPSAkKFwiPG9wdGlvbj48L29wdGlvbj5cIikudmFsKHZhbCkuaHRtbCh0eHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5sZW5ndGggPCBpKSB0aHJvdyBcImluZGV4IG91dCBvZiBib3VuZHNcIlxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGkgPT0gXCJ1bmRlZmluZWRcIiB8fCBvcHRzLmxlbmd0aCA9PSBpKSB7IC8vIGFkZCBpdCB0byB0aGUgbGFzdCBpZiBnaXZlbiBpbmRleCBpcyBsYXN0IG5vIG9yIG5vIGluZGV4IHByb3ZpZGVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUuYXBwZW5kKG9wdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFPLm1vYilPLnVsLmFwcGVuZChPLmNyZWF0ZUxpKG9wdCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cy5lcShpKS5iZWZvcmUob3B0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIU8ubW9iKU8udWwuZmluZCgnbGkub3B0JykuZXEoaSkuYmVmb3JlKE8uY3JlYXRlTGkob3B0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsT2JqO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIHJlbW92ZXMgYW4gaXRlbSBhdCBhIGdpdmVuIGluZGV4LlxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcy52UmFuZ2UoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5FLmZpbmQoJ29wdGlvbicpLmVxKGkpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFPLm1vYilPLm9wdERpdi5maW5kKCd1bC5vcHRpb25zIGxpJykuZXEoaSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZXRUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgU2VsZWN0IGFuIGl0ZW0gYXQgYSBnaXZlbiBpbmRleC5cclxuICAgICAgICAgICAgICAgIHNlbGVjdEl0ZW06IGZ1bmN0aW9uIChpKSB7IHRoaXMudG9nZ1NlbCh0cnVlLCBpKTsgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIFVuU2VsZWN0IGFuIGl0ZW4gYXQgYSBnaXZlbiBpbmRleC5cclxuICAgICAgICAgICAgICAgIHVuU2VsZWN0SXRlbTogZnVuY3Rpb24gKGkpIHsgdGhpcy50b2dnU2VsKGZhbHNlLCBpKTsgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIFNlbGVjdCBhbGwgaXRlbXMgIG9mIHRoZSBzZWxlY3QuXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RBbGw6IGZ1bmN0aW9uICgpIHsgdGhpcy50b2dnU2VsQWxsKHRydWUpOyB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgVW5TZWxlY3QgYWxsIGl0ZW1zIG9mIHRoZSBzZWxlY3QuXHJcbiAgICAgICAgICAgICAgICB1blNlbGVjdEFsbDogZnVuY3Rpb24gKCkgeyB0aGlzLnRvZ2dTZWxBbGwoZmFsc2UpOyB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgRGlzYWJsZSBhbiBpdGVuIGF0IGEgZ2l2ZW4gaW5kZXguXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlSXRlbTogZnVuY3Rpb24gKGkpIHsgdGhpcy50b2dnRGlzKHRydWUsIGkpIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBSZW1vdmVzIGRpc2FibGVkIGFuIGl0ZW4gYXQgYSBnaXZlbiBpbmRleC5cclxuICAgICAgICAgICAgICAgIGVuYWJsZUl0ZW06IGZ1bmN0aW9uIChpKSB7IHRoaXMudG9nZ0RpcyhmYWxzZSwgaSkgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIE5ldyBzaW1wbGUgbWV0aG9kcyBhcyBnZXR0ZXIgYW5kIHNldHRlciBhcmUgbm90IHdvcmtpbmcgZmluZSBpbiBpZTgtXHJcbiAgICAgICAgICAgICAgICAvLyMjIHZhcmlhYmxlIHRvIGNoZWNrIHN0YXRlIG9mIGNvbnRyb2wgaWYgZW5hYmxlZCBvciBkaXNhYmxlZC5cclxuICAgICAgICAgICAgICAgIGVuYWJsZWQgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgLy8jIyBFbmFibGVzIHRoZSBjb250cm9sXHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9nZ1N1bW8oZmFsc2UpfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIERpc2FibGVzIHRoZSBjb250cm9sXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvZ2dTdW1vKHRydWUpfSxcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLmNyZWF0ZUVsZW1zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZXRUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzZWxPYmouc3Vtby5pbml0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiByZXQubGVuZ3RoID09IDEgPyByZXRbMF0gOiByZXQ7XHJcbiAgICB9O1xyXG5cclxuXHJcbn0oalF1ZXJ5KSk7XHJcbiIsIi8qIVxyXG4gKiBGb3RvcmFtYSA0LjYuNCB8IGh0dHA6Ly9mb3RvcmFtYS5pby9saWNlbnNlL1xyXG4gKi9cclxuZm90b3JhbWFWZXJzaW9uPVwiNC42LjRcIixmdW5jdGlvbihhLGIsYyxkLGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGYoYSl7dmFyIGI9XCJiZXpfXCIrZC5tYWtlQXJyYXkoYXJndW1lbnRzKS5qb2luKFwiX1wiKS5yZXBsYWNlKFwiLlwiLFwicFwiKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBkLmVhc2luZ1tiXSl7dmFyIGM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1bbnVsbCxudWxsXSxkPVtudWxsLG51bGxdLGU9W251bGwsbnVsbF0sZj1mdW5jdGlvbihmLGcpe3JldHVybiBlW2ddPTMqYVtnXSxkW2ddPTMqKGJbZ10tYVtnXSktZVtnXSxjW2ddPTEtZVtnXS1kW2ddLGYqKGVbZ10rZiooZFtnXStmKmNbZ10pKX0sZz1mdW5jdGlvbihhKXtyZXR1cm4gZVswXSthKigyKmRbMF0rMypjWzBdKmEpfSxoPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPWEsZD0wOysrZDwxNCYmKGI9ZihjLDApLWEsIShNYXRoLmFicyhiKTwuMDAxKSk7KWMtPWIvZyhjKTtyZXR1cm4gY307cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmKGgoYSksMSl9fTtkLmVhc2luZ1tiXT1mdW5jdGlvbihiLGQsZSxmLGcpe3JldHVybiBmKmMoW2FbMF0sYVsxXV0sW2FbMl0sYVszXV0pKGQvZykrZX19cmV0dXJuIGJ9ZnVuY3Rpb24gZygpe31mdW5jdGlvbiBoKGEsYixjKXtyZXR1cm4gTWF0aC5tYXgoaXNOYU4oYik/LTEvMDpiLE1hdGgubWluKGlzTmFOKGMpPzEvMDpjLGEpKX1mdW5jdGlvbiBpKGEpe3JldHVybiBhLm1hdGNoKC9tYS8pJiZhLm1hdGNoKC8tP1xcZCsoPyFkKS9nKVthLm1hdGNoKC8zZC8pPzEyOjRdfWZ1bmN0aW9uIGooYSl7cmV0dXJuIEljPytpKGEuY3NzKFwidHJhbnNmb3JtXCIpKTorYS5jc3MoXCJsZWZ0XCIpLnJlcGxhY2UoXCJweFwiLFwiXCIpfWZ1bmN0aW9uIGsoYSl7dmFyIGI9e307cmV0dXJuIEljP2IudHJhbnNmb3JtPVwidHJhbnNsYXRlM2QoXCIrYStcInB4LDAsMClcIjpiLmxlZnQ9YSxifWZ1bmN0aW9uIGwoYSl7cmV0dXJue1widHJhbnNpdGlvbi1kdXJhdGlvblwiOmErXCJtc1wifX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGlzTmFOKGEpP2I6YX1mdW5jdGlvbiBuKGEsYil7cmV0dXJuIG0oK1N0cmluZyhhKS5yZXBsYWNlKGJ8fFwicHhcIixcIlwiKSl9ZnVuY3Rpb24gbyhhKXtyZXR1cm4vJSQvLnRlc3QoYSk/bihhLFwiJVwiKTplfWZ1bmN0aW9uIHAoYSxiKXtyZXR1cm4gbShvKGEpLzEwMCpiLG4oYSkpfWZ1bmN0aW9uIHEoYSl7cmV0dXJuKCFpc05hTihuKGEpKXx8IWlzTmFOKG4oYSxcIiVcIikpKSYmYX1mdW5jdGlvbiByKGEsYixjLGQpe3JldHVybihhLShkfHwwKSkqKGIrKGN8fDApKX1mdW5jdGlvbiBzKGEsYixjLGQpe3JldHVybi1NYXRoLnJvdW5kKGEvKGIrKGN8fDApKS0oZHx8MCkpfWZ1bmN0aW9uIHQoYSl7dmFyIGI9YS5kYXRhKCk7aWYoIWIudEVuZCl7dmFyIGM9YVswXSxkPXtXZWJraXRUcmFuc2l0aW9uOlwid2Via2l0VHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZFwiLG1zVHJhbnNpdGlvbjpcIk1TVHJhbnNpdGlvbkVuZFwiLHRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCJ9O1QoYyxkW3VjLnByZWZpeGVkKFwidHJhbnNpdGlvblwiKV0sZnVuY3Rpb24oYSl7Yi50UHJvcCYmYS5wcm9wZXJ0eU5hbWUubWF0Y2goYi50UHJvcCkmJmIub25FbmRGbigpfSksYi50RW5kPSEwfX1mdW5jdGlvbiB1KGEsYixjLGQpe3ZhciBlLGY9YS5kYXRhKCk7ZiYmKGYub25FbmRGbj1mdW5jdGlvbigpe2V8fChlPSEwLGNsZWFyVGltZW91dChmLnRUKSxjKCkpfSxmLnRQcm9wPWIsY2xlYXJUaW1lb3V0KGYudFQpLGYudFQ9c2V0VGltZW91dChmdW5jdGlvbigpe2Yub25FbmRGbigpfSwxLjUqZCksdChhKSl9ZnVuY3Rpb24gdihhLGIpe2lmKGEubGVuZ3RoKXt2YXIgYz1hLmRhdGEoKTtJYz8oYS5jc3MobCgwKSksYy5vbkVuZEZuPWcsY2xlYXJUaW1lb3V0KGMudFQpKTphLnN0b3AoKTt2YXIgZD13KGIsZnVuY3Rpb24oKXtyZXR1cm4gaihhKX0pO3JldHVybiBhLmNzcyhrKGQpKSxkfX1mdW5jdGlvbiB3KCl7Zm9yKHZhciBhLGI9MCxjPWFyZ3VtZW50cy5sZW5ndGg7Yz5iJiYoYT1iP2FyZ3VtZW50c1tiXSgpOmFyZ3VtZW50c1tiXSxcIm51bWJlclwiIT10eXBlb2YgYSk7YisrKTtyZXR1cm4gYX1mdW5jdGlvbiB4KGEsYil7cmV0dXJuIE1hdGgucm91bmQoYSsoYi1hKS8xLjUpfWZ1bmN0aW9uIHkoKXtyZXR1cm4geS5wPXkucHx8KFwiaHR0cHM6XCI9PT1jLnByb3RvY29sP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikseS5wfWZ1bmN0aW9uIHooYSl7dmFyIGM9Yi5jcmVhdGVFbGVtZW50KFwiYVwiKTtyZXR1cm4gYy5ocmVmPWEsY31mdW5jdGlvbiBBKGEsYil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIGE7YT16KGEpO3ZhciBjLGQ7aWYoYS5ob3N0Lm1hdGNoKC95b3V0dWJlXFwuY29tLykmJmEuc2VhcmNoKXtpZihjPWEuc2VhcmNoLnNwbGl0KFwidj1cIilbMV0pe3ZhciBlPWMuaW5kZXhPZihcIiZcIik7LTEhPT1lJiYoYz1jLnN1YnN0cmluZygwLGUpKSxkPVwieW91dHViZVwifX1lbHNlIGEuaG9zdC5tYXRjaCgveW91dHViZVxcLmNvbXx5b3V0dVxcLmJlLyk/KGM9YS5wYXRobmFtZS5yZXBsYWNlKC9eXFwvKGVtYmVkXFwvfHZcXC8pPy8sXCJcIikucmVwbGFjZSgvXFwvLiovLFwiXCIpLGQ9XCJ5b3V0dWJlXCIpOmEuaG9zdC5tYXRjaCgvdmltZW9cXC5jb20vKSYmKGQ9XCJ2aW1lb1wiLGM9YS5wYXRobmFtZS5yZXBsYWNlKC9eXFwvKHZpZGVvXFwvKT8vLFwiXCIpLnJlcGxhY2UoL1xcLy4qLyxcIlwiKSk7cmV0dXJuIGMmJmR8fCFifHwoYz1hLmhyZWYsZD1cImN1c3RvbVwiKSxjP3tpZDpjLHR5cGU6ZCxzOmEuc2VhcmNoLnJlcGxhY2UoL15cXD8vLFwiXCIpLHA6eSgpfTohMX1mdW5jdGlvbiBCKGEsYixjKXt2YXIgZSxmLGc9YS52aWRlbztyZXR1cm5cInlvdXR1YmVcIj09PWcudHlwZT8oZj15KCkrXCJpbWcueW91dHViZS5jb20vdmkvXCIrZy5pZCtcIi9kZWZhdWx0LmpwZ1wiLGU9Zi5yZXBsYWNlKC9cXC9kZWZhdWx0LmpwZyQvLFwiL2hxZGVmYXVsdC5qcGdcIiksYS50aHVtYnNSZWFkeT0hMCk6XCJ2aW1lb1wiPT09Zy50eXBlP2QuYWpheCh7dXJsOnkoKStcInZpbWVvLmNvbS9hcGkvdjIvdmlkZW8vXCIrZy5pZCtcIi5qc29uXCIsZGF0YVR5cGU6XCJqc29ucFwiLHN1Y2Nlc3M6ZnVuY3Rpb24oZCl7YS50aHVtYnNSZWFkeT0hMCxDKGIse2ltZzpkWzBdLnRodW1ibmFpbF9sYXJnZSx0aHVtYjpkWzBdLnRodW1ibmFpbF9zbWFsbH0sYS5pLGMpfX0pOmEudGh1bWJzUmVhZHk9ITAse2ltZzplLHRodW1iOmZ9fWZ1bmN0aW9uIEMoYSxiLGMsZSl7Zm9yKHZhciBmPTAsZz1hLmxlbmd0aDtnPmY7ZisrKXt2YXIgaD1hW2ZdO2lmKGguaT09PWMmJmgudGh1bWJzUmVhZHkpe3ZhciBpPXt2aWRlb1JlYWR5OiEwfTtpW1hjXT1pW1pjXT1pW1ljXT0hMSxlLnNwbGljZShmLDEsZC5leHRlbmQoe30saCxpLGIpKTticmVha319fWZ1bmN0aW9uIEQoYSl7ZnVuY3Rpb24gYihhLGIsZSl7dmFyIGY9YS5jaGlsZHJlbihcImltZ1wiKS5lcSgwKSxnPWEuYXR0cihcImhyZWZcIiksaD1hLmF0dHIoXCJzcmNcIiksaT1mLmF0dHIoXCJzcmNcIiksaj1iLnZpZGVvLGs9ZT9BKGcsaj09PSEwKTohMTtrP2c9ITE6az1qLGMoYSxmLGQuZXh0ZW5kKGIse3ZpZGVvOmssaW1nOmIuaW1nfHxnfHxofHxpLHRodW1iOmIudGh1bWJ8fGl8fGh8fGd9KSl9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9Yy50aHVtYiYmYy5pbWchPT1jLnRodW1iLGY9bihjLndpZHRofHxhLmF0dHIoXCJ3aWR0aFwiKSksZz1uKGMuaGVpZ2h0fHxhLmF0dHIoXCJoZWlnaHRcIikpO2QuZXh0ZW5kKGMse3dpZHRoOmYsaGVpZ2h0OmcsdGh1bWJyYXRpbzpTKGMudGh1bWJyYXRpb3x8bihjLnRodW1id2lkdGh8fGImJmIuYXR0cihcIndpZHRoXCIpfHxlfHxmKS9uKGMudGh1bWJoZWlnaHR8fGImJmIuYXR0cihcImhlaWdodFwiKXx8ZXx8ZykpfSl9dmFyIGU9W107cmV0dXJuIGEuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGE9ZCh0aGlzKSxmPVIoZC5leHRlbmQoYS5kYXRhKCkse2lkOmEuYXR0cihcImlkXCIpfSkpO2lmKGEuaXMoXCJhLCBpbWdcIikpYihhLGYsITApO2Vsc2V7aWYoYS5pcyhcIjplbXB0eVwiKSlyZXR1cm47YyhhLG51bGwsZC5leHRlbmQoZix7aHRtbDp0aGlzLF9odG1sOmEuaHRtbCgpfSkpfWUucHVzaChmKX0pLGV9ZnVuY3Rpb24gRShhKXtyZXR1cm4gMD09PWEub2Zmc2V0V2lkdGgmJjA9PT1hLm9mZnNldEhlaWdodH1mdW5jdGlvbiBGKGEpe3JldHVybiFkLmNvbnRhaW5zKGIuZG9jdW1lbnRFbGVtZW50LGEpfWZ1bmN0aW9uIEcoYSxiLGMsZCl7cmV0dXJuIEcuaXx8KEcuaT0xLEcuaWk9WyEwXSksZD1kfHxHLmksXCJ1bmRlZmluZWRcIj09dHlwZW9mIEcuaWlbZF0mJihHLmlpW2RdPSEwKSxhKCk/YigpOkcuaWlbZF0mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtHLmlpW2RdJiZHKGEsYixjLGQpfSxjfHwxMDApLEcuaSsrfWZ1bmN0aW9uIEgoYSl7Yy5yZXBsYWNlKGMucHJvdG9jb2wrXCIvL1wiK2MuaG9zdCtjLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8/LyxcIi9cIikrYy5zZWFyY2grXCIjXCIrYSl9ZnVuY3Rpb24gSShhLGIsYyxkKXt2YXIgZT1hLmRhdGEoKSxmPWUubWVhc3VyZXM7aWYoZiYmKCFlLmx8fGUubC5XIT09Zi53aWR0aHx8ZS5sLkghPT1mLmhlaWdodHx8ZS5sLnIhPT1mLnJhdGlvfHxlLmwudyE9PWIud3x8ZS5sLmghPT1iLmh8fGUubC5tIT09Y3x8ZS5sLnAhPT1kKSl7dmFyIGc9Zi53aWR0aCxpPWYuaGVpZ2h0LGo9Yi53L2IuaCxrPWYucmF0aW8+PWosbD1cInNjYWxlZG93blwiPT09YyxtPVwiY29udGFpblwiPT09YyxuPVwiY292ZXJcIj09PWMsbz0kKGQpO2smJihsfHxtKXx8IWsmJm4/KGc9aChiLncsMCxsP2c6MS8wKSxpPWcvZi5yYXRpbyk6KGsmJm58fCFrJiYobHx8bSkpJiYoaT1oKGIuaCwwLGw/aToxLzApLGc9aSpmLnJhdGlvKSxhLmNzcyh7d2lkdGg6ZyxoZWlnaHQ6aSxsZWZ0OnAoby54LGIudy1nKSx0b3A6cChvLnksYi5oLWkpfSksZS5sPXtXOmYud2lkdGgsSDpmLmhlaWdodCxyOmYucmF0aW8sdzpiLncsaDpiLmgsbTpjLHA6ZH19cmV0dXJuITB9ZnVuY3Rpb24gSihhLGIpe3ZhciBjPWFbMF07Yy5zdHlsZVNoZWV0P2Muc3R5bGVTaGVldC5jc3NUZXh0PWI6YS5odG1sKGIpfWZ1bmN0aW9uIEsoYSxiLGMpe3JldHVybiBiPT09Yz8hMTpiPj1hP1wibGVmdFwiOmE+PWM/XCJyaWdodFwiOlwibGVmdCByaWdodFwifWZ1bmN0aW9uIEwoYSxiLGMsZCl7aWYoIWMpcmV0dXJuITE7aWYoIWlzTmFOKGEpKXJldHVybiBhLShkPzA6MSk7Zm9yKHZhciBlLGY9MCxnPWIubGVuZ3RoO2c+ZjtmKyspe3ZhciBoPWJbZl07aWYoaC5pZD09PWEpe2U9ZjticmVha319cmV0dXJuIGV9ZnVuY3Rpb24gTShhLGIsYyl7Yz1jfHx7fSxhLmVhY2goZnVuY3Rpb24oKXt2YXIgYSxlPWQodGhpcyksZj1lLmRhdGEoKTtmLmNsaWNrT258fChmLmNsaWNrT249ITAsZC5leHRlbmQoY2IoZSx7b25TdGFydDpmdW5jdGlvbihiKXthPWIsKGMub25TdGFydHx8ZykuY2FsbCh0aGlzLGIpfSxvbk1vdmU6Yy5vbk1vdmV8fGcsb25Ub3VjaEVuZDpjLm9uVG91Y2hFbmR8fGcsb25FbmQ6ZnVuY3Rpb24oYyl7Yy5tb3ZlZHx8Yi5jYWxsKHRoaXMsYSl9fSkse25vTW92ZTohMH0pKX0pfWZ1bmN0aW9uIE4oYSxiKXtyZXR1cm4nPGRpdiBjbGFzcz1cIicrYSsnXCI+JysoYnx8XCJcIikrXCI8L2Rpdj5cIn1mdW5jdGlvbiBPKGEpe2Zvcih2YXIgYj1hLmxlbmd0aDtiOyl7dmFyIGM9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmItLSksZD1hW2JdO2FbYl09YVtjXSxhW2NdPWR9cmV0dXJuIGF9ZnVuY3Rpb24gUChhKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKSYmZC5tYXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gZC5leHRlbmQoe30sYSl9KX1mdW5jdGlvbiBRKGEsYixjKXthLnNjcm9sbExlZnQoYnx8MCkuc2Nyb2xsVG9wKGN8fDApfWZ1bmN0aW9uIFIoYSl7aWYoYSl7dmFyIGI9e307cmV0dXJuIGQuZWFjaChhLGZ1bmN0aW9uKGEsYyl7YlthLnRvTG93ZXJDYXNlKCldPWN9KSxifX1mdW5jdGlvbiBTKGEpe2lmKGEpe3ZhciBiPSthO3JldHVybiBpc05hTihiKT8oYj1hLnNwbGl0KFwiL1wiKSwrYlswXS8rYlsxXXx8ZSk6Yn19ZnVuY3Rpb24gVChhLGIsYyxkKXtiJiYoYS5hZGRFdmVudExpc3RlbmVyP2EuYWRkRXZlbnRMaXN0ZW5lcihiLGMsISFkKTphLmF0dGFjaEV2ZW50KFwib25cIitiLGMpKX1mdW5jdGlvbiBVKGEpe3JldHVybiEhYS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX1mdW5jdGlvbiBWKGEpe3JldHVybnt0YWJpbmRleDotMSphK1wiXCIsZGlzYWJsZWQ6YX19ZnVuY3Rpb24gVyhhLGIpe1QoYSxcImtleXVwXCIsZnVuY3Rpb24oYyl7VShhKXx8MTM9PWMua2V5Q29kZSYmYi5jYWxsKGEsYyl9KX1mdW5jdGlvbiBYKGEsYil7VChhLFwiZm9jdXNcIixhLm9uZm9jdXNpbj1mdW5jdGlvbihjKXtiLmNhbGwoYSxjKX0sITApfWZ1bmN0aW9uIFkoYSxiKXthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExLGImJmEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpfWZ1bmN0aW9uIFooYSl7cmV0dXJuIGE/XCI+XCI6XCI8XCJ9ZnVuY3Rpb24gJChhKXtyZXR1cm4gYT0oYStcIlwiKS5zcGxpdCgvXFxzKy8pLHt4OnEoYVswXSl8fGJkLHk6cShhWzFdKXx8YmR9fWZ1bmN0aW9uIF8oYSxiKXt2YXIgYz1hLmRhdGEoKSxlPU1hdGgucm91bmQoYi5wb3MpLGY9ZnVuY3Rpb24oKXtjLnNsaWRpbmc9ITEsKGIub25FbmR8fGcpKCl9O1widW5kZWZpbmVkXCIhPXR5cGVvZiBiLm92ZXJQb3MmJmIub3ZlclBvcyE9PWIucG9zJiYoZT1iLm92ZXJQb3MsZj1mdW5jdGlvbigpe18oYSxkLmV4dGVuZCh7fSxiLHtvdmVyUG9zOmIucG9zLHRpbWU6TWF0aC5tYXgoUWMsYi50aW1lLzIpfSkpfSk7dmFyIGg9ZC5leHRlbmQoayhlKSxiLndpZHRoJiZ7d2lkdGg6Yi53aWR0aH0pO2Muc2xpZGluZz0hMCxJYz8oYS5jc3MoZC5leHRlbmQobChiLnRpbWUpLGgpKSxiLnRpbWU+MTA/dShhLFwidHJhbnNmb3JtXCIsZixiLnRpbWUpOmYoKSk6YS5zdG9wKCkuYW5pbWF0ZShoLGIudGltZSxfYyxmKX1mdW5jdGlvbiBhYihhLGIsYyxlLGYsaCl7dmFyIGk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGg7aWYoaXx8KGYucHVzaChhcmd1bWVudHMpLEFycmF5LnByb3RvdHlwZS5wdXNoLmNhbGwoYXJndW1lbnRzLGYubGVuZ3RoKSwhKGYubGVuZ3RoPjEpKSl7YT1hfHxkKGEpLGI9Ynx8ZChiKTt2YXIgaj1hWzBdLGs9YlswXSxsPVwiY3Jvc3NmYWRlXCI9PT1lLm1ldGhvZCxtPWZ1bmN0aW9uKCl7aWYoIW0uZG9uZSl7bS5kb25lPSEwO3ZhciBhPShpfHxmLnNoaWZ0KCkpJiZmLnNoaWZ0KCk7YSYmYWIuYXBwbHkodGhpcyxhKSwoZS5vbkVuZHx8ZykoISFhKX19LG49ZS50aW1lLyhofHwxKTtjLnJlbW92ZUNsYXNzKFJiK1wiIFwiK1FiKSxhLnN0b3AoKS5hZGRDbGFzcyhSYiksYi5zdG9wKCkuYWRkQ2xhc3MoUWIpLGwmJmsmJmEuZmFkZVRvKDAsMCksYS5mYWRlVG8obD9uOjAsMSxsJiZtKSxiLmZhZGVUbyhuLDAsbSksaiYmbHx8a3x8bSgpfX1mdW5jdGlvbiBiYihhKXt2YXIgYj0oYS50b3VjaGVzfHxbXSlbMF18fGE7YS5feD1iLnBhZ2VYLGEuX3k9Yi5jbGllbnRZLGEuX25vdz1kLm5vdygpfWZ1bmN0aW9uIGNiKGEsYyl7ZnVuY3Rpb24gZShhKXtyZXR1cm4gbT1kKGEudGFyZ2V0KSx1LmNoZWNrZWQ9cD1xPXM9ITEsa3x8dS5mbG93fHxhLnRvdWNoZXMmJmEudG91Y2hlcy5sZW5ndGg+MXx8YS53aGljaD4xfHxlZCYmZWQudHlwZSE9PWEudHlwZSYmZ2R8fChwPWMuc2VsZWN0JiZtLmlzKGMuc2VsZWN0LHQpKT9wOihvPVwidG91Y2hzdGFydFwiPT09YS50eXBlLHE9bS5pcyhcImEsIGEgKlwiLHQpLG49dS5jb250cm9sLHI9dS5ub01vdmV8fHUubm9Td2lwZXx8bj8xNjp1LnNuYXA/MDo0LGJiKGEpLGw9ZWQ9YSxmZD1hLnR5cGUucmVwbGFjZSgvZG93bnxzdGFydC8sXCJtb3ZlXCIpLnJlcGxhY2UoL0Rvd24vLFwiTW92ZVwiKSwoYy5vblN0YXJ0fHxnKS5jYWxsKHQsYSx7Y29udHJvbDpuLCR0YXJnZXQ6bX0pLGs9dS5mbG93PSEwLHZvaWQoKCFvfHx1LmdvKSYmWShhKSkpfWZ1bmN0aW9uIGYoYSl7aWYoYS50b3VjaGVzJiZhLnRvdWNoZXMubGVuZ3RoPjF8fE5jJiYhYS5pc1ByaW1hcnl8fGZkIT09YS50eXBlfHwhaylyZXR1cm4gayYmaCgpLHZvaWQoYy5vblRvdWNoRW5kfHxnKSgpO2JiKGEpO3ZhciBiPU1hdGguYWJzKGEuX3gtbC5feCksZD1NYXRoLmFicyhhLl95LWwuX3kpLGU9Yi1kLGY9KHUuZ298fHUueHx8ZT49MCkmJiF1Lm5vU3dpcGUsaT0wPmU7byYmIXUuY2hlY2tlZD8oaz1mKSYmWShhKTooWShhKSwoYy5vbk1vdmV8fGcpLmNhbGwodCxhLHt0b3VjaDpvfSkpLCFzJiZNYXRoLnNxcnQoTWF0aC5wb3coYiwyKStNYXRoLnBvdyhkLDIpKT5yJiYocz0hMCksdS5jaGVja2VkPXUuY2hlY2tlZHx8Znx8aX1mdW5jdGlvbiBoKGEpeyhjLm9uVG91Y2hFbmR8fGcpKCk7dmFyIGI9azt1LmNvbnRyb2w9az0hMSxiJiYodS5mbG93PSExKSwhYnx8cSYmIXUuY2hlY2tlZHx8KGEmJlkoYSksZ2Q9ITAsY2xlYXJUaW1lb3V0KGhkKSxoZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Z2Q9ITF9LDFlMyksKGMub25FbmR8fGcpLmNhbGwodCx7bW92ZWQ6cywkdGFyZ2V0Om0sY29udHJvbDpuLHRvdWNoOm8sc3RhcnRFdmVudDpsLGFib3J0ZWQ6IWF8fFwiTVNQb2ludGVyQ2FuY2VsXCI9PT1hLnR5cGV9KSl9ZnVuY3Rpb24gaSgpe3UuZmxvd3x8c2V0VGltZW91dChmdW5jdGlvbigpe3UuZmxvdz0hMH0sMTApfWZ1bmN0aW9uIGooKXt1LmZsb3cmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt1LmZsb3c9ITF9LFBjKX12YXIgayxsLG0sbixvLHAscSxyLHMsdD1hWzBdLHU9e307cmV0dXJuIE5jPyhUKHQsXCJNU1BvaW50ZXJEb3duXCIsZSksVChiLFwiTVNQb2ludGVyTW92ZVwiLGYpLFQoYixcIk1TUG9pbnRlckNhbmNlbFwiLGgpLFQoYixcIk1TUG9pbnRlclVwXCIsaCkpOihUKHQsXCJ0b3VjaHN0YXJ0XCIsZSksVCh0LFwidG91Y2htb3ZlXCIsZiksVCh0LFwidG91Y2hlbmRcIixoKSxUKGIsXCJ0b3VjaHN0YXJ0XCIsaSksVChiLFwidG91Y2hlbmRcIixqKSxUKGIsXCJ0b3VjaGNhbmNlbFwiLGopLEVjLm9uKFwic2Nyb2xsXCIsaiksYS5vbihcIm1vdXNlZG93blwiLGUpLEZjLm9uKFwibW91c2Vtb3ZlXCIsZikub24oXCJtb3VzZXVwXCIsaCkpLGEub24oXCJjbGlja1wiLFwiYVwiLGZ1bmN0aW9uKGEpe3UuY2hlY2tlZCYmWShhKX0pLHV9ZnVuY3Rpb24gZGIoYSxiKXtmdW5jdGlvbiBjKGMsZCl7QT0hMCxqPWw9Yy5feCxxPWMuX25vdyxwPVtbcSxqXV0sbT1uPUQubm9Nb3ZlfHxkPzA6dihhLChiLmdldFBvc3x8ZykoKSksKGIub25TdGFydHx8ZykuY2FsbChCLGMpfWZ1bmN0aW9uIGUoYSxiKXtzPUQubWluLHQ9RC5tYXgsdT1ELnNuYXAsdz1hLmFsdEtleSxBPXo9ITEseT1iLmNvbnRyb2wseXx8Qy5zbGlkaW5nfHxjKGEpfWZ1bmN0aW9uIGYoZCxlKXtELm5vU3dpcGV8fChBfHxjKGQpLGw9ZC5feCxwLnB1c2goW2QuX25vdyxsXSksbj1tLShqLWwpLG89SyhuLHMsdCkscz49bj9uPXgobixzKTpuPj10JiYobj14KG4sdCkpLEQubm9Nb3ZlfHwoYS5jc3MoayhuKSksenx8KHo9ITAsZS50b3VjaHx8TmN8fGEuYWRkQ2xhc3MoZWMpKSwoYi5vbk1vdmV8fGcpLmNhbGwoQixkLHtwb3M6bixlZGdlOm99KSkpfWZ1bmN0aW9uIGkoZSl7aWYoIUQubm9Td2lwZXx8IWUubW92ZWQpe0F8fGMoZS5zdGFydEV2ZW50LCEwKSxlLnRvdWNofHxOY3x8YS5yZW1vdmVDbGFzcyhlYykscj1kLm5vdygpO2Zvcih2YXIgZixpLGosayxvLHEsdix4LHksej1yLVBjLEM9bnVsbCxFPVFjLEY9Yi5mcmljdGlvbixHPXAubGVuZ3RoLTE7Rz49MDtHLS0pe2lmKGY9cFtHXVswXSxpPU1hdGguYWJzKGYteiksbnVsbD09PUN8fGo+aSlDPWYsaz1wW0ddWzFdO2Vsc2UgaWYoQz09PXp8fGk+ailicmVhaztqPWl9dj1oKG4scyx0KTt2YXIgSD1rLWwsST1IPj0wLEo9ci1DLEs9Sj5QYyxMPSFLJiZuIT09bSYmdj09PW47dSYmKHY9aChNYXRoW0w/ST9cImZsb29yXCI6XCJjZWlsXCI6XCJyb3VuZFwiXShuL3UpKnUscyx0KSxzPXQ9diksTCYmKHV8fHY9PT1uKSYmKHk9LShIL0opLEUqPWgoTWF0aC5hYnMoeSksYi50aW1lTG93LGIudGltZUhpZ2gpLG89TWF0aC5yb3VuZChuK3kqRS9GKSx1fHwodj1vKSwoIUkmJm8+dHx8SSYmcz5vKSYmKHE9ST9zOnQseD1vLXEsdXx8KHY9cSkseD1oKHYrLjAzKngscS01MCxxKzUwKSxFPU1hdGguYWJzKChuLXgpLyh5L0YpKSkpLEUqPXc/MTA6MSwoYi5vbkVuZHx8ZykuY2FsbChCLGQuZXh0ZW5kKGUse21vdmVkOmUubW92ZWR8fEsmJnUscG9zOm4sbmV3UG9zOnYsb3ZlclBvczp4LHRpbWU6RX0pKX19dmFyIGosbCxtLG4sbyxwLHEscixzLHQsdSx3LHkseixBLEI9YVswXSxDPWEuZGF0YSgpLEQ9e307cmV0dXJuIEQ9ZC5leHRlbmQoY2IoYi4kd3JhcCxkLmV4dGVuZCh7fSxiLHtvblN0YXJ0OmUsb25Nb3ZlOmYsb25FbmQ6aX0pKSxEKX1mdW5jdGlvbiBlYihhLGIpe3ZhciBjLGUsZixoPWFbMF0saT17cHJldmVudDp7fX07cmV0dXJuIFQoaCxPYyxmdW5jdGlvbihhKXt2YXIgaD1hLndoZWVsRGVsdGFZfHwtMSphLmRlbHRhWXx8MCxqPWEud2hlZWxEZWx0YVh8fC0xKmEuZGVsdGFYfHwwLGs9TWF0aC5hYnMoaikmJiFNYXRoLmFicyhoKSxsPVooMD5qKSxtPWU9PT1sLG49ZC5ub3coKSxvPVBjPm4tZjtlPWwsZj1uLGsmJmkub2smJighaS5wcmV2ZW50W2xdfHxjKSYmKFkoYSwhMCksYyYmbSYmb3x8KGIuc2hpZnQmJihjPSEwLGNsZWFyVGltZW91dChpLnQpLGkudD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yz0hMX0sUmMpKSwoYi5vbkVuZHx8ZykoYSxiLnNoaWZ0P2w6aikpKX0pLGl9ZnVuY3Rpb24gZmIoKXtkLmVhY2goZC5Gb3RvcmFtYS5pbnN0YW5jZXMsZnVuY3Rpb24oYSxiKXtiLmluZGV4PWF9KX1mdW5jdGlvbiBnYihhKXtkLkZvdG9yYW1hLmluc3RhbmNlcy5wdXNoKGEpLGZiKCl9ZnVuY3Rpb24gaGIoYSl7ZC5Gb3RvcmFtYS5pbnN0YW5jZXMuc3BsaWNlKGEuaW5kZXgsMSksZmIoKX12YXIgaWI9XCJmb3RvcmFtYVwiLGpiPVwiZnVsbHNjcmVlblwiLGtiPWliK1wiX193cmFwXCIsbGI9a2IrXCItLWNzczJcIixtYj1rYitcIi0tY3NzM1wiLG5iPWtiK1wiLS12aWRlb1wiLG9iPWtiK1wiLS1mYWRlXCIscGI9a2IrXCItLXNsaWRlXCIscWI9a2IrXCItLW5vLWNvbnRyb2xzXCIscmI9a2IrXCItLW5vLXNoYWRvd3NcIixzYj1rYitcIi0tcGFuLXlcIix0Yj1rYitcIi0tcnRsXCIsdWI9a2IrXCItLW9ubHktYWN0aXZlXCIsdmI9a2IrXCItLW5vLWNhcHRpb25zXCIsd2I9a2IrXCItLXRvZ2dsZS1hcnJvd3NcIix4Yj1pYitcIl9fc3RhZ2VcIix5Yj14YitcIl9fZnJhbWVcIix6Yj15YitcIi0tdmlkZW9cIixBYj14YitcIl9fc2hhZnRcIixCYj1pYitcIl9fZ3JhYlwiLENiPWliK1wiX19wb2ludGVyXCIsRGI9aWIrXCJfX2FyclwiLEViPURiK1wiLS1kaXNhYmxlZFwiLEZiPURiK1wiLS1wcmV2XCIsR2I9RGIrXCItLW5leHRcIixIYj1pYitcIl9fbmF2XCIsSWI9SGIrXCItd3JhcFwiLEpiPUhiK1wiX19zaGFmdFwiLEtiPUhiK1wiLS1kb3RzXCIsTGI9SGIrXCItLXRodW1ic1wiLE1iPUhiK1wiX19mcmFtZVwiLE5iPU1iK1wiLS1kb3RcIixPYj1NYitcIi0tdGh1bWJcIixQYj1pYitcIl9fZmFkZVwiLFFiPVBiK1wiLWZyb250XCIsUmI9UGIrXCItcmVhclwiLFNiPWliK1wiX19zaGFkb3dcIixUYj1TYitcInNcIixVYj1UYitcIi0tbGVmdFwiLFZiPVRiK1wiLS1yaWdodFwiLFdiPWliK1wiX19hY3RpdmVcIixYYj1pYitcIl9fc2VsZWN0XCIsWWI9aWIrXCItLWhpZGRlblwiLFpiPWliK1wiLS1mdWxsc2NyZWVuXCIsJGI9aWIrXCJfX2Z1bGxzY3JlZW4taWNvblwiLF9iPWliK1wiX19lcnJvclwiLGFjPWliK1wiX19sb2FkaW5nXCIsYmM9aWIrXCJfX2xvYWRlZFwiLGNjPWJjK1wiLS1mdWxsXCIsZGM9YmMrXCItLWltZ1wiLGVjPWliK1wiX19ncmFiYmluZ1wiLGZjPWliK1wiX19pbWdcIixnYz1mYytcIi0tZnVsbFwiLGhjPWliK1wiX19kb3RcIixpYz1pYitcIl9fdGh1bWJcIixqYz1pYytcIi1ib3JkZXJcIixrYz1pYitcIl9faHRtbFwiLGxjPWliK1wiX192aWRlb1wiLG1jPWxjK1wiLXBsYXlcIixuYz1sYytcIi1jbG9zZVwiLG9jPWliK1wiX19jYXB0aW9uXCIscGM9aWIrXCJfX2NhcHRpb25fX3dyYXBcIixxYz1pYitcIl9fc3Bpbm5lclwiLHJjPSdcIiB0YWJpbmRleD1cIjBcIiByb2xlPVwiYnV0dG9uJyxzYz1kJiZkLmZuLmpxdWVyeS5zcGxpdChcIi5cIik7aWYoIXNjfHxzY1swXTwxfHwxPT1zY1swXSYmc2NbMV08OCl0aHJvd1wiRm90b3JhbWEgcmVxdWlyZXMgalF1ZXJ5IDEuOCBvciBsYXRlciBhbmQgd2lsbCBub3QgcnVuIHdpdGhvdXQgaXQuXCI7dmFyIHRjPXt9LHVjPWZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3IuY3NzVGV4dD1hfWZ1bmN0aW9uIGUoYSxiKXtyZXR1cm4gdHlwZW9mIGE9PT1ifWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4hIX4oXCJcIithKS5pbmRleE9mKGIpfWZ1bmN0aW9uIGcoYSxiKXtmb3IodmFyIGQgaW4gYSl7dmFyIGU9YVtkXTtpZighZihlLFwiLVwiKSYmcltlXSE9PWMpcmV0dXJuXCJwZnhcIj09Yj9lOiEwfXJldHVybiExfWZ1bmN0aW9uIGgoYSxiLGQpe2Zvcih2YXIgZiBpbiBhKXt2YXIgZz1iW2FbZl1dO2lmKGchPT1jKXJldHVybiBkPT09ITE/YVtmXTplKGcsXCJmdW5jdGlvblwiKT9nLmJpbmQoZHx8Yik6Z31yZXR1cm4hMX1mdW5jdGlvbiBpKGEsYixjKXt2YXIgZD1hLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Euc2xpY2UoMSksZj0oYStcIiBcIit1LmpvaW4oZCtcIiBcIikrZCkuc3BsaXQoXCIgXCIpO3JldHVybiBlKGIsXCJzdHJpbmdcIil8fGUoYixcInVuZGVmaW5lZFwiKT9nKGYsYik6KGY9KGErXCIgXCIrdi5qb2luKGQrXCIgXCIpK2QpLnNwbGl0KFwiIFwiKSxoKGYsYixjKSl9dmFyIGosayxsLG09XCIyLjYuMlwiLG49e30sbz1iLmRvY3VtZW50RWxlbWVudCxwPVwibW9kZXJuaXpyXCIscT1iLmNyZWF0ZUVsZW1lbnQocCkscj1xLnN0eWxlLHM9KHt9LnRvU3RyaW5nLFwiIC13ZWJraXQtIC1tb3otIC1vLSAtbXMtIFwiLnNwbGl0KFwiIFwiKSksdD1cIldlYmtpdCBNb3ogTyBtc1wiLHU9dC5zcGxpdChcIiBcIiksdj10LnRvTG93ZXJDYXNlKCkuc3BsaXQoXCIgXCIpLHc9e30seD1bXSx5PXguc2xpY2Usej1mdW5jdGlvbihhLGMsZCxlKXt2YXIgZixnLGgsaSxqPWIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxrPWIuYm9keSxsPWt8fGIuY3JlYXRlRWxlbWVudChcImJvZHlcIik7aWYocGFyc2VJbnQoZCwxMCkpZm9yKDtkLS07KWg9Yi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGguaWQ9ZT9lW2RdOnArKGQrMSksai5hcHBlbmRDaGlsZChoKTtyZXR1cm4gZj1bXCImIzE3MztcIiwnPHN0eWxlIGlkPVwicycscCwnXCI+JyxhLFwiPC9zdHlsZT5cIl0uam9pbihcIlwiKSxqLmlkPXAsKGs/ajpsKS5pbm5lckhUTUwrPWYsbC5hcHBlbmRDaGlsZChqKSxrfHwobC5zdHlsZS5iYWNrZ3JvdW5kPVwiXCIsbC5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLGk9by5zdHlsZS5vdmVyZmxvdyxvLnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCIsby5hcHBlbmRDaGlsZChsKSksZz1jKGosYSksaz9qLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaik6KGwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsKSxvLnN0eWxlLm92ZXJmbG93PWkpLCEhZ30sQT17fS5oYXNPd25Qcm9wZXJ0eTtsPWUoQSxcInVuZGVmaW5lZFwiKXx8ZShBLmNhbGwsXCJ1bmRlZmluZWRcIik/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiBpbiBhJiZlKGEuY29uc3RydWN0b3IucHJvdG90eXBlW2JdLFwidW5kZWZpbmVkXCIpfTpmdW5jdGlvbihhLGIpe3JldHVybiBBLmNhbGwoYSxiKX0sRnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGIpdGhyb3cgbmV3IFR5cGVFcnJvcjt2YXIgYz15LmNhbGwoYXJndW1lbnRzLDEpLGQ9ZnVuY3Rpb24oKXtpZih0aGlzIGluc3RhbmNlb2YgZCl7dmFyIGU9ZnVuY3Rpb24oKXt9O2UucHJvdG90eXBlPWIucHJvdG90eXBlO3ZhciBmPW5ldyBlLGc9Yi5hcHBseShmLGMuY29uY2F0KHkuY2FsbChhcmd1bWVudHMpKSk7cmV0dXJuIE9iamVjdChnKT09PWc/ZzpmfXJldHVybiBiLmFwcGx5KGEsYy5jb25jYXQoeS5jYWxsKGFyZ3VtZW50cykpKX07cmV0dXJuIGR9KSx3LmNzc3RyYW5zZm9ybXMzZD1mdW5jdGlvbigpe3ZhciBhPSEhaShcInBlcnNwZWN0aXZlXCIpO3JldHVybiBhfTtmb3IodmFyIEIgaW4gdylsKHcsQikmJihrPUIudG9Mb3dlckNhc2UoKSxuW2tdPXdbQl0oKSx4LnB1c2goKG5ba10/XCJcIjpcIm5vLVwiKStrKSk7cmV0dXJuIG4uYWRkVGVzdD1mdW5jdGlvbihhLGIpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKWZvcih2YXIgZCBpbiBhKWwoYSxkKSYmbi5hZGRUZXN0KGQsYVtkXSk7ZWxzZXtpZihhPWEudG9Mb3dlckNhc2UoKSxuW2FdIT09YylyZXR1cm4gbjtiPVwiZnVuY3Rpb25cIj09dHlwZW9mIGI/YigpOmIsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGVuYWJsZUNsYXNzZXMmJmVuYWJsZUNsYXNzZXMmJihvLmNsYXNzTmFtZSs9XCIgXCIrKGI/XCJcIjpcIm5vLVwiKSthKSxuW2FdPWJ9cmV0dXJuIG59LGQoXCJcIikscT1qPW51bGwsbi5fdmVyc2lvbj1tLG4uX3ByZWZpeGVzPXMsbi5fZG9tUHJlZml4ZXM9dixuLl9jc3NvbVByZWZpeGVzPXUsbi50ZXN0UHJvcD1mdW5jdGlvbihhKXtyZXR1cm4gZyhbYV0pfSxuLnRlc3RBbGxQcm9wcz1pLG4udGVzdFN0eWxlcz16LG4ucHJlZml4ZWQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiP2koYSxiLGMpOmkoYSxcInBmeFwiKX0sbn0oYSxiKSx2Yz17b2s6ITEsaXM6ZnVuY3Rpb24oKXtyZXR1cm4hMX0scmVxdWVzdDpmdW5jdGlvbigpe30sY2FuY2VsOmZ1bmN0aW9uKCl7fSxldmVudDpcIlwiLHByZWZpeDpcIlwifSx3Yz1cIndlYmtpdCBtb3ogbyBtcyBraHRtbFwiLnNwbGl0KFwiIFwiKTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5jYW5jZWxGdWxsU2NyZWVuKXZjLm9rPSEwO2Vsc2UgZm9yKHZhciB4Yz0wLHljPXdjLmxlbmd0aDt5Yz54Yzt4YysrKWlmKHZjLnByZWZpeD13Y1t4Y10sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGJbdmMucHJlZml4K1wiQ2FuY2VsRnVsbFNjcmVlblwiXSl7dmMub2s9ITA7YnJlYWt9dmMub2smJih2Yy5ldmVudD12Yy5wcmVmaXgrXCJmdWxsc2NyZWVuY2hhbmdlXCIsdmMuaXM9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5wcmVmaXgpe2Nhc2VcIlwiOnJldHVybiBiLmZ1bGxTY3JlZW47Y2FzZVwid2Via2l0XCI6cmV0dXJuIGIud2Via2l0SXNGdWxsU2NyZWVuO2RlZmF1bHQ6cmV0dXJuIGJbdGhpcy5wcmVmaXgrXCJGdWxsU2NyZWVuXCJdfX0sdmMucmVxdWVzdD1mdW5jdGlvbihhKXtyZXR1cm5cIlwiPT09dGhpcy5wcmVmaXg/YS5yZXF1ZXN0RnVsbFNjcmVlbigpOmFbdGhpcy5wcmVmaXgrXCJSZXF1ZXN0RnVsbFNjcmVlblwiXSgpfSx2Yy5jYW5jZWw9ZnVuY3Rpb24oKXtyZXR1cm5cIlwiPT09dGhpcy5wcmVmaXg/Yi5jYW5jZWxGdWxsU2NyZWVuKCk6Ylt0aGlzLnByZWZpeCtcIkNhbmNlbEZ1bGxTY3JlZW5cIl0oKX0pO3ZhciB6YyxBYz17bGluZXM6MTIsbGVuZ3RoOjUsd2lkdGg6MixyYWRpdXM6Nyxjb3JuZXJzOjEscm90YXRlOjE1LGNvbG9yOlwicmdiYSgxMjgsIDEyOCwgMTI4LCAuNzUpXCIsaHdhY2NlbDohMH0sQmM9e3RvcDpcImF1dG9cIixsZWZ0OlwiYXV0b1wiLGNsYXNzTmFtZTpcIlwifTshZnVuY3Rpb24oYSxiKXt6Yz1iKCl9KHRoaXMsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEsYyl7dmFyIGQsZT1iLmNyZWF0ZUVsZW1lbnQoYXx8XCJkaXZcIik7Zm9yKGQgaW4gYyllW2RdPWNbZF07cmV0dXJuIGV9ZnVuY3Rpb24gYyhhKXtmb3IodmFyIGI9MSxjPWFyZ3VtZW50cy5sZW5ndGg7Yz5iO2IrKylhLmFwcGVuZENoaWxkKGFyZ3VtZW50c1tiXSk7cmV0dXJuIGF9ZnVuY3Rpb24gZChhLGIsYyxkKXt2YXIgZT1bXCJvcGFjaXR5XCIsYix+figxMDAqYSksYyxkXS5qb2luKFwiLVwiKSxmPS4wMStjL2QqMTAwLGc9TWF0aC5tYXgoMS0oMS1hKS9iKigxMDAtZiksYSksaD1tLnN1YnN0cmluZygwLG0uaW5kZXhPZihcIkFuaW1hdGlvblwiKSkudG9Mb3dlckNhc2UoKSxpPWgmJlwiLVwiK2grXCItXCJ8fFwiXCI7cmV0dXJuIG9bZV18fChwLmluc2VydFJ1bGUoXCJAXCIraStcImtleWZyYW1lcyBcIitlK1wiezAle29wYWNpdHk6XCIrZytcIn1cIitmK1wiJXtvcGFjaXR5OlwiK2ErXCJ9XCIrKGYrLjAxKStcIiV7b3BhY2l0eToxfVwiKyhmK2IpJTEwMCtcIiV7b3BhY2l0eTpcIithK1wifTEwMCV7b3BhY2l0eTpcIitnK1wifX1cIixwLmNzc1J1bGVzLmxlbmd0aCksb1tlXT0xKSxlfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYyxkLGY9YS5zdHlsZTtmb3IoYj1iLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZD0wO2Q8bi5sZW5ndGg7ZCsrKWlmKGM9bltkXStiLGZbY10hPT1lKXJldHVybiBjO3JldHVybiBmW2JdIT09ZT9iOnZvaWQgMH1mdW5jdGlvbiBnKGEsYil7Zm9yKHZhciBjIGluIGIpYS5zdHlsZVtmKGEsYyl8fGNdPWJbY107cmV0dXJuIGF9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9MTtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKXt2YXIgYz1hcmd1bWVudHNbYl07Zm9yKHZhciBkIGluIGMpYVtkXT09PWUmJihhW2RdPWNbZF0pfXJldHVybiBhfWZ1bmN0aW9uIGkoYSl7Zm9yKHZhciBiPXt4OmEub2Zmc2V0TGVmdCx5OmEub2Zmc2V0VG9wfTthPWEub2Zmc2V0UGFyZW50OyliLngrPWEub2Zmc2V0TGVmdCxiLnkrPWEub2Zmc2V0VG9wO3JldHVybiBifWZ1bmN0aW9uIGooYSxiKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYT9hOmFbYiVhLmxlbmd0aF19ZnVuY3Rpb24gayhhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgdGhpcz9uZXcgayhhKTp2b2lkKHRoaXMub3B0cz1oKGF8fHt9LGsuZGVmYXVsdHMscSkpfWZ1bmN0aW9uIGwoKXtmdW5jdGlvbiBiKGIsYyl7cmV0dXJuIGEoXCI8XCIrYisnIHhtbG5zPVwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LmNvbTp2bWxcIiBjbGFzcz1cInNwaW4tdm1sXCI+JyxjKX1wLmFkZFJ1bGUoXCIuc3Bpbi12bWxcIixcImJlaGF2aW9yOnVybCgjZGVmYXVsdCNWTUwpXCIpLGsucHJvdG90eXBlLmxpbmVzPWZ1bmN0aW9uKGEsZCl7ZnVuY3Rpb24gZSgpe3JldHVybiBnKGIoXCJncm91cFwiLHtjb29yZHNpemU6aytcIiBcIitrLGNvb3Jkb3JpZ2luOi1pK1wiIFwiKy1pfSkse3dpZHRoOmssaGVpZ2h0Omt9KX1mdW5jdGlvbiBmKGEsZixoKXtjKG0sYyhnKGUoKSx7cm90YXRpb246MzYwL2QubGluZXMqYStcImRlZ1wiLGxlZnQ6fn5mfSksYyhnKGIoXCJyb3VuZHJlY3RcIix7YXJjc2l6ZTpkLmNvcm5lcnN9KSx7d2lkdGg6aSxoZWlnaHQ6ZC53aWR0aCxsZWZ0OmQucmFkaXVzLHRvcDotZC53aWR0aD4+MSxmaWx0ZXI6aH0pLGIoXCJmaWxsXCIse2NvbG9yOmooZC5jb2xvcixhKSxvcGFjaXR5OmQub3BhY2l0eX0pLGIoXCJzdHJva2VcIix7b3BhY2l0eTowfSkpKSl9dmFyIGgsaT1kLmxlbmd0aCtkLndpZHRoLGs9MippLGw9MiotKGQud2lkdGgrZC5sZW5ndGgpK1wicHhcIixtPWcoZSgpLHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOmwsbGVmdDpsfSk7aWYoZC5zaGFkb3cpZm9yKGg9MTtoPD1kLmxpbmVzO2grKylmKGgsLTIsXCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQmx1cihwaXhlbHJhZGl1cz0yLG1ha2VzaGFkb3c9MSxzaGFkb3dvcGFjaXR5PS4zKVwiKTtmb3IoaD0xO2g8PWQubGluZXM7aCsrKWYoaCk7cmV0dXJuIGMoYSxtKX0say5wcm90b3R5cGUub3BhY2l0eT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hLmZpcnN0Q2hpbGQ7ZD1kLnNoYWRvdyYmZC5saW5lc3x8MCxlJiZiK2Q8ZS5jaGlsZE5vZGVzLmxlbmd0aCYmKGU9ZS5jaGlsZE5vZGVzW2IrZF0sZT1lJiZlLmZpcnN0Q2hpbGQsZT1lJiZlLmZpcnN0Q2hpbGQsZSYmKGUub3BhY2l0eT1jKSl9fXZhciBtLG49W1wid2Via2l0XCIsXCJNb3pcIixcIm1zXCIsXCJPXCJdLG89e30scD1mdW5jdGlvbigpe3ZhciBkPWEoXCJzdHlsZVwiLHt0eXBlOlwidGV4dC9jc3NcIn0pO3JldHVybiBjKGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLGQpLGQuc2hlZXR8fGQuc3R5bGVTaGVldH0oKSxxPXtsaW5lczoxMixsZW5ndGg6Nyx3aWR0aDo1LHJhZGl1czoxMCxyb3RhdGU6MCxjb3JuZXJzOjEsY29sb3I6XCIjMDAwXCIsZGlyZWN0aW9uOjEsc3BlZWQ6MSx0cmFpbDoxMDAsb3BhY2l0eTouMjUsZnBzOjIwLHpJbmRleDoyZTksY2xhc3NOYW1lOlwic3Bpbm5lclwiLHRvcDpcImF1dG9cIixsZWZ0OlwiYXV0b1wiLHBvc2l0aW9uOlwicmVsYXRpdmVcIn07ay5kZWZhdWx0cz17fSxoKGsucHJvdG90eXBlLHtzcGluOmZ1bmN0aW9uKGIpe3RoaXMuc3RvcCgpO3ZhciBjLGQsZT10aGlzLGY9ZS5vcHRzLGg9ZS5lbD1nKGEoMCx7Y2xhc3NOYW1lOmYuY2xhc3NOYW1lfSkse3Bvc2l0aW9uOmYucG9zaXRpb24sd2lkdGg6MCx6SW5kZXg6Zi56SW5kZXh9KSxqPWYucmFkaXVzK2YubGVuZ3RoK2Yud2lkdGg7aWYoYiYmKGIuaW5zZXJ0QmVmb3JlKGgsYi5maXJzdENoaWxkfHxudWxsKSxkPWkoYiksYz1pKGgpLGcoaCx7bGVmdDooXCJhdXRvXCI9PWYubGVmdD9kLngtYy54KyhiLm9mZnNldFdpZHRoPj4xKTpwYXJzZUludChmLmxlZnQsMTApK2opK1wicHhcIix0b3A6KFwiYXV0b1wiPT1mLnRvcD9kLnktYy55KyhiLm9mZnNldEhlaWdodD4+MSk6cGFyc2VJbnQoZi50b3AsMTApK2opK1wicHhcIn0pKSxoLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByb2dyZXNzYmFyXCIpLGUubGluZXMoaCxlLm9wdHMpLCFtKXt2YXIgayxsPTAsbj0oZi5saW5lcy0xKSooMS1mLmRpcmVjdGlvbikvMixvPWYuZnBzLHA9by9mLnNwZWVkLHE9KDEtZi5vcGFjaXR5KS8ocCpmLnRyYWlsLzEwMCkscj1wL2YubGluZXM7IWZ1bmN0aW9uIHMoKXtsKys7Zm9yKHZhciBhPTA7YTxmLmxpbmVzO2ErKylrPU1hdGgubWF4KDEtKGwrKGYubGluZXMtYSkqciklcCpxLGYub3BhY2l0eSksZS5vcGFjaXR5KGgsYSpmLmRpcmVjdGlvbituLGssZik7ZS50aW1lb3V0PWUuZWwmJnNldFRpbWVvdXQocyx+figxZTMvbykpfSgpfXJldHVybiBlfSxzdG9wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbDtyZXR1cm4gYSYmKGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpLHRoaXMuZWw9ZSksdGhpc30sbGluZXM6ZnVuY3Rpb24oYixlKXtmdW5jdGlvbiBmKGIsYyl7cmV0dXJuIGcoYSgpLHtwb3NpdGlvbjpcImFic29sdXRlXCIsd2lkdGg6ZS5sZW5ndGgrZS53aWR0aCtcInB4XCIsaGVpZ2h0OmUud2lkdGgrXCJweFwiLGJhY2tncm91bmQ6Yixib3hTaGFkb3c6Yyx0cmFuc2Zvcm1PcmlnaW46XCJsZWZ0XCIsdHJhbnNmb3JtOlwicm90YXRlKFwiK35+KDM2MC9lLmxpbmVzKmkrZS5yb3RhdGUpK1wiZGVnKSB0cmFuc2xhdGUoXCIrZS5yYWRpdXMrXCJweCwwKVwiLGJvcmRlclJhZGl1czooZS5jb3JuZXJzKmUud2lkdGg+PjEpK1wicHhcIn0pfWZvcih2YXIgaCxpPTAsaz0oZS5saW5lcy0xKSooMS1lLmRpcmVjdGlvbikvMjtpPGUubGluZXM7aSsrKWg9ZyhhKCkse3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MSt+KGUud2lkdGgvMikrXCJweFwiLHRyYW5zZm9ybTplLmh3YWNjZWw/XCJ0cmFuc2xhdGUzZCgwLDAsMClcIjpcIlwiLG9wYWNpdHk6ZS5vcGFjaXR5LGFuaW1hdGlvbjptJiZkKGUub3BhY2l0eSxlLnRyYWlsLGsraSplLmRpcmVjdGlvbixlLmxpbmVzKStcIiBcIisxL2Uuc3BlZWQrXCJzIGxpbmVhciBpbmZpbml0ZVwifSksZS5zaGFkb3cmJmMoaCxnKGYoXCIjMDAwXCIsXCIwIDAgNHB4ICMwMDBcIikse3RvcDpcIjJweFwifSkpLGMoYixjKGgsZihqKGUuY29sb3IsaSksXCIwIDAgMXB4IHJnYmEoMCwwLDAsLjEpXCIpKSk7cmV0dXJuIGJ9LG9wYWNpdHk6ZnVuY3Rpb24oYSxiLGMpe2I8YS5jaGlsZE5vZGVzLmxlbmd0aCYmKGEuY2hpbGROb2Rlc1tiXS5zdHlsZS5vcGFjaXR5PWMpfX0pO3ZhciByPWcoYShcImdyb3VwXCIpLHtiZWhhdmlvcjpcInVybCgjZGVmYXVsdCNWTUwpXCJ9KTtyZXR1cm4hZihyLFwidHJhbnNmb3JtXCIpJiZyLmFkaj9sKCk6bT1mKHIsXCJhbmltYXRpb25cIiksa30pO3ZhciBDYyxEYyxFYz1kKGEpLEZjPWQoYiksR2M9XCJxdWlya3NcIj09PWMuaGFzaC5yZXBsYWNlKFwiI1wiLFwiXCIpLEhjPXVjLmNzc3RyYW5zZm9ybXMzZCxJYz1IYyYmIUdjLEpjPUhjfHxcIkNTUzFDb21wYXRcIj09PWIuY29tcGF0TW9kZSxLYz12Yy5vayxMYz1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxXaW5kb3dzIFBob25lL2kpLE1jPSFJY3x8TGMsTmM9bmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQsT2M9XCJvbndoZWVsXCJpbiBiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik/XCJ3aGVlbFwiOmIub25tb3VzZXdoZWVsIT09ZT9cIm1vdXNld2hlZWxcIjpcIkRPTU1vdXNlU2Nyb2xsXCIsUGM9MjUwLFFjPTMwMCxSYz0xNDAwLFNjPTVlMyxUYz0yLFVjPTY0LFZjPTUwMCxXYz0zMzMsWGM9XCIkc3RhZ2VGcmFtZVwiLFljPVwiJG5hdkRvdEZyYW1lXCIsWmM9XCIkbmF2VGh1bWJGcmFtZVwiLCRjPVwiYXV0b1wiLF9jPWYoWy4xLDAsLjI1LDFdKSxhZD05OTk5OSxiZD1cIjUwJVwiLGNkPXt3aWR0aDpudWxsLG1pbndpZHRoOm51bGwsbWF4d2lkdGg6XCIxMDAlXCIsaGVpZ2h0Om51bGwsbWluaGVpZ2h0Om51bGwsbWF4aGVpZ2h0Om51bGwscmF0aW86bnVsbCxtYXJnaW46VGMsZ2xpbXBzZTowLGZpdDpcImNvbnRhaW5cIixwb3NpdGlvbjpiZCx0aHVtYnBvc2l0aW9uOmJkLG5hdjpcImRvdHNcIixuYXZwb3NpdGlvbjpcImJvdHRvbVwiLG5hdndpZHRoOm51bGwsdGh1bWJ3aWR0aDpVYyx0aHVtYmhlaWdodDpVYyx0aHVtYm1hcmdpbjpUYyx0aHVtYmJvcmRlcndpZHRoOlRjLHRodW1iZml0OlwiY292ZXJcIixhbGxvd2Z1bGxzY3JlZW46ITEsdHJhbnNpdGlvbjpcInNsaWRlXCIsY2xpY2t0cmFuc2l0aW9uOm51bGwsdHJhbnNpdGlvbmR1cmF0aW9uOlFjLGNhcHRpb25zOiEwLGhhc2g6ITEsc3RhcnRpbmRleDowLGxvb3A6ITEsYXV0b3BsYXk6ITEsc3RvcGF1dG9wbGF5b250b3VjaDohMCxrZXlib2FyZDohMSxhcnJvd3M6ITAsY2xpY2s6ITAsc3dpcGU6ITAsdHJhY2twYWQ6ITEsZW5hYmxlaWZzaW5nbGVmcmFtZTohMSxjb250cm9sc29uc3RhcnQ6ITAsc2h1ZmZsZTohMSxkaXJlY3Rpb246XCJsdHJcIixzaGFkb3dzOiEwLHNwaW5uZXI6bnVsbH0sZGQ9e2xlZnQ6ITAscmlnaHQ6ITAsZG93bjohMSx1cDohMSxzcGFjZTohMSxob21lOiExLGVuZDohMX07Ry5zdG9wPWZ1bmN0aW9uKGEpe0cuaWlbYV09ITF9O3ZhciBlZCxmZCxnZCxoZDtqUXVlcnkuRm90b3JhbWE9ZnVuY3Rpb24oYSxlKXtmdW5jdGlvbiBmKCl7ZC5lYWNoKHlkLGZ1bmN0aW9uKGEsYil7aWYoIWIuaSl7Yi5pPW1lKys7dmFyIGM9QShiLnZpZGVvLCEwKTtpZihjKXt2YXIgZD17fTtiLnZpZGVvPWMsYi5pbWd8fGIudGh1bWI/Yi50aHVtYnNSZWFkeT0hMDpkPUIoYix5ZCxpZSksQyh5ZCx7aW1nOmQuaW1nLHRodW1iOmQudGh1bWJ9LGIuaSxpZSl9fX0pfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIFpkW2FdfHxpZS5mdWxsU2NyZWVufWZ1bmN0aW9uIGkoYSl7dmFyIGI9XCJrZXlkb3duLlwiK2liLGM9aWIramUsZD1cImtleWRvd24uXCIrYyxmPVwicmVzaXplLlwiK2MrXCIgb3JpZW50YXRpb25jaGFuZ2UuXCIrYzthPyhGYy5vbihkLGZ1bmN0aW9uKGEpe3ZhciBiLGM7Q2QmJjI3PT09YS5rZXlDb2RlPyhiPSEwLG1kKENkLCEwLCEwKSk6KGllLmZ1bGxTY3JlZW58fGUua2V5Ym9hcmQmJiFpZS5pbmRleCkmJigyNz09PWEua2V5Q29kZT8oYj0hMCxpZS5jYW5jZWxGdWxsU2NyZWVuKCkpOmEuc2hpZnRLZXkmJjMyPT09YS5rZXlDb2RlJiZnKFwic3BhY2VcIil8fDM3PT09YS5rZXlDb2RlJiZnKFwibGVmdFwiKXx8Mzg9PT1hLmtleUNvZGUmJmcoXCJ1cFwiKT9jPVwiPFwiOjMyPT09YS5rZXlDb2RlJiZnKFwic3BhY2VcIil8fDM5PT09YS5rZXlDb2RlJiZnKFwicmlnaHRcIil8fDQwPT09YS5rZXlDb2RlJiZnKFwiZG93blwiKT9jPVwiPlwiOjM2PT09YS5rZXlDb2RlJiZnKFwiaG9tZVwiKT9jPVwiPDxcIjozNT09PWEua2V5Q29kZSYmZyhcImVuZFwiKSYmKGM9XCI+PlwiKSksKGJ8fGMpJiZZKGEpLGMmJmllLnNob3coe2luZGV4OmMsc2xvdzphLmFsdEtleSx1c2VyOiEwfSl9KSxpZS5pbmRleHx8RmMub2ZmKGIpLm9uKGIsXCJ0ZXh0YXJlYSwgaW5wdXQsIHNlbGVjdFwiLGZ1bmN0aW9uKGEpeyFEYy5oYXNDbGFzcyhqYikmJmEuc3RvcFByb3BhZ2F0aW9uKCl9KSxFYy5vbihmLGllLnJlc2l6ZSkpOihGYy5vZmYoZCksRWMub2ZmKGYpKX1mdW5jdGlvbiBqKGIpe2IhPT1qLmYmJihiPyhhLmh0bWwoXCJcIikuYWRkQ2xhc3MoaWIrXCIgXCIra2UpLmFwcGVuZChxZSkuYmVmb3JlKG9lKS5iZWZvcmUocGUpLGdiKGllKSk6KHFlLmRldGFjaCgpLG9lLmRldGFjaCgpLHBlLmRldGFjaCgpLGEuaHRtbChuZS51cnRleHQpLnJlbW92ZUNsYXNzKGtlKSxoYihpZSkpLGkoYiksai5mPWIpfWZ1bmN0aW9uIG0oKXt5ZD1pZS5kYXRhPXlkfHxQKGUuZGF0YSl8fEQoYSksemQ9aWUuc2l6ZT15ZC5sZW5ndGgsIXhkLm9rJiZlLnNodWZmbGUmJk8oeWQpLGYoKSxKZT15KEplKSx6ZCYmaighMCl9ZnVuY3Rpb24gbygpe3ZhciBhPTI+emQmJiFlLmVuYWJsZWlmc2luZ2xlZnJhbWV8fENkO01lLm5vTW92ZT1hfHxTZCxNZS5ub1N3aXBlPWF8fCFlLnN3aXBlLCFXZCYmc2UudG9nZ2xlQ2xhc3MoQmIsIWUuY2xpY2smJiFNZS5ub01vdmUmJiFNZS5ub1N3aXBlKSxOYyYmcWUudG9nZ2xlQ2xhc3Moc2IsIU1lLm5vU3dpcGUpfWZ1bmN0aW9uIHQoYSl7YT09PSEwJiYoYT1cIlwiKSxlLmF1dG9wbGF5PU1hdGgubWF4KCthfHxTYywxLjUqVmQpfWZ1bmN0aW9uIHUoKXtmdW5jdGlvbiBhKGEsYyl7YlthP1wiYWRkXCI6XCJyZW1vdmVcIl0ucHVzaChjKX1pZS5vcHRpb25zPWU9UihlKSxTZD1cImNyb3NzZmFkZVwiPT09ZS50cmFuc2l0aW9ufHxcImRpc3NvbHZlXCI9PT1lLnRyYW5zaXRpb24sTWQ9ZS5sb29wJiYoemQ+Mnx8U2QmJighV2R8fFwic2xpZGVcIiE9PVdkKSksVmQ9K2UudHJhbnNpdGlvbmR1cmF0aW9ufHxRYyxZZD1cInJ0bFwiPT09ZS5kaXJlY3Rpb24sWmQ9ZC5leHRlbmQoe30sZS5rZXlib2FyZCYmZGQsZS5rZXlib2FyZCk7dmFyIGI9e2FkZDpbXSxyZW1vdmU6W119O3pkPjF8fGUuZW5hYmxlaWZzaW5nbGVmcmFtZT8oTmQ9ZS5uYXYsUGQ9XCJ0b3BcIj09PWUubmF2cG9zaXRpb24sYi5yZW1vdmUucHVzaChYYiksd2UudG9nZ2xlKCEhZS5hcnJvd3MpKTooTmQ9ITEsd2UuaGlkZSgpKSxSYigpLEJkPW5ldyB6YyhkLmV4dGVuZChBYyxlLnNwaW5uZXIsQmMse2RpcmVjdGlvbjpZZD8tMToxfSkpLEdjKCksSGMoKSxlLmF1dG9wbGF5JiZ0KGUuYXV0b3BsYXkpLFRkPW4oZS50aHVtYndpZHRoKXx8VWMsVWQ9bihlLnRodW1iaGVpZ2h0KXx8VWMsTmUub2s9UGUub2s9ZS50cmFja3BhZCYmIU1jLG8oKSxlZChlLFtMZV0pLE9kPVwidGh1bWJzXCI9PT1OZCxPZD8obGMoemQsXCJuYXZUaHVtYlwiKSxBZD1CZSxoZT1aYyxKKG9lLGQuRm90b3JhbWEuanN0LnN0eWxlKHt3OlRkLGg6VWQsYjplLnRodW1iYm9yZGVyd2lkdGgsbTplLnRodW1ibWFyZ2luLHM6amUscTohSmN9KSkseWUuYWRkQ2xhc3MoTGIpLnJlbW92ZUNsYXNzKEtiKSk6XCJkb3RzXCI9PT1OZD8obGMoemQsXCJuYXZEb3RcIiksQWQ9QWUsaGU9WWMseWUuYWRkQ2xhc3MoS2IpLnJlbW92ZUNsYXNzKExiKSk6KE5kPSExLHllLnJlbW92ZUNsYXNzKExiK1wiIFwiK0tiKSksTmQmJihQZD94ZS5pbnNlcnRCZWZvcmUocmUpOnhlLmluc2VydEFmdGVyKHJlKSx3Yy5uYXY9ITEsd2MoQWQsemUsXCJuYXZcIikpLFFkPWUuYWxsb3dmdWxsc2NyZWVuLFFkPyhEZS5wcmVwZW5kVG8ocmUpLFJkPUtjJiZcIm5hdGl2ZVwiPT09UWQpOihEZS5kZXRhY2goKSxSZD0hMSksYShTZCxvYiksYSghU2QscGIpLGEoIWUuY2FwdGlvbnMsdmIpLGEoWWQsdGIpLGEoXCJhbHdheXNcIiE9PWUuYXJyb3dzLHdiKSxYZD1lLnNoYWRvd3MmJiFNYyxhKCFYZCxyYikscWUuYWRkQ2xhc3MoYi5hZGQuam9pbihcIiBcIikpLnJlbW92ZUNsYXNzKGIucmVtb3ZlLmpvaW4oXCIgXCIpKSxLZT1kLmV4dGVuZCh7fSxlKX1mdW5jdGlvbiB4KGEpe3JldHVybiAwPmE/KHpkK2ElemQpJXpkOmE+PXpkP2ElemQ6YX1mdW5jdGlvbiB5KGEpe3JldHVybiBoKGEsMCx6ZC0xKX1mdW5jdGlvbiB6KGEpe3JldHVybiBNZD94KGEpOnkoYSl9ZnVuY3Rpb24gRShhKXtyZXR1cm4gYT4wfHxNZD9hLTE6ITF9ZnVuY3Rpb24gVShhKXtyZXR1cm4gemQtMT5hfHxNZD9hKzE6ITF9ZnVuY3Rpb24gJCgpe01lLm1pbj1NZD8tMS8wOi1yKHpkLTEsTGUudyxlLm1hcmdpbixGZCksTWUubWF4PU1kPzEvMDotcigwLExlLncsZS5tYXJnaW4sRmQpLE1lLnNuYXA9TGUudytlLm1hcmdpbn1mdW5jdGlvbiBiYigpe09lLm1pbj1NYXRoLm1pbigwLExlLm53LXplLndpZHRoKCkpLE9lLm1heD0wLHplLnRvZ2dsZUNsYXNzKEJiLCEoT2Uubm9Nb3ZlPU9lLm1pbj09PU9lLm1heCkpfWZ1bmN0aW9uIGNiKGEsYixjKXtpZihcIm51bWJlclwiPT10eXBlb2YgYSl7YT1uZXcgQXJyYXkoYSk7dmFyIGU9ITB9cmV0dXJuIGQuZWFjaChhLGZ1bmN0aW9uKGEsZCl7aWYoZSYmKGQ9YSksXCJudW1iZXJcIj09dHlwZW9mIGQpe3ZhciBmPXlkW3goZCldO2lmKGYpe3ZhciBnPVwiJFwiK2IrXCJGcmFtZVwiLGg9ZltnXTtjLmNhbGwodGhpcyxhLGQsZixoLGcsaCYmaC5kYXRhKCkpfX19KX1mdW5jdGlvbiBmYihhLGIsYyxkKXsoISRkfHxcIipcIj09PSRkJiZkPT09TGQpJiYoYT1xKGUud2lkdGgpfHxxKGEpfHxWYyxiPXEoZS5oZWlnaHQpfHxxKGIpfHxXYyxpZS5yZXNpemUoe3dpZHRoOmEscmF0aW86ZS5yYXRpb3x8Y3x8YS9ifSwwLGQhPT1MZCYmXCIqXCIpKX1mdW5jdGlvbiBQYihhLGIsYyxmLGcsaCl7Y2IoYSxiLGZ1bmN0aW9uKGEsaSxqLGssbCxtKXtmdW5jdGlvbiBuKGEpe3ZhciBiPXgoaSk7ZmQoYSx7aW5kZXg6YixzcmM6dyxmcmFtZTp5ZFtiXX0pfWZ1bmN0aW9uIG8oKXt0LnJlbW92ZSgpLGQuRm90b3JhbWEuY2FjaGVbd109XCJlcnJvclwiLGouaHRtbCYmXCJzdGFnZVwiPT09Ynx8IXl8fHk9PT13Pyghd3x8ai5odG1sfHxyP1wic3RhZ2VcIj09PWImJihrLnRyaWdnZXIoXCJmOmxvYWRcIikucmVtb3ZlQ2xhc3MoYWMrXCIgXCIrX2IpLmFkZENsYXNzKGJjKSxuKFwibG9hZFwiKSxmYigpKTooay50cmlnZ2VyKFwiZjplcnJvclwiKS5yZW1vdmVDbGFzcyhhYykuYWRkQ2xhc3MoX2IpLG4oXCJlcnJvclwiKSksbS5zdGF0ZT1cImVycm9yXCIsISh6ZD4xJiZ5ZFtpXT09PWopfHxqLmh0bWx8fGouZGVsZXRlZHx8ai52aWRlb3x8cnx8KGouZGVsZXRlZD0hMCxpZS5zcGxpY2UoaSwxKSkpOihqW3ZdPXc9eSxQYihbaV0sYixjLGYsZywhMCkpfWZ1bmN0aW9uIHAoKXtkLkZvdG9yYW1hLm1lYXN1cmVzW3ddPXUubWVhc3VyZXM9ZC5Gb3RvcmFtYS5tZWFzdXJlc1t3XXx8e3dpZHRoOnMud2lkdGgsaGVpZ2h0OnMuaGVpZ2h0LHJhdGlvOnMud2lkdGgvcy5oZWlnaHR9LGZiKHUubWVhc3VyZXMud2lkdGgsdS5tZWFzdXJlcy5oZWlnaHQsdS5tZWFzdXJlcy5yYXRpbyxpKSx0Lm9mZihcImxvYWQgZXJyb3JcIikuYWRkQ2xhc3MoZmMrKHI/XCIgXCIrZ2M6XCJcIikpLnByZXBlbmRUbyhrKSxJKHQsKGQuaXNGdW5jdGlvbihjKT9jKCk6Yyl8fExlLGZ8fGouZml0fHxlLmZpdCxnfHxqLnBvc2l0aW9ufHxlLnBvc2l0aW9uKSxkLkZvdG9yYW1hLmNhY2hlW3ddPW0uc3RhdGU9XCJsb2FkZWRcIixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ay50cmlnZ2VyKFwiZjpsb2FkXCIpLnJlbW92ZUNsYXNzKGFjK1wiIFwiK19iKS5hZGRDbGFzcyhiYytcIiBcIisocj9jYzpkYykpLFwic3RhZ2VcIj09PWI/bihcImxvYWRcIik6KGoudGh1bWJyYXRpbz09PSRjfHwhai50aHVtYnJhdGlvJiZlLnRodW1icmF0aW89PT0kYykmJihqLnRodW1icmF0aW89dS5tZWFzdXJlcy5yYXRpbyx2ZCgpKX0sMCl9ZnVuY3Rpb24gcSgpe3ZhciBhPTEwO0coZnVuY3Rpb24oKXtyZXR1cm4hZmV8fCFhLS0mJiFNY30sZnVuY3Rpb24oKXtwKCl9KX1pZihrKXt2YXIgcj1pZS5mdWxsU2NyZWVuJiZqLmZ1bGwmJmouZnVsbCE9PWouaW1nJiYhbS4kZnVsbCYmXCJzdGFnZVwiPT09YjtpZighbS4kaW1nfHxofHxyKXt2YXIgcz1uZXcgSW1hZ2UsdD1kKHMpLHU9dC5kYXRhKCk7bVtyP1wiJGZ1bGxcIjpcIiRpbWdcIl09dDt2YXIgdj1cInN0YWdlXCI9PT1iP3I/XCJmdWxsXCI6XCJpbWdcIjpcInRodW1iXCIsdz1qW3ZdLHk9cj9udWxsOmpbXCJzdGFnZVwiPT09Yj9cInRodW1iXCI6XCJpbWdcIl07aWYoXCJuYXZUaHVtYlwiPT09YiYmKGs9bS4kd3JhcCksIXcpcmV0dXJuIHZvaWQgbygpO2QuRm90b3JhbWEuY2FjaGVbd10/IWZ1bmN0aW9uIHooKXtcImVycm9yXCI9PT1kLkZvdG9yYW1hLmNhY2hlW3ddP28oKTpcImxvYWRlZFwiPT09ZC5Gb3RvcmFtYS5jYWNoZVt3XT9zZXRUaW1lb3V0KHEsMCk6c2V0VGltZW91dCh6LDEwMCl9KCk6KGQuRm90b3JhbWEuY2FjaGVbd109XCIqXCIsdC5vbihcImxvYWRcIixxKS5vbihcImVycm9yXCIsbykpLG0uc3RhdGU9XCJcIixzLnNyYz13fX19KX1mdW5jdGlvbiBRYihhKXtJZS5hcHBlbmQoQmQuc3BpbigpLmVsKS5hcHBlbmRUbyhhKX1mdW5jdGlvbiBSYigpe0llLmRldGFjaCgpLEJkJiZCZC5zdG9wKCl9ZnVuY3Rpb24gU2IoKXt2YXIgYT1EZFtYY107YSYmIWEuZGF0YSgpLnN0YXRlJiYoUWIoYSksYS5vbihcImY6bG9hZCBmOmVycm9yXCIsZnVuY3Rpb24oKXthLm9mZihcImY6bG9hZCBmOmVycm9yXCIpLFJiKCl9KSl9ZnVuY3Rpb24gZWMoYSl7VyhhLHNkKSxYKGEsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7USh5ZSl9LDApLFJjKHt0aW1lOlZkLGd1ZXNzSW5kZXg6ZCh0aGlzKS5kYXRhKCkuZXEsbWluTWF4Ok9lfSl9KX1mdW5jdGlvbiBsYyhhLGIpe2NiKGEsYixmdW5jdGlvbihhLGMsZSxmLGcsaCl7aWYoIWYpe2Y9ZVtnXT1xZVtnXS5jbG9uZSgpLGg9Zi5kYXRhKCksaC5kYXRhPWU7dmFyIGk9ZlswXTtcInN0YWdlXCI9PT1iPyhlLmh0bWwmJmQoJzxkaXYgY2xhc3M9XCInK2tjKydcIj48L2Rpdj4nKS5hcHBlbmQoZS5faHRtbD9kKGUuaHRtbCkucmVtb3ZlQXR0cihcImlkXCIpLmh0bWwoZS5faHRtbCk6ZS5odG1sKS5hcHBlbmRUbyhmKSxlLmNhcHRpb24mJmQoTihvYyxOKHBjLGUuY2FwdGlvbikpKS5hcHBlbmRUbyhmKSxlLnZpZGVvJiZmLmFkZENsYXNzKHpiKS5hcHBlbmQoRmUuY2xvbmUoKSksWChpLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe1EocmUpfSwwKSxwZCh7aW5kZXg6aC5lcSx1c2VyOiEwfSl9KSx0ZT10ZS5hZGQoZikpOlwibmF2RG90XCI9PT1iPyhlYyhpKSxBZT1BZS5hZGQoZikpOlwibmF2VGh1bWJcIj09PWImJihlYyhpKSxoLiR3cmFwPWYuY2hpbGRyZW4oXCI6Zmlyc3RcIiksQmU9QmUuYWRkKGYpLGUudmlkZW8mJmguJHdyYXAuYXBwZW5kKEZlLmNsb25lKCkpKX19KX1mdW5jdGlvbiBzYyhhLGIsYyxkKXtyZXR1cm4gYSYmYS5sZW5ndGgmJkkoYSxiLGMsZCl9ZnVuY3Rpb24gdGMoYSl7Y2IoYSxcInN0YWdlXCIsZnVuY3Rpb24oYSxiLGMsZixnLGgpe2lmKGYpe3ZhciBpPXgoYiksaj1jLmZpdHx8ZS5maXQsaz1jLnBvc2l0aW9ufHxlLnBvc2l0aW9uO2guZXE9aSxSZVtYY11baV09Zi5jc3MoZC5leHRlbmQoe2xlZnQ6U2Q/MDpyKGIsTGUudyxlLm1hcmdpbixGZCl9LFNkJiZsKDApKSksRihmWzBdKSYmKGYuYXBwZW5kVG8oc2UpLG1kKGMuJHZpZGVvKSksc2MoaC4kaW1nLExlLGosayksc2MoaC4kZnVsbCxMZSxqLGspfX0pfWZ1bmN0aW9uIHVjKGEsYil7aWYoXCJ0aHVtYnNcIj09PU5kJiYhaXNOYU4oYSkpe3ZhciBjPS1hLGY9LWErTGUubnc7QmUuZWFjaChmdW5jdGlvbigpe3ZhciBhPWQodGhpcyksZz1hLmRhdGEoKSxoPWcuZXEsaT1mdW5jdGlvbigpe3JldHVybntoOlVkLHc6Zy53fX0saj1pKCksaz15ZFtoXXx8e30sbD1rLnRodW1iZml0fHxlLnRodW1iZml0LG09ay50aHVtYnBvc2l0aW9ufHxlLnRodW1icG9zaXRpb247ai53PWcudyxnLmwrZy53PGN8fGcubD5mfHxzYyhnLiRpbWcsaixsLG0pfHxiJiZQYihbaF0sXCJuYXZUaHVtYlwiLGksbCxtKX0pfX1mdW5jdGlvbiB3YyhhLGIsYyl7aWYoIXdjW2NdKXt2YXIgZj1cIm5hdlwiPT09YyYmT2QsZz0wO2IuYXBwZW5kKGEuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9ZCh0aGlzKSxjPWIuZGF0YSgpLGU9MCxmPXlkLmxlbmd0aDtmPmU7ZSsrKWlmKGMuZGF0YT09PXlkW2VdKXthPSEwLGMuZXE9ZTticmVha31yZXR1cm4gYXx8Yi5yZW1vdmUoKSYmITF9KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGQoYSkuZGF0YSgpLmVxLWQoYikuZGF0YSgpLmVxfSkuZWFjaChmdW5jdGlvbigpe2lmKGYpe3ZhciBhPWQodGhpcyksYj1hLmRhdGEoKSxjPU1hdGgucm91bmQoVWQqYi5kYXRhLnRodW1icmF0aW8pfHxUZDtiLmw9ZyxiLnc9YyxhLmNzcyh7d2lkdGg6Y30pLGcrPWMrZS50aHVtYm1hcmdpbn19KSksd2NbY109ITB9fWZ1bmN0aW9uIHhjKGEpe3JldHVybiBhLVNlPkxlLncvM31mdW5jdGlvbiB5YyhhKXtyZXR1cm4hKE1kfHxKZSthJiZKZS16ZCthfHxDZCl9ZnVuY3Rpb24gR2MoKXt2YXIgYT15YygwKSxiPXljKDEpO3VlLnRvZ2dsZUNsYXNzKEViLGEpLmF0dHIoVihhKSksdmUudG9nZ2xlQ2xhc3MoRWIsYikuYXR0cihWKGIpKX1mdW5jdGlvbiBIYygpe05lLm9rJiYoTmUucHJldmVudD17XCI8XCI6eWMoMCksXCI+XCI6eWMoMSl9KX1mdW5jdGlvbiBMYyhhKXt2YXIgYixjLGQ9YS5kYXRhKCk7cmV0dXJuIE9kPyhiPWQubCxjPWQudyk6KGI9YS5wb3NpdGlvbigpLmxlZnQsYz1hLndpZHRoKCkpLHtjOmIrYy8yLG1pbjotYisxMCplLnRodW1ibWFyZ2luLG1heDotYitMZS53LWMtMTAqZS50aHVtYm1hcmdpbn19ZnVuY3Rpb24gT2MoYSl7dmFyIGI9RGRbaGVdLmRhdGEoKTtfKENlLHt0aW1lOjEuMiphLHBvczpiLmwsd2lkdGg6Yi53LTIqZS50aHVtYmJvcmRlcndpZHRofSl9ZnVuY3Rpb24gUmMoYSl7dmFyIGI9eWRbYS5ndWVzc0luZGV4XVtoZV07aWYoYil7dmFyIGM9T2UubWluIT09T2UubWF4LGQ9YS5taW5NYXh8fGMmJkxjKERkW2hlXSksZT1jJiYoYS5rZWVwJiZSYy5sP1JjLmw6aCgoYS5jb298fExlLm53LzIpLUxjKGIpLmMsZC5taW4sZC5tYXgpKSxmPWMmJmgoZSxPZS5taW4sT2UubWF4KSxnPTEuMSphLnRpbWU7Xyh6ZSx7dGltZTpnLHBvczpmfHwwLG9uRW5kOmZ1bmN0aW9uKCl7dWMoZiwhMCl9fSksbGQoeWUsSyhmLE9lLm1pbixPZS5tYXgpKSxSYy5sPWV9fWZ1bmN0aW9uIFRjKCl7X2MoaGUpLFFlW2hlXS5wdXNoKERkW2hlXS5hZGRDbGFzcyhXYikpfWZ1bmN0aW9uIF9jKGEpe2Zvcih2YXIgYj1RZVthXTtiLmxlbmd0aDspYi5zaGlmdCgpLnJlbW92ZUNsYXNzKFdiKX1mdW5jdGlvbiBiZChhKXt2YXIgYj1SZVthXTtkLmVhY2goRWQsZnVuY3Rpb24oYSxjKXtkZWxldGUgYlt4KGMpXX0pLGQuZWFjaChiLGZ1bmN0aW9uKGEsYyl7ZGVsZXRlIGJbYV0sYy5kZXRhY2goKX0pfWZ1bmN0aW9uIGNkKGEpe0ZkPUdkPUplO3ZhciBiPURkW1hjXTtiJiYoX2MoWGMpLFFlW1hjXS5wdXNoKGIuYWRkQ2xhc3MoV2IpKSxhfHxpZS5zaG93Lm9uRW5kKCEwKSx2KHNlLDAsITApLGJkKFhjKSx0YyhFZCksJCgpLGJiKCkpfWZ1bmN0aW9uIGVkKGEsYil7YSYmZC5lYWNoKGIsZnVuY3Rpb24oYixjKXtjJiZkLmV4dGVuZChjLHt3aWR0aDphLndpZHRofHxjLndpZHRoLGhlaWdodDphLmhlaWdodCxtaW53aWR0aDphLm1pbndpZHRoLG1heHdpZHRoOmEubWF4d2lkdGgsbWluaGVpZ2h0OmEubWluaGVpZ2h0LG1heGhlaWdodDphLm1heGhlaWdodCxyYXRpbzpTKGEucmF0aW8pfSl9KX1mdW5jdGlvbiBmZChiLGMpe2EudHJpZ2dlcihpYitcIjpcIitiLFtpZSxjXSl9ZnVuY3Rpb24gZ2QoKXtjbGVhclRpbWVvdXQoaGQudCksZmU9MSxlLnN0b3BhdXRvcGxheW9udG91Y2g/aWUuc3RvcEF1dG9wbGF5KCk6Y2U9ITB9ZnVuY3Rpb24gaGQoKXtmZSYmKGUuc3RvcGF1dG9wbGF5b250b3VjaHx8KGlkKCksamQoKSksaGQudD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZmU9MH0sUWMrUGMpKX1mdW5jdGlvbiBpZCgpe2NlPSEoIUNkJiYhZGUpfWZ1bmN0aW9uIGpkKCl7aWYoY2xlYXJUaW1lb3V0KGpkLnQpLEcuc3RvcChqZC53KSwhZS5hdXRvcGxheXx8Y2UpcmV0dXJuIHZvaWQoaWUuYXV0b3BsYXkmJihpZS5hdXRvcGxheT0hMSxmZChcInN0b3BhdXRvcGxheVwiKSkpO2llLmF1dG9wbGF5fHwoaWUuYXV0b3BsYXk9ITAsZmQoXCJzdGFydGF1dG9wbGF5XCIpKTt2YXIgYT1KZSxiPURkW1hjXS5kYXRhKCk7amQudz1HKGZ1bmN0aW9uKCl7cmV0dXJuIGIuc3RhdGV8fGEhPT1KZX0sZnVuY3Rpb24oKXtqZC50PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighY2UmJmE9PT1KZSl7dmFyIGI9S2QsYz15ZFtiXVtYY10uZGF0YSgpO2pkLnc9RyhmdW5jdGlvbigpe3JldHVybiBjLnN0YXRlfHxiIT09S2R9LGZ1bmN0aW9uKCl7Y2V8fGIhPT1LZHx8aWUuc2hvdyhNZD9aKCFZZCk6S2QpfSl9fSxlLmF1dG9wbGF5KX0pfWZ1bmN0aW9uIGtkKCl7aWUuZnVsbFNjcmVlbiYmKGllLmZ1bGxTY3JlZW49ITEsS2MmJnZjLmNhbmNlbChsZSksRGMucmVtb3ZlQ2xhc3MoamIpLENjLnJlbW92ZUNsYXNzKGpiKSxhLnJlbW92ZUNsYXNzKFpiKS5pbnNlcnRBZnRlcihwZSksTGU9ZC5leHRlbmQoe30sZWUpLG1kKENkLCEwLCEwKSxyZChcInhcIiwhMSksaWUucmVzaXplKCksUGIoRWQsXCJzdGFnZVwiKSxRKEVjLGFlLF9kKSxmZChcImZ1bGxzY3JlZW5leGl0XCIpKX1mdW5jdGlvbiBsZChhLGIpe1hkJiYoYS5yZW1vdmVDbGFzcyhVYitcIiBcIitWYiksYiYmIUNkJiZhLmFkZENsYXNzKGIucmVwbGFjZSgvXnxcXHMvZyxcIiBcIitUYitcIi0tXCIpKSl9ZnVuY3Rpb24gbWQoYSxiLGMpe2ImJihxZS5yZW1vdmVDbGFzcyhuYiksQ2Q9ITEsbygpKSxhJiZhIT09Q2QmJihhLnJlbW92ZSgpLGZkKFwidW5sb2FkdmlkZW9cIikpLGMmJihpZCgpLGpkKCkpfWZ1bmN0aW9uIG5kKGEpe3FlLnRvZ2dsZUNsYXNzKHFiLGEpfWZ1bmN0aW9uIG9kKGEpe2lmKCFNZS5mbG93KXt2YXIgYj1hP2EucGFnZVg6b2QueCxjPWImJiF5Yyh4YyhiKSkmJmUuY2xpY2s7b2QucCE9PWMmJnJlLnRvZ2dsZUNsYXNzKENiLGMpJiYob2QucD1jLG9kLng9Yil9fWZ1bmN0aW9uIHBkKGEpe2NsZWFyVGltZW91dChwZC50KSxlLmNsaWNrdHJhbnNpdGlvbiYmZS5jbGlja3RyYW5zaXRpb24hPT1lLnRyYW5zaXRpb24/c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBiPWUudHJhbnNpdGlvbjtpZS5zZXRPcHRpb25zKHt0cmFuc2l0aW9uOmUuY2xpY2t0cmFuc2l0aW9ufSksV2Q9YixwZC50PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZS5zaG93KGEpfSwxMCl9LDApOmllLnNob3coYSl9ZnVuY3Rpb24gcWQoYSxiKXt2YXIgYz1hLnRhcmdldCxmPWQoYyk7Zi5oYXNDbGFzcyhtYyk/aWUucGxheVZpZGVvKCk6Yz09PUVlP2llLnRvZ2dsZUZ1bGxTY3JlZW4oKTpDZD9jPT09SGUmJm1kKENkLCEwLCEwKTpiP25kKCk6ZS5jbGljayYmcGQoe2luZGV4OmEuc2hpZnRLZXl8fFooeGMoYS5feCkpLHNsb3c6YS5hbHRLZXksdXNlcjohMH0pfWZ1bmN0aW9uIHJkKGEsYil7TWVbYV09T2VbYV09Yn1mdW5jdGlvbiBzZChhKXt2YXIgYj1kKHRoaXMpLmRhdGEoKS5lcTtwZCh7aW5kZXg6YixzbG93OmEuYWx0S2V5LHVzZXI6ITAsY29vOmEuX3gteWUub2Zmc2V0KCkubGVmdH0pfWZ1bmN0aW9uIHRkKGEpe3BkKHtpbmRleDp3ZS5pbmRleCh0aGlzKT9cIj5cIjpcIjxcIixzbG93OmEuYWx0S2V5LHVzZXI6ITB9KX1mdW5jdGlvbiB1ZChhKXtYKGEsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7UShyZSl9LDApLG5kKCExKX0pfWZ1bmN0aW9uIHZkKCl7aWYobSgpLHUoKSwhdmQuaSl7dmQuaT0hMDt2YXIgYT1lLnN0YXJ0aW5kZXg7KGF8fGUuaGFzaCYmYy5oYXNoKSYmKExkPUwoYXx8Yy5oYXNoLnJlcGxhY2UoL14jLyxcIlwiKSx5ZCwwPT09aWUuaW5kZXh8fGEsYSkpLEplPUZkPUdkPUhkPUxkPXooTGQpfHwwfWlmKHpkKXtpZih3ZCgpKXJldHVybjtDZCYmbWQoQ2QsITApLEVkPVtdLGJkKFhjKSx2ZC5vaz0hMCxpZS5zaG93KHtpbmRleDpKZSx0aW1lOjB9KSxpZS5yZXNpemUoKX1lbHNlIGllLmRlc3Ryb3koKX1mdW5jdGlvbiB3ZCgpe3JldHVybiF3ZC5mPT09WWQ/KHdkLmY9WWQsSmU9emQtMS1KZSxpZS5yZXZlcnNlKCksITApOnZvaWQgMH1mdW5jdGlvbiB4ZCgpe3hkLm9rfHwoeGQub2s9ITAsZmQoXCJyZWFkeVwiKSl9Q2M9ZChcImh0bWxcIiksRGM9ZChcImJvZHlcIik7dmFyIHlkLHpkLEFkLEJkLENkLERkLEVkLEZkLEdkLEhkLElkLEpkLEtkLExkLE1kLE5kLE9kLFBkLFFkLFJkLFNkLFRkLFVkLFZkLFdkLFhkLFlkLFpkLCRkLF9kLGFlLGJlLGNlLGRlLGVlLGZlLGdlLGhlLGllPXRoaXMsamU9ZC5ub3coKSxrZT1pYitqZSxsZT1hWzBdLG1lPTEsbmU9YS5kYXRhKCksb2U9ZChcIjxzdHlsZT48L3N0eWxlPlwiKSxwZT1kKE4oWWIpKSxxZT1kKE4oa2IpKSxyZT1kKE4oeGIpKS5hcHBlbmRUbyhxZSksc2U9KHJlWzBdLGQoTihBYikpLmFwcGVuZFRvKHJlKSksdGU9ZCgpLHVlPWQoTihEYitcIiBcIitGYityYykpLHZlPWQoTihEYitcIiBcIitHYityYykpLHdlPXVlLmFkZCh2ZSkuYXBwZW5kVG8ocmUpLHhlPWQoTihJYikpLHllPWQoTihIYikpLmFwcGVuZFRvKHhlKSx6ZT1kKE4oSmIpKS5hcHBlbmRUbyh5ZSksQWU9ZCgpLEJlPWQoKSxDZT0oc2UuZGF0YSgpLHplLmRhdGEoKSxkKE4oamMpKS5hcHBlbmRUbyh6ZSkpLERlPWQoTigkYityYykpLEVlPURlWzBdLEZlPWQoTihtYykpLEdlPWQoTihuYykpLmFwcGVuZFRvKHJlKSxIZT1HZVswXSxJZT1kKE4ocWMpKSxKZT0hMSxLZT17fSxMZT17fSxNZT17fSxOZT17fSxPZT17fSxQZT17fSxRZT17fSxSZT17fSxTZT0wLFRlPVtdO1xyXG5xZVtYY109ZChOKHliKSkscWVbWmNdPWQoTihNYitcIiBcIitPYityYyxOKGljKSkpLHFlW1ljXT1kKE4oTWIrXCIgXCIrTmIrcmMsTihoYykpKSxRZVtYY109W10sUWVbWmNdPVtdLFFlW1ljXT1bXSxSZVtYY109e30scWUuYWRkQ2xhc3MoSWM/bWI6bGIpLnRvZ2dsZUNsYXNzKHFiLCFlLmNvbnRyb2xzb25zdGFydCksbmUuZm90b3JhbWE9dGhpcyxpZS5zdGFydEF1dG9wbGF5PWZ1bmN0aW9uKGEpe3JldHVybiBpZS5hdXRvcGxheT90aGlzOihjZT1kZT0hMSx0KGF8fGUuYXV0b3BsYXkpLGpkKCksdGhpcyl9LGllLnN0b3BBdXRvcGxheT1mdW5jdGlvbigpe3JldHVybiBpZS5hdXRvcGxheSYmKGNlPWRlPSEwLGpkKCkpLHRoaXN9LGllLnNob3c9ZnVuY3Rpb24oYSl7dmFyIGI7XCJvYmplY3RcIiE9dHlwZW9mIGE/KGI9YSxhPXt9KTpiPWEuaW5kZXgsYj1cIj5cIj09PWI/R2QrMTpcIjxcIj09PWI/R2QtMTpcIjw8XCI9PT1iPzA6XCI+PlwiPT09Yj96ZC0xOmIsYj1pc05hTihiKT9MKGIseWQsITApOmIsYj1cInVuZGVmaW5lZFwiPT10eXBlb2YgYj9KZXx8MDpiLGllLmFjdGl2ZUluZGV4PUplPXooYiksSWQ9RShKZSksSmQ9VShKZSksS2Q9eChKZSsoWWQ/LTE6MSkpLEVkPVtKZSxJZCxKZF0sR2Q9TWQ/YjpKZTt2YXIgYz1NYXRoLmFicyhIZC1HZCksZD13KGEudGltZSxmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbihWZCooMSsoYy0xKS8xMiksMipWZCl9KSxmPWEub3ZlclBvczthLnNsb3cmJihkKj0xMCk7dmFyIGc9RGQ7aWUuYWN0aXZlRnJhbWU9RGQ9eWRbSmVdO3ZhciBpPWc9PT1EZCYmIWEudXNlcjttZChDZCxEZC5pIT09eWRbeChGZCldLmkpLGxjKEVkLFwic3RhZ2VcIiksdGMoTWM/W0dkXTpbR2QsRShHZCksVShHZCldKSxyZChcImdvXCIsITApLGl8fGZkKFwic2hvd1wiLHt1c2VyOmEudXNlcix0aW1lOmR9KSxjZT0hMDt2YXIgaj1pZS5zaG93Lm9uRW5kPWZ1bmN0aW9uKGIpe2lmKCFqLm9rKXtpZihqLm9rPSEwLGJ8fGNkKCEwKSxpfHxmZChcInNob3dlbmRcIix7dXNlcjphLnVzZXJ9KSwhYiYmV2QmJldkIT09ZS50cmFuc2l0aW9uKXJldHVybiBpZS5zZXRPcHRpb25zKHt0cmFuc2l0aW9uOldkfSksdm9pZChXZD0hMSk7U2IoKSxQYihFZCxcInN0YWdlXCIpLHJkKFwiZ29cIiwhMSksSGMoKSxvZCgpLGlkKCksamQoKX19O2lmKFNkKXt2YXIgaz1EZFtYY10sbD1KZSE9PUhkP3lkW0hkXVtYY106bnVsbDthYihrLGwsdGUse3RpbWU6ZCxtZXRob2Q6ZS50cmFuc2l0aW9uLG9uRW5kOmp9LFRlKX1lbHNlIF8oc2Use3BvczotcihHZCxMZS53LGUubWFyZ2luLEZkKSxvdmVyUG9zOmYsdGltZTpkLG9uRW5kOmp9KTtpZihHYygpLE5kKXtUYygpO3ZhciBtPXkoSmUraChHZC1IZCwtMSwxKSk7UmMoe3RpbWU6ZCxjb286bSE9PUplJiZhLmNvbyxndWVzc0luZGV4OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLmNvbz9tOkplLGtlZXA6aX0pLE9kJiZPYyhkKX1yZXR1cm4gYmU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEhkJiZIZCE9PUplLEhkPUplLGUuaGFzaCYmYmUmJiFpZS5lcSYmSChEZC5pZHx8SmUrMSksdGhpc30saWUucmVxdWVzdEZ1bGxTY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4gUWQmJiFpZS5mdWxsU2NyZWVuJiYoX2Q9RWMuc2Nyb2xsVG9wKCksYWU9RWMuc2Nyb2xsTGVmdCgpLFEoRWMpLHJkKFwieFwiLCEwKSxlZT1kLmV4dGVuZCh7fSxMZSksYS5hZGRDbGFzcyhaYikuYXBwZW5kVG8oRGMuYWRkQ2xhc3MoamIpKSxDYy5hZGRDbGFzcyhqYiksbWQoQ2QsITAsITApLGllLmZ1bGxTY3JlZW49ITAsUmQmJnZjLnJlcXVlc3QobGUpLGllLnJlc2l6ZSgpLFBiKEVkLFwic3RhZ2VcIiksU2IoKSxmZChcImZ1bGxzY3JlZW5lbnRlclwiKSksdGhpc30saWUuY2FuY2VsRnVsbFNjcmVlbj1mdW5jdGlvbigpe3JldHVybiBSZCYmdmMuaXMoKT92Yy5jYW5jZWwoYik6a2QoKSx0aGlzfSxpZS50b2dnbGVGdWxsU2NyZWVuPWZ1bmN0aW9uKCl7cmV0dXJuIGllWyhpZS5mdWxsU2NyZWVuP1wiY2FuY2VsXCI6XCJyZXF1ZXN0XCIpK1wiRnVsbFNjcmVlblwiXSgpfSxUKGIsdmMuZXZlbnQsZnVuY3Rpb24oKXsheWR8fHZjLmlzKCl8fENkfHxrZCgpfSksaWUucmVzaXplPWZ1bmN0aW9uKGEpe2lmKCF5ZClyZXR1cm4gdGhpczt2YXIgYj1hcmd1bWVudHNbMV18fDAsYz1hcmd1bWVudHNbMl07ZWQoaWUuZnVsbFNjcmVlbj97d2lkdGg6XCIxMDAlXCIsbWF4d2lkdGg6bnVsbCxtaW53aWR0aDpudWxsLGhlaWdodDpcIjEwMCVcIixtYXhoZWlnaHQ6bnVsbCxtaW5oZWlnaHQ6bnVsbH06UihhKSxbTGUsY3x8aWUuZnVsbFNjcmVlbnx8ZV0pO3ZhciBkPUxlLndpZHRoLGY9TGUuaGVpZ2h0LGc9TGUucmF0aW8saT1FYy5oZWlnaHQoKS0oTmQ/eWUuaGVpZ2h0KCk6MCk7cmV0dXJuIHEoZCkmJihxZS5hZGRDbGFzcyh1YikuY3NzKHt3aWR0aDpkLG1pbldpZHRoOkxlLm1pbndpZHRofHwwLG1heFdpZHRoOkxlLm1heHdpZHRofHxhZH0pLGQ9TGUuVz1MZS53PXFlLndpZHRoKCksTGUubnc9TmQmJnAoZS5uYXZ3aWR0aCxkKXx8ZCxlLmdsaW1wc2UmJihMZS53LT1NYXRoLnJvdW5kKDIqKHAoZS5nbGltcHNlLGQpfHwwKSkpLHNlLmNzcyh7d2lkdGg6TGUudyxtYXJnaW5MZWZ0OihMZS5XLUxlLncpLzJ9KSxmPXAoZixpKSxmPWZ8fGcmJmQvZyxmJiYoZD1NYXRoLnJvdW5kKGQpLGY9TGUuaD1NYXRoLnJvdW5kKGgoZixwKExlLm1pbmhlaWdodCxpKSxwKExlLm1heGhlaWdodCxpKSkpLHJlLnN0b3AoKS5hbmltYXRlKHt3aWR0aDpkLGhlaWdodDpmfSxiLGZ1bmN0aW9uKCl7cWUucmVtb3ZlQ2xhc3ModWIpfSksY2QoKSxOZCYmKHllLnN0b3AoKS5hbmltYXRlKHt3aWR0aDpMZS5ud30sYiksUmMoe2d1ZXNzSW5kZXg6SmUsdGltZTpiLGtlZXA6ITB9KSxPZCYmd2MubmF2JiZPYyhiKSksJGQ9Y3x8ITAseGQoKSkpLFNlPXJlLm9mZnNldCgpLmxlZnQsdGhpc30saWUuc2V0T3B0aW9ucz1mdW5jdGlvbihhKXtyZXR1cm4gZC5leHRlbmQoZSxhKSx2ZCgpLHRoaXN9LGllLnNodWZmbGU9ZnVuY3Rpb24oKXtyZXR1cm4geWQmJk8oeWQpJiZ2ZCgpLHRoaXN9LGllLmRlc3Ryb3k9ZnVuY3Rpb24oKXtyZXR1cm4gaWUuY2FuY2VsRnVsbFNjcmVlbigpLGllLnN0b3BBdXRvcGxheSgpLHlkPWllLmRhdGE9bnVsbCxqKCksRWQ9W10sYmQoWGMpLHZkLm9rPSExLHRoaXN9LGllLnBsYXlWaWRlbz1mdW5jdGlvbigpe3ZhciBhPURkLGI9YS52aWRlbyxjPUplO3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBiJiZhLnZpZGVvUmVhZHkmJihSZCYmaWUuZnVsbFNjcmVlbiYmaWUuY2FuY2VsRnVsbFNjcmVlbigpLEcoZnVuY3Rpb24oKXtyZXR1cm4hdmMuaXMoKXx8YyE9PUplfSxmdW5jdGlvbigpe2M9PT1KZSYmKGEuJHZpZGVvPWEuJHZpZGVvfHxkKGQuRm90b3JhbWEuanN0LnZpZGVvKGIpKSxhLiR2aWRlby5hcHBlbmRUbyhhW1hjXSkscWUuYWRkQ2xhc3MobmIpLENkPWEuJHZpZGVvLG8oKSx3ZS5ibHVyKCksRGUuYmx1cigpLGZkKFwibG9hZHZpZGVvXCIpKX0pKSx0aGlzfSxpZS5zdG9wVmlkZW89ZnVuY3Rpb24oKXtyZXR1cm4gbWQoQ2QsITAsITApLHRoaXN9LHJlLm9uKFwibW91c2Vtb3ZlXCIsb2QpLE1lPWRiKHNlLHtvblN0YXJ0OmdkLG9uTW92ZTpmdW5jdGlvbihhLGIpe2xkKHJlLGIuZWRnZSl9LG9uVG91Y2hFbmQ6aGQsb25FbmQ6ZnVuY3Rpb24oYSl7bGQocmUpO3ZhciBiPShOYyYmIWdlfHxhLnRvdWNoKSYmZS5hcnJvd3MmJlwiYWx3YXlzXCIhPT1lLmFycm93cztpZihhLm1vdmVkfHxiJiZhLnBvcyE9PWEubmV3UG9zJiYhYS5jb250cm9sKXt2YXIgYz1zKGEubmV3UG9zLExlLncsZS5tYXJnaW4sRmQpO2llLnNob3coe2luZGV4OmMsdGltZTpTZD9WZDphLnRpbWUsb3ZlclBvczphLm92ZXJQb3MsdXNlcjohMH0pfWVsc2UgYS5hYm9ydGVkfHxhLmNvbnRyb2x8fHFkKGEuc3RhcnRFdmVudCxiKX0sdGltZUxvdzoxLHRpbWVIaWdoOjEsZnJpY3Rpb246MixzZWxlY3Q6XCIuXCIrWGIrXCIsIC5cIitYYitcIiAqXCIsJHdyYXA6cmV9KSxPZT1kYih6ZSx7b25TdGFydDpnZCxvbk1vdmU6ZnVuY3Rpb24oYSxiKXtsZCh5ZSxiLmVkZ2UpfSxvblRvdWNoRW5kOmhkLG9uRW5kOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtSYy5sPWEubmV3UG9zLGlkKCksamQoKSx1YyhhLm5ld1BvcywhMCl9aWYoYS5tb3ZlZClhLnBvcyE9PWEubmV3UG9zPyhjZT0hMCxfKHplLHt0aW1lOmEudGltZSxwb3M6YS5uZXdQb3Msb3ZlclBvczphLm92ZXJQb3Msb25FbmQ6Yn0pLHVjKGEubmV3UG9zKSxYZCYmbGQoeWUsSyhhLm5ld1BvcyxPZS5taW4sT2UubWF4KSkpOmIoKTtlbHNle3ZhciBjPWEuJHRhcmdldC5jbG9zZXN0KFwiLlwiK01iLHplKVswXTtjJiZzZC5jYWxsKGMsYS5zdGFydEV2ZW50KX19LHRpbWVMb3c6LjUsdGltZUhpZ2g6MixmcmljdGlvbjo1LCR3cmFwOnllfSksTmU9ZWIocmUse3NoaWZ0OiEwLG9uRW5kOmZ1bmN0aW9uKGEsYil7Z2QoKSxoZCgpLGllLnNob3coe2luZGV4OmIsc2xvdzphLmFsdEtleX0pfX0pLFBlPWViKHllLHtvbkVuZDpmdW5jdGlvbihhLGIpe2dkKCksaGQoKTt2YXIgYz12KHplKSsuMjUqYjt6ZS5jc3MoayhoKGMsT2UubWluLE9lLm1heCkpKSxYZCYmbGQoeWUsSyhjLE9lLm1pbixPZS5tYXgpKSxQZS5wcmV2ZW50PXtcIjxcIjpjPj1PZS5tYXgsXCI+XCI6Yzw9T2UubWlufSxjbGVhclRpbWVvdXQoUGUudCksUGUudD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7UmMubD1jLHVjKGMsITApfSxQYyksdWMoYyl9fSkscWUuaG92ZXIoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZmV8fG5kKCEoZ2U9ITApKX0sMCl9LGZ1bmN0aW9uKCl7Z2UmJm5kKCEoZ2U9ITEpKX0pLE0od2UsZnVuY3Rpb24oYSl7WShhKSx0ZC5jYWxsKHRoaXMsYSl9LHtvblN0YXJ0OmZ1bmN0aW9uKCl7Z2QoKSxNZS5jb250cm9sPSEwfSxvblRvdWNoRW5kOmhkfSksd2UuZWFjaChmdW5jdGlvbigpe1codGhpcyxmdW5jdGlvbihhKXt0ZC5jYWxsKHRoaXMsYSl9KSx1ZCh0aGlzKX0pLFcoRWUsaWUudG9nZ2xlRnVsbFNjcmVlbiksdWQoRWUpLGQuZWFjaChcImxvYWQgcHVzaCBwb3Agc2hpZnQgdW5zaGlmdCByZXZlcnNlIHNvcnQgc3BsaWNlXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7aWVbYl09ZnVuY3Rpb24oKXtyZXR1cm4geWQ9eWR8fFtdLFwibG9hZFwiIT09Yj9BcnJheS5wcm90b3R5cGVbYl0uYXBwbHkoeWQsYXJndW1lbnRzKTphcmd1bWVudHNbMF0mJlwib2JqZWN0XCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJmFyZ3VtZW50c1swXS5sZW5ndGgmJih5ZD1QKGFyZ3VtZW50c1swXSkpLHZkKCksaWV9fSksdmQoKX0sZC5mbi5mb3RvcmFtYT1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxlPWQodGhpcyksZj1lLmRhdGEoKSxnPWYuZm90b3JhbWE7Zz9nLnNldE9wdGlvbnMoYiwhMCk6RyhmdW5jdGlvbigpe3JldHVybiFFKGMpfSxmdW5jdGlvbigpe2YudXJ0ZXh0PWUuaHRtbCgpLG5ldyBkLkZvdG9yYW1hKGUsZC5leHRlbmQoe30sY2QsYS5mb3RvcmFtYURlZmF1bHRzLGIsZikpfSl9KX0sZC5Gb3RvcmFtYS5pbnN0YW5jZXM9W10sZC5Gb3RvcmFtYS5jYWNoZT17fSxkLkZvdG9yYW1hLm1lYXN1cmVzPXt9LGQ9ZHx8e30sZC5Gb3RvcmFtYT1kLkZvdG9yYW1hfHx7fSxkLkZvdG9yYW1hLmpzdD1kLkZvdG9yYW1hLmpzdHx8e30sZC5Gb3RvcmFtYS5qc3Quc3R5bGU9ZnVuY3Rpb24oYSl7e3ZhciBiLGM9XCJcIjt0Yy5lc2NhcGV9cmV0dXJuIGMrPVwiLmZvdG9yYW1hXCIrKG51bGw9PShiPWEucyk/XCJcIjpiKStcIiAuZm90b3JhbWFfX25hdi0tdGh1bWJzIC5mb3RvcmFtYV9fbmF2X19mcmFtZXtcXG5wYWRkaW5nOlwiKyhudWxsPT0oYj1hLm0pP1wiXCI6YikrXCJweDtcXG5oZWlnaHQ6XCIrKG51bGw9PShiPWEuaCk/XCJcIjpiKStcInB4fVxcbi5mb3RvcmFtYVwiKyhudWxsPT0oYj1hLnMpP1wiXCI6YikrXCIgLmZvdG9yYW1hX190aHVtYi1ib3JkZXJ7XFxuaGVpZ2h0OlwiKyhudWxsPT0oYj1hLmgtYS5iKihhLnE/MDoyKSk/XCJcIjpiKStcInB4O1xcbmJvcmRlci13aWR0aDpcIisobnVsbD09KGI9YS5iKT9cIlwiOmIpK1wicHg7XFxubWFyZ2luLXRvcDpcIisobnVsbD09KGI9YS5tKT9cIlwiOmIpK1wicHh9XCJ9LGQuRm90b3JhbWEuanN0LnZpZGVvPWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXtjKz1kLmNhbGwoYXJndW1lbnRzLFwiXCIpfXZhciBjPVwiXCIsZD0odGMuZXNjYXBlLEFycmF5LnByb3RvdHlwZS5qb2luKTtyZXR1cm4gYys9JzxkaXYgY2xhc3M9XCJmb3RvcmFtYV9fdmlkZW9cIj48aWZyYW1lIHNyYz1cIicsYigoXCJ5b3V0dWJlXCI9PWEudHlwZT9hLnArXCJ5b3V0dWJlLmNvbS9lbWJlZC9cIithLmlkK1wiP2F1dG9wbGF5PTFcIjpcInZpbWVvXCI9PWEudHlwZT9hLnArXCJwbGF5ZXIudmltZW8uY29tL3ZpZGVvL1wiK2EuaWQrXCI/YXV0b3BsYXk9MSZiYWRnZT0wXCI6YS5pZCkrKGEucyYmXCJjdXN0b21cIiE9YS50eXBlP1wiJlwiK2EuczpcIlwiKSksYys9J1wiIGZyYW1lYm9yZGVyPVwiMFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT48L2Rpdj5cXG4nfSxkKGZ1bmN0aW9uKCl7ZChcIi5cIitpYisnOm5vdChbZGF0YS1hdXRvPVwiZmFsc2VcIl0pJykuZm90b3JhbWEoKX0pfSh3aW5kb3csZG9jdW1lbnQsbG9jYXRpb24sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGpRdWVyeSYmalF1ZXJ5KTsiLCI7JCggZnVuY3Rpb24oKVxyXG57XHJcbiAgICB2YXIgdGFyZ2V0cyA9ICQoICdbcmVsfj10b29sdGlwXScgKSxcclxuICAgICAgICB0YXJnZXQgID0gZmFsc2UsXHJcbiAgICAgICAgdG9vbHRpcCA9IGZhbHNlLFxyXG4gICAgICAgIHRpdGxlICAgPSBmYWxzZTtcclxuXHJcbiAgICB0YXJnZXRzLmJpbmQoICdtb3VzZWVudGVyJywgZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIHRhcmdldCAgPSAkKCB0aGlzICk7XHJcbiAgICAgICAgdGlwICAgICA9IHRhcmdldC5hdHRyKCAndGl0bGUnICk7XHJcbiAgICAgICAgdG9vbHRpcCA9ICQoICc8ZGl2IGlkPVwidG9vbHRpcFwiPjwvZGl2PicgKTtcclxuXHJcbiAgICAgICAgaWYoICF0aXAgfHwgdGlwID09ICcnIClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICB0YXJnZXQucmVtb3ZlQXR0ciggJ3RpdGxlJyApO1xyXG4gICAgICAgIHRvb2x0aXAuY3NzKCAnb3BhY2l0eScsIDAgKVxyXG4gICAgICAgICAgICAuaHRtbCggdGlwIClcclxuICAgICAgICAgICAgLmFwcGVuZFRvKCAnYm9keScgKTtcclxuXHJcbiAgICAgICAgdmFyIGluaXRfdG9vbHRpcCA9IGZ1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKCAkKCB3aW5kb3cgKS53aWR0aCgpIDwgdG9vbHRpcC5vdXRlcldpZHRoKCkgKiAxLjUgKVxyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5jc3MoICdtYXgtd2lkdGgnLCAkKCB3aW5kb3cgKS53aWR0aCgpIC8gMiApO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLmNzcyggJ21heC13aWR0aCcsIDM0MCApO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvc19sZWZ0ID0gdGFyZ2V0Lm9mZnNldCgpLmxlZnQgKyAoIHRhcmdldC5vdXRlcldpZHRoKCkgLyAyICkgLSAoIHRvb2x0aXAub3V0ZXJXaWR0aCgpIC8gMiApLFxyXG4gICAgICAgICAgICAgICAgcG9zX3RvcCAgPSB0YXJnZXQub2Zmc2V0KCkudG9wIC0gdG9vbHRpcC5vdXRlckhlaWdodCgpIC0gMjA7XHJcblxyXG4gICAgICAgICAgICBpZiggcG9zX2xlZnQgPCAwIClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcG9zX2xlZnQgPSB0YXJnZXQub2Zmc2V0KCkubGVmdCArIHRhcmdldC5vdXRlcldpZHRoKCkgLyAyIC0gMjA7XHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLmFkZENsYXNzKCAnbGVmdCcgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLnJlbW92ZUNsYXNzKCAnbGVmdCcgKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCBwb3NfbGVmdCArIHRvb2x0aXAub3V0ZXJXaWR0aCgpID4gJCggd2luZG93ICkud2lkdGgoKSApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBvc19sZWZ0ID0gdGFyZ2V0Lm9mZnNldCgpLmxlZnQgLSB0b29sdGlwLm91dGVyV2lkdGgoKSArIHRhcmdldC5vdXRlcldpZHRoKCkgLyAyICsgMjA7XHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLmFkZENsYXNzKCAncmlnaHQnICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5yZW1vdmVDbGFzcyggJ3JpZ2h0JyApO1xyXG5cclxuICAgICAgICAgICAgaWYoIHBvc190b3AgPCAwIClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvc190b3AgID0gdGFyZ2V0Lm9mZnNldCgpLnRvcCArIHRhcmdldC5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5hZGRDbGFzcyggJ3RvcCcgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwLnJlbW92ZUNsYXNzKCAndG9wJyApO1xyXG5cclxuICAgICAgICAgICAgdG9vbHRpcC5jc3MoIHsgbGVmdDogcG9zX2xlZnQsIHRvcDogcG9zX3RvcCB9IClcclxuICAgICAgICAgICAgICAgIC5hbmltYXRlKCB7IHRvcDogJys9MTAnLCBvcGFjaXR5OiAxIH0sIDUwICk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaW5pdF90b29sdGlwKCk7XHJcbiAgICAgICAgJCggd2luZG93ICkucmVzaXplKCBpbml0X3Rvb2x0aXAgKTtcclxuXHJcbiAgICAgICAgdmFyIHJlbW92ZV90b29sdGlwID0gZnVuY3Rpb24oKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdG9vbHRpcC5hbmltYXRlKCB7IHRvcDogJy09MTAnLCBvcGFjaXR5OiAwIH0sIDUwLCBmdW5jdGlvbigpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICQoIHRoaXMgKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0YXJnZXQuYXR0ciggJ3RpdGxlJywgdGlwICk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGFyZ2V0LmJpbmQoICdtb3VzZWxlYXZlJywgcmVtb3ZlX3Rvb2x0aXAgKTtcclxuICAgICAgICB0b29sdGlwLmJpbmQoICdjbGljaycsIHJlbW92ZV90b29sdGlwICk7XHJcbiAgICB9KTtcclxufSk7IiwidmFyICRib2R5LFxyXG5cdHdpbmRvd0hlaWdodCxcclxuXHR3aW5kb3dXaWR0aCxcclxuXHRtZWRpYVBvaW50MSA9IDEwMjQsXHJcblx0bWVkaWFQb2ludDIgPSA3NjgsXHJcblx0bWVkaWFQb2ludDMgPSA0ODAsXHJcblx0bWVkaWFQb2ludDQgPSAzMjA7XHJcblxyXG5cclxuLy9cclxuLy8gdmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhZmUtZGVzY3JpcHRpb25fX3RleHQnKTtcclxuLy8gU2ltcGxlU2Nyb2xsYmFyLmluaXRFbChlbCk7XHJcblxyXG5cclxuLy/Qt9Cw0LPRgNGD0LfQutCwINGB0LrRgNC40L/RgtCwXHJcbi8vIHZhciBzY3JpcHRNYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuLy8gc2NyaXB0TWFwLnNyYyA9IFwiaHR0cHM6Ly9hcGktbWFwcy55YW5kZXgucnUvMi4wLz9sb2FkPXBhY2thZ2Uuc3RhbmRhcmQscGFja2FnZS5nZW9PYmplY3RzJmxhbmc9cnUtUlVcIjtcclxuLy8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHNjcmlwdE1hcCk7XHJcblxyXG4vLyB2YXIgc2NyaXB0VG9vbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4vLyBzY3JpcHRUb29sLnNyYyA9IFwiaHR0cHM6Ly9hYmVzdHV6aGV2LmdpdGh1Yi5pby9jYWZlLWFuZGVyc29uL2Jvd2VyX2NvbXBvbmVudHMvdG9vbHRpcHN0ZXIvZGlzdC9qcy90b29sdGlwc3Rlci5idW5kbGUuanNcIjtcclxuLy8gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHNjcmlwdFRvb2wpO1xyXG5cclxuLyptYWluLmpzKi9cclxuXHJcblxyXG52YXIgd2luZG93V2lkdGggPSAod2luZG93LmlubmVyV2lkdGggKTsgLy8g0LLRgdGPINGI0LjRgNC40L3QsCDQvtC60L3QsFxyXG52YXIgZG9jdW1lbnRXaWR0aCA9IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggKTsgLy8g0YjQuNGA0LjQvdCwINC80LjQvdGD0YEg0L/RgNC+0LrRgNGD0YLQutCwXHJcbi8vIGNvbnNvbGUubG9nKCfQqNC40YDQuNC90LAgd2luZG93OiAnICsgd2luZG93V2lkdGgpO1xyXG4vLyBjb25zb2xlLmxvZygn0KjQuNGA0LjQvdCwIHdyYXBwZXI6ICcgKyBkb2N1bWVudFdpZHRoKTtcclxudmFyIGRvY3VtZW50SGVpZ2h0ID0gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgKTtcclxuLy8gY29uc29sZS5sb2coJ9Cy0YvRgdC+0YLQsCAnICsgZG9jdW1lbnRIZWlnaHQpO1xyXG5cclxuXHJcblxyXG4kKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbigpe1xyXG5cclxuXHJcblxyXG4gICAgLyrRgdC60YDQvtC70Lsg0L/RgNC4INCy0YvQsdC+0YDQtSDQtNC+0YHRgtCw0LLQutC4Ki9cclxuICAgIHZhciBvcmRlckRlbGl2ZXJ5TWFwID0gJCgnLm9yZGVyLWRlbGl2ZXJ5X19tYXAnKS5oZWlnaHQoKSxcclxuICAgICAgICBvcmRlckRlbGl2ZXJ5QWRkcmVzc0xpc3QgPSAkKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCcpLFxyXG4gICAgICAgIG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdEhlaWdodCA9IG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdC5oZWlnaHQoKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdvcmRlckRlbGl2ZXJ5TWFwOiAnICsgb3JkZXJEZWxpdmVyeU1hcCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnb3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0OiAnICsgb3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0SGVpZ2h0KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlSGVpZ2h0QWRkcmVzc0xpc3QgKCl7XHJcbiAgICAgICAgb3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0LmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW0pe1xyXG4gICAgICAgICAgICB2YXIgZWxlbUhlaWdodCA9ICAkKGVsZW0pLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZWxlbUhlaWdodDogJyArIGVsZW1IZWlnaHQpO1xyXG4gICAgICAgICAgICBpZihlbGVtSGVpZ2h0ID4gMzIwKXtcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBTaW1wbGVCYXIob3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0WzBdKTtcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBTaW1wbGVCYXIob3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0WzFdKTtcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBTaW1wbGVCYXIob3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0WzJdKTtcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBTaW1wbGVCYXIob3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0WzNdKTtcclxuICAgICAgICAgICAgICAgICQoZWxlbSkuYWRkQ2xhc3MoJ3Njcm9sbC13cmFwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNoYW5nZUhlaWdodEFkZHJlc3NMaXN0KCk7XHJcblxyXG4gICAgLy/RhdCw0Log0LTQu9GPINCx0YvRgdGC0YDQvtCz0L4g0L7QsdGA0LXQt9Cw0L3QuNGPINCy0YHQtdCz0L4g0YHQv9C40YHQutCwINCyINC80L7QtNCw0LvRjNC90L7QvCDQvtC60L3QtSDQt9Cw0LrQsNC30LAg0YLQvtGA0YLQsFxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZENsYXNzQ2FrZXNBZGRyZXNzTGlzdCgpe1xyXG4gICAgICAgICQoJy5wb3B1cC1jYWtlLW9yZGVyIC5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19saXN0JykuYWRkQ2xhc3MoJ3Njcm9sbC13cmFwJyk7XHJcbiAgICB9XHJcbiAgICBhZGRDbGFzc0Nha2VzQWRkcmVzc0xpc3QoKTtcclxuXHJcbiAgICAvLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNha2UtY2FyZF9faG92ZXInLCBmdW5jdGlvbigpe1xyXG4gICAgLy8gICAgICQoJy5wb3B1cC1jYWtlLW9yZGVyIC5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19saXN0JykuYWRkQ2xhc3MoJ3Njcm9sbC13cmFwJyk7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ3Njcm9sbC13cmFwIGFkZCcpO1xyXG4gICAgLy8gfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgaWYoJCgnZGl2JykuaGFzQ2xhc3MoJ2pzLW1peGVkLWxpc3QnKSl7XHJcbiAgICAgICAgdmFyIGNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLW1peGVkLWxpc3QnKTtcclxuICAgICAgICB2YXIgbWl4ZXIgPSBtaXhpdHVwKGNvbnRhaW5lckVsKTtcclxuICAgIH1cclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm9yZGVyLXRhYnNfX2l0ZW0nLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNoYW5nZUhlaWdodEFkZHJlc3NMaXN0KCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIHZhciBwZXJtaXRQYXRoID0gW1xyXG4gICAgJy9mYWN0b3J5LWhhcHBpbmVzcy5odG1sJyxcclxuICAgICcvY2FmZS1hbmRlcnNvbi9mYWN0b3J5LWhhcHBpbmVzcy5odG1sJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxFbGVtIChlbGVtKXtcclxuICAgICAgICBpZigkKHdpbmRvdykud2lkdGgoKSA8PSA4MDApIHtcclxuICAgICAgICAgICAgbmV3IFNpbXBsZUJhcigkKGVsZW0pWzBdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZihwZXJtaXRQYXRoLmluZGV4T2YobG9jYXRpb24ucGF0aG5hbWUpID4gLTEpe1xyXG4gICAgICAgIGdldFNjcm9sbEVsZW0oJy5mYWN0b3J5LWxheW91dCcpO1xyXG4gICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBnZXRTY3JvbGxFbGVtKCcuZmFjdG9yeS1sYXlvdXQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciAkZGF0ZXBpY2tlciA9ICQoJy5kYXRlcGlja2VyLWhlcmUnKTtcclxuICAgICRkYXRlcGlja2VyLmRhdGVwaWNrZXIoe1xyXG4gICAgICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgYXV0b0Nsb3NlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgICRkYXRlcGlja2VyLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5kYXRlcGlja2VyLWxheW91dCcpLmFkZENsYXNzKCdhY3RpdmUtZGF0ZXBpY2tlcicpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgICQoJyNkYXRlcGlja2VyQ3VzdG9tJykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICBhdXRvQ2xvc2U6IHRydWVcclxuICAgIH0pO1xyXG4gICAgJCgnI2RhdGVwaWNrZXJDdXN0b20nKS5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZGF0ZXBpY2tlci1sYXlvdXQnKS5hZGRDbGFzcygnYWN0aXZlLWRhdGVwaWNrZXInKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB2YXIgZGlzYWJsZWRQYXJ0eURheXMgPSBbMCwgNl07XHJcbiAgICAkKCcjcGFydHktZGF0ZXBpY2tlcicpLmRhdGVwaWNrZXIoe1xyXG4gICAgICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgaW5saW5lOiB0cnVlLFxyXG4gICAgICAgIG9uUmVuZGVyQ2VsbDogZnVuY3Rpb24gKGRhdGUsIGNlbGxUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmIChjZWxsVHlwZSA9PSAnZGF5Jykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCA9IGRpc2FibGVkUGFydHlEYXlzLmluZGV4T2YoZGF5KSAhPSAtMTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9C60LDQu9C10L3QtNCw0YDRjCDQsiDQvNC10YDQvtC/0YDQuNGP0YLQuNGP0YVcclxuICAgIHZhciBldmVudERhdGVzID0gWzEsIDEwLCAxMiwgMjJdO1xyXG4gICAgJCgnI2V2ZW50LWRhdGVwaWNrZXInKS5kYXRlcGlja2VyKHtcclxuICAgICAgICBpbmxpbmU6IHRydWUsXHJcbiAgICAgICAgb25SZW5kZXJDZWxsOiBmdW5jdGlvbiAoZGF0ZSwgY2VsbFR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICAgICAgICAgIGlmIChjZWxsVHlwZSA9PSAnZGF5JyAmJiBldmVudERhdGVzLmluZGV4T2YoY3VycmVudERhdGUpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWw6IGN1cnJlbnREYXRlICsgJzxzcGFuIGNsYXNzPVwiZHAtbm90ZVwiPjwvc3Bhbj4nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoJy5qcy1ldmVudC1vcmRlci1kYXRlcGlja2VyJykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbn0pO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCQpIHtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY3VzdG9tXHJcblxyXG4gICAgZnVuY3Rpb24gYWRkUmVhZG9ubHlJbnB1dChlbGVtKXtcclxuICAgICAgICAkKGVsZW0pLmF0dHIoJ3JlYWRvbmx5JywgJ3JlYWRvbmx5Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUmVhZG9ubHlJbnB1dCgnLmRhdGVwaWNrZXItaGVyZScpO1xyXG4gICAgYWRkUmVhZG9ubHlJbnB1dCgnLmRhdGVwaWNrZXItY3VzdG9tJyk7XHJcbiAgICBhZGRSZWFkb25seUlucHV0KCcjbWluTWF4RXhhbXBsZScpO1xyXG4gICAgYWRkUmVhZG9ubHlJbnB1dCgnLmRhdGVwaWNrZXItZGVsaXZlcnktdjInKTtcclxuICAgIGFkZFJlYWRvbmx5SW5wdXQoJyNldmVudC1kYXRlcGlja2VyJyk7XHJcbiAgICBhZGRSZWFkb25seUlucHV0KCcuanMtZXZlbnQtb3JkZXItZGF0ZXBpY2tlcicpO1xyXG4gICAgYWRkUmVhZG9ubHlJbnB1dCgnI3BhcnR5LWRhdGVwaWNrZXInKTtcclxuICAgIGFkZFJlYWRvbmx5SW5wdXQoJy5kYXRlcGlja2VyLWxheW91dCBpbnB1dCcpO1xyXG4gICAgYWRkUmVhZG9ubHlJbnB1dCgnLmRhdGVwaWNrZXItbGF5b3V0LXYyIGlucHV0Jyk7XHJcblxyXG4gICAgLyrRhdC70LXQsdC90YvQtSDQutGA0L7RiNC60LggLSDQstGL0L/QsNC00LDRjtGJ0LjQuSDRgdC/0LjRgdC+0LoqL1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jLWJyZWFkY3J1bWItd29yZF9fYWN0aXZlIHNwYW4nLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoJy5kcm9wZG93bicpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmMtYnJlYWRjcnVtYi1kcm9wZG93bl9fbGF5b3V0JykudG9nZ2xlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRDdXN0b21TZWxlY3QoZWxlbSl7XHJcbiAgICAgICAgJChlbGVtKS5TdW1vU2VsZWN0KCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRDdXN0b21TZWxlY3RTZWFyY2goZWxlbSl7XHJcbiAgICAgICAgJChlbGVtKS5TdW1vU2VsZWN0KHtcclxuICAgICAgICAgICAgc2VhcmNoOiB0cnVlLFxyXG4gICAgICAgICAgICBzZWFyY2hUZXh0OiAn0JjRgdC60LDRgtGMLi4uJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRDdXN0b21EYXRlcGlja2VyKGVsZW0pe1xyXG4gICAgICAgJChlbGVtKS5kYXRlcGlja2VyKHtcclxuICAgICAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKVxyXG4gICAgICAgICAgICAvLyBhdXRvQ2xvc2U6IHRydWVcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgLy8gdmFyIHZhbHVlID0gJChlbGVtKS52YWwoKTtcclxuICAgICAgIC8vICQoZWxlbSkudmFsKHZhbHVlKTtcclxuICAgICAgIC8vIGNvbnNvbGUubG9nKHZhbHVlKTtcclxuICAgICAgIC8vIGVsZW0udmFsKHZhbHVlKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gcmVsb2FkVmFsdWVEYXRlcGlja2VyIChlbGVtKXtcclxuICAgICAgICAkLmVhY2goJChlbGVtKSwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy8gdmFyIHZhbHVlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgLy8gJCh0aGlzKS5kYXRhKCd2YWx1ZScsIHZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIGRhdGFWYWx1ZSA9ICQodGhpcykuZGF0YSgndmFsdWUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS52YWwoZGF0YVZhbHVlKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codmFsdWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8vIHJlbG9hZFZhbHVlRGF0ZXBpY2tlcignI2pzLWV2ZW50LWRhdGFfX2xpc3QgLmRhdGVwaWNrZXItY3VzdG9tLWNsb2NrJyk7XHJcblxyXG5cclxuXHJcbiAgICB2YXIgY291bnRDaGVja2JveCA9IDA7XHJcblxyXG4gICAgZnVuY3Rpb24gYWRkQ2xvbmVQYW5lbChidG4sIGxpc3Qpe1xyXG4gICAgICAgIHZhciByYW5kO1xyXG4gICAgICAgIGZ1bmN0aW9uIHJhbmRvbUludGVnZXIobWluLCBtYXgpIHtcclxuICAgICAgICAgICAgcmFuZCA9IG1pbiAtIDAuNSArIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSk7XHJcbiAgICAgICAgICAgIHJhbmQgPSBNYXRoLnJvdW5kKHJhbmQpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmFuZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluaXRDdXN0b21TZWxlY3RTZWFyY2goJyNqcy1ldmVudC1kYXRhX19saXN0IC5qcy1zZWxlY3Qtc2VhcmNoLWNvcHknKTtcclxuICAgICAgICBpbml0Q3VzdG9tU2VsZWN0KCcjanMtZXZlbnQtZGF0YV9fbGlzdCAucGFuZWwtZXZlbnQtZGF0ZV9faXRlbSBzZWxlY3QnKTtcclxuXHJcblxyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBidG4gLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgLnBhcmVudHMoJy5jLWZvcm1fX2l0ZW0nKVxyXG4gICAgICAgICAgICAgICAgLnNpYmxpbmdzKCcucGFuZWwtd29yay10aW1lX19jb3B5JylcclxuICAgICAgICAgICAgICAgIC5jbG9uZSgpLmFwcGVuZFRvKGxpc3QpO1xyXG5cclxuICAgICAgICAgICAgLy8gdmFyIHNlbGVjdCA9ICQodGhpcylcclxuXHJcbiAgICAgICAgICAgIGluaXRDdXN0b21TZWxlY3RTZWFyY2goJyNqcy1ldmVudC1kYXRhX19saXN0IC5qcy1zZWxlY3Qtc2VhcmNoLWNvcHknKTtcclxuICAgICAgICAgICAgaW5pdEN1c3RvbVNlbGVjdFNlYXJjaCgnI2pzLWRpc2gtdmFyaWF0aW9uX19saXN0IC5qcy1zZWxlY3Qtc2VhcmNoLWNvcHknKTtcclxuXHJcbiAgICAgICAgICAgIGluaXRDdXN0b21EYXRlcGlja2VyKCcjanMtZXZlbnQtZGF0YV9fbGlzdCAucGFuZWwtd29yay10aW1lX19jb3B5Omxhc3QtY2hpbGQgLmRhdGVwaWNrZXItY3VzdG9tLWNsb2NrJyk7XHJcblxyXG4gICAgICAgICAgICAvLyByZWxvYWRWYWx1ZURhdGVwaWNrZXIoJyNqcy1ldmVudC1kYXRhX19saXN0IC5kYXRlcGlja2VyLWN1c3RvbS1jbG9jaycpO1xyXG5cclxuICAgICAgICAgICAgaW5pdEN1c3RvbVNlbGVjdCgnJyArIGxpc3QgKyAnIHNlbGVjdCcpO1xyXG4gICAgICAgICAgICBpbml0Q3VzdG9tU2VsZWN0KCcjanMtZGlzaC12YXJpYXRpb25fX2xpc3QgLnBhbmVsLWRpc2gtdmFyaWF0aW9uX19pdGVtOmxhc3QtY2hpbGQgc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIGluaXRDdXN0b21TZWxlY3QoJyNqcy1ldmVudC1kYXRhX19saXN0IC5wYW5lbC1ldmVudC1kYXRlX19pdGVtOmxhc3QtY2hpbGQgc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdpbml0Q3VzdG9tU2VsZWN0U2VhcmNoJyk7XHJcbiAgICAgICAgICAgICQoJy5qcy1pbnB1dC0tdGVsJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICAgICAgICAgJCgnLmpzLWlucHV0LS1kYXRlJykubWFzaygnMDAuMDAuMDAwMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICAgICAgICAgJCgnLmpzLWlucHV0LS1tb2RlJykubWFzaygnMDA6MDAg4oCUIDAwOjAwJywge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJJZk5vdE1hdGNoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiX186X18g4oCUIF9fOl9fXCJcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByYW5kb21JbnRlZ2VyKDEsIDk5OTk5KTtcclxuXHJcblxyXG4gICAgICAgICAgICBjb3VudENoZWNrYm94ICs9MTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY291bnQpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgY2hlY2tib3ggPSAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAucGFyZW50cygnLmMtZm9ybV9faXRlbScpXHJcbiAgICAgICAgICAgICAgICAuc2libGluZ3MoJy5wYW5lbC13b3JrLXRpbWVfX2NvcHknKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcclxuICAgICAgICAgICAgdmFyIGNoZWNrTGFiZWwgPSAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAucGFyZW50cygnLmMtZm9ybV9faXRlbScpXHJcbiAgICAgICAgICAgICAgICAuc2libGluZ3MoJy5wYW5lbC13b3JrLXRpbWVfX2NvcHknKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5zaWJsaW5ncygnbGFiZWwnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNoZWNrYm94LmF0dHIoJ25hbWUnLCApO1xyXG5cclxuICAgICAgICAgICAgY2hlY2tib3guYXR0cignbmFtZScsICdwYW5lbC1ldmVudC1mcmVlLScgKyByYW5kKTtcclxuICAgICAgICAgICAgY2hlY2tib3guYXR0cignaWQnLCAncGFuZWwtZXZlbnQtZnJlZS0nICsgcmFuZCk7XHJcbiAgICAgICAgICAgIGNoZWNrTGFiZWwuYXR0cignZm9yJywgJ3BhbmVsLWV2ZW50LWZyZWUtJyArIHJhbmQpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjaGVja0xhYmVsKTtcclxuXHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgYWRkQ2xvbmVQYW5lbCgnI2pzLXdvcmstdGltZS1jb2ZmZWVfX2FkZCcsICcjanMtcGFuZWwtd29yay10aW1lX19jb2ZmZWUnKTtcclxuICAgIGFkZENsb25lUGFuZWwoJyNqcy13b3JrLXRpbWUtY2FmZV9fYWRkJywgJyNqcy1wYW5lbC13b3JrLXRpbWVfX2NhZmUnKTtcclxuICAgIGFkZENsb25lUGFuZWwoJyNqcy13b3JrLXRpbWUtbXBfX2FkZCcsICcjanMtcGFuZWwtd29yay10aW1lX19tcCcpO1xyXG4gICAgYWRkQ2xvbmVQYW5lbCgnI2pzLXdvcmstdGltZS1hbmltYXRvcl9fYWRkJywgJyNqcy1wYW5lbC13b3JrLXRpbWVfX2FuaW1hdG9yJyk7XHJcbiAgICBhZGRDbG9uZVBhbmVsKCcjanMtZGlzaC12YXJpYXRpb25fX2FkZCcsICcjanMtZGlzaC12YXJpYXRpb25fX2xpc3QnKTtcclxuICAgIGFkZENsb25lUGFuZWwoJyNqcy1ldmVudC1kYXRhX19hZGQnLCAnI2pzLWV2ZW50LWRhdGFfX2xpc3QnKTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmMtZm9ybV9fZGVsJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgJGVsZW1faXRlbSA9ICQodGhpcykucGFyZW50cygnLnBhbmVsLXdvcmstdGltZV9fY29weScpO1xyXG4gICAgICAgICRlbGVtX2l0ZW0ucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnRlc3RSZWxvYWQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgcGFuZWwtZGlzaC12YXJpYXRpb25fX2xpc3RcclxuICAgIC8vICAgICAkKCcucGFuZWwtZGlzaC12YXJpYXRpb25fX2xpc3Qgc2VsZWN0JykuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAvLyAgICAgICAgICQodGhpcylbaW5kZXhdLnN1bW8ucmVsb2FkKCk7XHJcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGluZGV4KTtcclxuICAgIC8vICAgICB9KTtcclxuICAgICAgICAkKCcucGFuZWwtZGlzaC12YXJpYXRpb25fX2xpc3Qgc2VsZWN0JylbMV0uc3Vtby5yZWxvYWQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnT0shISEnKTtcclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8v0LDQtNC80LjQvdC40YHRgtGA0LDRgtC40LLQvdCw0Y8g0L/QsNC90LXQu9GMXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBhbmVsLWNhZmVfX3RpdGxlJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ3BhbmVsLWNhZmUtc2hvdycpO1xyXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5wYW5lbC1jYWZlX19ib2R5Jykuc2xpZGVUb2dnbGUoMTAwKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGFuZWwtY2FmZV9fdGl0bGUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygncGFuZWwtY2FmZS1zaG93Jyk7XHJcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLnBhbmVsLWhhbGxfX2JvZHknKS5zbGlkZVRvZ2dsZSgxMDApO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvL9GD0L/RgNCw0LLQu9C10L3QuNC1INGA0LDRgdGB0YvQu9C60L7QuVxyXG4gICAgJCgnLmRpc3BhdGNoLWxpc3RfX3RpdGxlIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpO1xyXG4gICAgICAgIGlmKHNlbGYuaXMoIFwiOmNoZWNrZWRcIiApKXtcclxuICAgICAgICAgICAgc2VsZi5wYXJlbnRzKCcuZGlzcGF0Y2gtbGlzdF9fdGl0bGUnKVxyXG4gICAgICAgICAgICAgICAgLnNpYmxpbmdzKCcuZGlzcGF0Y2gtbGlzdCcpXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylcclxuICAgICAgICAgICAgICAgIC5wcm9wKCBcImNoZWNrZWRcIiwgdHJ1ZSApO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5wYXJlbnRzKCcuZGlzcGF0Y2gtbGlzdF9fdGl0bGUnKVxyXG4gICAgICAgICAgICAgICAgLnNpYmxpbmdzKCcuZGlzcGF0Y2gtbGlzdCcpXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylcclxuICAgICAgICAgICAgICAgIC5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgbGVuRXZlbnQgPSAkKCcuZGlzcGF0Y2gtbGlzdF9faXRlbSBpbnB1dFtuYW1lKj1cImRpc3BhdGNoLWV2ZW50XCJdJykubGVuZ3RoO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ9C60L7Qu9C00LjRh9C10YHRgtCy0L4gJyArIGxlbkV2ZW50KTtcclxuXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZURpc3BhdGNoQ2hlY2tib3goZWxlbSl7XHJcbiAgICAgICAgdmFyIGNvdW50O1xyXG5cclxuICAgICAgICAkKCcnICsgZWxlbSArICcgaW5wdXQnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICAgICAgY291bnQgPSBpbmRleCsxO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfQutC+0LvQuNGH0LXRgdGC0LLQviBlYWNoICcgKyBlbGVtICsgJzogJyArIGNvdW50KTtcclxuXHJcbiAgICAgICAgJCgnJyArIGVsZW0gKyAnIGlucHV0Jykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgaWYoIXNlbGYuaXMoIFwiOmNoZWNrZWRcIiApKXtcclxuICAgICAgICAgICAgICAgIHNlbGYucGFyZW50cygnLmRpc3BhdGNoLWxpc3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zaWJsaW5ncygnLmRpc3BhdGNoLWxpc3RfX3RpdGxlJylcclxuICAgICAgICAgICAgICAgICAgICAuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylcclxuICAgICAgICAgICAgICAgICAgICAucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKCQoJycgKyBlbGVtICsgJyBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkJykubGVuZ3RoID09IGNvdW50KXtcclxuICAgICAgICAgICAgICAgIHNlbGYucGFyZW50cygnLmRpc3BhdGNoLWxpc3QnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zaWJsaW5ncygnLmRpc3BhdGNoLWxpc3RfX3RpdGxlJylcclxuICAgICAgICAgICAgICAgICAgICAuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJylcclxuICAgICAgICAgICAgICAgICAgICAucHJvcCggXCJjaGVja2VkXCIsIHRydWUgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNoYW5nZURpc3BhdGNoQ2hlY2tib3goJy5qcy1kaXNwYXRjaC1uZXdzJyk7XHJcbiAgICBjaGFuZ2VEaXNwYXRjaENoZWNrYm94KCcuanMtZGlzcGF0Y2gtZXZlbnQnKTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAvL9GE0YDQsNC90YjQuNC30LBcclxuICAgICQoJy5mcmFuY2hpc2UtdGl0bGUtbGF5b3V0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7XHJcbiAgICAgICAgc2VsZi5zaWJsaW5ncygnLmZyYW5jaGlzZS1jb250ZW50Jykuc2xpZGVUb2dnbGUoMTAwKTtcclxuICAgICAgICBzZWxmLmZpbmQoJy5mcmFuY2hpc2UtcHJpbnQnKS50b2dnbGUoKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBwcmludERhdGEoKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBkaXZUb1ByaW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmFuY2hpc2VQcmludFwiKTtcclxuICAgICAgICB2YXIgbmV3V2luPSB3aW5kb3cub3BlbihcIlwiKTtcclxuICAgICAgICBuZXdXaW4uZG9jdW1lbnQud3JpdGUoZGl2VG9QcmludC5vdXRlckhUTUwpO1xyXG4gICAgICAgIG5ld1dpbi5wcmludCgpO1xyXG4gICAgICAgIG5ld1dpbi5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgICQoJy5mcmFuY2hpc2UtcHJpbnQnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcHJpbnREYXRhKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZigkKCdpbnB1dCcpLmhhc0NsYXNzKCdkYXRlcGlja2VyLWN1c3RvbScpIHx8ICQoJ2RpdicpLmhhc0NsYXNzKCdkYXRlcGlja2VyLWN1c3RvbScpKXtcclxuICAgICAgICAkKCcuZGF0ZXBpY2tlci1jdXN0b20nKS5kYXRlcGlja2VyKHtcclxuICAgICAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgYXV0b0Nsb3NlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoJCgnaW5wdXQnKS5oYXNDbGFzcygnZGF0ZXBpY2tlci1jdXN0b20tY2xvY2snKSB8fCAkKCdkaXYnKS5oYXNDbGFzcygnZGF0ZXBpY2tlci1jdXN0b20tY2xvY2snKSl7XHJcbiAgICAgICAgJCgnLmRhdGVwaWNrZXItY3VzdG9tLWNsb2NrJykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIC8vIG9uU2VsZWN0OiBmdW5jdGlvbihmb3JtYXR0ZWREYXRlKXtcclxuICAgICAgICAgICAgLy8gICAgICQodGhpcykudmFsKGZvcm1hdHRlZERhdGUpO1xyXG4gICAgICAgICAgICAvLyAgICAgdmFyIGRhdGVQaWNrID0gZm9ybWF0dGVkRGF0ZTtcclxuICAgICAgICAgICAgLy8gICAgICQodGhpcykuZGF0YSgndmFsdWUnLCBkYXRlUGljayk7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygn0JLRi9Cy0L7QtNC40YIgZGF0YS12YWx1ZTogJyArICQodGhpcykuZGF0YSgndmFsdWUnKSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyrRhNGD0L3QutGG0LjRjyDRhNC+0YDQvNCw0YLQuNGA0L7QstCw0L3QuNGPINC00LDRgtGLKi9cclxuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xyXG4gICAgICAgIHZhciBkZCA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGlmIChkZCA8IDEwKSBkZCA9ICcwJyArIGRkO1xyXG5cclxuICAgICAgICB2YXIgbW0gPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgIGlmIChtbSA8IDEwKSBtbSA9ICcwJyArIG1tO1xyXG5cclxuICAgICAgICB2YXIgeXkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgaWYgKHl5IDwgMTApIHl5ID0gJzAnICsgeXk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZCArICcuJyArIG1tICsgJy4nICsgeXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoJCgnaW5wdXQnKS5oYXNDbGFzcygnZGF0ZXBpY2tlci1kZWxpdmVyeS12MicpIHx8ICQoJ2RpdicpLmhhc0NsYXNzKCdkYXRlcGlja2VyLWRlbGl2ZXJ5LXYyJykpe1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGRhdGVwaWNrZXJEZWxpdmVyeSA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGRhdGVwaWNrZXJEZWxpdmVyeVYyPSAkKCcuZGF0ZXBpY2tlci1kZWxpdmVyeS12MicpO1xyXG4gICAgICAgIC8vIGRhdGVwaWNrZXJEZWxpdmVyeVYyLnZhbChmb3JtYXREYXRlKGRhdGVwaWNrZXJEZWxpdmVyeSkpO1xyXG4gICAgICAgIGRhdGVwaWNrZXJEZWxpdmVyeVYyLmRhdGVwaWNrZXIoe1xyXG4gICAgICAgICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIFxyXG5cclxuICAgICQoJ2RvY3VtZW50Jykub24oJ2NsaWNrJywgJy5vcmRlcl9fYnRuLmRpc2FibGVkJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmV4Y3Vyc2lvbi1wYXlfX2l0ZW0gbGFiZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmV4Y3Vyc2lvbi1wYXlfX2l0ZW0nKS5zaWJsaW5ncygpLmZpbmQoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvL9C80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QviDQsiDRjdC60YHQutGD0YDRgdC40Y/RhVxyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjZXhjdXJzaW9uLXBheS1zY29yZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoJCh0aGlzKS5wcm9wKCBcImNoZWNrZWRcIiApKXtcclxuICAgICAgICAgICAgJCgnLmV4Y3Vyc2lvbi1wYXktc2NvcmUnKS5zbGlkZURvd24oMzAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNleGN1cnNpb24tcGF5LWNhcmQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCQodGhpcykucHJvcCggXCJjaGVja2VkXCIgKSl7XHJcbiAgICAgICAgICAgICQoJy5leGN1cnNpb24tcGF5LXNjb3JlJykuc2xpZGVVcCgzMDApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvKtC40LfQvNC10L3QtdC90LjQtSDQvtC/0LvQsNGC0YsqL1xyXG4gICAgJCgnLm9yZGVyLXBheV9faXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHBheVJhZGlvID0gJCh0aGlzKS5jaGlsZHJlbignaW5wdXQnKTtcclxuICAgICAgICBpZihwYXlSYWRpby5wcm9wKFwiY2hlY2tlZFwiKSl7XHJcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5vcmRlci1wYXlfX2l0ZW0nKS5maW5kKCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmZpbHRlci1ob2xkX19kcm9wZG93bicsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5maWx0ZXItaG9sZF9faXRlbScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmZpbHRlci1ob2xkX19pdGVtJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5maWx0ZXItaG9sZF9fc3VibWVudScpLnNsaWRlRG93big1MDApO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvLyBkb2N1bWVudEhlaWdodFxyXG4gICAgZnVuY3Rpb24gY2hhbmdlSGVpZ2h0QmFza2V0UG9wdXAgKCl7XHJcbiAgICAgICAgdmFyIGJhc2tldFNjcm9sbCA9ICQoJy5wb3B1cC1iYXNrZXRfX3Njcm9sbCcpLFxyXG4gICAgICAgICAgICBoZWlnaHRCYXNrZXQgPSBiYXNrZXRTY3JvbGwuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIGlmIChoZWlnaHRCYXNrZXQgPj0gZG9jdW1lbnRIZWlnaHQgLSAxMDApe1xyXG4gICAgICAgICAgICBiYXNrZXRTY3JvbGwuYWRkQ2xhc3MoJ2ZpeGVkLWhlaWdodC1iYXNrZXQnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2lmICcgKyBoZWlnaHRCYXNrZXQpO1xyXG4gICAgICAgICAgICAvKtC60LDRgdGC0L7QvNC90YvQuSDRgdC60YDQvtC70LsqL1xyXG4gICAgICAgICAgICBiYXNrZXRTY3JvbGwualNjcm9sbFBhbmUoKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGJhc2tldFNjcm9sbC5yZW1vdmVDbGFzcygnZml4ZWQtaGVpZ2h0LWJhc2tldCcpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZWxzZSAnICsgaGVpZ2h0QmFza2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlSGVpZ2h0QmFza2V0UG9wdXAoKTtcclxuXHJcbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2hhbmdlSGVpZ2h0QmFza2V0UG9wdXAoKTtcclxuICAgIH0pO1xyXG4gICAgLyrQutCw0YDRgtC40L3QutC4INC+0LTQvdC+0Lkg0YjQuNGA0LjQvdGLKi9cclxuXHJcbiAgICAkKCcuYy1jYXJkLWNhdGFsb2dfX2ltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW0pe1xyXG4gICAgICAgIHZhciBpbWcgPSAkKGVsZW0pLmNoaWxkcmVuKCdpbWcnKSxcclxuICAgICAgICAgICAgaW1nV2lkdGggPSBpbWcud2lkdGgoKSxcclxuICAgICAgICAgICAgJHRoaXMgPSAkKGVsZW0pO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZWxlbWVudCAnICsgaW5kZXggKyAnOiAnICsgJ3dpZHRoOiAnICsgaW1nV2lkdGgpO1xyXG4gICAgICAgIGlmKGltZ1dpZHRoIDwgMzkwICkge1xyXG4gICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnYmlnLXByb2R1Y3QtaW1nJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfQtdGB0YLRjCDQutCw0YDRgtC40L3QutCwINC80LXQvdGM0YjQtSAzOTAnKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdiaWctcHJvZHVjdC1pbWcnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ9GA0LDQsdC+0YLQsNC10YIg0L3QviDQutCw0YDRgtC40L3QutC4INC90LXRgicpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL9C/0L7QutCw0LfQsNGC0Ywg0LLRgdC1INC80LXRgNC+0L/RgNC40Y/RgtC40Y8g0L/QviDQtNC90Y/QvCDQvdCwINGB0YLRgNCw0L3QuNGG0LUg0JzQtdGA0L7Qv9GA0LjRj9GC0LjRj1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jLWNhcmQtZXZlbnQtdGltZWxpc3RfX21vcmUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgdmFyIHRleHRCdG4gPSAkdGhpcy5odG1sKCk7XHJcbiAgICAgICAgaWYodGV4dEJ0biA9PSBcItC/0L7QutCw0LfQsNGC0Ywg0LLRgdC1XCIpe1xyXG4gICAgICAgICAgICAkdGhpcy5odG1sKFwi0YHQutGA0YvRgtGMXCIpO1xyXG4gICAgICAgICAgICAkdGhpcy5zaWJsaW5ncygnLmMtY2FyZC1ldmVudC10aW1lbGlzdCcpLmFkZENsYXNzKCdzaG93LWl0ZW0tYWxsJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICR0aGlzLmh0bWwoXCLQv9C+0LrQsNC30LDRgtGMINCy0YHQtVwiKTtcclxuICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJy5jLWNhcmQtZXZlbnQtdGltZWxpc3QnKS5yZW1vdmVDbGFzcygnc2hvdy1pdGVtLWFsbCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VQYXJ0eVRpdGxlUG9wdXAgKCl7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qcy1wYXJ0eS1vcmRlcicsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBsZXR0ZXIgPSAkKHRoaXMpLmRhdGEoJ25hbWUnKSxcclxuICAgICAgICAgICAgICAgIHRpdGxlID0gJCgnLnBvcHVwLXBhcnR5LW9yZGVyIC5wb3B1cC10aXRsZScpLmZpbmQoJ3NwYW4nKTtcclxuXHJcbiAgICAgICAgICAgIHRpdGxlLnRleHQoJycpO1xyXG4gICAgICAgICAgICB0aXRsZS5hcHBlbmQobGV0dGVyKTtcclxuICAgICAgICAgICAgJCgnI3RpdGxlLXBhcnR5LW9yZGVyJykudmFsKGxldHRlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBjaGFuZ2VQYXJ0eVRpdGxlUG9wdXAoKTtcclxuXHJcblxyXG5cclxuICAgIC8v0L/QvtGP0LLQu9C10L3QuNC1INC80L7QsdC40LvRjNC90L7Qs9C+INGH0LXQutCwINCyINC60L7RgNC30LjQvdC1XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmJhc2tldF9fY2hlY2stbW9iaWxlJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5iYXNrZXRfX2FzaWRlJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/QuNC30LzQtdC90LXQvdC40LUg0LIg0L7RhNC+0YDQvNC70LXQvdC40Lgg0LfQsNC60LDQt9CwINC90LAg0LTRgNGD0LPQvtCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNvcmRlci11c2VyX290aGVyLCAub3JkZXItdXNlcl9vdGhlcicsICBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCQodGhpcykucHJvcCggXCJjaGVja2VkXCIgKSl7XHJcbiAgICAgICAgICAgICQoJy5vcmRlci11c2VyX19saXN0JykuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xyXG4gICAgICAgICAgICAkKCcub3JkZXItdXNlcl9fb3RoZXItZm9ybScpLmNzcygnZGlzcGxheScsJ2ZsZXgnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnI29yZGVyLXVzZXJfYXV0aCwgI29yZGVyLXVzZXJfYXV0aC0xJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBpZigkKHRoaXMpLnByb3AoIFwiY2hlY2tlZFwiICkpe1xyXG4gICAgICAgICAgICAkKCcub3JkZXItdXNlcl9fbGlzdCcpLmNzcygnZGlzcGxheScsJ2ZsZXgnKTtcclxuICAgICAgICAgICAgJCgnLm9yZGVyLXVzZXJfX290aGVyLWZvcm0nKS5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy/RgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5say1wcm9maWxlX19saW5rLWVkaXQnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGstcHJvZmlsZV9faXRlbScpXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbignZGl2OmZpcnN0LWNoaWxkJylcclxuICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5say1wcm9maWxlX19pdGVtJylcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCcubGstcHJvZmlsZS1lZGl0OmVxKDApJylcclxuICAgICAgICAgICAgLnNob3coKTtcclxuXHJcbiAgICAgICAgaW5pdFByb2ZpbGVQbHVnaW4oKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0UHJvZmlsZVBsdWdpbigpe1xyXG4gICAgICAgIC8v0LzQsNGB0LrQsFxyXG4gICAgICAgICQoJy5qcy1pbnB1dC0tdGVsJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICAgICAkKCcuanMtaW5wdXQtLWRhdGUnKS5tYXNrKCcwMC4wMC4wMDAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG5cclxuICAgICAgICAvKtGB0LXQu9C10LrRgiovXHJcbiAgICAgICAgJCgnLmxrLXByb2ZpbGUtZWRpdF9fY2hpbGQtbGlzdCAuanMtc2VsZWN0LS1jaGlsZCcpLlN1bW9TZWxlY3QoKTtcclxuICAgICAgICBjaGFuZ2VTZWxlY3RGYWNlKCcubGstcHJvZmlsZS1lZGl0X19jaGlsZC1saXN0IC5qcy1zZWxlY3QtLWNoaWxkJywgJ00nLCdpY29uLWJveS1zbWlsaW5nJywnaWNvbi1naXJsLXNtaWxpbmcnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5say1wcm9maWxlX19lZGl0IC5jLWJ1dHRvbl9fbWVkaXVtJywgZnVuY3Rpb24oKXtcclxuICAgIC8vICAgICAkKHRoaXMpLnBhcmVudHMoJy5say1wcm9maWxlLWVkaXQnKS5oaWRlO1xyXG4gICAgLy8gICAgICQodGhpcykucGFyZW50cygnLmxrLXByb2ZpbGUtaXRlbScpLmNoaWxkcmVuKCdkaXY6Zmlyc3QtY2hpbGQnKS5zaG93KCk7XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvKtGB0LvQsNC50LTQtdGAINC00LvRjyDRgdGC0YDQsNC90LjRhtGLINCS0YvQv9GD0YHQutC90YvQtSovXHJcbiAgICAkKCcuZ3JhZHVhdGlvbi1wYXJ0eS1iYW5uZXJfX3NsaWRlcicpLm93bENhcm91c2VsKHtcclxuICAgICAgICBsb29wOnRydWUsXHJcbiAgICAgICAgaXRlbXM6IDEsXHJcbiAgICAgICAgYXV0b2hlaWdodDogdHJ1ZSxcclxuICAgICAgICBuYXY6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy/Qv9C70LDQstC90YvQuSDRj9C60L7RgNGMXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxUb0FuY2hvciAoZWxlbSkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgZWxlbSwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBpZCAgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgICAgIG1lbnVIZWlnaHQgPSAwLFxyXG4gICAgICAgICAgICAgICAgdG9wID0gJChpZCkub2Zmc2V0KCkudG9wLFxyXG4gICAgICAgICAgICAgICAgdG9wSW5kZW50ID0gdG9wIC0gbWVudUhlaWdodDtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RvcDogJyArIHRvcCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0b3BJbmRlbnQ6ICcgKyB0b3BJbmRlbnQpO1xyXG4gICAgICAgICAgICAkKCdodG1sJykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiB0b3BJbmRlbnR9LCAxMDAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJCgnLmdyYWR1YXRpb24tcGFydHktYmFubmVyX19idG4nKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9ICQoJCh0aGlzKS5hdHRyKCdocmVmJykpO1xyXG4gICAgICAgIGlmKHRhcmdldC5sZW5ndGgpe1xyXG5cclxuICAgICAgICAgICAgdmFyIGhlaWdodEhlYWRlciA9ICQoJy5oZWFkZXInKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgdmFyIHNjcm9sbFRvID0gdGFyZ2V0Lm9mZnNldCgpLnRvcCAtICgraGVpZ2h0SGVhZGVyICsgMTAwKTtcclxuICAgICAgICAgICAgJCgnYm9keSwgaHRtbCcpLmFuaW1hdGUoe3Njcm9sbFRvcDogc2Nyb2xsVG8rJ3B4J30sIDgwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gJCgnI2V4Y3Vyc2lvbi1wcm9ncmFtLWJ0bicpLmNsaWNrKGZ1bmN0aW9uKGUpe1xyXG4gICAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vICAgICB2YXIgdGFyZ2V0ID0gJCgkKHRoaXMpLmF0dHIoJ2hyZWYnKSk7XHJcbiAgICAvLyAgICAgaWYodGFyZ2V0Lmxlbmd0aCl7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgICAgICB2YXIgaGVpZ2h0SGVhZGVyID0gJCgnLmhlYWRlcicpLmhlaWdodCgpO1xyXG4gICAgLy8gICAgICAgICB2YXIgc2Nyb2xsVG8gPSB0YXJnZXQub2Zmc2V0KCkudG9wIC0gKCtoZWlnaHRIZWFkZXIgKyAxMDApO1xyXG4gICAgLy8gICAgICAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiBzY3JvbGxUbysncHgnfSwgODAwKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvLyBzY3JvbGxUb0FuY2hvcignLmdyYWR1YXRpb24tcGFydHktYmFubmVyX19idG4nKTtcclxuXHJcblxyXG4gICAgLy/Qv9C+0LjRgdC6INC/0L4g0LrQsNGE0LUg0L3QsCDRgdGC0YDQsNC90LjRhtC1INGBINGC0L7RgNGC0LDQvNC4INC4INCyINC+0YTQvtGA0LzQu9C10L3QuNC4INC30LDQutCw0LfQsFxyXG4gICAgJChkb2N1bWVudCkub24oJ2tleXVwIGNoYW5nZScsICcuYy1zZWFyY2gtcGFnZV9faW5wdXQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNoZWNrQWxsKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCBsaScsICcub3JkZXItcmFkaW8nLCAnLmMtc2VhcmNoLXBhZ2VfX2lucHV0Jyk7XHJcbiAgICAgICAgY2hlY2tBbGwoJyNqcy1ib3gtc2VhcmNoLWFkZGl0aXZlIC5jLWJveC1zZWFyY2hfX2l0ZW0nLCAnLmMtY2hlY2tib3gnLCAnI2pzLWJveC1zZWFyY2gtYWRkaXRpdmUgLmMtc2VhcmNoLXBhZ2VfX2lucHV0Jyk7XHJcbiAgICAgICAgY2hlY2tBbGwoJyNqcy1ib3gtc2VhcmNoLWluZ3JlZGllbnQgLmMtYm94LXNlYXJjaF9faXRlbScsICcuYy1jaGVja2JveCcsICcjanMtYm94LXNlYXJjaC1pbmdyZWRpZW50IC5jLXNlYXJjaC1wYWdlX19pbnB1dCcpO1xyXG4gICAgICAgIGNoZWNrQWxsKCcjanMtYm94LXNlYXJjaC1ldmVudCAuYy1ib3gtc2VhcmNoX19pdGVtJywgJyAub3JkZXItcmFkaW8nLCAnI2pzLWJveC1zZWFyY2gtZXZlbnQgLmMtc2VhcmNoLXBhZ2VfX2lucHV0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBjaGVja0FsbChlbGVtLCB3aGVyZVNlYXJjaCwgaW5wdXQpIHtcclxuICAgICAgICAkKGVsZW0pLmVhY2goZnVuY3Rpb24oaSwgaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAkKHRoaXMpLmZpbmQod2hlcmVTZWFyY2gpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJChpbnB1dCkudmFsKCkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGlmICggdmFsdWUgPj0gMCApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgLy8gJCh0aGlzKS5hZGRDbGFzcygnanMtb3JkZXItZGVsaXZlcnktYWRkcmVzc19fc2hvdycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKHRoaXMpLnJlbW92ZUNsYXNzKCdqcy1vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19zaG93Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja0FsbCgnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2xpc3QgbGknLCAnLm9yZGVyLXJhZGlvJywgJy5jLXNlYXJjaC1wYWdlX19pbnB1dCcpO1xyXG4gICAgY2hlY2tBbGwoJyNqcy1ib3gtc2VhcmNoLWFkZGl0aXZlIC5jLWJveC1zZWFyY2hfX2l0ZW0nLCAnLmMtY2hlY2tib3gnLCAnI2pzLWJveC1zZWFyY2gtYWRkaXRpdmUgLmMtc2VhcmNoLXBhZ2VfX2lucHV0Jyk7XHJcbiAgICBjaGVja0FsbCgnI2pzLWJveC1zZWFyY2gtaW5ncmVkaWVudCAuYy1ib3gtc2VhcmNoX19pdGVtJywgJyAuYy1jaGVja2JveCcsICcjanMtYm94LXNlYXJjaC1pbmdyZWRpZW50IC5jLXNlYXJjaC1wYWdlX19pbnB1dCcpO1xyXG4gICAgY2hlY2tBbGwoJyNqcy1ib3gtc2VhcmNoLWV2ZW50IC5jLWJveC1zZWFyY2hfX2l0ZW0nLCAnIC5vcmRlci1yYWRpbycsICcjanMtYm94LXNlYXJjaC1ldmVudCAuYy1zZWFyY2gtcGFnZV9faW5wdXQnKTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmMtYm94LXNlYXJjaF9fY2xlYXInLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLmMtc2VhcmNoLXBhZ2VfX2lucHV0JykudmFsKCcnKTtcclxuICAgICAgICAkKCcuYy1ib3gtc2VhcmNoX19pdGVtJykuc2hvdygpO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8v0L7RgtC/0LjRgdCw0YLRjNGB0Y8g0L7RgiDQv9C+0LTQv9C40YHQutC4INCyINC70LjRh9C90L7QvCDQutCw0LHQuNC90LXRgtC1XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2xrLXByb2ZpbGUtc3Vic2NyaXB0aW9uX3Vuc3Vic2NyaWJlJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5say1wcm9maWxlIC5say1wcm9maWxlLXN1YnNjcmlwdGlvbl9fYm94JykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5say1wcm9maWxlIC5say1wcm9maWxlLXN1YnNjcmlwdGlvbi1kZWwnKS5zaG93KCk7XHJcblxyXG4gICAgfSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2xrLXByb2ZpbGUtc3Vic2NyaXB0aW9uLWRlbF9fY2FuY2VsJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5say1wcm9maWxlIC5say1wcm9maWxlLXN1YnNjcmlwdGlvbi1kZWwnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmxrLXByb2ZpbGUgLmxrLXByb2ZpbGUtc3Vic2NyaXB0aW9uX19ib3gnKS5zaG93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9C40LfQvNC10L3QvdC10LjQtSDQv9Cw0YDQvtC70Y8g0LIg0L/RgNC+0YTQuNC70LUg0LvQuNGH0L3QvtCz0L4g0LrQsNCx0LjQvdC10YLQsFxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNsay1wcm9maWxlX19jaGFuZ2UtcGFzcycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgLnBhcmVudHMoJy5say1wcm9maWxlLXVzZXInKVxyXG4gICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpXHJcbiAgICAgICAgLnNpYmxpbmdzKCcubGstcHJvZmlsZS1lZGl0X19wYXNzJylcclxuICAgICAgICAuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQuNC30LzQtdC90LXQvdC40LUg0L/QvtC00L/QuNGB0LrQuCDQsiDQv9GA0L7RhNC40LvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICQoJyNsay1wcm9maWxlX2NoYW5nZS1zdWJzY3JpcHRpb24nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgIC5wYXJlbnRzKCcubGstcHJvZmlsZS1zdWJzY3JpcHRpb25fX2JveCcpXHJcbiAgICAgICAgLmNzcygnZGlzcGxheScsICdub25lJylcclxuICAgICAgICAuc2libGluZ3MoJy5say1wcm9maWxlLWVkaXQnKVxyXG4gICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgIH0pO1xyXG4gICAgLy8g0L7RgtC80LXQvdCwINC40LfQvNC10L3QtdC90LjRjyDQv9C+0LTQv9C40YHQutC4INCyINC/0YDQvtGE0LjQu9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgJCgnI2xrLXByb2ZpbGVfY2FuY2VsLWNoYW5nZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgLnBhcmVudHMoJy5say1wcm9maWxlLWVkaXQnKVxyXG4gICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpXHJcbiAgICAgICAgLnNpYmxpbmdzKCcubGstcHJvZmlsZS1zdWJzY3JpcHRpb25fX2JveCcpXHJcbiAgICAgICAgLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/QtNC+0LHQsNCy0LvRj9C10Lwg0Y3Qu9C10LzQtdC90YLRiyDQsiDQv9GA0L7RhNC40LvQtSDQu9C40YfQvdC+0LPQviDQutCw0LHQuNC90LXRgtCwXHJcbiAgICAvL9C00L7QsdCw0LLQu9C10L3QuNC1INCy0YLQvtGA0L7Qs9C+IGVtYWlsXHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNqcy1say1wcm9maWxlX19hZGQtZW1haWwnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcylcclxuICAgICAgICAgICAgLnBhcmVudHMoJy5jLWZvcm1fX2l0ZW0nKVxyXG4gICAgICAgICAgICAuc2libGluZ3MoJy5say1wcm9maWxlLWVkaXRfX2NvcHknKVxyXG4gICAgICAgICAgICAuY2xvbmUoKS5hcHBlbmRUbyhcIi5say1wcm9maWxlLWVkaXRfX2VtYWlsLWxpc3RcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2pzLWxrLXByb2ZpbGVfX2FkZC10ZWwnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcylcclxuICAgICAgICAgICAgLnBhcmVudHMoJy5jLWZvcm1fX2l0ZW0nKVxyXG4gICAgICAgICAgICAuc2libGluZ3MoJy5say1wcm9maWxlLWVkaXRfX2NvcHknKVxyXG4gICAgICAgICAgICAuY2xvbmUoKS5hcHBlbmRUbyhcIi5say1wcm9maWxlLWVkaXRfX3RlbC1saXN0XCIpO1xyXG4gICAgICAgICQoJy5qcy1pbnB1dC0tdGVsJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0LTQvtCx0LDQstC70LXQvdC40LUg0L/QvtC70LXQuSDQsiDQutC+0L3RgtCw0LrRgtCw0YUg0JvQmiovXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2pzLWxrLXByb2ZpbGVfX2FkZC1pbmZvLWFsbCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NvcnJlY3QnKTtcclxuICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgICAgIC5wYXJlbnRzKCcubGstcHJvZmlsZS1lZGl0X19saW5lJylcclxuICAgICAgICAgICAgLnNpYmxpbmdzKCcubGstcHJvZmlsZS1lZGl0X19jb3B5JylcclxuICAgICAgICAgICAgLmNsb25lKCkuYXBwZW5kVG8oXCIubGstcHJvZmlsZS1lZGl0X19jb250YWN0LWxpc3RcIik7XHJcbiAgICAgICAgLy8gJCgnLmpzLWlucHV0LS1kYXRlJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuXHJcbiAgICAgICAgLy8gaW5pdFByb2ZpbGVQbHVnaW4oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0LTQvtCx0LDQstC70LXQvdC40LUg0YDQtdCx0LXQvdC60LAg0LIg0L/RgNC+0YTQuNC70LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPKi9cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjanMtbGstcHJvZmlsZV9fYWRkLWNoaWxkJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgICAgIC5wYXJlbnRzKCcubGstcHJvZmlsZS1lZGl0X19saW5lJylcclxuICAgICAgICAgICAgLnNpYmxpbmdzKCcubGstcHJvZmlsZS1lZGl0X19jb3B5JylcclxuICAgICAgICAgICAgLmNsb25lKCkuYXBwZW5kVG8oXCIubGstcHJvZmlsZS1lZGl0X19jaGlsZC1saXN0XCIpO1xyXG4gICAgICAgICQoJy5qcy1pbnB1dC0tZGF0ZScpLm1hc2soJzAwLjAwLjAwMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcblxyXG4gICAgICAgIGluaXRQcm9maWxlUGx1Z2luKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNqcy1say1wcm9maWxlLWVkaXRfX2FkZHJlc3MnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcylcclxuICAgICAgICAgICAgLnBhcmVudHMoJy5say1wcm9maWxlLWVkaXRfX2xpbmUnKVxyXG4gICAgICAgICAgICAuc2libGluZ3MoJy5say1wcm9maWxlLWVkaXRfX2NvcHknKVxyXG4gICAgICAgICAgICAuY2xvbmUoKS5hcHBlbmRUbyhcIi5say1wcm9maWxlLWVkaXRfX2FkZHJlc3MtbGlzdFwiKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmMtZm9ybV9fZGVsJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgJGVsZW1faXRlbSA9ICQodGhpcykucGFyZW50cygnLmMtZm9ybV9faXRlbScpO1xyXG4gICAgICAgIHZhciAkZWxlbWVudCA9ICAkKHRoaXMpLnBhcmVudHMoJy5say1wcm9maWxlLWVkaXRfX2NvcHknKTtcclxuICAgICAgICAkZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAkZWxlbV9pdGVtLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/RgdC60YDRi9GC0Ywv0L/QvtC60LDQt9Cw0YLRjCDQt9Cw0LrQsNC3INCyINC40YHRgtC+0YDQuNC4INC30LDQutCw0LfQvtCyXHJcbiAgICAkKCcubGstaGlzdG9yeS1pdGVtX19oZWFkZXInKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGstaGlzdG9yeS1pdGVtJykudG9nZ2xlQ2xhc3MoJ2xrLWhpc3RvcnktaXRlbV9fYm9keS1zaG93Jyk7XHJcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLmxrLWhpc3RvcnktaXRlbV9fYm9keScpLnNsaWRlVG9nZ2xlKDMwMCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy/QvtGH0LjRgdGC0LjRgtGMINGE0L7RgNC80YMg0L/QvtC40YHQutCwXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm9yZGVyLWRlbGl2ZXJ5LXNlYXJjaF9fY2xlYXInLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcub3JkZXItZGVsaXZlcnktc2VhcmNoX19pdGVtJykuc2libGluZ3MoKS5maW5kKCdpbnB1dCcpLnZhbCgnJyk7XHJcbiAgICAgICAgJCgnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2FsbCcpLnJlbW92ZUNsYXNzKCdzaG93LWl0ZW0tYWxsJyk7XHJcblxyXG4gICAgICAgIC8vIHNob3dEZWxpdmVyeUFkZHJlc3NDYWtlKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19faXRlbScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/Qv9C+0LrQsNC30LDRgtGMINCy0YHQtSDQsNC00YDQtdGB0LAg0LrQsNGE0LUg0LIg0LfQsNC60LDQt9C1XHJcbiAgICBmdW5jdGlvbiBzaG93RGVsaXZlcnlBZGRyZXNzQ2FrZSAoZWxlbSl7XHJcbiAgICAgICAgJChlbGVtKS5lYWNoKGZ1bmN0aW9uKGksIGVsZW0pe1xyXG4gICAgICAgICAgICBpIDwgNiA/ICQoZWxlbSkuc2hvdygpIDogJChlbGVtKS5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBzaG93RGVsaXZlcnlBZGRyZXNzQ2FrZSgnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2l0ZW0nKTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2FsbCcsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICQoJy5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19hbGwnKTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIHZhciB0ZXh0QnRuID0gJHRoaXMuaHRtbCgpO1xyXG4gICAgICAgIGlmKHRleHRCdG4gPT0gXCLQv9C+0LrQsNC30LDRgtGMINCy0YHQtVwiKXtcclxuICAgICAgICAgICAgJHRoaXMuaHRtbChcItGB0LrRgNGL0YLRjFwiKTtcclxuICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJy5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19saXN0JykuYWRkQ2xhc3MoJ3Nob3ctaXRlbS1hbGwnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgJHRoaXMuaHRtbChcItC/0L7QutCw0LfQsNGC0Ywg0LLRgdC1XCIpO1xyXG4gICAgICAgICAgICAkdGhpcy5zaWJsaW5ncygnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2xpc3QnKS5yZW1vdmVDbGFzcygnc2hvdy1pdGVtLWFsbCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9GB0YLRgNCw0L3QuNGG0LAg0J7RhNC+0YDQvNC70LXQvdC40LUg0LfQsNC60LDQt9CwLiDQn9GA0Lgg0YTQvtC60YPRgdC1INC90LAg0LjQvdC/0YPRgiDRgSDQsNC00YDQtdGB0L7QvCwg0LTQtdC70LDQtdC8INCw0LrRgtC40LLQvdGL0LkgcmFkaW8gYnV0dG9uXHJcbiAgICAkKCcub3JkZXItZGVsaXZlcnktY3VzdG9tX19pdGVtIGlucHV0LCAub3JkZXItZGVsaXZlcnktY3VzdG9tX19pdGVtIHRleHRhcmVhJykuZm9jdXMoZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgIC8vIHZhciAkdGhpc1JhZGlvSW5wdXQgPSAkKHRoaXMpLnBhcmVudHMoJ2xhYmVsJykuc2libGluZ3MoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpO1xyXG4gICAgICAgICR0aGlzLnBhcmVudHMoJ2xhYmVsJykuc2libGluZ3MoJ2lucHV0W3R5cGU9XCJyYWRpb1wiXScpLnByb3AoIFwiY2hlY2tlZFwiLHRydWUpO1xyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgLy/RgdCy0LXRgNC90YPRgtGML9GA0LDQt9Cy0LXRgNC90YPRgtGMINCx0LvQvtC6INCyINC60L7RgNC30LjQvdC1XHJcbiAgICAkKCcuYmFza2V0LWl0ZW1fX2hlYWRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICR0aGlzID0gICQodGhpcyk7XHJcbiAgICAgICAgJHRoaXMucGFyZW50cygnLmJhc2tldC1pdGVtJykudG9nZ2xlQ2xhc3MoJ2Jhc2tldC1ib2R5X19zaG93Jyk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICB9LCAxNTApO1xyXG5cclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuYmFza2V0LWl0ZW1fX2JvZHknKS5zbGlkZVRvZ2dsZSgxMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmJhc2tldC1taXhfX2l0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkKCcuYmFza2V0LWl0ZW1fX2hlYWRlcicpLnBhcmVudHMoJy5iYXNrZXQtaXRlbScpLmFkZENsYXNzKCdiYXNrZXQtYm9keV9fc2hvdycpO1xyXG4gICAgICAgICQoJy5iYXNrZXQtaXRlbV9fYm9keScpLnNsaWRlRG93bigxMDApO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvKtC/0L7QutCw0LfRi9Cy0LDQtdC8INC/0L7Qv9Cw0L8g0L3QsCDRgdGC0YDQsNC90LjRhtC1INCh0L7Qt9C00LDRgtC10LvQuCDQkNC90LTQtdGA0YHQvtC9Ki9cclxuICAgICQoJy5waG90by1wb2ludF9faWNvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHN0ciA9ICQodGhpcykuc2libGluZ3MoJy5waG90by1wb2ludF9fZGVzY3JpcHRpb24nKS5maW5kKCdzcGFuJykudGV4dCgpLnRyaW0oKSxcclxuICAgICAgICAgICAgYXJyID0gc3RyLnNwbGl0KCcgJyksXHJcbiAgICAgICAgICAgIG5hbWUgPSBhcnJbMF0gKyAnICcgKyBhcnJbMV0sXHJcbiAgICAgICAgICAgIGRlc2MgPSAnJztcclxuICAgICAgICBhcnIuc3BsaWNlKDAsIDIpO1xyXG4gICAgICAgIGRlc2MgPSBhcnIuam9pbignICcpO1xyXG4gICAgICAgICQoJy5jcmVhdG9ycyAucG9wdXAtdGl0bGUnKS5maW5kKCdzcGFuJykudGV4dChuYW1lKTtcclxuICAgICAgICAkKCcuY3JlYXRvcnMgLnBvcHVwLWJvZHknKS5maW5kKCdwJykudGV4dChkZXNjKTtcclxuICAgICAgICB2YXIgcG9wdXAgPSAkKCcuY3JlYXRvcnMgLnBvcHVwJyk7XHJcbiAgICAgICAgcG9wdXAucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICBwb3B1cC5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmNyZWF0b3JzIC5wb3B1cC1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLmNyZWF0b3JzIC5wb3B1cCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtGE0LDQsdGA0LjQutCwINGB0YfQsNGB0YLRjNGPLCDQutC70LjQuiDQv9C+INC/0L7QuNC90YLRgyovXHJcbiAgICAkKCcuZmFjdG9yeS1wb2ludF9faW1nJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCcucG9wdXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5wb3B1cCcpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuZmFjdG9yeS1wb2ludCAucG9wdXAtY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnBvcHVwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0L/QvtC60LDQt9GL0LLQsNC10Lwg0LzQsNC70LXQvdGM0LrQuNC5INCx0LvQvtC6INGBINCy0YvQsdGA0LDQvdC90YvQvNC4INGC0L7QstCw0YDQsNC80Lgg0LIg0LrQsNGA0YLQvtGH0LrQtSDRgtC+0LLQsNGA0LAgKNC80L7QsdC40LvRjNC90LDRjyDQstC10YDRgdC40Y8pKi9cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucG9wdXAtcHJvZHVjdF9fY2hlY2stbW9iaWxlJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5wb3B1cC1wcm9kdWN0IC5wb3B1cC1taW5pJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcbiAgICAvKtC30LDQutGA0YvQstCw0LXQvCDQvNCw0LvQtdC90YzQutC40Lkg0L/QvtC/0LDQvyDRgSDRgtC+0LLQsNGA0LDQvNC4Ki9cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucG9wdXAtcHJvZHVjdF9fY2hlY2stY2xvc2UnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnBvcHVwLXByb2R1Y3QgLnBvcHVwLW1pbmknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucG9wdXAtbWluaScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC/0L7QutCw0LfRi9Cy0LDQtdC8INC60LDRgtC10LPQvtGA0LjQuCDQvNC10L3RjiDQsiDQutCw0YLQsNC70L7Qs9C1Ki9cclxuICAgIHZhciBmaWx0ZXJCYWdlID0gJCgnLmZpbHRlci1iYWdlJyk7XHJcblxyXG4gICAgZmlsdGVyQmFnZS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmNhdGFsb2ctYm9keScpLnRvZ2dsZUNsYXNzKCdzaG93LWNhdGVnb3J5Jyk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnanMtaGlkZS13b3JkJyk7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcuZmlsdGVyLWJhZ2VfX3RpdGxlIHNwYW4nKS5odG1sKCfQn9C+0LrQsNC30LDRgtGMJyk7XHJcbiAgICAgICAgJCgnLmpzLWhpZGUtd29yZCcpLmZpbmQoJy5maWx0ZXItYmFnZV9fdGl0bGUgc3BhbicpLmh0bWwoJ9Ch0LrRgNGL0YLRjCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmZpbHRlci1ob2xkX19jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBmaWx0ZXJCYWdlLnNob3coKTtcclxuICAgICAgICAkKCcuY2F0YWxvZy1ib2R5JykucmVtb3ZlQ2xhc3MoJ3Nob3ctY2F0ZWdvcnknKTtcclxuICAgICAgICBmaWx0ZXJCYWdlLnRvZ2dsZUNsYXNzKCdqcy1oaWRlLXdvcmQnKTtcclxuICAgICAgICAkKCcuZmlsdGVyLWJhZ2VfX3RpdGxlIHNwYW4nKS5odG1sKCfQn9C+0LrQsNC30LDRgtGMJyk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgIFx0aWYod2luZG93V2lkdGggPD0gNzMwKXtcclxuICAgIFx0ICAgICQoJy5maWx0ZXItaG9sZF9fY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIFx0ICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5maWx0ZXItaG9sZCcpLnNsaWRlVXAoNjAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYod2luZG93V2lkdGggPD0gNzMwKXtcclxuICAgICAgICAkKCcuZmlsdGVyLWhvbGRfX2Nsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZmlsdGVyLWhvbGQnKS5zbGlkZVVwKDYwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIC8q0YHQu9Cw0LnQtNC10YAg0LrQsNGA0YPRgdC10LvRjCovXHJcbiAgICAkKCcuY2Fyb3VzZWwtc2xpZGVyJykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgIGxvb3A6dHJ1ZSxcclxuICAgICAgICAvLyBuYXY6dHJ1ZSxcclxuICAgICAgICBtYXJnaW46MjAsXHJcbiAgICAgICAgLy8gaXRlbXM6IDQsXHJcbiAgICAgICAgLy8gY2VudGVyOiB0cnVlLFxyXG4gICAgICAgIHJlc3BvbnNpdmVDbGFzczogdHJ1ZSxcclxuICAgICAgICByZXNwb25zaXZlOntcclxuICAgICAgICAgICAgMDp7XHJcbiAgICAgICAgICAgICAgICBpdGVtczoxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDU0MDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczoyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDc4MDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczozXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDEyMDA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6NFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxNjAwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5jLWNhcmQtcHJvZHVjdF9fc2xpZGVyJykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgIGxvb3A6dHJ1ZSxcclxuICAgICAgICAvLyBuYXY6dHJ1ZSxcclxuICAgICAgICBtYXJnaW46MjAsXHJcbiAgICAgICAgLy8gaXRlbXM6IDQsXHJcbiAgICAgICAgLy8gY2VudGVyOiB0cnVlLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNjAwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTIwMDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczozXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDE2MDA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6M1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyrRgdC70LDQudC00LXRgCDQutCw0YDRg9GB0LXQu9GMKi9cclxuICAgICQoJy5wdWJsaWNhdGlvbnMtc2xpZGVyJykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgIGxvb3A6dHJ1ZSxcclxuICAgICAgICBuYXY6dHJ1ZSxcclxuICAgICAgICBtYXJnaW46MjAsXHJcbiAgICAgICAgaXRlbXM6IDcsXHJcbiAgICAgICAgLy8gY2VudGVyOiB0cnVlLFxyXG4gICAgICAgIHN0YWdlUGFkZGluZzogMTAsXHJcbiAgICAgICAgcmVzcG9uc2l2ZUNsYXNzOiB0cnVlLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNDgwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNzgwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgOTgwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTIwMDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczo0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDE2MDA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6N1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxOTIwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkKCcjZmlsdGVyLWNhZmUtYWxsLCAjZmlsdGVyLWNhZmVfX21vYmlsZS1hbGwnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAkZWxlbSA9ICQoJy5maWx0ZXItaXRlbScpO1xyXG4gICAgICAgIGlmKCR0aGlzLmlzKCc6Y2hlY2tlZCcpKSB7XHJcbiAgICAgICAgICAgICRlbGVtLmFkZENsYXNzKCdkaXNhYmxlJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICRlbGVtLnJlbW92ZUNsYXNzKCdkaXNhYmxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLnRvcC1tZXNzYWdlX19jbG9zZScpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy50b3AtbWVzc2FnZScpLmhpZGUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0LLQv9C40YHRi9Cy0LDQtdC8IGltZyDQsiDQsdC70L7QuiDQv9GA0Lgg0LvRjtCx0L7QvCDRgNCw0LfQvNC10YDQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPKi9cclxuICAgIGZ1bmN0aW9uIGZpeF9zaXplKCkge1xyXG4gICAgICAgIHZhciBpbWFnZXMgPSAkKCcuYy1waWNfbGluayBpbWcnKTtcclxuICAgICAgICBpbWFnZXMuZWFjaChzZXRzaXplKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0c2l6ZSgpIHtcclxuICAgICAgICAgICAgdmFyIGltZyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBpbWdfZG9tID0gaW1nLmdldCgwKSxcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGltZy5wYXJlbnRzKCcuYy1waWNfbGluaycpO1xyXG4gICAgICAgICAgICBpZiAoaW1nX2RvbS5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzaXplKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpbWcub25lKCdsb2FkJywgcmVzaXplKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2l6ZSgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgoY29udGFpbmVyLndpZHRoKCkgLyBjb250YWluZXIuaGVpZ2h0KCkpIDwgKGltZ19kb20ud2lkdGggLyBpbWdfZG9tLmhlaWdodCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbWcud2lkdGgoJ2F1dG8nKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWcuaGVpZ2h0KCcxMDAlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW1nLmhlaWdodCgnYXV0bycpO1xyXG4gICAgICAgICAgICAgICAgaW1nLndpZHRoKCcxMDAlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLy8gJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmaXhfc2l6ZSk7XHJcbiAgICAvLyBmaXhfc2l6ZSgpO1xyXG4gICAgLy9cclxuICAgIC8vIGlmICh0eXBlb2YgX2N1cnJlbnQgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIC8vICAgICB2YXIgbWFwSW1hZ2VzID0gX2N1cnJlbnQ7XHJcbiAgICAvLyB9IGVsc2Uge1xyXG4gICAgLy8gICAgIHZhciBtYXBJbWFnZXMgPSAkKCcuYy1jYXJkLWNhZmVfX2ltZyBpbWcnKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKtC10YHQu9C4INCyINCz0L7RgNC+0LTQtSDQvtC00L3QviDQutCw0YTQtSwg0LTQtdC70LDQtdC8INC10LPQviBpbmxpbmUqL1xyXG4gICAgJCgnLmNhZmUtbGlzdF9fY2l0eScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjb3VudEVsZW0gPSAkdGhpcy5maW5kKCcuYy1jb2wtNicpLmxlbmd0aDtcclxuICAgICAgICBpZihjb3VudEVsZW0gPT0gMSl7XHJcbiAgICAgICAgICAgICQoJHRoaXMpLmFkZENsYXNzKCdjYWZlLWxpc3RfX29uZScpO1xyXG5cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgJCgkdGhpcykucmVtb3ZlQ2xhc3MoJ2NhZmUtbGlzdF9fb25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvL9C/0L7QtNC60LvRjtGH0LXQvdC40LUg0YLRg9C70YLQuNC/0LBcclxuICAgICQoICcudG9vbHRpcCcgKS50b29sdGlwc3Rlcih7XHJcbiAgICAgICAgYW5pbWF0aW9uOiAnZ3JvdycsXHJcbiAgICAgICAgZGVsYXk6IDEwMCxcclxuICAgICAgICB0cmlnZ2VyIDogJ2N1c3RvbScgLFxyXG4gICAgICAgIG1heFdpZHRoOiA1MDAsXHJcbiAgICAgICAgY29udGVudEFzSFRNTDogdHJ1ZSxcclxuICAgICAgICBpbnRlcmFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICB0cmlnZ2VyT3BlbiA6IHtcclxuICAgICAgICAgICAgbW91c2VlbnRlciA6IHRydWUgLFxyXG4gICAgICAgICAgICB0b3VjaHN0YXJ0IDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJpZ2dlckNsb3NlIDoge1xyXG4gICAgICAgICAgICBtb3VzZWxlYXZlIDogdHJ1ZSxcclxuICAgICAgICAgICAgY2xpY2sgOiB0cnVlICxcclxuICAgICAgICAgICAgc2Nyb2xsIDogdHJ1ZSAsXHJcbiAgICAgICAgICAgIHRhcCA6IHRydWVcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy/Qv9C+0LTQutC70Y7Rh9C10L3QuNC1INGC0YPQu9GC0LjQv9CwXHJcbiAgICAkKCAnLnRvb2x0aXAtY2F0YWxvZycgKS50b29sdGlwc3Rlcih7XHJcbiAgICAgICAgYW5pbWF0aW9uOiAnZ3JvdycsXHJcbiAgICAgICAgZGVsYXk6IDEwMCxcclxuICAgICAgICB0cmlnZ2VyIDogJ2NsaWNrJyAsXHJcbiAgICAgICAgbWF4V2lkdGg6IDUwMCxcclxuICAgICAgICBmdW5jdGlvbkJlZm9yZTogZnVuY3Rpb24oaW5zdGFuY2UsIGhlbHBlcil7XHJcbiAgICAgICAgICAgIGlmIChoZWxwZXIuZXZlbnQudHlwZSA9PSAnY2xpY2snKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5jb250ZW50KCdZb3Ugb3BlbmVkIG1lIHdpdGggYSByZWd1bGFyIG1vdXNlIDxhIGhyZWY9XCJodHRwczovL3d3dy5nb29nbGUucnUvP2hsPXJ1XCI+Y2xpY2sgOik8L2E+LicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuY29udGVudCgnWW91IG9wZW5lZCBtZSBieSBhIHRhcCBvbiB0aGUgc2NyZWVuIDopJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRlbnRBc0hUTUw6IHRydWUsXHJcbiAgICAgICAgaW50ZXJhY3RpdmU6IHRydWUsXHJcbiAgICAgICAgdHJpZ2dlck9wZW4gOiB7XHJcbiAgICAgICAgICAgIG1vdXNlZW50ZXIgOiB0cnVlICxcclxuICAgICAgICAgICAgdG91Y2hzdGFydCA6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyaWdnZXJDbG9zZSA6IHtcclxuICAgICAgICAgICAgbW91c2VsZWF2ZSA6IHRydWUsXHJcbiAgICAgICAgICAgIGNsaWNrIDogdHJ1ZSAsXHJcbiAgICAgICAgICAgIHNjcm9sbCA6IHRydWUgLFxyXG4gICAgICAgICAgICB0YXAgOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAkKFwiLm93bC1jYXJvdXNlbFwiKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgaXRlbXM6IDEsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBjZW50ZXI6IHRydWUsXHJcbiAgICAgICAgYXV0b0hlaWdodDp0cnVlLFxyXG4gICAgICAgIG5hdjogdHJ1ZVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgICQoJy5jYWZlLWZvdG9yYW1hJykub24oJ2ZvdG9yYW1hOnJlYWR5JywgZnVuY3Rpb24gKGUsIGZvdG9yYW1hKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZS50eXBlKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyggZm90b3JhbWEuYWN0aXZlSW5kZXgpO1xyXG4gICAgICAgIHZhciBwYXRoID0gZm90b3JhbWEuYWN0aXZlRnJhbWUuaW1nO1xyXG4gICAgICAgICQoJy5iZy1ibHVyJykuYXR0cignc3JjJywgcGF0aCk7XHJcbiAgICB9KS5mb3RvcmFtYSh7XHJcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAvLyBtYXh3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgIHJhdGlvOiAxNy8xMSxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIHRodW1id2lkdGg6IDg4LFxyXG4gICAgICAgIGFsbG93ZnVsbHNjcmVlbjogdHJ1ZSxcclxuICAgICAgICBuYXY6ICd0aHVtYnMnLFxyXG4gICAgICAgIGZpdDonY292ZXInXHJcbiAgICB9KTs7XHJcblxyXG4gICAgLyrQpNC+0YLQvtGA0LDQvNCwLCDRgdC70LDQudC00LXRgCDQvNC10YDQvtC/0YDQuNGP0YLQuNC5LCDRgdC70LDQudC00LXRgCDQvtGC0LfRi9Cy0L7QsiovXHJcbiAgICAvLyB2YXIgJHNsaWRlciA9ICQoJy5jYWZlLWZvdG9yYW1hJykuZm90b3JhbWEoe1xyXG4gICAgLy8gICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAvLyAgICAgLy8gbWF4d2lkdGg6ICcxMDAlJyxcclxuICAgIC8vICAgICByYXRpbzogMTcvMTEsXHJcbiAgICAvLyAgICAgbG9vcDogdHJ1ZSxcclxuICAgIC8vICAgICB0aHVtYndpZHRoOiA4OCxcclxuICAgIC8vICAgICBhbGxvd2Z1bGxzY3JlZW46IHRydWUsXHJcbiAgICAvLyAgICAgbmF2OiAndGh1bWJzJyxcclxuICAgIC8vICAgICBmaXQ6J2NvdmVyJ1xyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLy8gJHNsaWRlclxyXG4gICAgLy8gICAgIC5vbignZm90b3JhbWE6c2hvdycsIGZ1bmN0aW9uIChlLCBmb3RvcmFtYSkge1xyXG4gICAgLy8gICAgICAgICAvLyBwaWNrIHRoZSBhY3RpdmUgdGh1bWIgYnkgaWRcclxuICAgIC8vICAgICAgICAgdmFyIHBhdGggPSBmb3RvcmFtYS5hY3RpdmVGcmFtZS5pbWc7XHJcbiAgICAvLyAgICAgICAgICQoJy5iZy1ibHVyJykuYXR0cignc3JjJywgcGF0aCk7XHJcbiAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKCdoZWxsbycpO1xyXG4gICAgLy8gICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAgIC8vICRzbGlkZXIub24oJ2ZvdG9yYW1hOmxvYWQnLCBmdW5jdGlvbiAoZSwgZm90b3JhbWEsIGV4dHJhKSB7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coZXh0cmEuc3JjICsgJyBpcyBsb2FkZWQnKTtcclxuICAgIC8vICAgICBjb25zb2xlLmxvZygnaGVsbG8nKTtcclxuICAgIC8vIH0pO1xyXG5cclxuXHJcbiAgICAkKCcuY2FmZS1ob2xpZGF5LXNsaWRlcicpLmZvdG9yYW1hKHtcclxuICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgIG1heHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgLy8gcmF0aW86IDE2LzksXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBhbGxvd2Z1bGxzY3JlZW46IHRydWUsXHJcbiAgICAgICAgZml0Oidjb3ZlcidcclxuICAgIH0pO1xyXG5cclxuICAgIC8vICQoJy5jYWZlLXJldmlld3Mtc2xpZGVyJykuZm90b3JhbWEoe1xyXG4gICAgLy8gICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAvLyAgICAgaGVpZ2h0OiAnYXV0bycsXHJcbiAgICAvLyAgICAgbWF4d2lkdGg6ICcxMDAlJyxcclxuICAgIC8vICAgICBsb29wOiB0cnVlLFxyXG4gICAgLy8gICAgIHJhdGlvOiAxNi81XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvKtC80LDRgdC60Lgg0LTQu9GPINGC0LXQu9C10YTQvtC90LAqL1xyXG4gICAgJCgnI3JlcXVlc3QtY2FsbF9fdGVsLCAjcmVnX19waG9uZScpLm1hc2soJys3KDAwMCkwMDAtMDAtMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcbiAgICAkKCcjcmVxdWVzdC1jYWxsX190ZWwsICNyZWdfX3Bob25lJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICQoJy5qcy1pbnB1dC0tdGVsJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICQoJy5qcy1pbnB1dC0tZGF0ZScpLm1hc2soJzAwLjAwLjAwMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcbiAgICAkKCcuanMtaW5wdXQtLWxveWFsdHknKS5tYXNrKCcwMDAtMDAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZSB9KTtcclxuXHJcbiAgICAkKCcuanMtaW5wdXQtLW1vZGUnKS5tYXNrKCcwMDowMCDigJQgMDA6MDAnLCB7XHJcbiAgICAgICAgY2xlYXJJZk5vdE1hdGNoOiB0cnVlLFxyXG4gICAgICAgIHBsYWNlaG9sZGVyOiBcIl9fOl9fIOKAlCBfXzpfX1wiXHJcbiAgICB9KTtcclxuICAgICQoJ2lucHV0W25hbWU9XCJmb3JtX3RleHRfMzBcIl0nKS5tYXNrKCcrNygwMDApMDAwLTAwLTAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG4gICAgJCgnaW5wdXRbbmFtZT1cImZvcm1fdGV4dF81MlwiXScpLm1hc2soJys3KDAwMCkwMDAtMDAtMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcblxyXG4gICAgLyrQv9C+0LrQsNC3INC90L7QvNC10YDQsCDRgtC10LvQtdGE0L7QvdCwINCyINC60LDRgNGC0L7Rh9C60LUg0LrQsNGE0LUqL1xyXG4gICAgJCgnLmNhZmUtaW5mb19faXRlbS1jb2wgLmMtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmwtYnV0dG9uJykuc2libGluZ3MoJy5jYWZlLWluZm9fX3Bob25lLW51bWJlcicpLnNob3coKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0YTRg9C90LrRhtC40Y8g0L/QvtC60LDQt9CwINC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwKi9cclxuICAgIGZ1bmN0aW9uIHNob3dQb3B1cChpY29uLCBwb3B1cCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGljb24sIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciAkaHRtbCA9ICQoJ2h0bWwnKTtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKHBvcHVwKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAkKCcubWZwLWJnJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuXHJcblxyXG4gICAgICAgICAgICAkaHRtbC5hZGRDbGFzcygnbG9jay1odG1sJyk7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZml4ZWQtaW5wdXQnKTtcclxuICAgICAgICAgICAgaWYod2luZG93V2lkdGggPiBkb2N1bWVudFdpZHRoKXtcclxuICAgICAgICAgICAgICAgICRodG1sLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzE3cHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoJy5tZnAtd3JhcCcpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOidzY3JvbGwnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfQldGB0YLRjCDQv9C+0LvQvtGB0LAg0L/RgNC+0LrRgNGD0YLQutC4Jyk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfQndC10YIg0L/QvtC70L7RgdGLINC/0YDQvtC60YDRg9GC0LrQuCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wb3B1cC1jbG9zZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkaHRtbCA9ICQoJ2h0bWwnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tZnAtd3JhcCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLm1mcC1iZycpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJGh0bWwuY3NzKHtcclxuICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzAnXHJcbiAgICAgICAgfSkucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZml4ZWQtaW5wdXQnKTtcclxuICAgICAgICAkKCcuaGVhZGVyLnN0aWNreScpLmNzcyh7XHJcbiAgICAgICAgICAgIC8vICdyaWdodCc6JzAnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3BvcHVwLWNsb3NlISEhIScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qcy1wb3B1cC1jbG9zZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkaHRtbCA9ICQoJ2h0bWwnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5tZnAtd3JhcCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLm1mcC1iZycpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJGh0bWwuY3NzKHtcclxuICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzAnXHJcbiAgICAgICAgfSkucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgICAgICQoJy53cmFwcGVyJykucmVtb3ZlQ2xhc3MoJ2ZpeGVkLWlucHV0Jyk7XHJcbiAgICAgICAgJCgnLmhlYWRlci5zdGlja3knKS5jc3Moe1xyXG4gICAgICAgICAgICAvLyAncmlnaHQnOicwJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIHNob3dQb3B1cChcIi5oZWFkZXItcGhvbmVcIiwgJy5wb3B1cF9fcmVxdWVzdC1jYWxsJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuaGVhZGVyLWVtYWlsXCIsICcucG9wdXBfX3dyaXRlLXRvLXVzJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuanMtaGVhZGVyLWNhYmluZXRcIiwgJy5wb3B1cC1hdXRob3JpemF0aW9uJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuaGVhZGVyLWNpdHkgPiBhXCIsICcucG9wdXAtY2l0eScpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmhlYWRlci1tb2JpbGVfX2NpdHlcIiwgJy5wb3B1cC1jaXR5Jyk7XHJcbiAgICBzaG93UG9wdXAoXCIuYy1jYXJkLWNhZmVfX21lbnVcIiwgJy5wb3B1cF9fbWVudScpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmMtY2FyZC12YWNhbmN5IC5jLWJ1dHRvblwiLCAnLnBvcHVwX192YWNhbmN5Jyk7XHJcbiAgICBzaG93UG9wdXAoXCIuYy1jYXJkX21lbnVcIiwgJy5wb3B1cF9fbWVudScpO1xyXG4gICAgLy8gc2hvd1BvcHVwKFwiLmMtcmV2aWV3cy1wb3NpdGl2ZVwiLCAnLnBvcHVwX19yZXZpZXcnKTtcclxuICAgIC8vIHNob3dQb3B1cChcIi5jLXJldmlld3MtbmVnYXRpdmVcIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICBzaG93UG9wdXAoXCIuZm9vdGVyLXJldmlld3NfX2ljb25cIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICAvLyBzaG93UG9wdXAoXCIucG9wdXAtZm9yZ290LXBhc3N3b3JkXCIsICcucG9wdXBfX3JlY292ZXJ5LXBhc3N3b3JkJyk7XHJcbiAgICAvLyBzaG93UG9wdXAoXCIuY2F0YWxvZy1wcm9kdWN0IC5jLWNhcmQtY2F0YWxvZ19faW1nXCIsICcucG9wdXAtcHJvZHVjdCcpO1xyXG4gICAgLy8gc2hvd1BvcHVwKFwiLmNhdGFsb2ctcHJvZHVjdCAuYy1jYXJkLWNhdGFsb2dfX3RpdGxlXCIsICcucG9wdXAtcHJvZHVjdCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmpzLXNob3ctcHJvZHVjdC1vcmRlclwiLCAnLnBvcHVwLXByb2R1Y3QnKTtcclxuICAgIHNob3dQb3B1cChcIiNsb2FkQ2FrZVwiLCAnLnBvcHVwLWNha2Utb3JkZXInKTtcclxuICAgIHNob3dQb3B1cChcIi5jYWtlLWNhcmRfX2hvdmVyXCIsICcucG9wdXAtY2FrZS1vcmRlcicpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmpzLWVhc3Rlci1idG5cIiwgJy5wb3B1cC1jYWtlLW9yZGVyJyk7XHJcbiAgICBzaG93UG9wdXAoXCIjbGstcHJvZmlsZS1zdWJzY3JpcHRpb24tZGVsX19va1wiLCAnLnBvcHVwLXN1YnNjcmlwdGlvbi1kZWwnKTtcclxuICAgIHNob3dQb3B1cChcIi5qcy1wYXJ0eS1vcmRlclwiLCAnLnBvcHVwLXBhcnR5LW9yZGVyJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuYy1jYXJkLWV2ZW50X19saW5rLS1tb3JlXCIsICcucG9wdXAtZXZlbnQnKTtcclxuICAgIHNob3dQb3B1cChcIi5jLWNhcmQtZXZlbnRfX2xpbmstLWJhc2tldFwiLCAnLnBvcHVwLWV2ZW50LWJhc2tldCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmMtY2FyZC1ldmVudF9fbGluay0tb25lLWNsaWNrXCIsICcucG9wdXAtZXZlbnQtb25lLWNsaWNrJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuZXhjdXJzaW9uLWJ0blwiLCAnLnBvcHVwLWV4Y3Vyc2lvbi1vcmRlcicpO1xyXG5cclxuICAgIHNob3dQb3B1cChcIi5qcy1zaG93LWNha2Utb3JkZXJcIiwgJy5wb3B1cC1jYWtlLW9yZGVyJyk7XHJcblxyXG5cclxuXHJcbiAgICAvLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2Nha2Utb3JkZXItaXNzdWUnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vICAgICAkKHRoaXMpLnBhcmVudHMoJy5wb3B1cC1jYWtlLW9yZGVyJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vICAgICAkKCcucG9wdXAtY2FrZS1vcmRlci1jb25ncmF0dWxhdGlvbicpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmMtY2FyZC1ldmVudF9fYnRuLS1jbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLnBvcHVwLWV2ZW50JykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcucG9wdXAtZXZlbnQtb25lLWNsaWNrJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmZhY3RvcnktcG9pbnQgLmMtYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuZmFjdG9yeS1wb2ludCAucG9wdXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5wb3B1cC1nYWxsZXJ5JykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcubWZwLWJnJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCdodG1sJykuY3NzKHtcclxuICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzAnXHJcbiAgICAgICAgfSkuYWRkQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG5cclxuICAgICAgICBpZih3aW5kb3dXaWR0aCA+IGRvY3VtZW50V2lkdGgpe1xyXG4gICAgICAgICAgICAkKCdodG1sJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdtYXJnaW4tcmlnaHQnOicxN3B4J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnLm1mcC13cmFwJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdvdmVyZmxvdy15Jzonc2Nyb2xsJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ9CV0YHRgtGMINC/0L7Qu9C+0YHQsCDQv9GA0L7QutGA0YPRgtC60LgnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jLWNhcmQtZXZlbnRfX2J0bi0tYmFza2V0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucG9wdXAtZXZlbnQnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5wb3B1cC1ldmVudC1iYXNrZXQnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wb3B1cC1mb3Jnb3QtcGFzc3dvcmQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vICAgICAkKHRoaXMpLnBhcmVudHMoJy5wb3B1cC1hdXRob3JpemF0aW9uJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vICAgICAkKCcucG9wdXBfX3JlY292ZXJ5LXBhc3N3b3JkJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vIH0pO1xyXG5cclxuXHJcbiAgICAkKCcucG9wdXAtYXV0aG9yaXphdGlvbiAucG9wdXAtYXV0aG9yaXphdGlvbl9fcmVnJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucG9wdXAtYXV0aG9yaXphdGlvbicpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLnBvcHVwLXJlZycpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucG9wdXAtcmVnIC5wb3B1cC1hdXRob3JpemF0aW9uX19hdXRoJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucG9wdXAtcmVnJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcucG9wdXAtYXV0aG9yaXphdGlvbicpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC80L7QsdC40LvRjNC90YvQtSDQutC90L7Qv9C60Lgg0L/QvtC60LDQt9CwINC/0L7Qv9Cw0L/QvtCyINCg0LXQs9C40YHRgtGA0LDRhtC40Y8v0JDQstGC0L7RgNC40LfQsNGG0LjRjyovXHJcbiAgICAkKFwiI21vYmlsZS1yZWdcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnBvcHVwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcucG9wdXAtcmVnJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcubWZwLWJnJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2ZpeGVkLWlucHV0Jyk7XHJcbiAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdsb2NrLWh0bWwnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItbW9iaWxlX19hdXRoJykucmVtb3ZlQ2xhc3MoJy5wb3B1cC1zbGlkZV9fc2hvdycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIiNtb2JpbGUtYXV0aFwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcucG9wdXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5wb3B1cC1hdXRob3JpemF0aW9uJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcubWZwLWJnJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2ZpeGVkLWlucHV0Jyk7XHJcbiAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdsb2NrLWh0bWwnKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItbW9iaWxlX19hdXRoJykucmVtb3ZlQ2xhc3MoJy5wb3B1cC1zbGlkZV9fc2hvdycpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyrQv9C+0LjRgdC6INCyINGI0LDQv9C60LUqL1xyXG4gICAgJChcIi5oZWFkZXItc2VhcmNoIC5pY29uLXNlYXJjaCwgLmhlYWRlci1zZWFyY2ggLnN5bWJvbC1zZWFyY2hcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1zZWFyY2hfX2Zvcm0nKS50b2dnbGVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5oZWFkZXItc2VhcmNoLXJlc3VsdCcpLnRvZ2dsZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC/0L7QutCw0Lcg0LzQvtCx0LjQu9GM0L3QvtCz0L4g0L/QvtC40YHQutCwKi9cclxuICAgICQoXCIuaGVhZGVyLW1vYmlsZV9fc2VhcmNoIC5pY29uLXNlYXJjaCwgLmhlYWRlci1tb2JpbGVfX3NlYXJjaCAuc3ltYm9sLXNlYXJjaFwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoLWJveCcpLnNob3coKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fbWVudScpLmhpZGUoKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoIC5pY29uLXNlYXJjaCwgLmhlYWRlci1tb2JpbGVfX3NlYXJjaCAuc3ltYm9sLXNlYXJjaCcpLmhpZGUoKTtcclxuICAgICAgICAkKCcuaWNvbi1zZWFyY2gtbW9iaWxlJykuc2hvdygpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2gtaW5wdXQnKS5mb2N1cygpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19hdXRoJykucmVtb3ZlQ2xhc3MoJ3BvcHVwLXNsaWRlX19zaG93Jyk7XHJcbiAgICAgICAgLy8gJCgnLmhlYWRlcicpLmFkZENsYXNzKCdoZWFkZXItdG9wX19oaWRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtGB0LrRgNGL0LLQsNC10Lwg0LzQvtCx0LjQu9GM0L3Ri9C5INC/0L7QuNGB0LoqL1xyXG4gICAgJChcIi5pY29uLXNlYXJjaC1tb2JpbGVcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaC1ib3gnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX21lbnUnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaCAuaWNvbi1zZWFyY2gnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaCAuc3ltYm9sLXNlYXJjaCcpLnNob3coKTtcclxuICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgICAgICAvLyAkKCcuaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2hlYWRlci10b3BfX2hpZGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHsgLy8g0YHQvtCx0YvRgtC40LUg0LrQu9C40LrQsCDQv9C+INCy0LXQsS3QtNC+0LrRg9C80LXQvdGC0YNcclxuICAgICAgICB2YXIgZGl2ID0gJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaC1ib3gnKTsgLy8g0YLRg9GCINGD0LrQsNC30YvQstCw0LXQvCBJRCDRjdC70LXQvNC10L3RgtCwXHJcbiAgICAgICAgaWYgKCFkaXYuaXMoZS50YXJnZXQpIC8vINC10YHQu9C4INC60LvQuNC6INCx0YvQuyDQvdC1INC/0L4g0L3QsNGI0LXQvNGDINCx0LvQvtC60YNcclxuICAgICAgICAgICAgJiYgZGl2LmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7IC8vINC4INC90LUg0L/QviDQtdCz0L4g0LTQvtGH0LXRgNC90LjQvCDRjdC70LXQvNC10L3RgtCw0LxcclxuXHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19tZW51Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoLWJveCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaCAuaWNvbi1zZWFyY2gnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2ggLmljb24tc2VhcmNoLW1vYmlsZScpLmhpZGUoKTtcclxuICAgICAgICAgICAgLy8gJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdoZWFkZXItdG9wX19oaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g0LfQsNC60YDRi9GC0LjQtSDQv9C+INC60LvQuNC60YMg0LLRgdC1INC+0LHQu9Cw0YHRgtC4INGN0LrRgNCw0L3QsFxyXG4gICAgJChcIi5wb3B1cC1iZ1wiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcucG9wdXAnKS5wYXJlbnRzKCkucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAvLyAkKCcuZml4ZWQtb3ZlcmxheScpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdib2R5LXBvcHVwJyk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAvKtC60LvQuNC6INCy0L3QtSDQvtCx0LvQsNGB0YLQuCDRjdC60YDQsNC90LAg0LTQu9GPINC60L7RgNC30LjQvdGLKi9cclxuICAgIGZ1bmN0aW9uIGhpZGVQb3B1cCAoZWxlbWVudCwgaW5zdHJ1bWVudEhpZGUpe1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHsgLy8g0YHQvtCx0YvRgtC40LUg0LrQu9C40LrQsCDQv9C+INCy0LXQsS3QtNC+0LrRg9C80LXQvdGC0YNcclxuICAgICAgICAgICAgdmFyIGRpdiA9ICQoZWxlbWVudCk7IC8vINGC0YPRgiDRg9C60LDQt9GL0LLQsNC10LwgSUQg0Y3Qu9C10LzQtdC90YLQsFxyXG4gICAgICAgICAgICBpZiAoIWRpdi5pcyhlLnRhcmdldCkgLy8g0LXRgdC70Lgg0LrQu9C40Log0LHRi9C7INC90LUg0L/QviDQvdCw0YjQtdC80YMg0LHQu9C+0LrRg1xyXG4gICAgICAgICAgICAgICAgJiYgZGl2LmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7IC8vINC4INC90LUg0L/QviDQtdCz0L4g0LTQvtGH0LXRgNC90LjQvCDRjdC70LXQvNC10L3RgtCw0LxcclxuICAgICAgICAgICAgICAgIGRpdi5yZW1vdmVDbGFzcyhpbnN0cnVtZW50SGlkZSk7IC8vINGB0LrRgNGL0LLQsNC10Lwg0LXQs9C+XHJcbiAgICAgICAgICAgICAgICAvLyAkKCcuZml4ZWQtb3ZlcmxheScpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2JvZHktcG9wdXAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINGB0L7QsdGL0YLQuNC1INC60LvQuNC60LAg0L/QviDQstC10LEt0LTQvtC60YPQvNC10L3RgtGDXHJcbiAgICAvLyAkKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgIHZhciBwb3B1cCA9ICQoJy5wb3B1cCcpO1xyXG4gICAgLy8gICAgIGlmICghcG9wdXAuaXMoZS50YXJnZXQpXHJcbiAgICAvLyAgICAgICAgICYmICFwb3B1cC5oYXMoZS50YXJnZXQpLmxlbmd0aFxyXG4gICAgLy8gICAgICAgICAmJiAhJCgnLnBvcHVwLW1pbmknKS5pcyhlLnRhcmdldClcclxuICAgIC8vICAgICApIHtcclxuICAgIC8vICAgICAgICAgcG9wdXAucGFyZW50cygnLm1mcC13cmFwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vICAgICAgICAgJCgnLm1mcC1iZycpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAvLyAgICAgICAgICQoJ2h0bWwnKS5jc3Moe1xyXG4gICAgLy8gICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzAnXHJcbiAgICAvLyAgICAgICAgIH0pLnJlbW92ZUNsYXNzKCdsb2NrLWh0bWwnKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvKtGB0LrRgNGL0LLQsNC10Lwg0L/QvtC/0LDQv9GLINCy0L3QtSDQt9C+0L3RiyDRjdC70LXQvNC10L3RgtCwINC00LvRjyDQutCw0YDRgtC+0YfQutC4INGC0L7QstCw0YDQsCovXHJcbiAgICAkKGRvY3VtZW50KS5tb3VzZWRvd24oZnVuY3Rpb24gKGUpIHsgLy8g0YHQvtCx0YvRgtC40LUg0LrQu9C40LrQsCDQv9C+INCy0LXQsS3QtNC+0LrRg9C80LXQvdGC0YNcclxuICAgICAgICAvLyB2YXIgZGl2ID0gJCgnLnBvcHVwJyk7XHJcbiAgICAgICAgLy8g0YLRg9GCINGD0LrQsNC30YvQstCw0LXQvCBJRCDRjdC70LXQvNC10L3RgtCwXHJcbiAgICAgICAgLy8gdmFyIGRpdjIgPSAkKCcucG9wdXAtbWluaScpO1xyXG5cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGlkZU91dFpvbmUoZWxlbSwgZWxlbTIsIGVsZW0zLCBlbGVtNCl7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSAkKGVsZW0pO1xyXG4gICAgICAgICAgICB2YXIgZGl2MiA9ICQoZWxlbTIpO1xyXG4gICAgICAgICAgICB2YXIgZGl2MyA9ICQoZWxlbTMpO1xyXG4gICAgICAgICAgICB2YXIgZGl2NCA9ICQoZWxlbTQpO1xyXG4gICAgICAgICAgICBpZiAoIWRpdi5pcyhlLnRhcmdldClcclxuICAgICAgICAgICAgICAgICYmIGRpdi5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICAgICAgJiYgIWRpdjIuaXMoZS50YXJnZXQpXHJcbiAgICAgICAgICAgICAgICAmJiBkaXYyLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwXHJcbiAgICAgICAgICAgICAgICAmJiAhZGl2My5pcyhlLnRhcmdldClcclxuICAgICAgICAgICAgICAgICYmIGRpdjMuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgICAgICYmICFkaXY0LmlzKGUudGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgJiYgZGl2NC5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZGl2LnJlbW92ZUNsYXNzKGluc3RydW1lbnRIaWRlKTsgLy8g0YHQutGA0YvQstCw0LXQvCDQtdCz0L5cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICBkaXYucGFyZW50cygnLm1mcC13cmFwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdi5wYXJlbnRzKCdodG1sJykuZmluZCgnLm1mcC1iZyAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2LnBhcmVudHMoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbG9jay1odG1sJykuY3NzKCdtYXJnaW4tcmlnaHQnLCcwJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBkaXYuZmluZCgnLnBvcHVwLWNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JhY2tVcmwnKTtcclxuICAgICAgICAgICAgICAgIGlmICh1cmwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImJhY2tVcmxcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGl2Mi5wYXJlbnRzKCcubWZwLXdyYXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2Mi5wYXJlbnRzKCdodG1sJykuZmluZCgnLm1mcC1iZyAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2Mi5wYXJlbnRzKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpLmNzcygnbWFyZ2luLXJpZ2h0JywnMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRpdjMucGFyZW50cygnLm1mcC13cmFwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdjMucGFyZW50cygnaHRtbCcpLmZpbmQoJy5tZnAtYmcgJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdjMucGFyZW50cygnaHRtbCcpLnJlbW92ZUNsYXNzKCdsb2NrLWh0bWwnKS5jc3MoJ21hcmdpbi1yaWdodCcsJzAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkaXY0LnBhcmVudHMoJy5tZnAtd3JhcCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBkaXY0LnBhcmVudHMoJ2h0bWwnKS5maW5kKCcubWZwLWJnICcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICBkaXY0LnBhcmVudHMoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbG9jay1odG1sJykuY3NzKCdtYXJnaW4tcmlnaHQnLCcwJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmFja1VybCcpICE9PSBudWxsKSB7XHJcbiAgICAgICAgLy8gICAgIHZhciBzZXJpYWxPYmogPSBKU09OLnN0cmluZ2lmeShiYWNrVXJsKTtcclxuICAgICAgICAvLyAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKG51bGwsIG51bGwsICcvZWFzdGVyLycpO1xyXG4gICAgICAgIC8vICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmFja1VybCcsIHNlcmlhbE9iaik7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJiYWNrVXJsXCIpO1xyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIGlmIChlLndoaWNoID09PSAxKSB7XHJcbiAgICAgICAgICAgIGhpZGVPdXRab25lKCcucG9wdXAnLCAnLnBvcHVwLW1pbmknLCAnLmRhdGVwaWNrZXInLCAnLm1haW4tdXNlci1jb25zZW50LXJlcXVlc3QtcG9wdXAnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGhpZGVQb3B1cCgnLnBvcHVwLWJhc2tldCcsICdwb3B1cC1zbGlkZV9fc2hvdycpO1xyXG4gICAgaGlkZVBvcHVwKCcuaGVhZGVyLW1vYmlsZV9fYXV0aCcsICdwb3B1cC1zbGlkZV9fc2hvdycpO1xyXG4gICAgaGlkZVBvcHVwKCcuaGVhZGVyLXNlYXJjaF9fZm9ybScsICdpcy12aXNpYmxlJyk7XHJcbiAgICBoaWRlUG9wdXAoJy5oZWFkZXItc2VhcmNoLXJlc3VsdCcsICdpcy12aXNpYmxlJyk7XHJcbiAgICBoaWRlUG9wdXAoJy5jLWJyZWFkY3J1bWItZHJvcGRvd25fX2xheW91dCcsICdpcy12aXNpYmxlJyk7XHJcbiAgICBoaWRlUG9wdXAoJy5jLWJyZWFkY3J1bWItd29yZF9fYWN0aXZlJywgJ29wZW4nKTtcclxuXHJcblxyXG4gICAgLyrRjtC+0LrQvtCy0YvQtSDQutC90L7Qv9C60Lgg0L7RgtC30YvQstCwKi9cclxuICAgIHZhciAkcmV2aWV3c19idG4gPSAkKFwiLmMtcmV2aWV3c19fYnRuXCIpLFxyXG4gICAgICAgIGNsaWNrQ291bnQ7XHJcbiAgICAkcmV2aWV3c19idG4uYXR0cihcImRhdGEtY291bnRcIiwgXCIwXCIpO1xyXG4gICAgdmFyIGlzTW9iaWxlID0ge1xyXG4gICAgICAgIEFuZHJvaWQ6ICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSkgPyB0cnVlIDogZmFsc2U7IH0sXHJcbiAgICAgICAgQmxhY2tCZXJyeTogICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKSA/IHRydWUgOiBmYWxzZTsgfSxcclxuICAgICAgICBpT1M6ICAgICAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmV8aVBhZHxpUG9kL2kpID8gdHJ1ZSA6IGZhbHNlOyB9LFxyXG4gICAgICAgIFdpbmRvd3M6ICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0lFTW9iaWxlL2kpID8gdHJ1ZSA6IGZhbHNlOyB9LFxyXG4gICAgICAgIGFueTogICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIChpc01vYmlsZS5BbmRyb2lkKCkgfHwgaXNNb2JpbGUuQmxhY2tCZXJyeSgpIHx8IGlzTW9iaWxlLmlPUygpIHx8IGlzTW9iaWxlLldpbmRvd3MoKSk7ICB9XHJcbiAgICB9O1xyXG4gICAgaWYgKCBpc01vYmlsZS5hbnkoKSApIHtcclxuICAgICAgICAkcmV2aWV3c19idG4ub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjbGlja0NvdW50ID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1jb3VudFwiKTtcclxuICAgICAgICAgICAgY2xpY2tDb3VudCArKztcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoJy5jLXJldmlld3NfX2l0ZW0nKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgaWYgKGNsaWNrQ291bnQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwiZGF0YS1jb3VudFwiLCBjbGlja0NvdW50KTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuYy1yZXZpZXdzX19pdGVtJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNsaWNrQ291bnQgPT0gMil7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmMtcmV2aWV3c19faXRlbScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImRhdGEtY291bnRcIiwgXCIwXCIpO1xyXG4gICAgICAgICAgICAgICAgc2hvd1BvcHVwKFwiLmMtcmV2aWV3cy1wb3NpdGl2ZVwiLCAnLnBvcHVwX19yZXZpZXcnKTtcclxuICAgICAgICAgICAgICAgIHNob3dQb3B1cChcIi5jLXJldmlld3MtbmVnYXRpdmVcIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhaXNNb2JpbGUuYW55KCkgKSB7XHJcbiAgICAgICAgJHJldmlld3NfYnRuLmhvdmVyKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNsaWNrQ291bnQgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvdW50XCIpO1xyXG4gICAgICAgICAgICBjbGlja0NvdW50ICsrO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmMtcmV2aWV3c19faXRlbScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoY2xpY2tDb3VudCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvdW50XCIsIGNsaWNrQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoJy5jLXJldmlld3NfX2l0ZW0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2xpY2tDb3VudCA9PSAyKXtcclxuICAgICAgICAgICAgICAgIHNob3dQb3B1cChcIi5jLXJldmlld3MtcG9zaXRpdmVcIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICAgICAgICAgICAgICBzaG93UG9wdXAoXCIuYy1yZXZpZXdzLW5lZ2F0aXZlXCIsICcucG9wdXBfX3JldmlldycpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoJy5jLXJldmlld3NfX2l0ZW0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvdW50XCIsIFwiMFwiKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8g0LzQvtCx0LjQu9GM0L3Ri9C5INC30LDQutCw0LfQsNGC0Ywg0LfQstC+0L3QvtC6LCDQv9C+0LrQsNC30YvQstCw0LXQvCDRhNC+0YDQvNGDINC4INGD0LTQsNC70Y/QtdC8INC90LDQtNC/0LjRgdGMXHJcbiAgICAkKFwiLm1vYmlsZS1yZXF1ZXN0LWNhbGxfaW5xdWlyeVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLmNzcyh7XHJcbiAgICAgICAgICAgICdvcGFjaXR5JzogJzAnLFxyXG4gICAgICAgICAgICAndmlzaWJpbGl0eSc6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICAnZGlzcGxheSc6J25vbmUnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnLm1vYmlsZS1yZXF1ZXN0LWNhbGxfX2Zvcm0nKS5jc3Moe1xyXG4gICAgICAgICAgICAnb3BhY2l0eSc6ICcxJyxcclxuICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZScsXHJcbiAgICAgICAgICAgICdkaXNwbGF5JzonYmxvY2snXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtGB0L7Qs9C70LDRiNC10L3QuNC1INC90LAg0L7QsdGA0LDQsdC+0YLQutGDINC/0LXRgNGB0L7QvdCw0LvRjNC90YvRhSDQtNCw0L3QvdGL0YUqL1xyXG4gICAgZnVuY3Rpb24gRGlzYWJsZWRGb3JtQnV0dG9uKGZvcm0sIGNoZWNrLCBidG5fZm9ybSl7XHJcbiAgICAgICAgJChcImZvcm0gaW5wdXRbdHlwZT0nY2hlY2tib3gnXVwiKS5vbignY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYoJChjaGVjaykucHJvcCgnY2hlY2tlZCcpKXtcclxuICAgICAgICAgICAgICAgICQoYnRuX2Zvcm0pLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2snKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJChidG5fZm9ybSkuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGVjayBlbHNlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBEaXNhYmxlZEZvcm1CdXR0b24oJyNwb3B1cC1yZWcnLCcjcmVnX19yZWd1bGF0aW9ucycsJyNwb3B1cC1yZWcgYnV0dG9uJyk7XHJcbiAgICBEaXNhYmxlZEZvcm1CdXR0b24oJyNwb3B1cF9fd3JpdGUtdG8tdXMnLCcjd3JpdGUtdG8tdXNfX3JlZ3VsYXRpb25zJywnI3BvcHVwX193cml0ZS10by11cyBidXR0b24nKTtcclxuICAgIERpc2FibGVkRm9ybUJ1dHRvbignI3BvcHVwX19yZXF1ZXN0LWNhbGwnLCcjcmVxdWVzdC1jYWxsX19yZWd1bGF0aW9ucycsJyNwb3B1cF9fcmVxdWVzdC1jYWxsIGJ1dHRvbicpO1xyXG4gICAgRGlzYWJsZWRGb3JtQnV0dG9uKCcjcG9wdXBfX3ZhY2FuY3knLCcjdmFjYW5jeV9fcmVndWxhdGlvbnMnLCcjcG9wdXBfX3ZhY2FuY3kgYnV0dG9uJyk7XHJcbiAgICBEaXNhYmxlZEZvcm1CdXR0b24oJyNvcmRlci1hdXRoLW5ldycsJyNvcmRlci1hdXRoLW5ld19fcmVndWxhdGlvbnMnLCcjb3JkZXItYXV0aC1uZXcgYnV0dG9uJyk7XHJcbiAgICBEaXNhYmxlZEZvcm1CdXR0b24oJyNjYWtlLW9yZGVyLWZvcm0nLCcjY2FrZS1vcmRlcl9fcmVndWxhdGlvbnMnLCcjY2FrZS1vcmRlci1mb3JtIGJ1dHRvbicpO1xyXG4gICAgRGlzYWJsZWRGb3JtQnV0dG9uKCcjZXhjdXJzaW9uLWZvcm0nLCcjZXhjdXJzaW9uX19yZWd1bGF0aW9ucycsJyNleGN1cnNpb24tZm9ybSBidXR0b24nKTtcclxuXHJcblxyXG5cclxuICAgIC8q0L/QvtC60LDQt9GL0LLQsNC10Lwg0LIg0L/QvtC/0LDQv9C1INC30LDQutCw0LfQsNGC0Ywg0LfQstC+0L3QvtC6INGB0L/QuNGB0L7QuiDQs9C+0YDQvtC00L7QsiovXHJcbiAgICAkKFwiLm1vYmlsZS1yZXF1ZXN0LWNhbGxfY2l0eVwiKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnY2xpY2sgY2xpY2snKTtcclxuICAgICAgICAvLyAkKCcucG9wdXAtcmVxdWVzdC1jaXR5Jykuc2hvdygpO1xyXG4gICAgICAgICQoJy5wb3B1cC1yZXF1ZXN0LWNpdHknKS5hZGRDbGFzcygncG9wdXAtc2hvdycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChcIi5wb3B1cC1yZXF1ZXN0LWNpdHlcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnBvcHVwLXJlcXVlc3QtY2l0eScpLnJlbW92ZUNsYXNzKCdwb3B1cC1zaG93Jyk7XHJcbiAgICAgICAgLy8gJCgnLnBvcHVwLXJlcXVlc3QtY2l0eScpLmhpZGUoKTtcclxuICAgICAgICAkKCcucG9wdXBfX3JlcXVlc3QtY2FsbCcpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLm1mcC1iZycpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnaHRtbCcpLmNzcyh7XHJcbiAgICAgICAgICAgICdvdmVyZmxvdyc6J2hpZGRlbicsXHJcbiAgICAgICAgICAgICdtYXJnaW4tcmlnaHQnOicxN3B4J1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQv9C+0L/QsNC/INC60L7RgNC30LjQvdGLKi9cclxuICAgICQoJy5pY29uLWJhc2tldCwgLmhlYWRlciAuc3ltYm9sLWJhc2tldCwgLmhlYWRlciAuc3ltYm9sLWJhc2tldC0yLCAuaGVhZGVyLWJhc2tldF9fY291bnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnBvcHVwLWJhc2tldCcpLmFkZENsYXNzKCdwb3B1cC1zbGlkZV9fc2hvdycpO1xyXG4gICAgICAgICQoJy5oZWFkZXInKS5hZGRDbGFzcygnaGVhZGVyLXRvcF9fbm8taGlkZScpO1xyXG4gICAgICAgIC8vICQoJ2h0bWwnKS5hZGRDbGFzcygnbG9jay1odG1sJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucG9wdXAtYmFza2V0X19jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucG9wdXAtYmFza2V0JykucmVtb3ZlQ2xhc3MoJ3BvcHVwLXNsaWRlX19zaG93Jyk7XHJcbiAgICAgICAgJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdoZWFkZXItdG9wX19uby1oaWRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucG9wdXAtYmFza2V0X19zY3JvbGwnKS5vbiggJ21vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICB2YXIgZTAgPSBlLm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgdmFyIGRlbHRhID0gZTAud2hlZWxEZWx0YSB8fCAtZTAuZGV0YWlsO1xyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbFRvcCArPSAoIGRlbHRhIDwgMCA/IDEgOiAtMSApICogMzA7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8q0L/RgNC+0LLQtdGA0Y/QtdGCINCyINGE0LjQu9GM0YLRgNC1INC90LDQu9C40YfQuNC1INGB0LXQu9C10LrRgtCwINC4INC10YHQu9C40YIg0LXRgdGC0Ywg0LTQtdC70LDQtdGCINGA0L7QtNC40YLQtdC70Ywg0LHQu9C+0YfQvdGL0Lwg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0LIg0LzQvtCx0LjQu9GM0L3QvtC5INCy0LXRgNGB0LjQuCovXHJcbiAgICAkKCcuZmlsdGVyJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciAkZmlsdGVyQm9keSA9ICAkKCcuZmlsdGVyLWl0ZW1fX2JvZHknKTtcclxuICAgICAgICAkZmlsdGVyQm9keS5oYXMoJ3NlbGVjdCcpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgICAgICRmaWx0ZXJCb2R5LmhhcygnaW5wdXRbdHlwZT1cInRleHRcIl0nKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgICAkZmlsdGVyQm9keS5oYXMoJ3NlbGVjdCcpLnBhcmVudHMoJy5maWx0ZXItaXRlbScpLmNzcygnYm9yZGVyJywnbm9uZScpO1xyXG4gICAgICAgICRmaWx0ZXJCb2R5LmhhcygnaW5wdXRbdHlwZT1cInRleHRcIl0nKS5wYXJlbnRzKCcuZmlsdGVyLWl0ZW0nKS5jc3MoJ2JvcmRlcicsJ25vbmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0L/QvtGP0LLQu9C10L3QuNC1INGE0LjQu9GM0YLRgNCwINCyINC80L7QsdC40LvRjNC90L7QuSDQstC10YDRgdC40LgqL1xyXG5cclxuICAgIGZ1bmN0aW9uIFNob3dNb2JpbGVCdG5GaWx0ZXIgKGJ0biwgc2hvd0Jsb2NrKSB7XHJcbiAgICAgICAgJChidG4pLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnZHJvcGRvd24tc2hvdycpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKHNob3dCbG9jaykuc2xpZGVUb2dnbGUoMjAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFNob3dNb2JpbGVCdG5GaWx0ZXIoJy5maWx0ZXItbW9iaWxlLWJ0bicsICcuZmlsdGVyJyk7XHJcbiAgICBTaG93TW9iaWxlQnRuRmlsdGVyKCcuZmlsdGVyLW1vYmlsZS1idG4nLCAnLnJldmlld3MtZm9ybScpO1xyXG4gICAgU2hvd01vYmlsZUJ0bkZpbHRlcignLmZpbHRlci1ob2xkLW1vYmlsZS1idG4nLCAnLmZpbHRlci1ob2xkJyk7XHJcblxyXG5cclxuXHJcbiAgICAvKtC/0L7QutCw0Lcg0L/QvtC00LzQtdC90Y4g0LIg0LzQvtCx0LjQu9GM0L3QvtC5INCy0LXRgNGB0LjQuCDQvNC10L3RjiovXHJcbiAgICAkKCcuaGVhZGVyLW1vYmlsZV9fbGlzdCAuaWNvbi1kcm9wZG93bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2Ryb3Bkb3duLXNob3cnKTtcclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaGVhZGVyLW1vYmlsZV9fc3VibGlzdCcpLnNsaWRlVG9nZ2xlKDIwMCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcuaGVhZGVyLW1vYmlsZV9faXRlbScpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0YTRg9C90LrRhtC40Y8g0YHRh9C10YLQsCDQsdC+0LvRjNGI0LUv0LzQtdC90YzRiNC1Ki9cclxuICAgIGZ1bmN0aW9uIGNhdGFsb2dJdGVtQ291bnRlcihmaWVsZCkge1xyXG4gICAgICAgIHZhciBmaWVsZENvdW50ID0gZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIHZhclxyXG4gICAgICAgICAgICAgICAgLy8g0JzQuNC9LiDQt9C90LDRh9C10L3QuNC1XHJcbiAgICAgICAgICAgICAgICBtaW4gPSBlbC5kYXRhKCdtaW4nKSB8fCBmYWxzZSxcclxuICAgICAgICAgICAgICAgIC8vINCc0LDQutGBLiDQt9C90LDRh9C10L3QuNC1XHJcbiAgICAgICAgICAgICAgICBtYXggPSBlbC5kYXRhKCdtYXgnKSB8fCBmYWxzZSxcclxuICAgICAgICAgICAgICAgIC8vINCa0L3QvtC/0LrQsCDRg9C80LXQvdGM0YjQtdC90LjRjyDQutC+0Lst0LLQsFxyXG4gICAgICAgICAgICAgICAgZGVjID0gZWwucHJldignLmRlYycpLFxyXG4gICAgICAgICAgICAgICAgLy8g0JrQvdC+0L/QutCwINGD0LLQtdC70LjRh9C10L3QuNGPINC60L7Quy3QstCwXHJcbiAgICAgICAgICAgICAgICBpbmMgPSBlbC5uZXh0KCcuaW5jJyk7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXQoZWwpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZWwuYXR0cignZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlYy5vbignY2xpY2snLCBkZWNyZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluYy5vbignY2xpY2snLCBpbmNyZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g0KPQvNC10L3RjNGI0LjQvCDQt9C90LDRh9C10L3QuNC1XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWNyZW1lbnQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcGFyc2VJbnQoZWxbMF0udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLS07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWluIHx8IHZhbHVlID49IG1pbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbFswXS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAvLyDQo9Cy0LXQu9C40YfQuNC8INC30L3QsNGH0LXQvdC40LVcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGluY3JlbWVudCgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUludChlbFswXS52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlKys7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWF4IHx8IHZhbHVlIDw9IG1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbFswXS52YWx1ZSA9IHZhbHVlKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGluaXQoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJChmaWVsZCkuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZpZWxkQ291bnQoJCh0aGlzKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBjYXRhbG9nSXRlbUNvdW50ZXIoJy5maWVsZENvdW50Jyk7XHJcblxyXG4gICAvKtC80L7QsdC40LvRjNC90L7QtSDQvNC10L3RjiovXHJcblx0JCgnLmhlYWRlci1tb2JpbGVfX21lbnUnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG5cdFx0JCh0aGlzKS50b2dnbGVDbGFzcygnaWNvbi1tZW51X190cmFuc2Zvcm0nKTtcclxuXHRcdCQoJy5oZWFkZXItbW9iaWxlX19kcm9wZG93bicpLnRvZ2dsZUNsYXNzKCdwb3B1cC1zaG93Jyk7XHJcblx0XHQvLyAkKCcuaGVhZGVyJykudG9nZ2xlQ2xhc3MoJ2hlYWRlci10b3BfX2hpZGUnKTtcclxuICAgICAgICAkKCdodG1sJykudG9nZ2xlQ2xhc3MoJ292ZXJmbG93Jyk7XHJcbiAgICAgICAgJCgnLmMtcmV2aWV3c19faXRlbScpLnRvZ2dsZUNsYXNzKCdpcy1oaWRlJyk7XHJcblxyXG5cclxuICAgICAgICBpZigkKCcuaGVhZGVyJykuaGFzQ2xhc3MoJ3N0aWNreScpKXtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX2Ryb3Bkb3duJykuYWRkQ2xhc3MoJ21lbnUtc3RpY2t5Jyk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnbWVudS1zdGlja3knKTtcclxuICAgICAgICB9XHJcblx0fSk7XHJcbiAgICAvLyAkKCcuaGVhZGVyJykuaGFzQ2xhc3MoJy5zdGlja3knKS5jaGlsZHJlbignLmhlYWRlci1tb2JpbGVfX2Ryb3Bkb3duJykuYWRkQ2xhc3MoJ21lbnUtc3RpY2t5Jyk7XHJcblxyXG4gICAgJCgnLmhlYWRlci1tb2JpbGVfX2Ryb3Bkb3duLWNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fbWVudScpLnRvZ2dsZUNsYXNzKCdpY29uLW1lbnVfX3RyYW5zZm9ybScpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19kcm9wZG93bicpLnRvZ2dsZUNsYXNzKCdwb3B1cC1zaG93Jyk7XHJcbiAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdvdmVyZmxvdycpO1xyXG4gICAgICAgICQoJy5jLXJldmlld3NfX2l0ZW0nKS5yZW1vdmVDbGFzcygnaXMtaGlkZScpO1xyXG5cdH0pO1xyXG5cclxuXHJcblx0JCgnLmhlYWRlci1tb2JpbGVfX2NhYmluZXQnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG5cdFx0JCgnLmhlYWRlci1tb2JpbGVfX2F1dGgnKS50b2dnbGVDbGFzcygncG9wdXAtc2xpZGVfX3Nob3cnKTtcclxuXHR9KTtcclxuXHJcbiAgICAvL9C60L3QvtC/0LrQsCDQstCy0LXRgNGFXHJcbiAgICBmdW5jdGlvbiBiYWNrVG9Ub3AgKGJ0bkVsZW0sIHBhcmVudEVsZW0pe1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSAzMDAsXHJcbiAgICAgICAgICAgIG9mZnNldF9vcGFjaXR5ID0gMTIwMCxcclxuICAgICAgICAgICAgc2Nyb2xsX3RvcF9kdXJhdGlvbiA9IDcwMCxcclxuICAgICAgICAgICAgJGJhY2tfdG9fdG9wID0gJChidG5FbGVtKTtcclxuICAgICAgICAvL9C60L3QvtC/0LrQsCDQvdCw0LfQsNC0XHJcbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAoICQodGhpcykuc2Nyb2xsVG9wKCkgPiBvZmZzZXQgKSA/ICRiYWNrX3RvX3RvcC5hZGRDbGFzcygnY2QtaXMtdmlzaWJsZScpIDogJGJhY2tfdG9fdG9wLnJlbW92ZUNsYXNzKCdjZC1pcy12aXNpYmxlIGNkLWZhZGUtb3V0Jyk7XHJcbiAgICAgICAgICAgIGlmKCAkKHRoaXMpLnNjcm9sbFRvcCgpID4gb2Zmc2V0X29wYWNpdHkgKSB7XHJcbiAgICAgICAgICAgICAgICAkYmFja190b190b3AuYWRkQ2xhc3MoJ2NkLWZhZGUtb3V0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJGJhY2tfdG9fdG9wLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJChwYXJlbnRFbGVtKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IDBcclxuICAgICAgICAgICAgICAgIH0sIHNjcm9sbF90b3BfZHVyYXRpb25cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBiYWNrVG9Ub3AoJy5jZC10b3AnLCAnYm9keSxodG1sJyk7XHJcbiAgICBiYWNrVG9Ub3AoJy5wb3B1cC1wcm9kdWN0X19idG4tYmFjaycsICcucG9wdXAnKTtcclxuXHJcblxyXG4gICAgdmFyIHdyYXBwZXJIZWlnaHQgPSBwYXJzZUludCgkKCcud3JhcHBlcicpLmhlaWdodCgpKTtcclxuICAgIC8q0LvQuNC/0LrQsNGPINGI0LDQv9C60LAqL1xyXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBibyA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICB2YXIgJGhlYWRlciA9ICQoXCIuaGVhZGVyXCIpO1xyXG4gICAgICAgIHZhciAkaGVhZGVyV3JhcCA9ICQoXCIuaGVhZGVyLXdyYXBcIik7XHJcbiAgICAgICAgdmFyICRsb2dvID0gJChcIiNzeW1ib2wtbG9nb1wiKTtcclxuICAgICAgICB2YXIgJGhlYWRlckhlaWdodCA9ICRoZWFkZXJXcmFwLmhlaWdodCgpO1xyXG4gICAgICAgIGlmICggYm8gPj0gMSApIHsvKtC30L3QsNGH0LXQvdC40LUg0L/RgNC4INC60L7RgtC+0YDQvtC8INC90LUg0LTQtdGA0LPQsNC10YLRgdGPINC90LjRh9C10LPQviAxMDYqL1xyXG4gICAgICAgICAgICAkaGVhZGVyLmFkZENsYXNzKCdoZWFkZXItdG9wX19oaWRlJyk7XHJcbiAgICAgICAgICAgIC8vICRoZWFkZXIuYWRkQ2xhc3MoJ3N0aWNreScpO1xyXG4gICAgICAgICAgICAkaGVhZGVyV3JhcC5hZGRDbGFzcygnc3RpY2t5Jyk7XHJcbiAgICAgICAgICAgICRsb2dvLmFkZENsYXNzKCdmaXhlZC1sb2dvJyk7XHJcblxyXG4gICAgICAgICAgICAkKCdtYWluJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdwYWRkaW5nLXRvcCc6ICRoZWFkZXJIZWlnaHRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICRoZWFkZXIuYWRkQ2xhc3MoJ2ZpeGVkLWhlYWRlcicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRoZWFkZXIucmVtb3ZlQ2xhc3MoJ2hlYWRlci10b3BfX2hpZGUnKTtcclxuICAgICAgICAgICAgLy8gJGhlYWRlci5yZW1vdmVDbGFzcygnc3RpY2t5Jyk7XHJcbiAgICAgICAgICAgICRoZWFkZXJXcmFwLnJlbW92ZUNsYXNzKCdzdGlja3knKTtcclxuICAgICAgICAgICAgJGxvZ28ucmVtb3ZlQ2xhc3MoJ2ZpeGVkLWxvZ28nKTtcclxuICAgICAgICAgICAgLy8gJGhlYWRlci5yZW1vdmVDbGFzcygnZml4ZWQtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgICQoJ21haW4nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3BhZGRpbmctdG9wJzogJzAnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ9Cy0YvRgdC+0YLQsCB3cmFwcGVySGVpZ2h0OiAnICsgd3JhcHBlckhlaWdodClcclxuICAgICAgICBpZiggd3JhcHBlckhlaWdodCArIDEwID4gZG9jdW1lbnRIZWlnaHQpe1xyXG4gICAgICAgICAgICAkKCcud3JhcHBlcicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAncGFkZGluZy1ib3R0b20nOiAnN3JlbSdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCB3cmFwcGVySGVpZ2h0ICsgMzAwID4gZG9jdW1lbnRIZWlnaHQpe1xyXG4gICAgICAgICAgICAkKCcud3JhcHBlcicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAncGFkZGluZy1ib3R0b20nOiAnMCdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC60LDRgdGC0L7QvNC90YvQuSDRgdC10LvQtdC60YIqL1xyXG4gICAgJCgnLmMtc2VsZWN0JykuU3Vtb1NlbGVjdCgge1xyXG4gICAgICAgIGZvcmNlQ3VzdG9tUmVuZGVyaW5nOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgICAkKCcuYy1zZWxlY3QtLXNlYXJjaCcpLlN1bW9TZWxlY3QoIHtcclxuICAgICAgICBmb3JjZUN1c3RvbVJlbmRlcmluZzogZmFsc2UsXHJcbiAgICAgICAgc2VhcmNoOiB0cnVlLFxyXG4gICAgICAgIHNlYXJjaFRleHQ6ICfQmNGB0LrQsNGC0YwuLi4nXHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBzaG93TmVnYXRpdmUoY2xpY2tFbGVtKXtcclxuICAgICAgICAkKGNsaWNrRWxlbSkub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdCA9ICQoJy5wb3B1cF9fcmV2aWV3IC5jLXNlbGVjdCcpO1xyXG4gICAgICAgICAgICBzZWxlY3QudmFsKCc0OCcpO1xyXG4gICAgICAgICAgICBzZWxlY3RbMF0uc3Vtby5yZWxvYWQoKTtcclxuICAgICAgICAgICAgLy8gc2VsZWN0WzBdLnN1bW8uc2VsZWN0SXRlbSgnNDgnKTtcclxuICAgICAgICAgICAgdmFyICRpY29uID0gc2VsZWN0LnBhcmVudHMoJy5yZXZpZXdzLWZvcm1fX3R5cGUnKS5maW5kKCcucmV2aWV3cy1mb3JtX190eXBlLWljb24nKTtcclxuICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoJ2ljb24tcmFiYml0LXBvc2l0aXZlJyk7XHJcbiAgICAgICAgICAgICRpY29uLmFkZENsYXNzKCdpY29uLXJhYmJpdC1uZWdhdGl2ZScpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn0YTRg9C90LrRhtC40Y8g0YHRgNCw0LHQvtGC0LDQu9CwINC/0YDQuCDQutC70LjQutC1IGpzLW5lZ2F0aXZlJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdC52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzaG93TmVnYXRpdmUoJy5qcy1uZWdhdGl2ZScpO1xyXG4gICAgc2hvd05lZ2F0aXZlKCcuYy1yZXZpZXdzLW5lZ2F0aXZlJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd1Bvc2l0aXZlKGNsaWNrRWxlbSl7XHJcbiAgICAgICAgJChjbGlja0VsZW0pLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3QgPSAkKCcucG9wdXBfX3JldmlldyAuYy1zZWxlY3QnKTtcclxuICAgICAgICAgICAgc2VsZWN0LnZhbCgnNDcnKTtcclxuICAgICAgICAgICAgc2VsZWN0WzBdLnN1bW8ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIHZhciAkaWNvbiA9IHNlbGVjdC5wYXJlbnRzKCcucmV2aWV3cy1mb3JtX190eXBlJykuZmluZCgnLnJldmlld3MtZm9ybV9fdHlwZS1pY29uJyk7XHJcbiAgICAgICAgICAgICRpY29uLnJlbW92ZUNsYXNzKCdpY29uLXJhYmJpdC1uZWdhdGl2ZScpO1xyXG4gICAgICAgICAgICAkaWNvbi5hZGRDbGFzcygnaWNvbi1yYWJiaXQtcG9zaXRpdmUnKTtcclxuICAgICAgICAgICAgLy8gc2VsZWN0WzBdLnN1bW8uc2VsZWN0SXRlbSgnNDcnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ9GE0YPQvdC60YbQuNGPINGB0YDQsNCx0L7RgtCw0LvQsCDQv9GA0Lgg0LrQu9C40LrQtSBqcy1wb3NpdGl2ZScpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxlY3QudmFsKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2hvd1Bvc2l0aXZlKCcuanMtcG9zaXRpdmUnKTtcclxuICAgIHNob3dQb3NpdGl2ZSgnLmMtcmV2aWV3cy1wb3NpdGl2ZScpO1xyXG5cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlUmFiYml0RmFjZSAoc2VsZWN0KXtcclxuICAgICAgICAkKHNlbGVjdCkub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZhbFJldmlldyA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciAkaWNvbiA9ICQodGhpcykucGFyZW50cygnLnJldmlld3MtZm9ybV9fdHlwZScpLmZpbmQoJy5yZXZpZXdzLWZvcm1fX3R5cGUtaWNvbicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbFJldmlldyA9PSA0OCApIHtcclxuICAgICAgICAgICAgICAgICRpY29uLnJlbW92ZUNsYXNzKCdpY29uLXJhYmJpdC1wb3NpdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJGljb24uYWRkQ2xhc3MoJ2ljb24tcmFiYml0LW5lZ2F0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkaWNvbi5yZW1vdmVDbGFzcygnaWNvbi1yYWJiaXQtbmVnYXRpdmUnKTtcclxuICAgICAgICAgICAgICAgICRpY29uLmFkZENsYXNzKCdpY29uLXJhYmJpdC1wb3NpdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlUmFiYml0RmFjZSgnI2Zvcm1fZHJvcGRvd25fU0lNUExFX1FVRVNUSU9OXzI1NycpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZVNlbGVjdEZhY2UgKHNlbGVjdCwgdmFsdWUsIGljb25fMSwgaWNvbl8yKXtcclxuICAgICAgICAkKHNlbGVjdCkub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHZhbFJldmlldyA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciAkaWNvbiA9ICQodGhpcykucGFyZW50cygnLmMtc2VsZWN0LWxheW91dCcpLmZpbmQoJy5jLXNlbGVjdF9faWNvbicpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2hhbmdlU2VsZWN0RmFjZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbFJldmlldyA9PSB2YWx1ZSApIHtcclxuICAgICAgICAgICAgICAgICRpY29uLnJlbW92ZUNsYXNzKGljb25fMik7XHJcbiAgICAgICAgICAgICAgICAkaWNvbi5hZGRDbGFzcyhpY29uXzEpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2JveScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoaWNvbl8xKTtcclxuICAgICAgICAgICAgICAgICRpY29uLmFkZENsYXNzKGljb25fMik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZ2lybCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlU2VsZWN0RmFjZSgnLmxrLXByb2ZpbGVfX2NoaWxkLWdlbmRlcicsICdNJywnaWNvbi1ib3ktc21pbGluZycsJ2ljb24tZ2lybC1zbWlsaW5nJyk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAvKtC/0YDQvtGB0YLRi9C1INGC0LDQsdGLKi9cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcudGFicy1tZW51IGEnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImN1cnJlbnRcIik7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiY3VycmVudFwiKTtcclxuICAgICAgICB2YXIgdGFiID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy50YWJzLW1lbnUnKS5wYXJlbnQoKS5zaWJsaW5ncygnLnRhYicpLmZpbmQoXCIudGFiLWNvbnRlbnRcIikubm90KHRhYikuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgJCh0YWIpLmZhZGVJbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypzY3JvbGwqL1xyXG4gICAgLy8gJChcIi5wb3B1cC1iYXNrZXRfX3Njcm9sbFwiKS5zY3JvbGxCb3goKTtcclxuICAgIC8vICQoJyNzY3JvbGxiYXJZJykudGlueXNjcm9sbGJhcigpO1xyXG5cclxuICAgIC8qaG92ZXIg0LIg0LzQtdC90Y4qL1xyXG4gICAgLy8gJCgnLmhlYWRlci1tZW51X19pdGVtLS1hYm91dCcpLmhvdmVyKCBmdW5jdGlvbigpe1xyXG4gICAgLy8gICAgJCgnLmhlYWRlci1zdWJuYXZpZ2F0aW9uJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy9cclxuICAgIC8vICQoJy5oZWFkZXItc3VibmF2aWdhdGlvbicpLm1vdXNlbGVhdmUoZnVuY3Rpb24oKXtcclxuICAgIC8vICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAvLyB9KTtcclxuXHJcbi8q0YHQutGA0L7QuyDQutCw0YDRgtGLKi9cclxuICAgIC8vIHZhciB0YXJnZXQgPSAkKCcjbWFwJyk7XHJcbiAgICAvLyB2YXIgdGFyZ2V0UG9zID0gdGFyZ2V0Lm9mZnNldCgpLnRvcDtcclxuICAgIC8vIHZhciB3aW5IZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbiAgICAvLyB2YXIgc2Nyb2xsVG9FbGVtID0gdGFyZ2V0UG9zIC0gd2luSGVpZ2h0O1xyXG4gICAgLy8gJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xyXG4gICAgLy8gICAgIHZhciB3aW5TY3JvbGxUb3AgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xyXG4gICAgLy8gICAgIGlmKHdpblNjcm9sbFRvcCA+IHNjcm9sbFRvRWxlbSl7XHJcbiAgICAvLyAgICAgICAgIC8v0YHRgNCw0LHQvtGC0LDQtdGCINC60L7Qs9C00LAg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC00L7RgdC60YDQvtC70LvQuNGCINC6INGN0LvQtdC80LXQvdGC0YMg0YEg0LrQu9Cw0YHRgdC+0LwgLmVsZW1cclxuICAgIC8vICAgICAgICAgJCh3aW5kb3cpLm9mZnNldCg2MCk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfSk7XHJcblxyXG4gICAgLyrQn9C+0YDQvtC5INC90LAg0YHRgtGA0LDQvdC40YbQsNGFINGBIMKr0YDQtdC30LjQvdC+0LLQvtC5wrsg0LLQtdGA0YHRgtC60L7QuSDQvdC10L7QsdGF0L7QtNC40LzQviDQt9C90LDRgtGMINGI0LjRgNC40L3RgyDRgdC60YDQvtC70LHQsNGA0LAsINGH0YLQvtCx0Ysg0L/RgNCw0LLQuNC70YzQvdC+INCy0YvRh9C40YHQu9C40YLRjCDRgNCw0LfQvNC10YDRiyDQstC90YPRgtGA0LXQvdC90LjRhSDRjdC70LXQvNC10L3RgtC+0LIg0Lgg0LjRhSDQv9C+0LvQvtC20LXQvdC40LUuINCt0YLQsCDQt9Cw0LTQsNGH0LAg0YDQtdGI0LDQtdGC0YHRjyDRgSDQv9C+0LzQvtGJ0YzRjiDRgdC70LXQtNGD0Y7RidC10LPQviDQsNC70LPQvtGA0LjRgtC80LA6XHJcblxyXG7QtNC+0LHQsNCy0LjRgtGMINC00LLQsCBkaXYg0LIgYm9keSDQuCDRgNCw0LfQvNC10YHRgtC40YLRjCDQuNGFINC30LAg0L/RgNC10LTQtdC70LDQvNC4INGN0LrRgNCw0L3QsDtcclxu0L7Qv9GA0LXQtNC10LvQuNGC0Ywg0YjQuNGA0LjQvdGDINCy0L3Rg9GC0YDQtdC90L3QtdCz0L4gZGl2O1xyXG7Rg9GB0YLQsNC90L7QstC40YLRjCDQt9C90LDRh9C10L3QuNC1IMKrc2Nyb2xswrsg0YHQstC+0LnRgdGC0LLQsCBvdmVyZmxvdyDRgyDQstC90LXRiNC90LXQs9C+IGRpdjtcclxu0L7Qv9GP0YLRjCDQvtC/0YDQtdC00LXQu9C40YLRjCDRiNC40YDQuNC90YMg0LLQvdGD0YLRgNC10L3QvdC10LPQviBkaXY7XHJcbtGD0LTQsNC70LjRgtGMINC+0LHQsCBkaXY7XHJcbtCy0LXRgNC90YPRgtGMINGA0LDQt9C90LjRhtGDINC80LXQttC00YMg0LjQt9C80LXRgNC10L3QvdGL0LzQuCDRgNCw0L3QtdC1INC30L3QsNGH0LXQvdC40Y/QvNC4INGI0LjRgNC40L3Riy4qL1xyXG4gICAgLy8gZnVuY3Rpb24gc2Nyb2xsYmFyV2lkdGgoKSB7XHJcbiAgICAvLyAgICAgdmFyIGRpdiA9ICQoJzxkaXYgc3R5bGU9XCJ3aWR0aDo1MHB4OyBoZWlnaHQ6NTBweDsgb3ZlcmZsb3c6aGlkZGVuOyBwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOi0yMDBweDsgbGVmdDotMjAwcHg7XCI+PGRpdiBzdHlsZT1cImhlaWdodDoxMDBweDtcIj48L2Rpdj48L2Rpdj4nKS5hcHBlbmRUbygnYm9keScpO1xyXG4gICAgLy8gICAgIHZhciB3MSA9ICQoJ2RpdicsIGRpdikuaW5uZXJXaWR0aCgpO1xyXG4gICAgLy8gICAgIGRpdi5jc3MoJ292ZXJmbG93LXknLCAnc2Nyb2xsJyk7XHJcbiAgICAvLyAgICAgdmFyIHcyID0gJCgnZGl2JywgZGl2KS5pbm5lcldpZHRoKCk7XHJcbiAgICAvLyAgICAgJChkaXYpLnJlbW92ZSgpO1xyXG4gICAgLy8gICAgIHJldHVybiAodzEgLSB3Mik7XHJcbiAgICAvLyB9XHJcbiAgICAvL1xyXG4gICAgLy8gdmFyIHJlc1Njcm9sbFdpZHRuID0gc2Nyb2xsYmFyV2lkdGgoKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCfQqNC40YDQuNC90LAg0YHQutGA0L7Qu9Cx0LDRgNCwINGB0YLRgNCw0L3QuNGG0Ys6ICcgKyByZXNTY3JvbGxXaWR0bik7XHJcblxyXG59KTtcclxuXHJcblxyXG5cclxuICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbi8vIH0pO1xyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY3VzdG9tIyMjXHJcbi8vXHJcbi8vIFx0JGJvZHkgPSAkKCdib2R5Jyk7XHJcbi8vIFx0d2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuLy8gXHR3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbi8vXHJcbi8vIFx0cGFnZVdpZGdldChbJ2luZGV4J10pO1xyXG4vLyBcdGdldEFsbENsYXNzZXMoJ2h0bWwnLCcuZWxlbWVudHNfbGlzdCcpO1xyXG4vLyB9KTtcclxuLy9cclxuLy8gJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24gKCkge1xyXG4vLyBcdGxvYWRGdW5jKCk7XHJcbi8vIH0pO1xyXG4vL1xyXG4vLyAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcclxuLy8gXHRyZXNpemVGdW5jKCk7XHJcbi8vIH0pO1xyXG4vL1xyXG4vLyAkKHdpbmRvdykub24oJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcclxuLy8gXHRzY3JvbGxGdW5jKCk7XHJcbi8vIH0pO1xyXG4vL1xyXG4vLyBmdW5jdGlvbiBsb2FkRnVuYygpIHtcclxuLy9cclxuLy8gfVxyXG4vLyBmdW5jdGlvbiByZXNpemVGdW5jKCkge1xyXG4vLyBcdHVwZGF0ZVNpemVzKCk7XHJcbi8vIH1cclxuLy9cclxuLy8gZnVuY3Rpb24gc2Nyb2xsRnVuYygpIHtcclxuLy8gXHR1cGRhdGVTaXplcygpO1xyXG4vLyB9XHJcbi8vXHJcbi8vIGZ1bmN0aW9uIHVwZGF0ZVNpemVzKCkge1xyXG4vLyBcdHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbi8vIFx0d2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG4vLyB9XHJcblxyXG4vLyBpZiAoJ29iamVjdEZpdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlID09PSBmYWxzZSkge1xyXG4vLyBcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbi8vIFx0XHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZ1tkYXRhLW9iamVjdC1maXRdJyksIGZ1bmN0aW9uIChpbWFnZSkge1xyXG4vLyBcdFx0XHQoaW1hZ2UucnVudGltZVN0eWxlIHx8IGltYWdlLnN0eWxlKS5iYWNrZ3JvdW5kID0gJ3VybChcIicgKyBpbWFnZS5zcmMgKyAnXCIpIG5vLXJlcGVhdCA1MCUvJyArIChpbWFnZS5jdXJyZW50U3R5bGUgPyBpbWFnZS5jdXJyZW50U3R5bGVbJ29iamVjdC1maXQnXSA6IGltYWdlLmdldEF0dHJpYnV0ZSgnZGF0YS1vYmplY3QtZml0JykpO1xyXG4vL1xyXG4vLyBcdFx0XHRpbWFnZS5zcmMgPSAnZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz1cXCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcJyB3aWR0aD1cXCcnICsgaW1hZ2Uud2lkdGggKyAnXFwnIGhlaWdodD1cXCcnICsgaW1hZ2UuaGVpZ2h0ICsgJ1xcJyUzRSUzQy9zdmclM0UnO1xyXG4vLyBcdFx0fSk7XHJcbi8vIFx0fSk7XHJcbi8vIH1cclxuXHJcbi8vRnVuY3Rpb25zIGZvciBkZXZlbG9wbWVudFxyXG4vLyBmdW5jdGlvbiBnZXRBbGxDbGFzc2VzKGNvbnRleHQsIG91dHB1dCkge1xyXG4vLyBcdHZhciBmaW5hbEFycmF5ID0gW10sXHJcbi8vIFx0XHRtYWluQXJyYXkgPSBbXSxcclxuLy8gXHRcdGFsbEVsZW1lbnRzID0gJChjb250ZXh0KS5maW5kKCQoJyonKSk7Ly9nZXQgYWxsIGVsZW1lbnRzIG9mIG91ciBwYWdlXHJcbi8vIFx0Ly9JZiBlbGVtZW50IGhhcyBjbGFzcyBwdXNoIHRoaXMgY2xhc3MgdG8gbWFpbkFycmF5XHJcbi8vIFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhbGxFbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4vLyBcdFx0dmFyIHNvbWVFbGVtZW50ID0gYWxsRWxlbWVudHNbaV0sXHJcbi8vIFx0XHRcdGVsZW1lbnRDbGFzcyA9IHNvbWVFbGVtZW50LmNsYXNzTmFtZTtcclxuLy8gXHRcdGlmIChlbGVtZW50Q2xhc3MubGVuZ3RoID4gMCkgey8vaWYgZWxlbWVudCBoYXZlIG5vdCBlbXB0eSBjbGFzc1xyXG4vLyBcdFx0XHQvL0lmIGVsZW1lbnQgaGF2ZSBtdWx0aXBsZSBjbGFzc2VzIC0gc2VwYXJhdGUgdGhlbVxyXG4vLyBcdFx0XHR2YXIgZWxlbWVudENsYXNzQXJyYXkgPSBlbGVtZW50Q2xhc3Muc3BsaXQoJyAnKSxcclxuLy8gXHRcdFx0XHRjbGFzc2VzQW1vdW50ID0gZWxlbWVudENsYXNzQXJyYXkubGVuZ3RoO1xyXG4vLyBcdFx0XHRpZiAoY2xhc3Nlc0Ftb3VudCA9PT0gMSkge1xyXG4vLyBcdFx0XHRcdG1haW5BcnJheS5wdXNoKCcuJyArIGVsZW1lbnRDbGFzc0FycmF5WzBdICsgJyB7Jyk7XHJcbi8vIFx0XHRcdH0gZWxzZSB7XHJcbi8vIFx0XHRcdFx0dmFyIGNhc2NhZCA9ICcuJyArIGVsZW1lbnRDbGFzc0FycmF5WzBdICsgJyB7JztcclxuLy8gXHRcdFx0XHRmb3IgKHZhciBqID0gMTsgaiA8IGVsZW1lbnRDbGFzc0FycmF5Lmxlbmd0aDsgaisrKSB7XHJcbi8vIFx0XHRcdFx0XHRjYXNjYWQgKz0gJyAmLicgKyBlbGVtZW50Q2xhc3NBcnJheVtqXSArICcgeyB9JztcclxuLy8gXHRcdFx0XHR9XHJcbi8vIFx0XHRcdFx0bWFpbkFycmF5LnB1c2goY2FzY2FkKTtcclxuLy8gXHRcdFx0fVxyXG4vLyBcdFx0fVxyXG4vLyBcdH1cclxuXHJcblx0Ly9jcmVhdGluZyBmaW5hbEFycmF5LCB0aGF0IGRvbid0IGhhdmUgcmVwZWF0aW5nIGVsZW1lbnRzXHJcbi8vIFx0dmFyIG5vUmVwZWF0aW5nQXJyYXkgPSB1bmlxdWUobWFpbkFycmF5KTtcclxuLy8gXHRub1JlcGVhdGluZ0FycmF5LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuLy8gXHRcdHZhciBoYXMgPSBmYWxzZTtcclxuLy8gXHRcdHZhciBwcmVXb3JkcyA9IGl0ZW0uc3BsaXQoJyYnKTtcclxuLy8gXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZmluYWxBcnJheS5sZW5ndGg7ICsraSkge1xyXG4vLyBcdFx0XHR2YXIgbmV3V29yZHMgPSBmaW5hbEFycmF5W2ldLnNwbGl0KCcmJyk7XHJcbi8vIFx0XHRcdGlmIChuZXdXb3Jkc1swXSA9PSBwcmVXb3Jkc1swXSkge1xyXG4vLyBcdFx0XHRcdGhhcyA9IHRydWU7XHJcbi8vIFx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBwcmVXb3Jkcy5sZW5ndGg7ICsraikge1xyXG4vLyBcdFx0XHRcdFx0aWYgKG5ld1dvcmRzLmluZGV4T2YocHJlV29yZHNbal0pIDwgMCkge1xyXG4vLyBcdFx0XHRcdFx0XHRuZXdXb3Jkcy5wdXNoKHByZVdvcmRzW2pdKTtcclxuLy8gXHRcdFx0XHRcdH1cclxuLy8gXHRcdFx0XHR9XHJcbi8vIFx0XHRcdFx0ZmluYWxBcnJheVtpXSA9IG5ld1dvcmRzLmpvaW4oJyYnKTtcclxuLy8gXHRcdFx0fVxyXG4vLyBcdFx0fVxyXG4vLyBcdFx0aWYgKCFoYXMpIHtcclxuLy8gXHRcdFx0ZmluYWxBcnJheS5wdXNoKGl0ZW0pO1xyXG4vLyBcdFx0fVxyXG4vLyBcdH0pO1xyXG4vLyBcdGZvciAodmFyIGkgPSAwOyBpIDwgZmluYWxBcnJheS5sZW5ndGg7IGkrKykge1xyXG4vLyBcdFx0JCgnPGRpdj4nICsgZmluYWxBcnJheVtpXSArICcgfTwvZGl2PicpLmFwcGVuZFRvKG91dHB1dCk7XHJcbi8vIFx0fVxyXG4vL1xyXG4vLyBcdC8vZnVuY3Rpb24gdGhhdCBkZWxldGUgcmVwZWF0aW5nIGVsZW1lbnRzIGZyb20gYXJyYXlzLCBmb3IgbW9yZSBpbmZvcm1hdGlvbiB2aXNpdCBodHRwOi8vbWF0aGhlbHBwbGFuZXQuY29tL3N0YXRpYy5waHA/cD1qYXZhc2NyaXB0LWFsZ29yaXRteS1vYnJhYm90a2ktbWFzc2l2b3ZcclxuLy8gXHRmdW5jdGlvbiB1bmlxdWUoQSkge1xyXG4vLyBcdFx0dmFyIG4gPSBBLmxlbmd0aCwgayA9IDAsIEIgPSBbXTtcclxuLy8gXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XHJcbi8vIFx0XHRcdHZhciBqID0gMDtcclxuLy8gXHRcdFx0d2hpbGUgKGogPCBrICYmIEJbal0gIT09IEFbaV0pIGorKztcclxuLy8gXHRcdFx0aWYgKGogPT0gaykgQltrKytdID0gQVtpXTtcclxuLy8gXHRcdH1cclxuLy8gXHRcdHJldHVybiBCO1xyXG4vLyBcdH1cclxuLy8gfVxyXG4vKlxyXG5mdW5jdGlvbiBwYWdlV2lkZ2V0KHBhZ2VzKSB7XHJcblx0dmFyIHdpZGdldFdyYXAgPSAkKCc8ZGl2IGNsYXNzPVwid2lkZ2V0X3dyYXBcIj48dWwgY2xhc3M9XCJ3aWRnZXRfbGlzdFwiPjwvdWw+PC9kaXY+Jyk7XHJcblx0d2lkZ2V0V3JhcC5wcmVwZW5kVG8oXCJib2R5XCIpO1xyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdCQoJzxsaSBjbGFzcz1cIndpZGdldF9pdGVtXCI+PGEgY2xhc3M9XCJ3aWRnZXRfbGlua1wiIGhyZWY9XCInICsgcGFnZXNbaV0gKyAnLmh0bWwnICsgJ1wiPicgKyBwYWdlc1tpXSArICc8L2E+PC9saT4nKS5hcHBlbmRUbygnLndpZGdldF9saXN0Jyk7XHJcblx0fVxyXG5cdHZhciB3aWRnZXRTdGlsaXphdGlvbiA9ICQoJzxzdHlsZT5ib2R5IHtwb3NpdGlvbjpyZWxhdGl2ZX0gLndpZGdldF93cmFwe3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt6LWluZGV4Ojk5OTk7cGFkZGluZzoxMHB4IDIwcHg7YmFja2dyb3VuZDojMjIyO2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjEwcHg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoLTEwMCUsMCk7LW1zLXRyYW5zZm9ybTp0cmFuc2xhdGUoLTEwMCUsMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtMTAwJSwwKX0ud2lkZ2V0X3dyYXA6YWZ0ZXJ7Y29udGVudDpcIiBcIjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjEwMCU7d2lkdGg6MjRweDtoZWlnaHQ6MjRweDtiYWNrZ3JvdW5kOiMyMjIgdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUFnTUFBQUJpblJmeUFBQUFCR2RCVFVFQUFMR1BDL3hoQlFBQUFBeFFURlJGLy8vLy8vLy9BQUFBLy8vL0JRQmt3Z0FBQUFOMFVrNVR4TU1BakFkK3p3QUFBQ05KUkVGVUNOZGpxUC8vL3kvRGZ5QmcrTFZxMVhvbzhXOC9Da0ZZQW13QTBLZy9BRmNBTlQ1ZmU3bDRBQUFBQUVsRlRrU3VRbUNDKSBuby1yZXBlYXQgNTAlIDUwJTtjdXJzb3I6cG9pbnRlcn0ud2lkZ2V0X3dyYXA6aG92ZXJ7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlKDAsMCk7LW1zLXRyYW5zZm9ybTp0cmFuc2xhdGUoMCwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlKDAsMCl9LndpZGdldF9pdGVte3BhZGRpbmc6MCAwIDEwcHh9LndpZGdldF9saW5re2NvbG9yOiNmZmY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Zm9udC1zaXplOjE1cHg7fS53aWRnZXRfbGluazpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfSA8L3N0eWxlPicpO1xyXG5cdHdpZGdldFN0aWxpemF0aW9uLnByZXBlbmRUbyhcIi53aWRnZXRfd3JhcFwiKTtcclxufVxyXG4qL1xyXG5cclxuLypcclxuXHRCeSBPc3ZhbGRhcyBWYWx1dGlzLCB3d3cub3N2YWxkYXMuaW5mb1xyXG5cdEF2YWlsYWJsZSBmb3IgdXNlIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxyXG4qL1xyXG5cclxuJ3VzZSBzdHJpY3QnO1xyXG5cclxuOyggZnVuY3Rpb24gKCBkb2N1bWVudCwgd2luZG93LCBpbmRleCApXHJcbntcclxuICAgIHZhciBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnLmMtaW5wdXRmaWxlX19pbnB1dCcgKTtcclxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoIGlucHV0cywgZnVuY3Rpb24oIGlucHV0IClcclxuICAgIHtcclxuICAgICAgICB2YXIgbGFiZWxcdCA9IGlucHV0Lm5leHRFbGVtZW50U2libGluZyxcclxuICAgICAgICAgICAgbGFiZWxWYWwgPSBsYWJlbC5pbm5lckhUTUw7XHJcblxyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoICdjaGFuZ2UnLCBmdW5jdGlvbiggZSApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSAnJztcclxuICAgICAgICAgICAgaWYoIHRoaXMuZmlsZXMgJiYgdGhpcy5maWxlcy5sZW5ndGggPiAxIClcclxuICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gKCB0aGlzLmdldEF0dHJpYnV0ZSggJ2RhdGEtbXVsdGlwbGUtY2FwdGlvbicgKSB8fCAnJyApLnJlcGxhY2UoICd7Y291bnR9JywgdGhpcy5maWxlcy5sZW5ndGggKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBlLnRhcmdldC52YWx1ZS5zcGxpdCggJ1xcXFwnICkucG9wKCk7XHJcblxyXG4gICAgICAgICAgICBpZiggZmlsZU5hbWUgKVxyXG4gICAgICAgICAgICAgICAgbGFiZWwucXVlcnlTZWxlY3RvciggJ3NwYW4nICkuaW5uZXJIVE1MID0gZmlsZU5hbWU7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGxhYmVsLmlubmVySFRNTCA9IGxhYmVsVmFsO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBGaXJlZm94IGJ1ZyBmaXhcclxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCAnZm9jdXMnLCBmdW5jdGlvbigpeyBpbnB1dC5jbGFzc0xpc3QuYWRkKCAnaGFzLWZvY3VzJyApOyB9KTtcclxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCAnYmx1cicsIGZ1bmN0aW9uKCl7IGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoICdoYXMtZm9jdXMnICk7IH0pO1xyXG4gICAgfSk7XHJcbn0oIGRvY3VtZW50LCB3aW5kb3csIDAgKSk7XHJcbiJdfQ==

// document.body.onload = function(){
//     setTimeout(function(){
//         var preloader = document.getElementById('page-preloader');
//         if(!preloader.classList.contains('done')){
//             preloader.classList.add('done');
//         }
//     }, 1000);
// };

/*новый прелоудер*/
document.body.onload = function(){

    if(document.body.classList.contains('is-content-hidden')){
        document.body.classList.add('visible');
    }

    document.body.classList.add('onloadContent');

};



// функция подключения всех скриптов
// function dynamicallyLoadScript() {

//     var script,
//         listScripts = document.getElementById('listScripts'),
//         src = [
//             // 'https://api-maps.yandex.ru/2.1/?lang=ru_RU',
//             './js/custom-map.js',
//             './bower_components/jquery-mask-plugin/dist/jquery.mask.js',
//             './js/jscrollpane/jquery.mousewheel.js',
//             './js/jscrollpane/jquery.jscrollpane.min.js',
//             // 'https://abestuzhev.github.io/cafe-anderson/bower_components/tooltipster/dist/js/tooltipster.bundle.js',
//             './js/simplebar.js',
//             './js/owlcarousel/owl.carousel.js',
//             './bower_components/sumoselect/jquery.sumoselect.js',
//             './bower_components/fotorama/fotorama.js'
//         ];

//     for(var i = 0; i < src.length; i++){
//         script = document.createElement("script");
//         script.src = src[i];
//         listScripts.appendChild(script);
//     }  
// };

//   dynamicallyLoadScript();

/**
 * tooltipster http://iamceege.github.io/tooltipster/
 * A rockin' custom tooltip jQuery plugin
 * Developed by Caleb Jacob and Louis Ameline
 * MIT license
 */
(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module unless amdModuleId is set
    define(["jquery"], function (a0) {
      return (factory(a0));
    });
  } else if (typeof exports === 'object') {
    // Node. Does not work with strict CommonJS, but
    // only CommonJS-like environments that support module.exports,
    // like Node.
    module.exports = factory(require("jquery"));
  } else {
    factory(jQuery);
  }
}(this, function ($) {

// This file will be UMDified by a build task.

var defaults = {
		animation: 'fade',
		animationDuration: 350,
		content: null,
		contentAsHTML: false,
		contentCloning: false,
		debug: true,
		delay: 300,
		delayTouch: [300, 500],
		functionInit: null,
		functionBefore: null,
		functionReady: null,
		functionAfter: null,
		functionFormat: null,
		IEmin: 6,
		interactive: false,
		multiple: false,
		// will default to document.body, or must be an element positioned at (0, 0)
		// in the document, typically like the very top views of an app.
		parent: null,
		plugins: ['sideTip'],
		repositionOnScroll: false,
		restoration: 'none',
		selfDestruction: true,
		theme: [],
		timer: 0,
		trackerInterval: 500,
		trackOrigin: false,
		trackTooltip: false,
		trigger: 'hover',
		triggerClose: {
			click: false,
			mouseleave: false,
			originClick: false,
			scroll: false,
			tap: false,
			touchleave: false
		},
		triggerOpen: {
			click: false,
			mouseenter: false,
			tap: false,
			touchstart: false
		},
		updateAnimation: 'rotate',
		zIndex: 9999999
	},
	// we'll avoid using the 'window' global as a good practice but npm's
	// jquery@<2.1.0 package actually requires a 'window' global, so not sure
	// it's useful at all
	win = (typeof window != 'undefined') ? window : null,
	// env will be proxied by the core for plugins to have access its properties
	env = {
		// detect if this device can trigger touch events. Better have a false
		// positive (unused listeners, that's ok) than a false negative.
		// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/touchevents.js
		// http://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript
		hasTouchCapability: !!(
			win
			&&	(	'ontouchstart' in win
				||	(win.DocumentTouch && win.document instanceof win.DocumentTouch)
				||	win.navigator.maxTouchPoints
			)
		),
		hasTransitions: transitionSupport(),
		IE: false,
		// don't set manually, it will be updated by a build task after the manifest
		semVer: '4.2.5',
		window: win
	},
	core = function() {
		
		// core variables
		
		// the core emitters
		this.__$emitterPrivate = $({});
		this.__$emitterPublic = $({});
		this.__instancesLatestArr = [];
		// collects plugin constructors
		this.__plugins = {};
		// proxy env variables for plugins who might use them
		this._env = env;
	};

// core methods
core.prototype = {
	
	/**
	 * A function to proxy the public methods of an object onto another
	 *
	 * @param {object} constructor The constructor to bridge
	 * @param {object} obj The object that will get new methods (an instance or the core)
	 * @param {string} pluginName A plugin name for the console log message
	 * @return {core}
	 * @private
	 */
	__bridge: function(constructor, obj, pluginName) {
		
		// if it's not already bridged
		if (!obj[pluginName]) {
			
			var fn = function() {};
			fn.prototype = constructor;
			
			var pluginInstance = new fn();
			
			// the _init method has to exist in instance constructors but might be missing
			// in core constructors
			if (pluginInstance.__init) {
				pluginInstance.__init(obj);
			}
			
			$.each(constructor, function(methodName, fn) {
				
				// don't proxy "private" methods, only "protected" and public ones
				if (methodName.indexOf('__') != 0) {
					
					// if the method does not exist yet
					if (!obj[methodName]) {
						
						obj[methodName] = function() {
							return pluginInstance[methodName].apply(pluginInstance, Array.prototype.slice.apply(arguments));
						};
						
						// remember to which plugin this method corresponds (several plugins may
						// have methods of the same name, we need to be sure)
						obj[methodName].bridged = pluginInstance;
					}
					else if (defaults.debug) {
						
						console.log('The '+ methodName +' method of the '+ pluginName
							+' plugin conflicts with another plugin or native methods');
					}
				}
			});
			
			obj[pluginName] = pluginInstance;
		}
		
		return this;
	},
	
	/**
	 * For mockup in Node env if need be, for testing purposes
	 *
	 * @return {core}
	 * @private
	 */
	__setWindow: function(window) {
		env.window = window;
		return this;
	},
	
	/**
	 * Returns a ruler, a tool to help measure the size of a tooltip under
	 * various settings. Meant for plugins
	 * 
	 * @see Ruler
	 * @return {object} A Ruler instance
	 * @protected
	 */
	_getRuler: function($tooltip) {
		return new Ruler($tooltip);
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_off: function() {
		this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_on: function() {
		this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @return {core}
	 * @protected
	 */
	_one: function() {
		this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Returns (getter) or adds (setter) a plugin
	 *
	 * @param {string|object} plugin Provide a string (in the full form
	 * "namespace.name") to use as as getter, an object to use as a setter
	 * @return {object|core}
	 * @protected
	 */
	_plugin: function(plugin) {
		
		var self = this;
		
		// getter
		if (typeof plugin == 'string') {
			
			var pluginName = plugin,
				p = null;
			
			// if the namespace is provided, it's easy to search
			if (pluginName.indexOf('.') > 0) {
				p = self.__plugins[pluginName];
			}
			// otherwise, return the first name that matches
			else {
				$.each(self.__plugins, function(i, plugin) {
					
					if (plugin.name.substring(plugin.name.length - pluginName.length - 1) == '.'+ pluginName) {
						p = plugin;
						return false;
					}
				});
			}
			
			return p;
		}
		// setter
		else {
			
			// force namespaces
			if (plugin.name.indexOf('.') < 0) {
				throw new Error('Plugins must be namespaced');
			}
			
			self.__plugins[plugin.name] = plugin;
			
			// if the plugin has core features
			if (plugin.core) {
				
				// bridge non-private methods onto the core to allow new core methods
				self.__bridge(plugin.core, self, plugin.name);
			}
			
			return this;
		}
	},
	
	/**
	 * Trigger events on the core emitters
	 * 
	 * @returns {core}
	 * @protected
	 */
	_trigger: function() {
		
		var args = Array.prototype.slice.apply(arguments);
		
		if (typeof args[0] == 'string') {
			args[0] = { type: args[0] };
		}
		
		// note: the order of emitters matters
		this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, args);
		this.__$emitterPublic.trigger.apply(this.__$emitterPublic, args);
		
		return this;
	},
	
	/**
	 * Returns instances of all tooltips in the page or an a given element
	 *
	 * @param {string|HTML object collection} selector optional Use this
	 * parameter to restrict the set of objects that will be inspected
	 * for the retrieval of instances. By default, all instances in the
	 * page are returned.
	 * @return {array} An array of instance objects
	 * @public
	 */
	instances: function(selector) {
		
		var instances = [],
			sel = selector || '.tooltipstered';
		
		$(sel).each(function() {
			
			var $this = $(this),
				ns = $this.data('tooltipster-ns');
			
			if (ns) {
				
				$.each(ns, function(i, namespace) {
					instances.push($this.data(namespace));
				});
			}
		});
		
		return instances;
	},
	
	/**
	 * Returns the Tooltipster objects generated by the last initializing call
	 *
	 * @return {array} An array of instance objects
	 * @public
	 */
	instancesLatest: function() {
		return this.__instancesLatestArr;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_off() instead)
	 *
	 * @return {core}
	 * @public
	 */
	off: function() {
		this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_on() instead)
	 *
	 * @return {core}
	 * @public
	 */
	on: function() {
		this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_one() instead)
	 * 
	 * @return {core}
	 * @public
	 */
	one: function() {
		this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Returns all HTML elements which have one or more tooltips
	 *
	 * @param {string} selector optional Use this to restrict the results
	 * to the descendants of an element
	 * @return {array} An array of HTML elements
	 * @public
	 */
	origins: function(selector) {
		
		var sel = selector ?
			selector +' ' :
			'';
		
		return $(sel +'.tooltipstered').toArray();
	},
	
	/**
	 * Change default options for all future instances
	 *
	 * @param {object} d The options that should be made defaults
	 * @return {core}
	 * @public
	 */
	setDefaults: function(d) {
		$.extend(defaults, d);
		return this;
	},
	
	/**
	 * For users to trigger their handlers on the public emitter
	 * 
	 * @returns {core}
	 * @public
	 */
	triggerHandler: function() {
		this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		return this;
	}
};

// $.tooltipster will be used to call core methods
$.tooltipster = new core();

// the Tooltipster instance class (mind the capital T)
$.Tooltipster = function(element, options) {
	
	// list of instance variables
	
	// stack of custom callbacks provided as parameters to API methods
	this.__callbacks = {
		close: [],
		open: []
	};
	// the schedule time of DOM removal
	this.__closingTime;
	// this will be the user content shown in the tooltip. A capital "C" is used
	// because there is also a method called content()
	this.__Content;
	// for the size tracker
	this.__contentBcr;
	// to disable the tooltip after destruction
	this.__destroyed = false;
	// we can't emit directly on the instance because if a method with the same
	// name as the event exists, it will be called by jQuery. Se we use a plain
	// object as emitter. This emitter is for internal use by plugins,
	// if needed.
	this.__$emitterPrivate = $({});
	// this emitter is for the user to listen to events without risking to mess
	// with our internal listeners
	this.__$emitterPublic = $({});
	this.__enabled = true;
	// the reference to the gc interval
	this.__garbageCollector;
	// various position and size data recomputed before each repositioning
	this.__Geometry;
	// the tooltip position, saved after each repositioning by a plugin
	this.__lastPosition;
	// a unique namespace per instance
	this.__namespace = 'tooltipster-'+ Math.round(Math.random()*1000000);
	this.__options;
	// will be used to support origins in scrollable areas
	this.__$originParents;
	this.__pointerIsOverOrigin = false;
	// to remove themes if needed
	this.__previousThemes = [];
	// the state can be either: appearing, stable, disappearing, closed
	this.__state = 'closed';
	// timeout references
	this.__timeouts = {
		close: [],
		open: null
	};
	// store touch events to be able to detect emulated mouse events
	this.__touchEvents = [];
	// the reference to the tracker interval
	this.__tracker = null;
	// the element to which this tooltip is associated
	this._$origin;
	// this will be the tooltip element (jQuery wrapped HTML element).
	// It's the job of a plugin to create it and append it to the DOM
	this._$tooltip;
	
	// launch
	this.__init(element, options);
};

$.Tooltipster.prototype = {
	
	/**
	 * @param origin
	 * @param options
	 * @private
	 */
	__init: function(origin, options) {
		
		var self = this;
		
		self._$origin = $(origin);
		self.__options = $.extend(true, {}, defaults, options);
		
		// some options may need to be reformatted
		self.__optionsFormat();
		
		// don't run on old IE if asked no to
		if (	!env.IE
			||	env.IE >= self.__options.IEmin
		) {
			
			// note: the content is null (empty) by default and can stay that
			// way if the plugin remains initialized but not fed any content. The
			// tooltip will just not appear.
			
			// let's save the initial value of the title attribute for later
			// restoration if need be.
			var initialTitle = null;
			
			// it will already have been saved in case of multiple tooltips
			if (self._$origin.data('tooltipster-initialTitle') === undefined) {
				
				initialTitle = self._$origin.attr('title');
				
				// we do not want initialTitle to be "undefined" because
				// of how jQuery's .data() method works
				if (initialTitle === undefined) initialTitle = null;
				
				self._$origin.data('tooltipster-initialTitle', initialTitle);
			}
			
			// If content is provided in the options, it has precedence over the
			// title attribute.
			// Note: an empty string is considered content, only 'null' represents
			// the absence of content.
			// Also, an existing title="" attribute will result in an empty string
			// content
			if (self.__options.content !== null) {
				self.__contentSet(self.__options.content);
			}
			else {
				
				var selector = self._$origin.attr('data-tooltip-content'),
					$el;
				
				if (selector){
					$el = $(selector);
				}
				
				if ($el && $el[0]) {
					self.__contentSet($el.first());
				}
				else {
					self.__contentSet(initialTitle);
				}
			}
			
			self._$origin
				// strip the title off of the element to prevent the default tooltips
				// from popping up
				.removeAttr('title')
				// to be able to find all instances on the page later (upon window
				// events in particular)
				.addClass('tooltipstered');
			
			// set listeners on the origin
			self.__prepareOrigin();
			
			// set the garbage collector
			self.__prepareGC();
			
			// init plugins
			$.each(self.__options.plugins, function(i, pluginName) {
				self._plug(pluginName);
			});
			
			// to detect swiping
			if (env.hasTouchCapability) {
				$(env.window.document.body).on('touchmove.'+ self.__namespace +'-triggerOpen', function(event) {
					self._touchRecordEvent(event);
				});
			}
			
			self
				// prepare the tooltip when it gets created. This event must
				// be fired by a plugin
				._on('created', function() {
					self.__prepareTooltip();
				})
				// save position information when it's sent by a plugin
				._on('repositioned', function(e) {
					self.__lastPosition = e.position;
				});
		}
		else {
			self.__options.disabled = true;
		}
	},
	
	/**
	 * Insert the content into the appropriate HTML element of the tooltip
	 * 
	 * @returns {self}
	 * @private
	 */
	__contentInsert: function() {
		
		var self = this,
			$el = self._$tooltip.find('.tooltipster-content'),
			formattedContent = self.__Content,
			format = function(content) {
				formattedContent = content;
			};
		
		self._trigger({
			type: 'format',
			content: self.__Content,
			format: format
		});
		
		if (self.__options.functionFormat) {
			
			formattedContent = self.__options.functionFormat.call(
				self,
				self,
				{ origin: self._$origin[0] },
				self.__Content
			);
		}
		
		if (typeof formattedContent === 'string' && !self.__options.contentAsHTML) {
			$el.text(formattedContent);
		}
		else {
			$el
				.empty()
				.append(formattedContent);
		}
		
		return self;
	},
	
	/**
	 * Save the content, cloning it beforehand if need be
	 * 
	 * @param content
	 * @returns {self}
	 * @private
	 */
	__contentSet: function(content) {
		
		// clone if asked. Cloning the object makes sure that each instance has its
		// own version of the content (in case a same object were provided for several
		// instances)
		// reminder: typeof null === object
		if (content instanceof $ && this.__options.contentCloning) {
			content = content.clone(true);
		}
		
		this.__Content = content;
		
		this._trigger({
			type: 'updated',
			content: content
		});
		
		return this;
	},
	
	/**
	 * Error message about a method call made after destruction
	 * 
	 * @private
	 */
	__destroyError: function() {
		throw new Error('This tooltip has been destroyed and cannot execute your method call.');
	},
	
	/**
	 * Gather all information about dimensions and available space,
	 * called before every repositioning
	 * 
	 * @private
	 * @returns {object}
	 */
	__geometry: function() {
		
		var	self = this,
			$target = self._$origin,
			originIsArea = self._$origin.is('area');
		
		// if this._$origin is a map area, the target we'll need
		// the dimensions of is actually the image using the map,
		// not the area itself
		if (originIsArea) {
			
			var mapName = self._$origin.parent().attr('name');
			
			$target = $('img[usemap="#'+ mapName +'"]');
		}
		
		var bcr = $target[0].getBoundingClientRect(),
			$document = $(env.window.document),
			$window = $(env.window),
			$parent = $target,
			// some useful properties of important elements
			geo = {
				// available space for the tooltip, see down below
				available: {
					document: null,
					window: null
				},
				document: {
					size: {
						height: $document.height(),
						width: $document.width()
					}
				},
				window: {
					scroll: {
						// the second ones are for IE compatibility
						left: env.window.scrollX || env.window.document.documentElement.scrollLeft,
						top: env.window.scrollY || env.window.document.documentElement.scrollTop
					},
					size: {
						height: $window.height(),
						width: $window.width()
					}
				},
				origin: {
					// the origin has a fixed lineage if itself or one of its
					// ancestors has a fixed position
					fixedLineage: false,
					// relative to the document
					offset: {},
					size: {
						height: bcr.bottom - bcr.top,
						width: bcr.right - bcr.left
					},
					usemapImage: originIsArea ? $target[0] : null,
					// relative to the window
					windowOffset: {
						bottom: bcr.bottom,
						left: bcr.left,
						right: bcr.right,
						top: bcr.top
					}
				}
			},
			geoFixed = false;
		
		// if the element is a map area, some properties may need
		// to be recalculated
		if (originIsArea) {
			
			var shape = self._$origin.attr('shape'),
				coords = self._$origin.attr('coords');
			
			if (coords) {
				
				coords = coords.split(',');
				
				$.map(coords, function(val, i) {
					coords[i] = parseInt(val);
				});
			}
			
			// if the image itself is the area, nothing more to do
			if (shape != 'default') {
				
				switch(shape) {
					
					case 'circle':
						
						var circleCenterLeft = coords[0],
							circleCenterTop = coords[1],
							circleRadius = coords[2],
							areaTopOffset = circleCenterTop - circleRadius,
							areaLeftOffset = circleCenterLeft - circleRadius;
						
						geo.origin.size.height = circleRadius * 2;
						geo.origin.size.width = geo.origin.size.height;
						
						geo.origin.windowOffset.left += areaLeftOffset;
						geo.origin.windowOffset.top += areaTopOffset;
						
						break;
					
					case 'rect':
						
						var areaLeft = coords[0],
							areaTop = coords[1],
							areaRight = coords[2],
							areaBottom = coords[3];
						
						geo.origin.size.height = areaBottom - areaTop;
						geo.origin.size.width = areaRight - areaLeft;
						
						geo.origin.windowOffset.left += areaLeft;
						geo.origin.windowOffset.top += areaTop;
						
						break;
					
					case 'poly':
						
						var areaSmallestX = 0,
							areaSmallestY = 0,
							areaGreatestX = 0,
							areaGreatestY = 0,
							arrayAlternate = 'even';
						
						for (var i = 0; i < coords.length; i++) {
							
							var areaNumber = coords[i];
							
							if (arrayAlternate == 'even') {
								
								if (areaNumber > areaGreatestX) {
									
									areaGreatestX = areaNumber;
									
									if (i === 0) {
										areaSmallestX = areaGreatestX;
									}
								}
								
								if (areaNumber < areaSmallestX) {
									areaSmallestX = areaNumber;
								}
								
								arrayAlternate = 'odd';
							}
							else {
								if (areaNumber > areaGreatestY) {
									
									areaGreatestY = areaNumber;
									
									if (i == 1) {
										areaSmallestY = areaGreatestY;
									}
								}
								
								if (areaNumber < areaSmallestY) {
									areaSmallestY = areaNumber;
								}
								
								arrayAlternate = 'even';
							}
						}
						
						geo.origin.size.height = areaGreatestY - areaSmallestY;
						geo.origin.size.width = areaGreatestX - areaSmallestX;
						
						geo.origin.windowOffset.left += areaSmallestX;
						geo.origin.windowOffset.top += areaSmallestY;
						
						break;
				}
			}
		}
		
		// user callback through an event
		var edit = function(r) {
			geo.origin.size.height = r.height,
				geo.origin.windowOffset.left = r.left,
				geo.origin.windowOffset.top = r.top,
				geo.origin.size.width = r.width
		};
		
		self._trigger({
			type: 'geometry',
			edit: edit,
			geometry: {
				height: geo.origin.size.height,
				left: geo.origin.windowOffset.left,
				top: geo.origin.windowOffset.top,
				width: geo.origin.size.width
			}
		});
		
		// calculate the remaining properties with what we got
		
		geo.origin.windowOffset.right = geo.origin.windowOffset.left + geo.origin.size.width;
		geo.origin.windowOffset.bottom = geo.origin.windowOffset.top + geo.origin.size.height;
		
		geo.origin.offset.left = geo.origin.windowOffset.left + geo.window.scroll.left;
		geo.origin.offset.top = geo.origin.windowOffset.top + geo.window.scroll.top;
		geo.origin.offset.bottom = geo.origin.offset.top + geo.origin.size.height;
		geo.origin.offset.right = geo.origin.offset.left + geo.origin.size.width;
		
		// the space that is available to display the tooltip relatively to the document
		geo.available.document = {
			bottom: {
				height: geo.document.size.height - geo.origin.offset.bottom,
				width: geo.document.size.width
			},
			left: {
				height: geo.document.size.height,
				width: geo.origin.offset.left
			},
			right: {
				height: geo.document.size.height,
				width: geo.document.size.width - geo.origin.offset.right
			},
			top: {
				height: geo.origin.offset.top,
				width: geo.document.size.width
			}
		};
		
		// the space that is available to display the tooltip relatively to the viewport
		// (the resulting values may be negative if the origin overflows the viewport)
		geo.available.window = {
			bottom: {
				// the inner max is here to make sure the available height is no bigger
				// than the viewport height (when the origin is off screen at the top).
				// The outer max just makes sure that the height is not negative (when
				// the origin overflows at the bottom).
				height: Math.max(geo.window.size.height - Math.max(geo.origin.windowOffset.bottom, 0), 0),
				width: geo.window.size.width
			},
			left: {
				height: geo.window.size.height,
				width: Math.max(geo.origin.windowOffset.left, 0)
			},
			right: {
				height: geo.window.size.height,
				width: Math.max(geo.window.size.width - Math.max(geo.origin.windowOffset.right, 0), 0)
			},
			top: {
				height: Math.max(geo.origin.windowOffset.top, 0),
				width: geo.window.size.width
			}
		};
		
		while ($parent[0].tagName.toLowerCase() != 'html') {
			
			if ($parent.css('position') == 'fixed') {
				geo.origin.fixedLineage = true;
				break;
			}
			
			$parent = $parent.parent();
		}
		
		return geo;
	},
	
	/**
	 * Some options may need to be formated before being used
	 * 
	 * @returns {self}
	 * @private
	 */
	__optionsFormat: function() {
		
		if (typeof this.__options.animationDuration == 'number') {
			this.__options.animationDuration = [this.__options.animationDuration, this.__options.animationDuration];
		}
		
		if (typeof this.__options.delay == 'number') {
			this.__options.delay = [this.__options.delay, this.__options.delay];
		}
		
		if (typeof this.__options.delayTouch == 'number') {
			this.__options.delayTouch = [this.__options.delayTouch, this.__options.delayTouch];
		}
		
		if (typeof this.__options.theme == 'string') {
			this.__options.theme = [this.__options.theme];
		}
		
		// determine the future parent
		if (this.__options.parent === null) {
			this.__options.parent = $(env.window.document.body);
		}
		else if (typeof this.__options.parent == 'string') {
			this.__options.parent = $(this.__options.parent);
		}
		
		if (this.__options.trigger == 'hover') {
			
			this.__options.triggerOpen = {
				mouseenter: true,
				touchstart: true
			};
			
			this.__options.triggerClose = {
				mouseleave: true,
				originClick: true,
				touchleave: true
			};
		}
		else if (this.__options.trigger == 'click') {
			
			this.__options.triggerOpen = {
				click: true,
				tap: true
			};
			
			this.__options.triggerClose = {
				click: true,
				tap: true
			};
		}
		
		// for the plugins
		this._trigger('options');
		
		return this;
	},
	
	/**
	 * Schedules or cancels the garbage collector task
	 *
	 * @returns {self}
	 * @private
	 */
	__prepareGC: function() {
		
		var self = this;
		
		// in case the selfDestruction option has been changed by a method call
		if (self.__options.selfDestruction) {
			
			// the GC task
			self.__garbageCollector = setInterval(function() {
				
				var now = new Date().getTime();
				
				// forget the old events
				self.__touchEvents = $.grep(self.__touchEvents, function(event, i) {
					// 1 minute
					return now - event.time > 60000;
				});
				
				// auto-destruct if the origin is gone
				if (!bodyContains(self._$origin)) {
					
					self.close(function(){
						self.destroy();
					});
				}
			}, 20000);
		}
		else {
			clearInterval(self.__garbageCollector);
		}
		
		return self;
	},
	
	/**
	 * Sets listeners on the origin if the open triggers require them.
	 * Unlike the listeners set at opening time, these ones
	 * remain even when the tooltip is closed. It has been made a
	 * separate method so it can be called when the triggers are
	 * changed in the options. Closing is handled in _open()
	 * because of the bindings that may be needed on the tooltip
	 * itself
	 *
	 * @returns {self}
	 * @private
	 */
	__prepareOrigin: function() {
		
		var self = this;
		
		// in case we're resetting the triggers
		self._$origin.off('.'+ self.__namespace +'-triggerOpen');
		
		// if the device is touch capable, even if only mouse triggers
		// are asked, we need to listen to touch events to know if the mouse
		// events are actually emulated (so we can ignore them)
		if (env.hasTouchCapability) {
			
			self._$origin.on(
				'touchstart.'+ self.__namespace +'-triggerOpen ' +
				'touchend.'+ self.__namespace +'-triggerOpen ' +
				'touchcancel.'+ self.__namespace +'-triggerOpen',
				function(event){
					self._touchRecordEvent(event);
				}
			);
		}
		
		// mouse click and touch tap work the same way
		if (	self.__options.triggerOpen.click
			||	(self.__options.triggerOpen.tap && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerOpen.click) {
				eventNames += 'click.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerOpen.tap && env.hasTouchCapability) {
				eventNames += 'touchend.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				if (self._touchIsMeaningfulEvent(event)) {
					self._open(event);
				}
			});
		}
		
		// mouseenter and touch start work the same way
		if (	self.__options.triggerOpen.mouseenter
			||	(self.__options.triggerOpen.touchstart && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerOpen.mouseenter) {
				eventNames += 'mouseenter.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerOpen.touchstart && env.hasTouchCapability) {
				eventNames += 'touchstart.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				if (	self._touchIsTouchEvent(event)
					||	!self._touchIsEmulatedEvent(event)
				) {
					self.__pointerIsOverOrigin = true;
					self._openShortly(event);
				}
			});
		}
		
		// info for the mouseleave/touchleave close triggers when they use a delay
		if (	self.__options.triggerClose.mouseleave
			||	(self.__options.triggerClose.touchleave && env.hasTouchCapability)
		) {
			
			var eventNames = '';
			if (self.__options.triggerClose.mouseleave) {
				eventNames += 'mouseleave.'+ self.__namespace +'-triggerOpen ';
			}
			if (self.__options.triggerClose.touchleave && env.hasTouchCapability) {
				eventNames += 'touchend.'+ self.__namespace +'-triggerOpen touchcancel.'+ self.__namespace +'-triggerOpen';
			}
			
			self._$origin.on(eventNames, function(event) {
				
				if (self._touchIsMeaningfulEvent(event)) {
					self.__pointerIsOverOrigin = false;
				}
			});
		}
		
		return self;
	},
	
	/**
	 * Do the things that need to be done only once after the tooltip
	 * HTML element it has been created. It has been made a separate
	 * method so it can be called when options are changed. Remember
	 * that the tooltip may actually exist in the DOM before it is
	 * opened, and present after it has been closed: it's the display
	 * plugin that takes care of handling it.
	 * 
	 * @returns {self}
	 * @private
	 */
	__prepareTooltip: function() {
		
		var self = this,
			p = self.__options.interactive ? 'auto' : '';
		
		// this will be useful to know quickly if the tooltip is in
		// the DOM or not 
		self._$tooltip
			.attr('id', self.__namespace)
			.css({
				// pointer events
				'pointer-events': p,
				zIndex: self.__options.zIndex
			});
		
		// themes
		// remove the old ones and add the new ones
		$.each(self.__previousThemes, function(i, theme) {
			self._$tooltip.removeClass(theme);
		});
		$.each(self.__options.theme, function(i, theme) {
			self._$tooltip.addClass(theme);
		});
		
		self.__previousThemes = $.merge([], self.__options.theme);
		
		return self;
	},
	
	/**
	 * Handles the scroll on any of the parents of the origin (when the
	 * tooltip is open)
	 *
	 * @param {object} event
	 * @returns {self}
	 * @private
	 */
	__scrollHandler: function(event) {
		
		var self = this;
		
		if (self.__options.triggerClose.scroll) {
			self._close(event);
		}
		else {
			
			// if the origin or tooltip have been removed: do nothing, the tracker will
			// take care of it later
			if (bodyContains(self._$origin) && bodyContains(self._$tooltip)) {
				
				var geo = null;
				
				// if the scroll happened on the window
				if (event.target === env.window.document) {
					
					// if the origin has a fixed lineage, window scroll will have no
					// effect on its position nor on the position of the tooltip
					if (!self.__Geometry.origin.fixedLineage) {
						
						// we don't need to do anything unless repositionOnScroll is true
						// because the tooltip will already have moved with the window
						// (and of course with the origin)
						if (self.__options.repositionOnScroll) {
							self.reposition(event);
						}
					}
				}
				// if the scroll happened on another parent of the tooltip, it means
				// that it's in a scrollable area and now needs to have its position
				// adjusted or recomputed, depending ont the repositionOnScroll
				// option. Also, if the origin is partly hidden due to a parent that
				// hides its overflow, we'll just hide (not close) the tooltip.
				else {
					
					geo = self.__geometry();
					
					var overflows = false;
					
					// a fixed position origin is not affected by the overflow hiding
					// of a parent
					if (self._$origin.css('position') != 'fixed') {
						
						self.__$originParents.each(function(i, el) {
							
							var $el = $(el),
								overflowX = $el.css('overflow-x'),
								overflowY = $el.css('overflow-y');
							
							if (overflowX != 'visible' || overflowY != 'visible') {
								
								var bcr = el.getBoundingClientRect();
								
								if (overflowX != 'visible') {
									
									if (	geo.origin.windowOffset.left < bcr.left
										||	geo.origin.windowOffset.right > bcr.right
									) {
										overflows = true;
										return false;
									}
								}
								
								if (overflowY != 'visible') {
									
									if (	geo.origin.windowOffset.top < bcr.top
										||	geo.origin.windowOffset.bottom > bcr.bottom
									) {
										overflows = true;
										return false;
									}
								}
							}
							
							// no need to go further if fixed, for the same reason as above
							if ($el.css('position') == 'fixed') {
								return false;
							}
						});
					}
					
					if (overflows) {
						self._$tooltip.css('visibility', 'hidden');
					}
					else {
						
						self._$tooltip.css('visibility', 'visible');
						
						// reposition
						if (self.__options.repositionOnScroll) {
							self.reposition(event);
						}
						// or just adjust offset
						else {
							
							// we have to use offset and not windowOffset because this way,
							// only the scroll distance of the scrollable areas are taken into
							// account (the scrolltop value of the main window must be
							// ignored since the tooltip already moves with it)
							var offsetLeft = geo.origin.offset.left - self.__Geometry.origin.offset.left,
								offsetTop = geo.origin.offset.top - self.__Geometry.origin.offset.top;
							
							// add the offset to the position initially computed by the display plugin
							self._$tooltip.css({
								left: self.__lastPosition.coord.left + offsetLeft,
								top: self.__lastPosition.coord.top + offsetTop
							});
						}
					}
				}
				
				self._trigger({
					type: 'scroll',
					event: event,
					geo: geo
				});
			}
		}
		
		return self;
	},
	
	/**
	 * Changes the state of the tooltip
	 *
	 * @param {string} state
	 * @returns {self}
	 * @private
	 */
	__stateSet: function(state) {
		
		this.__state = state;
		
		this._trigger({
			type: 'state',
			state: state
		});
		
		return this;
	},
	
	/**
	 * Clear appearance timeouts
	 *
	 * @returns {self}
	 * @private
	 */
	__timeoutsClear: function() {
		
		// there is only one possible open timeout: the delayed opening
		// when the mouseenter/touchstart open triggers are used
		clearTimeout(this.__timeouts.open);
		this.__timeouts.open = null;
		
		// ... but several close timeouts: the delayed closing when the
		// mouseleave close trigger is used and the timer option
		$.each(this.__timeouts.close, function(i, timeout) {
			clearTimeout(timeout);
		});
		this.__timeouts.close = [];
		
		return this;
	},
	
	/**
	 * Start the tracker that will make checks at regular intervals
	 * 
	 * @returns {self}
	 * @private
	 */
	__trackerStart: function() {
		
		var self = this,
			$content = self._$tooltip.find('.tooltipster-content');
		
		// get the initial content size
		if (self.__options.trackTooltip) {
			self.__contentBcr = $content[0].getBoundingClientRect();
		}
		
		self.__tracker = setInterval(function() {
			
			// if the origin or tooltip elements have been removed.
			// Note: we could destroy the instance now if the origin has
			// been removed but we'll leave that task to our garbage collector
			if (!bodyContains(self._$origin) || !bodyContains(self._$tooltip)) {
				self._close();
			}
			// if everything is alright
			else {
				
				// compare the former and current positions of the origin to reposition
				// the tooltip if need be
				if (self.__options.trackOrigin) {
					
					var g = self.__geometry(),
						identical = false;
					
					// compare size first (a change requires repositioning too)
					if (areEqual(g.origin.size, self.__Geometry.origin.size)) {
						
						// for elements that have a fixed lineage (see __geometry()), we track the
						// top and left properties (relative to window)
						if (self.__Geometry.origin.fixedLineage) {
							if (areEqual(g.origin.windowOffset, self.__Geometry.origin.windowOffset)) {
								identical = true;
							}
						}
						// otherwise, track total offset (relative to document)
						else {
							if (areEqual(g.origin.offset, self.__Geometry.origin.offset)) {
								identical = true;
							}
						}
					}
					
					if (!identical) {
						
						// close the tooltip when using the mouseleave close trigger
						// (see https://github.com/iamceege/tooltipster/pull/253)
						if (self.__options.triggerClose.mouseleave) {
							self._close();
						}
						else {
							self.reposition();
						}
					}
				}
				
				if (self.__options.trackTooltip) {
					
					var currentBcr = $content[0].getBoundingClientRect();
					
					if (	currentBcr.height !== self.__contentBcr.height
						||	currentBcr.width !== self.__contentBcr.width
					) {
						self.reposition();
						self.__contentBcr = currentBcr;
					}
				}
			}
		}, self.__options.trackerInterval);
		
		return self;
	},
	
	/**
	 * Closes the tooltip (after the closing delay)
	 * 
	 * @param event
	 * @param callback
	 * @param force Set to true to override a potential refusal of the user's function
	 * @returns {self}
	 * @protected
	 */
	_close: function(event, callback, force) {
		
		var self = this,
			ok = true;
		
		self._trigger({
			type: 'close',
			event: event,
			stop: function() {
				ok = false;
			}
		});
		
		// a destroying tooltip (force == true) may not refuse to close
		if (ok || force) {
			
			// save the method custom callback and cancel any open method custom callbacks
			if (callback) self.__callbacks.close.push(callback);
			self.__callbacks.open = [];
			
			// clear open/close timeouts
			self.__timeoutsClear();
			
			var finishCallbacks = function() {
				
				// trigger any close method custom callbacks and reset them
				$.each(self.__callbacks.close, function(i,c) {
					c.call(self, self, {
						event: event,
						origin: self._$origin[0]
					});
				});
				
				self.__callbacks.close = [];
			};
			
			if (self.__state != 'closed') {
				
				var necessary = true,
					d = new Date(),
					now = d.getTime(),
					newClosingTime = now + self.__options.animationDuration[1];
				
				// the tooltip may already already be disappearing, but if a new
				// call to close() is made after the animationDuration was changed
				// to 0 (for example), we ought to actually close it sooner than
				// previously scheduled. In that case it should be noted that the
				// browser will not adapt the animation duration to the new
				// animationDuration that was set after the start of the closing
				// animation.
				// Note: the same thing could be considered at opening, but is not
				// really useful since the tooltip is actually opened immediately
				// upon a call to _open(). Since it would not make the opening
				// animation finish sooner, its sole impact would be to trigger the
				// state event and the open callbacks sooner than the actual end of
				// the opening animation, which is not great.
				if (self.__state == 'disappearing') {
					
					if (	newClosingTime > self.__closingTime
						// in case closing is actually overdue because the script
						// execution was suspended. See #679
						&&	self.__options.animationDuration[1] > 0
					) {
						necessary = false;
					}
				}
				
				if (necessary) {
					
					self.__closingTime = newClosingTime;
					
					if (self.__state != 'disappearing') {
						self.__stateSet('disappearing');
					}
					
					var finish = function() {
						
						// stop the tracker
						clearInterval(self.__tracker);
						
						// a "beforeClose" option has been asked several times but would
						// probably useless since the content element is still accessible
						// via ::content(), and because people can always use listeners
						// inside their content to track what's going on. For the sake of
						// simplicity, this has been denied. Bur for the rare people who
						// really need the option (for old browsers or for the case where
						// detaching the content is actually destructive, for file or
						// password inputs for example), this event will do the work.
						self._trigger({
							type: 'closing',
							event: event
						});
						
						// unbind listeners which are no longer needed
						
						self._$tooltip
							.off('.'+ self.__namespace +'-triggerClose')
							.removeClass('tooltipster-dying');
						
						// orientationchange, scroll and resize listeners
						$(env.window).off('.'+ self.__namespace +'-triggerClose');
						
						// scroll listeners
						self.__$originParents.each(function(i, el) {
							$(el).off('scroll.'+ self.__namespace +'-triggerClose');
						});
						// clear the array to prevent memory leaks
						self.__$originParents = null;
						
						$(env.window.document.body).off('.'+ self.__namespace +'-triggerClose');
						
						self._$origin.off('.'+ self.__namespace +'-triggerClose');
						
						self._off('dismissable');
						
						// a plugin that would like to remove the tooltip from the
						// DOM when closed should bind on this
						self.__stateSet('closed');
						
						// trigger event
						self._trigger({
							type: 'after',
							event: event
						});
						
						// call our constructor custom callback function
						if (self.__options.functionAfter) {
							self.__options.functionAfter.call(self, self, {
								event: event,
								origin: self._$origin[0]
							});
						}
						
						// call our method custom callbacks functions
						finishCallbacks();
					};
					
					if (env.hasTransitions) {
						
						self._$tooltip.css({
							'-moz-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-ms-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-o-animation-duration': self.__options.animationDuration[1] + 'ms',
							'-webkit-animation-duration': self.__options.animationDuration[1] + 'ms',
							'animation-duration': self.__options.animationDuration[1] + 'ms',
							'transition-duration': self.__options.animationDuration[1] + 'ms'
						});
						
						self._$tooltip
							// clear both potential open and close tasks
							.clearQueue()
							.removeClass('tooltipster-show')
							// for transitions only
							.addClass('tooltipster-dying');
						
						if (self.__options.animationDuration[1] > 0) {
							self._$tooltip.delay(self.__options.animationDuration[1]);
						}
						
						self._$tooltip.queue(finish);
					}
					else {
						
						self._$tooltip
							.stop()
							.fadeOut(self.__options.animationDuration[1], finish);
					}
				}
			}
			// if the tooltip is already closed, we still need to trigger
			// the method custom callbacks
			else {
				finishCallbacks();
			}
		}
		
		return self;
	},
	
	/**
	 * For internal use by plugins, if needed
	 * 
	 * @returns {self}
	 * @protected
	 */
	_off: function() {
		this.__$emitterPrivate.off.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @returns {self}
	 * @protected
	 */
	_on: function() {
		this.__$emitterPrivate.on.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * For internal use by plugins, if needed
	 *
	 * @returns {self}
	 * @protected
	 */
	_one: function() {
		this.__$emitterPrivate.one.apply(this.__$emitterPrivate, Array.prototype.slice.apply(arguments));
		return this;
	},
	
	/**
	 * Opens the tooltip right away.
	 *
	 * @param event
	 * @param callback Will be called when the opening animation is over
	 * @returns {self}
	 * @protected
	 */
	_open: function(event, callback) {
		
		var self = this;
		
		// if the destruction process has not begun and if this was not
		// triggered by an unwanted emulated click event
		if (!self.__destroying) {
			
			// check that the origin is still in the DOM
			if (	bodyContains(self._$origin)
				// if the tooltip is enabled
				&&	self.__enabled
			) {
				
				var ok = true;
				
				// if the tooltip is not open yet, we need to call functionBefore.
				// otherwise we can jst go on
				if (self.__state == 'closed') {
					
					// trigger an event. The event.stop function allows the callback
					// to prevent the opening of the tooltip
					self._trigger({
						type: 'before',
						event: event,
						stop: function() {
							ok = false;
						}
					});
					
					if (ok && self.__options.functionBefore) {
						
						// call our custom function before continuing
						ok = self.__options.functionBefore.call(self, self, {
							event: event,
							origin: self._$origin[0]
						});
					}
				}
				
				if (ok !== false) {
					
					// if there is some content
					if (self.__Content !== null) {
						
						// save the method callback and cancel close method callbacks
						if (callback) {
							self.__callbacks.open.push(callback);
						}
						self.__callbacks.close = [];
						
						// get rid of any appearance timeouts
						self.__timeoutsClear();
						
						var extraTime,
							finish = function() {
								
								if (self.__state != 'stable') {
									self.__stateSet('stable');
								}
								
								// trigger any open method custom callbacks and reset them
								$.each(self.__callbacks.open, function(i,c) {
									c.call(self, self, {
										origin: self._$origin[0],
										tooltip: self._$tooltip[0]
									});
								});
								
								self.__callbacks.open = [];
							};
						
						// if the tooltip is already open
						if (self.__state !== 'closed') {
							
							// the timer (if any) will start (or restart) right now
							extraTime = 0;
							
							// if it was disappearing, cancel that
							if (self.__state === 'disappearing') {
								
								self.__stateSet('appearing');
								
								if (env.hasTransitions) {
									
									self._$tooltip
										.clearQueue()
										.removeClass('tooltipster-dying')
										.addClass('tooltipster-show');
									
									if (self.__options.animationDuration[0] > 0) {
										self._$tooltip.delay(self.__options.animationDuration[0]);
									}
									
									self._$tooltip.queue(finish);
								}
								else {
									// in case the tooltip was currently fading out, bring it back
									// to life
									self._$tooltip
										.stop()
										.fadeIn(finish);
								}
							}
							// if the tooltip is already open, we still need to trigger the method
							// custom callback
							else if (self.__state == 'stable') {
								finish();
							}
						}
						// if the tooltip isn't already open, open it
						else {
							
							// a plugin must bind on this and store the tooltip in this._$tooltip
							self.__stateSet('appearing');
							
							// the timer (if any) will start when the tooltip has fully appeared
							// after its transition
							extraTime = self.__options.animationDuration[0];
							
							// insert the content inside the tooltip
							self.__contentInsert();
							
							// reposition the tooltip and attach to the DOM
							self.reposition(event, true);
							
							// animate in the tooltip. If the display plugin wants no css
							// animations, it may override the animation option with a
							// dummy value that will produce no effect
							if (env.hasTransitions) {
								
								// note: there seems to be an issue with start animations which
								// are randomly not played on fast devices in both Chrome and FF,
								// couldn't find a way to solve it yet. It seems that applying
								// the classes before appending to the DOM helps a little, but
								// it messes up some CSS transitions. The issue almost never
								// happens when delay[0]==0 though
								self._$tooltip
									.addClass('tooltipster-'+ self.__options.animation)
									.addClass('tooltipster-initial')
									.css({
										'-moz-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-ms-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-o-animation-duration': self.__options.animationDuration[0] + 'ms',
										'-webkit-animation-duration': self.__options.animationDuration[0] + 'ms',
										'animation-duration': self.__options.animationDuration[0] + 'ms',
										'transition-duration': self.__options.animationDuration[0] + 'ms'
									});
								
								setTimeout(
									function() {
										
										// a quick hover may have already triggered a mouseleave
										if (self.__state != 'closed') {
											
											self._$tooltip
												.addClass('tooltipster-show')
												.removeClass('tooltipster-initial');
											
											if (self.__options.animationDuration[0] > 0) {
												self._$tooltip.delay(self.__options.animationDuration[0]);
											}
											
											self._$tooltip.queue(finish);
										}
									},
									0
								);
							}
							else {
								
								// old browsers will have to live with this
								self._$tooltip
									.css('display', 'none')
									.fadeIn(self.__options.animationDuration[0], finish);
							}
							
							// checks if the origin is removed while the tooltip is open
							self.__trackerStart();
							
							// NOTE: the listeners below have a '-triggerClose' namespace
							// because we'll remove them when the tooltip closes (unlike
							// the '-triggerOpen' listeners). So some of them are actually
							// not about close triggers, rather about positioning.
							
							$(env.window)
								// reposition on resize
								.on('resize.'+ self.__namespace +'-triggerClose', function(e) {
									
									var $ae = $(document.activeElement);
									
									// reposition only if the resize event was not triggered upon the opening
									// of a virtual keyboard due to an input field being focused within the tooltip
									// (otherwise the repositioning would lose the focus)
									if (	(!$ae.is('input') && !$ae.is('textarea'))
										||	!$.contains(self._$tooltip[0], $ae[0])
									) {
										self.reposition(e);
									}
								})
								// same as below for parents
								.on('scroll.'+ self.__namespace +'-triggerClose', function(e) {
									self.__scrollHandler(e);
								});
							
							self.__$originParents = self._$origin.parents();
							
							// scrolling may require the tooltip to be moved or even
							// repositioned in some cases
							self.__$originParents.each(function(i, parent) {
								
								$(parent).on('scroll.'+ self.__namespace +'-triggerClose', function(e) {
									self.__scrollHandler(e);
								});
							});
							
							if (	self.__options.triggerClose.mouseleave
								||	(self.__options.triggerClose.touchleave && env.hasTouchCapability)
							) {
								
								// we use an event to allow users/plugins to control when the mouseleave/touchleave
								// close triggers will come to action. It allows to have more triggering elements
								// than just the origin and the tooltip for example, or to cancel/delay the closing,
								// or to make the tooltip interactive even if it wasn't when it was open, etc.
								self._on('dismissable', function(event) {
									
									if (event.dismissable) {
										
										if (event.delay) {
											
											timeout = setTimeout(function() {
												// event.event may be undefined
												self._close(event.event);
											}, event.delay);
											
											self.__timeouts.close.push(timeout);
										}
										else {
											self._close(event);
										}
									}
									else {
										clearTimeout(timeout);
									}
								});
								
								// now set the listeners that will trigger 'dismissable' events
								var $elements = self._$origin,
									eventNamesIn = '',
									eventNamesOut = '',
									timeout = null;
								
								// if we have to allow interaction, bind on the tooltip too
								if (self.__options.interactive) {
									$elements = $elements.add(self._$tooltip);
								}
								
								if (self.__options.triggerClose.mouseleave) {
									eventNamesIn += 'mouseenter.'+ self.__namespace +'-triggerClose ';
									eventNamesOut += 'mouseleave.'+ self.__namespace +'-triggerClose ';
								}
								if (self.__options.triggerClose.touchleave && env.hasTouchCapability) {
									eventNamesIn += 'touchstart.'+ self.__namespace +'-triggerClose';
									eventNamesOut += 'touchend.'+ self.__namespace +'-triggerClose touchcancel.'+ self.__namespace +'-triggerClose';
								}
								
								$elements
									// close after some time spent outside of the elements
									.on(eventNamesOut, function(event) {
										
										// it's ok if the touch gesture ended up to be a swipe,
										// it's still a "touch leave" situation
										if (	self._touchIsTouchEvent(event)
											||	!self._touchIsEmulatedEvent(event)
										) {
											
											var delay = (event.type == 'mouseleave') ?
												self.__options.delay :
												self.__options.delayTouch;
											
											self._trigger({
												delay: delay[1],
												dismissable: true,
												event: event,
												type: 'dismissable'
											});
										}
									})
									// suspend the mouseleave timeout when the pointer comes back
									// over the elements
									.on(eventNamesIn, function(event) {
										
										// it's also ok if the touch event is a swipe gesture
										if (	self._touchIsTouchEvent(event)
											||	!self._touchIsEmulatedEvent(event)
										) {
											self._trigger({
												dismissable: false,
												event: event,
												type: 'dismissable'
											});
										}
									});
							}
							
							// close the tooltip when the origin gets a mouse click (common behavior of
							// native tooltips)
							if (self.__options.triggerClose.originClick) {
								
								self._$origin.on('click.'+ self.__namespace + '-triggerClose', function(event) {
									
									// we could actually let a tap trigger this but this feature just
									// does not make sense on touch devices
									if (	!self._touchIsTouchEvent(event)
										&&	!self._touchIsEmulatedEvent(event)
									) {
										self._close(event);
									}
								});
							}
							
							// set the same bindings for click and touch on the body to close the tooltip
							if (	self.__options.triggerClose.click
								||	(self.__options.triggerClose.tap && env.hasTouchCapability)
							) {
								
								// don't set right away since the click/tap event which triggered this method
								// (if it was a click/tap) is going to bubble up to the body, we don't want it
								// to close the tooltip immediately after it opened
								setTimeout(function() {
									
									if (self.__state != 'closed') {
										
										var eventNames = '',
											$body = $(env.window.document.body);
										
										if (self.__options.triggerClose.click) {
											eventNames += 'click.'+ self.__namespace +'-triggerClose ';
										}
										if (self.__options.triggerClose.tap && env.hasTouchCapability) {
											eventNames += 'touchend.'+ self.__namespace +'-triggerClose';
										}
										
										$body.on(eventNames, function(event) {
											
											if (self._touchIsMeaningfulEvent(event)) {
												
												self._touchRecordEvent(event);
												
												if (!self.__options.interactive || !$.contains(self._$tooltip[0], event.target)) {
													self._close(event);
												}
											}
										});
										
										// needed to detect and ignore swiping
										if (self.__options.triggerClose.tap && env.hasTouchCapability) {
											
											$body.on('touchstart.'+ self.__namespace +'-triggerClose', function(event) {
												self._touchRecordEvent(event);
											});
										}
									}
								}, 0);
							}
							
							self._trigger('ready');
							
							// call our custom callback
							if (self.__options.functionReady) {
								self.__options.functionReady.call(self, self, {
									origin: self._$origin[0],
									tooltip: self._$tooltip[0]
								});
							}
						}
						
						// if we have a timer set, let the countdown begin
						if (self.__options.timer > 0) {
							
							var timeout = setTimeout(function() {
								self._close();
							}, self.__options.timer + extraTime);
							
							self.__timeouts.close.push(timeout);
						}
					}
				}
			}
		}
		
		return self;
	},
	
	/**
	 * When using the mouseenter/touchstart open triggers, this function will
	 * schedule the opening of the tooltip after the delay, if there is one
	 *
	 * @param event
	 * @returns {self}
	 * @protected
 	 */
	_openShortly: function(event) {
		
		var self = this,
			ok = true;
		
		if (self.__state != 'stable' && self.__state != 'appearing') {
			
			// if a timeout is not already running
			if (!self.__timeouts.open) {
				
				self._trigger({
					type: 'start',
					event: event,
					stop: function() {
						ok = false;
					}
				});
				
				if (ok) {
					
					var delay = (event.type.indexOf('touch') == 0) ?
						self.__options.delayTouch :
						self.__options.delay;
					
					if (delay[0]) {
						
						self.__timeouts.open = setTimeout(function() {
							
							self.__timeouts.open = null;
							
							// open only if the pointer (mouse or touch) is still over the origin.
							// The check on the "meaningful event" can only be made here, after some
							// time has passed (to know if the touch was a swipe or not)
							if (self.__pointerIsOverOrigin && self._touchIsMeaningfulEvent(event)) {
								
								// signal that we go on
								self._trigger('startend');
								
								self._open(event);
							}
							else {
								// signal that we cancel
								self._trigger('startcancel');
							}
						}, delay[0]);
					}
					else {
						// signal that we go on
						self._trigger('startend');
						
						self._open(event);
					}
				}
			}
		}
		
		return self;
	},
	
	/**
	 * Meant for plugins to get their options
	 * 
	 * @param {string} pluginName The name of the plugin that asks for its options
	 * @param {object} defaultOptions The default options of the plugin
	 * @returns {object} The options
	 * @protected
	 */
	_optionsExtract: function(pluginName, defaultOptions) {
		
		var self = this,
			options = $.extend(true, {}, defaultOptions);
		
		// if the plugin options were isolated in a property named after the
		// plugin, use them (prevents conflicts with other plugins)
		var pluginOptions = self.__options[pluginName];
		
		// if not, try to get them as regular options
		if (!pluginOptions){
			
			pluginOptions = {};
			
			$.each(defaultOptions, function(optionName, value) {
				
				var o = self.__options[optionName];
				
				if (o !== undefined) {
					pluginOptions[optionName] = o;
				}
			});
		}
		
		// let's merge the default options and the ones that were provided. We'd want
		// to do a deep copy but not let jQuery merge arrays, so we'll do a shallow
		// extend on two levels, that will be enough if options are not more than 1
		// level deep
		$.each(options, function(optionName, value) {
			
			if (pluginOptions[optionName] !== undefined) {
				
				if ((		typeof value == 'object'
						&&	!(value instanceof Array)
						&&	value != null
					)
					&&
					(		typeof pluginOptions[optionName] == 'object'
						&&	!(pluginOptions[optionName] instanceof Array)
						&&	pluginOptions[optionName] != null
					)
				) {
					$.extend(options[optionName], pluginOptions[optionName]);
				}
				else {
					options[optionName] = pluginOptions[optionName];
				}
			}
		});
		
		return options;
	},
	
	/**
	 * Used at instantiation of the plugin, or afterwards by plugins that activate themselves
	 * on existing instances
	 * 
	 * @param {object} pluginName
	 * @returns {self}
	 * @protected
	 */
	_plug: function(pluginName) {
		
		var plugin = $.tooltipster._plugin(pluginName);
		
		if (plugin) {
			
			// if there is a constructor for instances
			if (plugin.instance) {
				
				// proxy non-private methods on the instance to allow new instance methods
				$.tooltipster.__bridge(plugin.instance, this, plugin.name);
			}
		}
		else {
			throw new Error('The "'+ pluginName +'" plugin is not defined');
		}
		
		return this;
	},
	
	/**
	 * This will return true if the event is a mouse event which was
	 * emulated by the browser after a touch event. This allows us to
	 * really dissociate mouse and touch triggers.
	 * 
	 * There is a margin of error if a real mouse event is fired right
	 * after (within the delay shown below) a touch event on the same
	 * element, but hopefully it should not happen often.
	 * 
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsEmulatedEvent: function(event) {
		
		var isEmulated = false,
			now = new Date().getTime();
		
		for (var i = this.__touchEvents.length - 1; i >= 0; i--) {
			
			var e = this.__touchEvents[i];
			
			// delay, in milliseconds. It's supposed to be 300ms in
			// most browsers (350ms on iOS) to allow a double tap but
			// can be less (check out FastClick for more info)
			if (now - e.time < 500) {
				
				if (e.target === event.target) {
					isEmulated = true;
				}
			}
			else {
				break;
			}
		}
		
		return isEmulated;
	},
	
	/**
	 * Returns false if the event was an emulated mouse event or
	 * a touch event involved in a swipe gesture.
	 * 
	 * @param {object} event
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsMeaningfulEvent: function(event) {
		return (
				(this._touchIsTouchEvent(event) && !this._touchSwiped(event.target))
			||	(!this._touchIsTouchEvent(event) && !this._touchIsEmulatedEvent(event))
		);
	},
	
	/**
	 * Checks if an event is a touch event
	 * 
	 * @param {object} event
	 * @returns {boolean}
	 * @protected
	 */
	_touchIsTouchEvent: function(event){
		return event.type.indexOf('touch') == 0;
	},
	
	/**
	 * Store touch events for a while to detect swiping and emulated mouse events
	 * 
	 * @param {object} event
	 * @returns {self}
	 * @protected
	 */
	_touchRecordEvent: function(event) {
		
		if (this._touchIsTouchEvent(event)) {
			event.time = new Date().getTime();
			this.__touchEvents.push(event);
		}
		
		return this;
	},
	
	/**
	 * Returns true if a swipe happened after the last touchstart event fired on
	 * event.target.
	 * 
	 * We need to differentiate a swipe from a tap before we let the event open
	 * or close the tooltip. A swipe is when a touchmove (scroll) event happens
	 * on the body between the touchstart and the touchend events of an element.
	 * 
	 * @param {object} target The HTML element that may have triggered the swipe
	 * @returns {boolean}
	 * @protected
	 */
	_touchSwiped: function(target) {
		
		var swiped = false;
		
		for (var i = this.__touchEvents.length - 1; i >= 0; i--) {
			
			var e = this.__touchEvents[i];
			
			if (e.type == 'touchmove') {
				swiped = true;
				break;
			}
			else if (
				e.type == 'touchstart'
				&&	target === e.target
			) {
				break;
			}
		}
		
		return swiped;
	},
	
	/**
	 * Triggers an event on the instance emitters
	 * 
	 * @returns {self}
	 * @protected
	 */
	_trigger: function() {
		
		var args = Array.prototype.slice.apply(arguments);
		
		if (typeof args[0] == 'string') {
			args[0] = { type: args[0] };
		}
		
		// add properties to the event
		args[0].instance = this;
		args[0].origin = this._$origin ? this._$origin[0] : null;
		args[0].tooltip = this._$tooltip ? this._$tooltip[0] : null;
		
		// note: the order of emitters matters
		this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate, args);
		$.tooltipster._trigger.apply($.tooltipster, args);
		this.__$emitterPublic.trigger.apply(this.__$emitterPublic, args);
		
		return this;
	},
	
	/**
	 * Deactivate a plugin on this instance
	 * 
	 * @returns {self}
	 * @protected
	 */
	_unplug: function(pluginName) {
		
		var self = this;
		
		// if the plugin has been activated on this instance
		if (self[pluginName]) {
			
			var plugin = $.tooltipster._plugin(pluginName);
			
			// if there is a constructor for instances
			if (plugin.instance) {
				
				// unbridge
				$.each(plugin.instance, function(methodName, fn) {
					
					// if the method exists (privates methods do not) and comes indeed from
					// this plugin (may be missing or come from a conflicting plugin).
					if (	self[methodName]
						&&	self[methodName].bridged === self[pluginName]
					) {
						delete self[methodName];
					}
				});
			}
			
			// destroy the plugin
			if (self[pluginName].__destroy) {
				self[pluginName].__destroy();
			}
			
			// remove the reference to the plugin instance
			delete self[pluginName];
		}
		
		return self;
	},
	
	/**
	 * @see self::_close
	 * @returns {self}
	 * @public
	 */
	close: function(callback) {
		
		if (!this.__destroyed) {
			this._close(null, callback);
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Sets or gets the content of the tooltip
	 * 
	 * @returns {mixed|self}
	 * @public
	 */
	content: function(content) {
		
		var self = this;
		
		// getter method
		if (content === undefined) {
			return self.__Content;
		}
		// setter method
		else {
			
			if (!self.__destroyed) {
				
				// change the content
				self.__contentSet(content);
				
				if (self.__Content !== null) {
					
					// update the tooltip if it is open
					if (self.__state !== 'closed') {
						
						// reset the content in the tooltip
						self.__contentInsert();
						
						// reposition and resize the tooltip
						self.reposition();
						
						// if we want to play a little animation showing the content changed
						if (self.__options.updateAnimation) {
							
							if (env.hasTransitions) {
								
								// keep the reference in the local scope
								var animation = self.__options.updateAnimation;
								
								self._$tooltip.addClass('tooltipster-update-'+ animation);
								
								// remove the class after a while. The actual duration of the
								// update animation may be shorter, it's set in the CSS rules
								setTimeout(function() {
									
									if (self.__state != 'closed') {
										
										self._$tooltip.removeClass('tooltipster-update-'+ animation);
									}
								}, 1000);
							}
							else {
								self._$tooltip.fadeTo(200, 0.5, function() {
									if (self.__state != 'closed') {
										self._$tooltip.fadeTo(200, 1);
									}
								});
							}
						}
					}
				}
				else {
					self._close();
				}
			}
			else {
				self.__destroyError();
			}
			
			return self;
		}
	},
	
	/**
	 * Destroys the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	destroy: function() {
		
		var self = this;
		
		if (!self.__destroyed) {
			
			if(self.__state != 'closed'){
				
				// no closing delay
				self.option('animationDuration', 0)
					// force closing
					._close(null, null, true);
			}
			else {
				// there might be an open timeout still running
				self.__timeoutsClear();
			}
			
			// send event
			self._trigger('destroy');
			
			self.__destroyed = true;
			
			self._$origin
				.removeData(self.__namespace)
				// remove the open trigger listeners
				.off('.'+ self.__namespace +'-triggerOpen');
			
			// remove the touch listener
			$(env.window.document.body).off('.' + self.__namespace +'-triggerOpen');
			
			var ns = self._$origin.data('tooltipster-ns');
			
			// if the origin has been removed from DOM, its data may
			// well have been destroyed in the process and there would
			// be nothing to clean up or restore
			if (ns) {
				
				// if there are no more tooltips on this element
				if (ns.length === 1) {
					
					// optional restoration of a title attribute
					var title = null;
					if (self.__options.restoration == 'previous') {
						title = self._$origin.data('tooltipster-initialTitle');
					}
					else if (self.__options.restoration == 'current') {
						
						// old school technique to stringify when outerHTML is not supported
						title = (typeof self.__Content == 'string') ?
							self.__Content :
							$('<div></div>').append(self.__Content).html();
					}
					
					if (title) {
						self._$origin.attr('title', title);
					}
					
					// final cleaning
					
					self._$origin.removeClass('tooltipstered');
					
					self._$origin
						.removeData('tooltipster-ns')
						.removeData('tooltipster-initialTitle');
				}
				else {
					// remove the instance namespace from the list of namespaces of
					// tooltips present on the element
					ns = $.grep(ns, function(el, i) {
						return el !== self.__namespace;
					});
					self._$origin.data('tooltipster-ns', ns);
				}
			}
			
			// last event
			self._trigger('destroyed');
			
			// unbind private and public event listeners
			self._off();
			self.off();
			
			// remove external references, just in case
			self.__Content = null;
			self.__$emitterPrivate = null;
			self.__$emitterPublic = null;
			self.__options.parent = null;
			self._$origin = null;
			self._$tooltip = null;
			
			// make sure the object is no longer referenced in there to prevent
			// memory leaks
			$.tooltipster.__instancesLatestArr = $.grep($.tooltipster.__instancesLatestArr, function(el, i) {
				return self !== el;
			});
			
			clearInterval(self.__garbageCollector);
		}
		else {
			self.__destroyError();
		}
		
		// we return the scope rather than true so that the call to
		// .tooltipster('destroy') actually returns the matched elements
		// and applies to all of them
		return self;
	},
	
	/**
	 * Disables the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	disable: function() {
		
		if (!this.__destroyed) {
			
			// close first, in case the tooltip would not disappear on
			// its own (no close trigger)
			this._close();
			this.__enabled = false;
			
			return this;
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Returns the HTML element of the origin
	 *
	 * @returns {self}
	 * @public
	 */
	elementOrigin: function() {
		
		if (!this.__destroyed) {
			return this._$origin[0];
		}
		else {
			this.__destroyError();
		}
	},
	
	/**
	 * Returns the HTML element of the tooltip
	 *
	 * @returns {self}
	 * @public
	 */
	elementTooltip: function() {
		return this._$tooltip ? this._$tooltip[0] : null;
	},
	
	/**
	 * Enables the tooltip
	 * 
	 * @returns {self}
	 * @public
	 */
	enable: function() {
		this.__enabled = true;
		return this;
	},
	
	/**
	 * Alias, deprecated in 4.0.0
	 * 
	 * @param {function} callback
	 * @returns {self}
	 * @public
	 */
	hide: function(callback) {
		return this.close(callback);
	},
	
	/**
	 * Returns the instance
	 * 
	 * @returns {self}
	 * @public
	 */
	instance: function() {
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_off() instead)
	 * 
	 * @returns {self}
	 * @public
	 */
	off: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.off.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins (use ::_on() instead)
	 *
	 * @returns {self}
	 * @public
	 */
	on: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.on.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * For public use only, not to be used by plugins
	 *
	 * @returns {self}
	 * @public
	 */
	one: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.one.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * @see self::_open
	 * @returns {self}
	 * @public
	 */
	open: function(callback) {
		
		if (!this.__destroyed) {
			this._open(null, callback);
		}
		else {
			this.__destroyError();
		}
		
		return this;
	},
	
	/**
	 * Get or set options. For internal use and advanced users only.
	 * 
	 * @param {string} o Option name
	 * @param {mixed} val optional A new value for the option
	 * @return {mixed|self} If val is omitted, the value of the option
	 * is returned, otherwise the instance itself is returned
	 * @public
	 */ 
	option: function(o, val) {
		
		// getter
		if (val === undefined) {
			return this.__options[o];
		}
		// setter
		else {
			
			if (!this.__destroyed) {
				
				// change value
				this.__options[o] = val;
				
				// format
				this.__optionsFormat();
				
				// re-prepare the triggers if needed
				if ($.inArray(o, ['trigger', 'triggerClose', 'triggerOpen']) >= 0) {
					this.__prepareOrigin();
				}
				
				if (o === 'selfDestruction') {
					this.__prepareGC();
				}
			}
			else {
				this.__destroyError();
			}
			
			return this;
		}
	},
	
	/**
	 * This method is in charge of setting the position and size properties of the tooltip.
	 * All the hard work is delegated to the display plugin.
	 * Note: The tooltip may be detached from the DOM at the moment the method is called 
	 * but must be attached by the end of the method call.
	 * 
	 * @param {object} event For internal use only. Defined if an event such as
	 * window resizing triggered the repositioning
	 * @param {boolean} tooltipIsDetached For internal use only. Set this to true if you
	 * know that the tooltip not being in the DOM is not an issue (typically when the
	 * tooltip element has just been created but has not been added to the DOM yet).
	 * @returns {self}
	 * @public
	 */
	reposition: function(event, tooltipIsDetached) {
		
		var self = this;
		
		if (!self.__destroyed) {
			
			// if the tooltip is still open and the origin is still in the DOM
			if (self.__state != 'closed' && bodyContains(self._$origin)) {
				
				// if the tooltip has not been removed from DOM manually (or if it
				// has been detached on purpose)
				if (tooltipIsDetached || bodyContains(self._$tooltip)) {
					
					if (!tooltipIsDetached) {
						// detach in case the tooltip overflows the window and adds
						// scrollbars to it, so __geometry can be accurate
						self._$tooltip.detach();
					}
					
					// refresh the geometry object before passing it as a helper
					self.__Geometry = self.__geometry();
					
					// let a plugin fo the rest
					self._trigger({
						type: 'reposition',
						event: event,
						helper: {
							geo: self.__Geometry
						}
					});
				}
			}
		}
		else {
			self.__destroyError();
		}
		
		return self;
	},
	
	/**
	 * Alias, deprecated in 4.0.0
	 *
	 * @param callback
	 * @returns {self}
	 * @public
	 */
	show: function(callback) {
		return this.open(callback);
	},
	
	/**
	 * Returns some properties about the instance
	 * 
	 * @returns {object}
	 * @public
	 */
	status: function() {
		
		return {
			destroyed: this.__destroyed,
			enabled: this.__enabled,
			open: this.__state !== 'closed',
			state: this.__state
		};
	},
	
	/**
	 * For public use only, not to be used by plugins
	 *
	 * @returns {self}
	 * @public
	 */
	triggerHandler: function() {
		
		if (!this.__destroyed) {
			this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic, Array.prototype.slice.apply(arguments));
		}
		else {
			this.__destroyError();
		}
		
		return this;
	}
};

$.fn.tooltipster = function() {
	
	// for using in closures
	var args = Array.prototype.slice.apply(arguments),
		// common mistake: an HTML element can't be in several tooltips at the same time
		contentCloningWarning = 'You are using a single HTML element as content for several tooltips. You probably want to set the contentCloning option to TRUE.';
	
	// this happens with $(sel).tooltipster(...) when $(sel) does not match anything
	if (this.length === 0) {
		
		// still chainable
		return this;
	}
	// this happens when calling $(sel).tooltipster('methodName or options')
	// where $(sel) matches one or more elements
	else {
		
		// method calls
		if (typeof args[0] === 'string') {
			
			var v = '#*$~&';
			
			this.each(function() {
				
				// retrieve the namepaces of the tooltip(s) that exist on that element.
				// We will interact with the first tooltip only.
				var ns = $(this).data('tooltipster-ns'),
					// self represents the instance of the first tooltipster plugin
					// associated to the current HTML object of the loop
					self = ns ? $(this).data(ns[0]) : null;
				
				// if the current element holds a tooltipster instance
				if (self) {
					
					if (typeof self[args[0]] === 'function') {
						
						if (	this.length > 1
							&&	args[0] == 'content'
							&&	(	args[1] instanceof $
								|| (typeof args[1] == 'object' && args[1] != null && args[1].tagName)
							)
							&&	!self.__options.contentCloning
							&&	self.__options.debug
						) {
							console.log(contentCloningWarning);
						}
						
						// note : args[1] and args[2] may not be defined
						var resp = self[args[0]](args[1], args[2]);
					}
					else {
						throw new Error('Unknown method "'+ args[0] +'"');
					}
					
					// if the function returned anything other than the instance
					// itself (which implies chaining, except for the `instance` method)
					if (resp !== self || args[0] === 'instance') {
						
						v = resp;
						
						// return false to stop .each iteration on the first element
						// matched by the selector
						return false;
					}
				}
				else {
					throw new Error('You called Tooltipster\'s "'+ args[0] +'" method on an uninitialized element');
				}
			});
			
			return (v !== '#*$~&') ? v : this;
		}
		// first argument is undefined or an object: the tooltip is initializing
		else {
			
			// reset the array of last initialized objects
			$.tooltipster.__instancesLatestArr = [];
			
			// is there a defined value for the multiple option in the options object ?
			var	multipleIsSet = args[0] && args[0].multiple !== undefined,
				// if the multiple option is set to true, or if it's not defined but
				// set to true in the defaults
				multiple = (multipleIsSet && args[0].multiple) || (!multipleIsSet && defaults.multiple),
				// same for content
				contentIsSet = args[0] && args[0].content !== undefined,
				content = (contentIsSet && args[0].content) || (!contentIsSet && defaults.content),
				// same for contentCloning
				contentCloningIsSet = args[0] && args[0].contentCloning !== undefined,
				contentCloning =
						(contentCloningIsSet && args[0].contentCloning)
					||	(!contentCloningIsSet && defaults.contentCloning),
				// same for debug
				debugIsSet = args[0] && args[0].debug !== undefined,
				debug = (debugIsSet && args[0].debug) || (!debugIsSet && defaults.debug);
			
			if (	this.length > 1
				&&	(	content instanceof $
					|| (typeof content == 'object' && content != null && content.tagName)
				)
				&&	!contentCloning
				&&	debug
			) {
				console.log(contentCloningWarning);
			}
			
			// create a tooltipster instance for each element if it doesn't
			// already have one or if the multiple option is set, and attach the
			// object to it
			this.each(function() {
				
				var go = false,
					$this = $(this),
					ns = $this.data('tooltipster-ns'),
					obj = null;
				
				if (!ns) {
					go = true;
				}
				else if (multiple) {
					go = true;
				}
				else if (debug) {
					// console.log('Tooltipster: one or more tooltips are already attached to the element below. Ignoring.');
					// console.log(this);
				}
				
				if (go) {
					obj = new $.Tooltipster(this, args[0]);
					
					// save the reference of the new instance
					if (!ns) ns = [];
					ns.push(obj.__namespace);
					$this.data('tooltipster-ns', ns);
					
					// save the instance itself
					$this.data(obj.__namespace, obj);
					
					// call our constructor custom function.
					// we do this here and not in ::init() because we wanted
					// the object to be saved in $this.data before triggering
					// it
					if (obj.__options.functionInit) {
						obj.__options.functionInit.call(obj, obj, {
							origin: this
						});
					}
					
					// and now the event, for the plugins and core emitter
					obj._trigger('init');
				}
				
				$.tooltipster.__instancesLatestArr.push(obj);
			});
			
			return this;
		}
	}
};

// Utilities

/**
 * A class to check if a tooltip can fit in given dimensions
 * 
 * @param {object} $tooltip The jQuery wrapped tooltip element, or a clone of it
 */
function Ruler($tooltip) {
	
	// list of instance variables
	
	this.$container;
	this.constraints = null;
	this.__$tooltip;
	
	this.__init($tooltip);
}

Ruler.prototype = {
	
	/**
	 * Move the tooltip into an invisible div that does not allow overflow to make
	 * size tests. Note: the tooltip may or may not be attached to the DOM at the
	 * moment this method is called, it does not matter.
	 * 
	 * @param {object} $tooltip The object to test. May be just a clone of the
	 * actual tooltip.
	 * @private
	 */
	__init: function($tooltip) {
		
		this.__$tooltip = $tooltip;
		
		this.__$tooltip
			.css({
				// for some reason we have to specify top and left 0
				left: 0,
				// any overflow will be ignored while measuring
				overflow: 'hidden',
				// positions at (0,0) without the div using 100% of the available width
				position: 'absolute',
				top: 0
			})
			// overflow must be auto during the test. We re-set this in case
			// it were modified by the user
			.find('.tooltipster-content')
				.css('overflow', 'auto');
		
		this.$container = $('<div class="tooltipster-ruler"></div>')
			.append(this.__$tooltip)
			.appendTo(env.window.document.body);
	},
	
	/**
	 * Force the browser to redraw (re-render) the tooltip immediately. This is required
	 * when you changed some CSS properties and need to make something with it
	 * immediately, without waiting for the browser to redraw at the end of instructions.
	 *
	 * @see http://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes
	 * @private
	 */
	__forceRedraw: function() {
		
		// note: this would work but for Webkit only
		//this.__$tooltip.close();
		//this.__$tooltip[0].offsetHeight;
		//this.__$tooltip.open();
		
		// works in FF too
		var $p = this.__$tooltip.parent();
		this.__$tooltip.detach();
		this.__$tooltip.appendTo($p);
	},
	
	/**
	 * Set maximum dimensions for the tooltip. A call to ::measure afterwards
	 * will tell us if the content overflows or if it's ok
	 *
	 * @param {int} width
	 * @param {int} height
	 * @return {Ruler}
	 * @public
	 */
	constrain: function(width, height) {
		
		this.constraints = {
			width: width,
			height: height
		};
		
		this.__$tooltip.css({
			// we disable display:flex, otherwise the content would overflow without
			// creating horizontal scrolling (which we need to detect).
			display: 'block',
			// reset any previous height
			height: '',
			// we'll check if horizontal scrolling occurs
			overflow: 'auto',
			// we'll set the width and see what height is generated and if there
			// is horizontal overflow
			width: width
		});
		
		return this;
	},
	
	/**
	 * Reset the tooltip content overflow and remove the test container
	 * 
	 * @returns {Ruler}
	 * @public
	 */
	destroy: function() {
		
		// in case the element was not a clone
		this.__$tooltip
			.detach()
			.find('.tooltipster-content')
				.css({
					// reset to CSS value
					display: '',
					overflow: ''
				});
		
		this.$container.remove();
	},
	
	/**
	 * Removes any constraints
	 * 
	 * @returns {Ruler}
	 * @public
	 */
	free: function() {
		
		this.constraints = null;
		
		// reset to natural size
		this.__$tooltip.css({
			display: '',
			height: '',
			overflow: 'visible',
			width: ''
		});
		
		return this;
	},
	
	/**
	 * Returns the size of the tooltip. When constraints are applied, also returns
	 * whether the tooltip fits in the provided dimensions.
	 * The idea is to see if the new height is small enough and if the content does
	 * not overflow horizontally.
	 *
	 * @param {int} width
	 * @param {int} height
	 * @returns {object} An object with a bool `fits` property and a `size` property
	 * @public
	 */
	measure: function() {
		
		this.__forceRedraw();
		
		var tooltipBcr = this.__$tooltip[0].getBoundingClientRect(),
			result = { size: {
				// bcr.width/height are not defined in IE8- but in this
				// case, bcr.right/bottom will have the same value
				// except in iOS 8+ where tooltipBcr.bottom/right are wrong
				// after scrolling for reasons yet to be determined.
				// tooltipBcr.top/left might not be 0, see issue #514
				height: tooltipBcr.height || (tooltipBcr.bottom - tooltipBcr.top),
				width: tooltipBcr.width || (tooltipBcr.right - tooltipBcr.left)
			}};
		
		if (this.constraints) {
			
			// note: we used to use offsetWidth instead of boundingRectClient but
			// it returned rounded values, causing issues with sub-pixel layouts.
			
			// note2: noticed that the bcrWidth of text content of a div was once
			// greater than the bcrWidth of its container by 1px, causing the final
			// tooltip box to be too small for its content. However, evaluating
			// their widths one against the other (below) surprisingly returned
			// equality. Happened only once in Chrome 48, was not able to reproduce
			// => just having fun with float position values...
			
			var $content = this.__$tooltip.find('.tooltipster-content'),
				height = this.__$tooltip.outerHeight(),
				contentBcr = $content[0].getBoundingClientRect(),
				fits = {
					height: height <= this.constraints.height,
					width: (
						// this condition accounts for min-width property that
						// may apply
						tooltipBcr.width <= this.constraints.width
							// the -1 is here because scrollWidth actually returns
							// a rounded value, and may be greater than bcr.width if
							// it was rounded up. This may cause an issue for contents
							// which actually really overflow  by 1px or so, but that
							// should be rare. Not sure how to solve this efficiently.
							// See http://blogs.msdn.com/b/ie/archive/2012/02/17/sub-pixel-rendering-and-the-css-object-model.aspx
						&&	contentBcr.width >= $content[0].scrollWidth - 1
					)
				};
			
			result.fits = fits.height && fits.width;
		}
		
		// old versions of IE get the width wrong for some reason and it causes
		// the text to be broken to a new line, so we round it up. If the width
		// is the width of the screen though, we can assume it is accurate.
		if (	env.IE
			&&	env.IE <= 11
			&&	result.size.width !== env.window.document.documentElement.clientWidth
		) {
			result.size.width = Math.ceil(result.size.width) + 1;
		}
		
		return result;
	}
};

// quick & dirty compare function, not bijective nor multidimensional
function areEqual(a,b) {
	var same = true;
	$.each(a, function(i, _) {
		if (b[i] === undefined || a[i] !== b[i]) {
			same = false;
			return false;
		}
	});
	return same;
}

/**
 * A fast function to check if an element is still in the DOM. It
 * tries to use an id as ids are indexed by the browser, or falls
 * back to jQuery's `contains` method. May fail if two elements
 * have the same id, but so be it
 *
 * @param {object} $obj A jQuery-wrapped HTML element
 * @return {boolean}
 */
function bodyContains($obj) {
	var id = $obj.attr('id'),
		el = id ? env.window.document.getElementById(id) : null;
	// must also check that the element with the id is the one we want
	return el ? el === $obj[0] : $.contains(env.window.document.body, $obj[0]);
}

// detect IE versions for dirty fixes
var uA = navigator.userAgent.toLowerCase();
if (uA.indexOf('msie') != -1) env.IE = parseInt(uA.split('msie')[1]);
else if (uA.toLowerCase().indexOf('trident') !== -1 && uA.indexOf(' rv:11') !== -1) env.IE = 11;
else if (uA.toLowerCase().indexOf('edge/') != -1) env.IE = parseInt(uA.toLowerCase().split('edge/')[1]);

// detecting support for CSS transitions
function transitionSupport() {
	
	// env.window is not defined yet when this is called
	if (!win) return false;
	
	var b = win.document.body || win.document.documentElement,
		s = b.style,
		p = 'transition',
		v = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'];
	
	if (typeof s[p] == 'string') { return true; }
	
	p = p.charAt(0).toUpperCase() + p.substr(1);
	for (var i=0; i<v.length; i++) {
		if (typeof s[v[i] + p] == 'string') { return true; }
	}
	return false;
}

// we'll return jQuery for plugins not to have to declare it as a dependency,
// but it's done by a build task since it should be included only once at the
// end when we concatenate the main file with a plugin
// sideTip is Tooltipster's default plugin.
// This file will be UMDified by a build task.

var pluginName = 'tooltipster.sideTip';

$.tooltipster._plugin({
	name: pluginName,
	instance: {
		/**
		 * Defaults are provided as a function for an easy override by inheritance
		 *
		 * @return {object} An object with the defaults options
		 * @private
		 */
		__defaults: function() {
			
			return {
				// if the tooltip should display an arrow that points to the origin
				arrow: true,
				// the distance in pixels between the tooltip and the origin
				distance: 6,
				// allows to easily change the position of the tooltip
				functionPosition: null,
				maxWidth: null,
				// used to accomodate the arrow of tooltip if there is one.
				// First to make sure that the arrow target is not too close
				// to the edge of the tooltip, so the arrow does not overflow
				// the tooltip. Secondly when we reposition the tooltip to
				// make sure that it's positioned in such a way that the arrow is
				// still pointing at the target (and not a few pixels beyond it).
				// It should be equal to or greater than half the width of
				// the arrow (by width we mean the size of the side which touches
				// the side of the tooltip).
				minIntersection: 16,
				minWidth: 0,
				// deprecated in 4.0.0. Listed for _optionsExtract to pick it up
				position: null,
				side: 'top',
				// set to false to position the tooltip relatively to the document rather
				// than the window when we open it
				viewportAware: true
			};
		},
		
		/**
		 * Run once: at instantiation of the plugin
		 *
		 * @param {object} instance The tooltipster object that instantiated this plugin
		 * @private
		 */
		__init: function(instance) {
			
			var self = this;
			
			// list of instance variables
			
			self.__instance = instance;
			self.__namespace = 'tooltipster-sideTip-'+ Math.round(Math.random()*1000000);
			self.__previousState = 'closed';
			self.__options;
			
			// initial formatting
			self.__optionsFormat();
			
			self.__instance._on('state.'+ self.__namespace, function(event) {
				
				if (event.state == 'closed') {
					self.__close();
				}
				else if (event.state == 'appearing' && self.__previousState == 'closed') {
					self.__create();
				}
				
				self.__previousState = event.state;
			});
			
			// reformat every time the options are changed
			self.__instance._on('options.'+ self.__namespace, function() {
				self.__optionsFormat();
			});
			
			self.__instance._on('reposition.'+ self.__namespace, function(e) {
				self.__reposition(e.event, e.helper);
			});
		},
		
		/**
		 * Called when the tooltip has closed
		 * 
		 * @private
		 */
		__close: function() {
			
			// detach our content object first, so the next jQuery's remove()
			// call does not unbind its event handlers
			if (this.__instance.content() instanceof $) {
				this.__instance.content().detach();
			}
			
			// remove the tooltip from the DOM
			this.__instance._$tooltip.remove();
			this.__instance._$tooltip = null;
		},
		
		/**
		 * Creates the HTML element of the tooltip.
		 * 
		 * @private
		 */
		__create: function() {
			
			// note: we wrap with a .tooltipster-box div to be able to set a margin on it
			// (.tooltipster-base must not have one)
			var $html = $(
				'<div class="tooltipster-base tooltipster-sidetip">' +
					'<div class="tooltipster-box">' +
						'<div class="tooltipster-content"></div>' +
					'</div>' +
					'<div class="tooltipster-arrow">' +
						'<div class="tooltipster-arrow-uncropped">' +
							'<div class="tooltipster-arrow-border"></div>' +
							'<div class="tooltipster-arrow-background"></div>' +
						'</div>' +
					'</div>' +
				'</div>'
			);
			
			// hide arrow if asked
			if (!this.__options.arrow) {
				$html
					.find('.tooltipster-box')
						.css('margin', 0)
						.end()
					.find('.tooltipster-arrow')
						.hide();
			}
			
			// apply min/max width if asked
			if (this.__options.minWidth) {
				$html.css('min-width', this.__options.minWidth + 'px');
			}
			if (this.__options.maxWidth) {
				$html.css('max-width', this.__options.maxWidth + 'px');
			}
			
			this.__instance._$tooltip = $html;
			
			// tell the instance that the tooltip element has been created
			this.__instance._trigger('created');
		},
		
		/**
		 * Used when the plugin is to be unplugged
		 *
		 * @private
		 */
		__destroy: function() {
			this.__instance._off('.'+ self.__namespace);
		},
		
		/**
		 * (Re)compute this.__options from the options declared to the instance
		 *
		 * @private
		 */
		__optionsFormat: function() {
			
			var self = this;
			
			// get the options
			self.__options = self.__instance._optionsExtract(pluginName, self.__defaults());
			
			// for backward compatibility, deprecated in v4.0.0
			if (self.__options.position) {
				self.__options.side = self.__options.position;
			}
			
			// options formatting
			
			// format distance as a four-cell array if it ain't one yet and then make
			// it an object with top/bottom/left/right properties
			if (typeof self.__options.distance != 'object') {
				self.__options.distance = [self.__options.distance];
			}
			if (self.__options.distance.length < 4) {
				
				if (self.__options.distance[1] === undefined) self.__options.distance[1] = self.__options.distance[0];
				if (self.__options.distance[2] === undefined) self.__options.distance[2] = self.__options.distance[0];
				if (self.__options.distance[3] === undefined) self.__options.distance[3] = self.__options.distance[1];
				
				self.__options.distance = {
					top: self.__options.distance[0],
					right: self.__options.distance[1],
					bottom: self.__options.distance[2],
					left: self.__options.distance[3]
				};
			}
			
			// let's transform:
			// 'top' into ['top', 'bottom', 'right', 'left']
			// 'right' into ['right', 'left', 'top', 'bottom']
			// 'bottom' into ['bottom', 'top', 'right', 'left']
			// 'left' into ['left', 'right', 'top', 'bottom']
			if (typeof self.__options.side == 'string') {
				
				var opposites = {
					'top': 'bottom',
					'right': 'left',
					'bottom': 'top',
					'left': 'right'
				};
				
				self.__options.side = [self.__options.side, opposites[self.__options.side]];
				
				if (self.__options.side[0] == 'left' || self.__options.side[0] == 'right') {
					self.__options.side.push('top', 'bottom');
				}
				else {
					self.__options.side.push('right', 'left');
				}
			}
			
			// misc
			// disable the arrow in IE6 unless the arrow option was explicitly set to true
			if (	$.tooltipster._env.IE === 6
				&&	self.__options.arrow !== true
			) {
				self.__options.arrow = false;
			}
		},
		
		/**
		 * This method must compute and set the positioning properties of the
		 * tooltip (left, top, width, height, etc.). It must also make sure the
		 * tooltip is eventually appended to its parent (since the element may be
		 * detached from the DOM at the moment the method is called).
		 *
		 * We'll evaluate positioning scenarios to find which side can contain the
		 * tooltip in the best way. We'll consider things relatively to the window
		 * (unless the user asks not to), then to the document (if need be, or if the
		 * user explicitly requires the tests to run on the document). For each
		 * scenario, measures are taken, allowing us to know how well the tooltip
		 * is going to fit. After that, a sorting function will let us know what
		 * the best scenario is (we also allow the user to choose his favorite
		 * scenario by using an event).
		 * 
		 * @param {object} helper An object that contains variables that plugin
		 * creators may find useful (see below)
		 * @param {object} helper.geo An object with many layout properties
		 * about objects of interest (window, document, origin). This should help
		 * plugin users compute the optimal position of the tooltip
		 * @private
		 */
		__reposition: function(event, helper) {
			
			var self = this,
				finalResult,
				// to know where to put the tooltip, we need to know on which point
				// of the x or y axis we should center it. That coordinate is the target
				targets = self.__targetFind(helper),
				testResults = [];
			
			// make sure the tooltip is detached while we make tests on a clone
			self.__instance._$tooltip.detach();
			
			// we could actually provide the original element to the Ruler and
			// not a clone, but it just feels right to keep it out of the
			// machinery.
			var $clone = self.__instance._$tooltip.clone(),
				// start position tests session
				ruler = $.tooltipster._getRuler($clone),
				satisfied = false,
				animation = self.__instance.option('animation');
			
			// an animation class could contain properties that distort the size
			if (animation) {
				$clone.removeClass('tooltipster-'+ animation);
			}
			
			// start evaluating scenarios
			$.each(['window', 'document'], function(i, container) {
				
				var takeTest = null;
				
				// let the user decide to keep on testing or not
				self.__instance._trigger({
					container: container,
					helper: helper,
					satisfied: satisfied,
					takeTest: function(bool) {
						takeTest = bool;
					},
					results: testResults,
					type: 'positionTest'
				});
				
				if (	takeTest == true
					||	(	takeTest != false
						&&	satisfied == false
							// skip the window scenarios if asked. If they are reintegrated by
							// the callback of the positionTest event, they will have to be
							// excluded using the callback of positionTested
						&&	(container != 'window' || self.__options.viewportAware)
					)
				) {
					
					// for each allowed side
					for (var i=0; i < self.__options.side.length; i++) {
						
						var distance = {
								horizontal: 0,
								vertical: 0
							},
							side = self.__options.side[i];
						
						if (side == 'top' || side == 'bottom') {
							distance.vertical = self.__options.distance[side];
						}
						else {
							distance.horizontal = self.__options.distance[side];
						}
						
						// this may have an effect on the size of the tooltip if there are css
						// rules for the arrow or something else
						self.__sideChange($clone, side);
						
						$.each(['natural', 'constrained'], function(i, mode) {
							
							takeTest = null;
							
							// emit an event on the instance
							self.__instance._trigger({
								container: container,
								event: event,
								helper: helper,
								mode: mode,
								results: testResults,
								satisfied: satisfied,
								side: side,
								takeTest: function(bool) {
									takeTest = bool;
								},
								type: 'positionTest'
							});
							
							if (	takeTest == true
								||	(	takeTest != false
									&&	satisfied == false
								)
							) {
								
								var testResult = {
									container: container,
									// we let the distance as an object here, it can make things a little easier
									// during the user's calculations at positionTest/positionTested
									distance: distance,
									// whether the tooltip can fit in the size of the viewport (does not mean
									// that we'll be able to make it initially entirely visible, see 'whole')
									fits: null,
									mode: mode,
									outerSize: null,
									side: side,
									size: null,
									target: targets[side],
									// check if the origin has enough surface on screen for the tooltip to
									// aim at it without overflowing the viewport (this is due to the thickness
									// of the arrow represented by the minIntersection length).
									// If not, the tooltip will have to be partly or entirely off screen in
									// order to stay docked to the origin. This value will stay null when the
									// container is the document, as it is not relevant
									whole: null
								};
								
								// get the size of the tooltip with or without size constraints
								var rulerConfigured = (mode == 'natural') ?
										ruler.free() :
										ruler.constrain(
											helper.geo.available[container][side].width - distance.horizontal,
											helper.geo.available[container][side].height - distance.vertical
										),
									rulerResults = rulerConfigured.measure();
								
								testResult.size = rulerResults.size;
								testResult.outerSize = {
									height: rulerResults.size.height + distance.vertical,
									width: rulerResults.size.width + distance.horizontal
								};
								
								if (mode == 'natural') {
									
									if(		helper.geo.available[container][side].width >= testResult.outerSize.width
										&&	helper.geo.available[container][side].height >= testResult.outerSize.height
									) {
										testResult.fits = true;
									}
									else {
										testResult.fits = false;
									}
								}
								else {
									testResult.fits = rulerResults.fits;
								}
								
								if (container == 'window') {
									
									if (!testResult.fits) {
										testResult.whole = false;
									}
									else {
										if (side == 'top' || side == 'bottom') {
											
											testResult.whole = (
													helper.geo.origin.windowOffset.right >= self.__options.minIntersection
												&&	helper.geo.window.size.width - helper.geo.origin.windowOffset.left >= self.__options.minIntersection
											);
										}
										else {
											testResult.whole = (
													helper.geo.origin.windowOffset.bottom >= self.__options.minIntersection
												&&	helper.geo.window.size.height - helper.geo.origin.windowOffset.top >= self.__options.minIntersection
											);
										}
									}
								}
								
								testResults.push(testResult);
								
								// we don't need to compute more positions if we have one fully on screen
								if (testResult.whole) {
									satisfied = true;
								}
								else {
									// don't run the constrained test unless the natural width was greater
									// than the available width, otherwise it's pointless as we know it
									// wouldn't fit either
									if (	testResult.mode == 'natural'
										&&	(	testResult.fits
											||	testResult.size.width <= helper.geo.available[container][side].width
										)
									) {
										return false;
									}
								}
							}
						});
					}
				}
			});
			
			// the user may eliminate the unwanted scenarios from testResults, but he's
			// not supposed to alter them at this point. functionPosition and the
			// position event serve that purpose.
			self.__instance._trigger({
				edit: function(r) {
					testResults = r;
				},
				event: event,
				helper: helper,
				results: testResults,
				type: 'positionTested'
			});
			
			/**
			 * Sort the scenarios to find the favorite one.
			 * 
			 * The favorite scenario is when we can fully display the tooltip on screen,
			 * even if it means that the middle of the tooltip is no longer centered on
			 * the middle of the origin (when the origin is near the edge of the screen
			 * or even partly off screen). We want the tooltip on the preferred side,
			 * even if it means that we have to use a constrained size rather than a
			 * natural one (as long as it fits). When the origin is off screen at the top
			 * the tooltip will be positioned at the bottom (if allowed), if the origin
			 * is off screen on the right, it will be positioned on the left, etc.
			 * If there are no scenarios where the tooltip can fit on screen, or if the
			 * user does not want the tooltip to fit on screen (viewportAware == false),
			 * we fall back to the scenarios relative to the document.
			 * 
			 * When the tooltip is bigger than the viewport in either dimension, we stop
			 * looking at the window scenarios and consider the document scenarios only,
			 * with the same logic to find on which side it would fit best.
			 * 
			 * If the tooltip cannot fit the document on any side, we force it at the
			 * bottom, so at least the user can scroll to see it.
 			 */
			testResults.sort(function(a, b) {
				
				// best if it's whole (the tooltip fits and adapts to the viewport)
				if (a.whole && !b.whole) {
					return -1;
				}
				else if (!a.whole && b.whole) {
					return 1;
				}
				else if (a.whole && b.whole) {
					
					var ai = self.__options.side.indexOf(a.side),
						bi = self.__options.side.indexOf(b.side);
					
					// use the user's sides fallback array
					if (ai < bi) {
						return -1;
					}
					else if (ai > bi) {
						return 1;
					}
					else {
						// will be used if the user forced the tests to continue
						return a.mode == 'natural' ? -1 : 1;
					}
				}
				else {
					
					// better if it fits
					if (a.fits && !b.fits) {
						return -1;
					}
					else if (!a.fits && b.fits) {
						return 1;
					}
					else if (a.fits && b.fits) {
						
						var ai = self.__options.side.indexOf(a.side),
							bi = self.__options.side.indexOf(b.side);
						
						// use the user's sides fallback array
						if (ai < bi) {
							return -1;
						}
						else if (ai > bi) {
							return 1;
						}
						else {
							// will be used if the user forced the tests to continue
							return a.mode == 'natural' ? -1 : 1;
						}
					}
					else {
						
						// if everything failed, this will give a preference to the case where
						// the tooltip overflows the document at the bottom
						if (	a.container == 'document'
							&&	a.side == 'bottom'
							&&	a.mode == 'natural'
						) {
							return -1;
						}
						else {
							return 1;
						}
					}
				}
			});
			
			finalResult = testResults[0];
			
			
			// now let's find the coordinates of the tooltip relatively to the window
			finalResult.coord = {};
			
			switch (finalResult.side) {
				
				case 'left':
				case 'right':
					finalResult.coord.top = Math.floor(finalResult.target - finalResult.size.height / 2);
					break;
				
				case 'bottom':
				case 'top':
					finalResult.coord.left = Math.floor(finalResult.target - finalResult.size.width / 2);
					break;
			}
			
			switch (finalResult.side) {
				
				case 'left':
					finalResult.coord.left = helper.geo.origin.windowOffset.left - finalResult.outerSize.width;
					break;
				
				case 'right':
					finalResult.coord.left = helper.geo.origin.windowOffset.right + finalResult.distance.horizontal;
					break;
				
				case 'top':
					finalResult.coord.top = helper.geo.origin.windowOffset.top - finalResult.outerSize.height;
					break;
				
				case 'bottom':
					finalResult.coord.top = helper.geo.origin.windowOffset.bottom + finalResult.distance.vertical;
					break;
			}
			
			// if the tooltip can potentially be contained within the viewport dimensions
			// and that we are asked to make it fit on screen
			if (finalResult.container == 'window') {
				
				// if the tooltip overflows the viewport, we'll move it accordingly (then it will
				// not be centered on the middle of the origin anymore). We only move horizontally
				// for top and bottom tooltips and vice versa.
				if (finalResult.side == 'top' || finalResult.side == 'bottom') {
					
					// if there is an overflow on the left
					if (finalResult.coord.left < 0) {
						
						// prevent the overflow unless the origin itself gets off screen (minus the
						// margin needed to keep the arrow pointing at the target)
						if (helper.geo.origin.windowOffset.right - this.__options.minIntersection >= 0) {
							finalResult.coord.left = 0;
						}
						else {
							finalResult.coord.left = helper.geo.origin.windowOffset.right - this.__options.minIntersection - 1;
						}
					}
					// or an overflow on the right
					else if (finalResult.coord.left > helper.geo.window.size.width - finalResult.size.width) {
						
						if (helper.geo.origin.windowOffset.left + this.__options.minIntersection <= helper.geo.window.size.width) {
							finalResult.coord.left = helper.geo.window.size.width - finalResult.size.width;
						}
						else {
							finalResult.coord.left = helper.geo.origin.windowOffset.left + this.__options.minIntersection + 1 - finalResult.size.width;
						}
					}
				}
				else {
					
					// overflow at the top
					if (finalResult.coord.top < 0) {
						
						if (helper.geo.origin.windowOffset.bottom - this.__options.minIntersection >= 0) {
							finalResult.coord.top = 0;
						}
						else {
							finalResult.coord.top = helper.geo.origin.windowOffset.bottom - this.__options.minIntersection - 1;
						}
					}
					// or at the bottom
					else if (finalResult.coord.top > helper.geo.window.size.height - finalResult.size.height) {
						
						if (helper.geo.origin.windowOffset.top + this.__options.minIntersection <= helper.geo.window.size.height) {
							finalResult.coord.top = helper.geo.window.size.height - finalResult.size.height;
						}
						else {
							finalResult.coord.top = helper.geo.origin.windowOffset.top + this.__options.minIntersection + 1 - finalResult.size.height;
						}
					}
				}
			}
			else {
				
				// there might be overflow here too but it's easier to handle. If there has
				// to be an overflow, we'll make sure it's on the right side of the screen
				// (because the browser will extend the document size if there is an overflow
				// on the right, but not on the left). The sort function above has already
				// made sure that a bottom document overflow is preferred to a top overflow,
				// so we don't have to care about it.
				
				// if there is an overflow on the right
				if (finalResult.coord.left > helper.geo.window.size.width - finalResult.size.width) {
					
					// this may actually create on overflow on the left but we'll fix it in a sec
					finalResult.coord.left = helper.geo.window.size.width - finalResult.size.width;
				}
				
				// if there is an overflow on the left
				if (finalResult.coord.left < 0) {
					
					// don't care if it overflows the right after that, we made our best
					finalResult.coord.left = 0;
				}
			}
			
			
			// submit the positioning proposal to the user function which may choose to change
			// the side, size and/or the coordinates
			
			// first, set the rules that corresponds to the proposed side: it may change
			// the size of the tooltip, and the custom functionPosition may want to detect the
			// size of something before making a decision. So let's make things easier for the
			// implementor
			self.__sideChange($clone, finalResult.side);
			
			// add some variables to the helper
			helper.tooltipClone = $clone[0];
			helper.tooltipParent = self.__instance.option('parent').parent[0];
			// move informative values to the helper
			helper.mode = finalResult.mode;
			helper.whole = finalResult.whole;
			// add some variables to the helper for the functionPosition callback (these
			// will also be added to the event fired by self.__instance._trigger but that's
			// ok, we're just being consistent)
			helper.origin = self.__instance._$origin[0];
			helper.tooltip = self.__instance._$tooltip[0];
			
			// leave only the actionable values in there for functionPosition
			delete finalResult.container;
			delete finalResult.fits;
			delete finalResult.mode;
			delete finalResult.outerSize;
			delete finalResult.whole;
			
			// keep only the distance on the relevant side, for clarity
			finalResult.distance = finalResult.distance.horizontal || finalResult.distance.vertical;
			
			// beginners may not be comfortable with the concept of editing the object
			//  passed by reference, so we provide an edit function and pass a clone
			var finalResultClone = $.extend(true, {}, finalResult);
			
			// emit an event on the instance
			self.__instance._trigger({
				edit: function(result) {
					finalResult = result;
				},
				event: event,
				helper: helper,
				position: finalResultClone,
				type: 'position'
			});
			
			if (self.__options.functionPosition) {
				
				var result = self.__options.functionPosition.call(self, self.__instance, helper, finalResultClone);
				
				if (result) finalResult = result;
			}
			
			// end the positioning tests session (the user might have had a
			// use for it during the position event, now it's over)
			ruler.destroy();
			
			// compute the position of the target relatively to the tooltip root
			// element so we can place the arrow and make the needed adjustments
			var arrowCoord,
				maxVal;
			
			if (finalResult.side == 'top' || finalResult.side == 'bottom') {
				
				arrowCoord = {
					prop: 'left',
					val: finalResult.target - finalResult.coord.left
				};
				maxVal = finalResult.size.width - this.__options.minIntersection;
			}
			else {
				
				arrowCoord = {
					prop: 'top',
					val: finalResult.target - finalResult.coord.top
				};
				maxVal = finalResult.size.height - this.__options.minIntersection;
			}
			
			// cannot lie beyond the boundaries of the tooltip, minus the
			// arrow margin
			if (arrowCoord.val < this.__options.minIntersection) {
				arrowCoord.val = this.__options.minIntersection;
			}
			else if (arrowCoord.val > maxVal) {
				arrowCoord.val = maxVal;
			}
			
			var originParentOffset;
			
			// let's convert the window-relative coordinates into coordinates relative to the
			// future positioned parent that the tooltip will be appended to
			if (helper.geo.origin.fixedLineage) {
				
				// same as windowOffset when the position is fixed
				originParentOffset = helper.geo.origin.windowOffset;
			}
			else {
				
				// this assumes that the parent of the tooltip is located at
				// (0, 0) in the document, typically like when the parent is
				// <body>.
				// If we ever allow other types of parent, .tooltipster-ruler
				// will have to be appended to the parent to inherit css style
				// values that affect the display of the text and such.
				originParentOffset = {
					left: helper.geo.origin.windowOffset.left + helper.geo.window.scroll.left,
					top: helper.geo.origin.windowOffset.top + helper.geo.window.scroll.top
				};
			}
			
			finalResult.coord = {
				left: originParentOffset.left + (finalResult.coord.left - helper.geo.origin.windowOffset.left),
				top: originParentOffset.top + (finalResult.coord.top - helper.geo.origin.windowOffset.top)
			};
			
			// set position values on the original tooltip element
			
			self.__sideChange(self.__instance._$tooltip, finalResult.side);
			
			if (helper.geo.origin.fixedLineage) {
				self.__instance._$tooltip
					.css('position', 'fixed');
			}
			else {
				// CSS default
				self.__instance._$tooltip
					.css('position', '');
			}
			
			self.__instance._$tooltip
				.css({
					left: finalResult.coord.left,
					top: finalResult.coord.top,
					// we need to set a size even if the tooltip is in its natural size
					// because when the tooltip is positioned beyond the width of the body
					// (which is by default the width of the window; it will happen when
					// you scroll the window horizontally to get to the origin), its text
					// content will otherwise break lines at each word to keep up with the
					// body overflow strategy.
					height: finalResult.size.height,
					width: finalResult.size.width
				})
				.find('.tooltipster-arrow')
					.css({
						'left': '',
						'top': ''
					})
					.css(arrowCoord.prop, arrowCoord.val);
			
			// append the tooltip HTML element to its parent
			self.__instance._$tooltip.appendTo(self.__instance.option('parent'));
			
			self.__instance._trigger({
				type: 'repositioned',
				event: event,
				position: finalResult
			});
		},
		
		/**
		 * Make whatever modifications are needed when the side is changed. This has
		 * been made an independant method for easy inheritance in custom plugins based
		 * on this default plugin.
		 *
		 * @param {object} $obj
		 * @param {string} side
		 * @private
		 */
		__sideChange: function($obj, side) {
			
			$obj
				.removeClass('tooltipster-bottom')
				.removeClass('tooltipster-left')
				.removeClass('tooltipster-right')
				.removeClass('tooltipster-top')
				.addClass('tooltipster-'+ side);
		},
		
		/**
		 * Returns the target that the tooltip should aim at for a given side.
		 * The calculated value is a distance from the edge of the window
		 * (left edge for top/bottom sides, top edge for left/right side). The
		 * tooltip will be centered on that position and the arrow will be
		 * positioned there (as much as possible).
		 *
		 * @param {object} helper
		 * @return {integer}
		 * @private
		 */
		__targetFind: function(helper) {
			
			var target = {},
				rects = this.__instance._$origin[0].getClientRects();
			
			// these lines fix a Chrome bug (issue #491)
			if (rects.length > 1) {
				var opacity = this.__instance._$origin.css('opacity');
				if(opacity == 1) {
					this.__instance._$origin.css('opacity', 0.99);
					rects = this.__instance._$origin[0].getClientRects();
					this.__instance._$origin.css('opacity', 1);
				}
			}
			
			// by default, the target will be the middle of the origin
			if (rects.length < 2) {
				
				target.top = Math.floor(helper.geo.origin.windowOffset.left + (helper.geo.origin.size.width / 2));
				target.bottom = target.top;
				
				target.left = Math.floor(helper.geo.origin.windowOffset.top + (helper.geo.origin.size.height / 2));
				target.right = target.left;
			}
			// if multiple client rects exist, the element may be text split
			// up into multiple lines and the middle of the origin may not be
			// best option anymore. We need to choose the best target client rect
			else {
				
				// top: the first
				var targetRect = rects[0];
				target.top = Math.floor(targetRect.left + (targetRect.right - targetRect.left) / 2);
		
				// right: the middle line, rounded down in case there is an even
				// number of lines (looks more centered => check out the
				// demo with 4 split lines)
				if (rects.length > 2) {
					targetRect = rects[Math.ceil(rects.length / 2) - 1];
				}
				else {
					targetRect = rects[0];
				}
				target.right = Math.floor(targetRect.top + (targetRect.bottom - targetRect.top) / 2);
		
				// bottom: the last
				targetRect = rects[rects.length - 1];
				target.bottom = Math.floor(targetRect.left + (targetRect.right - targetRect.left) / 2);
		
				// left: the middle line, rounded up
				if (rects.length > 2) {
					targetRect = rects[Math.ceil((rects.length + 1) / 2) - 1];
				}
				else {
					targetRect = rects[rects.length - 1];
				}
				
				target.left = Math.floor(targetRect.top + (targetRect.bottom - targetRect.top) / 2);
			}
			
			return target;
		}
	}
});

/* a build task will add "return $;" here */
return $;

}));

/**
 * jquery.mask.js
 * @version: v1.14.12
 * @author: Igor Escobar
 *
 * Created by Igor Escobar on 2012-03-10. Please report any bug at http://blog.igorescobar.com
 *
 * Copyright (c) 2012 Igor Escobar http://blog.igorescobar.com
 *
 * The MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */

/* jshint laxbreak: true */
/* jshint maxcomplexity:17 */
/* global define */

'use strict';

// UMD (Universal Module Definition) patterns for JavaScript modules that work everywhere.
// https://github.com/umdjs/umd/blob/master/jqueryPluginCommonjs.js
(function (factory, jQuery, Zepto) {

    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        module.exports = factory(require('jquery'));
    } else {
        factory(jQuery || Zepto);
    }

}(function ($) {

    var Mask = function (el, mask, options) {

        var p = {
            invalid: [],
            getCaret: function () {
                try {
                    var sel,
                        pos = 0,
                        ctrl = el.get(0),
                        dSel = document.selection,
                        cSelStart = ctrl.selectionStart;

                    // IE Support
                    if (dSel && navigator.appVersion.indexOf('MSIE 10') === -1) {
                        sel = dSel.createRange();
                        sel.moveStart('character', -p.val().length);
                        pos = sel.text.length;
                    }
                    // Firefox support
                    else if (cSelStart || cSelStart === '0') {
                        pos = cSelStart;
                    }

                    return pos;
                } catch (e) {}
            },
            setCaret: function(pos) {
                try {
                    if (el.is(':focus')) {
                        var range, ctrl = el.get(0);

                        // Firefox, WebKit, etc..
                        if (ctrl.setSelectionRange) {
                            ctrl.setSelectionRange(pos, pos);
                        } else { // IE
                            range = ctrl.createTextRange();
                            range.collapse(true);
                            range.moveEnd('character', pos);
                            range.moveStart('character', pos);
                            range.select();
                        }
                    }
                } catch (e) {}
            },
            events: function() {
                el
                .on('keydown.mask', function(e) {
                    el.data('mask-keycode', e.keyCode || e.which);
                    el.data('mask-previus-value', el.val());
                    el.data('mask-previus-caret-pos', p.getCaret());
                    p.maskDigitPosMapOld = p.maskDigitPosMap;
                })
                .on($.jMaskGlobals.useInput ? 'input.mask' : 'keyup.mask', p.behaviour)
                .on('paste.mask drop.mask', function() {
                    setTimeout(function() {
                        el.keydown().keyup();
                    }, 100);
                })
                .on('change.mask', function(){
                    el.data('changed', true);
                })
                .on('blur.mask', function(){
                    if (oldValue !== p.val() && !el.data('changed')) {
                        el.trigger('change');
                    }
                    el.data('changed', false);
                })
                // it's very important that this callback remains in this position
                // otherwhise oldValue it's going to work buggy
                .on('blur.mask', function() {
                    oldValue = p.val();
                })
                // select all text on focus
                .on('focus.mask', function (e) {
                    if (options.selectOnFocus === true) {
                        $(e.target).select();
                    }
                })
                // clear the value if it not complete the mask
                .on('focusout.mask', function() {
                    if (options.clearIfNotMatch && !regexMask.test(p.val())) {
                       p.val('');
                   }
                });
            },
            getRegexMask: function() {
                var maskChunks = [], translation, pattern, optional, recursive, oRecursive, r;

                for (var i = 0; i < mask.length; i++) {
                    translation = jMask.translation[mask.charAt(i)];

                    if (translation) {

                        pattern = translation.pattern.toString().replace(/.{1}$|^.{1}/g, '');
                        optional = translation.optional;
                        recursive = translation.recursive;

                        if (recursive) {
                            maskChunks.push(mask.charAt(i));
                            oRecursive = {digit: mask.charAt(i), pattern: pattern};
                        } else {
                            maskChunks.push(!optional && !recursive ? pattern : (pattern + '?'));
                        }

                    } else {
                        maskChunks.push(mask.charAt(i).replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&'));
                    }
                }

                r = maskChunks.join('');

                if (oRecursive) {
                    r = r.replace(new RegExp('(' + oRecursive.digit + '(.*' + oRecursive.digit + ')?)'), '($1)?')
                         .replace(new RegExp(oRecursive.digit, 'g'), oRecursive.pattern);
                }

                return new RegExp(r);
            },
            destroyEvents: function() {
                el.off(['input', 'keydown', 'keyup', 'paste', 'drop', 'blur', 'focusout', ''].join('.mask '));
            },
            val: function(v) {
                var isInput = el.is('input'),
                    method = isInput ? 'val' : 'text',
                    r;

                if (arguments.length > 0) {
                    if (el[method]() !== v) {
                        el[method](v);
                    }
                    r = el;
                } else {
                    r = el[method]();
                }

                return r;
            },
            calculateCaretPosition: function() {
                var oldVal = el.data('mask-previus-value') || '',
                    newVal = p.getMasked(),
                    caretPosNew = p.getCaret();
                if (oldVal !== newVal) {
                    var caretPosOld = el.data('mask-previus-caret-pos') || 0,
                        newValL = newVal.length,
                        oldValL = oldVal.length,
                        maskDigitsBeforeCaret = 0,
                        maskDigitsAfterCaret = 0,
                        maskDigitsBeforeCaretAll = 0,
                        maskDigitsBeforeCaretAllOld = 0,
                        i = 0;

                    for (i = caretPosNew; i < newValL; i++) {
                        if (!p.maskDigitPosMap[i]) {
                            break;
                        }
                        maskDigitsAfterCaret++;
                    }

                    for (i = caretPosNew - 1; i >= 0; i--) {
                        if (!p.maskDigitPosMap[i]) {
                            break;
                        }
                        maskDigitsBeforeCaret++;
                    }

                    for (i = caretPosNew - 1; i >= 0; i--) {
                        if (p.maskDigitPosMap[i]) {
                            maskDigitsBeforeCaretAll++;
                        }
                    }

                    for (i = caretPosOld - 1; i >= 0; i--) {
                        if (p.maskDigitPosMapOld[i]) {
                            maskDigitsBeforeCaretAllOld++;
                        }
                    }

                    // if the cursor is at the end keep it there
                    if (caretPosNew > oldValL) {
                      caretPosNew = newValL * 10;
                    } else if (caretPosOld >= caretPosNew && caretPosOld !== oldValL) {
                        if (!p.maskDigitPosMapOld[caretPosNew])  {
                          var caretPos = caretPosNew;
                          caretPosNew -= maskDigitsBeforeCaretAllOld - maskDigitsBeforeCaretAll;
                          caretPosNew -= maskDigitsBeforeCaret;
                          if (p.maskDigitPosMap[caretPosNew])  {
                            caretPosNew = caretPos;
                          }
                        }
                    }
                    else if (caretPosNew > caretPosOld) {
                        caretPosNew += maskDigitsBeforeCaretAll - maskDigitsBeforeCaretAllOld;
                        caretPosNew += maskDigitsAfterCaret;
                    }
                }
                return caretPosNew;
            },
            behaviour: function(e) {
                e = e || window.event;
                p.invalid = [];

                var keyCode = el.data('mask-keycode');

                if ($.inArray(keyCode, jMask.byPassKeys) === -1) {
                    var newVal   = p.getMasked(),
                        caretPos = p.getCaret();

                    // this is a compensation to devices/browsers that don't compensate
                    // caret positioning the right way
                    setTimeout(function() {
                      p.setCaret(p.calculateCaretPosition());
                    }, 10);

                    p.val(newVal);
                    p.setCaret(caretPos);
                    return p.callbacks(e);
                }
            },
            getMasked: function(skipMaskChars, val) {
                var buf = [],
                    value = val === undefined ? p.val() : val + '',
                    m = 0, maskLen = mask.length,
                    v = 0, valLen = value.length,
                    offset = 1, addMethod = 'push',
                    resetPos = -1,
                    maskDigitCount = 0,
                    maskDigitPosArr = [],
                    lastMaskChar,
                    check;

                if (options.reverse) {
                    addMethod = 'unshift';
                    offset = -1;
                    lastMaskChar = 0;
                    m = maskLen - 1;
                    v = valLen - 1;
                    check = function () {
                        return m > -1 && v > -1;
                    };
                } else {
                    lastMaskChar = maskLen - 1;
                    check = function () {
                        return m < maskLen && v < valLen;
                    };
                }

                var lastUntranslatedMaskChar;
                while (check()) {
                    var maskDigit = mask.charAt(m),
                        valDigit = value.charAt(v),
                        translation = jMask.translation[maskDigit];

                    if (translation) {
                        if (valDigit.match(translation.pattern)) {
                            buf[addMethod](valDigit);
                             if (translation.recursive) {
                                if (resetPos === -1) {
                                    resetPos = m;
                                } else if (m === lastMaskChar) {
                                    m = resetPos - offset;
                                }

                                if (lastMaskChar === resetPos) {
                                    m -= offset;
                                }
                            }
                            m += offset;
                        } else if (valDigit === lastUntranslatedMaskChar) {
                            // matched the last untranslated (raw) mask character that we encountered
                            // likely an insert offset the mask character from the last entry; fall
                            // through and only increment v
                            maskDigitCount--;
                            lastUntranslatedMaskChar = undefined;
                        } else if (translation.optional) {
                            m += offset;
                            v -= offset;
                        } else if (translation.fallback) {
                            buf[addMethod](translation.fallback);
                            m += offset;
                            v -= offset;
                        } else {
                          p.invalid.push({p: v, v: valDigit, e: translation.pattern});
                        }
                        v += offset;
                    } else {
                        if (!skipMaskChars) {
                            buf[addMethod](maskDigit);
                        }

                        if (valDigit === maskDigit) {
                            maskDigitPosArr.push(v);
                            v += offset;
                        } else {
                            lastUntranslatedMaskChar = maskDigit;
                            maskDigitPosArr.push(v + maskDigitCount);
                            maskDigitCount++;
                        }

                        m += offset;
                    }
                }

                var lastMaskCharDigit = mask.charAt(lastMaskChar);
                if (maskLen === valLen + 1 && !jMask.translation[lastMaskCharDigit]) {
                    buf.push(lastMaskCharDigit);
                }

                var newVal = buf.join('');
                p.mapMaskdigitPositions(newVal, maskDigitPosArr, valLen);
                return newVal;
            },
            mapMaskdigitPositions: function(newVal, maskDigitPosArr, valLen) {
              var maskDiff = options.reverse ? newVal.length - valLen : 0;
              p.maskDigitPosMap = {};
              for (var i = 0; i < maskDigitPosArr.length; i++) {
                p.maskDigitPosMap[maskDigitPosArr[i] + maskDiff] = 1;
              }
            },
            callbacks: function (e) {
                var val = p.val(),
                    changed = val !== oldValue,
                    defaultArgs = [val, e, el, options],
                    callback = function(name, criteria, args) {
                        if (typeof options[name] === 'function' && criteria) {
                            options[name].apply(this, args);
                        }
                    };

                callback('onChange', changed === true, defaultArgs);
                callback('onKeyPress', changed === true, defaultArgs);
                callback('onComplete', val.length === mask.length, defaultArgs);
                callback('onInvalid', p.invalid.length > 0, [val, e, el, p.invalid, options]);
            }
        };

        el = $(el);
        var jMask = this, oldValue = p.val(), regexMask;

        mask = typeof mask === 'function' ? mask(p.val(), undefined, el,  options) : mask;

        // public methods
        jMask.mask = mask;
        jMask.options = options;
        jMask.remove = function() {
            var caret = p.getCaret();
            p.destroyEvents();
            p.val(jMask.getCleanVal());
            p.setCaret(caret);
            return el;
        };

        // get value without mask
        jMask.getCleanVal = function() {
           return p.getMasked(true);
        };

        // get masked value without the value being in the input or element
        jMask.getMaskedVal = function(val) {
           return p.getMasked(false, val);
        };

       jMask.init = function(onlyMask) {
            onlyMask = onlyMask || false;
            options = options || {};

            jMask.clearIfNotMatch  = $.jMaskGlobals.clearIfNotMatch;
            jMask.byPassKeys       = $.jMaskGlobals.byPassKeys;
            jMask.translation      = $.extend({}, $.jMaskGlobals.translation, options.translation);

            jMask = $.extend(true, {}, jMask, options);

            regexMask = p.getRegexMask();

            if (onlyMask) {
                p.events();
                p.val(p.getMasked());
            } else {
                if (options.placeholder) {
                    el.attr('placeholder' , options.placeholder);
                }

                // this is necessary, otherwise if the user submit the form
                // and then press the "back" button, the autocomplete will erase
                // the data. Works fine on IE9+, FF, Opera, Safari.
                if (el.data('mask')) {
                  el.attr('autocomplete', 'off');
                }

                // detect if is necessary let the user type freely.
                // for is a lot faster than forEach.
                for (var i = 0, maxlength = true; i < mask.length; i++) {
                    var translation = jMask.translation[mask.charAt(i)];
                    if (translation && translation.recursive) {
                        maxlength = false;
                        break;
                    }
                }

                if (maxlength) {
                    el.attr('maxlength', mask.length);
                }

                p.destroyEvents();
                p.events();

                var caret = p.getCaret();
                p.val(p.getMasked());
                p.setCaret(caret);
            }
        };

        jMask.init(!el.is('input'));
    };

    $.maskWatchers = {};
    var HTMLAttributes = function () {
        var input = $(this),
            options = {},
            prefix = 'data-mask-',
            mask = input.attr('data-mask');

        if (input.attr(prefix + 'reverse')) {
            options.reverse = true;
        }

        if (input.attr(prefix + 'clearifnotmatch')) {
            options.clearIfNotMatch = true;
        }

        if (input.attr(prefix + 'selectonfocus') === 'true') {
           options.selectOnFocus = true;
        }

        if (notSameMaskObject(input, mask, options)) {
            return input.data('mask', new Mask(this, mask, options));
        }
    },
    notSameMaskObject = function(field, mask, options) {
        options = options || {};
        var maskObject = $(field).data('mask'),
            stringify = JSON.stringify,
            value = $(field).val() || $(field).text();
        try {
            if (typeof mask === 'function') {
                mask = mask(value);
            }
            return typeof maskObject !== 'object' || stringify(maskObject.options) !== stringify(options) || maskObject.mask !== mask;
        } catch (e) {}
    },
    eventSupported = function(eventName) {
        var el = document.createElement('div'), isSupported;

        eventName = 'on' + eventName;
        isSupported = (eventName in el);

        if ( !isSupported ) {
            el.setAttribute(eventName, 'return;');
            isSupported = typeof el[eventName] === 'function';
        }
        el = null;

        return isSupported;
    };

    $.fn.mask = function(mask, options) {
        options = options || {};
        var selector = this.selector,
            globals = $.jMaskGlobals,
            interval = globals.watchInterval,
            watchInputs = options.watchInputs || globals.watchInputs,
            maskFunction = function() {
                if (notSameMaskObject(this, mask, options)) {
                    return $(this).data('mask', new Mask(this, mask, options));
                }
            };

        $(this).each(maskFunction);

        if (selector && selector !== '' && watchInputs) {
            clearInterval($.maskWatchers[selector]);
            $.maskWatchers[selector] = setInterval(function(){
                $(document).find(selector).each(maskFunction);
            }, interval);
        }
        return this;
    };

    $.fn.masked = function(val) {
        return this.data('mask').getMaskedVal(val);
    };

    $.fn.unmask = function() {
        clearInterval($.maskWatchers[this.selector]);
        delete $.maskWatchers[this.selector];
        return this.each(function() {
            var dataMask = $(this).data('mask');
            if (dataMask) {
                dataMask.remove().removeData('mask');
            }
        });
    };

    $.fn.cleanVal = function() {
        return this.data('mask').getCleanVal();
    };

    $.applyDataMask = function(selector) {
        selector = selector || $.jMaskGlobals.maskElements;
        var $selector = (selector instanceof $) ? selector : $(selector);
        $selector.filter($.jMaskGlobals.dataMaskAttr).each(HTMLAttributes);
    };

    var globals = {
        maskElements: 'input,td,span,div',
        dataMaskAttr: '*[data-mask]',
        dataMask: true,
        watchInterval: 300,
        watchInputs: true,
        // old versions of chrome dont work great with input event
        useInput: !/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent) && eventSupported('input'),
        watchDataMask: false,
        byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],
        translation: {
            '0': {pattern: /\d/},
            '9': {pattern: /\d/, optional: true},
            '#': {pattern: /\d/, recursive: true},
            'A': {pattern: /[a-zA-Z0-9]/},
            'S': {pattern: /[a-zA-Z]/}
        }
    };

    $.jMaskGlobals = $.jMaskGlobals || {};
    globals = $.jMaskGlobals = $.extend(true, {}, globals, $.jMaskGlobals);

    // looking for inputs with data-mask attribute
    if (globals.dataMask) {
        $.applyDataMask();
    }

    setInterval(function() {
        if ($.jMaskGlobals.watchDataMask) {
            $.applyDataMask();
        }
    }, globals.watchInterval);
}, window.jQuery, window.Zepto));

/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

(function (factory) {
    if ( typeof define === 'function' && define.amd ) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS style for Browserify
        module.exports = factory;
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function ($) {

    var toFix  = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'],
        toBind = ( 'onwheel' in document || document.documentMode >= 9 ) ?
                    ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'],
        slice  = Array.prototype.slice,
        nullLowestDeltaTimeout, lowestDelta;

    if ( $.event.fixHooks ) {
        for ( var i = toFix.length; i; ) {
            $.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks;
        }
    }

    var special = $.event.special.mousewheel = {
        version: '3.1.12',

        setup: function() {
            if ( this.addEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.addEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = handler;
            }
            // Store the line height and page height for this particular element
            $.data(this, 'mousewheel-line-height', special.getLineHeight(this));
            $.data(this, 'mousewheel-page-height', special.getPageHeight(this));
        },

        teardown: function() {
            if ( this.removeEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.removeEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = null;
            }
            // Clean up the data we added to the element
            $.removeData(this, 'mousewheel-line-height');
            $.removeData(this, 'mousewheel-page-height');
        },

        getLineHeight: function(elem) {
            var $elem = $(elem),
                $parent = $elem['offsetParent' in $.fn ? 'offsetParent' : 'parent']();
            if (!$parent.length) {
                $parent = $('body');
            }
            return parseInt($parent.css('fontSize'), 10) || parseInt($elem.css('fontSize'), 10) || 16;
        },

        getPageHeight: function(elem) {
            return $(elem).height();
        },

        settings: {
            adjustOldDeltas: true, // see shouldAdjustOldDeltas() below
            normalizeOffset: true  // calls getBoundingClientRect for each event
        }
    };

    $.fn.extend({
        mousewheel: function(fn) {
            return fn ? this.bind('mousewheel', fn) : this.trigger('mousewheel');
        },

        unmousewheel: function(fn) {
            return this.unbind('mousewheel', fn);
        }
    });


    function handler(event) {
        var orgEvent   = event || window.event,
            args       = slice.call(arguments, 1),
            delta      = 0,
            deltaX     = 0,
            deltaY     = 0,
            absDelta   = 0,
            offsetX    = 0,
            offsetY    = 0;
        event = $.event.fix(orgEvent);
        event.type = 'mousewheel';

        // Old school scrollwheel delta
        if ( 'detail'      in orgEvent ) { deltaY = orgEvent.detail * -1;      }
        if ( 'wheelDelta'  in orgEvent ) { deltaY = orgEvent.wheelDelta;       }
        if ( 'wheelDeltaY' in orgEvent ) { deltaY = orgEvent.wheelDeltaY;      }
        if ( 'wheelDeltaX' in orgEvent ) { deltaX = orgEvent.wheelDeltaX * -1; }

        // Firefox < 17 horizontal scrolling related to DOMMouseScroll event
        if ( 'axis' in orgEvent && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
            deltaX = deltaY * -1;
            deltaY = 0;
        }

        // Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy
        delta = deltaY === 0 ? deltaX : deltaY;

        // New school wheel delta (wheel event)
        if ( 'deltaY' in orgEvent ) {
            deltaY = orgEvent.deltaY * -1;
            delta  = deltaY;
        }
        if ( 'deltaX' in orgEvent ) {
            deltaX = orgEvent.deltaX;
            if ( deltaY === 0 ) { delta  = deltaX * -1; }
        }

        // No change actually happened, no reason to go any further
        if ( deltaY === 0 && deltaX === 0 ) { return; }

        // Need to convert lines and pages to pixels if we aren't already in pixels
        // There are three delta modes:
        //   * deltaMode 0 is by pixels, nothing to do
        //   * deltaMode 1 is by lines
        //   * deltaMode 2 is by pages
        if ( orgEvent.deltaMode === 1 ) {
            var lineHeight = $.data(this, 'mousewheel-line-height');
            delta  *= lineHeight;
            deltaY *= lineHeight;
            deltaX *= lineHeight;
        } else if ( orgEvent.deltaMode === 2 ) {
            var pageHeight = $.data(this, 'mousewheel-page-height');
            delta  *= pageHeight;
            deltaY *= pageHeight;
            deltaX *= pageHeight;
        }

        // Store lowest absolute delta to normalize the delta values
        absDelta = Math.max( Math.abs(deltaY), Math.abs(deltaX) );

        if ( !lowestDelta || absDelta < lowestDelta ) {
            lowestDelta = absDelta;

            // Adjust older deltas if necessary
            if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
                lowestDelta /= 40;
            }
        }

        // Adjust older deltas if necessary
        if ( shouldAdjustOldDeltas(orgEvent, absDelta) ) {
            // Divide all the things by 40!
            delta  /= 40;
            deltaX /= 40;
            deltaY /= 40;
        }

        // Get a whole, normalized value for the deltas
        delta  = Math[ delta  >= 1 ? 'floor' : 'ceil' ](delta  / lowestDelta);
        deltaX = Math[ deltaX >= 1 ? 'floor' : 'ceil' ](deltaX / lowestDelta);
        deltaY = Math[ deltaY >= 1 ? 'floor' : 'ceil' ](deltaY / lowestDelta);

        // Normalise offsetX and offsetY properties
        if ( special.settings.normalizeOffset && this.getBoundingClientRect ) {
            var boundingRect = this.getBoundingClientRect();
            offsetX = event.clientX - boundingRect.left;
            offsetY = event.clientY - boundingRect.top;
        }

        // Add information to the event object
        event.deltaX = deltaX;
        event.deltaY = deltaY;
        event.deltaFactor = lowestDelta;
        event.offsetX = offsetX;
        event.offsetY = offsetY;
        // Go ahead and set deltaMode to 0 since we converted to pixels
        // Although this is a little odd since we overwrite the deltaX/Y
        // properties with normalized deltas.
        event.deltaMode = 0;

        // Add event and delta to the front of the arguments
        args.unshift(event, delta, deltaX, deltaY);

        // Clearout lowestDelta after sometime to better
        // handle multiple device types that give different
        // a different lowestDelta
        // Ex: trackpad = 3 and mouse wheel = 120
        if (nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout); }
        nullLowestDeltaTimeout = setTimeout(nullLowestDelta, 200);

        return ($.event.dispatch || $.event.handle).apply(this, args);
    }

    function nullLowestDelta() {
        lowestDelta = null;
    }

    function shouldAdjustOldDeltas(orgEvent, absDelta) {
        // If this is an older event and the delta is divisable by 120,
        // then we are assuming that the browser is treating this as an
        // older mouse wheel event and that we should divide the deltas
        // by 40 to try and get a more usable deltaFactor.
        // Side note, this actually impacts the reported scroll distance
        // in older browsers and can cause scrolling to be slower than native.
        // Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.
        return special.settings.adjustOldDeltas && orgEvent.type === 'mousewheel' && absDelta % 120 === 0;
    }

}));

/*!
 * jScrollPane - v2.0.23 - 2016-01-28
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2014 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.fn.jScrollPane=function(b){function c(b,c){function d(c){var f,h,j,k,l,o,p=!1,q=!1;if(N=c,void 0===O)l=b.scrollTop(),o=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),P=b.innerWidth()+rb,Q=b.innerHeight(),b.width(P),O=a('<div class="jspPane" />').css("padding",qb).append(b.children()),R=a('<div class="jspContainer" />').css({width:P+"px",height:Q+"px"}).append(O).appendTo(b);else{if(b.css("width",""),p=N.stickToBottom&&A(),q=N.stickToRight&&B(),k=b.innerWidth()+rb!=P||b.outerHeight()!=Q,k&&(P=b.innerWidth()+rb,Q=b.innerHeight(),R.css({width:P+"px",height:Q+"px"})),!k&&sb==S&&O.outerHeight()==T)return void b.width(P);sb=S,O.css("width",""),b.width(P),R.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}O.css("overflow","auto"),S=c.contentWidth?c.contentWidth:O[0].scrollWidth,T=O[0].scrollHeight,O.css("overflow",""),U=S/P,V=T/Q,W=V>1,X=U>1,X||W?(b.addClass("jspScrollable"),f=N.maintainPosition&&($||bb),f&&(h=y(),j=z()),e(),g(),i(),f&&(w(q?S-P:h,!1),v(p?T-Q:j,!1)),F(),C(),L(),N.enableKeyboardNavigation&&H(),N.clickOnTrack&&m(),J(),N.hijackInternalLinks&&K()):(b.removeClass("jspScrollable"),O.css({top:0,left:0,width:R.width()-rb}),D(),G(),I(),n()),N.autoReinitialise&&!pb?pb=setInterval(function(){d(N)},N.autoReinitialiseDelay):!N.autoReinitialise&&pb&&clearInterval(pb),l&&b.scrollTop(0)&&v(l,!1),o&&b.scrollLeft(0)&&w(o,!1),b.trigger("jsp-initialised",[X||W])}function e(){W&&(R.append(a('<div class="jspVerticalBar" />').append(a('<div class="jspCap jspCapTop" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragTop" />'),a('<div class="jspDragBottom" />'))),a('<div class="jspCap jspCapBottom" />'))),cb=R.find(">.jspVerticalBar"),db=cb.find(">.jspTrack"),Y=db.find(">.jspDrag"),N.showArrows&&(hb=a('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",k(0,-1)).bind("click.jsp",E),ib=a('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",k(0,1)).bind("click.jsp",E),N.arrowScrollOnHover&&(hb.bind("mouseover.jsp",k(0,-1,hb)),ib.bind("mouseover.jsp",k(0,1,ib))),j(db,N.verticalArrowPositions,hb,ib)),fb=Q,R.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){fb-=a(this).outerHeight()}),Y.hover(function(){Y.addClass("jspHover")},function(){Y.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),Y.addClass("jspActive");var c=b.pageY-Y.position().top;return a("html").bind("mousemove.jsp",function(a){p(a.pageY-c,!1)}).bind("mouseup.jsp mouseleave.jsp",o),!1}),f())}function f(){db.height(fb+"px"),$=0,eb=N.verticalGutter+db.outerWidth(),O.width(P-eb-rb);try{0===cb.position().left&&O.css("margin-left",eb+"px")}catch(a){}}function g(){X&&(R.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),jb=R.find(">.jspHorizontalBar"),kb=jb.find(">.jspTrack"),_=kb.find(">.jspDrag"),N.showArrows&&(nb=a('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",k(-1,0)).bind("click.jsp",E),ob=a('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",k(1,0)).bind("click.jsp",E),N.arrowScrollOnHover&&(nb.bind("mouseover.jsp",k(-1,0,nb)),ob.bind("mouseover.jsp",k(1,0,ob))),j(kb,N.horizontalArrowPositions,nb,ob)),_.hover(function(){_.addClass("jspHover")},function(){_.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",E),_.addClass("jspActive");var c=b.pageX-_.position().left;return a("html").bind("mousemove.jsp",function(a){r(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",o),!1}),lb=R.innerWidth(),h())}function h(){R.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){lb-=a(this).outerWidth()}),kb.width(lb+"px"),bb=0}function i(){if(X&&W){var b=kb.outerHeight(),c=db.outerWidth();fb-=b,a(jb).find(">.jspCap:visible,>.jspArrow").each(function(){lb+=a(this).outerWidth()}),lb-=c,Q-=c,P-=b,kb.parent().append(a('<div class="jspCorner" />').css("width",b+"px")),f(),h()}X&&O.width(R.outerWidth()-rb+"px"),T=O.outerHeight(),V=T/Q,X&&(mb=Math.ceil(1/U*lb),mb>N.horizontalDragMaxWidth?mb=N.horizontalDragMaxWidth:mb<N.horizontalDragMinWidth&&(mb=N.horizontalDragMinWidth),_.width(mb+"px"),ab=lb-mb,s(bb)),W&&(gb=Math.ceil(1/V*fb),gb>N.verticalDragMaxHeight?gb=N.verticalDragMaxHeight:gb<N.verticalDragMinHeight&&(gb=N.verticalDragMinHeight),Y.height(gb+"px"),Z=fb-gb,q($))}function j(a,b,c,d){var e,f="before",g="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split"),b==f?g=b:b==g&&(f=b,e=c,c=d,d=e),a[f](c)[g](d)}function k(a,b,c){return function(){return l(a,b,this,c),this.blur(),!1}}function l(b,c,d,e){d=a(d).addClass("jspActive");var f,g,h=!0,i=function(){0!==b&&tb.scrollByX(b*N.arrowButtonSpeed),0!==c&&tb.scrollByY(c*N.arrowButtonSpeed),g=setTimeout(i,h?N.initialDelay:N.arrowRepeatFreq),h=!1};i(),f=e?"mouseout.jsp":"mouseup.jsp",e=e||a("html"),e.bind(f,function(){d.removeClass("jspActive"),g&&clearTimeout(g),g=null,e.unbind(f)})}function m(){n(),W&&db.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageY-e.top-$,g=!0,h=function(){var a=d.offset(),e=b.pageY-a.top-gb/2,j=Q*N.scrollPagePercent,k=Z*j/(T-Q);if(0>f)$-k>e?tb.scrollByY(-j):p(e);else{if(!(f>0))return void i();e>$+k?tb.scrollByY(j):p(e)}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i)};return h(),a(document).bind("mouseup.jsp",i),!1}}),X&&kb.bind("mousedown.jsp",function(b){if(void 0===b.originalTarget||b.originalTarget==b.currentTarget){var c,d=a(this),e=d.offset(),f=b.pageX-e.left-bb,g=!0,h=function(){var a=d.offset(),e=b.pageX-a.left-mb/2,j=P*N.scrollPagePercent,k=ab*j/(S-P);if(0>f)bb-k>e?tb.scrollByX(-j):r(e);else{if(!(f>0))return void i();e>bb+k?tb.scrollByX(j):r(e)}c=setTimeout(h,g?N.initialDelay:N.trackClickRepeatFreq),g=!1},i=function(){c&&clearTimeout(c),c=null,a(document).unbind("mouseup.jsp",i)};return h(),a(document).bind("mouseup.jsp",i),!1}})}function n(){kb&&kb.unbind("mousedown.jsp"),db&&db.unbind("mousedown.jsp")}function o(){a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Y&&Y.removeClass("jspActive"),_&&_.removeClass("jspActive")}function p(c,d){if(W){0>c?c=0:c>Z&&(c=Z);var e=new a.Event("jsp-will-scroll-y");if(b.trigger(e,[c]),!e.isDefaultPrevented()){var f=c||0,g=0===f,h=f==Z,i=c/Z,j=-i*(T-Q);void 0===d&&(d=N.animateScroll),d?tb.animate(Y,"top",c,q,function(){b.trigger("jsp-user-scroll-y",[-j,g,h])}):(Y.css("top",c),q(c),b.trigger("jsp-user-scroll-y",[-j,g,h]))}}}function q(a){void 0===a&&(a=Y.position().top),R.scrollTop(0),$=a||0;var c=0===$,d=$==Z,e=a/Z,f=-e*(T-Q);(ub!=c||wb!=d)&&(ub=c,wb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),t(c,d),O.css("top",f),b.trigger("jsp-scroll-y",[-f,c,d]).trigger("scroll")}function r(c,d){if(X){0>c?c=0:c>ab&&(c=ab);var e=new a.Event("jsp-will-scroll-x");if(b.trigger(e,[c]),!e.isDefaultPrevented()){var f=c||0,g=0===f,h=f==ab,i=c/ab,j=-i*(S-P);void 0===d&&(d=N.animateScroll),d?tb.animate(_,"left",c,s,function(){b.trigger("jsp-user-scroll-x",[-j,g,h])}):(_.css("left",c),s(c),b.trigger("jsp-user-scroll-x",[-j,g,h]))}}}function s(a){void 0===a&&(a=_.position().left),R.scrollTop(0),bb=a||0;var c=0===bb,d=bb==ab,e=a/ab,f=-e*(S-P);(vb!=c||xb!=d)&&(vb=c,xb=d,b.trigger("jsp-arrow-change",[ub,wb,vb,xb])),u(c,d),O.css("left",f),b.trigger("jsp-scroll-x",[-f,c,d]).trigger("scroll")}function t(a,b){N.showArrows&&(hb[a?"addClass":"removeClass"]("jspDisabled"),ib[b?"addClass":"removeClass"]("jspDisabled"))}function u(a,b){N.showArrows&&(nb[a?"addClass":"removeClass"]("jspDisabled"),ob[b?"addClass":"removeClass"]("jspDisabled"))}function v(a,b){var c=a/(T-Q);p(c*Z,b)}function w(a,b){var c=a/(S-P);r(c*ab,b)}function x(b,c,d){var e,f,g,h,i,j,k,l,m,n=0,o=0;try{e=a(b)}catch(p){return}for(f=e.outerHeight(),g=e.outerWidth(),R.scrollTop(0),R.scrollLeft(0);!e.is(".jspPane");)if(n+=e.position().top,o+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;h=z(),j=h+Q,h>n||c?l=n-N.horizontalGutter:n+f>j&&(l=n-Q+f+N.horizontalGutter),isNaN(l)||v(l,d),i=y(),k=i+P,i>o||c?m=o-N.horizontalGutter:o+g>k&&(m=o-P+g+N.horizontalGutter),isNaN(m)||w(m,d)}function y(){return-O.position().left}function z(){return-O.position().top}function A(){var a=T-Q;return a>20&&a-z()<10}function B(){var a=S-P;return a>20&&a-y()<10}function C(){R.unbind(zb).bind(zb,function(a,b,c,d){bb||(bb=0),$||($=0);var e=bb,f=$,g=a.deltaFactor||N.mouseWheelSpeed;return tb.scrollBy(c*g,-d*g,!1),e==bb&&f==$})}function D(){R.unbind(zb)}function E(){return!1}function F(){O.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){x(a.target,!1)})}function G(){O.find(":input,a").unbind("focus.jsp")}function H(){function c(){var a=bb,b=$;switch(d){case 40:tb.scrollByY(N.keyboardSpeed,!1);break;case 38:tb.scrollByY(-N.keyboardSpeed,!1);break;case 34:case 32:tb.scrollByY(Q*N.scrollPagePercent,!1);break;case 33:tb.scrollByY(-Q*N.scrollPagePercent,!1);break;case 39:tb.scrollByX(N.keyboardSpeed,!1);break;case 37:tb.scrollByX(-N.keyboardSpeed,!1)}return e=a!=bb||b!=$}var d,e,f=[];X&&f.push(jb[0]),W&&f.push(cb[0]),O.bind("focus.jsp",function(){b.focus()}),b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(b){if(b.target===this||f.length&&a(b.target).closest(f).length){var g=bb,h=$;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:d=b.keyCode,c();break;case 35:v(T-Q),d=null;break;case 36:v(0),d=null}return e=b.keyCode==d&&g!=bb||h!=$,!e}}).bind("keypress.jsp",function(b){return b.keyCode==d&&c(),b.target===this||f.length&&a(b.target).closest(f).length?!e:void 0}),N.hideFocus?(b.css("outline","none"),"hideFocus"in R[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in R[0]&&b.attr("hideFocus",!1))}function I(){b.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),O.unbind(".jsp")}function J(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash.substr(1));try{b=a("#"+d+', a[name="'+d+'"]')}catch(e){return}b.length&&O.find(d)&&(0===R.scrollTop()?c=setInterval(function(){R.scrollTop()>0&&(x(b,!0),a(document).scrollTop(R.position().top),clearInterval(c))},50):(x(b,!0),a(document).scrollTop(R.position().top)))}}function K(){a(document.body).data("jspHijack")||(a(document.body).data("jspHijack",!0),a(document.body).delegate('a[href*="#"]',"click",function(b){var c,d,e,f,g,h,i=this.href.substr(0,this.href.indexOf("#")),j=location.href;if(-1!==location.href.indexOf("#")&&(j=location.href.substr(0,location.href.indexOf("#"))),i===j){c=escape(this.href.substr(this.href.indexOf("#")+1));try{d=a("#"+c+', a[name="'+c+'"]')}catch(k){return}d.length&&(e=d.closest(".jspScrollable"),f=e.data("jsp"),f.scrollToElement(d,!0),e[0].scrollIntoView&&(g=a(window).scrollTop(),h=d.offset().top,(g>h||h>g+a(window).height())&&e[0].scrollIntoView()),b.preventDefault())}}))}function L(){var a,b,c,d,e,f=!1;R.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){var h=g.originalEvent.touches[0];a=y(),b=z(),c=h.pageX,d=h.pageY,e=!1,f=!0}).bind("touchmove.jsp",function(g){if(f){var h=g.originalEvent.touches[0],i=bb,j=$;return tb.scrollTo(a+c-h.pageX,b+d-h.pageY),e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,i==bb&&j==$}}).bind("touchend.jsp",function(){f=!1}).bind("click.jsp-touchclick",function(){return e?(e=!1,!1):void 0})}function M(){var a=z(),c=y();b.removeClass("jspScrollable").unbind(".jsp"),O.unbind(".jsp"),b.replaceWith(yb.append(O.children())),yb.scrollTop(a),yb.scrollLeft(c),pb&&clearInterval(pb)}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb=this,ub=!0,vb=!0,wb=!1,xb=!1,yb=b.clone(!1,!1).empty(),zb=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===b.css("box-sizing")?(qb=0,rb=0):(qb=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft"),rb=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0)),a.extend(tb,{reinitialise:function(b){b=a.extend({},N,b),d(b)},scrollToElement:function(a,b,c){x(a,b,c)},scrollTo:function(a,b,c){w(a,c),v(b,c)},scrollToX:function(a,b){w(a,b)},scrollToY:function(a,b){v(a,b)},scrollToPercentX:function(a,b){w(a*(S-P),b)},scrollToPercentY:function(a,b){v(a*(T-Q),b)},scrollBy:function(a,b,c){tb.scrollByX(a,c),tb.scrollByY(b,c)},scrollByX:function(a,b){var c=y()+Math[0>a?"floor":"ceil"](a),d=c/(S-P);r(d*ab,b)},scrollByY:function(a,b){var c=z()+Math[0>a?"floor":"ceil"](a),d=c/(T-Q);p(d*Z,b)},positionDragX:function(a,b){r(a,b)},positionDragY:function(a,b){p(a,b)},animate:function(a,b,c,d,e){var f={};f[b]=c,a.animate(f,{duration:N.animateDuration,easing:N.animateEase,queue:!1,step:d,complete:e})},getContentPositionX:function(){return y()},getContentPositionY:function(){return z()},getContentWidth:function(){return S},getContentHeight:function(){return T},getPercentScrolledX:function(){return y()/(S-P)},getPercentScrolledY:function(){return z()/(T-Q)},getIsScrollableH:function(){return X},getIsScrollableV:function(){return W},getContentPane:function(){return O},scrollToBottom:function(a){p(Z,a)},hijackInternalLinks:a.noop,destroy:function(){M()}}),d(c)}return b=a.extend({},a.fn.jScrollPane.defaults,b),a.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){b[this]=b[this]||b.speed}),this.each(function(){var d=a(this),e=d.data("jsp");e?e.reinitialise(b):(a("script",d).filter('[type="text/javascript"],:not([type])').remove(),e=new c(d,b),d.data("jsp",e))})},a.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}});
/*!
 * 
 *             SimpleBar.js - v2.4.3
 *             Scrollbars, simpler.
 *             https://grsmto.github.io/simplebar/
 *             
 *             Made by Adrien Grsmto from a fork by Jonathan Nicol
 *             Under MIT License
 *         
 */
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.SimpleBar=n():t.SimpleBar=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=e(194),s=r(c),u=e(191),a=r(u),f=e(193),l=r(f);e(169),e(174),e(177),e(178),e(172),e(175),e(173),e(176),e(170),e(171),e(113),e(160),e(179),e(180),e(142),e(143),e(144),e(145),e(148),e(146),e(147),e(149),e(150),e(151),e(152),e(154),e(153),e(141),e(168),e(138),e(139),e(140),e(112),e(165),e(163),e(161),e(166),e(167),e(162),e(164),e(155),e(156),e(157),e(159),e(158),e(110),e(111),e(106),e(109),e(108),e(107),e(66),e(132),e(133),e(135),e(134),e(131),e(137),e(136),e(114),e(115),e(116),e(117),e(118),e(119),e(120),e(121),e(122),e(123),e(125),e(124),e(126),e(127),e(128),e(129),e(130),e(181),e(184),e(182),e(183),e(186),e(185),e(189),e(188),e(187),e(192),e(190);var h=function(){function t(n,e){i(this,t),this.el=n,this.flashTimeout,this.contentEl,this.scrollContentEl,this.dragOffset={x:0,y:0},this.isVisible={x:!0,y:!0},this.scrollOffsetAttr={x:"scrollLeft",y:"scrollTop"},this.sizeAttr={x:"offsetWidth",y:"offsetHeight"},this.scrollSizeAttr={x:"scrollWidth",y:"scrollHeight"},this.offsetAttr={x:"left",y:"top"},this.globalObserver,this.mutationObserver,this.resizeObserver,this.currentAxis,this.options=Object.assign({},t.defaultOptions,e),this.classNames=this.options.classNames,this.scrollbarWidth=(0,s.default)(),this.offsetSize=20,this.flashScrollbar=this.flashScrollbar.bind(this),this.onDragY=this.onDragY.bind(this),this.onDragX=this.onDragX.bind(this),this.onScrollY=this.onScrollY.bind(this),this.onScrollX=this.onScrollX.bind(this),this.drag=this.drag.bind(this),this.onEndDrag=this.onEndDrag.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.recalculate=(0,a.default)(this.recalculate,100,{leading:!0,trailing:!1}),this.init()}return o(t,[{key:"init",value:function(){this.el.SimpleBar=this,this.initDOM(),this.scrollbarX=this.trackX.querySelector("."+this.classNames.scrollbar),this.scrollbarY=this.trackY.querySelector("."+this.classNames.scrollbar),this.scrollContentEl.style.paddingRight=(this.scrollbarWidth||this.offsetSize)+"px",this.scrollContentEl.style.marginBottom="-"+(2*this.scrollbarWidth||this.offsetSize)+"px",this.contentEl.style.paddingBottom=(this.scrollbarWidth||this.offsetSize)+"px",0!==this.scrollbarWidth&&(this.contentEl.style.marginRight="-"+this.scrollbarWidth+"px"),this.recalculate(),this.initListeners()}},{key:"initDOM",value:function(){var t=this;if(Array.from(this.el.children).find(function(n){return n.classList.contains(t.classNames.scrollContent)}))this.trackX=this.el.querySelector("."+this.classNames.track+".horizontal"),this.trackY=this.el.querySelector("."+this.classNames.track+".vertical"),this.scrollContentEl=this.el.querySelector("."+this.classNames.scrollContent),this.contentEl=this.el.querySelector("."+this.classNames.content);else{for(this.scrollContentEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.scrollContentEl.classList.add(this.classNames.scrollContent),this.contentEl.classList.add(this.classNames.content);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.scrollContentEl.appendChild(this.contentEl),this.el.appendChild(this.scrollContentEl)}if(!this.trackX||!this.trackY){var n=document.createElement("div"),e=document.createElement("div");n.classList.add(this.classNames.track),e.classList.add(this.classNames.scrollbar),n.appendChild(e),this.trackX=n.cloneNode(!0),this.trackX.classList.add("horizontal"),this.trackY=n.cloneNode(!0),this.trackY.classList.add("vertical"),this.el.insertBefore(this.trackX,this.el.firstChild),this.el.insertBefore(this.trackY,this.el.firstChild)}this.el.setAttribute("data-simplebar","init")}},{key:"initListeners",value:function(){var t=this;this.options.autoHide&&this.el.addEventListener("mouseenter",this.onMouseEnter),this.scrollbarY.addEventListener("mousedown",this.onDragY),this.scrollbarX.addEventListener("mousedown",this.onDragX),this.scrollContentEl.addEventListener("scroll",this.onScrollY),this.contentEl.addEventListener("scroll",this.onScrollX),"undefined"!=typeof MutationObserver&&(this.mutationObserver=new MutationObserver(function(n){n.forEach(function(n){(t.isChildNode(n.target)||n.addedNodes.length)&&t.recalculate()})}),this.mutationObserver.observe(this.el,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.resizeObserver=new l.default(this.recalculate.bind(this)),this.resizeObserver.observe(this.el)}},{key:"removeListeners",value:function(){this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),this.scrollbarX.removeEventListener("mousedown",this.onDragX),this.scrollbarY.removeEventListener("mousedown",this.onDragY),this.scrollContentEl.removeEventListener("scroll",this.onScrollY),this.contentEl.removeEventListener("scroll",this.onScrollX),this.mutationObserver.disconnect(),this.resizeObserver.disconnect()}},{key:"onDragX",value:function(t){this.onDrag(t,"x")}},{key:"onDragY",value:function(t){this.onDrag(t,"y")}},{key:"onDrag",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";t.preventDefault();var e="y"===n?this.scrollbarY:this.scrollbarX,r="y"===n?t.pageY:t.pageX;this.dragOffset[n]=r-e.getBoundingClientRect()[this.offsetAttr[n]],this.currentAxis=n,document.addEventListener("mousemove",this.drag),document.addEventListener("mouseup",this.onEndDrag)}},{key:"drag",value:function(t){var n=void 0,e=void 0,r=void 0;t.preventDefault(),"y"===this.currentAxis?(n=t.pageY,e=this.trackY,r=this.scrollContentEl):(n=t.pageX,e=this.trackX,r=this.contentEl);var i=n-e.getBoundingClientRect()[this.offsetAttr[this.currentAxis]]-this.dragOffset[this.currentAxis],o=i/e[this.sizeAttr[this.currentAxis]],c=o*this.contentEl[this.scrollSizeAttr[this.currentAxis]];r[this.scrollOffsetAttr[this.currentAxis]]=c}},{key:"onEndDrag",value:function(){document.removeEventListener("mousemove",this.drag),document.removeEventListener("mouseup",this.onEndDrag)}},{key:"resizeScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",n=void 0,e=void 0,r=void 0,i=void 0,o=void 0;"x"===t?(n=this.trackX,e=this.scrollbarX,r=this.contentEl[this.scrollOffsetAttr[t]],i=this.contentSizeX,o=this.scrollbarXSize):(n=this.trackY,e=this.scrollbarY,r=this.scrollContentEl[this.scrollOffsetAttr[t]],i=this.contentSizeY,o=this.scrollbarYSize);var c=o/i,s=r/(i-o),u=Math.max(~~(c*(o-2))-2,this.options.scrollbarMinSize),a=~~((o-4-u)*s+2);this.isVisible[t]=o<i,this.isVisible[t]?(n.style.visibility="visible","x"===t?(e.style.left=a+"px",e.style.width=u+"px"):(e.style.top=a+"px",e.style.height=u+"px")):n.style.visibility="hidden"}},{key:"onScrollX",value:function(){this.flashScrollbar("x")}},{key:"onScrollY",value:function(){this.flashScrollbar("y")}},{key:"onMouseEnter",value:function(){this.flashScrollbar("x"),this.flashScrollbar("y")}},{key:"flashScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.resizeScrollbar(t),this.showScrollbar(t)}},{key:"showScrollbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";this.isVisible[t]&&("x"===t?this.scrollbarX.classList.add("visible"):this.scrollbarY.classList.add("visible"),this.options.autoHide&&("number"==typeof this.flashTimeout&&window.clearTimeout(this.flashTimeout),this.flashTimeout=window.setTimeout(this.hideScrollbar.bind(this),1e3)))}},{key:"hideScrollbar",value:function(){this.scrollbarX.classList.remove("visible"),this.scrollbarY.classList.remove("visible"),"number"==typeof this.flashTimeout&&window.clearTimeout(this.flashTimeout)}},{key:"recalculate",value:function(){this.contentSizeX=this.contentEl[this.scrollSizeAttr.x],this.contentSizeY=this.contentEl[this.scrollSizeAttr.y]-(this.scrollbarWidth||this.offsetSize),this.scrollbarXSize=this.trackX[this.sizeAttr.x],this.scrollbarYSize=this.trackY[this.sizeAttr.y],this.resizeScrollbar("x"),this.resizeScrollbar("y"),this.options.autoHide||(this.showScrollbar("x"),this.showScrollbar("y"))}},{key:"getScrollElement",value:function(){return this.scrollContentEl}},{key:"getContentElement",value:function(){return this.contentEl}},{key:"unMount",value:function(){this.removeListeners(),this.el.SimpleBar=null}},{key:"isChildNode",value:function(t){return null!==t&&(t===this.el||this.isChildNode(t.parentNode))}}],[{key:"initHtmlApi",value:function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver(function(n){n.forEach(function(n){Array.from(n.addedNodes).forEach(function(n){1===n.nodeType&&(n.hasAttribute("data-simplebar")?!n.SimpleBar&&new t(n,t.getElOptions(n)):Array.from(n.querySelectorAll("[data-simplebar]")).forEach(function(n){!n.SimpleBar&&new t(n,t.getElOptions(n))}))}),Array.from(n.removedNodes).forEach(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")?t.SimpleBar&&t.SimpleBar.unMount():Array.from(t.querySelectorAll("[data-simplebar]")).forEach(function(t){t.SimpleBar&&t.SimpleBar.unMount()}))})})}),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements.bind(this)):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))}},{key:"getElOptions",value:function(n){var e=Object.keys(t.htmlAttributes).reduce(function(e,r){var i=t.htmlAttributes[r];return n.hasAttribute(i)&&(e[r]=JSON.parse(n.getAttribute(i)||!0)),e},{});return e}},{key:"removeObserver",value:function(){this.globalObserver.disconnect()}},{key:"initDOMLoadedElements",value:function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.from(document.querySelectorAll("[data-simplebar]")).forEach(function(n){n.SimpleBar||new t(n,t.getElOptions(n))})}},{key:"defaultOptions",get:function(){return{autoHide:!0,classNames:{content:"simplebar-content",scrollContent:"simplebar-scroll-content",scrollbar:"simplebar-scrollbar",track:"simplebar-track"},scrollbarMinSize:25}}},{key:"htmlAttributes",get:function(){return{autoHide:"data-simplebar-autohide",scrollbarMinSize:"data-simplebar-scrollbar-min-size"}}}]),t}();n.default=h,h.initHtmlApi(),t.exports=n.default},function(t,n,e){var r=e(3),i=e(34),o=e(11),c=e(16),s=e(12),u="prototype",a=function(t,n,e){var f,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,m=t&a.B,b=d?r:y?r[n]||(r[n]={}):(r[n]||{})[u],_=d?i:i[n]||(i[n]={}),w=_[u]||(_[u]={});d&&(e=n);for(f in e)l=!p&&b&&void 0!==b[f],h=(l?b:e)[f],v=m&&l?s(h,r):g&&"function"==typeof h?s(Function.call,h):h,b&&c(b,f,h,t&a.U),_[f]!=h&&o(_,f,v),g&&w[f]!=h&&(w[f]=h)};r.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,e){var r=e(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,e){var r=e(60)("wks"),i=e(22),o=e(3).Symbol,c="function"==typeof o,s=t.exports=function(t){return r[t]||(r[t]=c&&o[t]||(c?o:i)("Symbol."+t))};s.store=r},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,e){var r=e(2),i=e(71),o=e(40),c=Object.defineProperty;n.f=e(9)?Object.defineProperty:function(t,n,e){if(r(t),n=o(n,!0),r(e),i)try{return c(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},function(t,n,e){var r=e(20),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,n,e){t.exports=!e(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n){var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},function(t,n,e){var r=e(7),i=e(19);t.exports=e(9)?function(t,n,e){return r.f(t,n,i(1,e))}:function(t,n,e){return t[n]=e,t}},function(t,n,e){var r=e(17);t.exports=function(t,n,e){if(r(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,e){var r=e(54),i=e(18);t.exports=function(t){return r(i(t))}},function(t,n,e){"use strict";if(e(9)){var r=e(27),i=e(3),o=e(6),c=e(1),s=e(64),u=e(88),a=e(12),f=e(24),l=e(19),h=e(11),v=e(29),p=e(20),d=e(8),y=e(87),g=e(31),m=e(40),b=e(10),_=e(49),w=e(4),S=e(21),x=e(55),E=e(36),O=e(38),M=e(37).f,A=e(65),L=e(22),j=e(5),k=e(33),T=e(48),P=e(61),F=e(66),N=e(26),C=e(44),R=e(46),D=e(47),I=e(67),W=e(7),z=e(15),B=W.f,Y=z.f,X=i.RangeError,G=i.TypeError,V=i.Uint8Array,U="ArrayBuffer",q="Shared"+U,H="BYTES_PER_ELEMENT",K="prototype",J=Array[K],$=u.ArrayBuffer,Q=u.DataView,Z=k(0),tt=k(2),nt=k(3),et=k(4),rt=k(5),it=k(6),ot=T(!0),ct=T(!1),st=F.values,ut=F.keys,at=F.entries,ft=J.lastIndexOf,lt=J.reduce,ht=J.reduceRight,vt=J.join,pt=J.sort,dt=J.slice,yt=J.toString,gt=J.toLocaleString,mt=j("iterator"),bt=j("toStringTag"),_t=L("typed_constructor"),wt=L("def_constructor"),St=s.CONSTR,xt=s.TYPED,Et=s.VIEW,Ot="Wrong length!",Mt=k(1,function(t,n){return Tt(P(t,t[wt]),n)}),At=o(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Lt=!!V&&!!V[K].set&&o(function(){new V(1).set({})}),jt=function(t,n){var e=p(t);if(e<0||e%n)throw X("Wrong offset!");return e},kt=function(t){if(w(t)&&xt in t)return t;throw G(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&_t in t))throw G("It is not a typed array constructor!");return new t(n)},Pt=function(t,n){return Ft(P(t,t[wt]),n)},Ft=function(t,n){for(var e=0,r=n.length,i=Tt(t,r);r>e;)i[e]=n[e++];return i},Nt=function(t,n,e){B(t,n,{get:function(){return this._d[e]}})},Ct=function(t){var n,e,r,i,o,c,s=S(t),u=arguments.length,f=u>1?arguments[1]:void 0,l=void 0!==f,h=A(s);if(void 0!=h&&!x(h)){for(c=h.call(s),r=[],n=0;!(o=c.next()).done;n++)r.push(o.value);s=r}for(l&&u>2&&(f=a(f,arguments[2],2)),n=0,e=d(s.length),i=Tt(this,e);e>n;n++)i[n]=l?f(s[n],n):s[n];return i},Rt=function(){for(var t=0,n=arguments.length,e=Tt(this,n);n>t;)e[t]=arguments[t++];return e},Dt=!!V&&o(function(){gt.call(new V(1))}),It=function(){return gt.apply(Dt?dt.call(kt(this)):kt(this),arguments)},Wt={copyWithin:function(t,n){return I.call(kt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return et(kt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return D.apply(kt(this),arguments)},filter:function(t){return Pt(this,tt(kt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(kt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(kt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(kt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ct(kt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(kt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(kt(this),arguments)},lastIndexOf:function(t){return ft.apply(kt(this),arguments)},map:function(t){return Mt(kt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(kt(this),arguments)},reduceRight:function(t){return ht.apply(kt(this),arguments)},reverse:function(){for(var t,n=this,e=kt(n).length,r=Math.floor(e/2),i=0;i<r;)t=n[i],n[i++]=n[--e],n[e]=t;return n},some:function(t){return nt(kt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(kt(this),t)},subarray:function(t,n){var e=kt(this),r=e.length,i=g(t,r);return new(P(e,e[wt]))(e.buffer,e.byteOffset+i*e.BYTES_PER_ELEMENT,d((void 0===n?r:g(n,r))-i))}},zt=function(t,n){return Pt(this,dt.call(kt(this),t,n))},Bt=function(t){kt(this);var n=jt(arguments[1],1),e=this.length,r=S(t),i=d(r.length),o=0;if(i+n>e)throw X(Ot);for(;o<i;)this[n+o]=r[o++]},Yt={entries:function(){return at.call(kt(this))},keys:function(){return ut.call(kt(this))},values:function(){return st.call(kt(this))}},Xt=function(t,n){return w(t)&&t[xt]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},Gt=function(t,n){return Xt(t,n=m(n,!0))?l(2,t[n]):Y(t,n)},Vt=function(t,n,e){return!(Xt(t,n=m(n,!0))&&w(e)&&b(e,"value"))||b(e,"get")||b(e,"set")||e.configurable||b(e,"writable")&&!e.writable||b(e,"enumerable")&&!e.enumerable?B(t,n,e):(t[n]=e.value,t)};St||(z.f=Gt,W.f=Vt),c(c.S+c.F*!St,"Object",{getOwnPropertyDescriptor:Gt,defineProperty:Vt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Ut=v({},Wt);v(Ut,Yt),h(Ut,mt,Yt.values),v(Ut,{slice:zt,set:Bt,constructor:function(){},toString:yt,toLocaleString:It}),Nt(Ut,"buffer","b"),Nt(Ut,"byteOffset","o"),Nt(Ut,"byteLength","l"),Nt(Ut,"length","e"),B(Ut,bt,{get:function(){return this[xt]}}),t.exports=function(t,n,e,u){u=!!u;var a=t+(u?"Clamped":"")+"Array",l="get"+t,v="set"+t,p=i[a],g=p||{},m=p&&O(p),b=!p||!s.ABV,S={},x=p&&p[K],A=function(t,e){var r=t._d;return r.v[l](e*n+r.o,At)},L=function(t,e,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[v](e*n+i.o,r,At)},j=function(t,n){B(t,n,{get:function(){return A(this,n)},set:function(t){return L(this,n,t)},enumerable:!0})};b?(p=e(function(t,e,r,i){f(t,p,a,"_d");var o,c,s,u,l=0,v=0;if(w(e)){if(!(e instanceof $||(u=_(e))==U||u==q))return xt in e?Ft(p,e):Ct.call(p,e);o=e,v=jt(r,n);var g=e.byteLength;if(void 0===i){if(g%n)throw X(Ot);if(c=g-v,c<0)throw X(Ot)}else if(c=d(i)*n,c+v>g)throw X(Ot);s=c/n}else s=y(e),c=s*n,o=new $(c);for(h(t,"_d",{b:o,o:v,l:c,e:s,v:new Q(o)});l<s;)j(t,l++)}),x=p[K]=E(Ut),h(x,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&C(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=e(function(t,e,r,i){f(t,p,a);var o;return w(e)?e instanceof $||(o=_(e))==U||o==q?void 0!==i?new g(e,jt(r,n),i):void 0!==r?new g(e,jt(r,n)):new g(e):xt in e?Ft(p,e):Ct.call(p,e):new g(y(e))}),Z(m!==Function.prototype?M(g).concat(M(m)):M(g),function(t){t in p||h(p,t,g[t])}),p[K]=x,r||(x.constructor=p));var k=x[mt],T=!!k&&("values"==k.name||void 0==k.name),P=Yt.values;h(p,_t,!0),h(x,xt,a),h(x,Et,!0),h(x,wt,p),(u?new p(1)[bt]==a:bt in x)||B(x,bt,{get:function(){return a}}),S[a]=p,c(c.G+c.W+c.F*(p!=g),S),c(c.S,a,{BYTES_PER_ELEMENT:n}),c(c.S+c.F*o(function(){g.of.call(p,1)}),a,{from:Ct,of:Rt}),H in x||h(x,H,n),c(c.P,a,Wt),R(a),c(c.P+c.F*Lt,a,{set:Bt}),c(c.P+c.F*!T,a,Yt),r||x.toString==yt||(x.toString=yt),c(c.P+c.F*o(function(){new p(1).slice()}),a,{slice:zt}),c(c.P+c.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){x.toLocaleString.call([1,2])})),a,{toLocaleString:It}),N[a]=T?k:P,r||T||h(x,mt,P)}}else t.exports=function(){}},function(t,n,e){var r=e(39),i=e(19),o=e(13),c=e(40),s=e(10),u=e(71),a=Object.getOwnPropertyDescriptor;n.f=e(9)?a:function(t,n){if(t=o(t),n=c(n,!0),u)try{return a(t,n)}catch(t){}if(s(t,n))return i(!r.f.call(t,n),t[n])}},function(t,n,e){var r=e(3),i=e(11),o=e(10),c=e(22)("src"),s="toString",u=Function[s],a=(""+u).split(s);e(34).inspectSource=function(t){return u.call(t)},(t.exports=function(t,n,e,s){var u="function"==typeof e;u&&(o(e,"name")||i(e,"name",n)),t[n]!==e&&(u&&(o(e,c)||i(e,c,t[n]?""+t[n]:a.join(String(n)))),t===r?t[n]=e:s?t[n]?t[n]=e:i(t,n,e):(delete t[n],i(t,n,e)))})(Function.prototype,s,function(){return"function"==typeof this&&this[c]||u.call(this)})},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:e)(t)}},function(t,n,e){var r=e(18);t.exports=function(t){return Object(r(t))}},function(t,n){var e=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+r).toString(36))}},function(t,n,e){var r=e(5)("unscopables"),i=Array.prototype;void 0==i[r]&&e(11)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,n){t.exports=function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!");return t}},function(t,n){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},function(t,n){t.exports={}},function(t,n){t.exports=!1},function(t,n,e){var r=e(82),i=e(52);t.exports=Object.keys||function(t){return r(t,i)}},function(t,n,e){var r=e(16);t.exports=function(t,n,e){for(var i in n)r(t,i,n[i],e);return t}},function(t,n,e){var r=e(7).f,i=e(10),o=e(5)("toStringTag");t.exports=function(t,n,e){t&&!i(t=e?t:t.prototype,o)&&r(t,o,{configurable:!0,value:n})}},function(t,n,e){var r=e(20),i=Math.max,o=Math.min;t.exports=function(t,n){return t=r(t),t<0?i(t+n,0):o(t,n)}},function(t,n,e){var r=e(4);t.exports=function(t,n){if(!r(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}},function(t,n,e){var r=e(12),i=e(54),o=e(21),c=e(8),s=e(91);t.exports=function(t,n){var e=1==t,u=2==t,a=3==t,f=4==t,l=6==t,h=5==t||l,v=n||s;return function(n,s,p){for(var d,y,g=o(n),m=i(g),b=r(s,p,3),_=c(m.length),w=0,S=e?v(n,_):u?v(n,0):void 0;_>w;w++)if((h||w in m)&&(d=m[w],y=b(d,w,g),t))if(e)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(f)return!1;return l?-1:a||f?f:S}}},function(t,n){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)},function(t,n,e){var r=e(22)("meta"),i=e(4),o=e(10),c=e(7).f,s=0,u=Object.isExtensible||function(){return!0},a=!e(6)(function(){return u(Object.preventExtensions({}))}),f=function(t){c(t,r,{value:{i:"O"+ ++s,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!n)return"E";f(t)}return t[r].i},h=function(t,n){if(!o(t,r)){if(!u(t))return!0;if(!n)return!1;f(t)}return t[r].w},v=function(t){return a&&p.NEED&&u(t)&&!o(t,r)&&f(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,e){var r=e(2),i=e(99),o=e(52),c=e(59)("IE_PROTO"),s=function(){},u="prototype",a=function(){var t,n=e(51)("iframe"),r=o.length,i="<",c=">";for(n.style.display="none",e(70).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(i+"script"+c+"document.F=Object"+i+"/script"+c),t.close(),a=t.F;r--;)delete a[u][o[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(s[u]=r(t),e=new s,s[u]=null,e[c]=t):e=a(),void 0===n?e:i(e,n)}},function(t,n,e){var r=e(82),i=e(52).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,n,e){var r=e(10),i=e(21),o=e(59)("IE_PROTO"),c=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,e){var r=e(4);t.exports=function(t,n){if(!r(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!r(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,e){"use strict";var r=e(3),i=e(1),o=e(16),c=e(29),s=e(35),u=e(43),a=e(24),f=e(4),l=e(6),h=e(44),v=e(30),p=e(95);t.exports=function(t,n,e,d,y,g){var m=r[t],b=m,_=y?"set":"add",w=b&&b.prototype,S={},x=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!f(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!f(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,e){return n.call(this,0===t?0:t,e),this})};if("function"==typeof b&&(g||w.forEach&&!l(function(){(new b).entries().next()}))){var E=new b,O=E[_](g?{}:-0,1)!=E,M=l(function(){E.has(1)}),A=h(function(t){new b(t)}),L=!g&&l(function(){for(var t=new b,n=5;n--;)t[_](n,n);return!t.has(-0)});A||(b=n(function(n,e){a(n,b,t);var r=p(new m,n,b);return void 0!=e&&u(e,y,r[_],r),r}),b.prototype=w,w.constructor=b),(M||L)&&(x("delete"),x("has"),y&&x("get")),(L||O)&&x(_),g&&w.clear&&delete w.clear}else b=d.getConstructor(n,t,y,_),c(b.prototype,e),s.NEED=!0;return v(b,t),S[t]=b,i(i.G+i.W+i.F*(b!=m),S),g||d.setStrong(b,t,y),b}},function(t,n,e){"use strict";var r=e(11),i=e(16),o=e(6),c=e(18),s=e(5);t.exports=function(t,n,e){var u=s(t),a=e(c,u,""[t]),f=a[0],l=a[1];o(function(){var n={};return n[u]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,f),r(RegExp.prototype,u,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}},function(t,n,e){var r=e(12),i=e(76),o=e(55),c=e(2),s=e(8),u=e(65),a={},f={},n=t.exports=function(t,n,e,l,h){var v,p,d,y,g=h?function(){return t}:u(t),m=r(e,l,n?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=s(t.length);v>b;b++)if(y=n?m(c(p=t[b])[0],p[1]):m(t[b]),y===a||y===f)return y}else for(d=g.call(t);!(p=d.next()).done;)if(y=i(d,m,p.value,n),y===a||y===f)return y};n.BREAK=a,n.RETURN=f},function(t,n,e){var r=e(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var e=!1;try{var o=[7],c=o[r]();c.next=function(){return{done:e=!0}},o[r]=function(){return c},t(o)}catch(t){}return e}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,e){"use strict";var r=e(3),i=e(7),o=e(9),c=e(5)("species");t.exports=function(t){var n=r[t];o&&n&&!n[c]&&i.f(n,c,{configurable:!0,get:function(){return this}})}},function(t,n,e){"use strict";var r=e(21),i=e(31),o=e(8);t.exports=function(t){for(var n=r(this),e=o(n.length),c=arguments.length,s=i(c>1?arguments[1]:void 0,e),u=c>2?arguments[2]:void 0,a=void 0===u?e:i(u,e);a>s;)n[s++]=t;return n}},function(t,n,e){var r=e(13),i=e(8),o=e(31);t.exports=function(t){return function(n,e,c){var s,u=r(n),a=i(u.length),f=o(c,a);if(t&&e!=e){for(;a>f;)if(s=u[f++],s!=s)return!0}else for(;a>f;f++)if((t||f in u)&&u[f]===e)return t||f||0;return!t&&-1}}},function(t,n,e){var r=e(25),i=e(5)("toStringTag"),o="Arguments"==r(function(){return arguments}()),c=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,e,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=c(n=Object(t),i))?e:o?r(n):"Object"==(s=r(n))&&"function"==typeof n.callee?"Arguments":s}},function(t,n,e){"use strict";var r=e(7),i=e(19);t.exports=function(t,n,e){n in t?r.f(t,n,i(0,e)):t[n]=e}},function(t,n,e){var r=e(4),i=e(3).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,e){var r=e(5)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[r]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,e){var r=e(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,n,e){var r=e(26),i=e(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,n){var e=Math.expm1;t.exports=!e||e(10)>22025.465794806718||e(10)<22025.465794806718||e(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:e},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,e){var r=e(4),i=e(2),o=function(t,n){if(i(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=e(12)(Function.call,e(15).f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},function(t,n,e){var r=e(60)("keys"),i=e(22);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,n,e){var r=e(3),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,e){var r=e(2),i=e(17),o=e(5)("species");t.exports=function(t,n){var e,c=r(t).constructor;return void 0===c||void 0==(e=r(c)[o])?n:i(e)}},function(t,n,e){var r=e(75),i=e(18);t.exports=function(t,n,e){if(r(n))throw TypeError("String#"+e+" doesn't accept regex!");return String(i(t))}},function(t,n,e){var r,i,o,c=e(12),s=e(72),u=e(70),a=e(51),f=e(3),l=f.process,h=f.setImmediate,v=f.clearImmediate,p=f.MessageChannel,d=f.Dispatch,y=0,g={},m="onreadystatechange",b=function(){var t=+this;if(g.hasOwnProperty(t)){var n=g[t];delete g[t],n()}},_=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return g[++y]=function(){s("function"==typeof t?t:Function(t),n)},r(y),y},v=function(t){delete g[t]},"process"==e(25)(l)?r=function(t){l.nextTick(c(b,t,1))}:d&&d.now?r=function(t){d.now(c(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=_,r=c(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",_,!1)):r=m in a("script")?function(t){u.appendChild(a("script"))[m]=function(){u.removeChild(this),b.call(t)}}:function(t){setTimeout(c(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,e){for(var r,i=e(3),o=e(11),c=e(22),s=c("typed_array"),u=c("view"),a=!(!i.ArrayBuffer||!i.DataView),f=a,l=0,h=9,v="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<h;)(r=i[v[l++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):f=!1;t.exports={ABV:a,CONSTR:f,TYPED:s,VIEW:u}},function(t,n,e){var r=e(49),i=e(5)("iterator"),o=e(26);t.exports=e(34).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,n,e){"use strict";var r=e(23),i=e(78),o=e(26),c=e(13);t.exports=e(77)(Array,"Array",function(t,n){this._t=c(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,e):"values"==n?i(0,t[e]):i(0,[e,t[e]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,n,e){"use strict";var r=e(21),i=e(31),o=e(8);t.exports=[].copyWithin||function(t,n){var e=r(this),c=o(e.length),s=i(t,c),u=i(n,c),a=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===a?c:i(a,c))-u,c-s),l=1;for(u<s&&s<u+f&&(l=-1,u+=f-1,s+=f-1);f-- >0;)u in e?e[s]=e[u]:delete e[s],s+=l,u+=l;return e}},function(t,n,e){"use strict";var r=e(7).f,i=e(36),o=e(29),c=e(12),s=e(24),u=e(43),a=e(77),f=e(78),l=e(46),h=e(9),v=e(35).fastKey,p=e(32),d=h?"_s":"size",y=function(t,n){var e,r=v(n);if("F"!==r)return t._i[r];for(e=t._f;e;e=e.n)if(e.k==n)return e};t.exports={getConstructor:function(t,n,e,a){var f=t(function(t,r){s(t,f,n,"_i"),t._t=n,t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=r&&u(r,e,t[a],t)});return o(f.prototype,{
clear:function(){for(var t=p(this,n),e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var e=p(this,n),r=y(e,t);if(r){var i=r.n,o=r.p;delete e._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),e._f==r&&(e._f=i),e._l==r&&(e._l=o),e[d]--}return!!r},forEach:function(t){p(this,n);for(var e,r=c(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!y(p(this,n),t)}}),h&&r(f.prototype,"size",{get:function(){return p(this,n)[d]}}),f},def:function(t,n,e){var r,i,o=y(t,n);return o?o.v=e:(t._l=o={i:i=v(n,!0),k:n,v:e,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,e){a(t,n,function(t,e){this._t=p(t,n),this._k=e,this._l=void 0},function(){for(var t=this,n=t._k,e=t._l;e&&e.r;)e=e.p;return t._t&&(t._l=e=e?e.n:t._t._f)?"keys"==n?f(0,e.k):"values"==n?f(0,e.v):f(0,[e.k,e.v]):(t._t=void 0,f(1))},e?"entries":"values",!e,!0),l(n)}}},function(t,n,e){"use strict";var r=e(29),i=e(35).getWeak,o=e(2),c=e(4),s=e(24),u=e(43),a=e(33),f=e(10),l=e(32),h=a(5),v=a(6),p=0,d=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,n){return h(t.a,function(t){return t[0]===n})};y.prototype={get:function(t){var n=g(this,t);if(n)return n[1]},has:function(t){return!!g(this,t)},set:function(t,n){var e=g(this,t);e?e[1]=n:this.a.push([t,n])},delete:function(t){var n=v(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,e,o){var a=t(function(t,r){s(t,a,n,"_i"),t._t=n,t._i=p++,t._l=void 0,void 0!=r&&u(r,e,t[o],t)});return r(a.prototype,{delete:function(t){if(!c(t))return!1;var e=i(t);return e===!0?d(l(this,n)).delete(t):e&&f(e,this._i)&&delete e[this._i]},has:function(t){if(!c(t))return!1;var e=i(t);return e===!0?d(l(this,n)).has(t):e&&f(e,this._i)}}),a},def:function(t,n,e){var r=i(o(n),!0);return r===!0?d(t).set(n,e):r[t._i]=e,t},ufstore:d}},function(t,n,e){var r=e(3).document;t.exports=r&&r.documentElement},function(t,n,e){t.exports=!e(9)&&!e(6)(function(){return 7!=Object.defineProperty(e(51)("div"),"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t,n,e){var r=void 0===e;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)}},function(t,n,e){var r=e(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,n,e){var r=e(4),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,n,e){var r=e(4),i=e(25),o=e(5)("match");t.exports=function(t){var n;return r(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,e){var r=e(2);t.exports=function(t,n,e,i){try{return i?n(r(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&r(o.call(t)),n}}},function(t,n,e){"use strict";var r=e(27),i=e(1),o=e(16),c=e(11),s=e(10),u=e(26),a=e(96),f=e(30),l=e(38),h=e(5)("iterator"),v=!([].keys&&"next"in[].keys()),p="@@iterator",d="keys",y="values",g=function(){return this};t.exports=function(t,n,e,m,b,_,w){a(e,n,m);var S,x,E,O=function(t){if(!v&&t in j)return j[t];switch(t){case d:return function(){return new e(this,t)};case y:return function(){return new e(this,t)}}return function(){return new e(this,t)}},M=n+" Iterator",A=b==y,L=!1,j=t.prototype,k=j[h]||j[p]||b&&j[b],T=k||O(b),P=b?A?O("entries"):T:void 0,F="Array"==n?j.entries||k:k;if(F&&(E=l(F.call(new t)),E!==Object.prototype&&E.next&&(f(E,M,!0),r||s(E,h)||c(E,h,g))),A&&k&&k.name!==y&&(L=!0,T=function(){return k.call(this)}),r&&!w||!v&&!L&&j[h]||c(j,h,T),u[n]=T,u[M]=g,b)if(S={values:A?T:O(y),keys:_?T:O(d),entries:P},w)for(x in S)x in j||o(j,x,S[x]);else i(i.P+i.F*(v||L),n,S);return S}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,e){"use strict";function r(t){var n,e;this.promise=new t(function(t,r){if(void 0!==n||void 0!==e)throw TypeError("Bad Promise constructor");n=t,e=r}),this.resolve=i(n),this.reject=i(e)}var i=e(17);t.exports.f=function(t){return new r(t)}},function(t,n,e){"use strict";var r=e(28),i=e(45),o=e(39),c=e(21),s=e(54),u=Object.assign;t.exports=!u||e(6)(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=u({},t)[e]||Object.keys(u({},n)).join("")!=r})?function(t,n){for(var e=c(t),u=arguments.length,a=1,f=i.f,l=o.f;u>a;)for(var h,v=s(arguments[a++]),p=f?r(v).concat(f(v)):r(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(e[h]=v[h]);return e}:u},function(t,n,e){var r=e(10),i=e(13),o=e(48)(!1),c=e(59)("IE_PROTO");t.exports=function(t,n){var e,s=i(t),u=0,a=[];for(e in s)e!=c&&r(s,e)&&a.push(e);for(;n.length>u;)r(s,e=n[u++])&&(~o(a,e)||a.push(e));return a}},function(t,n,e){var r=e(28),i=e(13),o=e(39).f;t.exports=function(t){return function(n){for(var e,c=i(n),s=r(c),u=s.length,a=0,f=[];u>a;)o.call(c,e=s[a++])&&f.push(t?[e,c[e]]:c[e]);return f}}},function(t,n,e){var r=e(37),i=e(45),o=e(2),c=e(3).Reflect;t.exports=c&&c.ownKeys||function(t){var n=r.f(o(t)),e=i.f;return e?n.concat(e(t)):n}},function(t,n,e){var r=e(8),i=e(86),o=e(18);t.exports=function(t,n,e,c){var s=String(o(t)),u=s.length,a=void 0===e?" ":String(e),f=r(n);if(f<=u||""==a)return s;var l=f-u,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),c?h+s:s+h}},function(t,n,e){"use strict";var r=e(20),i=e(18);t.exports=function(t){var n=String(i(this)),e="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(e+=n);return e}},function(t,n,e){var r=e(20),i=e(8);t.exports=function(t){if(void 0===t)return 0;var n=r(t),e=i(n);if(n!==e)throw RangeError("Wrong length!");return e}},function(t,n,e){"use strict";function r(t,n,e){var r,i,o,c=Array(e),s=8*e-n-1,u=(1<<s)-1,a=u>>1,f=23===n?B(2,-24)-B(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=z(t),t!=t||t===I?(i=t!=t?1:0,r=u):(r=Y(X(t)/G),t*(o=B(2,-r))<1&&(r--,o*=2),t+=r+a>=1?f/o:f*B(2,1-a),t*o>=2&&(r++,o/=2),r+a>=u?(i=0,r=u):r+a>=1?(i=(t*o-1)*B(2,n),r+=a):(i=t*B(2,a-1)*B(2,n),r=0));n>=8;c[l++]=255&i,i/=256,n-=8);for(r=r<<n|i,s+=n;s>0;c[l++]=255&r,r/=256,s-=8);return c[--l]|=128*h,c}function i(t,n,e){var r,i=8*e-n-1,o=(1<<i)-1,c=o>>1,s=i-7,u=e-1,a=t[u--],f=127&a;for(a>>=7;s>0;f=256*f+t[u],u--,s-=8);for(r=f&(1<<-s)-1,f>>=-s,s+=n;s>0;r=256*r+t[u],u--,s-=8);if(0===f)f=1-c;else{if(f===o)return r?NaN:a?-I:I;r+=B(2,n),f-=c}return(a?-1:1)*r*B(2,f-n)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function c(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function u(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function a(t){return r(t,52,8)}function f(t){return r(t,23,4)}function l(t,n,e){M(t[T],n,{get:function(){return this[e]}})}function h(t,n,e,r){var i=+e,o=E(i);if(o+n>t[K])throw D(F);var c=t[H]._b,s=o+t[J],u=c.slice(s,s+n);return r?u:u.reverse()}function v(t,n,e,r,i,o){var c=+e,s=E(c);if(s+n>t[K])throw D(F);for(var u=t[H]._b,a=s+t[J],f=r(+i),l=0;l<n;l++)u[a+l]=f[o?l:n-l-1]}var p=e(3),d=e(9),y=e(27),g=e(64),m=e(11),b=e(29),_=e(6),w=e(24),S=e(20),x=e(8),E=e(87),O=e(37).f,M=e(7).f,A=e(47),L=e(30),j="ArrayBuffer",k="DataView",T="prototype",P="Wrong length!",F="Wrong index!",N=p[j],C=p[k],R=p.Math,D=p.RangeError,I=p.Infinity,W=N,z=R.abs,B=R.pow,Y=R.floor,X=R.log,G=R.LN2,V="buffer",U="byteLength",q="byteOffset",H=d?"_b":V,K=d?"_l":U,J=d?"_o":q;if(g.ABV){if(!_(function(){N(1)})||!_(function(){new N(-1)})||_(function(){return new N,new N(1.5),new N(NaN),N.name!=j})){N=function(t){return w(this,N),new W(E(t))};for(var $,Q=N[T]=W[T],Z=O(W),tt=0;Z.length>tt;)($=Z[tt++])in N||m(N,$,W[$]);y||(Q.constructor=N)}var nt=new C(new N(2)),et=C[T].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||b(C[T],{setInt8:function(t,n){et.call(this,t,n<<24>>24)},setUint8:function(t,n){et.call(this,t,n<<24>>24)}},!0)}else N=function(t){w(this,N,j);var n=E(t);this._b=A.call(Array(n),0),this[K]=n},C=function(t,n,e){w(this,C,k),w(t,N,k);var r=t[K],i=S(n);if(i<0||i>r)throw D("Wrong offset!");if(e=void 0===e?r-i:x(e),i+e>r)throw D(P);this[H]=t,this[J]=i,this[K]=e},d&&(l(N,U,"_l"),l(C,V,"_b"),l(C,U,"_l"),l(C,q,"_o")),b(C[T],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var n=h(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=h(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){v(this,1,t,c,n)},setUint8:function(t,n){v(this,1,t,c,n)},setInt16:function(t,n){v(this,2,t,s,n,arguments[2])},setUint16:function(t,n){v(this,2,t,s,n,arguments[2])},setInt32:function(t,n){v(this,4,t,u,n,arguments[2])},setUint32:function(t,n){v(this,4,t,u,n,arguments[2])},setFloat32:function(t,n){v(this,4,t,f,n,arguments[2])},setFloat64:function(t,n){v(this,8,t,a,n,arguments[2])}});L(N,j),L(C,k),m(C[T],g.VIEW,!0),n[j]=N,n[k]=C},function(t,n,e){n.f=e(5)},function(t,n,e){var r=e(4),i=e(73),o=e(5)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),r(n)&&(n=n[o],null===n&&(n=void 0))),void 0===n?Array:n}},function(t,n,e){var r=e(90);t.exports=function(t,n){return new(r(t))(n)}},function(t,n,e){"use strict";var r=e(17),i=e(4),o=e(72),c=[].slice,s={},u=function(t,n,e){if(!(n in s)){for(var r=[],i=0;i<n;i++)r[i]="a["+i+"]";s[n]=Function("F,a","return new F("+r.join(",")+")")}return s[n](t,e)};t.exports=Function.bind||function(t){var n=r(this),e=c.call(arguments,1),s=function(){var r=e.concat(c.call(arguments));return this instanceof s?u(n,r.length,r):o(n,r,t)};return i(n.prototype)&&(s.prototype=n.prototype),s}},function(t,n,e){var r=e(28),i=e(45),o=e(39);t.exports=function(t){var n=r(t),e=i.f;if(e)for(var c,s=e(t),u=o.f,a=0;s.length>a;)u.call(t,c=s[a++])&&n.push(c);return n}},function(t,n,e){"use strict";var r=e(2);t.exports=function(){var t=r(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n,e){var r=e(4),i=e(58).set;t.exports=function(t,n,e){var o,c=n.constructor;return c!==e&&"function"==typeof c&&(o=c.prototype)!==e.prototype&&r(o)&&i&&i(t,o),t}},function(t,n,e){"use strict";var r=e(36),i=e(19),o=e(30),c={};e(11)(c,e(5)("iterator"),function(){return this}),t.exports=function(t,n,e){t.prototype=r(c,{next:i(1,e)}),o(t,n+" Iterator")}},function(t,n,e){var r=e(57),i=Math.pow,o=i(2,-52),c=i(2,-23),s=i(2,127)*(2-c),u=i(2,-126),a=function(t){return t+1/o-1/o};t.exports=Math.fround||function(t){var n,e,i=Math.abs(t),f=r(t);return i<u?f*a(i/u/c)*u*c:(n=(1+c/o)*i,e=n-(n-i),e>s||e!=e?f*(1/0):f*e)}},function(t,n,e){var r=e(3),i=e(63).set,o=r.MutationObserver||r.WebKitMutationObserver,c=r.process,s=r.Promise,u="process"==e(25)(c);t.exports=function(){var t,n,e,a=function(){var r,i;for(u&&(r=c.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?e():n=void 0,r}}n=void 0,r&&r.enter()};if(u)e=function(){c.nextTick(a)};else if(o){var f=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),e=function(){l.data=f=!f}}else if(s&&s.resolve){var h=s.resolve();e=function(){h.then(a)}}else e=function(){i.call(r,a)};return function(r){var i={fn:r,next:void 0};n&&(n.next=i),t||(t=i,e()),n=i}}},function(t,n,e){var r=e(7),i=e(2),o=e(28);t.exports=e(9)?Object.defineProperties:function(t,n){i(t);for(var e,c=o(n),s=c.length,u=0;s>u;)r.f(t,e=c[u++],n[e]);return t}},function(t,n,e){var r=e(13),i=e(37).f,o={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return c.slice()}};t.exports.f=function(t){return c&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,n){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,n,e){var r=e(2),i=e(4),o=e(80);t.exports=function(t,n){if(r(t),i(n)&&n.constructor===t)return n;var e=o.f(t),c=e.resolve;return c(n),e.promise}},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t===1/n:t!=t&&n!=n}},function(t,n,e){var r=e(20),i=e(18);t.exports=function(t){return function(n,e){var o,c,s=String(i(n)),u=r(e),a=s.length;return u<0||u>=a?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===a||(c=s.charCodeAt(u+1))<56320||c>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(c-56320)+65536)}}},function(t,n,e){var r=e(3),i=e(34),o=e(27),c=e(89),s=e(7).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in n||s(n,t,{value:c.f(t)})}},function(t,n,e){var r=e(1);r(r.P,"Array",{copyWithin:e(67)}),e(23)("copyWithin")},function(t,n,e){var r=e(1);r(r.P,"Array",{fill:e(47)}),e(23)("fill")},function(t,n,e){"use strict";var r=e(1),i=e(33)(6),o="findIndex",c=!0;o in[]&&Array(1)[o](function(){c=!1}),r(r.P+r.F*c,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)(o)},function(t,n,e){"use strict";var r=e(1),i=e(33)(5),o="find",c=!0;o in[]&&Array(1)[o](function(){c=!1}),r(r.P+r.F*c,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)(o)},function(t,n,e){"use strict";var r=e(12),i=e(1),o=e(21),c=e(76),s=e(55),u=e(8),a=e(50),f=e(65);i(i.S+i.F*!e(44)(function(t){Array.from(t)}),"Array",{from:function(t){var n,e,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,m=f(h);if(y&&(d=r(d,p>2?arguments[2]:void 0,2)),void 0==m||v==Array&&s(m))for(n=u(h.length),e=new v(n);n>g;g++)a(e,g,y?d(h[g],g):h[g]);else for(l=m.call(h),e=new v;!(i=l.next()).done;g++)a(e,g,y?c(l,d,[i.value,g],!0):i.value);return e.length=g,e}})},function(t,n,e){"use strict";var r=e(1),i=e(50);r(r.S+r.F*e(6)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,e=new("function"==typeof this?this:Array)(n);n>t;)i(e,t,arguments[t++]);return e.length=n,e}})},function(t,n,e){var r=e(7).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,c="name";c in i||e(9)&&r(i,c,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,n,e){"use strict";var r=e(68),i=e(32),o="Map";t.exports=e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=r.getEntry(i(this,o),t);return n&&n.v},set:function(t,n){return r.def(i(this,o),0===t?0:t,n)}},r,!0)},function(t,n,e){var r=e(1),i=e(79),o=Math.sqrt,c=Math.acosh;r(r.S+r.F*!(c&&710==Math.floor(c(Number.MAX_VALUE))&&c(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,e){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=e(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(t,n,e){var r=e(1),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,e){var r=e(1),i=e(57);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,e){var r=e(1);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,e){var r=e(1),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,e){var r=e(1),i=e(56);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,e){var r=e(1);r(r.S,"Math",{fround:e(97)})},function(t,n,e){var r=e(1),i=Math.abs;r(r.S,"Math",{hypot:function(t,n){for(var e,r,o=0,c=0,s=arguments.length,u=0;c<s;)e=i(arguments[c++]),u<e?(r=u/e,o=o*r*r+1,u=e):e>0?(r=e/u,o+=r*r):o+=e;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,n,e){var r=e(1),i=Math.imul;r(r.S+r.F*e(6)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(t,n){var e=65535,r=+t,i=+n,o=e&r,c=e&i;return 0|o*c+((e&r>>>16)*c+o*(e&i>>>16)<<16>>>0)}})},function(t,n,e){var r=e(1);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,n,e){var r=e(1);r(r.S,"Math",{log1p:e(79)})},function(t,n,e){var r=e(1);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,e){var r=e(1);r(r.S,"Math",{sign:e(57)})},function(t,n,e){var r=e(1),i=e(56),o=Math.exp;r(r.S+r.F*e(6)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,e){var r=e(1),i=e(56),o=Math.exp;r(r.S,"Math",{tanh:function(t){var n=i(t=+t),e=i(-t);return n==1/0?1:e==1/0?-1:(n-e)/(o(t)+o(-t))}})},function(t,n,e){var r=e(1);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,e){var r=e(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,e){var r=e(1),i=e(3).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,e){var r=e(1);r(r.S,"Number",{isInteger:e(74)})},function(t,n,e){var r=e(1);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,e){var r=e(1),i=e(74),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,e){var r=e(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,e){var r=e(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,e){var r=e(1);r(r.S+r.F,"Object",{assign:e(81)})},function(t,n,e){var r=e(1);r(r.S,"Object",{is:e(103)})},function(t,n,e){var r=e(1);r(r.S,"Object",{setPrototypeOf:e(58).set})},function(t,n,e){"use strict";var r,i,o,c,s=e(27),u=e(3),a=e(12),f=e(49),l=e(1),h=e(4),v=e(17),p=e(24),d=e(43),y=e(61),g=e(63).set,m=e(98)(),b=e(80),_=e(101),w=e(102),S="Promise",x=u.TypeError,E=u.process,O=u[S],M="process"==f(E),A=function(){},L=i=b.f,j=!!function(){try{var t=O.resolve(1),n=(t.constructor={})[e(5)("species")]=function(t){t(A,A)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(A)instanceof n}catch(t){}}(),k=function(t){var n;return!(!h(t)||"function"!=typeof(n=t.then))&&n},T=function(t,n){if(!t._n){t._n=!0;var e=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,c=function(n){var e,o,c=i?n.ok:n.fail,s=n.resolve,u=n.reject,a=n.domain;try{c?(i||(2==t._h&&N(t),t._h=1),c===!0?e=r:(a&&a.enter(),e=c(r),a&&a.exit()),e===n.promise?u(x("Promise-chain cycle")):(o=k(e))?o.call(e,s,u):s(e)):u(r)}catch(t){u(t)}};e.length>o;)c(e[o++]);t._c=[],t._n=!1,n&&!t._h&&P(t)})}},P=function(t){g.call(u,function(){var n,e,r,i=t._v,o=F(t);if(o&&(n=_(function(){M?E.emit("unhandledRejection",i,t):(e=u.onunhandledrejection)?e({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=M||F(t)?2:1),t._a=void 0,o&&n.e)throw n.v})},F=function(t){if(1==t._h)return!1;for(var n,e=t._a||t._c,r=0;e.length>r;)if(n=e[r++],n.fail||!F(n.promise))return!1;return!0},N=function(t){g.call(u,function(){var n;M?E.emit("rejectionHandled",t):(n=u.onrejectionhandled)&&n({promise:t,reason:t._v})})},C=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),T(n,!0))},R=function(t){var n,e=this;if(!e._d){e._d=!0,e=e._w||e;try{if(e===t)throw x("Promise can't be resolved itself");(n=k(t))?m(function(){var r={_w:e,_d:!1};try{n.call(t,a(R,r,1),a(C,r,1))}catch(t){C.call(r,t)}}):(e._v=t,e._s=1,T(e,!1))}catch(t){C.call({_w:e,_d:!1},t)}}};j||(O=function(t){p(this,O,S,"_h"),v(t),r.call(this);try{t(a(R,this,1),a(C,this,1))}catch(t){C.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e(29)(O.prototype,{then:function(t,n){var e=L(y(this,O));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=M?E.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&T(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=a(R,t,1),this.reject=a(C,t,1)},b.f=L=function(t){return t===O||t===c?new o(t):i(t)}),l(l.G+l.W+l.F*!j,{Promise:O}),e(30)(O,S),e(46)(S),c=e(34)[S],l(l.S+l.F*!j,S,{reject:function(t){var n=L(this),e=n.reject;return e(t),n.promise}}),l(l.S+l.F*(s||!j),S,{resolve:function(t){return w(s&&this===c?O:this,t)}}),l(l.S+l.F*!(j&&e(44)(function(t){O.all(t).catch(A)})),S,{all:function(t){var n=this,e=L(n),r=e.resolve,i=e.reject,o=_(function(){var e=[],o=0,c=1;d(t,!1,function(t){var s=o++,u=!1;e.push(void 0),c++,n.resolve(t).then(function(t){u||(u=!0,e[s]=t,--c||r(e))},i)}),--c||r(e)});return o.e&&i(o.v),e.promise},race:function(t){var n=this,e=L(n),r=e.reject,i=_(function(){d(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return i.e&&r(i.v),e.promise}})},function(t,n,e){var r=e(1),i=e(17),o=e(2),c=(e(3).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!e(6)(function(){c(function(){})}),"Reflect",{apply:function(t,n,e){var r=i(t),u=o(e);return c?c(r,n,u):s.call(r,n,u)}})},function(t,n,e){var r=e(1),i=e(36),o=e(17),c=e(2),s=e(4),u=e(6),a=e(92),f=(e(3).Reflect||{}).construct,l=u(function(){function t(){}return!(f(function(){},[],t)instanceof t)}),h=!u(function(){f(function(){})});r(r.S+r.F*(l||h),"Reflect",{construct:function(t,n){o(t),c(n);var e=arguments.length<3?t:o(arguments[2]);if(h&&!l)return f(t,n,e);if(t==e){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var r=[null];return r.push.apply(r,n),new(a.apply(t,r))}var u=e.prototype,v=i(s(u)?u:Object.prototype),p=Function.apply.call(t,v,n);return s(p)?p:v}})},function(t,n,e){var r=e(7),i=e(1),o=e(2),c=e(40);i(i.S+i.F*e(6)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,e){o(t),n=c(n,!0),o(e);try{return r.f(t,n,e),!0}catch(t){return!1}}})},function(t,n,e){var r=e(1),i=e(15).f,o=e(2);r(r.S,"Reflect",{deleteProperty:function(t,n){var e=i(o(t),n);return!(e&&!e.configurable)&&delete t[n]}})},function(t,n,e){var r=e(15),i=e(1),o=e(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return r.f(o(t),n)}})},function(t,n,e){var r=e(1),i=e(38),o=e(2);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,e){function r(t,n){var e,s,f=arguments.length<3?t:arguments[2];return a(t)===f?t[n]:(e=i.f(t,n))?c(e,"value")?e.value:void 0!==e.get?e.get.call(f):void 0:u(s=o(t))?r(s,n,f):void 0}var i=e(15),o=e(38),c=e(10),s=e(1),u=e(4),a=e(2);s(s.S,"Reflect",{get:r})},function(t,n,e){var r=e(1);r(r.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,e){var r=e(1),i=e(2),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,e){var r=e(1);r(r.S,"Reflect",{ownKeys:e(84)})},function(t,n,e){var r=e(1),i=e(2),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,e){var r=e(1),i=e(58);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,e){function r(t,n,e){var u,h,v=arguments.length<4?t:arguments[3],p=o.f(f(t),n);if(!p){if(l(h=c(t)))return r(h,n,e,v);p=a(0)}return s(p,"value")?!(p.writable===!1||!l(v))&&(u=o.f(v,n)||a(0),u.value=e,i.f(v,n,u),!0):void 0!==p.set&&(p.set.call(v,e),!0)}var i=e(7),o=e(15),c=e(38),s=e(10),u=e(1),a=e(19),f=e(2),l=e(4);u(u.S,"Reflect",{set:r})},function(t,n,e){e(9)&&"g"!=/./g.flags&&e(7).f(RegExp.prototype,"flags",{configurable:!0,get:e(94)})},function(t,n,e){e(42)("match",1,function(t,n,e){return[function(e){"use strict";var r=t(this),i=void 0==e?void 0:e[n];return void 0!==i?i.call(e,r):new RegExp(e)[n](String(r))},e]})},function(t,n,e){e(42)("replace",2,function(t,n,e){return[function(r,i){"use strict";var o=t(this),c=void 0==r?void 0:r[n];return void 0!==c?c.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,e){e(42)("search",1,function(t,n,e){return[function(e){"use strict";var r=t(this),i=void 0==e?void 0:e[n];return void 0!==i?i.call(e,r):new RegExp(e)[n](String(r))},e]})},function(t,n,e){e(42)("split",2,function(t,n,r){"use strict";var i=e(75),o=r,c=[].push,s="split",u="length",a="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[u]||2!="ab"[s](/(?:ab)*/)[u]||4!="."[s](/(.?)(.?)/)[u]||"."[s](/()()/)[u]>1||""[s](/.?/)[u]){var f=void 0===/()??/.exec("")[1];r=function(t,n){var e=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(e,t,n);var r,s,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,m=new RegExp(t.source,d+"g");for(f||(r=new RegExp("^"+m.source+"$(?!\\s)",d));(s=m.exec(e))&&(l=s.index+s[0][u],!(l>y&&(p.push(e.slice(y,s.index)),!f&&s[u]>1&&s[0].replace(r,function(){for(v=1;v<arguments[u]-2;v++)void 0===arguments[v]&&(s[v]=void 0)}),s[u]>1&&s.index<e[u]&&c.apply(p,s.slice(1)),h=s[0][u],y=l,p[u]>=g)));)m[a]===s.index&&m[a]++;return y===e[u]?!h&&m.test("")||p.push(""):p.push(e.slice(y)),p[u]>g?p.slice(0,g):p}}else"0"[s](void 0,0)[u]&&(r=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(e,i){var o=t(this),c=void 0==e?void 0:e[n];return void 0!==c?c.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,e){"use strict";var r=e(68),i=e(32),o="Set";t.exports=e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t=0===t?0:t,t)}},r)},function(t,n,e){"use strict";var r=e(1),i=e(104)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,e){"use strict";var r=e(1),i=e(8),o=e(62),c="endsWith",s=""[c];r(r.P+r.F*e(53)(c),"String",{endsWith:function(t){var n=o(this,t,c),e=arguments.length>1?arguments[1]:void 0,r=i(n.length),u=void 0===e?r:Math.min(i(e),r),a=String(t);return s?s.call(n,a,u):n.slice(u-a.length,u)===a}})},function(t,n,e){var r=e(1),i=e(31),o=String.fromCharCode,c=String.fromCodePoint;r(r.S+r.F*(!!c&&1!=c.length),"String",{fromCodePoint:function(t){for(var n,e=[],r=arguments.length,c=0;r>c;){if(n=+arguments[c++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");e.push(n<65536?o(n):o(((n-=65536)>>10)+55296,n%1024+56320))}return e.join("")}})},function(t,n,e){"use strict";var r=e(1),i=e(62),o="includes";r(r.P+r.F*e(53)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,e){var r=e(1),i=e(13),o=e(8);r(r.S,"String",{raw:function(t){for(var n=i(t.raw),e=o(n.length),r=arguments.length,c=[],s=0;e>s;)c.push(String(n[s++])),s<r&&c.push(String(arguments[s]));return c.join("")}})},function(t,n,e){var r=e(1);r(r.P,"String",{repeat:e(86)})},function(t,n,e){"use strict";var r=e(1),i=e(8),o=e(62),c="startsWith",s=""[c];r(r.P+r.F*e(53)(c),"String",{startsWith:function(t){var n=o(this,t,c),e=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),r=String(t);return s?s.call(n,r,e):n.slice(e,e+r.length)===r}})},function(t,n,e){"use strict";var r=e(3),i=e(10),o=e(9),c=e(1),s=e(16),u=e(35).KEY,a=e(6),f=e(60),l=e(30),h=e(22),v=e(5),p=e(89),d=e(105),y=e(93),g=e(73),m=e(2),b=e(13),_=e(40),w=e(19),S=e(36),x=e(100),E=e(15),O=e(7),M=e(28),A=E.f,L=O.f,j=x.f,k=r.Symbol,T=r.JSON,P=T&&T.stringify,F="prototype",N=v("_hidden"),C=v("toPrimitive"),R={}.propertyIsEnumerable,D=f("symbol-registry"),I=f("symbols"),W=f("op-symbols"),z=Object[F],B="function"==typeof k,Y=r.QObject,X=!Y||!Y[F]||!Y[F].findChild,G=o&&a(function(){return 7!=S(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=A(z,n);r&&delete z[n],L(t,n,e),r&&t!==z&&L(z,n,r)}:L,V=function(t){var n=I[t]=S(k[F]);return n._k=t,n},U=B&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},q=function(t,n,e){return t===z&&q(W,n,e),m(t),n=_(n,!0),m(e),i(I,n)?(e.enumerable?(i(t,N)&&t[N][n]&&(t[N][n]=!1),e=S(e,{enumerable:w(0,!1)})):(i(t,N)||L(t,N,w(1,{})),t[N][n]=!0),G(t,n,e)):L(t,n,e)},H=function(t,n){m(t);for(var e,r=y(n=b(n)),i=0,o=r.length;o>i;)q(t,e=r[i++],n[e]);return t},K=function(t,n){return void 0===n?S(t):H(S(t),n)},J=function(t){var n=R.call(this,t=_(t,!0));return!(this===z&&i(I,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(I,t)||i(this,N)&&this[N][t])||n)},$=function(t,n){if(t=b(t),n=_(n,!0),t!==z||!i(I,n)||i(W,n)){var e=A(t,n);return!e||!i(I,n)||i(t,N)&&t[N][n]||(e.enumerable=!0),e}},Q=function(t){for(var n,e=j(b(t)),r=[],o=0;e.length>o;)i(I,n=e[o++])||n==N||n==u||r.push(n);return r},Z=function(t){for(var n,e=t===z,r=j(e?W:b(t)),o=[],c=0;r.length>c;)!i(I,n=r[c++])||e&&!i(z,n)||o.push(I[n]);return o};B||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(e){this===z&&n.call(W,e),i(this,N)&&i(this[N],t)&&(this[N][t]=!1),G(this,t,w(1,e))};return o&&X&&G(z,t,{configurable:!0,set:n}),V(t)},s(k[F],"toString",function(){return this._k}),E.f=$,O.f=q,e(37).f=x.f=Q,e(39).f=J,e(45).f=Z,o&&!e(27)&&s(z,"propertyIsEnumerable",J,!0),p.f=function(t){return V(v(t))}),c(c.G+c.W+c.F*!B,{Symbol:k});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)v(tt[nt++]);for(var et=M(v.store),rt=0;et.length>rt;)d(et[rt++]);c(c.S+c.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=k(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var n in D)if(D[n]===t)return n},useSetter:function(){X=!0},useSimple:function(){X=!1}}),c(c.S+c.F*!B,"Object",{create:K,defineProperty:q,defineProperties:H,getOwnPropertyDescriptor:$,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),T&&c(c.S+c.F*(!B||a(function(){var t=k();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!U(t)){for(var n,e,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return n=r[1],"function"==typeof n&&(e=n),!e&&g(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!U(n))return n}),r[1]=n,P.apply(T,r)}}}),k[F][C]||e(11)(k[F],C,k[F].valueOf),l(k,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,n,e){"use strict";var r=e(1),i=e(64),o=e(88),c=e(2),s=e(31),u=e(8),a=e(4),f=e(3).ArrayBuffer,l=e(61),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&f.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(f!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),r(r.P+r.U+r.F*e(6)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(c(this),t);for(var e=c(this).byteLength,r=s(t,e),i=s(void 0===n?e:n,e),o=new(l(this,h))(u(i-r)),a=new v(this),f=new v(o),p=0;r<i;)f.setUint8(p++,a.getUint8(r++));return o}}),e(46)(g)},function(t,n,e){e(14)("Float32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Float64",8,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int16",2,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Int8",1,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint16",2,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint32",4,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint8",1,function(t){return function(n,e,r){return t(this,n,e,r)}})},function(t,n,e){e(14)("Uint8",1,function(t){return function(n,e,r){return t(this,n,e,r)}},!0)},function(t,n,e){"use strict";var r,i=e(33)(0),o=e(16),c=e(35),s=e(81),u=e(69),a=e(4),f=e(6),l=e(32),h="WeakMap",v=c.getWeak,p=Object.isExtensible,d=u.ufstore,y={},g=function(t){
return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(a(t)){var n=v(t);return n===!0?d(l(this,h)).get(t):n?n[this._i]:void 0}},set:function(t,n){return u.def(l(this,h),t,n)}},b=t.exports=e(41)(h,g,m,u,!0,!0);f(function(){return 7!=(new b).set((Object.freeze||Object)(y),7).get(y)})&&(r=u.getConstructor(g,h),s(r.prototype,m),c.NEED=!0,i(["delete","has","get","set"],function(t){var n=b.prototype,e=n[t];o(n,t,function(n,i){if(a(n)&&!p(n)){this._f||(this._f=new r);var o=this._f[t](n,i);return"set"==t?this:o}return e.call(this,n,i)})}))},function(t,n,e){"use strict";var r=e(69),i=e(32),o="WeakSet";e(41)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t,!0)}},r,!1,!0)},function(t,n,e){"use strict";var r=e(1),i=e(48)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),e(23)("includes")},function(t,n,e){var r=e(1),i=e(83)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,n,e){var r=e(1),i=e(84),o=e(13),c=e(15),s=e(50);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,e,r=o(t),u=c.f,a=i(r),f={},l=0;a.length>l;)e=u(r,n=a[l++]),void 0!==e&&s(f,n,e);return f}})},function(t,n,e){var r=e(1),i=e(83)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,n,e){"use strict";var r=e(1),i=e(85);r(r.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,e){"use strict";var r=e(1),i=e(85);r(r.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,e){for(var r=e(66),i=e(28),o=e(16),c=e(3),s=e(11),u=e(26),a=e(5),f=a("iterator"),l=a("toStringTag"),h=u.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(v),d=0;d<p.length;d++){var y,g=p[d],m=v[g],b=c[g],_=b&&b.prototype;if(_&&(_[f]||s(_,f,h),_[l]||s(_,l,g),u[g]=h,m))for(y in r)_[y]||o(_,y,r[y],!0)}},function(t,n,e){var r=e(1),i=e(63);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,e){var r=e(3),i=e(1),o=r.navigator,c=[].slice,s=!!o&&/MSIE .\./.test(o.userAgent),u=function(t){return function(n,e){var r=arguments.length>2,i=!!r&&c.call(arguments,2);return t(r?function(){("function"==typeof n?n:Function(n)).apply(this,i)}:n,e)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,n){},function(t,n){(function(n){function e(t,n,e){function i(n){var e=d,r=y;return d=y=void 0,E=n,m=t.apply(r,e)}function o(t){return E=t,b=setTimeout(f,n),O?i(t):m}function u(t){var e=t-x,r=t-E,i=n-e;return M?w(i,g-r):i}function a(t){var e=t-x,r=t-E;return void 0===x||e>=n||e<0||M&&r>=g}function f(){var t=S();return a(t)?l(t):void(b=setTimeout(f,u(t)))}function l(t){return b=void 0,A&&d?i(t):(d=y=void 0,m)}function h(){void 0!==b&&clearTimeout(b),E=0,d=x=y=b=void 0}function v(){return void 0===b?m:l(S())}function p(){var t=S(),e=a(t);if(d=arguments,y=this,x=t,e){if(void 0===b)return o(x);if(M)return b=setTimeout(f,n),i(x)}return void 0===b&&(b=setTimeout(f,n)),m}var d,y,g,m,b,x,E=0,O=!1,M=!1,A=!0;if("function"!=typeof t)throw new TypeError(s);return n=c(n)||0,r(e)&&(O=!!e.leading,M="maxWait"in e,g=M?_(c(e.maxWait)||0,n):g,A="trailing"in e?!!e.trailing:A),p.cancel=h,p.flush=v,p}function r(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function i(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||i(t)&&b.call(t)==a}function c(t){if("number"==typeof t)return t;if(o(t))return u;if(r(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=r(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(f,"");var e=h.test(t);return e||v.test(t)?p(t.slice(2),e?2:8):l.test(t)?u:+t}var s="Expected a function",u=NaN,a="[object Symbol]",f=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,v=/^0o[0-7]+$/i,p=parseInt,d="object"==typeof n&&n&&n.Object===Object&&n,y="object"==typeof self&&self&&self.Object===Object&&self,g=d||y||Function("return this")(),m=Object.prototype,b=m.toString,_=Math.max,w=Math.min,S=function(){return g.Date.now()};t.exports=e}).call(n,function(){return this}())},function(t,n){!function(n){"use strict";function e(t,n,e,r){var o=n&&n.prototype instanceof i?n:i,c=Object.create(o.prototype),s=new v(r||[]);return c._invoke=a(t,e,s),c}function r(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function c(){}function s(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function u(t){function n(e,i,o,c){var s=r(t[e],t,i);if("throw"!==s.type){var u=s.arg,a=u.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,c)},function(t){n("throw",t,o,c)}):Promise.resolve(a).then(function(t){u.value=t,o(u)},c)}c(s.arg)}function e(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=e}function a(t,n,e){var i=O;return function(o,c){if(i===A)throw new Error("Generator is already running");if(i===L){if("throw"===o)throw c;return d()}for(e.method=o,e.arg=c;;){var s=e.delegate;if(s){var u=f(s,e);if(u){if(u===j)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(i===O)throw i=L,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);i=A;var a=r(t,n,e);if("normal"===a.type){if(i=e.done?L:M,a.arg===j)continue;return{value:a.arg,done:e.done}}"throw"===a.type&&(i=L,e.method="throw",e.arg=a.arg)}}}function f(t,n){var e=t.iterator[n.method];if(e===y){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=y,f(t,n),"throw"===n.method))return j;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var i=r(e,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,j;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=y),n.delegate=null,j):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,j)}function l(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function h(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function v(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function p(t){if(t){var n=t[_];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,r=function n(){for(;++e<t.length;)if(m.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=y,n.done=!0,n};return r.next=r}}return{next:d}}function d(){return{value:y,done:!0}}var y,g=Object.prototype,m=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},_=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",x="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(x&&(t.exports=E));E=n.regeneratorRuntime=x?t.exports:{},E.wrap=e;var O="suspendedStart",M="suspendedYield",A="executing",L="completed",j={},k={};k[_]=function(){return this};var T=Object.getPrototypeOf,P=T&&T(T(p([])));P&&P!==g&&m.call(P,_)&&(k=P);var F=c.prototype=i.prototype=Object.create(k);o.prototype=F.constructor=c,c.constructor=o,c[S]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===o||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,S in t||(t[S]="GeneratorFunction")),t.prototype=Object.create(F),t},E.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[w]=function(){return this},E.AsyncIterator=u,E.async=function(t,n,r,i){var o=new u(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(F),F[S]="Generator",F[_]=function(){return this},F.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},E.values=p,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=y),!!r}if(this.done)throw t;for(var e=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,j):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),j},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),h(e),j}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var i=r.arg;h(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:p(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=y),j}}}(function(){return this}()||Function("return this")())},function(t,n,e){!function(n,e){t.exports=e()}(this,function(){"use strict";function t(t){return parseFloat(t)||0}function n(n){var e=Array.prototype.slice.call(arguments,1);return e.reduce(function(e,r){var i=n["border-"+r+"-width"];return e+t(i)},0)}function e(n){for(var e=["top","right","bottom","left"],r={},i=0,o=e;i<o.length;i+=1){var c=o[i],s=n["padding-"+c];r[c]=t(s)}return r}function r(t){var n=t.getBBox();return u(0,0,n.width,n.height)}function i(r){var i=r.clientWidth,c=r.clientHeight;if(!i&&!c)return _;var s=getComputedStyle(r),a=e(s),f=a.left+a.right,l=a.top+a.bottom,h=t(s.width),v=t(s.height);if("border-box"===s.boxSizing&&(Math.round(h+f)!==i&&(h-=n(s,"left","right")+f),Math.round(v+l)!==c&&(v-=n(s,"top","bottom")+l)),!o(r)){var p=Math.round(h+f)-i,d=Math.round(v+l)-c;1!==Math.abs(p)&&(h-=p),1!==Math.abs(d)&&(v-=d)}return u(a.left,a.top,h,v)}function o(t){return t===document.documentElement}function c(t){return f?w(t)?r(t):i(t):_}function s(t){var n=t.x,e=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(o.prototype);return b(c,{x:n,y:e,width:r,height:i,top:e,right:n+r,bottom:i+e,left:n}),c}function u(t,n,e,r){return{x:t,y:n,width:e,height:r}}var a=function(){function t(t,n){var e=-1;return t.some(function(t,r){return t[0]===n&&(e=r,!0)}),e}return"undefined"!=typeof Map?Map:function(){function n(){this.__entries__=[]}var e={size:{}};return e.size.get=function(){return this.__entries__.length},n.prototype.get=function(n){var e=t(this.__entries__,n),r=this.__entries__[e];return r&&r[1]},n.prototype.set=function(n,e){var r=t(this.__entries__,n);~r?this.__entries__[r][1]=e:this.__entries__.push([n,e])},n.prototype.delete=function(n){var e=this.__entries__,r=t(e,n);~r&&e.splice(r,1)},n.prototype.has=function(n){return!!~t(this.__entries__,n)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(t,n){void 0===n&&(n=null);for(var e=0,r=this.__entries__;e<r.length;e+=1){var i=r[e];t.call(n,i[1],i[0])}},Object.defineProperties(n.prototype,e),n}()}(),f="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,l=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),h=2,v=function(t,n){function e(){o&&(o=!1,t()),c&&i()}function r(){l(e)}function i(){var t=Date.now();if(o){if(t-s<h)return;c=!0}else o=!0,c=!1,setTimeout(r,n);s=t}var o=!1,c=!1,s=0;return i},p=20,d=["top","right","bottom","left","width","height","size","weight"],y="undefined"!=typeof navigator&&/Trident\/.*rv:11/.test(navigator.userAgent),g="undefined"!=typeof MutationObserver&&!y,m=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=v(this.refresh.bind(this),p)};m.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},m.prototype.removeObserver=function(t){var n=this.observers_,e=n.indexOf(t);~e&&n.splice(e,1),!n.length&&this.connected_&&this.disconnect_()},m.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},m.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},m.prototype.connect_=function(){f&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),g?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},m.prototype.disconnect_=function(){f&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},m.prototype.onTransitionEnd_=function(t){var n=t.propertyName,e=d.some(function(t){return!!~n.indexOf(t)});e&&this.refresh()},m.getInstance=function(){return this.instance_||(this.instance_=new m),this.instance_},m.instance_=null;var b=function(t,n){for(var e=0,r=Object.keys(n);e<r.length;e+=1){var i=r[e];Object.defineProperty(t,i,{value:n[i],enumerable:!1,writable:!1,configurable:!0})}return t},_=u(0,0,0,0),w=function(){return"undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof SVGGraphicsElement}:function(t){return t instanceof SVGElement&&"function"==typeof t.getBBox}}(),S=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=u(0,0,0,0),this.target=t};S.prototype.isActive=function(){var t=c(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},S.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var x=function(t,n){var e=s(n);b(this,{target:t,contentRect:e})},E=function(t,n,e){if("function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.activeObservations_=[],this.observations_=new a,this.callback_=t,this.controller_=n,this.callbackCtx_=e};E.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new S(t)),this.controller_.addObserver(this),this.controller_.refresh())}},E.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},E.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},E.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},E.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(t){return new x(t.target,t.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},E.prototype.clearActive=function(){this.activeObservations_.splice(0)},E.prototype.hasActive=function(){return this.activeObservations_.length>0};var O="undefined"!=typeof WeakMap?new WeakMap:new a,M=function(t){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=m.getInstance(),e=new E(t,n,this);O.set(this,e)};["observe","unobserve","disconnect"].forEach(function(t){M.prototype[t]=function(){return(n=O.get(this))[t].apply(n,arguments);var n}});var A=function(){return"undefined"!=typeof ResizeObserver?ResizeObserver:M}();return A})},function(t,n,e){var r,i,o;/*! scrollbarWidth.js v0.1.0 | felixexter | MIT | https://github.com/felixexter/scrollbarWidth */
!function(e,c){i=[],r=c,o="function"==typeof r?r.apply(n,i):r,!(void 0!==o&&(t.exports=o))}(this,function(){"use strict";function t(){var t,n=document.body,e=document.createElement("div"),r=e.style;return r.position="absolute",r.top=r.left="-9999px",r.width=r.height="100px",r.overflow="scroll",n.appendChild(e),t=e.offsetWidth-e.clientWidth,n.removeChild(e),t}return t})}])});
/**
 * Owl Carousel v2.2.1
 * Copyright 2013-2017 David Deutsch
 * Licensed under  ()
 */
/**
 * Owl carousel
 * @version 2.1.6
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 * @todo Lazy Load Icon
 * @todo prevent animationend bubling
 * @todo itemsScaleUp
 * @todo Test Zepto
 * @todo stagePadding calculate wrong active classes
 */
;(function($, window, document, undefined) {

	/**
	 * Creates a carousel.
	 * @class The Owl Carousel.
	 * @public
	 * @param {HTMLElement|jQuery} element - The element to create the carousel for.
	 * @param {Object} [options] - The options
	 */
	function Owl(element, options) {

		/**
		 * Current settings for the carousel.
		 * @public
		 */
		this.settings = null;

		/**
		 * Current options set by the caller including defaults.
		 * @public
		 */
		this.options = $.extend({}, Owl.Defaults, options);

		/**
		 * Plugin element.
		 * @public
		 */
		this.$element = $(element);

		/**
		 * Proxied event handlers.
		 * @protected
		 */
		this._handlers = {};

		/**
		 * References to the running plugins of this carousel.
		 * @protected
		 */
		this._plugins = {};

		/**
		 * Currently suppressed events to prevent them from beeing retriggered.
		 * @protected
		 */
		this._supress = {};

		/**
		 * Absolute current position.
		 * @protected
		 */
		this._current = null;

		/**
		 * Animation speed in milliseconds.
		 * @protected
		 */
		this._speed = null;

		/**
		 * Coordinates of all items in pixel.
		 * @todo The name of this member is missleading.
		 * @protected
		 */
		this._coordinates = [];

		/**
		 * Current breakpoint.
		 * @todo Real media queries would be nice.
		 * @protected
		 */
		this._breakpoint = null;

		/**
		 * Current width of the plugin element.
		 */
		this._width = null;

		/**
		 * All real items.
		 * @protected
		 */
		this._items = [];

		/**
		 * All cloned items.
		 * @protected
		 */
		this._clones = [];

		/**
		 * Merge values of all items.
		 * @todo Maybe this could be part of a plugin.
		 * @protected
		 */
		this._mergers = [];

		/**
		 * Widths of all items.
		 */
		this._widths = [];

		/**
		 * Invalidated parts within the update process.
		 * @protected
		 */
		this._invalidated = {};

		/**
		 * Ordered list of workers for the update process.
		 * @protected
		 */
		this._pipe = [];

		/**
		 * Current state information for the drag operation.
		 * @todo #261
		 * @protected
		 */
		this._drag = {
			time: null,
			target: null,
			pointer: null,
			stage: {
				start: null,
				current: null
			},
			direction: null
		};

		/**
		 * Current state information and their tags.
		 * @type {Object}
		 * @protected
		 */
		this._states = {
			current: {},
			tags: {
				'initializing': [ 'busy' ],
				'animating': [ 'busy' ],
				'dragging': [ 'interacting' ]
			}
		};

		$.each([ 'onResize', 'onThrottledResize' ], $.proxy(function(i, handler) {
			this._handlers[handler] = $.proxy(this[handler], this);
		}, this));

		$.each(Owl.Plugins, $.proxy(function(key, plugin) {
			this._plugins[key.charAt(0).toLowerCase() + key.slice(1)]
				= new plugin(this);
		}, this));

		$.each(Owl.Workers, $.proxy(function(priority, worker) {
			this._pipe.push({
				'filter': worker.filter,
				'run': $.proxy(worker.run, this)
			});
		}, this));

		this.setup();
		this.initialize();
	}

	/**
	 * Default options for the carousel.
	 * @public
	 */
	Owl.Defaults = {
		items: 3,
		loop: false,
		center: false,
		rewind: false,

		mouseDrag: true,
		touchDrag: true,
		pullDrag: true,
		freeDrag: false,

		margin: 0,
		stagePadding: 0,

		merge: false,
		mergeFit: true,
		autoWidth: false,

		startPosition: 0,
		rtl: false,

		smartSpeed: 250,
		fluidSpeed: false,
		dragEndSpeed: false,

		responsive: {},
		responsiveRefreshRate: 200,
		responsiveBaseElement: window,

		fallbackEasing: 'swing',

		info: false,

		nestedItemSelector: false,
		itemElement: 'div',
		stageElement: 'div',

		refreshClass: 'owl-refresh',
		loadedClass: 'owl-loaded',
		loadingClass: 'owl-loading',
		rtlClass: 'owl-rtl',
		responsiveClass: 'owl-responsive',
		dragClass: 'owl-drag',
		itemClass: 'owl-item',
		stageClass: 'owl-stage',
		stageOuterClass: 'owl-stage-outer',
		grabClass: 'owl-grab'
	};

	/**
	 * Enumeration for width.
	 * @public
	 * @readonly
	 * @enum {String}
	 */
	Owl.Width = {
		Default: 'default',
		Inner: 'inner',
		Outer: 'outer'
	};

	/**
	 * Enumeration for types.
	 * @public
	 * @readonly
	 * @enum {String}
	 */
	Owl.Type = {
		Event: 'event',
		State: 'state'
	};

	/**
	 * Contains all registered plugins.
	 * @public
	 */
	Owl.Plugins = {};

	/**
	 * List of workers involved in the update process.
	 */
	Owl.Workers = [ {
		filter: [ 'width', 'settings' ],
		run: function() {
			this._width = this.$element.width();
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			cache.current = this._items && this._items[this.relative(this._current)];
		}
	}, {
		filter: [ 'items', 'settings' ],
		run: function() {
			this.$stage.children('.cloned').remove();
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var margin = this.settings.margin || '',
				grid = !this.settings.autoWidth,
				rtl = this.settings.rtl,
				css = {
					'width': 'auto',
					'margin-left': rtl ? margin : '',
					'margin-right': rtl ? '' : margin
				};

			!grid && this.$stage.children().css(css);

			cache.css = css;
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var width = (this.width() / this.settings.items).toFixed(3) - this.settings.margin,
				merge = null,
				iterator = this._items.length,
				grid = !this.settings.autoWidth,
				widths = [];

			cache.items = {
				merge: false,
				width: width
			};

			while (iterator--) {
				merge = this._mergers[iterator];
				merge = this.settings.mergeFit && Math.min(merge, this.settings.items) || merge;

				cache.items.merge = merge > 1 || cache.items.merge;

				widths[iterator] = !grid ? this._items[iterator].width() : width * merge;
			}

			this._widths = widths;
		}
	}, {
		filter: [ 'items', 'settings' ],
		run: function() {
			var clones = [],
				items = this._items,
				settings = this.settings,
				// TODO: Should be computed from number of min width items in stage
				view = Math.max(settings.items * 2, 4),
				size = Math.ceil(items.length / 2) * 2,
				repeat = settings.loop && items.length ? settings.rewind ? view : Math.max(view, size) : 0,
				append = '',
				prepend = '';

			repeat /= 2;

			while (repeat--) {
				// Switch to only using appended clones
				clones.push(this.normalize(clones.length / 2, true));
				append = append + items[clones[clones.length - 1]][0].outerHTML;
				clones.push(this.normalize(items.length - 1 - (clones.length - 1) / 2, true));
				prepend = items[clones[clones.length - 1]][0].outerHTML + prepend;
			}

			this._clones = clones;

			$(append).addClass('cloned').appendTo(this.$stage);
			$(prepend).addClass('cloned').prependTo(this.$stage);
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function() {
			var rtl = this.settings.rtl ? 1 : -1,
				size = this._clones.length + this._items.length,
				iterator = -1,
				previous = 0,
				current = 0,
				coordinates = [];

			while (++iterator < size) {
				previous = coordinates[iterator - 1] || 0;
				current = this._widths[this.relative(iterator)] + this.settings.margin;
				coordinates.push(previous + current * rtl);
			}

			this._coordinates = coordinates;
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function() {
			var padding = this.settings.stagePadding,
				coordinates = this._coordinates,
				css = {
					'width': Math.ceil(Math.abs(coordinates[coordinates.length - 1])) + padding * 2,
					'padding-left': padding || '',
					'padding-right': padding || ''
				};

			this.$stage.css(css);
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			var iterator = this._coordinates.length,
				grid = !this.settings.autoWidth,
				items = this.$stage.children();

			if (grid && cache.items.merge) {
				while (iterator--) {
					cache.css.width = this._widths[this.relative(iterator)];
					items.eq(iterator).css(cache.css);
				}
			} else if (grid) {
				cache.css.width = cache.items.width;
				items.css(cache.css);
			}
		}
	}, {
		filter: [ 'items' ],
		run: function() {
			this._coordinates.length < 1 && this.$stage.removeAttr('style');
		}
	}, {
		filter: [ 'width', 'items', 'settings' ],
		run: function(cache) {
			cache.current = cache.current ? this.$stage.children().index(cache.current) : 0;
			cache.current = Math.max(this.minimum(), Math.min(this.maximum(), cache.current));
			this.reset(cache.current);
		}
	}, {
		filter: [ 'position' ],
		run: function() {
			this.animate(this.coordinates(this._current));
		}
	}, {
		filter: [ 'width', 'position', 'items', 'settings' ],
		run: function() {
			var rtl = this.settings.rtl ? 1 : -1,
				padding = this.settings.stagePadding * 2,
				begin = this.coordinates(this.current()) + padding,
				end = begin + this.width() * rtl,
				inner, outer, matches = [], i, n;

			for (i = 0, n = this._coordinates.length; i < n; i++) {
				inner = this._coordinates[i - 1] || 0;
				outer = Math.abs(this._coordinates[i]) + padding * rtl;

				if ((this.op(inner, '<=', begin) && (this.op(inner, '>', end)))
					|| (this.op(outer, '<', begin) && this.op(outer, '>', end))) {
					matches.push(i);
				}
			}

			this.$stage.children('.active').removeClass('active');
			this.$stage.children(':eq(' + matches.join('), :eq(') + ')').addClass('active');

			if (this.settings.center) {
				this.$stage.children('.center').removeClass('center');
				this.$stage.children().eq(this.current()).addClass('center');
			}
		}
	} ];

	/**
	 * Initializes the carousel.
	 * @protected
	 */
	Owl.prototype.initialize = function() {
		this.enter('initializing');
		this.trigger('initialize');

		this.$element.toggleClass(this.settings.rtlClass, this.settings.rtl);

		if (this.settings.autoWidth && !this.is('pre-loading')) {
			var imgs, nestedSelector, width;
			imgs = this.$element.find('img');
			nestedSelector = this.settings.nestedItemSelector ? '.' + this.settings.nestedItemSelector : undefined;
			width = this.$element.children(nestedSelector).width();

			if (imgs.length && width <= 0) {
				this.preloadAutoWidthImages(imgs);
			}
		}

		this.$element.addClass(this.options.loadingClass);

		// create stage
		this.$stage = $('<' + this.settings.stageElement + ' class="' + this.settings.stageClass + '"/>')
			.wrap('<div class="' + this.settings.stageOuterClass + '"/>');

		// append stage
		this.$element.append(this.$stage.parent());

		// append content
		this.replace(this.$element.children().not(this.$stage.parent()));

		// check visibility
		if (this.$element.is(':visible')) {
			// update view
			this.refresh();
		} else {
			// invalidate width
			this.invalidate('width');
		}

		this.$element
			.removeClass(this.options.loadingClass)
			.addClass(this.options.loadedClass);

		// register event handlers
		this.registerEventHandlers();

		this.leave('initializing');
		this.trigger('initialized');
	};

	/**
	 * Setups the current settings.
	 * @todo Remove responsive classes. Why should adaptive designs be brought into IE8?
	 * @todo Support for media queries by using `matchMedia` would be nice.
	 * @public
	 */
	Owl.prototype.setup = function() {
		var viewport = this.viewport(),
			overwrites = this.options.responsive,
			match = -1,
			settings = null;

		if (!overwrites) {
			settings = $.extend({}, this.options);
		} else {
			$.each(overwrites, function(breakpoint) {
				if (breakpoint <= viewport && breakpoint > match) {
					match = Number(breakpoint);
				}
			});

			settings = $.extend({}, this.options, overwrites[match]);
			if (typeof settings.stagePadding === 'function') {
				settings.stagePadding = settings.stagePadding();
			}
			delete settings.responsive;

			// responsive class
			if (settings.responsiveClass) {
				this.$element.attr('class',
					this.$element.attr('class').replace(new RegExp('(' + this.options.responsiveClass + '-)\\S+\\s', 'g'), '$1' + match)
				);
			}
		}

		this.trigger('change', { property: { name: 'settings', value: settings } });
		this._breakpoint = match;
		this.settings = settings;
		this.invalidate('settings');
		this.trigger('changed', { property: { name: 'settings', value: this.settings } });
	};

	/**
	 * Updates option logic if necessery.
	 * @protected
	 */
	Owl.prototype.optionsLogic = function() {
		if (this.settings.autoWidth) {
			this.settings.stagePadding = false;
			this.settings.merge = false;
		}
	};

	/**
	 * Prepares an item before add.
	 * @todo Rename event parameter `content` to `item`.
	 * @protected
	 * @returns {jQuery|HTMLElement} - The item container.
	 */
	Owl.prototype.prepare = function(item) {
		var event = this.trigger('prepare', { content: item });

		if (!event.data) {
			event.data = $('<' + this.settings.itemElement + '/>')
				.addClass(this.options.itemClass).append(item)
		}

		this.trigger('prepared', { content: event.data });

		return event.data;
	};

	/**
	 * Updates the view.
	 * @public
	 */
	Owl.prototype.update = function() {
		var i = 0,
			n = this._pipe.length,
			filter = $.proxy(function(p) { return this[p] }, this._invalidated),
			cache = {};

		while (i < n) {
			if (this._invalidated.all || $.grep(this._pipe[i].filter, filter).length > 0) {
				this._pipe[i].run(cache);
			}
			i++;
		}

		this._invalidated = {};

		!this.is('valid') && this.enter('valid');
	};

	/**
	 * Gets the width of the view.
	 * @public
	 * @param {Owl.Width} [dimension=Owl.Width.Default] - The dimension to return.
	 * @returns {Number} - The width of the view in pixel.
	 */
	Owl.prototype.width = function(dimension) {
		dimension = dimension || Owl.Width.Default;
		switch (dimension) {
			case Owl.Width.Inner:
			case Owl.Width.Outer:
				return this._width;
			default:
				return this._width - this.settings.stagePadding * 2 + this.settings.margin;
		}
	};

	/**
	 * Refreshes the carousel primarily for adaptive purposes.
	 * @public
	 */
	Owl.prototype.refresh = function() {
		this.enter('refreshing');
		this.trigger('refresh');

		this.setup();

		this.optionsLogic();

		this.$element.addClass(this.options.refreshClass);

		this.update();

		this.$element.removeClass(this.options.refreshClass);

		this.leave('refreshing');
		this.trigger('refreshed');
	};

	/**
	 * Checks window `resize` event.
	 * @protected
	 */
	Owl.prototype.onThrottledResize = function() {
		window.clearTimeout(this.resizeTimer);
		this.resizeTimer = window.setTimeout(this._handlers.onResize, this.settings.responsiveRefreshRate);
	};

	/**
	 * Checks window `resize` event.
	 * @protected
	 */
	Owl.prototype.onResize = function() {
		if (!this._items.length) {
			return false;
		}

		if (this._width === this.$element.width()) {
			return false;
		}

		if (!this.$element.is(':visible')) {
			return false;
		}

		this.enter('resizing');

		if (this.trigger('resize').isDefaultPrevented()) {
			this.leave('resizing');
			return false;
		}

		this.invalidate('width');

		this.refresh();

		this.leave('resizing');
		this.trigger('resized');
	};

	/**
	 * Registers event handlers.
	 * @todo Check `msPointerEnabled`
	 * @todo #261
	 * @protected
	 */
	Owl.prototype.registerEventHandlers = function() {
		if ($.support.transition) {
			this.$stage.on($.support.transition.end + '.owl.core', $.proxy(this.onTransitionEnd, this));
		}

		if (this.settings.responsive !== false) {
			this.on(window, 'resize', this._handlers.onThrottledResize);
		}

		if (this.settings.mouseDrag) {
			this.$element.addClass(this.options.dragClass);
			this.$stage.on('mousedown.owl.core', $.proxy(this.onDragStart, this));
			this.$stage.on('dragstart.owl.core selectstart.owl.core', function() { return false });
		}

		if (this.settings.touchDrag){
			this.$stage.on('touchstart.owl.core', $.proxy(this.onDragStart, this));
			this.$stage.on('touchcancel.owl.core', $.proxy(this.onDragEnd, this));
		}
	};

	/**
	 * Handles `touchstart` and `mousedown` events.
	 * @todo Horizontal swipe threshold as option
	 * @todo #261
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragStart = function(event) {
		var stage = null;

		if (event.which === 3) {
			return;
		}

		if ($.support.transform) {
			stage = this.$stage.css('transform').replace(/.*\(|\)| /g, '').split(',');
			stage = {
				x: stage[stage.length === 16 ? 12 : 4],
				y: stage[stage.length === 16 ? 13 : 5]
			};
		} else {
			stage = this.$stage.position();
			stage = {
				x: this.settings.rtl ?
					stage.left + this.$stage.width() - this.width() + this.settings.margin :
					stage.left,
				y: stage.top
			};
		}

		if (this.is('animating')) {
			$.support.transform ? this.animate(stage.x) : this.$stage.stop()
			this.invalidate('position');
		}

		this.$element.toggleClass(this.options.grabClass, event.type === 'mousedown');

		this.speed(0);

		this._drag.time = new Date().getTime();
		this._drag.target = $(event.target);
		this._drag.stage.start = stage;
		this._drag.stage.current = stage;
		this._drag.pointer = this.pointer(event);

		$(document).on('mouseup.owl.core touchend.owl.core', $.proxy(this.onDragEnd, this));

		$(document).one('mousemove.owl.core touchmove.owl.core', $.proxy(function(event) {
			var delta = this.difference(this._drag.pointer, this.pointer(event));

			$(document).on('mousemove.owl.core touchmove.owl.core', $.proxy(this.onDragMove, this));

			if (Math.abs(delta.x) < Math.abs(delta.y) && this.is('valid')) {
				return;
			}

			event.preventDefault();

			this.enter('dragging');
			this.trigger('drag');
		}, this));
	};

	/**
	 * Handles the `touchmove` and `mousemove` events.
	 * @todo #261
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragMove = function(event) {
		var minimum = null,
			maximum = null,
			pull = null,
			delta = this.difference(this._drag.pointer, this.pointer(event)),
			stage = this.difference(this._drag.stage.start, delta);

		if (!this.is('dragging')) {
			return;
		}

		event.preventDefault();

		if (this.settings.loop) {
			minimum = this.coordinates(this.minimum());
			maximum = this.coordinates(this.maximum() + 1) - minimum;
			stage.x = (((stage.x - minimum) % maximum + maximum) % maximum) + minimum;
		} else {
			minimum = this.settings.rtl ? this.coordinates(this.maximum()) : this.coordinates(this.minimum());
			maximum = this.settings.rtl ? this.coordinates(this.minimum()) : this.coordinates(this.maximum());
			pull = this.settings.pullDrag ? -1 * delta.x / 5 : 0;
			stage.x = Math.max(Math.min(stage.x, minimum + pull), maximum + pull);
		}

		this._drag.stage.current = stage;

		this.animate(stage.x);
	};

	/**
	 * Handles the `touchend` and `mouseup` events.
	 * @todo #261
	 * @todo Threshold for click event
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onDragEnd = function(event) {
		var delta = this.difference(this._drag.pointer, this.pointer(event)),
			stage = this._drag.stage.current,
			direction = delta.x > 0 ^ this.settings.rtl ? 'left' : 'right';

		$(document).off('.owl.core');

		this.$element.removeClass(this.options.grabClass);

		if (delta.x !== 0 && this.is('dragging') || !this.is('valid')) {
			this.speed(this.settings.dragEndSpeed || this.settings.smartSpeed);
			this.current(this.closest(stage.x, delta.x !== 0 ? direction : this._drag.direction));
			this.invalidate('position');
			this.update();

			this._drag.direction = direction;

			if (Math.abs(delta.x) > 3 || new Date().getTime() - this._drag.time > 300) {
				this._drag.target.one('click.owl.core', function() { return false; });
			}
		}

		if (!this.is('dragging')) {
			return;
		}

		this.leave('dragging');
		this.trigger('dragged');
	};

	/**
	 * Gets absolute position of the closest item for a coordinate.
	 * @todo Setting `freeDrag` makes `closest` not reusable. See #165.
	 * @protected
	 * @param {Number} coordinate - The coordinate in pixel.
	 * @param {String} direction - The direction to check for the closest item. Ether `left` or `right`.
	 * @return {Number} - The absolute position of the closest item.
	 */
	Owl.prototype.closest = function(coordinate, direction) {
		var position = -1,
			pull = 30,
			width = this.width(),
			coordinates = this.coordinates();

		if (!this.settings.freeDrag) {
			// check closest item
			$.each(coordinates, $.proxy(function(index, value) {
				// on a left pull, check on current index
				if (direction === 'left' && coordinate > value - pull && coordinate < value + pull) {
					position = index;
				// on a right pull, check on previous index
				// to do so, subtract width from value and set position = index + 1
				} else if (direction === 'right' && coordinate > value - width - pull && coordinate < value - width + pull) {
					position = index + 1;
				} else if (this.op(coordinate, '<', value)
					&& this.op(coordinate, '>', coordinates[index + 1] || value - width)) {
					position = direction === 'left' ? index + 1 : index;
				}
				return position === -1;
			}, this));
		}

		if (!this.settings.loop) {
			// non loop boundries
			if (this.op(coordinate, '>', coordinates[this.minimum()])) {
				position = coordinate = this.minimum();
			} else if (this.op(coordinate, '<', coordinates[this.maximum()])) {
				position = coordinate = this.maximum();
			}
		}

		return position;
	};

	/**
	 * Animates the stage.
	 * @todo #270
	 * @public
	 * @param {Number} coordinate - The coordinate in pixels.
	 */
	Owl.prototype.animate = function(coordinate) {
		var animate = this.speed() > 0;

		this.is('animating') && this.onTransitionEnd();

		if (animate) {
			this.enter('animating');
			this.trigger('translate');
		}

		if ($.support.transform3d && $.support.transition) {
			this.$stage.css({
				transform: 'translate3d(' + coordinate + 'px,0px,0px)',
				transition: (this.speed() / 1000) + 's'
			});
		} else if (animate) {
			this.$stage.animate({
				left: coordinate + 'px'
			}, this.speed(), this.settings.fallbackEasing, $.proxy(this.onTransitionEnd, this));
		} else {
			this.$stage.css({
				left: coordinate + 'px'
			});
		}
	};

	/**
	 * Checks whether the carousel is in a specific state or not.
	 * @param {String} state - The state to check.
	 * @returns {Boolean} - The flag which indicates if the carousel is busy.
	 */
	Owl.prototype.is = function(state) {
		return this._states.current[state] && this._states.current[state] > 0;
	};

	/**
	 * Sets the absolute position of the current item.
	 * @public
	 * @param {Number} [position] - The new absolute position or nothing to leave it unchanged.
	 * @returns {Number} - The absolute position of the current item.
	 */
	Owl.prototype.current = function(position) {
		if (position === undefined) {
			return this._current;
		}

		if (this._items.length === 0) {
			return undefined;
		}

		position = this.normalize(position);

		if (this._current !== position) {
			var event = this.trigger('change', { property: { name: 'position', value: position } });

			if (event.data !== undefined) {
				position = this.normalize(event.data);
			}

			this._current = position;

			this.invalidate('position');

			this.trigger('changed', { property: { name: 'position', value: this._current } });
		}

		return this._current;
	};

	/**
	 * Invalidates the given part of the update routine.
	 * @param {String} [part] - The part to invalidate.
	 * @returns {Array.<String>} - The invalidated parts.
	 */
	Owl.prototype.invalidate = function(part) {
		if ($.type(part) === 'string') {
			this._invalidated[part] = true;
			this.is('valid') && this.leave('valid');
		}
		return $.map(this._invalidated, function(v, i) { return i });
	};

	/**
	 * Resets the absolute position of the current item.
	 * @public
	 * @param {Number} position - The absolute position of the new item.
	 */
	Owl.prototype.reset = function(position) {
		position = this.normalize(position);

		if (position === undefined) {
			return;
		}

		this._speed = 0;
		this._current = position;

		this.suppress([ 'translate', 'translated' ]);

		this.animate(this.coordinates(position));

		this.release([ 'translate', 'translated' ]);
	};

	/**
	 * Normalizes an absolute or a relative position of an item.
	 * @public
	 * @param {Number} position - The absolute or relative position to normalize.
	 * @param {Boolean} [relative=false] - Whether the given position is relative or not.
	 * @returns {Number} - The normalized position.
	 */
	Owl.prototype.normalize = function(position, relative) {
		var n = this._items.length,
			m = relative ? 0 : this._clones.length;

		if (!this.isNumeric(position) || n < 1) {
			position = undefined;
		} else if (position < 0 || position >= n + m) {
			position = ((position - m / 2) % n + n) % n + m / 2;
		}

		return position;
	};

	/**
	 * Converts an absolute position of an item into a relative one.
	 * @public
	 * @param {Number} position - The absolute position to convert.
	 * @returns {Number} - The converted position.
	 */
	Owl.prototype.relative = function(position) {
		position -= this._clones.length / 2;
		return this.normalize(position, true);
	};

	/**
	 * Gets the maximum position for the current item.
	 * @public
	 * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
	 * @returns {Number}
	 */
	Owl.prototype.maximum = function(relative) {
		var settings = this.settings,
			maximum = this._coordinates.length,
			iterator,
			reciprocalItemsWidth,
			elementWidth;

		if (settings.loop) {
			maximum = this._clones.length / 2 + this._items.length - 1;
		} else if (settings.autoWidth || settings.merge) {
			iterator = this._items.length;
			reciprocalItemsWidth = this._items[--iterator].width();
			elementWidth = this.$element.width();
			while (iterator--) {
				reciprocalItemsWidth += this._items[iterator].width() + this.settings.margin;
				if (reciprocalItemsWidth > elementWidth) {
					break;
				}
			}
			maximum = iterator + 1;
		} else if (settings.center) {
			maximum = this._items.length - 1;
		} else {
			maximum = this._items.length - settings.items;
		}

		if (relative) {
			maximum -= this._clones.length / 2;
		}

		return Math.max(maximum, 0);
	};

	/**
	 * Gets the minimum position for the current item.
	 * @public
	 * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.
	 * @returns {Number}
	 */
	Owl.prototype.minimum = function(relative) {
		return relative ? 0 : this._clones.length / 2;
	};

	/**
	 * Gets an item at the specified relative position.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
	 */
	Owl.prototype.items = function(position) {
		if (position === undefined) {
			return this._items.slice();
		}

		position = this.normalize(position, true);
		return this._items[position];
	};

	/**
	 * Gets an item at the specified relative position.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.
	 */
	Owl.prototype.mergers = function(position) {
		if (position === undefined) {
			return this._mergers.slice();
		}

		position = this.normalize(position, true);
		return this._mergers[position];
	};

	/**
	 * Gets the absolute positions of clones for an item.
	 * @public
	 * @param {Number} [position] - The relative position of the item.
	 * @returns {Array.<Number>} - The absolute positions of clones for the item or all if no position was given.
	 */
	Owl.prototype.clones = function(position) {
		var odd = this._clones.length / 2,
			even = odd + this._items.length,
			map = function(index) { return index % 2 === 0 ? even + index / 2 : odd - (index + 1) / 2 };

		if (position === undefined) {
			return $.map(this._clones, function(v, i) { return map(i) });
		}

		return $.map(this._clones, function(v, i) { return v === position ? map(i) : null });
	};

	/**
	 * Sets the current animation speed.
	 * @public
	 * @param {Number} [speed] - The animation speed in milliseconds or nothing to leave it unchanged.
	 * @returns {Number} - The current animation speed in milliseconds.
	 */
	Owl.prototype.speed = function(speed) {
		if (speed !== undefined) {
			this._speed = speed;
		}

		return this._speed;
	};

	/**
	 * Gets the coordinate of an item.
	 * @todo The name of this method is missleanding.
	 * @public
	 * @param {Number} position - The absolute position of the item within `minimum()` and `maximum()`.
	 * @returns {Number|Array.<Number>} - The coordinate of the item in pixel or all coordinates.
	 */
	Owl.prototype.coordinates = function(position) {
		var multiplier = 1,
			newPosition = position - 1,
			coordinate;

		if (position === undefined) {
			return $.map(this._coordinates, $.proxy(function(coordinate, index) {
				return this.coordinates(index);
			}, this));
		}

		if (this.settings.center) {
			if (this.settings.rtl) {
				multiplier = -1;
				newPosition = position + 1;
			}

			coordinate = this._coordinates[position];
			coordinate += (this.width() - coordinate + (this._coordinates[newPosition] || 0)) / 2 * multiplier;
		} else {
			coordinate = this._coordinates[newPosition] || 0;
		}

		coordinate = Math.ceil(coordinate);

		return coordinate;
	};

	/**
	 * Calculates the speed for a translation.
	 * @protected
	 * @param {Number} from - The absolute position of the start item.
	 * @param {Number} to - The absolute position of the target item.
	 * @param {Number} [factor=undefined] - The time factor in milliseconds.
	 * @returns {Number} - The time in milliseconds for the translation.
	 */
	Owl.prototype.duration = function(from, to, factor) {
		if (factor === 0) {
			return 0;
		}

		return Math.min(Math.max(Math.abs(to - from), 1), 6) * Math.abs((factor || this.settings.smartSpeed));
	};

	/**
	 * Slides to the specified item.
	 * @public
	 * @param {Number} position - The position of the item.
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.to = function(position, speed) {
		var current = this.current(),
			revert = null,
			distance = position - this.relative(current),
			direction = (distance > 0) - (distance < 0),
			items = this._items.length,
			minimum = this.minimum(),
			maximum = this.maximum();

		if (this.settings.loop) {
			if (!this.settings.rewind && Math.abs(distance) > items / 2) {
				distance += direction * -1 * items;
			}

			position = current + distance;
			revert = ((position - minimum) % items + items) % items + minimum;

			if (revert !== position && revert - distance <= maximum && revert - distance > 0) {
				current = revert - distance;
				position = revert;
				this.reset(current);
			}
		} else if (this.settings.rewind) {
			maximum += 1;
			position = (position % maximum + maximum) % maximum;
		} else {
			position = Math.max(minimum, Math.min(maximum, position));
		}

		this.speed(this.duration(current, position, speed));
		this.current(position);

		if (this.$element.is(':visible')) {
			this.update();
		}
	};

	/**
	 * Slides to the next item.
	 * @public
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.next = function(speed) {
		speed = speed || false;
		this.to(this.relative(this.current()) + 1, speed);
	};

	/**
	 * Slides to the previous item.
	 * @public
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 */
	Owl.prototype.prev = function(speed) {
		speed = speed || false;
		this.to(this.relative(this.current()) - 1, speed);
	};

	/**
	 * Handles the end of an animation.
	 * @protected
	 * @param {Event} event - The event arguments.
	 */
	Owl.prototype.onTransitionEnd = function(event) {

		// if css2 animation then event object is undefined
		if (event !== undefined) {
			event.stopPropagation();

			// Catch only owl-stage transitionEnd event
			if ((event.target || event.srcElement || event.originalTarget) !== this.$stage.get(0)) {
				return false;
			}
		}

		this.leave('animating');
		this.trigger('translated');
	};

	/**
	 * Gets viewport width.
	 * @protected
	 * @return {Number} - The width in pixel.
	 */
	Owl.prototype.viewport = function() {
		var width;
		if (this.options.responsiveBaseElement !== window) {
			width = $(this.options.responsiveBaseElement).width();
		} else if (window.innerWidth) {
			width = window.innerWidth;
		} else if (document.documentElement && document.documentElement.clientWidth) {
			width = document.documentElement.clientWidth;
		} else {
			console.warn('Can not detect viewport width.');
		}
		return width;
	};

	/**
	 * Replaces the current content.
	 * @public
	 * @param {HTMLElement|jQuery|String} content - The new content.
	 */
	Owl.prototype.replace = function(content) {
		this.$stage.empty();
		this._items = [];

		if (content) {
			content = (content instanceof jQuery) ? content : $(content);
		}

		if (this.settings.nestedItemSelector) {
			content = content.find('.' + this.settings.nestedItemSelector);
		}

		content.filter(function() {
			return this.nodeType === 1;
		}).each($.proxy(function(index, item) {
			item = this.prepare(item);
			this.$stage.append(item);
			this._items.push(item);
			this._mergers.push(item.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		}, this));

		this.reset(this.isNumeric(this.settings.startPosition) ? this.settings.startPosition : 0);

		this.invalidate('items');
	};

	/**
	 * Adds an item.
	 * @todo Use `item` instead of `content` for the event arguments.
	 * @public
	 * @param {HTMLElement|jQuery|String} content - The item content to add.
	 * @param {Number} [position] - The relative position at which to insert the item otherwise the item will be added to the end.
	 */
	Owl.prototype.add = function(content, position) {
		var current = this.relative(this._current);

		position = position === undefined ? this._items.length : this.normalize(position, true);
		content = content instanceof jQuery ? content : $(content);

		this.trigger('add', { content: content, position: position });

		content = this.prepare(content);

		if (this._items.length === 0 || position === this._items.length) {
			this._items.length === 0 && this.$stage.append(content);
			this._items.length !== 0 && this._items[position - 1].after(content);
			this._items.push(content);
			this._mergers.push(content.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		} else {
			this._items[position].before(content);
			this._items.splice(position, 0, content);
			this._mergers.splice(position, 0, content.find('[data-merge]').addBack('[data-merge]').attr('data-merge') * 1 || 1);
		}

		this._items[current] && this.reset(this._items[current].index());

		this.invalidate('items');

		this.trigger('added', { content: content, position: position });
	};

	/**
	 * Removes an item by its position.
	 * @todo Use `item` instead of `content` for the event arguments.
	 * @public
	 * @param {Number} position - The relative position of the item to remove.
	 */
	Owl.prototype.remove = function(position) {
		position = this.normalize(position, true);

		if (position === undefined) {
			return;
		}

		this.trigger('remove', { content: this._items[position], position: position });

		this._items[position].remove();
		this._items.splice(position, 1);
		this._mergers.splice(position, 1);

		this.invalidate('items');

		this.trigger('removed', { content: null, position: position });
	};

	/**
	 * Preloads images with auto width.
	 * @todo Replace by a more generic approach
	 * @protected
	 */
	Owl.prototype.preloadAutoWidthImages = function(images) {
		images.each($.proxy(function(i, element) {
			this.enter('pre-loading');
			element = $(element);
			$(new Image()).one('load', $.proxy(function(e) {
				element.attr('src', e.target.src);
				element.css('opacity', 1);
				this.leave('pre-loading');
				!this.is('pre-loading') && !this.is('initializing') && this.refresh();
			}, this)).attr('src', element.attr('src') || element.attr('data-src') || element.attr('data-src-retina'));
		}, this));
	};

	/**
	 * Destroys the carousel.
	 * @public
	 */
	Owl.prototype.destroy = function() {

		this.$element.off('.owl.core');
		this.$stage.off('.owl.core');
		$(document).off('.owl.core');

		if (this.settings.responsive !== false) {
			window.clearTimeout(this.resizeTimer);
			this.off(window, 'resize', this._handlers.onThrottledResize);
		}

		for (var i in this._plugins) {
			this._plugins[i].destroy();
		}

		this.$stage.children('.cloned').remove();

		this.$stage.unwrap();
		this.$stage.children().contents().unwrap();
		this.$stage.children().unwrap();

		this.$element
			.removeClass(this.options.refreshClass)
			.removeClass(this.options.loadingClass)
			.removeClass(this.options.loadedClass)
			.removeClass(this.options.rtlClass)
			.removeClass(this.options.dragClass)
			.removeClass(this.options.grabClass)
			.attr('class', this.$element.attr('class').replace(new RegExp(this.options.responsiveClass + '-\\S+\\s', 'g'), ''))
			.removeData('owl.carousel');
	};

	/**
	 * Operators to calculate right-to-left and left-to-right.
	 * @protected
	 * @param {Number} [a] - The left side operand.
	 * @param {String} [o] - The operator.
	 * @param {Number} [b] - The right side operand.
	 */
	Owl.prototype.op = function(a, o, b) {
		var rtl = this.settings.rtl;
		switch (o) {
			case '<':
				return rtl ? a > b : a < b;
			case '>':
				return rtl ? a < b : a > b;
			case '>=':
				return rtl ? a <= b : a >= b;
			case '<=':
				return rtl ? a >= b : a <= b;
			default:
				break;
		}
	};

	/**
	 * Attaches to an internal event.
	 * @protected
	 * @param {HTMLElement} element - The event source.
	 * @param {String} event - The event name.
	 * @param {Function} listener - The event handler to attach.
	 * @param {Boolean} capture - Wether the event should be handled at the capturing phase or not.
	 */
	Owl.prototype.on = function(element, event, listener, capture) {
		if (element.addEventListener) {
			element.addEventListener(event, listener, capture);
		} else if (element.attachEvent) {
			element.attachEvent('on' + event, listener);
		}
	};

	/**
	 * Detaches from an internal event.
	 * @protected
	 * @param {HTMLElement} element - The event source.
	 * @param {String} event - The event name.
	 * @param {Function} listener - The attached event handler to detach.
	 * @param {Boolean} capture - Wether the attached event handler was registered as a capturing listener or not.
	 */
	Owl.prototype.off = function(element, event, listener, capture) {
		if (element.removeEventListener) {
			element.removeEventListener(event, listener, capture);
		} else if (element.detachEvent) {
			element.detachEvent('on' + event, listener);
		}
	};

	/**
	 * Triggers a public event.
	 * @todo Remove `status`, `relatedTarget` should be used instead.
	 * @protected
	 * @param {String} name - The event name.
	 * @param {*} [data=null] - The event data.
	 * @param {String} [namespace=carousel] - The event namespace.
	 * @param {String} [state] - The state which is associated with the event.
	 * @param {Boolean} [enter=false] - Indicates if the call enters the specified state or not.
	 * @returns {Event} - The event arguments.
	 */
	Owl.prototype.trigger = function(name, data, namespace, state, enter) {
		var status = {
			item: { count: this._items.length, index: this.current() }
		}, handler = $.camelCase(
			$.grep([ 'on', name, namespace ], function(v) { return v })
				.join('-').toLowerCase()
		), event = $.Event(
			[ name, 'owl', namespace || 'carousel' ].join('.').toLowerCase(),
			$.extend({ relatedTarget: this }, status, data)
		);

		if (!this._supress[name]) {
			$.each(this._plugins, function(name, plugin) {
				if (plugin.onTrigger) {
					plugin.onTrigger(event);
				}
			});

			this.register({ type: Owl.Type.Event, name: name });
			this.$element.trigger(event);

			if (this.settings && typeof this.settings[handler] === 'function') {
				this.settings[handler].call(this, event);
			}
		}

		return event;
	};

	/**
	 * Enters a state.
	 * @param name - The state name.
	 */
	Owl.prototype.enter = function(name) {
		$.each([ name ].concat(this._states.tags[name] || []), $.proxy(function(i, name) {
			if (this._states.current[name] === undefined) {
				this._states.current[name] = 0;
			}

			this._states.current[name]++;
		}, this));
	};

	/**
	 * Leaves a state.
	 * @param name - The state name.
	 */
	Owl.prototype.leave = function(name) {
		$.each([ name ].concat(this._states.tags[name] || []), $.proxy(function(i, name) {
			this._states.current[name]--;
		}, this));
	};

	/**
	 * Registers an event or state.
	 * @public
	 * @param {Object} object - The event or state to register.
	 */
	Owl.prototype.register = function(object) {
		if (object.type === Owl.Type.Event) {
			if (!$.event.special[object.name]) {
				$.event.special[object.name] = {};
			}

			if (!$.event.special[object.name].owl) {
				var _default = $.event.special[object.name]._default;
				$.event.special[object.name]._default = function(e) {
					if (_default && _default.apply && (!e.namespace || e.namespace.indexOf('owl') === -1)) {
						return _default.apply(this, arguments);
					}
					return e.namespace && e.namespace.indexOf('owl') > -1;
				};
				$.event.special[object.name].owl = true;
			}
		} else if (object.type === Owl.Type.State) {
			if (!this._states.tags[object.name]) {
				this._states.tags[object.name] = object.tags;
			} else {
				this._states.tags[object.name] = this._states.tags[object.name].concat(object.tags);
			}

			this._states.tags[object.name] = $.grep(this._states.tags[object.name], $.proxy(function(tag, i) {
				return $.inArray(tag, this._states.tags[object.name]) === i;
			}, this));
		}
	};

	/**
	 * Suppresses events.
	 * @protected
	 * @param {Array.<String>} events - The events to suppress.
	 */
	Owl.prototype.suppress = function(events) {
		$.each(events, $.proxy(function(index, event) {
			this._supress[event] = true;
		}, this));
	};

	/**
	 * Releases suppressed events.
	 * @protected
	 * @param {Array.<String>} events - The events to release.
	 */
	Owl.prototype.release = function(events) {
		$.each(events, $.proxy(function(index, event) {
			delete this._supress[event];
		}, this));
	};

	/**
	 * Gets unified pointer coordinates from event.
	 * @todo #261
	 * @protected
	 * @param {Event} - The `mousedown` or `touchstart` event.
	 * @returns {Object} - Contains `x` and `y` coordinates of current pointer position.
	 */
	Owl.prototype.pointer = function(event) {
		var result = { x: null, y: null };

		event = event.originalEvent || event || window.event;

		event = event.touches && event.touches.length ?
			event.touches[0] : event.changedTouches && event.changedTouches.length ?
				event.changedTouches[0] : event;

		if (event.pageX) {
			result.x = event.pageX;
			result.y = event.pageY;
		} else {
			result.x = event.clientX;
			result.y = event.clientY;
		}

		return result;
	};

	/**
	 * Determines if the input is a Number or something that can be coerced to a Number
	 * @protected
	 * @param {Number|String|Object|Array|Boolean|RegExp|Function|Symbol} - The input to be tested
	 * @returns {Boolean} - An indication if the input is a Number or can be coerced to a Number
	 */
	Owl.prototype.isNumeric = function(number) {
		return !isNaN(parseFloat(number));
	};

	/**
	 * Gets the difference of two vectors.
	 * @todo #261
	 * @protected
	 * @param {Object} - The first vector.
	 * @param {Object} - The second vector.
	 * @returns {Object} - The difference.
	 */
	Owl.prototype.difference = function(first, second) {
		return {
			x: first.x - second.x,
			y: first.y - second.y
		};
	};

	/**
	 * The jQuery Plugin for the Owl Carousel
	 * @todo Navigation plugin `next` and `prev`
	 * @public
	 */
	$.fn.owlCarousel = function(option) {
		var args = Array.prototype.slice.call(arguments, 1);

		return this.each(function() {
			var $this = $(this),
				data = $this.data('owl.carousel');

			if (!data) {
				data = new Owl(this, typeof option == 'object' && option);
				$this.data('owl.carousel', data);

				$.each([
					'next', 'prev', 'to', 'destroy', 'refresh', 'replace', 'add', 'remove'
				], function(i, event) {
					data.register({ type: Owl.Type.Event, name: event });
					data.$element.on(event + '.owl.carousel.core', $.proxy(function(e) {
						if (e.namespace && e.relatedTarget !== this) {
							this.suppress([ event ]);
							data[event].apply(this, [].slice.call(arguments, 1));
							this.release([ event ]);
						}
					}, data));
				});
			}

			if (typeof option == 'string' && option.charAt(0) !== '_') {
				data[option].apply(data, args);
			}
		});
	};

	/**
	 * The constructor for the jQuery Plugin
	 * @public
	 */
	$.fn.owlCarousel.Constructor = Owl;

})(window.Zepto || window.jQuery, window, document);

/**
 * AutoRefresh Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the auto refresh plugin.
	 * @class The Auto Refresh Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var AutoRefresh = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Refresh interval.
		 * @protected
		 * @type {number}
		 */
		this._interval = null;

		/**
		 * Whether the element is currently visible or not.
		 * @protected
		 * @type {Boolean}
		 */
		this._visible = null;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoRefresh) {
					this.watch();
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, AutoRefresh.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	AutoRefresh.Defaults = {
		autoRefresh: true,
		autoRefreshInterval: 500
	};

	/**
	 * Watches the element.
	 */
	AutoRefresh.prototype.watch = function() {
		if (this._interval) {
			return;
		}

		this._visible = this._core.$element.is(':visible');
		this._interval = window.setInterval($.proxy(this.refresh, this), this._core.settings.autoRefreshInterval);
	};

	/**
	 * Refreshes the element.
	 */
	AutoRefresh.prototype.refresh = function() {
		if (this._core.$element.is(':visible') === this._visible) {
			return;
		}

		this._visible = !this._visible;

		this._core.$element.toggleClass('owl-hidden', !this._visible);

		this._visible && (this._core.invalidate('width') && this._core.refresh());
	};

	/**
	 * Destroys the plugin.
	 */
	AutoRefresh.prototype.destroy = function() {
		var handler, property;

		window.clearInterval(this._interval);

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.AutoRefresh = AutoRefresh;

})(window.Zepto || window.jQuery, window, document);

/**
 * Lazy Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the lazy plugin.
	 * @class The Lazy Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Lazy = function(carousel) {

		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Already loaded items.
		 * @protected
		 * @type {Array.<jQuery>}
		 */
		this._loaded = [];

		/**
		 * Event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel change.owl.carousel resized.owl.carousel': $.proxy(function(e) {
				if (!e.namespace) {
					return;
				}

				if (!this._core.settings || !this._core.settings.lazyLoad) {
					return;
				}

				if ((e.property && e.property.name == 'position') || e.type == 'initialized') {
					var settings = this._core.settings,
						n = (settings.center && Math.ceil(settings.items / 2) || settings.items),
						i = ((settings.center && n * -1) || 0),
						position = (e.property && e.property.value !== undefined ? e.property.value : this._core.current()) + i,
						clones = this._core.clones().length,
						load = $.proxy(function(i, v) { this.load(v) }, this);

					while (i++ < n) {
						this.load(clones / 2 + this._core.relative(position));
						clones && $.each(this._core.clones(this._core.relative(position)), load);
						position++;
					}
				}
			}, this)
		};

		// set the default options
		this._core.options = $.extend({}, Lazy.Defaults, this._core.options);

		// register event handler
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	Lazy.Defaults = {
		lazyLoad: false
	};

	/**
	 * Loads all resources of an item at the specified position.
	 * @param {Number} position - The absolute position of the item.
	 * @protected
	 */
	Lazy.prototype.load = function(position) {
		var $item = this._core.$stage.children().eq(position),
			$elements = $item && $item.find('.owl-lazy');

		if (!$elements || $.inArray($item.get(0), this._loaded) > -1) {
			return;
		}

		$elements.each($.proxy(function(index, element) {
			var $element = $(element), image,
				url = (window.devicePixelRatio > 1 && $element.attr('data-src-retina')) || $element.attr('data-src');

			this._core.trigger('load', { element: $element, url: url }, 'lazy');

			if ($element.is('img')) {
				$element.one('load.owl.lazy', $.proxy(function() {
					$element.css('opacity', 1);
					this._core.trigger('loaded', { element: $element, url: url }, 'lazy');
				}, this)).attr('src', url);
			} else {
				image = new Image();
				image.onload = $.proxy(function() {
					$element.css({
						'background-image': 'url("' + url + '")',
						'opacity': '1'
					});
					this._core.trigger('loaded', { element: $element, url: url }, 'lazy');
				}, this);
				image.src = url;
			}
		}, this));

		this._loaded.push($item.get(0));
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Lazy.prototype.destroy = function() {
		var handler, property;

		for (handler in this.handlers) {
			this._core.$element.off(handler, this.handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Lazy = Lazy;

})(window.Zepto || window.jQuery, window, document);

/**
 * AutoHeight Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the auto height plugin.
	 * @class The Auto Height Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var AutoHeight = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight) {
					this.update();
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight && e.property.name == 'position'){
					this.update();
				}
			}, this),
			'loaded.owl.lazy': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoHeight
					&& e.element.closest('.' + this._core.settings.itemClass).index() === this._core.current()) {
					this.update();
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, AutoHeight.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	AutoHeight.Defaults = {
		autoHeight: false,
		autoHeightClass: 'owl-height'
	};

	/**
	 * Updates the view.
	 */
	AutoHeight.prototype.update = function() {
		var start = this._core._current,
			end = start + this._core.settings.items,
			visible = this._core.$stage.children().toArray().slice(start, end),
			heights = [],
			maxheight = 0;

		$.each(visible, function(index, item) {
			heights.push($(item).height());
		});

		maxheight = Math.max.apply(null, heights);

		this._core.$stage.parent()
			.height(maxheight)
			.addClass(this._core.settings.autoHeightClass);
	};

	AutoHeight.prototype.destroy = function() {
		var handler, property;

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.AutoHeight = AutoHeight;

})(window.Zepto || window.jQuery, window, document);

/**
 * Video Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the video plugin.
	 * @class The Video Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Video = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Cache all video URLs.
		 * @protected
		 * @type {Object}
		 */
		this._videos = {};

		/**
		 * Current playing item.
		 * @protected
		 * @type {jQuery}
		 */
		this._playing = null;

		/**
		 * All event handlers.
		 * @todo The cloned content removale is too late
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					this._core.register({ type: 'state', name: 'playing', tags: [ 'interacting' ] });
				}
			}, this),
			'resize.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.video && this.isInFullScreen()) {
					e.preventDefault();
				}
			}, this),
			'refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.is('resizing')) {
					this._core.$stage.find('.cloned .owl-video-frame').remove();
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'position' && this._playing) {
					this.stop();
				}
			}, this),
			'prepared.owl.carousel': $.proxy(function(e) {
				if (!e.namespace) {
					return;
				}

				var $element = $(e.content).find('.owl-video');

				if ($element.length) {
					$element.css('display', 'none');
					this.fetch($element, $(e.content));
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Video.Defaults, this._core.options);

		// register event handlers
		this._core.$element.on(this._handlers);

		this._core.$element.on('click.owl.video', '.owl-video-play-icon', $.proxy(function(e) {
			this.play(e);
		}, this));
	};

	/**
	 * Default options.
	 * @public
	 */
	Video.Defaults = {
		video: false,
		videoHeight: false,
		videoWidth: false
	};

	/**
	 * Gets the video ID and the type (YouTube/Vimeo/vzaar only).
	 * @protected
	 * @param {jQuery} target - The target containing the video data.
	 * @param {jQuery} item - The item containing the video.
	 */
	Video.prototype.fetch = function(target, item) {
			var type = (function() {
					if (target.attr('data-vimeo-id')) {
						return 'vimeo';
					} else if (target.attr('data-vzaar-id')) {
						return 'vzaar'
					} else {
						return 'youtube';
					}
				})(),
				id = target.attr('data-vimeo-id') || target.attr('data-youtube-id') || target.attr('data-vzaar-id'),
				width = target.attr('data-width') || this._core.settings.videoWidth,
				height = target.attr('data-height') || this._core.settings.videoHeight,
				url = target.attr('href');

		if (url) {

			/*
					Parses the id's out of the following urls (and probably more):
					https://www.youtube.com/watch?v=:id
					https://youtu.be/:id
					https://vimeo.com/:id
					https://vimeo.com/channels/:channel/:id
					https://vimeo.com/groups/:group/videos/:id
					https://app.vzaar.com/videos/:id

					Visual example: https://regexper.com/#(http%3A%7Chttps%3A%7C)%5C%2F%5C%2F(player.%7Cwww.%7Capp.)%3F(vimeo%5C.com%7Cyoutu(be%5C.com%7C%5C.be%7Cbe%5C.googleapis%5C.com)%7Cvzaar%5C.com)%5C%2F(video%5C%2F%7Cvideos%5C%2F%7Cembed%5C%2F%7Cchannels%5C%2F.%2B%5C%2F%7Cgroups%5C%2F.%2B%5C%2F%7Cwatch%5C%3Fv%3D%7Cv%5C%2F)%3F(%5BA-Za-z0-9._%25-%5D*)(%5C%26%5CS%2B)%3F
			*/

			id = url.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/);

			if (id[3].indexOf('youtu') > -1) {
				type = 'youtube';
			} else if (id[3].indexOf('vimeo') > -1) {
				type = 'vimeo';
			} else if (id[3].indexOf('vzaar') > -1) {
				type = 'vzaar';
			} else {
				throw new Error('Video URL not supported.');
			}
			id = id[6];
		} else {
			throw new Error('Missing video URL.');
		}

		this._videos[url] = {
			type: type,
			id: id,
			width: width,
			height: height
		};

		item.attr('data-video', url);

		this.thumbnail(target, this._videos[url]);
	};

	/**
	 * Creates video thumbnail.
	 * @protected
	 * @param {jQuery} target - The target containing the video data.
	 * @param {Object} info - The video info object.
	 * @see `fetch`
	 */
	Video.prototype.thumbnail = function(target, video) {
		var tnLink,
			icon,
			path,
			dimensions = video.width && video.height ? 'style="width:' + video.width + 'px;height:' + video.height + 'px;"' : '',
			customTn = target.find('img'),
			srcType = 'src',
			lazyClass = '',
			settings = this._core.settings,
			create = function(path) {
				icon = '<div class="owl-video-play-icon"></div>';

				if (settings.lazyLoad) {
					tnLink = '<div class="owl-video-tn ' + lazyClass + '" ' + srcType + '="' + path + '"></div>';
				} else {
					tnLink = '<div class="owl-video-tn" style="opacity:1;background-image:url(' + path + ')"></div>';
				}
				target.after(tnLink);
				target.after(icon);
			};

		// wrap video content into owl-video-wrapper div
		target.wrap('<div class="owl-video-wrapper"' + dimensions + '></div>');

		if (this._core.settings.lazyLoad) {
			srcType = 'data-src';
			lazyClass = 'owl-lazy';
		}

		// custom thumbnail
		if (customTn.length) {
			create(customTn.attr(srcType));
			customTn.remove();
			return false;
		}

		if (video.type === 'youtube') {
			path = "//img.youtube.com/vi/" + video.id + "/hqdefault.jpg";
			create(path);
		} else if (video.type === 'vimeo') {
			$.ajax({
				type: 'GET',
				url: '//vimeo.com/api/v2/video/' + video.id + '.json',
				jsonp: 'callback',
				dataType: 'jsonp',
				success: function(data) {
					path = data[0].thumbnail_large;
					create(path);
				}
			});
		} else if (video.type === 'vzaar') {
			$.ajax({
				type: 'GET',
				url: '//vzaar.com/api/videos/' + video.id + '.json',
				jsonp: 'callback',
				dataType: 'jsonp',
				success: function(data) {
					path = data.framegrab_url;
					create(path);
				}
			});
		}
	};

	/**
	 * Stops the current video.
	 * @public
	 */
	Video.prototype.stop = function() {
		this._core.trigger('stop', null, 'video');
		this._playing.find('.owl-video-frame').remove();
		this._playing.removeClass('owl-video-playing');
		this._playing = null;
		this._core.leave('playing');
		this._core.trigger('stopped', null, 'video');
	};

	/**
	 * Starts the current video.
	 * @public
	 * @param {Event} event - The event arguments.
	 */
	Video.prototype.play = function(event) {
		var target = $(event.target),
			item = target.closest('.' + this._core.settings.itemClass),
			video = this._videos[item.attr('data-video')],
			width = video.width || '100%',
			height = video.height || this._core.$stage.height(),
			html;

		if (this._playing) {
			return;
		}

		this._core.enter('playing');
		this._core.trigger('play', null, 'video');

		item = this._core.items(this._core.relative(item.index()));

		this._core.reset(item.index());

		if (video.type === 'youtube') {
			html = '<iframe width="' + width + '" height="' + height + '" src="//www.youtube.com/embed/' +
				video.id + '?autoplay=1&rel=0&v=' + video.id + '" frameborder="0" allowfullscreen></iframe>';
		} else if (video.type === 'vimeo') {
			html = '<iframe src="//player.vimeo.com/video/' + video.id +
				'?autoplay=1" width="' + width + '" height="' + height +
				'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';
		} else if (video.type === 'vzaar') {
			html = '<iframe frameborder="0"' + 'height="' + height + '"' + 'width="' + width +
				'" allowfullscreen mozallowfullscreen webkitAllowFullScreen ' +
				'src="//view.vzaar.com/' + video.id + '/player?autoplay=true"></iframe>';
		}

		$('<div class="owl-video-frame">' + html + '</div>').insertAfter(item.find('.owl-video'));

		this._playing = item.addClass('owl-video-playing');
	};

	/**
	 * Checks whether an video is currently in full screen mode or not.
	 * @todo Bad style because looks like a readonly method but changes members.
	 * @protected
	 * @returns {Boolean}
	 */
	Video.prototype.isInFullScreen = function() {
		var element = document.fullscreenElement || document.mozFullScreenElement ||
				document.webkitFullscreenElement;

		return element && $(element).parent().hasClass('owl-video-frame');
	};

	/**
	 * Destroys the plugin.
	 */
	Video.prototype.destroy = function() {
		var handler, property;

		this._core.$element.off('click.owl.video');

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Video = Video;

})(window.Zepto || window.jQuery, window, document);

/**
 * Animate Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the animate plugin.
	 * @class The Navigation Plugin
	 * @param {Owl} scope - The Owl Carousel
	 */
	var Animate = function(scope) {
		this.core = scope;
		this.core.options = $.extend({}, Animate.Defaults, this.core.options);
		this.swapping = true;
		this.previous = undefined;
		this.next = undefined;

		this.handlers = {
			'change.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name == 'position') {
					this.previous = this.core.current();
					this.next = e.property.value;
				}
			}, this),
			'drag.owl.carousel dragged.owl.carousel translated.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					this.swapping = e.type == 'translated';
				}
			}, this),
			'translate.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this.swapping && (this.core.options.animateOut || this.core.options.animateIn)) {
					this.swap();
				}
			}, this)
		};

		this.core.$element.on(this.handlers);
	};

	/**
	 * Default options.
	 * @public
	 */
	Animate.Defaults = {
		animateOut: false,
		animateIn: false
	};

	/**
	 * Toggles the animation classes whenever an translations starts.
	 * @protected
	 * @returns {Boolean|undefined}
	 */
	Animate.prototype.swap = function() {

		if (this.core.settings.items !== 1) {
			return;
		}

		if (!$.support.animation || !$.support.transition) {
			return;
		}

		this.core.speed(0);

		var left,
			clear = $.proxy(this.clear, this),
			previous = this.core.$stage.children().eq(this.previous),
			next = this.core.$stage.children().eq(this.next),
			incoming = this.core.settings.animateIn,
			outgoing = this.core.settings.animateOut;

		if (this.core.current() === this.previous) {
			return;
		}

		if (outgoing) {
			left = this.core.coordinates(this.previous) - this.core.coordinates(this.next);
			previous.one($.support.animation.end, clear)
				.css( { 'left': left + 'px' } )
				.addClass('animated owl-animated-out')
				.addClass(outgoing);
		}

		if (incoming) {
			next.one($.support.animation.end, clear)
				.addClass('animated owl-animated-in')
				.addClass(incoming);
		}
	};

	Animate.prototype.clear = function(e) {
		$(e.target).css( { 'left': '' } )
			.removeClass('animated owl-animated-out owl-animated-in')
			.removeClass(this.core.settings.animateIn)
			.removeClass(this.core.settings.animateOut);
		this.core.onTransitionEnd();
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Animate.prototype.destroy = function() {
		var handler, property;

		for (handler in this.handlers) {
			this.core.$element.off(handler, this.handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Animate = Animate;

})(window.Zepto || window.jQuery, window, document);

/**
 * Autoplay Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	/**
	 * Creates the autoplay plugin.
	 * @class The Autoplay Plugin
	 * @param {Owl} scope - The Owl Carousel
	 */
	var Autoplay = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * The autoplay timeout.
		 * @type {Timeout}
		 */
		this._timeout = null;

		/**
		 * Indicates whenever the autoplay is paused.
		 * @type {Boolean}
		 */
		this._paused = false;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'settings') {
					if (this._core.settings.autoplay) {
						this.play();
					} else {
						this.stop();
					}
				} else if (e.namespace && e.property.name === 'position') {
					//console.log('play?', e);
					if (this._core.settings.autoplay) {
						this._setAutoPlayInterval();
					}
				}
			}, this),
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.autoplay) {
					this.play();
				}
			}, this),
			'play.owl.autoplay': $.proxy(function(e, t, s) {
				if (e.namespace) {
					this.play(t, s);
				}
			}, this),
			'stop.owl.autoplay': $.proxy(function(e) {
				if (e.namespace) {
					this.stop();
				}
			}, this),
			'mouseover.owl.autoplay': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.pause();
				}
			}, this),
			'mouseleave.owl.autoplay': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.play();
				}
			}, this),
			'touchstart.owl.core': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause && this._core.is('rotating')) {
					this.pause();
				}
			}, this),
			'touchend.owl.core': $.proxy(function() {
				if (this._core.settings.autoplayHoverPause) {
					this.play();
				}
			}, this)
		};

		// register event handlers
		this._core.$element.on(this._handlers);

		// set default options
		this._core.options = $.extend({}, Autoplay.Defaults, this._core.options);
	};

	/**
	 * Default options.
	 * @public
	 */
	Autoplay.Defaults = {
		autoplay: false,
		autoplayTimeout: 5000,
		autoplayHoverPause: false,
		autoplaySpeed: false
	};

	/**
	 * Starts the autoplay.
	 * @public
	 * @param {Number} [timeout] - The interval before the next animation starts.
	 * @param {Number} [speed] - The animation speed for the animations.
	 */
	Autoplay.prototype.play = function(timeout, speed) {
		this._paused = false;

		if (this._core.is('rotating')) {
			return;
		}

		this._core.enter('rotating');

		this._setAutoPlayInterval();
	};

	/**
	 * Gets a new timeout
	 * @private
	 * @param {Number} [timeout] - The interval before the next animation starts.
	 * @param {Number} [speed] - The animation speed for the animations.
	 * @return {Timeout}
	 */
	Autoplay.prototype._getNextTimeout = function(timeout, speed) {
		if ( this._timeout ) {
			window.clearTimeout(this._timeout);
		}
		return window.setTimeout($.proxy(function() {
			if (this._paused || this._core.is('busy') || this._core.is('interacting') || document.hidden) {
				return;
			}
			this._core.next(speed || this._core.settings.autoplaySpeed);
		}, this), timeout || this._core.settings.autoplayTimeout);
	};

	/**
	 * Sets autoplay in motion.
	 * @private
	 */
	Autoplay.prototype._setAutoPlayInterval = function() {
		this._timeout = this._getNextTimeout();
	};

	/**
	 * Stops the autoplay.
	 * @public
	 */
	Autoplay.prototype.stop = function() {
		if (!this._core.is('rotating')) {
			return;
		}

		window.clearTimeout(this._timeout);
		this._core.leave('rotating');
	};

	/**
	 * Stops the autoplay.
	 * @public
	 */
	Autoplay.prototype.pause = function() {
		if (!this._core.is('rotating')) {
			return;
		}

		this._paused = true;
	};

	/**
	 * Destroys the plugin.
	 */
	Autoplay.prototype.destroy = function() {
		var handler, property;

		this.stop();

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.autoplay = Autoplay;

})(window.Zepto || window.jQuery, window, document);

/**
 * Navigation Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {
	'use strict';

	/**
	 * Creates the navigation plugin.
	 * @class The Navigation Plugin
	 * @param {Owl} carousel - The Owl Carousel.
	 */
	var Navigation = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Indicates whether the plugin is initialized or not.
		 * @protected
		 * @type {Boolean}
		 */
		this._initialized = false;

		/**
		 * The current paging indexes.
		 * @protected
		 * @type {Array}
		 */
		this._pages = [];

		/**
		 * All DOM elements of the user interface.
		 * @protected
		 * @type {Object}
		 */
		this._controls = {};

		/**
		 * Markup for an indicator.
		 * @protected
		 * @type {Array.<String>}
		 */
		this._templates = [];

		/**
		 * The carousel element.
		 * @type {jQuery}
		 */
		this.$element = this._core.$element;

		/**
		 * Overridden methods of the carousel.
		 * @protected
		 * @type {Object}
		 */
		this._overrides = {
			next: this._core.next,
			prev: this._core.prev,
			to: this._core.to
		};

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'prepared.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.push('<div class="' + this._core.settings.dotClass + '">' +
						$(e.content).find('[data-dot]').addBack('[data-dot]').attr('data-dot') + '</div>');
				}
			}, this),
			'added.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.splice(e.position, 0, this._templates.pop());
				}
			}, this),
			'remove.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.dotsData) {
					this._templates.splice(e.position, 1);
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name == 'position') {
					this.draw();
				}
			}, this),
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && !this._initialized) {
					this._core.trigger('initialize', null, 'navigation');
					this.initialize();
					this.update();
					this.draw();
					this._initialized = true;
					this._core.trigger('initialized', null, 'navigation');
				}
			}, this),
			'refreshed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._initialized) {
					this._core.trigger('refresh', null, 'navigation');
					this.update();
					this.draw();
					this._core.trigger('refreshed', null, 'navigation');
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Navigation.Defaults, this._core.options);

		// register event handlers
		this.$element.on(this._handlers);
	};

	/**
	 * Default options.
	 * @public
	 * @todo Rename `slideBy` to `navBy`
	 */
	Navigation.Defaults = {
		nav: false,
		navText: [ 'prev', 'next' ],
		navSpeed: false,
		navElement: 'div',
		navContainer: false,
		navContainerClass: 'owl-nav',
		navClass: [ 'owl-prev', 'owl-next' ],
		slideBy: 1,
		dotClass: 'owl-dot',
		dotsClass: 'owl-dots',
		dots: true,
		dotsEach: false,
		dotsData: false,
		dotsSpeed: false,
		dotsContainer: false
	};

	/**
	 * Initializes the layout of the plugin and extends the carousel.
	 * @protected
	 */
	Navigation.prototype.initialize = function() {
		var override,
			settings = this._core.settings;

		// create DOM structure for relative navigation
		this._controls.$relative = (settings.navContainer ? $(settings.navContainer)
			: $('<div>').addClass(settings.navContainerClass).appendTo(this.$element)).addClass('anyClass');

		this._controls.$previous = $('<' + settings.navElement + '>')
			.addClass(settings.navClass[0])
			.html(settings.navText[0])
			.prependTo(this._controls.$relative)
			.on('click', $.proxy(function(e) {
				this.prev(settings.navSpeed);
			}, this));
		this._controls.$next = $('<' + settings.navElement + '>')
			.addClass(settings.navClass[1])
			.html(settings.navText[1])
			.appendTo(this._controls.$relative)
			.on('click', $.proxy(function(e) {
				this.next(settings.navSpeed);
			}, this));

		// create DOM structure for absolute navigation
		if (!settings.dotsData) {
			this._templates = [ $('<div>')
				.addClass(settings.dotClass)
				.append($('<span>'))
				.prop('outerHTML') ];
		}

		this._controls.$absolute = (settings.dotsContainer ? $(settings.dotsContainer)
			: $('<div>').addClass(settings.dotsClass).appendTo(this.$element)).addClass('anyClass');

		this._controls.$absolute.on('click', 'div', $.proxy(function(e) {
			var index = $(e.target).parent().is(this._controls.$absolute)
				? $(e.target).index() : $(e.target).parent().index();

			e.preventDefault();

			this.to(index, settings.dotsSpeed);
		}, this));

		// override public methods of the carousel
		for (override in this._overrides) {
			this._core[override] = $.proxy(this[override], this);
		}
	};

	/**
	 * Destroys the plugin.
	 * @protected
	 */
	Navigation.prototype.destroy = function() {
		var handler, control, property, override;

		for (handler in this._handlers) {
			this.$element.off(handler, this._handlers[handler]);
		}
		for (control in this._controls) {
			this._controls[control].remove();
		}
		for (override in this.overides) {
			this._core[override] = this._overrides[override];
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	/**
	 * Updates the internal state.
	 * @protected
	 */
	Navigation.prototype.update = function() {
		var i, j, k,
			lower = this._core.clones().length / 2,
			upper = lower + this._core.items().length,
			maximum = this._core.maximum(true),
			settings = this._core.settings,
			size = settings.center || settings.autoWidth || settings.dotsData
				? 1 : settings.dotsEach || settings.items;

		if (settings.slideBy !== 'page') {
			settings.slideBy = Math.min(settings.slideBy, settings.items);
		}

		if (settings.dots || settings.slideBy == 'page') {
			this._pages = [];

			for (i = lower, j = 0, k = 0; i < upper; i++) {
				if (j >= size || j === 0) {
					this._pages.push({
						start: Math.min(maximum, i - lower),
						end: i - lower + size - 1
					});
					if (Math.min(maximum, i - lower) === maximum) {
						break;
					}
					j = 0, ++k;
				}
				j += this._core.mergers(this._core.relative(i));
			}
		}
	};

	/**
	 * Draws the user interface.
	 * @todo The option `dotsData` wont work.
	 * @protected
	 */
	Navigation.prototype.draw = function() {
		var difference,
			settings = this._core.settings,
            anyClass = this._core.items().length <= settings.items,
			index = this._core.relative(this._core.current()),
			loop = settings.loop || settings.rewind;

		this._controls.$relative.toggleClass('anyClass', !settings.nav || anyClass);

		if (settings.nav) {
			this._controls.$previous.toggleClass('anyClass', !loop && index <= this._core.minimum(true));
			this._controls.$next.toggleClass('anyClass', !loop && index >= this._core.maximum(true));
		}

		this._controls.$absolute.toggleClass('anyClass', !settings.dots || anyClass);

		if (settings.dots) {
			difference = this._pages.length - this._controls.$absolute.children().length;

			if (settings.dotsData && difference !== 0) {
				this._controls.$absolute.html(this._templates.join(''));
			} else if (difference > 0) {
				this._controls.$absolute.append(new Array(difference + 1).join(this._templates[0]));
			} else if (difference < 0) {
				this._controls.$absolute.children().slice(difference).remove();
			}

			this._controls.$absolute.find('.active').removeClass('active');
			this._controls.$absolute.children().eq($.inArray(this.current(), this._pages)).addClass('active');
		}
	};

	/**
	 * Extends event data.
	 * @protected
	 * @param {Event} event - The event object which gets thrown.
	 */
	Navigation.prototype.onTrigger = function(event) {
		var settings = this._core.settings;

		event.page = {
			index: $.inArray(this.current(), this._pages),
			count: this._pages.length,
			size: settings && (settings.center || settings.autoWidth || settings.dotsData
				? 1 : settings.dotsEach || settings.items)
		};
	};

	/**
	 * Gets the current page position of the carousel.
	 * @protected
	 * @returns {Number}
	 */
	Navigation.prototype.current = function() {
		var current = this._core.relative(this._core.current());
		return $.grep(this._pages, $.proxy(function(page, index) {
			return page.start <= current && page.end >= current;
		}, this)).pop();
	};

	/**
	 * Gets the current succesor/predecessor position.
	 * @protected
	 * @returns {Number}
	 */
	Navigation.prototype.getPosition = function(successor) {
		var position, length,
			settings = this._core.settings;

		if (settings.slideBy == 'page') {
			position = $.inArray(this.current(), this._pages);
			length = this._pages.length;
			successor ? ++position : --position;
			position = this._pages[((position % length) + length) % length].start;
		} else {
			position = this._core.relative(this._core.current());
			length = this._core.items().length;
			successor ? position += settings.slideBy : position -= settings.slideBy;
		}

		return position;
	};

	/**
	 * Slides to the next item or page.
	 * @public
	 * @param {Number} [speed=false] - The time in milliseconds for the transition.
	 */
	Navigation.prototype.next = function(speed) {
		$.proxy(this._overrides.to, this._core)(this.getPosition(true), speed);
	};

	/**
	 * Slides to the previous item or page.
	 * @public
	 * @param {Number} [speed=false] - The time in milliseconds for the transition.
	 */
	Navigation.prototype.prev = function(speed) {
		$.proxy(this._overrides.to, this._core)(this.getPosition(false), speed);
	};

	/**
	 * Slides to the specified item or page.
	 * @public
	 * @param {Number} position - The position of the item or page.
	 * @param {Number} [speed] - The time in milliseconds for the transition.
	 * @param {Boolean} [standard=false] - Whether to use the standard behaviour or not.
	 */
	Navigation.prototype.to = function(position, speed, standard) {
		var length;

		if (!standard && this._pages.length) {
			length = this._pages.length;
			$.proxy(this._overrides.to, this._core)(this._pages[((position % length) + length) % length].start, speed);
		} else {
			$.proxy(this._overrides.to, this._core)(position, speed);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Navigation = Navigation;

})(window.Zepto || window.jQuery, window, document);

/**
 * Hash Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {
	'use strict';

	/**
	 * Creates the hash plugin.
	 * @class The Hash Plugin
	 * @param {Owl} carousel - The Owl Carousel
	 */
	var Hash = function(carousel) {
		/**
		 * Reference to the core.
		 * @protected
		 * @type {Owl}
		 */
		this._core = carousel;

		/**
		 * Hash index for the items.
		 * @protected
		 * @type {Object}
		 */
		this._hashes = {};

		/**
		 * The carousel element.
		 * @type {jQuery}
		 */
		this.$element = this._core.$element;

		/**
		 * All event handlers.
		 * @protected
		 * @type {Object}
		 */
		this._handlers = {
			'initialized.owl.carousel': $.proxy(function(e) {
				if (e.namespace && this._core.settings.startPosition === 'URLHash') {
					$(window).trigger('hashchange.owl.navigation');
				}
			}, this),
			'prepared.owl.carousel': $.proxy(function(e) {
				if (e.namespace) {
					var hash = $(e.content).find('[data-hash]').addBack('[data-hash]').attr('data-hash');

					if (!hash) {
						return;
					}

					this._hashes[hash] = e.content;
				}
			}, this),
			'changed.owl.carousel': $.proxy(function(e) {
				if (e.namespace && e.property.name === 'position') {
					var current = this._core.items(this._core.relative(this._core.current())),
						hash = $.map(this._hashes, function(item, hash) {
							return item === current ? hash : null;
						}).join();

					if (!hash || window.location.hash.slice(1) === hash) {
						return;
					}

					window.location.hash = hash;
				}
			}, this)
		};

		// set default options
		this._core.options = $.extend({}, Hash.Defaults, this._core.options);

		// register the event handlers
		this.$element.on(this._handlers);

		// register event listener for hash navigation
		$(window).on('hashchange.owl.navigation', $.proxy(function(e) {
			var hash = window.location.hash.substring(1),
				items = this._core.$stage.children(),
				position = this._hashes[hash] && items.index(this._hashes[hash]);

			if (position === undefined || position === this._core.current()) {
				return;
			}

			this._core.to(this._core.relative(position), false, true);
		}, this));
	};

	/**
	 * Default options.
	 * @public
	 */
	Hash.Defaults = {
		URLhashListener: false
	};

	/**
	 * Destroys the plugin.
	 * @public
	 */
	Hash.prototype.destroy = function() {
		var handler, property;

		$(window).off('hashchange.owl.navigation');

		for (handler in this._handlers) {
			this._core.$element.off(handler, this._handlers[handler]);
		}
		for (property in Object.getOwnPropertyNames(this)) {
			typeof this[property] != 'function' && (this[property] = null);
		}
	};

	$.fn.owlCarousel.Constructor.Plugins.Hash = Hash;

})(window.Zepto || window.jQuery, window, document);

/**
 * Support Plugin
 *
 * @version 2.1.0
 * @author Vivid Planet Software GmbH
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
;(function($, window, document, undefined) {

	var style = $('<support>').get(0).style,
		prefixes = 'Webkit Moz O ms'.split(' '),
		events = {
			transition: {
				end: {
					WebkitTransition: 'webkitTransitionEnd',
					MozTransition: 'transitionend',
					OTransition: 'oTransitionEnd',
					transition: 'transitionend'
				}
			},
			animation: {
				end: {
					WebkitAnimation: 'webkitAnimationEnd',
					MozAnimation: 'animationend',
					OAnimation: 'oAnimationEnd',
					animation: 'animationend'
				}
			}
		},
		tests = {
			csstransforms: function() {
				return !!test('transform');
			},
			csstransforms3d: function() {
				return !!test('perspective');
			},
			csstransitions: function() {
				return !!test('transition');
			},
			cssanimations: function() {
				return !!test('animation');
			}
		};

	function test(property, prefixed) {
		var result = false,
			upper = property.charAt(0).toUpperCase() + property.slice(1);

		$.each((property + ' ' + prefixes.join(upper + ' ') + upper).split(' '), function(i, property) {
			if (style[property] !== undefined) {
				result = prefixed ? property : true;
				return false;
			}
		});

		return result;
	}

	function prefixed(property) {
		return test(property, true);
	}

	if (tests.csstransitions()) {
		/* jshint -W053 */
		$.support.transition = new String(prefixed('transition'))
		$.support.transition.end = events.transition.end[ $.support.transition ];
	}

	if (tests.cssanimations()) {
		/* jshint -W053 */
		$.support.animation = new String(prefixed('animation'))
		$.support.animation.end = events.animation.end[ $.support.animation ];
	}

	if (tests.csstransforms()) {
		/* jshint -W053 */
		$.support.transform = new String(prefixed('transform'));
		$.support.transform3d = tests.csstransforms3d();
	}

})(window.Zepto || window.jQuery, window, document);

/*!
 * jquery.sumoselect - v3.0.2
 * http://hemantnegi.github.io/jquery.sumoselect
 * 2014-04-08
 *
 * Copyright 2015 Hemant Negi
 * Email : hemant.frnz@gmail.com
 * Compressor http://refresh-sf.com/
 */

(function ($) {

    'namespace sumo';
    $.fn.SumoSelect = function (options) {

        // This is the easiest way to have default options.
        var settings = $.extend({
            placeholder: '',   // Dont change it here.
            csvDispCount: 3,              // display no. of items in multiselect. 0 to display all.
            captionFormat:'{0} Selected', // format of caption text. you can set your locale.
            captionFormatAllSelected:'{0} all selected!', // format of caption text when all elements are selected. set null to use captionFormat. It will not work if there are disabled elements in select.
            floatWidth: 400,              // Screen width of device at which the list is rendered in floating popup fashion.
            forceCustomRendering: false,  // force the custom modal on all devices below floatWidth resolution.
            nativeOnDevice: ['Android', 'BlackBerry', 'iPhone', 'iPad', 'iPod', 'Opera Mini', 'IEMobile', 'Silk'], //
            outputAsCSV: false,           // true to POST data as csv ( false for Html control array ie. default select )
            csvSepChar: ',',              // separation char in csv mode
            okCancelInMulti: false,       // display ok cancel buttons in desktop mode multiselect also.
            triggerChangeCombined: true,  // im multi select mode wether to trigger change event on individual selection or combined selection.
            selectAll: false,             // to display select all button in multiselect mode.|| also select all will not be available on mobile devices.

            search: false,                // to display input for filtering content. selectAlltext will be input text placeholder
            searchText: 'Search...',      // placeholder for search input
            noMatch: 'No matches for "{0}"',
            prefix: '',                   // some prefix usually the field name. eg. '<b>Hello</b>'
            locale: ['OK', 'Cancel', 'Select All'],  // all text that is used. don't change the index.
            up: false                     // set true to open upside.
        }, options);

        var ret = this.each(function () {
            var selObj = this; // the original select object.
            if (this.sumo || !$(this).is('select')) return; //already initialized

            this.sumo = {
                E: $(selObj),   //the jquery object of original select element.
                is_multi: $(selObj).attr('multiple'),  //if its a multiple select
                select: '',
                caption: '',
                placeholder: '',
                optDiv: '',
                CaptionCont: '',
                ul:'',
                is_floating: false,
                is_opened: false,
                //backdrop: '',
                mob:false, // if to open device default select
                Pstate: [],

                createElems: function () {
                    var O = this;
                    O.E.wrap('<div class="SumoSelect" tabindex="0">');
                    O.select = O.E.parent();
                    O.caption = $('<span>');
                    O.CaptionCont = $('<p class="CaptionCont"><label><i></i></label></p>').addClass('SelectBox').attr('style', O.E.attr('style')).prepend(O.caption);
                    O.select.append(O.CaptionCont);

                    // default turn off if no multiselect
                    if(!O.is_multi)settings.okCancelInMulti = false

                    if(O.E.attr('disabled'))
                        O.select.addClass('disabled').removeAttr('tabindex');

                    //if output as csv and is a multiselect.
                    if (settings.outputAsCSV && O.is_multi && O.E.attr('name')) {
                        //create a hidden field to store csv value.
                        O.select.append($('<input class="HEMANT123" type="hidden" />').attr('name', O.E.attr('name')).val(O.getSelStr()));

                        // so it can not post the original select.
                        O.E.removeAttr('name');
                    }

                    //break for mobile rendring.. if forceCustomRendering is false
                    if (O.isMobile() && !settings.forceCustomRendering) {
                        O.setNativeMobile();
                        return;
                    }

                    // if there is a name attr in select add a class to container div
                    if(O.E.attr('name')) O.select.addClass('sumo_'+O.E.attr('name'))

                    //hide original select
                    O.E.addClass('SumoUnder').attr('tabindex','-1');

                    //## Creating the list...
                    O.optDiv = $('<div class="optWrapper '+ (settings.up?'up':'') +'">');

                    //branch for floating list in low res devices.
                    O.floatingList();

                    //Creating the markup for the available options
                    O.ul = $('<ul class="options">');
                    O.optDiv.append(O.ul);

                    // Select all functionality
                    if(settings.selectAll) O.SelAll();

                    // search functionality
                    if(settings.search) O.Search();

                    O.ul.append(O.prepItems(O.E.children()));

                    //if multiple then add the class multiple and add OK / CANCEL button
                    if (O.is_multi) O.multiSelelect();

                    O.select.append(O.optDiv);
                    O.basicEvents();
                    O.selAllState();
                },

                prepItems: function(opts, d){
                    var lis = [], O=this;
                    $(opts).each(function (i, opt) {       // parsing options to li
                        opt = $(opt);
                        lis.push(opt.is('optgroup')?
                            $('<li class="group '+ (opt[0].disabled?'disabled':'') +'"><label>' + opt.attr('label') +'</label><ul></ul><li>')
                            .find('ul')
                            .append(O.prepItems(opt.children(), opt[0].disabled))
                            .end()
                            :
                            O.createLi(opt, d)
                            );
                    });
                    return lis;
                },

                //## Creates a LI element from a given option and binds events to it
                //## returns the jquery instance of li (not inserted in dom)
                createLi: function (opt, d) {
                    var O = this;

                    if(!opt.attr('value'))opt.attr('value',opt.val());
                                                                                    // todo: remove this data val 
                    li = $('<li class="opt"><label>' + opt.text() + '</label></li>');//.data('val',opt.val());
                    li.data('opt', opt);    // store a direct reference to option.
                    opt.data('li', li);    // store a direct reference to list item.
                    if (O.is_multi) li.prepend('<span><i></i></span>');

                    if (opt[0].disabled || d)
                        li = li.addClass('disabled');

                    O.onOptClick(li);

                    if (opt[0].selected)
                        li.addClass('selected');

                    if (opt.attr('class'))
                        li.addClass(opt.attr('class'));

                    return li;
                },

                //## Returns the selected items as string in a Multiselect.
                getSelStr: function () {
                    // get the pre selected items.
                    sopt = [];
                    this.E.find('option:selected').each(function () { sopt.push($(this).val()); });
                    return sopt.join(settings.csvSepChar);
                },

                //## THOSE OK/CANCEL BUTTONS ON MULTIPLE SELECT.
                multiSelelect: function () {
                    var O = this;
                    O.optDiv.addClass('multiple');
                    O.okbtn = $('<p class="btnOk">'+settings.locale[0]+'</p>').click(function () {

                        //if combined change event is set.
                        if (settings.triggerChangeCombined) {

                            //check for a change in the selection.
                            changed = false;
                            if (O.E.find('option:selected').length != O.Pstate.length) {
                                changed = true;
                            }
                            else {
                                O.E.find('option').each(function (i,e) {
                                    if(e.selected && O.Pstate.indexOf(i) < 0) changed = true;
                                });
                            }

                            if (changed) {
                                O.callChange();
                                O.setText();
                            }
                        }
                        O.hideOpts();
                    });
                    O.cancelBtn = $('<p class="btnCancel">'+settings.locale[1]+'</p>').click(function () {
                        O._cnbtn();
                        O.hideOpts();
                    });
                    O.optDiv.append($('<div class="MultiControls">').append(O.okbtn).append(O.cancelBtn));
                },

                _cnbtn:function(){
                    var O = this;
                    //remove all selections
                        O.E.find('option:selected').each(function () { this.selected = false; });
                        O.optDiv.find('li.selected').removeClass('selected')

                        //restore selections from saved state.
                        for(var i = 0; i < O.Pstate.length; i++) {
                            O.E.find('option')[O.Pstate[i]].selected = true;
                            O.ul.find('li.opt').eq(O.Pstate[i]).addClass('selected');
                        }
                    O.selAllState();
                },

                SelAll:function(){
                    var O = this;
                    if(!O.is_multi)return;
                    O.selAll = $('<p class="select-all"><span><i></i></span><label>' + settings.locale[2] + '</label></p>');
                    O.selAll.on('click',function(){
						//O.toggSelAll(!);
						O.selAll.toggleClass('selected');
						O.optDiv.find('li.opt').not('.hidden').each(function(ix,e){
							e = $(e);
							if(O.selAll.hasClass('selected')){
								if(!e.hasClass('selected'))e.trigger('click');
							}
							else
								if(e.hasClass('selected'))e.trigger('click');
						});
					});

                    O.optDiv.prepend(O.selAll);
                },

                // search module (can be removed if not required.)
                Search: function(){
                    var O = this,
                        cc = O.CaptionCont.addClass('search'),
                        P = $('<p class="no-match">');

                    O.ftxt = $('<input type="text" class="search-txt" value="" placeholder="' + settings.searchText + '">')
                        .on('click', function(e){
                            e.stopPropagation();
                        });
                    cc.append(O.ftxt);
                    O.optDiv.children('ul').after(P);

                    O.ftxt.on('keyup.sumo',function(){
                        var hid = O.optDiv.find('ul.options li.opt').each(function(ix,e){
                            e = $(e);
                            if(e.text().toLowerCase().indexOf(O.ftxt.val().toLowerCase()) > -1)
                                e.removeClass('hidden');
                            else
                                e.addClass('hidden');
                        }).not('.hidden');

                        P.html(settings.noMatch.replace(/\{0\}/g, O.ftxt.val())).toggle(!hid.length);

                        O.selAllState();
                    });
                },

                selAllState: function () {
                    var O = this;
                    if (settings.selectAll) {
                        var sc = 0, vc = 0;
                        O.optDiv.find('li.opt').not('.hidden').each(function (ix, e) {
                            if ($(e).hasClass('selected')) sc++;
                            if (!$(e).hasClass('disabled')) vc++;
                        });
                        //select all checkbox state change.
                        if (sc == vc) O.selAll.removeClass('partial').addClass('selected');
                        else if (sc == 0) O.selAll.removeClass('selected partial');
                        else O.selAll.addClass('partial')//.removeClass('selected');
                    }
                },

                showOpts: function () {
                    var O = this;
                    if (O.E.attr('disabled')) return; // if select is disabled then retrun
                    O.is_opened = true;
                    O.select.addClass('open');

                    if(O.ftxt)O.ftxt.focus();
                    else O.select.focus();

                    // hide options on click outside.
                    $(document).on('click.sumo', function (e) {
                        if (!O.select.is(e.target)                  // if the target of the click isn't the container...
                            && O.select.has(e.target).length === 0){ // ... nor a descendant of the container
                            if(!O.is_opened)return;
                            O.hideOpts();
                            if (settings.okCancelInMulti)O._cnbtn();
                        }
                    });

                    if (O.is_floating) {
                        H = O.optDiv.children('ul').outerHeight() + 2;  // +2 is clear fix
                        if (O.is_multi) H = H + parseInt(O.optDiv.css('padding-bottom'));
                        O.optDiv.css('height', H);
                        $('body').addClass('sumoStopScroll');
                    }

                    O.setPstate();
                },

                //maintain state when ok/cancel buttons are available storing the indexes.
                setPstate: function(){
                    var O = this;
                    if (O.is_multi && (O.is_floating || settings.okCancelInMulti)){
                        O.Pstate = [];
                        // assuming that find returns elements in tree order
                        O.E.find('option').each(function (i, e){if(e.selected) O.Pstate.push(i);});
                    }
                },

                callChange:function(){
                    this.E.trigger('change').trigger('click');
                },

                hideOpts: function () {
                    var O = this;
                    if(O.is_opened){
                        O.is_opened = false;
                        O.select.removeClass('open').find('ul li.sel').removeClass('sel');
                        $(document).off('click.sumo');
                        O.select.focus();
                        $('body').removeClass('sumoStopScroll');

                        // clear the search
                        if(settings.search){
                            O.ftxt.val('');
                            O.optDiv.find('ul.options li').removeClass('hidden');
                            O.optDiv.find('.no-match').toggle(false);
                        }
                    }
                 },
                setOnOpen: function () {
                    var O = this,
                        li = O.optDiv.find('li.opt:not(.hidden)').eq(settings.search?0:O.E[0].selectedIndex);

                    O.optDiv.find('li.sel').removeClass('sel');
                    li.addClass('sel');
                    O.showOpts();
                },
                nav: function (up) {
                    var O = this, c, 
                    s=O.ul.find('li.opt:not(.disabled, .hidden)'),
                    sel = O.ul.find('li.opt.sel:not(.hidden)'),
                    idx = s.index(sel);
                    if (O.is_opened && sel.length) {
                        
                        if (up && idx > 0)
                            c = s.eq(idx-1);
                        else if(!up && idx < s.length-1 && idx > -1)
                            c = s.eq(idx+1);
                        else return; // if no items before or after

                        sel.removeClass('sel');
                        sel = c.addClass('sel');

                        // setting sel item to visible view.
                        var ul = O.ul,
                            st = ul.scrollTop(),
                            t = sel.position().top + st;                            
                        if(t >= st + ul.height()-sel.outerHeight())
                            ul.scrollTop(t - ul.height() + sel.outerHeight());
                        if(t<st)
                            ul.scrollTop(t);

                    }
                    else
                        O.setOnOpen();
                },

                basicEvents: function () {
                    var O = this;
                    O.CaptionCont.click(function (evt) {
                        O.E.trigger('click');
                        if (O.is_opened) O.hideOpts(); else O.showOpts();
                        evt.stopPropagation();
                    });

                        O.select.on('keydown.sumo', function (e) {
                            switch (e.which) {
                                case 38: // up
                                    O.nav(true);
                                    break;

                                case 40: // down
                                    O.nav(false);
                                    break;

                                case 32: // space
                                    if(settings.search && O.ftxt.is(e.target))return;
                                case 13: // enter
                                    if (O.is_opened)
                                        O.optDiv.find('ul li.sel').trigger('click');
                                    else
                                        O.setOnOpen();
                                    break;
				                case 9:	 //tab
                                case 27: // esc
                                     if (settings.okCancelInMulti)O._cnbtn();
                                    O.hideOpts();
                                    return;

                                default:
                                    return; // exit this handler for other keys
                            }
                            e.preventDefault(); // prevent the default action (scroll / move caret)
                        });

                    $(window).on('resize.sumo', function () {
                        O.floatingList();
                    });
                },

                onOptClick: function (li) {
                    var O = this;
                    li.click(function () {
                        var li = $(this);
                        if(li.hasClass('disabled'))return;
                        txt = "";
                        if (O.is_multi) {
                            li.toggleClass('selected');
                            li.data('opt')[0].selected = li.hasClass('selected');
                            O.selAllState();
                        }
                        else {
                            li.parent().find('li.selected').removeClass('selected'); //if not multiselect then remove all selections from this list
                            li.toggleClass('selected');
                            li.data('opt')[0].selected = true;
                        }

                        //branch for combined change event.
                        if (!(O.is_multi && settings.triggerChangeCombined && (O.is_floating || settings.okCancelInMulti))) {
                            O.setText();
                            O.callChange();
                        }

                        if (!O.is_multi) O.hideOpts(); //if its not a multiselect then hide on single select.
                    });
                },

                setText: function () {
                    var O = this;
                    O.placeholder = "";
                    if (O.is_multi) {
                        sels = O.E.find(':selected').not(':disabled'); //selected options.

                        for (i = 0; i < sels.length; i++) {
                                if (i + 1 >= settings.csvDispCount && settings.csvDispCount) {
                                    if (sels.length == O.E.find('option').length && settings.captionFormatAllSelected) {
                                        O.placeholder = settings.captionFormatAllSelected.replace(/\{0\}/g, sels.length)+',';
                                    } else {
                                        O.placeholder = settings.captionFormat.replace(/\{0\}/g, sels.length)+',';
                                    }

                                    break;
                                }
                                else O.placeholder += $(sels[i]).text() + ", ";
                            }
                            O.placeholder = O.placeholder.replace(/,([^,]*)$/, '$1'); //remove unexpected "," from last.
                    }
                    else {
                        O.placeholder = O.E.find(':selected').not(':disabled').text();
                    }

                    is_placeholder = false;

                    if (!O.placeholder) {

                        is_placeholder = true;

                        O.placeholder = O.E.attr('placeholder');
                        if (!O.placeholder)                  //if placeholder is there then set it
                            O.placeholder = O.E.find('option:disabled:selected').text();
                    }

                    O.placeholder = O.placeholder ? (settings.prefix + ' ' + O.placeholder) : settings.placeholder

                    //set display text
                    O.caption.html(O.placeholder);
                    O.CaptionCont.attr('title', O.placeholder);

                    //set the hidden field if post as csv is true.
                    csvField = O.select.find('input.HEMANT123');
                    if (csvField.length) csvField.val(O.getSelStr());

                    //add class placeholder if its a placeholder text.
                    if (is_placeholder) O.caption.addClass('placeholder'); else O.caption.removeClass('placeholder');
                    return O.placeholder;
                },

                isMobile: function () {

                    // Adapted from http://www.detectmobilebrowsers.com
                    var ua = navigator.userAgent || navigator.vendor || window.opera;

                    // Checks for iOs, Android, Blackberry, Opera Mini, and Windows mobile devices
                    for (var i = 0; i < settings.nativeOnDevice.length; i++) if (ua.toString().toLowerCase().indexOf(settings.nativeOnDevice[i].toLowerCase()) > 0) return settings.nativeOnDevice[i];
                    return false;
                },

                setNativeMobile: function () {
                    var O = this;
                    O.E.addClass('SelectClass')//.css('height', O.select.outerHeight());
					O.mob = true;
                    O.E.change(function () {
                        O.setText();
                    });
                },

                floatingList: function () {
                    var O = this;
                    //called on init and also on resize.
                    //O.is_floating = true if window width is < specified float width
                    O.is_floating = $(window).width() <= settings.floatWidth;

                    //set class isFloating
                    O.optDiv.toggleClass('isFloating', O.is_floating);

                    //remove height if not floating
                    if (!O.is_floating) O.optDiv.css('height', '');

                    //toggle class according to okCancelInMulti flag only when it is not floating
                    O.optDiv.toggleClass('okCancelInMulti', settings.okCancelInMulti && !O.is_floating);
                },

                //HELPERS FOR OUTSIDERS
                // validates range of given item operations
                vRange: function (i) {
                    var O = this;
                    opts = O.E.find('option');
                    if (opts.length <= i || i < 0) throw "index out of bounds"
                    return O;
                },

                //toggles selection on c as boolean.
                toggSel: function (c, i) {
                    var O = this;
                    if (typeof(i) === "number"){
                        O.vRange(i);
                        opt = O.E.find('option')[i];
                    }
                    else{
                        opt = O.E.find('option[value="'+i+'"]')[0]||0;
                    }
                    if (!opt || opt.disabled) 
                        return;

                    if(opt.selected != c){
                        opt.selected = c;
                        if(!O.mob) $(opt).data('li').toggleClass('selected',c);
                        
                        O.callChange();
                        O.setPstate();
                        O.setText();
                        O.selAllState();
                    }
                },

                //toggles disabled on c as boolean.
                toggDis: function (c, i) {
                    var O = this.vRange(i);
                    O.E.find('option')[i].disabled = c;
                    if(c)O.E.find('option')[i].selected = false;
                    if(!O.mob)O.optDiv.find('ul.options li').eq(i).toggleClass('disabled', c).removeClass('selected');
                    O.setText();
                },

                // toggle disable/enable on complete select control
                toggSumo: function(val) {
                    var O = this;
                    O.enabled = val;
                    O.select.toggleClass('disabled', val);

                    if (val) {
                        O.E.attr('disabled', 'disabled');
                        O.select.removeAttr('tabindex');
                    }
                    else{
                        O.E.removeAttr('disabled');
                        O.select.attr('tabindex','0');
                    }

                    return O;
                },

                //toggles alloption on c as boolean.
                toggSelAll: function (c) {
                    var O = this;
                    O.E.find('option').each(function (ix, el) {
                        if (O.E.find('option')[$(this).index()].disabled) return;
                        O.E.find('option')[$(this).index()].selected = c;
                        if (!O.mob)
							O.optDiv.find('ul.options li').eq($(this).index()).toggleClass('selected', c);
                        O.setText();
                    });
                    if(!O.mob && O.selAll)O.selAll.removeClass('partial').toggleClass('selected',c);
                    O.callChange();
                    O.setPstate();
                },

                /* outside accessibility options
                   which can be accessed from the element instance.
                */
                reload:function(){
                    var elm = this.unload();
                    return $(elm).SumoSelect(settings);
                },

                unload: function () {
                    var O = this;
                    O.select.before(O.E);
                    O.E.show();

                    if (settings.outputAsCSV && O.is_multi && O.select.find('input.HEMANT123').length) {
                        O.E.attr('name', O.select.find('input.HEMANT123').attr('name')); // restore the name;
                    }
                    O.select.remove();
                    delete selObj.sumo;
                    return selObj;
                },

                //## add a new option to select at a given index.
                add: function (val, txt, i) {
                    if (typeof val == "undefined") throw "No value to add"

                    var O = this;
                    opts=O.E.find('option')
                    if (typeof txt == "number") { i = txt; txt = val; }
                    if (typeof txt == "undefined") { txt = val; }

                    opt = $("<option></option>").val(val).html(txt);

                    if (opts.length < i) throw "index out of bounds"

                    if (typeof i == "undefined" || opts.length == i) { // add it to the last if given index is last no or no index provides.
                        O.E.append(opt);
                        if(!O.mob)O.ul.append(O.createLi(opt));
                    }
                    else {
                        opts.eq(i).before(opt);
                        if(!O.mob)O.ul.find('li.opt').eq(i).before(O.createLi(opt));
                    }

                    return selObj;
                },

                //## removes an item at a given index.
                remove: function (i) {
                    var O = this.vRange(i);
                    O.E.find('option').eq(i).remove();
                    if(!O.mob)O.optDiv.find('ul.options li').eq(i).remove();
                    O.setText();
                },

                //## Select an item at a given index.
                selectItem: function (i) { this.toggSel(true, i); },

                //## UnSelect an iten at a given index.
                unSelectItem: function (i) { this.toggSel(false, i); },

                //## Select all items  of the select.
                selectAll: function () { this.toggSelAll(true); },

                //## UnSelect all items of the select.
                unSelectAll: function () { this.toggSelAll(false); },

                //## Disable an iten at a given index.
                disableItem: function (i) { this.toggDis(true, i) },

                //## Removes disabled an iten at a given index.
                enableItem: function (i) { this.toggDis(false, i) },

                //## New simple methods as getter and setter are not working fine in ie8-
                //## variable to check state of control if enabled or disabled.
                enabled : true,
                //## Enables the control
                enable: function(){return this.toggSumo(false)},

                //## Disables the control
                disable: function(){return this.toggSumo(true)},


                init: function () {
                    var O = this;
                    O.createElems();
                    O.setText();
                    return O
                }

            };

            selObj.sumo.init();
        });

        return ret.length == 1 ? ret[0] : ret;
    };


}(jQuery));

/*!
 * Fotorama 4.6.4 | http://fotorama.io/license/
 */
fotoramaVersion="4.6.4",function(a,b,c,d,e){"use strict";function f(a){var b="bez_"+d.makeArray(arguments).join("_").replace(".","p");if("function"!=typeof d.easing[b]){var c=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))},g=function(a){return e[0]+a*(2*d[0]+3*c[0]*a)},h=function(a){for(var b,c=a,d=0;++d<14&&(b=f(c,0)-a,!(Math.abs(b)<.001));)c-=b/g(c);return c};return function(a){return f(h(a),1)}};d.easing[b]=function(b,d,e,f,g){return f*c([a[0],a[1]],[a[2],a[3]])(d/g)+e}}return b}function g(){}function h(a,b,c){return Math.max(isNaN(b)?-1/0:b,Math.min(isNaN(c)?1/0:c,a))}function i(a){return a.match(/ma/)&&a.match(/-?\d+(?!d)/g)[a.match(/3d/)?12:4]}function j(a){return Ic?+i(a.css("transform")):+a.css("left").replace("px","")}function k(a){var b={};return Ic?b.transform="translate3d("+a+"px,0,0)":b.left=a,b}function l(a){return{"transition-duration":a+"ms"}}function m(a,b){return isNaN(a)?b:a}function n(a,b){return m(+String(a).replace(b||"px",""))}function o(a){return/%$/.test(a)?n(a,"%"):e}function p(a,b){return m(o(a)/100*b,n(a))}function q(a){return(!isNaN(n(a))||!isNaN(n(a,"%")))&&a}function r(a,b,c,d){return(a-(d||0))*(b+(c||0))}function s(a,b,c,d){return-Math.round(a/(b+(c||0))-(d||0))}function t(a){var b=a.data();if(!b.tEnd){var c=a[0],d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"};T(c,d[uc.prefixed("transition")],function(a){b.tProp&&a.propertyName.match(b.tProp)&&b.onEndFn()}),b.tEnd=!0}}function u(a,b,c,d){var e,f=a.data();f&&(f.onEndFn=function(){e||(e=!0,clearTimeout(f.tT),c())},f.tProp=b,clearTimeout(f.tT),f.tT=setTimeout(function(){f.onEndFn()},1.5*d),t(a))}function v(a,b){if(a.length){var c=a.data();Ic?(a.css(l(0)),c.onEndFn=g,clearTimeout(c.tT)):a.stop();var d=w(b,function(){return j(a)});return a.css(k(d)),d}}function w(){for(var a,b=0,c=arguments.length;c>b&&(a=b?arguments[b]():arguments[b],"number"!=typeof a);b++);return a}function x(a,b){return Math.round(a+(b-a)/1.5)}function y(){return y.p=y.p||("https:"===c.protocol?"https://":"http://"),y.p}function z(a){var c=b.createElement("a");return c.href=a,c}function A(a,b){if("string"!=typeof a)return a;a=z(a);var c,d;if(a.host.match(/youtube\.com/)&&a.search){if(c=a.search.split("v=")[1]){var e=c.indexOf("&");-1!==e&&(c=c.substring(0,e)),d="youtube"}}else a.host.match(/youtube\.com|youtu\.be/)?(c=a.pathname.replace(/^\/(embed\/|v\/)?/,"").replace(/\/.*/,""),d="youtube"):a.host.match(/vimeo\.com/)&&(d="vimeo",c=a.pathname.replace(/^\/(video\/)?/,"").replace(/\/.*/,""));return c&&d||!b||(c=a.href,d="custom"),c?{id:c,type:d,s:a.search.replace(/^\?/,""),p:y()}:!1}function B(a,b,c){var e,f,g=a.video;return"youtube"===g.type?(f=y()+"img.youtube.com/vi/"+g.id+"/default.jpg",e=f.replace(/\/default.jpg$/,"/hqdefault.jpg"),a.thumbsReady=!0):"vimeo"===g.type?d.ajax({url:y()+"vimeo.com/api/v2/video/"+g.id+".json",dataType:"jsonp",success:function(d){a.thumbsReady=!0,C(b,{img:d[0].thumbnail_large,thumb:d[0].thumbnail_small},a.i,c)}}):a.thumbsReady=!0,{img:e,thumb:f}}function C(a,b,c,e){for(var f=0,g=a.length;g>f;f++){var h=a[f];if(h.i===c&&h.thumbsReady){var i={videoReady:!0};i[Xc]=i[Zc]=i[Yc]=!1,e.splice(f,1,d.extend({},h,i,b));break}}}function D(a){function b(a,b,e){var f=a.children("img").eq(0),g=a.attr("href"),h=a.attr("src"),i=f.attr("src"),j=b.video,k=e?A(g,j===!0):!1;k?g=!1:k=j,c(a,f,d.extend(b,{video:k,img:b.img||g||h||i,thumb:b.thumb||i||h||g}))}function c(a,b,c){var e=c.thumb&&c.img!==c.thumb,f=n(c.width||a.attr("width")),g=n(c.height||a.attr("height"));d.extend(c,{width:f,height:g,thumbratio:S(c.thumbratio||n(c.thumbwidth||b&&b.attr("width")||e||f)/n(c.thumbheight||b&&b.attr("height")||e||g))})}var e=[];return a.children().each(function(){var a=d(this),f=R(d.extend(a.data(),{id:a.attr("id")}));if(a.is("a, img"))b(a,f,!0);else{if(a.is(":empty"))return;c(a,null,d.extend(f,{html:this,_html:a.html()}))}e.push(f)}),e}function E(a){return 0===a.offsetWidth&&0===a.offsetHeight}function F(a){return!d.contains(b.documentElement,a)}function G(a,b,c,d){return G.i||(G.i=1,G.ii=[!0]),d=d||G.i,"undefined"==typeof G.ii[d]&&(G.ii[d]=!0),a()?b():G.ii[d]&&setTimeout(function(){G.ii[d]&&G(a,b,c,d)},c||100),G.i++}function H(a){c.replace(c.protocol+"//"+c.host+c.pathname.replace(/^\/?/,"/")+c.search+"#"+a)}function I(a,b,c,d){var e=a.data(),f=e.measures;if(f&&(!e.l||e.l.W!==f.width||e.l.H!==f.height||e.l.r!==f.ratio||e.l.w!==b.w||e.l.h!==b.h||e.l.m!==c||e.l.p!==d)){var g=f.width,i=f.height,j=b.w/b.h,k=f.ratio>=j,l="scaledown"===c,m="contain"===c,n="cover"===c,o=$(d);k&&(l||m)||!k&&n?(g=h(b.w,0,l?g:1/0),i=g/f.ratio):(k&&n||!k&&(l||m))&&(i=h(b.h,0,l?i:1/0),g=i*f.ratio),a.css({width:g,height:i,left:p(o.x,b.w-g),top:p(o.y,b.h-i)}),e.l={W:f.width,H:f.height,r:f.ratio,w:b.w,h:b.h,m:c,p:d}}return!0}function J(a,b){var c=a[0];c.styleSheet?c.styleSheet.cssText=b:a.html(b)}function K(a,b,c){return b===c?!1:b>=a?"left":a>=c?"right":"left right"}function L(a,b,c,d){if(!c)return!1;if(!isNaN(a))return a-(d?0:1);for(var e,f=0,g=b.length;g>f;f++){var h=b[f];if(h.id===a){e=f;break}}return e}function M(a,b,c){c=c||{},a.each(function(){var a,e=d(this),f=e.data();f.clickOn||(f.clickOn=!0,d.extend(cb(e,{onStart:function(b){a=b,(c.onStart||g).call(this,b)},onMove:c.onMove||g,onTouchEnd:c.onTouchEnd||g,onEnd:function(c){c.moved||b.call(this,a)}}),{noMove:!0}))})}function N(a,b){return'<div class="'+a+'">'+(b||"")+"</div>"}function O(a){for(var b=a.length;b;){var c=Math.floor(Math.random()*b--),d=a[b];a[b]=a[c],a[c]=d}return a}function P(a){return"[object Array]"==Object.prototype.toString.call(a)&&d.map(a,function(a){return d.extend({},a)})}function Q(a,b,c){a.scrollLeft(b||0).scrollTop(c||0)}function R(a){if(a){var b={};return d.each(a,function(a,c){b[a.toLowerCase()]=c}),b}}function S(a){if(a){var b=+a;return isNaN(b)?(b=a.split("/"),+b[0]/+b[1]||e):b}}function T(a,b,c,d){b&&(a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent("on"+b,c))}function U(a){return!!a.getAttribute("disabled")}function V(a){return{tabindex:-1*a+"",disabled:a}}function W(a,b){T(a,"keyup",function(c){U(a)||13==c.keyCode&&b.call(a,c)})}function X(a,b){T(a,"focus",a.onfocusin=function(c){b.call(a,c)},!0)}function Y(a,b){a.preventDefault?a.preventDefault():a.returnValue=!1,b&&a.stopPropagation&&a.stopPropagation()}function Z(a){return a?">":"<"}function $(a){return a=(a+"").split(/\s+/),{x:q(a[0])||bd,y:q(a[1])||bd}}function _(a,b){var c=a.data(),e=Math.round(b.pos),f=function(){c.sliding=!1,(b.onEnd||g)()};"undefined"!=typeof b.overPos&&b.overPos!==b.pos&&(e=b.overPos,f=function(){_(a,d.extend({},b,{overPos:b.pos,time:Math.max(Qc,b.time/2)}))});var h=d.extend(k(e),b.width&&{width:b.width});c.sliding=!0,Ic?(a.css(d.extend(l(b.time),h)),b.time>10?u(a,"transform",f,b.time):f()):a.stop().animate(h,b.time,_c,f)}function ab(a,b,c,e,f,h){var i="undefined"!=typeof h;if(i||(f.push(arguments),Array.prototype.push.call(arguments,f.length),!(f.length>1))){a=a||d(a),b=b||d(b);var j=a[0],k=b[0],l="crossfade"===e.method,m=function(){if(!m.done){m.done=!0;var a=(i||f.shift())&&f.shift();a&&ab.apply(this,a),(e.onEnd||g)(!!a)}},n=e.time/(h||1);c.removeClass(Rb+" "+Qb),a.stop().addClass(Rb),b.stop().addClass(Qb),l&&k&&a.fadeTo(0,0),a.fadeTo(l?n:0,1,l&&m),b.fadeTo(n,0,m),j&&l||k||m()}}function bb(a){var b=(a.touches||[])[0]||a;a._x=b.pageX,a._y=b.clientY,a._now=d.now()}function cb(a,c){function e(a){return m=d(a.target),u.checked=p=q=s=!1,k||u.flow||a.touches&&a.touches.length>1||a.which>1||ed&&ed.type!==a.type&&gd||(p=c.select&&m.is(c.select,t))?p:(o="touchstart"===a.type,q=m.is("a, a *",t),n=u.control,r=u.noMove||u.noSwipe||n?16:u.snap?0:4,bb(a),l=ed=a,fd=a.type.replace(/down|start/,"move").replace(/Down/,"Move"),(c.onStart||g).call(t,a,{control:n,$target:m}),k=u.flow=!0,void((!o||u.go)&&Y(a)))}function f(a){if(a.touches&&a.touches.length>1||Nc&&!a.isPrimary||fd!==a.type||!k)return k&&h(),void(c.onTouchEnd||g)();bb(a);var b=Math.abs(a._x-l._x),d=Math.abs(a._y-l._y),e=b-d,f=(u.go||u.x||e>=0)&&!u.noSwipe,i=0>e;o&&!u.checked?(k=f)&&Y(a):(Y(a),(c.onMove||g).call(t,a,{touch:o})),!s&&Math.sqrt(Math.pow(b,2)+Math.pow(d,2))>r&&(s=!0),u.checked=u.checked||f||i}function h(a){(c.onTouchEnd||g)();var b=k;u.control=k=!1,b&&(u.flow=!1),!b||q&&!u.checked||(a&&Y(a),gd=!0,clearTimeout(hd),hd=setTimeout(function(){gd=!1},1e3),(c.onEnd||g).call(t,{moved:s,$target:m,control:n,touch:o,startEvent:l,aborted:!a||"MSPointerCancel"===a.type}))}function i(){u.flow||setTimeout(function(){u.flow=!0},10)}function j(){u.flow&&setTimeout(function(){u.flow=!1},Pc)}var k,l,m,n,o,p,q,r,s,t=a[0],u={};return Nc?(T(t,"MSPointerDown",e),T(b,"MSPointerMove",f),T(b,"MSPointerCancel",h),T(b,"MSPointerUp",h)):(T(t,"touchstart",e),T(t,"touchmove",f),T(t,"touchend",h),T(b,"touchstart",i),T(b,"touchend",j),T(b,"touchcancel",j),Ec.on("scroll",j),a.on("mousedown",e),Fc.on("mousemove",f).on("mouseup",h)),a.on("click","a",function(a){u.checked&&Y(a)}),u}function db(a,b){function c(c,d){A=!0,j=l=c._x,q=c._now,p=[[q,j]],m=n=D.noMove||d?0:v(a,(b.getPos||g)()),(b.onStart||g).call(B,c)}function e(a,b){s=D.min,t=D.max,u=D.snap,w=a.altKey,A=z=!1,y=b.control,y||C.sliding||c(a)}function f(d,e){D.noSwipe||(A||c(d),l=d._x,p.push([d._now,l]),n=m-(j-l),o=K(n,s,t),s>=n?n=x(n,s):n>=t&&(n=x(n,t)),D.noMove||(a.css(k(n)),z||(z=!0,e.touch||Nc||a.addClass(ec)),(b.onMove||g).call(B,d,{pos:n,edge:o})))}function i(e){if(!D.noSwipe||!e.moved){A||c(e.startEvent,!0),e.touch||Nc||a.removeClass(ec),r=d.now();for(var f,i,j,k,o,q,v,x,y,z=r-Pc,C=null,E=Qc,F=b.friction,G=p.length-1;G>=0;G--){if(f=p[G][0],i=Math.abs(f-z),null===C||j>i)C=f,k=p[G][1];else if(C===z||i>j)break;j=i}v=h(n,s,t);var H=k-l,I=H>=0,J=r-C,K=J>Pc,L=!K&&n!==m&&v===n;u&&(v=h(Math[L?I?"floor":"ceil":"round"](n/u)*u,s,t),s=t=v),L&&(u||v===n)&&(y=-(H/J),E*=h(Math.abs(y),b.timeLow,b.timeHigh),o=Math.round(n+y*E/F),u||(v=o),(!I&&o>t||I&&s>o)&&(q=I?s:t,x=o-q,u||(v=q),x=h(v+.03*x,q-50,q+50),E=Math.abs((n-x)/(y/F)))),E*=w?10:1,(b.onEnd||g).call(B,d.extend(e,{moved:e.moved||K&&u,pos:n,newPos:v,overPos:x,time:E}))}}var j,l,m,n,o,p,q,r,s,t,u,w,y,z,A,B=a[0],C=a.data(),D={};return D=d.extend(cb(b.$wrap,d.extend({},b,{onStart:e,onMove:f,onEnd:i})),D)}function eb(a,b){var c,e,f,h=a[0],i={prevent:{}};return T(h,Oc,function(a){var h=a.wheelDeltaY||-1*a.deltaY||0,j=a.wheelDeltaX||-1*a.deltaX||0,k=Math.abs(j)&&!Math.abs(h),l=Z(0>j),m=e===l,n=d.now(),o=Pc>n-f;e=l,f=n,k&&i.ok&&(!i.prevent[l]||c)&&(Y(a,!0),c&&m&&o||(b.shift&&(c=!0,clearTimeout(i.t),i.t=setTimeout(function(){c=!1},Rc)),(b.onEnd||g)(a,b.shift?l:j)))}),i}function fb(){d.each(d.Fotorama.instances,function(a,b){b.index=a})}function gb(a){d.Fotorama.instances.push(a),fb()}function hb(a){d.Fotorama.instances.splice(a.index,1),fb()}var ib="fotorama",jb="fullscreen",kb=ib+"__wrap",lb=kb+"--css2",mb=kb+"--css3",nb=kb+"--video",ob=kb+"--fade",pb=kb+"--slide",qb=kb+"--no-controls",rb=kb+"--no-shadows",sb=kb+"--pan-y",tb=kb+"--rtl",ub=kb+"--only-active",vb=kb+"--no-captions",wb=kb+"--toggle-arrows",xb=ib+"__stage",yb=xb+"__frame",zb=yb+"--video",Ab=xb+"__shaft",Bb=ib+"__grab",Cb=ib+"__pointer",Db=ib+"__arr",Eb=Db+"--disabled",Fb=Db+"--prev",Gb=Db+"--next",Hb=ib+"__nav",Ib=Hb+"-wrap",Jb=Hb+"__shaft",Kb=Hb+"--dots",Lb=Hb+"--thumbs",Mb=Hb+"__frame",Nb=Mb+"--dot",Ob=Mb+"--thumb",Pb=ib+"__fade",Qb=Pb+"-front",Rb=Pb+"-rear",Sb=ib+"__shadow",Tb=Sb+"s",Ub=Tb+"--left",Vb=Tb+"--right",Wb=ib+"__active",Xb=ib+"__select",Yb=ib+"--hidden",Zb=ib+"--fullscreen",$b=ib+"__fullscreen-icon",_b=ib+"__error",ac=ib+"__loading",bc=ib+"__loaded",cc=bc+"--full",dc=bc+"--img",ec=ib+"__grabbing",fc=ib+"__img",gc=fc+"--full",hc=ib+"__dot",ic=ib+"__thumb",jc=ic+"-border",kc=ib+"__html",lc=ib+"__video",mc=lc+"-play",nc=lc+"-close",oc=ib+"__caption",pc=ib+"__caption__wrap",qc=ib+"__spinner",rc='" tabindex="0" role="button',sc=d&&d.fn.jquery.split(".");if(!sc||sc[0]<1||1==sc[0]&&sc[1]<8)throw"Fotorama requires jQuery 1.8 or later and will not run without it.";var tc={},uc=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&r[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+u.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+v.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.6.2",n={},o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),t="Webkit Moz O ms",u=t.split(" "),v=t.toLowerCase().split(" "),w={},x=[],y=x.slice,z=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:p+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',p,'">',a,"</style>"].join(""),j.id=p,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=o.style.overflow,o.style.overflow="hidden",o.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),o.style.overflow=i),!!g},A={}.hasOwnProperty;l=e(A,"undefined")||e(A.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=y.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(y.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(y.call(arguments)))};return d}),w.csstransforms3d=function(){var a=!!i("perspective");return a};for(var B in w)l(w,B)&&(k=B.toLowerCase(),n[k]=w[B](),x.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),q=j=null,n._version=m,n._prefixes=s,n._domPrefixes=v,n._cssomPrefixes=u,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=z,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},n}(a,b),vc={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:"",prefix:""},wc="webkit moz o ms khtml".split(" ");if("undefined"!=typeof b.cancelFullScreen)vc.ok=!0;else for(var xc=0,yc=wc.length;yc>xc;xc++)if(vc.prefix=wc[xc],"undefined"!=typeof b[vc.prefix+"CancelFullScreen"]){vc.ok=!0;break}vc.ok&&(vc.event=vc.prefix+"fullscreenchange",vc.is=function(){switch(this.prefix){case"":return b.fullScreen;case"webkit":return b.webkitIsFullScreen;default:return b[this.prefix+"FullScreen"]}},vc.request=function(a){return""===this.prefix?a.requestFullScreen():a[this.prefix+"RequestFullScreen"]()},vc.cancel=function(){return""===this.prefix?b.cancelFullScreen():b[this.prefix+"CancelFullScreen"]()});var zc,Ac={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:"rgba(128, 128, 128, .75)",hwaccel:!0},Bc={top:"auto",left:"auto",className:""};!function(a,b){zc=b()}(this,function(){function a(a,c){var d,e=b.createElement(a||"div");for(d in c)e[d]=c[d];return e}function c(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function d(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return o[e]||(p.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",p.cssRules.length),o[e]=1),e}function f(a,b){var c,d,f=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<n.length;d++)if(c=n[d]+b,f[c]!==e)return c;return f[b]!==e?b:void 0}function g(a,b){for(var c in b)a.style[f(a,c)||c]=b[c];return a}function h(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]===e&&(a[d]=c[d])}return a}function i(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function j(a,b){return"string"==typeof a?a:a[b%a.length]}function k(a){return"undefined"==typeof this?new k(a):void(this.opts=h(a||{},k.defaults,q))}function l(){function b(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}p.addRule(".spin-vml","behavior:url(#default#VML)"),k.prototype.lines=function(a,d){function e(){return g(b("group",{coordsize:k+" "+k,coordorigin:-i+" "+-i}),{width:k,height:k})}function f(a,f,h){c(m,c(g(e(),{rotation:360/d.lines*a+"deg",left:~~f}),c(g(b("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),b("fill",{color:j(d.color,a),opacity:d.opacity}),b("stroke",{opacity:0}))))}var h,i=d.length+d.width,k=2*i,l=2*-(d.width+d.length)+"px",m=g(e(),{position:"absolute",top:l,left:l});if(d.shadow)for(h=1;h<=d.lines;h++)f(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)f(h);return c(a,m)},k.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var m,n=["webkit","Moz","ms","O"],o={},p=function(){var d=a("style",{type:"text/css"});return c(b.getElementsByTagName("head")[0],d),d.sheet||d.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};k.defaults={},h(k.prototype,{spin:function(b){this.stop();var c,d,e=this,f=e.opts,h=e.el=g(a(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex}),j=f.radius+f.length+f.width;if(b&&(b.insertBefore(h,b.firstChild||null),d=i(b),c=i(h),g(h,{left:("auto"==f.left?d.x-c.x+(b.offsetWidth>>1):parseInt(f.left,10)+j)+"px",top:("auto"==f.top?d.y-c.y+(b.offsetHeight>>1):parseInt(f.top,10)+j)+"px"})),h.setAttribute("role","progressbar"),e.lines(h,e.opts),!m){var k,l=0,n=(f.lines-1)*(1-f.direction)/2,o=f.fps,p=o/f.speed,q=(1-f.opacity)/(p*f.trail/100),r=p/f.lines;!function s(){l++;for(var a=0;a<f.lines;a++)k=Math.max(1-(l+(f.lines-a)*r)%p*q,f.opacity),e.opacity(h,a*f.direction+n,k,f);e.timeout=e.el&&setTimeout(s,~~(1e3/o))}()}return e},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=e),this},lines:function(b,e){function f(b,c){return g(a(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*i+e.rotate)+"deg) translate("+e.radius+"px,0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(var h,i=0,k=(e.lines-1)*(1-e.direction)/2;i<e.lines;i++)h=g(a(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:m&&d(e.opacity,e.trail,k+i*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"}),e.shadow&&c(h,g(f("#000","0 0 4px #000"),{top:"2px"})),c(b,c(h,f(j(e.color,i),"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var r=g(a("group"),{behavior:"url(#default#VML)"});return!f(r,"transform")&&r.adj?l():m=f(r,"animation"),k});var Cc,Dc,Ec=d(a),Fc=d(b),Gc="quirks"===c.hash.replace("#",""),Hc=uc.csstransforms3d,Ic=Hc&&!Gc,Jc=Hc||"CSS1Compat"===b.compatMode,Kc=vc.ok,Lc=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),Mc=!Ic||Lc,Nc=navigator.msPointerEnabled,Oc="onwheel"in b.createElement("div")?"wheel":b.onmousewheel!==e?"mousewheel":"DOMMouseScroll",Pc=250,Qc=300,Rc=1400,Sc=5e3,Tc=2,Uc=64,Vc=500,Wc=333,Xc="$stageFrame",Yc="$navDotFrame",Zc="$navThumbFrame",$c="auto",_c=f([.1,0,.25,1]),ad=99999,bd="50%",cd={width:null,minwidth:null,maxwidth:"100%",height:null,minheight:null,maxheight:null,ratio:null,margin:Tc,glimpse:0,fit:"contain",position:bd,thumbposition:bd,nav:"dots",navposition:"bottom",navwidth:null,thumbwidth:Uc,thumbheight:Uc,thumbmargin:Tc,thumbborderwidth:Tc,thumbfit:"cover",allowfullscreen:!1,transition:"slide",clicktransition:null,transitionduration:Qc,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,enableifsingleframe:!1,controlsonstart:!0,shuffle:!1,direction:"ltr",shadows:!0,spinner:null},dd={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1};G.stop=function(a){G.ii[a]=!1};var ed,fd,gd,hd;jQuery.Fotorama=function(a,e){function f(){d.each(yd,function(a,b){if(!b.i){b.i=me++;var c=A(b.video,!0);if(c){var d={};b.video=c,b.img||b.thumb?b.thumbsReady=!0:d=B(b,yd,ie),C(yd,{img:d.img,thumb:d.thumb},b.i,ie)}}})}function g(a){return Zd[a]||ie.fullScreen}function i(a){var b="keydown."+ib,c=ib+je,d="keydown."+c,f="resize."+c+" orientationchange."+c;a?(Fc.on(d,function(a){var b,c;Cd&&27===a.keyCode?(b=!0,md(Cd,!0,!0)):(ie.fullScreen||e.keyboard&&!ie.index)&&(27===a.keyCode?(b=!0,ie.cancelFullScreen()):a.shiftKey&&32===a.keyCode&&g("space")||37===a.keyCode&&g("left")||38===a.keyCode&&g("up")?c="<":32===a.keyCode&&g("space")||39===a.keyCode&&g("right")||40===a.keyCode&&g("down")?c=">":36===a.keyCode&&g("home")?c="<<":35===a.keyCode&&g("end")&&(c=">>")),(b||c)&&Y(a),c&&ie.show({index:c,slow:a.altKey,user:!0})}),ie.index||Fc.off(b).on(b,"textarea, input, select",function(a){!Dc.hasClass(jb)&&a.stopPropagation()}),Ec.on(f,ie.resize)):(Fc.off(d),Ec.off(f))}function j(b){b!==j.f&&(b?(a.html("").addClass(ib+" "+ke).append(qe).before(oe).before(pe),gb(ie)):(qe.detach(),oe.detach(),pe.detach(),a.html(ne.urtext).removeClass(ke),hb(ie)),i(b),j.f=b)}function m(){yd=ie.data=yd||P(e.data)||D(a),zd=ie.size=yd.length,!xd.ok&&e.shuffle&&O(yd),f(),Je=y(Je),zd&&j(!0)}function o(){var a=2>zd&&!e.enableifsingleframe||Cd;Me.noMove=a||Sd,Me.noSwipe=a||!e.swipe,!Wd&&se.toggleClass(Bb,!e.click&&!Me.noMove&&!Me.noSwipe),Nc&&qe.toggleClass(sb,!Me.noSwipe)}function t(a){a===!0&&(a=""),e.autoplay=Math.max(+a||Sc,1.5*Vd)}function u(){function a(a,c){b[a?"add":"remove"].push(c)}ie.options=e=R(e),Sd="crossfade"===e.transition||"dissolve"===e.transition,Md=e.loop&&(zd>2||Sd&&(!Wd||"slide"!==Wd)),Vd=+e.transitionduration||Qc,Yd="rtl"===e.direction,Zd=d.extend({},e.keyboard&&dd,e.keyboard);var b={add:[],remove:[]};zd>1||e.enableifsingleframe?(Nd=e.nav,Pd="top"===e.navposition,b.remove.push(Xb),we.toggle(!!e.arrows)):(Nd=!1,we.hide()),Rb(),Bd=new zc(d.extend(Ac,e.spinner,Bc,{direction:Yd?-1:1})),Gc(),Hc(),e.autoplay&&t(e.autoplay),Td=n(e.thumbwidth)||Uc,Ud=n(e.thumbheight)||Uc,Ne.ok=Pe.ok=e.trackpad&&!Mc,o(),ed(e,[Le]),Od="thumbs"===Nd,Od?(lc(zd,"navThumb"),Ad=Be,he=Zc,J(oe,d.Fotorama.jst.style({w:Td,h:Ud,b:e.thumbborderwidth,m:e.thumbmargin,s:je,q:!Jc})),ye.addClass(Lb).removeClass(Kb)):"dots"===Nd?(lc(zd,"navDot"),Ad=Ae,he=Yc,ye.addClass(Kb).removeClass(Lb)):(Nd=!1,ye.removeClass(Lb+" "+Kb)),Nd&&(Pd?xe.insertBefore(re):xe.insertAfter(re),wc.nav=!1,wc(Ad,ze,"nav")),Qd=e.allowfullscreen,Qd?(De.prependTo(re),Rd=Kc&&"native"===Qd):(De.detach(),Rd=!1),a(Sd,ob),a(!Sd,pb),a(!e.captions,vb),a(Yd,tb),a("always"!==e.arrows,wb),Xd=e.shadows&&!Mc,a(!Xd,rb),qe.addClass(b.add.join(" ")).removeClass(b.remove.join(" ")),Ke=d.extend({},e)}function x(a){return 0>a?(zd+a%zd)%zd:a>=zd?a%zd:a}function y(a){return h(a,0,zd-1)}function z(a){return Md?x(a):y(a)}function E(a){return a>0||Md?a-1:!1}function U(a){return zd-1>a||Md?a+1:!1}function $(){Me.min=Md?-1/0:-r(zd-1,Le.w,e.margin,Fd),Me.max=Md?1/0:-r(0,Le.w,e.margin,Fd),Me.snap=Le.w+e.margin}function bb(){Oe.min=Math.min(0,Le.nw-ze.width()),Oe.max=0,ze.toggleClass(Bb,!(Oe.noMove=Oe.min===Oe.max))}function cb(a,b,c){if("number"==typeof a){a=new Array(a);var e=!0}return d.each(a,function(a,d){if(e&&(d=a),"number"==typeof d){var f=yd[x(d)];if(f){var g="$"+b+"Frame",h=f[g];c.call(this,a,d,f,h,g,h&&h.data())}}})}function fb(a,b,c,d){(!$d||"*"===$d&&d===Ld)&&(a=q(e.width)||q(a)||Vc,b=q(e.height)||q(b)||Wc,ie.resize({width:a,ratio:e.ratio||c||a/b},0,d!==Ld&&"*"))}function Pb(a,b,c,f,g,h){cb(a,b,function(a,i,j,k,l,m){function n(a){var b=x(i);fd(a,{index:b,src:w,frame:yd[b]})}function o(){t.remove(),d.Fotorama.cache[w]="error",j.html&&"stage"===b||!y||y===w?(!w||j.html||r?"stage"===b&&(k.trigger("f:load").removeClass(ac+" "+_b).addClass(bc),n("load"),fb()):(k.trigger("f:error").removeClass(ac).addClass(_b),n("error")),m.state="error",!(zd>1&&yd[i]===j)||j.html||j.deleted||j.video||r||(j.deleted=!0,ie.splice(i,1))):(j[v]=w=y,Pb([i],b,c,f,g,!0))}function p(){d.Fotorama.measures[w]=u.measures=d.Fotorama.measures[w]||{width:s.width,height:s.height,ratio:s.width/s.height},fb(u.measures.width,u.measures.height,u.measures.ratio,i),t.off("load error").addClass(fc+(r?" "+gc:"")).prependTo(k),I(t,(d.isFunction(c)?c():c)||Le,f||j.fit||e.fit,g||j.position||e.position),d.Fotorama.cache[w]=m.state="loaded",setTimeout(function(){k.trigger("f:load").removeClass(ac+" "+_b).addClass(bc+" "+(r?cc:dc)),"stage"===b?n("load"):(j.thumbratio===$c||!j.thumbratio&&e.thumbratio===$c)&&(j.thumbratio=u.measures.ratio,vd())},0)}function q(){var a=10;G(function(){return!fe||!a--&&!Mc},function(){p()})}if(k){var r=ie.fullScreen&&j.full&&j.full!==j.img&&!m.$full&&"stage"===b;if(!m.$img||h||r){var s=new Image,t=d(s),u=t.data();m[r?"$full":"$img"]=t;var v="stage"===b?r?"full":"img":"thumb",w=j[v],y=r?null:j["stage"===b?"thumb":"img"];if("navThumb"===b&&(k=m.$wrap),!w)return void o();d.Fotorama.cache[w]?!function z(){"error"===d.Fotorama.cache[w]?o():"loaded"===d.Fotorama.cache[w]?setTimeout(q,0):setTimeout(z,100)}():(d.Fotorama.cache[w]="*",t.on("load",q).on("error",o)),m.state="",s.src=w}}})}function Qb(a){Ie.append(Bd.spin().el).appendTo(a)}function Rb(){Ie.detach(),Bd&&Bd.stop()}function Sb(){var a=Dd[Xc];a&&!a.data().state&&(Qb(a),a.on("f:load f:error",function(){a.off("f:load f:error"),Rb()}))}function ec(a){W(a,sd),X(a,function(){setTimeout(function(){Q(ye)},0),Rc({time:Vd,guessIndex:d(this).data().eq,minMax:Oe})})}function lc(a,b){cb(a,b,function(a,c,e,f,g,h){if(!f){f=e[g]=qe[g].clone(),h=f.data(),h.data=e;var i=f[0];"stage"===b?(e.html&&d('<div class="'+kc+'"></div>').append(e._html?d(e.html).removeAttr("id").html(e._html):e.html).appendTo(f),e.caption&&d(N(oc,N(pc,e.caption))).appendTo(f),e.video&&f.addClass(zb).append(Fe.clone()),X(i,function(){setTimeout(function(){Q(re)},0),pd({index:h.eq,user:!0})}),te=te.add(f)):"navDot"===b?(ec(i),Ae=Ae.add(f)):"navThumb"===b&&(ec(i),h.$wrap=f.children(":first"),Be=Be.add(f),e.video&&h.$wrap.append(Fe.clone()))}})}function sc(a,b,c,d){return a&&a.length&&I(a,b,c,d)}function tc(a){cb(a,"stage",function(a,b,c,f,g,h){if(f){var i=x(b),j=c.fit||e.fit,k=c.position||e.position;h.eq=i,Re[Xc][i]=f.css(d.extend({left:Sd?0:r(b,Le.w,e.margin,Fd)},Sd&&l(0))),F(f[0])&&(f.appendTo(se),md(c.$video)),sc(h.$img,Le,j,k),sc(h.$full,Le,j,k)}})}function uc(a,b){if("thumbs"===Nd&&!isNaN(a)){var c=-a,f=-a+Le.nw;Be.each(function(){var a=d(this),g=a.data(),h=g.eq,i=function(){return{h:Ud,w:g.w}},j=i(),k=yd[h]||{},l=k.thumbfit||e.thumbfit,m=k.thumbposition||e.thumbposition;j.w=g.w,g.l+g.w<c||g.l>f||sc(g.$img,j,l,m)||b&&Pb([h],"navThumb",i,l,m)})}}function wc(a,b,c){if(!wc[c]){var f="nav"===c&&Od,g=0;b.append(a.filter(function(){for(var a,b=d(this),c=b.data(),e=0,f=yd.length;f>e;e++)if(c.data===yd[e]){a=!0,c.eq=e;break}return a||b.remove()&&!1}).sort(function(a,b){return d(a).data().eq-d(b).data().eq}).each(function(){if(f){var a=d(this),b=a.data(),c=Math.round(Ud*b.data.thumbratio)||Td;b.l=g,b.w=c,a.css({width:c}),g+=c+e.thumbmargin}})),wc[c]=!0}}function xc(a){return a-Se>Le.w/3}function yc(a){return!(Md||Je+a&&Je-zd+a||Cd)}function Gc(){var a=yc(0),b=yc(1);ue.toggleClass(Eb,a).attr(V(a)),ve.toggleClass(Eb,b).attr(V(b))}function Hc(){Ne.ok&&(Ne.prevent={"<":yc(0),">":yc(1)})}function Lc(a){var b,c,d=a.data();return Od?(b=d.l,c=d.w):(b=a.position().left,c=a.width()),{c:b+c/2,min:-b+10*e.thumbmargin,max:-b+Le.w-c-10*e.thumbmargin}}function Oc(a){var b=Dd[he].data();_(Ce,{time:1.2*a,pos:b.l,width:b.w-2*e.thumbborderwidth})}function Rc(a){var b=yd[a.guessIndex][he];if(b){var c=Oe.min!==Oe.max,d=a.minMax||c&&Lc(Dd[he]),e=c&&(a.keep&&Rc.l?Rc.l:h((a.coo||Le.nw/2)-Lc(b).c,d.min,d.max)),f=c&&h(e,Oe.min,Oe.max),g=1.1*a.time;_(ze,{time:g,pos:f||0,onEnd:function(){uc(f,!0)}}),ld(ye,K(f,Oe.min,Oe.max)),Rc.l=e}}function Tc(){_c(he),Qe[he].push(Dd[he].addClass(Wb))}function _c(a){for(var b=Qe[a];b.length;)b.shift().removeClass(Wb)}function bd(a){var b=Re[a];d.each(Ed,function(a,c){delete b[x(c)]}),d.each(b,function(a,c){delete b[a],c.detach()})}function cd(a){Fd=Gd=Je;var b=Dd[Xc];b&&(_c(Xc),Qe[Xc].push(b.addClass(Wb)),a||ie.show.onEnd(!0),v(se,0,!0),bd(Xc),tc(Ed),$(),bb())}function ed(a,b){a&&d.each(b,function(b,c){c&&d.extend(c,{width:a.width||c.width,height:a.height,minwidth:a.minwidth,maxwidth:a.maxwidth,minheight:a.minheight,maxheight:a.maxheight,ratio:S(a.ratio)})})}function fd(b,c){a.trigger(ib+":"+b,[ie,c])}function gd(){clearTimeout(hd.t),fe=1,e.stopautoplayontouch?ie.stopAutoplay():ce=!0}function hd(){fe&&(e.stopautoplayontouch||(id(),jd()),hd.t=setTimeout(function(){fe=0},Qc+Pc))}function id(){ce=!(!Cd&&!de)}function jd(){if(clearTimeout(jd.t),G.stop(jd.w),!e.autoplay||ce)return void(ie.autoplay&&(ie.autoplay=!1,fd("stopautoplay")));ie.autoplay||(ie.autoplay=!0,fd("startautoplay"));var a=Je,b=Dd[Xc].data();jd.w=G(function(){return b.state||a!==Je},function(){jd.t=setTimeout(function(){if(!ce&&a===Je){var b=Kd,c=yd[b][Xc].data();jd.w=G(function(){return c.state||b!==Kd},function(){ce||b!==Kd||ie.show(Md?Z(!Yd):Kd)})}},e.autoplay)})}function kd(){ie.fullScreen&&(ie.fullScreen=!1,Kc&&vc.cancel(le),Dc.removeClass(jb),Cc.removeClass(jb),a.removeClass(Zb).insertAfter(pe),Le=d.extend({},ee),md(Cd,!0,!0),rd("x",!1),ie.resize(),Pb(Ed,"stage"),Q(Ec,ae,_d),fd("fullscreenexit"))}function ld(a,b){Xd&&(a.removeClass(Ub+" "+Vb),b&&!Cd&&a.addClass(b.replace(/^|\s/g," "+Tb+"--")))}function md(a,b,c){b&&(qe.removeClass(nb),Cd=!1,o()),a&&a!==Cd&&(a.remove(),fd("unloadvideo")),c&&(id(),jd())}function nd(a){qe.toggleClass(qb,a)}function od(a){if(!Me.flow){var b=a?a.pageX:od.x,c=b&&!yc(xc(b))&&e.click;od.p!==c&&re.toggleClass(Cb,c)&&(od.p=c,od.x=b)}}function pd(a){clearTimeout(pd.t),e.clicktransition&&e.clicktransition!==e.transition?setTimeout(function(){var b=e.transition;ie.setOptions({transition:e.clicktransition}),Wd=b,pd.t=setTimeout(function(){ie.show(a)},10)},0):ie.show(a)}function qd(a,b){var c=a.target,f=d(c);f.hasClass(mc)?ie.playVideo():c===Ee?ie.toggleFullScreen():Cd?c===He&&md(Cd,!0,!0):b?nd():e.click&&pd({index:a.shiftKey||Z(xc(a._x)),slow:a.altKey,user:!0})}function rd(a,b){Me[a]=Oe[a]=b}function sd(a){var b=d(this).data().eq;pd({index:b,slow:a.altKey,user:!0,coo:a._x-ye.offset().left})}function td(a){pd({index:we.index(this)?">":"<",slow:a.altKey,user:!0})}function ud(a){X(a,function(){setTimeout(function(){Q(re)},0),nd(!1)})}function vd(){if(m(),u(),!vd.i){vd.i=!0;var a=e.startindex;(a||e.hash&&c.hash)&&(Ld=L(a||c.hash.replace(/^#/,""),yd,0===ie.index||a,a)),Je=Fd=Gd=Hd=Ld=z(Ld)||0}if(zd){if(wd())return;Cd&&md(Cd,!0),Ed=[],bd(Xc),vd.ok=!0,ie.show({index:Je,time:0}),ie.resize()}else ie.destroy()}function wd(){return!wd.f===Yd?(wd.f=Yd,Je=zd-1-Je,ie.reverse(),!0):void 0}function xd(){xd.ok||(xd.ok=!0,fd("ready"))}Cc=d("html"),Dc=d("body");var yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,Wd,Xd,Yd,Zd,$d,_d,ae,be,ce,de,ee,fe,ge,he,ie=this,je=d.now(),ke=ib+je,le=a[0],me=1,ne=a.data(),oe=d("<style></style>"),pe=d(N(Yb)),qe=d(N(kb)),re=d(N(xb)).appendTo(qe),se=(re[0],d(N(Ab)).appendTo(re)),te=d(),ue=d(N(Db+" "+Fb+rc)),ve=d(N(Db+" "+Gb+rc)),we=ue.add(ve).appendTo(re),xe=d(N(Ib)),ye=d(N(Hb)).appendTo(xe),ze=d(N(Jb)).appendTo(ye),Ae=d(),Be=d(),Ce=(se.data(),ze.data(),d(N(jc)).appendTo(ze)),De=d(N($b+rc)),Ee=De[0],Fe=d(N(mc)),Ge=d(N(nc)).appendTo(re),He=Ge[0],Ie=d(N(qc)),Je=!1,Ke={},Le={},Me={},Ne={},Oe={},Pe={},Qe={},Re={},Se=0,Te=[];
qe[Xc]=d(N(yb)),qe[Zc]=d(N(Mb+" "+Ob+rc,N(ic))),qe[Yc]=d(N(Mb+" "+Nb+rc,N(hc))),Qe[Xc]=[],Qe[Zc]=[],Qe[Yc]=[],Re[Xc]={},qe.addClass(Ic?mb:lb).toggleClass(qb,!e.controlsonstart),ne.fotorama=this,ie.startAutoplay=function(a){return ie.autoplay?this:(ce=de=!1,t(a||e.autoplay),jd(),this)},ie.stopAutoplay=function(){return ie.autoplay&&(ce=de=!0,jd()),this},ie.show=function(a){var b;"object"!=typeof a?(b=a,a={}):b=a.index,b=">"===b?Gd+1:"<"===b?Gd-1:"<<"===b?0:">>"===b?zd-1:b,b=isNaN(b)?L(b,yd,!0):b,b="undefined"==typeof b?Je||0:b,ie.activeIndex=Je=z(b),Id=E(Je),Jd=U(Je),Kd=x(Je+(Yd?-1:1)),Ed=[Je,Id,Jd],Gd=Md?b:Je;var c=Math.abs(Hd-Gd),d=w(a.time,function(){return Math.min(Vd*(1+(c-1)/12),2*Vd)}),f=a.overPos;a.slow&&(d*=10);var g=Dd;ie.activeFrame=Dd=yd[Je];var i=g===Dd&&!a.user;md(Cd,Dd.i!==yd[x(Fd)].i),lc(Ed,"stage"),tc(Mc?[Gd]:[Gd,E(Gd),U(Gd)]),rd("go",!0),i||fd("show",{user:a.user,time:d}),ce=!0;var j=ie.show.onEnd=function(b){if(!j.ok){if(j.ok=!0,b||cd(!0),i||fd("showend",{user:a.user}),!b&&Wd&&Wd!==e.transition)return ie.setOptions({transition:Wd}),void(Wd=!1);Sb(),Pb(Ed,"stage"),rd("go",!1),Hc(),od(),id(),jd()}};if(Sd){var k=Dd[Xc],l=Je!==Hd?yd[Hd][Xc]:null;ab(k,l,te,{time:d,method:e.transition,onEnd:j},Te)}else _(se,{pos:-r(Gd,Le.w,e.margin,Fd),overPos:f,time:d,onEnd:j});if(Gc(),Nd){Tc();var m=y(Je+h(Gd-Hd,-1,1));Rc({time:d,coo:m!==Je&&a.coo,guessIndex:"undefined"!=typeof a.coo?m:Je,keep:i}),Od&&Oc(d)}return be="undefined"!=typeof Hd&&Hd!==Je,Hd=Je,e.hash&&be&&!ie.eq&&H(Dd.id||Je+1),this},ie.requestFullScreen=function(){return Qd&&!ie.fullScreen&&(_d=Ec.scrollTop(),ae=Ec.scrollLeft(),Q(Ec),rd("x",!0),ee=d.extend({},Le),a.addClass(Zb).appendTo(Dc.addClass(jb)),Cc.addClass(jb),md(Cd,!0,!0),ie.fullScreen=!0,Rd&&vc.request(le),ie.resize(),Pb(Ed,"stage"),Sb(),fd("fullscreenenter")),this},ie.cancelFullScreen=function(){return Rd&&vc.is()?vc.cancel(b):kd(),this},ie.toggleFullScreen=function(){return ie[(ie.fullScreen?"cancel":"request")+"FullScreen"]()},T(b,vc.event,function(){!yd||vc.is()||Cd||kd()}),ie.resize=function(a){if(!yd)return this;var b=arguments[1]||0,c=arguments[2];ed(ie.fullScreen?{width:"100%",maxwidth:null,minwidth:null,height:"100%",maxheight:null,minheight:null}:R(a),[Le,c||ie.fullScreen||e]);var d=Le.width,f=Le.height,g=Le.ratio,i=Ec.height()-(Nd?ye.height():0);return q(d)&&(qe.addClass(ub).css({width:d,minWidth:Le.minwidth||0,maxWidth:Le.maxwidth||ad}),d=Le.W=Le.w=qe.width(),Le.nw=Nd&&p(e.navwidth,d)||d,e.glimpse&&(Le.w-=Math.round(2*(p(e.glimpse,d)||0))),se.css({width:Le.w,marginLeft:(Le.W-Le.w)/2}),f=p(f,i),f=f||g&&d/g,f&&(d=Math.round(d),f=Le.h=Math.round(h(f,p(Le.minheight,i),p(Le.maxheight,i))),re.stop().animate({width:d,height:f},b,function(){qe.removeClass(ub)}),cd(),Nd&&(ye.stop().animate({width:Le.nw},b),Rc({guessIndex:Je,time:b,keep:!0}),Od&&wc.nav&&Oc(b)),$d=c||!0,xd())),Se=re.offset().left,this},ie.setOptions=function(a){return d.extend(e,a),vd(),this},ie.shuffle=function(){return yd&&O(yd)&&vd(),this},ie.destroy=function(){return ie.cancelFullScreen(),ie.stopAutoplay(),yd=ie.data=null,j(),Ed=[],bd(Xc),vd.ok=!1,this},ie.playVideo=function(){var a=Dd,b=a.video,c=Je;return"object"==typeof b&&a.videoReady&&(Rd&&ie.fullScreen&&ie.cancelFullScreen(),G(function(){return!vc.is()||c!==Je},function(){c===Je&&(a.$video=a.$video||d(d.Fotorama.jst.video(b)),a.$video.appendTo(a[Xc]),qe.addClass(nb),Cd=a.$video,o(),we.blur(),De.blur(),fd("loadvideo"))})),this},ie.stopVideo=function(){return md(Cd,!0,!0),this},re.on("mousemove",od),Me=db(se,{onStart:gd,onMove:function(a,b){ld(re,b.edge)},onTouchEnd:hd,onEnd:function(a){ld(re);var b=(Nc&&!ge||a.touch)&&e.arrows&&"always"!==e.arrows;if(a.moved||b&&a.pos!==a.newPos&&!a.control){var c=s(a.newPos,Le.w,e.margin,Fd);ie.show({index:c,time:Sd?Vd:a.time,overPos:a.overPos,user:!0})}else a.aborted||a.control||qd(a.startEvent,b)},timeLow:1,timeHigh:1,friction:2,select:"."+Xb+", ."+Xb+" *",$wrap:re}),Oe=db(ze,{onStart:gd,onMove:function(a,b){ld(ye,b.edge)},onTouchEnd:hd,onEnd:function(a){function b(){Rc.l=a.newPos,id(),jd(),uc(a.newPos,!0)}if(a.moved)a.pos!==a.newPos?(ce=!0,_(ze,{time:a.time,pos:a.newPos,overPos:a.overPos,onEnd:b}),uc(a.newPos),Xd&&ld(ye,K(a.newPos,Oe.min,Oe.max))):b();else{var c=a.$target.closest("."+Mb,ze)[0];c&&sd.call(c,a.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:ye}),Ne=eb(re,{shift:!0,onEnd:function(a,b){gd(),hd(),ie.show({index:b,slow:a.altKey})}}),Pe=eb(ye,{onEnd:function(a,b){gd(),hd();var c=v(ze)+.25*b;ze.css(k(h(c,Oe.min,Oe.max))),Xd&&ld(ye,K(c,Oe.min,Oe.max)),Pe.prevent={"<":c>=Oe.max,">":c<=Oe.min},clearTimeout(Pe.t),Pe.t=setTimeout(function(){Rc.l=c,uc(c,!0)},Pc),uc(c)}}),qe.hover(function(){setTimeout(function(){fe||nd(!(ge=!0))},0)},function(){ge&&nd(!(ge=!1))}),M(we,function(a){Y(a),td.call(this,a)},{onStart:function(){gd(),Me.control=!0},onTouchEnd:hd}),we.each(function(){W(this,function(a){td.call(this,a)}),ud(this)}),W(Ee,ie.toggleFullScreen),ud(Ee),d.each("load push pop shift unshift reverse sort splice".split(" "),function(a,b){ie[b]=function(){return yd=yd||[],"load"!==b?Array.prototype[b].apply(yd,arguments):arguments[0]&&"object"==typeof arguments[0]&&arguments[0].length&&(yd=P(arguments[0])),vd(),ie}}),vd()},d.fn.fotorama=function(b){return this.each(function(){var c=this,e=d(this),f=e.data(),g=f.fotorama;g?g.setOptions(b,!0):G(function(){return!E(c)},function(){f.urtext=e.html(),new d.Fotorama(e,d.extend({},cd,a.fotoramaDefaults,b,f))})})},d.Fotorama.instances=[],d.Fotorama.cache={},d.Fotorama.measures={},d=d||{},d.Fotorama=d.Fotorama||{},d.Fotorama.jst=d.Fotorama.jst||{},d.Fotorama.jst.style=function(a){{var b,c="";tc.escape}return c+=".fotorama"+(null==(b=a.s)?"":b)+" .fotorama__nav--thumbs .fotorama__nav__frame{\npadding:"+(null==(b=a.m)?"":b)+"px;\nheight:"+(null==(b=a.h)?"":b)+"px}\n.fotorama"+(null==(b=a.s)?"":b)+" .fotorama__thumb-border{\nheight:"+(null==(b=a.h-a.b*(a.q?0:2))?"":b)+"px;\nborder-width:"+(null==(b=a.b)?"":b)+"px;\nmargin-top:"+(null==(b=a.m)?"":b)+"px}"},d.Fotorama.jst.video=function(a){function b(){c+=d.call(arguments,"")}var c="",d=(tc.escape,Array.prototype.join);return c+='<div class="fotorama__video"><iframe src="',b(("youtube"==a.type?a.p+"youtube.com/embed/"+a.id+"?autoplay=1":"vimeo"==a.type?a.p+"player.vimeo.com/video/"+a.id+"?autoplay=1&badge=0":a.id)+(a.s&&"custom"!=a.type?"&"+a.s:"")),c+='" frameborder="0" allowfullscreen></iframe></div>\n'},d(function(){d("."+ib+':not([data-auto="false"])').fotorama()})}(window,document,location,"undefined"!=typeof jQuery&&jQuery);
;$( function()
{
    var targets = $( '[rel~=tooltip]' ),
        target  = false,
        tooltip = false,
        title   = false;

    targets.bind( 'mouseenter', function()
    {
        target  = $( this );
        tip     = target.attr( 'title' );
        tooltip = $( '<div id="tooltip"></div>' );

        if( !tip || tip == '' )
            return false;

        target.removeAttr( 'title' );
        tooltip.css( 'opacity', 0 )
            .html( tip )
            .appendTo( 'body' );

        var init_tooltip = function()
        {
            if( $( window ).width() < tooltip.outerWidth() * 1.5 )
                tooltip.css( 'max-width', $( window ).width() / 2 );
            else
                tooltip.css( 'max-width', 340 );

            var pos_left = target.offset().left + ( target.outerWidth() / 2 ) - ( tooltip.outerWidth() / 2 ),
                pos_top  = target.offset().top - tooltip.outerHeight() - 20;

            if( pos_left < 0 )
            {
                pos_left = target.offset().left + target.outerWidth() / 2 - 20;
                tooltip.addClass( 'left' );
            }
            else
                tooltip.removeClass( 'left' );

            if( pos_left + tooltip.outerWidth() > $( window ).width() )
            {
                pos_left = target.offset().left - tooltip.outerWidth() + target.outerWidth() / 2 + 20;
                tooltip.addClass( 'right' );
            }
            else
                tooltip.removeClass( 'right' );

            if( pos_top < 0 )
            {
                var pos_top  = target.offset().top + target.outerHeight();
                tooltip.addClass( 'top' );
            }
            else
                tooltip.removeClass( 'top' );

            tooltip.css( { left: pos_left, top: pos_top } )
                .animate( { top: '+=10', opacity: 1 }, 50 );
        };

        init_tooltip();
        $( window ).resize( init_tooltip );

        var remove_tooltip = function()
        {
            tooltip.animate( { top: '-=10', opacity: 0 }, 50, function()
            {
                $( this ).remove();
            });

            target.attr( 'title', tip );
        };

        target.bind( 'mouseleave', remove_tooltip );
        tooltip.bind( 'click', remove_tooltip );
    });
});
var $body,
	windowHeight,
	windowWidth,
	mediaPoint1 = 1024,
	mediaPoint2 = 768,
	mediaPoint3 = 480,
	mediaPoint4 = 320;


//
// var el = document.querySelector('.cafe-description__text');
// SimpleScrollbar.initEl(el);


//загрузка скрипта
// var scriptMap = document.createElement('script');
// scriptMap.src = "https://api-maps.yandex.ru/2.0/?load=package.standard,package.geoObjects&lang=ru-RU";
// document.documentElement.appendChild(scriptMap);

// var scriptTool = document.createElement('script');
// scriptTool.src = "https://abestuzhev.github.io/cafe-anderson/bower_components/tooltipster/dist/js/tooltipster.bundle.js";
// document.documentElement.appendChild(scriptTool);

/*main.js*/


var windowWidth = (window.innerWidth ); // вся ширина окна
var documentWidth = (document.documentElement.clientWidth ); // ширина минус прокрутка
// console.log('Ширина window: ' + windowWidth);
// console.log('Ширина wrapper: ' + documentWidth);
var documentHeight = (document.documentElement.clientHeight );
// console.log('высота ' + documentHeight);


$(window).on('load', function(){



    /*скролл при выборе доставки*/
    var orderDeliveryMap = $('.order-delivery__map').height(),
        orderDeliveryAddressList = $('.order-delivery-address__list'),
        orderDeliveryAddressListHeight = orderDeliveryAddressList.height();
    // console.log('orderDeliveryMap: ' + orderDeliveryMap);
    // console.log('orderDeliveryAddressList: ' + orderDeliveryAddressListHeight);


    function changeHeightAddressList (){
        orderDeliveryAddressList.each(function(index, elem){
            var elemHeight =  $(elem).height();
            // console.log('elemHeight: ' + elemHeight);
            if(elemHeight > 320){
                // new SimpleBar(orderDeliveryAddressList[0]);
                // new SimpleBar(orderDeliveryAddressList[1]);
                // new SimpleBar(orderDeliveryAddressList[2]);
                // new SimpleBar(orderDeliveryAddressList[3]);
                $(elem).addClass('scroll-wrap');
            }
        });
    }
    changeHeightAddressList();

    //хак для быстрого обрезания всего списка в модальном окне заказа торта

    function addClassCakesAddressList(){
        $('.popup-cake-order .order-delivery-address__list').addClass('scroll-wrap');
    }
    addClassCakesAddressList();

    // $(document).on('click', '.cake-card__hover', function(){
    //     $('.popup-cake-order .order-delivery-address__list').addClass('scroll-wrap');
    //     console.log('scroll-wrap add');
    // });





    $(document).on('click', '.order-tabs__item', function(){
        changeHeightAddressList();
    });



    var permitPath = [
    '/factory-happiness.html',
    '/cafe-anderson/factory-happiness.html'
    ];

    function getScrollElem (elem){
        if($(window).width() <= 800) {
            new SimpleBar($(elem)[0]);
        }
    }
    if(permitPath.indexOf(location.pathname) > -1){
        getScrollElem('.factory-layout');
        $(window).on('resize', function () {
            getScrollElem('.factory-layout');
        });
    } else {
        return false;
    }

    var $datepicker = $('.datepicker-here');
    $datepicker.datepicker({
        minDate: new Date(),
        autoClose: true
    });
    $datepicker.on('focus', function () {
        $(this).parents('.datepicker-layout').addClass('active-datepicker');
    });


    $('#datepickerCustom').datepicker({
        minDate: new Date(),
        autoClose: true
    });
    $('#datepickerCustom').on('focus', function () {
        $(this).parents('.datepicker-layout').addClass('active-datepicker');
    });


    var disabledPartyDays = [0, 6];
    $('#party-datepicker').datepicker({
        minDate: new Date(),
        inline: true,
        onRenderCell: function (date, cellType) {
            if (cellType == 'day') {
                var day = date.getDay(),
                    isDisabled = disabledPartyDays.indexOf(day) != -1;

                return {
                    disabled: isDisabled
                }
            }
        }
    });

    //календарь в мероприятиях
    var eventDates = [1, 10, 12, 22];
    $('#event-datepicker').datepicker({
        inline: true,
        onRenderCell: function (date, cellType) {
            var currentDate = date.getDate();
            if (cellType == 'day' && eventDates.indexOf(currentDate) != -1) {
                return {
                    html: currentDate + '<span class="dp-note"></span>'
                }
            }
        }
    });
    $('.js-event-order-datepicker').datepicker({
        minDate: new Date()
    });







});

$(document).ready(function ($) {
    //------------------------------------------------------------custom



    if($('input').hasClass('datepicker-custom') || $('div').hasClass('datepicker-custom')){
        $('.datepicker-custom').datepicker({
            minDate: new Date(),
            autoClose: true
        });
    }

    /*функция форматирования даты*/
    function formatDate(date) {
        var dd = date.getDate();
        if (dd < 10) dd = '0' + dd;

        var mm = date.getMonth() + 1;
        if (mm < 10) mm = '0' + mm;

        var yy = date.getFullYear();
        if (yy < 10) yy = '0' + yy;

        return dd + '.' + mm + '.' + yy;
    }

    if($('input').hasClass('datepicker-delivery-v2') || $('div').hasClass('datepicker-delivery-v2')){


        var datepickerDelivery = new Date(),
            datepickerDeliveryV2= $('.datepicker-delivery-v2');
        // datepickerDeliveryV2.val(formatDate(datepickerDelivery));
        datepickerDeliveryV2.datepicker({
            minDate: new Date(),
            autoClose: true
        });




    }


    

    $('document').on('click', '.order__btn.disabled', function(e){
        e.preventDefault();
    });

    $('.excursion-pay__item label').on('click', function(){
        $(this).parents('.excursion-pay__item').siblings().find('label').removeClass('active');
        $(this).addClass('active');
    });



    //модальное окно в экскурсиях
    $(document).on('change', '#excursion-pay-score', function(){
        if($(this).prop( "checked" )){
            $('.excursion-pay-score').slideDown(300);
        }
    });

    $(document).on('change', '#excursion-pay-card', function(){
        if($(this).prop( "checked" )){
            $('.excursion-pay-score').slideUp(300);
        }
    });


    /*изменение оплаты*/
    $('.order-pay__item').on('click', function(){
        var payRadio = $(this).children('input');
        if(payRadio.prop("checked")){
            $(this).siblings('.order-pay__item').find('label').removeClass('active');
            $(this).children('label').addClass('active');
        }
    });



    $(document).on('click', '.filter-hold__dropdown', function(e){
        e.preventDefault();
        $(this).parents('.filter-hold__item').siblings().removeClass('active');
        $(this).parents('.filter-hold__item').addClass('active');
        $(this).siblings('.filter-hold__submenu').slideDown(500);
    });



    // documentHeight
    function changeHeightBasketPopup (){
        var basketScroll = $('.popup-basket__scroll'),
            heightBasket = basketScroll.height();

        if (heightBasket >= documentHeight - 100){
            basketScroll.addClass('fixed-height-basket');
            // console.log('if ' + heightBasket);
            /*кастомный скролл*/
            basketScroll.jScrollPane();
        }else {
            basketScroll.removeClass('fixed-height-basket');
            // console.log('else ' + heightBasket);
        }
    }

    changeHeightBasketPopup();

    $(window).resize(function(){
        changeHeightBasketPopup();
    });
    /*картинки одной ширины*/

    $('.c-card-catalog__img').each(function(index, elem){
        var img = $(elem).children('img'),
            imgWidth = img.width(),
            $this = $(elem);

        // console.log('element ' + index + ': ' + 'width: ' + imgWidth);
        if(imgWidth < 390 ) {
            $this.addClass('big-product-img');
            // console.log('есть картинка меньше 390');
        }else {
            $this.removeClass('big-product-img');
            // console.log('работает но картинки нет');
        }
    });


    //показать все мероприятия по дням на странице Мероприятия
    $(document).on('click', '.c-card-event-timelist__more', function(e){
        e.preventDefault();
        var $this = $(this);

        var textBtn = $this.html();
        if(textBtn == "показать все"){
            $this.html("скрыть");
            $this.siblings('.c-card-event-timelist').addClass('show-item-all');
        }else{
            $this.html("показать все");
            $this.siblings('.c-card-event-timelist').removeClass('show-item-all');
        }
    });


    function changePartyTitlePopup (){
        $(document).on('click', '.js-party-order', function(){
            var letter = $(this).data('name'),
                title = $('.popup-party-order .popup-title').find('span');

            title.text('');
            title.append(letter);
            $('#title-party-order').val(letter);
        });
    }
    // changePartyTitlePopup();



    //появление мобильного чека в корзине
    $(document).on('click', '.basket__check-mobile', function(e){
        e.preventDefault();
        $('.basket__aside').toggleClass('active');
    });

    //изменение в оформлении заказа на другого пользователя
    $(document).on('change', '#order-user_other, .order-user_other',  function(){
        if($(this).prop( "checked" )){
            $('.order-user__list').css('display','none');
            $('.order-user__other-form').css('display','flex');
        }
    });
    $(document).on('change', '#order-user_auth, #order-user_auth-1', function(){
        if($(this).prop( "checked" )){
            $('.order-user__list').css('display','flex');
            $('.order-user__other-form').css('display','none');
        }
    });

    //редактировать профиль
    $(document).on('click', '.lk-profile__link-edit', function(e){
        e.preventDefault();
        $(this).parents('.lk-profile__item')
            .children('div:first-child')
            .hide();
        $(this).parents('.lk-profile__item')
            .children('.lk-profile-edit:eq(0)')
            .show();

        initProfilePlugin();

    });

    function initProfilePlugin(){
        //маска
        $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
        $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});

        /*селект*/
        $('.lk-profile-edit__child-list .js-select--child').SumoSelect();
        changeSelectFace('.lk-profile-edit__child-list .js-select--child', 'M','icon-boy-smiling','icon-girl-smiling');
    };

    // $(document).on('click', '.lk-profile__edit .c-button__medium', function(){
    //     $(this).parents('.lk-profile-edit').hide;
    //     $(this).parents('.lk-profile-item').children('div:first-child').show();
    // });

    /*слайдер для страницы Выпускные*/
    $('.graduation-party-banner__slider').owlCarousel({
        loop:true,
        items: 1,
        autoheight: true,
        nav: false
    });


    //плавный якорь
    function scrollToAnchor (elem) {
        $(document).on("click", elem, function (event) {
            // event.preventDefault();
            var id  = $(this).attr('href'),
                menuHeight = 0,
                top = $(id).offset().top,
                topIndent = top - menuHeight;
            console.log('top: ' + top);
            console.log('topIndent: ' + topIndent);
            $('html').animate({scrollTop: topIndent}, 1000);
        });
    };

    $('.graduation-party-banner__btn').click(function(e){
        e.preventDefault();
        var target = $($(this).attr('href'));
        if(target.length){

            var heightHeader = $('.header').height();
            var scrollTo = target.offset().top - (+heightHeader + 100);
            $('body, html').animate({scrollTop: scrollTo+'px'}, 800);
        }
    });

    // $('#excursion-program-btn').click(function(e){
    //     e.preventDefault();
    //     var target = $($(this).attr('href'));
    //     if(target.length){
    //
    //         var heightHeader = $('.header').height();
    //         var scrollTo = target.offset().top - (+heightHeader + 100);
    //         $('body, html').animate({scrollTop: scrollTo+'px'}, 800);
    //     }
    // });

    // scrollToAnchor('.graduation-party-banner__btn');


    //поиск по кафе на странице с тортами и в оформлении заказа
    $(document).on('keyup change', '.c-search-page__input', function(){
        checkAll();
    });

    function checkAll() {
        $('.order-delivery-address__list li').each(function(i, item) {
            var value = $(this).find('.order-radio').text().toLowerCase().indexOf($('.c-search-page__input').val().toLowerCase());
            if ( value >= 0 ) {
                $(this).show();
                // $(this).addClass('js-order-delivery-address__show');
            } else {
                $(this).hide();
                // $(this).removeClass('js-order-delivery-address__show');
            }
        });
    }

    checkAll();



    //отписаться от подписки в личном кабинете
    $(document).on('click', '#lk-profile-subscription_unsubscribe', function(e){
        e.preventDefault();
        $('.lk-profile .lk-profile-subscription__box').hide();
        $('.lk-profile .lk-profile-subscription-del').show();

    });
    $(document).on('click', '#lk-profile-subscription-del__cancel', function(e){
        e.preventDefault();
        $('.lk-profile .lk-profile-subscription-del').hide();
        $('.lk-profile .lk-profile-subscription__box').show();
    });

    //изменнеие пароля в профиле личного кабинета
    $(document).on('click', '#lk-profile__change-pass', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-user')
        .css('display', 'none')
        .siblings('.lk-profile-edit__pass')
        .css('display', 'block');
    });

    // изменение подписки в профиле пользователя
    $('#lk-profile_change-subscription').on('click', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-subscription__box')
        .css('display', 'none')
        .siblings('.lk-profile-edit')
        .css('display', 'block');
    });
    // отмена изменения подписки в профиле пользователя
    $('#lk-profile_cancel-change').on('click', function(e){
        e.preventDefault();
        $(this)
        .parents('.lk-profile-edit')
        .css('display', 'none')
        .siblings('.lk-profile-subscription__box')
        .css('display', 'block');
    });

    //добавляем элементы в профиле личного кабинета
    //добавление второго email

    $(document).on('click', '#js-lk-profile__add-email', function(e) {
        e.preventDefault();
        $(this)
            .parents('.c-form__item')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__email-list");
    });

    $(document).on('click', '#js-lk-profile__add-tel', function(e) {
        e.preventDefault();
        $(this)
            .parents('.c-form__item')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__tel-list");
        $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    });

    /*добавление полей в контактах ЛК*/
    $(document).on('click', '#js-lk-profile__add-info-all', function(e) {
        e.preventDefault();
        console.log('correct');
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__contact-list");
        // $('.js-input--date').mask('+7(000)000-00-00', {clearIfNotMatch: true});

        // initProfilePlugin();
    });

    /*добавление ребенка в профиле пользователя*/
    $(document).on('click', '#js-lk-profile__add-child', function(e) {
        e.preventDefault();
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__child-list");
        $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});

        initProfilePlugin();
    });


    $(document).on('click', '#js-lk-profile-edit__address', function(e) {
        e.preventDefault();
        $(this)
            .parents('.lk-profile-edit__line')
            .siblings('.lk-profile-edit__copy')
            .clone().appendTo(".lk-profile-edit__address-list");
    });


    $(document).on('click', '.c-form__del', function(e) {
        e.preventDefault();
        var $elem_item = $(this).parents('.c-form__item');
        var $element =  $(this).parents('.lk-profile-edit__copy');
        $element.remove();
        $elem_item.remove();
    });

    //скрыть/показать заказ в истории заказов
    $('.lk-history-item__header').on('click', function(e){
        e.preventDefault();
        $(this).parents('.lk-history-item').toggleClass('lk-history-item__body-show');
        $(this).siblings('.lk-history-item__body').slideToggle(300);
    });


    //очистить форму поиска
    $(document).on('click', '.order-delivery-search__clear', function(e){
        e.preventDefault();
        $(this).parents('.order-delivery-search__item').siblings().find('input').val('');
        $('.order-delivery-address__all').removeClass('show-item-all');

        // showDeliveryAddressCake('.order-delivery-address__item');
    });

    //показать все адреса кафе в заказе
    function showDeliveryAddressCake (elem){
        $(elem).each(function(i, elem){
            i < 6 ? $(elem).show() : $(elem).hide();
        });
    }
    // showDeliveryAddressCake('.order-delivery-address__item');




    $(document).on('click', '.order-delivery-address__all', function(e){
        var $this = $('.order-delivery-address__all');
        e.preventDefault();

        var textBtn = $this.html();
        if(textBtn == "показать все"){
            $this.html("скрыть");
            $this.siblings('.order-delivery-address__list').addClass('show-item-all');
        }else{
            $this.html("показать все");
            $this.siblings('.order-delivery-address__list').removeClass('show-item-all');
        }

    });

    //страница Оформление заказа. При фокусе на инпут с адресом, делаем активный radio button
    $('.order-delivery-custom__item input, .order-delivery-custom__item textarea').focus(function(){
        var $this = $(this);
        // var $thisRadioInput = $(this).parents('label').siblings('input[type="radio"]');
        $this.parents('label').siblings('input[type="radio"]').prop( "checked",true);

    });



    //свернуть/развернуть блок в корзине
    $('.basket-item__header').on('click', function(){
        var $this =  $(this);
        $this.parents('.basket-item').toggleClass('basket-body__show');
        setTimeout(function(){

        }, 150);

        $(this).siblings('.basket-item__body').slideToggle(100);
    });

    $('.basket-mix__item').on('click', function(){

        $('.basket-item__header').parents('.basket-item').addClass('basket-body__show');
        $('.basket-item__body').slideDown(100);
    });



    /*показываем попап на странице Создатели Андерсон*/
    $('.photo-point__icon').on('click', function(){
        var str = $(this).siblings('.photo-point__description').find('span').text().trim(),
            arr = str.split(' '),
            name = arr[0] + ' ' + arr[1],
            desc = '';
        arr.splice(0, 2);
        desc = arr.join(' ');
        $('.creators .popup-title').find('span').text(name);
        $('.creators .popup-body').find('p').text(desc);
        var popup = $('.creators .popup');
        popup.removeClass('is-visible');
        popup.addClass('is-visible');
    });

    $('.creators .popup-close').on('click', function(){
        $('.creators .popup').removeClass('is-visible');
    });

    /*фабрика счастья, клик по поинту*/
    $('.factory-point__img').on('click', function(){
        $('.popup').removeClass('is-visible');
        $(this).siblings('.popup').addClass('is-visible');
    });

    $('.factory-point .popup-close').on('click', function(e){
        e.preventDefault();
        $('.popup').removeClass('is-visible');
    });

    /*показываем маленький блок с выбранными товарами в карточке товара (мобильная версия)*/
    $(document).on('click', '.popup-product__check-mobile', function(e){
        e.preventDefault();
        $('.popup-product .popup-mini').addClass('active');
    });
    /*закрываем маленький попап с товарами*/
    $(document).on('click', '.popup-product__check-close', function(e){
        e.preventDefault();
        $('.popup-product .popup-mini').removeClass('active');
    });

    $('.popup-mini').on('click', function(e){
        e.preventDefault();

    });

    /*показываем категории меню в каталоге*/
    var filterBage = $('.filter-bage');

    filterBage.on('click', function(e){
        e.preventDefault();
        $(this).hide();
        $('.catalog-body').toggleClass('show-category');
        $(this).toggleClass('js-hide-word');
        $(this).find('.filter-bage__title span').html('Показать');
        $('.js-hide-word').find('.filter-bage__title span').html('Скрыть');
    });

    $('.filter-hold__close').on('click', function(e){
        e.preventDefault();
        filterBage.show();
        $('.catalog-body').removeClass('show-category');
        filterBage.toggleClass('js-hide-word');
        $('.filter-bage__title span').html('Показать');
    });




    $(window).on('resize', function () {
    	if(windowWidth <= 730){
    	    $('.filter-hold__close').on('click', function(e){
                e.preventDefault();
    	        $(this).parents('.filter-hold').slideUp(600);
            });
        }
    });

    if(windowWidth <= 730){
        $('.filter-hold__close').on('click', function(e){
            e.preventDefault();
            $(this).parents('.filter-hold').slideUp(600);
        });
    }





    /*слайдер карусель*/
    $('.carousel-slider').owlCarousel({
        loop:true,
        // nav:true,
        margin:20,
        // items: 4,
        // center: true,
        responsiveClass: true,
        responsive:{
            0:{
                items:1
            },
            540:{
                nav: true,
                items:2
            },
            780:{
                nav: true,
                items:3
            },
            1200:{
                nav: true,
                items:4
            },
            1600:{
                nav: true,
                items:5
            }
        }
    });

    $('.c-card-product__slider').owlCarousel({
        loop:true,
        // nav:true,
        margin:20,
        // items: 4,
        // center: true,
        responsive:{
            0:{
                items:1
            },
            600:{
                nav: true,
                items:2
            },
            1200:{
                nav: true,
                items:3
            },
            1600:{
                nav: true,
                items:3
            }
        }
    });

    /*слайдер карусель*/
    $('.publications-slider').owlCarousel({
        loop:true,
        nav:true,
        margin:20,
        items: 7,
        // center: true,
        stagePadding: 10,
        responsiveClass: true,
        responsive:{
            0:{
                items:1
            },
            480:{
                items:2
            },
            780:{
                nav: true,
                items:3
            },
            980:{
                nav: true,
                items:4
            },
            1200:{
                nav: true,
                items:4
            },
            1600:{
                nav: true,
                items:7
            },
            1920:{
                nav: true,
                items:7
            }
        }
    });


    $('#filter-cafe-all, #filter-cafe__mobile-all').on('change', function(){
        var $this = $(this),
            $elem = $('.filter-item');
        if($this.is(':checked')) {
            $elem.addClass('disable');
        }else{
            $elem.removeClass('disable');
        }
    });

    $('.top-message__close').on('click',function(e){
        e.preventDefault();
        $('.top-message').hide();
    });

    /*вписываем img в блок при любом размере изображения*/
    function fix_size() {
        var images = $('.c-pic_link img');
        images.each(setsize);

        function setsize() {
            var img = $(this),
                img_dom = img.get(0),
                container = img.parents('.c-pic_link');
            if (img_dom.complete) {
                resize();
            } else img.one('load', resize);

            function resize() {
                if ((container.width() / container.height()) < (img_dom.width / img_dom.height)) {
                    img.width('auto');
                    img.height('100%');
                    return;
                }
                img.height('auto');
                img.width('100%');
            }
        }

    }
    // $(window).on('resize', fix_size);
    // fix_size();
    //
    // if (typeof _current != 'undefined') {
    //     var mapImages = _current;
    // } else {
    //     var mapImages = $('.c-card-cafe__img img');
    // }

    /*если в городе одно кафе, делаем его inline*/
    $('.cafe-list__city').each(function(){
        var $this = $(this);
        var countElem = $this.find('.c-col-6').length;
        if(countElem == 1){
            $($this).addClass('cafe-list__one');

        }else{
            $($this).removeClass('cafe-list__one');
        }
    });



    //подключение тултипа
    $( '.tooltip' ).tooltipster({
        animation: 'grow',
        delay: 100,
        trigger : 'custom' ,
        maxWidth: 500,
        contentAsHTML: true,
        interactive: true,
        triggerOpen : {
            mouseenter : true ,
            touchstart : true
        },
        triggerClose : {
            mouseleave : true,
            click : true ,
            scroll : true ,
            tap : true
        }
    });


    //подключение тултипа
    $( '.tooltip-catalog' ).tooltipster({
        animation: 'grow',
        delay: 100,
        trigger : 'click' ,
        maxWidth: 500,
        functionBefore: function(instance, helper){
            if (helper.event.type == 'click') {
                instance.content('You opened me with a regular mouse <a href="https://www.google.ru/?hl=ru">click :)</a>.');
            }
            else {
                instance.content('You opened me by a tap on the screen :)');
            }
        },
        contentAsHTML: true,
        interactive: true,
        triggerOpen : {
            mouseenter : true ,
            touchstart : true
        },
        triggerClose : {
            mouseleave : true,
            click : true ,
            scroll : true ,
            tap : true
        }
    });



    $(".owl-carousel").owlCarousel({
        items: 1,
        loop: true,
        center: true,
        autoHeight:true,
        nav: true
    });


    $('.cafe-fotorama').on('fotorama:ready', function (e, fotorama) {
        // console.log(e.type);
        // console.log( fotorama.activeIndex);
        var path = fotorama.activeFrame.img;
        $('.bg-blur').attr('src', path);
    }).fotorama({
        width: '100%',
        // maxwidth: '100%',
        ratio: 17/11,
        loop: true,
        thumbwidth: 88,
        allowfullscreen: true,
        nav: 'thumbs',
        fit:'cover'
    });;

    /*Фоторама, слайдер мероприятий, слайдер отзывов*/
    // var $slider = $('.cafe-fotorama').fotorama({
    //     width: '100%',
    //     // maxwidth: '100%',
    //     ratio: 17/11,
    //     loop: true,
    //     thumbwidth: 88,
    //     allowfullscreen: true,
    //     nav: 'thumbs',
    //     fit:'cover'
    // });

    // $slider
    //     .on('fotorama:show', function (e, fotorama) {
    //         // pick the active thumb by id
    //         var path = fotorama.activeFrame.img;
    //         $('.bg-blur').attr('src', path);
    //         console.log('hello');
    //     });




    // $slider.on('fotorama:load', function (e, fotorama, extra) {
    //     console.log(extra.src + ' is loaded');
    //     console.log('hello');
    // });


    $('.cafe-holiday-slider').fotorama({
        width: '100%',
        maxwidth: '100%',
        // ratio: 16/9,
        loop: true,
        allowfullscreen: true,
        fit:'cover'
    });

    // $('.cafe-reviews-slider').fotorama({
    //     width: '100%',
    //     height: 'auto',
    //     maxwidth: '100%',
    //     loop: true,
    //     ratio: 16/5
    // });

    /*маски для телефона*/
    $('#request-call__tel, #reg__phone').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('#request-call__tel, #reg__phone').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('.js-input--tel').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('.js-input--date').mask('00.00.0000', {clearIfNotMatch: true});
    $('.js-input--loyalty').mask('000-000', {clearIfNotMatch: true});
    $('input[name="form_text_30"]').mask('+7(000)000-00-00', {clearIfNotMatch: true});
    $('input[name="form_text_52"]').mask('+7(000)000-00-00', {clearIfNotMatch: true});

    /*показ номера телефона в карточке кафе*/
    $('.cafe-info__item-col .c-button').on('click', function(e){
        e.preventDefault();
        $(this).hide();
        $(this).parents('.l-button').siblings('.cafe-info__phone-number').show();
    });

    /*функция показа модального окна*/
    function showPopup(icon, popup) {
        $(document).on('click', icon, function (e) {
            var $html = $('html');
            e.preventDefault();
            $(popup).addClass('is-visible');
            $('.mfp-bg').addClass('is-visible');


            $html.addClass('lock-html');
            $('body').addClass('fixed-input');
            if(windowWidth > documentWidth){
                $html.css({
                    'margin-right':'17px'
                });
                $('.mfp-wrap').css({
                    'overflow-y':'scroll'
                });
                // console.log('Есть полоса прокрутки');
            }else {
                // console.log('Нет полосы прокрутки');
            }
        });
    }

    $(document).on('click', '.popup-close', function (e) {
        e.preventDefault();
        var $html = $('html');
        $(this).parents('.mfp-wrap').removeClass('is-visible');
        $('.mfp-bg').removeClass('is-visible');
        $html.css({
            'margin-right':'0'
        }).removeClass('lock-html');
        $('body').removeClass('fixed-input');
        $('.header.sticky').css({
            // 'right':'0'
        });
        // console.log('popup-close!!!!');
    });

    $(document).on('click', '.js-popup-close', function (e) {
        e.preventDefault();
        var $html = $('html');
        $(this).parents('.mfp-wrap').removeClass('is-visible');
        $('.mfp-bg').removeClass('is-visible');
        $html.css({
            'margin-right':'0'
        }).removeClass('lock-html');
        $('.wrapper').removeClass('fixed-input');
        $('.header.sticky').css({
            // 'right':'0'
        });
    });


    showPopup(".header-phone", '.popup__request-call');
    showPopup(".header-email", '.popup__write-to-us');
    showPopup(".js-header-cabinet", '.popup-authorization');
    showPopup(".header-city > a", '.popup-city');
    showPopup(".header-mobile__city", '.popup-city');
    showPopup(".c-card-cafe__menu", '.popup__menu');
    showPopup(".c-card-vacancy .c-button", '.popup__vacancy');
    showPopup(".c-card_menu", '.popup__menu');
    // showPopup(".c-reviews-positive", '.popup__review');
    // showPopup(".c-reviews-negative", '.popup__review');
    showPopup(".footer-reviews__icon", '.popup__review');
    // showPopup(".popup-forgot-password", '.popup__recovery-password');
    showPopup(".catalog-product .c-card-catalog__img", '.popup-product');
    showPopup(".catalog-product .c-card-catalog__title", '.popup-product');
    showPopup("#loadCake", '.popup-cake-order');
    showPopup(".cake-card__hover", '.popup-cake-order');
    showPopup(".js-easter-btn", '.popup-cake-order');
    showPopup("#lk-profile-subscription-del__ok", '.popup-subscription-del');
    showPopup(".js-party-order", '.popup-party-order');
    showPopup(".c-card-event__link--more", '.popup-event');
    showPopup(".c-card-event__link--basket", '.popup-event-basket');
    showPopup(".c-card-event__link--one-click", '.popup-event-one-click');
    showPopup(".excursion-btn", '.popup-excursion-order');




    // $(document).on('click', '#cake-order-issue', function (e) {
    //     e.preventDefault();
    //     $(this).parents('.popup-cake-order').removeClass('is-visible');
    //     $('.popup-cake-order-congratulation').addClass('is-visible');
    // });

    $(document).on('click', '.c-card-event__btn--click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-event').removeClass('is-visible');
        $('.popup-event-one-click').addClass('is-visible');
    });

	$(document).on('click', '.factory-point .c-button', function (e) {
        e.preventDefault();
        $(this).parents('.factory-point .popup').removeClass('is-visible');
        $('.popup-gallery').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('html').css({
            'margin-right':'0'
        }).addClass('lock-html');

        if(windowWidth > documentWidth){
            $('html').css({
                'margin-right':'17px'
            });
            $('.mfp-wrap').css({
                'overflow-y':'scroll'
            });
            // console.log('Есть полоса прокрутки');
        }

    });

    $(document).on('click', '.c-card-event__btn--basket', function (e) {
        e.preventDefault();
        $(this).parents('.popup-event').removeClass('is-visible');
        $('.popup-event-basket').addClass('is-visible');
    });

    // $(document).on('click', '.popup-forgot-password', function (e) {
    //     e.preventDefault();
    //     $(this).parents('.popup-authorization').removeClass('is-visible');
    //     $('.popup__recovery-password').addClass('is-visible');
    // });


    $('.popup-authorization .popup-authorization__reg').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-authorization').removeClass('is-visible');
        $('.popup-reg').addClass('is-visible');
    });

    $('.popup-reg .popup-authorization__auth').on('click', function (e) {
        e.preventDefault();
        $(this).parents('.popup-reg').removeClass('is-visible');
        $('.popup-authorization').addClass('is-visible');
    });

    /*мобильные кнопки показа попапов Регистрация/Авторизация*/
    $("#mobile-reg").click(function (e) {
        e.preventDefault();
        $('.popup').removeClass('is-visible');
        $('.popup-reg').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('body').addClass('fixed-input');
        $('html').addClass('lock-html');
        $(this).parents('.header-mobile__auth').removeClass('.popup-slide__show');
    });

    $("#mobile-auth").click(function (e) {
        e.preventDefault();
        $('.popup').removeClass('is-visible');
        $('.popup-authorization').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('body').addClass('fixed-input');
        $('html').addClass('lock-html');
        $(this).parents('.header-mobile__auth').removeClass('.popup-slide__show');
    });




    /*поиск в шапке*/
    $(".header-search .icon-search, .header-search .symbol-search").click(function (e) {
        e.preventDefault();
        $('.header-search__form').toggleClass('is-visible');
        $('.header-search-result').toggleClass('is-visible');
    });

    /*показ мобильного поиска*/
    $(".header-mobile__search .icon-search, .header-mobile__search .symbol-search").click(function (e) {
        e.preventDefault();
        $('.header-mobile__search-box').show();
        $('.header-mobile__menu').hide();
        $('.header-mobile__search .icon-search, .header-mobile__search .symbol-search').hide();
        $('.icon-search-mobile').show();
        $('.header-mobile__search-input').focus();
        $('.header-mobile__auth').removeClass('popup-slide__show');
        // $('.header').addClass('header-top__hide');
    });

    /*скрываем мобильный поиск*/
    $(".icon-search-mobile").click(function (e) {
        e.preventDefault();
        $('.header-mobile__search-box').hide();
        $('.header-mobile__menu').show();
        $('.header-mobile__search .icon-search').show();
        $('.header-mobile__search .symbol-search').show();
        $(this).hide();
        // $('.header').removeClass('header-top__hide');
    });

    $(document).mouseup(function (e) { // событие клика по веб-документу
        var div = $('.header-mobile__search-box'); // тут указываем ID элемента
        if (!div.is(e.target) // если клик был не по нашему блоку
            && div.has(e.target).length === 0) { // и не по его дочерним элементам

            $('.header-mobile__menu').show();
            $('.header-mobile__search-box').hide();
            $('.header-mobile__search .icon-search').show();
            $('.header-mobile__search .icon-search-mobile').hide();
            // $('.header').removeClass('header-top__hide');
        }
    });

    // закрытие по клику все области экрана
    $(".popup-bg").click(function (e) {
        e.preventDefault();
        $('.popup').parents().removeClass('is-visible');
        // $('.fixed-overlay').removeClass('is-visible');
        $('html').removeClass('body-popup');
    });




    /*клик вне области экрана для корзины*/
    function hidePopup (element, instrumentHide){
        $(document).mouseup(function (e) { // событие клика по веб-документу
            var div = $(element); // тут указываем ID элемента
            if (!div.is(e.target) // если клик был не по нашему блоку
                && div.has(e.target).length === 0) { // и не по его дочерним элементам
                div.removeClass(instrumentHide); // скрываем его
                // $('.fixed-overlay').removeClass('is-visible');
                // $('body').removeClass('body-popup');
            }
        });
    }

    // событие клика по веб-документу
    // $(document).mouseup(function (e) {
    //
    //     var popup = $('.popup');
    //     if (!popup.is(e.target)
    //         && !popup.has(e.target).length
    //         && !$('.popup-mini').is(e.target)
    //     ) {
    //         popup.parents('.mfp-wrap').removeClass('is-visible');
    //         $('.mfp-bg').removeClass('is-visible');
    //         $('html').css({
    //             'margin-right':'0'
    //         }).removeClass('lock-html');
    //     }
    // });

    /*скрываем попапы вне зоны элемента для карточки товара*/
    $(document).mousedown(function (e) { // событие клика по веб-документу
        // var div = $('.popup');
        // тут указываем ID элемента
        // var div2 = $('.popup-mini');


        function hideOutZone(elem, elem2, elem3, elem4){
            var div = $(elem);
            var div2 = $(elem2);
            var div3 = $(elem3);
            if (!div.is(e.target)
                && div.has(e.target).length === 0
                && !div2.is(e.target)
                && div2.has(e.target).length === 0
                && !div3.is(e.target)
                && div3.has(e.target).length === 0) {
                // div.removeClass(instrumentHide); // скрываем его
                // console.log('true');
                div.parents('.mfp-wrap').removeClass('is-visible');
                div.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div.parents('html').removeClass('lock-html').css('margin-right','0');
                // div.find('.popup-close').trigger('click');

                var url = localStorage.getItem('backUrl');
                if (url !== null) {
                    window.history.pushState(null, null, url);
                    localStorage.removeItem("backUrl");
                }

                div2.parents('.mfp-wrap').removeClass('is-visible');
                div2.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div2.parents('html').removeClass('lock-html').css('margin-right','0');

                div3.parents('.mfp-wrap').removeClass('is-visible');
                div3.parents('html').find('.mfp-bg ').removeClass('is-visible');
                div3.parents('html').removeClass('lock-html').css('margin-right','0');
            }

        }



        // if (localStorage.getItem('backUrl') !== null) {
        //     var serialObj = JSON.stringify(backUrl);
        //     window.history.pushState(null, null, '/easter/');
        //     localStorage.setItem('backUrl', serialObj);
        //
        //     localStorage.removeItem("backUrl");
        // } else {
        //     return false;
        // }




        if (e.which === 1) {
            hideOutZone('.popup', '.popup-mini', '.datepicker');
        }

    });


    hidePopup('.popup-basket', 'popup-slide__show');
    hidePopup('.header-mobile__auth', 'popup-slide__show');
    hidePopup('.header-search__form', 'is-visible');
    hidePopup('.header-search-result', 'is-visible');


    /*юоковые кнопки отзыва*/
    var $reviews_btn = $(".c-reviews__btn"),
        clickCount;
    $reviews_btn.attr("data-count", "0");
    var isMobile = {
        Android:        function() { return navigator.userAgent.match(/Android/i) ? true : false; },
        BlackBerry:     function() { return navigator.userAgent.match(/BlackBerry/i) ? true : false; },
        iOS:            function() { return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false; },
        Windows:        function() { return navigator.userAgent.match(/IEMobile/i) ? true : false; },
        any:            function() { return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());  }
    };
    if ( isMobile.any() ) {
        $reviews_btn.on("click", function(){
            clickCount = $(this).attr("data-count");
            clickCount ++;
            $(this).parent('.c-reviews__item').siblings().removeClass('active');
            if (clickCount == 1) {
                $(this).attr("data-count", clickCount);
                $(this).parent('.c-reviews__item').addClass('active');
                return false;
            } else if (clickCount == 2){
                $(this).parent('.c-reviews__item').removeClass('active');
                $(this).attr("data-count", "0");
                showPopup(".c-reviews-positive", '.popup__review');
                showPopup(".c-reviews-negative", '.popup__review');
            }else {
                return true;
            }
        });
    }

    if ( !isMobile.any() ) {
        $reviews_btn.hover(function(){
            clickCount = $(this).attr("data-count");
            clickCount ++;
            $(this).parent('.c-reviews__item').siblings().removeClass('active');
            if (clickCount == 1) {
                $(this).attr("data-count", clickCount);
                $(this).parent('.c-reviews__item').addClass('active');
                console.log('click');
                return false;
            } else if (clickCount == 2){
                showPopup(".c-reviews-positive", '.popup__review');
                showPopup(".c-reviews-negative", '.popup__review');
                $(this).parent('.c-reviews__item').removeClass('active');
                $(this).attr("data-count", "0");
            }else {
                return true;
            }
        });
    }


    // мобильный заказать звонок, показываем форму и удаляем надпись
    $(".mobile-request-call_inquiry").click(function (e) {
        e.preventDefault();
        $(this).css({
            'opacity': '0',
            'visibility': 'hidden',
            'display':'none'
        });
        $('.mobile-request-call__form').css({
            'opacity': '1',
            'visibility': 'visible',
            'display':'block'
        });
    });

    /*соглашение на обработку персональных данных*/
    function DisabledFormButton(form, check, btn_form){
        $("form input[type='checkbox']").on('change', function(){
            if($(check).prop('checked')){
                $(btn_form).removeAttr('disabled');
                // console.log('check');
            }else {
                $(btn_form).attr('disabled', 'disabled');
                // console.log('check else');
            }
        });
    }

    DisabledFormButton('#popup-reg','#reg__regulations','#popup-reg button');
    DisabledFormButton('#popup__write-to-us','#write-to-us__regulations','#popup__write-to-us button');
    DisabledFormButton('#popup__request-call','#request-call__regulations','#popup__request-call button');
    DisabledFormButton('#popup__vacancy','#vacancy__regulations','#popup__vacancy button');
    DisabledFormButton('#order-auth-new','#order-auth-new__regulations','#order-auth-new button');
    DisabledFormButton('#cake-order-form','#cake-order__regulations','#cake-order-form button');
    DisabledFormButton('#excursion-form','#excursion__regulations','#excursion-form button');



    /*показываем в попапе заказать звонок список городов*/
    $(".mobile-request-call_city").on('click', function (e) {
        e.preventDefault();
        console.log('click click');
        // $('.popup-request-city').show();
        $('.popup-request-city').addClass('popup-show');
    });

    $(".popup-request-city").click(function (e) {
        e.preventDefault();
        $('.popup-request-city').removeClass('popup-show');
        // $('.popup-request-city').hide();
        $('.popup__request-call').addClass('is-visible');
        $('.mfp-bg').addClass('is-visible');
        $('html').css({
            'overflow':'hidden',
            'margin-right':'17px'
        });
    });

    /*попап корзины*/
    $('.icon-basket, .header .symbol-basket, .header-basket__count').on('click', function () {
        $('.popup-basket').addClass('popup-slide__show');
        $('.header').addClass('header-top__no-hide');
        // $('html').addClass('lock-html');
    });

    $('.popup-basket__close').on('click', function () {
        $('.popup-basket').removeClass('popup-slide__show');
        $('.header').removeClass('header-top__no-hide');
    });

    $('.popup-basket__scroll').on( 'mousewheel DOMMouseScroll', function (e) {

        var e0 = e.originalEvent;
        var delta = e0.wheelDelta || -e0.detail;

        this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
        e.preventDefault();
    });


    /*проверяет в фильтре наличие селекта и еслит есть делает родитель блочным для отображения в мобильной версии*/
    $('.filter').each(function(){
        var $filterBody =  $('.filter-item__body');
        $filterBody.has('select').css('display', 'block');
        $filterBody.has('input[type="text"]').css('display', 'block');
        $filterBody.has('select').parents('.filter-item').css('border','none');
        $filterBody.has('input[type="text"]').parents('.filter-item').css('border','none');
    });

    /*появление фильтра в мобильной версии*/

    function ShowMobileBtnFilter (btn, showBlock) {
        $(btn).on('click', function (e) {
            e.preventDefault();
            $(this).toggleClass('dropdown-show');
            $(this).siblings(showBlock).slideToggle(200);
        });
    }
    ShowMobileBtnFilter('.filter-mobile-btn', '.filter');
    ShowMobileBtnFilter('.filter-hold-mobile-btn', '.filter-hold');



    /*показ подменю в мобильной версии меню*/
    $('.header-mobile__list .icon-dropdown').on('click', function (e) {
        e.preventDefault();
        $(this).toggleClass('dropdown-show');
        $('.header-mobile__sublist').slideToggle(200);
        $(this).parents('.header-mobile__item').toggleClass('active');
    });

    /*функция счета больше/меньше*/
    function catalogItemCounter(field) {
        var fieldCount = function (el) {
            var
                // Мин. значение
                min = el.data('min') || false,
                // Макс. значение
                max = el.data('max') || false,
                // Кнопка уменьшения кол-ва
                dec = el.prev('.dec'),
                // Кнопка увеличения кол-ва
                inc = el.next('.inc');
            function init(el) {
                if (!el.attr('disabled')) {
                    dec.on('click', decrement);
                    inc.on('click', increment);
                }
                // Уменьшим значение
                function decrement() {
                    var value = parseInt(el[0].value);
                    value--;

                    if (!min || value >= min) {
                        el[0].value = value;
                    }
                };
                // Увеличим значение
                function increment() {
                    var value = parseInt(el[0].value);

                    value++;

                    if (!max || value <= max) {
                        el[0].value = value++;
                    }
                };
            }
            el.each(function () {
                init($(this));
            });
        };
        $(field).each(function () {
            fieldCount($(this));
        });
    }
    // catalogItemCounter('.fieldCount');

   /*мобильное меню*/
	$('.header-mobile__menu').on('click', function(){
		$(this).toggleClass('icon-menu__transform');
		$('.header-mobile__dropdown').toggleClass('popup-show');
		// $('.header').toggleClass('header-top__hide');
        $('html').toggleClass('overflow');

        if($('.header').hasClass('sticky')){
            $('.header-mobile__dropdown').addClass('menu-sticky');
        }else {
            $('.header-mobile__dropdown').removeClass('menu-sticky');
        }
	});
    // $('.header').hasClass('.sticky').children('.header-mobile__dropdown').addClass('menu-sticky');

    $('.header-mobile__dropdown-close').on('click', function(){
        $('.header-mobile__menu').toggleClass('icon-menu__transform');
        $('.header-mobile__dropdown').toggleClass('popup-show');
        $('html').removeClass('overflow');
	});


	$('.header-mobile__cabinet').on('click', function(){
		$('.header-mobile__auth').toggleClass('popup-slide__show');
	});

    //кнопка вверх
    function backToTop (btnElem, parentElem){
        var offset = 300,
            offset_opacity = 1200,
            scroll_top_duration = 700,
            $back_to_top = $(btnElem);
        //кнопка назад
        $(window).scroll(function(){
            ( $(this).scrollTop() > offset ) ? $back_to_top.addClass('cd-is-visible') : $back_to_top.removeClass('cd-is-visible cd-fade-out');
            if( $(this).scrollTop() > offset_opacity ) {
                $back_to_top.addClass('cd-fade-out');
            }
        });

        $back_to_top.on('click', function(event){
            event.preventDefault();
            $(parentElem).animate({
                    scrollTop: 0
                }, scroll_top_duration
            );
        });
    }

    backToTop('.cd-top', 'body,html');
    backToTop('.popup-product__btn-back', '.popup');



    /*липкая шапка*/
    $(window).scroll(function(){
        var bo = $(window).scrollTop();
        var $header = $(".header");
        var $logo = $("#symbol-logo");
        var $hederHeight = $header.height();
        if ( bo >= 106 ) {
            $header.addClass('header-top__hide');
            $header.addClass('sticky');
            $logo.addClass('fixed-logo');

            $('main').css({
                'padding-top': $hederHeight
            });
            // $header.addClass('fixed-header');
        } else {
            $header.removeClass('header-top__hide');
            $header.removeClass('sticky');
            $logo.removeClass('fixed-logo');
            // $header.removeClass('fixed-header');
            $('main').css({
                'padding-top': '0'
            });
        }
    });

    /*кастомный селект*/
    $('.c-select').SumoSelect();

    function showNegative(clickElem){
        $(clickElem).on('click', function(){
            var select = $('.popup__review .c-select');
            select.val('48');
            select[0].sumo.reload();
            // select[0].sumo.selectItem('48');
            var $icon = select.parents('.reviews-form__type').find('.reviews-form__type-icon');
            $icon.removeClass('icon-rabbit-positive');
            $icon.addClass('icon-rabbit-negative');
            // console.log('функция сработала при клике js-negative');
            // console.log(select.val());
        });
    }
    showNegative('.js-negative');
    showNegative('.c-reviews-negative');

    function showPositive(clickElem){
        $(clickElem).on('click', function(){
            var select = $('.popup__review .c-select');
            select.val('47');
            select[0].sumo.reload();
            var $icon = select.parents('.reviews-form__type').find('.reviews-form__type-icon');
            $icon.removeClass('icon-rabbit-negative');
            $icon.addClass('icon-rabbit-positive');
            // select[0].sumo.selectItem('47');
            // console.log('функция сработала при клике js-positive');
            // console.log(select.val());
        });
    }
    showPositive('.js-positive');
    showPositive('.c-reviews-positive');



    function changeRabbitFace (select){
        $(select).on("change",function() {
            var valReview = $(this).val();
            var $icon = $(this).parents('.reviews-form__type').find('.reviews-form__type-icon');

            if (valReview == 48 ) {
                $icon.removeClass('icon-rabbit-positive');
                $icon.addClass('icon-rabbit-negative');
            } else {
                $icon.removeClass('icon-rabbit-negative');
                $icon.addClass('icon-rabbit-positive');
            }
        });
    }

    changeRabbitFace('#form_dropdown_SIMPLE_QUESTION_257');

    function changeSelectFace (select, value, icon_1, icon_2){
        $(select).on("change",function() {
            var valReview = $(this).val();
            var $icon = $(this).parents('.c-select-layout').find('.c-select__icon');
            console.log('changeSelectFace');

            if (valReview == value ) {
                $icon.removeClass(icon_2);
                $icon.addClass(icon_1);
                console.log('boy');
            } else {
                $icon.removeClass(icon_1);
                $icon.addClass(icon_2);
                console.log('girl');
            }
        });
    }

    changeSelectFace('.lk-profile__child-gender', 'M','icon-boy-smiling','icon-girl-smiling');






    /*простые табы*/
    $(document).on('click', '.tabs-menu a', function(event) {
        event.preventDefault();
        $(this).parent().addClass("current");
        $(this).parent().siblings().removeClass("current");
        var tab = $(this).attr("href");
        $(this).parents('.tabs-menu').parent().siblings('.tab').find(".tab-content").not(tab).css("display", "none");
        $(tab).fadeIn();
    });

    /*scroll*/
    // $(".popup-basket__scroll").scrollBox();
    // $('#scrollbarY').tinyscrollbar();

    /*hover в меню*/
    // $('.header-menu__item--about').hover( function(){
    //    $('.header-subnavigation').addClass('is-visible');
    // });
    //
    // $('.header-subnavigation').mouseleave(function(){
    //     $(this).removeClass('is-visible');
    // });

/*скрол карты*/
    // var target = $('#map');
    // var targetPos = target.offset().top;
    // var winHeight = $(window).height();
    // var scrollToElem = targetPos - winHeight;
    // $(window).scroll(function(){
    //     var winScrollTop = $(this).scrollTop();
    //     if(winScrollTop > scrollToElem){
    //         //сработает когда пользователь доскроллит к элементу с классом .elem
    //         $(window).offset(60);
    //     }
    // });

    /*Порой на страницах с «резиновой» версткой необходимо знать ширину скролбара, чтобы правильно вычислить размеры внутренних элементов и их положение. Эта задача решается с помощью следующего алгоритма:

добавить два div в body и разместить их за пределами экрана;
определить ширину внутреннего div;
установить значение «scroll» свойства overflow у внешнего div;
опять определить ширину внутреннего div;
удалить оба div;
вернуть разницу между измеренными ранее значениями ширины.*/
    // function scrollbarWidth() {
    //     var div = $('<div style="width:50px; height:50px; overflow:hidden; position:absolute; top:-200px; left:-200px;"><div style="height:100px;"></div></div>').appendTo('body');
    //     var w1 = $('div', div).innerWidth();
    //     div.css('overflow-y', 'scroll');
    //     var w2 = $('div', div).innerWidth();
    //     $(div).remove();
    //     return (w1 - w2);
    // }
    //
    // var resScrollWidtn = scrollbarWidth();
    // console.log('Ширина скролбара страницы: ' + resScrollWidtn);

});



    /*-------------------------------------------------------------*/

    /*-------------------------------------------------------------*/

// });

    //------------------------------------------------------------custom###
//
// 	$body = $('body');
// 	windowWidth = $(window).width();
// 	windowHeight = $(window).height();
//
// 	pageWidget(['index']);
// 	getAllClasses('html','.elements_list');
// });
//
// $(window).on('load', function () {
// 	loadFunc();
// });
//
// $(window).on('resize', function () {
// 	resizeFunc();
// });
//
// $(window).on('scroll', function () {
// 	scrollFunc();
// });
//
// function loadFunc() {
//
// }
// function resizeFunc() {
// 	updateSizes();
// }
//
// function scrollFunc() {
// 	updateSizes();
// }
//
// function updateSizes() {
// 	windowWidth = $(window).width();
// 	windowHeight = $(window).height();
// }

// if ('objectFit' in document.documentElement.style === false) {
// 	document.addEventListener('DOMContentLoaded', function () {
// 		Array.prototype.forEach.call(document.querySelectorAll('img[data-object-fit]'), function (image) {
// 			(image.runtimeStyle || image.style).background = 'url("' + image.src + '") no-repeat 50%/' + (image.currentStyle ? image.currentStyle['object-fit'] : image.getAttribute('data-object-fit'));
//
// 			image.src = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'' + image.width + '\' height=\'' + image.height + '\'%3E%3C/svg%3E';
// 		});
// 	});
// }

//Functions for development
// function getAllClasses(context, output) {
// 	var finalArray = [],
// 		mainArray = [],
// 		allElements = $(context).find($('*'));//get all elements of our page
// 	//If element has class push this class to mainArray
// 	for (var i = 0; i < allElements.length; i++) {
// 		var someElement = allElements[i],
// 			elementClass = someElement.className;
// 		if (elementClass.length > 0) {//if element have not empty class
// 			//If element have multiple classes - separate them
// 			var elementClassArray = elementClass.split(' '),
// 				classesAmount = elementClassArray.length;
// 			if (classesAmount === 1) {
// 				mainArray.push('.' + elementClassArray[0] + ' {');
// 			} else {
// 				var cascad = '.' + elementClassArray[0] + ' {';
// 				for (var j = 1; j < elementClassArray.length; j++) {
// 					cascad += ' &.' + elementClassArray[j] + ' { }';
// 				}
// 				mainArray.push(cascad);
// 			}
// 		}
// 	}

	//creating finalArray, that don't have repeating elements
// 	var noRepeatingArray = unique(mainArray);
// 	noRepeatingArray.forEach(function (item) {
// 		var has = false;
// 		var preWords = item.split('&');
// 		for (var i = 0; i < finalArray.length; ++i) {
// 			var newWords = finalArray[i].split('&');
// 			if (newWords[0] == preWords[0]) {
// 				has = true;
// 				for (var j = 0; j < preWords.length; ++j) {
// 					if (newWords.indexOf(preWords[j]) < 0) {
// 						newWords.push(preWords[j]);
// 					}
// 				}
// 				finalArray[i] = newWords.join('&');
// 			}
// 		}
// 		if (!has) {
// 			finalArray.push(item);
// 		}
// 	});
// 	for (var i = 0; i < finalArray.length; i++) {
// 		$('<div>' + finalArray[i] + ' }</div>').appendTo(output);
// 	}
//
// 	//function that delete repeating elements from arrays, for more information visit http://mathhelpplanet.com/static.php?p=javascript-algoritmy-obrabotki-massivov
// 	function unique(A) {
// 		var n = A.length, k = 0, B = [];
// 		for (var i = 0; i < n; i++) {
// 			var j = 0;
// 			while (j < k && B[j] !== A[i]) j++;
// 			if (j == k) B[k++] = A[i];
// 		}
// 		return B;
// 	}
// }
/*
function pageWidget(pages) {
	var widgetWrap = $('<div class="widget_wrap"><ul class="widget_list"></ul></div>');
	widgetWrap.prependTo("body");
	for (var i = 0; i < pages.length; i++) {
		$('<li class="widget_item"><a class="widget_link" href="' + pages[i] + '.html' + '">' + pages[i] + '</a></li>').appendTo('.widget_list');
	}
	var widgetStilization = $('<style>body {position:relative} .widget_wrap{position:absolute;top:0;left:0;z-index:9999;padding:10px 20px;background:#222;border-bottom-right-radius:10px;-webkit-transition:all .3s ease;transition:all .3s ease;-webkit-transform:translate(-100%,0);-ms-transform:translate(-100%,0);transform:translate(-100%,0)}.widget_wrap:after{content:" ";position:absolute;top:0;left:100%;width:24px;height:24px;background:#222 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAABGdBTUEAALGPC/xhBQAAAAxQTFRF////////AAAA////BQBkwgAAAAN0Uk5TxMMAjAd+zwAAACNJREFUCNdjqP///y/DfyBg+LVq1Xoo8W8/CkFYAmwA0Kg/AFcANT5fe7l4AAAAAElFTkSuQmCC) no-repeat 50% 50%;cursor:pointer}.widget_wrap:hover{-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0)}.widget_item{padding:0 0 10px}.widget_link{color:#fff;text-decoration:none;font-size:15px;}.widget_link:hover{text-decoration:underline} </style>');
	widgetStilization.prependTo(".widget_wrap");
}
*/

/*
	By Osvaldas Valutis, www.osvaldas.info
	Available for use under the MIT License
*/

'use strict';

;( function ( document, window, index )
{
    var inputs = document.querySelectorAll( '.c-inputfile__input' );
    Array.prototype.forEach.call( inputs, function( input )
    {
        var label	 = input.nextElementSibling,
            labelVal = label.innerHTML;

        input.addEventListener( 'change', function( e )
        {
            var fileName = '';
            if( this.files && this.files.length > 1 )
                fileName = ( this.getAttribute( 'data-multiple-caption' ) || '' ).replace( '{count}', this.files.length );
            else
                fileName = e.target.value.split( '\\' ).pop();

            if( fileName )
                label.querySelector( 'span' ).innerHTML = fileName;
            else
                label.innerHTML = labelVal;
        });

        // Firefox bug fix
        input.addEventListener( 'focus', function(){ input.classList.add( 'has-focus' ); });
        input.addEventListener( 'blur', function(){ input.classList.remove( 'has-focus' ); });
    });
}( document, window, 0 ));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByZWxvYWRlci5qcyIsInRvb2x0aXBzdGVyLmJ1bmRsZS5qcyIsImpxdWVyeS5tYXNrLmpzIiwianF1ZXJ5Lm1vdXNld2hlZWwuanMiLCJqcXVlcnkuanNjcm9sbHBhbmUubWluLmpzIiwic2ltcGxlYmFyLmpzIiwib3dsLmNhcm91c2VsLmpzIiwianF1ZXJ5LnN1bW9zZWxlY3QuanMiLCJmb3RvcmFtYS5qcyIsInRvb2x0aXAuanMiLCJtYWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqcklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0bEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzNzR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJzY3JpcHRzX2FsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRvY3VtZW50LmJvZHkub25sb2FkID0gZnVuY3Rpb24oKXtcclxuLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuLy8gICAgICAgICB2YXIgcHJlbG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtcHJlbG9hZGVyJyk7XHJcbi8vICAgICAgICAgaWYoIXByZWxvYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2RvbmUnKSl7XHJcbi8vICAgICAgICAgICAgIHByZWxvYWRlci5jbGFzc0xpc3QuYWRkKCdkb25lJyk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfSwgMTAwMCk7XHJcbi8vIH07XHJcblxyXG4vKtC90L7QstGL0Lkg0L/RgNC10LvQvtGD0LTQtdGAKi9cclxuZG9jdW1lbnQuYm9keS5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgIGlmKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1jb250ZW50LWhpZGRlbicpKXtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICAgIH1cclxuXHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ29ubG9hZENvbnRlbnQnKTtcclxuXHJcbn07XHJcblxyXG5cclxuXHJcbi8vINGE0YPQvdC60YbQuNGPINC/0L7QtNC60LvRjtGH0LXQvdC40Y8g0LLRgdC10YUg0YHQutGA0LjQv9GC0L7QslxyXG4vLyBmdW5jdGlvbiBkeW5hbWljYWxseUxvYWRTY3JpcHQoKSB7XHJcblxyXG4vLyAgICAgdmFyIHNjcmlwdCxcclxuLy8gICAgICAgICBsaXN0U2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0U2NyaXB0cycpLFxyXG4vLyAgICAgICAgIHNyYyA9IFtcclxuLy8gICAgICAgICAgICAgLy8gJ2h0dHBzOi8vYXBpLW1hcHMueWFuZGV4LnJ1LzIuMS8/bGFuZz1ydV9SVScsXHJcbi8vICAgICAgICAgICAgICcuL2pzL2N1c3RvbS1tYXAuanMnLFxyXG4vLyAgICAgICAgICAgICAnLi9ib3dlcl9jb21wb25lbnRzL2pxdWVyeS1tYXNrLXBsdWdpbi9kaXN0L2pxdWVyeS5tYXNrLmpzJyxcclxuLy8gICAgICAgICAgICAgJy4vanMvanNjcm9sbHBhbmUvanF1ZXJ5Lm1vdXNld2hlZWwuanMnLFxyXG4vLyAgICAgICAgICAgICAnLi9qcy9qc2Nyb2xscGFuZS9qcXVlcnkuanNjcm9sbHBhbmUubWluLmpzJyxcclxuLy8gICAgICAgICAgICAgLy8gJ2h0dHBzOi8vYWJlc3R1emhldi5naXRodWIuaW8vY2FmZS1hbmRlcnNvbi9ib3dlcl9jb21wb25lbnRzL3Rvb2x0aXBzdGVyL2Rpc3QvanMvdG9vbHRpcHN0ZXIuYnVuZGxlLmpzJyxcclxuLy8gICAgICAgICAgICAgJy4vanMvc2ltcGxlYmFyLmpzJyxcclxuLy8gICAgICAgICAgICAgJy4vanMvb3dsY2Fyb3VzZWwvb3dsLmNhcm91c2VsLmpzJyxcclxuLy8gICAgICAgICAgICAgJy4vYm93ZXJfY29tcG9uZW50cy9zdW1vc2VsZWN0L2pxdWVyeS5zdW1vc2VsZWN0LmpzJyxcclxuLy8gICAgICAgICAgICAgJy4vYm93ZXJfY29tcG9uZW50cy9mb3RvcmFtYS9mb3RvcmFtYS5qcydcclxuLy8gICAgICAgICBdO1xyXG5cclxuLy8gICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzcmMubGVuZ3RoOyBpKyspe1xyXG4vLyAgICAgICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XHJcbi8vICAgICAgICAgc2NyaXB0LnNyYyA9IHNyY1tpXTtcclxuLy8gICAgICAgICBsaXN0U2NyaXB0cy5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4vLyAgICAgfSAgXHJcbi8vIH07XHJcblxyXG4vLyAgIGR5bmFtaWNhbGx5TG9hZFNjcmlwdCgpO1xyXG4iLCIvKipcclxuICogdG9vbHRpcHN0ZXIgaHR0cDovL2lhbWNlZWdlLmdpdGh1Yi5pby90b29sdGlwc3Rlci9cclxuICogQSByb2NraW4nIGN1c3RvbSB0b29sdGlwIGpRdWVyeSBwbHVnaW5cclxuICogRGV2ZWxvcGVkIGJ5IENhbGViIEphY29iIGFuZCBMb3VpcyBBbWVsaW5lXHJcbiAqIE1JVCBsaWNlbnNlXHJcbiAqL1xyXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcclxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUgdW5sZXNzIGFtZE1vZHVsZUlkIGlzIHNldFxyXG4gICAgZGVmaW5lKFtcImpxdWVyeVwiXSwgZnVuY3Rpb24gKGEwKSB7XHJcbiAgICAgIHJldHVybiAoZmFjdG9yeShhMCkpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxyXG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXHJcbiAgICAvLyBsaWtlIE5vZGUuXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImpxdWVyeVwiKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGZhY3RvcnkoalF1ZXJ5KTtcclxuICB9XHJcbn0odGhpcywgZnVuY3Rpb24gKCQpIHtcclxuXHJcbi8vIFRoaXMgZmlsZSB3aWxsIGJlIFVNRGlmaWVkIGJ5IGEgYnVpbGQgdGFzay5cclxuXHJcbnZhciBkZWZhdWx0cyA9IHtcclxuXHRcdGFuaW1hdGlvbjogJ2ZhZGUnLFxyXG5cdFx0YW5pbWF0aW9uRHVyYXRpb246IDM1MCxcclxuXHRcdGNvbnRlbnQ6IG51bGwsXHJcblx0XHRjb250ZW50QXNIVE1MOiBmYWxzZSxcclxuXHRcdGNvbnRlbnRDbG9uaW5nOiBmYWxzZSxcclxuXHRcdGRlYnVnOiB0cnVlLFxyXG5cdFx0ZGVsYXk6IDMwMCxcclxuXHRcdGRlbGF5VG91Y2g6IFszMDAsIDUwMF0sXHJcblx0XHRmdW5jdGlvbkluaXQ6IG51bGwsXHJcblx0XHRmdW5jdGlvbkJlZm9yZTogbnVsbCxcclxuXHRcdGZ1bmN0aW9uUmVhZHk6IG51bGwsXHJcblx0XHRmdW5jdGlvbkFmdGVyOiBudWxsLFxyXG5cdFx0ZnVuY3Rpb25Gb3JtYXQ6IG51bGwsXHJcblx0XHRJRW1pbjogNixcclxuXHRcdGludGVyYWN0aXZlOiBmYWxzZSxcclxuXHRcdG11bHRpcGxlOiBmYWxzZSxcclxuXHRcdC8vIHdpbGwgZGVmYXVsdCB0byBkb2N1bWVudC5ib2R5LCBvciBtdXN0IGJlIGFuIGVsZW1lbnQgcG9zaXRpb25lZCBhdCAoMCwgMClcclxuXHRcdC8vIGluIHRoZSBkb2N1bWVudCwgdHlwaWNhbGx5IGxpa2UgdGhlIHZlcnkgdG9wIHZpZXdzIG9mIGFuIGFwcC5cclxuXHRcdHBhcmVudDogbnVsbCxcclxuXHRcdHBsdWdpbnM6IFsnc2lkZVRpcCddLFxyXG5cdFx0cmVwb3NpdGlvbk9uU2Nyb2xsOiBmYWxzZSxcclxuXHRcdHJlc3RvcmF0aW9uOiAnbm9uZScsXHJcblx0XHRzZWxmRGVzdHJ1Y3Rpb246IHRydWUsXHJcblx0XHR0aGVtZTogW10sXHJcblx0XHR0aW1lcjogMCxcclxuXHRcdHRyYWNrZXJJbnRlcnZhbDogNTAwLFxyXG5cdFx0dHJhY2tPcmlnaW46IGZhbHNlLFxyXG5cdFx0dHJhY2tUb29sdGlwOiBmYWxzZSxcclxuXHRcdHRyaWdnZXI6ICdob3ZlcicsXHJcblx0XHR0cmlnZ2VyQ2xvc2U6IHtcclxuXHRcdFx0Y2xpY2s6IGZhbHNlLFxyXG5cdFx0XHRtb3VzZWxlYXZlOiBmYWxzZSxcclxuXHRcdFx0b3JpZ2luQ2xpY2s6IGZhbHNlLFxyXG5cdFx0XHRzY3JvbGw6IGZhbHNlLFxyXG5cdFx0XHR0YXA6IGZhbHNlLFxyXG5cdFx0XHR0b3VjaGxlYXZlOiBmYWxzZVxyXG5cdFx0fSxcclxuXHRcdHRyaWdnZXJPcGVuOiB7XHJcblx0XHRcdGNsaWNrOiBmYWxzZSxcclxuXHRcdFx0bW91c2VlbnRlcjogZmFsc2UsXHJcblx0XHRcdHRhcDogZmFsc2UsXHJcblx0XHRcdHRvdWNoc3RhcnQ6IGZhbHNlXHJcblx0XHR9LFxyXG5cdFx0dXBkYXRlQW5pbWF0aW9uOiAncm90YXRlJyxcclxuXHRcdHpJbmRleDogOTk5OTk5OVxyXG5cdH0sXHJcblx0Ly8gd2UnbGwgYXZvaWQgdXNpbmcgdGhlICd3aW5kb3cnIGdsb2JhbCBhcyBhIGdvb2QgcHJhY3RpY2UgYnV0IG5wbSdzXHJcblx0Ly8ganF1ZXJ5QDwyLjEuMCBwYWNrYWdlIGFjdHVhbGx5IHJlcXVpcmVzIGEgJ3dpbmRvdycgZ2xvYmFsLCBzbyBub3Qgc3VyZVxyXG5cdC8vIGl0J3MgdXNlZnVsIGF0IGFsbFxyXG5cdHdpbiA9ICh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnKSA/IHdpbmRvdyA6IG51bGwsXHJcblx0Ly8gZW52IHdpbGwgYmUgcHJveGllZCBieSB0aGUgY29yZSBmb3IgcGx1Z2lucyB0byBoYXZlIGFjY2VzcyBpdHMgcHJvcGVydGllc1xyXG5cdGVudiA9IHtcclxuXHRcdC8vIGRldGVjdCBpZiB0aGlzIGRldmljZSBjYW4gdHJpZ2dlciB0b3VjaCBldmVudHMuIEJldHRlciBoYXZlIGEgZmFsc2VcclxuXHRcdC8vIHBvc2l0aXZlICh1bnVzZWQgbGlzdGVuZXJzLCB0aGF0J3Mgb2spIHRoYW4gYSBmYWxzZSBuZWdhdGl2ZS5cclxuXHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2Rlcm5penIvTW9kZXJuaXpyL2Jsb2IvbWFzdGVyL2ZlYXR1cmUtZGV0ZWN0cy90b3VjaGV2ZW50cy5qc1xyXG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80ODE3MDI5L3doYXRzLXRoZS1iZXN0LXdheS10by1kZXRlY3QtYS10b3VjaC1zY3JlZW4tZGV2aWNlLXVzaW5nLWphdmFzY3JpcHRcclxuXHRcdGhhc1RvdWNoQ2FwYWJpbGl0eTogISEoXHJcblx0XHRcdHdpblxyXG5cdFx0XHQmJlx0KFx0J29udG91Y2hzdGFydCcgaW4gd2luXHJcblx0XHRcdFx0fHxcdCh3aW4uRG9jdW1lbnRUb3VjaCAmJiB3aW4uZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW4uRG9jdW1lbnRUb3VjaClcclxuXHRcdFx0XHR8fFx0d2luLm5hdmlnYXRvci5tYXhUb3VjaFBvaW50c1xyXG5cdFx0XHQpXHJcblx0XHQpLFxyXG5cdFx0aGFzVHJhbnNpdGlvbnM6IHRyYW5zaXRpb25TdXBwb3J0KCksXHJcblx0XHRJRTogZmFsc2UsXHJcblx0XHQvLyBkb24ndCBzZXQgbWFudWFsbHksIGl0IHdpbGwgYmUgdXBkYXRlZCBieSBhIGJ1aWxkIHRhc2sgYWZ0ZXIgdGhlIG1hbmlmZXN0XHJcblx0XHRzZW1WZXI6ICc0LjIuNScsXHJcblx0XHR3aW5kb3c6IHdpblxyXG5cdH0sXHJcblx0Y29yZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHQvLyBjb3JlIHZhcmlhYmxlc1xyXG5cdFx0XHJcblx0XHQvLyB0aGUgY29yZSBlbWl0dGVyc1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSA9ICQoe30pO1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljID0gJCh7fSk7XHJcblx0XHR0aGlzLl9faW5zdGFuY2VzTGF0ZXN0QXJyID0gW107XHJcblx0XHQvLyBjb2xsZWN0cyBwbHVnaW4gY29uc3RydWN0b3JzXHJcblx0XHR0aGlzLl9fcGx1Z2lucyA9IHt9O1xyXG5cdFx0Ly8gcHJveHkgZW52IHZhcmlhYmxlcyBmb3IgcGx1Z2lucyB3aG8gbWlnaHQgdXNlIHRoZW1cclxuXHRcdHRoaXMuX2VudiA9IGVudjtcclxuXHR9O1xyXG5cclxuLy8gY29yZSBtZXRob2RzXHJcbmNvcmUucHJvdG90eXBlID0ge1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEEgZnVuY3Rpb24gdG8gcHJveHkgdGhlIHB1YmxpYyBtZXRob2RzIG9mIGFuIG9iamVjdCBvbnRvIGFub3RoZXJcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBjb25zdHJ1Y3RvciBUaGUgY29uc3RydWN0b3IgdG8gYnJpZGdlXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRoYXQgd2lsbCBnZXQgbmV3IG1ldGhvZHMgKGFuIGluc3RhbmNlIG9yIHRoZSBjb3JlKVxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwbHVnaW5OYW1lIEEgcGx1Z2luIG5hbWUgZm9yIHRoZSBjb25zb2xlIGxvZyBtZXNzYWdlXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fYnJpZGdlOiBmdW5jdGlvbihjb25zdHJ1Y3Rvciwgb2JqLCBwbHVnaW5OYW1lKSB7XHJcblx0XHRcclxuXHRcdC8vIGlmIGl0J3Mgbm90IGFscmVhZHkgYnJpZGdlZFxyXG5cdFx0aWYgKCFvYmpbcGx1Z2luTmFtZV0pIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBmbiA9IGZ1bmN0aW9uKCkge307XHJcblx0XHRcdGZuLnByb3RvdHlwZSA9IGNvbnN0cnVjdG9yO1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHBsdWdpbkluc3RhbmNlID0gbmV3IGZuKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyB0aGUgX2luaXQgbWV0aG9kIGhhcyB0byBleGlzdCBpbiBpbnN0YW5jZSBjb25zdHJ1Y3RvcnMgYnV0IG1pZ2h0IGJlIG1pc3NpbmdcclxuXHRcdFx0Ly8gaW4gY29yZSBjb25zdHJ1Y3RvcnNcclxuXHRcdFx0aWYgKHBsdWdpbkluc3RhbmNlLl9faW5pdCkge1xyXG5cdFx0XHRcdHBsdWdpbkluc3RhbmNlLl9faW5pdChvYmopO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQkLmVhY2goY29uc3RydWN0b3IsIGZ1bmN0aW9uKG1ldGhvZE5hbWUsIGZuKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gZG9uJ3QgcHJveHkgXCJwcml2YXRlXCIgbWV0aG9kcywgb25seSBcInByb3RlY3RlZFwiIGFuZCBwdWJsaWMgb25lc1xyXG5cdFx0XHRcdGlmIChtZXRob2ROYW1lLmluZGV4T2YoJ19fJykgIT0gMCkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBpZiB0aGUgbWV0aG9kIGRvZXMgbm90IGV4aXN0IHlldFxyXG5cdFx0XHRcdFx0aWYgKCFvYmpbbWV0aG9kTmFtZV0pIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdG9ialttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBwbHVnaW5JbnN0YW5jZVttZXRob2ROYW1lXS5hcHBseShwbHVnaW5JbnN0YW5jZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gcmVtZW1iZXIgdG8gd2hpY2ggcGx1Z2luIHRoaXMgbWV0aG9kIGNvcnJlc3BvbmRzIChzZXZlcmFsIHBsdWdpbnMgbWF5XHJcblx0XHRcdFx0XHRcdC8vIGhhdmUgbWV0aG9kcyBvZiB0aGUgc2FtZSBuYW1lLCB3ZSBuZWVkIHRvIGJlIHN1cmUpXHJcblx0XHRcdFx0XHRcdG9ialttZXRob2ROYW1lXS5icmlkZ2VkID0gcGx1Z2luSW5zdGFuY2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmIChkZWZhdWx0cy5kZWJ1Zykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ1RoZSAnKyBtZXRob2ROYW1lICsnIG1ldGhvZCBvZiB0aGUgJysgcGx1Z2luTmFtZVxyXG5cdFx0XHRcdFx0XHRcdCsnIHBsdWdpbiBjb25mbGljdHMgd2l0aCBhbm90aGVyIHBsdWdpbiBvciBuYXRpdmUgbWV0aG9kcycpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRvYmpbcGx1Z2luTmFtZV0gPSBwbHVnaW5JbnN0YW5jZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgbW9ja3VwIGluIE5vZGUgZW52IGlmIG5lZWQgYmUsIGZvciB0ZXN0aW5nIHB1cnBvc2VzXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19zZXRXaW5kb3c6IGZ1bmN0aW9uKHdpbmRvdykge1xyXG5cdFx0ZW52LndpbmRvdyA9IHdpbmRvdztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyBhIHJ1bGVyLCBhIHRvb2wgdG8gaGVscCBtZWFzdXJlIHRoZSBzaXplIG9mIGEgdG9vbHRpcCB1bmRlclxyXG5cdCAqIHZhcmlvdXMgc2V0dGluZ3MuIE1lYW50IGZvciBwbHVnaW5zXHJcblx0ICogXHJcblx0ICogQHNlZSBSdWxlclxyXG5cdCAqIEByZXR1cm4ge29iamVjdH0gQSBSdWxlciBpbnN0YW5jZVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfZ2V0UnVsZXI6IGZ1bmN0aW9uKCR0b29sdGlwKSB7XHJcblx0XHRyZXR1cm4gbmV3IFJ1bGVyKCR0b29sdGlwKTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBpbnRlcm5hbCB1c2UgYnkgcGx1Z2lucywgaWYgbmVlZGVkXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfb2ZmOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUub2ZmLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIGludGVybmFsIHVzZSBieSBwbHVnaW5zLCBpZiBuZWVkZWRcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9vbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLm9uLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIGludGVybmFsIHVzZSBieSBwbHVnaW5zLCBpZiBuZWVkZWRcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9vbmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vbmUuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIChnZXR0ZXIpIG9yIGFkZHMgKHNldHRlcikgYSBwbHVnaW5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gcGx1Z2luIFByb3ZpZGUgYSBzdHJpbmcgKGluIHRoZSBmdWxsIGZvcm1cclxuXHQgKiBcIm5hbWVzcGFjZS5uYW1lXCIpIHRvIHVzZSBhcyBhcyBnZXR0ZXIsIGFuIG9iamVjdCB0byB1c2UgYXMgYSBzZXR0ZXJcclxuXHQgKiBAcmV0dXJuIHtvYmplY3R8Y29yZX1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3BsdWdpbjogZnVuY3Rpb24ocGx1Z2luKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0Ly8gZ2V0dGVyXHJcblx0XHRpZiAodHlwZW9mIHBsdWdpbiA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHBsdWdpbk5hbWUgPSBwbHVnaW4sXHJcblx0XHRcdFx0cCA9IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGUgbmFtZXNwYWNlIGlzIHByb3ZpZGVkLCBpdCdzIGVhc3kgdG8gc2VhcmNoXHJcblx0XHRcdGlmIChwbHVnaW5OYW1lLmluZGV4T2YoJy4nKSA+IDApIHtcclxuXHRcdFx0XHRwID0gc2VsZi5fX3BsdWdpbnNbcGx1Z2luTmFtZV07XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gb3RoZXJ3aXNlLCByZXR1cm4gdGhlIGZpcnN0IG5hbWUgdGhhdCBtYXRjaGVzXHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdCQuZWFjaChzZWxmLl9fcGx1Z2lucywgZnVuY3Rpb24oaSwgcGx1Z2luKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChwbHVnaW4ubmFtZS5zdWJzdHJpbmcocGx1Z2luLm5hbWUubGVuZ3RoIC0gcGx1Z2luTmFtZS5sZW5ndGggLSAxKSA9PSAnLicrIHBsdWdpbk5hbWUpIHtcclxuXHRcdFx0XHRcdFx0cCA9IHBsdWdpbjtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gcDtcclxuXHRcdH1cclxuXHRcdC8vIHNldHRlclxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBmb3JjZSBuYW1lc3BhY2VzXHJcblx0XHRcdGlmIChwbHVnaW4ubmFtZS5pbmRleE9mKCcuJykgPCAwKSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdQbHVnaW5zIG11c3QgYmUgbmFtZXNwYWNlZCcpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl9fcGx1Z2luc1twbHVnaW4ubmFtZV0gPSBwbHVnaW47XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGUgcGx1Z2luIGhhcyBjb3JlIGZlYXR1cmVzXHJcblx0XHRcdGlmIChwbHVnaW4uY29yZSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGJyaWRnZSBub24tcHJpdmF0ZSBtZXRob2RzIG9udG8gdGhlIGNvcmUgdG8gYWxsb3cgbmV3IGNvcmUgbWV0aG9kc1xyXG5cdFx0XHRcdHNlbGYuX19icmlkZ2UocGx1Z2luLmNvcmUsIHNlbGYsIHBsdWdpbi5uYW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBUcmlnZ2VyIGV2ZW50cyBvbiB0aGUgY29yZSBlbWl0dGVyc1xyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtjb3JlfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfdHJpZ2dlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7XHJcblx0XHRcclxuXHRcdGlmICh0eXBlb2YgYXJnc1swXSA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHRhcmdzWzBdID0geyB0eXBlOiBhcmdzWzBdIH07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIG5vdGU6IHRoZSBvcmRlciBvZiBlbWl0dGVycyBtYXR0ZXJzXHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLnRyaWdnZXIuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHJpdmF0ZSwgYXJncyk7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMudHJpZ2dlci5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIGFyZ3MpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgaW5zdGFuY2VzIG9mIGFsbCB0b29sdGlwcyBpbiB0aGUgcGFnZSBvciBhbiBhIGdpdmVuIGVsZW1lbnRcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfEhUTUwgb2JqZWN0IGNvbGxlY3Rpb259IHNlbGVjdG9yIG9wdGlvbmFsIFVzZSB0aGlzXHJcblx0ICogcGFyYW1ldGVyIHRvIHJlc3RyaWN0IHRoZSBzZXQgb2Ygb2JqZWN0cyB0aGF0IHdpbGwgYmUgaW5zcGVjdGVkXHJcblx0ICogZm9yIHRoZSByZXRyaWV2YWwgb2YgaW5zdGFuY2VzLiBCeSBkZWZhdWx0LCBhbGwgaW5zdGFuY2VzIGluIHRoZVxyXG5cdCAqIHBhZ2UgYXJlIHJldHVybmVkLlxyXG5cdCAqIEByZXR1cm4ge2FycmF5fSBBbiBhcnJheSBvZiBpbnN0YW5jZSBvYmplY3RzXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGluc3RhbmNlczogZnVuY3Rpb24oc2VsZWN0b3IpIHtcclxuXHRcdFxyXG5cdFx0dmFyIGluc3RhbmNlcyA9IFtdLFxyXG5cdFx0XHRzZWwgPSBzZWxlY3RvciB8fCAnLnRvb2x0aXBzdGVyZWQnO1xyXG5cdFx0XHJcblx0XHQkKHNlbCkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyksXHJcblx0XHRcdFx0bnMgPSAkdGhpcy5kYXRhKCd0b29sdGlwc3Rlci1ucycpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKG5zKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JC5lYWNoKG5zLCBmdW5jdGlvbihpLCBuYW1lc3BhY2UpIHtcclxuXHRcdFx0XHRcdGluc3RhbmNlcy5wdXNoKCR0aGlzLmRhdGEobmFtZXNwYWNlKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gaW5zdGFuY2VzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgVG9vbHRpcHN0ZXIgb2JqZWN0cyBnZW5lcmF0ZWQgYnkgdGhlIGxhc3QgaW5pdGlhbGl6aW5nIGNhbGxcclxuXHQgKlxyXG5cdCAqIEByZXR1cm4ge2FycmF5fSBBbiBhcnJheSBvZiBpbnN0YW5jZSBvYmplY3RzXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGluc3RhbmNlc0xhdGVzdDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fX2luc3RhbmNlc0xhdGVzdEFycjtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBwdWJsaWMgdXNlIG9ubHksIG5vdCB0byBiZSB1c2VkIGJ5IHBsdWdpbnMgKHVzZSA6Ol9vZmYoKSBpbnN0ZWFkKVxyXG5cdCAqXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0b2ZmOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy5vZmYuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBwdWJsaWMgdXNlIG9ubHksIG5vdCB0byBiZSB1c2VkIGJ5IHBsdWdpbnMgKHVzZSA6Ol9vbigpIGluc3RlYWQpXHJcblx0ICpcclxuXHQgKiBAcmV0dXJuIHtjb3JlfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub24uYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBwdWJsaWMgdXNlIG9ubHksIG5vdCB0byBiZSB1c2VkIGJ5IHBsdWdpbnMgKHVzZSA6Ol9vbmUoKSBpbnN0ZWFkKVxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm4ge2NvcmV9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG9uZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub25lLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIGFsbCBIVE1MIGVsZW1lbnRzIHdoaWNoIGhhdmUgb25lIG9yIG1vcmUgdG9vbHRpcHNcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciBvcHRpb25hbCBVc2UgdGhpcyB0byByZXN0cmljdCB0aGUgcmVzdWx0c1xyXG5cdCAqIHRvIHRoZSBkZXNjZW5kYW50cyBvZiBhbiBlbGVtZW50XHJcblx0ICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IG9mIEhUTUwgZWxlbWVudHNcclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0b3JpZ2luczogZnVuY3Rpb24oc2VsZWN0b3IpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbCA9IHNlbGVjdG9yID9cclxuXHRcdFx0c2VsZWN0b3IgKycgJyA6XHJcblx0XHRcdCcnO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gJChzZWwgKycudG9vbHRpcHN0ZXJlZCcpLnRvQXJyYXkoKTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIENoYW5nZSBkZWZhdWx0IG9wdGlvbnMgZm9yIGFsbCBmdXR1cmUgaW5zdGFuY2VzXHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gZCBUaGUgb3B0aW9ucyB0aGF0IHNob3VsZCBiZSBtYWRlIGRlZmF1bHRzXHJcblx0ICogQHJldHVybiB7Y29yZX1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0c2V0RGVmYXVsdHM6IGZ1bmN0aW9uKGQpIHtcclxuXHRcdCQuZXh0ZW5kKGRlZmF1bHRzLCBkKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIHVzZXJzIHRvIHRyaWdnZXIgdGhlaXIgaGFuZGxlcnMgb24gdGhlIHB1YmxpYyBlbWl0dGVyXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge2NvcmV9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy50cmlnZ2VySGFuZGxlci5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQdWJsaWMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufTtcclxuXHJcbi8vICQudG9vbHRpcHN0ZXIgd2lsbCBiZSB1c2VkIHRvIGNhbGwgY29yZSBtZXRob2RzXHJcbiQudG9vbHRpcHN0ZXIgPSBuZXcgY29yZSgpO1xyXG5cclxuLy8gdGhlIFRvb2x0aXBzdGVyIGluc3RhbmNlIGNsYXNzIChtaW5kIHRoZSBjYXBpdGFsIFQpXHJcbiQuVG9vbHRpcHN0ZXIgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XHJcblx0XHJcblx0Ly8gbGlzdCBvZiBpbnN0YW5jZSB2YXJpYWJsZXNcclxuXHRcclxuXHQvLyBzdGFjayBvZiBjdXN0b20gY2FsbGJhY2tzIHByb3ZpZGVkIGFzIHBhcmFtZXRlcnMgdG8gQVBJIG1ldGhvZHNcclxuXHR0aGlzLl9fY2FsbGJhY2tzID0ge1xyXG5cdFx0Y2xvc2U6IFtdLFxyXG5cdFx0b3BlbjogW11cclxuXHR9O1xyXG5cdC8vIHRoZSBzY2hlZHVsZSB0aW1lIG9mIERPTSByZW1vdmFsXHJcblx0dGhpcy5fX2Nsb3NpbmdUaW1lO1xyXG5cdC8vIHRoaXMgd2lsbCBiZSB0aGUgdXNlciBjb250ZW50IHNob3duIGluIHRoZSB0b29sdGlwLiBBIGNhcGl0YWwgXCJDXCIgaXMgdXNlZFxyXG5cdC8vIGJlY2F1c2UgdGhlcmUgaXMgYWxzbyBhIG1ldGhvZCBjYWxsZWQgY29udGVudCgpXHJcblx0dGhpcy5fX0NvbnRlbnQ7XHJcblx0Ly8gZm9yIHRoZSBzaXplIHRyYWNrZXJcclxuXHR0aGlzLl9fY29udGVudEJjcjtcclxuXHQvLyB0byBkaXNhYmxlIHRoZSB0b29sdGlwIGFmdGVyIGRlc3RydWN0aW9uXHJcblx0dGhpcy5fX2Rlc3Ryb3llZCA9IGZhbHNlO1xyXG5cdC8vIHdlIGNhbid0IGVtaXQgZGlyZWN0bHkgb24gdGhlIGluc3RhbmNlIGJlY2F1c2UgaWYgYSBtZXRob2Qgd2l0aCB0aGUgc2FtZVxyXG5cdC8vIG5hbWUgYXMgdGhlIGV2ZW50IGV4aXN0cywgaXQgd2lsbCBiZSBjYWxsZWQgYnkgalF1ZXJ5LiBTZSB3ZSB1c2UgYSBwbGFpblxyXG5cdC8vIG9iamVjdCBhcyBlbWl0dGVyLiBUaGlzIGVtaXR0ZXIgaXMgZm9yIGludGVybmFsIHVzZSBieSBwbHVnaW5zLFxyXG5cdC8vIGlmIG5lZWRlZC5cclxuXHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlID0gJCh7fSk7XHJcblx0Ly8gdGhpcyBlbWl0dGVyIGlzIGZvciB0aGUgdXNlciB0byBsaXN0ZW4gdG8gZXZlbnRzIHdpdGhvdXQgcmlza2luZyB0byBtZXNzXHJcblx0Ly8gd2l0aCBvdXIgaW50ZXJuYWwgbGlzdGVuZXJzXHJcblx0dGhpcy5fXyRlbWl0dGVyUHVibGljID0gJCh7fSk7XHJcblx0dGhpcy5fX2VuYWJsZWQgPSB0cnVlO1xyXG5cdC8vIHRoZSByZWZlcmVuY2UgdG8gdGhlIGdjIGludGVydmFsXHJcblx0dGhpcy5fX2dhcmJhZ2VDb2xsZWN0b3I7XHJcblx0Ly8gdmFyaW91cyBwb3NpdGlvbiBhbmQgc2l6ZSBkYXRhIHJlY29tcHV0ZWQgYmVmb3JlIGVhY2ggcmVwb3NpdGlvbmluZ1xyXG5cdHRoaXMuX19HZW9tZXRyeTtcclxuXHQvLyB0aGUgdG9vbHRpcCBwb3NpdGlvbiwgc2F2ZWQgYWZ0ZXIgZWFjaCByZXBvc2l0aW9uaW5nIGJ5IGEgcGx1Z2luXHJcblx0dGhpcy5fX2xhc3RQb3NpdGlvbjtcclxuXHQvLyBhIHVuaXF1ZSBuYW1lc3BhY2UgcGVyIGluc3RhbmNlXHJcblx0dGhpcy5fX25hbWVzcGFjZSA9ICd0b29sdGlwc3Rlci0nKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMDAwMCk7XHJcblx0dGhpcy5fX29wdGlvbnM7XHJcblx0Ly8gd2lsbCBiZSB1c2VkIHRvIHN1cHBvcnQgb3JpZ2lucyBpbiBzY3JvbGxhYmxlIGFyZWFzXHJcblx0dGhpcy5fXyRvcmlnaW5QYXJlbnRzO1xyXG5cdHRoaXMuX19wb2ludGVySXNPdmVyT3JpZ2luID0gZmFsc2U7XHJcblx0Ly8gdG8gcmVtb3ZlIHRoZW1lcyBpZiBuZWVkZWRcclxuXHR0aGlzLl9fcHJldmlvdXNUaGVtZXMgPSBbXTtcclxuXHQvLyB0aGUgc3RhdGUgY2FuIGJlIGVpdGhlcjogYXBwZWFyaW5nLCBzdGFibGUsIGRpc2FwcGVhcmluZywgY2xvc2VkXHJcblx0dGhpcy5fX3N0YXRlID0gJ2Nsb3NlZCc7XHJcblx0Ly8gdGltZW91dCByZWZlcmVuY2VzXHJcblx0dGhpcy5fX3RpbWVvdXRzID0ge1xyXG5cdFx0Y2xvc2U6IFtdLFxyXG5cdFx0b3BlbjogbnVsbFxyXG5cdH07XHJcblx0Ly8gc3RvcmUgdG91Y2ggZXZlbnRzIHRvIGJlIGFibGUgdG8gZGV0ZWN0IGVtdWxhdGVkIG1vdXNlIGV2ZW50c1xyXG5cdHRoaXMuX190b3VjaEV2ZW50cyA9IFtdO1xyXG5cdC8vIHRoZSByZWZlcmVuY2UgdG8gdGhlIHRyYWNrZXIgaW50ZXJ2YWxcclxuXHR0aGlzLl9fdHJhY2tlciA9IG51bGw7XHJcblx0Ly8gdGhlIGVsZW1lbnQgdG8gd2hpY2ggdGhpcyB0b29sdGlwIGlzIGFzc29jaWF0ZWRcclxuXHR0aGlzLl8kb3JpZ2luO1xyXG5cdC8vIHRoaXMgd2lsbCBiZSB0aGUgdG9vbHRpcCBlbGVtZW50IChqUXVlcnkgd3JhcHBlZCBIVE1MIGVsZW1lbnQpLlxyXG5cdC8vIEl0J3MgdGhlIGpvYiBvZiBhIHBsdWdpbiB0byBjcmVhdGUgaXQgYW5kIGFwcGVuZCBpdCB0byB0aGUgRE9NXHJcblx0dGhpcy5fJHRvb2x0aXA7XHJcblx0XHJcblx0Ly8gbGF1bmNoXHJcblx0dGhpcy5fX2luaXQoZWxlbWVudCwgb3B0aW9ucyk7XHJcbn07XHJcblxyXG4kLlRvb2x0aXBzdGVyLnByb3RvdHlwZSA9IHtcclxuXHRcclxuXHQvKipcclxuXHQgKiBAcGFyYW0gb3JpZ2luXHJcblx0ICogQHBhcmFtIG9wdGlvbnNcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9faW5pdDogZnVuY3Rpb24ob3JpZ2luLCBvcHRpb25zKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0c2VsZi5fJG9yaWdpbiA9ICQob3JpZ2luKTtcclxuXHRcdHNlbGYuX19vcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHRcdFxyXG5cdFx0Ly8gc29tZSBvcHRpb25zIG1heSBuZWVkIHRvIGJlIHJlZm9ybWF0dGVkXHJcblx0XHRzZWxmLl9fb3B0aW9uc0Zvcm1hdCgpO1xyXG5cdFx0XHJcblx0XHQvLyBkb24ndCBydW4gb24gb2xkIElFIGlmIGFza2VkIG5vIHRvXHJcblx0XHRpZiAoXHQhZW52LklFXHJcblx0XHRcdHx8XHRlbnYuSUUgPj0gc2VsZi5fX29wdGlvbnMuSUVtaW5cclxuXHRcdCkge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbm90ZTogdGhlIGNvbnRlbnQgaXMgbnVsbCAoZW1wdHkpIGJ5IGRlZmF1bHQgYW5kIGNhbiBzdGF5IHRoYXRcclxuXHRcdFx0Ly8gd2F5IGlmIHRoZSBwbHVnaW4gcmVtYWlucyBpbml0aWFsaXplZCBidXQgbm90IGZlZCBhbnkgY29udGVudC4gVGhlXHJcblx0XHRcdC8vIHRvb2x0aXAgd2lsbCBqdXN0IG5vdCBhcHBlYXIuXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBsZXQncyBzYXZlIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSB0aXRsZSBhdHRyaWJ1dGUgZm9yIGxhdGVyXHJcblx0XHRcdC8vIHJlc3RvcmF0aW9uIGlmIG5lZWQgYmUuXHJcblx0XHRcdHZhciBpbml0aWFsVGl0bGUgPSBudWxsO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaXQgd2lsbCBhbHJlYWR5IGhhdmUgYmVlbiBzYXZlZCBpbiBjYXNlIG9mIG11bHRpcGxlIHRvb2x0aXBzXHJcblx0XHRcdGlmIChzZWxmLl8kb3JpZ2luLmRhdGEoJ3Rvb2x0aXBzdGVyLWluaXRpYWxUaXRsZScpID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpbml0aWFsVGl0bGUgPSBzZWxmLl8kb3JpZ2luLmF0dHIoJ3RpdGxlJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gd2UgZG8gbm90IHdhbnQgaW5pdGlhbFRpdGxlIHRvIGJlIFwidW5kZWZpbmVkXCIgYmVjYXVzZVxyXG5cdFx0XHRcdC8vIG9mIGhvdyBqUXVlcnkncyAuZGF0YSgpIG1ldGhvZCB3b3Jrc1xyXG5cdFx0XHRcdGlmIChpbml0aWFsVGl0bGUgPT09IHVuZGVmaW5lZCkgaW5pdGlhbFRpdGxlID0gbnVsbDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzZWxmLl8kb3JpZ2luLmRhdGEoJ3Rvb2x0aXBzdGVyLWluaXRpYWxUaXRsZScsIGluaXRpYWxUaXRsZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIElmIGNvbnRlbnQgaXMgcHJvdmlkZWQgaW4gdGhlIG9wdGlvbnMsIGl0IGhhcyBwcmVjZWRlbmNlIG92ZXIgdGhlXHJcblx0XHRcdC8vIHRpdGxlIGF0dHJpYnV0ZS5cclxuXHRcdFx0Ly8gTm90ZTogYW4gZW1wdHkgc3RyaW5nIGlzIGNvbnNpZGVyZWQgY29udGVudCwgb25seSAnbnVsbCcgcmVwcmVzZW50c1xyXG5cdFx0XHQvLyB0aGUgYWJzZW5jZSBvZiBjb250ZW50LlxyXG5cdFx0XHQvLyBBbHNvLCBhbiBleGlzdGluZyB0aXRsZT1cIlwiIGF0dHJpYnV0ZSB3aWxsIHJlc3VsdCBpbiBhbiBlbXB0eSBzdHJpbmdcclxuXHRcdFx0Ly8gY29udGVudFxyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuY29udGVudCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHNlbGYuX19jb250ZW50U2V0KHNlbGYuX19vcHRpb25zLmNvbnRlbnQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBzZWxlY3RvciA9IHNlbGYuXyRvcmlnaW4uYXR0cignZGF0YS10b29sdGlwLWNvbnRlbnQnKSxcclxuXHRcdFx0XHRcdCRlbDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoc2VsZWN0b3Ipe1xyXG5cdFx0XHRcdFx0JGVsID0gJChzZWxlY3Rvcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICgkZWwgJiYgJGVsWzBdKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fY29udGVudFNldCgkZWwuZmlyc3QoKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0c2VsZi5fX2NvbnRlbnRTZXQoaW5pdGlhbFRpdGxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuXyRvcmlnaW5cclxuXHRcdFx0XHQvLyBzdHJpcCB0aGUgdGl0bGUgb2ZmIG9mIHRoZSBlbGVtZW50IHRvIHByZXZlbnQgdGhlIGRlZmF1bHQgdG9vbHRpcHNcclxuXHRcdFx0XHQvLyBmcm9tIHBvcHBpbmcgdXBcclxuXHRcdFx0XHQucmVtb3ZlQXR0cigndGl0bGUnKVxyXG5cdFx0XHRcdC8vIHRvIGJlIGFibGUgdG8gZmluZCBhbGwgaW5zdGFuY2VzIG9uIHRoZSBwYWdlIGxhdGVyICh1cG9uIHdpbmRvd1xyXG5cdFx0XHRcdC8vIGV2ZW50cyBpbiBwYXJ0aWN1bGFyKVxyXG5cdFx0XHRcdC5hZGRDbGFzcygndG9vbHRpcHN0ZXJlZCcpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gc2V0IGxpc3RlbmVycyBvbiB0aGUgb3JpZ2luXHJcblx0XHRcdHNlbGYuX19wcmVwYXJlT3JpZ2luKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBzZXQgdGhlIGdhcmJhZ2UgY29sbGVjdG9yXHJcblx0XHRcdHNlbGYuX19wcmVwYXJlR0MoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGluaXQgcGx1Z2luc1xyXG5cdFx0XHQkLmVhY2goc2VsZi5fX29wdGlvbnMucGx1Z2lucywgZnVuY3Rpb24oaSwgcGx1Z2luTmFtZSkge1xyXG5cdFx0XHRcdHNlbGYuX3BsdWcocGx1Z2luTmFtZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gdG8gZGV0ZWN0IHN3aXBpbmdcclxuXHRcdFx0aWYgKGVudi5oYXNUb3VjaENhcGFiaWxpdHkpIHtcclxuXHRcdFx0XHQkKGVudi53aW5kb3cuZG9jdW1lbnQuYm9keSkub24oJ3RvdWNobW92ZS4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcdHNlbGYuX3RvdWNoUmVjb3JkRXZlbnQoZXZlbnQpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmXHJcblx0XHRcdFx0Ly8gcHJlcGFyZSB0aGUgdG9vbHRpcCB3aGVuIGl0IGdldHMgY3JlYXRlZC4gVGhpcyBldmVudCBtdXN0XHJcblx0XHRcdFx0Ly8gYmUgZmlyZWQgYnkgYSBwbHVnaW5cclxuXHRcdFx0XHQuX29uKCdjcmVhdGVkJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fcHJlcGFyZVRvb2x0aXAoKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC8vIHNhdmUgcG9zaXRpb24gaW5mb3JtYXRpb24gd2hlbiBpdCdzIHNlbnQgYnkgYSBwbHVnaW5cclxuXHRcdFx0XHQuX29uKCdyZXBvc2l0aW9uZWQnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fbGFzdFBvc2l0aW9uID0gZS5wb3NpdGlvbjtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRzZWxmLl9fb3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBJbnNlcnQgdGhlIGNvbnRlbnQgaW50byB0aGUgYXBwcm9wcmlhdGUgSFRNTCBlbGVtZW50IG9mIHRoZSB0b29sdGlwXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX2NvbnRlbnRJbnNlcnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdCRlbCA9IHNlbGYuXyR0b29sdGlwLmZpbmQoJy50b29sdGlwc3Rlci1jb250ZW50JyksXHJcblx0XHRcdGZvcm1hdHRlZENvbnRlbnQgPSBzZWxmLl9fQ29udGVudCxcclxuXHRcdFx0Zm9ybWF0ID0gZnVuY3Rpb24oY29udGVudCkge1xyXG5cdFx0XHRcdGZvcm1hdHRlZENvbnRlbnQgPSBjb250ZW50O1xyXG5cdFx0XHR9O1xyXG5cdFx0XHJcblx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0dHlwZTogJ2Zvcm1hdCcsXHJcblx0XHRcdGNvbnRlbnQ6IHNlbGYuX19Db250ZW50LFxyXG5cdFx0XHRmb3JtYXQ6IGZvcm1hdFxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGlmIChzZWxmLl9fb3B0aW9ucy5mdW5jdGlvbkZvcm1hdCkge1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9ybWF0dGVkQ29udGVudCA9IHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uRm9ybWF0LmNhbGwoXHJcblx0XHRcdFx0c2VsZixcclxuXHRcdFx0XHRzZWxmLFxyXG5cdFx0XHRcdHsgb3JpZ2luOiBzZWxmLl8kb3JpZ2luWzBdIH0sXHJcblx0XHRcdFx0c2VsZi5fX0NvbnRlbnRcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKHR5cGVvZiBmb3JtYXR0ZWRDb250ZW50ID09PSAnc3RyaW5nJyAmJiAhc2VsZi5fX29wdGlvbnMuY29udGVudEFzSFRNTCkge1xyXG5cdFx0XHQkZWwudGV4dChmb3JtYXR0ZWRDb250ZW50KTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHQkZWxcclxuXHRcdFx0XHQuZW1wdHkoKVxyXG5cdFx0XHRcdC5hcHBlbmQoZm9ybWF0dGVkQ29udGVudCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogU2F2ZSB0aGUgY29udGVudCwgY2xvbmluZyBpdCBiZWZvcmVoYW5kIGlmIG5lZWQgYmVcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gY29udGVudFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19jb250ZW50U2V0OiBmdW5jdGlvbihjb250ZW50KSB7XHJcblx0XHRcclxuXHRcdC8vIGNsb25lIGlmIGFza2VkLiBDbG9uaW5nIHRoZSBvYmplY3QgbWFrZXMgc3VyZSB0aGF0IGVhY2ggaW5zdGFuY2UgaGFzIGl0c1xyXG5cdFx0Ly8gb3duIHZlcnNpb24gb2YgdGhlIGNvbnRlbnQgKGluIGNhc2UgYSBzYW1lIG9iamVjdCB3ZXJlIHByb3ZpZGVkIGZvciBzZXZlcmFsXHJcblx0XHQvLyBpbnN0YW5jZXMpXHJcblx0XHQvLyByZW1pbmRlcjogdHlwZW9mIG51bGwgPT09IG9iamVjdFxyXG5cdFx0aWYgKGNvbnRlbnQgaW5zdGFuY2VvZiAkICYmIHRoaXMuX19vcHRpb25zLmNvbnRlbnRDbG9uaW5nKSB7XHJcblx0XHRcdGNvbnRlbnQgPSBjb250ZW50LmNsb25lKHRydWUpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHR0aGlzLl9fQ29udGVudCA9IGNvbnRlbnQ7XHJcblx0XHRcclxuXHRcdHRoaXMuX3RyaWdnZXIoe1xyXG5cdFx0XHR0eXBlOiAndXBkYXRlZCcsXHJcblx0XHRcdGNvbnRlbnQ6IGNvbnRlbnRcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEVycm9yIG1lc3NhZ2UgYWJvdXQgYSBtZXRob2QgY2FsbCBtYWRlIGFmdGVyIGRlc3RydWN0aW9uXHJcblx0ICogXHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX2Rlc3Ryb3lFcnJvcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgdG9vbHRpcCBoYXMgYmVlbiBkZXN0cm95ZWQgYW5kIGNhbm5vdCBleGVjdXRlIHlvdXIgbWV0aG9kIGNhbGwuJyk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBHYXRoZXIgYWxsIGluZm9ybWF0aW9uIGFib3V0IGRpbWVuc2lvbnMgYW5kIGF2YWlsYWJsZSBzcGFjZSxcclxuXHQgKiBjYWxsZWQgYmVmb3JlIGV2ZXJ5IHJlcG9zaXRpb25pbmdcclxuXHQgKiBcclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqIEByZXR1cm5zIHtvYmplY3R9XHJcblx0ICovXHJcblx0X19nZW9tZXRyeTogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhclx0c2VsZiA9IHRoaXMsXHJcblx0XHRcdCR0YXJnZXQgPSBzZWxmLl8kb3JpZ2luLFxyXG5cdFx0XHRvcmlnaW5Jc0FyZWEgPSBzZWxmLl8kb3JpZ2luLmlzKCdhcmVhJyk7XHJcblx0XHRcclxuXHRcdC8vIGlmIHRoaXMuXyRvcmlnaW4gaXMgYSBtYXAgYXJlYSwgdGhlIHRhcmdldCB3ZSdsbCBuZWVkXHJcblx0XHQvLyB0aGUgZGltZW5zaW9ucyBvZiBpcyBhY3R1YWxseSB0aGUgaW1hZ2UgdXNpbmcgdGhlIG1hcCxcclxuXHRcdC8vIG5vdCB0aGUgYXJlYSBpdHNlbGZcclxuXHRcdGlmIChvcmlnaW5Jc0FyZWEpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBtYXBOYW1lID0gc2VsZi5fJG9yaWdpbi5wYXJlbnQoKS5hdHRyKCduYW1lJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQkdGFyZ2V0ID0gJCgnaW1nW3VzZW1hcD1cIiMnKyBtYXBOYW1lICsnXCJdJyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHZhciBiY3IgPSAkdGFyZ2V0WzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG5cdFx0XHQkZG9jdW1lbnQgPSAkKGVudi53aW5kb3cuZG9jdW1lbnQpLFxyXG5cdFx0XHQkd2luZG93ID0gJChlbnYud2luZG93KSxcclxuXHRcdFx0JHBhcmVudCA9ICR0YXJnZXQsXHJcblx0XHRcdC8vIHNvbWUgdXNlZnVsIHByb3BlcnRpZXMgb2YgaW1wb3J0YW50IGVsZW1lbnRzXHJcblx0XHRcdGdlbyA9IHtcclxuXHRcdFx0XHQvLyBhdmFpbGFibGUgc3BhY2UgZm9yIHRoZSB0b29sdGlwLCBzZWUgZG93biBiZWxvd1xyXG5cdFx0XHRcdGF2YWlsYWJsZToge1xyXG5cdFx0XHRcdFx0ZG9jdW1lbnQ6IG51bGwsXHJcblx0XHRcdFx0XHR3aW5kb3c6IG51bGxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGRvY3VtZW50OiB7XHJcblx0XHRcdFx0XHRzaXplOiB7XHJcblx0XHRcdFx0XHRcdGhlaWdodDogJGRvY3VtZW50LmhlaWdodCgpLFxyXG5cdFx0XHRcdFx0XHR3aWR0aDogJGRvY3VtZW50LndpZHRoKClcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHdpbmRvdzoge1xyXG5cdFx0XHRcdFx0c2Nyb2xsOiB7XHJcblx0XHRcdFx0XHRcdC8vIHRoZSBzZWNvbmQgb25lcyBhcmUgZm9yIElFIGNvbXBhdGliaWxpdHlcclxuXHRcdFx0XHRcdFx0bGVmdDogZW52LndpbmRvdy5zY3JvbGxYIHx8IGVudi53aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsXHJcblx0XHRcdFx0XHRcdHRvcDogZW52LndpbmRvdy5zY3JvbGxZIHx8IGVudi53aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcFxyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdHNpemU6IHtcclxuXHRcdFx0XHRcdFx0aGVpZ2h0OiAkd2luZG93LmhlaWdodCgpLFxyXG5cdFx0XHRcdFx0XHR3aWR0aDogJHdpbmRvdy53aWR0aCgpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRvcmlnaW46IHtcclxuXHRcdFx0XHRcdC8vIHRoZSBvcmlnaW4gaGFzIGEgZml4ZWQgbGluZWFnZSBpZiBpdHNlbGYgb3Igb25lIG9mIGl0c1xyXG5cdFx0XHRcdFx0Ly8gYW5jZXN0b3JzIGhhcyBhIGZpeGVkIHBvc2l0aW9uXHJcblx0XHRcdFx0XHRmaXhlZExpbmVhZ2U6IGZhbHNlLFxyXG5cdFx0XHRcdFx0Ly8gcmVsYXRpdmUgdG8gdGhlIGRvY3VtZW50XHJcblx0XHRcdFx0XHRvZmZzZXQ6IHt9LFxyXG5cdFx0XHRcdFx0c2l6ZToge1xyXG5cdFx0XHRcdFx0XHRoZWlnaHQ6IGJjci5ib3R0b20gLSBiY3IudG9wLFxyXG5cdFx0XHRcdFx0XHR3aWR0aDogYmNyLnJpZ2h0IC0gYmNyLmxlZnRcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHR1c2VtYXBJbWFnZTogb3JpZ2luSXNBcmVhID8gJHRhcmdldFswXSA6IG51bGwsXHJcblx0XHRcdFx0XHQvLyByZWxhdGl2ZSB0byB0aGUgd2luZG93XHJcblx0XHRcdFx0XHR3aW5kb3dPZmZzZXQ6IHtcclxuXHRcdFx0XHRcdFx0Ym90dG9tOiBiY3IuYm90dG9tLFxyXG5cdFx0XHRcdFx0XHRsZWZ0OiBiY3IubGVmdCxcclxuXHRcdFx0XHRcdFx0cmlnaHQ6IGJjci5yaWdodCxcclxuXHRcdFx0XHRcdFx0dG9wOiBiY3IudG9wXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRnZW9GaXhlZCA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHQvLyBpZiB0aGUgZWxlbWVudCBpcyBhIG1hcCBhcmVhLCBzb21lIHByb3BlcnRpZXMgbWF5IG5lZWRcclxuXHRcdC8vIHRvIGJlIHJlY2FsY3VsYXRlZFxyXG5cdFx0aWYgKG9yaWdpbklzQXJlYSkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHNoYXBlID0gc2VsZi5fJG9yaWdpbi5hdHRyKCdzaGFwZScpLFxyXG5cdFx0XHRcdGNvb3JkcyA9IHNlbGYuXyRvcmlnaW4uYXR0cignY29vcmRzJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoY29vcmRzKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29vcmRzID0gY29vcmRzLnNwbGl0KCcsJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JC5tYXAoY29vcmRzLCBmdW5jdGlvbih2YWwsIGkpIHtcclxuXHRcdFx0XHRcdGNvb3Jkc1tpXSA9IHBhcnNlSW50KHZhbCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZSBpbWFnZSBpdHNlbGYgaXMgdGhlIGFyZWEsIG5vdGhpbmcgbW9yZSB0byBkb1xyXG5cdFx0XHRpZiAoc2hhcGUgIT0gJ2RlZmF1bHQnKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c3dpdGNoKHNoYXBlKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNhc2UgJ2NpcmNsZSc6XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2YXIgY2lyY2xlQ2VudGVyTGVmdCA9IGNvb3Jkc1swXSxcclxuXHRcdFx0XHRcdFx0XHRjaXJjbGVDZW50ZXJUb3AgPSBjb29yZHNbMV0sXHJcblx0XHRcdFx0XHRcdFx0Y2lyY2xlUmFkaXVzID0gY29vcmRzWzJdLFxyXG5cdFx0XHRcdFx0XHRcdGFyZWFUb3BPZmZzZXQgPSBjaXJjbGVDZW50ZXJUb3AgLSBjaXJjbGVSYWRpdXMsXHJcblx0XHRcdFx0XHRcdFx0YXJlYUxlZnRPZmZzZXQgPSBjaXJjbGVDZW50ZXJMZWZ0IC0gY2lyY2xlUmFkaXVzO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi5zaXplLmhlaWdodCA9IGNpcmNsZVJhZGl1cyAqIDI7XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4uc2l6ZS53aWR0aCA9IGdlby5vcmlnaW4uc2l6ZS5oZWlnaHQ7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICs9IGFyZWFMZWZ0T2Zmc2V0O1xyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKz0gYXJlYVRvcE9mZnNldDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjYXNlICdyZWN0JzpcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHZhciBhcmVhTGVmdCA9IGNvb3Jkc1swXSxcclxuXHRcdFx0XHRcdFx0XHRhcmVhVG9wID0gY29vcmRzWzFdLFxyXG5cdFx0XHRcdFx0XHRcdGFyZWFSaWdodCA9IGNvb3Jkc1syXSxcclxuXHRcdFx0XHRcdFx0XHRhcmVhQm90dG9tID0gY29vcmRzWzNdO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi5zaXplLmhlaWdodCA9IGFyZWFCb3R0b20gLSBhcmVhVG9wO1xyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLnNpemUud2lkdGggPSBhcmVhUmlnaHQgLSBhcmVhTGVmdDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKz0gYXJlYUxlZnQ7XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArPSBhcmVhVG9wO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNhc2UgJ3BvbHknOlxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dmFyIGFyZWFTbWFsbGVzdFggPSAwLFxyXG5cdFx0XHRcdFx0XHRcdGFyZWFTbWFsbGVzdFkgPSAwLFxyXG5cdFx0XHRcdFx0XHRcdGFyZWFHcmVhdGVzdFggPSAwLFxyXG5cdFx0XHRcdFx0XHRcdGFyZWFHcmVhdGVzdFkgPSAwLFxyXG5cdFx0XHRcdFx0XHRcdGFycmF5QWx0ZXJuYXRlID0gJ2V2ZW4nO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHR2YXIgYXJlYU51bWJlciA9IGNvb3Jkc1tpXTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRpZiAoYXJyYXlBbHRlcm5hdGUgPT0gJ2V2ZW4nKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChhcmVhTnVtYmVyID4gYXJlYUdyZWF0ZXN0WCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0YXJlYUdyZWF0ZXN0WCA9IGFyZWFOdW1iZXI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaSA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFyZWFTbWFsbGVzdFggPSBhcmVhR3JlYXRlc3RYO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChhcmVhTnVtYmVyIDwgYXJlYVNtYWxsZXN0WCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhcmVhU21hbGxlc3RYID0gYXJlYU51bWJlcjtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlBbHRlcm5hdGUgPSAnb2RkJztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoYXJlYU51bWJlciA+IGFyZWFHcmVhdGVzdFkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGFyZWFHcmVhdGVzdFkgPSBhcmVhTnVtYmVyO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGkgPT0gMSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFyZWFTbWFsbGVzdFkgPSBhcmVhR3JlYXRlc3RZO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChhcmVhTnVtYmVyIDwgYXJlYVNtYWxsZXN0WSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhcmVhU21hbGxlc3RZID0gYXJlYU51bWJlcjtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0YXJyYXlBbHRlcm5hdGUgPSAnZXZlbic7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLnNpemUuaGVpZ2h0ID0gYXJlYUdyZWF0ZXN0WSAtIGFyZWFTbWFsbGVzdFk7XHJcblx0XHRcdFx0XHRcdGdlby5vcmlnaW4uc2l6ZS53aWR0aCA9IGFyZWFHcmVhdGVzdFggLSBhcmVhU21hbGxlc3RYO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArPSBhcmVhU21hbGxlc3RYO1xyXG5cdFx0XHRcdFx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKz0gYXJlYVNtYWxsZXN0WTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyB1c2VyIGNhbGxiYWNrIHRocm91Z2ggYW4gZXZlbnRcclxuXHRcdHZhciBlZGl0ID0gZnVuY3Rpb24ocikge1xyXG5cdFx0XHRnZW8ub3JpZ2luLnNpemUuaGVpZ2h0ID0gci5oZWlnaHQsXHJcblx0XHRcdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCA9IHIubGVmdCxcclxuXHRcdFx0XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgPSByLnRvcCxcclxuXHRcdFx0XHRnZW8ub3JpZ2luLnNpemUud2lkdGggPSByLndpZHRoXHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0dHlwZTogJ2dlb21ldHJ5JyxcclxuXHRcdFx0ZWRpdDogZWRpdCxcclxuXHRcdFx0Z2VvbWV0cnk6IHtcclxuXHRcdFx0XHRoZWlnaHQ6IGdlby5vcmlnaW4uc2l6ZS5oZWlnaHQsXHJcblx0XHRcdFx0bGVmdDogZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCxcclxuXHRcdFx0XHR0b3A6IGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCxcclxuXHRcdFx0XHR3aWR0aDogZ2VvLm9yaWdpbi5zaXplLndpZHRoXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBjYWxjdWxhdGUgdGhlIHJlbWFpbmluZyBwcm9wZXJ0aWVzIHdpdGggd2hhdCB3ZSBnb3RcclxuXHRcdFxyXG5cdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgPSBnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgZ2VvLm9yaWdpbi5zaXplLndpZHRoO1xyXG5cdFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tID0gZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgZ2VvLm9yaWdpbi5zaXplLmhlaWdodDtcclxuXHRcdFxyXG5cdFx0Z2VvLm9yaWdpbi5vZmZzZXQubGVmdCA9IGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyBnZW8ud2luZG93LnNjcm9sbC5sZWZ0O1xyXG5cdFx0Z2VvLm9yaWdpbi5vZmZzZXQudG9wID0gZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgZ2VvLndpbmRvdy5zY3JvbGwudG9wO1xyXG5cdFx0Z2VvLm9yaWdpbi5vZmZzZXQuYm90dG9tID0gZ2VvLm9yaWdpbi5vZmZzZXQudG9wICsgZ2VvLm9yaWdpbi5zaXplLmhlaWdodDtcclxuXHRcdGdlby5vcmlnaW4ub2Zmc2V0LnJpZ2h0ID0gZ2VvLm9yaWdpbi5vZmZzZXQubGVmdCArIGdlby5vcmlnaW4uc2l6ZS53aWR0aDtcclxuXHRcdFxyXG5cdFx0Ly8gdGhlIHNwYWNlIHRoYXQgaXMgYXZhaWxhYmxlIHRvIGRpc3BsYXkgdGhlIHRvb2x0aXAgcmVsYXRpdmVseSB0byB0aGUgZG9jdW1lbnRcclxuXHRcdGdlby5hdmFpbGFibGUuZG9jdW1lbnQgPSB7XHJcblx0XHRcdGJvdHRvbToge1xyXG5cdFx0XHRcdGhlaWdodDogZ2VvLmRvY3VtZW50LnNpemUuaGVpZ2h0IC0gZ2VvLm9yaWdpbi5vZmZzZXQuYm90dG9tLFxyXG5cdFx0XHRcdHdpZHRoOiBnZW8uZG9jdW1lbnQuc2l6ZS53aWR0aFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRsZWZ0OiB7XHJcblx0XHRcdFx0aGVpZ2h0OiBnZW8uZG9jdW1lbnQuc2l6ZS5oZWlnaHQsXHJcblx0XHRcdFx0d2lkdGg6IGdlby5vcmlnaW4ub2Zmc2V0LmxlZnRcclxuXHRcdFx0fSxcclxuXHRcdFx0cmlnaHQ6IHtcclxuXHRcdFx0XHRoZWlnaHQ6IGdlby5kb2N1bWVudC5zaXplLmhlaWdodCxcclxuXHRcdFx0XHR3aWR0aDogZ2VvLmRvY3VtZW50LnNpemUud2lkdGggLSBnZW8ub3JpZ2luLm9mZnNldC5yaWdodFxyXG5cdFx0XHR9LFxyXG5cdFx0XHR0b3A6IHtcclxuXHRcdFx0XHRoZWlnaHQ6IGdlby5vcmlnaW4ub2Zmc2V0LnRvcCxcclxuXHRcdFx0XHR3aWR0aDogZ2VvLmRvY3VtZW50LnNpemUud2lkdGhcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0Ly8gdGhlIHNwYWNlIHRoYXQgaXMgYXZhaWxhYmxlIHRvIGRpc3BsYXkgdGhlIHRvb2x0aXAgcmVsYXRpdmVseSB0byB0aGUgdmlld3BvcnRcclxuXHRcdC8vICh0aGUgcmVzdWx0aW5nIHZhbHVlcyBtYXkgYmUgbmVnYXRpdmUgaWYgdGhlIG9yaWdpbiBvdmVyZmxvd3MgdGhlIHZpZXdwb3J0KVxyXG5cdFx0Z2VvLmF2YWlsYWJsZS53aW5kb3cgPSB7XHJcblx0XHRcdGJvdHRvbToge1xyXG5cdFx0XHRcdC8vIHRoZSBpbm5lciBtYXggaXMgaGVyZSB0byBtYWtlIHN1cmUgdGhlIGF2YWlsYWJsZSBoZWlnaHQgaXMgbm8gYmlnZ2VyXHJcblx0XHRcdFx0Ly8gdGhhbiB0aGUgdmlld3BvcnQgaGVpZ2h0ICh3aGVuIHRoZSBvcmlnaW4gaXMgb2ZmIHNjcmVlbiBhdCB0aGUgdG9wKS5cclxuXHRcdFx0XHQvLyBUaGUgb3V0ZXIgbWF4IGp1c3QgbWFrZXMgc3VyZSB0aGF0IHRoZSBoZWlnaHQgaXMgbm90IG5lZ2F0aXZlICh3aGVuXHJcblx0XHRcdFx0Ly8gdGhlIG9yaWdpbiBvdmVyZmxvd3MgYXQgdGhlIGJvdHRvbSkuXHJcblx0XHRcdFx0aGVpZ2h0OiBNYXRoLm1heChnZW8ud2luZG93LnNpemUuaGVpZ2h0IC0gTWF0aC5tYXgoZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tLCAwKSwgMCksXHJcblx0XHRcdFx0d2lkdGg6IGdlby53aW5kb3cuc2l6ZS53aWR0aFxyXG5cdFx0XHR9LFxyXG5cdFx0XHRsZWZ0OiB7XHJcblx0XHRcdFx0aGVpZ2h0OiBnZW8ud2luZG93LnNpemUuaGVpZ2h0LFxyXG5cdFx0XHRcdHdpZHRoOiBNYXRoLm1heChnZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0LCAwKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRyaWdodDoge1xyXG5cdFx0XHRcdGhlaWdodDogZ2VvLndpbmRvdy5zaXplLmhlaWdodCxcclxuXHRcdFx0XHR3aWR0aDogTWF0aC5tYXgoZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gTWF0aC5tYXgoZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQsIDApLCAwKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHR0b3A6IHtcclxuXHRcdFx0XHRoZWlnaHQ6IE1hdGgubWF4KGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCwgMCksXHJcblx0XHRcdFx0d2lkdGg6IGdlby53aW5kb3cuc2l6ZS53aWR0aFxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHR3aGlsZSAoJHBhcmVudFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT0gJ2h0bWwnKSB7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoJHBhcmVudC5jc3MoJ3Bvc2l0aW9uJykgPT0gJ2ZpeGVkJykge1xyXG5cdFx0XHRcdGdlby5vcmlnaW4uZml4ZWRMaW5lYWdlID0gdHJ1ZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0JHBhcmVudCA9ICRwYXJlbnQucGFyZW50KCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBnZW87XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBTb21lIG9wdGlvbnMgbWF5IG5lZWQgdG8gYmUgZm9ybWF0ZWQgYmVmb3JlIGJlaW5nIHVzZWRcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fb3B0aW9uc0Zvcm1hdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdGlmICh0eXBlb2YgdGhpcy5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24gPT0gJ251bWJlcicpIHtcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24gPSBbdGhpcy5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24sIHRoaXMuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uXTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9fb3B0aW9ucy5kZWxheSA9PSAnbnVtYmVyJykge1xyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy5kZWxheSA9IFt0aGlzLl9fb3B0aW9ucy5kZWxheSwgdGhpcy5fX29wdGlvbnMuZGVsYXldO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAodHlwZW9mIHRoaXMuX19vcHRpb25zLmRlbGF5VG91Y2ggPT0gJ251bWJlcicpIHtcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMuZGVsYXlUb3VjaCA9IFt0aGlzLl9fb3B0aW9ucy5kZWxheVRvdWNoLCB0aGlzLl9fb3B0aW9ucy5kZWxheVRvdWNoXTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKHR5cGVvZiB0aGlzLl9fb3B0aW9ucy50aGVtZSA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy50aGVtZSA9IFt0aGlzLl9fb3B0aW9ucy50aGVtZV07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIGRldGVybWluZSB0aGUgZnV0dXJlIHBhcmVudFxyXG5cdFx0aWYgKHRoaXMuX19vcHRpb25zLnBhcmVudCA9PT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy5wYXJlbnQgPSAkKGVudi53aW5kb3cuZG9jdW1lbnQuYm9keSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0eXBlb2YgdGhpcy5fX29wdGlvbnMucGFyZW50ID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLnBhcmVudCA9ICQodGhpcy5fX29wdGlvbnMucGFyZW50KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMuX19vcHRpb25zLnRyaWdnZXIgPT0gJ2hvdmVyJykge1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMudHJpZ2dlck9wZW4gPSB7XHJcblx0XHRcdFx0bW91c2VlbnRlcjogdHJ1ZSxcclxuXHRcdFx0XHR0b3VjaHN0YXJ0OiB0cnVlXHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UgPSB7XHJcblx0XHRcdFx0bW91c2VsZWF2ZTogdHJ1ZSxcclxuXHRcdFx0XHRvcmlnaW5DbGljazogdHJ1ZSxcclxuXHRcdFx0XHR0b3VjaGxlYXZlOiB0cnVlXHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0aGlzLl9fb3B0aW9ucy50cmlnZ2VyID09ICdjbGljaycpIHtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuX19vcHRpb25zLnRyaWdnZXJPcGVuID0ge1xyXG5cdFx0XHRcdGNsaWNrOiB0cnVlLFxyXG5cdFx0XHRcdHRhcDogdHJ1ZVxyXG5cdFx0XHR9O1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5fX29wdGlvbnMudHJpZ2dlckNsb3NlID0ge1xyXG5cdFx0XHRcdGNsaWNrOiB0cnVlLFxyXG5cdFx0XHRcdHRhcDogdHJ1ZVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBmb3IgdGhlIHBsdWdpbnNcclxuXHRcdHRoaXMuX3RyaWdnZXIoJ29wdGlvbnMnKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBTY2hlZHVsZXMgb3IgY2FuY2VscyB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IgdGFza1xyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX3ByZXBhcmVHQzogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0Ly8gaW4gY2FzZSB0aGUgc2VsZkRlc3RydWN0aW9uIG9wdGlvbiBoYXMgYmVlbiBjaGFuZ2VkIGJ5IGEgbWV0aG9kIGNhbGxcclxuXHRcdGlmIChzZWxmLl9fb3B0aW9ucy5zZWxmRGVzdHJ1Y3Rpb24pIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHRoZSBHQyB0YXNrXHJcblx0XHRcdHNlbGYuX19nYXJiYWdlQ29sbGVjdG9yID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGZvcmdldCB0aGUgb2xkIGV2ZW50c1xyXG5cdFx0XHRcdHNlbGYuX190b3VjaEV2ZW50cyA9ICQuZ3JlcChzZWxmLl9fdG91Y2hFdmVudHMsIGZ1bmN0aW9uKGV2ZW50LCBpKSB7XHJcblx0XHRcdFx0XHQvLyAxIG1pbnV0ZVxyXG5cdFx0XHRcdFx0cmV0dXJuIG5vdyAtIGV2ZW50LnRpbWUgPiA2MDAwMDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBhdXRvLWRlc3RydWN0IGlmIHRoZSBvcmlnaW4gaXMgZ29uZVxyXG5cdFx0XHRcdGlmICghYm9keUNvbnRhaW5zKHNlbGYuXyRvcmlnaW4pKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0c2VsZi5kZXN0cm95KCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIDIwMDAwKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjbGVhckludGVydmFsKHNlbGYuX19nYXJiYWdlQ29sbGVjdG9yKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBTZXRzIGxpc3RlbmVycyBvbiB0aGUgb3JpZ2luIGlmIHRoZSBvcGVuIHRyaWdnZXJzIHJlcXVpcmUgdGhlbS5cclxuXHQgKiBVbmxpa2UgdGhlIGxpc3RlbmVycyBzZXQgYXQgb3BlbmluZyB0aW1lLCB0aGVzZSBvbmVzXHJcblx0ICogcmVtYWluIGV2ZW4gd2hlbiB0aGUgdG9vbHRpcCBpcyBjbG9zZWQuIEl0IGhhcyBiZWVuIG1hZGUgYVxyXG5cdCAqIHNlcGFyYXRlIG1ldGhvZCBzbyBpdCBjYW4gYmUgY2FsbGVkIHdoZW4gdGhlIHRyaWdnZXJzIGFyZVxyXG5cdCAqIGNoYW5nZWQgaW4gdGhlIG9wdGlvbnMuIENsb3NpbmcgaXMgaGFuZGxlZCBpbiBfb3BlbigpXHJcblx0ICogYmVjYXVzZSBvZiB0aGUgYmluZGluZ3MgdGhhdCBtYXkgYmUgbmVlZGVkIG9uIHRoZSB0b29sdGlwXHJcblx0ICogaXRzZWxmXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9fcHJlcGFyZU9yaWdpbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0Ly8gaW4gY2FzZSB3ZSdyZSByZXNldHRpbmcgdGhlIHRyaWdnZXJzXHJcblx0XHRzZWxmLl8kb3JpZ2luLm9mZignLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4nKTtcclxuXHRcdFxyXG5cdFx0Ly8gaWYgdGhlIGRldmljZSBpcyB0b3VjaCBjYXBhYmxlLCBldmVuIGlmIG9ubHkgbW91c2UgdHJpZ2dlcnNcclxuXHRcdC8vIGFyZSBhc2tlZCwgd2UgbmVlZCB0byBsaXN0ZW4gdG8gdG91Y2ggZXZlbnRzIHRvIGtub3cgaWYgdGhlIG1vdXNlXHJcblx0XHQvLyBldmVudHMgYXJlIGFjdHVhbGx5IGVtdWxhdGVkIChzbyB3ZSBjYW4gaWdub3JlIHRoZW0pXHJcblx0XHRpZiAoZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSkge1xyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fJG9yaWdpbi5vbihcclxuXHRcdFx0XHQndG91Y2hzdGFydC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuICcgK1xyXG5cdFx0XHRcdCd0b3VjaGVuZC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuICcgK1xyXG5cdFx0XHRcdCd0b3VjaGNhbmNlbC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuJyxcclxuXHRcdFx0XHRmdW5jdGlvbihldmVudCl7XHJcblx0XHRcdFx0XHRzZWxmLl90b3VjaFJlY29yZEV2ZW50KGV2ZW50KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIG1vdXNlIGNsaWNrIGFuZCB0b3VjaCB0YXAgd29yayB0aGUgc2FtZSB3YXlcclxuXHRcdGlmIChcdHNlbGYuX19vcHRpb25zLnRyaWdnZXJPcGVuLmNsaWNrXHJcblx0XHRcdHx8XHQoc2VsZi5fX29wdGlvbnMudHJpZ2dlck9wZW4udGFwICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpXHJcblx0XHQpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBldmVudE5hbWVzID0gJyc7XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi5jbGljaykge1xyXG5cdFx0XHRcdGV2ZW50TmFtZXMgKz0gJ2NsaWNrLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4gJztcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlck9wZW4udGFwICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpIHtcclxuXHRcdFx0XHRldmVudE5hbWVzICs9ICd0b3VjaGVuZC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuJztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fJG9yaWdpbi5vbihldmVudE5hbWVzLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdGlmIChzZWxmLl90b3VjaElzTWVhbmluZ2Z1bEV2ZW50KGV2ZW50KSkge1xyXG5cdFx0XHRcdFx0c2VsZi5fb3BlbihldmVudCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gbW91c2VlbnRlciBhbmQgdG91Y2ggc3RhcnQgd29yayB0aGUgc2FtZSB3YXlcclxuXHRcdGlmIChcdHNlbGYuX19vcHRpb25zLnRyaWdnZXJPcGVuLm1vdXNlZW50ZXJcclxuXHRcdFx0fHxcdChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi50b3VjaHN0YXJ0ICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpXHJcblx0XHQpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBldmVudE5hbWVzID0gJyc7XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyT3Blbi5tb3VzZWVudGVyKSB7XHJcblx0XHRcdFx0ZXZlbnROYW1lcyArPSAnbW91c2VlbnRlci4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuICc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJPcGVuLnRvdWNoc3RhcnQgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSkge1xyXG5cdFx0XHRcdGV2ZW50TmFtZXMgKz0gJ3RvdWNoc3RhcnQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3Blbic7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuXyRvcmlnaW4ub24oZXZlbnROYW1lcywgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRpZiAoXHRzZWxmLl90b3VjaElzVG91Y2hFdmVudChldmVudClcclxuXHRcdFx0XHRcdHx8XHQhc2VsZi5fdG91Y2hJc0VtdWxhdGVkRXZlbnQoZXZlbnQpXHJcblx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fcG9pbnRlcklzT3Zlck9yaWdpbiA9IHRydWU7XHJcblx0XHRcdFx0XHRzZWxmLl9vcGVuU2hvcnRseShldmVudCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gaW5mbyBmb3IgdGhlIG1vdXNlbGVhdmUvdG91Y2hsZWF2ZSBjbG9zZSB0cmlnZ2VycyB3aGVuIHRoZXkgdXNlIGEgZGVsYXlcclxuXHRcdGlmIChcdHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5tb3VzZWxlYXZlXHJcblx0XHRcdHx8XHQoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRvdWNobGVhdmUgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSlcclxuXHRcdCkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGV2ZW50TmFtZXMgPSAnJztcclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5tb3VzZWxlYXZlKSB7XHJcblx0XHRcdFx0ZXZlbnROYW1lcyArPSAnbW91c2VsZWF2ZS4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuICc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50b3VjaGxlYXZlICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpIHtcclxuXHRcdFx0XHRldmVudE5hbWVzICs9ICd0b3VjaGVuZC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuIHRvdWNoY2FuY2VsLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlck9wZW4nO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl8kb3JpZ2luLm9uKGV2ZW50TmFtZXMsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHNlbGYuX3RvdWNoSXNNZWFuaW5nZnVsRXZlbnQoZXZlbnQpKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fcG9pbnRlcklzT3Zlck9yaWdpbiA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRG8gdGhlIHRoaW5ncyB0aGF0IG5lZWQgdG8gYmUgZG9uZSBvbmx5IG9uY2UgYWZ0ZXIgdGhlIHRvb2x0aXBcclxuXHQgKiBIVE1MIGVsZW1lbnQgaXQgaGFzIGJlZW4gY3JlYXRlZC4gSXQgaGFzIGJlZW4gbWFkZSBhIHNlcGFyYXRlXHJcblx0ICogbWV0aG9kIHNvIGl0IGNhbiBiZSBjYWxsZWQgd2hlbiBvcHRpb25zIGFyZSBjaGFuZ2VkLiBSZW1lbWJlclxyXG5cdCAqIHRoYXQgdGhlIHRvb2x0aXAgbWF5IGFjdHVhbGx5IGV4aXN0IGluIHRoZSBET00gYmVmb3JlIGl0IGlzXHJcblx0ICogb3BlbmVkLCBhbmQgcHJlc2VudCBhZnRlciBpdCBoYXMgYmVlbiBjbG9zZWQ6IGl0J3MgdGhlIGRpc3BsYXlcclxuXHQgKiBwbHVnaW4gdGhhdCB0YWtlcyBjYXJlIG9mIGhhbmRsaW5nIGl0LlxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19wcmVwYXJlVG9vbHRpcDogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0cCA9IHNlbGYuX19vcHRpb25zLmludGVyYWN0aXZlID8gJ2F1dG8nIDogJyc7XHJcblx0XHRcclxuXHRcdC8vIHRoaXMgd2lsbCBiZSB1c2VmdWwgdG8ga25vdyBxdWlja2x5IGlmIHRoZSB0b29sdGlwIGlzIGluXHJcblx0XHQvLyB0aGUgRE9NIG9yIG5vdCBcclxuXHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdC5hdHRyKCdpZCcsIHNlbGYuX19uYW1lc3BhY2UpXHJcblx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdC8vIHBvaW50ZXIgZXZlbnRzXHJcblx0XHRcdFx0J3BvaW50ZXItZXZlbnRzJzogcCxcclxuXHRcdFx0XHR6SW5kZXg6IHNlbGYuX19vcHRpb25zLnpJbmRleFxyXG5cdFx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gdGhlbWVzXHJcblx0XHQvLyByZW1vdmUgdGhlIG9sZCBvbmVzIGFuZCBhZGQgdGhlIG5ldyBvbmVzXHJcblx0XHQkLmVhY2goc2VsZi5fX3ByZXZpb3VzVGhlbWVzLCBmdW5jdGlvbihpLCB0aGVtZSkge1xyXG5cdFx0XHRzZWxmLl8kdG9vbHRpcC5yZW1vdmVDbGFzcyh0aGVtZSk7XHJcblx0XHR9KTtcclxuXHRcdCQuZWFjaChzZWxmLl9fb3B0aW9ucy50aGVtZSwgZnVuY3Rpb24oaSwgdGhlbWUpIHtcclxuXHRcdFx0c2VsZi5fJHRvb2x0aXAuYWRkQ2xhc3ModGhlbWUpO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHNlbGYuX19wcmV2aW91c1RoZW1lcyA9ICQubWVyZ2UoW10sIHNlbGYuX19vcHRpb25zLnRoZW1lKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHRoZSBzY3JvbGwgb24gYW55IG9mIHRoZSBwYXJlbnRzIG9mIHRoZSBvcmlnaW4gKHdoZW4gdGhlXHJcblx0ICogdG9vbHRpcCBpcyBvcGVuKVxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtvYmplY3R9IGV2ZW50XHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX3Njcm9sbEhhbmRsZXI6IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5zY3JvbGwpIHtcclxuXHRcdFx0c2VsZi5fY2xvc2UoZXZlbnQpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGUgb3JpZ2luIG9yIHRvb2x0aXAgaGF2ZSBiZWVuIHJlbW92ZWQ6IGRvIG5vdGhpbmcsIHRoZSB0cmFja2VyIHdpbGxcclxuXHRcdFx0Ly8gdGFrZSBjYXJlIG9mIGl0IGxhdGVyXHJcblx0XHRcdGlmIChib2R5Q29udGFpbnMoc2VsZi5fJG9yaWdpbikgJiYgYm9keUNvbnRhaW5zKHNlbGYuXyR0b29sdGlwKSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBnZW8gPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmIHRoZSBzY3JvbGwgaGFwcGVuZWQgb24gdGhlIHdpbmRvd1xyXG5cdFx0XHRcdGlmIChldmVudC50YXJnZXQgPT09IGVudi53aW5kb3cuZG9jdW1lbnQpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gaWYgdGhlIG9yaWdpbiBoYXMgYSBmaXhlZCBsaW5lYWdlLCB3aW5kb3cgc2Nyb2xsIHdpbGwgaGF2ZSBub1xyXG5cdFx0XHRcdFx0Ly8gZWZmZWN0IG9uIGl0cyBwb3NpdGlvbiBub3Igb24gdGhlIHBvc2l0aW9uIG9mIHRoZSB0b29sdGlwXHJcblx0XHRcdFx0XHRpZiAoIXNlbGYuX19HZW9tZXRyeS5vcmlnaW4uZml4ZWRMaW5lYWdlKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nIHVubGVzcyByZXBvc2l0aW9uT25TY3JvbGwgaXMgdHJ1ZVxyXG5cdFx0XHRcdFx0XHQvLyBiZWNhdXNlIHRoZSB0b29sdGlwIHdpbGwgYWxyZWFkeSBoYXZlIG1vdmVkIHdpdGggdGhlIHdpbmRvd1xyXG5cdFx0XHRcdFx0XHQvLyAoYW5kIG9mIGNvdXJzZSB3aXRoIHRoZSBvcmlnaW4pXHJcblx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5yZXBvc2l0aW9uT25TY3JvbGwpIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLnJlcG9zaXRpb24oZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIGlmIHRoZSBzY3JvbGwgaGFwcGVuZWQgb24gYW5vdGhlciBwYXJlbnQgb2YgdGhlIHRvb2x0aXAsIGl0IG1lYW5zXHJcblx0XHRcdFx0Ly8gdGhhdCBpdCdzIGluIGEgc2Nyb2xsYWJsZSBhcmVhIGFuZCBub3cgbmVlZHMgdG8gaGF2ZSBpdHMgcG9zaXRpb25cclxuXHRcdFx0XHQvLyBhZGp1c3RlZCBvciByZWNvbXB1dGVkLCBkZXBlbmRpbmcgb250IHRoZSByZXBvc2l0aW9uT25TY3JvbGxcclxuXHRcdFx0XHQvLyBvcHRpb24uIEFsc28sIGlmIHRoZSBvcmlnaW4gaXMgcGFydGx5IGhpZGRlbiBkdWUgdG8gYSBwYXJlbnQgdGhhdFxyXG5cdFx0XHRcdC8vIGhpZGVzIGl0cyBvdmVyZmxvdywgd2UnbGwganVzdCBoaWRlIChub3QgY2xvc2UpIHRoZSB0b29sdGlwLlxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRnZW8gPSBzZWxmLl9fZ2VvbWV0cnkoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIG92ZXJmbG93cyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBhIGZpeGVkIHBvc2l0aW9uIG9yaWdpbiBpcyBub3QgYWZmZWN0ZWQgYnkgdGhlIG92ZXJmbG93IGhpZGluZ1xyXG5cdFx0XHRcdFx0Ly8gb2YgYSBwYXJlbnRcclxuXHRcdFx0XHRcdGlmIChzZWxmLl8kb3JpZ2luLmNzcygncG9zaXRpb24nKSAhPSAnZml4ZWQnKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl9fJG9yaWdpblBhcmVudHMuZWFjaChmdW5jdGlvbihpLCBlbCkge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHZhciAkZWwgPSAkKGVsKSxcclxuXHRcdFx0XHRcdFx0XHRcdG92ZXJmbG93WCA9ICRlbC5jc3MoJ292ZXJmbG93LXgnKSxcclxuXHRcdFx0XHRcdFx0XHRcdG92ZXJmbG93WSA9ICRlbC5jc3MoJ292ZXJmbG93LXknKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRpZiAob3ZlcmZsb3dYICE9ICd2aXNpYmxlJyB8fCBvdmVyZmxvd1kgIT0gJ3Zpc2libGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHZhciBiY3IgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG92ZXJmbG93WCAhPSAndmlzaWJsZScpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChcdGdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgPCBiY3IubGVmdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHx8XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5yaWdodCA+IGJjci5yaWdodFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRvdmVyZmxvd3MgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAob3ZlcmZsb3dZICE9ICd2aXNpYmxlJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKFx0Z2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wIDwgYmNyLnRvcFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHx8XHRnZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gPiBiY3IuYm90dG9tXHJcblx0XHRcdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG92ZXJmbG93cyA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIG5vIG5lZWQgdG8gZ28gZnVydGhlciBpZiBmaXhlZCwgZm9yIHRoZSBzYW1lIHJlYXNvbiBhcyBhYm92ZVxyXG5cdFx0XHRcdFx0XHRcdGlmICgkZWwuY3NzKCdwb3NpdGlvbicpID09ICdmaXhlZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAob3ZlcmZsb3dzKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHJlcG9zaXRpb25cclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnJlcG9zaXRpb25PblNjcm9sbCkge1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYucmVwb3NpdGlvbihldmVudCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Ly8gb3IganVzdCBhZGp1c3Qgb2Zmc2V0XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIHdlIGhhdmUgdG8gdXNlIG9mZnNldCBhbmQgbm90IHdpbmRvd09mZnNldCBiZWNhdXNlIHRoaXMgd2F5LFxyXG5cdFx0XHRcdFx0XHRcdC8vIG9ubHkgdGhlIHNjcm9sbCBkaXN0YW5jZSBvZiB0aGUgc2Nyb2xsYWJsZSBhcmVhcyBhcmUgdGFrZW4gaW50b1xyXG5cdFx0XHRcdFx0XHRcdC8vIGFjY291bnQgKHRoZSBzY3JvbGx0b3AgdmFsdWUgb2YgdGhlIG1haW4gd2luZG93IG11c3QgYmVcclxuXHRcdFx0XHRcdFx0XHQvLyBpZ25vcmVkIHNpbmNlIHRoZSB0b29sdGlwIGFscmVhZHkgbW92ZXMgd2l0aCBpdClcclxuXHRcdFx0XHRcdFx0XHR2YXIgb2Zmc2V0TGVmdCA9IGdlby5vcmlnaW4ub2Zmc2V0LmxlZnQgLSBzZWxmLl9fR2VvbWV0cnkub3JpZ2luLm9mZnNldC5sZWZ0LFxyXG5cdFx0XHRcdFx0XHRcdFx0b2Zmc2V0VG9wID0gZ2VvLm9yaWdpbi5vZmZzZXQudG9wIC0gc2VsZi5fX0dlb21ldHJ5Lm9yaWdpbi5vZmZzZXQudG9wO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGFkZCB0aGUgb2Zmc2V0IHRvIHRoZSBwb3NpdGlvbiBpbml0aWFsbHkgY29tcHV0ZWQgYnkgdGhlIGRpc3BsYXkgcGx1Z2luXHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuY3NzKHtcclxuXHRcdFx0XHRcdFx0XHRcdGxlZnQ6IHNlbGYuX19sYXN0UG9zaXRpb24uY29vcmQubGVmdCArIG9mZnNldExlZnQsXHJcblx0XHRcdFx0XHRcdFx0XHR0b3A6IHNlbGYuX19sYXN0UG9zaXRpb24uY29vcmQudG9wICsgb2Zmc2V0VG9wXHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHR0eXBlOiAnc2Nyb2xsJyxcclxuXHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdGdlbzogZ2VvXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBDaGFuZ2VzIHRoZSBzdGF0ZSBvZiB0aGUgdG9vbHRpcFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHN0YXRlXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX3N0YXRlU2V0OiBmdW5jdGlvbihzdGF0ZSkge1xyXG5cdFx0XHJcblx0XHR0aGlzLl9fc3RhdGUgPSBzdGF0ZTtcclxuXHRcdFxyXG5cdFx0dGhpcy5fdHJpZ2dlcih7XHJcblx0XHRcdHR5cGU6ICdzdGF0ZScsXHJcblx0XHRcdHN0YXRlOiBzdGF0ZVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQ2xlYXIgYXBwZWFyYW5jZSB0aW1lb3V0c1xyXG5cdCAqXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX3RpbWVvdXRzQ2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHQvLyB0aGVyZSBpcyBvbmx5IG9uZSBwb3NzaWJsZSBvcGVuIHRpbWVvdXQ6IHRoZSBkZWxheWVkIG9wZW5pbmdcclxuXHRcdC8vIHdoZW4gdGhlIG1vdXNlZW50ZXIvdG91Y2hzdGFydCBvcGVuIHRyaWdnZXJzIGFyZSB1c2VkXHJcblx0XHRjbGVhclRpbWVvdXQodGhpcy5fX3RpbWVvdXRzLm9wZW4pO1xyXG5cdFx0dGhpcy5fX3RpbWVvdXRzLm9wZW4gPSBudWxsO1xyXG5cdFx0XHJcblx0XHQvLyAuLi4gYnV0IHNldmVyYWwgY2xvc2UgdGltZW91dHM6IHRoZSBkZWxheWVkIGNsb3Npbmcgd2hlbiB0aGVcclxuXHRcdC8vIG1vdXNlbGVhdmUgY2xvc2UgdHJpZ2dlciBpcyB1c2VkIGFuZCB0aGUgdGltZXIgb3B0aW9uXHJcblx0XHQkLmVhY2godGhpcy5fX3RpbWVvdXRzLmNsb3NlLCBmdW5jdGlvbihpLCB0aW1lb3V0KSB7XHJcblx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5fX3RpbWVvdXRzLmNsb3NlID0gW107XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogU3RhcnQgdGhlIHRyYWNrZXIgdGhhdCB3aWxsIG1ha2UgY2hlY2tzIGF0IHJlZ3VsYXIgaW50ZXJ2YWxzXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRfX3RyYWNrZXJTdGFydDogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0JGNvbnRlbnQgPSBzZWxmLl8kdG9vbHRpcC5maW5kKCcudG9vbHRpcHN0ZXItY29udGVudCcpO1xyXG5cdFx0XHJcblx0XHQvLyBnZXQgdGhlIGluaXRpYWwgY29udGVudCBzaXplXHJcblx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJhY2tUb29sdGlwKSB7XHJcblx0XHRcdHNlbGYuX19jb250ZW50QmNyID0gJGNvbnRlbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHNlbGYuX190cmFja2VyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBpZiB0aGUgb3JpZ2luIG9yIHRvb2x0aXAgZWxlbWVudHMgaGF2ZSBiZWVuIHJlbW92ZWQuXHJcblx0XHRcdC8vIE5vdGU6IHdlIGNvdWxkIGRlc3Ryb3kgdGhlIGluc3RhbmNlIG5vdyBpZiB0aGUgb3JpZ2luIGhhc1xyXG5cdFx0XHQvLyBiZWVuIHJlbW92ZWQgYnV0IHdlJ2xsIGxlYXZlIHRoYXQgdGFzayB0byBvdXIgZ2FyYmFnZSBjb2xsZWN0b3JcclxuXHRcdFx0aWYgKCFib2R5Q29udGFpbnMoc2VsZi5fJG9yaWdpbikgfHwgIWJvZHlDb250YWlucyhzZWxmLl8kdG9vbHRpcCkpIHtcclxuXHRcdFx0XHRzZWxmLl9jbG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIGlmIGV2ZXJ5dGhpbmcgaXMgYWxyaWdodFxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBjb21wYXJlIHRoZSBmb3JtZXIgYW5kIGN1cnJlbnQgcG9zaXRpb25zIG9mIHRoZSBvcmlnaW4gdG8gcmVwb3NpdGlvblxyXG5cdFx0XHRcdC8vIHRoZSB0b29sdGlwIGlmIG5lZWQgYmVcclxuXHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJhY2tPcmlnaW4pIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIGcgPSBzZWxmLl9fZ2VvbWV0cnkoKSxcclxuXHRcdFx0XHRcdFx0aWRlbnRpY2FsID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGNvbXBhcmUgc2l6ZSBmaXJzdCAoYSBjaGFuZ2UgcmVxdWlyZXMgcmVwb3NpdGlvbmluZyB0b28pXHJcblx0XHRcdFx0XHRpZiAoYXJlRXF1YWwoZy5vcmlnaW4uc2l6ZSwgc2VsZi5fX0dlb21ldHJ5Lm9yaWdpbi5zaXplKSkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIGZpeGVkIGxpbmVhZ2UgKHNlZSBfX2dlb21ldHJ5KCkpLCB3ZSB0cmFjayB0aGVcclxuXHRcdFx0XHRcdFx0Ly8gdG9wIGFuZCBsZWZ0IHByb3BlcnRpZXMgKHJlbGF0aXZlIHRvIHdpbmRvdylcclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19HZW9tZXRyeS5vcmlnaW4uZml4ZWRMaW5lYWdlKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGFyZUVxdWFsKGcub3JpZ2luLndpbmRvd09mZnNldCwgc2VsZi5fX0dlb21ldHJ5Lm9yaWdpbi53aW5kb3dPZmZzZXQpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZGVudGljYWwgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHQvLyBvdGhlcndpc2UsIHRyYWNrIHRvdGFsIG9mZnNldCAocmVsYXRpdmUgdG8gZG9jdW1lbnQpXHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChhcmVFcXVhbChnLm9yaWdpbi5vZmZzZXQsIHNlbGYuX19HZW9tZXRyeS5vcmlnaW4ub2Zmc2V0KSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWRlbnRpY2FsID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKCFpZGVudGljYWwpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGNsb3NlIHRoZSB0b29sdGlwIHdoZW4gdXNpbmcgdGhlIG1vdXNlbGVhdmUgY2xvc2UgdHJpZ2dlclxyXG5cdFx0XHRcdFx0XHQvLyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9pYW1jZWVnZS90b29sdGlwc3Rlci9wdWxsLzI1MylcclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5tb3VzZWxlYXZlKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fY2xvc2UoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLnJlcG9zaXRpb24oKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJhY2tUb29sdGlwKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBjdXJyZW50QmNyID0gJGNvbnRlbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChcdGN1cnJlbnRCY3IuaGVpZ2h0ICE9PSBzZWxmLl9fY29udGVudEJjci5oZWlnaHRcclxuXHRcdFx0XHRcdFx0fHxcdGN1cnJlbnRCY3Iud2lkdGggIT09IHNlbGYuX19jb250ZW50QmNyLndpZHRoXHJcblx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5yZXBvc2l0aW9uKCk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX19jb250ZW50QmNyID0gY3VycmVudEJjcjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sIHNlbGYuX19vcHRpb25zLnRyYWNrZXJJbnRlcnZhbCk7XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQ2xvc2VzIHRoZSB0b29sdGlwIChhZnRlciB0aGUgY2xvc2luZyBkZWxheSlcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0gZXZlbnRcclxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcclxuXHQgKiBAcGFyYW0gZm9yY2UgU2V0IHRvIHRydWUgdG8gb3ZlcnJpZGUgYSBwb3RlbnRpYWwgcmVmdXNhbCBvZiB0aGUgdXNlcidzIGZ1bmN0aW9uXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9jbG9zZTogZnVuY3Rpb24oZXZlbnQsIGNhbGxiYWNrLCBmb3JjZSkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdG9rID0gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdHR5cGU6ICdjbG9zZScsXHJcblx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0c3RvcDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0b2sgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIGEgZGVzdHJveWluZyB0b29sdGlwIChmb3JjZSA9PSB0cnVlKSBtYXkgbm90IHJlZnVzZSB0byBjbG9zZVxyXG5cdFx0aWYgKG9rIHx8IGZvcmNlKSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBzYXZlIHRoZSBtZXRob2QgY3VzdG9tIGNhbGxiYWNrIGFuZCBjYW5jZWwgYW55IG9wZW4gbWV0aG9kIGN1c3RvbSBjYWxsYmFja3NcclxuXHRcdFx0aWYgKGNhbGxiYWNrKSBzZWxmLl9fY2FsbGJhY2tzLmNsb3NlLnB1c2goY2FsbGJhY2spO1xyXG5cdFx0XHRzZWxmLl9fY2FsbGJhY2tzLm9wZW4gPSBbXTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGNsZWFyIG9wZW4vY2xvc2UgdGltZW91dHNcclxuXHRcdFx0c2VsZi5fX3RpbWVvdXRzQ2xlYXIoKTtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBmaW5pc2hDYWxsYmFja3MgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyB0cmlnZ2VyIGFueSBjbG9zZSBtZXRob2QgY3VzdG9tIGNhbGxiYWNrcyBhbmQgcmVzZXQgdGhlbVxyXG5cdFx0XHRcdCQuZWFjaChzZWxmLl9fY2FsbGJhY2tzLmNsb3NlLCBmdW5jdGlvbihpLGMpIHtcclxuXHRcdFx0XHRcdGMuY2FsbChzZWxmLCBzZWxmLCB7XHJcblx0XHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdFx0b3JpZ2luOiBzZWxmLl8kb3JpZ2luWzBdXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzZWxmLl9fY2FsbGJhY2tzLmNsb3NlID0gW107XHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIG5lY2Vzc2FyeSA9IHRydWUsXHJcblx0XHRcdFx0XHRkID0gbmV3IERhdGUoKSxcclxuXHRcdFx0XHRcdG5vdyA9IGQuZ2V0VGltZSgpLFxyXG5cdFx0XHRcdFx0bmV3Q2xvc2luZ1RpbWUgPSBub3cgKyBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyB0aGUgdG9vbHRpcCBtYXkgYWxyZWFkeSBhbHJlYWR5IGJlIGRpc2FwcGVhcmluZywgYnV0IGlmIGEgbmV3XHJcblx0XHRcdFx0Ly8gY2FsbCB0byBjbG9zZSgpIGlzIG1hZGUgYWZ0ZXIgdGhlIGFuaW1hdGlvbkR1cmF0aW9uIHdhcyBjaGFuZ2VkXHJcblx0XHRcdFx0Ly8gdG8gMCAoZm9yIGV4YW1wbGUpLCB3ZSBvdWdodCB0byBhY3R1YWxseSBjbG9zZSBpdCBzb29uZXIgdGhhblxyXG5cdFx0XHRcdC8vIHByZXZpb3VzbHkgc2NoZWR1bGVkLiBJbiB0aGF0IGNhc2UgaXQgc2hvdWxkIGJlIG5vdGVkIHRoYXQgdGhlXHJcblx0XHRcdFx0Ly8gYnJvd3NlciB3aWxsIG5vdCBhZGFwdCB0aGUgYW5pbWF0aW9uIGR1cmF0aW9uIHRvIHRoZSBuZXdcclxuXHRcdFx0XHQvLyBhbmltYXRpb25EdXJhdGlvbiB0aGF0IHdhcyBzZXQgYWZ0ZXIgdGhlIHN0YXJ0IG9mIHRoZSBjbG9zaW5nXHJcblx0XHRcdFx0Ly8gYW5pbWF0aW9uLlxyXG5cdFx0XHRcdC8vIE5vdGU6IHRoZSBzYW1lIHRoaW5nIGNvdWxkIGJlIGNvbnNpZGVyZWQgYXQgb3BlbmluZywgYnV0IGlzIG5vdFxyXG5cdFx0XHRcdC8vIHJlYWxseSB1c2VmdWwgc2luY2UgdGhlIHRvb2x0aXAgaXMgYWN0dWFsbHkgb3BlbmVkIGltbWVkaWF0ZWx5XHJcblx0XHRcdFx0Ly8gdXBvbiBhIGNhbGwgdG8gX29wZW4oKS4gU2luY2UgaXQgd291bGQgbm90IG1ha2UgdGhlIG9wZW5pbmdcclxuXHRcdFx0XHQvLyBhbmltYXRpb24gZmluaXNoIHNvb25lciwgaXRzIHNvbGUgaW1wYWN0IHdvdWxkIGJlIHRvIHRyaWdnZXIgdGhlXHJcblx0XHRcdFx0Ly8gc3RhdGUgZXZlbnQgYW5kIHRoZSBvcGVuIGNhbGxiYWNrcyBzb29uZXIgdGhhbiB0aGUgYWN0dWFsIGVuZCBvZlxyXG5cdFx0XHRcdC8vIHRoZSBvcGVuaW5nIGFuaW1hdGlvbiwgd2hpY2ggaXMgbm90IGdyZWF0LlxyXG5cdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgPT0gJ2Rpc2FwcGVhcmluZycpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKFx0bmV3Q2xvc2luZ1RpbWUgPiBzZWxmLl9fY2xvc2luZ1RpbWVcclxuXHRcdFx0XHRcdFx0Ly8gaW4gY2FzZSBjbG9zaW5nIGlzIGFjdHVhbGx5IG92ZXJkdWUgYmVjYXVzZSB0aGUgc2NyaXB0XHJcblx0XHRcdFx0XHRcdC8vIGV4ZWN1dGlvbiB3YXMgc3VzcGVuZGVkLiBTZWUgIzY3OVxyXG5cdFx0XHRcdFx0XHQmJlx0c2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gPiAwXHJcblx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0bmVjZXNzYXJ5ID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChuZWNlc3NhcnkpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0c2VsZi5fX2Nsb3NpbmdUaW1lID0gbmV3Q2xvc2luZ1RpbWU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ2Rpc2FwcGVhcmluZycpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fX3N0YXRlU2V0KCdkaXNhcHBlYXJpbmcnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIGZpbmlzaCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gc3RvcCB0aGUgdHJhY2tlclxyXG5cdFx0XHRcdFx0XHRjbGVhckludGVydmFsKHNlbGYuX190cmFja2VyKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGEgXCJiZWZvcmVDbG9zZVwiIG9wdGlvbiBoYXMgYmVlbiBhc2tlZCBzZXZlcmFsIHRpbWVzIGJ1dCB3b3VsZFxyXG5cdFx0XHRcdFx0XHQvLyBwcm9iYWJseSB1c2VsZXNzIHNpbmNlIHRoZSBjb250ZW50IGVsZW1lbnQgaXMgc3RpbGwgYWNjZXNzaWJsZVxyXG5cdFx0XHRcdFx0XHQvLyB2aWEgOjpjb250ZW50KCksIGFuZCBiZWNhdXNlIHBlb3BsZSBjYW4gYWx3YXlzIHVzZSBsaXN0ZW5lcnNcclxuXHRcdFx0XHRcdFx0Ly8gaW5zaWRlIHRoZWlyIGNvbnRlbnQgdG8gdHJhY2sgd2hhdCdzIGdvaW5nIG9uLiBGb3IgdGhlIHNha2Ugb2ZcclxuXHRcdFx0XHRcdFx0Ly8gc2ltcGxpY2l0eSwgdGhpcyBoYXMgYmVlbiBkZW5pZWQuIEJ1ciBmb3IgdGhlIHJhcmUgcGVvcGxlIHdob1xyXG5cdFx0XHRcdFx0XHQvLyByZWFsbHkgbmVlZCB0aGUgb3B0aW9uIChmb3Igb2xkIGJyb3dzZXJzIG9yIGZvciB0aGUgY2FzZSB3aGVyZVxyXG5cdFx0XHRcdFx0XHQvLyBkZXRhY2hpbmcgdGhlIGNvbnRlbnQgaXMgYWN0dWFsbHkgZGVzdHJ1Y3RpdmUsIGZvciBmaWxlIG9yXHJcblx0XHRcdFx0XHRcdC8vIHBhc3N3b3JkIGlucHV0cyBmb3IgZXhhbXBsZSksIHRoaXMgZXZlbnQgd2lsbCBkbyB0aGUgd29yay5cclxuXHRcdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHRcdFx0dHlwZTogJ2Nsb3NpbmcnLFxyXG5cdFx0XHRcdFx0XHRcdGV2ZW50OiBldmVudFxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHVuYmluZCBsaXN0ZW5lcnMgd2hpY2ggYXJlIG5vIGxvbmdlciBuZWVkZWRcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0Lm9mZignLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJylcclxuXHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLWR5aW5nJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBvcmllbnRhdGlvbmNoYW5nZSwgc2Nyb2xsIGFuZCByZXNpemUgbGlzdGVuZXJzXHJcblx0XHRcdFx0XHRcdCQoZW52LndpbmRvdykub2ZmKCcuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHNjcm9sbCBsaXN0ZW5lcnNcclxuXHRcdFx0XHRcdFx0c2VsZi5fXyRvcmlnaW5QYXJlbnRzLmVhY2goZnVuY3Rpb24oaSwgZWwpIHtcclxuXHRcdFx0XHRcdFx0XHQkKGVsKS5vZmYoJ3Njcm9sbC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0Ly8gY2xlYXIgdGhlIGFycmF5IHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXHJcblx0XHRcdFx0XHRcdHNlbGYuX18kb3JpZ2luUGFyZW50cyA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQkKGVudi53aW5kb3cuZG9jdW1lbnQuYm9keSkub2ZmKCcuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuXyRvcmlnaW4ub2ZmKCcuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuX29mZignZGlzbWlzc2FibGUnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGEgcGx1Z2luIHRoYXQgd291bGQgbGlrZSB0byByZW1vdmUgdGhlIHRvb2x0aXAgZnJvbSB0aGVcclxuXHRcdFx0XHRcdFx0Ly8gRE9NIHdoZW4gY2xvc2VkIHNob3VsZCBiaW5kIG9uIHRoaXNcclxuXHRcdFx0XHRcdFx0c2VsZi5fX3N0YXRlU2V0KCdjbG9zZWQnKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHRyaWdnZXIgZXZlbnRcclxuXHRcdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHRcdFx0dHlwZTogJ2FmdGVyJyxcclxuXHRcdFx0XHRcdFx0XHRldmVudDogZXZlbnRcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBjYWxsIG91ciBjb25zdHJ1Y3RvciBjdXN0b20gY2FsbGJhY2sgZnVuY3Rpb25cclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uQWZ0ZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5mdW5jdGlvbkFmdGVyLmNhbGwoc2VsZiwgc2VsZiwge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0XHRcdFx0b3JpZ2luOiBzZWxmLl8kb3JpZ2luWzBdXHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGNhbGwgb3VyIG1ldGhvZCBjdXN0b20gY2FsbGJhY2tzIGZ1bmN0aW9uc1xyXG5cdFx0XHRcdFx0XHRmaW5pc2hDYWxsYmFja3MoKTtcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChlbnYuaGFzVHJhbnNpdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmNzcyh7XHJcblx0XHRcdFx0XHRcdFx0Jy1tb3otYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdCctbXMtYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdCctby1hbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0Jy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdCdhbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0J3RyYW5zaXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSArICdtcydcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdC8vIGNsZWFyIGJvdGggcG90ZW50aWFsIG9wZW4gYW5kIGNsb3NlIHRhc2tzXHJcblx0XHRcdFx0XHRcdFx0LmNsZWFyUXVldWUoKVxyXG5cdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItc2hvdycpXHJcblx0XHRcdFx0XHRcdFx0Ly8gZm9yIHRyYW5zaXRpb25zIG9ubHlcclxuXHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoJ3Rvb2x0aXBzdGVyLWR5aW5nJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0gPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuZGVsYXkoc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMV0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5xdWV1ZShmaW5pc2gpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdC5zdG9wKClcclxuXHRcdFx0XHRcdFx0XHQuZmFkZU91dChzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblsxXSwgZmluaXNoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgaXMgYWxyZWFkeSBjbG9zZWQsIHdlIHN0aWxsIG5lZWQgdG8gdHJpZ2dlclxyXG5cdFx0XHQvLyB0aGUgbWV0aG9kIGN1c3RvbSBjYWxsYmFja3NcclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0ZmluaXNoQ2FsbGJhY2tzKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgaW50ZXJuYWwgdXNlIGJ5IHBsdWdpbnMsIGlmIG5lZWRlZFxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfb2ZmOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX18kZW1pdHRlclByaXZhdGUub2ZmLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIGludGVybmFsIHVzZSBieSBwbHVnaW5zLCBpZiBuZWVkZWRcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS5vbi5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBpbnRlcm5hbCB1c2UgYnkgcGx1Z2lucywgaWYgbmVlZGVkXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X29uZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLm9uZS5hcHBseSh0aGlzLl9fJGVtaXR0ZXJQcml2YXRlLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIE9wZW5zIHRoZSB0b29sdGlwIHJpZ2h0IGF3YXkuXHJcblx0ICpcclxuXHQgKiBAcGFyYW0gZXZlbnRcclxuXHQgKiBAcGFyYW0gY2FsbGJhY2sgV2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgb3BlbmluZyBhbmltYXRpb24gaXMgb3ZlclxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfb3BlbjogZnVuY3Rpb24oZXZlbnQsIGNhbGxiYWNrKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0Ly8gaWYgdGhlIGRlc3RydWN0aW9uIHByb2Nlc3MgaGFzIG5vdCBiZWd1biBhbmQgaWYgdGhpcyB3YXMgbm90XHJcblx0XHQvLyB0cmlnZ2VyZWQgYnkgYW4gdW53YW50ZWQgZW11bGF0ZWQgY2xpY2sgZXZlbnRcclxuXHRcdGlmICghc2VsZi5fX2Rlc3Ryb3lpbmcpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGNoZWNrIHRoYXQgdGhlIG9yaWdpbiBpcyBzdGlsbCBpbiB0aGUgRE9NXHJcblx0XHRcdGlmIChcdGJvZHlDb250YWlucyhzZWxmLl8kb3JpZ2luKVxyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGlzIGVuYWJsZWRcclxuXHRcdFx0XHQmJlx0c2VsZi5fX2VuYWJsZWRcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIG9rID0gdHJ1ZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBpcyBub3Qgb3BlbiB5ZXQsIHdlIG5lZWQgdG8gY2FsbCBmdW5jdGlvbkJlZm9yZS5cclxuXHRcdFx0XHQvLyBvdGhlcndpc2Ugd2UgY2FuIGpzdCBnbyBvblxyXG5cdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgPT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gdHJpZ2dlciBhbiBldmVudC4gVGhlIGV2ZW50LnN0b3AgZnVuY3Rpb24gYWxsb3dzIHRoZSBjYWxsYmFja1xyXG5cdFx0XHRcdFx0Ly8gdG8gcHJldmVudCB0aGUgb3BlbmluZyBvZiB0aGUgdG9vbHRpcFxyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHRcdHR5cGU6ICdiZWZvcmUnLFxyXG5cdFx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRcdHN0b3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdG9rID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAob2sgJiYgc2VsZi5fX29wdGlvbnMuZnVuY3Rpb25CZWZvcmUpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGNhbGwgb3VyIGN1c3RvbSBmdW5jdGlvbiBiZWZvcmUgY29udGludWluZ1xyXG5cdFx0XHRcdFx0XHRvayA9IHNlbGYuX19vcHRpb25zLmZ1bmN0aW9uQmVmb3JlLmNhbGwoc2VsZiwgc2VsZiwge1xyXG5cdFx0XHRcdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRcdFx0XHRvcmlnaW46IHNlbGYuXyRvcmlnaW5bMF1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChvayAhPT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gaWYgdGhlcmUgaXMgc29tZSBjb250ZW50XHJcblx0XHRcdFx0XHRpZiAoc2VsZi5fX0NvbnRlbnQgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHNhdmUgdGhlIG1ldGhvZCBjYWxsYmFjayBhbmQgY2FuY2VsIGNsb3NlIG1ldGhvZCBjYWxsYmFja3NcclxuXHRcdFx0XHRcdFx0aWYgKGNhbGxiYWNrKSB7XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX2NhbGxiYWNrcy5vcGVuLnB1c2goY2FsbGJhY2spO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHNlbGYuX19jYWxsYmFja3MuY2xvc2UgPSBbXTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIGdldCByaWQgb2YgYW55IGFwcGVhcmFuY2UgdGltZW91dHNcclxuXHRcdFx0XHRcdFx0c2VsZi5fX3RpbWVvdXRzQ2xlYXIoKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHZhciBleHRyYVRpbWUsXHJcblx0XHRcdFx0XHRcdFx0ZmluaXNoID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ3N0YWJsZScpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fX3N0YXRlU2V0KCdzdGFibGUnKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gdHJpZ2dlciBhbnkgb3BlbiBtZXRob2QgY3VzdG9tIGNhbGxiYWNrcyBhbmQgcmVzZXQgdGhlbVxyXG5cdFx0XHRcdFx0XHRcdFx0JC5lYWNoKHNlbGYuX19jYWxsYmFja3Mub3BlbiwgZnVuY3Rpb24oaSxjKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGMuY2FsbChzZWxmLCBzZWxmLCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0b3JpZ2luOiBzZWxmLl8kb3JpZ2luWzBdLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRvb2x0aXA6IHNlbGYuXyR0b29sdGlwWzBdXHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuX19jYWxsYmFja3Mub3BlbiA9IFtdO1xyXG5cdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBpcyBhbHJlYWR5IG9wZW5cclxuXHRcdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyB0aGUgdGltZXIgKGlmIGFueSkgd2lsbCBzdGFydCAob3IgcmVzdGFydCkgcmlnaHQgbm93XHJcblx0XHRcdFx0XHRcdFx0ZXh0cmFUaW1lID0gMDtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBpZiBpdCB3YXMgZGlzYXBwZWFyaW5nLCBjYW5jZWwgdGhhdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgPT09ICdkaXNhcHBlYXJpbmcnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuX19zdGF0ZVNldCgnYXBwZWFyaW5nJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChlbnYuaGFzVHJhbnNpdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmNsZWFyUXVldWUoKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItZHlpbmcnKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5hZGRDbGFzcygndG9vbHRpcHN0ZXItc2hvdycpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLmRlbGF5KHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAucXVldWUoZmluaXNoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBpbiBjYXNlIHRoZSB0b29sdGlwIHdhcyBjdXJyZW50bHkgZmFkaW5nIG91dCwgYnJpbmcgaXQgYmFja1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB0byBsaWZlXHJcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0LnN0b3AoKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWRlSW4oZmluaXNoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgaXMgYWxyZWFkeSBvcGVuLCB3ZSBzdGlsbCBuZWVkIHRvIHRyaWdnZXIgdGhlIG1ldGhvZFxyXG5cdFx0XHRcdFx0XHRcdC8vIGN1c3RvbSBjYWxsYmFja1xyXG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKHNlbGYuX19zdGF0ZSA9PSAnc3RhYmxlJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZmluaXNoKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGlzbid0IGFscmVhZHkgb3Blbiwgb3BlbiBpdFxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBhIHBsdWdpbiBtdXN0IGJpbmQgb24gdGhpcyBhbmQgc3RvcmUgdGhlIHRvb2x0aXAgaW4gdGhpcy5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fc3RhdGVTZXQoJ2FwcGVhcmluZycpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIHRoZSB0aW1lciAoaWYgYW55KSB3aWxsIHN0YXJ0IHdoZW4gdGhlIHRvb2x0aXAgaGFzIGZ1bGx5IGFwcGVhcmVkXHJcblx0XHRcdFx0XHRcdFx0Ly8gYWZ0ZXIgaXRzIHRyYW5zaXRpb25cclxuXHRcdFx0XHRcdFx0XHRleHRyYVRpbWUgPSBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBpbnNlcnQgdGhlIGNvbnRlbnQgaW5zaWRlIHRoZSB0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX2NvbnRlbnRJbnNlcnQoKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyByZXBvc2l0aW9uIHRoZSB0b29sdGlwIGFuZCBhdHRhY2ggdG8gdGhlIERPTVxyXG5cdFx0XHRcdFx0XHRcdHNlbGYucmVwb3NpdGlvbihldmVudCwgdHJ1ZSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gYW5pbWF0ZSBpbiB0aGUgdG9vbHRpcC4gSWYgdGhlIGRpc3BsYXkgcGx1Z2luIHdhbnRzIG5vIGNzc1xyXG5cdFx0XHRcdFx0XHRcdC8vIGFuaW1hdGlvbnMsIGl0IG1heSBvdmVycmlkZSB0aGUgYW5pbWF0aW9uIG9wdGlvbiB3aXRoIGFcclxuXHRcdFx0XHRcdFx0XHQvLyBkdW1teSB2YWx1ZSB0aGF0IHdpbGwgcHJvZHVjZSBubyBlZmZlY3RcclxuXHRcdFx0XHRcdFx0XHRpZiAoZW52Lmhhc1RyYW5zaXRpb25zKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIG5vdGU6IHRoZXJlIHNlZW1zIHRvIGJlIGFuIGlzc3VlIHdpdGggc3RhcnQgYW5pbWF0aW9ucyB3aGljaFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gYXJlIHJhbmRvbWx5IG5vdCBwbGF5ZWQgb24gZmFzdCBkZXZpY2VzIGluIGJvdGggQ2hyb21lIGFuZCBGRixcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGNvdWxkbid0IGZpbmQgYSB3YXkgdG8gc29sdmUgaXQgeWV0LiBJdCBzZWVtcyB0aGF0IGFwcGx5aW5nXHJcblx0XHRcdFx0XHRcdFx0XHQvLyB0aGUgY2xhc3NlcyBiZWZvcmUgYXBwZW5kaW5nIHRvIHRoZSBET00gaGVscHMgYSBsaXR0bGUsIGJ1dFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gaXQgbWVzc2VzIHVwIHNvbWUgQ1NTIHRyYW5zaXRpb25zLiBUaGUgaXNzdWUgYWxtb3N0IG5ldmVyXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBoYXBwZW5zIHdoZW4gZGVsYXlbMF09PTAgdGhvdWdoXHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoJ3Rvb2x0aXBzdGVyLScrIHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbilcclxuXHRcdFx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCd0b29sdGlwc3Rlci1pbml0aWFsJylcclxuXHRcdFx0XHRcdFx0XHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jy1tb3otYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCctbXMtYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCctby1hbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Jy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uJzogc2VsZi5fX29wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb25bMF0gKyAnbXMnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCdhbmltYXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArICdtcycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0J3RyYW5zaXRpb24tZHVyYXRpb24nOiBzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSArICdtcydcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoXHJcblx0XHRcdFx0XHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGEgcXVpY2sgaG92ZXIgbWF5IGhhdmUgYWxyZWFkeSB0cmlnZ2VyZWQgYSBtb3VzZWxlYXZlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoJ3Rvb2x0aXBzdGVyLXNob3cnKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLWluaXRpYWwnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uWzBdID4gMCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5kZWxheShzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuXyR0b29sdGlwLnF1ZXVlKGZpbmlzaCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQwXHJcblx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gb2xkIGJyb3dzZXJzIHdpbGwgaGF2ZSB0byBsaXZlIHdpdGggdGhpc1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0XHRcdFx0LmNzcygnZGlzcGxheScsICdub25lJylcclxuXHRcdFx0XHRcdFx0XHRcdFx0LmZhZGVJbihzZWxmLl9fb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvblswXSwgZmluaXNoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gY2hlY2tzIGlmIHRoZSBvcmlnaW4gaXMgcmVtb3ZlZCB3aGlsZSB0aGUgdG9vbHRpcCBpcyBvcGVuXHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX3RyYWNrZXJTdGFydCgpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIE5PVEU6IHRoZSBsaXN0ZW5lcnMgYmVsb3cgaGF2ZSBhICctdHJpZ2dlckNsb3NlJyBuYW1lc3BhY2VcclxuXHRcdFx0XHRcdFx0XHQvLyBiZWNhdXNlIHdlJ2xsIHJlbW92ZSB0aGVtIHdoZW4gdGhlIHRvb2x0aXAgY2xvc2VzICh1bmxpa2VcclxuXHRcdFx0XHRcdFx0XHQvLyB0aGUgJy10cmlnZ2VyT3BlbicgbGlzdGVuZXJzKS4gU28gc29tZSBvZiB0aGVtIGFyZSBhY3R1YWxseVxyXG5cdFx0XHRcdFx0XHRcdC8vIG5vdCBhYm91dCBjbG9zZSB0cmlnZ2VycywgcmF0aGVyIGFib3V0IHBvc2l0aW9uaW5nLlxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdCQoZW52LndpbmRvdylcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHJlcG9zaXRpb24gb24gcmVzaXplXHJcblx0XHRcdFx0XHRcdFx0XHQub24oJ3Jlc2l6ZS4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdHZhciAkYWUgPSAkKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gcmVwb3NpdGlvbiBvbmx5IGlmIHRoZSByZXNpemUgZXZlbnQgd2FzIG5vdCB0cmlnZ2VyZWQgdXBvbiB0aGUgb3BlbmluZ1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBvZiBhIHZpcnR1YWwga2V5Ym9hcmQgZHVlIHRvIGFuIGlucHV0IGZpZWxkIGJlaW5nIGZvY3VzZWQgd2l0aGluIHRoZSB0b29sdGlwXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIChvdGhlcndpc2UgdGhlIHJlcG9zaXRpb25pbmcgd291bGQgbG9zZSB0aGUgZm9jdXMpXHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChcdCghJGFlLmlzKCdpbnB1dCcpICYmICEkYWUuaXMoJ3RleHRhcmVhJykpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fHxcdCEkLmNvbnRhaW5zKHNlbGYuXyR0b29sdGlwWzBdLCAkYWVbMF0pXHJcblx0XHRcdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYucmVwb3NpdGlvbihlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHNhbWUgYXMgYmVsb3cgZm9yIHBhcmVudHNcclxuXHRcdFx0XHRcdFx0XHRcdC5vbignc2Nyb2xsLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fc2Nyb2xsSGFuZGxlcihlKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHNlbGYuX18kb3JpZ2luUGFyZW50cyA9IHNlbGYuXyRvcmlnaW4ucGFyZW50cygpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIHNjcm9sbGluZyBtYXkgcmVxdWlyZSB0aGUgdG9vbHRpcCB0byBiZSBtb3ZlZCBvciBldmVuXHJcblx0XHRcdFx0XHRcdFx0Ly8gcmVwb3NpdGlvbmVkIGluIHNvbWUgY2FzZXNcclxuXHRcdFx0XHRcdFx0XHRzZWxmLl9fJG9yaWdpblBhcmVudHMuZWFjaChmdW5jdGlvbihpLCBwYXJlbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0JChwYXJlbnQpLm9uKCdzY3JvbGwuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX19zY3JvbGxIYW5kbGVyKGUpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKFx0c2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmVcclxuXHRcdFx0XHRcdFx0XHRcdHx8XHQoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLnRvdWNobGVhdmUgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSlcclxuXHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gd2UgdXNlIGFuIGV2ZW50IHRvIGFsbG93IHVzZXJzL3BsdWdpbnMgdG8gY29udHJvbCB3aGVuIHRoZSBtb3VzZWxlYXZlL3RvdWNobGVhdmVcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGNsb3NlIHRyaWdnZXJzIHdpbGwgY29tZSB0byBhY3Rpb24uIEl0IGFsbG93cyB0byBoYXZlIG1vcmUgdHJpZ2dlcmluZyBlbGVtZW50c1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gdGhhbiBqdXN0IHRoZSBvcmlnaW4gYW5kIHRoZSB0b29sdGlwIGZvciBleGFtcGxlLCBvciB0byBjYW5jZWwvZGVsYXkgdGhlIGNsb3NpbmcsXHJcblx0XHRcdFx0XHRcdFx0XHQvLyBvciB0byBtYWtlIHRoZSB0b29sdGlwIGludGVyYWN0aXZlIGV2ZW4gaWYgaXQgd2Fzbid0IHdoZW4gaXQgd2FzIG9wZW4sIGV0Yy5cclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuX29uKCdkaXNtaXNzYWJsZScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXZlbnQuZGlzbWlzc2FibGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXZlbnQuZGVsYXkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGV2ZW50LmV2ZW50IG1heSBiZSB1bmRlZmluZWRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fY2xvc2UoZXZlbnQuZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgZXZlbnQuZGVsYXkpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fdGltZW91dHMuY2xvc2UucHVzaCh0aW1lb3V0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9jbG9zZShldmVudCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIG5vdyBzZXQgdGhlIGxpc3RlbmVycyB0aGF0IHdpbGwgdHJpZ2dlciAnZGlzbWlzc2FibGUnIGV2ZW50c1xyXG5cdFx0XHRcdFx0XHRcdFx0dmFyICRlbGVtZW50cyA9IHNlbGYuXyRvcmlnaW4sXHJcblx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50TmFtZXNJbiA9ICcnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRldmVudE5hbWVzT3V0ID0gJycsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBpZiB3ZSBoYXZlIHRvIGFsbG93IGludGVyYWN0aW9uLCBiaW5kIG9uIHRoZSB0b29sdGlwIHRvb1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmludGVyYWN0aXZlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdCRlbGVtZW50cyA9ICRlbGVtZW50cy5hZGQoc2VsZi5fJHRvb2x0aXApO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudHJpZ2dlckNsb3NlLm1vdXNlbGVhdmUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnROYW1lc0luICs9ICdtb3VzZWVudGVyLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlICc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50TmFtZXNPdXQgKz0gJ21vdXNlbGVhdmUuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UgJztcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudG91Y2hsZWF2ZSAmJiBlbnYuaGFzVG91Y2hDYXBhYmlsaXR5KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50TmFtZXNJbiArPSAndG91Y2hzdGFydC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZSc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGV2ZW50TmFtZXNPdXQgKz0gJ3RvdWNoZW5kLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlIHRvdWNoY2FuY2VsLicrIHNlbGYuX19uYW1lc3BhY2UgKyctdHJpZ2dlckNsb3NlJztcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0JGVsZW1lbnRzXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGNsb3NlIGFmdGVyIHNvbWUgdGltZSBzcGVudCBvdXRzaWRlIG9mIHRoZSBlbGVtZW50c1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQub24oZXZlbnROYW1lc091dCwgZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpdCdzIG9rIGlmIHRoZSB0b3VjaCBnZXN0dXJlIGVuZGVkIHVwIHRvIGJlIGEgc3dpcGUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaXQncyBzdGlsbCBhIFwidG91Y2ggbGVhdmVcIiBzaXR1YXRpb25cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoXHRzZWxmLl90b3VjaElzVG91Y2hFdmVudChldmVudClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHx8XHQhc2VsZi5fdG91Y2hJc0VtdWxhdGVkRXZlbnQoZXZlbnQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBkZWxheSA9IChldmVudC50eXBlID09ICdtb3VzZWxlYXZlJykgP1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5kZWxheSA6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX19vcHRpb25zLmRlbGF5VG91Y2g7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWxheTogZGVsYXlbMV0sXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRpc21pc3NhYmxlOiB0cnVlLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6ICdkaXNtaXNzYWJsZSdcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gc3VzcGVuZCB0aGUgbW91c2VsZWF2ZSB0aW1lb3V0IHdoZW4gdGhlIHBvaW50ZXIgY29tZXMgYmFja1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBvdmVyIHRoZSBlbGVtZW50c1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQub24oZXZlbnROYW1lc0luLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGl0J3MgYWxzbyBvayBpZiB0aGUgdG91Y2ggZXZlbnQgaXMgYSBzd2lwZSBnZXN0dXJlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKFx0c2VsZi5fdG91Y2hJc1RvdWNoRXZlbnQoZXZlbnQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR8fFx0IXNlbGYuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGV2ZW50KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcih7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRpc21pc3NhYmxlOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiAnZGlzbWlzc2FibGUnXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBjbG9zZSB0aGUgdG9vbHRpcCB3aGVuIHRoZSBvcmlnaW4gZ2V0cyBhIG1vdXNlIGNsaWNrIChjb21tb24gYmVoYXZpb3Igb2ZcclxuXHRcdFx0XHRcdFx0XHQvLyBuYXRpdmUgdG9vbHRpcHMpXHJcblx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5vcmlnaW5DbGljaykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kb3JpZ2luLm9uKCdjbGljay4nKyBzZWxmLl9fbmFtZXNwYWNlICsgJy10cmlnZ2VyQ2xvc2UnLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gd2UgY291bGQgYWN0dWFsbHkgbGV0IGEgdGFwIHRyaWdnZXIgdGhpcyBidXQgdGhpcyBmZWF0dXJlIGp1c3RcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gZG9lcyBub3QgbWFrZSBzZW5zZSBvbiB0b3VjaCBkZXZpY2VzXHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChcdCFzZWxmLl90b3VjaElzVG91Y2hFdmVudChldmVudClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQmJlx0IXNlbGYuX3RvdWNoSXNFbXVsYXRlZEV2ZW50KGV2ZW50KVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxmLl9jbG9zZShldmVudCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBzZXQgdGhlIHNhbWUgYmluZGluZ3MgZm9yIGNsaWNrIGFuZCB0b3VjaCBvbiB0aGUgYm9keSB0byBjbG9zZSB0aGUgdG9vbHRpcFxyXG5cdFx0XHRcdFx0XHRcdGlmIChcdHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5jbGlja1xyXG5cdFx0XHRcdFx0XHRcdFx0fHxcdChzZWxmLl9fb3B0aW9ucy50cmlnZ2VyQ2xvc2UudGFwICYmIGVudi5oYXNUb3VjaENhcGFiaWxpdHkpXHJcblx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGRvbid0IHNldCByaWdodCBhd2F5IHNpbmNlIHRoZSBjbGljay90YXAgZXZlbnQgd2hpY2ggdHJpZ2dlcmVkIHRoaXMgbWV0aG9kXHJcblx0XHRcdFx0XHRcdFx0XHQvLyAoaWYgaXQgd2FzIGEgY2xpY2svdGFwKSBpcyBnb2luZyB0byBidWJibGUgdXAgdG8gdGhlIGJvZHksIHdlIGRvbid0IHdhbnQgaXRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHRvIGNsb3NlIHRoZSB0b29sdGlwIGltbWVkaWF0ZWx5IGFmdGVyIGl0IG9wZW5lZFxyXG5cdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fc3RhdGUgIT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgZXZlbnROYW1lcyA9ICcnLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0JGJvZHkgPSAkKGVudi53aW5kb3cuZG9jdW1lbnQuYm9keSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS5jbGljaykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnROYW1lcyArPSAnY2xpY2suJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UgJztcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50YXAgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZXZlbnROYW1lcyArPSAndG91Y2hlbmQuJysgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyQ2xvc2UnO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQkYm9keS5vbihldmVudE5hbWVzLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fdG91Y2hJc01lYW5pbmdmdWxFdmVudChldmVudCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX3RvdWNoUmVjb3JkRXZlbnQoZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFzZWxmLl9fb3B0aW9ucy5pbnRlcmFjdGl2ZSB8fCAhJC5jb250YWlucyhzZWxmLl8kdG9vbHRpcFswXSwgZXZlbnQudGFyZ2V0KSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX2Nsb3NlKGV2ZW50KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIG5lZWRlZCB0byBkZXRlY3QgYW5kIGlnbm9yZSBzd2lwaW5nXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLnRyaWdnZXJDbG9zZS50YXAgJiYgZW52Lmhhc1RvdWNoQ2FwYWJpbGl0eSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQkYm9keS5vbigndG91Y2hzdGFydC4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJDbG9zZScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGYuX3RvdWNoUmVjb3JkRXZlbnQoZXZlbnQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9LCAwKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcigncmVhZHknKTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHQvLyBjYWxsIG91ciBjdXN0b20gY2FsbGJhY2tcclxuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuZnVuY3Rpb25SZWFkeSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fX29wdGlvbnMuZnVuY3Rpb25SZWFkeS5jYWxsKHNlbGYsIHNlbGYsIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0b3JpZ2luOiBzZWxmLl8kb3JpZ2luWzBdLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0b29sdGlwOiBzZWxmLl8kdG9vbHRpcFswXVxyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBpZiB3ZSBoYXZlIGEgdGltZXIgc2V0LCBsZXQgdGhlIGNvdW50ZG93biBiZWdpblxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudGltZXIgPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fY2xvc2UoKTtcclxuXHRcdFx0XHRcdFx0XHR9LCBzZWxmLl9fb3B0aW9ucy50aW1lciArIGV4dHJhVGltZSk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX3RpbWVvdXRzLmNsb3NlLnB1c2godGltZW91dCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBXaGVuIHVzaW5nIHRoZSBtb3VzZWVudGVyL3RvdWNoc3RhcnQgb3BlbiB0cmlnZ2VycywgdGhpcyBmdW5jdGlvbiB3aWxsXHJcblx0ICogc2NoZWR1bGUgdGhlIG9wZW5pbmcgb2YgdGhlIHRvb2x0aXAgYWZ0ZXIgdGhlIGRlbGF5LCBpZiB0aGVyZSBpcyBvbmVcclxuXHQgKlxyXG5cdCAqIEBwYXJhbSBldmVudFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuIFx0ICovXHJcblx0X29wZW5TaG9ydGx5OiBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdG9rID0gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0aWYgKHNlbGYuX19zdGF0ZSAhPSAnc3RhYmxlJyAmJiBzZWxmLl9fc3RhdGUgIT0gJ2FwcGVhcmluZycpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIGEgdGltZW91dCBpcyBub3QgYWxyZWFkeSBydW5uaW5nXHJcblx0XHRcdGlmICghc2VsZi5fX3RpbWVvdXRzLm9wZW4pIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdHR5cGU6ICdzdGFydCcsXHJcblx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRzdG9wOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0b2sgPSBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAob2spIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dmFyIGRlbGF5ID0gKGV2ZW50LnR5cGUuaW5kZXhPZigndG91Y2gnKSA9PSAwKSA/XHJcblx0XHRcdFx0XHRcdHNlbGYuX19vcHRpb25zLmRlbGF5VG91Y2ggOlxyXG5cdFx0XHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5kZWxheTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKGRlbGF5WzBdKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl9fdGltZW91dHMub3BlbiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX3RpbWVvdXRzLm9wZW4gPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIG9wZW4gb25seSBpZiB0aGUgcG9pbnRlciAobW91c2Ugb3IgdG91Y2gpIGlzIHN0aWxsIG92ZXIgdGhlIG9yaWdpbi5cclxuXHRcdFx0XHRcdFx0XHQvLyBUaGUgY2hlY2sgb24gdGhlIFwibWVhbmluZ2Z1bCBldmVudFwiIGNhbiBvbmx5IGJlIG1hZGUgaGVyZSwgYWZ0ZXIgc29tZVxyXG5cdFx0XHRcdFx0XHRcdC8vIHRpbWUgaGFzIHBhc3NlZCAodG8ga25vdyBpZiB0aGUgdG91Y2ggd2FzIGEgc3dpcGUgb3Igbm90KVxyXG5cdFx0XHRcdFx0XHRcdGlmIChzZWxmLl9fcG9pbnRlcklzT3Zlck9yaWdpbiAmJiBzZWxmLl90b3VjaElzTWVhbmluZ2Z1bEV2ZW50KGV2ZW50KSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBzaWduYWwgdGhhdCB3ZSBnbyBvblxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fdHJpZ2dlcignc3RhcnRlbmQnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5fb3BlbihldmVudCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2lnbmFsIHRoYXQgd2UgY2FuY2VsXHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCdzdGFydGNhbmNlbCcpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSwgZGVsYXlbMF0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdC8vIHNpZ25hbCB0aGF0IHdlIGdvIG9uXHJcblx0XHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoJ3N0YXJ0ZW5kJyk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzZWxmLl9vcGVuKGV2ZW50KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBNZWFudCBmb3IgcGx1Z2lucyB0byBnZXQgdGhlaXIgb3B0aW9uc1xyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwbHVnaW5OYW1lIFRoZSBuYW1lIG9mIHRoZSBwbHVnaW4gdGhhdCBhc2tzIGZvciBpdHMgb3B0aW9uc1xyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBkZWZhdWx0T3B0aW9ucyBUaGUgZGVmYXVsdCBvcHRpb25zIG9mIHRoZSBwbHVnaW5cclxuXHQgKiBAcmV0dXJucyB7b2JqZWN0fSBUaGUgb3B0aW9uc1xyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfb3B0aW9uc0V4dHJhY3Q6IGZ1bmN0aW9uKHBsdWdpbk5hbWUsIGRlZmF1bHRPcHRpb25zKSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0b3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZhdWx0T3B0aW9ucyk7XHJcblx0XHRcclxuXHRcdC8vIGlmIHRoZSBwbHVnaW4gb3B0aW9ucyB3ZXJlIGlzb2xhdGVkIGluIGEgcHJvcGVydHkgbmFtZWQgYWZ0ZXIgdGhlXHJcblx0XHQvLyBwbHVnaW4sIHVzZSB0aGVtIChwcmV2ZW50cyBjb25mbGljdHMgd2l0aCBvdGhlciBwbHVnaW5zKVxyXG5cdFx0dmFyIHBsdWdpbk9wdGlvbnMgPSBzZWxmLl9fb3B0aW9uc1twbHVnaW5OYW1lXTtcclxuXHRcdFxyXG5cdFx0Ly8gaWYgbm90LCB0cnkgdG8gZ2V0IHRoZW0gYXMgcmVndWxhciBvcHRpb25zXHJcblx0XHRpZiAoIXBsdWdpbk9wdGlvbnMpe1xyXG5cdFx0XHRcclxuXHRcdFx0cGx1Z2luT3B0aW9ucyA9IHt9O1xyXG5cdFx0XHRcclxuXHRcdFx0JC5lYWNoKGRlZmF1bHRPcHRpb25zLCBmdW5jdGlvbihvcHRpb25OYW1lLCB2YWx1ZSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBvID0gc2VsZi5fX29wdGlvbnNbb3B0aW9uTmFtZV07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKG8gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0cGx1Z2luT3B0aW9uc1tvcHRpb25OYW1lXSA9IG87XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gbGV0J3MgbWVyZ2UgdGhlIGRlZmF1bHQgb3B0aW9ucyBhbmQgdGhlIG9uZXMgdGhhdCB3ZXJlIHByb3ZpZGVkLiBXZSdkIHdhbnRcclxuXHRcdC8vIHRvIGRvIGEgZGVlcCBjb3B5IGJ1dCBub3QgbGV0IGpRdWVyeSBtZXJnZSBhcnJheXMsIHNvIHdlJ2xsIGRvIGEgc2hhbGxvd1xyXG5cdFx0Ly8gZXh0ZW5kIG9uIHR3byBsZXZlbHMsIHRoYXQgd2lsbCBiZSBlbm91Z2ggaWYgb3B0aW9ucyBhcmUgbm90IG1vcmUgdGhhbiAxXHJcblx0XHQvLyBsZXZlbCBkZWVwXHJcblx0XHQkLmVhY2gob3B0aW9ucywgZnVuY3Rpb24ob3B0aW9uTmFtZSwgdmFsdWUpIHtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChwbHVnaW5PcHRpb25zW29wdGlvbk5hbWVdICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoKFx0XHR0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCdcclxuXHRcdFx0XHRcdFx0JiZcdCEodmFsdWUgaW5zdGFuY2VvZiBBcnJheSlcclxuXHRcdFx0XHRcdFx0JiZcdHZhbHVlICE9IG51bGxcclxuXHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdCYmXHJcblx0XHRcdFx0XHQoXHRcdHR5cGVvZiBwbHVnaW5PcHRpb25zW29wdGlvbk5hbWVdID09ICdvYmplY3QnXHJcblx0XHRcdFx0XHRcdCYmXHQhKHBsdWdpbk9wdGlvbnNbb3B0aW9uTmFtZV0gaW5zdGFuY2VvZiBBcnJheSlcclxuXHRcdFx0XHRcdFx0JiZcdHBsdWdpbk9wdGlvbnNbb3B0aW9uTmFtZV0gIT0gbnVsbFxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0JC5leHRlbmQob3B0aW9uc1tvcHRpb25OYW1lXSwgcGx1Z2luT3B0aW9uc1tvcHRpb25OYW1lXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0b3B0aW9uc1tvcHRpb25OYW1lXSA9IHBsdWdpbk9wdGlvbnNbb3B0aW9uTmFtZV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIG9wdGlvbnM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBVc2VkIGF0IGluc3RhbnRpYXRpb24gb2YgdGhlIHBsdWdpbiwgb3IgYWZ0ZXJ3YXJkcyBieSBwbHVnaW5zIHRoYXQgYWN0aXZhdGUgdGhlbXNlbHZlc1xyXG5cdCAqIG9uIGV4aXN0aW5nIGluc3RhbmNlc1xyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBwbHVnaW5OYW1lXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF9wbHVnOiBmdW5jdGlvbihwbHVnaW5OYW1lKSB7XHJcblx0XHRcclxuXHRcdHZhciBwbHVnaW4gPSAkLnRvb2x0aXBzdGVyLl9wbHVnaW4ocGx1Z2luTmFtZSk7XHJcblx0XHRcclxuXHRcdGlmIChwbHVnaW4pIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZXJlIGlzIGEgY29uc3RydWN0b3IgZm9yIGluc3RhbmNlc1xyXG5cdFx0XHRpZiAocGx1Z2luLmluc3RhbmNlKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gcHJveHkgbm9uLXByaXZhdGUgbWV0aG9kcyBvbiB0aGUgaW5zdGFuY2UgdG8gYWxsb3cgbmV3IGluc3RhbmNlIG1ldGhvZHNcclxuXHRcdFx0XHQkLnRvb2x0aXBzdGVyLl9fYnJpZGdlKHBsdWdpbi5pbnN0YW5jZSwgdGhpcywgcGx1Z2luLm5hbWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdUaGUgXCInKyBwbHVnaW5OYW1lICsnXCIgcGx1Z2luIGlzIG5vdCBkZWZpbmVkJyk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogVGhpcyB3aWxsIHJldHVybiB0cnVlIGlmIHRoZSBldmVudCBpcyBhIG1vdXNlIGV2ZW50IHdoaWNoIHdhc1xyXG5cdCAqIGVtdWxhdGVkIGJ5IHRoZSBicm93c2VyIGFmdGVyIGEgdG91Y2ggZXZlbnQuIFRoaXMgYWxsb3dzIHVzIHRvXHJcblx0ICogcmVhbGx5IGRpc3NvY2lhdGUgbW91c2UgYW5kIHRvdWNoIHRyaWdnZXJzLlxyXG5cdCAqIFxyXG5cdCAqIFRoZXJlIGlzIGEgbWFyZ2luIG9mIGVycm9yIGlmIGEgcmVhbCBtb3VzZSBldmVudCBpcyBmaXJlZCByaWdodFxyXG5cdCAqIGFmdGVyICh3aXRoaW4gdGhlIGRlbGF5IHNob3duIGJlbG93KSBhIHRvdWNoIGV2ZW50IG9uIHRoZSBzYW1lXHJcblx0ICogZWxlbWVudCwgYnV0IGhvcGVmdWxseSBpdCBzaG91bGQgbm90IGhhcHBlbiBvZnRlbi5cclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3RvdWNoSXNFbXVsYXRlZEV2ZW50OiBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHJcblx0XHR2YXIgaXNFbXVsYXRlZCA9IGZhbHNlLFxyXG5cdFx0XHRub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdFxyXG5cdFx0Zm9yICh2YXIgaSA9IHRoaXMuX190b3VjaEV2ZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGUgPSB0aGlzLl9fdG91Y2hFdmVudHNbaV07XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBkZWxheSwgaW4gbWlsbGlzZWNvbmRzLiBJdCdzIHN1cHBvc2VkIHRvIGJlIDMwMG1zIGluXHJcblx0XHRcdC8vIG1vc3QgYnJvd3NlcnMgKDM1MG1zIG9uIGlPUykgdG8gYWxsb3cgYSBkb3VibGUgdGFwIGJ1dFxyXG5cdFx0XHQvLyBjYW4gYmUgbGVzcyAoY2hlY2sgb3V0IEZhc3RDbGljayBmb3IgbW9yZSBpbmZvKVxyXG5cdFx0XHRpZiAobm93IC0gZS50aW1lIDwgNTAwKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGUudGFyZ2V0ID09PSBldmVudC50YXJnZXQpIHtcclxuXHRcdFx0XHRcdGlzRW11bGF0ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gaXNFbXVsYXRlZDtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgZmFsc2UgaWYgdGhlIGV2ZW50IHdhcyBhbiBlbXVsYXRlZCBtb3VzZSBldmVudCBvclxyXG5cdCAqIGEgdG91Y2ggZXZlbnQgaW52b2x2ZWQgaW4gYSBzd2lwZSBnZXN0dXJlLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxyXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfdG91Y2hJc01lYW5pbmdmdWxFdmVudDogZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdHJldHVybiAoXHJcblx0XHRcdFx0KHRoaXMuX3RvdWNoSXNUb3VjaEV2ZW50KGV2ZW50KSAmJiAhdGhpcy5fdG91Y2hTd2lwZWQoZXZlbnQudGFyZ2V0KSlcclxuXHRcdFx0fHxcdCghdGhpcy5fdG91Y2hJc1RvdWNoRXZlbnQoZXZlbnQpICYmICF0aGlzLl90b3VjaElzRW11bGF0ZWRFdmVudChldmVudCkpXHJcblx0XHQpO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQ2hlY2tzIGlmIGFuIGV2ZW50IGlzIGEgdG91Y2ggZXZlbnRcclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcclxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0X3RvdWNoSXNUb3VjaEV2ZW50OiBmdW5jdGlvbihldmVudCl7XHJcblx0XHRyZXR1cm4gZXZlbnQudHlwZS5pbmRleE9mKCd0b3VjaCcpID09IDA7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBTdG9yZSB0b3VjaCBldmVudHMgZm9yIGEgd2hpbGUgdG8gZGV0ZWN0IHN3aXBpbmcgYW5kIGVtdWxhdGVkIG1vdXNlIGV2ZW50c1xyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfdG91Y2hSZWNvcmRFdmVudDogZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFxyXG5cdFx0aWYgKHRoaXMuX3RvdWNoSXNUb3VjaEV2ZW50KGV2ZW50KSkge1xyXG5cdFx0XHRldmVudC50aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRcdHRoaXMuX190b3VjaEV2ZW50cy5wdXNoKGV2ZW50KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRydWUgaWYgYSBzd2lwZSBoYXBwZW5lZCBhZnRlciB0aGUgbGFzdCB0b3VjaHN0YXJ0IGV2ZW50IGZpcmVkIG9uXHJcblx0ICogZXZlbnQudGFyZ2V0LlxyXG5cdCAqIFxyXG5cdCAqIFdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBhIHN3aXBlIGZyb20gYSB0YXAgYmVmb3JlIHdlIGxldCB0aGUgZXZlbnQgb3BlblxyXG5cdCAqIG9yIGNsb3NlIHRoZSB0b29sdGlwLiBBIHN3aXBlIGlzIHdoZW4gYSB0b3VjaG1vdmUgKHNjcm9sbCkgZXZlbnQgaGFwcGVuc1xyXG5cdCAqIG9uIHRoZSBib2R5IGJldHdlZW4gdGhlIHRvdWNoc3RhcnQgYW5kIHRoZSB0b3VjaGVuZCBldmVudHMgb2YgYW4gZWxlbWVudC5cclxuXHQgKiBcclxuXHQgKiBAcGFyYW0ge29iamVjdH0gdGFyZ2V0IFRoZSBIVE1MIGVsZW1lbnQgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWQgdGhlIHN3aXBlXHJcblx0ICogQHJldHVybnMge2Jvb2xlYW59XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF90b3VjaFN3aXBlZDogZnVuY3Rpb24odGFyZ2V0KSB7XHJcblx0XHRcclxuXHRcdHZhciBzd2lwZWQgPSBmYWxzZTtcclxuXHRcdFxyXG5cdFx0Zm9yICh2YXIgaSA9IHRoaXMuX190b3VjaEV2ZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGUgPSB0aGlzLl9fdG91Y2hFdmVudHNbaV07XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoZS50eXBlID09ICd0b3VjaG1vdmUnKSB7XHJcblx0XHRcdFx0c3dpcGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChcclxuXHRcdFx0XHRlLnR5cGUgPT0gJ3RvdWNoc3RhcnQnXHJcblx0XHRcdFx0JiZcdHRhcmdldCA9PT0gZS50YXJnZXRcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHN3aXBlZDtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFRyaWdnZXJzIGFuIGV2ZW50IG9uIHRoZSBpbnN0YW5jZSBlbWl0dGVyc1xyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHRfdHJpZ2dlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyk7XHJcblx0XHRcclxuXHRcdGlmICh0eXBlb2YgYXJnc1swXSA9PSAnc3RyaW5nJykge1xyXG5cdFx0XHRhcmdzWzBdID0geyB0eXBlOiBhcmdzWzBdIH07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIGFkZCBwcm9wZXJ0aWVzIHRvIHRoZSBldmVudFxyXG5cdFx0YXJnc1swXS5pbnN0YW5jZSA9IHRoaXM7XHJcblx0XHRhcmdzWzBdLm9yaWdpbiA9IHRoaXMuXyRvcmlnaW4gPyB0aGlzLl8kb3JpZ2luWzBdIDogbnVsbDtcclxuXHRcdGFyZ3NbMF0udG9vbHRpcCA9IHRoaXMuXyR0b29sdGlwID8gdGhpcy5fJHRvb2x0aXBbMF0gOiBudWxsO1xyXG5cdFx0XHJcblx0XHQvLyBub3RlOiB0aGUgb3JkZXIgb2YgZW1pdHRlcnMgbWF0dGVyc1xyXG5cdFx0dGhpcy5fXyRlbWl0dGVyUHJpdmF0ZS50cmlnZ2VyLmFwcGx5KHRoaXMuX18kZW1pdHRlclByaXZhdGUsIGFyZ3MpO1xyXG5cdFx0JC50b29sdGlwc3Rlci5fdHJpZ2dlci5hcHBseSgkLnRvb2x0aXBzdGVyLCBhcmdzKTtcclxuXHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy50cmlnZ2VyLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgYXJncyk7XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRGVhY3RpdmF0ZSBhIHBsdWdpbiBvbiB0aGlzIGluc3RhbmNlXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdF91bnBsdWc6IGZ1bmN0aW9uKHBsdWdpbk5hbWUpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHQvLyBpZiB0aGUgcGx1Z2luIGhhcyBiZWVuIGFjdGl2YXRlZCBvbiB0aGlzIGluc3RhbmNlXHJcblx0XHRpZiAoc2VsZltwbHVnaW5OYW1lXSkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHBsdWdpbiA9ICQudG9vbHRpcHN0ZXIuX3BsdWdpbihwbHVnaW5OYW1lKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZXJlIGlzIGEgY29uc3RydWN0b3IgZm9yIGluc3RhbmNlc1xyXG5cdFx0XHRpZiAocGx1Z2luLmluc3RhbmNlKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gdW5icmlkZ2VcclxuXHRcdFx0XHQkLmVhY2gocGx1Z2luLmluc3RhbmNlLCBmdW5jdGlvbihtZXRob2ROYW1lLCBmbikge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBpZiB0aGUgbWV0aG9kIGV4aXN0cyAocHJpdmF0ZXMgbWV0aG9kcyBkbyBub3QpIGFuZCBjb21lcyBpbmRlZWQgZnJvbVxyXG5cdFx0XHRcdFx0Ly8gdGhpcyBwbHVnaW4gKG1heSBiZSBtaXNzaW5nIG9yIGNvbWUgZnJvbSBhIGNvbmZsaWN0aW5nIHBsdWdpbikuXHJcblx0XHRcdFx0XHRpZiAoXHRzZWxmW21ldGhvZE5hbWVdXHJcblx0XHRcdFx0XHRcdCYmXHRzZWxmW21ldGhvZE5hbWVdLmJyaWRnZWQgPT09IHNlbGZbcGx1Z2luTmFtZV1cclxuXHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRkZWxldGUgc2VsZlttZXRob2ROYW1lXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZGVzdHJveSB0aGUgcGx1Z2luXHJcblx0XHRcdGlmIChzZWxmW3BsdWdpbk5hbWVdLl9fZGVzdHJveSkge1xyXG5cdFx0XHRcdHNlbGZbcGx1Z2luTmFtZV0uX19kZXN0cm95KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIHJlbW92ZSB0aGUgcmVmZXJlbmNlIHRvIHRoZSBwbHVnaW4gaW5zdGFuY2VcclxuXHRcdFx0ZGVsZXRlIHNlbGZbcGx1Z2luTmFtZV07XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogQHNlZSBzZWxmOjpfY2xvc2VcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0Y2xvc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcblx0XHRcclxuXHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHR0aGlzLl9jbG9zZShudWxsLCBjYWxsYmFjayk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNldHMgb3IgZ2V0cyB0aGUgY29udGVudCBvZiB0aGUgdG9vbHRpcFxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHttaXhlZHxzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRjb250ZW50OiBmdW5jdGlvbihjb250ZW50KSB7XHJcblx0XHRcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0Ly8gZ2V0dGVyIG1ldGhvZFxyXG5cdFx0aWYgKGNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gc2VsZi5fX0NvbnRlbnQ7XHJcblx0XHR9XHJcblx0XHQvLyBzZXR0ZXIgbWV0aG9kXHJcblx0XHRlbHNlIHtcclxuXHRcdFx0XHJcblx0XHRcdGlmICghc2VsZi5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGNoYW5nZSB0aGUgY29udGVudFxyXG5cdFx0XHRcdHNlbGYuX19jb250ZW50U2V0KGNvbnRlbnQpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChzZWxmLl9fQ29udGVudCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyB1cGRhdGUgdGhlIHRvb2x0aXAgaWYgaXQgaXMgb3BlblxyXG5cdFx0XHRcdFx0aWYgKHNlbGYuX19zdGF0ZSAhPT0gJ2Nsb3NlZCcpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHJlc2V0IHRoZSBjb250ZW50IGluIHRoZSB0b29sdGlwXHJcblx0XHRcdFx0XHRcdHNlbGYuX19jb250ZW50SW5zZXJ0KCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyByZXBvc2l0aW9uIGFuZCByZXNpemUgdGhlIHRvb2x0aXBcclxuXHRcdFx0XHRcdFx0c2VsZi5yZXBvc2l0aW9uKCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBpZiB3ZSB3YW50IHRvIHBsYXkgYSBsaXR0bGUgYW5pbWF0aW9uIHNob3dpbmcgdGhlIGNvbnRlbnQgY2hhbmdlZFxyXG5cdFx0XHRcdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMudXBkYXRlQW5pbWF0aW9uKSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0aWYgKGVudi5oYXNUcmFuc2l0aW9ucykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBrZWVwIHRoZSByZWZlcmVuY2UgaW4gdGhlIGxvY2FsIHNjb3BlXHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgYW5pbWF0aW9uID0gc2VsZi5fX29wdGlvbnMudXBkYXRlQW5pbWF0aW9uO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5hZGRDbGFzcygndG9vbHRpcHN0ZXItdXBkYXRlLScrIGFuaW1hdGlvbik7XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHJlbW92ZSB0aGUgY2xhc3MgYWZ0ZXIgYSB3aGlsZS4gVGhlIGFjdHVhbCBkdXJhdGlvbiBvZiB0aGVcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHVwZGF0ZSBhbmltYXRpb24gbWF5IGJlIHNob3J0ZXIsIGl0J3Mgc2V0IGluIHRoZSBDU1MgcnVsZXNcclxuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLXVwZGF0ZS0nKyBhbmltYXRpb24pO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9LCAxMDAwKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5mYWRlVG8oMjAwLCAwLjUsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2VsZi5fJHRvb2x0aXAuZmFkZVRvKDIwMCwgMSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHNlbGYuX2Nsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHNlbGYuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHNlbGY7XHJcblx0XHR9XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgdG9vbHRpcFxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHRpZiAoIXNlbGYuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0XHJcblx0XHRcdGlmKHNlbGYuX19zdGF0ZSAhPSAnY2xvc2VkJyl7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gbm8gY2xvc2luZyBkZWxheVxyXG5cdFx0XHRcdHNlbGYub3B0aW9uKCdhbmltYXRpb25EdXJhdGlvbicsIDApXHJcblx0XHRcdFx0XHQvLyBmb3JjZSBjbG9zaW5nXHJcblx0XHRcdFx0XHQuX2Nsb3NlKG51bGwsIG51bGwsIHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdC8vIHRoZXJlIG1pZ2h0IGJlIGFuIG9wZW4gdGltZW91dCBzdGlsbCBydW5uaW5nXHJcblx0XHRcdFx0c2VsZi5fX3RpbWVvdXRzQ2xlYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gc2VuZCBldmVudFxyXG5cdFx0XHRzZWxmLl90cmlnZ2VyKCdkZXN0cm95Jyk7XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl9fZGVzdHJveWVkID0gdHJ1ZTtcclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuXyRvcmlnaW5cclxuXHRcdFx0XHQucmVtb3ZlRGF0YShzZWxmLl9fbmFtZXNwYWNlKVxyXG5cdFx0XHRcdC8vIHJlbW92ZSB0aGUgb3BlbiB0cmlnZ2VyIGxpc3RlbmVyc1xyXG5cdFx0XHRcdC5vZmYoJy4nKyBzZWxmLl9fbmFtZXNwYWNlICsnLXRyaWdnZXJPcGVuJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyByZW1vdmUgdGhlIHRvdWNoIGxpc3RlbmVyXHJcblx0XHRcdCQoZW52LndpbmRvdy5kb2N1bWVudC5ib2R5KS5vZmYoJy4nICsgc2VsZi5fX25hbWVzcGFjZSArJy10cmlnZ2VyT3BlbicpO1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIG5zID0gc2VsZi5fJG9yaWdpbi5kYXRhKCd0b29sdGlwc3Rlci1ucycpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlIG9yaWdpbiBoYXMgYmVlbiByZW1vdmVkIGZyb20gRE9NLCBpdHMgZGF0YSBtYXlcclxuXHRcdFx0Ly8gd2VsbCBoYXZlIGJlZW4gZGVzdHJveWVkIGluIHRoZSBwcm9jZXNzIGFuZCB0aGVyZSB3b3VsZFxyXG5cdFx0XHQvLyBiZSBub3RoaW5nIHRvIGNsZWFuIHVwIG9yIHJlc3RvcmVcclxuXHRcdFx0aWYgKG5zKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gaWYgdGhlcmUgYXJlIG5vIG1vcmUgdG9vbHRpcHMgb24gdGhpcyBlbGVtZW50XHJcblx0XHRcdFx0aWYgKG5zLmxlbmd0aCA9PT0gMSkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBvcHRpb25hbCByZXN0b3JhdGlvbiBvZiBhIHRpdGxlIGF0dHJpYnV0ZVxyXG5cdFx0XHRcdFx0dmFyIHRpdGxlID0gbnVsbDtcclxuXHRcdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5yZXN0b3JhdGlvbiA9PSAncHJldmlvdXMnKSB7XHJcblx0XHRcdFx0XHRcdHRpdGxlID0gc2VsZi5fJG9yaWdpbi5kYXRhKCd0b29sdGlwc3Rlci1pbml0aWFsVGl0bGUnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2UgaWYgKHNlbGYuX19vcHRpb25zLnJlc3RvcmF0aW9uID09ICdjdXJyZW50Jykge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gb2xkIHNjaG9vbCB0ZWNobmlxdWUgdG8gc3RyaW5naWZ5IHdoZW4gb3V0ZXJIVE1MIGlzIG5vdCBzdXBwb3J0ZWRcclxuXHRcdFx0XHRcdFx0dGl0bGUgPSAodHlwZW9mIHNlbGYuX19Db250ZW50ID09ICdzdHJpbmcnKSA/XHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX0NvbnRlbnQgOlxyXG5cdFx0XHRcdFx0XHRcdCQoJzxkaXY+PC9kaXY+JykuYXBwZW5kKHNlbGYuX19Db250ZW50KS5odG1sKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmICh0aXRsZSkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl8kb3JpZ2luLmF0dHIoJ3RpdGxlJywgdGl0bGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBmaW5hbCBjbGVhbmluZ1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRzZWxmLl8kb3JpZ2luLnJlbW92ZUNsYXNzKCd0b29sdGlwc3RlcmVkJyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHNlbGYuXyRvcmlnaW5cclxuXHRcdFx0XHRcdFx0LnJlbW92ZURhdGEoJ3Rvb2x0aXBzdGVyLW5zJylcclxuXHRcdFx0XHRcdFx0LnJlbW92ZURhdGEoJ3Rvb2x0aXBzdGVyLWluaXRpYWxUaXRsZScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdC8vIHJlbW92ZSB0aGUgaW5zdGFuY2UgbmFtZXNwYWNlIGZyb20gdGhlIGxpc3Qgb2YgbmFtZXNwYWNlcyBvZlxyXG5cdFx0XHRcdFx0Ly8gdG9vbHRpcHMgcHJlc2VudCBvbiB0aGUgZWxlbWVudFxyXG5cdFx0XHRcdFx0bnMgPSAkLmdyZXAobnMsIGZ1bmN0aW9uKGVsLCBpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBlbCAhPT0gc2VsZi5fX25hbWVzcGFjZTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0c2VsZi5fJG9yaWdpbi5kYXRhKCd0b29sdGlwc3Rlci1ucycsIG5zKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGxhc3QgZXZlbnRcclxuXHRcdFx0c2VsZi5fdHJpZ2dlcignZGVzdHJveWVkJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyB1bmJpbmQgcHJpdmF0ZSBhbmQgcHVibGljIGV2ZW50IGxpc3RlbmVyc1xyXG5cdFx0XHRzZWxmLl9vZmYoKTtcclxuXHRcdFx0c2VsZi5vZmYoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHJlbW92ZSBleHRlcm5hbCByZWZlcmVuY2VzLCBqdXN0IGluIGNhc2VcclxuXHRcdFx0c2VsZi5fX0NvbnRlbnQgPSBudWxsO1xyXG5cdFx0XHRzZWxmLl9fJGVtaXR0ZXJQcml2YXRlID0gbnVsbDtcclxuXHRcdFx0c2VsZi5fXyRlbWl0dGVyUHVibGljID0gbnVsbDtcclxuXHRcdFx0c2VsZi5fX29wdGlvbnMucGFyZW50ID0gbnVsbDtcclxuXHRcdFx0c2VsZi5fJG9yaWdpbiA9IG51bGw7XHJcblx0XHRcdHNlbGYuXyR0b29sdGlwID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0aGUgb2JqZWN0IGlzIG5vIGxvbmdlciByZWZlcmVuY2VkIGluIHRoZXJlIHRvIHByZXZlbnRcclxuXHRcdFx0Ly8gbWVtb3J5IGxlYWtzXHJcblx0XHRcdCQudG9vbHRpcHN0ZXIuX19pbnN0YW5jZXNMYXRlc3RBcnIgPSAkLmdyZXAoJC50b29sdGlwc3Rlci5fX2luc3RhbmNlc0xhdGVzdEFyciwgZnVuY3Rpb24oZWwsIGkpIHtcclxuXHRcdFx0XHRyZXR1cm4gc2VsZiAhPT0gZWw7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Y2xlYXJJbnRlcnZhbChzZWxmLl9fZ2FyYmFnZUNvbGxlY3Rvcik7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0c2VsZi5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyB3ZSByZXR1cm4gdGhlIHNjb3BlIHJhdGhlciB0aGFuIHRydWUgc28gdGhhdCB0aGUgY2FsbCB0b1xyXG5cdFx0Ly8gLnRvb2x0aXBzdGVyKCdkZXN0cm95JykgYWN0dWFsbHkgcmV0dXJucyB0aGUgbWF0Y2hlZCBlbGVtZW50c1xyXG5cdFx0Ly8gYW5kIGFwcGxpZXMgdG8gYWxsIG9mIHRoZW1cclxuXHRcdHJldHVybiBzZWxmO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRGlzYWJsZXMgdGhlIHRvb2x0aXBcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gY2xvc2UgZmlyc3QsIGluIGNhc2UgdGhlIHRvb2x0aXAgd291bGQgbm90IGRpc2FwcGVhciBvblxyXG5cdFx0XHQvLyBpdHMgb3duIChubyBjbG9zZSB0cmlnZ2VyKVxyXG5cdFx0XHR0aGlzLl9jbG9zZSgpO1xyXG5cdFx0XHR0aGlzLl9fZW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIEhUTUwgZWxlbWVudCBvZiB0aGUgb3JpZ2luXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0ZWxlbWVudE9yaWdpbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fJG9yaWdpblswXTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9fZGVzdHJveUVycm9yKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXR1cm5zIHRoZSBIVE1MIGVsZW1lbnQgb2YgdGhlIHRvb2x0aXBcclxuXHQgKlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRlbGVtZW50VG9vbHRpcDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fJHRvb2x0aXAgPyB0aGlzLl8kdG9vbHRpcFswXSA6IG51bGw7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBFbmFibGVzIHRoZSB0b29sdGlwXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGVuYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9fZW5hYmxlZCA9IHRydWU7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEFsaWFzLCBkZXByZWNhdGVkIGluIDQuMC4wXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0aGlkZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuXHRcdHJldHVybiB0aGlzLmNsb3NlKGNhbGxiYWNrKTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgdGhlIGluc3RhbmNlXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGluc3RhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogRm9yIHB1YmxpYyB1c2Ugb25seSwgbm90IHRvIGJlIHVzZWQgYnkgcGx1Z2lucyAodXNlIDo6X29mZigpIGluc3RlYWQpXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG9mZjogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdGlmICghdGhpcy5fX2Rlc3Ryb3llZCkge1xyXG5cdFx0XHR0aGlzLl9fJGVtaXR0ZXJQdWJsaWMub2ZmLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvciBwdWJsaWMgdXNlIG9ubHksIG5vdCB0byBiZSB1c2VkIGJ5IHBsdWdpbnMgKHVzZSA6Ol9vbigpIGluc3RlYWQpXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLm9uLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgcHVibGljIHVzZSBvbmx5LCBub3QgdG8gYmUgdXNlZCBieSBwbHVnaW5zXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0b25lOiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdHRoaXMuX18kZW1pdHRlclB1YmxpYy5vbmUuYXBwbHkodGhpcy5fXyRlbWl0dGVyUHVibGljLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEBzZWUgc2VsZjo6X29wZW5cclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0b3BlbjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuXHRcdFxyXG5cdFx0aWYgKCF0aGlzLl9fZGVzdHJveWVkKSB7XHJcblx0XHRcdHRoaXMuX29wZW4obnVsbCwgY2FsbGJhY2spO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBHZXQgb3Igc2V0IG9wdGlvbnMuIEZvciBpbnRlcm5hbCB1c2UgYW5kIGFkdmFuY2VkIHVzZXJzIG9ubHkuXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IG8gT3B0aW9uIG5hbWVcclxuXHQgKiBAcGFyYW0ge21peGVkfSB2YWwgb3B0aW9uYWwgQSBuZXcgdmFsdWUgZm9yIHRoZSBvcHRpb25cclxuXHQgKiBAcmV0dXJuIHttaXhlZHxzZWxmfSBJZiB2YWwgaXMgb21pdHRlZCwgdGhlIHZhbHVlIG9mIHRoZSBvcHRpb25cclxuXHQgKiBpcyByZXR1cm5lZCwgb3RoZXJ3aXNlIHRoZSBpbnN0YW5jZSBpdHNlbGYgaXMgcmV0dXJuZWRcclxuXHQgKiBAcHVibGljXHJcblx0ICovIFxyXG5cdG9wdGlvbjogZnVuY3Rpb24obywgdmFsKSB7XHJcblx0XHRcclxuXHRcdC8vIGdldHRlclxyXG5cdFx0aWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9fb3B0aW9uc1tvXTtcclxuXHRcdH1cclxuXHRcdC8vIHNldHRlclxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBjaGFuZ2UgdmFsdWVcclxuXHRcdFx0XHR0aGlzLl9fb3B0aW9uc1tvXSA9IHZhbDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBmb3JtYXRcclxuXHRcdFx0XHR0aGlzLl9fb3B0aW9uc0Zvcm1hdCgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIHJlLXByZXBhcmUgdGhlIHRyaWdnZXJzIGlmIG5lZWRlZFxyXG5cdFx0XHRcdGlmICgkLmluQXJyYXkobywgWyd0cmlnZ2VyJywgJ3RyaWdnZXJDbG9zZScsICd0cmlnZ2VyT3BlbiddKSA+PSAwKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9fcHJlcGFyZU9yaWdpbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAobyA9PT0gJ3NlbGZEZXN0cnVjdGlvbicpIHtcclxuXHRcdFx0XHRcdHRoaXMuX19wcmVwYXJlR0MoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5fX2Rlc3Ryb3lFcnJvcigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFRoaXMgbWV0aG9kIGlzIGluIGNoYXJnZSBvZiBzZXR0aW5nIHRoZSBwb3NpdGlvbiBhbmQgc2l6ZSBwcm9wZXJ0aWVzIG9mIHRoZSB0b29sdGlwLlxyXG5cdCAqIEFsbCB0aGUgaGFyZCB3b3JrIGlzIGRlbGVnYXRlZCB0byB0aGUgZGlzcGxheSBwbHVnaW4uXHJcblx0ICogTm90ZTogVGhlIHRvb2x0aXAgbWF5IGJlIGRldGFjaGVkIGZyb20gdGhlIERPTSBhdCB0aGUgbW9tZW50IHRoZSBtZXRob2QgaXMgY2FsbGVkIFxyXG5cdCAqIGJ1dCBtdXN0IGJlIGF0dGFjaGVkIGJ5IHRoZSBlbmQgb2YgdGhlIG1ldGhvZCBjYWxsLlxyXG5cdCAqIFxyXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuIERlZmluZWQgaWYgYW4gZXZlbnQgc3VjaCBhc1xyXG5cdCAqIHdpbmRvdyByZXNpemluZyB0cmlnZ2VyZWQgdGhlIHJlcG9zaXRpb25pbmdcclxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IHRvb2x0aXBJc0RldGFjaGVkIEZvciBpbnRlcm5hbCB1c2Ugb25seS4gU2V0IHRoaXMgdG8gdHJ1ZSBpZiB5b3VcclxuXHQgKiBrbm93IHRoYXQgdGhlIHRvb2x0aXAgbm90IGJlaW5nIGluIHRoZSBET00gaXMgbm90IGFuIGlzc3VlICh0eXBpY2FsbHkgd2hlbiB0aGVcclxuXHQgKiB0b29sdGlwIGVsZW1lbnQgaGFzIGp1c3QgYmVlbiBjcmVhdGVkIGJ1dCBoYXMgbm90IGJlZW4gYWRkZWQgdG8gdGhlIERPTSB5ZXQpLlxyXG5cdCAqIEByZXR1cm5zIHtzZWxmfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRyZXBvc2l0aW9uOiBmdW5jdGlvbihldmVudCwgdG9vbHRpcElzRGV0YWNoZWQpIHtcclxuXHRcdFxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHRpZiAoIXNlbGYuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGlzIHN0aWxsIG9wZW4gYW5kIHRoZSBvcmlnaW4gaXMgc3RpbGwgaW4gdGhlIERPTVxyXG5cdFx0XHRpZiAoc2VsZi5fX3N0YXRlICE9ICdjbG9zZWQnICYmIGJvZHlDb250YWlucyhzZWxmLl8kb3JpZ2luKSkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b29sdGlwIGhhcyBub3QgYmVlbiByZW1vdmVkIGZyb20gRE9NIG1hbnVhbGx5IChvciBpZiBpdFxyXG5cdFx0XHRcdC8vIGhhcyBiZWVuIGRldGFjaGVkIG9uIHB1cnBvc2UpXHJcblx0XHRcdFx0aWYgKHRvb2x0aXBJc0RldGFjaGVkIHx8IGJvZHlDb250YWlucyhzZWxmLl8kdG9vbHRpcCkpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKCF0b29sdGlwSXNEZXRhY2hlZCkge1xyXG5cdFx0XHRcdFx0XHQvLyBkZXRhY2ggaW4gY2FzZSB0aGUgdG9vbHRpcCBvdmVyZmxvd3MgdGhlIHdpbmRvdyBhbmQgYWRkc1xyXG5cdFx0XHRcdFx0XHQvLyBzY3JvbGxiYXJzIHRvIGl0LCBzbyBfX2dlb21ldHJ5IGNhbiBiZSBhY2N1cmF0ZVxyXG5cdFx0XHRcdFx0XHRzZWxmLl8kdG9vbHRpcC5kZXRhY2goKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gcmVmcmVzaCB0aGUgZ2VvbWV0cnkgb2JqZWN0IGJlZm9yZSBwYXNzaW5nIGl0IGFzIGEgaGVscGVyXHJcblx0XHRcdFx0XHRzZWxmLl9fR2VvbWV0cnkgPSBzZWxmLl9fZ2VvbWV0cnkoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gbGV0IGEgcGx1Z2luIGZvIHRoZSByZXN0XHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdFx0dHlwZTogJ3JlcG9zaXRpb24nLFxyXG5cdFx0XHRcdFx0XHRldmVudDogZXZlbnQsXHJcblx0XHRcdFx0XHRcdGhlbHBlcjoge1xyXG5cdFx0XHRcdFx0XHRcdGdlbzogc2VsZi5fX0dlb21ldHJ5XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHNlbGYuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHNlbGY7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBBbGlhcywgZGVwcmVjYXRlZCBpbiA0LjAuMFxyXG5cdCAqXHJcblx0ICogQHBhcmFtIGNhbGxiYWNrXHJcblx0ICogQHJldHVybnMge3NlbGZ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdHNob3c6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcGVuKGNhbGxiYWNrKTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFJldHVybnMgc29tZSBwcm9wZXJ0aWVzIGFib3V0IHRoZSBpbnN0YW5jZVxyXG5cdCAqIFxyXG5cdCAqIEByZXR1cm5zIHtvYmplY3R9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdHN0YXR1czogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGRlc3Ryb3llZDogdGhpcy5fX2Rlc3Ryb3llZCxcclxuXHRcdFx0ZW5hYmxlZDogdGhpcy5fX2VuYWJsZWQsXHJcblx0XHRcdG9wZW46IHRoaXMuX19zdGF0ZSAhPT0gJ2Nsb3NlZCcsXHJcblx0XHRcdHN0YXRlOiB0aGlzLl9fc3RhdGVcclxuXHRcdH07XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBGb3IgcHVibGljIHVzZSBvbmx5LCBub3QgdG8gYmUgdXNlZCBieSBwbHVnaW5zXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7c2VsZn1cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0dHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHRpZiAoIXRoaXMuX19kZXN0cm95ZWQpIHtcclxuXHRcdFx0dGhpcy5fXyRlbWl0dGVyUHVibGljLnRyaWdnZXJIYW5kbGVyLmFwcGx5KHRoaXMuX18kZW1pdHRlclB1YmxpYywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cykpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuX19kZXN0cm95RXJyb3IoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG59O1xyXG5cclxuJC5mbi50b29sdGlwc3RlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdC8vIGZvciB1c2luZyBpbiBjbG9zdXJlc1xyXG5cdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cyksXHJcblx0XHQvLyBjb21tb24gbWlzdGFrZTogYW4gSFRNTCBlbGVtZW50IGNhbid0IGJlIGluIHNldmVyYWwgdG9vbHRpcHMgYXQgdGhlIHNhbWUgdGltZVxyXG5cdFx0Y29udGVudENsb25pbmdXYXJuaW5nID0gJ1lvdSBhcmUgdXNpbmcgYSBzaW5nbGUgSFRNTCBlbGVtZW50IGFzIGNvbnRlbnQgZm9yIHNldmVyYWwgdG9vbHRpcHMuIFlvdSBwcm9iYWJseSB3YW50IHRvIHNldCB0aGUgY29udGVudENsb25pbmcgb3B0aW9uIHRvIFRSVUUuJztcclxuXHRcclxuXHQvLyB0aGlzIGhhcHBlbnMgd2l0aCAkKHNlbCkudG9vbHRpcHN0ZXIoLi4uKSB3aGVuICQoc2VsKSBkb2VzIG5vdCBtYXRjaCBhbnl0aGluZ1xyXG5cdGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHJcblx0XHQvLyBzdGlsbCBjaGFpbmFibGVcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHQvLyB0aGlzIGhhcHBlbnMgd2hlbiBjYWxsaW5nICQoc2VsKS50b29sdGlwc3RlcignbWV0aG9kTmFtZSBvciBvcHRpb25zJylcclxuXHQvLyB3aGVyZSAkKHNlbCkgbWF0Y2hlcyBvbmUgb3IgbW9yZSBlbGVtZW50c1xyXG5cdGVsc2Uge1xyXG5cdFx0XHJcblx0XHQvLyBtZXRob2QgY2FsbHNcclxuXHRcdGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciB2ID0gJyMqJH4mJztcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyByZXRyaWV2ZSB0aGUgbmFtZXBhY2VzIG9mIHRoZSB0b29sdGlwKHMpIHRoYXQgZXhpc3Qgb24gdGhhdCBlbGVtZW50LlxyXG5cdFx0XHRcdC8vIFdlIHdpbGwgaW50ZXJhY3Qgd2l0aCB0aGUgZmlyc3QgdG9vbHRpcCBvbmx5LlxyXG5cdFx0XHRcdHZhciBucyA9ICQodGhpcykuZGF0YSgndG9vbHRpcHN0ZXItbnMnKSxcclxuXHRcdFx0XHRcdC8vIHNlbGYgcmVwcmVzZW50cyB0aGUgaW5zdGFuY2Ugb2YgdGhlIGZpcnN0IHRvb2x0aXBzdGVyIHBsdWdpblxyXG5cdFx0XHRcdFx0Ly8gYXNzb2NpYXRlZCB0byB0aGUgY3VycmVudCBIVE1MIG9iamVjdCBvZiB0aGUgbG9vcFxyXG5cdFx0XHRcdFx0c2VsZiA9IG5zID8gJCh0aGlzKS5kYXRhKG5zWzBdKSA6IG51bGw7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gaWYgdGhlIGN1cnJlbnQgZWxlbWVudCBob2xkcyBhIHRvb2x0aXBzdGVyIGluc3RhbmNlXHJcblx0XHRcdFx0aWYgKHNlbGYpIHtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBzZWxmW2FyZ3NbMF1dID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoXHR0aGlzLmxlbmd0aCA+IDFcclxuXHRcdFx0XHRcdFx0XHQmJlx0YXJnc1swXSA9PSAnY29udGVudCdcclxuXHRcdFx0XHRcdFx0XHQmJlx0KFx0YXJnc1sxXSBpbnN0YW5jZW9mICRcclxuXHRcdFx0XHRcdFx0XHRcdHx8ICh0eXBlb2YgYXJnc1sxXSA9PSAnb2JqZWN0JyAmJiBhcmdzWzFdICE9IG51bGwgJiYgYXJnc1sxXS50YWdOYW1lKVxyXG5cdFx0XHRcdFx0XHRcdClcclxuXHRcdFx0XHRcdFx0XHQmJlx0IXNlbGYuX19vcHRpb25zLmNvbnRlbnRDbG9uaW5nXHJcblx0XHRcdFx0XHRcdFx0JiZcdHNlbGYuX19vcHRpb25zLmRlYnVnXHJcblx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGNvbnRlbnRDbG9uaW5nV2FybmluZyk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIG5vdGUgOiBhcmdzWzFdIGFuZCBhcmdzWzJdIG1heSBub3QgYmUgZGVmaW5lZFxyXG5cdFx0XHRcdFx0XHR2YXIgcmVzcCA9IHNlbGZbYXJnc1swXV0oYXJnc1sxXSwgYXJnc1syXSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIG1ldGhvZCBcIicrIGFyZ3NbMF0gKydcIicpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBpZiB0aGUgZnVuY3Rpb24gcmV0dXJuZWQgYW55dGhpbmcgb3RoZXIgdGhhbiB0aGUgaW5zdGFuY2VcclxuXHRcdFx0XHRcdC8vIGl0c2VsZiAod2hpY2ggaW1wbGllcyBjaGFpbmluZywgZXhjZXB0IGZvciB0aGUgYGluc3RhbmNlYCBtZXRob2QpXHJcblx0XHRcdFx0XHRpZiAocmVzcCAhPT0gc2VsZiB8fCBhcmdzWzBdID09PSAnaW5zdGFuY2UnKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2ID0gcmVzcDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHJldHVybiBmYWxzZSB0byBzdG9wIC5lYWNoIGl0ZXJhdGlvbiBvbiB0aGUgZmlyc3QgZWxlbWVudFxyXG5cdFx0XHRcdFx0XHQvLyBtYXRjaGVkIGJ5IHRoZSBzZWxlY3RvclxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdZb3UgY2FsbGVkIFRvb2x0aXBzdGVyXFwncyBcIicrIGFyZ3NbMF0gKydcIiBtZXRob2Qgb24gYW4gdW5pbml0aWFsaXplZCBlbGVtZW50Jyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiAodiAhPT0gJyMqJH4mJykgPyB2IDogdGhpcztcclxuXHRcdH1cclxuXHRcdC8vIGZpcnN0IGFyZ3VtZW50IGlzIHVuZGVmaW5lZCBvciBhbiBvYmplY3Q6IHRoZSB0b29sdGlwIGlzIGluaXRpYWxpemluZ1xyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyByZXNldCB0aGUgYXJyYXkgb2YgbGFzdCBpbml0aWFsaXplZCBvYmplY3RzXHJcblx0XHRcdCQudG9vbHRpcHN0ZXIuX19pbnN0YW5jZXNMYXRlc3RBcnIgPSBbXTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGlzIHRoZXJlIGEgZGVmaW5lZCB2YWx1ZSBmb3IgdGhlIG11bHRpcGxlIG9wdGlvbiBpbiB0aGUgb3B0aW9ucyBvYmplY3QgP1xyXG5cdFx0XHR2YXJcdG11bHRpcGxlSXNTZXQgPSBhcmdzWzBdICYmIGFyZ3NbMF0ubXVsdGlwbGUgIT09IHVuZGVmaW5lZCxcclxuXHRcdFx0XHQvLyBpZiB0aGUgbXVsdGlwbGUgb3B0aW9uIGlzIHNldCB0byB0cnVlLCBvciBpZiBpdCdzIG5vdCBkZWZpbmVkIGJ1dFxyXG5cdFx0XHRcdC8vIHNldCB0byB0cnVlIGluIHRoZSBkZWZhdWx0c1xyXG5cdFx0XHRcdG11bHRpcGxlID0gKG11bHRpcGxlSXNTZXQgJiYgYXJnc1swXS5tdWx0aXBsZSkgfHwgKCFtdWx0aXBsZUlzU2V0ICYmIGRlZmF1bHRzLm11bHRpcGxlKSxcclxuXHRcdFx0XHQvLyBzYW1lIGZvciBjb250ZW50XHJcblx0XHRcdFx0Y29udGVudElzU2V0ID0gYXJnc1swXSAmJiBhcmdzWzBdLmNvbnRlbnQgIT09IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRjb250ZW50ID0gKGNvbnRlbnRJc1NldCAmJiBhcmdzWzBdLmNvbnRlbnQpIHx8ICghY29udGVudElzU2V0ICYmIGRlZmF1bHRzLmNvbnRlbnQpLFxyXG5cdFx0XHRcdC8vIHNhbWUgZm9yIGNvbnRlbnRDbG9uaW5nXHJcblx0XHRcdFx0Y29udGVudENsb25pbmdJc1NldCA9IGFyZ3NbMF0gJiYgYXJnc1swXS5jb250ZW50Q2xvbmluZyAhPT0gdW5kZWZpbmVkLFxyXG5cdFx0XHRcdGNvbnRlbnRDbG9uaW5nID1cclxuXHRcdFx0XHRcdFx0KGNvbnRlbnRDbG9uaW5nSXNTZXQgJiYgYXJnc1swXS5jb250ZW50Q2xvbmluZylcclxuXHRcdFx0XHRcdHx8XHQoIWNvbnRlbnRDbG9uaW5nSXNTZXQgJiYgZGVmYXVsdHMuY29udGVudENsb25pbmcpLFxyXG5cdFx0XHRcdC8vIHNhbWUgZm9yIGRlYnVnXHJcblx0XHRcdFx0ZGVidWdJc1NldCA9IGFyZ3NbMF0gJiYgYXJnc1swXS5kZWJ1ZyAhPT0gdW5kZWZpbmVkLFxyXG5cdFx0XHRcdGRlYnVnID0gKGRlYnVnSXNTZXQgJiYgYXJnc1swXS5kZWJ1ZykgfHwgKCFkZWJ1Z0lzU2V0ICYmIGRlZmF1bHRzLmRlYnVnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChcdHRoaXMubGVuZ3RoID4gMVxyXG5cdFx0XHRcdCYmXHQoXHRjb250ZW50IGluc3RhbmNlb2YgJFxyXG5cdFx0XHRcdFx0fHwgKHR5cGVvZiBjb250ZW50ID09ICdvYmplY3QnICYmIGNvbnRlbnQgIT0gbnVsbCAmJiBjb250ZW50LnRhZ05hbWUpXHJcblx0XHRcdFx0KVxyXG5cdFx0XHRcdCYmXHQhY29udGVudENsb25pbmdcclxuXHRcdFx0XHQmJlx0ZGVidWdcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coY29udGVudENsb25pbmdXYXJuaW5nKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gY3JlYXRlIGEgdG9vbHRpcHN0ZXIgaW5zdGFuY2UgZm9yIGVhY2ggZWxlbWVudCBpZiBpdCBkb2Vzbid0XHJcblx0XHRcdC8vIGFscmVhZHkgaGF2ZSBvbmUgb3IgaWYgdGhlIG11bHRpcGxlIG9wdGlvbiBpcyBzZXQsIGFuZCBhdHRhY2ggdGhlXHJcblx0XHRcdC8vIG9iamVjdCB0byBpdFxyXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIGdvID0gZmFsc2UsXHJcblx0XHRcdFx0XHQkdGhpcyA9ICQodGhpcyksXHJcblx0XHRcdFx0XHRucyA9ICR0aGlzLmRhdGEoJ3Rvb2x0aXBzdGVyLW5zJyksXHJcblx0XHRcdFx0XHRvYmogPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghbnMpIHtcclxuXHRcdFx0XHRcdGdvID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAobXVsdGlwbGUpIHtcclxuXHRcdFx0XHRcdGdvID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoZGVidWcpIHtcclxuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdUb29sdGlwc3Rlcjogb25lIG9yIG1vcmUgdG9vbHRpcHMgYXJlIGFscmVhZHkgYXR0YWNoZWQgdG8gdGhlIGVsZW1lbnQgYmVsb3cuIElnbm9yaW5nLicpO1xyXG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2codGhpcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChnbykge1xyXG5cdFx0XHRcdFx0b2JqID0gbmV3ICQuVG9vbHRpcHN0ZXIodGhpcywgYXJnc1swXSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIHNhdmUgdGhlIHJlZmVyZW5jZSBvZiB0aGUgbmV3IGluc3RhbmNlXHJcblx0XHRcdFx0XHRpZiAoIW5zKSBucyA9IFtdO1xyXG5cdFx0XHRcdFx0bnMucHVzaChvYmouX19uYW1lc3BhY2UpO1xyXG5cdFx0XHRcdFx0JHRoaXMuZGF0YSgndG9vbHRpcHN0ZXItbnMnLCBucyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIHNhdmUgdGhlIGluc3RhbmNlIGl0c2VsZlxyXG5cdFx0XHRcdFx0JHRoaXMuZGF0YShvYmouX19uYW1lc3BhY2UsIG9iaik7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGNhbGwgb3VyIGNvbnN0cnVjdG9yIGN1c3RvbSBmdW5jdGlvbi5cclxuXHRcdFx0XHRcdC8vIHdlIGRvIHRoaXMgaGVyZSBhbmQgbm90IGluIDo6aW5pdCgpIGJlY2F1c2Ugd2Ugd2FudGVkXHJcblx0XHRcdFx0XHQvLyB0aGUgb2JqZWN0IHRvIGJlIHNhdmVkIGluICR0aGlzLmRhdGEgYmVmb3JlIHRyaWdnZXJpbmdcclxuXHRcdFx0XHRcdC8vIGl0XHJcblx0XHRcdFx0XHRpZiAob2JqLl9fb3B0aW9ucy5mdW5jdGlvbkluaXQpIHtcclxuXHRcdFx0XHRcdFx0b2JqLl9fb3B0aW9ucy5mdW5jdGlvbkluaXQuY2FsbChvYmosIG9iaiwge1xyXG5cdFx0XHRcdFx0XHRcdG9yaWdpbjogdGhpc1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gYW5kIG5vdyB0aGUgZXZlbnQsIGZvciB0aGUgcGx1Z2lucyBhbmQgY29yZSBlbWl0dGVyXHJcblx0XHRcdFx0XHRvYmouX3RyaWdnZXIoJ2luaXQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JC50b29sdGlwc3Rlci5fX2luc3RhbmNlc0xhdGVzdEFyci5wdXNoKG9iaik7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuLy8gVXRpbGl0aWVzXHJcblxyXG4vKipcclxuICogQSBjbGFzcyB0byBjaGVjayBpZiBhIHRvb2x0aXAgY2FuIGZpdCBpbiBnaXZlbiBkaW1lbnNpb25zXHJcbiAqIFxyXG4gKiBAcGFyYW0ge29iamVjdH0gJHRvb2x0aXAgVGhlIGpRdWVyeSB3cmFwcGVkIHRvb2x0aXAgZWxlbWVudCwgb3IgYSBjbG9uZSBvZiBpdFxyXG4gKi9cclxuZnVuY3Rpb24gUnVsZXIoJHRvb2x0aXApIHtcclxuXHRcclxuXHQvLyBsaXN0IG9mIGluc3RhbmNlIHZhcmlhYmxlc1xyXG5cdFxyXG5cdHRoaXMuJGNvbnRhaW5lcjtcclxuXHR0aGlzLmNvbnN0cmFpbnRzID0gbnVsbDtcclxuXHR0aGlzLl9fJHRvb2x0aXA7XHJcblx0XHJcblx0dGhpcy5fX2luaXQoJHRvb2x0aXApO1xyXG59XHJcblxyXG5SdWxlci5wcm90b3R5cGUgPSB7XHJcblx0XHJcblx0LyoqXHJcblx0ICogTW92ZSB0aGUgdG9vbHRpcCBpbnRvIGFuIGludmlzaWJsZSBkaXYgdGhhdCBkb2VzIG5vdCBhbGxvdyBvdmVyZmxvdyB0byBtYWtlXHJcblx0ICogc2l6ZSB0ZXN0cy4gTm90ZTogdGhlIHRvb2x0aXAgbWF5IG9yIG1heSBub3QgYmUgYXR0YWNoZWQgdG8gdGhlIERPTSBhdCB0aGVcclxuXHQgKiBtb21lbnQgdGhpcyBtZXRob2QgaXMgY2FsbGVkLCBpdCBkb2VzIG5vdCBtYXR0ZXIuXHJcblx0ICogXHJcblx0ICogQHBhcmFtIHtvYmplY3R9ICR0b29sdGlwIFRoZSBvYmplY3QgdG8gdGVzdC4gTWF5IGJlIGp1c3QgYSBjbG9uZSBvZiB0aGVcclxuXHQgKiBhY3R1YWwgdG9vbHRpcC5cclxuXHQgKiBAcHJpdmF0ZVxyXG5cdCAqL1xyXG5cdF9faW5pdDogZnVuY3Rpb24oJHRvb2x0aXApIHtcclxuXHRcdFxyXG5cdFx0dGhpcy5fXyR0b29sdGlwID0gJHRvb2x0aXA7XHJcblx0XHRcclxuXHRcdHRoaXMuX18kdG9vbHRpcFxyXG5cdFx0XHQuY3NzKHtcclxuXHRcdFx0XHQvLyBmb3Igc29tZSByZWFzb24gd2UgaGF2ZSB0byBzcGVjaWZ5IHRvcCBhbmQgbGVmdCAwXHJcblx0XHRcdFx0bGVmdDogMCxcclxuXHRcdFx0XHQvLyBhbnkgb3ZlcmZsb3cgd2lsbCBiZSBpZ25vcmVkIHdoaWxlIG1lYXN1cmluZ1xyXG5cdFx0XHRcdG92ZXJmbG93OiAnaGlkZGVuJyxcclxuXHRcdFx0XHQvLyBwb3NpdGlvbnMgYXQgKDAsMCkgd2l0aG91dCB0aGUgZGl2IHVzaW5nIDEwMCUgb2YgdGhlIGF2YWlsYWJsZSB3aWR0aFxyXG5cdFx0XHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG5cdFx0XHRcdHRvcDogMFxyXG5cdFx0XHR9KVxyXG5cdFx0XHQvLyBvdmVyZmxvdyBtdXN0IGJlIGF1dG8gZHVyaW5nIHRoZSB0ZXN0LiBXZSByZS1zZXQgdGhpcyBpbiBjYXNlXHJcblx0XHRcdC8vIGl0IHdlcmUgbW9kaWZpZWQgYnkgdGhlIHVzZXJcclxuXHRcdFx0LmZpbmQoJy50b29sdGlwc3Rlci1jb250ZW50JylcclxuXHRcdFx0XHQuY3NzKCdvdmVyZmxvdycsICdhdXRvJyk7XHJcblx0XHRcclxuXHRcdHRoaXMuJGNvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1ydWxlclwiPjwvZGl2PicpXHJcblx0XHRcdC5hcHBlbmQodGhpcy5fXyR0b29sdGlwKVxyXG5cdFx0XHQuYXBwZW5kVG8oZW52LndpbmRvdy5kb2N1bWVudC5ib2R5KTtcclxuXHR9LFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZvcmNlIHRoZSBicm93c2VyIHRvIHJlZHJhdyAocmUtcmVuZGVyKSB0aGUgdG9vbHRpcCBpbW1lZGlhdGVseS4gVGhpcyBpcyByZXF1aXJlZFxyXG5cdCAqIHdoZW4geW91IGNoYW5nZWQgc29tZSBDU1MgcHJvcGVydGllcyBhbmQgbmVlZCB0byBtYWtlIHNvbWV0aGluZyB3aXRoIGl0XHJcblx0ICogaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJyb3dzZXIgdG8gcmVkcmF3IGF0IHRoZSBlbmQgb2YgaW5zdHJ1Y3Rpb25zLlxyXG5cdCAqXHJcblx0ICogQHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM0ODUzNjUvaG93LWNhbi1pLWZvcmNlLXdlYmtpdC10by1yZWRyYXctcmVwYWludC10by1wcm9wYWdhdGUtc3R5bGUtY2hhbmdlc1xyXG5cdCAqIEBwcml2YXRlXHJcblx0ICovXHJcblx0X19mb3JjZVJlZHJhdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcclxuXHRcdC8vIG5vdGU6IHRoaXMgd291bGQgd29yayBidXQgZm9yIFdlYmtpdCBvbmx5XHJcblx0XHQvL3RoaXMuX18kdG9vbHRpcC5jbG9zZSgpO1xyXG5cdFx0Ly90aGlzLl9fJHRvb2x0aXBbMF0ub2Zmc2V0SGVpZ2h0O1xyXG5cdFx0Ly90aGlzLl9fJHRvb2x0aXAub3BlbigpO1xyXG5cdFx0XHJcblx0XHQvLyB3b3JrcyBpbiBGRiB0b29cclxuXHRcdHZhciAkcCA9IHRoaXMuX18kdG9vbHRpcC5wYXJlbnQoKTtcclxuXHRcdHRoaXMuX18kdG9vbHRpcC5kZXRhY2goKTtcclxuXHRcdHRoaXMuX18kdG9vbHRpcC5hcHBlbmRUbygkcCk7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBTZXQgbWF4aW11bSBkaW1lbnNpb25zIGZvciB0aGUgdG9vbHRpcC4gQSBjYWxsIHRvIDo6bWVhc3VyZSBhZnRlcndhcmRzXHJcblx0ICogd2lsbCB0ZWxsIHVzIGlmIHRoZSBjb250ZW50IG92ZXJmbG93cyBvciBpZiBpdCdzIG9rXHJcblx0ICpcclxuXHQgKiBAcGFyYW0ge2ludH0gd2lkdGhcclxuXHQgKiBAcGFyYW0ge2ludH0gaGVpZ2h0XHJcblx0ICogQHJldHVybiB7UnVsZXJ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGNvbnN0cmFpbjogZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xyXG5cdFx0XHJcblx0XHR0aGlzLmNvbnN0cmFpbnRzID0ge1xyXG5cdFx0XHR3aWR0aDogd2lkdGgsXHJcblx0XHRcdGhlaWdodDogaGVpZ2h0XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHR0aGlzLl9fJHRvb2x0aXAuY3NzKHtcclxuXHRcdFx0Ly8gd2UgZGlzYWJsZSBkaXNwbGF5OmZsZXgsIG90aGVyd2lzZSB0aGUgY29udGVudCB3b3VsZCBvdmVyZmxvdyB3aXRob3V0XHJcblx0XHRcdC8vIGNyZWF0aW5nIGhvcml6b250YWwgc2Nyb2xsaW5nICh3aGljaCB3ZSBuZWVkIHRvIGRldGVjdCkuXHJcblx0XHRcdGRpc3BsYXk6ICdibG9jaycsXHJcblx0XHRcdC8vIHJlc2V0IGFueSBwcmV2aW91cyBoZWlnaHRcclxuXHRcdFx0aGVpZ2h0OiAnJyxcclxuXHRcdFx0Ly8gd2UnbGwgY2hlY2sgaWYgaG9yaXpvbnRhbCBzY3JvbGxpbmcgb2NjdXJzXHJcblx0XHRcdG92ZXJmbG93OiAnYXV0bycsXHJcblx0XHRcdC8vIHdlJ2xsIHNldCB0aGUgd2lkdGggYW5kIHNlZSB3aGF0IGhlaWdodCBpcyBnZW5lcmF0ZWQgYW5kIGlmIHRoZXJlXHJcblx0XHRcdC8vIGlzIGhvcml6b250YWwgb3ZlcmZsb3dcclxuXHRcdFx0d2lkdGg6IHdpZHRoXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRcclxuXHQvKipcclxuXHQgKiBSZXNldCB0aGUgdG9vbHRpcCBjb250ZW50IG92ZXJmbG93IGFuZCByZW1vdmUgdGhlIHRlc3QgY29udGFpbmVyXHJcblx0ICogXHJcblx0ICogQHJldHVybnMge1J1bGVyfVxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFxyXG5cdFx0Ly8gaW4gY2FzZSB0aGUgZWxlbWVudCB3YXMgbm90IGEgY2xvbmVcclxuXHRcdHRoaXMuX18kdG9vbHRpcFxyXG5cdFx0XHQuZGV0YWNoKClcclxuXHRcdFx0LmZpbmQoJy50b29sdGlwc3Rlci1jb250ZW50JylcclxuXHRcdFx0XHQuY3NzKHtcclxuXHRcdFx0XHRcdC8vIHJlc2V0IHRvIENTUyB2YWx1ZVxyXG5cdFx0XHRcdFx0ZGlzcGxheTogJycsXHJcblx0XHRcdFx0XHRvdmVyZmxvdzogJydcclxuXHRcdFx0XHR9KTtcclxuXHRcdFxyXG5cdFx0dGhpcy4kY29udGFpbmVyLnJlbW92ZSgpO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmVtb3ZlcyBhbnkgY29uc3RyYWludHNcclxuXHQgKiBcclxuXHQgKiBAcmV0dXJucyB7UnVsZXJ9XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdGZyZWU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR0aGlzLmNvbnN0cmFpbnRzID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0Ly8gcmVzZXQgdG8gbmF0dXJhbCBzaXplXHJcblx0XHR0aGlzLl9fJHRvb2x0aXAuY3NzKHtcclxuXHRcdFx0ZGlzcGxheTogJycsXHJcblx0XHRcdGhlaWdodDogJycsXHJcblx0XHRcdG92ZXJmbG93OiAndmlzaWJsZScsXHJcblx0XHRcdHdpZHRoOiAnJ1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0XHJcblx0LyoqXHJcblx0ICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgdG9vbHRpcC4gV2hlbiBjb25zdHJhaW50cyBhcmUgYXBwbGllZCwgYWxzbyByZXR1cm5zXHJcblx0ICogd2hldGhlciB0aGUgdG9vbHRpcCBmaXRzIGluIHRoZSBwcm92aWRlZCBkaW1lbnNpb25zLlxyXG5cdCAqIFRoZSBpZGVhIGlzIHRvIHNlZSBpZiB0aGUgbmV3IGhlaWdodCBpcyBzbWFsbCBlbm91Z2ggYW5kIGlmIHRoZSBjb250ZW50IGRvZXNcclxuXHQgKiBub3Qgb3ZlcmZsb3cgaG9yaXpvbnRhbGx5LlxyXG5cdCAqXHJcblx0ICogQHBhcmFtIHtpbnR9IHdpZHRoXHJcblx0ICogQHBhcmFtIHtpbnR9IGhlaWdodFxyXG5cdCAqIEByZXR1cm5zIHtvYmplY3R9IEFuIG9iamVjdCB3aXRoIGEgYm9vbCBgZml0c2AgcHJvcGVydHkgYW5kIGEgYHNpemVgIHByb3BlcnR5XHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdG1lYXN1cmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHJcblx0XHR0aGlzLl9fZm9yY2VSZWRyYXcoKTtcclxuXHRcdFxyXG5cdFx0dmFyIHRvb2x0aXBCY3IgPSB0aGlzLl9fJHRvb2x0aXBbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcblx0XHRcdHJlc3VsdCA9IHsgc2l6ZToge1xyXG5cdFx0XHRcdC8vIGJjci53aWR0aC9oZWlnaHQgYXJlIG5vdCBkZWZpbmVkIGluIElFOC0gYnV0IGluIHRoaXNcclxuXHRcdFx0XHQvLyBjYXNlLCBiY3IucmlnaHQvYm90dG9tIHdpbGwgaGF2ZSB0aGUgc2FtZSB2YWx1ZVxyXG5cdFx0XHRcdC8vIGV4Y2VwdCBpbiBpT1MgOCsgd2hlcmUgdG9vbHRpcEJjci5ib3R0b20vcmlnaHQgYXJlIHdyb25nXHJcblx0XHRcdFx0Ly8gYWZ0ZXIgc2Nyb2xsaW5nIGZvciByZWFzb25zIHlldCB0byBiZSBkZXRlcm1pbmVkLlxyXG5cdFx0XHRcdC8vIHRvb2x0aXBCY3IudG9wL2xlZnQgbWlnaHQgbm90IGJlIDAsIHNlZSBpc3N1ZSAjNTE0XHJcblx0XHRcdFx0aGVpZ2h0OiB0b29sdGlwQmNyLmhlaWdodCB8fCAodG9vbHRpcEJjci5ib3R0b20gLSB0b29sdGlwQmNyLnRvcCksXHJcblx0XHRcdFx0d2lkdGg6IHRvb2x0aXBCY3Iud2lkdGggfHwgKHRvb2x0aXBCY3IucmlnaHQgLSB0b29sdGlwQmNyLmxlZnQpXHJcblx0XHRcdH19O1xyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5jb25zdHJhaW50cykge1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbm90ZTogd2UgdXNlZCB0byB1c2Ugb2Zmc2V0V2lkdGggaW5zdGVhZCBvZiBib3VuZGluZ1JlY3RDbGllbnQgYnV0XHJcblx0XHRcdC8vIGl0IHJldHVybmVkIHJvdW5kZWQgdmFsdWVzLCBjYXVzaW5nIGlzc3VlcyB3aXRoIHN1Yi1waXhlbCBsYXlvdXRzLlxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbm90ZTI6IG5vdGljZWQgdGhhdCB0aGUgYmNyV2lkdGggb2YgdGV4dCBjb250ZW50IG9mIGEgZGl2IHdhcyBvbmNlXHJcblx0XHRcdC8vIGdyZWF0ZXIgdGhhbiB0aGUgYmNyV2lkdGggb2YgaXRzIGNvbnRhaW5lciBieSAxcHgsIGNhdXNpbmcgdGhlIGZpbmFsXHJcblx0XHRcdC8vIHRvb2x0aXAgYm94IHRvIGJlIHRvbyBzbWFsbCBmb3IgaXRzIGNvbnRlbnQuIEhvd2V2ZXIsIGV2YWx1YXRpbmdcclxuXHRcdFx0Ly8gdGhlaXIgd2lkdGhzIG9uZSBhZ2FpbnN0IHRoZSBvdGhlciAoYmVsb3cpIHN1cnByaXNpbmdseSByZXR1cm5lZFxyXG5cdFx0XHQvLyBlcXVhbGl0eS4gSGFwcGVuZWQgb25seSBvbmNlIGluIENocm9tZSA0OCwgd2FzIG5vdCBhYmxlIHRvIHJlcHJvZHVjZVxyXG5cdFx0XHQvLyA9PiBqdXN0IGhhdmluZyBmdW4gd2l0aCBmbG9hdCBwb3NpdGlvbiB2YWx1ZXMuLi5cclxuXHRcdFx0XHJcblx0XHRcdHZhciAkY29udGVudCA9IHRoaXMuX18kdG9vbHRpcC5maW5kKCcudG9vbHRpcHN0ZXItY29udGVudCcpLFxyXG5cdFx0XHRcdGhlaWdodCA9IHRoaXMuX18kdG9vbHRpcC5vdXRlckhlaWdodCgpLFxyXG5cdFx0XHRcdGNvbnRlbnRCY3IgPSAkY29udGVudFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuXHRcdFx0XHRmaXRzID0ge1xyXG5cdFx0XHRcdFx0aGVpZ2h0OiBoZWlnaHQgPD0gdGhpcy5jb25zdHJhaW50cy5oZWlnaHQsXHJcblx0XHRcdFx0XHR3aWR0aDogKFxyXG5cdFx0XHRcdFx0XHQvLyB0aGlzIGNvbmRpdGlvbiBhY2NvdW50cyBmb3IgbWluLXdpZHRoIHByb3BlcnR5IHRoYXRcclxuXHRcdFx0XHRcdFx0Ly8gbWF5IGFwcGx5XHJcblx0XHRcdFx0XHRcdHRvb2x0aXBCY3Iud2lkdGggPD0gdGhpcy5jb25zdHJhaW50cy53aWR0aFxyXG5cdFx0XHRcdFx0XHRcdC8vIHRoZSAtMSBpcyBoZXJlIGJlY2F1c2Ugc2Nyb2xsV2lkdGggYWN0dWFsbHkgcmV0dXJuc1xyXG5cdFx0XHRcdFx0XHRcdC8vIGEgcm91bmRlZCB2YWx1ZSwgYW5kIG1heSBiZSBncmVhdGVyIHRoYW4gYmNyLndpZHRoIGlmXHJcblx0XHRcdFx0XHRcdFx0Ly8gaXQgd2FzIHJvdW5kZWQgdXAuIFRoaXMgbWF5IGNhdXNlIGFuIGlzc3VlIGZvciBjb250ZW50c1xyXG5cdFx0XHRcdFx0XHRcdC8vIHdoaWNoIGFjdHVhbGx5IHJlYWxseSBvdmVyZmxvdyAgYnkgMXB4IG9yIHNvLCBidXQgdGhhdFxyXG5cdFx0XHRcdFx0XHRcdC8vIHNob3VsZCBiZSByYXJlLiBOb3Qgc3VyZSBob3cgdG8gc29sdmUgdGhpcyBlZmZpY2llbnRseS5cclxuXHRcdFx0XHRcdFx0XHQvLyBTZWUgaHR0cDovL2Jsb2dzLm1zZG4uY29tL2IvaWUvYXJjaGl2ZS8yMDEyLzAyLzE3L3N1Yi1waXhlbC1yZW5kZXJpbmctYW5kLXRoZS1jc3Mtb2JqZWN0LW1vZGVsLmFzcHhcclxuXHRcdFx0XHRcdFx0JiZcdGNvbnRlbnRCY3Iud2lkdGggPj0gJGNvbnRlbnRbMF0uc2Nyb2xsV2lkdGggLSAxXHJcblx0XHRcdFx0XHQpXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0XHJcblx0XHRcdHJlc3VsdC5maXRzID0gZml0cy5oZWlnaHQgJiYgZml0cy53aWR0aDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gb2xkIHZlcnNpb25zIG9mIElFIGdldCB0aGUgd2lkdGggd3JvbmcgZm9yIHNvbWUgcmVhc29uIGFuZCBpdCBjYXVzZXNcclxuXHRcdC8vIHRoZSB0ZXh0IHRvIGJlIGJyb2tlbiB0byBhIG5ldyBsaW5lLCBzbyB3ZSByb3VuZCBpdCB1cC4gSWYgdGhlIHdpZHRoXHJcblx0XHQvLyBpcyB0aGUgd2lkdGggb2YgdGhlIHNjcmVlbiB0aG91Z2gsIHdlIGNhbiBhc3N1bWUgaXQgaXMgYWNjdXJhdGUuXHJcblx0XHRpZiAoXHRlbnYuSUVcclxuXHRcdFx0JiZcdGVudi5JRSA8PSAxMVxyXG5cdFx0XHQmJlx0cmVzdWx0LnNpemUud2lkdGggIT09IGVudi53aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoXHJcblx0XHQpIHtcclxuXHRcdFx0cmVzdWx0LnNpemUud2lkdGggPSBNYXRoLmNlaWwocmVzdWx0LnNpemUud2lkdGgpICsgMTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9XHJcbn07XHJcblxyXG4vLyBxdWljayAmIGRpcnR5IGNvbXBhcmUgZnVuY3Rpb24sIG5vdCBiaWplY3RpdmUgbm9yIG11bHRpZGltZW5zaW9uYWxcclxuZnVuY3Rpb24gYXJlRXF1YWwoYSxiKSB7XHJcblx0dmFyIHNhbWUgPSB0cnVlO1xyXG5cdCQuZWFjaChhLCBmdW5jdGlvbihpLCBfKSB7XHJcblx0XHRpZiAoYltpXSA9PT0gdW5kZWZpbmVkIHx8IGFbaV0gIT09IGJbaV0pIHtcclxuXHRcdFx0c2FtZSA9IGZhbHNlO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0cmV0dXJuIHNhbWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBIGZhc3QgZnVuY3Rpb24gdG8gY2hlY2sgaWYgYW4gZWxlbWVudCBpcyBzdGlsbCBpbiB0aGUgRE9NLiBJdFxyXG4gKiB0cmllcyB0byB1c2UgYW4gaWQgYXMgaWRzIGFyZSBpbmRleGVkIGJ5IHRoZSBicm93c2VyLCBvciBmYWxsc1xyXG4gKiBiYWNrIHRvIGpRdWVyeSdzIGBjb250YWluc2AgbWV0aG9kLiBNYXkgZmFpbCBpZiB0d28gZWxlbWVudHNcclxuICogaGF2ZSB0aGUgc2FtZSBpZCwgYnV0IHNvIGJlIGl0XHJcbiAqXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSAkb2JqIEEgalF1ZXJ5LXdyYXBwZWQgSFRNTCBlbGVtZW50XHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAqL1xyXG5mdW5jdGlvbiBib2R5Q29udGFpbnMoJG9iaikge1xyXG5cdHZhciBpZCA9ICRvYmouYXR0cignaWQnKSxcclxuXHRcdGVsID0gaWQgPyBlbnYud2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKSA6IG51bGw7XHJcblx0Ly8gbXVzdCBhbHNvIGNoZWNrIHRoYXQgdGhlIGVsZW1lbnQgd2l0aCB0aGUgaWQgaXMgdGhlIG9uZSB3ZSB3YW50XHJcblx0cmV0dXJuIGVsID8gZWwgPT09ICRvYmpbMF0gOiAkLmNvbnRhaW5zKGVudi53aW5kb3cuZG9jdW1lbnQuYm9keSwgJG9ialswXSk7XHJcbn1cclxuXHJcbi8vIGRldGVjdCBJRSB2ZXJzaW9ucyBmb3IgZGlydHkgZml4ZXNcclxudmFyIHVBID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG5pZiAodUEuaW5kZXhPZignbXNpZScpICE9IC0xKSBlbnYuSUUgPSBwYXJzZUludCh1QS5zcGxpdCgnbXNpZScpWzFdKTtcclxuZWxzZSBpZiAodUEudG9Mb3dlckNhc2UoKS5pbmRleE9mKCd0cmlkZW50JykgIT09IC0xICYmIHVBLmluZGV4T2YoJyBydjoxMScpICE9PSAtMSkgZW52LklFID0gMTE7XHJcbmVsc2UgaWYgKHVBLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZWRnZS8nKSAhPSAtMSkgZW52LklFID0gcGFyc2VJbnQodUEudG9Mb3dlckNhc2UoKS5zcGxpdCgnZWRnZS8nKVsxXSk7XHJcblxyXG4vLyBkZXRlY3Rpbmcgc3VwcG9ydCBmb3IgQ1NTIHRyYW5zaXRpb25zXHJcbmZ1bmN0aW9uIHRyYW5zaXRpb25TdXBwb3J0KCkge1xyXG5cdFxyXG5cdC8vIGVudi53aW5kb3cgaXMgbm90IGRlZmluZWQgeWV0IHdoZW4gdGhpcyBpcyBjYWxsZWRcclxuXHRpZiAoIXdpbikgcmV0dXJuIGZhbHNlO1xyXG5cdFxyXG5cdHZhciBiID0gd2luLmRvY3VtZW50LmJvZHkgfHwgd2luLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcclxuXHRcdHMgPSBiLnN0eWxlLFxyXG5cdFx0cCA9ICd0cmFuc2l0aW9uJyxcclxuXHRcdHYgPSBbJ01veicsICdXZWJraXQnLCAnS2h0bWwnLCAnTycsICdtcyddO1xyXG5cdFxyXG5cdGlmICh0eXBlb2Ygc1twXSA9PSAnc3RyaW5nJykgeyByZXR1cm4gdHJ1ZTsgfVxyXG5cdFxyXG5cdHAgPSBwLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcC5zdWJzdHIoMSk7XHJcblx0Zm9yICh2YXIgaT0wOyBpPHYubGVuZ3RoOyBpKyspIHtcclxuXHRcdGlmICh0eXBlb2Ygc1t2W2ldICsgcF0gPT0gJ3N0cmluZycpIHsgcmV0dXJuIHRydWU7IH1cclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vLyB3ZSdsbCByZXR1cm4galF1ZXJ5IGZvciBwbHVnaW5zIG5vdCB0byBoYXZlIHRvIGRlY2xhcmUgaXQgYXMgYSBkZXBlbmRlbmN5LFxyXG4vLyBidXQgaXQncyBkb25lIGJ5IGEgYnVpbGQgdGFzayBzaW5jZSBpdCBzaG91bGQgYmUgaW5jbHVkZWQgb25seSBvbmNlIGF0IHRoZVxyXG4vLyBlbmQgd2hlbiB3ZSBjb25jYXRlbmF0ZSB0aGUgbWFpbiBmaWxlIHdpdGggYSBwbHVnaW5cclxuLy8gc2lkZVRpcCBpcyBUb29sdGlwc3RlcidzIGRlZmF1bHQgcGx1Z2luLlxyXG4vLyBUaGlzIGZpbGUgd2lsbCBiZSBVTURpZmllZCBieSBhIGJ1aWxkIHRhc2suXHJcblxyXG52YXIgcGx1Z2luTmFtZSA9ICd0b29sdGlwc3Rlci5zaWRlVGlwJztcclxuXHJcbiQudG9vbHRpcHN0ZXIuX3BsdWdpbih7XHJcblx0bmFtZTogcGx1Z2luTmFtZSxcclxuXHRpbnN0YW5jZToge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBEZWZhdWx0cyBhcmUgcHJvdmlkZWQgYXMgYSBmdW5jdGlvbiBmb3IgYW4gZWFzeSBvdmVycmlkZSBieSBpbmhlcml0YW5jZVxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge29iamVjdH0gQW4gb2JqZWN0IHdpdGggdGhlIGRlZmF1bHRzIG9wdGlvbnNcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9fZGVmYXVsdHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9vbHRpcCBzaG91bGQgZGlzcGxheSBhbiBhcnJvdyB0aGF0IHBvaW50cyB0byB0aGUgb3JpZ2luXHJcblx0XHRcdFx0YXJyb3c6IHRydWUsXHJcblx0XHRcdFx0Ly8gdGhlIGRpc3RhbmNlIGluIHBpeGVscyBiZXR3ZWVuIHRoZSB0b29sdGlwIGFuZCB0aGUgb3JpZ2luXHJcblx0XHRcdFx0ZGlzdGFuY2U6IDYsXHJcblx0XHRcdFx0Ly8gYWxsb3dzIHRvIGVhc2lseSBjaGFuZ2UgdGhlIHBvc2l0aW9uIG9mIHRoZSB0b29sdGlwXHJcblx0XHRcdFx0ZnVuY3Rpb25Qb3NpdGlvbjogbnVsbCxcclxuXHRcdFx0XHRtYXhXaWR0aDogbnVsbCxcclxuXHRcdFx0XHQvLyB1c2VkIHRvIGFjY29tb2RhdGUgdGhlIGFycm93IG9mIHRvb2x0aXAgaWYgdGhlcmUgaXMgb25lLlxyXG5cdFx0XHRcdC8vIEZpcnN0IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBhcnJvdyB0YXJnZXQgaXMgbm90IHRvbyBjbG9zZVxyXG5cdFx0XHRcdC8vIHRvIHRoZSBlZGdlIG9mIHRoZSB0b29sdGlwLCBzbyB0aGUgYXJyb3cgZG9lcyBub3Qgb3ZlcmZsb3dcclxuXHRcdFx0XHQvLyB0aGUgdG9vbHRpcC4gU2Vjb25kbHkgd2hlbiB3ZSByZXBvc2l0aW9uIHRoZSB0b29sdGlwIHRvXHJcblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRoYXQgaXQncyBwb3NpdGlvbmVkIGluIHN1Y2ggYSB3YXkgdGhhdCB0aGUgYXJyb3cgaXNcclxuXHRcdFx0XHQvLyBzdGlsbCBwb2ludGluZyBhdCB0aGUgdGFyZ2V0IChhbmQgbm90IGEgZmV3IHBpeGVscyBiZXlvbmQgaXQpLlxyXG5cdFx0XHRcdC8vIEl0IHNob3VsZCBiZSBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gaGFsZiB0aGUgd2lkdGggb2ZcclxuXHRcdFx0XHQvLyB0aGUgYXJyb3cgKGJ5IHdpZHRoIHdlIG1lYW4gdGhlIHNpemUgb2YgdGhlIHNpZGUgd2hpY2ggdG91Y2hlc1xyXG5cdFx0XHRcdC8vIHRoZSBzaWRlIG9mIHRoZSB0b29sdGlwKS5cclxuXHRcdFx0XHRtaW5JbnRlcnNlY3Rpb246IDE2LFxyXG5cdFx0XHRcdG1pbldpZHRoOiAwLFxyXG5cdFx0XHRcdC8vIGRlcHJlY2F0ZWQgaW4gNC4wLjAuIExpc3RlZCBmb3IgX29wdGlvbnNFeHRyYWN0IHRvIHBpY2sgaXQgdXBcclxuXHRcdFx0XHRwb3NpdGlvbjogbnVsbCxcclxuXHRcdFx0XHRzaWRlOiAndG9wJyxcclxuXHRcdFx0XHQvLyBzZXQgdG8gZmFsc2UgdG8gcG9zaXRpb24gdGhlIHRvb2x0aXAgcmVsYXRpdmVseSB0byB0aGUgZG9jdW1lbnQgcmF0aGVyXHJcblx0XHRcdFx0Ly8gdGhhbiB0aGUgd2luZG93IHdoZW4gd2Ugb3BlbiBpdFxyXG5cdFx0XHRcdHZpZXdwb3J0QXdhcmU6IHRydWVcclxuXHRcdFx0fTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogUnVuIG9uY2U6IGF0IGluc3RhbnRpYXRpb24gb2YgdGhlIHBsdWdpblxyXG5cdFx0ICpcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBpbnN0YW5jZSBUaGUgdG9vbHRpcHN0ZXIgb2JqZWN0IHRoYXQgaW5zdGFudGlhdGVkIHRoaXMgcGx1Z2luXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX2luaXQ6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBsaXN0IG9mIGluc3RhbmNlIHZhcmlhYmxlc1xyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlID0gaW5zdGFuY2U7XHJcblx0XHRcdHNlbGYuX19uYW1lc3BhY2UgPSAndG9vbHRpcHN0ZXItc2lkZVRpcC0nKyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkqMTAwMDAwMCk7XHJcblx0XHRcdHNlbGYuX19wcmV2aW91c1N0YXRlID0gJ2Nsb3NlZCc7XHJcblx0XHRcdHNlbGYuX19vcHRpb25zO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaW5pdGlhbCBmb3JtYXR0aW5nXHJcblx0XHRcdHNlbGYuX19vcHRpb25zRm9ybWF0KCk7XHJcblx0XHRcdFxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuX29uKCdzdGF0ZS4nKyBzZWxmLl9fbmFtZXNwYWNlLCBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChldmVudC5zdGF0ZSA9PSAnY2xvc2VkJykge1xyXG5cdFx0XHRcdFx0c2VsZi5fX2Nsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKGV2ZW50LnN0YXRlID09ICdhcHBlYXJpbmcnICYmIHNlbGYuX19wcmV2aW91c1N0YXRlID09ICdjbG9zZWQnKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9fY3JlYXRlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNlbGYuX19wcmV2aW91c1N0YXRlID0gZXZlbnQuc3RhdGU7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gcmVmb3JtYXQgZXZlcnkgdGltZSB0aGUgb3B0aW9ucyBhcmUgY2hhbmdlZFxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuX29uKCdvcHRpb25zLicrIHNlbGYuX19uYW1lc3BhY2UsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuX19vcHRpb25zRm9ybWF0KCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl9vbigncmVwb3NpdGlvbi4nKyBzZWxmLl9fbmFtZXNwYWNlLCBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0c2VsZi5fX3JlcG9zaXRpb24oZS5ldmVudCwgZS5oZWxwZXIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogQ2FsbGVkIHdoZW4gdGhlIHRvb2x0aXAgaGFzIGNsb3NlZFxyXG5cdFx0ICogXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX2Nsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGRldGFjaCBvdXIgY29udGVudCBvYmplY3QgZmlyc3QsIHNvIHRoZSBuZXh0IGpRdWVyeSdzIHJlbW92ZSgpXHJcblx0XHRcdC8vIGNhbGwgZG9lcyBub3QgdW5iaW5kIGl0cyBldmVudCBoYW5kbGVyc1xyXG5cdFx0XHRpZiAodGhpcy5fX2luc3RhbmNlLmNvbnRlbnQoKSBpbnN0YW5jZW9mICQpIHtcclxuXHRcdFx0XHR0aGlzLl9faW5zdGFuY2UuY29udGVudCgpLmRldGFjaCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyByZW1vdmUgdGhlIHRvb2x0aXAgZnJvbSB0aGUgRE9NXHJcblx0XHRcdHRoaXMuX19pbnN0YW5jZS5fJHRvb2x0aXAucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMuX19pbnN0YW5jZS5fJHRvb2x0aXAgPSBudWxsO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBDcmVhdGVzIHRoZSBIVE1MIGVsZW1lbnQgb2YgdGhlIHRvb2x0aXAuXHJcblx0XHQgKiBcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9fY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHJcblx0XHRcdC8vIG5vdGU6IHdlIHdyYXAgd2l0aCBhIC50b29sdGlwc3Rlci1ib3ggZGl2IHRvIGJlIGFibGUgdG8gc2V0IGEgbWFyZ2luIG9uIGl0XHJcblx0XHRcdC8vICgudG9vbHRpcHN0ZXItYmFzZSBtdXN0IG5vdCBoYXZlIG9uZSlcclxuXHRcdFx0dmFyICRodG1sID0gJChcclxuXHRcdFx0XHQnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWJhc2UgdG9vbHRpcHN0ZXItc2lkZXRpcFwiPicgK1xyXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1ib3hcIj4nICtcclxuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1jb250ZW50XCI+PC9kaXY+JyArXHJcblx0XHRcdFx0XHQnPC9kaXY+JyArXHJcblx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWFycm93XCI+JyArXHJcblx0XHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwidG9vbHRpcHN0ZXItYXJyb3ctdW5jcm9wcGVkXCI+JyArXHJcblx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJ0b29sdGlwc3Rlci1hcnJvdy1ib3JkZXJcIj48L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cInRvb2x0aXBzdGVyLWFycm93LWJhY2tncm91bmRcIj48L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdFx0JzwvZGl2PicgK1xyXG5cdFx0XHRcdCc8L2Rpdj4nXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBoaWRlIGFycm93IGlmIGFza2VkXHJcblx0XHRcdGlmICghdGhpcy5fX29wdGlvbnMuYXJyb3cpIHtcclxuXHRcdFx0XHQkaHRtbFxyXG5cdFx0XHRcdFx0LmZpbmQoJy50b29sdGlwc3Rlci1ib3gnKVxyXG5cdFx0XHRcdFx0XHQuY3NzKCdtYXJnaW4nLCAwKVxyXG5cdFx0XHRcdFx0XHQuZW5kKClcclxuXHRcdFx0XHRcdC5maW5kKCcudG9vbHRpcHN0ZXItYXJyb3cnKVxyXG5cdFx0XHRcdFx0XHQuaGlkZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBhcHBseSBtaW4vbWF4IHdpZHRoIGlmIGFza2VkXHJcblx0XHRcdGlmICh0aGlzLl9fb3B0aW9ucy5taW5XaWR0aCkge1xyXG5cdFx0XHRcdCRodG1sLmNzcygnbWluLXdpZHRoJywgdGhpcy5fX29wdGlvbnMubWluV2lkdGggKyAncHgnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGhpcy5fX29wdGlvbnMubWF4V2lkdGgpIHtcclxuXHRcdFx0XHQkaHRtbC5jc3MoJ21heC13aWR0aCcsIHRoaXMuX19vcHRpb25zLm1heFdpZHRoICsgJ3B4Jyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuX19pbnN0YW5jZS5fJHRvb2x0aXAgPSAkaHRtbDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHRlbGwgdGhlIGluc3RhbmNlIHRoYXQgdGhlIHRvb2x0aXAgZWxlbWVudCBoYXMgYmVlbiBjcmVhdGVkXHJcblx0XHRcdHRoaXMuX19pbnN0YW5jZS5fdHJpZ2dlcignY3JlYXRlZCcpO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBVc2VkIHdoZW4gdGhlIHBsdWdpbiBpcyB0byBiZSB1bnBsdWdnZWRcclxuXHRcdCAqXHJcblx0XHQgKiBAcHJpdmF0ZVxyXG5cdFx0ICovXHJcblx0XHRfX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9faW5zdGFuY2UuX29mZignLicrIHNlbGYuX19uYW1lc3BhY2UpO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiAoUmUpY29tcHV0ZSB0aGlzLl9fb3B0aW9ucyBmcm9tIHRoZSBvcHRpb25zIGRlY2xhcmVkIHRvIHRoZSBpbnN0YW5jZVxyXG5cdFx0ICpcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9fb3B0aW9uc0Zvcm1hdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBnZXQgdGhlIG9wdGlvbnNcclxuXHRcdFx0c2VsZi5fX29wdGlvbnMgPSBzZWxmLl9faW5zdGFuY2UuX29wdGlvbnNFeHRyYWN0KHBsdWdpbk5hbWUsIHNlbGYuX19kZWZhdWx0cygpKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCBkZXByZWNhdGVkIGluIHY0LjAuMFxyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMucG9zaXRpb24pIHtcclxuXHRcdFx0XHRzZWxmLl9fb3B0aW9ucy5zaWRlID0gc2VsZi5fX29wdGlvbnMucG9zaXRpb247XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIG9wdGlvbnMgZm9ybWF0dGluZ1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZm9ybWF0IGRpc3RhbmNlIGFzIGEgZm91ci1jZWxsIGFycmF5IGlmIGl0IGFpbid0IG9uZSB5ZXQgYW5kIHRoZW4gbWFrZVxyXG5cdFx0XHQvLyBpdCBhbiBvYmplY3Qgd2l0aCB0b3AvYm90dG9tL2xlZnQvcmlnaHQgcHJvcGVydGllc1xyXG5cdFx0XHRpZiAodHlwZW9mIHNlbGYuX19vcHRpb25zLmRpc3RhbmNlICE9ICdvYmplY3QnKSB7XHJcblx0XHRcdFx0c2VsZi5fX29wdGlvbnMuZGlzdGFuY2UgPSBbc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VdO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZS5sZW5ndGggPCA0KSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzFdID09PSB1bmRlZmluZWQpIHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzFdID0gc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMF07XHJcblx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzJdID09PSB1bmRlZmluZWQpIHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzJdID0gc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMF07XHJcblx0XHRcdFx0aWYgKHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzNdID09PSB1bmRlZmluZWQpIHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzNdID0gc2VsZi5fX29wdGlvbnMuZGlzdGFuY2VbMV07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2VsZi5fX29wdGlvbnMuZGlzdGFuY2UgPSB7XHJcblx0XHRcdFx0XHR0b3A6IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzBdLFxyXG5cdFx0XHRcdFx0cmlnaHQ6IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzFdLFxyXG5cdFx0XHRcdFx0Ym90dG9tOiBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVsyXSxcclxuXHRcdFx0XHRcdGxlZnQ6IHNlbGYuX19vcHRpb25zLmRpc3RhbmNlWzNdXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbGV0J3MgdHJhbnNmb3JtOlxyXG5cdFx0XHQvLyAndG9wJyBpbnRvIFsndG9wJywgJ2JvdHRvbScsICdyaWdodCcsICdsZWZ0J11cclxuXHRcdFx0Ly8gJ3JpZ2h0JyBpbnRvIFsncmlnaHQnLCAnbGVmdCcsICd0b3AnLCAnYm90dG9tJ11cclxuXHRcdFx0Ly8gJ2JvdHRvbScgaW50byBbJ2JvdHRvbScsICd0b3AnLCAncmlnaHQnLCAnbGVmdCddXHJcblx0XHRcdC8vICdsZWZ0JyBpbnRvIFsnbGVmdCcsICdyaWdodCcsICd0b3AnLCAnYm90dG9tJ11cclxuXHRcdFx0aWYgKHR5cGVvZiBzZWxmLl9fb3B0aW9ucy5zaWRlID09ICdzdHJpbmcnKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIG9wcG9zaXRlcyA9IHtcclxuXHRcdFx0XHRcdCd0b3AnOiAnYm90dG9tJyxcclxuXHRcdFx0XHRcdCdyaWdodCc6ICdsZWZ0JyxcclxuXHRcdFx0XHRcdCdib3R0b20nOiAndG9wJyxcclxuXHRcdFx0XHRcdCdsZWZ0JzogJ3JpZ2h0J1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0c2VsZi5fX29wdGlvbnMuc2lkZSA9IFtzZWxmLl9fb3B0aW9ucy5zaWRlLCBvcHBvc2l0ZXNbc2VsZi5fX29wdGlvbnMuc2lkZV1dO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChzZWxmLl9fb3B0aW9ucy5zaWRlWzBdID09ICdsZWZ0JyB8fCBzZWxmLl9fb3B0aW9ucy5zaWRlWzBdID09ICdyaWdodCcpIHtcclxuXHRcdFx0XHRcdHNlbGYuX19vcHRpb25zLnNpZGUucHVzaCgndG9wJywgJ2JvdHRvbScpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHNlbGYuX19vcHRpb25zLnNpZGUucHVzaCgncmlnaHQnLCAnbGVmdCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbWlzY1xyXG5cdFx0XHQvLyBkaXNhYmxlIHRoZSBhcnJvdyBpbiBJRTYgdW5sZXNzIHRoZSBhcnJvdyBvcHRpb24gd2FzIGV4cGxpY2l0bHkgc2V0IHRvIHRydWVcclxuXHRcdFx0aWYgKFx0JC50b29sdGlwc3Rlci5fZW52LklFID09PSA2XHJcblx0XHRcdFx0JiZcdHNlbGYuX19vcHRpb25zLmFycm93ICE9PSB0cnVlXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHNlbGYuX19vcHRpb25zLmFycm93ID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogVGhpcyBtZXRob2QgbXVzdCBjb21wdXRlIGFuZCBzZXQgdGhlIHBvc2l0aW9uaW5nIHByb3BlcnRpZXMgb2YgdGhlXHJcblx0XHQgKiB0b29sdGlwIChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQsIGV0Yy4pLiBJdCBtdXN0IGFsc28gbWFrZSBzdXJlIHRoZVxyXG5cdFx0ICogdG9vbHRpcCBpcyBldmVudHVhbGx5IGFwcGVuZGVkIHRvIGl0cyBwYXJlbnQgKHNpbmNlIHRoZSBlbGVtZW50IG1heSBiZVxyXG5cdFx0ICogZGV0YWNoZWQgZnJvbSB0aGUgRE9NIGF0IHRoZSBtb21lbnQgdGhlIG1ldGhvZCBpcyBjYWxsZWQpLlxyXG5cdFx0ICpcclxuXHRcdCAqIFdlJ2xsIGV2YWx1YXRlIHBvc2l0aW9uaW5nIHNjZW5hcmlvcyB0byBmaW5kIHdoaWNoIHNpZGUgY2FuIGNvbnRhaW4gdGhlXHJcblx0XHQgKiB0b29sdGlwIGluIHRoZSBiZXN0IHdheS4gV2UnbGwgY29uc2lkZXIgdGhpbmdzIHJlbGF0aXZlbHkgdG8gdGhlIHdpbmRvd1xyXG5cdFx0ICogKHVubGVzcyB0aGUgdXNlciBhc2tzIG5vdCB0byksIHRoZW4gdG8gdGhlIGRvY3VtZW50IChpZiBuZWVkIGJlLCBvciBpZiB0aGVcclxuXHRcdCAqIHVzZXIgZXhwbGljaXRseSByZXF1aXJlcyB0aGUgdGVzdHMgdG8gcnVuIG9uIHRoZSBkb2N1bWVudCkuIEZvciBlYWNoXHJcblx0XHQgKiBzY2VuYXJpbywgbWVhc3VyZXMgYXJlIHRha2VuLCBhbGxvd2luZyB1cyB0byBrbm93IGhvdyB3ZWxsIHRoZSB0b29sdGlwXHJcblx0XHQgKiBpcyBnb2luZyB0byBmaXQuIEFmdGVyIHRoYXQsIGEgc29ydGluZyBmdW5jdGlvbiB3aWxsIGxldCB1cyBrbm93IHdoYXRcclxuXHRcdCAqIHRoZSBiZXN0IHNjZW5hcmlvIGlzICh3ZSBhbHNvIGFsbG93IHRoZSB1c2VyIHRvIGNob29zZSBoaXMgZmF2b3JpdGVcclxuXHRcdCAqIHNjZW5hcmlvIGJ5IHVzaW5nIGFuIGV2ZW50KS5cclxuXHRcdCAqIFxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IGhlbHBlciBBbiBvYmplY3QgdGhhdCBjb250YWlucyB2YXJpYWJsZXMgdGhhdCBwbHVnaW5cclxuXHRcdCAqIGNyZWF0b3JzIG1heSBmaW5kIHVzZWZ1bCAoc2VlIGJlbG93KVxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IGhlbHBlci5nZW8gQW4gb2JqZWN0IHdpdGggbWFueSBsYXlvdXQgcHJvcGVydGllc1xyXG5cdFx0ICogYWJvdXQgb2JqZWN0cyBvZiBpbnRlcmVzdCAod2luZG93LCBkb2N1bWVudCwgb3JpZ2luKS4gVGhpcyBzaG91bGQgaGVscFxyXG5cdFx0ICogcGx1Z2luIHVzZXJzIGNvbXB1dGUgdGhlIG9wdGltYWwgcG9zaXRpb24gb2YgdGhlIHRvb2x0aXBcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9fcmVwb3NpdGlvbjogZnVuY3Rpb24oZXZlbnQsIGhlbHBlcikge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdGZpbmFsUmVzdWx0LFxyXG5cdFx0XHRcdC8vIHRvIGtub3cgd2hlcmUgdG8gcHV0IHRoZSB0b29sdGlwLCB3ZSBuZWVkIHRvIGtub3cgb24gd2hpY2ggcG9pbnRcclxuXHRcdFx0XHQvLyBvZiB0aGUgeCBvciB5IGF4aXMgd2Ugc2hvdWxkIGNlbnRlciBpdC4gVGhhdCBjb29yZGluYXRlIGlzIHRoZSB0YXJnZXRcclxuXHRcdFx0XHR0YXJnZXRzID0gc2VsZi5fX3RhcmdldEZpbmQoaGVscGVyKSxcclxuXHRcdFx0XHR0ZXN0UmVzdWx0cyA9IFtdO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRoZSB0b29sdGlwIGlzIGRldGFjaGVkIHdoaWxlIHdlIG1ha2UgdGVzdHMgb24gYSBjbG9uZVxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuXyR0b29sdGlwLmRldGFjaCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gd2UgY291bGQgYWN0dWFsbHkgcHJvdmlkZSB0aGUgb3JpZ2luYWwgZWxlbWVudCB0byB0aGUgUnVsZXIgYW5kXHJcblx0XHRcdC8vIG5vdCBhIGNsb25lLCBidXQgaXQganVzdCBmZWVscyByaWdodCB0byBrZWVwIGl0IG91dCBvZiB0aGVcclxuXHRcdFx0Ly8gbWFjaGluZXJ5LlxyXG5cdFx0XHR2YXIgJGNsb25lID0gc2VsZi5fX2luc3RhbmNlLl8kdG9vbHRpcC5jbG9uZSgpLFxyXG5cdFx0XHRcdC8vIHN0YXJ0IHBvc2l0aW9uIHRlc3RzIHNlc3Npb25cclxuXHRcdFx0XHRydWxlciA9ICQudG9vbHRpcHN0ZXIuX2dldFJ1bGVyKCRjbG9uZSksXHJcblx0XHRcdFx0c2F0aXNmaWVkID0gZmFsc2UsXHJcblx0XHRcdFx0YW5pbWF0aW9uID0gc2VsZi5fX2luc3RhbmNlLm9wdGlvbignYW5pbWF0aW9uJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBhbiBhbmltYXRpb24gY2xhc3MgY291bGQgY29udGFpbiBwcm9wZXJ0aWVzIHRoYXQgZGlzdG9ydCB0aGUgc2l6ZVxyXG5cdFx0XHRpZiAoYW5pbWF0aW9uKSB7XHJcblx0XHRcdFx0JGNsb25lLnJlbW92ZUNsYXNzKCd0b29sdGlwc3Rlci0nKyBhbmltYXRpb24pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBzdGFydCBldmFsdWF0aW5nIHNjZW5hcmlvc1xyXG5cdFx0XHQkLmVhY2goWyd3aW5kb3cnLCAnZG9jdW1lbnQnXSwgZnVuY3Rpb24oaSwgY29udGFpbmVyKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dmFyIHRha2VUZXN0ID0gbnVsbDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBsZXQgdGhlIHVzZXIgZGVjaWRlIHRvIGtlZXAgb24gdGVzdGluZyBvciBub3RcclxuXHRcdFx0XHRzZWxmLl9faW5zdGFuY2UuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdFx0Y29udGFpbmVyOiBjb250YWluZXIsXHJcblx0XHRcdFx0XHRoZWxwZXI6IGhlbHBlcixcclxuXHRcdFx0XHRcdHNhdGlzZmllZDogc2F0aXNmaWVkLFxyXG5cdFx0XHRcdFx0dGFrZVRlc3Q6IGZ1bmN0aW9uKGJvb2wpIHtcclxuXHRcdFx0XHRcdFx0dGFrZVRlc3QgPSBib29sO1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdHJlc3VsdHM6IHRlc3RSZXN1bHRzLFxyXG5cdFx0XHRcdFx0dHlwZTogJ3Bvc2l0aW9uVGVzdCdcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoXHR0YWtlVGVzdCA9PSB0cnVlXHJcblx0XHRcdFx0XHR8fFx0KFx0dGFrZVRlc3QgIT0gZmFsc2VcclxuXHRcdFx0XHRcdFx0JiZcdHNhdGlzZmllZCA9PSBmYWxzZVxyXG5cdFx0XHRcdFx0XHRcdC8vIHNraXAgdGhlIHdpbmRvdyBzY2VuYXJpb3MgaWYgYXNrZWQuIElmIHRoZXkgYXJlIHJlaW50ZWdyYXRlZCBieVxyXG5cdFx0XHRcdFx0XHRcdC8vIHRoZSBjYWxsYmFjayBvZiB0aGUgcG9zaXRpb25UZXN0IGV2ZW50LCB0aGV5IHdpbGwgaGF2ZSB0byBiZVxyXG5cdFx0XHRcdFx0XHRcdC8vIGV4Y2x1ZGVkIHVzaW5nIHRoZSBjYWxsYmFjayBvZiBwb3NpdGlvblRlc3RlZFxyXG5cdFx0XHRcdFx0XHQmJlx0KGNvbnRhaW5lciAhPSAnd2luZG93JyB8fCBzZWxmLl9fb3B0aW9ucy52aWV3cG9ydEF3YXJlKVxyXG5cdFx0XHRcdFx0KVxyXG5cdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBmb3IgZWFjaCBhbGxvd2VkIHNpZGVcclxuXHRcdFx0XHRcdGZvciAodmFyIGk9MDsgaSA8IHNlbGYuX19vcHRpb25zLnNpZGUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHZhciBkaXN0YW5jZSA9IHtcclxuXHRcdFx0XHRcdFx0XHRcdGhvcml6b250YWw6IDAsXHJcblx0XHRcdFx0XHRcdFx0XHR2ZXJ0aWNhbDogMFxyXG5cdFx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdFx0c2lkZSA9IHNlbGYuX19vcHRpb25zLnNpZGVbaV07XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoc2lkZSA9PSAndG9wJyB8fCBzaWRlID09ICdib3R0b20nKSB7XHJcblx0XHRcdFx0XHRcdFx0ZGlzdGFuY2UudmVydGljYWwgPSBzZWxmLl9fb3B0aW9ucy5kaXN0YW5jZVtzaWRlXTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRkaXN0YW5jZS5ob3Jpem9udGFsID0gc2VsZi5fX29wdGlvbnMuZGlzdGFuY2Vbc2lkZV07XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHRoaXMgbWF5IGhhdmUgYW4gZWZmZWN0IG9uIHRoZSBzaXplIG9mIHRoZSB0b29sdGlwIGlmIHRoZXJlIGFyZSBjc3NcclxuXHRcdFx0XHRcdFx0Ly8gcnVsZXMgZm9yIHRoZSBhcnJvdyBvciBzb21ldGhpbmcgZWxzZVxyXG5cdFx0XHRcdFx0XHRzZWxmLl9fc2lkZUNoYW5nZSgkY2xvbmUsIHNpZGUpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0JC5lYWNoKFsnbmF0dXJhbCcsICdjb25zdHJhaW5lZCddLCBmdW5jdGlvbihpLCBtb2RlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0dGFrZVRlc3QgPSBudWxsO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIGVtaXQgYW4gZXZlbnQgb24gdGhlIGluc3RhbmNlXHJcblx0XHRcdFx0XHRcdFx0c2VsZi5fX2luc3RhbmNlLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjogY29udGFpbmVyLFxyXG5cdFx0XHRcdFx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdFx0XHRcdFx0aGVscGVyOiBoZWxwZXIsXHJcblx0XHRcdFx0XHRcdFx0XHRtb2RlOiBtb2RlLFxyXG5cdFx0XHRcdFx0XHRcdFx0cmVzdWx0czogdGVzdFJlc3VsdHMsXHJcblx0XHRcdFx0XHRcdFx0XHRzYXRpc2ZpZWQ6IHNhdGlzZmllZCxcclxuXHRcdFx0XHRcdFx0XHRcdHNpZGU6IHNpZGUsXHJcblx0XHRcdFx0XHRcdFx0XHR0YWtlVGVzdDogZnVuY3Rpb24oYm9vbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0YWtlVGVzdCA9IGJvb2w7XHJcblx0XHRcdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogJ3Bvc2l0aW9uVGVzdCdcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRpZiAoXHR0YWtlVGVzdCA9PSB0cnVlXHJcblx0XHRcdFx0XHRcdFx0XHR8fFx0KFx0dGFrZVRlc3QgIT0gZmFsc2VcclxuXHRcdFx0XHRcdFx0XHRcdFx0JiZcdHNhdGlzZmllZCA9PSBmYWxzZVxyXG5cdFx0XHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgdGVzdFJlc3VsdCA9IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyOiBjb250YWluZXIsXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHdlIGxldCB0aGUgZGlzdGFuY2UgYXMgYW4gb2JqZWN0IGhlcmUsIGl0IGNhbiBtYWtlIHRoaW5ncyBhIGxpdHRsZSBlYXNpZXJcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gZHVyaW5nIHRoZSB1c2VyJ3MgY2FsY3VsYXRpb25zIGF0IHBvc2l0aW9uVGVzdC9wb3NpdGlvblRlc3RlZFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRkaXN0YW5jZTogZGlzdGFuY2UsXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHdoZXRoZXIgdGhlIHRvb2x0aXAgY2FuIGZpdCBpbiB0aGUgc2l6ZSBvZiB0aGUgdmlld3BvcnQgKGRvZXMgbm90IG1lYW5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gdGhhdCB3ZSdsbCBiZSBhYmxlIHRvIG1ha2UgaXQgaW5pdGlhbGx5IGVudGlyZWx5IHZpc2libGUsIHNlZSAnd2hvbGUnKVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRmaXRzOiBudWxsLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RlOiBtb2RlLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRvdXRlclNpemU6IG51bGwsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHNpZGU6IHNpZGUsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHNpemU6IG51bGwsXHJcblx0XHRcdFx0XHRcdFx0XHRcdHRhcmdldDogdGFyZ2V0c1tzaWRlXSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gY2hlY2sgaWYgdGhlIG9yaWdpbiBoYXMgZW5vdWdoIHN1cmZhY2Ugb24gc2NyZWVuIGZvciB0aGUgdG9vbHRpcCB0b1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBhaW0gYXQgaXQgd2l0aG91dCBvdmVyZmxvd2luZyB0aGUgdmlld3BvcnQgKHRoaXMgaXMgZHVlIHRvIHRoZSB0aGlja25lc3NcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gb2YgdGhlIGFycm93IHJlcHJlc2VudGVkIGJ5IHRoZSBtaW5JbnRlcnNlY3Rpb24gbGVuZ3RoKS5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWYgbm90LCB0aGUgdG9vbHRpcCB3aWxsIGhhdmUgdG8gYmUgcGFydGx5IG9yIGVudGlyZWx5IG9mZiBzY3JlZW4gaW5cclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gb3JkZXIgdG8gc3RheSBkb2NrZWQgdG8gdGhlIG9yaWdpbi4gVGhpcyB2YWx1ZSB3aWxsIHN0YXkgbnVsbCB3aGVuIHRoZVxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBjb250YWluZXIgaXMgdGhlIGRvY3VtZW50LCBhcyBpdCBpcyBub3QgcmVsZXZhbnRcclxuXHRcdFx0XHRcdFx0XHRcdFx0d2hvbGU6IG51bGxcclxuXHRcdFx0XHRcdFx0XHRcdH07XHJcblx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIGdldCB0aGUgc2l6ZSBvZiB0aGUgdG9vbHRpcCB3aXRoIG9yIHdpdGhvdXQgc2l6ZSBjb25zdHJhaW50c1xyXG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJ1bGVyQ29uZmlndXJlZCA9IChtb2RlID09ICduYXR1cmFsJykgP1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJ1bGVyLmZyZWUoKSA6XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cnVsZXIuY29uc3RyYWluKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGVscGVyLmdlby5hdmFpbGFibGVbY29udGFpbmVyXVtzaWRlXS53aWR0aCAtIGRpc3RhbmNlLmhvcml6b250YWwsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoZWxwZXIuZ2VvLmF2YWlsYWJsZVtjb250YWluZXJdW3NpZGVdLmhlaWdodCAtIGRpc3RhbmNlLnZlcnRpY2FsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0KSxcclxuXHRcdFx0XHRcdFx0XHRcdFx0cnVsZXJSZXN1bHRzID0gcnVsZXJDb25maWd1cmVkLm1lYXN1cmUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdC5zaXplID0gcnVsZXJSZXN1bHRzLnNpemU7XHJcblx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0Lm91dGVyU2l6ZSA9IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aGVpZ2h0OiBydWxlclJlc3VsdHMuc2l6ZS5oZWlnaHQgKyBkaXN0YW5jZS52ZXJ0aWNhbCxcclxuXHRcdFx0XHRcdFx0XHRcdFx0d2lkdGg6IHJ1bGVyUmVzdWx0cy5zaXplLndpZHRoICsgZGlzdGFuY2UuaG9yaXpvbnRhbFxyXG5cdFx0XHRcdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG1vZGUgPT0gJ25hdHVyYWwnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZihcdFx0aGVscGVyLmdlby5hdmFpbGFibGVbY29udGFpbmVyXVtzaWRlXS53aWR0aCA+PSB0ZXN0UmVzdWx0Lm91dGVyU2l6ZS53aWR0aFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCYmXHRoZWxwZXIuZ2VvLmF2YWlsYWJsZVtjb250YWluZXJdW3NpZGVdLmhlaWdodCA+PSB0ZXN0UmVzdWx0Lm91dGVyU2l6ZS5oZWlnaHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGVzdFJlc3VsdC5maXRzID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0LmZpdHMgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHQuZml0cyA9IHJ1bGVyUmVzdWx0cy5maXRzO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoY29udGFpbmVyID09ICd3aW5kb3cnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXRlc3RSZXN1bHQuZml0cykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHQud2hvbGUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2lkZSA9PSAndG9wJyB8fCBzaWRlID09ICdib3R0b20nKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRlc3RSZXN1bHQud2hvbGUgPSAoXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0ID49IHNlbGYuX19vcHRpb25zLm1pbkludGVyc2VjdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQmJlx0aGVscGVyLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ID49IHNlbGYuX19vcHRpb25zLm1pbkludGVyc2VjdGlvblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0Lndob2xlID0gKFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5ib3R0b20gPj0gc2VsZi5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdCYmXHRoZWxwZXIuZ2VvLndpbmRvdy5zaXplLmhlaWdodCAtIGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgPj0gc2VsZi5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHR0ZXN0UmVzdWx0cy5wdXNoKHRlc3RSZXN1bHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyB3ZSBkb24ndCBuZWVkIHRvIGNvbXB1dGUgbW9yZSBwb3NpdGlvbnMgaWYgd2UgaGF2ZSBvbmUgZnVsbHkgb24gc2NyZWVuXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodGVzdFJlc3VsdC53aG9sZSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzYXRpc2ZpZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGRvbid0IHJ1biB0aGUgY29uc3RyYWluZWQgdGVzdCB1bmxlc3MgdGhlIG5hdHVyYWwgd2lkdGggd2FzIGdyZWF0ZXJcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gdGhhbiB0aGUgYXZhaWxhYmxlIHdpZHRoLCBvdGhlcndpc2UgaXQncyBwb2ludGxlc3MgYXMgd2Uga25vdyBpdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyB3b3VsZG4ndCBmaXQgZWl0aGVyXHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChcdHRlc3RSZXN1bHQubW9kZSA9PSAnbmF0dXJhbCdcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQmJlx0KFx0dGVzdFJlc3VsdC5maXRzXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR8fFx0dGVzdFJlc3VsdC5zaXplLndpZHRoIDw9IGhlbHBlci5nZW8uYXZhaWxhYmxlW2NvbnRhaW5lcl1bc2lkZV0ud2lkdGhcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQpXHJcblx0XHRcdFx0XHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIHRoZSB1c2VyIG1heSBlbGltaW5hdGUgdGhlIHVud2FudGVkIHNjZW5hcmlvcyBmcm9tIHRlc3RSZXN1bHRzLCBidXQgaGUnc1xyXG5cdFx0XHQvLyBub3Qgc3VwcG9zZWQgdG8gYWx0ZXIgdGhlbSBhdCB0aGlzIHBvaW50LiBmdW5jdGlvblBvc2l0aW9uIGFuZCB0aGVcclxuXHRcdFx0Ly8gcG9zaXRpb24gZXZlbnQgc2VydmUgdGhhdCBwdXJwb3NlLlxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuX3RyaWdnZXIoe1xyXG5cdFx0XHRcdGVkaXQ6IGZ1bmN0aW9uKHIpIHtcclxuXHRcdFx0XHRcdHRlc3RSZXN1bHRzID0gcjtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGV2ZW50OiBldmVudCxcclxuXHRcdFx0XHRoZWxwZXI6IGhlbHBlcixcclxuXHRcdFx0XHRyZXN1bHRzOiB0ZXN0UmVzdWx0cyxcclxuXHRcdFx0XHR0eXBlOiAncG9zaXRpb25UZXN0ZWQnXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0LyoqXHJcblx0XHRcdCAqIFNvcnQgdGhlIHNjZW5hcmlvcyB0byBmaW5kIHRoZSBmYXZvcml0ZSBvbmUuXHJcblx0XHRcdCAqIFxyXG5cdFx0XHQgKiBUaGUgZmF2b3JpdGUgc2NlbmFyaW8gaXMgd2hlbiB3ZSBjYW4gZnVsbHkgZGlzcGxheSB0aGUgdG9vbHRpcCBvbiBzY3JlZW4sXHJcblx0XHRcdCAqIGV2ZW4gaWYgaXQgbWVhbnMgdGhhdCB0aGUgbWlkZGxlIG9mIHRoZSB0b29sdGlwIGlzIG5vIGxvbmdlciBjZW50ZXJlZCBvblxyXG5cdFx0XHQgKiB0aGUgbWlkZGxlIG9mIHRoZSBvcmlnaW4gKHdoZW4gdGhlIG9yaWdpbiBpcyBuZWFyIHRoZSBlZGdlIG9mIHRoZSBzY3JlZW5cclxuXHRcdFx0ICogb3IgZXZlbiBwYXJ0bHkgb2ZmIHNjcmVlbikuIFdlIHdhbnQgdGhlIHRvb2x0aXAgb24gdGhlIHByZWZlcnJlZCBzaWRlLFxyXG5cdFx0XHQgKiBldmVuIGlmIGl0IG1lYW5zIHRoYXQgd2UgaGF2ZSB0byB1c2UgYSBjb25zdHJhaW5lZCBzaXplIHJhdGhlciB0aGFuIGFcclxuXHRcdFx0ICogbmF0dXJhbCBvbmUgKGFzIGxvbmcgYXMgaXQgZml0cykuIFdoZW4gdGhlIG9yaWdpbiBpcyBvZmYgc2NyZWVuIGF0IHRoZSB0b3BcclxuXHRcdFx0ICogdGhlIHRvb2x0aXAgd2lsbCBiZSBwb3NpdGlvbmVkIGF0IHRoZSBib3R0b20gKGlmIGFsbG93ZWQpLCBpZiB0aGUgb3JpZ2luXHJcblx0XHRcdCAqIGlzIG9mZiBzY3JlZW4gb24gdGhlIHJpZ2h0LCBpdCB3aWxsIGJlIHBvc2l0aW9uZWQgb24gdGhlIGxlZnQsIGV0Yy5cclxuXHRcdFx0ICogSWYgdGhlcmUgYXJlIG5vIHNjZW5hcmlvcyB3aGVyZSB0aGUgdG9vbHRpcCBjYW4gZml0IG9uIHNjcmVlbiwgb3IgaWYgdGhlXHJcblx0XHRcdCAqIHVzZXIgZG9lcyBub3Qgd2FudCB0aGUgdG9vbHRpcCB0byBmaXQgb24gc2NyZWVuICh2aWV3cG9ydEF3YXJlID09IGZhbHNlKSxcclxuXHRcdFx0ICogd2UgZmFsbCBiYWNrIHRvIHRoZSBzY2VuYXJpb3MgcmVsYXRpdmUgdG8gdGhlIGRvY3VtZW50LlxyXG5cdFx0XHQgKiBcclxuXHRcdFx0ICogV2hlbiB0aGUgdG9vbHRpcCBpcyBiaWdnZXIgdGhhbiB0aGUgdmlld3BvcnQgaW4gZWl0aGVyIGRpbWVuc2lvbiwgd2Ugc3RvcFxyXG5cdFx0XHQgKiBsb29raW5nIGF0IHRoZSB3aW5kb3cgc2NlbmFyaW9zIGFuZCBjb25zaWRlciB0aGUgZG9jdW1lbnQgc2NlbmFyaW9zIG9ubHksXHJcblx0XHRcdCAqIHdpdGggdGhlIHNhbWUgbG9naWMgdG8gZmluZCBvbiB3aGljaCBzaWRlIGl0IHdvdWxkIGZpdCBiZXN0LlxyXG5cdFx0XHQgKiBcclxuXHRcdFx0ICogSWYgdGhlIHRvb2x0aXAgY2Fubm90IGZpdCB0aGUgZG9jdW1lbnQgb24gYW55IHNpZGUsIHdlIGZvcmNlIGl0IGF0IHRoZVxyXG5cdFx0XHQgKiBib3R0b20sIHNvIGF0IGxlYXN0IHRoZSB1c2VyIGNhbiBzY3JvbGwgdG8gc2VlIGl0LlxyXG4gXHRcdFx0ICovXHJcblx0XHRcdHRlc3RSZXN1bHRzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGJlc3QgaWYgaXQncyB3aG9sZSAodGhlIHRvb2x0aXAgZml0cyBhbmQgYWRhcHRzIHRvIHRoZSB2aWV3cG9ydClcclxuXHRcdFx0XHRpZiAoYS53aG9sZSAmJiAhYi53aG9sZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmICghYS53aG9sZSAmJiBiLndob2xlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSBpZiAoYS53aG9sZSAmJiBiLndob2xlKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHZhciBhaSA9IHNlbGYuX19vcHRpb25zLnNpZGUuaW5kZXhPZihhLnNpZGUpLFxyXG5cdFx0XHRcdFx0XHRiaSA9IHNlbGYuX19vcHRpb25zLnNpZGUuaW5kZXhPZihiLnNpZGUpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyB1c2UgdGhlIHVzZXIncyBzaWRlcyBmYWxsYmFjayBhcnJheVxyXG5cdFx0XHRcdFx0aWYgKGFpIDwgYmkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoYWkgPiBiaSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyB3aWxsIGJlIHVzZWQgaWYgdGhlIHVzZXIgZm9yY2VkIHRoZSB0ZXN0cyB0byBjb250aW51ZVxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gYS5tb2RlID09ICduYXR1cmFsJyA/IC0xIDogMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGJldHRlciBpZiBpdCBmaXRzXHJcblx0XHRcdFx0XHRpZiAoYS5maXRzICYmICFiLmZpdHMpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIC0xO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoIWEuZml0cyAmJiBiLmZpdHMpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmIChhLmZpdHMgJiYgYi5maXRzKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHR2YXIgYWkgPSBzZWxmLl9fb3B0aW9ucy5zaWRlLmluZGV4T2YoYS5zaWRlKSxcclxuXHRcdFx0XHRcdFx0XHRiaSA9IHNlbGYuX19vcHRpb25zLnNpZGUuaW5kZXhPZihiLnNpZGUpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gdXNlIHRoZSB1c2VyJ3Mgc2lkZXMgZmFsbGJhY2sgYXJyYXlcclxuXHRcdFx0XHRcdFx0aWYgKGFpIDwgYmkpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gLTE7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoYWkgPiBiaSkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiAxO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdC8vIHdpbGwgYmUgdXNlZCBpZiB0aGUgdXNlciBmb3JjZWQgdGhlIHRlc3RzIHRvIGNvbnRpbnVlXHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGEubW9kZSA9PSAnbmF0dXJhbCcgPyAtMSA6IDE7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gaWYgZXZlcnl0aGluZyBmYWlsZWQsIHRoaXMgd2lsbCBnaXZlIGEgcHJlZmVyZW5jZSB0byB0aGUgY2FzZSB3aGVyZVxyXG5cdFx0XHRcdFx0XHQvLyB0aGUgdG9vbHRpcCBvdmVyZmxvd3MgdGhlIGRvY3VtZW50IGF0IHRoZSBib3R0b21cclxuXHRcdFx0XHRcdFx0aWYgKFx0YS5jb250YWluZXIgPT0gJ2RvY3VtZW50J1xyXG5cdFx0XHRcdFx0XHRcdCYmXHRhLnNpZGUgPT0gJ2JvdHRvbSdcclxuXHRcdFx0XHRcdFx0XHQmJlx0YS5tb2RlID09ICduYXR1cmFsJ1xyXG5cdFx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gLTE7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0ZmluYWxSZXN1bHQgPSB0ZXN0UmVzdWx0c1swXTtcclxuXHRcdFx0XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBub3cgbGV0J3MgZmluZCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHRvb2x0aXAgcmVsYXRpdmVseSB0byB0aGUgd2luZG93XHJcblx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkID0ge307XHJcblx0XHRcdFxyXG5cdFx0XHRzd2l0Y2ggKGZpbmFsUmVzdWx0LnNpZGUpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjYXNlICdsZWZ0JzpcclxuXHRcdFx0XHRjYXNlICdyaWdodCc6XHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC50b3AgPSBNYXRoLmZsb29yKGZpbmFsUmVzdWx0LnRhcmdldCAtIGZpbmFsUmVzdWx0LnNpemUuaGVpZ2h0IC8gMik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjYXNlICdib3R0b20nOlxyXG5cdFx0XHRcdGNhc2UgJ3RvcCc6XHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gTWF0aC5mbG9vcihmaW5hbFJlc3VsdC50YXJnZXQgLSBmaW5hbFJlc3VsdC5zaXplLndpZHRoIC8gMik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0c3dpdGNoIChmaW5hbFJlc3VsdC5zaWRlKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2FzZSAnbGVmdCc6XHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgLSBmaW5hbFJlc3VsdC5vdXRlclNpemUud2lkdGg7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjYXNlICdyaWdodCc6XHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnJpZ2h0ICsgZmluYWxSZXN1bHQuZGlzdGFuY2UuaG9yaXpvbnRhbDtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgJ3RvcCc6XHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC50b3AgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wIC0gZmluYWxSZXN1bHQub3V0ZXJTaXplLmhlaWdodDtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNhc2UgJ2JvdHRvbSc6XHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC50b3AgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tICsgZmluYWxSZXN1bHQuZGlzdGFuY2UudmVydGljYWw7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgY2FuIHBvdGVudGlhbGx5IGJlIGNvbnRhaW5lZCB3aXRoaW4gdGhlIHZpZXdwb3J0IGRpbWVuc2lvbnNcclxuXHRcdFx0Ly8gYW5kIHRoYXQgd2UgYXJlIGFza2VkIHRvIG1ha2UgaXQgZml0IG9uIHNjcmVlblxyXG5cdFx0XHRpZiAoZmluYWxSZXN1bHQuY29udGFpbmVyID09ICd3aW5kb3cnKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvb2x0aXAgb3ZlcmZsb3dzIHRoZSB2aWV3cG9ydCwgd2UnbGwgbW92ZSBpdCBhY2NvcmRpbmdseSAodGhlbiBpdCB3aWxsXHJcblx0XHRcdFx0Ly8gbm90IGJlIGNlbnRlcmVkIG9uIHRoZSBtaWRkbGUgb2YgdGhlIG9yaWdpbiBhbnltb3JlKS4gV2Ugb25seSBtb3ZlIGhvcml6b250YWxseVxyXG5cdFx0XHRcdC8vIGZvciB0b3AgYW5kIGJvdHRvbSB0b29sdGlwcyBhbmQgdmljZSB2ZXJzYS5cclxuXHRcdFx0XHRpZiAoZmluYWxSZXN1bHQuc2lkZSA9PSAndG9wJyB8fCBmaW5hbFJlc3VsdC5zaWRlID09ICdib3R0b20nKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGlmIHRoZXJlIGlzIGFuIG92ZXJmbG93IG9uIHRoZSBsZWZ0XHJcblx0XHRcdFx0XHRpZiAoZmluYWxSZXN1bHQuY29vcmQubGVmdCA8IDApIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIHByZXZlbnQgdGhlIG92ZXJmbG93IHVubGVzcyB0aGUgb3JpZ2luIGl0c2VsZiBnZXRzIG9mZiBzY3JlZW4gKG1pbnVzIHRoZVxyXG5cdFx0XHRcdFx0XHQvLyBtYXJnaW4gbmVlZGVkIHRvIGtlZXAgdGhlIGFycm93IHBvaW50aW5nIGF0IHRoZSB0YXJnZXQpXHJcblx0XHRcdFx0XHRcdGlmIChoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPj0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSAwO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQucmlnaHQgLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gLSAxO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBvciBhbiBvdmVyZmxvdyBvbiB0aGUgcmlnaHRcclxuXHRcdFx0XHRcdGVsc2UgaWYgKGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPiBoZWxwZXIuZ2VvLndpbmRvdy5zaXplLndpZHRoIC0gZmluYWxSZXN1bHQuc2l6ZS53aWR0aCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIDw9IGhlbHBlci5nZW8ud2luZG93LnNpemUud2lkdGgpIHtcclxuXHRcdFx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gaGVscGVyLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGZpbmFsUmVzdWx0LnNpemUud2lkdGg7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQubGVmdCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC5sZWZ0ICsgdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uICsgMSAtIGZpbmFsUmVzdWx0LnNpemUud2lkdGg7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIG92ZXJmbG93IGF0IHRoZSB0b3BcclxuXHRcdFx0XHRcdGlmIChmaW5hbFJlc3VsdC5jb29yZC50b3AgPCAwKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmJvdHRvbSAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbiA+PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmluYWxSZXN1bHQuY29vcmQudG9wID0gMDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC50b3AgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQuYm90dG9tIC0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uIC0gMTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gb3IgYXQgdGhlIGJvdHRvbVxyXG5cdFx0XHRcdFx0ZWxzZSBpZiAoZmluYWxSZXN1bHQuY29vcmQudG9wID4gaGVscGVyLmdlby53aW5kb3cuc2l6ZS5oZWlnaHQgLSBmaW5hbFJlc3VsdC5zaXplLmhlaWdodCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gPD0gaGVscGVyLmdlby53aW5kb3cuc2l6ZS5oZWlnaHQpIHtcclxuXHRcdFx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC50b3AgPSBoZWxwZXIuZ2VvLndpbmRvdy5zaXplLmhlaWdodCAtIGZpbmFsUmVzdWx0LnNpemUuaGVpZ2h0O1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkLnRvcCA9IGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3AgKyB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb24gKyAxIC0gZmluYWxSZXN1bHQuc2l6ZS5oZWlnaHQ7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gdGhlcmUgbWlnaHQgYmUgb3ZlcmZsb3cgaGVyZSB0b28gYnV0IGl0J3MgZWFzaWVyIHRvIGhhbmRsZS4gSWYgdGhlcmUgaGFzXHJcblx0XHRcdFx0Ly8gdG8gYmUgYW4gb3ZlcmZsb3csIHdlJ2xsIG1ha2Ugc3VyZSBpdCdzIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSBzY3JlZW5cclxuXHRcdFx0XHQvLyAoYmVjYXVzZSB0aGUgYnJvd3NlciB3aWxsIGV4dGVuZCB0aGUgZG9jdW1lbnQgc2l6ZSBpZiB0aGVyZSBpcyBhbiBvdmVyZmxvd1xyXG5cdFx0XHRcdC8vIG9uIHRoZSByaWdodCwgYnV0IG5vdCBvbiB0aGUgbGVmdCkuIFRoZSBzb3J0IGZ1bmN0aW9uIGFib3ZlIGhhcyBhbHJlYWR5XHJcblx0XHRcdFx0Ly8gbWFkZSBzdXJlIHRoYXQgYSBib3R0b20gZG9jdW1lbnQgb3ZlcmZsb3cgaXMgcHJlZmVycmVkIHRvIGEgdG9wIG92ZXJmbG93LFxyXG5cdFx0XHRcdC8vIHNvIHdlIGRvbid0IGhhdmUgdG8gY2FyZSBhYm91dCBpdC5cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBpZiB0aGVyZSBpcyBhbiBvdmVyZmxvdyBvbiB0aGUgcmlnaHRcclxuXHRcdFx0XHRpZiAoZmluYWxSZXN1bHQuY29vcmQubGVmdCA+IGhlbHBlci5nZW8ud2luZG93LnNpemUud2lkdGggLSBmaW5hbFJlc3VsdC5zaXplLndpZHRoKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIHRoaXMgbWF5IGFjdHVhbGx5IGNyZWF0ZSBvbiBvdmVyZmxvdyBvbiB0aGUgbGVmdCBidXQgd2UnbGwgZml4IGl0IGluIGEgc2VjXHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gaGVscGVyLmdlby53aW5kb3cuc2l6ZS53aWR0aCAtIGZpbmFsUmVzdWx0LnNpemUud2lkdGg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIGlmIHRoZXJlIGlzIGFuIG92ZXJmbG93IG9uIHRoZSBsZWZ0XHJcblx0XHRcdFx0aWYgKGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgPCAwKSB7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIGRvbid0IGNhcmUgaWYgaXQgb3ZlcmZsb3dzIHRoZSByaWdodCBhZnRlciB0aGF0LCB3ZSBtYWRlIG91ciBiZXN0XHJcblx0XHRcdFx0XHRmaW5hbFJlc3VsdC5jb29yZC5sZWZ0ID0gMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBzdWJtaXQgdGhlIHBvc2l0aW9uaW5nIHByb3Bvc2FsIHRvIHRoZSB1c2VyIGZ1bmN0aW9uIHdoaWNoIG1heSBjaG9vc2UgdG8gY2hhbmdlXHJcblx0XHRcdC8vIHRoZSBzaWRlLCBzaXplIGFuZC9vciB0aGUgY29vcmRpbmF0ZXNcclxuXHRcdFx0XHJcblx0XHRcdC8vIGZpcnN0LCBzZXQgdGhlIHJ1bGVzIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIHByb3Bvc2VkIHNpZGU6IGl0IG1heSBjaGFuZ2VcclxuXHRcdFx0Ly8gdGhlIHNpemUgb2YgdGhlIHRvb2x0aXAsIGFuZCB0aGUgY3VzdG9tIGZ1bmN0aW9uUG9zaXRpb24gbWF5IHdhbnQgdG8gZGV0ZWN0IHRoZVxyXG5cdFx0XHQvLyBzaXplIG9mIHNvbWV0aGluZyBiZWZvcmUgbWFraW5nIGEgZGVjaXNpb24uIFNvIGxldCdzIG1ha2UgdGhpbmdzIGVhc2llciBmb3IgdGhlXHJcblx0XHRcdC8vIGltcGxlbWVudG9yXHJcblx0XHRcdHNlbGYuX19zaWRlQ2hhbmdlKCRjbG9uZSwgZmluYWxSZXN1bHQuc2lkZSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBhZGQgc29tZSB2YXJpYWJsZXMgdG8gdGhlIGhlbHBlclxyXG5cdFx0XHRoZWxwZXIudG9vbHRpcENsb25lID0gJGNsb25lWzBdO1xyXG5cdFx0XHRoZWxwZXIudG9vbHRpcFBhcmVudCA9IHNlbGYuX19pbnN0YW5jZS5vcHRpb24oJ3BhcmVudCcpLnBhcmVudFswXTtcclxuXHRcdFx0Ly8gbW92ZSBpbmZvcm1hdGl2ZSB2YWx1ZXMgdG8gdGhlIGhlbHBlclxyXG5cdFx0XHRoZWxwZXIubW9kZSA9IGZpbmFsUmVzdWx0Lm1vZGU7XHJcblx0XHRcdGhlbHBlci53aG9sZSA9IGZpbmFsUmVzdWx0Lndob2xlO1xyXG5cdFx0XHQvLyBhZGQgc29tZSB2YXJpYWJsZXMgdG8gdGhlIGhlbHBlciBmb3IgdGhlIGZ1bmN0aW9uUG9zaXRpb24gY2FsbGJhY2sgKHRoZXNlXHJcblx0XHRcdC8vIHdpbGwgYWxzbyBiZSBhZGRlZCB0byB0aGUgZXZlbnQgZmlyZWQgYnkgc2VsZi5fX2luc3RhbmNlLl90cmlnZ2VyIGJ1dCB0aGF0J3NcclxuXHRcdFx0Ly8gb2ssIHdlJ3JlIGp1c3QgYmVpbmcgY29uc2lzdGVudClcclxuXHRcdFx0aGVscGVyLm9yaWdpbiA9IHNlbGYuX19pbnN0YW5jZS5fJG9yaWdpblswXTtcclxuXHRcdFx0aGVscGVyLnRvb2x0aXAgPSBzZWxmLl9faW5zdGFuY2UuXyR0b29sdGlwWzBdO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gbGVhdmUgb25seSB0aGUgYWN0aW9uYWJsZSB2YWx1ZXMgaW4gdGhlcmUgZm9yIGZ1bmN0aW9uUG9zaXRpb25cclxuXHRcdFx0ZGVsZXRlIGZpbmFsUmVzdWx0LmNvbnRhaW5lcjtcclxuXHRcdFx0ZGVsZXRlIGZpbmFsUmVzdWx0LmZpdHM7XHJcblx0XHRcdGRlbGV0ZSBmaW5hbFJlc3VsdC5tb2RlO1xyXG5cdFx0XHRkZWxldGUgZmluYWxSZXN1bHQub3V0ZXJTaXplO1xyXG5cdFx0XHRkZWxldGUgZmluYWxSZXN1bHQud2hvbGU7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBrZWVwIG9ubHkgdGhlIGRpc3RhbmNlIG9uIHRoZSByZWxldmFudCBzaWRlLCBmb3IgY2xhcml0eVxyXG5cdFx0XHRmaW5hbFJlc3VsdC5kaXN0YW5jZSA9IGZpbmFsUmVzdWx0LmRpc3RhbmNlLmhvcml6b250YWwgfHwgZmluYWxSZXN1bHQuZGlzdGFuY2UudmVydGljYWw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBiZWdpbm5lcnMgbWF5IG5vdCBiZSBjb21mb3J0YWJsZSB3aXRoIHRoZSBjb25jZXB0IG9mIGVkaXRpbmcgdGhlIG9iamVjdFxyXG5cdFx0XHQvLyAgcGFzc2VkIGJ5IHJlZmVyZW5jZSwgc28gd2UgcHJvdmlkZSBhbiBlZGl0IGZ1bmN0aW9uIGFuZCBwYXNzIGEgY2xvbmVcclxuXHRcdFx0dmFyIGZpbmFsUmVzdWx0Q2xvbmUgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZmluYWxSZXN1bHQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gZW1pdCBhbiBldmVudCBvbiB0aGUgaW5zdGFuY2VcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl90cmlnZ2VyKHtcclxuXHRcdFx0XHRlZGl0OiBmdW5jdGlvbihyZXN1bHQpIHtcclxuXHRcdFx0XHRcdGZpbmFsUmVzdWx0ID0gcmVzdWx0O1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdGhlbHBlcjogaGVscGVyLFxyXG5cdFx0XHRcdHBvc2l0aW9uOiBmaW5hbFJlc3VsdENsb25lLFxyXG5cdFx0XHRcdHR5cGU6ICdwb3NpdGlvbidcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoc2VsZi5fX29wdGlvbnMuZnVuY3Rpb25Qb3NpdGlvbikge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciByZXN1bHQgPSBzZWxmLl9fb3B0aW9ucy5mdW5jdGlvblBvc2l0aW9uLmNhbGwoc2VsZiwgc2VsZi5fX2luc3RhbmNlLCBoZWxwZXIsIGZpbmFsUmVzdWx0Q2xvbmUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChyZXN1bHQpIGZpbmFsUmVzdWx0ID0gcmVzdWx0O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBlbmQgdGhlIHBvc2l0aW9uaW5nIHRlc3RzIHNlc3Npb24gKHRoZSB1c2VyIG1pZ2h0IGhhdmUgaGFkIGFcclxuXHRcdFx0Ly8gdXNlIGZvciBpdCBkdXJpbmcgdGhlIHBvc2l0aW9uIGV2ZW50LCBub3cgaXQncyBvdmVyKVxyXG5cdFx0XHRydWxlci5kZXN0cm95KCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBjb21wdXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgdGFyZ2V0IHJlbGF0aXZlbHkgdG8gdGhlIHRvb2x0aXAgcm9vdFxyXG5cdFx0XHQvLyBlbGVtZW50IHNvIHdlIGNhbiBwbGFjZSB0aGUgYXJyb3cgYW5kIG1ha2UgdGhlIG5lZWRlZCBhZGp1c3RtZW50c1xyXG5cdFx0XHR2YXIgYXJyb3dDb29yZCxcclxuXHRcdFx0XHRtYXhWYWw7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoZmluYWxSZXN1bHQuc2lkZSA9PSAndG9wJyB8fCBmaW5hbFJlc3VsdC5zaWRlID09ICdib3R0b20nKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0YXJyb3dDb29yZCA9IHtcclxuXHRcdFx0XHRcdHByb3A6ICdsZWZ0JyxcclxuXHRcdFx0XHRcdHZhbDogZmluYWxSZXN1bHQudGFyZ2V0IC0gZmluYWxSZXN1bHQuY29vcmQubGVmdFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0bWF4VmFsID0gZmluYWxSZXN1bHQuc2l6ZS53aWR0aCAtIHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRhcnJvd0Nvb3JkID0ge1xyXG5cdFx0XHRcdFx0cHJvcDogJ3RvcCcsXHJcblx0XHRcdFx0XHR2YWw6IGZpbmFsUmVzdWx0LnRhcmdldCAtIGZpbmFsUmVzdWx0LmNvb3JkLnRvcFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0bWF4VmFsID0gZmluYWxSZXN1bHQuc2l6ZS5oZWlnaHQgLSB0aGlzLl9fb3B0aW9ucy5taW5JbnRlcnNlY3Rpb247XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIGNhbm5vdCBsaWUgYmV5b25kIHRoZSBib3VuZGFyaWVzIG9mIHRoZSB0b29sdGlwLCBtaW51cyB0aGVcclxuXHRcdFx0Ly8gYXJyb3cgbWFyZ2luXHJcblx0XHRcdGlmIChhcnJvd0Nvb3JkLnZhbCA8IHRoaXMuX19vcHRpb25zLm1pbkludGVyc2VjdGlvbikge1xyXG5cdFx0XHRcdGFycm93Q29vcmQudmFsID0gdGhpcy5fX29wdGlvbnMubWluSW50ZXJzZWN0aW9uO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKGFycm93Q29vcmQudmFsID4gbWF4VmFsKSB7XHJcblx0XHRcdFx0YXJyb3dDb29yZC52YWwgPSBtYXhWYWw7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHZhciBvcmlnaW5QYXJlbnRPZmZzZXQ7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBsZXQncyBjb252ZXJ0IHRoZSB3aW5kb3ctcmVsYXRpdmUgY29vcmRpbmF0ZXMgaW50byBjb29yZGluYXRlcyByZWxhdGl2ZSB0byB0aGVcclxuXHRcdFx0Ly8gZnV0dXJlIHBvc2l0aW9uZWQgcGFyZW50IHRoYXQgdGhlIHRvb2x0aXAgd2lsbCBiZSBhcHBlbmRlZCB0b1xyXG5cdFx0XHRpZiAoaGVscGVyLmdlby5vcmlnaW4uZml4ZWRMaW5lYWdlKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gc2FtZSBhcyB3aW5kb3dPZmZzZXQgd2hlbiB0aGUgcG9zaXRpb24gaXMgZml4ZWRcclxuXHRcdFx0XHRvcmlnaW5QYXJlbnRPZmZzZXQgPSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQ7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gdGhpcyBhc3N1bWVzIHRoYXQgdGhlIHBhcmVudCBvZiB0aGUgdG9vbHRpcCBpcyBsb2NhdGVkIGF0XHJcblx0XHRcdFx0Ly8gKDAsIDApIGluIHRoZSBkb2N1bWVudCwgdHlwaWNhbGx5IGxpa2Ugd2hlbiB0aGUgcGFyZW50IGlzXHJcblx0XHRcdFx0Ly8gPGJvZHk+LlxyXG5cdFx0XHRcdC8vIElmIHdlIGV2ZXIgYWxsb3cgb3RoZXIgdHlwZXMgb2YgcGFyZW50LCAudG9vbHRpcHN0ZXItcnVsZXJcclxuXHRcdFx0XHQvLyB3aWxsIGhhdmUgdG8gYmUgYXBwZW5kZWQgdG8gdGhlIHBhcmVudCB0byBpbmhlcml0IGNzcyBzdHlsZVxyXG5cdFx0XHRcdC8vIHZhbHVlcyB0aGF0IGFmZmVjdCB0aGUgZGlzcGxheSBvZiB0aGUgdGV4dCBhbmQgc3VjaC5cclxuXHRcdFx0XHRvcmlnaW5QYXJlbnRPZmZzZXQgPSB7XHJcblx0XHRcdFx0XHRsZWZ0OiBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCArIGhlbHBlci5nZW8ud2luZG93LnNjcm9sbC5sZWZ0LFxyXG5cdFx0XHRcdFx0dG9wOiBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQudG9wICsgaGVscGVyLmdlby53aW5kb3cuc2Nyb2xsLnRvcFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGZpbmFsUmVzdWx0LmNvb3JkID0ge1xyXG5cdFx0XHRcdGxlZnQ6IG9yaWdpblBhcmVudE9mZnNldC5sZWZ0ICsgKGZpbmFsUmVzdWx0LmNvb3JkLmxlZnQgLSBoZWxwZXIuZ2VvLm9yaWdpbi53aW5kb3dPZmZzZXQubGVmdCksXHJcblx0XHRcdFx0dG9wOiBvcmlnaW5QYXJlbnRPZmZzZXQudG9wICsgKGZpbmFsUmVzdWx0LmNvb3JkLnRvcCAtIGhlbHBlci5nZW8ub3JpZ2luLndpbmRvd09mZnNldC50b3ApXHJcblx0XHRcdH07XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBzZXQgcG9zaXRpb24gdmFsdWVzIG9uIHRoZSBvcmlnaW5hbCB0b29sdGlwIGVsZW1lbnRcclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuX19zaWRlQ2hhbmdlKHNlbGYuX19pbnN0YW5jZS5fJHRvb2x0aXAsIGZpbmFsUmVzdWx0LnNpZGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGhlbHBlci5nZW8ub3JpZ2luLmZpeGVkTGluZWFnZSkge1xyXG5cdFx0XHRcdHNlbGYuX19pbnN0YW5jZS5fJHRvb2x0aXBcclxuXHRcdFx0XHRcdC5jc3MoJ3Bvc2l0aW9uJywgJ2ZpeGVkJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0Ly8gQ1NTIGRlZmF1bHRcclxuXHRcdFx0XHRzZWxmLl9faW5zdGFuY2UuXyR0b29sdGlwXHJcblx0XHRcdFx0XHQuY3NzKCdwb3NpdGlvbicsICcnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0c2VsZi5fX2luc3RhbmNlLl8kdG9vbHRpcFxyXG5cdFx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdFx0bGVmdDogZmluYWxSZXN1bHQuY29vcmQubGVmdCxcclxuXHRcdFx0XHRcdHRvcDogZmluYWxSZXN1bHQuY29vcmQudG9wLFxyXG5cdFx0XHRcdFx0Ly8gd2UgbmVlZCB0byBzZXQgYSBzaXplIGV2ZW4gaWYgdGhlIHRvb2x0aXAgaXMgaW4gaXRzIG5hdHVyYWwgc2l6ZVxyXG5cdFx0XHRcdFx0Ly8gYmVjYXVzZSB3aGVuIHRoZSB0b29sdGlwIGlzIHBvc2l0aW9uZWQgYmV5b25kIHRoZSB3aWR0aCBvZiB0aGUgYm9keVxyXG5cdFx0XHRcdFx0Ly8gKHdoaWNoIGlzIGJ5IGRlZmF1bHQgdGhlIHdpZHRoIG9mIHRoZSB3aW5kb3c7IGl0IHdpbGwgaGFwcGVuIHdoZW5cclxuXHRcdFx0XHRcdC8vIHlvdSBzY3JvbGwgdGhlIHdpbmRvdyBob3Jpem9udGFsbHkgdG8gZ2V0IHRvIHRoZSBvcmlnaW4pLCBpdHMgdGV4dFxyXG5cdFx0XHRcdFx0Ly8gY29udGVudCB3aWxsIG90aGVyd2lzZSBicmVhayBsaW5lcyBhdCBlYWNoIHdvcmQgdG8ga2VlcCB1cCB3aXRoIHRoZVxyXG5cdFx0XHRcdFx0Ly8gYm9keSBvdmVyZmxvdyBzdHJhdGVneS5cclxuXHRcdFx0XHRcdGhlaWdodDogZmluYWxSZXN1bHQuc2l6ZS5oZWlnaHQsXHJcblx0XHRcdFx0XHR3aWR0aDogZmluYWxSZXN1bHQuc2l6ZS53aWR0aFxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmZpbmQoJy50b29sdGlwc3Rlci1hcnJvdycpXHJcblx0XHRcdFx0XHQuY3NzKHtcclxuXHRcdFx0XHRcdFx0J2xlZnQnOiAnJyxcclxuXHRcdFx0XHRcdFx0J3RvcCc6ICcnXHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LmNzcyhhcnJvd0Nvb3JkLnByb3AsIGFycm93Q29vcmQudmFsKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIGFwcGVuZCB0aGUgdG9vbHRpcCBIVE1MIGVsZW1lbnQgdG8gaXRzIHBhcmVudFxyXG5cdFx0XHRzZWxmLl9faW5zdGFuY2UuXyR0b29sdGlwLmFwcGVuZFRvKHNlbGYuX19pbnN0YW5jZS5vcHRpb24oJ3BhcmVudCcpKTtcclxuXHRcdFx0XHJcblx0XHRcdHNlbGYuX19pbnN0YW5jZS5fdHJpZ2dlcih7XHJcblx0XHRcdFx0dHlwZTogJ3JlcG9zaXRpb25lZCcsXHJcblx0XHRcdFx0ZXZlbnQ6IGV2ZW50LFxyXG5cdFx0XHRcdHBvc2l0aW9uOiBmaW5hbFJlc3VsdFxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogTWFrZSB3aGF0ZXZlciBtb2RpZmljYXRpb25zIGFyZSBuZWVkZWQgd2hlbiB0aGUgc2lkZSBpcyBjaGFuZ2VkLiBUaGlzIGhhc1xyXG5cdFx0ICogYmVlbiBtYWRlIGFuIGluZGVwZW5kYW50IG1ldGhvZCBmb3IgZWFzeSBpbmhlcml0YW5jZSBpbiBjdXN0b20gcGx1Z2lucyBiYXNlZFxyXG5cdFx0ICogb24gdGhpcyBkZWZhdWx0IHBsdWdpbi5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge29iamVjdH0gJG9ialxyXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHNpZGVcclxuXHRcdCAqIEBwcml2YXRlXHJcblx0XHQgKi9cclxuXHRcdF9fc2lkZUNoYW5nZTogZnVuY3Rpb24oJG9iaiwgc2lkZSkge1xyXG5cdFx0XHRcclxuXHRcdFx0JG9ialxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItYm90dG9tJylcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoJ3Rvb2x0aXBzdGVyLWxlZnQnKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItcmlnaHQnKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcygndG9vbHRpcHN0ZXItdG9wJylcclxuXHRcdFx0XHQuYWRkQ2xhc3MoJ3Rvb2x0aXBzdGVyLScrIHNpZGUpO1xyXG5cdFx0fSxcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBSZXR1cm5zIHRoZSB0YXJnZXQgdGhhdCB0aGUgdG9vbHRpcCBzaG91bGQgYWltIGF0IGZvciBhIGdpdmVuIHNpZGUuXHJcblx0XHQgKiBUaGUgY2FsY3VsYXRlZCB2YWx1ZSBpcyBhIGRpc3RhbmNlIGZyb20gdGhlIGVkZ2Ugb2YgdGhlIHdpbmRvd1xyXG5cdFx0ICogKGxlZnQgZWRnZSBmb3IgdG9wL2JvdHRvbSBzaWRlcywgdG9wIGVkZ2UgZm9yIGxlZnQvcmlnaHQgc2lkZSkuIFRoZVxyXG5cdFx0ICogdG9vbHRpcCB3aWxsIGJlIGNlbnRlcmVkIG9uIHRoYXQgcG9zaXRpb24gYW5kIHRoZSBhcnJvdyB3aWxsIGJlXHJcblx0XHQgKiBwb3NpdGlvbmVkIHRoZXJlIChhcyBtdWNoIGFzIHBvc3NpYmxlKS5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge29iamVjdH0gaGVscGVyXHJcblx0XHQgKiBAcmV0dXJuIHtpbnRlZ2VyfVxyXG5cdFx0ICogQHByaXZhdGVcclxuXHRcdCAqL1xyXG5cdFx0X190YXJnZXRGaW5kOiBmdW5jdGlvbihoZWxwZXIpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciB0YXJnZXQgPSB7fSxcclxuXHRcdFx0XHRyZWN0cyA9IHRoaXMuX19pbnN0YW5jZS5fJG9yaWdpblswXS5nZXRDbGllbnRSZWN0cygpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gdGhlc2UgbGluZXMgZml4IGEgQ2hyb21lIGJ1ZyAoaXNzdWUgIzQ5MSlcclxuXHRcdFx0aWYgKHJlY3RzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0XHR2YXIgb3BhY2l0eSA9IHRoaXMuX19pbnN0YW5jZS5fJG9yaWdpbi5jc3MoJ29wYWNpdHknKTtcclxuXHRcdFx0XHRpZihvcGFjaXR5ID09IDEpIHtcclxuXHRcdFx0XHRcdHRoaXMuX19pbnN0YW5jZS5fJG9yaWdpbi5jc3MoJ29wYWNpdHknLCAwLjk5KTtcclxuXHRcdFx0XHRcdHJlY3RzID0gdGhpcy5fX2luc3RhbmNlLl8kb3JpZ2luWzBdLmdldENsaWVudFJlY3RzKCk7XHJcblx0XHRcdFx0XHR0aGlzLl9faW5zdGFuY2UuXyRvcmlnaW4uY3NzKCdvcGFjaXR5JywgMSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBieSBkZWZhdWx0LCB0aGUgdGFyZ2V0IHdpbGwgYmUgdGhlIG1pZGRsZSBvZiB0aGUgb3JpZ2luXHJcblx0XHRcdGlmIChyZWN0cy5sZW5ndGggPCAyKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dGFyZ2V0LnRvcCA9IE1hdGguZmxvb3IoaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LmxlZnQgKyAoaGVscGVyLmdlby5vcmlnaW4uc2l6ZS53aWR0aCAvIDIpKTtcclxuXHRcdFx0XHR0YXJnZXQuYm90dG9tID0gdGFyZ2V0LnRvcDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0YXJnZXQubGVmdCA9IE1hdGguZmxvb3IoaGVscGVyLmdlby5vcmlnaW4ud2luZG93T2Zmc2V0LnRvcCArIChoZWxwZXIuZ2VvLm9yaWdpbi5zaXplLmhlaWdodCAvIDIpKTtcclxuXHRcdFx0XHR0YXJnZXQucmlnaHQgPSB0YXJnZXQubGVmdDtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBpZiBtdWx0aXBsZSBjbGllbnQgcmVjdHMgZXhpc3QsIHRoZSBlbGVtZW50IG1heSBiZSB0ZXh0IHNwbGl0XHJcblx0XHRcdC8vIHVwIGludG8gbXVsdGlwbGUgbGluZXMgYW5kIHRoZSBtaWRkbGUgb2YgdGhlIG9yaWdpbiBtYXkgbm90IGJlXHJcblx0XHRcdC8vIGJlc3Qgb3B0aW9uIGFueW1vcmUuIFdlIG5lZWQgdG8gY2hvb3NlIHRoZSBiZXN0IHRhcmdldCBjbGllbnQgcmVjdFxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyB0b3A6IHRoZSBmaXJzdFxyXG5cdFx0XHRcdHZhciB0YXJnZXRSZWN0ID0gcmVjdHNbMF07XHJcblx0XHRcdFx0dGFyZ2V0LnRvcCA9IE1hdGguZmxvb3IodGFyZ2V0UmVjdC5sZWZ0ICsgKHRhcmdldFJlY3QucmlnaHQgLSB0YXJnZXRSZWN0LmxlZnQpIC8gMik7XHJcblx0XHRcclxuXHRcdFx0XHQvLyByaWdodDogdGhlIG1pZGRsZSBsaW5lLCByb3VuZGVkIGRvd24gaW4gY2FzZSB0aGVyZSBpcyBhbiBldmVuXHJcblx0XHRcdFx0Ly8gbnVtYmVyIG9mIGxpbmVzIChsb29rcyBtb3JlIGNlbnRlcmVkID0+IGNoZWNrIG91dCB0aGVcclxuXHRcdFx0XHQvLyBkZW1vIHdpdGggNCBzcGxpdCBsaW5lcylcclxuXHRcdFx0XHRpZiAocmVjdHMubGVuZ3RoID4gMikge1xyXG5cdFx0XHRcdFx0dGFyZ2V0UmVjdCA9IHJlY3RzW01hdGguY2VpbChyZWN0cy5sZW5ndGggLyAyKSAtIDFdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHRhcmdldFJlY3QgPSByZWN0c1swXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGFyZ2V0LnJpZ2h0ID0gTWF0aC5mbG9vcih0YXJnZXRSZWN0LnRvcCArICh0YXJnZXRSZWN0LmJvdHRvbSAtIHRhcmdldFJlY3QudG9wKSAvIDIpO1xyXG5cdFx0XHJcblx0XHRcdFx0Ly8gYm90dG9tOiB0aGUgbGFzdFxyXG5cdFx0XHRcdHRhcmdldFJlY3QgPSByZWN0c1tyZWN0cy5sZW5ndGggLSAxXTtcclxuXHRcdFx0XHR0YXJnZXQuYm90dG9tID0gTWF0aC5mbG9vcih0YXJnZXRSZWN0LmxlZnQgKyAodGFyZ2V0UmVjdC5yaWdodCAtIHRhcmdldFJlY3QubGVmdCkgLyAyKTtcclxuXHRcdFxyXG5cdFx0XHRcdC8vIGxlZnQ6IHRoZSBtaWRkbGUgbGluZSwgcm91bmRlZCB1cFxyXG5cdFx0XHRcdGlmIChyZWN0cy5sZW5ndGggPiAyKSB7XHJcblx0XHRcdFx0XHR0YXJnZXRSZWN0ID0gcmVjdHNbTWF0aC5jZWlsKChyZWN0cy5sZW5ndGggKyAxKSAvIDIpIC0gMV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0dGFyZ2V0UmVjdCA9IHJlY3RzW3JlY3RzLmxlbmd0aCAtIDFdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0YXJnZXQubGVmdCA9IE1hdGguZmxvb3IodGFyZ2V0UmVjdC50b3AgKyAodGFyZ2V0UmVjdC5ib3R0b20gLSB0YXJnZXRSZWN0LnRvcCkgLyAyKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRhcmdldDtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxuLyogYSBidWlsZCB0YXNrIHdpbGwgYWRkIFwicmV0dXJuICQ7XCIgaGVyZSAqL1xyXG5yZXR1cm4gJDtcclxuXHJcbn0pKTtcclxuIiwiLyoqXHJcbiAqIGpxdWVyeS5tYXNrLmpzXHJcbiAqIEB2ZXJzaW9uOiB2MS4xNC4xMlxyXG4gKiBAYXV0aG9yOiBJZ29yIEVzY29iYXJcclxuICpcclxuICogQ3JlYXRlZCBieSBJZ29yIEVzY29iYXIgb24gMjAxMi0wMy0xMC4gUGxlYXNlIHJlcG9ydCBhbnkgYnVnIGF0IGh0dHA6Ly9ibG9nLmlnb3Jlc2NvYmFyLmNvbVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgSWdvciBFc2NvYmFyIGh0dHA6Ly9ibG9nLmlnb3Jlc2NvYmFyLmNvbVxyXG4gKlxyXG4gKiBUaGUgTUlUIExpY2Vuc2UgKGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwKVxyXG4gKlxyXG4gKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvblxyXG4gKiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvblxyXG4gKiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXRcclxuICogcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsXHJcbiAqIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZVxyXG4gKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZ1xyXG4gKiBjb25kaXRpb25zOlxyXG4gKlxyXG4gKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZVxyXG4gKiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuICpcclxuICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcclxuICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTXHJcbiAqIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXHJcbiAqIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUXHJcbiAqIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLFxyXG4gKiBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkdcclxuICogRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUlxyXG4gKiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXHJcbiAqL1xyXG5cclxuLyoganNoaW50IGxheGJyZWFrOiB0cnVlICovXHJcbi8qIGpzaGludCBtYXhjb21wbGV4aXR5OjE3ICovXHJcbi8qIGdsb2JhbCBkZWZpbmUgKi9cclxuXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbi8vIFVNRCAoVW5pdmVyc2FsIE1vZHVsZSBEZWZpbml0aW9uKSBwYXR0ZXJucyBmb3IgSmF2YVNjcmlwdCBtb2R1bGVzIHRoYXQgd29yayBldmVyeXdoZXJlLlxyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdW1kanMvdW1kL2Jsb2IvbWFzdGVyL2pxdWVyeVBsdWdpbkNvbW1vbmpzLmpzXHJcbihmdW5jdGlvbiAoZmFjdG9yeSwgalF1ZXJ5LCBaZXB0bykge1xyXG5cclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZhY3RvcnkoalF1ZXJ5IHx8IFplcHRvKTtcclxuICAgIH1cclxuXHJcbn0oZnVuY3Rpb24gKCQpIHtcclxuXHJcbiAgICB2YXIgTWFzayA9IGZ1bmN0aW9uIChlbCwgbWFzaywgb3B0aW9ucykge1xyXG5cclxuICAgICAgICB2YXIgcCA9IHtcclxuICAgICAgICAgICAgaW52YWxpZDogW10sXHJcbiAgICAgICAgICAgIGdldENhcmV0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0cmwgPSBlbC5nZXQoMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRTZWwgPSBkb2N1bWVudC5zZWxlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNTZWxTdGFydCA9IGN0cmwuc2VsZWN0aW9uU3RhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIElFIFN1cHBvcnRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZFNlbCAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdNU0lFIDEwJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbCA9IGRTZWwuY3JlYXRlUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgLXAudmFsKCkubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gc2VsLnRleHQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IHN1cHBvcnRcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjU2VsU3RhcnQgfHwgY1NlbFN0YXJ0ID09PSAnMCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zID0gY1NlbFN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvcztcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldENhcmV0OiBmdW5jdGlvbihwb3MpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmlzKCc6Zm9jdXMnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2UsIGN0cmwgPSBlbC5nZXQoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94LCBXZWJLaXQsIGV0Yy4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHJsLnNldFNlbGVjdGlvblJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHJsLnNldFNlbGVjdGlvblJhbmdlKHBvcywgcG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gSUVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gY3RybC5jcmVhdGVUZXh0UmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgcG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgcG9zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnNlbGVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXZlbnRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGVsXHJcbiAgICAgICAgICAgICAgICAub24oJ2tleWRvd24ubWFzaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5kYXRhKCdtYXNrLWtleWNvZGUnLCBlLmtleUNvZGUgfHwgZS53aGljaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuZGF0YSgnbWFzay1wcmV2aXVzLXZhbHVlJywgZWwudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmRhdGEoJ21hc2stcHJldml1cy1jYXJldC1wb3MnLCBwLmdldENhcmV0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHAubWFza0RpZ2l0UG9zTWFwT2xkID0gcC5tYXNrRGlnaXRQb3NNYXA7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKCQuak1hc2tHbG9iYWxzLnVzZUlucHV0ID8gJ2lucHV0Lm1hc2snIDogJ2tleXVwLm1hc2snLCBwLmJlaGF2aW91cilcclxuICAgICAgICAgICAgICAgIC5vbigncGFzdGUubWFzayBkcm9wLm1hc2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5rZXlkb3duKCkua2V5dXAoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbignY2hhbmdlLm1hc2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmRhdGEoJ2NoYW5nZWQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oJ2JsdXIubWFzaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBwLnZhbCgpICYmICFlbC5kYXRhKCdjaGFuZ2VkJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsLmRhdGEoJ2NoYW5nZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gaXQncyB2ZXJ5IGltcG9ydGFudCB0aGF0IHRoaXMgY2FsbGJhY2sgcmVtYWlucyBpbiB0aGlzIHBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndoaXNlIG9sZFZhbHVlIGl0J3MgZ29pbmcgdG8gd29yayBidWdneVxyXG4gICAgICAgICAgICAgICAgLm9uKCdibHVyLm1hc2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IHAudmFsKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gc2VsZWN0IGFsbCB0ZXh0IG9uIGZvY3VzXHJcbiAgICAgICAgICAgICAgICAub24oJ2ZvY3VzLm1hc2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNlbGVjdE9uRm9jdXMgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChlLnRhcmdldCkuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vIGNsZWFyIHRoZSB2YWx1ZSBpZiBpdCBub3QgY29tcGxldGUgdGhlIG1hc2tcclxuICAgICAgICAgICAgICAgIC5vbignZm9jdXNvdXQubWFzaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNsZWFySWZOb3RNYXRjaCAmJiAhcmVnZXhNYXNrLnRlc3QocC52YWwoKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBwLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0UmVnZXhNYXNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXNrQ2h1bmtzID0gW10sIHRyYW5zbGF0aW9uLCBwYXR0ZXJuLCBvcHRpb25hbCwgcmVjdXJzaXZlLCBvUmVjdXJzaXZlLCByO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFzay5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gak1hc2sudHJhbnNsYXRpb25bbWFzay5jaGFyQXQoaSldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNsYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gPSB0cmFuc2xhdGlvbi5wYXR0ZXJuLnRvU3RyaW5nKCkucmVwbGFjZSgvLnsxfSR8Xi57MX0vZywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25hbCA9IHRyYW5zbGF0aW9uLm9wdGlvbmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmUgPSB0cmFuc2xhdGlvbi5yZWN1cnNpdmU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdXJzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrQ2h1bmtzLnB1c2gobWFzay5jaGFyQXQoaSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb1JlY3Vyc2l2ZSA9IHtkaWdpdDogbWFzay5jaGFyQXQoaSksIHBhdHRlcm46IHBhdHRlcm59O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0NodW5rcy5wdXNoKCFvcHRpb25hbCAmJiAhcmVjdXJzaXZlID8gcGF0dGVybiA6IChwYXR0ZXJuICsgJz8nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0NodW5rcy5wdXNoKG1hc2suY2hhckF0KGkpLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgciA9IG1hc2tDaHVua3Muam9pbignJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9SZWN1cnNpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByID0gci5yZXBsYWNlKG5ldyBSZWdFeHAoJygnICsgb1JlY3Vyc2l2ZS5kaWdpdCArICcoLionICsgb1JlY3Vyc2l2ZS5kaWdpdCArICcpPyknKSwgJygkMSk/JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG5ldyBSZWdFeHAob1JlY3Vyc2l2ZS5kaWdpdCwgJ2cnKSwgb1JlY3Vyc2l2ZS5wYXR0ZXJuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChyKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVzdHJveUV2ZW50czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5vZmYoWydpbnB1dCcsICdrZXlkb3duJywgJ2tleXVwJywgJ3Bhc3RlJywgJ2Ryb3AnLCAnYmx1cicsICdmb2N1c291dCcsICcnXS5qb2luKCcubWFzayAnKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHZhbDogZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBlbC5pcygnaW5wdXQnKSxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBpc0lucHV0ID8gJ3ZhbCcgOiAndGV4dCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxbbWV0aG9kXSgpICE9PSB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsW21ldGhvZF0odik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHIgPSBlbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgciA9IGVsW21ldGhvZF0oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FsY3VsYXRlQ2FyZXRQb3NpdGlvbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2xkVmFsID0gZWwuZGF0YSgnbWFzay1wcmV2aXVzLXZhbHVlJykgfHwgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsID0gcC5nZXRNYXNrZWQoKSxcclxuICAgICAgICAgICAgICAgICAgICBjYXJldFBvc05ldyA9IHAuZ2V0Q2FyZXQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYXJldFBvc09sZCA9IGVsLmRhdGEoJ21hc2stcHJldml1cy1jYXJldC1wb3MnKSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWxMID0gbmV3VmFsLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsTCA9IG9sZFZhbC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdHNCZWZvcmVDYXJldCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdHNBZnRlckNhcmV0ID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsT2xkID0gMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IGNhcmV0UG9zTmV3OyBpIDwgbmV3VmFsTDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcC5tYXNrRGlnaXRQb3NNYXBbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdHNBZnRlckNhcmV0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBjYXJldFBvc05ldyAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcC5tYXNrRGlnaXRQb3NNYXBbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdHNCZWZvcmVDYXJldCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gY2FyZXRQb3NOZXcgLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocC5tYXNrRGlnaXRQb3NNYXBbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBjYXJldFBvc09sZCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLm1hc2tEaWdpdFBvc01hcE9sZFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0c0JlZm9yZUNhcmV0QWxsT2xkKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBjdXJzb3IgaXMgYXQgdGhlIGVuZCBrZWVwIGl0IHRoZXJlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcmV0UG9zTmV3ID4gb2xkVmFsTCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgPSBuZXdWYWxMICogMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYXJldFBvc09sZCA+PSBjYXJldFBvc05ldyAmJiBjYXJldFBvc09sZCAhPT0gb2xkVmFsTCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXAubWFza0RpZ2l0UG9zTWFwT2xkW2NhcmV0UG9zTmV3XSkgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FyZXRQb3MgPSBjYXJldFBvc05ldztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvc05ldyAtPSBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGxPbGQgLSBtYXNrRGlnaXRzQmVmb3JlQ2FyZXRBbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgLT0gbWFza0RpZ2l0c0JlZm9yZUNhcmV0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLm1hc2tEaWdpdFBvc01hcFtjYXJldFBvc05ld10pICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvc05ldyA9IGNhcmV0UG9zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjYXJldFBvc05ldyA+IGNhcmV0UG9zT2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0UG9zTmV3ICs9IG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbCAtIG1hc2tEaWdpdHNCZWZvcmVDYXJldEFsbE9sZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZXRQb3NOZXcgKz0gbWFza0RpZ2l0c0FmdGVyQ2FyZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhcmV0UG9zTmV3O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiZWhhdmlvdXI6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICAgICAgICAgICAgICAgIHAuaW52YWxpZCA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBrZXlDb2RlID0gZWwuZGF0YSgnbWFzay1rZXljb2RlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCQuaW5BcnJheShrZXlDb2RlLCBqTWFzay5ieVBhc3NLZXlzKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VmFsICAgPSBwLmdldE1hc2tlZCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJldFBvcyA9IHAuZ2V0Q2FyZXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBpcyBhIGNvbXBlbnNhdGlvbiB0byBkZXZpY2VzL2Jyb3dzZXJzIHRoYXQgZG9uJ3QgY29tcGVuc2F0ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNhcmV0IHBvc2l0aW9uaW5nIHRoZSByaWdodCB3YXlcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcC5zZXRDYXJldChwLmNhbGN1bGF0ZUNhcmV0UG9zaXRpb24oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwLnZhbChuZXdWYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHAuc2V0Q2FyZXQoY2FyZXRQb3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwLmNhbGxiYWNrcyhlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0TWFza2VkOiBmdW5jdGlvbihza2lwTWFza0NoYXJzLCB2YWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBidWYgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbCA9PT0gdW5kZWZpbmVkID8gcC52YWwoKSA6IHZhbCArICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIG0gPSAwLCBtYXNrTGVuID0gbWFzay5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IDAsIHZhbExlbiA9IHZhbHVlLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSAxLCBhZGRNZXRob2QgPSAncHVzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRQb3MgPSAtMSxcclxuICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRDb3VudCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0UG9zQXJyID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE1hc2tDaGFyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRNZXRob2QgPSAndW5zaGlmdCc7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdE1hc2tDaGFyID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBtID0gbWFza0xlbiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdiA9IHZhbExlbiAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtID4gLTEgJiYgdiA+IC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RNYXNrQ2hhciA9IG1hc2tMZW4gLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSA8IG1hc2tMZW4gJiYgdiA8IHZhbExlbjtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsYXN0VW50cmFuc2xhdGVkTWFza0NoYXI7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoY2hlY2soKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXNrRGlnaXQgPSBtYXNrLmNoYXJBdChtKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsRGlnaXQgPSB2YWx1ZS5jaGFyQXQodiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uID0gak1hc2sudHJhbnNsYXRpb25bbWFza0RpZ2l0XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxEaWdpdC5tYXRjaCh0cmFuc2xhdGlvbi5wYXR0ZXJuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmW2FkZE1ldGhvZF0odmFsRGlnaXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFuc2xhdGlvbi5yZWN1cnNpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzZXRQb3MgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0UG9zID0gbTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG0gPT09IGxhc3RNYXNrQ2hhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtID0gcmVzZXRQb3MgLSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdE1hc2tDaGFyID09PSByZXNldFBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtIC09IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtICs9IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWxEaWdpdCA9PT0gbGFzdFVudHJhbnNsYXRlZE1hc2tDaGFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaGVkIHRoZSBsYXN0IHVudHJhbnNsYXRlZCAocmF3KSBtYXNrIGNoYXJhY3RlciB0aGF0IHdlIGVuY291bnRlcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaWtlbHkgYW4gaW5zZXJ0IG9mZnNldCB0aGUgbWFzayBjaGFyYWN0ZXIgZnJvbSB0aGUgbGFzdCBlbnRyeTsgZmFsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3VnaCBhbmQgb25seSBpbmNyZW1lbnQgdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0Q291bnQtLTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RVbnRyYW5zbGF0ZWRNYXNrQ2hhciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFuc2xhdGlvbi5vcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbSArPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2IC09IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmFuc2xhdGlvbi5mYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmW2FkZE1ldGhvZF0odHJhbnNsYXRpb24uZmFsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbSArPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2IC09IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBwLmludmFsaWQucHVzaCh7cDogdiwgdjogdmFsRGlnaXQsIGU6IHRyYW5zbGF0aW9uLnBhdHRlcm59KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ICs9IG9mZnNldDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNraXBNYXNrQ2hhcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZlthZGRNZXRob2RdKG1hc2tEaWdpdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxEaWdpdCA9PT0gbWFza0RpZ2l0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrRGlnaXRQb3NBcnIucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFVudHJhbnNsYXRlZE1hc2tDaGFyID0gbWFza0RpZ2l0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFza0RpZ2l0UG9zQXJyLnB1c2godiArIG1hc2tEaWdpdENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tEaWdpdENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gb2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdE1hc2tDaGFyRGlnaXQgPSBtYXNrLmNoYXJBdChsYXN0TWFza0NoYXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hc2tMZW4gPT09IHZhbExlbiArIDEgJiYgIWpNYXNrLnRyYW5zbGF0aW9uW2xhc3RNYXNrQ2hhckRpZ2l0XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1Zi5wdXNoKGxhc3RNYXNrQ2hhckRpZ2l0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsID0gYnVmLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgcC5tYXBNYXNrZGlnaXRQb3NpdGlvbnMobmV3VmFsLCBtYXNrRGlnaXRQb3NBcnIsIHZhbExlbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VmFsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtYXBNYXNrZGlnaXRQb3NpdGlvbnM6IGZ1bmN0aW9uKG5ld1ZhbCwgbWFza0RpZ2l0UG9zQXJyLCB2YWxMZW4pIHtcclxuICAgICAgICAgICAgICB2YXIgbWFza0RpZmYgPSBvcHRpb25zLnJldmVyc2UgPyBuZXdWYWwubGVuZ3RoIC0gdmFsTGVuIDogMDtcclxuICAgICAgICAgICAgICBwLm1hc2tEaWdpdFBvc01hcCA9IHt9O1xyXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFza0RpZ2l0UG9zQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBwLm1hc2tEaWdpdFBvc01hcFttYXNrRGlnaXRQb3NBcnJbaV0gKyBtYXNrRGlmZl0gPSAxO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FsbGJhY2tzOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHAudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHZhbCAhPT0gb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEFyZ3MgPSBbdmFsLCBlLCBlbCwgb3B0aW9uc10sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbihuYW1lLCBjcml0ZXJpYSwgYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnNbbmFtZV0gPT09ICdmdW5jdGlvbicgJiYgY3JpdGVyaWEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbbmFtZV0uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCdvbkNoYW5nZScsIGNoYW5nZWQgPT09IHRydWUsIGRlZmF1bHRBcmdzKTtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCdvbktleVByZXNzJywgY2hhbmdlZCA9PT0gdHJ1ZSwgZGVmYXVsdEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soJ29uQ29tcGxldGUnLCB2YWwubGVuZ3RoID09PSBtYXNrLmxlbmd0aCwgZGVmYXVsdEFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soJ29uSW52YWxpZCcsIHAuaW52YWxpZC5sZW5ndGggPiAwLCBbdmFsLCBlLCBlbCwgcC5pbnZhbGlkLCBvcHRpb25zXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBlbCA9ICQoZWwpO1xyXG4gICAgICAgIHZhciBqTWFzayA9IHRoaXMsIG9sZFZhbHVlID0gcC52YWwoKSwgcmVnZXhNYXNrO1xyXG5cclxuICAgICAgICBtYXNrID0gdHlwZW9mIG1hc2sgPT09ICdmdW5jdGlvbicgPyBtYXNrKHAudmFsKCksIHVuZGVmaW5lZCwgZWwsICBvcHRpb25zKSA6IG1hc2s7XHJcblxyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXHJcbiAgICAgICAgak1hc2subWFzayA9IG1hc2s7XHJcbiAgICAgICAgak1hc2sub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgak1hc2sucmVtb3ZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBjYXJldCA9IHAuZ2V0Q2FyZXQoKTtcclxuICAgICAgICAgICAgcC5kZXN0cm95RXZlbnRzKCk7XHJcbiAgICAgICAgICAgIHAudmFsKGpNYXNrLmdldENsZWFuVmFsKCkpO1xyXG4gICAgICAgICAgICBwLnNldENhcmV0KGNhcmV0KTtcclxuICAgICAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGdldCB2YWx1ZSB3aXRob3V0IG1hc2tcclxuICAgICAgICBqTWFzay5nZXRDbGVhblZhbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgIHJldHVybiBwLmdldE1hc2tlZCh0cnVlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBnZXQgbWFza2VkIHZhbHVlIHdpdGhvdXQgdGhlIHZhbHVlIGJlaW5nIGluIHRoZSBpbnB1dCBvciBlbGVtZW50XHJcbiAgICAgICAgak1hc2suZ2V0TWFza2VkVmFsID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgcmV0dXJuIHAuZ2V0TWFza2VkKGZhbHNlLCB2YWwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgak1hc2suaW5pdCA9IGZ1bmN0aW9uKG9ubHlNYXNrKSB7XHJcbiAgICAgICAgICAgIG9ubHlNYXNrID0gb25seU1hc2sgfHwgZmFsc2U7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgak1hc2suY2xlYXJJZk5vdE1hdGNoICA9ICQuak1hc2tHbG9iYWxzLmNsZWFySWZOb3RNYXRjaDtcclxuICAgICAgICAgICAgak1hc2suYnlQYXNzS2V5cyAgICAgICA9ICQuak1hc2tHbG9iYWxzLmJ5UGFzc0tleXM7XHJcbiAgICAgICAgICAgIGpNYXNrLnRyYW5zbGF0aW9uICAgICAgPSAkLmV4dGVuZCh7fSwgJC5qTWFza0dsb2JhbHMudHJhbnNsYXRpb24sIG9wdGlvbnMudHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgak1hc2sgPSAkLmV4dGVuZCh0cnVlLCB7fSwgak1hc2ssIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgcmVnZXhNYXNrID0gcC5nZXRSZWdleE1hc2soKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvbmx5TWFzaykge1xyXG4gICAgICAgICAgICAgICAgcC5ldmVudHMoKTtcclxuICAgICAgICAgICAgICAgIHAudmFsKHAuZ2V0TWFza2VkKCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5hdHRyKCdwbGFjZWhvbGRlcicgLCBvcHRpb25zLnBsYWNlaG9sZGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSwgb3RoZXJ3aXNlIGlmIHRoZSB1c2VyIHN1Ym1pdCB0aGUgZm9ybVxyXG4gICAgICAgICAgICAgICAgLy8gYW5kIHRoZW4gcHJlc3MgdGhlIFwiYmFja1wiIGJ1dHRvbiwgdGhlIGF1dG9jb21wbGV0ZSB3aWxsIGVyYXNlXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgZGF0YS4gV29ya3MgZmluZSBvbiBJRTkrLCBGRiwgT3BlcmEsIFNhZmFyaS5cclxuICAgICAgICAgICAgICAgIGlmIChlbC5kYXRhKCdtYXNrJykpIHtcclxuICAgICAgICAgICAgICAgICAgZWwuYXR0cignYXV0b2NvbXBsZXRlJywgJ29mZicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGRldGVjdCBpZiBpcyBuZWNlc3NhcnkgbGV0IHRoZSB1c2VyIHR5cGUgZnJlZWx5LlxyXG4gICAgICAgICAgICAgICAgLy8gZm9yIGlzIGEgbG90IGZhc3RlciB0aGFuIGZvckVhY2guXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF4bGVuZ3RoID0gdHJ1ZTsgaSA8IG1hc2subGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRpb24gPSBqTWFzay50cmFuc2xhdGlvblttYXNrLmNoYXJBdChpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyYW5zbGF0aW9uICYmIHRyYW5zbGF0aW9uLnJlY3Vyc2l2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhsZW5ndGggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtYXhsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5hdHRyKCdtYXhsZW5ndGgnLCBtYXNrLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcC5kZXN0cm95RXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBwLmV2ZW50cygpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjYXJldCA9IHAuZ2V0Q2FyZXQoKTtcclxuICAgICAgICAgICAgICAgIHAudmFsKHAuZ2V0TWFza2VkKCkpO1xyXG4gICAgICAgICAgICAgICAgcC5zZXRDYXJldChjYXJldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBqTWFzay5pbml0KCFlbC5pcygnaW5wdXQnKSk7XHJcbiAgICB9O1xyXG5cclxuICAgICQubWFza1dhdGNoZXJzID0ge307XHJcbiAgICB2YXIgSFRNTEF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9LFxyXG4gICAgICAgICAgICBwcmVmaXggPSAnZGF0YS1tYXNrLScsXHJcbiAgICAgICAgICAgIG1hc2sgPSBpbnB1dC5hdHRyKCdkYXRhLW1hc2snKTtcclxuXHJcbiAgICAgICAgaWYgKGlucHV0LmF0dHIocHJlZml4ICsgJ3JldmVyc2UnKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zLnJldmVyc2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGlucHV0LmF0dHIocHJlZml4ICsgJ2NsZWFyaWZub3RtYXRjaCcpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuY2xlYXJJZk5vdE1hdGNoID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChpbnB1dC5hdHRyKHByZWZpeCArICdzZWxlY3RvbmZvY3VzJykgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgIG9wdGlvbnMuc2VsZWN0T25Gb2N1cyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobm90U2FtZU1hc2tPYmplY3QoaW5wdXQsIG1hc2ssIG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnB1dC5kYXRhKCdtYXNrJywgbmV3IE1hc2sodGhpcywgbWFzaywgb3B0aW9ucykpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBub3RTYW1lTWFza09iamVjdCA9IGZ1bmN0aW9uKGZpZWxkLCBtYXNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgdmFyIG1hc2tPYmplY3QgPSAkKGZpZWxkKS5kYXRhKCdtYXNrJyksXHJcbiAgICAgICAgICAgIHN0cmluZ2lmeSA9IEpTT04uc3RyaW5naWZ5LFxyXG4gICAgICAgICAgICB2YWx1ZSA9ICQoZmllbGQpLnZhbCgpIHx8ICQoZmllbGQpLnRleHQoKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1hc2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIG1hc2sgPSBtYXNrKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIG1hc2tPYmplY3QgIT09ICdvYmplY3QnIHx8IHN0cmluZ2lmeShtYXNrT2JqZWN0Lm9wdGlvbnMpICE9PSBzdHJpbmdpZnkob3B0aW9ucykgfHwgbWFza09iamVjdC5tYXNrICE9PSBtYXNrO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcbiAgICB9LFxyXG4gICAgZXZlbnRTdXBwb3J0ZWQgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcclxuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgaXNTdXBwb3J0ZWQ7XHJcblxyXG4gICAgICAgIGV2ZW50TmFtZSA9ICdvbicgKyBldmVudE5hbWU7XHJcbiAgICAgICAgaXNTdXBwb3J0ZWQgPSAoZXZlbnROYW1lIGluIGVsKTtcclxuXHJcbiAgICAgICAgaWYgKCAhaXNTdXBwb3J0ZWQgKSB7XHJcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZShldmVudE5hbWUsICdyZXR1cm47Jyk7XHJcbiAgICAgICAgICAgIGlzU3VwcG9ydGVkID0gdHlwZW9mIGVsW2V2ZW50TmFtZV0gPT09ICdmdW5jdGlvbic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsID0gbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlzU3VwcG9ydGVkO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmZuLm1hc2sgPSBmdW5jdGlvbihtYXNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvcixcclxuICAgICAgICAgICAgZ2xvYmFscyA9ICQuak1hc2tHbG9iYWxzLFxyXG4gICAgICAgICAgICBpbnRlcnZhbCA9IGdsb2JhbHMud2F0Y2hJbnRlcnZhbCxcclxuICAgICAgICAgICAgd2F0Y2hJbnB1dHMgPSBvcHRpb25zLndhdGNoSW5wdXRzIHx8IGdsb2JhbHMud2F0Y2hJbnB1dHMsXHJcbiAgICAgICAgICAgIG1hc2tGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vdFNhbWVNYXNrT2JqZWN0KHRoaXMsIG1hc2ssIG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgnbWFzaycsIG5ldyBNYXNrKHRoaXMsIG1hc2ssIG9wdGlvbnMpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5lYWNoKG1hc2tGdW5jdGlvbik7XHJcblxyXG4gICAgICAgIGlmIChzZWxlY3RvciAmJiBzZWxlY3RvciAhPT0gJycgJiYgd2F0Y2hJbnB1dHMpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCgkLm1hc2tXYXRjaGVyc1tzZWxlY3Rvcl0pO1xyXG4gICAgICAgICAgICAkLm1hc2tXYXRjaGVyc1tzZWxlY3Rvcl0gPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZChzZWxlY3RvcikuZWFjaChtYXNrRnVuY3Rpb24pO1xyXG4gICAgICAgICAgICB9LCBpbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmZuLm1hc2tlZCA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEoJ21hc2snKS5nZXRNYXNrZWRWYWwodmFsKTtcclxuICAgIH07XHJcblxyXG4gICAgJC5mbi51bm1hc2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKCQubWFza1dhdGNoZXJzW3RoaXMuc2VsZWN0b3JdKTtcclxuICAgICAgICBkZWxldGUgJC5tYXNrV2F0Y2hlcnNbdGhpcy5zZWxlY3Rvcl07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGFNYXNrID0gJCh0aGlzKS5kYXRhKCdtYXNrJyk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhTWFzaykge1xyXG4gICAgICAgICAgICAgICAgZGF0YU1hc2sucmVtb3ZlKCkucmVtb3ZlRGF0YSgnbWFzaycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZm4uY2xlYW5WYWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhKCdtYXNrJykuZ2V0Q2xlYW5WYWwoKTtcclxuICAgIH07XHJcblxyXG4gICAgJC5hcHBseURhdGFNYXNrID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcclxuICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yIHx8ICQuak1hc2tHbG9iYWxzLm1hc2tFbGVtZW50cztcclxuICAgICAgICB2YXIgJHNlbGVjdG9yID0gKHNlbGVjdG9yIGluc3RhbmNlb2YgJCkgPyBzZWxlY3RvciA6ICQoc2VsZWN0b3IpO1xyXG4gICAgICAgICRzZWxlY3Rvci5maWx0ZXIoJC5qTWFza0dsb2JhbHMuZGF0YU1hc2tBdHRyKS5lYWNoKEhUTUxBdHRyaWJ1dGVzKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGdsb2JhbHMgPSB7XHJcbiAgICAgICAgbWFza0VsZW1lbnRzOiAnaW5wdXQsdGQsc3BhbixkaXYnLFxyXG4gICAgICAgIGRhdGFNYXNrQXR0cjogJypbZGF0YS1tYXNrXScsXHJcbiAgICAgICAgZGF0YU1hc2s6IHRydWUsXHJcbiAgICAgICAgd2F0Y2hJbnRlcnZhbDogMzAwLFxyXG4gICAgICAgIHdhdGNoSW5wdXRzOiB0cnVlLFxyXG4gICAgICAgIC8vIG9sZCB2ZXJzaW9ucyBvZiBjaHJvbWUgZG9udCB3b3JrIGdyZWF0IHdpdGggaW5wdXQgZXZlbnRcclxuICAgICAgICB1c2VJbnB1dDogIS9DaHJvbWVcXC9bMi00XVswLTldfFNhbXN1bmdCcm93c2VyLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSAmJiBldmVudFN1cHBvcnRlZCgnaW5wdXQnKSxcclxuICAgICAgICB3YXRjaERhdGFNYXNrOiBmYWxzZSxcclxuICAgICAgICBieVBhc3NLZXlzOiBbOSwgMTYsIDE3LCAxOCwgMzYsIDM3LCAzOCwgMzksIDQwLCA5MV0sXHJcbiAgICAgICAgdHJhbnNsYXRpb246IHtcclxuICAgICAgICAgICAgJzAnOiB7cGF0dGVybjogL1xcZC99LFxyXG4gICAgICAgICAgICAnOSc6IHtwYXR0ZXJuOiAvXFxkLywgb3B0aW9uYWw6IHRydWV9LFxyXG4gICAgICAgICAgICAnIyc6IHtwYXR0ZXJuOiAvXFxkLywgcmVjdXJzaXZlOiB0cnVlfSxcclxuICAgICAgICAgICAgJ0EnOiB7cGF0dGVybjogL1thLXpBLVowLTldL30sXHJcbiAgICAgICAgICAgICdTJzoge3BhdHRlcm46IC9bYS16QS1aXS99XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkLmpNYXNrR2xvYmFscyA9ICQuak1hc2tHbG9iYWxzIHx8IHt9O1xyXG4gICAgZ2xvYmFscyA9ICQuak1hc2tHbG9iYWxzID0gJC5leHRlbmQodHJ1ZSwge30sIGdsb2JhbHMsICQuak1hc2tHbG9iYWxzKTtcclxuXHJcbiAgICAvLyBsb29raW5nIGZvciBpbnB1dHMgd2l0aCBkYXRhLW1hc2sgYXR0cmlidXRlXHJcbiAgICBpZiAoZ2xvYmFscy5kYXRhTWFzaykge1xyXG4gICAgICAgICQuYXBwbHlEYXRhTWFzaygpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkLmpNYXNrR2xvYmFscy53YXRjaERhdGFNYXNrKSB7XHJcbiAgICAgICAgICAgICQuYXBwbHlEYXRhTWFzaygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIGdsb2JhbHMud2F0Y2hJbnRlcnZhbCk7XHJcbn0sIHdpbmRvdy5qUXVlcnksIHdpbmRvdy5aZXB0bykpO1xyXG4iLCIvKiFcclxuICogalF1ZXJ5IE1vdXNld2hlZWwgMy4xLjEyXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcbiAgICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcclxuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAvLyBOb2RlL0NvbW1vbkpTIHN0eWxlIGZvciBCcm93c2VyaWZ5XHJcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgICB9XHJcbn0oZnVuY3Rpb24gKCQpIHtcclxuXHJcbiAgICB2YXIgdG9GaXggID0gWyd3aGVlbCcsICdtb3VzZXdoZWVsJywgJ0RPTU1vdXNlU2Nyb2xsJywgJ01vek1vdXNlUGl4ZWxTY3JvbGwnXSxcclxuICAgICAgICB0b0JpbmQgPSAoICdvbndoZWVsJyBpbiBkb2N1bWVudCB8fCBkb2N1bWVudC5kb2N1bWVudE1vZGUgPj0gOSApID9cclxuICAgICAgICAgICAgICAgICAgICBbJ3doZWVsJ10gOiBbJ21vdXNld2hlZWwnLCAnRG9tTW91c2VTY3JvbGwnLCAnTW96TW91c2VQaXhlbFNjcm9sbCddLFxyXG4gICAgICAgIHNsaWNlICA9IEFycmF5LnByb3RvdHlwZS5zbGljZSxcclxuICAgICAgICBudWxsTG93ZXN0RGVsdGFUaW1lb3V0LCBsb3dlc3REZWx0YTtcclxuXHJcbiAgICBpZiAoICQuZXZlbnQuZml4SG9va3MgKSB7XHJcbiAgICAgICAgZm9yICggdmFyIGkgPSB0b0ZpeC5sZW5ndGg7IGk7ICkge1xyXG4gICAgICAgICAgICAkLmV2ZW50LmZpeEhvb2tzWyB0b0ZpeFstLWldIF0gPSAkLmV2ZW50Lm1vdXNlSG9va3M7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBzcGVjaWFsID0gJC5ldmVudC5zcGVjaWFsLm1vdXNld2hlZWwgPSB7XHJcbiAgICAgICAgdmVyc2lvbjogJzMuMS4xMicsXHJcblxyXG4gICAgICAgIHNldHVwOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmFkZEV2ZW50TGlzdGVuZXIgKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IHRvQmluZC5sZW5ndGg7IGk7ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lciggdG9CaW5kWy0taV0sIGhhbmRsZXIsIGZhbHNlICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9ubW91c2V3aGVlbCA9IGhhbmRsZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGxpbmUgaGVpZ2h0IGFuZCBwYWdlIGhlaWdodCBmb3IgdGhpcyBwYXJ0aWN1bGFyIGVsZW1lbnRcclxuICAgICAgICAgICAgJC5kYXRhKHRoaXMsICdtb3VzZXdoZWVsLWxpbmUtaGVpZ2h0Jywgc3BlY2lhbC5nZXRMaW5lSGVpZ2h0KHRoaXMpKTtcclxuICAgICAgICAgICAgJC5kYXRhKHRoaXMsICdtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0Jywgc3BlY2lhbC5nZXRQYWdlSGVpZ2h0KHRoaXMpKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICggdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyICkge1xyXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSB0b0JpbmQubGVuZ3RoOyBpOyApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHRvQmluZFstLWldLCBoYW5kbGVyLCBmYWxzZSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbm1vdXNld2hlZWwgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBkYXRhIHdlIGFkZGVkIHRvIHRoZSBlbGVtZW50XHJcbiAgICAgICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLCAnbW91c2V3aGVlbC1saW5lLWhlaWdodCcpO1xyXG4gICAgICAgICAgICAkLnJlbW92ZURhdGEodGhpcywgJ21vdXNld2hlZWwtcGFnZS1oZWlnaHQnKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRMaW5lSGVpZ2h0OiBmdW5jdGlvbihlbGVtKSB7XHJcbiAgICAgICAgICAgIHZhciAkZWxlbSA9ICQoZWxlbSksXHJcbiAgICAgICAgICAgICAgICAkcGFyZW50ID0gJGVsZW1bJ29mZnNldFBhcmVudCcgaW4gJC5mbiA/ICdvZmZzZXRQYXJlbnQnIDogJ3BhcmVudCddKCk7XHJcbiAgICAgICAgICAgIGlmICghJHBhcmVudC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkKCdib2R5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KCRwYXJlbnQuY3NzKCdmb250U2l6ZScpLCAxMCkgfHwgcGFyc2VJbnQoJGVsZW0uY3NzKCdmb250U2l6ZScpLCAxMCkgfHwgMTY7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0UGFnZUhlaWdodDogZnVuY3Rpb24oZWxlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJChlbGVtKS5oZWlnaHQoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICBhZGp1c3RPbGREZWx0YXM6IHRydWUsIC8vIHNlZSBzaG91bGRBZGp1c3RPbGREZWx0YXMoKSBiZWxvd1xyXG4gICAgICAgICAgICBub3JtYWxpemVPZmZzZXQ6IHRydWUgIC8vIGNhbGxzIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmb3IgZWFjaCBldmVudFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgJC5mbi5leHRlbmQoe1xyXG4gICAgICAgIG1vdXNld2hlZWw6IGZ1bmN0aW9uKGZuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmbiA/IHRoaXMuYmluZCgnbW91c2V3aGVlbCcsIGZuKSA6IHRoaXMudHJpZ2dlcignbW91c2V3aGVlbCcpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHVubW91c2V3aGVlbDogZnVuY3Rpb24oZm4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudW5iaW5kKCdtb3VzZXdoZWVsJywgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIG9yZ0V2ZW50ICAgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQsXHJcbiAgICAgICAgICAgIGFyZ3MgICAgICAgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXHJcbiAgICAgICAgICAgIGRlbHRhICAgICAgPSAwLFxyXG4gICAgICAgICAgICBkZWx0YVggICAgID0gMCxcclxuICAgICAgICAgICAgZGVsdGFZICAgICA9IDAsXHJcbiAgICAgICAgICAgIGFic0RlbHRhICAgPSAwLFxyXG4gICAgICAgICAgICBvZmZzZXRYICAgID0gMCxcclxuICAgICAgICAgICAgb2Zmc2V0WSAgICA9IDA7XHJcbiAgICAgICAgZXZlbnQgPSAkLmV2ZW50LmZpeChvcmdFdmVudCk7XHJcbiAgICAgICAgZXZlbnQudHlwZSA9ICdtb3VzZXdoZWVsJztcclxuXHJcbiAgICAgICAgLy8gT2xkIHNjaG9vbCBzY3JvbGx3aGVlbCBkZWx0YVxyXG4gICAgICAgIGlmICggJ2RldGFpbCcgICAgICBpbiBvcmdFdmVudCApIHsgZGVsdGFZID0gb3JnRXZlbnQuZGV0YWlsICogLTE7ICAgICAgfVxyXG4gICAgICAgIGlmICggJ3doZWVsRGVsdGEnICBpbiBvcmdFdmVudCApIHsgZGVsdGFZID0gb3JnRXZlbnQud2hlZWxEZWx0YTsgICAgICAgfVxyXG4gICAgICAgIGlmICggJ3doZWVsRGVsdGFZJyBpbiBvcmdFdmVudCApIHsgZGVsdGFZID0gb3JnRXZlbnQud2hlZWxEZWx0YVk7ICAgICAgfVxyXG4gICAgICAgIGlmICggJ3doZWVsRGVsdGFYJyBpbiBvcmdFdmVudCApIHsgZGVsdGFYID0gb3JnRXZlbnQud2hlZWxEZWx0YVggKiAtMTsgfVxyXG5cclxuICAgICAgICAvLyBGaXJlZm94IDwgMTcgaG9yaXpvbnRhbCBzY3JvbGxpbmcgcmVsYXRlZCB0byBET01Nb3VzZVNjcm9sbCBldmVudFxyXG4gICAgICAgIGlmICggJ2F4aXMnIGluIG9yZ0V2ZW50ICYmIG9yZ0V2ZW50LmF4aXMgPT09IG9yZ0V2ZW50LkhPUklaT05UQUxfQVhJUyApIHtcclxuICAgICAgICAgICAgZGVsdGFYID0gZGVsdGFZICogLTE7XHJcbiAgICAgICAgICAgIGRlbHRhWSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgZGVsdGEgdG8gYmUgZGVsdGFZIG9yIGRlbHRhWCBpZiBkZWx0YVkgaXMgMCBmb3IgYmFja3dhcmRzIGNvbXBhdGFiaWxpdGl5XHJcbiAgICAgICAgZGVsdGEgPSBkZWx0YVkgPT09IDAgPyBkZWx0YVggOiBkZWx0YVk7XHJcblxyXG4gICAgICAgIC8vIE5ldyBzY2hvb2wgd2hlZWwgZGVsdGEgKHdoZWVsIGV2ZW50KVxyXG4gICAgICAgIGlmICggJ2RlbHRhWScgaW4gb3JnRXZlbnQgKSB7XHJcbiAgICAgICAgICAgIGRlbHRhWSA9IG9yZ0V2ZW50LmRlbHRhWSAqIC0xO1xyXG4gICAgICAgICAgICBkZWx0YSAgPSBkZWx0YVk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggJ2RlbHRhWCcgaW4gb3JnRXZlbnQgKSB7XHJcbiAgICAgICAgICAgIGRlbHRhWCA9IG9yZ0V2ZW50LmRlbHRhWDtcclxuICAgICAgICAgICAgaWYgKCBkZWx0YVkgPT09IDAgKSB7IGRlbHRhICA9IGRlbHRhWCAqIC0xOyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBObyBjaGFuZ2UgYWN0dWFsbHkgaGFwcGVuZWQsIG5vIHJlYXNvbiB0byBnbyBhbnkgZnVydGhlclxyXG4gICAgICAgIGlmICggZGVsdGFZID09PSAwICYmIGRlbHRhWCA9PT0gMCApIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgICAgIC8vIE5lZWQgdG8gY29udmVydCBsaW5lcyBhbmQgcGFnZXMgdG8gcGl4ZWxzIGlmIHdlIGFyZW4ndCBhbHJlYWR5IGluIHBpeGVsc1xyXG4gICAgICAgIC8vIFRoZXJlIGFyZSB0aHJlZSBkZWx0YSBtb2RlczpcclxuICAgICAgICAvLyAgICogZGVsdGFNb2RlIDAgaXMgYnkgcGl4ZWxzLCBub3RoaW5nIHRvIGRvXHJcbiAgICAgICAgLy8gICAqIGRlbHRhTW9kZSAxIGlzIGJ5IGxpbmVzXHJcbiAgICAgICAgLy8gICAqIGRlbHRhTW9kZSAyIGlzIGJ5IHBhZ2VzXHJcbiAgICAgICAgaWYgKCBvcmdFdmVudC5kZWx0YU1vZGUgPT09IDEgKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lSGVpZ2h0ID0gJC5kYXRhKHRoaXMsICdtb3VzZXdoZWVsLWxpbmUtaGVpZ2h0Jyk7XHJcbiAgICAgICAgICAgIGRlbHRhICAqPSBsaW5lSGVpZ2h0O1xyXG4gICAgICAgICAgICBkZWx0YVkgKj0gbGluZUhlaWdodDtcclxuICAgICAgICAgICAgZGVsdGFYICo9IGxpbmVIZWlnaHQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICggb3JnRXZlbnQuZGVsdGFNb2RlID09PSAyICkge1xyXG4gICAgICAgICAgICB2YXIgcGFnZUhlaWdodCA9ICQuZGF0YSh0aGlzLCAnbW91c2V3aGVlbC1wYWdlLWhlaWdodCcpO1xyXG4gICAgICAgICAgICBkZWx0YSAgKj0gcGFnZUhlaWdodDtcclxuICAgICAgICAgICAgZGVsdGFZICo9IHBhZ2VIZWlnaHQ7XHJcbiAgICAgICAgICAgIGRlbHRhWCAqPSBwYWdlSGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU3RvcmUgbG93ZXN0IGFic29sdXRlIGRlbHRhIHRvIG5vcm1hbGl6ZSB0aGUgZGVsdGEgdmFsdWVzXHJcbiAgICAgICAgYWJzRGVsdGEgPSBNYXRoLm1heCggTWF0aC5hYnMoZGVsdGFZKSwgTWF0aC5hYnMoZGVsdGFYKSApO1xyXG5cclxuICAgICAgICBpZiAoICFsb3dlc3REZWx0YSB8fCBhYnNEZWx0YSA8IGxvd2VzdERlbHRhICkge1xyXG4gICAgICAgICAgICBsb3dlc3REZWx0YSA9IGFic0RlbHRhO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRqdXN0IG9sZGVyIGRlbHRhcyBpZiBuZWNlc3NhcnlcclxuICAgICAgICAgICAgaWYgKCBzaG91bGRBZGp1c3RPbGREZWx0YXMob3JnRXZlbnQsIGFic0RlbHRhKSApIHtcclxuICAgICAgICAgICAgICAgIGxvd2VzdERlbHRhIC89IDQwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGp1c3Qgb2xkZXIgZGVsdGFzIGlmIG5lY2Vzc2FyeVxyXG4gICAgICAgIGlmICggc2hvdWxkQWRqdXN0T2xkRGVsdGFzKG9yZ0V2ZW50LCBhYnNEZWx0YSkgKSB7XHJcbiAgICAgICAgICAgIC8vIERpdmlkZSBhbGwgdGhlIHRoaW5ncyBieSA0MCFcclxuICAgICAgICAgICAgZGVsdGEgIC89IDQwO1xyXG4gICAgICAgICAgICBkZWx0YVggLz0gNDA7XHJcbiAgICAgICAgICAgIGRlbHRhWSAvPSA0MDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBhIHdob2xlLCBub3JtYWxpemVkIHZhbHVlIGZvciB0aGUgZGVsdGFzXHJcbiAgICAgICAgZGVsdGEgID0gTWF0aFsgZGVsdGEgID49IDEgPyAnZmxvb3InIDogJ2NlaWwnIF0oZGVsdGEgIC8gbG93ZXN0RGVsdGEpO1xyXG4gICAgICAgIGRlbHRhWCA9IE1hdGhbIGRlbHRhWCA+PSAxID8gJ2Zsb29yJyA6ICdjZWlsJyBdKGRlbHRhWCAvIGxvd2VzdERlbHRhKTtcclxuICAgICAgICBkZWx0YVkgPSBNYXRoWyBkZWx0YVkgPj0gMSA/ICdmbG9vcicgOiAnY2VpbCcgXShkZWx0YVkgLyBsb3dlc3REZWx0YSk7XHJcblxyXG4gICAgICAgIC8vIE5vcm1hbGlzZSBvZmZzZXRYIGFuZCBvZmZzZXRZIHByb3BlcnRpZXNcclxuICAgICAgICBpZiAoIHNwZWNpYWwuc2V0dGluZ3Mubm9ybWFsaXplT2Zmc2V0ICYmIHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICkge1xyXG4gICAgICAgICAgICB2YXIgYm91bmRpbmdSZWN0ID0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgb2Zmc2V0WCA9IGV2ZW50LmNsaWVudFggLSBib3VuZGluZ1JlY3QubGVmdDtcclxuICAgICAgICAgICAgb2Zmc2V0WSA9IGV2ZW50LmNsaWVudFkgLSBib3VuZGluZ1JlY3QudG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRkIGluZm9ybWF0aW9uIHRvIHRoZSBldmVudCBvYmplY3RcclxuICAgICAgICBldmVudC5kZWx0YVggPSBkZWx0YVg7XHJcbiAgICAgICAgZXZlbnQuZGVsdGFZID0gZGVsdGFZO1xyXG4gICAgICAgIGV2ZW50LmRlbHRhRmFjdG9yID0gbG93ZXN0RGVsdGE7XHJcbiAgICAgICAgZXZlbnQub2Zmc2V0WCA9IG9mZnNldFg7XHJcbiAgICAgICAgZXZlbnQub2Zmc2V0WSA9IG9mZnNldFk7XHJcbiAgICAgICAgLy8gR28gYWhlYWQgYW5kIHNldCBkZWx0YU1vZGUgdG8gMCBzaW5jZSB3ZSBjb252ZXJ0ZWQgdG8gcGl4ZWxzXHJcbiAgICAgICAgLy8gQWx0aG91Z2ggdGhpcyBpcyBhIGxpdHRsZSBvZGQgc2luY2Ugd2Ugb3ZlcndyaXRlIHRoZSBkZWx0YVgvWVxyXG4gICAgICAgIC8vIHByb3BlcnRpZXMgd2l0aCBub3JtYWxpemVkIGRlbHRhcy5cclxuICAgICAgICBldmVudC5kZWx0YU1vZGUgPSAwO1xyXG5cclxuICAgICAgICAvLyBBZGQgZXZlbnQgYW5kIGRlbHRhIHRvIHRoZSBmcm9udCBvZiB0aGUgYXJndW1lbnRzXHJcbiAgICAgICAgYXJncy51bnNoaWZ0KGV2ZW50LCBkZWx0YSwgZGVsdGFYLCBkZWx0YVkpO1xyXG5cclxuICAgICAgICAvLyBDbGVhcm91dCBsb3dlc3REZWx0YSBhZnRlciBzb21ldGltZSB0byBiZXR0ZXJcclxuICAgICAgICAvLyBoYW5kbGUgbXVsdGlwbGUgZGV2aWNlIHR5cGVzIHRoYXQgZ2l2ZSBkaWZmZXJlbnRcclxuICAgICAgICAvLyBhIGRpZmZlcmVudCBsb3dlc3REZWx0YVxyXG4gICAgICAgIC8vIEV4OiB0cmFja3BhZCA9IDMgYW5kIG1vdXNlIHdoZWVsID0gMTIwXHJcbiAgICAgICAgaWYgKG51bGxMb3dlc3REZWx0YVRpbWVvdXQpIHsgY2xlYXJUaW1lb3V0KG51bGxMb3dlc3REZWx0YVRpbWVvdXQpOyB9XHJcbiAgICAgICAgbnVsbExvd2VzdERlbHRhVGltZW91dCA9IHNldFRpbWVvdXQobnVsbExvd2VzdERlbHRhLCAyMDApO1xyXG5cclxuICAgICAgICByZXR1cm4gKCQuZXZlbnQuZGlzcGF0Y2ggfHwgJC5ldmVudC5oYW5kbGUpLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG51bGxMb3dlc3REZWx0YSgpIHtcclxuICAgICAgICBsb3dlc3REZWx0YSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvdWxkQWRqdXN0T2xkRGVsdGFzKG9yZ0V2ZW50LCBhYnNEZWx0YSkge1xyXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gb2xkZXIgZXZlbnQgYW5kIHRoZSBkZWx0YSBpcyBkaXZpc2FibGUgYnkgMTIwLFxyXG4gICAgICAgIC8vIHRoZW4gd2UgYXJlIGFzc3VtaW5nIHRoYXQgdGhlIGJyb3dzZXIgaXMgdHJlYXRpbmcgdGhpcyBhcyBhblxyXG4gICAgICAgIC8vIG9sZGVyIG1vdXNlIHdoZWVsIGV2ZW50IGFuZCB0aGF0IHdlIHNob3VsZCBkaXZpZGUgdGhlIGRlbHRhc1xyXG4gICAgICAgIC8vIGJ5IDQwIHRvIHRyeSBhbmQgZ2V0IGEgbW9yZSB1c2FibGUgZGVsdGFGYWN0b3IuXHJcbiAgICAgICAgLy8gU2lkZSBub3RlLCB0aGlzIGFjdHVhbGx5IGltcGFjdHMgdGhlIHJlcG9ydGVkIHNjcm9sbCBkaXN0YW5jZVxyXG4gICAgICAgIC8vIGluIG9sZGVyIGJyb3dzZXJzIGFuZCBjYW4gY2F1c2Ugc2Nyb2xsaW5nIHRvIGJlIHNsb3dlciB0aGFuIG5hdGl2ZS5cclxuICAgICAgICAvLyBUdXJuIHRoaXMgb2ZmIGJ5IHNldHRpbmcgJC5ldmVudC5zcGVjaWFsLm1vdXNld2hlZWwuc2V0dGluZ3MuYWRqdXN0T2xkRGVsdGFzIHRvIGZhbHNlLlxyXG4gICAgICAgIHJldHVybiBzcGVjaWFsLnNldHRpbmdzLmFkanVzdE9sZERlbHRhcyAmJiBvcmdFdmVudC50eXBlID09PSAnbW91c2V3aGVlbCcgJiYgYWJzRGVsdGEgJSAxMjAgPT09IDA7XHJcbiAgICB9XHJcblxyXG59KSk7XHJcbiIsIi8qIVxyXG4gKiBqU2Nyb2xsUGFuZSAtIHYyLjAuMjMgLSAyMDE2LTAxLTI4XHJcbiAqIGh0dHA6Ly9qc2Nyb2xscGFuZS5rZWx2aW5sdWNrLmNvbS9cclxuICpcclxuICogQ29weXJpZ2h0IChjKSAyMDE0IEtlbHZpbiBMdWNrXHJcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgbGljZW5zZXMuXHJcbiAqL1xyXG4hZnVuY3Rpb24oYSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXCJqcXVlcnlcIl0sYSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YShyZXF1aXJlKFwianF1ZXJ5XCIpKTphKGpRdWVyeSl9KGZ1bmN0aW9uKGEpe2EuZm4ualNjcm9sbFBhbmU9ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYyhiLGMpe2Z1bmN0aW9uIGQoYyl7dmFyIGYsaCxqLGssbCxvLHA9ITEscT0hMTtpZihOPWMsdm9pZCAwPT09TylsPWIuc2Nyb2xsVG9wKCksbz1iLnNjcm9sbExlZnQoKSxiLmNzcyh7b3ZlcmZsb3c6XCJoaWRkZW5cIixwYWRkaW5nOjB9KSxQPWIuaW5uZXJXaWR0aCgpK3JiLFE9Yi5pbm5lckhlaWdodCgpLGIud2lkdGgoUCksTz1hKCc8ZGl2IGNsYXNzPVwianNwUGFuZVwiIC8+JykuY3NzKFwicGFkZGluZ1wiLHFiKS5hcHBlbmQoYi5jaGlsZHJlbigpKSxSPWEoJzxkaXYgY2xhc3M9XCJqc3BDb250YWluZXJcIiAvPicpLmNzcyh7d2lkdGg6UCtcInB4XCIsaGVpZ2h0OlErXCJweFwifSkuYXBwZW5kKE8pLmFwcGVuZFRvKGIpO2Vsc2V7aWYoYi5jc3MoXCJ3aWR0aFwiLFwiXCIpLHA9Ti5zdGlja1RvQm90dG9tJiZBKCkscT1OLnN0aWNrVG9SaWdodCYmQigpLGs9Yi5pbm5lcldpZHRoKCkrcmIhPVB8fGIub3V0ZXJIZWlnaHQoKSE9USxrJiYoUD1iLmlubmVyV2lkdGgoKStyYixRPWIuaW5uZXJIZWlnaHQoKSxSLmNzcyh7d2lkdGg6UCtcInB4XCIsaGVpZ2h0OlErXCJweFwifSkpLCFrJiZzYj09UyYmTy5vdXRlckhlaWdodCgpPT1UKXJldHVybiB2b2lkIGIud2lkdGgoUCk7c2I9UyxPLmNzcyhcIndpZHRoXCIsXCJcIiksYi53aWR0aChQKSxSLmZpbmQoXCI+LmpzcFZlcnRpY2FsQmFyLD4uanNwSG9yaXpvbnRhbEJhclwiKS5yZW1vdmUoKS5lbmQoKX1PLmNzcyhcIm92ZXJmbG93XCIsXCJhdXRvXCIpLFM9Yy5jb250ZW50V2lkdGg/Yy5jb250ZW50V2lkdGg6T1swXS5zY3JvbGxXaWR0aCxUPU9bMF0uc2Nyb2xsSGVpZ2h0LE8uY3NzKFwib3ZlcmZsb3dcIixcIlwiKSxVPVMvUCxWPVQvUSxXPVY+MSxYPVU+MSxYfHxXPyhiLmFkZENsYXNzKFwianNwU2Nyb2xsYWJsZVwiKSxmPU4ubWFpbnRhaW5Qb3NpdGlvbiYmKCR8fGJiKSxmJiYoaD15KCksaj16KCkpLGUoKSxnKCksaSgpLGYmJih3KHE/Uy1QOmgsITEpLHYocD9ULVE6aiwhMSkpLEYoKSxDKCksTCgpLE4uZW5hYmxlS2V5Ym9hcmROYXZpZ2F0aW9uJiZIKCksTi5jbGlja09uVHJhY2smJm0oKSxKKCksTi5oaWphY2tJbnRlcm5hbExpbmtzJiZLKCkpOihiLnJlbW92ZUNsYXNzKFwianNwU2Nyb2xsYWJsZVwiKSxPLmNzcyh7dG9wOjAsbGVmdDowLHdpZHRoOlIud2lkdGgoKS1yYn0pLEQoKSxHKCksSSgpLG4oKSksTi5hdXRvUmVpbml0aWFsaXNlJiYhcGI/cGI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtkKE4pfSxOLmF1dG9SZWluaXRpYWxpc2VEZWxheSk6IU4uYXV0b1JlaW5pdGlhbGlzZSYmcGImJmNsZWFySW50ZXJ2YWwocGIpLGwmJmIuc2Nyb2xsVG9wKDApJiZ2KGwsITEpLG8mJmIuc2Nyb2xsTGVmdCgwKSYmdyhvLCExKSxiLnRyaWdnZXIoXCJqc3AtaW5pdGlhbGlzZWRcIixbWHx8V10pfWZ1bmN0aW9uIGUoKXtXJiYoUi5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcFZlcnRpY2FsQmFyXCIgLz4nKS5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcENhcCBqc3BDYXBUb3BcIiAvPicpLGEoJzxkaXYgY2xhc3M9XCJqc3BUcmFja1wiIC8+JykuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BEcmFnXCIgLz4nKS5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcERyYWdUb3BcIiAvPicpLGEoJzxkaXYgY2xhc3M9XCJqc3BEcmFnQm90dG9tXCIgLz4nKSkpLGEoJzxkaXYgY2xhc3M9XCJqc3BDYXAganNwQ2FwQm90dG9tXCIgLz4nKSkpLGNiPVIuZmluZChcIj4uanNwVmVydGljYWxCYXJcIiksZGI9Y2IuZmluZChcIj4uanNwVHJhY2tcIiksWT1kYi5maW5kKFwiPi5qc3BEcmFnXCIpLE4uc2hvd0Fycm93cyYmKGhiPWEoJzxhIGNsYXNzPVwianNwQXJyb3cganNwQXJyb3dVcFwiIC8+JykuYmluZChcIm1vdXNlZG93bi5qc3BcIixrKDAsLTEpKS5iaW5kKFwiY2xpY2suanNwXCIsRSksaWI9YSgnPGEgY2xhc3M9XCJqc3BBcnJvdyBqc3BBcnJvd0Rvd25cIiAvPicpLmJpbmQoXCJtb3VzZWRvd24uanNwXCIsaygwLDEpKS5iaW5kKFwiY2xpY2suanNwXCIsRSksTi5hcnJvd1Njcm9sbE9uSG92ZXImJihoYi5iaW5kKFwibW91c2VvdmVyLmpzcFwiLGsoMCwtMSxoYikpLGliLmJpbmQoXCJtb3VzZW92ZXIuanNwXCIsaygwLDEsaWIpKSksaihkYixOLnZlcnRpY2FsQXJyb3dQb3NpdGlvbnMsaGIsaWIpKSxmYj1RLFIuZmluZChcIj4uanNwVmVydGljYWxCYXI+LmpzcENhcDp2aXNpYmxlLD4uanNwVmVydGljYWxCYXI+LmpzcEFycm93XCIpLmVhY2goZnVuY3Rpb24oKXtmYi09YSh0aGlzKS5vdXRlckhlaWdodCgpfSksWS5ob3ZlcihmdW5jdGlvbigpe1kuYWRkQ2xhc3MoXCJqc3BIb3ZlclwiKX0sZnVuY3Rpb24oKXtZLnJlbW92ZUNsYXNzKFwianNwSG92ZXJcIil9KS5iaW5kKFwibW91c2Vkb3duLmpzcFwiLGZ1bmN0aW9uKGIpe2EoXCJodG1sXCIpLmJpbmQoXCJkcmFnc3RhcnQuanNwIHNlbGVjdHN0YXJ0LmpzcFwiLEUpLFkuYWRkQ2xhc3MoXCJqc3BBY3RpdmVcIik7dmFyIGM9Yi5wYWdlWS1ZLnBvc2l0aW9uKCkudG9wO3JldHVybiBhKFwiaHRtbFwiKS5iaW5kKFwibW91c2Vtb3ZlLmpzcFwiLGZ1bmN0aW9uKGEpe3AoYS5wYWdlWS1jLCExKX0pLmJpbmQoXCJtb3VzZXVwLmpzcCBtb3VzZWxlYXZlLmpzcFwiLG8pLCExfSksZigpKX1mdW5jdGlvbiBmKCl7ZGIuaGVpZ2h0KGZiK1wicHhcIiksJD0wLGViPU4udmVydGljYWxHdXR0ZXIrZGIub3V0ZXJXaWR0aCgpLE8ud2lkdGgoUC1lYi1yYik7dHJ5ezA9PT1jYi5wb3NpdGlvbigpLmxlZnQmJk8uY3NzKFwibWFyZ2luLWxlZnRcIixlYitcInB4XCIpfWNhdGNoKGEpe319ZnVuY3Rpb24gZygpe1gmJihSLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwSG9yaXpvbnRhbEJhclwiIC8+JykuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BDYXAganNwQ2FwTGVmdFwiIC8+JyksYSgnPGRpdiBjbGFzcz1cImpzcFRyYWNrXCIgLz4nKS5hcHBlbmQoYSgnPGRpdiBjbGFzcz1cImpzcERyYWdcIiAvPicpLmFwcGVuZChhKCc8ZGl2IGNsYXNzPVwianNwRHJhZ0xlZnRcIiAvPicpLGEoJzxkaXYgY2xhc3M9XCJqc3BEcmFnUmlnaHRcIiAvPicpKSksYSgnPGRpdiBjbGFzcz1cImpzcENhcCBqc3BDYXBSaWdodFwiIC8+JykpKSxqYj1SLmZpbmQoXCI+LmpzcEhvcml6b250YWxCYXJcIiksa2I9amIuZmluZChcIj4uanNwVHJhY2tcIiksXz1rYi5maW5kKFwiPi5qc3BEcmFnXCIpLE4uc2hvd0Fycm93cyYmKG5iPWEoJzxhIGNsYXNzPVwianNwQXJyb3cganNwQXJyb3dMZWZ0XCIgLz4nKS5iaW5kKFwibW91c2Vkb3duLmpzcFwiLGsoLTEsMCkpLmJpbmQoXCJjbGljay5qc3BcIixFKSxvYj1hKCc8YSBjbGFzcz1cImpzcEFycm93IGpzcEFycm93UmlnaHRcIiAvPicpLmJpbmQoXCJtb3VzZWRvd24uanNwXCIsaygxLDApKS5iaW5kKFwiY2xpY2suanNwXCIsRSksTi5hcnJvd1Njcm9sbE9uSG92ZXImJihuYi5iaW5kKFwibW91c2VvdmVyLmpzcFwiLGsoLTEsMCxuYikpLG9iLmJpbmQoXCJtb3VzZW92ZXIuanNwXCIsaygxLDAsb2IpKSksaihrYixOLmhvcml6b250YWxBcnJvd1Bvc2l0aW9ucyxuYixvYikpLF8uaG92ZXIoZnVuY3Rpb24oKXtfLmFkZENsYXNzKFwianNwSG92ZXJcIil9LGZ1bmN0aW9uKCl7Xy5yZW1vdmVDbGFzcyhcImpzcEhvdmVyXCIpfSkuYmluZChcIm1vdXNlZG93bi5qc3BcIixmdW5jdGlvbihiKXthKFwiaHRtbFwiKS5iaW5kKFwiZHJhZ3N0YXJ0LmpzcCBzZWxlY3RzdGFydC5qc3BcIixFKSxfLmFkZENsYXNzKFwianNwQWN0aXZlXCIpO3ZhciBjPWIucGFnZVgtXy5wb3NpdGlvbigpLmxlZnQ7cmV0dXJuIGEoXCJodG1sXCIpLmJpbmQoXCJtb3VzZW1vdmUuanNwXCIsZnVuY3Rpb24oYSl7cihhLnBhZ2VYLWMsITEpfSkuYmluZChcIm1vdXNldXAuanNwIG1vdXNlbGVhdmUuanNwXCIsbyksITF9KSxsYj1SLmlubmVyV2lkdGgoKSxoKCkpfWZ1bmN0aW9uIGgoKXtSLmZpbmQoXCI+LmpzcEhvcml6b250YWxCYXI+LmpzcENhcDp2aXNpYmxlLD4uanNwSG9yaXpvbnRhbEJhcj4uanNwQXJyb3dcIikuZWFjaChmdW5jdGlvbigpe2xiLT1hKHRoaXMpLm91dGVyV2lkdGgoKX0pLGtiLndpZHRoKGxiK1wicHhcIiksYmI9MH1mdW5jdGlvbiBpKCl7aWYoWCYmVyl7dmFyIGI9a2Iub3V0ZXJIZWlnaHQoKSxjPWRiLm91dGVyV2lkdGgoKTtmYi09YixhKGpiKS5maW5kKFwiPi5qc3BDYXA6dmlzaWJsZSw+LmpzcEFycm93XCIpLmVhY2goZnVuY3Rpb24oKXtsYis9YSh0aGlzKS5vdXRlcldpZHRoKCl9KSxsYi09YyxRLT1jLFAtPWIsa2IucGFyZW50KCkuYXBwZW5kKGEoJzxkaXYgY2xhc3M9XCJqc3BDb3JuZXJcIiAvPicpLmNzcyhcIndpZHRoXCIsYitcInB4XCIpKSxmKCksaCgpfVgmJk8ud2lkdGgoUi5vdXRlcldpZHRoKCktcmIrXCJweFwiKSxUPU8ub3V0ZXJIZWlnaHQoKSxWPVQvUSxYJiYobWI9TWF0aC5jZWlsKDEvVSpsYiksbWI+Ti5ob3Jpem9udGFsRHJhZ01heFdpZHRoP21iPU4uaG9yaXpvbnRhbERyYWdNYXhXaWR0aDptYjxOLmhvcml6b250YWxEcmFnTWluV2lkdGgmJihtYj1OLmhvcml6b250YWxEcmFnTWluV2lkdGgpLF8ud2lkdGgobWIrXCJweFwiKSxhYj1sYi1tYixzKGJiKSksVyYmKGdiPU1hdGguY2VpbCgxL1YqZmIpLGdiPk4udmVydGljYWxEcmFnTWF4SGVpZ2h0P2diPU4udmVydGljYWxEcmFnTWF4SGVpZ2h0OmdiPE4udmVydGljYWxEcmFnTWluSGVpZ2h0JiYoZ2I9Ti52ZXJ0aWNhbERyYWdNaW5IZWlnaHQpLFkuaGVpZ2h0KGdiK1wicHhcIiksWj1mYi1nYixxKCQpKX1mdW5jdGlvbiBqKGEsYixjLGQpe3ZhciBlLGY9XCJiZWZvcmVcIixnPVwiYWZ0ZXJcIjtcIm9zXCI9PWImJihiPS9NYWMvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKT9cImFmdGVyXCI6XCJzcGxpdFwiKSxiPT1mP2c9YjpiPT1nJiYoZj1iLGU9YyxjPWQsZD1lKSxhW2ZdKGMpW2ddKGQpfWZ1bmN0aW9uIGsoYSxiLGMpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBsKGEsYix0aGlzLGMpLHRoaXMuYmx1cigpLCExfX1mdW5jdGlvbiBsKGIsYyxkLGUpe2Q9YShkKS5hZGRDbGFzcyhcImpzcEFjdGl2ZVwiKTt2YXIgZixnLGg9ITAsaT1mdW5jdGlvbigpezAhPT1iJiZ0Yi5zY3JvbGxCeVgoYipOLmFycm93QnV0dG9uU3BlZWQpLDAhPT1jJiZ0Yi5zY3JvbGxCeVkoYypOLmFycm93QnV0dG9uU3BlZWQpLGc9c2V0VGltZW91dChpLGg/Ti5pbml0aWFsRGVsYXk6Ti5hcnJvd1JlcGVhdEZyZXEpLGg9ITF9O2koKSxmPWU/XCJtb3VzZW91dC5qc3BcIjpcIm1vdXNldXAuanNwXCIsZT1lfHxhKFwiaHRtbFwiKSxlLmJpbmQoZixmdW5jdGlvbigpe2QucmVtb3ZlQ2xhc3MoXCJqc3BBY3RpdmVcIiksZyYmY2xlYXJUaW1lb3V0KGcpLGc9bnVsbCxlLnVuYmluZChmKX0pfWZ1bmN0aW9uIG0oKXtuKCksVyYmZGIuYmluZChcIm1vdXNlZG93bi5qc3BcIixmdW5jdGlvbihiKXtpZih2b2lkIDA9PT1iLm9yaWdpbmFsVGFyZ2V0fHxiLm9yaWdpbmFsVGFyZ2V0PT1iLmN1cnJlbnRUYXJnZXQpe3ZhciBjLGQ9YSh0aGlzKSxlPWQub2Zmc2V0KCksZj1iLnBhZ2VZLWUudG9wLSQsZz0hMCxoPWZ1bmN0aW9uKCl7dmFyIGE9ZC5vZmZzZXQoKSxlPWIucGFnZVktYS50b3AtZ2IvMixqPVEqTi5zY3JvbGxQYWdlUGVyY2VudCxrPVoqai8oVC1RKTtpZigwPmYpJC1rPmU/dGIuc2Nyb2xsQnlZKC1qKTpwKGUpO2Vsc2V7aWYoIShmPjApKXJldHVybiB2b2lkIGkoKTtlPiQraz90Yi5zY3JvbGxCeVkoaik6cChlKX1jPXNldFRpbWVvdXQoaCxnP04uaW5pdGlhbERlbGF5Ok4udHJhY2tDbGlja1JlcGVhdEZyZXEpLGc9ITF9LGk9ZnVuY3Rpb24oKXtjJiZjbGVhclRpbWVvdXQoYyksYz1udWxsLGEoZG9jdW1lbnQpLnVuYmluZChcIm1vdXNldXAuanNwXCIsaSl9O3JldHVybiBoKCksYShkb2N1bWVudCkuYmluZChcIm1vdXNldXAuanNwXCIsaSksITF9fSksWCYma2IuYmluZChcIm1vdXNlZG93bi5qc3BcIixmdW5jdGlvbihiKXtpZih2b2lkIDA9PT1iLm9yaWdpbmFsVGFyZ2V0fHxiLm9yaWdpbmFsVGFyZ2V0PT1iLmN1cnJlbnRUYXJnZXQpe3ZhciBjLGQ9YSh0aGlzKSxlPWQub2Zmc2V0KCksZj1iLnBhZ2VYLWUubGVmdC1iYixnPSEwLGg9ZnVuY3Rpb24oKXt2YXIgYT1kLm9mZnNldCgpLGU9Yi5wYWdlWC1hLmxlZnQtbWIvMixqPVAqTi5zY3JvbGxQYWdlUGVyY2VudCxrPWFiKmovKFMtUCk7aWYoMD5mKWJiLWs+ZT90Yi5zY3JvbGxCeVgoLWopOnIoZSk7ZWxzZXtpZighKGY+MCkpcmV0dXJuIHZvaWQgaSgpO2U+YmIraz90Yi5zY3JvbGxCeVgoaik6cihlKX1jPXNldFRpbWVvdXQoaCxnP04uaW5pdGlhbERlbGF5Ok4udHJhY2tDbGlja1JlcGVhdEZyZXEpLGc9ITF9LGk9ZnVuY3Rpb24oKXtjJiZjbGVhclRpbWVvdXQoYyksYz1udWxsLGEoZG9jdW1lbnQpLnVuYmluZChcIm1vdXNldXAuanNwXCIsaSl9O3JldHVybiBoKCksYShkb2N1bWVudCkuYmluZChcIm1vdXNldXAuanNwXCIsaSksITF9fSl9ZnVuY3Rpb24gbigpe2tiJiZrYi51bmJpbmQoXCJtb3VzZWRvd24uanNwXCIpLGRiJiZkYi51bmJpbmQoXCJtb3VzZWRvd24uanNwXCIpfWZ1bmN0aW9uIG8oKXthKFwiaHRtbFwiKS51bmJpbmQoXCJkcmFnc3RhcnQuanNwIHNlbGVjdHN0YXJ0LmpzcCBtb3VzZW1vdmUuanNwIG1vdXNldXAuanNwIG1vdXNlbGVhdmUuanNwXCIpLFkmJlkucmVtb3ZlQ2xhc3MoXCJqc3BBY3RpdmVcIiksXyYmXy5yZW1vdmVDbGFzcyhcImpzcEFjdGl2ZVwiKX1mdW5jdGlvbiBwKGMsZCl7aWYoVyl7MD5jP2M9MDpjPlomJihjPVopO3ZhciBlPW5ldyBhLkV2ZW50KFwianNwLXdpbGwtc2Nyb2xsLXlcIik7aWYoYi50cmlnZ2VyKGUsW2NdKSwhZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGY9Y3x8MCxnPTA9PT1mLGg9Zj09WixpPWMvWixqPS1pKihULVEpO3ZvaWQgMD09PWQmJihkPU4uYW5pbWF0ZVNjcm9sbCksZD90Yi5hbmltYXRlKFksXCJ0b3BcIixjLHEsZnVuY3Rpb24oKXtiLnRyaWdnZXIoXCJqc3AtdXNlci1zY3JvbGwteVwiLFstaixnLGhdKX0pOihZLmNzcyhcInRvcFwiLGMpLHEoYyksYi50cmlnZ2VyKFwianNwLXVzZXItc2Nyb2xsLXlcIixbLWosZyxoXSkpfX19ZnVuY3Rpb24gcShhKXt2b2lkIDA9PT1hJiYoYT1ZLnBvc2l0aW9uKCkudG9wKSxSLnNjcm9sbFRvcCgwKSwkPWF8fDA7dmFyIGM9MD09PSQsZD0kPT1aLGU9YS9aLGY9LWUqKFQtUSk7KHViIT1jfHx3YiE9ZCkmJih1Yj1jLHdiPWQsYi50cmlnZ2VyKFwianNwLWFycm93LWNoYW5nZVwiLFt1Yix3Yix2Yix4Yl0pKSx0KGMsZCksTy5jc3MoXCJ0b3BcIixmKSxiLnRyaWdnZXIoXCJqc3Atc2Nyb2xsLXlcIixbLWYsYyxkXSkudHJpZ2dlcihcInNjcm9sbFwiKX1mdW5jdGlvbiByKGMsZCl7aWYoWCl7MD5jP2M9MDpjPmFiJiYoYz1hYik7dmFyIGU9bmV3IGEuRXZlbnQoXCJqc3Atd2lsbC1zY3JvbGwteFwiKTtpZihiLnRyaWdnZXIoZSxbY10pLCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgZj1jfHwwLGc9MD09PWYsaD1mPT1hYixpPWMvYWIsaj0taSooUy1QKTt2b2lkIDA9PT1kJiYoZD1OLmFuaW1hdGVTY3JvbGwpLGQ/dGIuYW5pbWF0ZShfLFwibGVmdFwiLGMscyxmdW5jdGlvbigpe2IudHJpZ2dlcihcImpzcC11c2VyLXNjcm9sbC14XCIsWy1qLGcsaF0pfSk6KF8uY3NzKFwibGVmdFwiLGMpLHMoYyksYi50cmlnZ2VyKFwianNwLXVzZXItc2Nyb2xsLXhcIixbLWosZyxoXSkpfX19ZnVuY3Rpb24gcyhhKXt2b2lkIDA9PT1hJiYoYT1fLnBvc2l0aW9uKCkubGVmdCksUi5zY3JvbGxUb3AoMCksYmI9YXx8MDt2YXIgYz0wPT09YmIsZD1iYj09YWIsZT1hL2FiLGY9LWUqKFMtUCk7KHZiIT1jfHx4YiE9ZCkmJih2Yj1jLHhiPWQsYi50cmlnZ2VyKFwianNwLWFycm93LWNoYW5nZVwiLFt1Yix3Yix2Yix4Yl0pKSx1KGMsZCksTy5jc3MoXCJsZWZ0XCIsZiksYi50cmlnZ2VyKFwianNwLXNjcm9sbC14XCIsWy1mLGMsZF0pLnRyaWdnZXIoXCJzY3JvbGxcIil9ZnVuY3Rpb24gdChhLGIpe04uc2hvd0Fycm93cyYmKGhiW2E/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3BEaXNhYmxlZFwiKSxpYltiP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwianNwRGlzYWJsZWRcIikpfWZ1bmN0aW9uIHUoYSxiKXtOLnNob3dBcnJvd3MmJihuYlthP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwianNwRGlzYWJsZWRcIiksb2JbYj9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImpzcERpc2FibGVkXCIpKX1mdW5jdGlvbiB2KGEsYil7dmFyIGM9YS8oVC1RKTtwKGMqWixiKX1mdW5jdGlvbiB3KGEsYil7dmFyIGM9YS8oUy1QKTtyKGMqYWIsYil9ZnVuY3Rpb24geChiLGMsZCl7dmFyIGUsZixnLGgsaSxqLGssbCxtLG49MCxvPTA7dHJ5e2U9YShiKX1jYXRjaChwKXtyZXR1cm59Zm9yKGY9ZS5vdXRlckhlaWdodCgpLGc9ZS5vdXRlcldpZHRoKCksUi5zY3JvbGxUb3AoMCksUi5zY3JvbGxMZWZ0KDApOyFlLmlzKFwiLmpzcFBhbmVcIik7KWlmKG4rPWUucG9zaXRpb24oKS50b3Asbys9ZS5wb3NpdGlvbigpLmxlZnQsZT1lLm9mZnNldFBhcmVudCgpLC9eYm9keXxodG1sJC9pLnRlc3QoZVswXS5ub2RlTmFtZSkpcmV0dXJuO2g9eigpLGo9aCtRLGg+bnx8Yz9sPW4tTi5ob3Jpem9udGFsR3V0dGVyOm4rZj5qJiYobD1uLVErZitOLmhvcml6b250YWxHdXR0ZXIpLGlzTmFOKGwpfHx2KGwsZCksaT15KCksaz1pK1AsaT5vfHxjP209by1OLmhvcml6b250YWxHdXR0ZXI6bytnPmsmJihtPW8tUCtnK04uaG9yaXpvbnRhbEd1dHRlciksaXNOYU4obSl8fHcobSxkKX1mdW5jdGlvbiB5KCl7cmV0dXJuLU8ucG9zaXRpb24oKS5sZWZ0fWZ1bmN0aW9uIHooKXtyZXR1cm4tTy5wb3NpdGlvbigpLnRvcH1mdW5jdGlvbiBBKCl7dmFyIGE9VC1RO3JldHVybiBhPjIwJiZhLXooKTwxMH1mdW5jdGlvbiBCKCl7dmFyIGE9Uy1QO3JldHVybiBhPjIwJiZhLXkoKTwxMH1mdW5jdGlvbiBDKCl7Ui51bmJpbmQoemIpLmJpbmQoemIsZnVuY3Rpb24oYSxiLGMsZCl7YmJ8fChiYj0wKSwkfHwoJD0wKTt2YXIgZT1iYixmPSQsZz1hLmRlbHRhRmFjdG9yfHxOLm1vdXNlV2hlZWxTcGVlZDtyZXR1cm4gdGIuc2Nyb2xsQnkoYypnLC1kKmcsITEpLGU9PWJiJiZmPT0kfSl9ZnVuY3Rpb24gRCgpe1IudW5iaW5kKHpiKX1mdW5jdGlvbiBFKCl7cmV0dXJuITF9ZnVuY3Rpb24gRigpe08uZmluZChcIjppbnB1dCxhXCIpLnVuYmluZChcImZvY3VzLmpzcFwiKS5iaW5kKFwiZm9jdXMuanNwXCIsZnVuY3Rpb24oYSl7eChhLnRhcmdldCwhMSl9KX1mdW5jdGlvbiBHKCl7Ty5maW5kKFwiOmlucHV0LGFcIikudW5iaW5kKFwiZm9jdXMuanNwXCIpfWZ1bmN0aW9uIEgoKXtmdW5jdGlvbiBjKCl7dmFyIGE9YmIsYj0kO3N3aXRjaChkKXtjYXNlIDQwOnRiLnNjcm9sbEJ5WShOLmtleWJvYXJkU3BlZWQsITEpO2JyZWFrO2Nhc2UgMzg6dGIuc2Nyb2xsQnlZKC1OLmtleWJvYXJkU3BlZWQsITEpO2JyZWFrO2Nhc2UgMzQ6Y2FzZSAzMjp0Yi5zY3JvbGxCeVkoUSpOLnNjcm9sbFBhZ2VQZXJjZW50LCExKTticmVhaztjYXNlIDMzOnRiLnNjcm9sbEJ5WSgtUSpOLnNjcm9sbFBhZ2VQZXJjZW50LCExKTticmVhaztjYXNlIDM5OnRiLnNjcm9sbEJ5WChOLmtleWJvYXJkU3BlZWQsITEpO2JyZWFrO2Nhc2UgMzc6dGIuc2Nyb2xsQnlYKC1OLmtleWJvYXJkU3BlZWQsITEpfXJldHVybiBlPWEhPWJifHxiIT0kfXZhciBkLGUsZj1bXTtYJiZmLnB1c2goamJbMF0pLFcmJmYucHVzaChjYlswXSksTy5iaW5kKFwiZm9jdXMuanNwXCIsZnVuY3Rpb24oKXtiLmZvY3VzKCl9KSxiLmF0dHIoXCJ0YWJpbmRleFwiLDApLnVuYmluZChcImtleWRvd24uanNwIGtleXByZXNzLmpzcFwiKS5iaW5kKFwia2V5ZG93bi5qc3BcIixmdW5jdGlvbihiKXtpZihiLnRhcmdldD09PXRoaXN8fGYubGVuZ3RoJiZhKGIudGFyZ2V0KS5jbG9zZXN0KGYpLmxlbmd0aCl7dmFyIGc9YmIsaD0kO3N3aXRjaChiLmtleUNvZGUpe2Nhc2UgNDA6Y2FzZSAzODpjYXNlIDM0OmNhc2UgMzI6Y2FzZSAzMzpjYXNlIDM5OmNhc2UgMzc6ZD1iLmtleUNvZGUsYygpO2JyZWFrO2Nhc2UgMzU6dihULVEpLGQ9bnVsbDticmVhaztjYXNlIDM2OnYoMCksZD1udWxsfXJldHVybiBlPWIua2V5Q29kZT09ZCYmZyE9YmJ8fGghPSQsIWV9fSkuYmluZChcImtleXByZXNzLmpzcFwiLGZ1bmN0aW9uKGIpe3JldHVybiBiLmtleUNvZGU9PWQmJmMoKSxiLnRhcmdldD09PXRoaXN8fGYubGVuZ3RoJiZhKGIudGFyZ2V0KS5jbG9zZXN0KGYpLmxlbmd0aD8hZTp2b2lkIDB9KSxOLmhpZGVGb2N1cz8oYi5jc3MoXCJvdXRsaW5lXCIsXCJub25lXCIpLFwiaGlkZUZvY3VzXCJpbiBSWzBdJiZiLmF0dHIoXCJoaWRlRm9jdXNcIiwhMCkpOihiLmNzcyhcIm91dGxpbmVcIixcIlwiKSxcImhpZGVGb2N1c1wiaW4gUlswXSYmYi5hdHRyKFwiaGlkZUZvY3VzXCIsITEpKX1mdW5jdGlvbiBJKCl7Yi5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpLnJlbW92ZUF0dHIoXCJ0YWJpbmRleFwiKS51bmJpbmQoXCJrZXlkb3duLmpzcCBrZXlwcmVzcy5qc3BcIiksTy51bmJpbmQoXCIuanNwXCIpfWZ1bmN0aW9uIEooKXtpZihsb2NhdGlvbi5oYXNoJiZsb2NhdGlvbi5oYXNoLmxlbmd0aD4xKXt2YXIgYixjLGQ9ZXNjYXBlKGxvY2F0aW9uLmhhc2guc3Vic3RyKDEpKTt0cnl7Yj1hKFwiI1wiK2QrJywgYVtuYW1lPVwiJytkKydcIl0nKX1jYXRjaChlKXtyZXR1cm59Yi5sZW5ndGgmJk8uZmluZChkKSYmKDA9PT1SLnNjcm9sbFRvcCgpP2M9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtSLnNjcm9sbFRvcCgpPjAmJih4KGIsITApLGEoZG9jdW1lbnQpLnNjcm9sbFRvcChSLnBvc2l0aW9uKCkudG9wKSxjbGVhckludGVydmFsKGMpKX0sNTApOih4KGIsITApLGEoZG9jdW1lbnQpLnNjcm9sbFRvcChSLnBvc2l0aW9uKCkudG9wKSkpfX1mdW5jdGlvbiBLKCl7YShkb2N1bWVudC5ib2R5KS5kYXRhKFwianNwSGlqYWNrXCIpfHwoYShkb2N1bWVudC5ib2R5KS5kYXRhKFwianNwSGlqYWNrXCIsITApLGEoZG9jdW1lbnQuYm9keSkuZGVsZWdhdGUoJ2FbaHJlZio9XCIjXCJdJyxcImNsaWNrXCIsZnVuY3Rpb24oYil7dmFyIGMsZCxlLGYsZyxoLGk9dGhpcy5ocmVmLnN1YnN0cigwLHRoaXMuaHJlZi5pbmRleE9mKFwiI1wiKSksaj1sb2NhdGlvbi5ocmVmO2lmKC0xIT09bG9jYXRpb24uaHJlZi5pbmRleE9mKFwiI1wiKSYmKGo9bG9jYXRpb24uaHJlZi5zdWJzdHIoMCxsb2NhdGlvbi5ocmVmLmluZGV4T2YoXCIjXCIpKSksaT09PWope2M9ZXNjYXBlKHRoaXMuaHJlZi5zdWJzdHIodGhpcy5ocmVmLmluZGV4T2YoXCIjXCIpKzEpKTt0cnl7ZD1hKFwiI1wiK2MrJywgYVtuYW1lPVwiJytjKydcIl0nKX1jYXRjaChrKXtyZXR1cm59ZC5sZW5ndGgmJihlPWQuY2xvc2VzdChcIi5qc3BTY3JvbGxhYmxlXCIpLGY9ZS5kYXRhKFwianNwXCIpLGYuc2Nyb2xsVG9FbGVtZW50KGQsITApLGVbMF0uc2Nyb2xsSW50b1ZpZXcmJihnPWEod2luZG93KS5zY3JvbGxUb3AoKSxoPWQub2Zmc2V0KCkudG9wLChnPmh8fGg+ZythKHdpbmRvdykuaGVpZ2h0KCkpJiZlWzBdLnNjcm9sbEludG9WaWV3KCkpLGIucHJldmVudERlZmF1bHQoKSl9fSkpfWZ1bmN0aW9uIEwoKXt2YXIgYSxiLGMsZCxlLGY9ITE7Ui51bmJpbmQoXCJ0b3VjaHN0YXJ0LmpzcCB0b3VjaG1vdmUuanNwIHRvdWNoZW5kLmpzcCBjbGljay5qc3AtdG91Y2hjbGlja1wiKS5iaW5kKFwidG91Y2hzdGFydC5qc3BcIixmdW5jdGlvbihnKXt2YXIgaD1nLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTthPXkoKSxiPXooKSxjPWgucGFnZVgsZD1oLnBhZ2VZLGU9ITEsZj0hMH0pLmJpbmQoXCJ0b3VjaG1vdmUuanNwXCIsZnVuY3Rpb24oZyl7aWYoZil7dmFyIGg9Zy5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0saT1iYixqPSQ7cmV0dXJuIHRiLnNjcm9sbFRvKGErYy1oLnBhZ2VYLGIrZC1oLnBhZ2VZKSxlPWV8fE1hdGguYWJzKGMtaC5wYWdlWCk+NXx8TWF0aC5hYnMoZC1oLnBhZ2VZKT41LGk9PWJiJiZqPT0kfX0pLmJpbmQoXCJ0b3VjaGVuZC5qc3BcIixmdW5jdGlvbigpe2Y9ITF9KS5iaW5kKFwiY2xpY2suanNwLXRvdWNoY2xpY2tcIixmdW5jdGlvbigpe3JldHVybiBlPyhlPSExLCExKTp2b2lkIDB9KX1mdW5jdGlvbiBNKCl7dmFyIGE9eigpLGM9eSgpO2IucmVtb3ZlQ2xhc3MoXCJqc3BTY3JvbGxhYmxlXCIpLnVuYmluZChcIi5qc3BcIiksTy51bmJpbmQoXCIuanNwXCIpLGIucmVwbGFjZVdpdGgoeWIuYXBwZW5kKE8uY2hpbGRyZW4oKSkpLHliLnNjcm9sbFRvcChhKSx5Yi5zY3JvbGxMZWZ0KGMpLHBiJiZjbGVhckludGVydmFsKHBiKX12YXIgTixPLFAsUSxSLFMsVCxVLFYsVyxYLFksWiwkLF8sYWIsYmIsY2IsZGIsZWIsZmIsZ2IsaGIsaWIsamIsa2IsbGIsbWIsbmIsb2IscGIscWIscmIsc2IsdGI9dGhpcyx1Yj0hMCx2Yj0hMCx3Yj0hMSx4Yj0hMSx5Yj1iLmNsb25lKCExLCExKS5lbXB0eSgpLHpiPWEuZm4ubXdoZWVsSW50ZW50P1wibXdoZWVsSW50ZW50LmpzcFwiOlwibW91c2V3aGVlbC5qc3BcIjtcImJvcmRlci1ib3hcIj09PWIuY3NzKFwiYm94LXNpemluZ1wiKT8ocWI9MCxyYj0wKToocWI9Yi5jc3MoXCJwYWRkaW5nVG9wXCIpK1wiIFwiK2IuY3NzKFwicGFkZGluZ1JpZ2h0XCIpK1wiIFwiK2IuY3NzKFwicGFkZGluZ0JvdHRvbVwiKStcIiBcIitiLmNzcyhcInBhZGRpbmdMZWZ0XCIpLHJiPShwYXJzZUludChiLmNzcyhcInBhZGRpbmdMZWZ0XCIpLDEwKXx8MCkrKHBhcnNlSW50KGIuY3NzKFwicGFkZGluZ1JpZ2h0XCIpLDEwKXx8MCkpLGEuZXh0ZW5kKHRiLHtyZWluaXRpYWxpc2U6ZnVuY3Rpb24oYil7Yj1hLmV4dGVuZCh7fSxOLGIpLGQoYil9LHNjcm9sbFRvRWxlbWVudDpmdW5jdGlvbihhLGIsYyl7eChhLGIsYyl9LHNjcm9sbFRvOmZ1bmN0aW9uKGEsYixjKXt3KGEsYyksdihiLGMpfSxzY3JvbGxUb1g6ZnVuY3Rpb24oYSxiKXt3KGEsYil9LHNjcm9sbFRvWTpmdW5jdGlvbihhLGIpe3YoYSxiKX0sc2Nyb2xsVG9QZXJjZW50WDpmdW5jdGlvbihhLGIpe3coYSooUy1QKSxiKX0sc2Nyb2xsVG9QZXJjZW50WTpmdW5jdGlvbihhLGIpe3YoYSooVC1RKSxiKX0sc2Nyb2xsQnk6ZnVuY3Rpb24oYSxiLGMpe3RiLnNjcm9sbEJ5WChhLGMpLHRiLnNjcm9sbEJ5WShiLGMpfSxzY3JvbGxCeVg6ZnVuY3Rpb24oYSxiKXt2YXIgYz15KCkrTWF0aFswPmE/XCJmbG9vclwiOlwiY2VpbFwiXShhKSxkPWMvKFMtUCk7cihkKmFiLGIpfSxzY3JvbGxCeVk6ZnVuY3Rpb24oYSxiKXt2YXIgYz16KCkrTWF0aFswPmE/XCJmbG9vclwiOlwiY2VpbFwiXShhKSxkPWMvKFQtUSk7cChkKlosYil9LHBvc2l0aW9uRHJhZ1g6ZnVuY3Rpb24oYSxiKXtyKGEsYil9LHBvc2l0aW9uRHJhZ1k6ZnVuY3Rpb24oYSxiKXtwKGEsYil9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj17fTtmW2JdPWMsYS5hbmltYXRlKGYse2R1cmF0aW9uOk4uYW5pbWF0ZUR1cmF0aW9uLGVhc2luZzpOLmFuaW1hdGVFYXNlLHF1ZXVlOiExLHN0ZXA6ZCxjb21wbGV0ZTplfSl9LGdldENvbnRlbnRQb3NpdGlvblg6ZnVuY3Rpb24oKXtyZXR1cm4geSgpfSxnZXRDb250ZW50UG9zaXRpb25ZOmZ1bmN0aW9uKCl7cmV0dXJuIHooKX0sZ2V0Q29udGVudFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIFN9LGdldENvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gVH0sZ2V0UGVyY2VudFNjcm9sbGVkWDpmdW5jdGlvbigpe3JldHVybiB5KCkvKFMtUCl9LGdldFBlcmNlbnRTY3JvbGxlZFk6ZnVuY3Rpb24oKXtyZXR1cm4geigpLyhULVEpfSxnZXRJc1Njcm9sbGFibGVIOmZ1bmN0aW9uKCl7cmV0dXJuIFh9LGdldElzU2Nyb2xsYWJsZVY6ZnVuY3Rpb24oKXtyZXR1cm4gV30sZ2V0Q29udGVudFBhbmU6ZnVuY3Rpb24oKXtyZXR1cm4gT30sc2Nyb2xsVG9Cb3R0b206ZnVuY3Rpb24oYSl7cChaLGEpfSxoaWphY2tJbnRlcm5hbExpbmtzOmEubm9vcCxkZXN0cm95OmZ1bmN0aW9uKCl7TSgpfX0pLGQoYyl9cmV0dXJuIGI9YS5leHRlbmQoe30sYS5mbi5qU2Nyb2xsUGFuZS5kZWZhdWx0cyxiKSxhLmVhY2goW1wiYXJyb3dCdXR0b25TcGVlZFwiLFwidHJhY2tDbGlja1NwZWVkXCIsXCJrZXlib2FyZFNwZWVkXCJdLGZ1bmN0aW9uKCl7Ylt0aGlzXT1iW3RoaXNdfHxiLnNwZWVkfSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImpzcFwiKTtlP2UucmVpbml0aWFsaXNlKGIpOihhKFwic2NyaXB0XCIsZCkuZmlsdGVyKCdbdHlwZT1cInRleHQvamF2YXNjcmlwdFwiXSw6bm90KFt0eXBlXSknKS5yZW1vdmUoKSxlPW5ldyBjKGQsYiksZC5kYXRhKFwianNwXCIsZSkpfSl9LGEuZm4ualNjcm9sbFBhbmUuZGVmYXVsdHM9e3Nob3dBcnJvd3M6ITEsbWFpbnRhaW5Qb3NpdGlvbjohMCxzdGlja1RvQm90dG9tOiExLHN0aWNrVG9SaWdodDohMSxjbGlja09uVHJhY2s6ITAsYXV0b1JlaW5pdGlhbGlzZTohMSxhdXRvUmVpbml0aWFsaXNlRGVsYXk6NTAwLHZlcnRpY2FsRHJhZ01pbkhlaWdodDowLHZlcnRpY2FsRHJhZ01heEhlaWdodDo5OTk5OSxob3Jpem9udGFsRHJhZ01pbldpZHRoOjAsaG9yaXpvbnRhbERyYWdNYXhXaWR0aDo5OTk5OSxjb250ZW50V2lkdGg6dm9pZCAwLGFuaW1hdGVTY3JvbGw6ITEsYW5pbWF0ZUR1cmF0aW9uOjMwMCxhbmltYXRlRWFzZTpcImxpbmVhclwiLGhpamFja0ludGVybmFsTGlua3M6ITEsdmVydGljYWxHdXR0ZXI6NCxob3Jpem9udGFsR3V0dGVyOjQsbW91c2VXaGVlbFNwZWVkOjMsYXJyb3dCdXR0b25TcGVlZDowLGFycm93UmVwZWF0RnJlcTo1MCxhcnJvd1Njcm9sbE9uSG92ZXI6ITEsdHJhY2tDbGlja1NwZWVkOjAsdHJhY2tDbGlja1JlcGVhdEZyZXE6NzAsdmVydGljYWxBcnJvd1Bvc2l0aW9uczpcInNwbGl0XCIsaG9yaXpvbnRhbEFycm93UG9zaXRpb25zOlwic3BsaXRcIixlbmFibGVLZXlib2FyZE5hdmlnYXRpb246ITAsaGlkZUZvY3VzOiExLGtleWJvYXJkU3BlZWQ6MCxpbml0aWFsRGVsYXk6MzAwLHNwZWVkOjMwLHNjcm9sbFBhZ2VQZXJjZW50Oi44fX0pOyIsIi8qIVxyXG4gKiBcclxuICogICAgICAgICAgICAgU2ltcGxlQmFyLmpzIC0gdjIuNC4zXHJcbiAqICAgICAgICAgICAgIFNjcm9sbGJhcnMsIHNpbXBsZXIuXHJcbiAqICAgICAgICAgICAgIGh0dHBzOi8vZ3JzbXRvLmdpdGh1Yi5pby9zaW1wbGViYXIvXHJcbiAqICAgICAgICAgICAgIFxyXG4gKiAgICAgICAgICAgICBNYWRlIGJ5IEFkcmllbiBHcnNtdG8gZnJvbSBhIGZvcmsgYnkgSm9uYXRoYW4gTmljb2xcclxuICogICAgICAgICAgICAgVW5kZXIgTUlUIExpY2Vuc2VcclxuICogICAgICAgICBcclxuICovXHJcbiFmdW5jdGlvbih0LG4pe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPW4oKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLG4pOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuU2ltcGxlQmFyPW4oKTp0LlNpbXBsZUJhcj1uKCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gbihyKXtpZihlW3JdKXJldHVybiBlW3JdLmV4cG9ydHM7dmFyIGk9ZVtyXT17ZXhwb3J0czp7fSxpZDpyLGxvYWRlZDohMX07cmV0dXJuIHRbcl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsbiksaS5sb2FkZWQ9ITAsaS5leHBvcnRzfXZhciBlPXt9O3JldHVybiBuLm09dCxuLmM9ZSxuLnA9XCJcIixuKDApfShbZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIodCl7cmV0dXJuIHQmJnQuX19lc01vZHVsZT90OntkZWZhdWx0OnR9fWZ1bmN0aW9uIGkodCxuKXtpZighKHQgaW5zdGFuY2VvZiBuKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LG4pe2Zvcih2YXIgZT0wO2U8bi5sZW5ndGg7ZSsrKXt2YXIgcj1uW2VdO3IuZW51bWVyYWJsZT1yLmVudW1lcmFibGV8fCExLHIuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIHImJihyLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLmtleSxyKX19cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gZSYmdChuLnByb3RvdHlwZSxlKSxyJiZ0KG4sciksbn19KCksYz1lKDE5NCkscz1yKGMpLHU9ZSgxOTEpLGE9cih1KSxmPWUoMTkzKSxsPXIoZik7ZSgxNjkpLGUoMTc0KSxlKDE3NyksZSgxNzgpLGUoMTcyKSxlKDE3NSksZSgxNzMpLGUoMTc2KSxlKDE3MCksZSgxNzEpLGUoMTEzKSxlKDE2MCksZSgxNzkpLGUoMTgwKSxlKDE0MiksZSgxNDMpLGUoMTQ0KSxlKDE0NSksZSgxNDgpLGUoMTQ2KSxlKDE0NyksZSgxNDkpLGUoMTUwKSxlKDE1MSksZSgxNTIpLGUoMTU0KSxlKDE1MyksZSgxNDEpLGUoMTY4KSxlKDEzOCksZSgxMzkpLGUoMTQwKSxlKDExMiksZSgxNjUpLGUoMTYzKSxlKDE2MSksZSgxNjYpLGUoMTY3KSxlKDE2MiksZSgxNjQpLGUoMTU1KSxlKDE1NiksZSgxNTcpLGUoMTU5KSxlKDE1OCksZSgxMTApLGUoMTExKSxlKDEwNiksZSgxMDkpLGUoMTA4KSxlKDEwNyksZSg2NiksZSgxMzIpLGUoMTMzKSxlKDEzNSksZSgxMzQpLGUoMTMxKSxlKDEzNyksZSgxMzYpLGUoMTE0KSxlKDExNSksZSgxMTYpLGUoMTE3KSxlKDExOCksZSgxMTkpLGUoMTIwKSxlKDEyMSksZSgxMjIpLGUoMTIzKSxlKDEyNSksZSgxMjQpLGUoMTI2KSxlKDEyNyksZSgxMjgpLGUoMTI5KSxlKDEzMCksZSgxODEpLGUoMTg0KSxlKDE4MiksZSgxODMpLGUoMTg2KSxlKDE4NSksZSgxODkpLGUoMTg4KSxlKDE4NyksZSgxOTIpLGUoMTkwKTt2YXIgaD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQobixlKXtpKHRoaXMsdCksdGhpcy5lbD1uLHRoaXMuZmxhc2hUaW1lb3V0LHRoaXMuY29udGVudEVsLHRoaXMuc2Nyb2xsQ29udGVudEVsLHRoaXMuZHJhZ09mZnNldD17eDowLHk6MH0sdGhpcy5pc1Zpc2libGU9e3g6ITAseTohMH0sdGhpcy5zY3JvbGxPZmZzZXRBdHRyPXt4Olwic2Nyb2xsTGVmdFwiLHk6XCJzY3JvbGxUb3BcIn0sdGhpcy5zaXplQXR0cj17eDpcIm9mZnNldFdpZHRoXCIseTpcIm9mZnNldEhlaWdodFwifSx0aGlzLnNjcm9sbFNpemVBdHRyPXt4Olwic2Nyb2xsV2lkdGhcIix5Olwic2Nyb2xsSGVpZ2h0XCJ9LHRoaXMub2Zmc2V0QXR0cj17eDpcImxlZnRcIix5OlwidG9wXCJ9LHRoaXMuZ2xvYmFsT2JzZXJ2ZXIsdGhpcy5tdXRhdGlvbk9ic2VydmVyLHRoaXMucmVzaXplT2JzZXJ2ZXIsdGhpcy5jdXJyZW50QXhpcyx0aGlzLm9wdGlvbnM9T2JqZWN0LmFzc2lnbih7fSx0LmRlZmF1bHRPcHRpb25zLGUpLHRoaXMuY2xhc3NOYW1lcz10aGlzLm9wdGlvbnMuY2xhc3NOYW1lcyx0aGlzLnNjcm9sbGJhcldpZHRoPSgwLHMuZGVmYXVsdCkoKSx0aGlzLm9mZnNldFNpemU9MjAsdGhpcy5mbGFzaFNjcm9sbGJhcj10aGlzLmZsYXNoU2Nyb2xsYmFyLmJpbmQodGhpcyksdGhpcy5vbkRyYWdZPXRoaXMub25EcmFnWS5iaW5kKHRoaXMpLHRoaXMub25EcmFnWD10aGlzLm9uRHJhZ1guYmluZCh0aGlzKSx0aGlzLm9uU2Nyb2xsWT10aGlzLm9uU2Nyb2xsWS5iaW5kKHRoaXMpLHRoaXMub25TY3JvbGxYPXRoaXMub25TY3JvbGxYLmJpbmQodGhpcyksdGhpcy5kcmFnPXRoaXMuZHJhZy5iaW5kKHRoaXMpLHRoaXMub25FbmREcmFnPXRoaXMub25FbmREcmFnLmJpbmQodGhpcyksdGhpcy5vbk1vdXNlRW50ZXI9dGhpcy5vbk1vdXNlRW50ZXIuYmluZCh0aGlzKSx0aGlzLnJlY2FsY3VsYXRlPSgwLGEuZGVmYXVsdCkodGhpcy5yZWNhbGN1bGF0ZSwxMDAse2xlYWRpbmc6ITAsdHJhaWxpbmc6ITF9KSx0aGlzLmluaXQoKX1yZXR1cm4gbyh0LFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5lbC5TaW1wbGVCYXI9dGhpcyx0aGlzLmluaXRET00oKSx0aGlzLnNjcm9sbGJhclg9dGhpcy50cmFja1gucXVlcnlTZWxlY3RvcihcIi5cIit0aGlzLmNsYXNzTmFtZXMuc2Nyb2xsYmFyKSx0aGlzLnNjcm9sbGJhclk9dGhpcy50cmFja1kucXVlcnlTZWxlY3RvcihcIi5cIit0aGlzLmNsYXNzTmFtZXMuc2Nyb2xsYmFyKSx0aGlzLnNjcm9sbENvbnRlbnRFbC5zdHlsZS5wYWRkaW5nUmlnaHQ9KHRoaXMuc2Nyb2xsYmFyV2lkdGh8fHRoaXMub2Zmc2V0U2l6ZSkrXCJweFwiLHRoaXMuc2Nyb2xsQ29udGVudEVsLnN0eWxlLm1hcmdpbkJvdHRvbT1cIi1cIisoMip0aGlzLnNjcm9sbGJhcldpZHRofHx0aGlzLm9mZnNldFNpemUpK1wicHhcIix0aGlzLmNvbnRlbnRFbC5zdHlsZS5wYWRkaW5nQm90dG9tPSh0aGlzLnNjcm9sbGJhcldpZHRofHx0aGlzLm9mZnNldFNpemUpK1wicHhcIiwwIT09dGhpcy5zY3JvbGxiYXJXaWR0aCYmKHRoaXMuY29udGVudEVsLnN0eWxlLm1hcmdpblJpZ2h0PVwiLVwiK3RoaXMuc2Nyb2xsYmFyV2lkdGgrXCJweFwiKSx0aGlzLnJlY2FsY3VsYXRlKCksdGhpcy5pbml0TGlzdGVuZXJzKCl9fSx7a2V5OlwiaW5pdERPTVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZihBcnJheS5mcm9tKHRoaXMuZWwuY2hpbGRyZW4pLmZpbmQoZnVuY3Rpb24obil7cmV0dXJuIG4uY2xhc3NMaXN0LmNvbnRhaW5zKHQuY2xhc3NOYW1lcy5zY3JvbGxDb250ZW50KX0pKXRoaXMudHJhY2tYPXRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5cIit0aGlzLmNsYXNzTmFtZXMudHJhY2srXCIuaG9yaXpvbnRhbFwiKSx0aGlzLnRyYWNrWT10aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCIuXCIrdGhpcy5jbGFzc05hbWVzLnRyYWNrK1wiLnZlcnRpY2FsXCIpLHRoaXMuc2Nyb2xsQ29udGVudEVsPXRoaXMuZWwucXVlcnlTZWxlY3RvcihcIi5cIit0aGlzLmNsYXNzTmFtZXMuc2Nyb2xsQ29udGVudCksdGhpcy5jb250ZW50RWw9dGhpcy5lbC5xdWVyeVNlbGVjdG9yKFwiLlwiK3RoaXMuY2xhc3NOYW1lcy5jb250ZW50KTtlbHNle2Zvcih0aGlzLnNjcm9sbENvbnRlbnRFbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMuY29udGVudEVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5zY3JvbGxDb250ZW50RWwuY2xhc3NMaXN0LmFkZCh0aGlzLmNsYXNzTmFtZXMuc2Nyb2xsQ29udGVudCksdGhpcy5jb250ZW50RWwuY2xhc3NMaXN0LmFkZCh0aGlzLmNsYXNzTmFtZXMuY29udGVudCk7dGhpcy5lbC5maXJzdENoaWxkOyl0aGlzLmNvbnRlbnRFbC5hcHBlbmRDaGlsZCh0aGlzLmVsLmZpcnN0Q2hpbGQpO3RoaXMuc2Nyb2xsQ29udGVudEVsLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsKSx0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMuc2Nyb2xsQ29udGVudEVsKX1pZighdGhpcy50cmFja1h8fCF0aGlzLnRyYWNrWSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3NOYW1lcy50cmFjayksZS5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3NOYW1lcy5zY3JvbGxiYXIpLG4uYXBwZW5kQ2hpbGQoZSksdGhpcy50cmFja1g9bi5jbG9uZU5vZGUoITApLHRoaXMudHJhY2tYLmNsYXNzTGlzdC5hZGQoXCJob3Jpem9udGFsXCIpLHRoaXMudHJhY2tZPW4uY2xvbmVOb2RlKCEwKSx0aGlzLnRyYWNrWS5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIiksdGhpcy5lbC5pbnNlcnRCZWZvcmUodGhpcy50cmFja1gsdGhpcy5lbC5maXJzdENoaWxkKSx0aGlzLmVsLmluc2VydEJlZm9yZSh0aGlzLnRyYWNrWSx0aGlzLmVsLmZpcnN0Q2hpbGQpfXRoaXMuZWwuc2V0QXR0cmlidXRlKFwiZGF0YS1zaW1wbGViYXJcIixcImluaXRcIil9fSx7a2V5OlwiaW5pdExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLm9wdGlvbnMuYXV0b0hpZGUmJnRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIix0aGlzLm9uTW91c2VFbnRlciksdGhpcy5zY3JvbGxiYXJZLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uRHJhZ1kpLHRoaXMuc2Nyb2xsYmFyWC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbkRyYWdYKSx0aGlzLnNjcm9sbENvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5vblNjcm9sbFkpLHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLm9uU2Nyb2xsWCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXImJih0aGlzLm11dGF0aW9uT2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obil7bi5mb3JFYWNoKGZ1bmN0aW9uKG4peyh0LmlzQ2hpbGROb2RlKG4udGFyZ2V0KXx8bi5hZGRlZE5vZGVzLmxlbmd0aCkmJnQucmVjYWxjdWxhdGUoKX0pfSksdGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5lbCx7YXR0cmlidXRlczohMCxjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMCxzdWJ0cmVlOiEwfSkpLHRoaXMucmVzaXplT2JzZXJ2ZXI9bmV3IGwuZGVmYXVsdCh0aGlzLnJlY2FsY3VsYXRlLmJpbmQodGhpcykpLHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsKX19LHtrZXk6XCJyZW1vdmVMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hdXRvSGlkZSYmdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLHRoaXMub25Nb3VzZUVudGVyKSx0aGlzLnNjcm9sbGJhclgucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25EcmFnWCksdGhpcy5zY3JvbGxiYXJZLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uRHJhZ1kpLHRoaXMuc2Nyb2xsQ29udGVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLm9uU2Nyb2xsWSksdGhpcy5jb250ZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMub25TY3JvbGxYKSx0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpLHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpfX0se2tleTpcIm9uRHJhZ1hcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLm9uRHJhZyh0LFwieFwiKX19LHtrZXk6XCJvbkRyYWdZXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5vbkRyYWcodCxcInlcIil9fSx7a2V5Olwib25EcmFnXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwieVwiO3QucHJldmVudERlZmF1bHQoKTt2YXIgZT1cInlcIj09PW4/dGhpcy5zY3JvbGxiYXJZOnRoaXMuc2Nyb2xsYmFyWCxyPVwieVwiPT09bj90LnBhZ2VZOnQucGFnZVg7dGhpcy5kcmFnT2Zmc2V0W25dPXItZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0aGlzLm9mZnNldEF0dHJbbl1dLHRoaXMuY3VycmVudEF4aXM9bixkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5kcmFnKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25FbmREcmFnKX19LHtrZXk6XCJkcmFnXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49dm9pZCAwLGU9dm9pZCAwLHI9dm9pZCAwO3QucHJldmVudERlZmF1bHQoKSxcInlcIj09PXRoaXMuY3VycmVudEF4aXM/KG49dC5wYWdlWSxlPXRoaXMudHJhY2tZLHI9dGhpcy5zY3JvbGxDb250ZW50RWwpOihuPXQucGFnZVgsZT10aGlzLnRyYWNrWCxyPXRoaXMuY29udGVudEVsKTt2YXIgaT1uLWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbdGhpcy5vZmZzZXRBdHRyW3RoaXMuY3VycmVudEF4aXNdXS10aGlzLmRyYWdPZmZzZXRbdGhpcy5jdXJyZW50QXhpc10sbz1pL2VbdGhpcy5zaXplQXR0clt0aGlzLmN1cnJlbnRBeGlzXV0sYz1vKnRoaXMuY29udGVudEVsW3RoaXMuc2Nyb2xsU2l6ZUF0dHJbdGhpcy5jdXJyZW50QXhpc11dO3JbdGhpcy5zY3JvbGxPZmZzZXRBdHRyW3RoaXMuY3VycmVudEF4aXNdXT1jfX0se2tleTpcIm9uRW5kRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKCl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLHRoaXMuZHJhZyksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm9uRW5kRHJhZyl9fSx7a2V5OlwicmVzaXplU2Nyb2xsYmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06XCJ5XCIsbj12b2lkIDAsZT12b2lkIDAscj12b2lkIDAsaT12b2lkIDAsbz12b2lkIDA7XCJ4XCI9PT10PyhuPXRoaXMudHJhY2tYLGU9dGhpcy5zY3JvbGxiYXJYLHI9dGhpcy5jb250ZW50RWxbdGhpcy5zY3JvbGxPZmZzZXRBdHRyW3RdXSxpPXRoaXMuY29udGVudFNpemVYLG89dGhpcy5zY3JvbGxiYXJYU2l6ZSk6KG49dGhpcy50cmFja1ksZT10aGlzLnNjcm9sbGJhclkscj10aGlzLnNjcm9sbENvbnRlbnRFbFt0aGlzLnNjcm9sbE9mZnNldEF0dHJbdF1dLGk9dGhpcy5jb250ZW50U2l6ZVksbz10aGlzLnNjcm9sbGJhcllTaXplKTt2YXIgYz1vL2kscz1yLyhpLW8pLHU9TWF0aC5tYXgofn4oYyooby0yKSktMix0aGlzLm9wdGlvbnMuc2Nyb2xsYmFyTWluU2l6ZSksYT1+figoby00LXUpKnMrMik7dGhpcy5pc1Zpc2libGVbdF09bzxpLHRoaXMuaXNWaXNpYmxlW3RdPyhuLnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCIsXCJ4XCI9PT10PyhlLnN0eWxlLmxlZnQ9YStcInB4XCIsZS5zdHlsZS53aWR0aD11K1wicHhcIik6KGUuc3R5bGUudG9wPWErXCJweFwiLGUuc3R5bGUuaGVpZ2h0PXUrXCJweFwiKSk6bi5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCJ9fSx7a2V5Olwib25TY3JvbGxYXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmZsYXNoU2Nyb2xsYmFyKFwieFwiKX19LHtrZXk6XCJvblNjcm9sbFlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZmxhc2hTY3JvbGxiYXIoXCJ5XCIpfX0se2tleTpcIm9uTW91c2VFbnRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5mbGFzaFNjcm9sbGJhcihcInhcIiksdGhpcy5mbGFzaFNjcm9sbGJhcihcInlcIil9fSx7a2V5OlwiZmxhc2hTY3JvbGxiYXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcInlcIjt0aGlzLnJlc2l6ZVNjcm9sbGJhcih0KSx0aGlzLnNob3dTY3JvbGxiYXIodCl9fSx7a2V5Olwic2hvd1Njcm9sbGJhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlwieVwiO3RoaXMuaXNWaXNpYmxlW3RdJiYoXCJ4XCI9PT10P3RoaXMuc2Nyb2xsYmFyWC5jbGFzc0xpc3QuYWRkKFwidmlzaWJsZVwiKTp0aGlzLnNjcm9sbGJhclkuY2xhc3NMaXN0LmFkZChcInZpc2libGVcIiksdGhpcy5vcHRpb25zLmF1dG9IaWRlJiYoXCJudW1iZXJcIj09dHlwZW9mIHRoaXMuZmxhc2hUaW1lb3V0JiZ3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuZmxhc2hUaW1lb3V0KSx0aGlzLmZsYXNoVGltZW91dD13aW5kb3cuc2V0VGltZW91dCh0aGlzLmhpZGVTY3JvbGxiYXIuYmluZCh0aGlzKSwxZTMpKSl9fSx7a2V5OlwiaGlkZVNjcm9sbGJhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zY3JvbGxiYXJYLmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpLHRoaXMuc2Nyb2xsYmFyWS5jbGFzc0xpc3QucmVtb3ZlKFwidmlzaWJsZVwiKSxcIm51bWJlclwiPT10eXBlb2YgdGhpcy5mbGFzaFRpbWVvdXQmJndpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5mbGFzaFRpbWVvdXQpfX0se2tleTpcInJlY2FsY3VsYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRlbnRTaXplWD10aGlzLmNvbnRlbnRFbFt0aGlzLnNjcm9sbFNpemVBdHRyLnhdLHRoaXMuY29udGVudFNpemVZPXRoaXMuY29udGVudEVsW3RoaXMuc2Nyb2xsU2l6ZUF0dHIueV0tKHRoaXMuc2Nyb2xsYmFyV2lkdGh8fHRoaXMub2Zmc2V0U2l6ZSksdGhpcy5zY3JvbGxiYXJYU2l6ZT10aGlzLnRyYWNrWFt0aGlzLnNpemVBdHRyLnhdLHRoaXMuc2Nyb2xsYmFyWVNpemU9dGhpcy50cmFja1lbdGhpcy5zaXplQXR0ci55XSx0aGlzLnJlc2l6ZVNjcm9sbGJhcihcInhcIiksdGhpcy5yZXNpemVTY3JvbGxiYXIoXCJ5XCIpLHRoaXMub3B0aW9ucy5hdXRvSGlkZXx8KHRoaXMuc2hvd1Njcm9sbGJhcihcInhcIiksdGhpcy5zaG93U2Nyb2xsYmFyKFwieVwiKSl9fSx7a2V5OlwiZ2V0U2Nyb2xsRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsQ29udGVudEVsfX0se2tleTpcImdldENvbnRlbnRFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50RWx9fSx7a2V5OlwidW5Nb3VudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnMoKSx0aGlzLmVsLlNpbXBsZUJhcj1udWxsfX0se2tleTpcImlzQ2hpbGROb2RlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIG51bGwhPT10JiYodD09PXRoaXMuZWx8fHRoaXMuaXNDaGlsZE5vZGUodC5wYXJlbnROb2RlKSl9fV0sW3trZXk6XCJpbml0SHRtbEFwaVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5pbml0RE9NTG9hZGVkRWxlbWVudHM9dGhpcy5pbml0RE9NTG9hZGVkRWxlbWVudHMuYmluZCh0aGlzKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgTXV0YXRpb25PYnNlcnZlciYmKHRoaXMuZ2xvYmFsT2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obil7bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe0FycmF5LmZyb20obi5hZGRlZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKG4pezE9PT1uLm5vZGVUeXBlJiYobi5oYXNBdHRyaWJ1dGUoXCJkYXRhLXNpbXBsZWJhclwiKT8hbi5TaW1wbGVCYXImJm5ldyB0KG4sdC5nZXRFbE9wdGlvbnMobikpOkFycmF5LmZyb20obi5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtc2ltcGxlYmFyXVwiKSkuZm9yRWFjaChmdW5jdGlvbihuKXshbi5TaW1wbGVCYXImJm5ldyB0KG4sdC5nZXRFbE9wdGlvbnMobikpfSkpfSksQXJyYXkuZnJvbShuLnJlbW92ZWROb2RlcykuZm9yRWFjaChmdW5jdGlvbih0KXsxPT09dC5ub2RlVHlwZSYmKHQuaGFzQXR0cmlidXRlKFwiZGF0YS1zaW1wbGViYXJcIik/dC5TaW1wbGVCYXImJnQuU2ltcGxlQmFyLnVuTW91bnQoKTpBcnJheS5mcm9tKHQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXNpbXBsZWJhcl1cIikpLmZvckVhY2goZnVuY3Rpb24odCl7dC5TaW1wbGVCYXImJnQuU2ltcGxlQmFyLnVuTW91bnQoKX0pKX0pfSl9KSx0aGlzLmdsb2JhbE9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSkpLFwiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fFwibG9hZGluZ1wiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbD93aW5kb3cuc2V0VGltZW91dCh0aGlzLmluaXRET01Mb2FkZWRFbGVtZW50cy5iaW5kKHRoaXMpKTooZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0aGlzLmluaXRET01Mb2FkZWRFbGVtZW50cyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcy5pbml0RE9NTG9hZGVkRWxlbWVudHMpKX19LHtrZXk6XCJnZXRFbE9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbihuKXt2YXIgZT1PYmplY3Qua2V5cyh0Lmh0bWxBdHRyaWJ1dGVzKS5yZWR1Y2UoZnVuY3Rpb24oZSxyKXt2YXIgaT10Lmh0bWxBdHRyaWJ1dGVzW3JdO3JldHVybiBuLmhhc0F0dHJpYnV0ZShpKSYmKGVbcl09SlNPTi5wYXJzZShuLmdldEF0dHJpYnV0ZShpKXx8ITApKSxlfSx7fSk7cmV0dXJuIGV9fSx7a2V5OlwicmVtb3ZlT2JzZXJ2ZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ2xvYmFsT2JzZXJ2ZXIuZGlzY29ubmVjdCgpfX0se2tleTpcImluaXRET01Mb2FkZWRFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0aGlzLmluaXRET01Mb2FkZWRFbGVtZW50cyksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsdGhpcy5pbml0RE9NTG9hZGVkRWxlbWVudHMpLEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXNpbXBsZWJhcl1cIikpLmZvckVhY2goZnVuY3Rpb24obil7bi5TaW1wbGVCYXJ8fG5ldyB0KG4sdC5nZXRFbE9wdGlvbnMobikpfSl9fSx7a2V5OlwiZGVmYXVsdE9wdGlvbnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57YXV0b0hpZGU6ITAsY2xhc3NOYW1lczp7Y29udGVudDpcInNpbXBsZWJhci1jb250ZW50XCIsc2Nyb2xsQ29udGVudDpcInNpbXBsZWJhci1zY3JvbGwtY29udGVudFwiLHNjcm9sbGJhcjpcInNpbXBsZWJhci1zY3JvbGxiYXJcIix0cmFjazpcInNpbXBsZWJhci10cmFja1wifSxzY3JvbGxiYXJNaW5TaXplOjI1fX19LHtrZXk6XCJodG1sQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybnthdXRvSGlkZTpcImRhdGEtc2ltcGxlYmFyLWF1dG9oaWRlXCIsc2Nyb2xsYmFyTWluU2l6ZTpcImRhdGEtc2ltcGxlYmFyLXNjcm9sbGJhci1taW4tc2l6ZVwifX19XSksdH0oKTtuLmRlZmF1bHQ9aCxoLmluaXRIdG1sQXBpKCksdC5leHBvcnRzPW4uZGVmYXVsdH0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMyksaT1lKDM0KSxvPWUoMTEpLGM9ZSgxNikscz1lKDEyKSx1PVwicHJvdG90eXBlXCIsYT1mdW5jdGlvbih0LG4sZSl7dmFyIGYsbCxoLHYscD10JmEuRixkPXQmYS5HLHk9dCZhLlMsZz10JmEuUCxtPXQmYS5CLGI9ZD9yOnk/cltuXXx8KHJbbl09e30pOihyW25dfHx7fSlbdV0sXz1kP2k6aVtuXXx8KGlbbl09e30pLHc9X1t1XXx8KF9bdV09e30pO2QmJihlPW4pO2ZvcihmIGluIGUpbD0hcCYmYiYmdm9pZCAwIT09YltmXSxoPShsP2I6ZSlbZl0sdj1tJiZsP3MoaCxyKTpnJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBoP3MoRnVuY3Rpb24uY2FsbCxoKTpoLGImJmMoYixmLGgsdCZhLlUpLF9bZl0hPWgmJm8oXyxmLHYpLGcmJndbZl0hPWgmJih3W2ZdPWgpfTtyLmNvcmU9aSxhLkY9MSxhLkc9MixhLlM9NCxhLlA9OCxhLkI9MTYsYS5XPTMyLGEuVT02NCxhLlI9MTI4LHQuZXhwb3J0cz1hfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYoIXIodCkpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGFuIG9iamVjdCFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LG4pe3ZhciBlPXQuZXhwb3J0cz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcIm51bWJlclwiPT10eXBlb2YgX19nJiYoX19nPWUpfSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdD9udWxsIT09dDpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNjApKFwid2tzXCIpLGk9ZSgyMiksbz1lKDMpLlN5bWJvbCxjPVwiZnVuY3Rpb25cIj09dHlwZW9mIG8scz10LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHJbdF18fChyW3RdPWMmJm9bdF18fChjP286aSkoXCJTeW1ib2wuXCIrdCkpfTtzLnN0b3JlPXJ9LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4hIXQoKX1jYXRjaCh0KXtyZXR1cm4hMH19fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyKSxpPWUoNzEpLG89ZSg0MCksYz1PYmplY3QuZGVmaW5lUHJvcGVydHk7bi5mPWUoOSk/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsbixlKXtpZihyKHQpLG49byhuLCEwKSxyKGUpLGkpdHJ5e3JldHVybiBjKHQsbixlKX1jYXRjaCh0KXt9aWYoXCJnZXRcImluIGV8fFwic2V0XCJpbiBlKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiBlJiYodFtuXT1lLnZhbHVlKSx0fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjApLGk9TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiB0PjA/aShyKHQpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9fSxmdW5jdGlvbih0LG4sZSl7dC5leHBvcnRzPSFlKDYpKGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pfSxmdW5jdGlvbih0LG4pe3ZhciBlPXt9Lmhhc093blByb3BlcnR5O3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3JldHVybiBlLmNhbGwodCxuKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDcpLGk9ZSgxOSk7dC5leHBvcnRzPWUoOSk/ZnVuY3Rpb24odCxuLGUpe3JldHVybiByLmYodCxuLGkoMSxlKSl9OmZ1bmN0aW9uKHQsbixlKXtyZXR1cm4gdFtuXT1lLHR9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxNyk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlKXtpZihyKHQpLHZvaWQgMD09PW4pcmV0dXJuIHQ7c3dpdGNoKGUpe2Nhc2UgMTpyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2FsbChuLGUpfTtjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKGUscil7cmV0dXJuIHQuY2FsbChuLGUscil9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24oZSxyLGkpe3JldHVybiB0LmNhbGwobixlLHIsaSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KG4sYXJndW1lbnRzKX19fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg1NCksaT1lKDE4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHIoaSh0KSl9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7aWYoZSg5KSl7dmFyIHI9ZSgyNyksaT1lKDMpLG89ZSg2KSxjPWUoMSkscz1lKDY0KSx1PWUoODgpLGE9ZSgxMiksZj1lKDI0KSxsPWUoMTkpLGg9ZSgxMSksdj1lKDI5KSxwPWUoMjApLGQ9ZSg4KSx5PWUoODcpLGc9ZSgzMSksbT1lKDQwKSxiPWUoMTApLF89ZSg0OSksdz1lKDQpLFM9ZSgyMSkseD1lKDU1KSxFPWUoMzYpLE89ZSgzOCksTT1lKDM3KS5mLEE9ZSg2NSksTD1lKDIyKSxqPWUoNSksaz1lKDMzKSxUPWUoNDgpLFA9ZSg2MSksRj1lKDY2KSxOPWUoMjYpLEM9ZSg0NCksUj1lKDQ2KSxEPWUoNDcpLEk9ZSg2NyksVz1lKDcpLHo9ZSgxNSksQj1XLmYsWT16LmYsWD1pLlJhbmdlRXJyb3IsRz1pLlR5cGVFcnJvcixWPWkuVWludDhBcnJheSxVPVwiQXJyYXlCdWZmZXJcIixxPVwiU2hhcmVkXCIrVSxIPVwiQllURVNfUEVSX0VMRU1FTlRcIixLPVwicHJvdG90eXBlXCIsSj1BcnJheVtLXSwkPXUuQXJyYXlCdWZmZXIsUT11LkRhdGFWaWV3LFo9aygwKSx0dD1rKDIpLG50PWsoMyksZXQ9ayg0KSxydD1rKDUpLGl0PWsoNiksb3Q9VCghMCksY3Q9VCghMSksc3Q9Ri52YWx1ZXMsdXQ9Ri5rZXlzLGF0PUYuZW50cmllcyxmdD1KLmxhc3RJbmRleE9mLGx0PUoucmVkdWNlLGh0PUoucmVkdWNlUmlnaHQsdnQ9Si5qb2luLHB0PUouc29ydCxkdD1KLnNsaWNlLHl0PUoudG9TdHJpbmcsZ3Q9Si50b0xvY2FsZVN0cmluZyxtdD1qKFwiaXRlcmF0b3JcIiksYnQ9aihcInRvU3RyaW5nVGFnXCIpLF90PUwoXCJ0eXBlZF9jb25zdHJ1Y3RvclwiKSx3dD1MKFwiZGVmX2NvbnN0cnVjdG9yXCIpLFN0PXMuQ09OU1RSLHh0PXMuVFlQRUQsRXQ9cy5WSUVXLE90PVwiV3JvbmcgbGVuZ3RoIVwiLE10PWsoMSxmdW5jdGlvbih0LG4pe3JldHVybiBUdChQKHQsdFt3dF0pLG4pfSksQXQ9byhmdW5jdGlvbigpe3JldHVybiAxPT09bmV3IFYobmV3IFVpbnQxNkFycmF5KFsxXSkuYnVmZmVyKVswXX0pLEx0PSEhViYmISFWW0tdLnNldCYmbyhmdW5jdGlvbigpe25ldyBWKDEpLnNldCh7fSl9KSxqdD1mdW5jdGlvbih0LG4pe3ZhciBlPXAodCk7aWYoZTwwfHxlJW4pdGhyb3cgWChcIldyb25nIG9mZnNldCFcIik7cmV0dXJuIGV9LGt0PWZ1bmN0aW9uKHQpe2lmKHcodCkmJnh0IGluIHQpcmV0dXJuIHQ7dGhyb3cgRyh0K1wiIGlzIG5vdCBhIHR5cGVkIGFycmF5IVwiKX0sVHQ9ZnVuY3Rpb24odCxuKXtpZighKHcodCkmJl90IGluIHQpKXRocm93IEcoXCJJdCBpcyBub3QgYSB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvciFcIik7cmV0dXJuIG5ldyB0KG4pfSxQdD1mdW5jdGlvbih0LG4pe3JldHVybiBGdChQKHQsdFt3dF0pLG4pfSxGdD1mdW5jdGlvbih0LG4pe2Zvcih2YXIgZT0wLHI9bi5sZW5ndGgsaT1UdCh0LHIpO3I+ZTspaVtlXT1uW2UrK107cmV0dXJuIGl9LE50PWZ1bmN0aW9uKHQsbixlKXtCKHQsbix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RbZV19fSl9LEN0PWZ1bmN0aW9uKHQpe3ZhciBuLGUscixpLG8sYyxzPVModCksdT1hcmd1bWVudHMubGVuZ3RoLGY9dT4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsbD12b2lkIDAhPT1mLGg9QShzKTtpZih2b2lkIDAhPWgmJiF4KGgpKXtmb3IoYz1oLmNhbGwocykscj1bXSxuPTA7IShvPWMubmV4dCgpKS5kb25lO24rKylyLnB1c2goby52YWx1ZSk7cz1yfWZvcihsJiZ1PjImJihmPWEoZixhcmd1bWVudHNbMl0sMikpLG49MCxlPWQocy5sZW5ndGgpLGk9VHQodGhpcyxlKTtlPm47bisrKWlbbl09bD9mKHNbbl0sbik6c1tuXTtyZXR1cm4gaX0sUnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxuPWFyZ3VtZW50cy5sZW5ndGgsZT1UdCh0aGlzLG4pO24+dDspZVt0XT1hcmd1bWVudHNbdCsrXTtyZXR1cm4gZX0sRHQ9ISFWJiZvKGZ1bmN0aW9uKCl7Z3QuY2FsbChuZXcgVigxKSl9KSxJdD1mdW5jdGlvbigpe3JldHVybiBndC5hcHBseShEdD9kdC5jYWxsKGt0KHRoaXMpKTprdCh0aGlzKSxhcmd1bWVudHMpfSxXdD17Y29weVdpdGhpbjpmdW5jdGlvbih0LG4pe3JldHVybiBJLmNhbGwoa3QodGhpcyksdCxuLGFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwKX0sZXZlcnk6ZnVuY3Rpb24odCl7cmV0dXJuIGV0KGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxmaWxsOmZ1bmN0aW9uKHQpe3JldHVybiBELmFwcGx5KGt0KHRoaXMpLGFyZ3VtZW50cyl9LGZpbHRlcjpmdW5jdGlvbih0KXtyZXR1cm4gUHQodGhpcyx0dChrdCh0aGlzKSx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKSl9LGZpbmQ6ZnVuY3Rpb24odCl7cmV0dXJuIHJ0KGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxmaW5kSW5kZXg6ZnVuY3Rpb24odCl7cmV0dXJuIGl0KGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxmb3JFYWNoOmZ1bmN0aW9uKHQpe1ooa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGluZGV4T2Y6ZnVuY3Rpb24odCl7cmV0dXJuIGN0KGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxpbmNsdWRlczpmdW5jdGlvbih0KXtyZXR1cm4gb3Qoa3QodGhpcyksdCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCl9LGpvaW46ZnVuY3Rpb24odCl7cmV0dXJuIHZ0LmFwcGx5KGt0KHRoaXMpLGFyZ3VtZW50cyl9LGxhc3RJbmRleE9mOmZ1bmN0aW9uKHQpe3JldHVybiBmdC5hcHBseShrdCh0aGlzKSxhcmd1bWVudHMpfSxtYXA6ZnVuY3Rpb24odCl7cmV0dXJuIE10KGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxyZWR1Y2U6ZnVuY3Rpb24odCl7cmV0dXJuIGx0LmFwcGx5KGt0KHRoaXMpLGFyZ3VtZW50cyl9LHJlZHVjZVJpZ2h0OmZ1bmN0aW9uKHQpe3JldHVybiBodC5hcHBseShrdCh0aGlzKSxhcmd1bWVudHMpfSxyZXZlcnNlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0LG49dGhpcyxlPWt0KG4pLmxlbmd0aCxyPU1hdGguZmxvb3IoZS8yKSxpPTA7aTxyOyl0PW5baV0sbltpKytdPW5bLS1lXSxuW2VdPXQ7cmV0dXJuIG59LHNvbWU6ZnVuY3Rpb24odCl7cmV0dXJuIG50KGt0KHRoaXMpLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDApfSxzb3J0OmZ1bmN0aW9uKHQpe3JldHVybiBwdC5jYWxsKGt0KHRoaXMpLHQpfSxzdWJhcnJheTpmdW5jdGlvbih0LG4pe3ZhciBlPWt0KHRoaXMpLHI9ZS5sZW5ndGgsaT1nKHQscik7cmV0dXJuIG5ldyhQKGUsZVt3dF0pKShlLmJ1ZmZlcixlLmJ5dGVPZmZzZXQraSplLkJZVEVTX1BFUl9FTEVNRU5ULGQoKHZvaWQgMD09PW4/cjpnKG4scikpLWkpKX19LHp0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIFB0KHRoaXMsZHQuY2FsbChrdCh0aGlzKSx0LG4pKX0sQnQ9ZnVuY3Rpb24odCl7a3QodGhpcyk7dmFyIG49anQoYXJndW1lbnRzWzFdLDEpLGU9dGhpcy5sZW5ndGgscj1TKHQpLGk9ZChyLmxlbmd0aCksbz0wO2lmKGkrbj5lKXRocm93IFgoT3QpO2Zvcig7bzxpOyl0aGlzW24rb109cltvKytdfSxZdD17ZW50cmllczpmdW5jdGlvbigpe3JldHVybiBhdC5jYWxsKGt0KHRoaXMpKX0sa2V5czpmdW5jdGlvbigpe3JldHVybiB1dC5jYWxsKGt0KHRoaXMpKX0sdmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHN0LmNhbGwoa3QodGhpcykpfX0sWHQ9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdyh0KSYmdFt4dF0mJlwic3ltYm9sXCIhPXR5cGVvZiBuJiZuIGluIHQmJlN0cmluZygrbik9PVN0cmluZyhuKX0sR3Q9ZnVuY3Rpb24odCxuKXtyZXR1cm4gWHQodCxuPW0obiwhMCkpP2woMix0W25dKTpZKHQsbil9LFZ0PWZ1bmN0aW9uKHQsbixlKXtyZXR1cm4hKFh0KHQsbj1tKG4sITApKSYmdyhlKSYmYihlLFwidmFsdWVcIikpfHxiKGUsXCJnZXRcIil8fGIoZSxcInNldFwiKXx8ZS5jb25maWd1cmFibGV8fGIoZSxcIndyaXRhYmxlXCIpJiYhZS53cml0YWJsZXx8YihlLFwiZW51bWVyYWJsZVwiKSYmIWUuZW51bWVyYWJsZT9CKHQsbixlKToodFtuXT1lLnZhbHVlLHQpfTtTdHx8KHouZj1HdCxXLmY9VnQpLGMoYy5TK2MuRiohU3QsXCJPYmplY3RcIix7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOkd0LGRlZmluZVByb3BlcnR5OlZ0fSksbyhmdW5jdGlvbigpe3l0LmNhbGwoe30pfSkmJih5dD1ndD1mdW5jdGlvbigpe3JldHVybiB2dC5jYWxsKHRoaXMpfSk7dmFyIFV0PXYoe30sV3QpO3YoVXQsWXQpLGgoVXQsbXQsWXQudmFsdWVzKSx2KFV0LHtzbGljZTp6dCxzZXQ6QnQsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt9LHRvU3RyaW5nOnl0LHRvTG9jYWxlU3RyaW5nOkl0fSksTnQoVXQsXCJidWZmZXJcIixcImJcIiksTnQoVXQsXCJieXRlT2Zmc2V0XCIsXCJvXCIpLE50KFV0LFwiYnl0ZUxlbmd0aFwiLFwibFwiKSxOdChVdCxcImxlbmd0aFwiLFwiZVwiKSxCKFV0LGJ0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t4dF19fSksdC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlLHUpe3U9ISF1O3ZhciBhPXQrKHU/XCJDbGFtcGVkXCI6XCJcIikrXCJBcnJheVwiLGw9XCJnZXRcIit0LHY9XCJzZXRcIit0LHA9aVthXSxnPXB8fHt9LG09cCYmTyhwKSxiPSFwfHwhcy5BQlYsUz17fSx4PXAmJnBbS10sQT1mdW5jdGlvbih0LGUpe3ZhciByPXQuX2Q7cmV0dXJuIHIudltsXShlKm4rci5vLEF0KX0sTD1mdW5jdGlvbih0LGUscil7dmFyIGk9dC5fZDt1JiYocj0ocj1NYXRoLnJvdW5kKHIpKTwwPzA6cj4yNTU/MjU1OjI1NSZyKSxpLnZbdl0oZSpuK2kubyxyLEF0KX0saj1mdW5jdGlvbih0LG4pe0IodCxuLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQSh0aGlzLG4pfSxzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIEwodGhpcyxuLHQpfSxlbnVtZXJhYmxlOiEwfSl9O2I/KHA9ZShmdW5jdGlvbih0LGUscixpKXtmKHQscCxhLFwiX2RcIik7dmFyIG8sYyxzLHUsbD0wLHY9MDtpZih3KGUpKXtpZighKGUgaW5zdGFuY2VvZiAkfHwodT1fKGUpKT09VXx8dT09cSkpcmV0dXJuIHh0IGluIGU/RnQocCxlKTpDdC5jYWxsKHAsZSk7bz1lLHY9anQocixuKTt2YXIgZz1lLmJ5dGVMZW5ndGg7aWYodm9pZCAwPT09aSl7aWYoZyVuKXRocm93IFgoT3QpO2lmKGM9Zy12LGM8MCl0aHJvdyBYKE90KX1lbHNlIGlmKGM9ZChpKSpuLGMrdj5nKXRocm93IFgoT3QpO3M9Yy9ufWVsc2Ugcz15KGUpLGM9cypuLG89bmV3ICQoYyk7Zm9yKGgodCxcIl9kXCIse2I6byxvOnYsbDpjLGU6cyx2Om5ldyBRKG8pfSk7bDxzOylqKHQsbCsrKX0pLHg9cFtLXT1FKFV0KSxoKHgsXCJjb25zdHJ1Y3RvclwiLHApKTpvKGZ1bmN0aW9uKCl7cCgxKX0pJiZvKGZ1bmN0aW9uKCl7bmV3IHAoLTEpfSkmJkMoZnVuY3Rpb24odCl7bmV3IHAsbmV3IHAobnVsbCksbmV3IHAoMS41KSxuZXcgcCh0KX0sITApfHwocD1lKGZ1bmN0aW9uKHQsZSxyLGkpe2YodCxwLGEpO3ZhciBvO3JldHVybiB3KGUpP2UgaW5zdGFuY2VvZiAkfHwobz1fKGUpKT09VXx8bz09cT92b2lkIDAhPT1pP25ldyBnKGUsanQocixuKSxpKTp2b2lkIDAhPT1yP25ldyBnKGUsanQocixuKSk6bmV3IGcoZSk6eHQgaW4gZT9GdChwLGUpOkN0LmNhbGwocCxlKTpuZXcgZyh5KGUpKX0pLFoobSE9PUZ1bmN0aW9uLnByb3RvdHlwZT9NKGcpLmNvbmNhdChNKG0pKTpNKGcpLGZ1bmN0aW9uKHQpe3QgaW4gcHx8aChwLHQsZ1t0XSl9KSxwW0tdPXgscnx8KHguY29uc3RydWN0b3I9cCkpO3ZhciBrPXhbbXRdLFQ9ISFrJiYoXCJ2YWx1ZXNcIj09ay5uYW1lfHx2b2lkIDA9PWsubmFtZSksUD1ZdC52YWx1ZXM7aChwLF90LCEwKSxoKHgseHQsYSksaCh4LEV0LCEwKSxoKHgsd3QscCksKHU/bmV3IHAoMSlbYnRdPT1hOmJ0IGluIHgpfHxCKHgsYnQse2dldDpmdW5jdGlvbigpe3JldHVybiBhfX0pLFNbYV09cCxjKGMuRytjLlcrYy5GKihwIT1nKSxTKSxjKGMuUyxhLHtCWVRFU19QRVJfRUxFTUVOVDpufSksYyhjLlMrYy5GKm8oZnVuY3Rpb24oKXtnLm9mLmNhbGwocCwxKX0pLGEse2Zyb206Q3Qsb2Y6UnR9KSxIIGluIHh8fGgoeCxILG4pLGMoYy5QLGEsV3QpLFIoYSksYyhjLlArYy5GKkx0LGEse3NldDpCdH0pLGMoYy5QK2MuRiohVCxhLFl0KSxyfHx4LnRvU3RyaW5nPT15dHx8KHgudG9TdHJpbmc9eXQpLGMoYy5QK2MuRipvKGZ1bmN0aW9uKCl7bmV3IHAoMSkuc2xpY2UoKX0pLGEse3NsaWNlOnp0fSksYyhjLlArYy5GKihvKGZ1bmN0aW9uKCl7cmV0dXJuWzEsMl0udG9Mb2NhbGVTdHJpbmcoKSE9bmV3IHAoWzEsMl0pLnRvTG9jYWxlU3RyaW5nKCl9KXx8IW8oZnVuY3Rpb24oKXt4LnRvTG9jYWxlU3RyaW5nLmNhbGwoWzEsMl0pfSkpLGEse3RvTG9jYWxlU3RyaW5nOkl0fSksTlthXT1UP2s6UCxyfHxUfHxoKHgsbXQsUCl9fWVsc2UgdC5leHBvcnRzPWZ1bmN0aW9uKCl7fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMzkpLGk9ZSgxOSksbz1lKDEzKSxjPWUoNDApLHM9ZSgxMCksdT1lKDcxKSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7bi5mPWUoOSk/YTpmdW5jdGlvbih0LG4pe2lmKHQ9byh0KSxuPWMobiwhMCksdSl0cnl7cmV0dXJuIGEodCxuKX1jYXRjaCh0KXt9aWYocyh0LG4pKXJldHVybiBpKCFyLmYuY2FsbCh0LG4pLHRbbl0pfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMyksaT1lKDExKSxvPWUoMTApLGM9ZSgyMikoXCJzcmNcIikscz1cInRvU3RyaW5nXCIsdT1GdW5jdGlvbltzXSxhPShcIlwiK3UpLnNwbGl0KHMpO2UoMzQpLmluc3BlY3RTb3VyY2U9ZnVuY3Rpb24odCl7cmV0dXJuIHUuY2FsbCh0KX0sKHQuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSxzKXt2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlO3UmJihvKGUsXCJuYW1lXCIpfHxpKGUsXCJuYW1lXCIsbikpLHRbbl0hPT1lJiYodSYmKG8oZSxjKXx8aShlLGMsdFtuXT9cIlwiK3Rbbl06YS5qb2luKFN0cmluZyhuKSkpKSx0PT09cj90W25dPWU6cz90W25dP3Rbbl09ZTppKHQsbixlKTooZGVsZXRlIHRbbl0saSh0LG4sZSkpKX0pKEZ1bmN0aW9uLnByb3RvdHlwZSxzLGZ1bmN0aW9uKCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcyYmdGhpc1tjXXx8dS5jYWxsKHRoaXMpfSl9LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT10KXRocm93IFR5cGVFcnJvcihcIkNhbid0IGNhbGwgbWV0aG9kIG9uICBcIit0KTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7cmV0dXJue2VudW1lcmFibGU6ISgxJnQpLGNvbmZpZ3VyYWJsZTohKDImdCksd3JpdGFibGU6ISg0JnQpLHZhbHVlOm59fX0sZnVuY3Rpb24odCxuKXt2YXIgZT1NYXRoLmNlaWwscj1NYXRoLmZsb29yO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP3I6ZSkodCl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Qocih0KSl9fSxmdW5jdGlvbih0LG4pe3ZhciBlPTAscj1NYXRoLnJhbmRvbSgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm5cIlN5bWJvbChcIi5jb25jYXQodm9pZCAwPT09dD9cIlwiOnQsXCIpX1wiLCgrK2UrcikudG9TdHJpbmcoMzYpKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDUpKFwidW5zY29wYWJsZXNcIiksaT1BcnJheS5wcm90b3R5cGU7dm9pZCAwPT1pW3JdJiZlKDExKShpLHIse30pLHQuZXhwb3J0cz1mdW5jdGlvbih0KXtpW3JdW3RdPSEwfX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUscil7aWYoISh0IGluc3RhbmNlb2Ygbil8fHZvaWQgMCE9PXImJnIgaW4gdCl0aHJvdyBUeXBlRXJyb3IoZStcIjogaW5jb3JyZWN0IGludm9jYXRpb24hXCIpO3JldHVybiB0fX0sZnVuY3Rpb24odCxuKXt2YXIgZT17fS50b1N0cmluZzt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGUuY2FsbCh0KS5zbGljZSg4LC0xKX19LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPXt9fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz0hMX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoODIpLGk9ZSg1Mik7dC5leHBvcnRzPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LGkpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTYpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7Zm9yKHZhciBpIGluIG4pcih0LGksbltpXSxlKTtyZXR1cm4gdH19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDcpLmYsaT1lKDEwKSxvPWUoNSkoXCJ0b1N0cmluZ1RhZ1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe3QmJiFpKHQ9ZT90OnQucHJvdG90eXBlLG8pJiZyKHQsbyx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOm59KX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIwKSxpPU1hdGgubWF4LG89TWF0aC5taW47dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHQ9cih0KSx0PDA/aSh0K24sMCk6byh0LG4pfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7aWYoIXIodCl8fHQuX3QhPT1uKXRocm93IFR5cGVFcnJvcihcIkluY29tcGF0aWJsZSByZWNlaXZlciwgXCIrbitcIiByZXF1aXJlZCFcIik7cmV0dXJuIHR9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxMiksaT1lKDU0KSxvPWUoMjEpLGM9ZSg4KSxzPWUoOTEpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3ZhciBlPTE9PXQsdT0yPT10LGE9Mz09dCxmPTQ9PXQsbD02PT10LGg9NT09dHx8bCx2PW58fHM7cmV0dXJuIGZ1bmN0aW9uKG4scyxwKXtmb3IodmFyIGQseSxnPW8obiksbT1pKGcpLGI9cihzLHAsMyksXz1jKG0ubGVuZ3RoKSx3PTAsUz1lP3YobixfKTp1P3YobiwwKTp2b2lkIDA7Xz53O3crKylpZigoaHx8dyBpbiBtKSYmKGQ9bVt3XSx5PWIoZCx3LGcpLHQpKWlmKGUpU1t3XT15O2Vsc2UgaWYoeSlzd2l0Y2godCl7Y2FzZSAzOnJldHVybiEwO2Nhc2UgNTpyZXR1cm4gZDtjYXNlIDY6cmV0dXJuIHc7Y2FzZSAyOlMucHVzaChkKX1lbHNlIGlmKGYpcmV0dXJuITE7cmV0dXJuIGw/LTE6YXx8Zj9mOlN9fX0sZnVuY3Rpb24odCxuKXt2YXIgZT10LmV4cG9ydHM9e3ZlcnNpb246XCIyLjUuMVwifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPWUpfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyMikoXCJtZXRhXCIpLGk9ZSg0KSxvPWUoMTApLGM9ZSg3KS5mLHM9MCx1PU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LGE9IWUoNikoZnVuY3Rpb24oKXtyZXR1cm4gdShPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLGY9ZnVuY3Rpb24odCl7Yyh0LHIse3ZhbHVlOntpOlwiT1wiKyArK3Msdzp7fX19KX0sbD1mdW5jdGlvbih0LG4pe2lmKCFpKHQpKXJldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0P3Q6KFwic3RyaW5nXCI9PXR5cGVvZiB0P1wiU1wiOlwiUFwiKSt0O2lmKCFvKHQscikpe2lmKCF1KHQpKXJldHVyblwiRlwiO2lmKCFuKXJldHVyblwiRVwiO2YodCl9cmV0dXJuIHRbcl0uaX0saD1mdW5jdGlvbih0LG4pe2lmKCFvKHQscikpe2lmKCF1KHQpKXJldHVybiEwO2lmKCFuKXJldHVybiExO2YodCl9cmV0dXJuIHRbcl0ud30sdj1mdW5jdGlvbih0KXtyZXR1cm4gYSYmcC5ORUVEJiZ1KHQpJiYhbyh0LHIpJiZmKHQpLHR9LHA9dC5leHBvcnRzPXtLRVk6cixORUVEOiExLGZhc3RLZXk6bCxnZXRXZWFrOmgsb25GcmVlemU6dn19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIpLGk9ZSg5OSksbz1lKDUyKSxjPWUoNTkpKFwiSUVfUFJPVE9cIikscz1mdW5jdGlvbigpe30sdT1cInByb3RvdHlwZVwiLGE9ZnVuY3Rpb24oKXt2YXIgdCxuPWUoNTEpKFwiaWZyYW1lXCIpLHI9by5sZW5ndGgsaT1cIjxcIixjPVwiPlwiO2ZvcihuLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZSg3MCkuYXBwZW5kQ2hpbGQobiksbi5zcmM9XCJqYXZhc2NyaXB0OlwiLHQ9bi5jb250ZW50V2luZG93LmRvY3VtZW50LHQub3BlbigpLHQud3JpdGUoaStcInNjcmlwdFwiK2MrXCJkb2N1bWVudC5GPU9iamVjdFwiK2krXCIvc2NyaXB0XCIrYyksdC5jbG9zZSgpLGE9dC5GO3ItLTspZGVsZXRlIGFbdV1bb1tyXV07cmV0dXJuIGEoKX07dC5leHBvcnRzPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKHQsbil7dmFyIGU7cmV0dXJuIG51bGwhPT10PyhzW3VdPXIodCksZT1uZXcgcyxzW3VdPW51bGwsZVtjXT10KTplPWEoKSx2b2lkIDA9PT1uP2U6aShlLG4pfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoODIpLGk9ZSg1MikuY29uY2F0KFwibGVuZ3RoXCIsXCJwcm90b3R5cGVcIik7bi5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzfHxmdW5jdGlvbih0KXtyZXR1cm4gcih0LGkpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTApLGk9ZSgyMSksbz1lKDU5KShcIklFX1BST1RPXCIpLGM9T2JqZWN0LnByb3RvdHlwZTt0LmV4cG9ydHM9T2JqZWN0LmdldFByb3RvdHlwZU9mfHxmdW5jdGlvbih0KXtyZXR1cm4gdD1pKHQpLHIodCxvKT90W29dOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY29uc3RydWN0b3ImJnQgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yP3QuY29uc3RydWN0b3IucHJvdG90eXBlOnQgaW5zdGFuY2VvZiBPYmplY3Q/YzpudWxsfX0sZnVuY3Rpb24odCxuKXtuLmY9e30ucHJvcGVydHlJc0VudW1lcmFibGV9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe2lmKCFyKHQpKXJldHVybiB0O3ZhciBlLGk7aWYobiYmXCJmdW5jdGlvblwiPT10eXBlb2YoZT10LnRvU3RyaW5nKSYmIXIoaT1lLmNhbGwodCkpKXJldHVybiBpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mKGU9dC52YWx1ZU9mKSYmIXIoaT1lLmNhbGwodCkpKXJldHVybiBpO2lmKCFuJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihlPXQudG9TdHJpbmcpJiYhcihpPWUuY2FsbCh0KSkpcmV0dXJuIGk7dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMyksaT1lKDEpLG89ZSgxNiksYz1lKDI5KSxzPWUoMzUpLHU9ZSg0MyksYT1lKDI0KSxmPWUoNCksbD1lKDYpLGg9ZSg0NCksdj1lKDMwKSxwPWUoOTUpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSxkLHksZyl7dmFyIG09clt0XSxiPW0sXz15P1wic2V0XCI6XCJhZGRcIix3PWImJmIucHJvdG90eXBlLFM9e30seD1mdW5jdGlvbih0KXt2YXIgbj13W3RdO28odyx0LFwiZGVsZXRlXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIShnJiYhZih0KSkmJm4uY2FsbCh0aGlzLDA9PT10PzA6dCl9OlwiaGFzXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIShnJiYhZih0KSkmJm4uY2FsbCh0aGlzLDA9PT10PzA6dCl9OlwiZ2V0XCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIGcmJiFmKHQpP3ZvaWQgMDpuLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImFkZFwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodGhpcywwPT09dD8wOnQpLHRoaXN9OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uY2FsbCh0aGlzLDA9PT10PzA6dCxlKSx0aGlzfSl9O2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGImJihnfHx3LmZvckVhY2gmJiFsKGZ1bmN0aW9uKCl7KG5ldyBiKS5lbnRyaWVzKCkubmV4dCgpfSkpKXt2YXIgRT1uZXcgYixPPUVbX10oZz97fTotMCwxKSE9RSxNPWwoZnVuY3Rpb24oKXtFLmhhcygxKX0pLEE9aChmdW5jdGlvbih0KXtuZXcgYih0KX0pLEw9IWcmJmwoZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IGIsbj01O24tLTspdFtfXShuLG4pO3JldHVybiF0LmhhcygtMCl9KTtBfHwoYj1uKGZ1bmN0aW9uKG4sZSl7YShuLGIsdCk7dmFyIHI9cChuZXcgbSxuLGIpO3JldHVybiB2b2lkIDAhPWUmJnUoZSx5LHJbX10scikscn0pLGIucHJvdG90eXBlPXcsdy5jb25zdHJ1Y3Rvcj1iKSwoTXx8TCkmJih4KFwiZGVsZXRlXCIpLHgoXCJoYXNcIikseSYmeChcImdldFwiKSksKEx8fE8pJiZ4KF8pLGcmJncuY2xlYXImJmRlbGV0ZSB3LmNsZWFyfWVsc2UgYj1kLmdldENvbnN0cnVjdG9yKG4sdCx5LF8pLGMoYi5wcm90b3R5cGUsZSkscy5ORUVEPSEwO3JldHVybiB2KGIsdCksU1t0XT1iLGkoaS5HK2kuVytpLkYqKGIhPW0pLFMpLGd8fGQuc2V0U3Ryb25nKGIsdCx5KSxifX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMTEpLGk9ZSgxNiksbz1lKDYpLGM9ZSgxOCkscz1lKDUpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7dmFyIHU9cyh0KSxhPWUoYyx1LFwiXCJbdF0pLGY9YVswXSxsPWFbMV07byhmdW5jdGlvbigpe3ZhciBuPXt9O3JldHVybiBuW3VdPWZ1bmN0aW9uKCl7cmV0dXJuIDd9LDchPVwiXCJbdF0obil9KSYmKGkoU3RyaW5nLnByb3RvdHlwZSx0LGYpLHIoUmVnRXhwLnByb3RvdHlwZSx1LDI9PW4/ZnVuY3Rpb24odCxuKXtyZXR1cm4gbC5jYWxsKHQsdGhpcyxuKX06ZnVuY3Rpb24odCl7cmV0dXJuIGwuY2FsbCh0LHRoaXMpfSkpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTIpLGk9ZSg3Niksbz1lKDU1KSxjPWUoMikscz1lKDgpLHU9ZSg2NSksYT17fSxmPXt9LG49dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlLGwsaCl7dmFyIHYscCxkLHksZz1oP2Z1bmN0aW9uKCl7cmV0dXJuIHR9OnUodCksbT1yKGUsbCxuPzI6MSksYj0wO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGcpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGl0ZXJhYmxlIVwiKTtpZihvKGcpKXtmb3Iodj1zKHQubGVuZ3RoKTt2PmI7YisrKWlmKHk9bj9tKGMocD10W2JdKVswXSxwWzFdKTptKHRbYl0pLHk9PT1hfHx5PT09ZilyZXR1cm4geX1lbHNlIGZvcihkPWcuY2FsbCh0KTshKHA9ZC5uZXh0KCkpLmRvbmU7KWlmKHk9aShkLG0scC52YWx1ZSxuKSx5PT09YXx8eT09PWYpcmV0dXJuIHl9O24uQlJFQUs9YSxuLlJFVFVSTj1mfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg1KShcIml0ZXJhdG9yXCIpLGk9ITE7dHJ5e3ZhciBvPVs3XVtyXSgpO28ucmV0dXJuPWZ1bmN0aW9uKCl7aT0hMH0sQXJyYXkuZnJvbShvLGZ1bmN0aW9uKCl7dGhyb3cgMn0pfWNhdGNoKHQpe310LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtpZighbiYmIWkpcmV0dXJuITE7dmFyIGU9ITE7dHJ5e3ZhciBvPVs3XSxjPW9bcl0oKTtjLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTplPSEwfX0sb1tyXT1mdW5jdGlvbigpe3JldHVybiBjfSx0KG8pfWNhdGNoKHQpe31yZXR1cm4gZX19LGZ1bmN0aW9uKHQsbil7bi5mPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDMpLGk9ZSg3KSxvPWUoOSksYz1lKDUpKFwic3BlY2llc1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG49clt0XTtvJiZuJiYhbltjXSYmaS5mKG4sYyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMjEpLGk9ZSgzMSksbz1lKDgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtmb3IodmFyIG49cih0aGlzKSxlPW8obi5sZW5ndGgpLGM9YXJndW1lbnRzLmxlbmd0aCxzPWkoYz4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsZSksdT1jPjI/YXJndW1lbnRzWzJdOnZvaWQgMCxhPXZvaWQgMD09PXU/ZTppKHUsZSk7YT5zOyluW3MrK109dDtyZXR1cm4gbn19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEzKSxpPWUoOCksbz1lKDMxKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxjKXt2YXIgcyx1PXIobiksYT1pKHUubGVuZ3RoKSxmPW8oYyxhKTtpZih0JiZlIT1lKXtmb3IoO2E+ZjspaWYocz11W2YrK10scyE9cylyZXR1cm4hMH1lbHNlIGZvcig7YT5mO2YrKylpZigodHx8ZiBpbiB1KSYmdVtmXT09PWUpcmV0dXJuIHR8fGZ8fDA7cmV0dXJuIXQmJi0xfX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDI1KSxpPWUoNSkoXCJ0b1N0cmluZ1RhZ1wiKSxvPVwiQXJndW1lbnRzXCI9PXIoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSxjPWZ1bmN0aW9uKHQsbil7dHJ5e3JldHVybiB0W25dfWNhdGNoKHQpe319O3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgbixlLHM7cmV0dXJuIHZvaWQgMD09PXQ/XCJVbmRlZmluZWRcIjpudWxsPT09dD9cIk51bGxcIjpcInN0cmluZ1wiPT10eXBlb2YoZT1jKG49T2JqZWN0KHQpLGkpKT9lOm8/cihuKTpcIk9iamVjdFwiPT0ocz1yKG4pKSYmXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5jYWxsZWU/XCJBcmd1bWVudHNcIjpzfX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoNyksaT1lKDE5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe24gaW4gdD9yLmYodCxuLGkoMCxlKSk6dFtuXT1lfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCksaT1lKDMpLmRvY3VtZW50LG89cihpKSYmcihpLmNyZWF0ZUVsZW1lbnQpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gbz9pLmNyZWF0ZUVsZW1lbnQodCk6e319fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1cImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZlwiLnNwbGl0KFwiLFwiKX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNSkoXCJtYXRjaFwiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG49Ly4vO3RyeXtcIi8uL1wiW3RdKG4pfWNhdGNoKGUpe3RyeXtyZXR1cm4gbltyXT0hMSwhXCIvLi9cIlt0XShuKX1jYXRjaCh0KXt9fXJldHVybiEwfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjUpO3QuZXhwb3J0cz1PYmplY3QoXCJ6XCIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApP09iamVjdDpmdW5jdGlvbih0KXtyZXR1cm5cIlN0cmluZ1wiPT1yKHQpP3Quc3BsaXQoXCJcIik6T2JqZWN0KHQpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjYpLGk9ZSg1KShcIml0ZXJhdG9yXCIpLG89QXJyYXkucHJvdG90eXBlO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dCYmKHIuQXJyYXk9PT10fHxvW2ldPT09dCl9fSxmdW5jdGlvbih0LG4pe3ZhciBlPU1hdGguZXhwbTE7dC5leHBvcnRzPSFlfHxlKDEwKT4yMjAyNS40NjU3OTQ4MDY3MTh8fGUoMTApPDIyMDI1LjQ2NTc5NDgwNjcxOHx8ZSgtMmUtMTcpIT0tMmUtMTc/ZnVuY3Rpb24odCl7cmV0dXJuIDA9PSh0PSt0KT90OnQ+LTFlLTYmJnQ8MWUtNj90K3QqdC8yOk1hdGguZXhwKHQpLTF9OmV9LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPU1hdGguc2lnbnx8ZnVuY3Rpb24odCl7cmV0dXJuIDA9PSh0PSt0KXx8dCE9dD90OnQ8MD8tMToxfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCksaT1lKDIpLG89ZnVuY3Rpb24odCxuKXtpZihpKHQpLCFyKG4pJiZudWxsIT09bil0aHJvdyBUeXBlRXJyb3IobitcIjogY2FuJ3Qgc2V0IGFzIHByb3RvdHlwZSFcIil9O3QuZXhwb3J0cz17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KFwiX19wcm90b19fXCJpbnt9P2Z1bmN0aW9uKHQsbixyKXt0cnl7cj1lKDEyKShGdW5jdGlvbi5jYWxsLGUoMTUpLmYoT2JqZWN0LnByb3RvdHlwZSxcIl9fcHJvdG9fX1wiKS5zZXQsMikscih0LFtdKSxuPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaCh0KXtuPSEwfXJldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiBvKHQsZSksbj90Ll9fcHJvdG9fXz1lOnIodCxlKSx0fX0oe30sITEpOnZvaWQgMCksY2hlY2s6b319LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDYwKShcImtleXNcIiksaT1lKDIyKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7cmV0dXJuIHJbdF18fChyW3RdPWkodCkpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMyksaT1cIl9fY29yZS1qc19zaGFyZWRfX1wiLG89cltpXXx8KHJbaV09e30pO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gb1t0XXx8KG9bdF09e30pfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMiksaT1lKDE3KSxvPWUoNSkoXCJzcGVjaWVzXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3ZhciBlLGM9cih0KS5jb25zdHJ1Y3RvcjtyZXR1cm4gdm9pZCAwPT09Y3x8dm9pZCAwPT0oZT1yKGMpW29dKT9uOmkoZSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg3NSksaT1lKDE4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe2lmKHIobikpdGhyb3cgVHlwZUVycm9yKFwiU3RyaW5nI1wiK2UrXCIgZG9lc24ndCBhY2NlcHQgcmVnZXghXCIpO3JldHVybiBTdHJpbmcoaSh0KSl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHIsaSxvLGM9ZSgxMikscz1lKDcyKSx1PWUoNzApLGE9ZSg1MSksZj1lKDMpLGw9Zi5wcm9jZXNzLGg9Zi5zZXRJbW1lZGlhdGUsdj1mLmNsZWFySW1tZWRpYXRlLHA9Zi5NZXNzYWdlQ2hhbm5lbCxkPWYuRGlzcGF0Y2gseT0wLGc9e30sbT1cIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGI9ZnVuY3Rpb24oKXt2YXIgdD0rdGhpcztpZihnLmhhc093blByb3BlcnR5KHQpKXt2YXIgbj1nW3RdO2RlbGV0ZSBnW3RdLG4oKX19LF89ZnVuY3Rpb24odCl7Yi5jYWxsKHQuZGF0YSl9O2gmJnZ8fChoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1bXSxlPTE7YXJndW1lbnRzLmxlbmd0aD5lOyluLnB1c2goYXJndW1lbnRzW2UrK10pO3JldHVybiBnWysreV09ZnVuY3Rpb24oKXtzKFwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpGdW5jdGlvbih0KSxuKX0scih5KSx5fSx2PWZ1bmN0aW9uKHQpe2RlbGV0ZSBnW3RdfSxcInByb2Nlc3NcIj09ZSgyNSkobCk/cj1mdW5jdGlvbih0KXtsLm5leHRUaWNrKGMoYix0LDEpKX06ZCYmZC5ub3c/cj1mdW5jdGlvbih0KXtkLm5vdyhjKGIsdCwxKSl9OnA/KGk9bmV3IHAsbz1pLnBvcnQyLGkucG9ydDEub25tZXNzYWdlPV8scj1jKG8ucG9zdE1lc3NhZ2UsbywxKSk6Zi5hZGRFdmVudExpc3RlbmVyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwb3N0TWVzc2FnZSYmIWYuaW1wb3J0U2NyaXB0cz8ocj1mdW5jdGlvbih0KXtmLnBvc3RNZXNzYWdlKHQrXCJcIixcIipcIil9LGYuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixfLCExKSk6cj1tIGluIGEoXCJzY3JpcHRcIik/ZnVuY3Rpb24odCl7dS5hcHBlbmRDaGlsZChhKFwic2NyaXB0XCIpKVttXT1mdW5jdGlvbigpe3UucmVtb3ZlQ2hpbGQodGhpcyksYi5jYWxsKHQpfX06ZnVuY3Rpb24odCl7c2V0VGltZW91dChjKGIsdCwxKSwwKX0pLHQuZXhwb3J0cz17c2V0OmgsY2xlYXI6dn19LGZ1bmN0aW9uKHQsbixlKXtmb3IodmFyIHIsaT1lKDMpLG89ZSgxMSksYz1lKDIyKSxzPWMoXCJ0eXBlZF9hcnJheVwiKSx1PWMoXCJ2aWV3XCIpLGE9ISghaS5BcnJheUJ1ZmZlcnx8IWkuRGF0YVZpZXcpLGY9YSxsPTAsaD05LHY9XCJJbnQ4QXJyYXksVWludDhBcnJheSxVaW50OENsYW1wZWRBcnJheSxJbnQxNkFycmF5LFVpbnQxNkFycmF5LEludDMyQXJyYXksVWludDMyQXJyYXksRmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheVwiLnNwbGl0KFwiLFwiKTtsPGg7KShyPWlbdltsKytdXSk/KG8oci5wcm90b3R5cGUscywhMCksbyhyLnByb3RvdHlwZSx1LCEwKSk6Zj0hMTt0LmV4cG9ydHM9e0FCVjphLENPTlNUUjpmLFRZUEVEOnMsVklFVzp1fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNDkpLGk9ZSg1KShcIml0ZXJhdG9yXCIpLG89ZSgyNik7dC5leHBvcnRzPWUoMzQpLmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9dClyZXR1cm4gdFtpXXx8dFtcIkBAaXRlcmF0b3JcIl18fG9bcih0KV19fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgyMyksaT1lKDc4KSxvPWUoMjYpLGM9ZSgxMyk7dC5leHBvcnRzPWUoNzcpKEFycmF5LFwiQXJyYXlcIixmdW5jdGlvbih0LG4pe3RoaXMuX3Q9Yyh0KSx0aGlzLl9pPTAsdGhpcy5faz1ufSxmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Qsbj10aGlzLl9rLGU9dGhpcy5faSsrO3JldHVybiF0fHxlPj10Lmxlbmd0aD8odGhpcy5fdD12b2lkIDAsaSgxKSk6XCJrZXlzXCI9PW4/aSgwLGUpOlwidmFsdWVzXCI9PW4/aSgwLHRbZV0pOmkoMCxbZSx0W2VdXSl9LFwidmFsdWVzXCIpLG8uQXJndW1lbnRzPW8uQXJyYXkscihcImtleXNcIikscihcInZhbHVlc1wiKSxyKFwiZW50cmllc1wiKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMjEpLGk9ZSgzMSksbz1lKDgpO3QuZXhwb3J0cz1bXS5jb3B5V2l0aGlufHxmdW5jdGlvbih0LG4pe3ZhciBlPXIodGhpcyksYz1vKGUubGVuZ3RoKSxzPWkodCxjKSx1PWkobixjKSxhPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06dm9pZCAwLGY9TWF0aC5taW4oKHZvaWQgMD09PWE/YzppKGEsYykpLXUsYy1zKSxsPTE7Zm9yKHU8cyYmczx1K2YmJihsPS0xLHUrPWYtMSxzKz1mLTEpO2YtLSA+MDspdSBpbiBlP2Vbc109ZVt1XTpkZWxldGUgZVtzXSxzKz1sLHUrPWw7cmV0dXJuIGV9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSg3KS5mLGk9ZSgzNiksbz1lKDI5KSxjPWUoMTIpLHM9ZSgyNCksdT1lKDQzKSxhPWUoNzcpLGY9ZSg3OCksbD1lKDQ2KSxoPWUoOSksdj1lKDM1KS5mYXN0S2V5LHA9ZSgzMiksZD1oP1wiX3NcIjpcInNpemVcIix5PWZ1bmN0aW9uKHQsbil7dmFyIGUscj12KG4pO2lmKFwiRlwiIT09cilyZXR1cm4gdC5faVtyXTtmb3IoZT10Ll9mO2U7ZT1lLm4paWYoZS5rPT1uKXJldHVybiBlfTt0LmV4cG9ydHM9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsbixlLGEpe3ZhciBmPXQoZnVuY3Rpb24odCxyKXtzKHQsZixuLFwiX2lcIiksdC5fdD1uLHQuX2k9aShudWxsKSx0Ll9mPXZvaWQgMCx0Ll9sPXZvaWQgMCx0W2RdPTAsdm9pZCAwIT1yJiZ1KHIsZSx0W2FdLHQpfSk7cmV0dXJuIG8oZi5wcm90b3R5cGUse1xyXG5jbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgdD1wKHRoaXMsbiksZT10Ll9pLHI9dC5fZjtyO3I9ci5uKXIucj0hMCxyLnAmJihyLnA9ci5wLm49dm9pZCAwKSxkZWxldGUgZVtyLmldO3QuX2Y9dC5fbD12b2lkIDAsdFtkXT0wfSxkZWxldGU6ZnVuY3Rpb24odCl7dmFyIGU9cCh0aGlzLG4pLHI9eShlLHQpO2lmKHIpe3ZhciBpPXIubixvPXIucDtkZWxldGUgZS5faVtyLmldLHIucj0hMCxvJiYoby5uPWkpLGkmJihpLnA9byksZS5fZj09ciYmKGUuX2Y9aSksZS5fbD09ciYmKGUuX2w9byksZVtkXS0tfXJldHVybiEhcn0sZm9yRWFjaDpmdW5jdGlvbih0KXtwKHRoaXMsbik7Zm9yKHZhciBlLHI9Yyh0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLDMpO2U9ZT9lLm46dGhpcy5fZjspZm9yKHIoZS52LGUuayx0aGlzKTtlJiZlLnI7KWU9ZS5wfSxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuISF5KHAodGhpcyxuKSx0KX19KSxoJiZyKGYucHJvdG90eXBlLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcCh0aGlzLG4pW2RdfX0pLGZ9LGRlZjpmdW5jdGlvbih0LG4sZSl7dmFyIHIsaSxvPXkodCxuKTtyZXR1cm4gbz9vLnY9ZToodC5fbD1vPXtpOmk9dihuLCEwKSxrOm4sdjplLHA6cj10Ll9sLG46dm9pZCAwLHI6ITF9LHQuX2Z8fCh0Ll9mPW8pLHImJihyLm49byksdFtkXSsrLFwiRlwiIT09aSYmKHQuX2lbaV09bykpLHR9LGdldEVudHJ5Onksc2V0U3Ryb25nOmZ1bmN0aW9uKHQsbixlKXthKHQsbixmdW5jdGlvbih0LGUpe3RoaXMuX3Q9cCh0LG4pLHRoaXMuX2s9ZSx0aGlzLl9sPXZvaWQgMH0sZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcyxuPXQuX2ssZT10Ll9sO2UmJmUucjspZT1lLnA7cmV0dXJuIHQuX3QmJih0Ll9sPWU9ZT9lLm46dC5fdC5fZik/XCJrZXlzXCI9PW4/ZigwLGUuayk6XCJ2YWx1ZXNcIj09bj9mKDAsZS52KTpmKDAsW2UuayxlLnZdKToodC5fdD12b2lkIDAsZigxKSl9LGU/XCJlbnRyaWVzXCI6XCJ2YWx1ZXNcIiwhZSwhMCksbChuKX19fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgyOSksaT1lKDM1KS5nZXRXZWFrLG89ZSgyKSxjPWUoNCkscz1lKDI0KSx1PWUoNDMpLGE9ZSgzMyksZj1lKDEwKSxsPWUoMzIpLGg9YSg1KSx2PWEoNikscD0wLGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2x8fCh0Ll9sPW5ldyB5KX0seT1mdW5jdGlvbigpe3RoaXMuYT1bXX0sZz1mdW5jdGlvbih0LG4pe3JldHVybiBoKHQuYSxmdW5jdGlvbih0KXtyZXR1cm4gdFswXT09PW59KX07eS5wcm90b3R5cGU9e2dldDpmdW5jdGlvbih0KXt2YXIgbj1nKHRoaXMsdCk7aWYobilyZXR1cm4gblsxXX0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiEhZyh0aGlzLHQpfSxzZXQ6ZnVuY3Rpb24odCxuKXt2YXIgZT1nKHRoaXMsdCk7ZT9lWzFdPW46dGhpcy5hLnB1c2goW3Qsbl0pfSxkZWxldGU6ZnVuY3Rpb24odCl7dmFyIG49dih0aGlzLmEsZnVuY3Rpb24obil7cmV0dXJuIG5bMF09PT10fSk7cmV0dXJufm4mJnRoaXMuYS5zcGxpY2UobiwxKSwhIX5ufX0sdC5leHBvcnRzPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbih0LG4sZSxvKXt2YXIgYT10KGZ1bmN0aW9uKHQscil7cyh0LGEsbixcIl9pXCIpLHQuX3Q9bix0Ll9pPXArKyx0Ll9sPXZvaWQgMCx2b2lkIDAhPXImJnUocixlLHRbb10sdCl9KTtyZXR1cm4gcihhLnByb3RvdHlwZSx7ZGVsZXRlOmZ1bmN0aW9uKHQpe2lmKCFjKHQpKXJldHVybiExO3ZhciBlPWkodCk7cmV0dXJuIGU9PT0hMD9kKGwodGhpcyxuKSkuZGVsZXRlKHQpOmUmJmYoZSx0aGlzLl9pKSYmZGVsZXRlIGVbdGhpcy5faV19LGhhczpmdW5jdGlvbih0KXtpZighYyh0KSlyZXR1cm4hMTt2YXIgZT1pKHQpO3JldHVybiBlPT09ITA/ZChsKHRoaXMsbikpLmhhcyh0KTplJiZmKGUsdGhpcy5faSl9fSksYX0sZGVmOmZ1bmN0aW9uKHQsbixlKXt2YXIgcj1pKG8obiksITApO3JldHVybiByPT09ITA/ZCh0KS5zZXQobixlKTpyW3QuX2ldPWUsdH0sdWZzdG9yZTpkfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMykuZG9jdW1lbnQ7dC5leHBvcnRzPXImJnIuZG9jdW1lbnRFbGVtZW50fSxmdW5jdGlvbih0LG4sZSl7dC5leHBvcnRzPSFlKDkpJiYhZSg2KShmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoZSg1MSkoXCJkaXZcIiksXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KX0sZnVuY3Rpb24odCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe3ZhciByPXZvaWQgMD09PWU7c3dpdGNoKG4ubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHI/dCgpOnQuY2FsbChlKTtjYXNlIDE6cmV0dXJuIHI/dChuWzBdKTp0LmNhbGwoZSxuWzBdKTtjYXNlIDI6cmV0dXJuIHI/dChuWzBdLG5bMV0pOnQuY2FsbChlLG5bMF0sblsxXSk7Y2FzZSAzOnJldHVybiByP3QoblswXSxuWzFdLG5bMl0pOnQuY2FsbChlLG5bMF0sblsxXSxuWzJdKTtjYXNlIDQ6cmV0dXJuIHI/dChuWzBdLG5bMV0sblsyXSxuWzNdKTp0LmNhbGwoZSxuWzBdLG5bMV0sblsyXSxuWzNdKX1yZXR1cm4gdC5hcHBseShlLG4pfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjUpO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIkFycmF5XCI9PXIodCl9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KSxpPU1hdGguZmxvb3I7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiFyKHQpJiZpc0Zpbml0ZSh0KSYmaSh0KT09PXR9fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg0KSxpPWUoMjUpLG89ZSg1KShcIm1hdGNoXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgbjtyZXR1cm4gcih0KSYmKHZvaWQgMCE9PShuPXRbb10pPyEhbjpcIlJlZ0V4cFwiPT1pKHQpKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSxpKXt0cnl7cmV0dXJuIGk/bihyKGUpWzBdLGVbMV0pOm4oZSl9Y2F0Y2gobil7dmFyIG89dC5yZXR1cm47dGhyb3cgdm9pZCAwIT09byYmcihvLmNhbGwodCkpLG59fX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMjcpLGk9ZSgxKSxvPWUoMTYpLGM9ZSgxMSkscz1lKDEwKSx1PWUoMjYpLGE9ZSg5NiksZj1lKDMwKSxsPWUoMzgpLGg9ZSg1KShcIml0ZXJhdG9yXCIpLHY9IShbXS5rZXlzJiZcIm5leHRcImluW10ua2V5cygpKSxwPVwiQEBpdGVyYXRvclwiLGQ9XCJrZXlzXCIseT1cInZhbHVlc1wiLGc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dC5leHBvcnRzPWZ1bmN0aW9uKHQsbixlLG0sYixfLHcpe2EoZSxuLG0pO3ZhciBTLHgsRSxPPWZ1bmN0aW9uKHQpe2lmKCF2JiZ0IGluIGopcmV0dXJuIGpbdF07c3dpdGNoKHQpe2Nhc2UgZDpyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcyx0KX07Y2FzZSB5OnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzLHQpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcyx0KX19LE09bitcIiBJdGVyYXRvclwiLEE9Yj09eSxMPSExLGo9dC5wcm90b3R5cGUsaz1qW2hdfHxqW3BdfHxiJiZqW2JdLFQ9a3x8TyhiKSxQPWI/QT9PKFwiZW50cmllc1wiKTpUOnZvaWQgMCxGPVwiQXJyYXlcIj09bj9qLmVudHJpZXN8fGs6aztpZihGJiYoRT1sKEYuY2FsbChuZXcgdCkpLEUhPT1PYmplY3QucHJvdG90eXBlJiZFLm5leHQmJihmKEUsTSwhMCkscnx8cyhFLGgpfHxjKEUsaCxnKSkpLEEmJmsmJmsubmFtZSE9PXkmJihMPSEwLFQ9ZnVuY3Rpb24oKXtyZXR1cm4gay5jYWxsKHRoaXMpfSksciYmIXd8fCF2JiYhTCYmaltoXXx8YyhqLGgsVCksdVtuXT1ULHVbTV09ZyxiKWlmKFM9e3ZhbHVlczpBP1Q6Tyh5KSxrZXlzOl8/VDpPKGQpLGVudHJpZXM6UH0sdylmb3IoeCBpbiBTKXggaW4ganx8byhqLHgsU1t4XSk7ZWxzZSBpKGkuUCtpLkYqKHZ8fEwpLG4sUyk7cmV0dXJuIFN9fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3JldHVybnt2YWx1ZTpuLGRvbmU6ISF0fX19LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPU1hdGgubG9nMXB8fGZ1bmN0aW9uKHQpe3JldHVybih0PSt0KT4tMWUtOCYmdDwxZS04P3QtdCp0LzI6TWF0aC5sb2coMSt0KX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQpe3ZhciBuLGU7dGhpcy5wcm9taXNlPW5ldyB0KGZ1bmN0aW9uKHQscil7aWYodm9pZCAwIT09bnx8dm9pZCAwIT09ZSl0aHJvdyBUeXBlRXJyb3IoXCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvclwiKTtuPXQsZT1yfSksdGhpcy5yZXNvbHZlPWkobiksdGhpcy5yZWplY3Q9aShlKX12YXIgaT1lKDE3KTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHIodCl9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgyOCksaT1lKDQ1KSxvPWUoMzkpLGM9ZSgyMSkscz1lKDU0KSx1PU9iamVjdC5hc3NpZ247dC5leHBvcnRzPSF1fHxlKDYpKGZ1bmN0aW9uKCl7dmFyIHQ9e30sbj17fSxlPVN5bWJvbCgpLHI9XCJhYmNkZWZnaGlqa2xtbm9wcXJzdFwiO3JldHVybiB0W2VdPTcsci5zcGxpdChcIlwiKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe25bdF09dH0pLDchPXUoe30sdClbZV18fE9iamVjdC5rZXlzKHUoe30sbikpLmpvaW4oXCJcIikhPXJ9KT9mdW5jdGlvbih0LG4pe2Zvcih2YXIgZT1jKHQpLHU9YXJndW1lbnRzLmxlbmd0aCxhPTEsZj1pLmYsbD1vLmY7dT5hOylmb3IodmFyIGgsdj1zKGFyZ3VtZW50c1thKytdKSxwPWY/cih2KS5jb25jYXQoZih2KSk6cih2KSxkPXAubGVuZ3RoLHk9MDtkPnk7KWwuY2FsbCh2LGg9cFt5KytdKSYmKGVbaF09dltoXSk7cmV0dXJuIGV9OnV9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEwKSxpPWUoMTMpLG89ZSg0OCkoITEpLGM9ZSg1OSkoXCJJRV9QUk9UT1wiKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXt2YXIgZSxzPWkodCksdT0wLGE9W107Zm9yKGUgaW4gcyllIT1jJiZyKHMsZSkmJmEucHVzaChlKTtmb3IoO24ubGVuZ3RoPnU7KXIocyxlPW5bdSsrXSkmJih+byhhLGUpfHxhLnB1c2goZSkpO3JldHVybiBhfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjgpLGk9ZSgxMyksbz1lKDM5KS5mO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obil7Zm9yKHZhciBlLGM9aShuKSxzPXIoYyksdT1zLmxlbmd0aCxhPTAsZj1bXTt1PmE7KW8uY2FsbChjLGU9c1thKytdKSYmZi5wdXNoKHQ/W2UsY1tlXV06Y1tlXSk7cmV0dXJuIGZ9fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMzcpLGk9ZSg0NSksbz1lKDIpLGM9ZSgzKS5SZWZsZWN0O3QuZXhwb3J0cz1jJiZjLm93bktleXN8fGZ1bmN0aW9uKHQpe3ZhciBuPXIuZihvKHQpKSxlPWkuZjtyZXR1cm4gZT9uLmNvbmNhdChlKHQpKTpufX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoOCksaT1lKDg2KSxvPWUoMTgpO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSxjKXt2YXIgcz1TdHJpbmcobyh0KSksdT1zLmxlbmd0aCxhPXZvaWQgMD09PWU/XCIgXCI6U3RyaW5nKGUpLGY9cihuKTtpZihmPD11fHxcIlwiPT1hKXJldHVybiBzO3ZhciBsPWYtdSxoPWkuY2FsbChhLE1hdGguY2VpbChsL2EubGVuZ3RoKSk7cmV0dXJuIGgubGVuZ3RoPmwmJihoPWguc2xpY2UoMCxsKSksYz9oK3M6cytofX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMjApLGk9ZSgxOCk7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuPVN0cmluZyhpKHRoaXMpKSxlPVwiXCIsbz1yKHQpO2lmKG88MHx8bz09MS8wKXRocm93IFJhbmdlRXJyb3IoXCJDb3VudCBjYW4ndCBiZSBuZWdhdGl2ZVwiKTtmb3IoO28+MDsobz4+Pj0xKSYmKG4rPW4pKTEmbyYmKGUrPW4pO3JldHVybiBlfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjApLGk9ZSg4KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dClyZXR1cm4gMDt2YXIgbj1yKHQpLGU9aShuKTtpZihuIT09ZSl0aHJvdyBSYW5nZUVycm9yKFwiV3JvbmcgbGVuZ3RoIVwiKTtyZXR1cm4gZX19LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKHQsbixlKXt2YXIgcixpLG8sYz1BcnJheShlKSxzPTgqZS1uLTEsdT0oMTw8cyktMSxhPXU+PjEsZj0yMz09PW4/QigyLC0yNCktQigyLC03Nyk6MCxsPTAsaD10PDB8fDA9PT10JiYxL3Q8MD8xOjA7Zm9yKHQ9eih0KSx0IT10fHx0PT09ST8oaT10IT10PzE6MCxyPXUpOihyPVkoWCh0KS9HKSx0KihvPUIoMiwtcikpPDEmJihyLS0sbyo9MiksdCs9cithPj0xP2YvbzpmKkIoMiwxLWEpLHQqbz49MiYmKHIrKyxvLz0yKSxyK2E+PXU/KGk9MCxyPXUpOnIrYT49MT8oaT0odCpvLTEpKkIoMixuKSxyKz1hKTooaT10KkIoMixhLTEpKkIoMixuKSxyPTApKTtuPj04O2NbbCsrXT0yNTUmaSxpLz0yNTYsbi09OCk7Zm9yKHI9cjw8bnxpLHMrPW47cz4wO2NbbCsrXT0yNTUmcixyLz0yNTYscy09OCk7cmV0dXJuIGNbLS1sXXw9MTI4KmgsY31mdW5jdGlvbiBpKHQsbixlKXt2YXIgcixpPTgqZS1uLTEsbz0oMTw8aSktMSxjPW8+PjEscz1pLTcsdT1lLTEsYT10W3UtLV0sZj0xMjcmYTtmb3IoYT4+PTc7cz4wO2Y9MjU2KmYrdFt1XSx1LS0scy09OCk7Zm9yKHI9ZiYoMTw8LXMpLTEsZj4+PS1zLHMrPW47cz4wO3I9MjU2KnIrdFt1XSx1LS0scy09OCk7aWYoMD09PWYpZj0xLWM7ZWxzZXtpZihmPT09bylyZXR1cm4gcj9OYU46YT8tSTpJO3IrPUIoMixuKSxmLT1jfXJldHVybihhPy0xOjEpKnIqQigyLGYtbil9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdFszXTw8MjR8dFsyXTw8MTZ8dFsxXTw8OHx0WzBdfWZ1bmN0aW9uIGModCl7cmV0dXJuWzI1NSZ0XX1mdW5jdGlvbiBzKHQpe3JldHVyblsyNTUmdCx0Pj44JjI1NV19ZnVuY3Rpb24gdSh0KXtyZXR1cm5bMjU1JnQsdD4+OCYyNTUsdD4+MTYmMjU1LHQ+PjI0JjI1NV19ZnVuY3Rpb24gYSh0KXtyZXR1cm4gcih0LDUyLDgpfWZ1bmN0aW9uIGYodCl7cmV0dXJuIHIodCwyMyw0KX1mdW5jdGlvbiBsKHQsbixlKXtNKHRbVF0sbix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbZV19fSl9ZnVuY3Rpb24gaCh0LG4sZSxyKXt2YXIgaT0rZSxvPUUoaSk7aWYobytuPnRbS10pdGhyb3cgRChGKTt2YXIgYz10W0hdLl9iLHM9byt0W0pdLHU9Yy5zbGljZShzLHMrbik7cmV0dXJuIHI/dTp1LnJldmVyc2UoKX1mdW5jdGlvbiB2KHQsbixlLHIsaSxvKXt2YXIgYz0rZSxzPUUoYyk7aWYocytuPnRbS10pdGhyb3cgRChGKTtmb3IodmFyIHU9dFtIXS5fYixhPXMrdFtKXSxmPXIoK2kpLGw9MDtsPG47bCsrKXVbYStsXT1mW28/bDpuLWwtMV19dmFyIHA9ZSgzKSxkPWUoOSkseT1lKDI3KSxnPWUoNjQpLG09ZSgxMSksYj1lKDI5KSxfPWUoNiksdz1lKDI0KSxTPWUoMjApLHg9ZSg4KSxFPWUoODcpLE89ZSgzNykuZixNPWUoNykuZixBPWUoNDcpLEw9ZSgzMCksaj1cIkFycmF5QnVmZmVyXCIsaz1cIkRhdGFWaWV3XCIsVD1cInByb3RvdHlwZVwiLFA9XCJXcm9uZyBsZW5ndGghXCIsRj1cIldyb25nIGluZGV4IVwiLE49cFtqXSxDPXBba10sUj1wLk1hdGgsRD1wLlJhbmdlRXJyb3IsST1wLkluZmluaXR5LFc9Tix6PVIuYWJzLEI9Ui5wb3csWT1SLmZsb29yLFg9Ui5sb2csRz1SLkxOMixWPVwiYnVmZmVyXCIsVT1cImJ5dGVMZW5ndGhcIixxPVwiYnl0ZU9mZnNldFwiLEg9ZD9cIl9iXCI6VixLPWQ/XCJfbFwiOlUsSj1kP1wiX29cIjpxO2lmKGcuQUJWKXtpZighXyhmdW5jdGlvbigpe04oMSl9KXx8IV8oZnVuY3Rpb24oKXtuZXcgTigtMSl9KXx8XyhmdW5jdGlvbigpe3JldHVybiBuZXcgTixuZXcgTigxLjUpLG5ldyBOKE5hTiksTi5uYW1lIT1qfSkpe049ZnVuY3Rpb24odCl7cmV0dXJuIHcodGhpcyxOKSxuZXcgVyhFKHQpKX07Zm9yKHZhciAkLFE9TltUXT1XW1RdLFo9TyhXKSx0dD0wO1oubGVuZ3RoPnR0OykoJD1aW3R0KytdKWluIE58fG0oTiwkLFdbJF0pO3l8fChRLmNvbnN0cnVjdG9yPU4pfXZhciBudD1uZXcgQyhuZXcgTigyKSksZXQ9Q1tUXS5zZXRJbnQ4O250LnNldEludDgoMCwyMTQ3NDgzNjQ4KSxudC5zZXRJbnQ4KDEsMjE0NzQ4MzY0OSksIW50LmdldEludDgoMCkmJm50LmdldEludDgoMSl8fGIoQ1tUXSx7c2V0SW50ODpmdW5jdGlvbih0LG4pe2V0LmNhbGwodGhpcyx0LG48PDI0Pj4yNCl9LHNldFVpbnQ4OmZ1bmN0aW9uKHQsbil7ZXQuY2FsbCh0aGlzLHQsbjw8MjQ+PjI0KX19LCEwKX1lbHNlIE49ZnVuY3Rpb24odCl7dyh0aGlzLE4saik7dmFyIG49RSh0KTt0aGlzLl9iPUEuY2FsbChBcnJheShuKSwwKSx0aGlzW0tdPW59LEM9ZnVuY3Rpb24odCxuLGUpe3codGhpcyxDLGspLHcodCxOLGspO3ZhciByPXRbS10saT1TKG4pO2lmKGk8MHx8aT5yKXRocm93IEQoXCJXcm9uZyBvZmZzZXQhXCIpO2lmKGU9dm9pZCAwPT09ZT9yLWk6eChlKSxpK2U+cil0aHJvdyBEKFApO3RoaXNbSF09dCx0aGlzW0pdPWksdGhpc1tLXT1lfSxkJiYobChOLFUsXCJfbFwiKSxsKEMsVixcIl9iXCIpLGwoQyxVLFwiX2xcIiksbChDLHEsXCJfb1wiKSksYihDW1RdLHtnZXRJbnQ4OmZ1bmN0aW9uKHQpe3JldHVybiBoKHRoaXMsMSx0KVswXTw8MjQ+PjI0fSxnZXRVaW50ODpmdW5jdGlvbih0KXtyZXR1cm4gaCh0aGlzLDEsdClbMF19LGdldEludDE2OmZ1bmN0aW9uKHQpe3ZhciBuPWgodGhpcywyLHQsYXJndW1lbnRzWzFdKTtyZXR1cm4oblsxXTw8OHxuWzBdKTw8MTY+PjE2fSxnZXRVaW50MTY6ZnVuY3Rpb24odCl7dmFyIG49aCh0aGlzLDIsdCxhcmd1bWVudHNbMV0pO3JldHVybiBuWzFdPDw4fG5bMF19LGdldEludDMyOmZ1bmN0aW9uKHQpe3JldHVybiBvKGgodGhpcyw0LHQsYXJndW1lbnRzWzFdKSl9LGdldFVpbnQzMjpmdW5jdGlvbih0KXtyZXR1cm4gbyhoKHRoaXMsNCx0LGFyZ3VtZW50c1sxXSkpPj4+MH0sZ2V0RmxvYXQzMjpmdW5jdGlvbih0KXtyZXR1cm4gaShoKHRoaXMsNCx0LGFyZ3VtZW50c1sxXSksMjMsNCl9LGdldEZsb2F0NjQ6ZnVuY3Rpb24odCl7cmV0dXJuIGkoaCh0aGlzLDgsdCxhcmd1bWVudHNbMV0pLDUyLDgpfSxzZXRJbnQ4OmZ1bmN0aW9uKHQsbil7dih0aGlzLDEsdCxjLG4pfSxzZXRVaW50ODpmdW5jdGlvbih0LG4pe3YodGhpcywxLHQsYyxuKX0sc2V0SW50MTY6ZnVuY3Rpb24odCxuKXt2KHRoaXMsMix0LHMsbixhcmd1bWVudHNbMl0pfSxzZXRVaW50MTY6ZnVuY3Rpb24odCxuKXt2KHRoaXMsMix0LHMsbixhcmd1bWVudHNbMl0pfSxzZXRJbnQzMjpmdW5jdGlvbih0LG4pe3YodGhpcyw0LHQsdSxuLGFyZ3VtZW50c1syXSl9LHNldFVpbnQzMjpmdW5jdGlvbih0LG4pe3YodGhpcyw0LHQsdSxuLGFyZ3VtZW50c1syXSl9LHNldEZsb2F0MzI6ZnVuY3Rpb24odCxuKXt2KHRoaXMsNCx0LGYsbixhcmd1bWVudHNbMl0pfSxzZXRGbG9hdDY0OmZ1bmN0aW9uKHQsbil7dih0aGlzLDgsdCxhLG4sYXJndW1lbnRzWzJdKX19KTtMKE4saiksTChDLGspLG0oQ1tUXSxnLlZJRVcsITApLG5bal09TixuW2tdPUN9LGZ1bmN0aW9uKHQsbixlKXtuLmY9ZSg1KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNCksaT1lKDczKSxvPWUoNSkoXCJzcGVjaWVzXCIpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXt2YXIgbjtyZXR1cm4gaSh0KSYmKG49dC5jb25zdHJ1Y3RvcixcImZ1bmN0aW9uXCIhPXR5cGVvZiBufHxuIT09QXJyYXkmJiFpKG4ucHJvdG90eXBlKXx8KG49dm9pZCAwKSxyKG4pJiYobj1uW29dLG51bGw9PT1uJiYobj12b2lkIDApKSksdm9pZCAwPT09bj9BcnJheTpufX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoOTApO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe3JldHVybiBuZXcocih0KSkobil9fSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxNyksaT1lKDQpLG89ZSg3MiksYz1bXS5zbGljZSxzPXt9LHU9ZnVuY3Rpb24odCxuLGUpe2lmKCEobiBpbiBzKSl7Zm9yKHZhciByPVtdLGk9MDtpPG47aSsrKXJbaV09XCJhW1wiK2krXCJdXCI7c1tuXT1GdW5jdGlvbihcIkYsYVwiLFwicmV0dXJuIG5ldyBGKFwiK3Iuam9pbihcIixcIikrXCIpXCIpfXJldHVybiBzW25dKHQsZSl9O3QuZXhwb3J0cz1GdW5jdGlvbi5iaW5kfHxmdW5jdGlvbih0KXt2YXIgbj1yKHRoaXMpLGU9Yy5jYWxsKGFyZ3VtZW50cywxKSxzPWZ1bmN0aW9uKCl7dmFyIHI9ZS5jb25jYXQoYy5jYWxsKGFyZ3VtZW50cykpO3JldHVybiB0aGlzIGluc3RhbmNlb2Ygcz91KG4sci5sZW5ndGgscik6byhuLHIsdCl9O3JldHVybiBpKG4ucHJvdG90eXBlKSYmKHMucHJvdG90eXBlPW4ucHJvdG90eXBlKSxzfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMjgpLGk9ZSg0NSksbz1lKDM5KTt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG49cih0KSxlPWkuZjtpZihlKWZvcih2YXIgYyxzPWUodCksdT1vLmYsYT0wO3MubGVuZ3RoPmE7KXUuY2FsbCh0LGM9c1thKytdKSYmbi5wdXNoKGMpO3JldHVybiBufX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMik7dC5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIHQ9cih0aGlzKSxuPVwiXCI7cmV0dXJuIHQuZ2xvYmFsJiYobis9XCJnXCIpLHQuaWdub3JlQ2FzZSYmKG4rPVwiaVwiKSx0Lm11bHRpbGluZSYmKG4rPVwibVwiKSx0LnVuaWNvZGUmJihuKz1cInVcIiksdC5zdGlja3kmJihuKz1cInlcIiksbn19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDQpLGk9ZSg1OCkuc2V0O3QuZXhwb3J0cz1mdW5jdGlvbih0LG4sZSl7dmFyIG8sYz1uLmNvbnN0cnVjdG9yO3JldHVybiBjIT09ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYyYmKG89Yy5wcm90b3R5cGUpIT09ZS5wcm90b3R5cGUmJnIobykmJmkmJmkodCxvKSx0fX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMzYpLGk9ZSgxOSksbz1lKDMwKSxjPXt9O2UoMTEpKGMsZSg1KShcIml0ZXJhdG9yXCIpLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSx0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLGUpe3QucHJvdG90eXBlPXIoYyx7bmV4dDppKDEsZSl9KSxvKHQsbitcIiBJdGVyYXRvclwiKX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDU3KSxpPU1hdGgucG93LG89aSgyLC01MiksYz1pKDIsLTIzKSxzPWkoMiwxMjcpKigyLWMpLHU9aSgyLC0xMjYpLGE9ZnVuY3Rpb24odCl7cmV0dXJuIHQrMS9vLTEvb307dC5leHBvcnRzPU1hdGguZnJvdW5kfHxmdW5jdGlvbih0KXt2YXIgbixlLGk9TWF0aC5hYnModCksZj1yKHQpO3JldHVybiBpPHU/ZiphKGkvdS9jKSp1KmM6KG49KDErYy9vKSppLGU9bi0obi1pKSxlPnN8fGUhPWU/ZiooMS8wKTpmKmUpfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMyksaT1lKDYzKS5zZXQsbz1yLk11dGF0aW9uT2JzZXJ2ZXJ8fHIuV2ViS2l0TXV0YXRpb25PYnNlcnZlcixjPXIucHJvY2VzcyxzPXIuUHJvbWlzZSx1PVwicHJvY2Vzc1wiPT1lKDI1KShjKTt0LmV4cG9ydHM9ZnVuY3Rpb24oKXt2YXIgdCxuLGUsYT1mdW5jdGlvbigpe3ZhciByLGk7Zm9yKHUmJihyPWMuZG9tYWluKSYmci5leGl0KCk7dDspe2k9dC5mbix0PXQubmV4dDt0cnl7aSgpfWNhdGNoKHIpe3Rocm93IHQ/ZSgpOm49dm9pZCAwLHJ9fW49dm9pZCAwLHImJnIuZW50ZXIoKX07aWYodSllPWZ1bmN0aW9uKCl7Yy5uZXh0VGljayhhKX07ZWxzZSBpZihvKXt2YXIgZj0hMCxsPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO25ldyBvKGEpLm9ic2VydmUobCx7Y2hhcmFjdGVyRGF0YTohMH0pLGU9ZnVuY3Rpb24oKXtsLmRhdGE9Zj0hZn19ZWxzZSBpZihzJiZzLnJlc29sdmUpe3ZhciBoPXMucmVzb2x2ZSgpO2U9ZnVuY3Rpb24oKXtoLnRoZW4oYSl9fWVsc2UgZT1mdW5jdGlvbigpe2kuY2FsbChyLGEpfTtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9e2ZuOnIsbmV4dDp2b2lkIDB9O24mJihuLm5leHQ9aSksdHx8KHQ9aSxlKCkpLG49aX19fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg3KSxpPWUoMiksbz1lKDI4KTt0LmV4cG9ydHM9ZSg5KT9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbih0LG4pe2kodCk7Zm9yKHZhciBlLGM9byhuKSxzPWMubGVuZ3RoLHU9MDtzPnU7KXIuZih0LGU9Y1t1KytdLG5bZV0pO3JldHVybiB0fX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMTMpLGk9ZSgzNykuZixvPXt9LnRvU3RyaW5nLGM9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93JiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcz9PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh3aW5kb3cpOltdLHM9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBpKHQpfWNhdGNoKHQpe3JldHVybiBjLnNsaWNlKCl9fTt0LmV4cG9ydHMuZj1mdW5jdGlvbih0KXtyZXR1cm4gYyYmXCJbb2JqZWN0IFdpbmRvd11cIj09by5jYWxsKHQpP3ModCk6aShyKHQpKX19LGZ1bmN0aW9uKHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm57ZTohMSx2OnQoKX19Y2F0Y2godCl7cmV0dXJue2U6ITAsdjp0fX19fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgyKSxpPWUoNCksbz1lKDgwKTt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtpZihyKHQpLGkobikmJm4uY29uc3RydWN0b3I9PT10KXJldHVybiBuO3ZhciBlPW8uZih0KSxjPWUucmVzb2x2ZTtyZXR1cm4gYyhuKSxlLnByb21pc2V9fSxmdW5jdGlvbih0LG4pe3QuZXhwb3J0cz1PYmplY3QuaXN8fGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQ9PT1uPzAhPT10fHwxL3Q9PT0xL246dCE9dCYmbiE9bn19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDIwKSxpPWUoMTgpO3QuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlKXt2YXIgbyxjLHM9U3RyaW5nKGkobikpLHU9cihlKSxhPXMubGVuZ3RoO3JldHVybiB1PDB8fHU+PWE/dD9cIlwiOnZvaWQgMDoobz1zLmNoYXJDb2RlQXQodSksbzw1NTI5Nnx8bz41NjMxOXx8dSsxPT09YXx8KGM9cy5jaGFyQ29kZUF0KHUrMSkpPDU2MzIwfHxjPjU3MzQzP3Q/cy5jaGFyQXQodSk6bzp0P3Muc2xpY2UodSx1KzIpOihvLTU1Mjk2PDwxMCkrKGMtNTYzMjApKzY1NTM2KX19fSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgzKSxpPWUoMzQpLG89ZSgyNyksYz1lKDg5KSxzPWUoNykuZjt0LmV4cG9ydHM9ZnVuY3Rpb24odCl7dmFyIG49aS5TeW1ib2x8fChpLlN5bWJvbD1vP3t9OnIuU3ltYm9sfHx7fSk7XCJfXCI9PXQuY2hhckF0KDApfHx0IGluIG58fHMobix0LHt2YWx1ZTpjLmYodCl9KX19LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5QLFwiQXJyYXlcIix7Y29weVdpdGhpbjplKDY3KX0pLGUoMjMpKFwiY29weVdpdGhpblwiKX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlAsXCJBcnJheVwiLHtmaWxsOmUoNDcpfSksZSgyMykoXCJmaWxsXCIpfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoMzMpKDYpLG89XCJmaW5kSW5kZXhcIixjPSEwO28gaW5bXSYmQXJyYXkoMSlbb10oZnVuY3Rpb24oKXtjPSExfSkscihyLlArci5GKmMsXCJBcnJheVwiLHtmaW5kSW5kZXg6ZnVuY3Rpb24odCl7cmV0dXJuIGkodGhpcyx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxlKDIzKShvKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDMzKSg1KSxvPVwiZmluZFwiLGM9ITA7byBpbltdJiZBcnJheSgxKVtvXShmdW5jdGlvbigpe2M9ITF9KSxyKHIuUCtyLkYqYyxcIkFycmF5XCIse2ZpbmQ6ZnVuY3Rpb24odCl7cmV0dXJuIGkodGhpcyx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxlKDIzKShvKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMTIpLGk9ZSgxKSxvPWUoMjEpLGM9ZSg3Nikscz1lKDU1KSx1PWUoOCksYT1lKDUwKSxmPWUoNjUpO2koaS5TK2kuRiohZSg0NCkoZnVuY3Rpb24odCl7QXJyYXkuZnJvbSh0KX0pLFwiQXJyYXlcIix7ZnJvbTpmdW5jdGlvbih0KXt2YXIgbixlLGksbCxoPW8odCksdj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzP3RoaXM6QXJyYXkscD1hcmd1bWVudHMubGVuZ3RoLGQ9cD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAseT12b2lkIDAhPT1kLGc9MCxtPWYoaCk7aWYoeSYmKGQ9cihkLHA+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSx2b2lkIDA9PW18fHY9PUFycmF5JiZzKG0pKWZvcihuPXUoaC5sZW5ndGgpLGU9bmV3IHYobik7bj5nO2crKylhKGUsZyx5P2QoaFtnXSxnKTpoW2ddKTtlbHNlIGZvcihsPW0uY2FsbChoKSxlPW5ldyB2OyEoaT1sLm5leHQoKSkuZG9uZTtnKyspYShlLGcseT9jKGwsZCxbaS52YWx1ZSxnXSwhMCk6aS52YWx1ZSk7cmV0dXJuIGUubGVuZ3RoPWcsZX19KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDUwKTtyKHIuUytyLkYqZSg2KShmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIShBcnJheS5vZi5jYWxsKHQpaW5zdGFuY2VvZiB0KX0pLFwiQXJyYXlcIix7b2Y6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxuPWFyZ3VtZW50cy5sZW5ndGgsZT1uZXcoXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcz90aGlzOkFycmF5KShuKTtuPnQ7KWkoZSx0LGFyZ3VtZW50c1t0KytdKTtyZXR1cm4gZS5sZW5ndGg9bixlfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSg3KS5mLGk9RnVuY3Rpb24ucHJvdG90eXBlLG89L15cXHMqZnVuY3Rpb24gKFteIChdKikvLGM9XCJuYW1lXCI7YyBpbiBpfHxlKDkpJiZyKGksYyx7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3RyeXtyZXR1cm4oXCJcIit0aGlzKS5tYXRjaChvKVsxXX1jYXRjaCh0KXtyZXR1cm5cIlwifX19KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoNjgpLGk9ZSgzMiksbz1cIk1hcFwiO3QuZXhwb3J0cz1lKDQxKShvLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2dldDpmdW5jdGlvbih0KXt2YXIgbj1yLmdldEVudHJ5KGkodGhpcyxvKSx0KTtyZXR1cm4gbiYmbi52fSxzZXQ6ZnVuY3Rpb24odCxuKXtyZXR1cm4gci5kZWYoaSh0aGlzLG8pLDA9PT10PzA6dCxuKX19LHIsITApfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoNzkpLG89TWF0aC5zcXJ0LGM9TWF0aC5hY29zaDtyKHIuUytyLkYqIShjJiY3MTA9PU1hdGguZmxvb3IoYyhOdW1iZXIuTUFYX1ZBTFVFKSkmJmMoMS8wKT09MS8wKSxcIk1hdGhcIix7YWNvc2g6ZnVuY3Rpb24odCl7cmV0dXJuKHQ9K3QpPDE/TmFOOnQ+OTQ5MDYyNjUuNjI0MjUxNTY/TWF0aC5sb2codCkrTWF0aC5MTjI6aSh0LTErbyh0LTEpKm8odCsxKSl9fSl9LGZ1bmN0aW9uKHQsbixlKXtmdW5jdGlvbiByKHQpe3JldHVybiBpc0Zpbml0ZSh0PSt0KSYmMCE9dD90PDA/LXIoLXQpOk1hdGgubG9nKHQrTWF0aC5zcXJ0KHQqdCsxKSk6dH12YXIgaT1lKDEpLG89TWF0aC5hc2luaDtpKGkuUytpLkYqIShvJiYxL28oMCk+MCksXCJNYXRoXCIse2FzaW5oOnJ9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1NYXRoLmF0YW5oO3Ioci5TK3IuRiohKGkmJjEvaSgtMCk8MCksXCJNYXRoXCIse2F0YW5oOmZ1bmN0aW9uKHQpe3JldHVybiAwPT0odD0rdCk/dDpNYXRoLmxvZygoMSt0KS8oMS10KSkvMn19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDU3KTtyKHIuUyxcIk1hdGhcIix7Y2JydDpmdW5jdGlvbih0KXtyZXR1cm4gaSh0PSt0KSpNYXRoLnBvdyhNYXRoLmFicyh0KSwxLzMpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk1hdGhcIix7Y2x6MzI6ZnVuY3Rpb24odCl7cmV0dXJuKHQ+Pj49MCk/MzEtTWF0aC5mbG9vcihNYXRoLmxvZyh0Ky41KSpNYXRoLkxPRzJFKTozMn19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1NYXRoLmV4cDtyKHIuUyxcIk1hdGhcIix7Y29zaDpmdW5jdGlvbih0KXtyZXR1cm4oaSh0PSt0KStpKC10KSkvMn19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDU2KTtyKHIuUytyLkYqKGkhPU1hdGguZXhwbTEpLFwiTWF0aFwiLHtleHBtMTppfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTWF0aFwiLHtmcm91bmQ6ZSg5Nyl9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1NYXRoLmFicztyKHIuUyxcIk1hdGhcIix7aHlwb3Q6ZnVuY3Rpb24odCxuKXtmb3IodmFyIGUscixvPTAsYz0wLHM9YXJndW1lbnRzLmxlbmd0aCx1PTA7YzxzOyllPWkoYXJndW1lbnRzW2MrK10pLHU8ZT8ocj11L2Usbz1vKnIqcisxLHU9ZSk6ZT4wPyhyPWUvdSxvKz1yKnIpOm8rPWU7cmV0dXJuIHU9PT0xLzA/MS8wOnUqTWF0aC5zcXJ0KG8pfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPU1hdGguaW11bDtyKHIuUytyLkYqZSg2KShmdW5jdGlvbigpe3JldHVybiBpKDQyOTQ5NjcyOTUsNSkhPS01fHwyIT1pLmxlbmd0aH0pLFwiTWF0aFwiLHtpbXVsOmZ1bmN0aW9uKHQsbil7dmFyIGU9NjU1MzUscj0rdCxpPStuLG89ZSZyLGM9ZSZpO3JldHVybiAwfG8qYysoKGUmcj4+PjE2KSpjK28qKGUmaT4+PjE2KTw8MTY+Pj4wKX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJNYXRoXCIse2xvZzEwOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmxvZyh0KSpNYXRoLkxPRzEwRX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJNYXRoXCIse2xvZzFwOmUoNzkpfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTWF0aFwiLHtsb2cyOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmxvZyh0KS9NYXRoLkxOMn19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJNYXRoXCIse3NpZ246ZSg1Nyl9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDU2KSxvPU1hdGguZXhwO3Ioci5TK3IuRiplKDYpKGZ1bmN0aW9uKCl7cmV0dXJuIU1hdGguc2luaCgtMmUtMTcpIT0tMmUtMTd9KSxcIk1hdGhcIix7c2luaDpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5hYnModD0rdCk8MT8oaSh0KS1pKC10KSkvMjoobyh0LTEpLW8oLXQtMSkpKihNYXRoLkUvMil9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg1Niksbz1NYXRoLmV4cDtyKHIuUyxcIk1hdGhcIix7dGFuaDpmdW5jdGlvbih0KXt2YXIgbj1pKHQ9K3QpLGU9aSgtdCk7cmV0dXJuIG49PTEvMD8xOmU9PTEvMD8tMToobi1lKS8obyh0KStvKC10KSl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiTWF0aFwiLHt0cnVuYzpmdW5jdGlvbih0KXtyZXR1cm4odD4wP01hdGguZmxvb3I6TWF0aC5jZWlsKSh0KX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJOdW1iZXJcIix7RVBTSUxPTjpNYXRoLnBvdygyLC01Mil9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDMpLmlzRmluaXRlO3Ioci5TLFwiTnVtYmVyXCIse2lzRmluaXRlOmZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0JiZpKHQpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk51bWJlclwiLHtpc0ludGVnZXI6ZSg3NCl9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJOdW1iZXJcIix7aXNOYU46ZnVuY3Rpb24odCl7cmV0dXJuIHQhPXR9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg3NCksbz1NYXRoLmFicztyKHIuUyxcIk51bWJlclwiLHtpc1NhZmVJbnRlZ2VyOmZ1bmN0aW9uKHQpe3JldHVybiBpKHQpJiZvKHQpPD05MDA3MTk5MjU0NzQwOTkxfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk51bWJlclwiLHtNQVhfU0FGRV9JTlRFR0VSOjkwMDcxOTkyNTQ3NDA5OTF9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJOdW1iZXJcIix7TUlOX1NBRkVfSU5URUdFUjotOTAwNzE5OTI1NDc0MDk5MX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUytyLkYsXCJPYmplY3RcIix7YXNzaWduOmUoODEpfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5TLFwiT2JqZWN0XCIse2lzOmUoMTAzKX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKTtyKHIuUyxcIk9iamVjdFwiLHtzZXRQcm90b3R5cGVPZjplKDU4KS5zZXR9KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByLGksbyxjLHM9ZSgyNyksdT1lKDMpLGE9ZSgxMiksZj1lKDQ5KSxsPWUoMSksaD1lKDQpLHY9ZSgxNykscD1lKDI0KSxkPWUoNDMpLHk9ZSg2MSksZz1lKDYzKS5zZXQsbT1lKDk4KSgpLGI9ZSg4MCksXz1lKDEwMSksdz1lKDEwMiksUz1cIlByb21pc2VcIix4PXUuVHlwZUVycm9yLEU9dS5wcm9jZXNzLE89dVtTXSxNPVwicHJvY2Vzc1wiPT1mKEUpLEE9ZnVuY3Rpb24oKXt9LEw9aT1iLmYsaj0hIWZ1bmN0aW9uKCl7dHJ5e3ZhciB0PU8ucmVzb2x2ZSgxKSxuPSh0LmNvbnN0cnVjdG9yPXt9KVtlKDUpKFwic3BlY2llc1wiKV09ZnVuY3Rpb24odCl7dChBLEEpfTtyZXR1cm4oTXx8XCJmdW5jdGlvblwiPT10eXBlb2YgUHJvbWlzZVJlamVjdGlvbkV2ZW50KSYmdC50aGVuKEEpaW5zdGFuY2VvZiBufWNhdGNoKHQpe319KCksaz1mdW5jdGlvbih0KXt2YXIgbjtyZXR1cm4hKCFoKHQpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZihuPXQudGhlbikpJiZufSxUPWZ1bmN0aW9uKHQsbil7aWYoIXQuX24pe3QuX249ITA7dmFyIGU9dC5fYzttKGZ1bmN0aW9uKCl7Zm9yKHZhciByPXQuX3YsaT0xPT10Ll9zLG89MCxjPWZ1bmN0aW9uKG4pe3ZhciBlLG8sYz1pP24ub2s6bi5mYWlsLHM9bi5yZXNvbHZlLHU9bi5yZWplY3QsYT1uLmRvbWFpbjt0cnl7Yz8oaXx8KDI9PXQuX2gmJk4odCksdC5faD0xKSxjPT09ITA/ZT1yOihhJiZhLmVudGVyKCksZT1jKHIpLGEmJmEuZXhpdCgpKSxlPT09bi5wcm9taXNlP3UoeChcIlByb21pc2UtY2hhaW4gY3ljbGVcIikpOihvPWsoZSkpP28uY2FsbChlLHMsdSk6cyhlKSk6dShyKX1jYXRjaCh0KXt1KHQpfX07ZS5sZW5ndGg+bzspYyhlW28rK10pO3QuX2M9W10sdC5fbj0hMSxuJiYhdC5faCYmUCh0KX0pfX0sUD1mdW5jdGlvbih0KXtnLmNhbGwodSxmdW5jdGlvbigpe3ZhciBuLGUscixpPXQuX3Ysbz1GKHQpO2lmKG8mJihuPV8oZnVuY3Rpb24oKXtNP0UuZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLGksdCk6KGU9dS5vbnVuaGFuZGxlZHJlamVjdGlvbik/ZSh7cHJvbWlzZTp0LHJlYXNvbjppfSk6KHI9dS5jb25zb2xlKSYmci5lcnJvciYmci5lcnJvcihcIlVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvblwiLGkpfSksdC5faD1NfHxGKHQpPzI6MSksdC5fYT12b2lkIDAsbyYmbi5lKXRocm93IG4udn0pfSxGPWZ1bmN0aW9uKHQpe2lmKDE9PXQuX2gpcmV0dXJuITE7Zm9yKHZhciBuLGU9dC5fYXx8dC5fYyxyPTA7ZS5sZW5ndGg+cjspaWYobj1lW3IrK10sbi5mYWlsfHwhRihuLnByb21pc2UpKXJldHVybiExO3JldHVybiEwfSxOPWZ1bmN0aW9uKHQpe2cuY2FsbCh1LGZ1bmN0aW9uKCl7dmFyIG47TT9FLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsdCk6KG49dS5vbnJlamVjdGlvbmhhbmRsZWQpJiZuKHtwcm9taXNlOnQscmVhc29uOnQuX3Z9KX0pfSxDPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7bi5fZHx8KG4uX2Q9ITAsbj1uLl93fHxuLG4uX3Y9dCxuLl9zPTIsbi5fYXx8KG4uX2E9bi5fYy5zbGljZSgpKSxUKG4sITApKX0sUj1mdW5jdGlvbih0KXt2YXIgbixlPXRoaXM7aWYoIWUuX2Qpe2UuX2Q9ITAsZT1lLl93fHxlO3RyeXtpZihlPT09dCl0aHJvdyB4KFwiUHJvbWlzZSBjYW4ndCBiZSByZXNvbHZlZCBpdHNlbGZcIik7KG49ayh0KSk/bShmdW5jdGlvbigpe3ZhciByPXtfdzplLF9kOiExfTt0cnl7bi5jYWxsKHQsYShSLHIsMSksYShDLHIsMSkpfWNhdGNoKHQpe0MuY2FsbChyLHQpfX0pOihlLl92PXQsZS5fcz0xLFQoZSwhMSkpfWNhdGNoKHQpe0MuY2FsbCh7X3c6ZSxfZDohMX0sdCl9fX07anx8KE89ZnVuY3Rpb24odCl7cCh0aGlzLE8sUyxcIl9oXCIpLHYodCksci5jYWxsKHRoaXMpO3RyeXt0KGEoUix0aGlzLDEpLGEoQyx0aGlzLDEpKX1jYXRjaCh0KXtDLmNhbGwodGhpcyx0KX19LHI9ZnVuY3Rpb24odCl7dGhpcy5fYz1bXSx0aGlzLl9hPXZvaWQgMCx0aGlzLl9zPTAsdGhpcy5fZD0hMSx0aGlzLl92PXZvaWQgMCx0aGlzLl9oPTAsdGhpcy5fbj0hMX0sci5wcm90b3R5cGU9ZSgyOSkoTy5wcm90b3R5cGUse3RoZW46ZnVuY3Rpb24odCxuKXt2YXIgZT1MKHkodGhpcyxPKSk7cmV0dXJuIGUub2s9XCJmdW5jdGlvblwiIT10eXBlb2YgdHx8dCxlLmZhaWw9XCJmdW5jdGlvblwiPT10eXBlb2YgbiYmbixlLmRvbWFpbj1NP0UuZG9tYWluOnZvaWQgMCx0aGlzLl9jLnB1c2goZSksdGhpcy5fYSYmdGhpcy5fYS5wdXNoKGUpLHRoaXMuX3MmJlQodGhpcywhMSksZS5wcm9taXNlfSxjYXRjaDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx0KX19KSxvPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IHI7dGhpcy5wcm9taXNlPXQsdGhpcy5yZXNvbHZlPWEoUix0LDEpLHRoaXMucmVqZWN0PWEoQyx0LDEpfSxiLmY9TD1mdW5jdGlvbih0KXtyZXR1cm4gdD09PU98fHQ9PT1jP25ldyBvKHQpOmkodCl9KSxsKGwuRytsLlcrbC5GKiFqLHtQcm9taXNlOk99KSxlKDMwKShPLFMpLGUoNDYpKFMpLGM9ZSgzNClbU10sbChsLlMrbC5GKiFqLFMse3JlamVjdDpmdW5jdGlvbih0KXt2YXIgbj1MKHRoaXMpLGU9bi5yZWplY3Q7cmV0dXJuIGUodCksbi5wcm9taXNlfX0pLGwobC5TK2wuRiooc3x8IWopLFMse3Jlc29sdmU6ZnVuY3Rpb24odCl7cmV0dXJuIHcocyYmdGhpcz09PWM/Tzp0aGlzLHQpfX0pLGwobC5TK2wuRiohKGomJmUoNDQpKGZ1bmN0aW9uKHQpe08uYWxsKHQpLmNhdGNoKEEpfSkpLFMse2FsbDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLGU9TChuKSxyPWUucmVzb2x2ZSxpPWUucmVqZWN0LG89XyhmdW5jdGlvbigpe3ZhciBlPVtdLG89MCxjPTE7ZCh0LCExLGZ1bmN0aW9uKHQpe3ZhciBzPW8rKyx1PSExO2UucHVzaCh2b2lkIDApLGMrKyxuLnJlc29sdmUodCkudGhlbihmdW5jdGlvbih0KXt1fHwodT0hMCxlW3NdPXQsLS1jfHxyKGUpKX0saSl9KSwtLWN8fHIoZSl9KTtyZXR1cm4gby5lJiZpKG8udiksZS5wcm9taXNlfSxyYWNlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMsZT1MKG4pLHI9ZS5yZWplY3QsaT1fKGZ1bmN0aW9uKCl7ZCh0LCExLGZ1bmN0aW9uKHQpe24ucmVzb2x2ZSh0KS50aGVuKGUucmVzb2x2ZSxyKX0pfSk7cmV0dXJuIGkuZSYmcihpLnYpLGUucHJvbWlzZX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDE3KSxvPWUoMiksYz0oZSgzKS5SZWZsZWN0fHx7fSkuYXBwbHkscz1GdW5jdGlvbi5hcHBseTtyKHIuUytyLkYqIWUoNikoZnVuY3Rpb24oKXtjKGZ1bmN0aW9uKCl7fSl9KSxcIlJlZmxlY3RcIix7YXBwbHk6ZnVuY3Rpb24odCxuLGUpe3ZhciByPWkodCksdT1vKGUpO3JldHVybiBjP2MocixuLHUpOnMuY2FsbChyLG4sdSl9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgzNiksbz1lKDE3KSxjPWUoMikscz1lKDQpLHU9ZSg2KSxhPWUoOTIpLGY9KGUoMykuUmVmbGVjdHx8e30pLmNvbnN0cnVjdCxsPXUoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiEoZihmdW5jdGlvbigpe30sW10sdClpbnN0YW5jZW9mIHQpfSksaD0hdShmdW5jdGlvbigpe2YoZnVuY3Rpb24oKXt9KX0pO3Ioci5TK3IuRioobHx8aCksXCJSZWZsZWN0XCIse2NvbnN0cnVjdDpmdW5jdGlvbih0LG4pe28odCksYyhuKTt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPDM/dDpvKGFyZ3VtZW50c1syXSk7aWYoaCYmIWwpcmV0dXJuIGYodCxuLGUpO2lmKHQ9PWUpe3N3aXRjaChuLmxlbmd0aCl7Y2FzZSAwOnJldHVybiBuZXcgdDtjYXNlIDE6cmV0dXJuIG5ldyB0KG5bMF0pO2Nhc2UgMjpyZXR1cm4gbmV3IHQoblswXSxuWzFdKTtjYXNlIDM6cmV0dXJuIG5ldyB0KG5bMF0sblsxXSxuWzJdKTtjYXNlIDQ6cmV0dXJuIG5ldyB0KG5bMF0sblsxXSxuWzJdLG5bM10pfXZhciByPVtudWxsXTtyZXR1cm4gci5wdXNoLmFwcGx5KHIsbiksbmV3KGEuYXBwbHkodCxyKSl9dmFyIHU9ZS5wcm90b3R5cGUsdj1pKHModSk/dTpPYmplY3QucHJvdG90eXBlKSxwPUZ1bmN0aW9uLmFwcGx5LmNhbGwodCx2LG4pO3JldHVybiBzKHApP3A6dn19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoNyksaT1lKDEpLG89ZSgyKSxjPWUoNDApO2koaS5TK2kuRiplKDYpKGZ1bmN0aW9uKCl7UmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShyLmYoe30sMSx7dmFsdWU6MX0pLDEse3ZhbHVlOjJ9KX0pLFwiUmVmbGVjdFwiLHtkZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbih0LG4sZSl7byh0KSxuPWMobiwhMCksbyhlKTt0cnl7cmV0dXJuIHIuZih0LG4sZSksITB9Y2F0Y2godCl7cmV0dXJuITF9fX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMTUpLmYsbz1lKDIpO3Ioci5TLFwiUmVmbGVjdFwiLHtkZWxldGVQcm9wZXJ0eTpmdW5jdGlvbih0LG4pe3ZhciBlPWkobyh0KSxuKTtyZXR1cm4hKGUmJiFlLmNvbmZpZ3VyYWJsZSkmJmRlbGV0ZSB0W25dfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxNSksaT1lKDEpLG89ZSgyKTtpKGkuUyxcIlJlZmxlY3RcIix7Z2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOmZ1bmN0aW9uKHQsbil7cmV0dXJuIHIuZihvKHQpLG4pfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMzgpLG89ZSgyKTtyKHIuUyxcIlJlZmxlY3RcIix7Z2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIGkobyh0KSl9fSl9LGZ1bmN0aW9uKHQsbixlKXtmdW5jdGlvbiByKHQsbil7dmFyIGUscyxmPWFyZ3VtZW50cy5sZW5ndGg8Mz90OmFyZ3VtZW50c1syXTtyZXR1cm4gYSh0KT09PWY/dFtuXTooZT1pLmYodCxuKSk/YyhlLFwidmFsdWVcIik/ZS52YWx1ZTp2b2lkIDAhPT1lLmdldD9lLmdldC5jYWxsKGYpOnZvaWQgMDp1KHM9byh0KSk/cihzLG4sZik6dm9pZCAwfXZhciBpPWUoMTUpLG89ZSgzOCksYz1lKDEwKSxzPWUoMSksdT1lKDQpLGE9ZSgyKTtzKHMuUyxcIlJlZmxlY3RcIix7Z2V0OnJ9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJSZWZsZWN0XCIse2hhczpmdW5jdGlvbih0LG4pe3JldHVybiBuIGluIHR9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSgyKSxvPU9iamVjdC5pc0V4dGVuc2libGU7cihyLlMsXCJSZWZsZWN0XCIse2lzRXh0ZW5zaWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gaSh0KSwhb3x8byh0KX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSk7cihyLlMsXCJSZWZsZWN0XCIse293bktleXM6ZSg4NCl9KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDIpLG89T2JqZWN0LnByZXZlbnRFeHRlbnNpb25zO3Ioci5TLFwiUmVmbGVjdFwiLHtwcmV2ZW50RXh0ZW5zaW9uczpmdW5jdGlvbih0KXtpKHQpO3RyeXtyZXR1cm4gbyYmbyh0KSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg1OCk7aSYmcihyLlMsXCJSZWZsZWN0XCIse3NldFByb3RvdHlwZU9mOmZ1bmN0aW9uKHQsbil7aS5jaGVjayh0LG4pO3RyeXtyZXR1cm4gaS5zZXQodCxuKSwhMH1jYXRjaCh0KXtyZXR1cm4hMX19fSl9LGZ1bmN0aW9uKHQsbixlKXtmdW5jdGlvbiByKHQsbixlKXt2YXIgdSxoLHY9YXJndW1lbnRzLmxlbmd0aDw0P3Q6YXJndW1lbnRzWzNdLHA9by5mKGYodCksbik7aWYoIXApe2lmKGwoaD1jKHQpKSlyZXR1cm4gcihoLG4sZSx2KTtwPWEoMCl9cmV0dXJuIHMocCxcInZhbHVlXCIpPyEocC53cml0YWJsZT09PSExfHwhbCh2KSkmJih1PW8uZih2LG4pfHxhKDApLHUudmFsdWU9ZSxpLmYodixuLHUpLCEwKTp2b2lkIDAhPT1wLnNldCYmKHAuc2V0LmNhbGwodixlKSwhMCl9dmFyIGk9ZSg3KSxvPWUoMTUpLGM9ZSgzOCkscz1lKDEwKSx1PWUoMSksYT1lKDE5KSxmPWUoMiksbD1lKDQpO3UodS5TLFwiUmVmbGVjdFwiLHtzZXQ6cn0pfSxmdW5jdGlvbih0LG4sZSl7ZSg5KSYmXCJnXCIhPS8uL2cuZmxhZ3MmJmUoNykuZihSZWdFeHAucHJvdG90eXBlLFwiZmxhZ3NcIix7Y29uZmlndXJhYmxlOiEwLGdldDplKDk0KX0pfSxmdW5jdGlvbih0LG4sZSl7ZSg0MikoXCJtYXRjaFwiLDEsZnVuY3Rpb24odCxuLGUpe3JldHVybltmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KHRoaXMpLGk9dm9pZCAwPT1lP3ZvaWQgMDplW25dO3JldHVybiB2b2lkIDAhPT1pP2kuY2FsbChlLHIpOm5ldyBSZWdFeHAoZSlbbl0oU3RyaW5nKHIpKX0sZV19KX0sZnVuY3Rpb24odCxuLGUpe2UoNDIpKFwicmVwbGFjZVwiLDIsZnVuY3Rpb24odCxuLGUpe3JldHVybltmdW5jdGlvbihyLGkpe1widXNlIHN0cmljdFwiO3ZhciBvPXQodGhpcyksYz12b2lkIDA9PXI/dm9pZCAwOnJbbl07cmV0dXJuIHZvaWQgMCE9PWM/Yy5jYWxsKHIsbyxpKTplLmNhbGwoU3RyaW5nKG8pLHIsaSl9LGVdfSl9LGZ1bmN0aW9uKHQsbixlKXtlKDQyKShcInNlYXJjaFwiLDEsZnVuY3Rpb24odCxuLGUpe3JldHVybltmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj10KHRoaXMpLGk9dm9pZCAwPT1lP3ZvaWQgMDplW25dO3JldHVybiB2b2lkIDAhPT1pP2kuY2FsbChlLHIpOm5ldyBSZWdFeHAoZSlbbl0oU3RyaW5nKHIpKX0sZV19KX0sZnVuY3Rpb24odCxuLGUpe2UoNDIpKFwic3BsaXRcIiwyLGZ1bmN0aW9uKHQsbixyKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1lKDc1KSxvPXIsYz1bXS5wdXNoLHM9XCJzcGxpdFwiLHU9XCJsZW5ndGhcIixhPVwibGFzdEluZGV4XCI7aWYoXCJjXCI9PVwiYWJiY1wiW3NdKC8oYikqLylbMV18fDQhPVwidGVzdFwiW3NdKC8oPzopLywtMSlbdV18fDIhPVwiYWJcIltzXSgvKD86YWIpKi8pW3VdfHw0IT1cIi5cIltzXSgvKC4/KSguPykvKVt1XXx8XCIuXCJbc10oLygpKCkvKVt1XT4xfHxcIlwiW3NdKC8uPy8pW3VdKXt2YXIgZj12b2lkIDA9PT0vKCk/Py8uZXhlYyhcIlwiKVsxXTtyPWZ1bmN0aW9uKHQsbil7dmFyIGU9U3RyaW5nKHRoaXMpO2lmKHZvaWQgMD09PXQmJjA9PT1uKXJldHVybltdO2lmKCFpKHQpKXJldHVybiBvLmNhbGwoZSx0LG4pO3ZhciByLHMsbCxoLHYscD1bXSxkPSh0Lmlnbm9yZUNhc2U/XCJpXCI6XCJcIikrKHQubXVsdGlsaW5lP1wibVwiOlwiXCIpKyh0LnVuaWNvZGU/XCJ1XCI6XCJcIikrKHQuc3RpY2t5P1wieVwiOlwiXCIpLHk9MCxnPXZvaWQgMD09PW4/NDI5NDk2NzI5NTpuPj4+MCxtPW5ldyBSZWdFeHAodC5zb3VyY2UsZCtcImdcIik7Zm9yKGZ8fChyPW5ldyBSZWdFeHAoXCJeXCIrbS5zb3VyY2UrXCIkKD8hXFxcXHMpXCIsZCkpOyhzPW0uZXhlYyhlKSkmJihsPXMuaW5kZXgrc1swXVt1XSwhKGw+eSYmKHAucHVzaChlLnNsaWNlKHkscy5pbmRleCkpLCFmJiZzW3VdPjEmJnNbMF0ucmVwbGFjZShyLGZ1bmN0aW9uKCl7Zm9yKHY9MTt2PGFyZ3VtZW50c1t1XS0yO3YrKyl2b2lkIDA9PT1hcmd1bWVudHNbdl0mJihzW3ZdPXZvaWQgMCl9KSxzW3VdPjEmJnMuaW5kZXg8ZVt1XSYmYy5hcHBseShwLHMuc2xpY2UoMSkpLGg9c1swXVt1XSx5PWwscFt1XT49ZykpKTspbVthXT09PXMuaW5kZXgmJm1bYV0rKztyZXR1cm4geT09PWVbdV0/IWgmJm0udGVzdChcIlwiKXx8cC5wdXNoKFwiXCIpOnAucHVzaChlLnNsaWNlKHkpKSxwW3VdPmc/cC5zbGljZSgwLGcpOnB9fWVsc2VcIjBcIltzXSh2b2lkIDAsMClbdV0mJihyPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHZvaWQgMD09PXQmJjA9PT1uP1tdOm8uY2FsbCh0aGlzLHQsbil9KTtyZXR1cm5bZnVuY3Rpb24oZSxpKXt2YXIgbz10KHRoaXMpLGM9dm9pZCAwPT1lP3ZvaWQgMDplW25dO3JldHVybiB2b2lkIDAhPT1jP2MuY2FsbChlLG8saSk6ci5jYWxsKFN0cmluZyhvKSxlLGkpfSxyXX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSg2OCksaT1lKDMyKSxvPVwiU2V0XCI7dC5leHBvcnRzPWUoNDEpKG8sZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7YWRkOmZ1bmN0aW9uKHQpe3JldHVybiByLmRlZihpKHRoaXMsbyksdD0wPT09dD8wOnQsdCl9fSxyKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDEwNCkoITEpO3Ioci5QLFwiU3RyaW5nXCIse2NvZGVQb2ludEF0OmZ1bmN0aW9uKHQpe3JldHVybiBpKHRoaXMsdCl9fSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSg4KSxvPWUoNjIpLGM9XCJlbmRzV2l0aFwiLHM9XCJcIltjXTtyKHIuUCtyLkYqZSg1MykoYyksXCJTdHJpbmdcIix7ZW5kc1dpdGg6ZnVuY3Rpb24odCl7dmFyIG49byh0aGlzLHQsYyksZT1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxyPWkobi5sZW5ndGgpLHU9dm9pZCAwPT09ZT9yOk1hdGgubWluKGkoZSksciksYT1TdHJpbmcodCk7cmV0dXJuIHM/cy5jYWxsKG4sYSx1KTpuLnNsaWNlKHUtYS5sZW5ndGgsdSk9PT1hfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoMzEpLG89U3RyaW5nLmZyb21DaGFyQ29kZSxjPVN0cmluZy5mcm9tQ29kZVBvaW50O3Ioci5TK3IuRiooISFjJiYxIT1jLmxlbmd0aCksXCJTdHJpbmdcIix7ZnJvbUNvZGVQb2ludDpmdW5jdGlvbih0KXtmb3IodmFyIG4sZT1bXSxyPWFyZ3VtZW50cy5sZW5ndGgsYz0wO3I+Yzspe2lmKG49K2FyZ3VtZW50c1tjKytdLGkobiwxMTE0MTExKSE9PW4pdGhyb3cgUmFuZ2VFcnJvcihuK1wiIGlzIG5vdCBhIHZhbGlkIGNvZGUgcG9pbnRcIik7ZS5wdXNoKG48NjU1MzY/byhuKTpvKCgobi09NjU1MzYpPj4xMCkrNTUyOTYsbiUxMDI0KzU2MzIwKSl9cmV0dXJuIGUuam9pbihcIlwiKX19KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDYyKSxvPVwiaW5jbHVkZXNcIjtyKHIuUCtyLkYqZSg1MykobyksXCJTdHJpbmdcIix7aW5jbHVkZXM6ZnVuY3Rpb24odCl7cmV0dXJuISF+aSh0aGlzLHQsbykuaW5kZXhPZih0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDEzKSxvPWUoOCk7cihyLlMsXCJTdHJpbmdcIix7cmF3OmZ1bmN0aW9uKHQpe2Zvcih2YXIgbj1pKHQucmF3KSxlPW8obi5sZW5ndGgpLHI9YXJndW1lbnRzLmxlbmd0aCxjPVtdLHM9MDtlPnM7KWMucHVzaChTdHJpbmcobltzKytdKSksczxyJiZjLnB1c2goU3RyaW5nKGFyZ3VtZW50c1tzXSkpO3JldHVybiBjLmpvaW4oXCJcIil9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpO3Ioci5QLFwiU3RyaW5nXCIse3JlcGVhdDplKDg2KX0pfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoOCksbz1lKDYyKSxjPVwic3RhcnRzV2l0aFwiLHM9XCJcIltjXTtyKHIuUCtyLkYqZSg1MykoYyksXCJTdHJpbmdcIix7c3RhcnRzV2l0aDpmdW5jdGlvbih0KXt2YXIgbj1vKHRoaXMsdCxjKSxlPWkoTWF0aC5taW4oYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsbi5sZW5ndGgpKSxyPVN0cmluZyh0KTtyZXR1cm4gcz9zLmNhbGwobixyLGUpOm4uc2xpY2UoZSxlK3IubGVuZ3RoKT09PXJ9fSl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDMpLGk9ZSgxMCksbz1lKDkpLGM9ZSgxKSxzPWUoMTYpLHU9ZSgzNSkuS0VZLGE9ZSg2KSxmPWUoNjApLGw9ZSgzMCksaD1lKDIyKSx2PWUoNSkscD1lKDg5KSxkPWUoMTA1KSx5PWUoOTMpLGc9ZSg3MyksbT1lKDIpLGI9ZSgxMyksXz1lKDQwKSx3PWUoMTkpLFM9ZSgzNikseD1lKDEwMCksRT1lKDE1KSxPPWUoNyksTT1lKDI4KSxBPUUuZixMPU8uZixqPXguZixrPXIuU3ltYm9sLFQ9ci5KU09OLFA9VCYmVC5zdHJpbmdpZnksRj1cInByb3RvdHlwZVwiLE49dihcIl9oaWRkZW5cIiksQz12KFwidG9QcmltaXRpdmVcIiksUj17fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxEPWYoXCJzeW1ib2wtcmVnaXN0cnlcIiksST1mKFwic3ltYm9sc1wiKSxXPWYoXCJvcC1zeW1ib2xzXCIpLHo9T2JqZWN0W0ZdLEI9XCJmdW5jdGlvblwiPT10eXBlb2YgayxZPXIuUU9iamVjdCxYPSFZfHwhWVtGXXx8IVlbRl0uZmluZENoaWxkLEc9byYmYShmdW5jdGlvbigpe3JldHVybiA3IT1TKEwoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBMKHRoaXMsXCJhXCIse3ZhbHVlOjd9KS5hfX0pKS5hfSk/ZnVuY3Rpb24odCxuLGUpe3ZhciByPUEoeixuKTtyJiZkZWxldGUgeltuXSxMKHQsbixlKSxyJiZ0IT09eiYmTCh6LG4scil9OkwsVj1mdW5jdGlvbih0KXt2YXIgbj1JW3RdPVMoa1tGXSk7cmV0dXJuIG4uX2s9dCxufSxVPUImJlwic3ltYm9sXCI9PXR5cGVvZiBrLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0fTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGt9LHE9ZnVuY3Rpb24odCxuLGUpe3JldHVybiB0PT09eiYmcShXLG4sZSksbSh0KSxuPV8obiwhMCksbShlKSxpKEksbik/KGUuZW51bWVyYWJsZT8oaSh0LE4pJiZ0W05dW25dJiYodFtOXVtuXT0hMSksZT1TKGUse2VudW1lcmFibGU6dygwLCExKX0pKTooaSh0LE4pfHxMKHQsTix3KDEse30pKSx0W05dW25dPSEwKSxHKHQsbixlKSk6TCh0LG4sZSl9LEg9ZnVuY3Rpb24odCxuKXttKHQpO2Zvcih2YXIgZSxyPXkobj1iKG4pKSxpPTAsbz1yLmxlbmd0aDtvPmk7KXEodCxlPXJbaSsrXSxuW2VdKTtyZXR1cm4gdH0sSz1mdW5jdGlvbih0LG4pe3JldHVybiB2b2lkIDA9PT1uP1ModCk6SChTKHQpLG4pfSxKPWZ1bmN0aW9uKHQpe3ZhciBuPVIuY2FsbCh0aGlzLHQ9Xyh0LCEwKSk7cmV0dXJuISh0aGlzPT09eiYmaShJLHQpJiYhaShXLHQpKSYmKCEobnx8IWkodGhpcyx0KXx8IWkoSSx0KXx8aSh0aGlzLE4pJiZ0aGlzW05dW3RdKXx8bil9LCQ9ZnVuY3Rpb24odCxuKXtpZih0PWIodCksbj1fKG4sITApLHQhPT16fHwhaShJLG4pfHxpKFcsbikpe3ZhciBlPUEodCxuKTtyZXR1cm4hZXx8IWkoSSxuKXx8aSh0LE4pJiZ0W05dW25dfHwoZS5lbnVtZXJhYmxlPSEwKSxlfX0sUT1mdW5jdGlvbih0KXtmb3IodmFyIG4sZT1qKGIodCkpLHI9W10sbz0wO2UubGVuZ3RoPm87KWkoSSxuPWVbbysrXSl8fG49PU58fG49PXV8fHIucHVzaChuKTtyZXR1cm4gcn0sWj1mdW5jdGlvbih0KXtmb3IodmFyIG4sZT10PT09eixyPWooZT9XOmIodCkpLG89W10sYz0wO3IubGVuZ3RoPmM7KSFpKEksbj1yW2MrK10pfHxlJiYhaSh6LG4pfHxvLnB1c2goSVtuXSk7cmV0dXJuIG99O0J8fChrPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIGspdGhyb3cgVHlwZUVycm9yKFwiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIVwiKTt2YXIgdD1oKGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKSxuPWZ1bmN0aW9uKGUpe3RoaXM9PT16JiZuLmNhbGwoVyxlKSxpKHRoaXMsTikmJmkodGhpc1tOXSx0KSYmKHRoaXNbTl1bdF09ITEpLEcodGhpcyx0LHcoMSxlKSl9O3JldHVybiBvJiZYJiZHKHosdCx7Y29uZmlndXJhYmxlOiEwLHNldDpufSksVih0KX0scyhrW0ZdLFwidG9TdHJpbmdcIixmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rfSksRS5mPSQsTy5mPXEsZSgzNykuZj14LmY9USxlKDM5KS5mPUosZSg0NSkuZj1aLG8mJiFlKDI3KSYmcyh6LFwicHJvcGVydHlJc0VudW1lcmFibGVcIixKLCEwKSxwLmY9ZnVuY3Rpb24odCl7cmV0dXJuIFYodih0KSl9KSxjKGMuRytjLlcrYy5GKiFCLHtTeW1ib2w6a30pO2Zvcih2YXIgdHQ9XCJoYXNJbnN0YW5jZSxpc0NvbmNhdFNwcmVhZGFibGUsaXRlcmF0b3IsbWF0Y2gscmVwbGFjZSxzZWFyY2gsc3BlY2llcyxzcGxpdCx0b1ByaW1pdGl2ZSx0b1N0cmluZ1RhZyx1bnNjb3BhYmxlc1wiLnNwbGl0KFwiLFwiKSxudD0wO3R0Lmxlbmd0aD5udDspdih0dFtudCsrXSk7Zm9yKHZhciBldD1NKHYuc3RvcmUpLHJ0PTA7ZXQubGVuZ3RoPnJ0OylkKGV0W3J0KytdKTtjKGMuUytjLkYqIUIsXCJTeW1ib2xcIix7Zm9yOmZ1bmN0aW9uKHQpe3JldHVybiBpKEQsdCs9XCJcIik/RFt0XTpEW3RdPWsodCl9LGtleUZvcjpmdW5jdGlvbih0KXtpZighVSh0KSl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBzeW1ib2whXCIpO2Zvcih2YXIgbiBpbiBEKWlmKERbbl09PT10KXJldHVybiBufSx1c2VTZXR0ZXI6ZnVuY3Rpb24oKXtYPSEwfSx1c2VTaW1wbGU6ZnVuY3Rpb24oKXtYPSExfX0pLGMoYy5TK2MuRiohQixcIk9iamVjdFwiLHtjcmVhdGU6SyxkZWZpbmVQcm9wZXJ0eTpxLGRlZmluZVByb3BlcnRpZXM6SCxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6JCxnZXRPd25Qcm9wZXJ0eU5hbWVzOlEsZ2V0T3duUHJvcGVydHlTeW1ib2xzOlp9KSxUJiZjKGMuUytjLkYqKCFCfHxhKGZ1bmN0aW9uKCl7dmFyIHQ9aygpO3JldHVyblwiW251bGxdXCIhPVAoW3RdKXx8XCJ7fVwiIT1QKHthOnR9KXx8XCJ7fVwiIT1QKE9iamVjdCh0KSl9KSksXCJKU09OXCIse3N0cmluZ2lmeTpmdW5jdGlvbih0KXtpZih2b2lkIDAhPT10JiYhVSh0KSl7Zm9yKHZhciBuLGUscj1bdF0saT0xO2FyZ3VtZW50cy5sZW5ndGg+aTspci5wdXNoKGFyZ3VtZW50c1tpKytdKTtyZXR1cm4gbj1yWzFdLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJihlPW4pLCFlJiZnKG4pfHwobj1mdW5jdGlvbih0LG4pe2lmKGUmJihuPWUuY2FsbCh0aGlzLHQsbikpLCFVKG4pKXJldHVybiBufSksclsxXT1uLFAuYXBwbHkoVCxyKX19fSksa1tGXVtDXXx8ZSgxMSkoa1tGXSxDLGtbRl0udmFsdWVPZiksbChrLFwiU3ltYm9sXCIpLGwoTWF0aCxcIk1hdGhcIiwhMCksbChyLkpTT04sXCJKU09OXCIsITApfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHI9ZSgxKSxpPWUoNjQpLG89ZSg4OCksYz1lKDIpLHM9ZSgzMSksdT1lKDgpLGE9ZSg0KSxmPWUoMykuQXJyYXlCdWZmZXIsbD1lKDYxKSxoPW8uQXJyYXlCdWZmZXIsdj1vLkRhdGFWaWV3LHA9aS5BQlYmJmYuaXNWaWV3LGQ9aC5wcm90b3R5cGUuc2xpY2UseT1pLlZJRVcsZz1cIkFycmF5QnVmZmVyXCI7cihyLkcrci5XK3IuRiooZiE9PWgpLHtBcnJheUJ1ZmZlcjpofSkscihyLlMrci5GKiFpLkNPTlNUUixnLHtpc1ZpZXc6ZnVuY3Rpb24odCl7cmV0dXJuIHAmJnAodCl8fGEodCkmJnkgaW4gdH19KSxyKHIuUCtyLlUrci5GKmUoNikoZnVuY3Rpb24oKXtyZXR1cm4hbmV3IGgoMikuc2xpY2UoMSx2b2lkIDApLmJ5dGVMZW5ndGh9KSxnLHtzbGljZTpmdW5jdGlvbih0LG4pe2lmKHZvaWQgMCE9PWQmJnZvaWQgMD09PW4pcmV0dXJuIGQuY2FsbChjKHRoaXMpLHQpO2Zvcih2YXIgZT1jKHRoaXMpLmJ5dGVMZW5ndGgscj1zKHQsZSksaT1zKHZvaWQgMD09PW4/ZTpuLGUpLG89bmV3KGwodGhpcyxoKSkodShpLXIpKSxhPW5ldyB2KHRoaXMpLGY9bmV3IHYobykscD0wO3I8aTspZi5zZXRVaW50OChwKyssYS5nZXRVaW50OChyKyspKTtyZXR1cm4gb319KSxlKDQ2KShnKX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiRmxvYXQzMlwiLDQsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19KX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiRmxvYXQ2NFwiLDgsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19KX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiSW50MTZcIiwyLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIkludDMyXCIsNCxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJJbnQ4XCIsMSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0pfSxmdW5jdGlvbih0LG4sZSl7ZSgxNCkoXCJVaW50MTZcIiwyLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIlVpbnQzMlwiLDQsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSxyKXtyZXR1cm4gdCh0aGlzLG4sZSxyKX19KX0sZnVuY3Rpb24odCxuLGUpe2UoMTQpKFwiVWludDhcIiwxLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihuLGUscil7cmV0dXJuIHQodGhpcyxuLGUscil9fSl9LGZ1bmN0aW9uKHQsbixlKXtlKDE0KShcIlVpbnQ4XCIsMSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24obixlLHIpe3JldHVybiB0KHRoaXMsbixlLHIpfX0sITApfSxmdW5jdGlvbih0LG4sZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHIsaT1lKDMzKSgwKSxvPWUoMTYpLGM9ZSgzNSkscz1lKDgxKSx1PWUoNjkpLGE9ZSg0KSxmPWUoNiksbD1lKDMyKSxoPVwiV2Vha01hcFwiLHY9Yy5nZXRXZWFrLHA9T2JqZWN0LmlzRXh0ZW5zaWJsZSxkPXUudWZzdG9yZSx5PXt9LGc9ZnVuY3Rpb24odCl7XHJcbnJldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0sbT17Z2V0OmZ1bmN0aW9uKHQpe2lmKGEodCkpe3ZhciBuPXYodCk7cmV0dXJuIG49PT0hMD9kKGwodGhpcyxoKSkuZ2V0KHQpOm4/blt0aGlzLl9pXTp2b2lkIDB9fSxzZXQ6ZnVuY3Rpb24odCxuKXtyZXR1cm4gdS5kZWYobCh0aGlzLGgpLHQsbil9fSxiPXQuZXhwb3J0cz1lKDQxKShoLGcsbSx1LCEwLCEwKTtmKGZ1bmN0aW9uKCl7cmV0dXJuIDchPShuZXcgYikuc2V0KChPYmplY3QuZnJlZXplfHxPYmplY3QpKHkpLDcpLmdldCh5KX0pJiYocj11LmdldENvbnN0cnVjdG9yKGcsaCkscyhyLnByb3RvdHlwZSxtKSxjLk5FRUQ9ITAsaShbXCJkZWxldGVcIixcImhhc1wiLFwiZ2V0XCIsXCJzZXRcIl0sZnVuY3Rpb24odCl7dmFyIG49Yi5wcm90b3R5cGUsZT1uW3RdO28obix0LGZ1bmN0aW9uKG4saSl7aWYoYShuKSYmIXAobikpe3RoaXMuX2Z8fCh0aGlzLl9mPW5ldyByKTt2YXIgbz10aGlzLl9mW3RdKG4saSk7cmV0dXJuXCJzZXRcIj09dD90aGlzOm99cmV0dXJuIGUuY2FsbCh0aGlzLG4saSl9KX0pKX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoNjkpLGk9ZSgzMiksbz1cIldlYWtTZXRcIjtlKDQxKShvLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2FkZDpmdW5jdGlvbih0KXtyZXR1cm4gci5kZWYoaSh0aGlzLG8pLHQsITApfX0sciwhMSwhMCl9LGZ1bmN0aW9uKHQsbixlKXtcInVzZSBzdHJpY3RcIjt2YXIgcj1lKDEpLGk9ZSg0OCkoITApO3Ioci5QLFwiQXJyYXlcIix7aW5jbHVkZXM6ZnVuY3Rpb24odCl7cmV0dXJuIGkodGhpcyx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwKX19KSxlKDIzKShcImluY2x1ZGVzXCIpfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoODMpKCEwKTtyKHIuUyxcIk9iamVjdFwiLHtlbnRyaWVzOmZ1bmN0aW9uKHQpe3JldHVybiBpKHQpfX0pfSxmdW5jdGlvbih0LG4sZSl7dmFyIHI9ZSgxKSxpPWUoODQpLG89ZSgxMyksYz1lKDE1KSxzPWUoNTApO3Ioci5TLFwiT2JqZWN0XCIse2dldE93blByb3BlcnR5RGVzY3JpcHRvcnM6ZnVuY3Rpb24odCl7Zm9yKHZhciBuLGUscj1vKHQpLHU9Yy5mLGE9aShyKSxmPXt9LGw9MDthLmxlbmd0aD5sOyllPXUocixuPWFbbCsrXSksdm9pZCAwIT09ZSYmcyhmLG4sZSk7cmV0dXJuIGZ9fSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDEpLGk9ZSg4MykoITEpO3Ioci5TLFwiT2JqZWN0XCIse3ZhbHVlczpmdW5jdGlvbih0KXtyZXR1cm4gaSh0KX19KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDg1KTtyKHIuUCxcIlN0cmluZ1wiLHtwYWRFbmQ6ZnVuY3Rpb24odCl7cmV0dXJuIGkodGhpcyx0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLCExKX19KX0sZnVuY3Rpb24odCxuLGUpe1widXNlIHN0cmljdFwiO3ZhciByPWUoMSksaT1lKDg1KTtyKHIuUCxcIlN0cmluZ1wiLHtwYWRTdGFydDpmdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLHQsYXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDAsITApfX0pfSxmdW5jdGlvbih0LG4sZSl7Zm9yKHZhciByPWUoNjYpLGk9ZSgyOCksbz1lKDE2KSxjPWUoMykscz1lKDExKSx1PWUoMjYpLGE9ZSg1KSxmPWEoXCJpdGVyYXRvclwiKSxsPWEoXCJ0b1N0cmluZ1RhZ1wiKSxoPXUuQXJyYXksdj17Q1NTUnVsZUxpc3Q6ITAsQ1NTU3R5bGVEZWNsYXJhdGlvbjohMSxDU1NWYWx1ZUxpc3Q6ITEsQ2xpZW50UmVjdExpc3Q6ITEsRE9NUmVjdExpc3Q6ITEsRE9NU3RyaW5nTGlzdDohMSxET01Ub2tlbkxpc3Q6ITAsRGF0YVRyYW5zZmVySXRlbUxpc3Q6ITEsRmlsZUxpc3Q6ITEsSFRNTEFsbENvbGxlY3Rpb246ITEsSFRNTENvbGxlY3Rpb246ITEsSFRNTEZvcm1FbGVtZW50OiExLEhUTUxTZWxlY3RFbGVtZW50OiExLE1lZGlhTGlzdDohMCxNaW1lVHlwZUFycmF5OiExLE5hbWVkTm9kZU1hcDohMSxOb2RlTGlzdDohMCxQYWludFJlcXVlc3RMaXN0OiExLFBsdWdpbjohMSxQbHVnaW5BcnJheTohMSxTVkdMZW5ndGhMaXN0OiExLFNWR051bWJlckxpc3Q6ITEsU1ZHUGF0aFNlZ0xpc3Q6ITEsU1ZHUG9pbnRMaXN0OiExLFNWR1N0cmluZ0xpc3Q6ITEsU1ZHVHJhbnNmb3JtTGlzdDohMSxTb3VyY2VCdWZmZXJMaXN0OiExLFN0eWxlU2hlZXRMaXN0OiEwLFRleHRUcmFja0N1ZUxpc3Q6ITEsVGV4dFRyYWNrTGlzdDohMSxUb3VjaExpc3Q6ITF9LHA9aSh2KSxkPTA7ZDxwLmxlbmd0aDtkKyspe3ZhciB5LGc9cFtkXSxtPXZbZ10sYj1jW2ddLF89YiYmYi5wcm90b3R5cGU7aWYoXyYmKF9bZl18fHMoXyxmLGgpLF9bbF18fHMoXyxsLGcpLHVbZ109aCxtKSlmb3IoeSBpbiByKV9beV18fG8oXyx5LHJbeV0sITApfX0sZnVuY3Rpb24odCxuLGUpe3ZhciByPWUoMSksaT1lKDYzKTtyKHIuRytyLkIse3NldEltbWVkaWF0ZTppLnNldCxjbGVhckltbWVkaWF0ZTppLmNsZWFyfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcj1lKDMpLGk9ZSgxKSxvPXIubmF2aWdhdG9yLGM9W10uc2xpY2Uscz0hIW8mJi9NU0lFIC5cXC4vLnRlc3Qoby51c2VyQWdlbnQpLHU9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4sZSl7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4yLGk9ISFyJiZjLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiB0KHI/ZnVuY3Rpb24oKXsoXCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uOkZ1bmN0aW9uKG4pKS5hcHBseSh0aGlzLGkpfTpuLGUpfX07aShpLkcraS5CK2kuRipzLHtzZXRUaW1lb3V0OnUoci5zZXRUaW1lb3V0KSxzZXRJbnRlcnZhbDp1KHIuc2V0SW50ZXJ2YWwpfSl9LGZ1bmN0aW9uKHQsbil7fSxmdW5jdGlvbih0LG4peyhmdW5jdGlvbihuKXtmdW5jdGlvbiBlKHQsbixlKXtmdW5jdGlvbiBpKG4pe3ZhciBlPWQscj15O3JldHVybiBkPXk9dm9pZCAwLEU9bixtPXQuYXBwbHkocixlKX1mdW5jdGlvbiBvKHQpe3JldHVybiBFPXQsYj1zZXRUaW1lb3V0KGYsbiksTz9pKHQpOm19ZnVuY3Rpb24gdSh0KXt2YXIgZT10LXgscj10LUUsaT1uLWU7cmV0dXJuIE0/dyhpLGctcik6aX1mdW5jdGlvbiBhKHQpe3ZhciBlPXQteCxyPXQtRTtyZXR1cm4gdm9pZCAwPT09eHx8ZT49bnx8ZTwwfHxNJiZyPj1nfWZ1bmN0aW9uIGYoKXt2YXIgdD1TKCk7cmV0dXJuIGEodCk/bCh0KTp2b2lkKGI9c2V0VGltZW91dChmLHUodCkpKX1mdW5jdGlvbiBsKHQpe3JldHVybiBiPXZvaWQgMCxBJiZkP2kodCk6KGQ9eT12b2lkIDAsbSl9ZnVuY3Rpb24gaCgpe3ZvaWQgMCE9PWImJmNsZWFyVGltZW91dChiKSxFPTAsZD14PXk9Yj12b2lkIDB9ZnVuY3Rpb24gdigpe3JldHVybiB2b2lkIDA9PT1iP206bChTKCkpfWZ1bmN0aW9uIHAoKXt2YXIgdD1TKCksZT1hKHQpO2lmKGQ9YXJndW1lbnRzLHk9dGhpcyx4PXQsZSl7aWYodm9pZCAwPT09YilyZXR1cm4gbyh4KTtpZihNKXJldHVybiBiPXNldFRpbWVvdXQoZixuKSxpKHgpfXJldHVybiB2b2lkIDA9PT1iJiYoYj1zZXRUaW1lb3V0KGYsbikpLG19dmFyIGQseSxnLG0sYix4LEU9MCxPPSExLE09ITEsQT0hMDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3Iocyk7cmV0dXJuIG49YyhuKXx8MCxyKGUpJiYoTz0hIWUubGVhZGluZyxNPVwibWF4V2FpdFwiaW4gZSxnPU0/XyhjKGUubWF4V2FpdCl8fDAsbik6ZyxBPVwidHJhaWxpbmdcImluIGU/ISFlLnRyYWlsaW5nOkEpLHAuY2FuY2VsPWgscC5mbHVzaD12LHB9ZnVuY3Rpb24gcih0KXt2YXIgbj10eXBlb2YgdDtyZXR1cm4hIXQmJihcIm9iamVjdFwiPT1ufHxcImZ1bmN0aW9uXCI9PW4pfWZ1bmN0aW9uIGkodCl7cmV0dXJuISF0JiZcIm9iamVjdFwiPT10eXBlb2YgdH1mdW5jdGlvbiBvKHQpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiB0fHxpKHQpJiZiLmNhbGwodCk9PWF9ZnVuY3Rpb24gYyh0KXtpZihcIm51bWJlclwiPT10eXBlb2YgdClyZXR1cm4gdDtpZihvKHQpKXJldHVybiB1O2lmKHIodCkpe3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQudmFsdWVPZj90LnZhbHVlT2YoKTp0O3Q9cihuKT9uK1wiXCI6bn1pZihcInN0cmluZ1wiIT10eXBlb2YgdClyZXR1cm4gMD09PXQ/dDordDt0PXQucmVwbGFjZShmLFwiXCIpO3ZhciBlPWgudGVzdCh0KTtyZXR1cm4gZXx8di50ZXN0KHQpP3AodC5zbGljZSgyKSxlPzI6OCk6bC50ZXN0KHQpP3U6K3R9dmFyIHM9XCJFeHBlY3RlZCBhIGZ1bmN0aW9uXCIsdT1OYU4sYT1cIltvYmplY3QgU3ltYm9sXVwiLGY9L15cXHMrfFxccyskL2csbD0vXlstK10weFswLTlhLWZdKyQvaSxoPS9eMGJbMDFdKyQvaSx2PS9eMG9bMC03XSskL2kscD1wYXJzZUludCxkPVwib2JqZWN0XCI9PXR5cGVvZiBuJiZuJiZuLk9iamVjdD09PU9iamVjdCYmbix5PVwib2JqZWN0XCI9PXR5cGVvZiBzZWxmJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZixnPWR8fHl8fEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSxtPU9iamVjdC5wcm90b3R5cGUsYj1tLnRvU3RyaW5nLF89TWF0aC5tYXgsdz1NYXRoLm1pbixTPWZ1bmN0aW9uKCl7cmV0dXJuIGcuRGF0ZS5ub3coKX07dC5leHBvcnRzPWV9KS5jYWxsKG4sZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9LGZ1bmN0aW9uKHQsbil7IWZ1bmN0aW9uKG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGUodCxuLGUscil7dmFyIG89biYmbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBpP246aSxjPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLHM9bmV3IHYocnx8W10pO3JldHVybiBjLl9pbnZva2U9YSh0LGUscyksY31mdW5jdGlvbiByKHQsbixlKXt0cnl7cmV0dXJue3R5cGU6XCJub3JtYWxcIixhcmc6dC5jYWxsKG4sZSl9fWNhdGNoKHQpe3JldHVybnt0eXBlOlwidGhyb3dcIixhcmc6dH19fWZ1bmN0aW9uIGkoKXt9ZnVuY3Rpb24gbygpe31mdW5jdGlvbiBjKCl7fWZ1bmN0aW9uIHModCl7W1wibmV4dFwiLFwidGhyb3dcIixcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3Rbbl09ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ludm9rZShuLHQpfX0pfWZ1bmN0aW9uIHUodCl7ZnVuY3Rpb24gbihlLGksbyxjKXt2YXIgcz1yKHRbZV0sdCxpKTtpZihcInRocm93XCIhPT1zLnR5cGUpe3ZhciB1PXMuYXJnLGE9dS52YWx1ZTtyZXR1cm4gYSYmXCJvYmplY3RcIj09dHlwZW9mIGEmJm0uY2FsbChhLFwiX19hd2FpdFwiKT9Qcm9taXNlLnJlc29sdmUoYS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHQpe24oXCJuZXh0XCIsdCxvLGMpfSxmdW5jdGlvbih0KXtuKFwidGhyb3dcIix0LG8sYyl9KTpQcm9taXNlLnJlc29sdmUoYSkudGhlbihmdW5jdGlvbih0KXt1LnZhbHVlPXQsbyh1KX0sYyl9YyhzLmFyZyl9ZnVuY3Rpb24gZSh0LGUpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocixpKXtuKHQsZSxyLGkpfSl9cmV0dXJuIGk9aT9pLnRoZW4ocixyKTpyKCl9dmFyIGk7dGhpcy5faW52b2tlPWV9ZnVuY3Rpb24gYSh0LG4sZSl7dmFyIGk9TztyZXR1cm4gZnVuY3Rpb24obyxjKXtpZihpPT09QSl0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO2lmKGk9PT1MKXtpZihcInRocm93XCI9PT1vKXRocm93IGM7cmV0dXJuIGQoKX1mb3IoZS5tZXRob2Q9byxlLmFyZz1jOzspe3ZhciBzPWUuZGVsZWdhdGU7aWYocyl7dmFyIHU9ZihzLGUpO2lmKHUpe2lmKHU9PT1qKWNvbnRpbnVlO3JldHVybiB1fX1pZihcIm5leHRcIj09PWUubWV0aG9kKWUuc2VudD1lLl9zZW50PWUuYXJnO2Vsc2UgaWYoXCJ0aHJvd1wiPT09ZS5tZXRob2Qpe2lmKGk9PT1PKXRocm93IGk9TCxlLmFyZztlLmRpc3BhdGNoRXhjZXB0aW9uKGUuYXJnKX1lbHNlXCJyZXR1cm5cIj09PWUubWV0aG9kJiZlLmFicnVwdChcInJldHVyblwiLGUuYXJnKTtpPUE7dmFyIGE9cih0LG4sZSk7aWYoXCJub3JtYWxcIj09PWEudHlwZSl7aWYoaT1lLmRvbmU/TDpNLGEuYXJnPT09ailjb250aW51ZTtyZXR1cm57dmFsdWU6YS5hcmcsZG9uZTplLmRvbmV9fVwidGhyb3dcIj09PWEudHlwZSYmKGk9TCxlLm1ldGhvZD1cInRocm93XCIsZS5hcmc9YS5hcmcpfX19ZnVuY3Rpb24gZih0LG4pe3ZhciBlPXQuaXRlcmF0b3Jbbi5tZXRob2RdO2lmKGU9PT15KXtpZihuLmRlbGVnYXRlPW51bGwsXCJ0aHJvd1wiPT09bi5tZXRob2Qpe2lmKHQuaXRlcmF0b3IucmV0dXJuJiYobi5tZXRob2Q9XCJyZXR1cm5cIixuLmFyZz15LGYodCxuKSxcInRocm93XCI9PT1uLm1ldGhvZCkpcmV0dXJuIGo7bi5tZXRob2Q9XCJ0aHJvd1wiLG4uYXJnPW5ldyBUeXBlRXJyb3IoXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpfXJldHVybiBqfXZhciBpPXIoZSx0Lml0ZXJhdG9yLG4uYXJnKTtpZihcInRocm93XCI9PT1pLnR5cGUpcmV0dXJuIG4ubWV0aG9kPVwidGhyb3dcIixuLmFyZz1pLmFyZyxuLmRlbGVnYXRlPW51bGwsajt2YXIgbz1pLmFyZztyZXR1cm4gbz9vLmRvbmU/KG5bdC5yZXN1bHROYW1lXT1vLnZhbHVlLG4ubmV4dD10Lm5leHRMb2MsXCJyZXR1cm5cIiE9PW4ubWV0aG9kJiYobi5tZXRob2Q9XCJuZXh0XCIsbi5hcmc9eSksbi5kZWxlZ2F0ZT1udWxsLGopOm86KG4ubWV0aG9kPVwidGhyb3dcIixuLmFyZz1uZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksbi5kZWxlZ2F0ZT1udWxsLGopfWZ1bmN0aW9uIGwodCl7dmFyIG49e3RyeUxvYzp0WzBdfTsxIGluIHQmJihuLmNhdGNoTG9jPXRbMV0pLDIgaW4gdCYmKG4uZmluYWxseUxvYz10WzJdLG4uYWZ0ZXJMb2M9dFszXSksdGhpcy50cnlFbnRyaWVzLnB1c2gobil9ZnVuY3Rpb24gaCh0KXt2YXIgbj10LmNvbXBsZXRpb258fHt9O24udHlwZT1cIm5vcm1hbFwiLGRlbGV0ZSBuLmFyZyx0LmNvbXBsZXRpb249bn1mdW5jdGlvbiB2KHQpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzpcInJvb3RcIn1dLHQuZm9yRWFjaChsLHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIHAodCl7aWYodCl7dmFyIG49dFtfXTtpZihuKXJldHVybiBuLmNhbGwodCk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdC5uZXh0KXJldHVybiB0O2lmKCFpc05hTih0Lmxlbmd0aCkpe3ZhciBlPS0xLHI9ZnVuY3Rpb24gbigpe2Zvcig7KytlPHQubGVuZ3RoOylpZihtLmNhbGwodCxlKSlyZXR1cm4gbi52YWx1ZT10W2VdLG4uZG9uZT0hMSxuO3JldHVybiBuLnZhbHVlPXksbi5kb25lPSEwLG59O3JldHVybiByLm5leHQ9cn19cmV0dXJue25leHQ6ZH19ZnVuY3Rpb24gZCgpe3JldHVybnt2YWx1ZTp5LGRvbmU6ITB9fXZhciB5LGc9T2JqZWN0LnByb3RvdHlwZSxtPWcuaGFzT3duUHJvcGVydHksYj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LF89Yi5pdGVyYXRvcnx8XCJAQGl0ZXJhdG9yXCIsdz1iLmFzeW5jSXRlcmF0b3J8fFwiQEBhc3luY0l0ZXJhdG9yXCIsUz1iLnRvU3RyaW5nVGFnfHxcIkBAdG9TdHJpbmdUYWdcIix4PVwib2JqZWN0XCI9PXR5cGVvZiB0LEU9bi5yZWdlbmVyYXRvclJ1bnRpbWU7aWYoRSlyZXR1cm4gdm9pZCh4JiYodC5leHBvcnRzPUUpKTtFPW4ucmVnZW5lcmF0b3JSdW50aW1lPXg/dC5leHBvcnRzOnt9LEUud3JhcD1lO3ZhciBPPVwic3VzcGVuZGVkU3RhcnRcIixNPVwic3VzcGVuZGVkWWllbGRcIixBPVwiZXhlY3V0aW5nXCIsTD1cImNvbXBsZXRlZFwiLGo9e30saz17fTtrW19dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3ZhciBUPU9iamVjdC5nZXRQcm90b3R5cGVPZixQPVQmJlQoVChwKFtdKSkpO1AmJlAhPT1nJiZtLmNhbGwoUCxfKSYmKGs9UCk7dmFyIEY9Yy5wcm90b3R5cGU9aS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShrKTtvLnByb3RvdHlwZT1GLmNvbnN0cnVjdG9yPWMsYy5jb25zdHJ1Y3Rvcj1vLGNbU109by5kaXNwbGF5TmFtZT1cIkdlbmVyYXRvckZ1bmN0aW9uXCIsRS5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKHQpe3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQuY29uc3RydWN0b3I7cmV0dXJuISFuJiYobj09PW98fFwiR2VuZXJhdG9yRnVuY3Rpb25cIj09PShuLmRpc3BsYXlOYW1lfHxuLm5hbWUpKX0sRS5tYXJrPWZ1bmN0aW9uKHQpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHQsYyk6KHQuX19wcm90b19fPWMsUyBpbiB0fHwodFtTXT1cIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSx0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEYpLHR9LEUuYXdyYXA9ZnVuY3Rpb24odCl7cmV0dXJue19fYXdhaXQ6dH19LHModS5wcm90b3R5cGUpLHUucHJvdG90eXBlW3ddPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LEUuQXN5bmNJdGVyYXRvcj11LEUuYXN5bmM9ZnVuY3Rpb24odCxuLHIsaSl7dmFyIG89bmV3IHUoZSh0LG4scixpKSk7cmV0dXJuIEUuaXNHZW5lcmF0b3JGdW5jdGlvbihuKT9vOm8ubmV4dCgpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9uZT90LnZhbHVlOm8ubmV4dCgpfSl9LHMoRiksRltTXT1cIkdlbmVyYXRvclwiLEZbX109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sRi50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBHZW5lcmF0b3JdXCJ9LEUua2V5cz1mdW5jdGlvbih0KXt2YXIgbj1bXTtmb3IodmFyIGUgaW4gdCluLnB1c2goZSk7cmV0dXJuIG4ucmV2ZXJzZSgpLGZ1bmN0aW9uIGUoKXtmb3IoO24ubGVuZ3RoOyl7dmFyIHI9bi5wb3AoKTtpZihyIGluIHQpcmV0dXJuIGUudmFsdWU9cixlLmRvbmU9ITEsZX1yZXR1cm4gZS5kb25lPSEwLGV9fSxFLnZhbHVlcz1wLHYucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp2LHJlc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLHRoaXMuc2VudD10aGlzLl9zZW50PXksdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD1cIm5leHRcIix0aGlzLmFyZz15LHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKGgpLCF0KWZvcih2YXIgbiBpbiB0aGlzKVwidFwiPT09bi5jaGFyQXQoMCkmJm0uY2FsbCh0aGlzLG4pJiYhaXNOYU4oK24uc2xpY2UoMSkpJiYodGhpc1tuXT15KX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgdD10aGlzLnRyeUVudHJpZXNbMF0sbj10LmNvbXBsZXRpb247aWYoXCJ0aHJvd1wiPT09bi50eXBlKXRocm93IG4uYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4obixyKXtyZXR1cm4gby50eXBlPVwidGhyb3dcIixvLmFyZz10LGUubmV4dD1uLHImJihlLm1ldGhvZD1cIm5leHRcIixlLmFyZz15KSwhIXJ9aWYodGhpcy5kb25lKXRocm93IHQ7Zm9yKHZhciBlPXRoaXMscj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBpPXRoaXMudHJ5RW50cmllc1tyXSxvPWkuY29tcGxldGlvbjtpZihcInJvb3RcIj09PWkudHJ5TG9jKXJldHVybiBuKFwiZW5kXCIpO2lmKGkudHJ5TG9jPD10aGlzLnByZXYpe3ZhciBjPW0uY2FsbChpLFwiY2F0Y2hMb2NcIikscz1tLmNhbGwoaSxcImZpbmFsbHlMb2NcIik7aWYoYyYmcyl7aWYodGhpcy5wcmV2PGkuY2F0Y2hMb2MpcmV0dXJuIG4oaS5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PGkuZmluYWxseUxvYylyZXR1cm4gbihpLmZpbmFsbHlMb2MpfWVsc2UgaWYoYyl7aWYodGhpcy5wcmV2PGkuY2F0Y2hMb2MpcmV0dXJuIG4oaS5jYXRjaExvYywhMCl9ZWxzZXtpZighcyl0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtpZih0aGlzLnByZXY8aS5maW5hbGx5TG9jKXJldHVybiBuKGkuZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbih0LG4pe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLnRyeUxvYzw9dGhpcy5wcmV2JiZtLmNhbGwocixcImZpbmFsbHlMb2NcIikmJnRoaXMucHJldjxyLmZpbmFsbHlMb2Mpe3ZhciBpPXI7YnJlYWt9fWkmJihcImJyZWFrXCI9PT10fHxcImNvbnRpbnVlXCI9PT10KSYmaS50cnlMb2M8PW4mJm48PWkuZmluYWxseUxvYyYmKGk9bnVsbCk7dmFyIG89aT9pLmNvbXBsZXRpb246e307cmV0dXJuIG8udHlwZT10LG8uYXJnPW4saT8odGhpcy5tZXRob2Q9XCJuZXh0XCIsdGhpcy5uZXh0PWkuZmluYWxseUxvYyxqKTp0aGlzLmNvbXBsZXRlKG8pfSxjb21wbGV0ZTpmdW5jdGlvbih0LG4pe2lmKFwidGhyb3dcIj09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm5cImJyZWFrXCI9PT10LnR5cGV8fFwiY29udGludWVcIj09PXQudHlwZT90aGlzLm5leHQ9dC5hcmc6XCJyZXR1cm5cIj09PXQudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPXQuYXJnLHRoaXMubWV0aG9kPVwicmV0dXJuXCIsdGhpcy5uZXh0PVwiZW5kXCIpOlwibm9ybWFsXCI9PT10LnR5cGUmJm4mJih0aGlzLm5leHQ9biksan0sZmluaXNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgbj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7bj49MDstLW4pe3ZhciBlPXRoaXMudHJ5RW50cmllc1tuXTtpZihlLmZpbmFsbHlMb2M9PT10KXJldHVybiB0aGlzLmNvbXBsZXRlKGUuY29tcGxldGlvbixlLmFmdGVyTG9jKSxoKGUpLGp9fSxjYXRjaDpmdW5jdGlvbih0KXtmb3IodmFyIG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgZT10aGlzLnRyeUVudHJpZXNbbl07aWYoZS50cnlMb2M9PT10KXt2YXIgcj1lLmNvbXBsZXRpb247aWYoXCJ0aHJvd1wiPT09ci50eXBlKXt2YXIgaT1yLmFyZztoKGUpfXJldHVybiBpfX10aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIil9LGRlbGVnYXRlWWllbGQ6ZnVuY3Rpb24odCxuLGUpe3JldHVybiB0aGlzLmRlbGVnYXRlPXtpdGVyYXRvcjpwKHQpLHJlc3VsdE5hbWU6bixuZXh0TG9jOmV9LFwibmV4dFwiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz15KSxqfX19KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCl8fEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSl9LGZ1bmN0aW9uKHQsbixlKXshZnVuY3Rpb24obixlKXt0LmV4cG9ydHM9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gcGFyc2VGbG9hdCh0KXx8MH1mdW5jdGlvbiBuKG4pe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZS5yZWR1Y2UoZnVuY3Rpb24oZSxyKXt2YXIgaT1uW1wiYm9yZGVyLVwiK3IrXCItd2lkdGhcIl07cmV0dXJuIGUrdChpKX0sMCl9ZnVuY3Rpb24gZShuKXtmb3IodmFyIGU9W1widG9wXCIsXCJyaWdodFwiLFwiYm90dG9tXCIsXCJsZWZ0XCJdLHI9e30saT0wLG89ZTtpPG8ubGVuZ3RoO2krPTEpe3ZhciBjPW9baV0scz1uW1wicGFkZGluZy1cIitjXTtyW2NdPXQocyl9cmV0dXJuIHJ9ZnVuY3Rpb24gcih0KXt2YXIgbj10LmdldEJCb3goKTtyZXR1cm4gdSgwLDAsbi53aWR0aCxuLmhlaWdodCl9ZnVuY3Rpb24gaShyKXt2YXIgaT1yLmNsaWVudFdpZHRoLGM9ci5jbGllbnRIZWlnaHQ7aWYoIWkmJiFjKXJldHVybiBfO3ZhciBzPWdldENvbXB1dGVkU3R5bGUociksYT1lKHMpLGY9YS5sZWZ0K2EucmlnaHQsbD1hLnRvcCthLmJvdHRvbSxoPXQocy53aWR0aCksdj10KHMuaGVpZ2h0KTtpZihcImJvcmRlci1ib3hcIj09PXMuYm94U2l6aW5nJiYoTWF0aC5yb3VuZChoK2YpIT09aSYmKGgtPW4ocyxcImxlZnRcIixcInJpZ2h0XCIpK2YpLE1hdGgucm91bmQoditsKSE9PWMmJih2LT1uKHMsXCJ0b3BcIixcImJvdHRvbVwiKStsKSksIW8ocikpe3ZhciBwPU1hdGgucm91bmQoaCtmKS1pLGQ9TWF0aC5yb3VuZCh2K2wpLWM7MSE9PU1hdGguYWJzKHApJiYoaC09cCksMSE9PU1hdGguYWJzKGQpJiYodi09ZCl9cmV0dXJuIHUoYS5sZWZ0LGEudG9wLGgsdil9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdD09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudH1mdW5jdGlvbiBjKHQpe3JldHVybiBmP3codCk/cih0KTppKHQpOl99ZnVuY3Rpb24gcyh0KXt2YXIgbj10LngsZT10Lnkscj10LndpZHRoLGk9dC5oZWlnaHQsbz1cInVuZGVmaW5lZFwiIT10eXBlb2YgRE9NUmVjdFJlYWRPbmx5P0RPTVJlY3RSZWFkT25seTpPYmplY3QsYz1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKTtyZXR1cm4gYihjLHt4Om4seTplLHdpZHRoOnIsaGVpZ2h0OmksdG9wOmUscmlnaHQ6bityLGJvdHRvbTppK2UsbGVmdDpufSksY31mdW5jdGlvbiB1KHQsbixlLHIpe3JldHVybnt4OnQseTpuLHdpZHRoOmUsaGVpZ2h0OnJ9fXZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LG4pe3ZhciBlPS0xO3JldHVybiB0LnNvbWUoZnVuY3Rpb24odCxyKXtyZXR1cm4gdFswXT09PW4mJihlPXIsITApfSksZX1yZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgTWFwP01hcDpmdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt0aGlzLl9fZW50cmllc19fPVtdfXZhciBlPXtzaXplOnt9fTtyZXR1cm4gZS5zaXplLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9fZW50cmllc19fLmxlbmd0aH0sbi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKG4pe3ZhciBlPXQodGhpcy5fX2VudHJpZXNfXyxuKSxyPXRoaXMuX19lbnRyaWVzX19bZV07cmV0dXJuIHImJnJbMV19LG4ucHJvdG90eXBlLnNldD1mdW5jdGlvbihuLGUpe3ZhciByPXQodGhpcy5fX2VudHJpZXNfXyxuKTt+cj90aGlzLl9fZW50cmllc19fW3JdWzFdPWU6dGhpcy5fX2VudHJpZXNfXy5wdXNoKFtuLGVdKX0sbi5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKG4pe3ZhciBlPXRoaXMuX19lbnRyaWVzX18scj10KGUsbik7fnImJmUuc3BsaWNlKHIsMSl9LG4ucHJvdG90eXBlLmhhcz1mdW5jdGlvbihuKXtyZXR1cm4hIX50KHRoaXMuX19lbnRyaWVzX18sbil9LG4ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2VudHJpZXNfXy5zcGxpY2UoMCl9LG4ucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCxuKXt2b2lkIDA9PT1uJiYobj1udWxsKTtmb3IodmFyIGU9MCxyPXRoaXMuX19lbnRyaWVzX187ZTxyLmxlbmd0aDtlKz0xKXt2YXIgaT1yW2VdO3QuY2FsbChuLGlbMV0saVswXSl9fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhuLnByb3RvdHlwZSxlKSxufSgpfSgpLGY9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50JiZ3aW5kb3cuZG9jdW1lbnQ9PT1kb2N1bWVudCxsPWZ1bmN0aW9uKCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lP3JlcXVlc3RBbmltYXRpb25GcmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiB0KERhdGUubm93KCkpfSwxZTMvNjApfX0oKSxoPTIsdj1mdW5jdGlvbih0LG4pe2Z1bmN0aW9uIGUoKXtvJiYobz0hMSx0KCkpLGMmJmkoKX1mdW5jdGlvbiByKCl7bChlKX1mdW5jdGlvbiBpKCl7dmFyIHQ9RGF0ZS5ub3coKTtpZihvKXtpZih0LXM8aClyZXR1cm47Yz0hMH1lbHNlIG89ITAsYz0hMSxzZXRUaW1lb3V0KHIsbik7cz10fXZhciBvPSExLGM9ITEscz0wO3JldHVybiBpfSxwPTIwLGQ9W1widG9wXCIsXCJyaWdodFwiLFwiYm90dG9tXCIsXCJsZWZ0XCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCIsXCJzaXplXCIsXCJ3ZWlnaHRcIl0seT1cInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYvVHJpZGVudFxcLy4qcnY6MTEvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksZz1cInVuZGVmaW5lZFwiIT10eXBlb2YgTXV0YXRpb25PYnNlcnZlciYmIXksbT1mdW5jdGlvbigpe3RoaXMuY29ubmVjdGVkXz0hMSx0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfPSExLHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfPW51bGwsdGhpcy5vYnNlcnZlcnNfPVtdLHRoaXMub25UcmFuc2l0aW9uRW5kXz10aGlzLm9uVHJhbnNpdGlvbkVuZF8uYmluZCh0aGlzKSx0aGlzLnJlZnJlc2g9dih0aGlzLnJlZnJlc2guYmluZCh0aGlzKSxwKX07bS5wcm90b3R5cGUuYWRkT2JzZXJ2ZXI9ZnVuY3Rpb24odCl7fnRoaXMub2JzZXJ2ZXJzXy5pbmRleE9mKHQpfHx0aGlzLm9ic2VydmVyc18ucHVzaCh0KSx0aGlzLmNvbm5lY3RlZF98fHRoaXMuY29ubmVjdF8oKX0sbS5wcm90b3R5cGUucmVtb3ZlT2JzZXJ2ZXI9ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5vYnNlcnZlcnNfLGU9bi5pbmRleE9mKHQpO35lJiZuLnNwbGljZShlLDEpLCFuLmxlbmd0aCYmdGhpcy5jb25uZWN0ZWRfJiZ0aGlzLmRpc2Nvbm5lY3RfKCl9LG0ucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnVwZGF0ZU9ic2VydmVyc18oKTt0JiZ0aGlzLnJlZnJlc2goKX0sbS5wcm90b3R5cGUudXBkYXRlT2JzZXJ2ZXJzXz1mdW5jdGlvbigpe3ZhciB0PXRoaXMub2JzZXJ2ZXJzXy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2F0aGVyQWN0aXZlKCksdC5oYXNBY3RpdmUoKX0pO3JldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuYnJvYWRjYXN0QWN0aXZlKCl9KSx0Lmxlbmd0aD4wfSxtLnByb3RvdHlwZS5jb25uZWN0Xz1mdW5jdGlvbigpe2YmJiF0aGlzLmNvbm5lY3RlZF8mJihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLHRoaXMub25UcmFuc2l0aW9uRW5kXyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLnJlZnJlc2gpLGc/KHRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfPW5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMucmVmcmVzaCksdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8ub2JzZXJ2ZShkb2N1bWVudCx7YXR0cmlidXRlczohMCxjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMCxzdWJ0cmVlOiEwfSkpOihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NU3VidHJlZU1vZGlmaWVkXCIsdGhpcy5yZWZyZXNoKSx0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfPSEwKSx0aGlzLmNvbm5lY3RlZF89ITApfSxtLnByb3RvdHlwZS5kaXNjb25uZWN0Xz1mdW5jdGlvbigpe2YmJnRoaXMuY29ubmVjdGVkXyYmKGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFuc2l0aW9uZW5kXCIsdGhpcy5vblRyYW5zaXRpb25FbmRfKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMucmVmcmVzaCksdGhpcy5tdXRhdGlvbnNPYnNlcnZlcl8mJnRoaXMubXV0YXRpb25zT2JzZXJ2ZXJfLmRpc2Nvbm5lY3QoKSx0aGlzLm11dGF0aW9uRXZlbnRzQWRkZWRfJiZkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NU3VidHJlZU1vZGlmaWVkXCIsdGhpcy5yZWZyZXNoKSx0aGlzLm11dGF0aW9uc09ic2VydmVyXz1udWxsLHRoaXMubXV0YXRpb25FdmVudHNBZGRlZF89ITEsdGhpcy5jb25uZWN0ZWRfPSExKX0sbS5wcm90b3R5cGUub25UcmFuc2l0aW9uRW5kXz1mdW5jdGlvbih0KXt2YXIgbj10LnByb3BlcnR5TmFtZSxlPWQuc29tZShmdW5jdGlvbih0KXtyZXR1cm4hIX5uLmluZGV4T2YodCl9KTtlJiZ0aGlzLnJlZnJlc2goKX0sbS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmluc3RhbmNlX3x8KHRoaXMuaW5zdGFuY2VfPW5ldyBtKSx0aGlzLmluc3RhbmNlX30sbS5pbnN0YW5jZV89bnVsbDt2YXIgYj1mdW5jdGlvbih0LG4pe2Zvcih2YXIgZT0wLHI9T2JqZWN0LmtleXMobik7ZTxyLmxlbmd0aDtlKz0xKXt2YXIgaT1yW2VdO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkse3ZhbHVlOm5baV0sZW51bWVyYWJsZTohMSx3cml0YWJsZTohMSxjb25maWd1cmFibGU6ITB9KX1yZXR1cm4gdH0sXz11KDAsMCwwLDApLHc9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgU1ZHR3JhcGhpY3NFbGVtZW50P2Z1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgU1ZHR3JhcGhpY3NFbGVtZW50fTpmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuZ2V0QkJveH19KCksUz1mdW5jdGlvbih0KXt0aGlzLmJyb2FkY2FzdFdpZHRoPTAsdGhpcy5icm9hZGNhc3RIZWlnaHQ9MCx0aGlzLmNvbnRlbnRSZWN0Xz11KDAsMCwwLDApLHRoaXMudGFyZ2V0PXR9O1MucHJvdG90eXBlLmlzQWN0aXZlPWZ1bmN0aW9uKCl7dmFyIHQ9Yyh0aGlzLnRhcmdldCk7cmV0dXJuIHRoaXMuY29udGVudFJlY3RfPXQsdC53aWR0aCE9PXRoaXMuYnJvYWRjYXN0V2lkdGh8fHQuaGVpZ2h0IT09dGhpcy5icm9hZGNhc3RIZWlnaHR9LFMucHJvdG90eXBlLmJyb2FkY2FzdFJlY3Q9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbnRlbnRSZWN0XztyZXR1cm4gdGhpcy5icm9hZGNhc3RXaWR0aD10LndpZHRoLHRoaXMuYnJvYWRjYXN0SGVpZ2h0PXQuaGVpZ2h0LHR9O3ZhciB4PWZ1bmN0aW9uKHQsbil7dmFyIGU9cyhuKTtiKHRoaXMse3RhcmdldDp0LGNvbnRlbnRSZWN0OmV9KX0sRT1mdW5jdGlvbih0LG4sZSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGNhbGxiYWNrIHByb3ZpZGVkIGFzIHBhcmFtZXRlciAxIGlzIG5vdCBhIGZ1bmN0aW9uLlwiKTt0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc189W10sdGhpcy5vYnNlcnZhdGlvbnNfPW5ldyBhLHRoaXMuY2FsbGJhY2tfPXQsdGhpcy5jb250cm9sbGVyXz1uLHRoaXMuY2FsbGJhY2tDdHhfPWV9O0UucHJvdG90eXBlLm9ic2VydmU9ZnVuY3Rpb24odCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IFR5cGVFcnJvcihcIjEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC5cIik7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIEVsZW1lbnQmJkVsZW1lbnQgaW5zdGFuY2VvZiBPYmplY3Qpe2lmKCEodCBpbnN0YW5jZW9mIEVsZW1lbnQpKXRocm93IG5ldyBUeXBlRXJyb3IoJ3BhcmFtZXRlciAxIGlzIG5vdCBvZiB0eXBlIFwiRWxlbWVudFwiLicpO3ZhciBuPXRoaXMub2JzZXJ2YXRpb25zXztuLmhhcyh0KXx8KG4uc2V0KHQsbmV3IFModCkpLHRoaXMuY29udHJvbGxlcl8uYWRkT2JzZXJ2ZXIodGhpcyksdGhpcy5jb250cm9sbGVyXy5yZWZyZXNoKCkpfX0sRS5wcm90b3R5cGUudW5vYnNlcnZlPWZ1bmN0aW9uKHQpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBUeXBlRXJyb3IoXCIxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAwIHByZXNlbnQuXCIpO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBFbGVtZW50JiZFbGVtZW50IGluc3RhbmNlb2YgT2JqZWN0KXtpZighKHQgaW5zdGFuY2VvZiBFbGVtZW50KSl0aHJvdyBuZXcgVHlwZUVycm9yKCdwYXJhbWV0ZXIgMSBpcyBub3Qgb2YgdHlwZSBcIkVsZW1lbnRcIi4nKTt2YXIgbj10aGlzLm9ic2VydmF0aW9uc187bi5oYXModCkmJihuLmRlbGV0ZSh0KSxuLnNpemV8fHRoaXMuY29udHJvbGxlcl8ucmVtb3ZlT2JzZXJ2ZXIodGhpcykpfX0sRS5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3RoaXMuY2xlYXJBY3RpdmUoKSx0aGlzLm9ic2VydmF0aW9uc18uY2xlYXIoKSx0aGlzLmNvbnRyb2xsZXJfLnJlbW92ZU9ic2VydmVyKHRoaXMpfSxFLnByb3RvdHlwZS5nYXRoZXJBY3RpdmU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuY2xlYXJBY3RpdmUoKSx0aGlzLm9ic2VydmF0aW9uc18uZm9yRWFjaChmdW5jdGlvbihuKXtuLmlzQWN0aXZlKCkmJnQuYWN0aXZlT2JzZXJ2YXRpb25zXy5wdXNoKG4pfSl9LEUucHJvdG90eXBlLmJyb2FkY2FzdEFjdGl2ZT1mdW5jdGlvbigpe2lmKHRoaXMuaGFzQWN0aXZlKCkpe3ZhciB0PXRoaXMuY2FsbGJhY2tDdHhfLG49dGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IHgodC50YXJnZXQsdC5icm9hZGNhc3RSZWN0KCkpfSk7dGhpcy5jYWxsYmFja18uY2FsbCh0LG4sdCksdGhpcy5jbGVhckFjdGl2ZSgpfX0sRS5wcm90b3R5cGUuY2xlYXJBY3RpdmU9ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZU9ic2VydmF0aW9uc18uc3BsaWNlKDApfSxFLnByb3RvdHlwZS5oYXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmVPYnNlcnZhdGlvbnNfLmxlbmd0aD4wfTt2YXIgTz1cInVuZGVmaW5lZFwiIT10eXBlb2YgV2Vha01hcD9uZXcgV2Vha01hcDpuZXcgYSxNPWZ1bmN0aW9uKHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIE0pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7aWYoIWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IFR5cGVFcnJvcihcIjEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5IDAgcHJlc2VudC5cIik7dmFyIG49bS5nZXRJbnN0YW5jZSgpLGU9bmV3IEUodCxuLHRoaXMpO08uc2V0KHRoaXMsZSl9O1tcIm9ic2VydmVcIixcInVub2JzZXJ2ZVwiLFwiZGlzY29ubmVjdFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe00ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuKG49Ty5nZXQodGhpcykpW3RdLmFwcGx5KG4sYXJndW1lbnRzKTt2YXIgbn19KTt2YXIgQT1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZXNpemVPYnNlcnZlcj9SZXNpemVPYnNlcnZlcjpNfSgpO3JldHVybiBBfSl9LGZ1bmN0aW9uKHQsbixlKXt2YXIgcixpLG87LyohIHNjcm9sbGJhcldpZHRoLmpzIHYwLjEuMCB8IGZlbGl4ZXh0ZXIgfCBNSVQgfCBodHRwczovL2dpdGh1Yi5jb20vZmVsaXhleHRlci9zY3JvbGxiYXJXaWR0aCAqL1xyXG4hZnVuY3Rpb24oZSxjKXtpPVtdLHI9YyxvPVwiZnVuY3Rpb25cIj09dHlwZW9mIHI/ci5hcHBseShuLGkpOnIsISh2b2lkIDAhPT1vJiYodC5leHBvcnRzPW8pKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoKXt2YXIgdCxuPWRvY3VtZW50LmJvZHksZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHI9ZS5zdHlsZTtyZXR1cm4gci5wb3NpdGlvbj1cImFic29sdXRlXCIsci50b3A9ci5sZWZ0PVwiLTk5OTlweFwiLHIud2lkdGg9ci5oZWlnaHQ9XCIxMDBweFwiLHIub3ZlcmZsb3c9XCJzY3JvbGxcIixuLmFwcGVuZENoaWxkKGUpLHQ9ZS5vZmZzZXRXaWR0aC1lLmNsaWVudFdpZHRoLG4ucmVtb3ZlQ2hpbGQoZSksdH1yZXR1cm4gdH0pfV0pfSk7IiwiLyoqXHJcbiAqIE93bCBDYXJvdXNlbCB2Mi4yLjFcclxuICogQ29weXJpZ2h0IDIwMTMtMjAxNyBEYXZpZCBEZXV0c2NoXHJcbiAqIExpY2Vuc2VkIHVuZGVyICAoKVxyXG4gKi9cclxuLyoqXHJcbiAqIE93bCBjYXJvdXNlbFxyXG4gKiBAdmVyc2lvbiAyLjEuNlxyXG4gKiBAYXV0aG9yIEJhcnRvc3ogV29qY2llY2hvd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqIEB0b2RvIExhenkgTG9hZCBJY29uXHJcbiAqIEB0b2RvIHByZXZlbnQgYW5pbWF0aW9uZW5kIGJ1YmxpbmdcclxuICogQHRvZG8gaXRlbXNTY2FsZVVwXHJcbiAqIEB0b2RvIFRlc3QgWmVwdG9cclxuICogQHRvZG8gc3RhZ2VQYWRkaW5nIGNhbGN1bGF0ZSB3cm9uZyBhY3RpdmUgY2xhc3Nlc1xyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyBhIGNhcm91c2VsLlxyXG5cdCAqIEBjbGFzcyBUaGUgT3dsIENhcm91c2VsLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fGpRdWVyeX0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGNyZWF0ZSB0aGUgY2Fyb3VzZWwgZm9yLlxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBUaGUgb3B0aW9uc1xyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIE93bChlbGVtZW50LCBvcHRpb25zKSB7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDdXJyZW50IHNldHRpbmdzIGZvciB0aGUgY2Fyb3VzZWwuXHJcblx0XHQgKiBAcHVibGljXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ3VycmVudCBvcHRpb25zIHNldCBieSB0aGUgY2FsbGVyIGluY2x1ZGluZyBkZWZhdWx0cy5cclxuXHRcdCAqIEBwdWJsaWNcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIE93bC5EZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBQbHVnaW4gZWxlbWVudC5cclxuXHRcdCAqIEBwdWJsaWNcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBQcm94aWVkIGV2ZW50IGhhbmRsZXJzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYW5kbGVycyA9IHt9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmZXJlbmNlcyB0byB0aGUgcnVubmluZyBwbHVnaW5zIG9mIHRoaXMgY2Fyb3VzZWwuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3BsdWdpbnMgPSB7fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEN1cnJlbnRseSBzdXBwcmVzc2VkIGV2ZW50cyB0byBwcmV2ZW50IHRoZW0gZnJvbSBiZWVpbmcgcmV0cmlnZ2VyZWQuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3N1cHJlc3MgPSB7fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFic29sdXRlIGN1cnJlbnQgcG9zaXRpb24uXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2N1cnJlbnQgPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQW5pbWF0aW9uIHNwZWVkIGluIG1pbGxpc2Vjb25kcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fc3BlZWQgPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ29vcmRpbmF0ZXMgb2YgYWxsIGl0ZW1zIGluIHBpeGVsLlxyXG5cdFx0ICogQHRvZG8gVGhlIG5hbWUgb2YgdGhpcyBtZW1iZXIgaXMgbWlzc2xlYWRpbmcuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2Nvb3JkaW5hdGVzID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDdXJyZW50IGJyZWFrcG9pbnQuXHJcblx0XHQgKiBAdG9kbyBSZWFsIG1lZGlhIHF1ZXJpZXMgd291bGQgYmUgbmljZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fYnJlYWtwb2ludCA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDdXJyZW50IHdpZHRoIG9mIHRoZSBwbHVnaW4gZWxlbWVudC5cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fd2lkdGggPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIHJlYWwgaXRlbXMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2l0ZW1zID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgY2xvbmVkIGl0ZW1zLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jbG9uZXMgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIE1lcmdlIHZhbHVlcyBvZiBhbGwgaXRlbXMuXHJcblx0XHQgKiBAdG9kbyBNYXliZSB0aGlzIGNvdWxkIGJlIHBhcnQgb2YgYSBwbHVnaW4uXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX21lcmdlcnMgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFdpZHRocyBvZiBhbGwgaXRlbXMuXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3dpZHRocyA9IFtdO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogSW52YWxpZGF0ZWQgcGFydHMgd2l0aGluIHRoZSB1cGRhdGUgcHJvY2Vzcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faW52YWxpZGF0ZWQgPSB7fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIE9yZGVyZWQgbGlzdCBvZiB3b3JrZXJzIGZvciB0aGUgdXBkYXRlIHByb2Nlc3MuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3BpcGUgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEN1cnJlbnQgc3RhdGUgaW5mb3JtYXRpb24gZm9yIHRoZSBkcmFnIG9wZXJhdGlvbi5cclxuXHRcdCAqIEB0b2RvICMyNjFcclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fZHJhZyA9IHtcclxuXHRcdFx0dGltZTogbnVsbCxcclxuXHRcdFx0dGFyZ2V0OiBudWxsLFxyXG5cdFx0XHRwb2ludGVyOiBudWxsLFxyXG5cdFx0XHRzdGFnZToge1xyXG5cdFx0XHRcdHN0YXJ0OiBudWxsLFxyXG5cdFx0XHRcdGN1cnJlbnQ6IG51bGxcclxuXHRcdFx0fSxcclxuXHRcdFx0ZGlyZWN0aW9uOiBudWxsXHJcblx0XHR9O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQ3VycmVudCBzdGF0ZSBpbmZvcm1hdGlvbiBhbmQgdGhlaXIgdGFncy5cclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3N0YXRlcyA9IHtcclxuXHRcdFx0Y3VycmVudDoge30sXHJcblx0XHRcdHRhZ3M6IHtcclxuXHRcdFx0XHQnaW5pdGlhbGl6aW5nJzogWyAnYnVzeScgXSxcclxuXHRcdFx0XHQnYW5pbWF0aW5nJzogWyAnYnVzeScgXSxcclxuXHRcdFx0XHQnZHJhZ2dpbmcnOiBbICdpbnRlcmFjdGluZycgXVxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdCQuZWFjaChbICdvblJlc2l6ZScsICdvblRocm90dGxlZFJlc2l6ZScgXSwgJC5wcm94eShmdW5jdGlvbihpLCBoYW5kbGVyKSB7XHJcblx0XHRcdHRoaXMuX2hhbmRsZXJzW2hhbmRsZXJdID0gJC5wcm94eSh0aGlzW2hhbmRsZXJdLCB0aGlzKTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHQkLmVhY2goT3dsLlBsdWdpbnMsICQucHJveHkoZnVuY3Rpb24oa2V5LCBwbHVnaW4pIHtcclxuXHRcdFx0dGhpcy5fcGx1Z2luc1trZXkuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBrZXkuc2xpY2UoMSldXHJcblx0XHRcdFx0PSBuZXcgcGx1Z2luKHRoaXMpO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdCQuZWFjaChPd2wuV29ya2VycywgJC5wcm94eShmdW5jdGlvbihwcmlvcml0eSwgd29ya2VyKSB7XHJcblx0XHRcdHRoaXMuX3BpcGUucHVzaCh7XHJcblx0XHRcdFx0J2ZpbHRlcic6IHdvcmtlci5maWx0ZXIsXHJcblx0XHRcdFx0J3J1bic6ICQucHJveHkod29ya2VyLnJ1biwgdGhpcylcclxuXHRcdFx0fSk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5zZXR1cCgpO1xyXG5cdFx0dGhpcy5pbml0aWFsaXplKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBjYXJvdXNlbC5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0T3dsLkRlZmF1bHRzID0ge1xyXG5cdFx0aXRlbXM6IDMsXHJcblx0XHRsb29wOiBmYWxzZSxcclxuXHRcdGNlbnRlcjogZmFsc2UsXHJcblx0XHRyZXdpbmQ6IGZhbHNlLFxyXG5cclxuXHRcdG1vdXNlRHJhZzogdHJ1ZSxcclxuXHRcdHRvdWNoRHJhZzogdHJ1ZSxcclxuXHRcdHB1bGxEcmFnOiB0cnVlLFxyXG5cdFx0ZnJlZURyYWc6IGZhbHNlLFxyXG5cclxuXHRcdG1hcmdpbjogMCxcclxuXHRcdHN0YWdlUGFkZGluZzogMCxcclxuXHJcblx0XHRtZXJnZTogZmFsc2UsXHJcblx0XHRtZXJnZUZpdDogdHJ1ZSxcclxuXHRcdGF1dG9XaWR0aDogZmFsc2UsXHJcblxyXG5cdFx0c3RhcnRQb3NpdGlvbjogMCxcclxuXHRcdHJ0bDogZmFsc2UsXHJcblxyXG5cdFx0c21hcnRTcGVlZDogMjUwLFxyXG5cdFx0Zmx1aWRTcGVlZDogZmFsc2UsXHJcblx0XHRkcmFnRW5kU3BlZWQ6IGZhbHNlLFxyXG5cclxuXHRcdHJlc3BvbnNpdmU6IHt9LFxyXG5cdFx0cmVzcG9uc2l2ZVJlZnJlc2hSYXRlOiAyMDAsXHJcblx0XHRyZXNwb25zaXZlQmFzZUVsZW1lbnQ6IHdpbmRvdyxcclxuXHJcblx0XHRmYWxsYmFja0Vhc2luZzogJ3N3aW5nJyxcclxuXHJcblx0XHRpbmZvOiBmYWxzZSxcclxuXHJcblx0XHRuZXN0ZWRJdGVtU2VsZWN0b3I6IGZhbHNlLFxyXG5cdFx0aXRlbUVsZW1lbnQ6ICdkaXYnLFxyXG5cdFx0c3RhZ2VFbGVtZW50OiAnZGl2JyxcclxuXHJcblx0XHRyZWZyZXNoQ2xhc3M6ICdvd2wtcmVmcmVzaCcsXHJcblx0XHRsb2FkZWRDbGFzczogJ293bC1sb2FkZWQnLFxyXG5cdFx0bG9hZGluZ0NsYXNzOiAnb3dsLWxvYWRpbmcnLFxyXG5cdFx0cnRsQ2xhc3M6ICdvd2wtcnRsJyxcclxuXHRcdHJlc3BvbnNpdmVDbGFzczogJ293bC1yZXNwb25zaXZlJyxcclxuXHRcdGRyYWdDbGFzczogJ293bC1kcmFnJyxcclxuXHRcdGl0ZW1DbGFzczogJ293bC1pdGVtJyxcclxuXHRcdHN0YWdlQ2xhc3M6ICdvd2wtc3RhZ2UnLFxyXG5cdFx0c3RhZ2VPdXRlckNsYXNzOiAnb3dsLXN0YWdlLW91dGVyJyxcclxuXHRcdGdyYWJDbGFzczogJ293bC1ncmFiJ1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEVudW1lcmF0aW9uIGZvciB3aWR0aC5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHJlYWRvbmx5XHJcblx0ICogQGVudW0ge1N0cmluZ31cclxuXHQgKi9cclxuXHRPd2wuV2lkdGggPSB7XHJcblx0XHREZWZhdWx0OiAnZGVmYXVsdCcsXHJcblx0XHRJbm5lcjogJ2lubmVyJyxcclxuXHRcdE91dGVyOiAnb3V0ZXInXHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRW51bWVyYXRpb24gZm9yIHR5cGVzLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcmVhZG9ubHlcclxuXHQgKiBAZW51bSB7U3RyaW5nfVxyXG5cdCAqL1xyXG5cdE93bC5UeXBlID0ge1xyXG5cdFx0RXZlbnQ6ICdldmVudCcsXHJcblx0XHRTdGF0ZTogJ3N0YXRlJ1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIENvbnRhaW5zIGFsbCByZWdpc3RlcmVkIHBsdWdpbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdE93bC5QbHVnaW5zID0ge307XHJcblxyXG5cdC8qKlxyXG5cdCAqIExpc3Qgb2Ygd29ya2VycyBpbnZvbHZlZCBpbiB0aGUgdXBkYXRlIHByb2Nlc3MuXHJcblx0ICovXHJcblx0T3dsLldvcmtlcnMgPSBbIHtcclxuXHRcdGZpbHRlcjogWyAnd2lkdGgnLCAnc2V0dGluZ3MnIF0sXHJcblx0XHRydW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl93aWR0aCA9IHRoaXMuJGVsZW1lbnQud2lkdGgoKTtcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbihjYWNoZSkge1xyXG5cdFx0XHRjYWNoZS5jdXJyZW50ID0gdGhpcy5faXRlbXMgJiYgdGhpcy5faXRlbXNbdGhpcy5yZWxhdGl2ZSh0aGlzLl9jdXJyZW50KV07XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuJHN0YWdlLmNoaWxkcmVuKCcuY2xvbmVkJykucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oY2FjaGUpIHtcclxuXHRcdFx0dmFyIG1hcmdpbiA9IHRoaXMuc2V0dGluZ3MubWFyZ2luIHx8ICcnLFxyXG5cdFx0XHRcdGdyaWQgPSAhdGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgsXHJcblx0XHRcdFx0cnRsID0gdGhpcy5zZXR0aW5ncy5ydGwsXHJcblx0XHRcdFx0Y3NzID0ge1xyXG5cdFx0XHRcdFx0J3dpZHRoJzogJ2F1dG8nLFxyXG5cdFx0XHRcdFx0J21hcmdpbi1sZWZ0JzogcnRsID8gbWFyZ2luIDogJycsXHJcblx0XHRcdFx0XHQnbWFyZ2luLXJpZ2h0JzogcnRsID8gJycgOiBtYXJnaW5cclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0IWdyaWQgJiYgdGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5jc3MoY3NzKTtcclxuXHJcblx0XHRcdGNhY2hlLmNzcyA9IGNzcztcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbihjYWNoZSkge1xyXG5cdFx0XHR2YXIgd2lkdGggPSAodGhpcy53aWR0aCgpIC8gdGhpcy5zZXR0aW5ncy5pdGVtcykudG9GaXhlZCgzKSAtIHRoaXMuc2V0dGluZ3MubWFyZ2luLFxyXG5cdFx0XHRcdG1lcmdlID0gbnVsbCxcclxuXHRcdFx0XHRpdGVyYXRvciA9IHRoaXMuX2l0ZW1zLmxlbmd0aCxcclxuXHRcdFx0XHRncmlkID0gIXRoaXMuc2V0dGluZ3MuYXV0b1dpZHRoLFxyXG5cdFx0XHRcdHdpZHRocyA9IFtdO1xyXG5cclxuXHRcdFx0Y2FjaGUuaXRlbXMgPSB7XHJcblx0XHRcdFx0bWVyZ2U6IGZhbHNlLFxyXG5cdFx0XHRcdHdpZHRoOiB3aWR0aFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0d2hpbGUgKGl0ZXJhdG9yLS0pIHtcclxuXHRcdFx0XHRtZXJnZSA9IHRoaXMuX21lcmdlcnNbaXRlcmF0b3JdO1xyXG5cdFx0XHRcdG1lcmdlID0gdGhpcy5zZXR0aW5ncy5tZXJnZUZpdCAmJiBNYXRoLm1pbihtZXJnZSwgdGhpcy5zZXR0aW5ncy5pdGVtcykgfHwgbWVyZ2U7XHJcblxyXG5cdFx0XHRcdGNhY2hlLml0ZW1zLm1lcmdlID0gbWVyZ2UgPiAxIHx8IGNhY2hlLml0ZW1zLm1lcmdlO1xyXG5cclxuXHRcdFx0XHR3aWR0aHNbaXRlcmF0b3JdID0gIWdyaWQgPyB0aGlzLl9pdGVtc1tpdGVyYXRvcl0ud2lkdGgoKSA6IHdpZHRoICogbWVyZ2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3dpZHRocyA9IHdpZHRocztcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNsb25lcyA9IFtdLFxyXG5cdFx0XHRcdGl0ZW1zID0gdGhpcy5faXRlbXMsXHJcblx0XHRcdFx0c2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzLFxyXG5cdFx0XHRcdC8vIFRPRE86IFNob3VsZCBiZSBjb21wdXRlZCBmcm9tIG51bWJlciBvZiBtaW4gd2lkdGggaXRlbXMgaW4gc3RhZ2VcclxuXHRcdFx0XHR2aWV3ID0gTWF0aC5tYXgoc2V0dGluZ3MuaXRlbXMgKiAyLCA0KSxcclxuXHRcdFx0XHRzaXplID0gTWF0aC5jZWlsKGl0ZW1zLmxlbmd0aCAvIDIpICogMixcclxuXHRcdFx0XHRyZXBlYXQgPSBzZXR0aW5ncy5sb29wICYmIGl0ZW1zLmxlbmd0aCA/IHNldHRpbmdzLnJld2luZCA/IHZpZXcgOiBNYXRoLm1heCh2aWV3LCBzaXplKSA6IDAsXHJcblx0XHRcdFx0YXBwZW5kID0gJycsXHJcblx0XHRcdFx0cHJlcGVuZCA9ICcnO1xyXG5cclxuXHRcdFx0cmVwZWF0IC89IDI7XHJcblxyXG5cdFx0XHR3aGlsZSAocmVwZWF0LS0pIHtcclxuXHRcdFx0XHQvLyBTd2l0Y2ggdG8gb25seSB1c2luZyBhcHBlbmRlZCBjbG9uZXNcclxuXHRcdFx0XHRjbG9uZXMucHVzaCh0aGlzLm5vcm1hbGl6ZShjbG9uZXMubGVuZ3RoIC8gMiwgdHJ1ZSkpO1xyXG5cdFx0XHRcdGFwcGVuZCA9IGFwcGVuZCArIGl0ZW1zW2Nsb25lc1tjbG9uZXMubGVuZ3RoIC0gMV1dWzBdLm91dGVySFRNTDtcclxuXHRcdFx0XHRjbG9uZXMucHVzaCh0aGlzLm5vcm1hbGl6ZShpdGVtcy5sZW5ndGggLSAxIC0gKGNsb25lcy5sZW5ndGggLSAxKSAvIDIsIHRydWUpKTtcclxuXHRcdFx0XHRwcmVwZW5kID0gaXRlbXNbY2xvbmVzW2Nsb25lcy5sZW5ndGggLSAxXV1bMF0ub3V0ZXJIVE1MICsgcHJlcGVuZDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fY2xvbmVzID0gY2xvbmVzO1xyXG5cclxuXHRcdFx0JChhcHBlbmQpLmFkZENsYXNzKCdjbG9uZWQnKS5hcHBlbmRUbyh0aGlzLiRzdGFnZSk7XHJcblx0XHRcdCQocHJlcGVuZCkuYWRkQ2xhc3MoJ2Nsb25lZCcpLnByZXBlbmRUbyh0aGlzLiRzdGFnZSk7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBydGwgPSB0aGlzLnNldHRpbmdzLnJ0bCA/IDEgOiAtMSxcclxuXHRcdFx0XHRzaXplID0gdGhpcy5fY2xvbmVzLmxlbmd0aCArIHRoaXMuX2l0ZW1zLmxlbmd0aCxcclxuXHRcdFx0XHRpdGVyYXRvciA9IC0xLFxyXG5cdFx0XHRcdHByZXZpb3VzID0gMCxcclxuXHRcdFx0XHRjdXJyZW50ID0gMCxcclxuXHRcdFx0XHRjb29yZGluYXRlcyA9IFtdO1xyXG5cclxuXHRcdFx0d2hpbGUgKCsraXRlcmF0b3IgPCBzaXplKSB7XHJcblx0XHRcdFx0cHJldmlvdXMgPSBjb29yZGluYXRlc1tpdGVyYXRvciAtIDFdIHx8IDA7XHJcblx0XHRcdFx0Y3VycmVudCA9IHRoaXMuX3dpZHRoc1t0aGlzLnJlbGF0aXZlKGl0ZXJhdG9yKV0gKyB0aGlzLnNldHRpbmdzLm1hcmdpbjtcclxuXHRcdFx0XHRjb29yZGluYXRlcy5wdXNoKHByZXZpb3VzICsgY3VycmVudCAqIHJ0bCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2Nvb3JkaW5hdGVzID0gY29vcmRpbmF0ZXM7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWRkaW5nID0gdGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmcsXHJcblx0XHRcdFx0Y29vcmRpbmF0ZXMgPSB0aGlzLl9jb29yZGluYXRlcyxcclxuXHRcdFx0XHRjc3MgPSB7XHJcblx0XHRcdFx0XHQnd2lkdGgnOiBNYXRoLmNlaWwoTWF0aC5hYnMoY29vcmRpbmF0ZXNbY29vcmRpbmF0ZXMubGVuZ3RoIC0gMV0pKSArIHBhZGRpbmcgKiAyLFxyXG5cdFx0XHRcdFx0J3BhZGRpbmctbGVmdCc6IHBhZGRpbmcgfHwgJycsXHJcblx0XHRcdFx0XHQncGFkZGluZy1yaWdodCc6IHBhZGRpbmcgfHwgJydcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0dGhpcy4kc3RhZ2UuY3NzKGNzcyk7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICd3aWR0aCcsICdpdGVtcycsICdzZXR0aW5ncycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oY2FjaGUpIHtcclxuXHRcdFx0dmFyIGl0ZXJhdG9yID0gdGhpcy5fY29vcmRpbmF0ZXMubGVuZ3RoLFxyXG5cdFx0XHRcdGdyaWQgPSAhdGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgsXHJcblx0XHRcdFx0aXRlbXMgPSB0aGlzLiRzdGFnZS5jaGlsZHJlbigpO1xyXG5cclxuXHRcdFx0aWYgKGdyaWQgJiYgY2FjaGUuaXRlbXMubWVyZ2UpIHtcclxuXHRcdFx0XHR3aGlsZSAoaXRlcmF0b3ItLSkge1xyXG5cdFx0XHRcdFx0Y2FjaGUuY3NzLndpZHRoID0gdGhpcy5fd2lkdGhzW3RoaXMucmVsYXRpdmUoaXRlcmF0b3IpXTtcclxuXHRcdFx0XHRcdGl0ZW1zLmVxKGl0ZXJhdG9yKS5jc3MoY2FjaGUuY3NzKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoZ3JpZCkge1xyXG5cdFx0XHRcdGNhY2hlLmNzcy53aWR0aCA9IGNhY2hlLml0ZW1zLndpZHRoO1xyXG5cdFx0XHRcdGl0ZW1zLmNzcyhjYWNoZS5jc3MpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICdpdGVtcycgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX2Nvb3JkaW5hdGVzLmxlbmd0aCA8IDEgJiYgdGhpcy4kc3RhZ2UucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbihjYWNoZSkge1xyXG5cdFx0XHRjYWNoZS5jdXJyZW50ID0gY2FjaGUuY3VycmVudCA/IHRoaXMuJHN0YWdlLmNoaWxkcmVuKCkuaW5kZXgoY2FjaGUuY3VycmVudCkgOiAwO1xyXG5cdFx0XHRjYWNoZS5jdXJyZW50ID0gTWF0aC5tYXgodGhpcy5taW5pbXVtKCksIE1hdGgubWluKHRoaXMubWF4aW11bSgpLCBjYWNoZS5jdXJyZW50KSk7XHJcblx0XHRcdHRoaXMucmVzZXQoY2FjaGUuY3VycmVudCk7XHJcblx0XHR9XHJcblx0fSwge1xyXG5cdFx0ZmlsdGVyOiBbICdwb3NpdGlvbicgXSxcclxuXHRcdHJ1bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuYW5pbWF0ZSh0aGlzLmNvb3JkaW5hdGVzKHRoaXMuX2N1cnJlbnQpKTtcclxuXHRcdH1cclxuXHR9LCB7XHJcblx0XHRmaWx0ZXI6IFsgJ3dpZHRoJywgJ3Bvc2l0aW9uJywgJ2l0ZW1zJywgJ3NldHRpbmdzJyBdLFxyXG5cdFx0cnVuOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHJ0bCA9IHRoaXMuc2V0dGluZ3MucnRsID8gMSA6IC0xLFxyXG5cdFx0XHRcdHBhZGRpbmcgPSB0aGlzLnNldHRpbmdzLnN0YWdlUGFkZGluZyAqIDIsXHJcblx0XHRcdFx0YmVnaW4gPSB0aGlzLmNvb3JkaW5hdGVzKHRoaXMuY3VycmVudCgpKSArIHBhZGRpbmcsXHJcblx0XHRcdFx0ZW5kID0gYmVnaW4gKyB0aGlzLndpZHRoKCkgKiBydGwsXHJcblx0XHRcdFx0aW5uZXIsIG91dGVyLCBtYXRjaGVzID0gW10sIGksIG47XHJcblxyXG5cdFx0XHRmb3IgKGkgPSAwLCBuID0gdGhpcy5fY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcblx0XHRcdFx0aW5uZXIgPSB0aGlzLl9jb29yZGluYXRlc1tpIC0gMV0gfHwgMDtcclxuXHRcdFx0XHRvdXRlciA9IE1hdGguYWJzKHRoaXMuX2Nvb3JkaW5hdGVzW2ldKSArIHBhZGRpbmcgKiBydGw7XHJcblxyXG5cdFx0XHRcdGlmICgodGhpcy5vcChpbm5lciwgJzw9JywgYmVnaW4pICYmICh0aGlzLm9wKGlubmVyLCAnPicsIGVuZCkpKVxyXG5cdFx0XHRcdFx0fHwgKHRoaXMub3Aob3V0ZXIsICc8JywgYmVnaW4pICYmIHRoaXMub3Aob3V0ZXIsICc+JywgZW5kKSkpIHtcclxuXHRcdFx0XHRcdG1hdGNoZXMucHVzaChpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuJHN0YWdlLmNoaWxkcmVuKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5jaGlsZHJlbignOmVxKCcgKyBtYXRjaGVzLmpvaW4oJyksIDplcSgnKSArICcpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuY2VudGVyKSB7XHJcblx0XHRcdFx0dGhpcy4kc3RhZ2UuY2hpbGRyZW4oJy5jZW50ZXInKS5yZW1vdmVDbGFzcygnY2VudGVyJyk7XHJcblx0XHRcdFx0dGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5lcSh0aGlzLmN1cnJlbnQoKSkuYWRkQ2xhc3MoJ2NlbnRlcicpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSBdO1xyXG5cclxuXHQvKipcclxuXHQgKiBJbml0aWFsaXplcyB0aGUgY2Fyb3VzZWwuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbnRlcignaW5pdGlhbGl6aW5nJyk7XHJcblx0XHR0aGlzLnRyaWdnZXIoJ2luaXRpYWxpemUnKTtcclxuXHJcblx0XHR0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKHRoaXMuc2V0dGluZ3MucnRsQ2xhc3MsIHRoaXMuc2V0dGluZ3MucnRsKTtcclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5hdXRvV2lkdGggJiYgIXRoaXMuaXMoJ3ByZS1sb2FkaW5nJykpIHtcclxuXHRcdFx0dmFyIGltZ3MsIG5lc3RlZFNlbGVjdG9yLCB3aWR0aDtcclxuXHRcdFx0aW1ncyA9IHRoaXMuJGVsZW1lbnQuZmluZCgnaW1nJyk7XHJcblx0XHRcdG5lc3RlZFNlbGVjdG9yID0gdGhpcy5zZXR0aW5ncy5uZXN0ZWRJdGVtU2VsZWN0b3IgPyAnLicgKyB0aGlzLnNldHRpbmdzLm5lc3RlZEl0ZW1TZWxlY3RvciA6IHVuZGVmaW5lZDtcclxuXHRcdFx0d2lkdGggPSB0aGlzLiRlbGVtZW50LmNoaWxkcmVuKG5lc3RlZFNlbGVjdG9yKS53aWR0aCgpO1xyXG5cclxuXHRcdFx0aWYgKGltZ3MubGVuZ3RoICYmIHdpZHRoIDw9IDApIHtcclxuXHRcdFx0XHR0aGlzLnByZWxvYWRBdXRvV2lkdGhJbWFnZXMoaW1ncyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLiRlbGVtZW50LmFkZENsYXNzKHRoaXMub3B0aW9ucy5sb2FkaW5nQ2xhc3MpO1xyXG5cclxuXHRcdC8vIGNyZWF0ZSBzdGFnZVxyXG5cdFx0dGhpcy4kc3RhZ2UgPSAkKCc8JyArIHRoaXMuc2V0dGluZ3Muc3RhZ2VFbGVtZW50ICsgJyBjbGFzcz1cIicgKyB0aGlzLnNldHRpbmdzLnN0YWdlQ2xhc3MgKyAnXCIvPicpXHJcblx0XHRcdC53cmFwKCc8ZGl2IGNsYXNzPVwiJyArIHRoaXMuc2V0dGluZ3Muc3RhZ2VPdXRlckNsYXNzICsgJ1wiLz4nKTtcclxuXHJcblx0XHQvLyBhcHBlbmQgc3RhZ2VcclxuXHRcdHRoaXMuJGVsZW1lbnQuYXBwZW5kKHRoaXMuJHN0YWdlLnBhcmVudCgpKTtcclxuXHJcblx0XHQvLyBhcHBlbmQgY29udGVudFxyXG5cdFx0dGhpcy5yZXBsYWNlKHRoaXMuJGVsZW1lbnQuY2hpbGRyZW4oKS5ub3QodGhpcy4kc3RhZ2UucGFyZW50KCkpKTtcclxuXHJcblx0XHQvLyBjaGVjayB2aXNpYmlsaXR5XHJcblx0XHRpZiAodGhpcy4kZWxlbWVudC5pcygnOnZpc2libGUnKSkge1xyXG5cdFx0XHQvLyB1cGRhdGUgdmlld1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGludmFsaWRhdGUgd2lkdGhcclxuXHRcdFx0dGhpcy5pbnZhbGlkYXRlKCd3aWR0aCcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnRcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5sb2FkaW5nQ2xhc3MpXHJcblx0XHRcdC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMubG9hZGVkQ2xhc3MpO1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnRIYW5kbGVycygpO1xyXG5cclxuXHRcdHRoaXMubGVhdmUoJ2luaXRpYWxpemluZycpO1xyXG5cdFx0dGhpcy50cmlnZ2VyKCdpbml0aWFsaXplZCcpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHVwcyB0aGUgY3VycmVudCBzZXR0aW5ncy5cclxuXHQgKiBAdG9kbyBSZW1vdmUgcmVzcG9uc2l2ZSBjbGFzc2VzLiBXaHkgc2hvdWxkIGFkYXB0aXZlIGRlc2lnbnMgYmUgYnJvdWdodCBpbnRvIElFOD9cclxuXHQgKiBAdG9kbyBTdXBwb3J0IGZvciBtZWRpYSBxdWVyaWVzIGJ5IHVzaW5nIGBtYXRjaE1lZGlhYCB3b3VsZCBiZSBuaWNlLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnNldHVwID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdmlld3BvcnQgPSB0aGlzLnZpZXdwb3J0KCksXHJcblx0XHRcdG92ZXJ3cml0ZXMgPSB0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZSxcclxuXHRcdFx0bWF0Y2ggPSAtMSxcclxuXHRcdFx0c2V0dGluZ3MgPSBudWxsO1xyXG5cclxuXHRcdGlmICghb3ZlcndyaXRlcykge1xyXG5cdFx0XHRzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JC5lYWNoKG92ZXJ3cml0ZXMsIGZ1bmN0aW9uKGJyZWFrcG9pbnQpIHtcclxuXHRcdFx0XHRpZiAoYnJlYWtwb2ludCA8PSB2aWV3cG9ydCAmJiBicmVha3BvaW50ID4gbWF0Y2gpIHtcclxuXHRcdFx0XHRcdG1hdGNoID0gTnVtYmVyKGJyZWFrcG9pbnQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIG92ZXJ3cml0ZXNbbWF0Y2hdKTtcclxuXHRcdFx0aWYgKHR5cGVvZiBzZXR0aW5ncy5zdGFnZVBhZGRpbmcgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRzZXR0aW5ncy5zdGFnZVBhZGRpbmcgPSBzZXR0aW5ncy5zdGFnZVBhZGRpbmcoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRkZWxldGUgc2V0dGluZ3MucmVzcG9uc2l2ZTtcclxuXHJcblx0XHRcdC8vIHJlc3BvbnNpdmUgY2xhc3NcclxuXHRcdFx0aWYgKHNldHRpbmdzLnJlc3BvbnNpdmVDbGFzcykge1xyXG5cdFx0XHRcdHRoaXMuJGVsZW1lbnQuYXR0cignY2xhc3MnLFxyXG5cdFx0XHRcdFx0dGhpcy4kZWxlbWVudC5hdHRyKCdjbGFzcycpLnJlcGxhY2UobmV3IFJlZ0V4cCgnKCcgKyB0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUNsYXNzICsgJy0pXFxcXFMrXFxcXHMnLCAnZycpLCAnJDEnICsgbWF0Y2gpXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudHJpZ2dlcignY2hhbmdlJywgeyBwcm9wZXJ0eTogeyBuYW1lOiAnc2V0dGluZ3MnLCB2YWx1ZTogc2V0dGluZ3MgfSB9KTtcclxuXHRcdHRoaXMuX2JyZWFrcG9pbnQgPSBtYXRjaDtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMuaW52YWxpZGF0ZSgnc2V0dGluZ3MnKTtcclxuXHRcdHRoaXMudHJpZ2dlcignY2hhbmdlZCcsIHsgcHJvcGVydHk6IHsgbmFtZTogJ3NldHRpbmdzJywgdmFsdWU6IHRoaXMuc2V0dGluZ3MgfSB9KTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGVzIG9wdGlvbiBsb2dpYyBpZiBuZWNlc3NlcnkuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub3B0aW9uc0xvZ2ljID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5hdXRvV2lkdGgpIHtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmcgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5tZXJnZSA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFByZXBhcmVzIGFuIGl0ZW0gYmVmb3JlIGFkZC5cclxuXHQgKiBAdG9kbyBSZW5hbWUgZXZlbnQgcGFyYW1ldGVyIGBjb250ZW50YCB0byBgaXRlbWAuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEByZXR1cm5zIHtqUXVlcnl8SFRNTEVsZW1lbnR9IC0gVGhlIGl0ZW0gY29udGFpbmVyLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucHJlcGFyZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcclxuXHRcdHZhciBldmVudCA9IHRoaXMudHJpZ2dlcigncHJlcGFyZScsIHsgY29udGVudDogaXRlbSB9KTtcclxuXHJcblx0XHRpZiAoIWV2ZW50LmRhdGEpIHtcclxuXHRcdFx0ZXZlbnQuZGF0YSA9ICQoJzwnICsgdGhpcy5zZXR0aW5ncy5pdGVtRWxlbWVudCArICcvPicpXHJcblx0XHRcdFx0LmFkZENsYXNzKHRoaXMub3B0aW9ucy5pdGVtQ2xhc3MpLmFwcGVuZChpdGVtKVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudHJpZ2dlcigncHJlcGFyZWQnLCB7IGNvbnRlbnQ6IGV2ZW50LmRhdGEgfSk7XHJcblxyXG5cdFx0cmV0dXJuIGV2ZW50LmRhdGE7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlcyB0aGUgdmlldy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpID0gMCxcclxuXHRcdFx0biA9IHRoaXMuX3BpcGUubGVuZ3RoLFxyXG5cdFx0XHRmaWx0ZXIgPSAkLnByb3h5KGZ1bmN0aW9uKHApIHsgcmV0dXJuIHRoaXNbcF0gfSwgdGhpcy5faW52YWxpZGF0ZWQpLFxyXG5cdFx0XHRjYWNoZSA9IHt9O1xyXG5cclxuXHRcdHdoaWxlIChpIDwgbikge1xyXG5cdFx0XHRpZiAodGhpcy5faW52YWxpZGF0ZWQuYWxsIHx8ICQuZ3JlcCh0aGlzLl9waXBlW2ldLmZpbHRlciwgZmlsdGVyKS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0dGhpcy5fcGlwZVtpXS5ydW4oY2FjaGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGkrKztcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9pbnZhbGlkYXRlZCA9IHt9O1xyXG5cclxuXHRcdCF0aGlzLmlzKCd2YWxpZCcpICYmIHRoaXMuZW50ZXIoJ3ZhbGlkJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgd2lkdGggb2YgdGhlIHZpZXcuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7T3dsLldpZHRofSBbZGltZW5zaW9uPU93bC5XaWR0aC5EZWZhdWx0XSAtIFRoZSBkaW1lbnNpb24gdG8gcmV0dXJuLlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IC0gVGhlIHdpZHRoIG9mIHRoZSB2aWV3IGluIHBpeGVsLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUud2lkdGggPSBmdW5jdGlvbihkaW1lbnNpb24pIHtcclxuXHRcdGRpbWVuc2lvbiA9IGRpbWVuc2lvbiB8fCBPd2wuV2lkdGguRGVmYXVsdDtcclxuXHRcdHN3aXRjaCAoZGltZW5zaW9uKSB7XHJcblx0XHRcdGNhc2UgT3dsLldpZHRoLklubmVyOlxyXG5cdFx0XHRjYXNlIE93bC5XaWR0aC5PdXRlcjpcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fd2lkdGg7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3dpZHRoIC0gdGhpcy5zZXR0aW5ncy5zdGFnZVBhZGRpbmcgKiAyICsgdGhpcy5zZXR0aW5ncy5tYXJnaW47XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUmVmcmVzaGVzIHRoZSBjYXJvdXNlbCBwcmltYXJpbHkgZm9yIGFkYXB0aXZlIHB1cnBvc2VzLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZW50ZXIoJ3JlZnJlc2hpbmcnKTtcclxuXHRcdHRoaXMudHJpZ2dlcigncmVmcmVzaCcpO1xyXG5cclxuXHRcdHRoaXMuc2V0dXAoKTtcclxuXHJcblx0XHR0aGlzLm9wdGlvbnNMb2dpYygpO1xyXG5cclxuXHRcdHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnJlZnJlc2hDbGFzcyk7XHJcblxyXG5cdFx0dGhpcy51cGRhdGUoKTtcclxuXHJcblx0XHR0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5yZWZyZXNoQ2xhc3MpO1xyXG5cclxuXHRcdHRoaXMubGVhdmUoJ3JlZnJlc2hpbmcnKTtcclxuXHRcdHRoaXMudHJpZ2dlcigncmVmcmVzaGVkJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2tzIHdpbmRvdyBgcmVzaXplYCBldmVudC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vblRocm90dGxlZFJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVyKTtcclxuXHRcdHRoaXMucmVzaXplVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCh0aGlzLl9oYW5kbGVycy5vblJlc2l6ZSwgdGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlUmVmcmVzaFJhdGUpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyB3aW5kb3cgYHJlc2l6ZWAgZXZlbnQuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmICghdGhpcy5faXRlbXMubGVuZ3RoKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5fd2lkdGggPT09IHRoaXMuJGVsZW1lbnQud2lkdGgoKSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCF0aGlzLiRlbGVtZW50LmlzKCc6dmlzaWJsZScpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVudGVyKCdyZXNpemluZycpO1xyXG5cclxuXHRcdGlmICh0aGlzLnRyaWdnZXIoJ3Jlc2l6ZScpLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XHJcblx0XHRcdHRoaXMubGVhdmUoJ3Jlc2l6aW5nJyk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmludmFsaWRhdGUoJ3dpZHRoJyk7XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblxyXG5cdFx0dGhpcy5sZWF2ZSgncmVzaXppbmcnKTtcclxuXHRcdHRoaXMudHJpZ2dlcigncmVzaXplZCcpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZ2lzdGVycyBldmVudCBoYW5kbGVycy5cclxuXHQgKiBAdG9kbyBDaGVjayBgbXNQb2ludGVyRW5hYmxlZGBcclxuXHQgKiBAdG9kbyAjMjYxXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucmVnaXN0ZXJFdmVudEhhbmRsZXJzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoJC5zdXBwb3J0LnRyYW5zaXRpb24pIHtcclxuXHRcdFx0dGhpcy4kc3RhZ2Uub24oJC5zdXBwb3J0LnRyYW5zaXRpb24uZW5kICsgJy5vd2wuY29yZScsICQucHJveHkodGhpcy5vblRyYW5zaXRpb25FbmQsIHRoaXMpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5yZXNwb25zaXZlICE9PSBmYWxzZSkge1xyXG5cdFx0XHR0aGlzLm9uKHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZXJzLm9uVGhyb3R0bGVkUmVzaXplKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5tb3VzZURyYWcpIHtcclxuXHRcdFx0dGhpcy4kZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuZHJhZ0NsYXNzKTtcclxuXHRcdFx0dGhpcy4kc3RhZ2Uub24oJ21vdXNlZG93bi5vd2wuY29yZScsICQucHJveHkodGhpcy5vbkRyYWdTdGFydCwgdGhpcykpO1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5vbignZHJhZ3N0YXJ0Lm93bC5jb3JlIHNlbGVjdHN0YXJ0Lm93bC5jb3JlJywgZnVuY3Rpb24oKSB7IHJldHVybiBmYWxzZSB9KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy50b3VjaERyYWcpe1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5vbigndG91Y2hzdGFydC5vd2wuY29yZScsICQucHJveHkodGhpcy5vbkRyYWdTdGFydCwgdGhpcykpO1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5vbigndG91Y2hjYW5jZWwub3dsLmNvcmUnLCAkLnByb3h5KHRoaXMub25EcmFnRW5kLCB0aGlzKSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyBgdG91Y2hzdGFydGAgYW5kIGBtb3VzZWRvd25gIGV2ZW50cy5cclxuXHQgKiBAdG9kbyBIb3Jpem9udGFsIHN3aXBlIHRocmVzaG9sZCBhcyBvcHRpb25cclxuXHQgKiBAdG9kbyAjMjYxXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gVGhlIGV2ZW50IGFyZ3VtZW50cy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9uRHJhZ1N0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdHZhciBzdGFnZSA9IG51bGw7XHJcblxyXG5cdFx0aWYgKGV2ZW50LndoaWNoID09PSAzKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoJC5zdXBwb3J0LnRyYW5zZm9ybSkge1xyXG5cdFx0XHRzdGFnZSA9IHRoaXMuJHN0YWdlLmNzcygndHJhbnNmb3JtJykucmVwbGFjZSgvLipcXCh8XFwpfCAvZywgJycpLnNwbGl0KCcsJyk7XHJcblx0XHRcdHN0YWdlID0ge1xyXG5cdFx0XHRcdHg6IHN0YWdlW3N0YWdlLmxlbmd0aCA9PT0gMTYgPyAxMiA6IDRdLFxyXG5cdFx0XHRcdHk6IHN0YWdlW3N0YWdlLmxlbmd0aCA9PT0gMTYgPyAxMyA6IDVdXHJcblx0XHRcdH07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzdGFnZSA9IHRoaXMuJHN0YWdlLnBvc2l0aW9uKCk7XHJcblx0XHRcdHN0YWdlID0ge1xyXG5cdFx0XHRcdHg6IHRoaXMuc2V0dGluZ3MucnRsID9cclxuXHRcdFx0XHRcdHN0YWdlLmxlZnQgKyB0aGlzLiRzdGFnZS53aWR0aCgpIC0gdGhpcy53aWR0aCgpICsgdGhpcy5zZXR0aW5ncy5tYXJnaW4gOlxyXG5cdFx0XHRcdFx0c3RhZ2UubGVmdCxcclxuXHRcdFx0XHR5OiBzdGFnZS50b3BcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5pcygnYW5pbWF0aW5nJykpIHtcclxuXHRcdFx0JC5zdXBwb3J0LnRyYW5zZm9ybSA/IHRoaXMuYW5pbWF0ZShzdGFnZS54KSA6IHRoaXMuJHN0YWdlLnN0b3AoKVxyXG5cdFx0XHR0aGlzLmludmFsaWRhdGUoJ3Bvc2l0aW9uJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyh0aGlzLm9wdGlvbnMuZ3JhYkNsYXNzLCBldmVudC50eXBlID09PSAnbW91c2Vkb3duJyk7XHJcblxyXG5cdFx0dGhpcy5zcGVlZCgwKTtcclxuXHJcblx0XHR0aGlzLl9kcmFnLnRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHRcdHRoaXMuX2RyYWcudGFyZ2V0ID0gJChldmVudC50YXJnZXQpO1xyXG5cdFx0dGhpcy5fZHJhZy5zdGFnZS5zdGFydCA9IHN0YWdlO1xyXG5cdFx0dGhpcy5fZHJhZy5zdGFnZS5jdXJyZW50ID0gc3RhZ2U7XHJcblx0XHR0aGlzLl9kcmFnLnBvaW50ZXIgPSB0aGlzLnBvaW50ZXIoZXZlbnQpO1xyXG5cclxuXHRcdCQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwLm93bC5jb3JlIHRvdWNoZW5kLm93bC5jb3JlJywgJC5wcm94eSh0aGlzLm9uRHJhZ0VuZCwgdGhpcykpO1xyXG5cclxuXHRcdCQoZG9jdW1lbnQpLm9uZSgnbW91c2Vtb3ZlLm93bC5jb3JlIHRvdWNobW92ZS5vd2wuY29yZScsICQucHJveHkoZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdFx0dmFyIGRlbHRhID0gdGhpcy5kaWZmZXJlbmNlKHRoaXMuX2RyYWcucG9pbnRlciwgdGhpcy5wb2ludGVyKGV2ZW50KSk7XHJcblxyXG5cdFx0XHQkKGRvY3VtZW50KS5vbignbW91c2Vtb3ZlLm93bC5jb3JlIHRvdWNobW92ZS5vd2wuY29yZScsICQucHJveHkodGhpcy5vbkRyYWdNb3ZlLCB0aGlzKSk7XHJcblxyXG5cdFx0XHRpZiAoTWF0aC5hYnMoZGVsdGEueCkgPCBNYXRoLmFicyhkZWx0YS55KSAmJiB0aGlzLmlzKCd2YWxpZCcpKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0dGhpcy5lbnRlcignZHJhZ2dpbmcnKTtcclxuXHRcdFx0dGhpcy50cmlnZ2VyKCdkcmFnJyk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB0aGUgYHRvdWNobW92ZWAgYW5kIGBtb3VzZW1vdmVgIGV2ZW50cy5cclxuXHQgKiBAdG9kbyAjMjYxXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gVGhlIGV2ZW50IGFyZ3VtZW50cy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9uRHJhZ01vdmUgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0dmFyIG1pbmltdW0gPSBudWxsLFxyXG5cdFx0XHRtYXhpbXVtID0gbnVsbCxcclxuXHRcdFx0cHVsbCA9IG51bGwsXHJcblx0XHRcdGRlbHRhID0gdGhpcy5kaWZmZXJlbmNlKHRoaXMuX2RyYWcucG9pbnRlciwgdGhpcy5wb2ludGVyKGV2ZW50KSksXHJcblx0XHRcdHN0YWdlID0gdGhpcy5kaWZmZXJlbmNlKHRoaXMuX2RyYWcuc3RhZ2Uuc3RhcnQsIGRlbHRhKTtcclxuXHJcblx0XHRpZiAoIXRoaXMuaXMoJ2RyYWdnaW5nJykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubG9vcCkge1xyXG5cdFx0XHRtaW5pbXVtID0gdGhpcy5jb29yZGluYXRlcyh0aGlzLm1pbmltdW0oKSk7XHJcblx0XHRcdG1heGltdW0gPSB0aGlzLmNvb3JkaW5hdGVzKHRoaXMubWF4aW11bSgpICsgMSkgLSBtaW5pbXVtO1xyXG5cdFx0XHRzdGFnZS54ID0gKCgoc3RhZ2UueCAtIG1pbmltdW0pICUgbWF4aW11bSArIG1heGltdW0pICUgbWF4aW11bSkgKyBtaW5pbXVtO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bWluaW11bSA9IHRoaXMuc2V0dGluZ3MucnRsID8gdGhpcy5jb29yZGluYXRlcyh0aGlzLm1heGltdW0oKSkgOiB0aGlzLmNvb3JkaW5hdGVzKHRoaXMubWluaW11bSgpKTtcclxuXHRcdFx0bWF4aW11bSA9IHRoaXMuc2V0dGluZ3MucnRsID8gdGhpcy5jb29yZGluYXRlcyh0aGlzLm1pbmltdW0oKSkgOiB0aGlzLmNvb3JkaW5hdGVzKHRoaXMubWF4aW11bSgpKTtcclxuXHRcdFx0cHVsbCA9IHRoaXMuc2V0dGluZ3MucHVsbERyYWcgPyAtMSAqIGRlbHRhLnggLyA1IDogMDtcclxuXHRcdFx0c3RhZ2UueCA9IE1hdGgubWF4KE1hdGgubWluKHN0YWdlLngsIG1pbmltdW0gKyBwdWxsKSwgbWF4aW11bSArIHB1bGwpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2RyYWcuc3RhZ2UuY3VycmVudCA9IHN0YWdlO1xyXG5cclxuXHRcdHRoaXMuYW5pbWF0ZShzdGFnZS54KTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGVzIHRoZSBgdG91Y2hlbmRgIGFuZCBgbW91c2V1cGAgZXZlbnRzLlxyXG5cdCAqIEB0b2RvICMyNjFcclxuXHQgKiBAdG9kbyBUaHJlc2hvbGQgZm9yIGNsaWNrIGV2ZW50XHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IC0gVGhlIGV2ZW50IGFyZ3VtZW50cy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9uRHJhZ0VuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHR2YXIgZGVsdGEgPSB0aGlzLmRpZmZlcmVuY2UodGhpcy5fZHJhZy5wb2ludGVyLCB0aGlzLnBvaW50ZXIoZXZlbnQpKSxcclxuXHRcdFx0c3RhZ2UgPSB0aGlzLl9kcmFnLnN0YWdlLmN1cnJlbnQsXHJcblx0XHRcdGRpcmVjdGlvbiA9IGRlbHRhLnggPiAwIF4gdGhpcy5zZXR0aW5ncy5ydGwgPyAnbGVmdCcgOiAncmlnaHQnO1xyXG5cclxuXHRcdCQoZG9jdW1lbnQpLm9mZignLm93bC5jb3JlJyk7XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuZ3JhYkNsYXNzKTtcclxuXHJcblx0XHRpZiAoZGVsdGEueCAhPT0gMCAmJiB0aGlzLmlzKCdkcmFnZ2luZycpIHx8ICF0aGlzLmlzKCd2YWxpZCcpKSB7XHJcblx0XHRcdHRoaXMuc3BlZWQodGhpcy5zZXR0aW5ncy5kcmFnRW5kU3BlZWQgfHwgdGhpcy5zZXR0aW5ncy5zbWFydFNwZWVkKTtcclxuXHRcdFx0dGhpcy5jdXJyZW50KHRoaXMuY2xvc2VzdChzdGFnZS54LCBkZWx0YS54ICE9PSAwID8gZGlyZWN0aW9uIDogdGhpcy5fZHJhZy5kaXJlY3Rpb24pKTtcclxuXHRcdFx0dGhpcy5pbnZhbGlkYXRlKCdwb3NpdGlvbicpO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cclxuXHRcdFx0dGhpcy5fZHJhZy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcblxyXG5cdFx0XHRpZiAoTWF0aC5hYnMoZGVsdGEueCkgPiAzIHx8IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5fZHJhZy50aW1lID4gMzAwKSB7XHJcblx0XHRcdFx0dGhpcy5fZHJhZy50YXJnZXQub25lKCdjbGljay5vd2wuY29yZScsIGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCF0aGlzLmlzKCdkcmFnZ2luZycpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmxlYXZlKCdkcmFnZ2luZycpO1xyXG5cdFx0dGhpcy50cmlnZ2VyKCdkcmFnZ2VkJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgY2xvc2VzdCBpdGVtIGZvciBhIGNvb3JkaW5hdGUuXHJcblx0ICogQHRvZG8gU2V0dGluZyBgZnJlZURyYWdgIG1ha2VzIGBjbG9zZXN0YCBub3QgcmV1c2FibGUuIFNlZSAjMTY1LlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29vcmRpbmF0ZSAtIFRoZSBjb29yZGluYXRlIGluIHBpeGVsLlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBkaXJlY3Rpb24gLSBUaGUgZGlyZWN0aW9uIHRvIGNoZWNrIGZvciB0aGUgY2xvc2VzdCBpdGVtLiBFdGhlciBgbGVmdGAgb3IgYHJpZ2h0YC5cclxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IC0gVGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBjbG9zZXN0IGl0ZW0uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24oY29vcmRpbmF0ZSwgZGlyZWN0aW9uKSB7XHJcblx0XHR2YXIgcG9zaXRpb24gPSAtMSxcclxuXHRcdFx0cHVsbCA9IDMwLFxyXG5cdFx0XHR3aWR0aCA9IHRoaXMud2lkdGgoKSxcclxuXHRcdFx0Y29vcmRpbmF0ZXMgPSB0aGlzLmNvb3JkaW5hdGVzKCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmZyZWVEcmFnKSB7XHJcblx0XHRcdC8vIGNoZWNrIGNsb3Nlc3QgaXRlbVxyXG5cdFx0XHQkLmVhY2goY29vcmRpbmF0ZXMsICQucHJveHkoZnVuY3Rpb24oaW5kZXgsIHZhbHVlKSB7XHJcblx0XHRcdFx0Ly8gb24gYSBsZWZ0IHB1bGwsIGNoZWNrIG9uIGN1cnJlbnQgaW5kZXhcclxuXHRcdFx0XHRpZiAoZGlyZWN0aW9uID09PSAnbGVmdCcgJiYgY29vcmRpbmF0ZSA+IHZhbHVlIC0gcHVsbCAmJiBjb29yZGluYXRlIDwgdmFsdWUgKyBwdWxsKSB7XHJcblx0XHRcdFx0XHRwb3NpdGlvbiA9IGluZGV4O1xyXG5cdFx0XHRcdC8vIG9uIGEgcmlnaHQgcHVsbCwgY2hlY2sgb24gcHJldmlvdXMgaW5kZXhcclxuXHRcdFx0XHQvLyB0byBkbyBzbywgc3VidHJhY3Qgd2lkdGggZnJvbSB2YWx1ZSBhbmQgc2V0IHBvc2l0aW9uID0gaW5kZXggKyAxXHJcblx0XHRcdFx0fSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdyaWdodCcgJiYgY29vcmRpbmF0ZSA+IHZhbHVlIC0gd2lkdGggLSBwdWxsICYmIGNvb3JkaW5hdGUgPCB2YWx1ZSAtIHdpZHRoICsgcHVsbCkge1xyXG5cdFx0XHRcdFx0cG9zaXRpb24gPSBpbmRleCArIDE7XHJcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLm9wKGNvb3JkaW5hdGUsICc8JywgdmFsdWUpXHJcblx0XHRcdFx0XHQmJiB0aGlzLm9wKGNvb3JkaW5hdGUsICc+JywgY29vcmRpbmF0ZXNbaW5kZXggKyAxXSB8fCB2YWx1ZSAtIHdpZHRoKSkge1xyXG5cdFx0XHRcdFx0cG9zaXRpb24gPSBkaXJlY3Rpb24gPT09ICdsZWZ0JyA/IGluZGV4ICsgMSA6IGluZGV4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gcG9zaXRpb24gPT09IC0xO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCF0aGlzLnNldHRpbmdzLmxvb3ApIHtcclxuXHRcdFx0Ly8gbm9uIGxvb3AgYm91bmRyaWVzXHJcblx0XHRcdGlmICh0aGlzLm9wKGNvb3JkaW5hdGUsICc+JywgY29vcmRpbmF0ZXNbdGhpcy5taW5pbXVtKCldKSkge1xyXG5cdFx0XHRcdHBvc2l0aW9uID0gY29vcmRpbmF0ZSA9IHRoaXMubWluaW11bSgpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMub3AoY29vcmRpbmF0ZSwgJzwnLCBjb29yZGluYXRlc1t0aGlzLm1heGltdW0oKV0pKSB7XHJcblx0XHRcdFx0cG9zaXRpb24gPSBjb29yZGluYXRlID0gdGhpcy5tYXhpbXVtKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcG9zaXRpb247XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQW5pbWF0ZXMgdGhlIHN0YWdlLlxyXG5cdCAqIEB0b2RvICMyNzBcclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGNvb3JkaW5hdGUgLSBUaGUgY29vcmRpbmF0ZSBpbiBwaXhlbHMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24oY29vcmRpbmF0ZSkge1xyXG5cdFx0dmFyIGFuaW1hdGUgPSB0aGlzLnNwZWVkKCkgPiAwO1xyXG5cclxuXHRcdHRoaXMuaXMoJ2FuaW1hdGluZycpICYmIHRoaXMub25UcmFuc2l0aW9uRW5kKCk7XHJcblxyXG5cdFx0aWYgKGFuaW1hdGUpIHtcclxuXHRcdFx0dGhpcy5lbnRlcignYW5pbWF0aW5nJyk7XHJcblx0XHRcdHRoaXMudHJpZ2dlcigndHJhbnNsYXRlJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCQuc3VwcG9ydC50cmFuc2Zvcm0zZCAmJiAkLnN1cHBvcnQudHJhbnNpdGlvbikge1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5jc3Moe1xyXG5cdFx0XHRcdHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKCcgKyBjb29yZGluYXRlICsgJ3B4LDBweCwwcHgpJyxcclxuXHRcdFx0XHR0cmFuc2l0aW9uOiAodGhpcy5zcGVlZCgpIC8gMTAwMCkgKyAncydcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2UgaWYgKGFuaW1hdGUpIHtcclxuXHRcdFx0dGhpcy4kc3RhZ2UuYW5pbWF0ZSh7XHJcblx0XHRcdFx0bGVmdDogY29vcmRpbmF0ZSArICdweCdcclxuXHRcdFx0fSwgdGhpcy5zcGVlZCgpLCB0aGlzLnNldHRpbmdzLmZhbGxiYWNrRWFzaW5nLCAkLnByb3h5KHRoaXMub25UcmFuc2l0aW9uRW5kLCB0aGlzKSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5jc3Moe1xyXG5cdFx0XHRcdGxlZnQ6IGNvb3JkaW5hdGUgKyAncHgnXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrcyB3aGV0aGVyIHRoZSBjYXJvdXNlbCBpcyBpbiBhIHNwZWNpZmljIHN0YXRlIG9yIG5vdC5cclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RhdGUgLSBUaGUgc3RhdGUgdG8gY2hlY2suXHJcblx0ICogQHJldHVybnMge0Jvb2xlYW59IC0gVGhlIGZsYWcgd2hpY2ggaW5kaWNhdGVzIGlmIHRoZSBjYXJvdXNlbCBpcyBidXN5LlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuaXMgPSBmdW5jdGlvbihzdGF0ZSkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3N0YXRlcy5jdXJyZW50W3N0YXRlXSAmJiB0aGlzLl9zdGF0ZXMuY3VycmVudFtzdGF0ZV0gPiAwO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBjdXJyZW50IGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbcG9zaXRpb25dIC0gVGhlIG5ldyBhYnNvbHV0ZSBwb3NpdGlvbiBvciBub3RoaW5nIHRvIGxlYXZlIGl0IHVuY2hhbmdlZC5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfSAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgY3VycmVudCBpdGVtLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuY3VycmVudCA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fY3VycmVudDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5faXRlbXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cG9zaXRpb24gPSB0aGlzLm5vcm1hbGl6ZShwb3NpdGlvbik7XHJcblxyXG5cdFx0aWYgKHRoaXMuX2N1cnJlbnQgIT09IHBvc2l0aW9uKSB7XHJcblx0XHRcdHZhciBldmVudCA9IHRoaXMudHJpZ2dlcignY2hhbmdlJywgeyBwcm9wZXJ0eTogeyBuYW1lOiAncG9zaXRpb24nLCB2YWx1ZTogcG9zaXRpb24gfSB9KTtcclxuXHJcblx0XHRcdGlmIChldmVudC5kYXRhICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRwb3NpdGlvbiA9IHRoaXMubm9ybWFsaXplKGV2ZW50LmRhdGEpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9jdXJyZW50ID0gcG9zaXRpb247XHJcblxyXG5cdFx0XHR0aGlzLmludmFsaWRhdGUoJ3Bvc2l0aW9uJyk7XHJcblxyXG5cdFx0XHR0aGlzLnRyaWdnZXIoJ2NoYW5nZWQnLCB7IHByb3BlcnR5OiB7IG5hbWU6ICdwb3NpdGlvbicsIHZhbHVlOiB0aGlzLl9jdXJyZW50IH0gfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX2N1cnJlbnQ7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSW52YWxpZGF0ZXMgdGhlIGdpdmVuIHBhcnQgb2YgdGhlIHVwZGF0ZSByb3V0aW5lLlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbcGFydF0gLSBUaGUgcGFydCB0byBpbnZhbGlkYXRlLlxyXG5cdCAqIEByZXR1cm5zIHtBcnJheS48U3RyaW5nPn0gLSBUaGUgaW52YWxpZGF0ZWQgcGFydHMuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5pbnZhbGlkYXRlID0gZnVuY3Rpb24ocGFydCkge1xyXG5cdFx0aWYgKCQudHlwZShwYXJ0KSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0dGhpcy5faW52YWxpZGF0ZWRbcGFydF0gPSB0cnVlO1xyXG5cdFx0XHR0aGlzLmlzKCd2YWxpZCcpICYmIHRoaXMubGVhdmUoJ3ZhbGlkJyk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gJC5tYXAodGhpcy5faW52YWxpZGF0ZWQsIGZ1bmN0aW9uKHYsIGkpIHsgcmV0dXJuIGkgfSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUmVzZXRzIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgY3VycmVudCBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIG5ldyBpdGVtLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0cG9zaXRpb24gPSB0aGlzLm5vcm1hbGl6ZShwb3NpdGlvbik7XHJcblxyXG5cdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3NwZWVkID0gMDtcclxuXHRcdHRoaXMuX2N1cnJlbnQgPSBwb3NpdGlvbjtcclxuXHJcblx0XHR0aGlzLnN1cHByZXNzKFsgJ3RyYW5zbGF0ZScsICd0cmFuc2xhdGVkJyBdKTtcclxuXHJcblx0XHR0aGlzLmFuaW1hdGUodGhpcy5jb29yZGluYXRlcyhwb3NpdGlvbikpO1xyXG5cclxuXHRcdHRoaXMucmVsZWFzZShbICd0cmFuc2xhdGUnLCAndHJhbnNsYXRlZCcgXSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogTm9ybWFsaXplcyBhbiBhYnNvbHV0ZSBvciBhIHJlbGF0aXZlIHBvc2l0aW9uIG9mIGFuIGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiAtIFRoZSBhYnNvbHV0ZSBvciByZWxhdGl2ZSBwb3NpdGlvbiB0byBub3JtYWxpemUuXHJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbcmVsYXRpdmU9ZmFsc2VdIC0gV2hldGhlciB0aGUgZ2l2ZW4gcG9zaXRpb24gaXMgcmVsYXRpdmUgb3Igbm90LlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IC0gVGhlIG5vcm1hbGl6ZWQgcG9zaXRpb24uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbihwb3NpdGlvbiwgcmVsYXRpdmUpIHtcclxuXHRcdHZhciBuID0gdGhpcy5faXRlbXMubGVuZ3RoLFxyXG5cdFx0XHRtID0gcmVsYXRpdmUgPyAwIDogdGhpcy5fY2xvbmVzLmxlbmd0aDtcclxuXHJcblx0XHRpZiAoIXRoaXMuaXNOdW1lcmljKHBvc2l0aW9uKSB8fCBuIDwgMSkge1xyXG5cdFx0XHRwb3NpdGlvbiA9IHVuZGVmaW5lZDtcclxuXHRcdH0gZWxzZSBpZiAocG9zaXRpb24gPCAwIHx8IHBvc2l0aW9uID49IG4gKyBtKSB7XHJcblx0XHRcdHBvc2l0aW9uID0gKChwb3NpdGlvbiAtIG0gLyAyKSAlIG4gKyBuKSAlIG4gKyBtIC8gMjtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcG9zaXRpb247XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ29udmVydHMgYW4gYWJzb2x1dGUgcG9zaXRpb24gb2YgYW4gaXRlbSBpbnRvIGEgcmVsYXRpdmUgb25lLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb24gdG8gY29udmVydC5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfSAtIFRoZSBjb252ZXJ0ZWQgcG9zaXRpb24uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5yZWxhdGl2ZSA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHRwb3NpdGlvbiAtPSB0aGlzLl9jbG9uZXMubGVuZ3RoIC8gMjtcclxuXHRcdHJldHVybiB0aGlzLm5vcm1hbGl6ZShwb3NpdGlvbiwgdHJ1ZSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgbWF4aW11bSBwb3NpdGlvbiBmb3IgdGhlIGN1cnJlbnQgaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbcmVsYXRpdmU9ZmFsc2VdIC0gV2hldGhlciB0byByZXR1cm4gYW4gYWJzb2x1dGUgcG9zaXRpb24gb3IgYSByZWxhdGl2ZSBwb3NpdGlvbi5cclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUubWF4aW11bSA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XHJcblx0XHR2YXIgc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzLFxyXG5cdFx0XHRtYXhpbXVtID0gdGhpcy5fY29vcmRpbmF0ZXMubGVuZ3RoLFxyXG5cdFx0XHRpdGVyYXRvcixcclxuXHRcdFx0cmVjaXByb2NhbEl0ZW1zV2lkdGgsXHJcblx0XHRcdGVsZW1lbnRXaWR0aDtcclxuXHJcblx0XHRpZiAoc2V0dGluZ3MubG9vcCkge1xyXG5cdFx0XHRtYXhpbXVtID0gdGhpcy5fY2xvbmVzLmxlbmd0aCAvIDIgKyB0aGlzLl9pdGVtcy5sZW5ndGggLSAxO1xyXG5cdFx0fSBlbHNlIGlmIChzZXR0aW5ncy5hdXRvV2lkdGggfHwgc2V0dGluZ3MubWVyZ2UpIHtcclxuXHRcdFx0aXRlcmF0b3IgPSB0aGlzLl9pdGVtcy5sZW5ndGg7XHJcblx0XHRcdHJlY2lwcm9jYWxJdGVtc1dpZHRoID0gdGhpcy5faXRlbXNbLS1pdGVyYXRvcl0ud2lkdGgoKTtcclxuXHRcdFx0ZWxlbWVudFdpZHRoID0gdGhpcy4kZWxlbWVudC53aWR0aCgpO1xyXG5cdFx0XHR3aGlsZSAoaXRlcmF0b3ItLSkge1xyXG5cdFx0XHRcdHJlY2lwcm9jYWxJdGVtc1dpZHRoICs9IHRoaXMuX2l0ZW1zW2l0ZXJhdG9yXS53aWR0aCgpICsgdGhpcy5zZXR0aW5ncy5tYXJnaW47XHJcblx0XHRcdFx0aWYgKHJlY2lwcm9jYWxJdGVtc1dpZHRoID4gZWxlbWVudFdpZHRoKSB7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0bWF4aW11bSA9IGl0ZXJhdG9yICsgMTtcclxuXHRcdH0gZWxzZSBpZiAoc2V0dGluZ3MuY2VudGVyKSB7XHJcblx0XHRcdG1heGltdW0gPSB0aGlzLl9pdGVtcy5sZW5ndGggLSAxO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bWF4aW11bSA9IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIHNldHRpbmdzLml0ZW1zO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChyZWxhdGl2ZSkge1xyXG5cdFx0XHRtYXhpbXVtIC09IHRoaXMuX2Nsb25lcy5sZW5ndGggLyAyO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBNYXRoLm1heChtYXhpbXVtLCAwKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBtaW5pbXVtIHBvc2l0aW9uIGZvciB0aGUgY3VycmVudCBpdGVtLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZWxhdGl2ZT1mYWxzZV0gLSBXaGV0aGVyIHRvIHJldHVybiBhbiBhYnNvbHV0ZSBwb3NpdGlvbiBvciBhIHJlbGF0aXZlIHBvc2l0aW9uLlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5taW5pbXVtID0gZnVuY3Rpb24ocmVsYXRpdmUpIHtcclxuXHRcdHJldHVybiByZWxhdGl2ZSA/IDAgOiB0aGlzLl9jbG9uZXMubGVuZ3RoIC8gMjtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIGFuIGl0ZW0gYXQgdGhlIHNwZWNpZmllZCByZWxhdGl2ZSBwb3NpdGlvbi5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtwb3NpdGlvbl0gLSBUaGUgcmVsYXRpdmUgcG9zaXRpb24gb2YgdGhlIGl0ZW0uXHJcblx0ICogQHJldHVybiB7alF1ZXJ5fEFycmF5LjxqUXVlcnk+fSAtIFRoZSBpdGVtIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBvciBhbGwgaXRlbXMgaWYgbm8gcG9zaXRpb24gd2FzIGdpdmVuLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuaXRlbXMgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2l0ZW1zLnNsaWNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cG9zaXRpb24gPSB0aGlzLm5vcm1hbGl6ZShwb3NpdGlvbiwgdHJ1ZSk7XHJcblx0XHRyZXR1cm4gdGhpcy5faXRlbXNbcG9zaXRpb25dO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgYW4gaXRlbSBhdCB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHBvc2l0aW9uLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3Bvc2l0aW9uXSAtIFRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiB0aGUgaXRlbS5cclxuXHQgKiBAcmV0dXJuIHtqUXVlcnl8QXJyYXkuPGpRdWVyeT59IC0gVGhlIGl0ZW0gYXQgdGhlIGdpdmVuIHBvc2l0aW9uIG9yIGFsbCBpdGVtcyBpZiBubyBwb3NpdGlvbiB3YXMgZ2l2ZW4uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5tZXJnZXJzID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9tZXJnZXJzLnNsaWNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cG9zaXRpb24gPSB0aGlzLm5vcm1hbGl6ZShwb3NpdGlvbiwgdHJ1ZSk7XHJcblx0XHRyZXR1cm4gdGhpcy5fbWVyZ2Vyc1twb3NpdGlvbl07XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB0aGUgYWJzb2x1dGUgcG9zaXRpb25zIG9mIGNsb25lcyBmb3IgYW4gaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtwb3NpdGlvbl0gLSBUaGUgcmVsYXRpdmUgcG9zaXRpb24gb2YgdGhlIGl0ZW0uXHJcblx0ICogQHJldHVybnMge0FycmF5LjxOdW1iZXI+fSAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbnMgb2YgY2xvbmVzIGZvciB0aGUgaXRlbSBvciBhbGwgaWYgbm8gcG9zaXRpb24gd2FzIGdpdmVuLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuY2xvbmVzID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdHZhciBvZGQgPSB0aGlzLl9jbG9uZXMubGVuZ3RoIC8gMixcclxuXHRcdFx0ZXZlbiA9IG9kZCArIHRoaXMuX2l0ZW1zLmxlbmd0aCxcclxuXHRcdFx0bWFwID0gZnVuY3Rpb24oaW5kZXgpIHsgcmV0dXJuIGluZGV4ICUgMiA9PT0gMCA/IGV2ZW4gKyBpbmRleCAvIDIgOiBvZGQgLSAoaW5kZXggKyAxKSAvIDIgfTtcclxuXHJcblx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tYXAodGhpcy5fY2xvbmVzLCBmdW5jdGlvbih2LCBpKSB7IHJldHVybiBtYXAoaSkgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuICQubWFwKHRoaXMuX2Nsb25lcywgZnVuY3Rpb24odiwgaSkgeyByZXR1cm4gdiA9PT0gcG9zaXRpb24gPyBtYXAoaSkgOiBudWxsIH0pO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgdGhlIGN1cnJlbnQgYW5pbWF0aW9uIHNwZWVkLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkXSAtIFRoZSBhbmltYXRpb24gc3BlZWQgaW4gbWlsbGlzZWNvbmRzIG9yIG5vdGhpbmcgdG8gbGVhdmUgaXQgdW5jaGFuZ2VkLlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IC0gVGhlIGN1cnJlbnQgYW5pbWF0aW9uIHNwZWVkIGluIG1pbGxpc2Vjb25kcy5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnNwZWVkID0gZnVuY3Rpb24oc3BlZWQpIHtcclxuXHRcdGlmIChzcGVlZCAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHRoaXMuX3NwZWVkID0gc3BlZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3NwZWVkO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgdGhlIGNvb3JkaW5hdGUgb2YgYW4gaXRlbS5cclxuXHQgKiBAdG9kbyBUaGUgbmFtZSBvZiB0aGlzIG1ldGhvZCBpcyBtaXNzbGVhbmRpbmcuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgaXRlbSB3aXRoaW4gYG1pbmltdW0oKWAgYW5kIGBtYXhpbXVtKClgLlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ8QXJyYXkuPE51bWJlcj59IC0gVGhlIGNvb3JkaW5hdGUgb2YgdGhlIGl0ZW0gaW4gcGl4ZWwgb3IgYWxsIGNvb3JkaW5hdGVzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuY29vcmRpbmF0ZXMgPSBmdW5jdGlvbihwb3NpdGlvbikge1xyXG5cdFx0dmFyIG11bHRpcGxpZXIgPSAxLFxyXG5cdFx0XHRuZXdQb3NpdGlvbiA9IHBvc2l0aW9uIC0gMSxcclxuXHRcdFx0Y29vcmRpbmF0ZTtcclxuXHJcblx0XHRpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tYXAodGhpcy5fY29vcmRpbmF0ZXMsICQucHJveHkoZnVuY3Rpb24oY29vcmRpbmF0ZSwgaW5kZXgpIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5jb29yZGluYXRlcyhpbmRleCk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5jZW50ZXIpIHtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucnRsKSB7XHJcblx0XHRcdFx0bXVsdGlwbGllciA9IC0xO1xyXG5cdFx0XHRcdG5ld1Bvc2l0aW9uID0gcG9zaXRpb24gKyAxO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb29yZGluYXRlID0gdGhpcy5fY29vcmRpbmF0ZXNbcG9zaXRpb25dO1xyXG5cdFx0XHRjb29yZGluYXRlICs9ICh0aGlzLndpZHRoKCkgLSBjb29yZGluYXRlICsgKHRoaXMuX2Nvb3JkaW5hdGVzW25ld1Bvc2l0aW9uXSB8fCAwKSkgLyAyICogbXVsdGlwbGllcjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvb3JkaW5hdGUgPSB0aGlzLl9jb29yZGluYXRlc1tuZXdQb3NpdGlvbl0gfHwgMDtcclxuXHRcdH1cclxuXHJcblx0XHRjb29yZGluYXRlID0gTWF0aC5jZWlsKGNvb3JkaW5hdGUpO1xyXG5cclxuXHRcdHJldHVybiBjb29yZGluYXRlO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIENhbGN1bGF0ZXMgdGhlIHNwZWVkIGZvciBhIHRyYW5zbGF0aW9uLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gZnJvbSAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgc3RhcnQgaXRlbS5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gdG8gLSBUaGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIHRhcmdldCBpdGVtLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbZmFjdG9yPXVuZGVmaW5lZF0gLSBUaGUgdGltZSBmYWN0b3IgaW4gbWlsbGlzZWNvbmRzLlxyXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IC0gVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgdHJhbnNsYXRpb24uXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5kdXJhdGlvbiA9IGZ1bmN0aW9uKGZyb20sIHRvLCBmYWN0b3IpIHtcclxuXHRcdGlmIChmYWN0b3IgPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIDA7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KE1hdGguYWJzKHRvIC0gZnJvbSksIDEpLCA2KSAqIE1hdGguYWJzKChmYWN0b3IgfHwgdGhpcy5zZXR0aW5ncy5zbWFydFNwZWVkKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2xpZGVzIHRvIHRoZSBzcGVjaWZpZWQgaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHBvc2l0aW9uIC0gVGhlIHBvc2l0aW9uIG9mIHRoZSBpdGVtLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWRdIC0gVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgdHJhbnNpdGlvbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnRvID0gZnVuY3Rpb24ocG9zaXRpb24sIHNwZWVkKSB7XHJcblx0XHR2YXIgY3VycmVudCA9IHRoaXMuY3VycmVudCgpLFxyXG5cdFx0XHRyZXZlcnQgPSBudWxsLFxyXG5cdFx0XHRkaXN0YW5jZSA9IHBvc2l0aW9uIC0gdGhpcy5yZWxhdGl2ZShjdXJyZW50KSxcclxuXHRcdFx0ZGlyZWN0aW9uID0gKGRpc3RhbmNlID4gMCkgLSAoZGlzdGFuY2UgPCAwKSxcclxuXHRcdFx0aXRlbXMgPSB0aGlzLl9pdGVtcy5sZW5ndGgsXHJcblx0XHRcdG1pbmltdW0gPSB0aGlzLm1pbmltdW0oKSxcclxuXHRcdFx0bWF4aW11bSA9IHRoaXMubWF4aW11bSgpO1xyXG5cclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmxvb3ApIHtcclxuXHRcdFx0aWYgKCF0aGlzLnNldHRpbmdzLnJld2luZCAmJiBNYXRoLmFicyhkaXN0YW5jZSkgPiBpdGVtcyAvIDIpIHtcclxuXHRcdFx0XHRkaXN0YW5jZSArPSBkaXJlY3Rpb24gKiAtMSAqIGl0ZW1zO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwb3NpdGlvbiA9IGN1cnJlbnQgKyBkaXN0YW5jZTtcclxuXHRcdFx0cmV2ZXJ0ID0gKChwb3NpdGlvbiAtIG1pbmltdW0pICUgaXRlbXMgKyBpdGVtcykgJSBpdGVtcyArIG1pbmltdW07XHJcblxyXG5cdFx0XHRpZiAocmV2ZXJ0ICE9PSBwb3NpdGlvbiAmJiByZXZlcnQgLSBkaXN0YW5jZSA8PSBtYXhpbXVtICYmIHJldmVydCAtIGRpc3RhbmNlID4gMCkge1xyXG5cdFx0XHRcdGN1cnJlbnQgPSByZXZlcnQgLSBkaXN0YW5jZTtcclxuXHRcdFx0XHRwb3NpdGlvbiA9IHJldmVydDtcclxuXHRcdFx0XHR0aGlzLnJlc2V0KGN1cnJlbnQpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuc2V0dGluZ3MucmV3aW5kKSB7XHJcblx0XHRcdG1heGltdW0gKz0gMTtcclxuXHRcdFx0cG9zaXRpb24gPSAocG9zaXRpb24gJSBtYXhpbXVtICsgbWF4aW11bSkgJSBtYXhpbXVtO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cG9zaXRpb24gPSBNYXRoLm1heChtaW5pbXVtLCBNYXRoLm1pbihtYXhpbXVtLCBwb3NpdGlvbikpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc3BlZWQodGhpcy5kdXJhdGlvbihjdXJyZW50LCBwb3NpdGlvbiwgc3BlZWQpKTtcclxuXHRcdHRoaXMuY3VycmVudChwb3NpdGlvbik7XHJcblxyXG5cdFx0aWYgKHRoaXMuJGVsZW1lbnQuaXMoJzp2aXNpYmxlJykpIHtcclxuXHRcdFx0dGhpcy51cGRhdGUoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTbGlkZXMgdG8gdGhlIG5leHQgaXRlbS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZF0gLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgZm9yIHRoZSB0cmFuc2l0aW9uLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHNwZWVkKSB7XHJcblx0XHRzcGVlZCA9IHNwZWVkIHx8IGZhbHNlO1xyXG5cdFx0dGhpcy50byh0aGlzLnJlbGF0aXZlKHRoaXMuY3VycmVudCgpKSArIDEsIHNwZWVkKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTbGlkZXMgdG8gdGhlIHByZXZpb3VzIGl0ZW0uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWRdIC0gVGhlIHRpbWUgaW4gbWlsbGlzZWNvbmRzIGZvciB0aGUgdHJhbnNpdGlvbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnByZXYgPSBmdW5jdGlvbihzcGVlZCkge1xyXG5cdFx0c3BlZWQgPSBzcGVlZCB8fCBmYWxzZTtcclxuXHRcdHRoaXMudG8odGhpcy5yZWxhdGl2ZSh0aGlzLmN1cnJlbnQoKSkgLSAxLCBzcGVlZCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogSGFuZGxlcyB0aGUgZW5kIG9mIGFuIGFuaW1hdGlvbi5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBUaGUgZXZlbnQgYXJndW1lbnRzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUub25UcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHJcblx0XHQvLyBpZiBjc3MyIGFuaW1hdGlvbiB0aGVuIGV2ZW50IG9iamVjdCBpcyB1bmRlZmluZWRcclxuXHRcdGlmIChldmVudCAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuXHRcdFx0Ly8gQ2F0Y2ggb25seSBvd2wtc3RhZ2UgdHJhbnNpdGlvbkVuZCBldmVudFxyXG5cdFx0XHRpZiAoKGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50Lm9yaWdpbmFsVGFyZ2V0KSAhPT0gdGhpcy4kc3RhZ2UuZ2V0KDApKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5sZWF2ZSgnYW5pbWF0aW5nJyk7XHJcblx0XHR0aGlzLnRyaWdnZXIoJ3RyYW5zbGF0ZWQnKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHZpZXdwb3J0IHdpZHRoLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IC0gVGhlIHdpZHRoIGluIHBpeGVsLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUudmlld3BvcnQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3aWR0aDtcclxuXHRcdGlmICh0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUJhc2VFbGVtZW50ICE9PSB3aW5kb3cpIHtcclxuXHRcdFx0d2lkdGggPSAkKHRoaXMub3B0aW9ucy5yZXNwb25zaXZlQmFzZUVsZW1lbnQpLndpZHRoKCk7XHJcblx0XHR9IGVsc2UgaWYgKHdpbmRvdy5pbm5lcldpZHRoKSB7XHJcblx0XHRcdHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcblx0XHR9IGVsc2UgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgpIHtcclxuXHRcdFx0d2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ0NhbiBub3QgZGV0ZWN0IHZpZXdwb3J0IHdpZHRoLicpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHdpZHRoO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlcGxhY2VzIHRoZSBjdXJyZW50IGNvbnRlbnQuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8alF1ZXJ5fFN0cmluZ30gY29udGVudCAtIFRoZSBuZXcgY29udGVudC5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbihjb250ZW50KSB7XHJcblx0XHR0aGlzLiRzdGFnZS5lbXB0eSgpO1xyXG5cdFx0dGhpcy5faXRlbXMgPSBbXTtcclxuXHJcblx0XHRpZiAoY29udGVudCkge1xyXG5cdFx0XHRjb250ZW50ID0gKGNvbnRlbnQgaW5zdGFuY2VvZiBqUXVlcnkpID8gY29udGVudCA6ICQoY29udGVudCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubmVzdGVkSXRlbVNlbGVjdG9yKSB7XHJcblx0XHRcdGNvbnRlbnQgPSBjb250ZW50LmZpbmQoJy4nICsgdGhpcy5zZXR0aW5ncy5uZXN0ZWRJdGVtU2VsZWN0b3IpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnRlbnQuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5ub2RlVHlwZSA9PT0gMTtcclxuXHRcdH0pLmVhY2goJC5wcm94eShmdW5jdGlvbihpbmRleCwgaXRlbSkge1xyXG5cdFx0XHRpdGVtID0gdGhpcy5wcmVwYXJlKGl0ZW0pO1xyXG5cdFx0XHR0aGlzLiRzdGFnZS5hcHBlbmQoaXRlbSk7XHJcblx0XHRcdHRoaXMuX2l0ZW1zLnB1c2goaXRlbSk7XHJcblx0XHRcdHRoaXMuX21lcmdlcnMucHVzaChpdGVtLmZpbmQoJ1tkYXRhLW1lcmdlXScpLmFkZEJhY2soJ1tkYXRhLW1lcmdlXScpLmF0dHIoJ2RhdGEtbWVyZ2UnKSAqIDEgfHwgMSk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5yZXNldCh0aGlzLmlzTnVtZXJpYyh0aGlzLnNldHRpbmdzLnN0YXJ0UG9zaXRpb24pID8gdGhpcy5zZXR0aW5ncy5zdGFydFBvc2l0aW9uIDogMCk7XHJcblxyXG5cdFx0dGhpcy5pbnZhbGlkYXRlKCdpdGVtcycpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFkZHMgYW4gaXRlbS5cclxuXHQgKiBAdG9kbyBVc2UgYGl0ZW1gIGluc3RlYWQgb2YgYGNvbnRlbnRgIGZvciB0aGUgZXZlbnQgYXJndW1lbnRzLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge0hUTUxFbGVtZW50fGpRdWVyeXxTdHJpbmd9IGNvbnRlbnQgLSBUaGUgaXRlbSBjb250ZW50IHRvIGFkZC5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3Bvc2l0aW9uXSAtIFRoZSByZWxhdGl2ZSBwb3NpdGlvbiBhdCB3aGljaCB0byBpbnNlcnQgdGhlIGl0ZW0gb3RoZXJ3aXNlIHRoZSBpdGVtIHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGNvbnRlbnQsIHBvc2l0aW9uKSB7XHJcblx0XHR2YXIgY3VycmVudCA9IHRoaXMucmVsYXRpdmUodGhpcy5fY3VycmVudCk7XHJcblxyXG5cdFx0cG9zaXRpb24gPSBwb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gdGhpcy5faXRlbXMubGVuZ3RoIDogdGhpcy5ub3JtYWxpemUocG9zaXRpb24sIHRydWUpO1xyXG5cdFx0Y29udGVudCA9IGNvbnRlbnQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZW50IDogJChjb250ZW50KTtcclxuXHJcblx0XHR0aGlzLnRyaWdnZXIoJ2FkZCcsIHsgY29udGVudDogY29udGVudCwgcG9zaXRpb246IHBvc2l0aW9uIH0pO1xyXG5cclxuXHRcdGNvbnRlbnQgPSB0aGlzLnByZXBhcmUoY29udGVudCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuX2l0ZW1zLmxlbmd0aCA9PT0gMCB8fCBwb3NpdGlvbiA9PT0gdGhpcy5faXRlbXMubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMuX2l0ZW1zLmxlbmd0aCA9PT0gMCAmJiB0aGlzLiRzdGFnZS5hcHBlbmQoY29udGVudCk7XHJcblx0XHRcdHRoaXMuX2l0ZW1zLmxlbmd0aCAhPT0gMCAmJiB0aGlzLl9pdGVtc1twb3NpdGlvbiAtIDFdLmFmdGVyKGNvbnRlbnQpO1xyXG5cdFx0XHR0aGlzLl9pdGVtcy5wdXNoKGNvbnRlbnQpO1xyXG5cdFx0XHR0aGlzLl9tZXJnZXJzLnB1c2goY29udGVudC5maW5kKCdbZGF0YS1tZXJnZV0nKS5hZGRCYWNrKCdbZGF0YS1tZXJnZV0nKS5hdHRyKCdkYXRhLW1lcmdlJykgKiAxIHx8IDEpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5faXRlbXNbcG9zaXRpb25dLmJlZm9yZShjb250ZW50KTtcclxuXHRcdFx0dGhpcy5faXRlbXMuc3BsaWNlKHBvc2l0aW9uLCAwLCBjb250ZW50KTtcclxuXHRcdFx0dGhpcy5fbWVyZ2Vycy5zcGxpY2UocG9zaXRpb24sIDAsIGNvbnRlbnQuZmluZCgnW2RhdGEtbWVyZ2VdJykuYWRkQmFjaygnW2RhdGEtbWVyZ2VdJykuYXR0cignZGF0YS1tZXJnZScpICogMSB8fCAxKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9pdGVtc1tjdXJyZW50XSAmJiB0aGlzLnJlc2V0KHRoaXMuX2l0ZW1zW2N1cnJlbnRdLmluZGV4KCkpO1xyXG5cclxuXHRcdHRoaXMuaW52YWxpZGF0ZSgnaXRlbXMnKTtcclxuXHJcblx0XHR0aGlzLnRyaWdnZXIoJ2FkZGVkJywgeyBjb250ZW50OiBjb250ZW50LCBwb3NpdGlvbjogcG9zaXRpb24gfSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlcyBhbiBpdGVtIGJ5IGl0cyBwb3NpdGlvbi5cclxuXHQgKiBAdG9kbyBVc2UgYGl0ZW1gIGluc3RlYWQgb2YgYGNvbnRlbnRgIGZvciB0aGUgZXZlbnQgYXJndW1lbnRzLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gLSBUaGUgcmVsYXRpdmUgcG9zaXRpb24gb2YgdGhlIGl0ZW0gdG8gcmVtb3ZlLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcclxuXHRcdHBvc2l0aW9uID0gdGhpcy5ub3JtYWxpemUocG9zaXRpb24sIHRydWUpO1xyXG5cclxuXHRcdGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnRyaWdnZXIoJ3JlbW92ZScsIHsgY29udGVudDogdGhpcy5faXRlbXNbcG9zaXRpb25dLCBwb3NpdGlvbjogcG9zaXRpb24gfSk7XHJcblxyXG5cdFx0dGhpcy5faXRlbXNbcG9zaXRpb25dLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5faXRlbXMuc3BsaWNlKHBvc2l0aW9uLCAxKTtcclxuXHRcdHRoaXMuX21lcmdlcnMuc3BsaWNlKHBvc2l0aW9uLCAxKTtcclxuXHJcblx0XHR0aGlzLmludmFsaWRhdGUoJ2l0ZW1zJyk7XHJcblxyXG5cdFx0dGhpcy50cmlnZ2VyKCdyZW1vdmVkJywgeyBjb250ZW50OiBudWxsLCBwb3NpdGlvbjogcG9zaXRpb24gfSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUHJlbG9hZHMgaW1hZ2VzIHdpdGggYXV0byB3aWR0aC5cclxuXHQgKiBAdG9kbyBSZXBsYWNlIGJ5IGEgbW9yZSBnZW5lcmljIGFwcHJvYWNoXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucHJlbG9hZEF1dG9XaWR0aEltYWdlcyA9IGZ1bmN0aW9uKGltYWdlcykge1xyXG5cdFx0aW1hZ2VzLmVhY2goJC5wcm94eShmdW5jdGlvbihpLCBlbGVtZW50KSB7XHJcblx0XHRcdHRoaXMuZW50ZXIoJ3ByZS1sb2FkaW5nJyk7XHJcblx0XHRcdGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG5cdFx0XHQkKG5ldyBJbWFnZSgpKS5vbmUoJ2xvYWQnLCAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRlbGVtZW50LmF0dHIoJ3NyYycsIGUudGFyZ2V0LnNyYyk7XHJcblx0XHRcdFx0ZWxlbWVudC5jc3MoJ29wYWNpdHknLCAxKTtcclxuXHRcdFx0XHR0aGlzLmxlYXZlKCdwcmUtbG9hZGluZycpO1xyXG5cdFx0XHRcdCF0aGlzLmlzKCdwcmUtbG9hZGluZycpICYmICF0aGlzLmlzKCdpbml0aWFsaXppbmcnKSAmJiB0aGlzLnJlZnJlc2goKTtcclxuXHRcdFx0fSwgdGhpcykpLmF0dHIoJ3NyYycsIGVsZW1lbnQuYXR0cignc3JjJykgfHwgZWxlbWVudC5hdHRyKCdkYXRhLXNyYycpIHx8IGVsZW1lbnQuYXR0cignZGF0YS1zcmMtcmV0aW5hJykpO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSBjYXJvdXNlbC5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0dGhpcy4kZWxlbWVudC5vZmYoJy5vd2wuY29yZScpO1xyXG5cdFx0dGhpcy4kc3RhZ2Uub2ZmKCcub3dsLmNvcmUnKTtcclxuXHRcdCQoZG9jdW1lbnQpLm9mZignLm93bC5jb3JlJyk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MucmVzcG9uc2l2ZSAhPT0gZmFsc2UpIHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJlc2l6ZVRpbWVyKTtcclxuXHRcdFx0dGhpcy5vZmYod2luZG93LCAncmVzaXplJywgdGhpcy5faGFuZGxlcnMub25UaHJvdHRsZWRSZXNpemUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAodmFyIGkgaW4gdGhpcy5fcGx1Z2lucykge1xyXG5cdFx0XHR0aGlzLl9wbHVnaW5zW2ldLmRlc3Ryb3koKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLiRzdGFnZS5jaGlsZHJlbignLmNsb25lZCcpLnJlbW92ZSgpO1xyXG5cclxuXHRcdHRoaXMuJHN0YWdlLnVud3JhcCgpO1xyXG5cdFx0dGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS5jb250ZW50cygpLnVud3JhcCgpO1xyXG5cdFx0dGhpcy4kc3RhZ2UuY2hpbGRyZW4oKS51bndyYXAoKTtcclxuXHJcblx0XHR0aGlzLiRlbGVtZW50XHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMucmVmcmVzaENsYXNzKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmxvYWRpbmdDbGFzcylcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5sb2FkZWRDbGFzcylcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5ydGxDbGFzcylcclxuXHRcdFx0LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5kcmFnQ2xhc3MpXHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuZ3JhYkNsYXNzKVxyXG5cdFx0XHQuYXR0cignY2xhc3MnLCB0aGlzLiRlbGVtZW50LmF0dHIoJ2NsYXNzJykucmVwbGFjZShuZXcgUmVnRXhwKHRoaXMub3B0aW9ucy5yZXNwb25zaXZlQ2xhc3MgKyAnLVxcXFxTK1xcXFxzJywgJ2cnKSwgJycpKVxyXG5cdFx0XHQucmVtb3ZlRGF0YSgnb3dsLmNhcm91c2VsJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogT3BlcmF0b3JzIHRvIGNhbGN1bGF0ZSByaWdodC10by1sZWZ0IGFuZCBsZWZ0LXRvLXJpZ2h0LlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW2FdIC0gVGhlIGxlZnQgc2lkZSBvcGVyYW5kLlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbb10gLSBUaGUgb3BlcmF0b3IuXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtiXSAtIFRoZSByaWdodCBzaWRlIG9wZXJhbmQuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5vcCA9IGZ1bmN0aW9uKGEsIG8sIGIpIHtcclxuXHRcdHZhciBydGwgPSB0aGlzLnNldHRpbmdzLnJ0bDtcclxuXHRcdHN3aXRjaCAobykge1xyXG5cdFx0XHRjYXNlICc8JzpcclxuXHRcdFx0XHRyZXR1cm4gcnRsID8gYSA+IGIgOiBhIDwgYjtcclxuXHRcdFx0Y2FzZSAnPic6XHJcblx0XHRcdFx0cmV0dXJuIHJ0bCA/IGEgPCBiIDogYSA+IGI7XHJcblx0XHRcdGNhc2UgJz49JzpcclxuXHRcdFx0XHRyZXR1cm4gcnRsID8gYSA8PSBiIDogYSA+PSBiO1xyXG5cdFx0XHRjYXNlICc8PSc6XHJcblx0XHRcdFx0cmV0dXJuIHJ0bCA/IGEgPj0gYiA6IGEgPD0gYjtcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBBdHRhY2hlcyB0byBhbiBpbnRlcm5hbCBldmVudC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIFRoZSBldmVudCBzb3VyY2UuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IC0gVGhlIGV2ZW50IG5hbWUuXHJcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgLSBUaGUgZXZlbnQgaGFuZGxlciB0byBhdHRhY2guXHJcblx0ICogQHBhcmFtIHtCb29sZWFufSBjYXB0dXJlIC0gV2V0aGVyIHRoZSBldmVudCBzaG91bGQgYmUgaGFuZGxlZCBhdCB0aGUgY2FwdHVyaW5nIHBoYXNlIG9yIG5vdC5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oZWxlbWVudCwgZXZlbnQsIGxpc3RlbmVyLCBjYXB0dXJlKSB7XHJcblx0XHRpZiAoZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKSB7XHJcblx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIsIGNhcHR1cmUpO1xyXG5cdFx0fSBlbHNlIGlmIChlbGVtZW50LmF0dGFjaEV2ZW50KSB7XHJcblx0XHRcdGVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50LCBsaXN0ZW5lcik7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGV0YWNoZXMgZnJvbSBhbiBpbnRlcm5hbCBldmVudC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudCAtIFRoZSBldmVudCBzb3VyY2UuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IC0gVGhlIGV2ZW50IG5hbWUuXHJcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgLSBUaGUgYXR0YWNoZWQgZXZlbnQgaGFuZGxlciB0byBkZXRhY2guXHJcblx0ICogQHBhcmFtIHtCb29sZWFufSBjYXB0dXJlIC0gV2V0aGVyIHRoZSBhdHRhY2hlZCBldmVudCBoYW5kbGVyIHdhcyByZWdpc3RlcmVkIGFzIGEgY2FwdHVyaW5nIGxpc3RlbmVyIG9yIG5vdC5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKGVsZW1lbnQsIGV2ZW50LCBsaXN0ZW5lciwgY2FwdHVyZSkge1xyXG5cdFx0aWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xyXG5cdFx0XHRlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyLCBjYXB0dXJlKTtcclxuXHRcdH0gZWxzZSBpZiAoZWxlbWVudC5kZXRhY2hFdmVudCkge1xyXG5cdFx0XHRlbGVtZW50LmRldGFjaEV2ZW50KCdvbicgKyBldmVudCwgbGlzdGVuZXIpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRyaWdnZXJzIGEgcHVibGljIGV2ZW50LlxyXG5cdCAqIEB0b2RvIFJlbW92ZSBgc3RhdHVzYCwgYHJlbGF0ZWRUYXJnZXRgIHNob3VsZCBiZSB1c2VkIGluc3RlYWQuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gVGhlIGV2ZW50IG5hbWUuXHJcblx0ICogQHBhcmFtIHsqfSBbZGF0YT1udWxsXSAtIFRoZSBldmVudCBkYXRhLlxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbbmFtZXNwYWNlPWNhcm91c2VsXSAtIFRoZSBldmVudCBuYW1lc3BhY2UuXHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtzdGF0ZV0gLSBUaGUgc3RhdGUgd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBldmVudC5cclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnRlcj1mYWxzZV0gLSBJbmRpY2F0ZXMgaWYgdGhlIGNhbGwgZW50ZXJzIHRoZSBzcGVjaWZpZWQgc3RhdGUgb3Igbm90LlxyXG5cdCAqIEByZXR1cm5zIHtFdmVudH0gLSBUaGUgZXZlbnQgYXJndW1lbnRzLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uKG5hbWUsIGRhdGEsIG5hbWVzcGFjZSwgc3RhdGUsIGVudGVyKSB7XHJcblx0XHR2YXIgc3RhdHVzID0ge1xyXG5cdFx0XHRpdGVtOiB7IGNvdW50OiB0aGlzLl9pdGVtcy5sZW5ndGgsIGluZGV4OiB0aGlzLmN1cnJlbnQoKSB9XHJcblx0XHR9LCBoYW5kbGVyID0gJC5jYW1lbENhc2UoXHJcblx0XHRcdCQuZ3JlcChbICdvbicsIG5hbWUsIG5hbWVzcGFjZSBdLCBmdW5jdGlvbih2KSB7IHJldHVybiB2IH0pXHJcblx0XHRcdFx0LmpvaW4oJy0nKS50b0xvd2VyQ2FzZSgpXHJcblx0XHQpLCBldmVudCA9ICQuRXZlbnQoXHJcblx0XHRcdFsgbmFtZSwgJ293bCcsIG5hbWVzcGFjZSB8fCAnY2Fyb3VzZWwnIF0uam9pbignLicpLnRvTG93ZXJDYXNlKCksXHJcblx0XHRcdCQuZXh0ZW5kKHsgcmVsYXRlZFRhcmdldDogdGhpcyB9LCBzdGF0dXMsIGRhdGEpXHJcblx0XHQpO1xyXG5cclxuXHRcdGlmICghdGhpcy5fc3VwcmVzc1tuYW1lXSkge1xyXG5cdFx0XHQkLmVhY2godGhpcy5fcGx1Z2lucywgZnVuY3Rpb24obmFtZSwgcGx1Z2luKSB7XHJcblx0XHRcdFx0aWYgKHBsdWdpbi5vblRyaWdnZXIpIHtcclxuXHRcdFx0XHRcdHBsdWdpbi5vblRyaWdnZXIoZXZlbnQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyKHsgdHlwZTogT3dsLlR5cGUuRXZlbnQsIG5hbWU6IG5hbWUgfSk7XHJcblx0XHRcdHRoaXMuJGVsZW1lbnQudHJpZ2dlcihldmVudCk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncyAmJiB0eXBlb2YgdGhpcy5zZXR0aW5nc1toYW5kbGVyXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3NbaGFuZGxlcl0uY2FsbCh0aGlzLCBldmVudCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZXZlbnQ7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRW50ZXJzIGEgc3RhdGUuXHJcblx0ICogQHBhcmFtIG5hbWUgLSBUaGUgc3RhdGUgbmFtZS5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLmVudGVyID0gZnVuY3Rpb24obmFtZSkge1xyXG5cdFx0JC5lYWNoKFsgbmFtZSBdLmNvbmNhdCh0aGlzLl9zdGF0ZXMudGFnc1tuYW1lXSB8fCBbXSksICQucHJveHkoZnVuY3Rpb24oaSwgbmFtZSkge1xyXG5cdFx0XHRpZiAodGhpcy5fc3RhdGVzLmN1cnJlbnRbbmFtZV0gPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHRoaXMuX3N0YXRlcy5jdXJyZW50W25hbWVdID0gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fc3RhdGVzLmN1cnJlbnRbbmFtZV0rKztcclxuXHRcdH0sIHRoaXMpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBMZWF2ZXMgYSBzdGF0ZS5cclxuXHQgKiBAcGFyYW0gbmFtZSAtIFRoZSBzdGF0ZSBuYW1lLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUubGVhdmUgPSBmdW5jdGlvbihuYW1lKSB7XHJcblx0XHQkLmVhY2goWyBuYW1lIF0uY29uY2F0KHRoaXMuX3N0YXRlcy50YWdzW25hbWVdIHx8IFtdKSwgJC5wcm94eShmdW5jdGlvbihpLCBuYW1lKSB7XHJcblx0XHRcdHRoaXMuX3N0YXRlcy5jdXJyZW50W25hbWVdLS07XHJcblx0XHR9LCB0aGlzKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogUmVnaXN0ZXJzIGFuIGV2ZW50IG9yIHN0YXRlLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IC0gVGhlIGV2ZW50IG9yIHN0YXRlIHRvIHJlZ2lzdGVyLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbihvYmplY3QpIHtcclxuXHRcdGlmIChvYmplY3QudHlwZSA9PT0gT3dsLlR5cGUuRXZlbnQpIHtcclxuXHRcdFx0aWYgKCEkLmV2ZW50LnNwZWNpYWxbb2JqZWN0Lm5hbWVdKSB7XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsW29iamVjdC5uYW1lXSA9IHt9O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoISQuZXZlbnQuc3BlY2lhbFtvYmplY3QubmFtZV0ub3dsKSB7XHJcblx0XHRcdFx0dmFyIF9kZWZhdWx0ID0gJC5ldmVudC5zcGVjaWFsW29iamVjdC5uYW1lXS5fZGVmYXVsdDtcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWxbb2JqZWN0Lm5hbWVdLl9kZWZhdWx0ID0gZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdFx0aWYgKF9kZWZhdWx0ICYmIF9kZWZhdWx0LmFwcGx5ICYmICghZS5uYW1lc3BhY2UgfHwgZS5uYW1lc3BhY2UuaW5kZXhPZignb3dsJykgPT09IC0xKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gX2RlZmF1bHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiBlLm5hbWVzcGFjZSAmJiBlLm5hbWVzcGFjZS5pbmRleE9mKCdvd2wnKSA+IC0xO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsW29iamVjdC5uYW1lXS5vd2wgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKG9iamVjdC50eXBlID09PSBPd2wuVHlwZS5TdGF0ZSkge1xyXG5cdFx0XHRpZiAoIXRoaXMuX3N0YXRlcy50YWdzW29iamVjdC5uYW1lXSkge1xyXG5cdFx0XHRcdHRoaXMuX3N0YXRlcy50YWdzW29iamVjdC5uYW1lXSA9IG9iamVjdC50YWdzO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuX3N0YXRlcy50YWdzW29iamVjdC5uYW1lXSA9IHRoaXMuX3N0YXRlcy50YWdzW29iamVjdC5uYW1lXS5jb25jYXQob2JqZWN0LnRhZ3MpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9zdGF0ZXMudGFnc1tvYmplY3QubmFtZV0gPSAkLmdyZXAodGhpcy5fc3RhdGVzLnRhZ3Nbb2JqZWN0Lm5hbWVdLCAkLnByb3h5KGZ1bmN0aW9uKHRhZywgaSkge1xyXG5cdFx0XHRcdHJldHVybiAkLmluQXJyYXkodGFnLCB0aGlzLl9zdGF0ZXMudGFnc1tvYmplY3QubmFtZV0pID09PSBpO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU3VwcHJlc3NlcyBldmVudHMuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7QXJyYXkuPFN0cmluZz59IGV2ZW50cyAtIFRoZSBldmVudHMgdG8gc3VwcHJlc3MuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5zdXBwcmVzcyA9IGZ1bmN0aW9uKGV2ZW50cykge1xyXG5cdFx0JC5lYWNoKGV2ZW50cywgJC5wcm94eShmdW5jdGlvbihpbmRleCwgZXZlbnQpIHtcclxuXHRcdFx0dGhpcy5fc3VwcmVzc1tldmVudF0gPSB0cnVlO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbGVhc2VzIHN1cHByZXNzZWQgZXZlbnRzLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fSBldmVudHMgLSBUaGUgZXZlbnRzIHRvIHJlbGVhc2UuXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24oZXZlbnRzKSB7XHJcblx0XHQkLmVhY2goZXZlbnRzLCAkLnByb3h5KGZ1bmN0aW9uKGluZGV4LCBldmVudCkge1xyXG5cdFx0XHRkZWxldGUgdGhpcy5fc3VwcmVzc1tldmVudF07XHJcblx0XHR9LCB0aGlzKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogR2V0cyB1bmlmaWVkIHBvaW50ZXIgY29vcmRpbmF0ZXMgZnJvbSBldmVudC5cclxuXHQgKiBAdG9kbyAjMjYxXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7RXZlbnR9IC0gVGhlIGBtb3VzZWRvd25gIG9yIGB0b3VjaHN0YXJ0YCBldmVudC5cclxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSAtIENvbnRhaW5zIGB4YCBhbmQgYHlgIGNvb3JkaW5hdGVzIG9mIGN1cnJlbnQgcG9pbnRlciBwb3NpdGlvbi5cclxuXHQgKi9cclxuXHRPd2wucHJvdG90eXBlLnBvaW50ZXIgPSBmdW5jdGlvbihldmVudCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IHsgeDogbnVsbCwgeTogbnVsbCB9O1xyXG5cclxuXHRcdGV2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudCB8fCBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XHJcblxyXG5cdFx0ZXZlbnQgPSBldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID9cclxuXHRcdFx0ZXZlbnQudG91Y2hlc1swXSA6IGV2ZW50LmNoYW5nZWRUb3VjaGVzICYmIGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aCA/XHJcblx0XHRcdFx0ZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0gOiBldmVudDtcclxuXHJcblx0XHRpZiAoZXZlbnQucGFnZVgpIHtcclxuXHRcdFx0cmVzdWx0LnggPSBldmVudC5wYWdlWDtcclxuXHRcdFx0cmVzdWx0LnkgPSBldmVudC5wYWdlWTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlc3VsdC54ID0gZXZlbnQuY2xpZW50WDtcclxuXHRcdFx0cmVzdWx0LnkgPSBldmVudC5jbGllbnRZO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGV0ZXJtaW5lcyBpZiB0aGUgaW5wdXQgaXMgYSBOdW1iZXIgb3Igc29tZXRoaW5nIHRoYXQgY2FuIGJlIGNvZXJjZWQgdG8gYSBOdW1iZXJcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfE9iamVjdHxBcnJheXxCb29sZWFufFJlZ0V4cHxGdW5jdGlvbnxTeW1ib2x9IC0gVGhlIGlucHV0IHRvIGJlIHRlc3RlZFxyXG5cdCAqIEByZXR1cm5zIHtCb29sZWFufSAtIEFuIGluZGljYXRpb24gaWYgdGhlIGlucHV0IGlzIGEgTnVtYmVyIG9yIGNhbiBiZSBjb2VyY2VkIHRvIGEgTnVtYmVyXHJcblx0ICovXHJcblx0T3dsLnByb3RvdHlwZS5pc051bWVyaWMgPSBmdW5jdGlvbihudW1iZXIpIHtcclxuXHRcdHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChudW1iZXIpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBkaWZmZXJlbmNlIG9mIHR3byB2ZWN0b3JzLlxyXG5cdCAqIEB0b2RvICMyNjFcclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtPYmplY3R9IC0gVGhlIGZpcnN0IHZlY3Rvci5cclxuXHQgKiBAcGFyYW0ge09iamVjdH0gLSBUaGUgc2Vjb25kIHZlY3Rvci5cclxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSAtIFRoZSBkaWZmZXJlbmNlLlxyXG5cdCAqL1xyXG5cdE93bC5wcm90b3R5cGUuZGlmZmVyZW5jZSA9IGZ1bmN0aW9uKGZpcnN0LCBzZWNvbmQpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHg6IGZpcnN0LnggLSBzZWNvbmQueCxcclxuXHRcdFx0eTogZmlyc3QueSAtIHNlY29uZC55XHJcblx0XHR9O1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBqUXVlcnkgUGx1Z2luIGZvciB0aGUgT3dsIENhcm91c2VsXHJcblx0ICogQHRvZG8gTmF2aWdhdGlvbiBwbHVnaW4gYG5leHRgIGFuZCBgcHJldmBcclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0JC5mbi5vd2xDYXJvdXNlbCA9IGZ1bmN0aW9uKG9wdGlvbikge1xyXG5cdFx0dmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyksXHJcblx0XHRcdFx0ZGF0YSA9ICR0aGlzLmRhdGEoJ293bC5jYXJvdXNlbCcpO1xyXG5cclxuXHRcdFx0aWYgKCFkYXRhKSB7XHJcblx0XHRcdFx0ZGF0YSA9IG5ldyBPd2wodGhpcywgdHlwZW9mIG9wdGlvbiA9PSAnb2JqZWN0JyAmJiBvcHRpb24pO1xyXG5cdFx0XHRcdCR0aGlzLmRhdGEoJ293bC5jYXJvdXNlbCcsIGRhdGEpO1xyXG5cclxuXHRcdFx0XHQkLmVhY2goW1xyXG5cdFx0XHRcdFx0J25leHQnLCAncHJldicsICd0bycsICdkZXN0cm95JywgJ3JlZnJlc2gnLCAncmVwbGFjZScsICdhZGQnLCAncmVtb3ZlJ1xyXG5cdFx0XHRcdF0sIGZ1bmN0aW9uKGksIGV2ZW50KSB7XHJcblx0XHRcdFx0XHRkYXRhLnJlZ2lzdGVyKHsgdHlwZTogT3dsLlR5cGUuRXZlbnQsIG5hbWU6IGV2ZW50IH0pO1xyXG5cdFx0XHRcdFx0ZGF0YS4kZWxlbWVudC5vbihldmVudCArICcub3dsLmNhcm91c2VsLmNvcmUnLCAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIGUucmVsYXRlZFRhcmdldCAhPT0gdGhpcykge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMuc3VwcHJlc3MoWyBldmVudCBdKTtcclxuXHRcdFx0XHRcdFx0XHRkYXRhW2V2ZW50XS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVsZWFzZShbIGV2ZW50IF0pO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCBkYXRhKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnICYmIG9wdGlvbi5jaGFyQXQoMCkgIT09ICdfJykge1xyXG5cdFx0XHRcdGRhdGFbb3B0aW9uXS5hcHBseShkYXRhLCBhcmdzKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgalF1ZXJ5IFBsdWdpblxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yID0gT3dsO1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIEF1dG9SZWZyZXNoIFBsdWdpblxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIEFydHVzIEtvbGFub3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB0aGUgYXV0byByZWZyZXNoIHBsdWdpbi5cclxuXHQgKiBAY2xhc3MgVGhlIEF1dG8gUmVmcmVzaCBQbHVnaW5cclxuXHQgKiBAcGFyYW0ge093bH0gY2Fyb3VzZWwgLSBUaGUgT3dsIENhcm91c2VsXHJcblx0ICovXHJcblx0dmFyIEF1dG9SZWZyZXNoID0gZnVuY3Rpb24oY2Fyb3VzZWwpIHtcclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmZXJlbmNlIHRvIHRoZSBjb3JlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge093bH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29yZSA9IGNhcm91c2VsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmcmVzaCBpbnRlcnZhbC5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtudW1iZXJ9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2ludGVydmFsID0gbnVsbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgY3VycmVudGx5IHZpc2libGUgb3Igbm90LlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge0Jvb2xlYW59XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3Zpc2libGUgPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIGV2ZW50IGhhbmRsZXJzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5faGFuZGxlcnMgPSB7XHJcblx0XHRcdCdpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvUmVmcmVzaCkge1xyXG5cdFx0XHRcdFx0dGhpcy53YXRjaCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcylcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gc2V0IGRlZmF1bHQgb3B0aW9uc1xyXG5cdFx0dGhpcy5fY29yZS5vcHRpb25zID0gJC5leHRlbmQoe30sIEF1dG9SZWZyZXNoLkRlZmF1bHRzLCB0aGlzLl9jb3JlLm9wdGlvbnMpO1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9uKHRoaXMuX2hhbmRsZXJzKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEF1dG9SZWZyZXNoLkRlZmF1bHRzID0ge1xyXG5cdFx0YXV0b1JlZnJlc2g6IHRydWUsXHJcblx0XHRhdXRvUmVmcmVzaEludGVydmFsOiA1MDBcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBXYXRjaGVzIHRoZSBlbGVtZW50LlxyXG5cdCAqL1xyXG5cdEF1dG9SZWZyZXNoLnByb3RvdHlwZS53YXRjaCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKHRoaXMuX2ludGVydmFsKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl92aXNpYmxlID0gdGhpcy5fY29yZS4kZWxlbWVudC5pcygnOnZpc2libGUnKTtcclxuXHRcdHRoaXMuX2ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCQucHJveHkodGhpcy5yZWZyZXNoLCB0aGlzKSwgdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvUmVmcmVzaEludGVydmFsKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoZXMgdGhlIGVsZW1lbnQuXHJcblx0ICovXHJcblx0QXV0b1JlZnJlc2gucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmICh0aGlzLl9jb3JlLiRlbGVtZW50LmlzKCc6dmlzaWJsZScpID09PSB0aGlzLl92aXNpYmxlKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl92aXNpYmxlID0gIXRoaXMuX3Zpc2libGU7XHJcblxyXG5cdFx0dGhpcy5fY29yZS4kZWxlbWVudC50b2dnbGVDbGFzcygnb3dsLWhpZGRlbicsICF0aGlzLl92aXNpYmxlKTtcclxuXHJcblx0XHR0aGlzLl92aXNpYmxlICYmICh0aGlzLl9jb3JlLmludmFsaWRhdGUoJ3dpZHRoJykgJiYgdGhpcy5fY29yZS5yZWZyZXNoKCkpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSBwbHVnaW4uXHJcblx0ICovXHJcblx0QXV0b1JlZnJlc2gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoYW5kbGVyLCBwcm9wZXJ0eTtcclxuXHJcblx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCk7XHJcblxyXG5cdFx0Zm9yIChoYW5kbGVyIGluIHRoaXMuX2hhbmRsZXJzKSB7XHJcblx0XHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGhhbmRsZXIsIHRoaXMuX2hhbmRsZXJzW2hhbmRsZXJdKTtcclxuXHRcdH1cclxuXHRcdGZvciAocHJvcGVydHkgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcclxuXHRcdFx0dHlwZW9mIHRoaXNbcHJvcGVydHldICE9ICdmdW5jdGlvbicgJiYgKHRoaXNbcHJvcGVydHldID0gbnVsbCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkF1dG9SZWZyZXNoID0gQXV0b1JlZnJlc2g7XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogTGF6eSBQbHVnaW5cclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBCYXJ0b3N6IFdvamNpZWNob3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB0aGUgbGF6eSBwbHVnaW4uXHJcblx0ICogQGNsYXNzIFRoZSBMYXp5IFBsdWdpblxyXG5cdCAqIEBwYXJhbSB7T3dsfSBjYXJvdXNlbCAtIFRoZSBPd2wgQ2Fyb3VzZWxcclxuXHQgKi9cclxuXHR2YXIgTGF6eSA9IGZ1bmN0aW9uKGNhcm91c2VsKSB7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIGNvcmUuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T3dsfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb3JlID0gY2Fyb3VzZWw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbHJlYWR5IGxvYWRlZCBpdGVtcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtBcnJheS48alF1ZXJ5Pn1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fbG9hZGVkID0gW107XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBFdmVudCBoYW5kbGVycy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhbmRsZXJzID0ge1xyXG5cdFx0XHQnaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsIGNoYW5nZS5vd2wuY2Fyb3VzZWwgcmVzaXplZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoIWUubmFtZXNwYWNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIXRoaXMuX2NvcmUuc2V0dGluZ3MgfHwgIXRoaXMuX2NvcmUuc2V0dGluZ3MubGF6eUxvYWQpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICgoZS5wcm9wZXJ0eSAmJiBlLnByb3BlcnR5Lm5hbWUgPT0gJ3Bvc2l0aW9uJykgfHwgZS50eXBlID09ICdpbml0aWFsaXplZCcpIHtcclxuXHRcdFx0XHRcdHZhciBzZXR0aW5ncyA9IHRoaXMuX2NvcmUuc2V0dGluZ3MsXHJcblx0XHRcdFx0XHRcdG4gPSAoc2V0dGluZ3MuY2VudGVyICYmIE1hdGguY2VpbChzZXR0aW5ncy5pdGVtcyAvIDIpIHx8IHNldHRpbmdzLml0ZW1zKSxcclxuXHRcdFx0XHRcdFx0aSA9ICgoc2V0dGluZ3MuY2VudGVyICYmIG4gKiAtMSkgfHwgMCksXHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uID0gKGUucHJvcGVydHkgJiYgZS5wcm9wZXJ0eS52YWx1ZSAhPT0gdW5kZWZpbmVkID8gZS5wcm9wZXJ0eS52YWx1ZSA6IHRoaXMuX2NvcmUuY3VycmVudCgpKSArIGksXHJcblx0XHRcdFx0XHRcdGNsb25lcyA9IHRoaXMuX2NvcmUuY2xvbmVzKCkubGVuZ3RoLFxyXG5cdFx0XHRcdFx0XHRsb2FkID0gJC5wcm94eShmdW5jdGlvbihpLCB2KSB7IHRoaXMubG9hZCh2KSB9LCB0aGlzKTtcclxuXHJcblx0XHRcdFx0XHR3aGlsZSAoaSsrIDwgbikge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmxvYWQoY2xvbmVzIC8gMiArIHRoaXMuX2NvcmUucmVsYXRpdmUocG9zaXRpb24pKTtcclxuXHRcdFx0XHRcdFx0Y2xvbmVzICYmICQuZWFjaCh0aGlzLl9jb3JlLmNsb25lcyh0aGlzLl9jb3JlLnJlbGF0aXZlKHBvc2l0aW9uKSksIGxvYWQpO1xyXG5cdFx0XHRcdFx0XHRwb3NpdGlvbisrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcylcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBkZWZhdWx0IG9wdGlvbnNcclxuXHRcdHRoaXMuX2NvcmUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBMYXp5LkRlZmF1bHRzLCB0aGlzLl9jb3JlLm9wdGlvbnMpO1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJcclxuXHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0TGF6eS5EZWZhdWx0cyA9IHtcclxuXHRcdGxhenlMb2FkOiBmYWxzZVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIExvYWRzIGFsbCByZXNvdXJjZXMgb2YgYW4gaXRlbSBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3NpdGlvbiAtIFRoZSBhYnNvbHV0ZSBwb3NpdGlvbiBvZiB0aGUgaXRlbS5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0TGF6eS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XHJcblx0XHR2YXIgJGl0ZW0gPSB0aGlzLl9jb3JlLiRzdGFnZS5jaGlsZHJlbigpLmVxKHBvc2l0aW9uKSxcclxuXHRcdFx0JGVsZW1lbnRzID0gJGl0ZW0gJiYgJGl0ZW0uZmluZCgnLm93bC1sYXp5Jyk7XHJcblxyXG5cdFx0aWYgKCEkZWxlbWVudHMgfHwgJC5pbkFycmF5KCRpdGVtLmdldCgwKSwgdGhpcy5fbG9hZGVkKSA+IC0xKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQkZWxlbWVudHMuZWFjaCgkLnByb3h5KGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KSB7XHJcblx0XHRcdHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCksIGltYWdlLFxyXG5cdFx0XHRcdHVybCA9ICh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDEgJiYgJGVsZW1lbnQuYXR0cignZGF0YS1zcmMtcmV0aW5hJykpIHx8ICRlbGVtZW50LmF0dHIoJ2RhdGEtc3JjJyk7XHJcblxyXG5cdFx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ2xvYWQnLCB7IGVsZW1lbnQ6ICRlbGVtZW50LCB1cmw6IHVybCB9LCAnbGF6eScpO1xyXG5cclxuXHRcdFx0aWYgKCRlbGVtZW50LmlzKCdpbWcnKSkge1xyXG5cdFx0XHRcdCRlbGVtZW50Lm9uZSgnbG9hZC5vd2wubGF6eScsICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHQkZWxlbWVudC5jc3MoJ29wYWNpdHknLCAxKTtcclxuXHRcdFx0XHRcdHRoaXMuX2NvcmUudHJpZ2dlcignbG9hZGVkJywgeyBlbGVtZW50OiAkZWxlbWVudCwgdXJsOiB1cmwgfSwgJ2xhenknKTtcclxuXHRcdFx0XHR9LCB0aGlzKSkuYXR0cignc3JjJywgdXJsKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0XHRcdGltYWdlLm9ubG9hZCA9ICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHQkZWxlbWVudC5jc3Moe1xyXG5cdFx0XHRcdFx0XHQnYmFja2dyb3VuZC1pbWFnZSc6ICd1cmwoXCInICsgdXJsICsgJ1wiKScsXHJcblx0XHRcdFx0XHRcdCdvcGFjaXR5JzogJzEnXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdHRoaXMuX2NvcmUudHJpZ2dlcignbG9hZGVkJywgeyBlbGVtZW50OiAkZWxlbWVudCwgdXJsOiB1cmwgfSwgJ2xhenknKTtcclxuXHRcdFx0XHR9LCB0aGlzKTtcclxuXHRcdFx0XHRpbWFnZS5zcmMgPSB1cmw7XHJcblx0XHRcdH1cclxuXHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLl9sb2FkZWQucHVzaCgkaXRlbS5nZXQoMCkpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSBwbHVnaW4uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdExhenkucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoYW5kbGVyLCBwcm9wZXJ0eTtcclxuXHJcblx0XHRmb3IgKGhhbmRsZXIgaW4gdGhpcy5oYW5kbGVycykge1xyXG5cdFx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihoYW5kbGVyLCB0aGlzLmhhbmRsZXJzW2hhbmRsZXJdKTtcclxuXHRcdH1cclxuXHRcdGZvciAocHJvcGVydHkgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcclxuXHRcdFx0dHlwZW9mIHRoaXNbcHJvcGVydHldICE9ICdmdW5jdGlvbicgJiYgKHRoaXNbcHJvcGVydHldID0gbnVsbCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkxhenkgPSBMYXp5O1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIEF1dG9IZWlnaHQgUGx1Z2luXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgQmFydG9zeiBXb2pjaWVjaG93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdGhlIGF1dG8gaGVpZ2h0IHBsdWdpbi5cclxuXHQgKiBAY2xhc3MgVGhlIEF1dG8gSGVpZ2h0IFBsdWdpblxyXG5cdCAqIEBwYXJhbSB7T3dsfSBjYXJvdXNlbCAtIFRoZSBPd2wgQ2Fyb3VzZWxcclxuXHQgKi9cclxuXHR2YXIgQXV0b0hlaWdodCA9IGZ1bmN0aW9uKGNhcm91c2VsKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIFJlZmVyZW5jZSB0byB0aGUgY29yZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPd2x9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2NvcmUgPSBjYXJvdXNlbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCBldmVudCBoYW5kbGVycy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhbmRsZXJzID0ge1xyXG5cdFx0XHQnaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsIHJlZnJlc2hlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvSGVpZ2h0KSB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdjaGFuZ2VkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHQgJiYgZS5wcm9wZXJ0eS5uYW1lID09ICdwb3NpdGlvbicpe1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnbG9hZGVkLm93bC5sYXp5JzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b0hlaWdodFxyXG5cdFx0XHRcdFx0JiYgZS5lbGVtZW50LmNsb3Nlc3QoJy4nICsgdGhpcy5fY29yZS5zZXR0aW5ncy5pdGVtQ2xhc3MpLmluZGV4KCkgPT09IHRoaXMuX2NvcmUuY3VycmVudCgpKSB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcylcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gc2V0IGRlZmF1bHQgb3B0aW9uc1xyXG5cdFx0dGhpcy5fY29yZS5vcHRpb25zID0gJC5leHRlbmQoe30sIEF1dG9IZWlnaHQuRGVmYXVsdHMsIHRoaXMuX2NvcmUub3B0aW9ucyk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub24odGhpcy5faGFuZGxlcnMpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0QXV0b0hlaWdodC5EZWZhdWx0cyA9IHtcclxuXHRcdGF1dG9IZWlnaHQ6IGZhbHNlLFxyXG5cdFx0YXV0b0hlaWdodENsYXNzOiAnb3dsLWhlaWdodCdcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGVzIHRoZSB2aWV3LlxyXG5cdCAqL1xyXG5cdEF1dG9IZWlnaHQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHN0YXJ0ID0gdGhpcy5fY29yZS5fY3VycmVudCxcclxuXHRcdFx0ZW5kID0gc3RhcnQgKyB0aGlzLl9jb3JlLnNldHRpbmdzLml0ZW1zLFxyXG5cdFx0XHR2aXNpYmxlID0gdGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKS50b0FycmF5KCkuc2xpY2Uoc3RhcnQsIGVuZCksXHJcblx0XHRcdGhlaWdodHMgPSBbXSxcclxuXHRcdFx0bWF4aGVpZ2h0ID0gMDtcclxuXHJcblx0XHQkLmVhY2godmlzaWJsZSwgZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHtcclxuXHRcdFx0aGVpZ2h0cy5wdXNoKCQoaXRlbSkuaGVpZ2h0KCkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bWF4aGVpZ2h0ID0gTWF0aC5tYXguYXBwbHkobnVsbCwgaGVpZ2h0cyk7XHJcblxyXG5cdFx0dGhpcy5fY29yZS4kc3RhZ2UucGFyZW50KClcclxuXHRcdFx0LmhlaWdodChtYXhoZWlnaHQpXHJcblx0XHRcdC5hZGRDbGFzcyh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9IZWlnaHRDbGFzcyk7XHJcblx0fTtcclxuXHJcblx0QXV0b0hlaWdodC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhhbmRsZXIsIHByb3BlcnR5O1xyXG5cclxuXHRcdGZvciAoaGFuZGxlciBpbiB0aGlzLl9oYW5kbGVycykge1xyXG5cdFx0XHR0aGlzLl9jb3JlLiRlbGVtZW50Lm9mZihoYW5kbGVyLCB0aGlzLl9oYW5kbGVyc1toYW5kbGVyXSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKHByb3BlcnR5IGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpKSB7XHJcblx0XHRcdHR5cGVvZiB0aGlzW3Byb3BlcnR5XSAhPSAnZnVuY3Rpb24nICYmICh0aGlzW3Byb3BlcnR5XSA9IG51bGwpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5BdXRvSGVpZ2h0ID0gQXV0b0hlaWdodDtcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBWaWRlbyBQbHVnaW5cclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBCYXJ0b3N6IFdvamNpZWNob3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHJcblx0LyoqXHJcblx0ICogQ3JlYXRlcyB0aGUgdmlkZW8gcGx1Z2luLlxyXG5cdCAqIEBjbGFzcyBUaGUgVmlkZW8gUGx1Z2luXHJcblx0ICogQHBhcmFtIHtPd2x9IGNhcm91c2VsIC0gVGhlIE93bCBDYXJvdXNlbFxyXG5cdCAqL1xyXG5cdHZhciBWaWRlbyA9IGZ1bmN0aW9uKGNhcm91c2VsKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIFJlZmVyZW5jZSB0byB0aGUgY29yZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPd2x9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2NvcmUgPSBjYXJvdXNlbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIENhY2hlIGFsbCB2aWRlbyBVUkxzLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fdmlkZW9zID0ge307XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBDdXJyZW50IHBsYXlpbmcgaXRlbS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtqUXVlcnl9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX3BsYXlpbmcgPSBudWxsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQWxsIGV2ZW50IGhhbmRsZXJzLlxyXG5cdFx0ICogQHRvZG8gVGhlIGNsb25lZCBjb250ZW50IHJlbW92YWxlIGlzIHRvbyBsYXRlXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYW5kbGVycyA9IHtcclxuXHRcdFx0J2luaXRpYWxpemVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5fY29yZS5yZWdpc3Rlcih7IHR5cGU6ICdzdGF0ZScsIG5hbWU6ICdwbGF5aW5nJywgdGFnczogWyAnaW50ZXJhY3RpbmcnIF0gfSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3Jlc2l6ZS5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy52aWRlbyAmJiB0aGlzLmlzSW5GdWxsU2NyZWVuKCkpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQncmVmcmVzaGVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLmlzKCdyZXNpemluZycpKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9jb3JlLiRzdGFnZS5maW5kKCcuY2xvbmVkIC5vd2wtdmlkZW8tZnJhbWUnKS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnY2hhbmdlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgZS5wcm9wZXJ0eS5uYW1lID09PSAncG9zaXRpb24nICYmIHRoaXMuX3BsYXlpbmcpIHtcclxuXHRcdFx0XHRcdHRoaXMuc3RvcCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdwcmVwYXJlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoIWUubmFtZXNwYWNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgJGVsZW1lbnQgPSAkKGUuY29udGVudCkuZmluZCgnLm93bC12aWRlbycpO1xyXG5cclxuXHRcdFx0XHRpZiAoJGVsZW1lbnQubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHQkZWxlbWVudC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG5cdFx0XHRcdFx0dGhpcy5mZXRjaCgkZWxlbWVudCwgJChlLmNvbnRlbnQpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcclxuXHRcdHRoaXMuX2NvcmUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBWaWRlby5EZWZhdWx0cywgdGhpcy5fY29yZS5vcHRpb25zKTtcclxuXHJcblx0XHQvLyByZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyk7XHJcblxyXG5cdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vbignY2xpY2sub3dsLnZpZGVvJywgJy5vd2wtdmlkZW8tcGxheS1pY29uJywgJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdHRoaXMucGxheShlKTtcclxuXHRcdH0sIHRoaXMpKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZWZhdWx0IG9wdGlvbnMuXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdFZpZGVvLkRlZmF1bHRzID0ge1xyXG5cdFx0dmlkZW86IGZhbHNlLFxyXG5cdFx0dmlkZW9IZWlnaHQ6IGZhbHNlLFxyXG5cdFx0dmlkZW9XaWR0aDogZmFsc2VcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSB2aWRlbyBJRCBhbmQgdGhlIHR5cGUgKFlvdVR1YmUvVmltZW8vdnphYXIgb25seSkuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEBwYXJhbSB7alF1ZXJ5fSB0YXJnZXQgLSBUaGUgdGFyZ2V0IGNvbnRhaW5pbmcgdGhlIHZpZGVvIGRhdGEuXHJcblx0ICogQHBhcmFtIHtqUXVlcnl9IGl0ZW0gLSBUaGUgaXRlbSBjb250YWluaW5nIHRoZSB2aWRlby5cclxuXHQgKi9cclxuXHRWaWRlby5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbih0YXJnZXQsIGl0ZW0pIHtcclxuXHRcdFx0dmFyIHR5cGUgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRpZiAodGFyZ2V0LmF0dHIoJ2RhdGEtdmltZW8taWQnKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gJ3ZpbWVvJztcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGFyZ2V0LmF0dHIoJ2RhdGEtdnphYXItaWQnKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gJ3Z6YWFyJ1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuICd5b3V0dWJlJztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KSgpLFxyXG5cdFx0XHRcdGlkID0gdGFyZ2V0LmF0dHIoJ2RhdGEtdmltZW8taWQnKSB8fCB0YXJnZXQuYXR0cignZGF0YS15b3V0dWJlLWlkJykgfHwgdGFyZ2V0LmF0dHIoJ2RhdGEtdnphYXItaWQnKSxcclxuXHRcdFx0XHR3aWR0aCA9IHRhcmdldC5hdHRyKCdkYXRhLXdpZHRoJykgfHwgdGhpcy5fY29yZS5zZXR0aW5ncy52aWRlb1dpZHRoLFxyXG5cdFx0XHRcdGhlaWdodCA9IHRhcmdldC5hdHRyKCdkYXRhLWhlaWdodCcpIHx8IHRoaXMuX2NvcmUuc2V0dGluZ3MudmlkZW9IZWlnaHQsXHJcblx0XHRcdFx0dXJsID0gdGFyZ2V0LmF0dHIoJ2hyZWYnKTtcclxuXHJcblx0XHRpZiAodXJsKSB7XHJcblxyXG5cdFx0XHQvKlxyXG5cdFx0XHRcdFx0UGFyc2VzIHRoZSBpZCdzIG91dCBvZiB0aGUgZm9sbG93aW5nIHVybHMgKGFuZCBwcm9iYWJseSBtb3JlKTpcclxuXHRcdFx0XHRcdGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9OmlkXHJcblx0XHRcdFx0XHRodHRwczovL3lvdXR1LmJlLzppZFxyXG5cdFx0XHRcdFx0aHR0cHM6Ly92aW1lby5jb20vOmlkXHJcblx0XHRcdFx0XHRodHRwczovL3ZpbWVvLmNvbS9jaGFubmVscy86Y2hhbm5lbC86aWRcclxuXHRcdFx0XHRcdGh0dHBzOi8vdmltZW8uY29tL2dyb3Vwcy86Z3JvdXAvdmlkZW9zLzppZFxyXG5cdFx0XHRcdFx0aHR0cHM6Ly9hcHAudnphYXIuY29tL3ZpZGVvcy86aWRcclxuXHJcblx0XHRcdFx0XHRWaXN1YWwgZXhhbXBsZTogaHR0cHM6Ly9yZWdleHBlci5jb20vIyhodHRwJTNBJTdDaHR0cHMlM0ElN0MpJTVDJTJGJTVDJTJGKHBsYXllci4lN0N3d3cuJTdDYXBwLiklM0YodmltZW8lNUMuY29tJTdDeW91dHUoYmUlNUMuY29tJTdDJTVDLmJlJTdDYmUlNUMuZ29vZ2xlYXBpcyU1Qy5jb20pJTdDdnphYXIlNUMuY29tKSU1QyUyRih2aWRlbyU1QyUyRiU3Q3ZpZGVvcyU1QyUyRiU3Q2VtYmVkJTVDJTJGJTdDY2hhbm5lbHMlNUMlMkYuJTJCJTVDJTJGJTdDZ3JvdXBzJTVDJTJGLiUyQiU1QyUyRiU3Q3dhdGNoJTVDJTNGdiUzRCU3Q3YlNUMlMkYpJTNGKCU1QkEtWmEtejAtOS5fJTI1LSU1RCopKCU1QyUyNiU1Q1MlMkIpJTNGXHJcblx0XHRcdCovXHJcblxyXG5cdFx0XHRpZCA9IHVybC5tYXRjaCgvKGh0dHA6fGh0dHBzOnwpXFwvXFwvKHBsYXllci58d3d3LnxhcHAuKT8odmltZW9cXC5jb218eW91dHUoYmVcXC5jb218XFwuYmV8YmVcXC5nb29nbGVhcGlzXFwuY29tKXx2emFhclxcLmNvbSlcXC8odmlkZW9cXC98dmlkZW9zXFwvfGVtYmVkXFwvfGNoYW5uZWxzXFwvLitcXC98Z3JvdXBzXFwvLitcXC98d2F0Y2hcXD92PXx2XFwvKT8oW0EtWmEtejAtOS5fJS1dKikoXFwmXFxTKyk/Lyk7XHJcblxyXG5cdFx0XHRpZiAoaWRbM10uaW5kZXhPZigneW91dHUnKSA+IC0xKSB7XHJcblx0XHRcdFx0dHlwZSA9ICd5b3V0dWJlJztcclxuXHRcdFx0fSBlbHNlIGlmIChpZFszXS5pbmRleE9mKCd2aW1lbycpID4gLTEpIHtcclxuXHRcdFx0XHR0eXBlID0gJ3ZpbWVvJztcclxuXHRcdFx0fSBlbHNlIGlmIChpZFszXS5pbmRleE9mKCd2emFhcicpID4gLTEpIHtcclxuXHRcdFx0XHR0eXBlID0gJ3Z6YWFyJztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1ZpZGVvIFVSTCBub3Qgc3VwcG9ydGVkLicpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlkID0gaWRbNl07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgdmlkZW8gVVJMLicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3ZpZGVvc1t1cmxdID0ge1xyXG5cdFx0XHR0eXBlOiB0eXBlLFxyXG5cdFx0XHRpZDogaWQsXHJcblx0XHRcdHdpZHRoOiB3aWR0aCxcclxuXHRcdFx0aGVpZ2h0OiBoZWlnaHRcclxuXHRcdH07XHJcblxyXG5cdFx0aXRlbS5hdHRyKCdkYXRhLXZpZGVvJywgdXJsKTtcclxuXHJcblx0XHR0aGlzLnRodW1ibmFpbCh0YXJnZXQsIHRoaXMuX3ZpZGVvc1t1cmxdKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHZpZGVvIHRodW1ibmFpbC5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHBhcmFtIHtqUXVlcnl9IHRhcmdldCAtIFRoZSB0YXJnZXQgY29udGFpbmluZyB0aGUgdmlkZW8gZGF0YS5cclxuXHQgKiBAcGFyYW0ge09iamVjdH0gaW5mbyAtIFRoZSB2aWRlbyBpbmZvIG9iamVjdC5cclxuXHQgKiBAc2VlIGBmZXRjaGBcclxuXHQgKi9cclxuXHRWaWRlby5wcm90b3R5cGUudGh1bWJuYWlsID0gZnVuY3Rpb24odGFyZ2V0LCB2aWRlbykge1xyXG5cdFx0dmFyIHRuTGluayxcclxuXHRcdFx0aWNvbixcclxuXHRcdFx0cGF0aCxcclxuXHRcdFx0ZGltZW5zaW9ucyA9IHZpZGVvLndpZHRoICYmIHZpZGVvLmhlaWdodCA/ICdzdHlsZT1cIndpZHRoOicgKyB2aWRlby53aWR0aCArICdweDtoZWlnaHQ6JyArIHZpZGVvLmhlaWdodCArICdweDtcIicgOiAnJyxcclxuXHRcdFx0Y3VzdG9tVG4gPSB0YXJnZXQuZmluZCgnaW1nJyksXHJcblx0XHRcdHNyY1R5cGUgPSAnc3JjJyxcclxuXHRcdFx0bGF6eUNsYXNzID0gJycsXHJcblx0XHRcdHNldHRpbmdzID0gdGhpcy5fY29yZS5zZXR0aW5ncyxcclxuXHRcdFx0Y3JlYXRlID0gZnVuY3Rpb24ocGF0aCkge1xyXG5cdFx0XHRcdGljb24gPSAnPGRpdiBjbGFzcz1cIm93bC12aWRlby1wbGF5LWljb25cIj48L2Rpdj4nO1xyXG5cclxuXHRcdFx0XHRpZiAoc2V0dGluZ3MubGF6eUxvYWQpIHtcclxuXHRcdFx0XHRcdHRuTGluayA9ICc8ZGl2IGNsYXNzPVwib3dsLXZpZGVvLXRuICcgKyBsYXp5Q2xhc3MgKyAnXCIgJyArIHNyY1R5cGUgKyAnPVwiJyArIHBhdGggKyAnXCI+PC9kaXY+JztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dG5MaW5rID0gJzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tdG5cIiBzdHlsZT1cIm9wYWNpdHk6MTtiYWNrZ3JvdW5kLWltYWdlOnVybCgnICsgcGF0aCArICcpXCI+PC9kaXY+JztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGFyZ2V0LmFmdGVyKHRuTGluayk7XHJcblx0XHRcdFx0dGFyZ2V0LmFmdGVyKGljb24pO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdC8vIHdyYXAgdmlkZW8gY29udGVudCBpbnRvIG93bC12aWRlby13cmFwcGVyIGRpdlxyXG5cdFx0dGFyZ2V0LndyYXAoJzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8td3JhcHBlclwiJyArIGRpbWVuc2lvbnMgKyAnPjwvZGl2PicpO1xyXG5cclxuXHRcdGlmICh0aGlzLl9jb3JlLnNldHRpbmdzLmxhenlMb2FkKSB7XHJcblx0XHRcdHNyY1R5cGUgPSAnZGF0YS1zcmMnO1xyXG5cdFx0XHRsYXp5Q2xhc3MgPSAnb3dsLWxhenknO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGN1c3RvbSB0aHVtYm5haWxcclxuXHRcdGlmIChjdXN0b21Ubi5sZW5ndGgpIHtcclxuXHRcdFx0Y3JlYXRlKGN1c3RvbVRuLmF0dHIoc3JjVHlwZSkpO1xyXG5cdFx0XHRjdXN0b21Ubi5yZW1vdmUoKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh2aWRlby50eXBlID09PSAneW91dHViZScpIHtcclxuXHRcdFx0cGF0aCA9IFwiLy9pbWcueW91dHViZS5jb20vdmkvXCIgKyB2aWRlby5pZCArIFwiL2hxZGVmYXVsdC5qcGdcIjtcclxuXHRcdFx0Y3JlYXRlKHBhdGgpO1xyXG5cdFx0fSBlbHNlIGlmICh2aWRlby50eXBlID09PSAndmltZW8nKSB7XHJcblx0XHRcdCQuYWpheCh7XHJcblx0XHRcdFx0dHlwZTogJ0dFVCcsXHJcblx0XHRcdFx0dXJsOiAnLy92aW1lby5jb20vYXBpL3YyL3ZpZGVvLycgKyB2aWRlby5pZCArICcuanNvbicsXHJcblx0XHRcdFx0anNvbnA6ICdjYWxsYmFjaycsXHJcblx0XHRcdFx0ZGF0YVR5cGU6ICdqc29ucCcsXHJcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRcdFx0cGF0aCA9IGRhdGFbMF0udGh1bWJuYWlsX2xhcmdlO1xyXG5cdFx0XHRcdFx0Y3JlYXRlKHBhdGgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2UgaWYgKHZpZGVvLnR5cGUgPT09ICd2emFhcicpIHtcclxuXHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR0eXBlOiAnR0VUJyxcclxuXHRcdFx0XHR1cmw6ICcvL3Z6YWFyLmNvbS9hcGkvdmlkZW9zLycgKyB2aWRlby5pZCArICcuanNvbicsXHJcblx0XHRcdFx0anNvbnA6ICdjYWxsYmFjaycsXHJcblx0XHRcdFx0ZGF0YVR5cGU6ICdqc29ucCcsXHJcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRcdFx0cGF0aCA9IGRhdGEuZnJhbWVncmFiX3VybDtcclxuXHRcdFx0XHRcdGNyZWF0ZShwYXRoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFN0b3BzIHRoZSBjdXJyZW50IHZpZGVvLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRWaWRlby5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdzdG9wJywgbnVsbCwgJ3ZpZGVvJyk7XHJcblx0XHR0aGlzLl9wbGF5aW5nLmZpbmQoJy5vd2wtdmlkZW8tZnJhbWUnKS5yZW1vdmUoKTtcclxuXHRcdHRoaXMuX3BsYXlpbmcucmVtb3ZlQ2xhc3MoJ293bC12aWRlby1wbGF5aW5nJyk7XHJcblx0XHR0aGlzLl9wbGF5aW5nID0gbnVsbDtcclxuXHRcdHRoaXMuX2NvcmUubGVhdmUoJ3BsYXlpbmcnKTtcclxuXHRcdHRoaXMuX2NvcmUudHJpZ2dlcignc3RvcHBlZCcsIG51bGwsICd2aWRlbycpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFN0YXJ0cyB0aGUgY3VycmVudCB2aWRlby5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtFdmVudH0gZXZlbnQgLSBUaGUgZXZlbnQgYXJndW1lbnRzLlxyXG5cdCAqL1xyXG5cdFZpZGVvLnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdHZhciB0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCksXHJcblx0XHRcdGl0ZW0gPSB0YXJnZXQuY2xvc2VzdCgnLicgKyB0aGlzLl9jb3JlLnNldHRpbmdzLml0ZW1DbGFzcyksXHJcblx0XHRcdHZpZGVvID0gdGhpcy5fdmlkZW9zW2l0ZW0uYXR0cignZGF0YS12aWRlbycpXSxcclxuXHRcdFx0d2lkdGggPSB2aWRlby53aWR0aCB8fCAnMTAwJScsXHJcblx0XHRcdGhlaWdodCA9IHZpZGVvLmhlaWdodCB8fCB0aGlzLl9jb3JlLiRzdGFnZS5oZWlnaHQoKSxcclxuXHRcdFx0aHRtbDtcclxuXHJcblx0XHRpZiAodGhpcy5fcGxheWluZykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY29yZS5lbnRlcigncGxheWluZycpO1xyXG5cdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdwbGF5JywgbnVsbCwgJ3ZpZGVvJyk7XHJcblxyXG5cdFx0aXRlbSA9IHRoaXMuX2NvcmUuaXRlbXModGhpcy5fY29yZS5yZWxhdGl2ZShpdGVtLmluZGV4KCkpKTtcclxuXHJcblx0XHR0aGlzLl9jb3JlLnJlc2V0KGl0ZW0uaW5kZXgoKSk7XHJcblxyXG5cdFx0aWYgKHZpZGVvLnR5cGUgPT09ICd5b3V0dWJlJykge1xyXG5cdFx0XHRodG1sID0gJzxpZnJhbWUgd2lkdGg9XCInICsgd2lkdGggKyAnXCIgaGVpZ2h0PVwiJyArIGhlaWdodCArICdcIiBzcmM9XCIvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nICtcclxuXHRcdFx0XHR2aWRlby5pZCArICc/YXV0b3BsYXk9MSZyZWw9MCZ2PScgKyB2aWRlby5pZCArICdcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JztcclxuXHRcdH0gZWxzZSBpZiAodmlkZW8udHlwZSA9PT0gJ3ZpbWVvJykge1xyXG5cdFx0XHRodG1sID0gJzxpZnJhbWUgc3JjPVwiLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLycgKyB2aWRlby5pZCArXHJcblx0XHRcdFx0Jz9hdXRvcGxheT0xXCIgd2lkdGg9XCInICsgd2lkdGggKyAnXCIgaGVpZ2h0PVwiJyArIGhlaWdodCArXHJcblx0XHRcdFx0J1wiIGZyYW1lYm9yZGVyPVwiMFwiIHdlYmtpdGFsbG93ZnVsbHNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPic7XHJcblx0XHR9IGVsc2UgaWYgKHZpZGVvLnR5cGUgPT09ICd2emFhcicpIHtcclxuXHRcdFx0aHRtbCA9ICc8aWZyYW1lIGZyYW1lYm9yZGVyPVwiMFwiJyArICdoZWlnaHQ9XCInICsgaGVpZ2h0ICsgJ1wiJyArICd3aWR0aD1cIicgKyB3aWR0aCArXHJcblx0XHRcdFx0J1wiIGFsbG93ZnVsbHNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gd2Via2l0QWxsb3dGdWxsU2NyZWVuICcgK1xyXG5cdFx0XHRcdCdzcmM9XCIvL3ZpZXcudnphYXIuY29tLycgKyB2aWRlby5pZCArICcvcGxheWVyP2F1dG9wbGF5PXRydWVcIj48L2lmcmFtZT4nO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQoJzxkaXYgY2xhc3M9XCJvd2wtdmlkZW8tZnJhbWVcIj4nICsgaHRtbCArICc8L2Rpdj4nKS5pbnNlcnRBZnRlcihpdGVtLmZpbmQoJy5vd2wtdmlkZW8nKSk7XHJcblxyXG5cdFx0dGhpcy5fcGxheWluZyA9IGl0ZW0uYWRkQ2xhc3MoJ293bC12aWRlby1wbGF5aW5nJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2tzIHdoZXRoZXIgYW4gdmlkZW8gaXMgY3VycmVudGx5IGluIGZ1bGwgc2NyZWVuIG1vZGUgb3Igbm90LlxyXG5cdCAqIEB0b2RvIEJhZCBzdHlsZSBiZWNhdXNlIGxvb2tzIGxpa2UgYSByZWFkb25seSBtZXRob2QgYnV0IGNoYW5nZXMgbWVtYmVycy5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICogQHJldHVybnMge0Jvb2xlYW59XHJcblx0ICovXHJcblx0VmlkZW8ucHJvdG90eXBlLmlzSW5GdWxsU2NyZWVuID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbWVudCA9IGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50IHx8XHJcblx0XHRcdFx0ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQ7XHJcblxyXG5cdFx0cmV0dXJuIGVsZW1lbnQgJiYgJChlbGVtZW50KS5wYXJlbnQoKS5oYXNDbGFzcygnb3dsLXZpZGVvLWZyYW1lJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveXMgdGhlIHBsdWdpbi5cclxuXHQgKi9cclxuXHRWaWRlby5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhhbmRsZXIsIHByb3BlcnR5O1xyXG5cclxuXHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKCdjbGljay5vd2wudmlkZW8nKTtcclxuXHJcblx0XHRmb3IgKGhhbmRsZXIgaW4gdGhpcy5faGFuZGxlcnMpIHtcclxuXHRcdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vZmYoaGFuZGxlciwgdGhpcy5faGFuZGxlcnNbaGFuZGxlcl0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSkge1xyXG5cdFx0XHR0eXBlb2YgdGhpc1twcm9wZXJ0eV0gIT0gJ2Z1bmN0aW9uJyAmJiAodGhpc1twcm9wZXJ0eV0gPSBudWxsKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuVmlkZW8gPSBWaWRlbztcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBBbmltYXRlIFBsdWdpblxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIEJhcnRvc3ogV29qY2llY2hvd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHRoZSBhbmltYXRlIHBsdWdpbi5cclxuXHQgKiBAY2xhc3MgVGhlIE5hdmlnYXRpb24gUGx1Z2luXHJcblx0ICogQHBhcmFtIHtPd2x9IHNjb3BlIC0gVGhlIE93bCBDYXJvdXNlbFxyXG5cdCAqL1xyXG5cdHZhciBBbmltYXRlID0gZnVuY3Rpb24oc2NvcGUpIHtcclxuXHRcdHRoaXMuY29yZSA9IHNjb3BlO1xyXG5cdFx0dGhpcy5jb3JlLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQW5pbWF0ZS5EZWZhdWx0cywgdGhpcy5jb3JlLm9wdGlvbnMpO1xyXG5cdFx0dGhpcy5zd2FwcGluZyA9IHRydWU7XHJcblx0XHR0aGlzLnByZXZpb3VzID0gdW5kZWZpbmVkO1xyXG5cdFx0dGhpcy5uZXh0ID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlcnMgPSB7XHJcblx0XHRcdCdjaGFuZ2Uub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIGUucHJvcGVydHkubmFtZSA9PSAncG9zaXRpb24nKSB7XHJcblx0XHRcdFx0XHR0aGlzLnByZXZpb3VzID0gdGhpcy5jb3JlLmN1cnJlbnQoKTtcclxuXHRcdFx0XHRcdHRoaXMubmV4dCA9IGUucHJvcGVydHkudmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2RyYWcub3dsLmNhcm91c2VsIGRyYWdnZWQub3dsLmNhcm91c2VsIHRyYW5zbGF0ZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlKSB7XHJcblx0XHRcdFx0XHR0aGlzLnN3YXBwaW5nID0gZS50eXBlID09ICd0cmFuc2xhdGVkJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQndHJhbnNsYXRlLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLnN3YXBwaW5nICYmICh0aGlzLmNvcmUub3B0aW9ucy5hbmltYXRlT3V0IHx8IHRoaXMuY29yZS5vcHRpb25zLmFuaW1hdGVJbikpIHtcclxuXHRcdFx0XHRcdHRoaXMuc3dhcCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcylcclxuXHRcdH07XHJcblxyXG5cdFx0dGhpcy5jb3JlLiRlbGVtZW50Lm9uKHRoaXMuaGFuZGxlcnMpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0QW5pbWF0ZS5EZWZhdWx0cyA9IHtcclxuXHRcdGFuaW1hdGVPdXQ6IGZhbHNlLFxyXG5cdFx0YW5pbWF0ZUluOiBmYWxzZVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRvZ2dsZXMgdGhlIGFuaW1hdGlvbiBjbGFzc2VzIHdoZW5ldmVyIGFuIHRyYW5zbGF0aW9ucyBzdGFydHMuXHJcblx0ICogQHByb3RlY3RlZFxyXG5cdCAqIEByZXR1cm5zIHtCb29sZWFufHVuZGVmaW5lZH1cclxuXHQgKi9cclxuXHRBbmltYXRlLnByb3RvdHlwZS5zd2FwID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0aWYgKHRoaXMuY29yZS5zZXR0aW5ncy5pdGVtcyAhPT0gMSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCEkLnN1cHBvcnQuYW5pbWF0aW9uIHx8ICEkLnN1cHBvcnQudHJhbnNpdGlvbikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5jb3JlLnNwZWVkKDApO1xyXG5cclxuXHRcdHZhciBsZWZ0LFxyXG5cdFx0XHRjbGVhciA9ICQucHJveHkodGhpcy5jbGVhciwgdGhpcyksXHJcblx0XHRcdHByZXZpb3VzID0gdGhpcy5jb3JlLiRzdGFnZS5jaGlsZHJlbigpLmVxKHRoaXMucHJldmlvdXMpLFxyXG5cdFx0XHRuZXh0ID0gdGhpcy5jb3JlLiRzdGFnZS5jaGlsZHJlbigpLmVxKHRoaXMubmV4dCksXHJcblx0XHRcdGluY29taW5nID0gdGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVJbixcclxuXHRcdFx0b3V0Z29pbmcgPSB0aGlzLmNvcmUuc2V0dGluZ3MuYW5pbWF0ZU91dDtcclxuXHJcblx0XHRpZiAodGhpcy5jb3JlLmN1cnJlbnQoKSA9PT0gdGhpcy5wcmV2aW91cykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKG91dGdvaW5nKSB7XHJcblx0XHRcdGxlZnQgPSB0aGlzLmNvcmUuY29vcmRpbmF0ZXModGhpcy5wcmV2aW91cykgLSB0aGlzLmNvcmUuY29vcmRpbmF0ZXModGhpcy5uZXh0KTtcclxuXHRcdFx0cHJldmlvdXMub25lKCQuc3VwcG9ydC5hbmltYXRpb24uZW5kLCBjbGVhcilcclxuXHRcdFx0XHQuY3NzKCB7ICdsZWZ0JzogbGVmdCArICdweCcgfSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCdhbmltYXRlZCBvd2wtYW5pbWF0ZWQtb3V0JylcclxuXHRcdFx0XHQuYWRkQ2xhc3Mob3V0Z29pbmcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpbmNvbWluZykge1xyXG5cdFx0XHRuZXh0Lm9uZSgkLnN1cHBvcnQuYW5pbWF0aW9uLmVuZCwgY2xlYXIpXHJcblx0XHRcdFx0LmFkZENsYXNzKCdhbmltYXRlZCBvd2wtYW5pbWF0ZWQtaW4nKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyhpbmNvbWluZyk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0QW5pbWF0ZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbihlKSB7XHJcblx0XHQkKGUudGFyZ2V0KS5jc3MoIHsgJ2xlZnQnOiAnJyB9IClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCdhbmltYXRlZCBvd2wtYW5pbWF0ZWQtb3V0IG93bC1hbmltYXRlZC1pbicpXHJcblx0XHRcdC5yZW1vdmVDbGFzcyh0aGlzLmNvcmUuc2V0dGluZ3MuYW5pbWF0ZUluKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3ModGhpcy5jb3JlLnNldHRpbmdzLmFuaW1hdGVPdXQpO1xyXG5cdFx0dGhpcy5jb3JlLm9uVHJhbnNpdGlvbkVuZCgpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSBwbHVnaW4uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEFuaW1hdGUucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoYW5kbGVyLCBwcm9wZXJ0eTtcclxuXHJcblx0XHRmb3IgKGhhbmRsZXIgaW4gdGhpcy5oYW5kbGVycykge1xyXG5cdFx0XHR0aGlzLmNvcmUuJGVsZW1lbnQub2ZmKGhhbmRsZXIsIHRoaXMuaGFuZGxlcnNbaGFuZGxlcl0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSkge1xyXG5cdFx0XHR0eXBlb2YgdGhpc1twcm9wZXJ0eV0gIT0gJ2Z1bmN0aW9uJyAmJiAodGhpc1twcm9wZXJ0eV0gPSBudWxsKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmZuLm93bENhcm91c2VsLkNvbnN0cnVjdG9yLlBsdWdpbnMuQW5pbWF0ZSA9IEFuaW1hdGU7XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogQXV0b3BsYXkgUGx1Z2luXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgQmFydG9zeiBXb2pjaWVjaG93c2tpXHJcbiAqIEBhdXRob3IgQXJ0dXMgS29sYW5vd3NraVxyXG4gKiBAYXV0aG9yIERhdmlkIERldXRzY2hcclxuICogQGxpY2Vuc2UgVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcbiAqL1xyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHRoZSBhdXRvcGxheSBwbHVnaW4uXHJcblx0ICogQGNsYXNzIFRoZSBBdXRvcGxheSBQbHVnaW5cclxuXHQgKiBAcGFyYW0ge093bH0gc2NvcGUgLSBUaGUgT3dsIENhcm91c2VsXHJcblx0ICovXHJcblx0dmFyIEF1dG9wbGF5ID0gZnVuY3Rpb24oY2Fyb3VzZWwpIHtcclxuXHRcdC8qKlxyXG5cdFx0ICogUmVmZXJlbmNlIHRvIHRoZSBjb3JlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge093bH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29yZSA9IGNhcm91c2VsO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogVGhlIGF1dG9wbGF5IHRpbWVvdXQuXHJcblx0XHQgKiBAdHlwZSB7VGltZW91dH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fdGltZW91dCA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBJbmRpY2F0ZXMgd2hlbmV2ZXIgdGhlIGF1dG9wbGF5IGlzIHBhdXNlZC5cclxuXHRcdCAqIEB0eXBlIHtCb29sZWFufVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9wYXVzZWQgPSBmYWxzZTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCBldmVudCBoYW5kbGVycy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPYmplY3R9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2hhbmRsZXJzID0ge1xyXG5cdFx0XHQnY2hhbmdlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgZS5wcm9wZXJ0eS5uYW1lID09PSAnc2V0dGluZ3MnKSB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheSkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsYXkoKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuc3RvcCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoZS5uYW1lc3BhY2UgJiYgZS5wcm9wZXJ0eS5uYW1lID09PSAncG9zaXRpb24nKSB7XHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCdwbGF5PycsIGUpO1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXkpIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5fc2V0QXV0b1BsYXlJbnRlcnZhbCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdpbml0aWFsaXplZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5hdXRvcGxheSkge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3BsYXkub3dsLmF1dG9wbGF5JzogJC5wcm94eShmdW5jdGlvbihlLCB0LCBzKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlKSB7XHJcblx0XHRcdFx0XHR0aGlzLnBsYXkodCwgcyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3N0b3Aub3dsLmF1dG9wbGF5JzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlKSB7XHJcblx0XHRcdFx0XHR0aGlzLnN0b3AoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnbW91c2VvdmVyLm93bC5hdXRvcGxheSc6ICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlIb3ZlclBhdXNlICYmIHRoaXMuX2NvcmUuaXMoJ3JvdGF0aW5nJykpIHtcclxuXHRcdFx0XHRcdHRoaXMucGF1c2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnbW91c2VsZWF2ZS5vd2wuYXV0b3BsYXknOiAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSAmJiB0aGlzLl9jb3JlLmlzKCdyb3RhdGluZycpKSB7XHJcblx0XHRcdFx0XHR0aGlzLnBsYXkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQndG91Y2hzdGFydC5vd2wuY29yZSc6ICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlIb3ZlclBhdXNlICYmIHRoaXMuX2NvcmUuaXMoJ3JvdGF0aW5nJykpIHtcclxuXHRcdFx0XHRcdHRoaXMucGF1c2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQndG91Y2hlbmQub3dsLmNvcmUnOiAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5SG92ZXJQYXVzZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5wbGF5KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyByZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy5fY29yZS4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyk7XHJcblxyXG5cdFx0Ly8gc2V0IGRlZmF1bHQgb3B0aW9uc1xyXG5cdFx0dGhpcy5fY29yZS5vcHRpb25zID0gJC5leHRlbmQoe30sIEF1dG9wbGF5LkRlZmF1bHRzLCB0aGlzLl9jb3JlLm9wdGlvbnMpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlZmF1bHQgb3B0aW9ucy5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0QXV0b3BsYXkuRGVmYXVsdHMgPSB7XHJcblx0XHRhdXRvcGxheTogZmFsc2UsXHJcblx0XHRhdXRvcGxheVRpbWVvdXQ6IDUwMDAsXHJcblx0XHRhdXRvcGxheUhvdmVyUGF1c2U6IGZhbHNlLFxyXG5cdFx0YXV0b3BsYXlTcGVlZDogZmFsc2VcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTdGFydHMgdGhlIGF1dG9wbGF5LlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3RpbWVvdXRdIC0gVGhlIGludGVydmFsIGJlZm9yZSB0aGUgbmV4dCBhbmltYXRpb24gc3RhcnRzLlxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3BlZWRdIC0gVGhlIGFuaW1hdGlvbiBzcGVlZCBmb3IgdGhlIGFuaW1hdGlvbnMuXHJcblx0ICovXHJcblx0QXV0b3BsYXkucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbih0aW1lb3V0LCBzcGVlZCkge1xyXG5cdFx0dGhpcy5fcGF1c2VkID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKHRoaXMuX2NvcmUuaXMoJ3JvdGF0aW5nJykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2NvcmUuZW50ZXIoJ3JvdGF0aW5nJyk7XHJcblxyXG5cdFx0dGhpcy5fc2V0QXV0b1BsYXlJbnRlcnZhbCgpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldHMgYSBuZXcgdGltZW91dFxyXG5cdCAqIEBwcml2YXRlXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFt0aW1lb3V0XSAtIFRoZSBpbnRlcnZhbCBiZWZvcmUgdGhlIG5leHQgYW5pbWF0aW9uIHN0YXJ0cy5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkXSAtIFRoZSBhbmltYXRpb24gc3BlZWQgZm9yIHRoZSBhbmltYXRpb25zLlxyXG5cdCAqIEByZXR1cm4ge1RpbWVvdXR9XHJcblx0ICovXHJcblx0QXV0b3BsYXkucHJvdG90eXBlLl9nZXROZXh0VGltZW91dCA9IGZ1bmN0aW9uKHRpbWVvdXQsIHNwZWVkKSB7XHJcblx0XHRpZiAoIHRoaXMuX3RpbWVvdXQgKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKHRoaXMuX3BhdXNlZCB8fCB0aGlzLl9jb3JlLmlzKCdidXN5JykgfHwgdGhpcy5fY29yZS5pcygnaW50ZXJhY3RpbmcnKSB8fCBkb2N1bWVudC5oaWRkZW4pIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fY29yZS5uZXh0KHNwZWVkIHx8IHRoaXMuX2NvcmUuc2V0dGluZ3MuYXV0b3BsYXlTcGVlZCk7XHJcblx0XHR9LCB0aGlzKSwgdGltZW91dCB8fCB0aGlzLl9jb3JlLnNldHRpbmdzLmF1dG9wbGF5VGltZW91dCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2V0cyBhdXRvcGxheSBpbiBtb3Rpb24uXHJcblx0ICogQHByaXZhdGVcclxuXHQgKi9cclxuXHRBdXRvcGxheS5wcm90b3R5cGUuX3NldEF1dG9QbGF5SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3RpbWVvdXQgPSB0aGlzLl9nZXROZXh0VGltZW91dCgpO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIFN0b3BzIHRoZSBhdXRvcGxheS5cclxuXHQgKiBAcHVibGljXHJcblx0ICovXHJcblx0QXV0b3BsYXkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmICghdGhpcy5fY29yZS5pcygncm90YXRpbmcnKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcclxuXHRcdHRoaXMuX2NvcmUubGVhdmUoJ3JvdGF0aW5nJyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU3RvcHMgdGhlIGF1dG9wbGF5LlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRBdXRvcGxheS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmICghdGhpcy5fY29yZS5pcygncm90YXRpbmcnKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcGF1c2VkID0gdHJ1ZTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgcGx1Z2luLlxyXG5cdCAqL1xyXG5cdEF1dG9wbGF5LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGFuZGxlciwgcHJvcGVydHk7XHJcblxyXG5cdFx0dGhpcy5zdG9wKCk7XHJcblxyXG5cdFx0Zm9yIChoYW5kbGVyIGluIHRoaXMuX2hhbmRsZXJzKSB7XHJcblx0XHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGhhbmRsZXIsIHRoaXMuX2hhbmRsZXJzW2hhbmRsZXJdKTtcclxuXHRcdH1cclxuXHRcdGZvciAocHJvcGVydHkgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcclxuXHRcdFx0dHlwZW9mIHRoaXNbcHJvcGVydHldICE9ICdmdW5jdGlvbicgJiYgKHRoaXNbcHJvcGVydHldID0gbnVsbCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLmF1dG9wbGF5ID0gQXV0b3BsYXk7XHJcblxyXG59KSh3aW5kb3cuWmVwdG8gfHwgd2luZG93LmpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XHJcblxyXG4vKipcclxuICogTmF2aWdhdGlvbiBQbHVnaW5cclxuICogQHZlcnNpb24gMi4xLjBcclxuICogQGF1dGhvciBBcnR1cyBLb2xhbm93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIHRoZSBuYXZpZ2F0aW9uIHBsdWdpbi5cclxuXHQgKiBAY2xhc3MgVGhlIE5hdmlnYXRpb24gUGx1Z2luXHJcblx0ICogQHBhcmFtIHtPd2x9IGNhcm91c2VsIC0gVGhlIE93bCBDYXJvdXNlbC5cclxuXHQgKi9cclxuXHR2YXIgTmF2aWdhdGlvbiA9IGZ1bmN0aW9uKGNhcm91c2VsKSB7XHJcblx0XHQvKipcclxuXHRcdCAqIFJlZmVyZW5jZSB0byB0aGUgY29yZS5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtPd2x9XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2NvcmUgPSBjYXJvdXNlbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBwbHVnaW4gaXMgaW5pdGlhbGl6ZWQgb3Igbm90LlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge0Jvb2xlYW59XHJcblx0XHQgKi9cclxuXHRcdHRoaXMuX2luaXRpYWxpemVkID0gZmFsc2U7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBUaGUgY3VycmVudCBwYWdpbmcgaW5kZXhlcy5cclxuXHRcdCAqIEBwcm90ZWN0ZWRcclxuXHRcdCAqIEB0eXBlIHtBcnJheX1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fcGFnZXMgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFsbCBET00gZWxlbWVudHMgb2YgdGhlIHVzZXIgaW50ZXJmYWNlLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fY29udHJvbHMgPSB7fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIE1hcmt1cCBmb3IgYW4gaW5kaWNhdG9yLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge0FycmF5LjxTdHJpbmc+fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl90ZW1wbGF0ZXMgPSBbXTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFRoZSBjYXJvdXNlbCBlbGVtZW50LlxyXG5cdFx0ICogQHR5cGUge2pRdWVyeX1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy4kZWxlbWVudCA9IHRoaXMuX2NvcmUuJGVsZW1lbnQ7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBPdmVycmlkZGVuIG1ldGhvZHMgb2YgdGhlIGNhcm91c2VsLlxyXG5cdFx0ICogQHByb3RlY3RlZFxyXG5cdFx0ICogQHR5cGUge09iamVjdH1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy5fb3ZlcnJpZGVzID0ge1xyXG5cdFx0XHRuZXh0OiB0aGlzLl9jb3JlLm5leHQsXHJcblx0XHRcdHByZXY6IHRoaXMuX2NvcmUucHJldixcclxuXHRcdFx0dG86IHRoaXMuX2NvcmUudG9cclxuXHRcdH07XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgZXZlbnQgaGFuZGxlcnMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYW5kbGVycyA9IHtcclxuXHRcdFx0J3ByZXBhcmVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLmRvdHNEYXRhKSB7XHJcblx0XHRcdFx0XHR0aGlzLl90ZW1wbGF0ZXMucHVzaCgnPGRpdiBjbGFzcz1cIicgKyB0aGlzLl9jb3JlLnNldHRpbmdzLmRvdENsYXNzICsgJ1wiPicgK1xyXG5cdFx0XHRcdFx0XHQkKGUuY29udGVudCkuZmluZCgnW2RhdGEtZG90XScpLmFkZEJhY2soJ1tkYXRhLWRvdF0nKS5hdHRyKCdkYXRhLWRvdCcpICsgJzwvZGl2PicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdhZGRlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5fY29yZS5zZXR0aW5ncy5kb3RzRGF0YSkge1xyXG5cdFx0XHRcdFx0dGhpcy5fdGVtcGxhdGVzLnNwbGljZShlLnBvc2l0aW9uLCAwLCB0aGlzLl90ZW1wbGF0ZXMucG9wKCkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgdGhpcyksXHJcblx0XHRcdCdyZW1vdmUub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIHRoaXMuX2NvcmUuc2V0dGluZ3MuZG90c0RhdGEpIHtcclxuXHRcdFx0XHRcdHRoaXMuX3RlbXBsYXRlcy5zcGxpY2UoZS5wb3NpdGlvbiwgMSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2NoYW5nZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIGUucHJvcGVydHkubmFtZSA9PSAncG9zaXRpb24nKSB7XHJcblx0XHRcdFx0XHR0aGlzLmRyYXcoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQnaW5pdGlhbGl6ZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmICF0aGlzLl9pbml0aWFsaXplZCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdpbml0aWFsaXplJywgbnVsbCwgJ25hdmlnYXRpb24nKTtcclxuXHRcdFx0XHRcdHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG5cdFx0XHRcdFx0dGhpcy51cGRhdGUoKTtcclxuXHRcdFx0XHRcdHRoaXMuZHJhdygpO1xyXG5cdFx0XHRcdFx0dGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0dGhpcy5fY29yZS50cmlnZ2VyKCdpbml0aWFsaXplZCcsIG51bGwsICduYXZpZ2F0aW9uJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J3JlZnJlc2hlZC5vd2wuY2Fyb3VzZWwnOiAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRpZiAoZS5uYW1lc3BhY2UgJiYgdGhpcy5faW5pdGlhbGl6ZWQpIHtcclxuXHRcdFx0XHRcdHRoaXMuX2NvcmUudHJpZ2dlcigncmVmcmVzaCcsIG51bGwsICduYXZpZ2F0aW9uJyk7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cdFx0XHRcdFx0dGhpcy5kcmF3KCk7XHJcblx0XHRcdFx0XHR0aGlzLl9jb3JlLnRyaWdnZXIoJ3JlZnJlc2hlZCcsIG51bGwsICduYXZpZ2F0aW9uJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBzZXQgZGVmYXVsdCBvcHRpb25zXHJcblx0XHR0aGlzLl9jb3JlLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgTmF2aWdhdGlvbi5EZWZhdWx0cywgdGhpcy5fY29yZS5vcHRpb25zKTtcclxuXHJcblx0XHQvLyByZWdpc3RlciBldmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAdG9kbyBSZW5hbWUgYHNsaWRlQnlgIHRvIGBuYXZCeWBcclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLkRlZmF1bHRzID0ge1xyXG5cdFx0bmF2OiBmYWxzZSxcclxuXHRcdG5hdlRleHQ6IFsgJ3ByZXYnLCAnbmV4dCcgXSxcclxuXHRcdG5hdlNwZWVkOiBmYWxzZSxcclxuXHRcdG5hdkVsZW1lbnQ6ICdkaXYnLFxyXG5cdFx0bmF2Q29udGFpbmVyOiBmYWxzZSxcclxuXHRcdG5hdkNvbnRhaW5lckNsYXNzOiAnb3dsLW5hdicsXHJcblx0XHRuYXZDbGFzczogWyAnb3dsLXByZXYnLCAnb3dsLW5leHQnIF0sXHJcblx0XHRzbGlkZUJ5OiAxLFxyXG5cdFx0ZG90Q2xhc3M6ICdvd2wtZG90JyxcclxuXHRcdGRvdHNDbGFzczogJ293bC1kb3RzJyxcclxuXHRcdGRvdHM6IHRydWUsXHJcblx0XHRkb3RzRWFjaDogZmFsc2UsXHJcblx0XHRkb3RzRGF0YTogZmFsc2UsXHJcblx0XHRkb3RzU3BlZWQ6IGZhbHNlLFxyXG5cdFx0ZG90c0NvbnRhaW5lcjogZmFsc2VcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBJbml0aWFsaXplcyB0aGUgbGF5b3V0IG9mIHRoZSBwbHVnaW4gYW5kIGV4dGVuZHMgdGhlIGNhcm91c2VsLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3ZlcnJpZGUsXHJcblx0XHRcdHNldHRpbmdzID0gdGhpcy5fY29yZS5zZXR0aW5ncztcclxuXHJcblx0XHQvLyBjcmVhdGUgRE9NIHN0cnVjdHVyZSBmb3IgcmVsYXRpdmUgbmF2aWdhdGlvblxyXG5cdFx0dGhpcy5fY29udHJvbHMuJHJlbGF0aXZlID0gKHNldHRpbmdzLm5hdkNvbnRhaW5lciA/ICQoc2V0dGluZ3MubmF2Q29udGFpbmVyKVxyXG5cdFx0XHQ6ICQoJzxkaXY+JykuYWRkQ2xhc3Moc2V0dGluZ3MubmF2Q29udGFpbmVyQ2xhc3MpLmFwcGVuZFRvKHRoaXMuJGVsZW1lbnQpKS5hZGRDbGFzcygnYW55Q2xhc3MnKTtcclxuXHJcblx0XHR0aGlzLl9jb250cm9scy4kcHJldmlvdXMgPSAkKCc8JyArIHNldHRpbmdzLm5hdkVsZW1lbnQgKyAnPicpXHJcblx0XHRcdC5hZGRDbGFzcyhzZXR0aW5ncy5uYXZDbGFzc1swXSlcclxuXHRcdFx0Lmh0bWwoc2V0dGluZ3MubmF2VGV4dFswXSlcclxuXHRcdFx0LnByZXBlbmRUbyh0aGlzLl9jb250cm9scy4kcmVsYXRpdmUpXHJcblx0XHRcdC5vbignY2xpY2snLCAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHR0aGlzLnByZXYoc2V0dGluZ3MubmF2U3BlZWQpO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR0aGlzLl9jb250cm9scy4kbmV4dCA9ICQoJzwnICsgc2V0dGluZ3MubmF2RWxlbWVudCArICc+JylcclxuXHRcdFx0LmFkZENsYXNzKHNldHRpbmdzLm5hdkNsYXNzWzFdKVxyXG5cdFx0XHQuaHRtbChzZXR0aW5ncy5uYXZUZXh0WzFdKVxyXG5cdFx0XHQuYXBwZW5kVG8odGhpcy5fY29udHJvbHMuJHJlbGF0aXZlKVxyXG5cdFx0XHQub24oJ2NsaWNrJywgJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0dGhpcy5uZXh0KHNldHRpbmdzLm5hdlNwZWVkKTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdC8vIGNyZWF0ZSBET00gc3RydWN0dXJlIGZvciBhYnNvbHV0ZSBuYXZpZ2F0aW9uXHJcblx0XHRpZiAoIXNldHRpbmdzLmRvdHNEYXRhKSB7XHJcblx0XHRcdHRoaXMuX3RlbXBsYXRlcyA9IFsgJCgnPGRpdj4nKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyhzZXR0aW5ncy5kb3RDbGFzcylcclxuXHRcdFx0XHQuYXBwZW5kKCQoJzxzcGFuPicpKVxyXG5cdFx0XHRcdC5wcm9wKCdvdXRlckhUTUwnKSBdO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZSA9IChzZXR0aW5ncy5kb3RzQ29udGFpbmVyID8gJChzZXR0aW5ncy5kb3RzQ29udGFpbmVyKVxyXG5cdFx0XHQ6ICQoJzxkaXY+JykuYWRkQ2xhc3Moc2V0dGluZ3MuZG90c0NsYXNzKS5hcHBlbmRUbyh0aGlzLiRlbGVtZW50KSkuYWRkQ2xhc3MoJ2FueUNsYXNzJyk7XHJcblxyXG5cdFx0dGhpcy5fY29udHJvbHMuJGFic29sdXRlLm9uKCdjbGljaycsICdkaXYnLCAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0dmFyIGluZGV4ID0gJChlLnRhcmdldCkucGFyZW50KCkuaXModGhpcy5fY29udHJvbHMuJGFic29sdXRlKVxyXG5cdFx0XHRcdD8gJChlLnRhcmdldCkuaW5kZXgoKSA6ICQoZS50YXJnZXQpLnBhcmVudCgpLmluZGV4KCk7XHJcblxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHR0aGlzLnRvKGluZGV4LCBzZXR0aW5ncy5kb3RzU3BlZWQpO1xyXG5cdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdC8vIG92ZXJyaWRlIHB1YmxpYyBtZXRob2RzIG9mIHRoZSBjYXJvdXNlbFxyXG5cdFx0Zm9yIChvdmVycmlkZSBpbiB0aGlzLl9vdmVycmlkZXMpIHtcclxuXHRcdFx0dGhpcy5fY29yZVtvdmVycmlkZV0gPSAkLnByb3h5KHRoaXNbb3ZlcnJpZGVdLCB0aGlzKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEZXN0cm95cyB0aGUgcGx1Z2luLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKi9cclxuXHROYXZpZ2F0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGFuZGxlciwgY29udHJvbCwgcHJvcGVydHksIG92ZXJyaWRlO1xyXG5cclxuXHRcdGZvciAoaGFuZGxlciBpbiB0aGlzLl9oYW5kbGVycykge1xyXG5cdFx0XHR0aGlzLiRlbGVtZW50Lm9mZihoYW5kbGVyLCB0aGlzLl9oYW5kbGVyc1toYW5kbGVyXSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKGNvbnRyb2wgaW4gdGhpcy5fY29udHJvbHMpIHtcclxuXHRcdFx0dGhpcy5fY29udHJvbHNbY29udHJvbF0ucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0XHRmb3IgKG92ZXJyaWRlIGluIHRoaXMub3ZlcmlkZXMpIHtcclxuXHRcdFx0dGhpcy5fY29yZVtvdmVycmlkZV0gPSB0aGlzLl9vdmVycmlkZXNbb3ZlcnJpZGVdO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChwcm9wZXJ0eSBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKSkge1xyXG5cdFx0XHR0eXBlb2YgdGhpc1twcm9wZXJ0eV0gIT0gJ2Z1bmN0aW9uJyAmJiAodGhpc1twcm9wZXJ0eV0gPSBudWxsKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGVzIHRoZSBpbnRlcm5hbCBzdGF0ZS5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaSwgaiwgayxcclxuXHRcdFx0bG93ZXIgPSB0aGlzLl9jb3JlLmNsb25lcygpLmxlbmd0aCAvIDIsXHJcblx0XHRcdHVwcGVyID0gbG93ZXIgKyB0aGlzLl9jb3JlLml0ZW1zKCkubGVuZ3RoLFxyXG5cdFx0XHRtYXhpbXVtID0gdGhpcy5fY29yZS5tYXhpbXVtKHRydWUpLFxyXG5cdFx0XHRzZXR0aW5ncyA9IHRoaXMuX2NvcmUuc2V0dGluZ3MsXHJcblx0XHRcdHNpemUgPSBzZXR0aW5ncy5jZW50ZXIgfHwgc2V0dGluZ3MuYXV0b1dpZHRoIHx8IHNldHRpbmdzLmRvdHNEYXRhXHJcblx0XHRcdFx0PyAxIDogc2V0dGluZ3MuZG90c0VhY2ggfHwgc2V0dGluZ3MuaXRlbXM7XHJcblxyXG5cdFx0aWYgKHNldHRpbmdzLnNsaWRlQnkgIT09ICdwYWdlJykge1xyXG5cdFx0XHRzZXR0aW5ncy5zbGlkZUJ5ID0gTWF0aC5taW4oc2V0dGluZ3Muc2xpZGVCeSwgc2V0dGluZ3MuaXRlbXMpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChzZXR0aW5ncy5kb3RzIHx8IHNldHRpbmdzLnNsaWRlQnkgPT0gJ3BhZ2UnKSB7XHJcblx0XHRcdHRoaXMuX3BhZ2VzID0gW107XHJcblxyXG5cdFx0XHRmb3IgKGkgPSBsb3dlciwgaiA9IDAsIGsgPSAwOyBpIDwgdXBwZXI7IGkrKykge1xyXG5cdFx0XHRcdGlmIChqID49IHNpemUgfHwgaiA9PT0gMCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fcGFnZXMucHVzaCh7XHJcblx0XHRcdFx0XHRcdHN0YXJ0OiBNYXRoLm1pbihtYXhpbXVtLCBpIC0gbG93ZXIpLFxyXG5cdFx0XHRcdFx0XHRlbmQ6IGkgLSBsb3dlciArIHNpemUgLSAxXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGlmIChNYXRoLm1pbihtYXhpbXVtLCBpIC0gbG93ZXIpID09PSBtYXhpbXVtKSB7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aiA9IDAsICsraztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aiArPSB0aGlzLl9jb3JlLm1lcmdlcnModGhpcy5fY29yZS5yZWxhdGl2ZShpKSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBEcmF3cyB0aGUgdXNlciBpbnRlcmZhY2UuXHJcblx0ICogQHRvZG8gVGhlIG9wdGlvbiBgZG90c0RhdGFgIHdvbnQgd29yay5cclxuXHQgKiBAcHJvdGVjdGVkXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRpZmZlcmVuY2UsXHJcblx0XHRcdHNldHRpbmdzID0gdGhpcy5fY29yZS5zZXR0aW5ncyxcclxuICAgICAgICAgICAgYW55Q2xhc3MgPSB0aGlzLl9jb3JlLml0ZW1zKCkubGVuZ3RoIDw9IHNldHRpbmdzLml0ZW1zLFxyXG5cdFx0XHRpbmRleCA9IHRoaXMuX2NvcmUucmVsYXRpdmUodGhpcy5fY29yZS5jdXJyZW50KCkpLFxyXG5cdFx0XHRsb29wID0gc2V0dGluZ3MubG9vcCB8fCBzZXR0aW5ncy5yZXdpbmQ7XHJcblxyXG5cdFx0dGhpcy5fY29udHJvbHMuJHJlbGF0aXZlLnRvZ2dsZUNsYXNzKCdhbnlDbGFzcycsICFzZXR0aW5ncy5uYXYgfHwgYW55Q2xhc3MpO1xyXG5cclxuXHRcdGlmIChzZXR0aW5ncy5uYXYpIHtcclxuXHRcdFx0dGhpcy5fY29udHJvbHMuJHByZXZpb3VzLnRvZ2dsZUNsYXNzKCdhbnlDbGFzcycsICFsb29wICYmIGluZGV4IDw9IHRoaXMuX2NvcmUubWluaW11bSh0cnVlKSk7XHJcblx0XHRcdHRoaXMuX2NvbnRyb2xzLiRuZXh0LnRvZ2dsZUNsYXNzKCdhbnlDbGFzcycsICFsb29wICYmIGluZGV4ID49IHRoaXMuX2NvcmUubWF4aW11bSh0cnVlKSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY29udHJvbHMuJGFic29sdXRlLnRvZ2dsZUNsYXNzKCdhbnlDbGFzcycsICFzZXR0aW5ncy5kb3RzIHx8IGFueUNsYXNzKTtcclxuXHJcblx0XHRpZiAoc2V0dGluZ3MuZG90cykge1xyXG5cdFx0XHRkaWZmZXJlbmNlID0gdGhpcy5fcGFnZXMubGVuZ3RoIC0gdGhpcy5fY29udHJvbHMuJGFic29sdXRlLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG5cclxuXHRcdFx0aWYgKHNldHRpbmdzLmRvdHNEYXRhICYmIGRpZmZlcmVuY2UgIT09IDApIHtcclxuXHRcdFx0XHR0aGlzLl9jb250cm9scy4kYWJzb2x1dGUuaHRtbCh0aGlzLl90ZW1wbGF0ZXMuam9pbignJykpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGRpZmZlcmVuY2UgPiAwKSB7XHJcblx0XHRcdFx0dGhpcy5fY29udHJvbHMuJGFic29sdXRlLmFwcGVuZChuZXcgQXJyYXkoZGlmZmVyZW5jZSArIDEpLmpvaW4odGhpcy5fdGVtcGxhdGVzWzBdKSk7XHJcblx0XHRcdH0gZWxzZSBpZiAoZGlmZmVyZW5jZSA8IDApIHtcclxuXHRcdFx0XHR0aGlzLl9jb250cm9scy4kYWJzb2x1dGUuY2hpbGRyZW4oKS5zbGljZShkaWZmZXJlbmNlKS5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fY29udHJvbHMuJGFic29sdXRlLmZpbmQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdHRoaXMuX2NvbnRyb2xzLiRhYnNvbHV0ZS5jaGlsZHJlbigpLmVxKCQuaW5BcnJheSh0aGlzLmN1cnJlbnQoKSwgdGhpcy5fcGFnZXMpKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRXh0ZW5kcyBldmVudCBkYXRhLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIFRoZSBldmVudCBvYmplY3Qgd2hpY2ggZ2V0cyB0aHJvd24uXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUub25UcmlnZ2VyID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuXHRcdHZhciBzZXR0aW5ncyA9IHRoaXMuX2NvcmUuc2V0dGluZ3M7XHJcblxyXG5cdFx0ZXZlbnQucGFnZSA9IHtcclxuXHRcdFx0aW5kZXg6ICQuaW5BcnJheSh0aGlzLmN1cnJlbnQoKSwgdGhpcy5fcGFnZXMpLFxyXG5cdFx0XHRjb3VudDogdGhpcy5fcGFnZXMubGVuZ3RoLFxyXG5cdFx0XHRzaXplOiBzZXR0aW5ncyAmJiAoc2V0dGluZ3MuY2VudGVyIHx8IHNldHRpbmdzLmF1dG9XaWR0aCB8fCBzZXR0aW5ncy5kb3RzRGF0YVxyXG5cdFx0XHRcdD8gMSA6IHNldHRpbmdzLmRvdHNFYWNoIHx8IHNldHRpbmdzLml0ZW1zKVxyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBjdXJyZW50IHBhZ2UgcG9zaXRpb24gb2YgdGhlIGNhcm91c2VsLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLmN1cnJlbnQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjdXJyZW50ID0gdGhpcy5fY29yZS5yZWxhdGl2ZSh0aGlzLl9jb3JlLmN1cnJlbnQoKSk7XHJcblx0XHRyZXR1cm4gJC5ncmVwKHRoaXMuX3BhZ2VzLCAkLnByb3h5KGZ1bmN0aW9uKHBhZ2UsIGluZGV4KSB7XHJcblx0XHRcdHJldHVybiBwYWdlLnN0YXJ0IDw9IGN1cnJlbnQgJiYgcGFnZS5lbmQgPj0gY3VycmVudDtcclxuXHRcdH0sIHRoaXMpKS5wb3AoKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBjdXJyZW50IHN1Y2Nlc29yL3ByZWRlY2Vzc29yIHBvc2l0aW9uLlxyXG5cdCAqIEBwcm90ZWN0ZWRcclxuXHQgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oc3VjY2Vzc29yKSB7XHJcblx0XHR2YXIgcG9zaXRpb24sIGxlbmd0aCxcclxuXHRcdFx0c2V0dGluZ3MgPSB0aGlzLl9jb3JlLnNldHRpbmdzO1xyXG5cclxuXHRcdGlmIChzZXR0aW5ncy5zbGlkZUJ5ID09ICdwYWdlJykge1xyXG5cdFx0XHRwb3NpdGlvbiA9ICQuaW5BcnJheSh0aGlzLmN1cnJlbnQoKSwgdGhpcy5fcGFnZXMpO1xyXG5cdFx0XHRsZW5ndGggPSB0aGlzLl9wYWdlcy5sZW5ndGg7XHJcblx0XHRcdHN1Y2Nlc3NvciA/ICsrcG9zaXRpb24gOiAtLXBvc2l0aW9uO1xyXG5cdFx0XHRwb3NpdGlvbiA9IHRoaXMuX3BhZ2VzWygocG9zaXRpb24gJSBsZW5ndGgpICsgbGVuZ3RoKSAlIGxlbmd0aF0uc3RhcnQ7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwb3NpdGlvbiA9IHRoaXMuX2NvcmUucmVsYXRpdmUodGhpcy5fY29yZS5jdXJyZW50KCkpO1xyXG5cdFx0XHRsZW5ndGggPSB0aGlzLl9jb3JlLml0ZW1zKCkubGVuZ3RoO1xyXG5cdFx0XHRzdWNjZXNzb3IgPyBwb3NpdGlvbiArPSBzZXR0aW5ncy5zbGlkZUJ5IDogcG9zaXRpb24gLT0gc2V0dGluZ3Muc2xpZGVCeTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcG9zaXRpb247XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2xpZGVzIHRvIHRoZSBuZXh0IGl0ZW0gb3IgcGFnZS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZD1mYWxzZV0gLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgZm9yIHRoZSB0cmFuc2l0aW9uLlxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihzcGVlZCkge1xyXG5cdFx0JC5wcm94eSh0aGlzLl9vdmVycmlkZXMudG8sIHRoaXMuX2NvcmUpKHRoaXMuZ2V0UG9zaXRpb24odHJ1ZSksIHNwZWVkKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBTbGlkZXMgdG8gdGhlIHByZXZpb3VzIGl0ZW0gb3IgcGFnZS5cclxuXHQgKiBAcHVibGljXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzcGVlZD1mYWxzZV0gLSBUaGUgdGltZSBpbiBtaWxsaXNlY29uZHMgZm9yIHRoZSB0cmFuc2l0aW9uLlxyXG5cdCAqL1xyXG5cdE5hdmlnYXRpb24ucHJvdG90eXBlLnByZXYgPSBmdW5jdGlvbihzcGVlZCkge1xyXG5cdFx0JC5wcm94eSh0aGlzLl9vdmVycmlkZXMudG8sIHRoaXMuX2NvcmUpKHRoaXMuZ2V0UG9zaXRpb24oZmFsc2UpLCBzcGVlZCk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogU2xpZGVzIHRvIHRoZSBzcGVjaWZpZWQgaXRlbSBvciBwYWdlLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gcG9zaXRpb24gLSBUaGUgcG9zaXRpb24gb2YgdGhlIGl0ZW0gb3IgcGFnZS5cclxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3NwZWVkXSAtIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlIHRyYW5zaXRpb24uXHJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbc3RhbmRhcmQ9ZmFsc2VdIC0gV2hldGhlciB0byB1c2UgdGhlIHN0YW5kYXJkIGJlaGF2aW91ciBvciBub3QuXHJcblx0ICovXHJcblx0TmF2aWdhdGlvbi5wcm90b3R5cGUudG8gPSBmdW5jdGlvbihwb3NpdGlvbiwgc3BlZWQsIHN0YW5kYXJkKSB7XHJcblx0XHR2YXIgbGVuZ3RoO1xyXG5cclxuXHRcdGlmICghc3RhbmRhcmQgJiYgdGhpcy5fcGFnZXMubGVuZ3RoKSB7XHJcblx0XHRcdGxlbmd0aCA9IHRoaXMuX3BhZ2VzLmxlbmd0aDtcclxuXHRcdFx0JC5wcm94eSh0aGlzLl9vdmVycmlkZXMudG8sIHRoaXMuX2NvcmUpKHRoaXMuX3BhZ2VzWygocG9zaXRpb24gJSBsZW5ndGgpICsgbGVuZ3RoKSAlIGxlbmd0aF0uc3RhcnQsIHNwZWVkKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQucHJveHkodGhpcy5fb3ZlcnJpZGVzLnRvLCB0aGlzLl9jb3JlKShwb3NpdGlvbiwgc3BlZWQpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZm4ub3dsQ2Fyb3VzZWwuQ29uc3RydWN0b3IuUGx1Z2lucy5OYXZpZ2F0aW9uID0gTmF2aWdhdGlvbjtcclxuXHJcbn0pKHdpbmRvdy5aZXB0byB8fCB3aW5kb3cualF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50KTtcclxuXHJcbi8qKlxyXG4gKiBIYXNoIFBsdWdpblxyXG4gKiBAdmVyc2lvbiAyLjEuMFxyXG4gKiBAYXV0aG9yIEFydHVzIEtvbGFub3dza2lcclxuICogQGF1dGhvciBEYXZpZCBEZXV0c2NoXHJcbiAqIEBsaWNlbnNlIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxyXG4gKi9cclxuOyhmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgdGhlIGhhc2ggcGx1Z2luLlxyXG5cdCAqIEBjbGFzcyBUaGUgSGFzaCBQbHVnaW5cclxuXHQgKiBAcGFyYW0ge093bH0gY2Fyb3VzZWwgLSBUaGUgT3dsIENhcm91c2VsXHJcblx0ICovXHJcblx0dmFyIEhhc2ggPSBmdW5jdGlvbihjYXJvdXNlbCkge1xyXG5cdFx0LyoqXHJcblx0XHQgKiBSZWZlcmVuY2UgdG8gdGhlIGNvcmUuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T3dsfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9jb3JlID0gY2Fyb3VzZWw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBIYXNoIGluZGV4IGZvciB0aGUgaXRlbXMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYXNoZXMgPSB7fTtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIFRoZSBjYXJvdXNlbCBlbGVtZW50LlxyXG5cdFx0ICogQHR5cGUge2pRdWVyeX1cclxuXHRcdCAqL1xyXG5cdFx0dGhpcy4kZWxlbWVudCA9IHRoaXMuX2NvcmUuJGVsZW1lbnQ7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBBbGwgZXZlbnQgaGFuZGxlcnMuXHJcblx0XHQgKiBAcHJvdGVjdGVkXHJcblx0XHQgKiBAdHlwZSB7T2JqZWN0fVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLl9oYW5kbGVycyA9IHtcclxuXHRcdFx0J2luaXRpYWxpemVkLm93bC5jYXJvdXNlbCc6ICQucHJveHkoZnVuY3Rpb24oZSkge1xyXG5cdFx0XHRcdGlmIChlLm5hbWVzcGFjZSAmJiB0aGlzLl9jb3JlLnNldHRpbmdzLnN0YXJ0UG9zaXRpb24gPT09ICdVUkxIYXNoJykge1xyXG5cdFx0XHRcdFx0JCh3aW5kb3cpLnRyaWdnZXIoJ2hhc2hjaGFuZ2Uub3dsLm5hdmlnYXRpb24nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpLFxyXG5cdFx0XHQncHJlcGFyZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlKSB7XHJcblx0XHRcdFx0XHR2YXIgaGFzaCA9ICQoZS5jb250ZW50KS5maW5kKCdbZGF0YS1oYXNoXScpLmFkZEJhY2soJ1tkYXRhLWhhc2hdJykuYXR0cignZGF0YS1oYXNoJyk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCFoYXNoKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHR0aGlzLl9oYXNoZXNbaGFzaF0gPSBlLmNvbnRlbnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LCB0aGlzKSxcclxuXHRcdFx0J2NoYW5nZWQub3dsLmNhcm91c2VsJzogJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0aWYgKGUubmFtZXNwYWNlICYmIGUucHJvcGVydHkubmFtZSA9PT0gJ3Bvc2l0aW9uJykge1xyXG5cdFx0XHRcdFx0dmFyIGN1cnJlbnQgPSB0aGlzLl9jb3JlLml0ZW1zKHRoaXMuX2NvcmUucmVsYXRpdmUodGhpcy5fY29yZS5jdXJyZW50KCkpKSxcclxuXHRcdFx0XHRcdFx0aGFzaCA9ICQubWFwKHRoaXMuX2hhc2hlcywgZnVuY3Rpb24oaXRlbSwgaGFzaCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBpdGVtID09PSBjdXJyZW50ID8gaGFzaCA6IG51bGw7XHJcblx0XHRcdFx0XHRcdH0pLmpvaW4oKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIWhhc2ggfHwgd2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSkgPT09IGhhc2gpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMpXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcclxuXHRcdHRoaXMuX2NvcmUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBIYXNoLkRlZmF1bHRzLCB0aGlzLl9jb3JlLm9wdGlvbnMpO1xyXG5cclxuXHRcdC8vIHJlZ2lzdGVyIHRoZSBldmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy4kZWxlbWVudC5vbih0aGlzLl9oYW5kbGVycyk7XHJcblxyXG5cdFx0Ly8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXIgZm9yIGhhc2ggbmF2aWdhdGlvblxyXG5cdFx0JCh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlLm93bC5uYXZpZ2F0aW9uJywgJC5wcm94eShmdW5jdGlvbihlKSB7XHJcblx0XHRcdHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLFxyXG5cdFx0XHRcdGl0ZW1zID0gdGhpcy5fY29yZS4kc3RhZ2UuY2hpbGRyZW4oKSxcclxuXHRcdFx0XHRwb3NpdGlvbiA9IHRoaXMuX2hhc2hlc1toYXNoXSAmJiBpdGVtcy5pbmRleCh0aGlzLl9oYXNoZXNbaGFzaF0pO1xyXG5cclxuXHRcdFx0aWYgKHBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgcG9zaXRpb24gPT09IHRoaXMuX2NvcmUuY3VycmVudCgpKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9jb3JlLnRvKHRoaXMuX2NvcmUucmVsYXRpdmUocG9zaXRpb24pLCBmYWxzZSwgdHJ1ZSk7XHJcblx0XHR9LCB0aGlzKSk7XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRGVmYXVsdCBvcHRpb25zLlxyXG5cdCAqIEBwdWJsaWNcclxuXHQgKi9cclxuXHRIYXNoLkRlZmF1bHRzID0ge1xyXG5cdFx0VVJMaGFzaExpc3RlbmVyOiBmYWxzZVxyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3lzIHRoZSBwbHVnaW4uXHJcblx0ICogQHB1YmxpY1xyXG5cdCAqL1xyXG5cdEhhc2gucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoYW5kbGVyLCBwcm9wZXJ0eTtcclxuXHJcblx0XHQkKHdpbmRvdykub2ZmKCdoYXNoY2hhbmdlLm93bC5uYXZpZ2F0aW9uJyk7XHJcblxyXG5cdFx0Zm9yIChoYW5kbGVyIGluIHRoaXMuX2hhbmRsZXJzKSB7XHJcblx0XHRcdHRoaXMuX2NvcmUuJGVsZW1lbnQub2ZmKGhhbmRsZXIsIHRoaXMuX2hhbmRsZXJzW2hhbmRsZXJdKTtcclxuXHRcdH1cclxuXHRcdGZvciAocHJvcGVydHkgaW4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcykpIHtcclxuXHRcdFx0dHlwZW9mIHRoaXNbcHJvcGVydHldICE9ICdmdW5jdGlvbicgJiYgKHRoaXNbcHJvcGVydHldID0gbnVsbCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5mbi5vd2xDYXJvdXNlbC5Db25zdHJ1Y3Rvci5QbHVnaW5zLkhhc2ggPSBIYXNoO1xyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG5cclxuLyoqXHJcbiAqIFN1cHBvcnQgUGx1Z2luXHJcbiAqXHJcbiAqIEB2ZXJzaW9uIDIuMS4wXHJcbiAqIEBhdXRob3IgVml2aWQgUGxhbmV0IFNvZnR3YXJlIEdtYkhcclxuICogQGF1dGhvciBBcnR1cyBLb2xhbm93c2tpXHJcbiAqIEBhdXRob3IgRGF2aWQgRGV1dHNjaFxyXG4gKiBAbGljZW5zZSBUaGUgTUlUIExpY2Vuc2UgKE1JVClcclxuICovXHJcbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKSB7XHJcblxyXG5cdHZhciBzdHlsZSA9ICQoJzxzdXBwb3J0PicpLmdldCgwKS5zdHlsZSxcclxuXHRcdHByZWZpeGVzID0gJ1dlYmtpdCBNb3ogTyBtcycuc3BsaXQoJyAnKSxcclxuXHRcdGV2ZW50cyA9IHtcclxuXHRcdFx0dHJhbnNpdGlvbjoge1xyXG5cdFx0XHRcdGVuZDoge1xyXG5cdFx0XHRcdFx0V2Via2l0VHJhbnNpdGlvbjogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxyXG5cdFx0XHRcdFx0TW96VHJhbnNpdGlvbjogJ3RyYW5zaXRpb25lbmQnLFxyXG5cdFx0XHRcdFx0T1RyYW5zaXRpb246ICdvVHJhbnNpdGlvbkVuZCcsXHJcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCdcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGFuaW1hdGlvbjoge1xyXG5cdFx0XHRcdGVuZDoge1xyXG5cdFx0XHRcdFx0V2Via2l0QW5pbWF0aW9uOiAnd2Via2l0QW5pbWF0aW9uRW5kJyxcclxuXHRcdFx0XHRcdE1vekFuaW1hdGlvbjogJ2FuaW1hdGlvbmVuZCcsXHJcblx0XHRcdFx0XHRPQW5pbWF0aW9uOiAnb0FuaW1hdGlvbkVuZCcsXHJcblx0XHRcdFx0XHRhbmltYXRpb246ICdhbmltYXRpb25lbmQnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0dGVzdHMgPSB7XHJcblx0XHRcdGNzc3RyYW5zZm9ybXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAhIXRlc3QoJ3RyYW5zZm9ybScpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRjc3N0cmFuc2Zvcm1zM2Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAhIXRlc3QoJ3BlcnNwZWN0aXZlJyk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNzc3RyYW5zaXRpb25zOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gISF0ZXN0KCd0cmFuc2l0aW9uJyk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGNzc2FuaW1hdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAhIXRlc3QoJ2FuaW1hdGlvbicpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRmdW5jdGlvbiB0ZXN0KHByb3BlcnR5LCBwcmVmaXhlZCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IGZhbHNlLFxyXG5cdFx0XHR1cHBlciA9IHByb3BlcnR5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcGVydHkuc2xpY2UoMSk7XHJcblxyXG5cdFx0JC5lYWNoKChwcm9wZXJ0eSArICcgJyArIHByZWZpeGVzLmpvaW4odXBwZXIgKyAnICcpICsgdXBwZXIpLnNwbGl0KCcgJyksIGZ1bmN0aW9uKGksIHByb3BlcnR5KSB7XHJcblx0XHRcdGlmIChzdHlsZVtwcm9wZXJ0eV0gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHJlc3VsdCA9IHByZWZpeGVkID8gcHJvcGVydHkgOiB0cnVlO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHByZWZpeGVkKHByb3BlcnR5KSB7XHJcblx0XHRyZXR1cm4gdGVzdChwcm9wZXJ0eSwgdHJ1ZSk7XHJcblx0fVxyXG5cclxuXHRpZiAodGVzdHMuY3NzdHJhbnNpdGlvbnMoKSkge1xyXG5cdFx0LyoganNoaW50IC1XMDUzICovXHJcblx0XHQkLnN1cHBvcnQudHJhbnNpdGlvbiA9IG5ldyBTdHJpbmcocHJlZml4ZWQoJ3RyYW5zaXRpb24nKSlcclxuXHRcdCQuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCA9IGV2ZW50cy50cmFuc2l0aW9uLmVuZFsgJC5zdXBwb3J0LnRyYW5zaXRpb24gXTtcclxuXHR9XHJcblxyXG5cdGlmICh0ZXN0cy5jc3NhbmltYXRpb25zKCkpIHtcclxuXHRcdC8qIGpzaGludCAtVzA1MyAqL1xyXG5cdFx0JC5zdXBwb3J0LmFuaW1hdGlvbiA9IG5ldyBTdHJpbmcocHJlZml4ZWQoJ2FuaW1hdGlvbicpKVxyXG5cdFx0JC5zdXBwb3J0LmFuaW1hdGlvbi5lbmQgPSBldmVudHMuYW5pbWF0aW9uLmVuZFsgJC5zdXBwb3J0LmFuaW1hdGlvbiBdO1xyXG5cdH1cclxuXHJcblx0aWYgKHRlc3RzLmNzc3RyYW5zZm9ybXMoKSkge1xyXG5cdFx0LyoganNoaW50IC1XMDUzICovXHJcblx0XHQkLnN1cHBvcnQudHJhbnNmb3JtID0gbmV3IFN0cmluZyhwcmVmaXhlZCgndHJhbnNmb3JtJykpO1xyXG5cdFx0JC5zdXBwb3J0LnRyYW5zZm9ybTNkID0gdGVzdHMuY3NzdHJhbnNmb3JtczNkKCk7XHJcblx0fVxyXG5cclxufSkod2luZG93LlplcHRvIHx8IHdpbmRvdy5qUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG4iLCIvKiFcclxuICoganF1ZXJ5LnN1bW9zZWxlY3QgLSB2My4wLjJcclxuICogaHR0cDovL2hlbWFudG5lZ2kuZ2l0aHViLmlvL2pxdWVyeS5zdW1vc2VsZWN0XHJcbiAqIDIwMTQtMDQtMDhcclxuICpcclxuICogQ29weXJpZ2h0IDIwMTUgSGVtYW50IE5lZ2lcclxuICogRW1haWwgOiBoZW1hbnQuZnJuekBnbWFpbC5jb21cclxuICogQ29tcHJlc3NvciBodHRwOi8vcmVmcmVzaC1zZi5jb20vXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gICAgJ25hbWVzcGFjZSBzdW1vJztcclxuICAgICQuZm4uU3Vtb1NlbGVjdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGVhc2llc3Qgd2F5IHRvIGhhdmUgZGVmYXVsdCBvcHRpb25zLlxyXG4gICAgICAgIHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLCAgIC8vIERvbnQgY2hhbmdlIGl0IGhlcmUuXHJcbiAgICAgICAgICAgIGNzdkRpc3BDb3VudDogMywgICAgICAgICAgICAgIC8vIGRpc3BsYXkgbm8uIG9mIGl0ZW1zIGluIG11bHRpc2VsZWN0LiAwIHRvIGRpc3BsYXkgYWxsLlxyXG4gICAgICAgICAgICBjYXB0aW9uRm9ybWF0Oid7MH0gU2VsZWN0ZWQnLCAvLyBmb3JtYXQgb2YgY2FwdGlvbiB0ZXh0LiB5b3UgY2FuIHNldCB5b3VyIGxvY2FsZS5cclxuICAgICAgICAgICAgY2FwdGlvbkZvcm1hdEFsbFNlbGVjdGVkOid7MH0gYWxsIHNlbGVjdGVkIScsIC8vIGZvcm1hdCBvZiBjYXB0aW9uIHRleHQgd2hlbiBhbGwgZWxlbWVudHMgYXJlIHNlbGVjdGVkLiBzZXQgbnVsbCB0byB1c2UgY2FwdGlvbkZvcm1hdC4gSXQgd2lsbCBub3Qgd29yayBpZiB0aGVyZSBhcmUgZGlzYWJsZWQgZWxlbWVudHMgaW4gc2VsZWN0LlxyXG4gICAgICAgICAgICBmbG9hdFdpZHRoOiA0MDAsICAgICAgICAgICAgICAvLyBTY3JlZW4gd2lkdGggb2YgZGV2aWNlIGF0IHdoaWNoIHRoZSBsaXN0IGlzIHJlbmRlcmVkIGluIGZsb2F0aW5nIHBvcHVwIGZhc2hpb24uXHJcbiAgICAgICAgICAgIGZvcmNlQ3VzdG9tUmVuZGVyaW5nOiBmYWxzZSwgIC8vIGZvcmNlIHRoZSBjdXN0b20gbW9kYWwgb24gYWxsIGRldmljZXMgYmVsb3cgZmxvYXRXaWR0aCByZXNvbHV0aW9uLlxyXG4gICAgICAgICAgICBuYXRpdmVPbkRldmljZTogWydBbmRyb2lkJywgJ0JsYWNrQmVycnknLCAnaVBob25lJywgJ2lQYWQnLCAnaVBvZCcsICdPcGVyYSBNaW5pJywgJ0lFTW9iaWxlJywgJ1NpbGsnXSwgLy9cclxuICAgICAgICAgICAgb3V0cHV0QXNDU1Y6IGZhbHNlLCAgICAgICAgICAgLy8gdHJ1ZSB0byBQT1NUIGRhdGEgYXMgY3N2ICggZmFsc2UgZm9yIEh0bWwgY29udHJvbCBhcnJheSBpZS4gZGVmYXVsdCBzZWxlY3QgKVxyXG4gICAgICAgICAgICBjc3ZTZXBDaGFyOiAnLCcsICAgICAgICAgICAgICAvLyBzZXBhcmF0aW9uIGNoYXIgaW4gY3N2IG1vZGVcclxuICAgICAgICAgICAgb2tDYW5jZWxJbk11bHRpOiBmYWxzZSwgICAgICAgLy8gZGlzcGxheSBvayBjYW5jZWwgYnV0dG9ucyBpbiBkZXNrdG9wIG1vZGUgbXVsdGlzZWxlY3QgYWxzby5cclxuICAgICAgICAgICAgdHJpZ2dlckNoYW5nZUNvbWJpbmVkOiB0cnVlLCAgLy8gaW0gbXVsdGkgc2VsZWN0IG1vZGUgd2V0aGVyIHRvIHRyaWdnZXIgY2hhbmdlIGV2ZW50IG9uIGluZGl2aWR1YWwgc2VsZWN0aW9uIG9yIGNvbWJpbmVkIHNlbGVjdGlvbi5cclxuICAgICAgICAgICAgc2VsZWN0QWxsOiBmYWxzZSwgICAgICAgICAgICAgLy8gdG8gZGlzcGxheSBzZWxlY3QgYWxsIGJ1dHRvbiBpbiBtdWx0aXNlbGVjdCBtb2RlLnx8IGFsc28gc2VsZWN0IGFsbCB3aWxsIG5vdCBiZSBhdmFpbGFibGUgb24gbW9iaWxlIGRldmljZXMuXHJcblxyXG4gICAgICAgICAgICBzZWFyY2g6IGZhbHNlLCAgICAgICAgICAgICAgICAvLyB0byBkaXNwbGF5IGlucHV0IGZvciBmaWx0ZXJpbmcgY29udGVudC4gc2VsZWN0QWxsdGV4dCB3aWxsIGJlIGlucHV0IHRleHQgcGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgc2VhcmNoVGV4dDogJ1NlYXJjaC4uLicsICAgICAgLy8gcGxhY2Vob2xkZXIgZm9yIHNlYXJjaCBpbnB1dFxyXG4gICAgICAgICAgICBub01hdGNoOiAnTm8gbWF0Y2hlcyBmb3IgXCJ7MH1cIicsXHJcbiAgICAgICAgICAgIHByZWZpeDogJycsICAgICAgICAgICAgICAgICAgIC8vIHNvbWUgcHJlZml4IHVzdWFsbHkgdGhlIGZpZWxkIG5hbWUuIGVnLiAnPGI+SGVsbG88L2I+J1xyXG4gICAgICAgICAgICBsb2NhbGU6IFsnT0snLCAnQ2FuY2VsJywgJ1NlbGVjdCBBbGwnXSwgIC8vIGFsbCB0ZXh0IHRoYXQgaXMgdXNlZC4gZG9uJ3QgY2hhbmdlIHRoZSBpbmRleC5cclxuICAgICAgICAgICAgdXA6IGZhbHNlICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRydWUgdG8gb3BlbiB1cHNpZGUuXHJcbiAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHZhciByZXQgPSB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsT2JqID0gdGhpczsgLy8gdGhlIG9yaWdpbmFsIHNlbGVjdCBvYmplY3QuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN1bW8gfHwgISQodGhpcykuaXMoJ3NlbGVjdCcpKSByZXR1cm47IC8vYWxyZWFkeSBpbml0aWFsaXplZFxyXG5cclxuICAgICAgICAgICAgdGhpcy5zdW1vID0ge1xyXG4gICAgICAgICAgICAgICAgRTogJChzZWxPYmopLCAgIC8vdGhlIGpxdWVyeSBvYmplY3Qgb2Ygb3JpZ2luYWwgc2VsZWN0IGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICBpc19tdWx0aTogJChzZWxPYmopLmF0dHIoJ211bHRpcGxlJyksICAvL2lmIGl0cyBhIG11bHRpcGxlIHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0OiAnJyxcclxuICAgICAgICAgICAgICAgIGNhcHRpb246ICcnLFxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxyXG4gICAgICAgICAgICAgICAgb3B0RGl2OiAnJyxcclxuICAgICAgICAgICAgICAgIENhcHRpb25Db250OiAnJyxcclxuICAgICAgICAgICAgICAgIHVsOicnLFxyXG4gICAgICAgICAgICAgICAgaXNfZmxvYXRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgaXNfb3BlbmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIC8vYmFja2Ryb3A6ICcnLFxyXG4gICAgICAgICAgICAgICAgbW9iOmZhbHNlLCAvLyBpZiB0byBvcGVuIGRldmljZSBkZWZhdWx0IHNlbGVjdFxyXG4gICAgICAgICAgICAgICAgUHN0YXRlOiBbXSxcclxuXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVFbGVtczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLkUud3JhcCgnPGRpdiBjbGFzcz1cIlN1bW9TZWxlY3RcIiB0YWJpbmRleD1cIjBcIj4nKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdCA9IE8uRS5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBPLmNhcHRpb24gPSAkKCc8c3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgICBPLkNhcHRpb25Db250ID0gJCgnPHAgY2xhc3M9XCJDYXB0aW9uQ29udFwiPjxsYWJlbD48aT48L2k+PC9sYWJlbD48L3A+JykuYWRkQ2xhc3MoJ1NlbGVjdEJveCcpLmF0dHIoJ3N0eWxlJywgTy5FLmF0dHIoJ3N0eWxlJykpLnByZXBlbmQoTy5jYXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5hcHBlbmQoTy5DYXB0aW9uQ29udCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQgdHVybiBvZmYgaWYgbm8gbXVsdGlzZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICBpZighTy5pc19tdWx0aSlzZXR0aW5ncy5va0NhbmNlbEluTXVsdGkgPSBmYWxzZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihPLkUuYXR0cignZGlzYWJsZWQnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QuYWRkQ2xhc3MoJ2Rpc2FibGVkJykucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9pZiBvdXRwdXQgYXMgY3N2IGFuZCBpcyBhIG11bHRpc2VsZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5vdXRwdXRBc0NTViAmJiBPLmlzX211bHRpICYmIE8uRS5hdHRyKCduYW1lJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jcmVhdGUgYSBoaWRkZW4gZmllbGQgdG8gc3RvcmUgY3N2IHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5hcHBlbmQoJCgnPGlucHV0IGNsYXNzPVwiSEVNQU5UMTIzXCIgdHlwZT1cImhpZGRlblwiIC8+JykuYXR0cignbmFtZScsIE8uRS5hdHRyKCduYW1lJykpLnZhbChPLmdldFNlbFN0cigpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzbyBpdCBjYW4gbm90IHBvc3QgdGhlIG9yaWdpbmFsIHNlbGVjdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLnJlbW92ZUF0dHIoJ25hbWUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vYnJlYWsgZm9yIG1vYmlsZSByZW5kcmluZy4uIGlmIGZvcmNlQ3VzdG9tUmVuZGVyaW5nIGlzIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNNb2JpbGUoKSAmJiAhc2V0dGluZ3MuZm9yY2VDdXN0b21SZW5kZXJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXROYXRpdmVNb2JpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBuYW1lIGF0dHIgaW4gc2VsZWN0IGFkZCBhIGNsYXNzIHRvIGNvbnRhaW5lciBkaXZcclxuICAgICAgICAgICAgICAgICAgICBpZihPLkUuYXR0cignbmFtZScpKSBPLnNlbGVjdC5hZGRDbGFzcygnc3Vtb18nK08uRS5hdHRyKCduYW1lJykpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vaGlkZSBvcmlnaW5hbCBzZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICBPLkUuYWRkQ2xhc3MoJ1N1bW9VbmRlcicpLmF0dHIoJ3RhYmluZGV4JywnLTEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8jIyBDcmVhdGluZyB0aGUgbGlzdC4uLlxyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2ID0gJCgnPGRpdiBjbGFzcz1cIm9wdFdyYXBwZXIgJysgKHNldHRpbmdzLnVwPyd1cCc6JycpICsnXCI+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vYnJhbmNoIGZvciBmbG9hdGluZyBsaXN0IGluIGxvdyByZXMgZGV2aWNlcy5cclxuICAgICAgICAgICAgICAgICAgICBPLmZsb2F0aW5nTGlzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL0NyZWF0aW5nIHRoZSBtYXJrdXAgZm9yIHRoZSBhdmFpbGFibGUgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIE8udWwgPSAkKCc8dWwgY2xhc3M9XCJvcHRpb25zXCI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuYXBwZW5kKE8udWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3QgYWxsIGZ1bmN0aW9uYWxpdHlcclxuICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5zZWxlY3RBbGwpIE8uU2VsQWxsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmdW5jdGlvbmFsaXR5XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3Muc2VhcmNoKSBPLlNlYXJjaCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLnVsLmFwcGVuZChPLnByZXBJdGVtcyhPLkUuY2hpbGRyZW4oKSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2lmIG11bHRpcGxlIHRoZW4gYWRkIHRoZSBjbGFzcyBtdWx0aXBsZSBhbmQgYWRkIE9LIC8gQ0FOQ0VMIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX211bHRpKSBPLm11bHRpU2VsZWxlY3QoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QuYXBwZW5kKE8ub3B0RGl2KTtcclxuICAgICAgICAgICAgICAgICAgICBPLmJhc2ljRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxBbGxTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBwcmVwSXRlbXM6IGZ1bmN0aW9uKG9wdHMsIGQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXMgPSBbXSwgTz10aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICQob3B0cykuZWFjaChmdW5jdGlvbiAoaSwgb3B0KSB7ICAgICAgIC8vIHBhcnNpbmcgb3B0aW9ucyB0byBsaVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHQgPSAkKG9wdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpcy5wdXNoKG9wdC5pcygnb3B0Z3JvdXAnKT9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJzxsaSBjbGFzcz1cImdyb3VwICcrIChvcHRbMF0uZGlzYWJsZWQ/J2Rpc2FibGVkJzonJykgKydcIj48bGFiZWw+JyArIG9wdC5hdHRyKCdsYWJlbCcpICsnPC9sYWJlbD48dWw+PC91bD48bGk+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCd1bCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKE8ucHJlcEl0ZW1zKG9wdC5jaGlsZHJlbigpLCBvcHRbMF0uZGlzYWJsZWQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVuZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLmNyZWF0ZUxpKG9wdCwgZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpcztcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBDcmVhdGVzIGEgTEkgZWxlbWVudCBmcm9tIGEgZ2l2ZW4gb3B0aW9uIGFuZCBiaW5kcyBldmVudHMgdG8gaXRcclxuICAgICAgICAgICAgICAgIC8vIyMgcmV0dXJucyB0aGUganF1ZXJ5IGluc3RhbmNlIG9mIGxpIChub3QgaW5zZXJ0ZWQgaW4gZG9tKVxyXG4gICAgICAgICAgICAgICAgY3JlYXRlTGk6IGZ1bmN0aW9uIChvcHQsIGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFvcHQuYXR0cigndmFsdWUnKSlvcHQuYXR0cigndmFsdWUnLG9wdC52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvZG86IHJlbW92ZSB0aGlzIGRhdGEgdmFsIFxyXG4gICAgICAgICAgICAgICAgICAgIGxpID0gJCgnPGxpIGNsYXNzPVwib3B0XCI+PGxhYmVsPicgKyBvcHQudGV4dCgpICsgJzwvbGFiZWw+PC9saT4nKTsvLy5kYXRhKCd2YWwnLG9wdC52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGkuZGF0YSgnb3B0Jywgb3B0KTsgICAgLy8gc3RvcmUgYSBkaXJlY3QgcmVmZXJlbmNlIHRvIG9wdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICBvcHQuZGF0YSgnbGknLCBsaSk7ICAgIC8vIHN0b3JlIGEgZGlyZWN0IHJlZmVyZW5jZSB0byBsaXN0IGl0ZW0uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfbXVsdGkpIGxpLnByZXBlbmQoJzxzcGFuPjxpPjwvaT48L3NwYW4+Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRbMF0uZGlzYWJsZWQgfHwgZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGkgPSBsaS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5vbk9wdENsaWNrKGxpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdFswXS5zZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHQuYXR0cignY2xhc3MnKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGkuYWRkQ2xhc3Mob3B0LmF0dHIoJ2NsYXNzJykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgUmV0dXJucyB0aGUgc2VsZWN0ZWQgaXRlbXMgYXMgc3RyaW5nIGluIGEgTXVsdGlzZWxlY3QuXHJcbiAgICAgICAgICAgICAgICBnZXRTZWxTdHI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIHByZSBzZWxlY3RlZCBpdGVtcy5cclxuICAgICAgICAgICAgICAgICAgICBzb3B0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5FLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmVhY2goZnVuY3Rpb24gKCkgeyBzb3B0LnB1c2goJCh0aGlzKS52YWwoKSk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzb3B0LmpvaW4oc2V0dGluZ3MuY3N2U2VwQ2hhcik7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgVEhPU0UgT0svQ0FOQ0VMIEJVVFRPTlMgT04gTVVMVElQTEUgU0VMRUNULlxyXG4gICAgICAgICAgICAgICAgbXVsdGlTZWxlbGVjdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5hZGRDbGFzcygnbXVsdGlwbGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBPLm9rYnRuID0gJCgnPHAgY2xhc3M9XCJidG5Pa1wiPicrc2V0dGluZ3MubG9jYWxlWzBdKyc8L3A+JykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiBjb21iaW5lZCBjaGFuZ2UgZXZlbnQgaXMgc2V0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MudHJpZ2dlckNoYW5nZUNvbWJpbmVkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGVjayBmb3IgYSBjaGFuZ2UgaW4gdGhlIHNlbGVjdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPLkUuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykubGVuZ3RoICE9IE8uUHN0YXRlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5FLmZpbmQoJ29wdGlvbicpLmVhY2goZnVuY3Rpb24gKGksZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlLnNlbGVjdGVkICYmIE8uUHN0YXRlLmluZGV4T2YoaSkgPCAwKSBjaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uY2FsbENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uaGlkZU9wdHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBPLmNhbmNlbEJ0biA9ICQoJzxwIGNsYXNzPVwiYnRuQ2FuY2VsXCI+JytzZXR0aW5ncy5sb2NhbGVbMV0rJzwvcD4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uX2NuYnRuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uaGlkZU9wdHMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5hcHBlbmQoJCgnPGRpdiBjbGFzcz1cIk11bHRpQ29udHJvbHNcIj4nKS5hcHBlbmQoTy5va2J0bikuYXBwZW5kKE8uY2FuY2VsQnRuKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIF9jbmJ0bjpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSBhbGwgc2VsZWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykuZWFjaChmdW5jdGlvbiAoKSB7IHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmZpbmQoJ2xpLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJylcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVzdG9yZSBzZWxlY3Rpb25zIGZyb20gc2F2ZWQgc3RhdGUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBPLlBzdGF0ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5FLmZpbmQoJ29wdGlvbicpW08uUHN0YXRlW2ldXS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnVsLmZpbmQoJ2xpLm9wdCcpLmVxKE8uUHN0YXRlW2ldKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsQWxsU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgU2VsQWxsOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFPLmlzX211bHRpKXJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICBPLnNlbEFsbCA9ICQoJzxwIGNsYXNzPVwic2VsZWN0LWFsbFwiPjxzcGFuPjxpPjwvaT48L3NwYW4+PGxhYmVsPicgKyBzZXR0aW5ncy5sb2NhbGVbMl0gKyAnPC9sYWJlbD48L3A+Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZWxBbGwub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG5cdFx0XHRcdFx0XHQvL08udG9nZ1NlbEFsbCghKTtcclxuXHRcdFx0XHRcdFx0Ty5zZWxBbGwudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcblx0XHRcdFx0XHRcdE8ub3B0RGl2LmZpbmQoJ2xpLm9wdCcpLm5vdCgnLmhpZGRlbicpLmVhY2goZnVuY3Rpb24oaXgsZSl7XHJcblx0XHRcdFx0XHRcdFx0ZSA9ICQoZSk7XHJcblx0XHRcdFx0XHRcdFx0aWYoTy5zZWxBbGwuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpe1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYoIWUuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpZS50cmlnZ2VyKCdjbGljaycpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRlbHNlXHJcblx0XHRcdFx0XHRcdFx0XHRpZihlLmhhc0NsYXNzKCdzZWxlY3RlZCcpKWUudHJpZ2dlcignY2xpY2snKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYucHJlcGVuZChPLnNlbEFsbCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBtb2R1bGUgKGNhbiBiZSByZW1vdmVkIGlmIG5vdCByZXF1aXJlZC4pXHJcbiAgICAgICAgICAgICAgICBTZWFyY2g6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYyA9IE8uQ2FwdGlvbkNvbnQuYWRkQ2xhc3MoJ3NlYXJjaCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQID0gJCgnPHAgY2xhc3M9XCJuby1tYXRjaFwiPicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLmZ0eHQgPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInNlYXJjaC10eHRcIiB2YWx1ZT1cIlwiIHBsYWNlaG9sZGVyPVwiJyArIHNldHRpbmdzLnNlYXJjaFRleHQgKyAnXCI+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuYXBwZW5kKE8uZnR4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuY2hpbGRyZW4oJ3VsJykuYWZ0ZXIoUCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8uZnR4dC5vbigna2V5dXAuc3VtbycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhpZCA9IE8ub3B0RGl2LmZpbmQoJ3VsLm9wdGlvbnMgbGkub3B0JykuZWFjaChmdW5jdGlvbihpeCxlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSAkKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKE8uZnR4dC52YWwoKS50b0xvd2VyQ2FzZSgpKSA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5ub3QoJy5oaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFAuaHRtbChzZXR0aW5ncy5ub01hdGNoLnJlcGxhY2UoL1xcezBcXH0vZywgTy5mdHh0LnZhbCgpKSkudG9nZ2xlKCFoaWQubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsQWxsU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgc2VsQWxsU3RhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNlbGVjdEFsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2MgPSAwLCB2YyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmZpbmQoJ2xpLm9wdCcpLm5vdCgnLmhpZGRlbicpLmVhY2goZnVuY3Rpb24gKGl4LCBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJChlKS5oYXNDbGFzcygnc2VsZWN0ZWQnKSkgc2MrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJChlKS5oYXNDbGFzcygnZGlzYWJsZWQnKSkgdmMrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VsZWN0IGFsbCBjaGVja2JveCBzdGF0ZSBjaGFuZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzYyA9PSB2YykgTy5zZWxBbGwucmVtb3ZlQ2xhc3MoJ3BhcnRpYWwnKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2MgPT0gMCkgTy5zZWxBbGwucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkIHBhcnRpYWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBPLnNlbEFsbC5hZGRDbGFzcygncGFydGlhbCcpLy8ucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBzaG93T3B0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTy5FLmF0dHIoJ2Rpc2FibGVkJykpIHJldHVybjsgLy8gaWYgc2VsZWN0IGlzIGRpc2FibGVkIHRoZW4gcmV0cnVuXHJcbiAgICAgICAgICAgICAgICAgICAgTy5pc19vcGVuZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LmFkZENsYXNzKCdvcGVuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKE8uZnR4dClPLmZ0eHQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIE8uc2VsZWN0LmZvY3VzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhpZGUgb3B0aW9ucyBvbiBjbGljayBvdXRzaWRlLlxyXG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljay5zdW1vJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFPLnNlbGVjdC5pcyhlLnRhcmdldCkgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgdGFyZ2V0IG9mIHRoZSBjbGljayBpc24ndCB0aGUgY29udGFpbmVyLi4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiBPLnNlbGVjdC5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCl7IC8vIC4uLiBub3IgYSBkZXNjZW5kYW50IG9mIHRoZSBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFPLmlzX29wZW5lZClyZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLmhpZGVPcHRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mub2tDYW5jZWxJbk11bHRpKU8uX2NuYnRuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8uaXNfZmxvYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgSCA9IE8ub3B0RGl2LmNoaWxkcmVuKCd1bCcpLm91dGVySGVpZ2h0KCkgKyAyOyAgLy8gKzIgaXMgY2xlYXIgZml4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX211bHRpKSBIID0gSCArIHBhcnNlSW50KE8ub3B0RGl2LmNzcygncGFkZGluZy1ib3R0b20nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmNzcygnaGVpZ2h0JywgSCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnc3Vtb1N0b3BTY3JvbGwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8uc2V0UHN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vbWFpbnRhaW4gc3RhdGUgd2hlbiBvay9jYW5jZWwgYnV0dG9ucyBhcmUgYXZhaWxhYmxlIHN0b3JpbmcgdGhlIGluZGV4ZXMuXHJcbiAgICAgICAgICAgICAgICBzZXRQc3RhdGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX211bHRpICYmIChPLmlzX2Zsb2F0aW5nIHx8IHNldHRpbmdzLm9rQ2FuY2VsSW5NdWx0aSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLlBzdGF0ZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhc3N1bWluZyB0aGF0IGZpbmQgcmV0dXJucyBlbGVtZW50cyBpbiB0cmVlIG9yZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5maW5kKCdvcHRpb24nKS5lYWNoKGZ1bmN0aW9uIChpLCBlKXtpZihlLnNlbGVjdGVkKSBPLlBzdGF0ZS5wdXNoKGkpO30pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgY2FsbENoYW5nZTpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuRS50cmlnZ2VyKCdjaGFuZ2UnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBoaWRlT3B0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBpZihPLmlzX29wZW5lZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uaXNfb3BlbmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0LnJlbW92ZUNsYXNzKCdvcGVuJykuZmluZCgndWwgbGkuc2VsJykucmVtb3ZlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrLnN1bW8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdzdW1vU3RvcFNjcm9sbCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xlYXIgdGhlIHNlYXJjaFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5zZWFyY2gpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5mdHh0LnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5maW5kKCd1bC5vcHRpb25zIGxpJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5vcHREaXYuZmluZCgnLm5vLW1hdGNoJykudG9nZ2xlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0T25PcGVuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaSA9IE8ub3B0RGl2LmZpbmQoJ2xpLm9wdDpub3QoLmhpZGRlbiknKS5lcShzZXR0aW5ncy5zZWFyY2g/MDpPLkVbMF0uc2VsZWN0ZWRJbmRleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LmZpbmQoJ2xpLnNlbCcpLnJlbW92ZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICBsaS5hZGRDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zaG93T3B0cygpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG5hdjogZnVuY3Rpb24gKHVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzLCBjLCBcclxuICAgICAgICAgICAgICAgICAgICBzPU8udWwuZmluZCgnbGkub3B0Om5vdCguZGlzYWJsZWQsIC5oaWRkZW4pJyksXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsID0gTy51bC5maW5kKCdsaS5vcHQuc2VsOm5vdCguaGlkZGVuKScpLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkeCA9IHMuaW5kZXgoc2VsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19vcGVuZWQgJiYgc2VsLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwICYmIGlkeCA+IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcy5lcShpZHgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoIXVwICYmIGlkeCA8IHMubGVuZ3RoLTEgJiYgaWR4ID4gLTEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcy5lcShpZHgrMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuOyAvLyBpZiBubyBpdGVtcyBiZWZvcmUgb3IgYWZ0ZXJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbC5yZW1vdmVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbCA9IGMuYWRkQ2xhc3MoJ3NlbCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZyBzZWwgaXRlbSB0byB2aXNpYmxlIHZpZXcuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9IE8udWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdCA9IHVsLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHNlbC5wb3NpdGlvbigpLnRvcCArIHN0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodCA+PSBzdCArIHVsLmhlaWdodCgpLXNlbC5vdXRlckhlaWdodCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWwuc2Nyb2xsVG9wKHQgLSB1bC5oZWlnaHQoKSArIHNlbC5vdXRlckhlaWdodCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodDxzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVsLnNjcm9sbFRvcCh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXRPbk9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgYmFzaWNFdmVudHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5DYXB0aW9uQ29udC5jbGljayhmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19vcGVuZWQpIE8uaGlkZU9wdHMoKTsgZWxzZSBPLnNob3dPcHRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2VsZWN0Lm9uKCdrZXlkb3duLnN1bW8nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLndoaWNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODogLy8gdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5uYXYodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOiAvLyBkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ubmF2KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6IC8vIHNwYWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLnNlYXJjaCAmJiBPLmZ0eHQuaXMoZS50YXJnZXQpKXJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOiAvLyBlbnRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19vcGVuZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLm9wdERpdi5maW5kKCd1bCBsaS5zZWwnKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnNldE9uT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgY2FzZSA5Olx0IC8vdGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzogLy8gZXNjXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mub2tDYW5jZWxJbk11bHRpKU8uX2NuYnRuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8uaGlkZU9wdHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIGV4aXQgdGhpcyBoYW5kbGVyIGZvciBvdGhlciBrZXlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uIChzY3JvbGwgLyBtb3ZlIGNhcmV0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUuc3VtbycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5mbG9hdGluZ0xpc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgb25PcHRDbGljazogZnVuY3Rpb24gKGxpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobGkuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eHQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTy5pc19tdWx0aSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGkudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaS5kYXRhKCdvcHQnKVswXS5zZWxlY3RlZCA9IGxpLmhhc0NsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxBbGxTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGkucGFyZW50KCkuZmluZCgnbGkuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTsgLy9pZiBub3QgbXVsdGlzZWxlY3QgdGhlbiByZW1vdmUgYWxsIHNlbGVjdGlvbnMgZnJvbSB0aGlzIGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGkuZGF0YSgnb3B0JylbMF0uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2JyYW5jaCBmb3IgY29tYmluZWQgY2hhbmdlIGV2ZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShPLmlzX211bHRpICYmIHNldHRpbmdzLnRyaWdnZXJDaGFuZ2VDb21iaW5lZCAmJiAoTy5pc19mbG9hdGluZyB8fCBzZXR0aW5ncy5va0NhbmNlbEluTXVsdGkpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5zZXRUZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLmNhbGxDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFPLmlzX211bHRpKSBPLmhpZGVPcHRzKCk7IC8vaWYgaXRzIG5vdCBhIG11bHRpc2VsZWN0IHRoZW4gaGlkZSBvbiBzaW5nbGUgc2VsZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8ucGxhY2Vob2xkZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChPLmlzX211bHRpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbHMgPSBPLkUuZmluZCgnOnNlbGVjdGVkJykubm90KCc6ZGlzYWJsZWQnKTsgLy9zZWxlY3RlZCBvcHRpb25zLlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHNlbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSArIDEgPj0gc2V0dGluZ3MuY3N2RGlzcENvdW50ICYmIHNldHRpbmdzLmNzdkRpc3BDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Vscy5sZW5ndGggPT0gTy5FLmZpbmQoJ29wdGlvbicpLmxlbmd0aCAmJiBzZXR0aW5ncy5jYXB0aW9uRm9ybWF0QWxsU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucGxhY2Vob2xkZXIgPSBzZXR0aW5ncy5jYXB0aW9uRm9ybWF0QWxsU2VsZWN0ZWQucmVwbGFjZSgvXFx7MFxcfS9nLCBzZWxzLmxlbmd0aCkrJywnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wbGFjZWhvbGRlciA9IHNldHRpbmdzLmNhcHRpb25Gb3JtYXQucmVwbGFjZSgvXFx7MFxcfS9nLCBzZWxzLmxlbmd0aCkrJywnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBPLnBsYWNlaG9sZGVyICs9ICQoc2Vsc1tpXSkudGV4dCgpICsgXCIsIFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wbGFjZWhvbGRlciA9IE8ucGxhY2Vob2xkZXIucmVwbGFjZSgvLChbXixdKikkLywgJyQxJyk7IC8vcmVtb3ZlIHVuZXhwZWN0ZWQgXCIsXCIgZnJvbSBsYXN0LlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5wbGFjZWhvbGRlciA9IE8uRS5maW5kKCc6c2VsZWN0ZWQnKS5ub3QoJzpkaXNhYmxlZCcpLnRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlzX3BsYWNlaG9sZGVyID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghTy5wbGFjZWhvbGRlcikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfcGxhY2Vob2xkZXIgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5wbGFjZWhvbGRlciA9IE8uRS5hdHRyKCdwbGFjZWhvbGRlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU8ucGxhY2Vob2xkZXIpICAgICAgICAgICAgICAgICAgLy9pZiBwbGFjZWhvbGRlciBpcyB0aGVyZSB0aGVuIHNldCBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wbGFjZWhvbGRlciA9IE8uRS5maW5kKCdvcHRpb246ZGlzYWJsZWQ6c2VsZWN0ZWQnKS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBPLnBsYWNlaG9sZGVyID0gTy5wbGFjZWhvbGRlciA/IChzZXR0aW5ncy5wcmVmaXggKyAnICcgKyBPLnBsYWNlaG9sZGVyKSA6IHNldHRpbmdzLnBsYWNlaG9sZGVyXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0IGRpc3BsYXkgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIE8uY2FwdGlvbi5odG1sKE8ucGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uQ2FwdGlvbkNvbnQuYXR0cigndGl0bGUnLCBPLnBsYWNlaG9sZGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zZXQgdGhlIGhpZGRlbiBmaWVsZCBpZiBwb3N0IGFzIGNzdiBpcyB0cnVlLlxyXG4gICAgICAgICAgICAgICAgICAgIGNzdkZpZWxkID0gTy5zZWxlY3QuZmluZCgnaW5wdXQuSEVNQU5UMTIzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNzdkZpZWxkLmxlbmd0aCkgY3N2RmllbGQudmFsKE8uZ2V0U2VsU3RyKCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL2FkZCBjbGFzcyBwbGFjZWhvbGRlciBpZiBpdHMgYSBwbGFjZWhvbGRlciB0ZXh0LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc19wbGFjZWhvbGRlcikgTy5jYXB0aW9uLmFkZENsYXNzKCdwbGFjZWhvbGRlcicpOyBlbHNlIE8uY2FwdGlvbi5yZW1vdmVDbGFzcygncGxhY2Vob2xkZXInKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTy5wbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgaXNNb2JpbGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRhcHRlZCBmcm9tIGh0dHA6Ly93d3cuZGV0ZWN0bW9iaWxlYnJvd3NlcnMuY29tXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2tzIGZvciBpT3MsIEFuZHJvaWQsIEJsYWNrYmVycnksIE9wZXJhIE1pbmksIGFuZCBXaW5kb3dzIG1vYmlsZSBkZXZpY2VzXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5uYXRpdmVPbkRldmljZS5sZW5ndGg7IGkrKykgaWYgKHVhLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNldHRpbmdzLm5hdGl2ZU9uRGV2aWNlW2ldLnRvTG93ZXJDYXNlKCkpID4gMCkgcmV0dXJuIHNldHRpbmdzLm5hdGl2ZU9uRGV2aWNlW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgc2V0TmF0aXZlTW9iaWxlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uRS5hZGRDbGFzcygnU2VsZWN0Q2xhc3MnKS8vLmNzcygnaGVpZ2h0JywgTy5zZWxlY3Qub3V0ZXJIZWlnaHQoKSk7XHJcblx0XHRcdFx0XHRPLm1vYiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5FLmNoYW5nZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBmbG9hdGluZ0xpc3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9jYWxsZWQgb24gaW5pdCBhbmQgYWxzbyBvbiByZXNpemUuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9PLmlzX2Zsb2F0aW5nID0gdHJ1ZSBpZiB3aW5kb3cgd2lkdGggaXMgPCBzcGVjaWZpZWQgZmxvYXQgd2lkdGhcclxuICAgICAgICAgICAgICAgICAgICBPLmlzX2Zsb2F0aW5nID0gJCh3aW5kb3cpLndpZHRoKCkgPD0gc2V0dGluZ3MuZmxvYXRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zZXQgY2xhc3MgaXNGbG9hdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LnRvZ2dsZUNsYXNzKCdpc0Zsb2F0aW5nJywgTy5pc19mbG9hdGluZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIGhlaWdodCBpZiBub3QgZmxvYXRpbmdcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIU8uaXNfZmxvYXRpbmcpIE8ub3B0RGl2LmNzcygnaGVpZ2h0JywgJycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3RvZ2dsZSBjbGFzcyBhY2NvcmRpbmcgdG8gb2tDYW5jZWxJbk11bHRpIGZsYWcgb25seSB3aGVuIGl0IGlzIG5vdCBmbG9hdGluZ1xyXG4gICAgICAgICAgICAgICAgICAgIE8ub3B0RGl2LnRvZ2dsZUNsYXNzKCdva0NhbmNlbEluTXVsdGknLCBzZXR0aW5ncy5va0NhbmNlbEluTXVsdGkgJiYgIU8uaXNfZmxvYXRpbmcpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvL0hFTFBFUlMgRk9SIE9VVFNJREVSU1xyXG4gICAgICAgICAgICAgICAgLy8gdmFsaWRhdGVzIHJhbmdlIG9mIGdpdmVuIGl0ZW0gb3BlcmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgdlJhbmdlOiBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBvcHRzID0gTy5FLmZpbmQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRzLmxlbmd0aCA8PSBpIHx8IGkgPCAwKSB0aHJvdyBcImluZGV4IG91dCBvZiBib3VuZHNcIlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvL3RvZ2dsZXMgc2VsZWN0aW9uIG9uIGMgYXMgYm9vbGVhbi5cclxuICAgICAgICAgICAgICAgIHRvZ2dTZWw6IGZ1bmN0aW9uIChjLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoaSkgPT09IFwibnVtYmVyXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnZSYW5nZShpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0ID0gTy5FLmZpbmQoJ29wdGlvbicpW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHQgPSBPLkUuZmluZCgnb3B0aW9uW3ZhbHVlPVwiJytpKydcIl0nKVswXXx8MDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHQgfHwgb3B0LmRpc2FibGVkKSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZihvcHQuc2VsZWN0ZWQgIT0gYyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5zZWxlY3RlZCA9IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFPLm1vYikgJChvcHQpLmRhdGEoJ2xpJykudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJyxjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uY2FsbENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNldFBzdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNldFRleHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxBbGxTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy90b2dnbGVzIGRpc2FibGVkIG9uIGMgYXMgYm9vbGVhbi5cclxuICAgICAgICAgICAgICAgIHRvZ2dEaXM6IGZ1bmN0aW9uIChjLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzLnZSYW5nZShpKTtcclxuICAgICAgICAgICAgICAgICAgICBPLkUuZmluZCgnb3B0aW9uJylbaV0uZGlzYWJsZWQgPSBjO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGMpTy5FLmZpbmQoJ29wdGlvbicpW2ldLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIU8ubW9iKU8ub3B0RGl2LmZpbmQoJ3VsLm9wdGlvbnMgbGknKS5lcShpKS50b2dnbGVDbGFzcygnZGlzYWJsZWQnLCBjKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBPLnNldFRleHQoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdG9nZ2xlIGRpc2FibGUvZW5hYmxlIG9uIGNvbXBsZXRlIHNlbGVjdCBjb250cm9sXHJcbiAgICAgICAgICAgICAgICB0b2dnU3VtbzogZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIE8gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uZW5hYmxlZCA9IHZhbDtcclxuICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC50b2dnbGVDbGFzcygnZGlzYWJsZWQnLCB2YWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uRS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5zZWxlY3QuYXR0cigndGFiaW5kZXgnLCcwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTztcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy90b2dnbGVzIGFsbG9wdGlvbiBvbiBjIGFzIGJvb2xlYW4uXHJcbiAgICAgICAgICAgICAgICB0b2dnU2VsQWxsOiBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLkUuZmluZCgnb3B0aW9uJykuZWFjaChmdW5jdGlvbiAoaXgsIGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPLkUuZmluZCgnb3B0aW9uJylbJCh0aGlzKS5pbmRleCgpXS5kaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBPLkUuZmluZCgnb3B0aW9uJylbJCh0aGlzKS5pbmRleCgpXS5zZWxlY3RlZCA9IGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTy5tb2IpXHJcblx0XHRcdFx0XHRcdFx0Ty5vcHREaXYuZmluZCgndWwub3B0aW9ucyBsaScpLmVxKCQodGhpcykuaW5kZXgoKSkudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJywgYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE8uc2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFPLm1vYiAmJiBPLnNlbEFsbClPLnNlbEFsbC5yZW1vdmVDbGFzcygncGFydGlhbCcpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcsYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5jYWxsQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5zZXRQc3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLyogb3V0c2lkZSBhY2Nlc3NpYmlsaXR5IG9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBmcm9tIHRoZSBlbGVtZW50IGluc3RhbmNlLlxyXG4gICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIHJlbG9hZDpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbG0gPSB0aGlzLnVubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKGVsbSkuU3Vtb1NlbGVjdChzZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHVubG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5iZWZvcmUoTy5FKTtcclxuICAgICAgICAgICAgICAgICAgICBPLkUuc2hvdygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Mub3V0cHV0QXNDU1YgJiYgTy5pc19tdWx0aSAmJiBPLnNlbGVjdC5maW5kKCdpbnB1dC5IRU1BTlQxMjMnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLmF0dHIoJ25hbWUnLCBPLnNlbGVjdC5maW5kKCdpbnB1dC5IRU1BTlQxMjMnKS5hdHRyKCduYW1lJykpOyAvLyByZXN0b3JlIHRoZSBuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBPLnNlbGVjdC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2VsT2JqLnN1bW87XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbE9iajtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBhZGQgYSBuZXcgb3B0aW9uIHRvIHNlbGVjdCBhdCBhIGdpdmVuIGluZGV4LlxyXG4gICAgICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiAodmFsLCB0eHQsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PSBcInVuZGVmaW5lZFwiKSB0aHJvdyBcIk5vIHZhbHVlIHRvIGFkZFwiXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBPID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBvcHRzPU8uRS5maW5kKCdvcHRpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdHh0ID09IFwibnVtYmVyXCIpIHsgaSA9IHR4dDsgdHh0ID0gdmFsOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0eHQgPT0gXCJ1bmRlZmluZWRcIikgeyB0eHQgPSB2YWw7IH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0ID0gJChcIjxvcHRpb24+PC9vcHRpb24+XCIpLnZhbCh2YWwpLmh0bWwodHh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdHMubGVuZ3RoIDwgaSkgdGhyb3cgXCJpbmRleCBvdXQgb2YgYm91bmRzXCJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpID09IFwidW5kZWZpbmVkXCIgfHwgb3B0cy5sZW5ndGggPT0gaSkgeyAvLyBhZGQgaXQgdG8gdGhlIGxhc3QgaWYgZ2l2ZW4gaW5kZXggaXMgbGFzdCBubyBvciBubyBpbmRleCBwcm92aWRlcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgTy5FLmFwcGVuZChvcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighTy5tb2IpTy51bC5hcHBlbmQoTy5jcmVhdGVMaShvcHQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMuZXEoaSkuYmVmb3JlKG9wdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFPLm1vYilPLnVsLmZpbmQoJ2xpLm9wdCcpLmVxKGkpLmJlZm9yZShPLmNyZWF0ZUxpKG9wdCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbE9iajtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyByZW1vdmVzIGFuIGl0ZW0gYXQgYSBnaXZlbiBpbmRleC5cclxuICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXMudlJhbmdlKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uRS5maW5kKCdvcHRpb24nKS5lcShpKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZighTy5tb2IpTy5vcHREaXYuZmluZCgndWwub3B0aW9ucyBsaScpLmVxKGkpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIFNlbGVjdCBhbiBpdGVtIGF0IGEgZ2l2ZW4gaW5kZXguXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RJdGVtOiBmdW5jdGlvbiAoaSkgeyB0aGlzLnRvZ2dTZWwodHJ1ZSwgaSk7IH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBVblNlbGVjdCBhbiBpdGVuIGF0IGEgZ2l2ZW4gaW5kZXguXHJcbiAgICAgICAgICAgICAgICB1blNlbGVjdEl0ZW06IGZ1bmN0aW9uIChpKSB7IHRoaXMudG9nZ1NlbChmYWxzZSwgaSk7IH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBTZWxlY3QgYWxsIGl0ZW1zICBvZiB0aGUgc2VsZWN0LlxyXG4gICAgICAgICAgICAgICAgc2VsZWN0QWxsOiBmdW5jdGlvbiAoKSB7IHRoaXMudG9nZ1NlbEFsbCh0cnVlKTsgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIFVuU2VsZWN0IGFsbCBpdGVtcyBvZiB0aGUgc2VsZWN0LlxyXG4gICAgICAgICAgICAgICAgdW5TZWxlY3RBbGw6IGZ1bmN0aW9uICgpIHsgdGhpcy50b2dnU2VsQWxsKGZhbHNlKTsgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyMjIERpc2FibGUgYW4gaXRlbiBhdCBhIGdpdmVuIGluZGV4LlxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZUl0ZW06IGZ1bmN0aW9uIChpKSB7IHRoaXMudG9nZ0Rpcyh0cnVlLCBpKSB9LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIyMgUmVtb3ZlcyBkaXNhYmxlZCBhbiBpdGVuIGF0IGEgZ2l2ZW4gaW5kZXguXHJcbiAgICAgICAgICAgICAgICBlbmFibGVJdGVtOiBmdW5jdGlvbiAoaSkgeyB0aGlzLnRvZ2dEaXMoZmFsc2UsIGkpIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBOZXcgc2ltcGxlIG1ldGhvZHMgYXMgZ2V0dGVyIGFuZCBzZXR0ZXIgYXJlIG5vdCB3b3JraW5nIGZpbmUgaW4gaWU4LVxyXG4gICAgICAgICAgICAgICAgLy8jIyB2YXJpYWJsZSB0byBjaGVjayBzdGF0ZSBvZiBjb250cm9sIGlmIGVuYWJsZWQgb3IgZGlzYWJsZWQuXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIC8vIyMgRW5hYmxlcyB0aGUgY29udHJvbFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvZ2dTdW1vKGZhbHNlKX0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8jIyBEaXNhYmxlcyB0aGUgY29udHJvbFxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b2dnU3Vtbyh0cnVlKX0sXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgTyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgTy5jcmVhdGVFbGVtcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIE8uc2V0VGV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBPXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgc2VsT2JqLnN1bW8uaW5pdCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcmV0Lmxlbmd0aCA9PSAxID8gcmV0WzBdIDogcmV0O1xyXG4gICAgfTtcclxuXHJcblxyXG59KGpRdWVyeSkpO1xyXG4iLCIvKiFcclxuICogRm90b3JhbWEgNC42LjQgfCBodHRwOi8vZm90b3JhbWEuaW8vbGljZW5zZS9cclxuICovXHJcbmZvdG9yYW1hVmVyc2lvbj1cIjQuNi40XCIsZnVuY3Rpb24oYSxiLGMsZCxlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBmKGEpe3ZhciBiPVwiYmV6X1wiK2QubWFrZUFycmF5KGFyZ3VtZW50cykuam9pbihcIl9cIikucmVwbGFjZShcIi5cIixcInBcIik7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZC5lYXNpbmdbYl0pe3ZhciBjPWZ1bmN0aW9uKGEsYil7dmFyIGM9W251bGwsbnVsbF0sZD1bbnVsbCxudWxsXSxlPVtudWxsLG51bGxdLGY9ZnVuY3Rpb24oZixnKXtyZXR1cm4gZVtnXT0zKmFbZ10sZFtnXT0zKihiW2ddLWFbZ10pLWVbZ10sY1tnXT0xLWVbZ10tZFtnXSxmKihlW2ddK2YqKGRbZ10rZipjW2ddKSl9LGc9ZnVuY3Rpb24oYSl7cmV0dXJuIGVbMF0rYSooMipkWzBdKzMqY1swXSphKX0saD1mdW5jdGlvbihhKXtmb3IodmFyIGIsYz1hLGQ9MDsrK2Q8MTQmJihiPWYoYywwKS1hLCEoTWF0aC5hYnMoYik8LjAwMSkpOyljLT1iL2coYyk7cmV0dXJuIGN9O3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZihoKGEpLDEpfX07ZC5lYXNpbmdbYl09ZnVuY3Rpb24oYixkLGUsZixnKXtyZXR1cm4gZipjKFthWzBdLGFbMV1dLFthWzJdLGFbM11dKShkL2cpK2V9fXJldHVybiBifWZ1bmN0aW9uIGcoKXt9ZnVuY3Rpb24gaChhLGIsYyl7cmV0dXJuIE1hdGgubWF4KGlzTmFOKGIpPy0xLzA6YixNYXRoLm1pbihpc05hTihjKT8xLzA6YyxhKSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4gYS5tYXRjaCgvbWEvKSYmYS5tYXRjaCgvLT9cXGQrKD8hZCkvZylbYS5tYXRjaCgvM2QvKT8xMjo0XX1mdW5jdGlvbiBqKGEpe3JldHVybiBJYz8raShhLmNzcyhcInRyYW5zZm9ybVwiKSk6K2EuY3NzKFwibGVmdFwiKS5yZXBsYWNlKFwicHhcIixcIlwiKX1mdW5jdGlvbiBrKGEpe3ZhciBiPXt9O3JldHVybiBJYz9iLnRyYW5zZm9ybT1cInRyYW5zbGF0ZTNkKFwiK2ErXCJweCwwLDApXCI6Yi5sZWZ0PWEsYn1mdW5jdGlvbiBsKGEpe3JldHVybntcInRyYW5zaXRpb24tZHVyYXRpb25cIjphK1wibXNcIn19ZnVuY3Rpb24gbShhLGIpe3JldHVybiBpc05hTihhKT9iOmF9ZnVuY3Rpb24gbihhLGIpe3JldHVybiBtKCtTdHJpbmcoYSkucmVwbGFjZShifHxcInB4XCIsXCJcIikpfWZ1bmN0aW9uIG8oYSl7cmV0dXJuLyUkLy50ZXN0KGEpP24oYSxcIiVcIik6ZX1mdW5jdGlvbiBwKGEsYil7cmV0dXJuIG0obyhhKS8xMDAqYixuKGEpKX1mdW5jdGlvbiBxKGEpe3JldHVybighaXNOYU4obihhKSl8fCFpc05hTihuKGEsXCIlXCIpKSkmJmF9ZnVuY3Rpb24gcihhLGIsYyxkKXtyZXR1cm4oYS0oZHx8MCkpKihiKyhjfHwwKSl9ZnVuY3Rpb24gcyhhLGIsYyxkKXtyZXR1cm4tTWF0aC5yb3VuZChhLyhiKyhjfHwwKSktKGR8fDApKX1mdW5jdGlvbiB0KGEpe3ZhciBiPWEuZGF0YSgpO2lmKCFiLnRFbmQpe3ZhciBjPWFbMF0sZD17V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLE9UcmFuc2l0aW9uOlwib1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmRcIixtc1RyYW5zaXRpb246XCJNU1RyYW5zaXRpb25FbmRcIix0cmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwifTtUKGMsZFt1Yy5wcmVmaXhlZChcInRyYW5zaXRpb25cIildLGZ1bmN0aW9uKGEpe2IudFByb3AmJmEucHJvcGVydHlOYW1lLm1hdGNoKGIudFByb3ApJiZiLm9uRW5kRm4oKX0pLGIudEVuZD0hMH19ZnVuY3Rpb24gdShhLGIsYyxkKXt2YXIgZSxmPWEuZGF0YSgpO2YmJihmLm9uRW5kRm49ZnVuY3Rpb24oKXtlfHwoZT0hMCxjbGVhclRpbWVvdXQoZi50VCksYygpKX0sZi50UHJvcD1iLGNsZWFyVGltZW91dChmLnRUKSxmLnRUPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLm9uRW5kRm4oKX0sMS41KmQpLHQoYSkpfWZ1bmN0aW9uIHYoYSxiKXtpZihhLmxlbmd0aCl7dmFyIGM9YS5kYXRhKCk7SWM/KGEuY3NzKGwoMCkpLGMub25FbmRGbj1nLGNsZWFyVGltZW91dChjLnRUKSk6YS5zdG9wKCk7dmFyIGQ9dyhiLGZ1bmN0aW9uKCl7cmV0dXJuIGooYSl9KTtyZXR1cm4gYS5jc3MoayhkKSksZH19ZnVuY3Rpb24gdygpe2Zvcih2YXIgYSxiPTAsYz1hcmd1bWVudHMubGVuZ3RoO2M+YiYmKGE9Yj9hcmd1bWVudHNbYl0oKTphcmd1bWVudHNbYl0sXCJudW1iZXJcIiE9dHlwZW9mIGEpO2IrKyk7cmV0dXJuIGF9ZnVuY3Rpb24geChhLGIpe3JldHVybiBNYXRoLnJvdW5kKGErKGItYSkvMS41KX1mdW5jdGlvbiB5KCl7cmV0dXJuIHkucD15LnB8fChcImh0dHBzOlwiPT09Yy5wcm90b2NvbD9cImh0dHBzOi8vXCI6XCJodHRwOi8vXCIpLHkucH1mdW5jdGlvbiB6KGEpe3ZhciBjPWIuY3JlYXRlRWxlbWVudChcImFcIik7cmV0dXJuIGMuaHJlZj1hLGN9ZnVuY3Rpb24gQShhLGIpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBhO2E9eihhKTt2YXIgYyxkO2lmKGEuaG9zdC5tYXRjaCgveW91dHViZVxcLmNvbS8pJiZhLnNlYXJjaCl7aWYoYz1hLnNlYXJjaC5zcGxpdChcInY9XCIpWzFdKXt2YXIgZT1jLmluZGV4T2YoXCImXCIpOy0xIT09ZSYmKGM9Yy5zdWJzdHJpbmcoMCxlKSksZD1cInlvdXR1YmVcIn19ZWxzZSBhLmhvc3QubWF0Y2goL3lvdXR1YmVcXC5jb218eW91dHVcXC5iZS8pPyhjPWEucGF0aG5hbWUucmVwbGFjZSgvXlxcLyhlbWJlZFxcL3x2XFwvKT8vLFwiXCIpLnJlcGxhY2UoL1xcLy4qLyxcIlwiKSxkPVwieW91dHViZVwiKTphLmhvc3QubWF0Y2goL3ZpbWVvXFwuY29tLykmJihkPVwidmltZW9cIixjPWEucGF0aG5hbWUucmVwbGFjZSgvXlxcLyh2aWRlb1xcLyk/LyxcIlwiKS5yZXBsYWNlKC9cXC8uKi8sXCJcIikpO3JldHVybiBjJiZkfHwhYnx8KGM9YS5ocmVmLGQ9XCJjdXN0b21cIiksYz97aWQ6Yyx0eXBlOmQsczphLnNlYXJjaC5yZXBsYWNlKC9eXFw/LyxcIlwiKSxwOnkoKX06ITF9ZnVuY3Rpb24gQihhLGIsYyl7dmFyIGUsZixnPWEudmlkZW87cmV0dXJuXCJ5b3V0dWJlXCI9PT1nLnR5cGU/KGY9eSgpK1wiaW1nLnlvdXR1YmUuY29tL3ZpL1wiK2cuaWQrXCIvZGVmYXVsdC5qcGdcIixlPWYucmVwbGFjZSgvXFwvZGVmYXVsdC5qcGckLyxcIi9ocWRlZmF1bHQuanBnXCIpLGEudGh1bWJzUmVhZHk9ITApOlwidmltZW9cIj09PWcudHlwZT9kLmFqYXgoe3VybDp5KCkrXCJ2aW1lby5jb20vYXBpL3YyL3ZpZGVvL1wiK2cuaWQrXCIuanNvblwiLGRhdGFUeXBlOlwianNvbnBcIixzdWNjZXNzOmZ1bmN0aW9uKGQpe2EudGh1bWJzUmVhZHk9ITAsQyhiLHtpbWc6ZFswXS50aHVtYm5haWxfbGFyZ2UsdGh1bWI6ZFswXS50aHVtYm5haWxfc21hbGx9LGEuaSxjKX19KTphLnRodW1ic1JlYWR5PSEwLHtpbWc6ZSx0aHVtYjpmfX1mdW5jdGlvbiBDKGEsYixjLGUpe2Zvcih2YXIgZj0wLGc9YS5sZW5ndGg7Zz5mO2YrKyl7dmFyIGg9YVtmXTtpZihoLmk9PT1jJiZoLnRodW1ic1JlYWR5KXt2YXIgaT17dmlkZW9SZWFkeTohMH07aVtYY109aVtaY109aVtZY109ITEsZS5zcGxpY2UoZiwxLGQuZXh0ZW5kKHt9LGgsaSxiKSk7YnJlYWt9fX1mdW5jdGlvbiBEKGEpe2Z1bmN0aW9uIGIoYSxiLGUpe3ZhciBmPWEuY2hpbGRyZW4oXCJpbWdcIikuZXEoMCksZz1hLmF0dHIoXCJocmVmXCIpLGg9YS5hdHRyKFwic3JjXCIpLGk9Zi5hdHRyKFwic3JjXCIpLGo9Yi52aWRlbyxrPWU/QShnLGo9PT0hMCk6ITE7az9nPSExOms9aixjKGEsZixkLmV4dGVuZChiLHt2aWRlbzprLGltZzpiLmltZ3x8Z3x8aHx8aSx0aHVtYjpiLnRodW1ifHxpfHxofHxnfSkpfWZ1bmN0aW9uIGMoYSxiLGMpe3ZhciBlPWMudGh1bWImJmMuaW1nIT09Yy50aHVtYixmPW4oYy53aWR0aHx8YS5hdHRyKFwid2lkdGhcIikpLGc9bihjLmhlaWdodHx8YS5hdHRyKFwiaGVpZ2h0XCIpKTtkLmV4dGVuZChjLHt3aWR0aDpmLGhlaWdodDpnLHRodW1icmF0aW86UyhjLnRodW1icmF0aW98fG4oYy50aHVtYndpZHRofHxiJiZiLmF0dHIoXCJ3aWR0aFwiKXx8ZXx8ZikvbihjLnRodW1iaGVpZ2h0fHxiJiZiLmF0dHIoXCJoZWlnaHRcIil8fGV8fGcpKX0pfXZhciBlPVtdO3JldHVybiBhLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpe3ZhciBhPWQodGhpcyksZj1SKGQuZXh0ZW5kKGEuZGF0YSgpLHtpZDphLmF0dHIoXCJpZFwiKX0pKTtpZihhLmlzKFwiYSwgaW1nXCIpKWIoYSxmLCEwKTtlbHNle2lmKGEuaXMoXCI6ZW1wdHlcIikpcmV0dXJuO2MoYSxudWxsLGQuZXh0ZW5kKGYse2h0bWw6dGhpcyxfaHRtbDphLmh0bWwoKX0pKX1lLnB1c2goZil9KSxlfWZ1bmN0aW9uIEUoYSl7cmV0dXJuIDA9PT1hLm9mZnNldFdpZHRoJiYwPT09YS5vZmZzZXRIZWlnaHR9ZnVuY3Rpb24gRihhKXtyZXR1cm4hZC5jb250YWlucyhiLmRvY3VtZW50RWxlbWVudCxhKX1mdW5jdGlvbiBHKGEsYixjLGQpe3JldHVybiBHLml8fChHLmk9MSxHLmlpPVshMF0pLGQ9ZHx8Ry5pLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBHLmlpW2RdJiYoRy5paVtkXT0hMCksYSgpP2IoKTpHLmlpW2RdJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Ry5paVtkXSYmRyhhLGIsYyxkKX0sY3x8MTAwKSxHLmkrK31mdW5jdGlvbiBIKGEpe2MucmVwbGFjZShjLnByb3RvY29sK1wiLy9cIitjLmhvc3QrYy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvPy8sXCIvXCIpK2Muc2VhcmNoK1wiI1wiK2EpfWZ1bmN0aW9uIEkoYSxiLGMsZCl7dmFyIGU9YS5kYXRhKCksZj1lLm1lYXN1cmVzO2lmKGYmJighZS5sfHxlLmwuVyE9PWYud2lkdGh8fGUubC5IIT09Zi5oZWlnaHR8fGUubC5yIT09Zi5yYXRpb3x8ZS5sLnchPT1iLnd8fGUubC5oIT09Yi5ofHxlLmwubSE9PWN8fGUubC5wIT09ZCkpe3ZhciBnPWYud2lkdGgsaT1mLmhlaWdodCxqPWIudy9iLmgsaz1mLnJhdGlvPj1qLGw9XCJzY2FsZWRvd25cIj09PWMsbT1cImNvbnRhaW5cIj09PWMsbj1cImNvdmVyXCI9PT1jLG89JChkKTtrJiYobHx8bSl8fCFrJiZuPyhnPWgoYi53LDAsbD9nOjEvMCksaT1nL2YucmF0aW8pOihrJiZufHwhayYmKGx8fG0pKSYmKGk9aChiLmgsMCxsP2k6MS8wKSxnPWkqZi5yYXRpbyksYS5jc3Moe3dpZHRoOmcsaGVpZ2h0OmksbGVmdDpwKG8ueCxiLnctZyksdG9wOnAoby55LGIuaC1pKX0pLGUubD17VzpmLndpZHRoLEg6Zi5oZWlnaHQscjpmLnJhdGlvLHc6Yi53LGg6Yi5oLG06YyxwOmR9fXJldHVybiEwfWZ1bmN0aW9uIEooYSxiKXt2YXIgYz1hWzBdO2Muc3R5bGVTaGVldD9jLnN0eWxlU2hlZXQuY3NzVGV4dD1iOmEuaHRtbChiKX1mdW5jdGlvbiBLKGEsYixjKXtyZXR1cm4gYj09PWM/ITE6Yj49YT9cImxlZnRcIjphPj1jP1wicmlnaHRcIjpcImxlZnQgcmlnaHRcIn1mdW5jdGlvbiBMKGEsYixjLGQpe2lmKCFjKXJldHVybiExO2lmKCFpc05hTihhKSlyZXR1cm4gYS0oZD8wOjEpO2Zvcih2YXIgZSxmPTAsZz1iLmxlbmd0aDtnPmY7ZisrKXt2YXIgaD1iW2ZdO2lmKGguaWQ9PT1hKXtlPWY7YnJlYWt9fXJldHVybiBlfWZ1bmN0aW9uIE0oYSxiLGMpe2M9Y3x8e30sYS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGEsZT1kKHRoaXMpLGY9ZS5kYXRhKCk7Zi5jbGlja09ufHwoZi5jbGlja09uPSEwLGQuZXh0ZW5kKGNiKGUse29uU3RhcnQ6ZnVuY3Rpb24oYil7YT1iLChjLm9uU3RhcnR8fGcpLmNhbGwodGhpcyxiKX0sb25Nb3ZlOmMub25Nb3ZlfHxnLG9uVG91Y2hFbmQ6Yy5vblRvdWNoRW5kfHxnLG9uRW5kOmZ1bmN0aW9uKGMpe2MubW92ZWR8fGIuY2FsbCh0aGlzLGEpfX0pLHtub01vdmU6ITB9KSl9KX1mdW5jdGlvbiBOKGEsYil7cmV0dXJuJzxkaXYgY2xhc3M9XCInK2ErJ1wiPicrKGJ8fFwiXCIpK1wiPC9kaXY+XCJ9ZnVuY3Rpb24gTyhhKXtmb3IodmFyIGI9YS5sZW5ndGg7Yjspe3ZhciBjPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpiLS0pLGQ9YVtiXTthW2JdPWFbY10sYVtjXT1kfXJldHVybiBhfWZ1bmN0aW9uIFAoYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkmJmQubWFwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGQuZXh0ZW5kKHt9LGEpfSl9ZnVuY3Rpb24gUShhLGIsYyl7YS5zY3JvbGxMZWZ0KGJ8fDApLnNjcm9sbFRvcChjfHwwKX1mdW5jdGlvbiBSKGEpe2lmKGEpe3ZhciBiPXt9O3JldHVybiBkLmVhY2goYSxmdW5jdGlvbihhLGMpe2JbYS50b0xvd2VyQ2FzZSgpXT1jfSksYn19ZnVuY3Rpb24gUyhhKXtpZihhKXt2YXIgYj0rYTtyZXR1cm4gaXNOYU4oYik/KGI9YS5zcGxpdChcIi9cIiksK2JbMF0vK2JbMV18fGUpOmJ9fWZ1bmN0aW9uIFQoYSxiLGMsZCl7YiYmKGEuYWRkRXZlbnRMaXN0ZW5lcj9hLmFkZEV2ZW50TGlzdGVuZXIoYixjLCEhZCk6YS5hdHRhY2hFdmVudChcIm9uXCIrYixjKSl9ZnVuY3Rpb24gVShhKXtyZXR1cm4hIWEuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIil9ZnVuY3Rpb24gVihhKXtyZXR1cm57dGFiaW5kZXg6LTEqYStcIlwiLGRpc2FibGVkOmF9fWZ1bmN0aW9uIFcoYSxiKXtUKGEsXCJrZXl1cFwiLGZ1bmN0aW9uKGMpe1UoYSl8fDEzPT1jLmtleUNvZGUmJmIuY2FsbChhLGMpfSl9ZnVuY3Rpb24gWChhLGIpe1QoYSxcImZvY3VzXCIsYS5vbmZvY3VzaW49ZnVuY3Rpb24oYyl7Yi5jYWxsKGEsYyl9LCEwKX1mdW5jdGlvbiBZKGEsYil7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMSxiJiZhLnN0b3BQcm9wYWdhdGlvbiYmYS5zdG9wUHJvcGFnYXRpb24oKX1mdW5jdGlvbiBaKGEpe3JldHVybiBhP1wiPlwiOlwiPFwifWZ1bmN0aW9uICQoYSl7cmV0dXJuIGE9KGErXCJcIikuc3BsaXQoL1xccysvKSx7eDpxKGFbMF0pfHxiZCx5OnEoYVsxXSl8fGJkfX1mdW5jdGlvbiBfKGEsYil7dmFyIGM9YS5kYXRhKCksZT1NYXRoLnJvdW5kKGIucG9zKSxmPWZ1bmN0aW9uKCl7Yy5zbGlkaW5nPSExLChiLm9uRW5kfHxnKSgpfTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5vdmVyUG9zJiZiLm92ZXJQb3MhPT1iLnBvcyYmKGU9Yi5vdmVyUG9zLGY9ZnVuY3Rpb24oKXtfKGEsZC5leHRlbmQoe30sYix7b3ZlclBvczpiLnBvcyx0aW1lOk1hdGgubWF4KFFjLGIudGltZS8yKX0pKX0pO3ZhciBoPWQuZXh0ZW5kKGsoZSksYi53aWR0aCYme3dpZHRoOmIud2lkdGh9KTtjLnNsaWRpbmc9ITAsSWM/KGEuY3NzKGQuZXh0ZW5kKGwoYi50aW1lKSxoKSksYi50aW1lPjEwP3UoYSxcInRyYW5zZm9ybVwiLGYsYi50aW1lKTpmKCkpOmEuc3RvcCgpLmFuaW1hdGUoaCxiLnRpbWUsX2MsZil9ZnVuY3Rpb24gYWIoYSxiLGMsZSxmLGgpe3ZhciBpPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBoO2lmKGl8fChmLnB1c2goYXJndW1lbnRzKSxBcnJheS5wcm90b3R5cGUucHVzaC5jYWxsKGFyZ3VtZW50cyxmLmxlbmd0aCksIShmLmxlbmd0aD4xKSkpe2E9YXx8ZChhKSxiPWJ8fGQoYik7dmFyIGo9YVswXSxrPWJbMF0sbD1cImNyb3NzZmFkZVwiPT09ZS5tZXRob2QsbT1mdW5jdGlvbigpe2lmKCFtLmRvbmUpe20uZG9uZT0hMDt2YXIgYT0oaXx8Zi5zaGlmdCgpKSYmZi5zaGlmdCgpO2EmJmFiLmFwcGx5KHRoaXMsYSksKGUub25FbmR8fGcpKCEhYSl9fSxuPWUudGltZS8oaHx8MSk7Yy5yZW1vdmVDbGFzcyhSYitcIiBcIitRYiksYS5zdG9wKCkuYWRkQ2xhc3MoUmIpLGIuc3RvcCgpLmFkZENsYXNzKFFiKSxsJiZrJiZhLmZhZGVUbygwLDApLGEuZmFkZVRvKGw/bjowLDEsbCYmbSksYi5mYWRlVG8obiwwLG0pLGomJmx8fGt8fG0oKX19ZnVuY3Rpb24gYmIoYSl7dmFyIGI9KGEudG91Y2hlc3x8W10pWzBdfHxhO2EuX3g9Yi5wYWdlWCxhLl95PWIuY2xpZW50WSxhLl9ub3c9ZC5ub3coKX1mdW5jdGlvbiBjYihhLGMpe2Z1bmN0aW9uIGUoYSl7cmV0dXJuIG09ZChhLnRhcmdldCksdS5jaGVja2VkPXA9cT1zPSExLGt8fHUuZmxvd3x8YS50b3VjaGVzJiZhLnRvdWNoZXMubGVuZ3RoPjF8fGEud2hpY2g+MXx8ZWQmJmVkLnR5cGUhPT1hLnR5cGUmJmdkfHwocD1jLnNlbGVjdCYmbS5pcyhjLnNlbGVjdCx0KSk/cDoobz1cInRvdWNoc3RhcnRcIj09PWEudHlwZSxxPW0uaXMoXCJhLCBhICpcIix0KSxuPXUuY29udHJvbCxyPXUubm9Nb3ZlfHx1Lm5vU3dpcGV8fG4/MTY6dS5zbmFwPzA6NCxiYihhKSxsPWVkPWEsZmQ9YS50eXBlLnJlcGxhY2UoL2Rvd258c3RhcnQvLFwibW92ZVwiKS5yZXBsYWNlKC9Eb3duLyxcIk1vdmVcIiksKGMub25TdGFydHx8ZykuY2FsbCh0LGEse2NvbnRyb2w6biwkdGFyZ2V0Om19KSxrPXUuZmxvdz0hMCx2b2lkKCghb3x8dS5nbykmJlkoYSkpKX1mdW5jdGlvbiBmKGEpe2lmKGEudG91Y2hlcyYmYS50b3VjaGVzLmxlbmd0aD4xfHxOYyYmIWEuaXNQcmltYXJ5fHxmZCE9PWEudHlwZXx8IWspcmV0dXJuIGsmJmgoKSx2b2lkKGMub25Ub3VjaEVuZHx8ZykoKTtiYihhKTt2YXIgYj1NYXRoLmFicyhhLl94LWwuX3gpLGQ9TWF0aC5hYnMoYS5feS1sLl95KSxlPWItZCxmPSh1LmdvfHx1Lnh8fGU+PTApJiYhdS5ub1N3aXBlLGk9MD5lO28mJiF1LmNoZWNrZWQ/KGs9ZikmJlkoYSk6KFkoYSksKGMub25Nb3ZlfHxnKS5jYWxsKHQsYSx7dG91Y2g6b30pKSwhcyYmTWF0aC5zcXJ0KE1hdGgucG93KGIsMikrTWF0aC5wb3coZCwyKSk+ciYmKHM9ITApLHUuY2hlY2tlZD11LmNoZWNrZWR8fGZ8fGl9ZnVuY3Rpb24gaChhKXsoYy5vblRvdWNoRW5kfHxnKSgpO3ZhciBiPWs7dS5jb250cm9sPWs9ITEsYiYmKHUuZmxvdz0hMSksIWJ8fHEmJiF1LmNoZWNrZWR8fChhJiZZKGEpLGdkPSEwLGNsZWFyVGltZW91dChoZCksaGQ9c2V0VGltZW91dChmdW5jdGlvbigpe2dkPSExfSwxZTMpLChjLm9uRW5kfHxnKS5jYWxsKHQse21vdmVkOnMsJHRhcmdldDptLGNvbnRyb2w6bix0b3VjaDpvLHN0YXJ0RXZlbnQ6bCxhYm9ydGVkOiFhfHxcIk1TUG9pbnRlckNhbmNlbFwiPT09YS50eXBlfSkpfWZ1bmN0aW9uIGkoKXt1LmZsb3d8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXt1LmZsb3c9ITB9LDEwKX1mdW5jdGlvbiBqKCl7dS5mbG93JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dS5mbG93PSExfSxQYyl9dmFyIGssbCxtLG4sbyxwLHEscixzLHQ9YVswXSx1PXt9O3JldHVybiBOYz8oVCh0LFwiTVNQb2ludGVyRG93blwiLGUpLFQoYixcIk1TUG9pbnRlck1vdmVcIixmKSxUKGIsXCJNU1BvaW50ZXJDYW5jZWxcIixoKSxUKGIsXCJNU1BvaW50ZXJVcFwiLGgpKTooVCh0LFwidG91Y2hzdGFydFwiLGUpLFQodCxcInRvdWNobW92ZVwiLGYpLFQodCxcInRvdWNoZW5kXCIsaCksVChiLFwidG91Y2hzdGFydFwiLGkpLFQoYixcInRvdWNoZW5kXCIsaiksVChiLFwidG91Y2hjYW5jZWxcIixqKSxFYy5vbihcInNjcm9sbFwiLGopLGEub24oXCJtb3VzZWRvd25cIixlKSxGYy5vbihcIm1vdXNlbW92ZVwiLGYpLm9uKFwibW91c2V1cFwiLGgpKSxhLm9uKFwiY2xpY2tcIixcImFcIixmdW5jdGlvbihhKXt1LmNoZWNrZWQmJlkoYSl9KSx1fWZ1bmN0aW9uIGRiKGEsYil7ZnVuY3Rpb24gYyhjLGQpe0E9ITAsaj1sPWMuX3gscT1jLl9ub3cscD1bW3Esal1dLG09bj1ELm5vTW92ZXx8ZD8wOnYoYSwoYi5nZXRQb3N8fGcpKCkpLChiLm9uU3RhcnR8fGcpLmNhbGwoQixjKX1mdW5jdGlvbiBlKGEsYil7cz1ELm1pbix0PUQubWF4LHU9RC5zbmFwLHc9YS5hbHRLZXksQT16PSExLHk9Yi5jb250cm9sLHl8fEMuc2xpZGluZ3x8YyhhKX1mdW5jdGlvbiBmKGQsZSl7RC5ub1N3aXBlfHwoQXx8YyhkKSxsPWQuX3gscC5wdXNoKFtkLl9ub3csbF0pLG49bS0oai1sKSxvPUsobixzLHQpLHM+PW4/bj14KG4scyk6bj49dCYmKG49eChuLHQpKSxELm5vTW92ZXx8KGEuY3NzKGsobikpLHp8fCh6PSEwLGUudG91Y2h8fE5jfHxhLmFkZENsYXNzKGVjKSksKGIub25Nb3ZlfHxnKS5jYWxsKEIsZCx7cG9zOm4sZWRnZTpvfSkpKX1mdW5jdGlvbiBpKGUpe2lmKCFELm5vU3dpcGV8fCFlLm1vdmVkKXtBfHxjKGUuc3RhcnRFdmVudCwhMCksZS50b3VjaHx8TmN8fGEucmVtb3ZlQ2xhc3MoZWMpLHI9ZC5ub3coKTtmb3IodmFyIGYsaSxqLGssbyxxLHYseCx5LHo9ci1QYyxDPW51bGwsRT1RYyxGPWIuZnJpY3Rpb24sRz1wLmxlbmd0aC0xO0c+PTA7Ry0tKXtpZihmPXBbR11bMF0saT1NYXRoLmFicyhmLXopLG51bGw9PT1DfHxqPmkpQz1mLGs9cFtHXVsxXTtlbHNlIGlmKEM9PT16fHxpPmopYnJlYWs7aj1pfXY9aChuLHMsdCk7dmFyIEg9ay1sLEk9SD49MCxKPXItQyxLPUo+UGMsTD0hSyYmbiE9PW0mJnY9PT1uO3UmJih2PWgoTWF0aFtMP0k/XCJmbG9vclwiOlwiY2VpbFwiOlwicm91bmRcIl0obi91KSp1LHMsdCkscz10PXYpLEwmJih1fHx2PT09bikmJih5PS0oSC9KKSxFKj1oKE1hdGguYWJzKHkpLGIudGltZUxvdyxiLnRpbWVIaWdoKSxvPU1hdGgucm91bmQobit5KkUvRiksdXx8KHY9byksKCFJJiZvPnR8fEkmJnM+bykmJihxPUk/czp0LHg9by1xLHV8fCh2PXEpLHg9aCh2Ky4wMyp4LHEtNTAscSs1MCksRT1NYXRoLmFicygobi14KS8oeS9GKSkpKSxFKj13PzEwOjEsKGIub25FbmR8fGcpLmNhbGwoQixkLmV4dGVuZChlLHttb3ZlZDplLm1vdmVkfHxLJiZ1LHBvczpuLG5ld1Bvczp2LG92ZXJQb3M6eCx0aW1lOkV9KSl9fXZhciBqLGwsbSxuLG8scCxxLHIscyx0LHUsdyx5LHosQSxCPWFbMF0sQz1hLmRhdGEoKSxEPXt9O3JldHVybiBEPWQuZXh0ZW5kKGNiKGIuJHdyYXAsZC5leHRlbmQoe30sYix7b25TdGFydDplLG9uTW92ZTpmLG9uRW5kOml9KSksRCl9ZnVuY3Rpb24gZWIoYSxiKXt2YXIgYyxlLGYsaD1hWzBdLGk9e3ByZXZlbnQ6e319O3JldHVybiBUKGgsT2MsZnVuY3Rpb24oYSl7dmFyIGg9YS53aGVlbERlbHRhWXx8LTEqYS5kZWx0YVl8fDAsaj1hLndoZWVsRGVsdGFYfHwtMSphLmRlbHRhWHx8MCxrPU1hdGguYWJzKGopJiYhTWF0aC5hYnMoaCksbD1aKDA+aiksbT1lPT09bCxuPWQubm93KCksbz1QYz5uLWY7ZT1sLGY9bixrJiZpLm9rJiYoIWkucHJldmVudFtsXXx8YykmJihZKGEsITApLGMmJm0mJm98fChiLnNoaWZ0JiYoYz0hMCxjbGVhclRpbWVvdXQoaS50KSxpLnQ9c2V0VGltZW91dChmdW5jdGlvbigpe2M9ITF9LFJjKSksKGIub25FbmR8fGcpKGEsYi5zaGlmdD9sOmopKSl9KSxpfWZ1bmN0aW9uIGZiKCl7ZC5lYWNoKGQuRm90b3JhbWEuaW5zdGFuY2VzLGZ1bmN0aW9uKGEsYil7Yi5pbmRleD1hfSl9ZnVuY3Rpb24gZ2IoYSl7ZC5Gb3RvcmFtYS5pbnN0YW5jZXMucHVzaChhKSxmYigpfWZ1bmN0aW9uIGhiKGEpe2QuRm90b3JhbWEuaW5zdGFuY2VzLnNwbGljZShhLmluZGV4LDEpLGZiKCl9dmFyIGliPVwiZm90b3JhbWFcIixqYj1cImZ1bGxzY3JlZW5cIixrYj1pYitcIl9fd3JhcFwiLGxiPWtiK1wiLS1jc3MyXCIsbWI9a2IrXCItLWNzczNcIixuYj1rYitcIi0tdmlkZW9cIixvYj1rYitcIi0tZmFkZVwiLHBiPWtiK1wiLS1zbGlkZVwiLHFiPWtiK1wiLS1uby1jb250cm9sc1wiLHJiPWtiK1wiLS1uby1zaGFkb3dzXCIsc2I9a2IrXCItLXBhbi15XCIsdGI9a2IrXCItLXJ0bFwiLHViPWtiK1wiLS1vbmx5LWFjdGl2ZVwiLHZiPWtiK1wiLS1uby1jYXB0aW9uc1wiLHdiPWtiK1wiLS10b2dnbGUtYXJyb3dzXCIseGI9aWIrXCJfX3N0YWdlXCIseWI9eGIrXCJfX2ZyYW1lXCIsemI9eWIrXCItLXZpZGVvXCIsQWI9eGIrXCJfX3NoYWZ0XCIsQmI9aWIrXCJfX2dyYWJcIixDYj1pYitcIl9fcG9pbnRlclwiLERiPWliK1wiX19hcnJcIixFYj1EYitcIi0tZGlzYWJsZWRcIixGYj1EYitcIi0tcHJldlwiLEdiPURiK1wiLS1uZXh0XCIsSGI9aWIrXCJfX25hdlwiLEliPUhiK1wiLXdyYXBcIixKYj1IYitcIl9fc2hhZnRcIixLYj1IYitcIi0tZG90c1wiLExiPUhiK1wiLS10aHVtYnNcIixNYj1IYitcIl9fZnJhbWVcIixOYj1NYitcIi0tZG90XCIsT2I9TWIrXCItLXRodW1iXCIsUGI9aWIrXCJfX2ZhZGVcIixRYj1QYitcIi1mcm9udFwiLFJiPVBiK1wiLXJlYXJcIixTYj1pYitcIl9fc2hhZG93XCIsVGI9U2IrXCJzXCIsVWI9VGIrXCItLWxlZnRcIixWYj1UYitcIi0tcmlnaHRcIixXYj1pYitcIl9fYWN0aXZlXCIsWGI9aWIrXCJfX3NlbGVjdFwiLFliPWliK1wiLS1oaWRkZW5cIixaYj1pYitcIi0tZnVsbHNjcmVlblwiLCRiPWliK1wiX19mdWxsc2NyZWVuLWljb25cIixfYj1pYitcIl9fZXJyb3JcIixhYz1pYitcIl9fbG9hZGluZ1wiLGJjPWliK1wiX19sb2FkZWRcIixjYz1iYytcIi0tZnVsbFwiLGRjPWJjK1wiLS1pbWdcIixlYz1pYitcIl9fZ3JhYmJpbmdcIixmYz1pYitcIl9faW1nXCIsZ2M9ZmMrXCItLWZ1bGxcIixoYz1pYitcIl9fZG90XCIsaWM9aWIrXCJfX3RodW1iXCIsamM9aWMrXCItYm9yZGVyXCIsa2M9aWIrXCJfX2h0bWxcIixsYz1pYitcIl9fdmlkZW9cIixtYz1sYytcIi1wbGF5XCIsbmM9bGMrXCItY2xvc2VcIixvYz1pYitcIl9fY2FwdGlvblwiLHBjPWliK1wiX19jYXB0aW9uX193cmFwXCIscWM9aWIrXCJfX3NwaW5uZXJcIixyYz0nXCIgdGFiaW5kZXg9XCIwXCIgcm9sZT1cImJ1dHRvbicsc2M9ZCYmZC5mbi5qcXVlcnkuc3BsaXQoXCIuXCIpO2lmKCFzY3x8c2NbMF08MXx8MT09c2NbMF0mJnNjWzFdPDgpdGhyb3dcIkZvdG9yYW1hIHJlcXVpcmVzIGpRdWVyeSAxLjggb3IgbGF0ZXIgYW5kIHdpbGwgbm90IHJ1biB3aXRob3V0IGl0LlwiO3ZhciB0Yz17fSx1Yz1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtyLmNzc1RleHQ9YX1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIHR5cGVvZiBhPT09Yn1mdW5jdGlvbiBmKGEsYil7cmV0dXJuISF+KFwiXCIrYSkuaW5kZXhPZihiKX1mdW5jdGlvbiBnKGEsYil7Zm9yKHZhciBkIGluIGEpe3ZhciBlPWFbZF07aWYoIWYoZSxcIi1cIikmJnJbZV0hPT1jKXJldHVyblwicGZ4XCI9PWI/ZTohMH1yZXR1cm4hMX1mdW5jdGlvbiBoKGEsYixkKXtmb3IodmFyIGYgaW4gYSl7dmFyIGc9YlthW2ZdXTtpZihnIT09YylyZXR1cm4gZD09PSExP2FbZl06ZShnLFwiZnVuY3Rpb25cIik/Zy5iaW5kKGR8fGIpOmd9cmV0dXJuITF9ZnVuY3Rpb24gaShhLGIsYyl7dmFyIGQ9YS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSthLnNsaWNlKDEpLGY9KGErXCIgXCIrdS5qb2luKGQrXCIgXCIpK2QpLnNwbGl0KFwiIFwiKTtyZXR1cm4gZShiLFwic3RyaW5nXCIpfHxlKGIsXCJ1bmRlZmluZWRcIik/ZyhmLGIpOihmPShhK1wiIFwiK3Yuam9pbihkK1wiIFwiKStkKS5zcGxpdChcIiBcIiksaChmLGIsYykpfXZhciBqLGssbCxtPVwiMi42LjJcIixuPXt9LG89Yi5kb2N1bWVudEVsZW1lbnQscD1cIm1vZGVybml6clwiLHE9Yi5jcmVhdGVFbGVtZW50KHApLHI9cS5zdHlsZSxzPSh7fS50b1N0cmluZyxcIiAtd2Via2l0LSAtbW96LSAtby0gLW1zLSBcIi5zcGxpdChcIiBcIikpLHQ9XCJXZWJraXQgTW96IE8gbXNcIix1PXQuc3BsaXQoXCIgXCIpLHY9dC50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiIFwiKSx3PXt9LHg9W10seT14LnNsaWNlLHo9ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGYsZyxoLGksaj1iLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksaz1iLmJvZHksbD1rfHxiLmNyZWF0ZUVsZW1lbnQoXCJib2R5XCIpO2lmKHBhcnNlSW50KGQsMTApKWZvcig7ZC0tOyloPWIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxoLmlkPWU/ZVtkXTpwKyhkKzEpLGouYXBwZW5kQ2hpbGQoaCk7cmV0dXJuIGY9W1wiJiMxNzM7XCIsJzxzdHlsZSBpZD1cInMnLHAsJ1wiPicsYSxcIjwvc3R5bGU+XCJdLmpvaW4oXCJcIiksai5pZD1wLChrP2o6bCkuaW5uZXJIVE1MKz1mLGwuYXBwZW5kQ2hpbGQoaiksa3x8KGwuc3R5bGUuYmFja2dyb3VuZD1cIlwiLGwuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIixpPW8uc3R5bGUub3ZlcmZsb3csby5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLG8uYXBwZW5kQ2hpbGQobCkpLGc9YyhqLGEpLGs/ai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGopOihsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobCksby5zdHlsZS5vdmVyZmxvdz1pKSwhIWd9LEE9e30uaGFzT3duUHJvcGVydHk7bD1lKEEsXCJ1bmRlZmluZWRcIil8fGUoQS5jYWxsLFwidW5kZWZpbmVkXCIpP2Z1bmN0aW9uKGEsYil7cmV0dXJuIGIgaW4gYSYmZShhLmNvbnN0cnVjdG9yLnByb3RvdHlwZVtiXSxcInVuZGVmaW5lZFwiKX06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQS5jYWxsKGEsYil9LEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBiKXRocm93IG5ldyBUeXBlRXJyb3I7dmFyIGM9eS5jYWxsKGFyZ3VtZW50cywxKSxkPWZ1bmN0aW9uKCl7aWYodGhpcyBpbnN0YW5jZW9mIGQpe3ZhciBlPWZ1bmN0aW9uKCl7fTtlLnByb3RvdHlwZT1iLnByb3RvdHlwZTt2YXIgZj1uZXcgZSxnPWIuYXBwbHkoZixjLmNvbmNhdCh5LmNhbGwoYXJndW1lbnRzKSkpO3JldHVybiBPYmplY3QoZyk9PT1nP2c6Zn1yZXR1cm4gYi5hcHBseShhLGMuY29uY2F0KHkuY2FsbChhcmd1bWVudHMpKSl9O3JldHVybiBkfSksdy5jc3N0cmFuc2Zvcm1zM2Q9ZnVuY3Rpb24oKXt2YXIgYT0hIWkoXCJwZXJzcGVjdGl2ZVwiKTtyZXR1cm4gYX07Zm9yKHZhciBCIGluIHcpbCh3LEIpJiYoaz1CLnRvTG93ZXJDYXNlKCksbltrXT13W0JdKCkseC5wdXNoKChuW2tdP1wiXCI6XCJuby1cIikraykpO3JldHVybiBuLmFkZFRlc3Q9ZnVuY3Rpb24oYSxiKXtpZihcIm9iamVjdFwiPT10eXBlb2YgYSlmb3IodmFyIGQgaW4gYSlsKGEsZCkmJm4uYWRkVGVzdChkLGFbZF0pO2Vsc2V7aWYoYT1hLnRvTG93ZXJDYXNlKCksblthXSE9PWMpcmV0dXJuIG47Yj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBiP2IoKTpiLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBlbmFibGVDbGFzc2VzJiZlbmFibGVDbGFzc2VzJiYoby5jbGFzc05hbWUrPVwiIFwiKyhiP1wiXCI6XCJuby1cIikrYSksblthXT1ifXJldHVybiBufSxkKFwiXCIpLHE9aj1udWxsLG4uX3ZlcnNpb249bSxuLl9wcmVmaXhlcz1zLG4uX2RvbVByZWZpeGVzPXYsbi5fY3Nzb21QcmVmaXhlcz11LG4udGVzdFByb3A9ZnVuY3Rpb24oYSl7cmV0dXJuIGcoW2FdKX0sbi50ZXN0QWxsUHJvcHM9aSxuLnRlc3RTdHlsZXM9eixuLnByZWZpeGVkPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj9pKGEsYixjKTppKGEsXCJwZnhcIil9LG59KGEsYiksdmM9e29rOiExLGlzOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHJlcXVlc3Q6ZnVuY3Rpb24oKXt9LGNhbmNlbDpmdW5jdGlvbigpe30sZXZlbnQ6XCJcIixwcmVmaXg6XCJcIn0sd2M9XCJ3ZWJraXQgbW96IG8gbXMga2h0bWxcIi5zcGxpdChcIiBcIik7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuY2FuY2VsRnVsbFNjcmVlbil2Yy5vaz0hMDtlbHNlIGZvcih2YXIgeGM9MCx5Yz13Yy5sZW5ndGg7eWM+eGM7eGMrKylpZih2Yy5wcmVmaXg9d2NbeGNdLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiW3ZjLnByZWZpeCtcIkNhbmNlbEZ1bGxTY3JlZW5cIl0pe3ZjLm9rPSEwO2JyZWFrfXZjLm9rJiYodmMuZXZlbnQ9dmMucHJlZml4K1wiZnVsbHNjcmVlbmNoYW5nZVwiLHZjLmlzPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMucHJlZml4KXtjYXNlXCJcIjpyZXR1cm4gYi5mdWxsU2NyZWVuO2Nhc2VcIndlYmtpdFwiOnJldHVybiBiLndlYmtpdElzRnVsbFNjcmVlbjtkZWZhdWx0OnJldHVybiBiW3RoaXMucHJlZml4K1wiRnVsbFNjcmVlblwiXX19LHZjLnJlcXVlc3Q9ZnVuY3Rpb24oYSl7cmV0dXJuXCJcIj09PXRoaXMucHJlZml4P2EucmVxdWVzdEZ1bGxTY3JlZW4oKTphW3RoaXMucHJlZml4K1wiUmVxdWVzdEZ1bGxTY3JlZW5cIl0oKX0sdmMuY2FuY2VsPWZ1bmN0aW9uKCl7cmV0dXJuXCJcIj09PXRoaXMucHJlZml4P2IuY2FuY2VsRnVsbFNjcmVlbigpOmJbdGhpcy5wcmVmaXgrXCJDYW5jZWxGdWxsU2NyZWVuXCJdKCl9KTt2YXIgemMsQWM9e2xpbmVzOjEyLGxlbmd0aDo1LHdpZHRoOjIscmFkaXVzOjcsY29ybmVyczoxLHJvdGF0ZToxNSxjb2xvcjpcInJnYmEoMTI4LCAxMjgsIDEyOCwgLjc1KVwiLGh3YWNjZWw6ITB9LEJjPXt0b3A6XCJhdXRvXCIsbGVmdDpcImF1dG9cIixjbGFzc05hbWU6XCJcIn07IWZ1bmN0aW9uKGEsYil7emM9YigpfSh0aGlzLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGMpe3ZhciBkLGU9Yi5jcmVhdGVFbGVtZW50KGF8fFwiZGl2XCIpO2ZvcihkIGluIGMpZVtkXT1jW2RdO3JldHVybiBlfWZ1bmN0aW9uIGMoYSl7Zm9yKHZhciBiPTEsYz1hcmd1bWVudHMubGVuZ3RoO2M+YjtiKyspYS5hcHBlbmRDaGlsZChhcmd1bWVudHNbYl0pO3JldHVybiBhfWZ1bmN0aW9uIGQoYSxiLGMsZCl7dmFyIGU9W1wib3BhY2l0eVwiLGIsfn4oMTAwKmEpLGMsZF0uam9pbihcIi1cIiksZj0uMDErYy9kKjEwMCxnPU1hdGgubWF4KDEtKDEtYSkvYiooMTAwLWYpLGEpLGg9bS5zdWJzdHJpbmcoMCxtLmluZGV4T2YoXCJBbmltYXRpb25cIikpLnRvTG93ZXJDYXNlKCksaT1oJiZcIi1cIitoK1wiLVwifHxcIlwiO3JldHVybiBvW2VdfHwocC5pbnNlcnRSdWxlKFwiQFwiK2krXCJrZXlmcmFtZXMgXCIrZStcInswJXtvcGFjaXR5OlwiK2crXCJ9XCIrZitcIiV7b3BhY2l0eTpcIithK1wifVwiKyhmKy4wMSkrXCIle29wYWNpdHk6MX1cIisoZitiKSUxMDArXCIle29wYWNpdHk6XCIrYStcIn0xMDAle29wYWNpdHk6XCIrZytcIn19XCIscC5jc3NSdWxlcy5sZW5ndGgpLG9bZV09MSksZX1mdW5jdGlvbiBmKGEsYil7dmFyIGMsZCxmPWEuc3R5bGU7Zm9yKGI9Yi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGQ9MDtkPG4ubGVuZ3RoO2QrKylpZihjPW5bZF0rYixmW2NdIT09ZSlyZXR1cm4gYztyZXR1cm4gZltiXSE9PWU/Yjp2b2lkIDB9ZnVuY3Rpb24gZyhhLGIpe2Zvcih2YXIgYyBpbiBiKWEuc3R5bGVbZihhLGMpfHxjXT1iW2NdO3JldHVybiBhfWZ1bmN0aW9uIGgoYSl7Zm9yKHZhciBiPTE7Yjxhcmd1bWVudHMubGVuZ3RoO2IrKyl7dmFyIGM9YXJndW1lbnRzW2JdO2Zvcih2YXIgZCBpbiBjKWFbZF09PT1lJiYoYVtkXT1jW2RdKX1yZXR1cm4gYX1mdW5jdGlvbiBpKGEpe2Zvcih2YXIgYj17eDphLm9mZnNldExlZnQseTphLm9mZnNldFRvcH07YT1hLm9mZnNldFBhcmVudDspYi54Kz1hLm9mZnNldExlZnQsYi55Kz1hLm9mZnNldFRvcDtyZXR1cm4gYn1mdW5jdGlvbiBqKGEsYil7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGE/YTphW2IlYS5sZW5ndGhdfWZ1bmN0aW9uIGsoYSl7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIHRoaXM/bmV3IGsoYSk6dm9pZCh0aGlzLm9wdHM9aChhfHx7fSxrLmRlZmF1bHRzLHEpKX1mdW5jdGlvbiBsKCl7ZnVuY3Rpb24gYihiLGMpe3JldHVybiBhKFwiPFwiK2IrJyB4bWxucz1cInVybjpzY2hlbWFzLW1pY3Jvc29mdC5jb206dm1sXCIgY2xhc3M9XCJzcGluLXZtbFwiPicsYyl9cC5hZGRSdWxlKFwiLnNwaW4tdm1sXCIsXCJiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKVwiKSxrLnByb3RvdHlwZS5saW5lcz1mdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gZyhiKFwiZ3JvdXBcIix7Y29vcmRzaXplOmsrXCIgXCIrayxjb29yZG9yaWdpbjotaStcIiBcIistaX0pLHt3aWR0aDprLGhlaWdodDprfSl9ZnVuY3Rpb24gZihhLGYsaCl7YyhtLGMoZyhlKCkse3JvdGF0aW9uOjM2MC9kLmxpbmVzKmErXCJkZWdcIixsZWZ0On5+Zn0pLGMoZyhiKFwicm91bmRyZWN0XCIse2FyY3NpemU6ZC5jb3JuZXJzfSkse3dpZHRoOmksaGVpZ2h0OmQud2lkdGgsbGVmdDpkLnJhZGl1cyx0b3A6LWQud2lkdGg+PjEsZmlsdGVyOmh9KSxiKFwiZmlsbFwiLHtjb2xvcjpqKGQuY29sb3IsYSksb3BhY2l0eTpkLm9wYWNpdHl9KSxiKFwic3Ryb2tlXCIse29wYWNpdHk6MH0pKSkpfXZhciBoLGk9ZC5sZW5ndGgrZC53aWR0aCxrPTIqaSxsPTIqLShkLndpZHRoK2QubGVuZ3RoKStcInB4XCIsbT1nKGUoKSx7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpsLGxlZnQ6bH0pO2lmKGQuc2hhZG93KWZvcihoPTE7aDw9ZC5saW5lcztoKyspZihoLC0yLFwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkJsdXIocGl4ZWxyYWRpdXM9MixtYWtlc2hhZG93PTEsc2hhZG93b3BhY2l0eT0uMylcIik7Zm9yKGg9MTtoPD1kLmxpbmVzO2grKylmKGgpO3JldHVybiBjKGEsbSl9LGsucHJvdG90eXBlLm9wYWNpdHk9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS5maXJzdENoaWxkO2Q9ZC5zaGFkb3cmJmQubGluZXN8fDAsZSYmYitkPGUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPWUuY2hpbGROb2Rlc1tiK2RdLGU9ZSYmZS5maXJzdENoaWxkLGU9ZSYmZS5maXJzdENoaWxkLGUmJihlLm9wYWNpdHk9YykpfX12YXIgbSxuPVtcIndlYmtpdFwiLFwiTW96XCIsXCJtc1wiLFwiT1wiXSxvPXt9LHA9ZnVuY3Rpb24oKXt2YXIgZD1hKFwic3R5bGVcIix7dHlwZTpcInRleHQvY3NzXCJ9KTtyZXR1cm4gYyhiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSxkKSxkLnNoZWV0fHxkLnN0eWxlU2hlZXR9KCkscT17bGluZXM6MTIsbGVuZ3RoOjcsd2lkdGg6NSxyYWRpdXM6MTAscm90YXRlOjAsY29ybmVyczoxLGNvbG9yOlwiIzAwMFwiLGRpcmVjdGlvbjoxLHNwZWVkOjEsdHJhaWw6MTAwLG9wYWNpdHk6LjI1LGZwczoyMCx6SW5kZXg6MmU5LGNsYXNzTmFtZTpcInNwaW5uZXJcIix0b3A6XCJhdXRvXCIsbGVmdDpcImF1dG9cIixwb3NpdGlvbjpcInJlbGF0aXZlXCJ9O2suZGVmYXVsdHM9e30saChrLnByb3RvdHlwZSx7c3BpbjpmdW5jdGlvbihiKXt0aGlzLnN0b3AoKTt2YXIgYyxkLGU9dGhpcyxmPWUub3B0cyxoPWUuZWw9ZyhhKDAse2NsYXNzTmFtZTpmLmNsYXNzTmFtZX0pLHtwb3NpdGlvbjpmLnBvc2l0aW9uLHdpZHRoOjAsekluZGV4OmYuekluZGV4fSksaj1mLnJhZGl1cytmLmxlbmd0aCtmLndpZHRoO2lmKGImJihiLmluc2VydEJlZm9yZShoLGIuZmlyc3RDaGlsZHx8bnVsbCksZD1pKGIpLGM9aShoKSxnKGgse2xlZnQ6KFwiYXV0b1wiPT1mLmxlZnQ/ZC54LWMueCsoYi5vZmZzZXRXaWR0aD4+MSk6cGFyc2VJbnQoZi5sZWZ0LDEwKStqKStcInB4XCIsdG9wOihcImF1dG9cIj09Zi50b3A/ZC55LWMueSsoYi5vZmZzZXRIZWlnaHQ+PjEpOnBhcnNlSW50KGYudG9wLDEwKStqKStcInB4XCJ9KSksaC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcm9ncmVzc2JhclwiKSxlLmxpbmVzKGgsZS5vcHRzKSwhbSl7dmFyIGssbD0wLG49KGYubGluZXMtMSkqKDEtZi5kaXJlY3Rpb24pLzIsbz1mLmZwcyxwPW8vZi5zcGVlZCxxPSgxLWYub3BhY2l0eSkvKHAqZi50cmFpbC8xMDApLHI9cC9mLmxpbmVzOyFmdW5jdGlvbiBzKCl7bCsrO2Zvcih2YXIgYT0wO2E8Zi5saW5lczthKyspaz1NYXRoLm1heCgxLShsKyhmLmxpbmVzLWEpKnIpJXAqcSxmLm9wYWNpdHkpLGUub3BhY2l0eShoLGEqZi5kaXJlY3Rpb24rbixrLGYpO2UudGltZW91dD1lLmVsJiZzZXRUaW1lb3V0KHMsfn4oMWUzL28pKX0oKX1yZXR1cm4gZX0sc3RvcDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWw7cmV0dXJuIGEmJihjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSxhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSx0aGlzLmVsPWUpLHRoaXN9LGxpbmVzOmZ1bmN0aW9uKGIsZSl7ZnVuY3Rpb24gZihiLGMpe3JldHVybiBnKGEoKSx7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHdpZHRoOmUubGVuZ3RoK2Uud2lkdGgrXCJweFwiLGhlaWdodDplLndpZHRoK1wicHhcIixiYWNrZ3JvdW5kOmIsYm94U2hhZG93OmMsdHJhbnNmb3JtT3JpZ2luOlwibGVmdFwiLHRyYW5zZm9ybTpcInJvdGF0ZShcIit+figzNjAvZS5saW5lcyppK2Uucm90YXRlKStcImRlZykgdHJhbnNsYXRlKFwiK2UucmFkaXVzK1wicHgsMClcIixib3JkZXJSYWRpdXM6KGUuY29ybmVycyplLndpZHRoPj4xKStcInB4XCJ9KX1mb3IodmFyIGgsaT0wLGs9KGUubGluZXMtMSkqKDEtZS5kaXJlY3Rpb24pLzI7aTxlLmxpbmVzO2krKyloPWcoYSgpLHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOjErfihlLndpZHRoLzIpK1wicHhcIix0cmFuc2Zvcm06ZS5od2FjY2VsP1widHJhbnNsYXRlM2QoMCwwLDApXCI6XCJcIixvcGFjaXR5OmUub3BhY2l0eSxhbmltYXRpb246bSYmZChlLm9wYWNpdHksZS50cmFpbCxrK2kqZS5kaXJlY3Rpb24sZS5saW5lcykrXCIgXCIrMS9lLnNwZWVkK1wicyBsaW5lYXIgaW5maW5pdGVcIn0pLGUuc2hhZG93JiZjKGgsZyhmKFwiIzAwMFwiLFwiMCAwIDRweCAjMDAwXCIpLHt0b3A6XCIycHhcIn0pKSxjKGIsYyhoLGYoaihlLmNvbG9yLGkpLFwiMCAwIDFweCByZ2JhKDAsMCwwLC4xKVwiKSkpO3JldHVybiBifSxvcGFjaXR5OmZ1bmN0aW9uKGEsYixjKXtiPGEuY2hpbGROb2Rlcy5sZW5ndGgmJihhLmNoaWxkTm9kZXNbYl0uc3R5bGUub3BhY2l0eT1jKX19KTt2YXIgcj1nKGEoXCJncm91cFwiKSx7YmVoYXZpb3I6XCJ1cmwoI2RlZmF1bHQjVk1MKVwifSk7cmV0dXJuIWYocixcInRyYW5zZm9ybVwiKSYmci5hZGo/bCgpOm09ZihyLFwiYW5pbWF0aW9uXCIpLGt9KTt2YXIgQ2MsRGMsRWM9ZChhKSxGYz1kKGIpLEdjPVwicXVpcmtzXCI9PT1jLmhhc2gucmVwbGFjZShcIiNcIixcIlwiKSxIYz11Yy5jc3N0cmFuc2Zvcm1zM2QsSWM9SGMmJiFHYyxKYz1IY3x8XCJDU1MxQ29tcGF0XCI9PT1iLmNvbXBhdE1vZGUsS2M9dmMub2ssTGM9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8V2luZG93cyBQaG9uZS9pKSxNYz0hSWN8fExjLE5jPW5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLE9jPVwib253aGVlbFwiaW4gYi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpP1wid2hlZWxcIjpiLm9ubW91c2V3aGVlbCE9PWU/XCJtb3VzZXdoZWVsXCI6XCJET01Nb3VzZVNjcm9sbFwiLFBjPTI1MCxRYz0zMDAsUmM9MTQwMCxTYz01ZTMsVGM9MixVYz02NCxWYz01MDAsV2M9MzMzLFhjPVwiJHN0YWdlRnJhbWVcIixZYz1cIiRuYXZEb3RGcmFtZVwiLFpjPVwiJG5hdlRodW1iRnJhbWVcIiwkYz1cImF1dG9cIixfYz1mKFsuMSwwLC4yNSwxXSksYWQ9OTk5OTksYmQ9XCI1MCVcIixjZD17d2lkdGg6bnVsbCxtaW53aWR0aDpudWxsLG1heHdpZHRoOlwiMTAwJVwiLGhlaWdodDpudWxsLG1pbmhlaWdodDpudWxsLG1heGhlaWdodDpudWxsLHJhdGlvOm51bGwsbWFyZ2luOlRjLGdsaW1wc2U6MCxmaXQ6XCJjb250YWluXCIscG9zaXRpb246YmQsdGh1bWJwb3NpdGlvbjpiZCxuYXY6XCJkb3RzXCIsbmF2cG9zaXRpb246XCJib3R0b21cIixuYXZ3aWR0aDpudWxsLHRodW1id2lkdGg6VWMsdGh1bWJoZWlnaHQ6VWMsdGh1bWJtYXJnaW46VGMsdGh1bWJib3JkZXJ3aWR0aDpUYyx0aHVtYmZpdDpcImNvdmVyXCIsYWxsb3dmdWxsc2NyZWVuOiExLHRyYW5zaXRpb246XCJzbGlkZVwiLGNsaWNrdHJhbnNpdGlvbjpudWxsLHRyYW5zaXRpb25kdXJhdGlvbjpRYyxjYXB0aW9uczohMCxoYXNoOiExLHN0YXJ0aW5kZXg6MCxsb29wOiExLGF1dG9wbGF5OiExLHN0b3BhdXRvcGxheW9udG91Y2g6ITAsa2V5Ym9hcmQ6ITEsYXJyb3dzOiEwLGNsaWNrOiEwLHN3aXBlOiEwLHRyYWNrcGFkOiExLGVuYWJsZWlmc2luZ2xlZnJhbWU6ITEsY29udHJvbHNvbnN0YXJ0OiEwLHNodWZmbGU6ITEsZGlyZWN0aW9uOlwibHRyXCIsc2hhZG93czohMCxzcGlubmVyOm51bGx9LGRkPXtsZWZ0OiEwLHJpZ2h0OiEwLGRvd246ITEsdXA6ITEsc3BhY2U6ITEsaG9tZTohMSxlbmQ6ITF9O0cuc3RvcD1mdW5jdGlvbihhKXtHLmlpW2FdPSExfTt2YXIgZWQsZmQsZ2QsaGQ7alF1ZXJ5LkZvdG9yYW1hPWZ1bmN0aW9uKGEsZSl7ZnVuY3Rpb24gZigpe2QuZWFjaCh5ZCxmdW5jdGlvbihhLGIpe2lmKCFiLmkpe2IuaT1tZSsrO3ZhciBjPUEoYi52aWRlbywhMCk7aWYoYyl7dmFyIGQ9e307Yi52aWRlbz1jLGIuaW1nfHxiLnRodW1iP2IudGh1bWJzUmVhZHk9ITA6ZD1CKGIseWQsaWUpLEMoeWQse2ltZzpkLmltZyx0aHVtYjpkLnRodW1ifSxiLmksaWUpfX19KX1mdW5jdGlvbiBnKGEpe3JldHVybiBaZFthXXx8aWUuZnVsbFNjcmVlbn1mdW5jdGlvbiBpKGEpe3ZhciBiPVwia2V5ZG93bi5cIitpYixjPWliK2plLGQ9XCJrZXlkb3duLlwiK2MsZj1cInJlc2l6ZS5cIitjK1wiIG9yaWVudGF0aW9uY2hhbmdlLlwiK2M7YT8oRmMub24oZCxmdW5jdGlvbihhKXt2YXIgYixjO0NkJiYyNz09PWEua2V5Q29kZT8oYj0hMCxtZChDZCwhMCwhMCkpOihpZS5mdWxsU2NyZWVufHxlLmtleWJvYXJkJiYhaWUuaW5kZXgpJiYoMjc9PT1hLmtleUNvZGU/KGI9ITAsaWUuY2FuY2VsRnVsbFNjcmVlbigpKTphLnNoaWZ0S2V5JiYzMj09PWEua2V5Q29kZSYmZyhcInNwYWNlXCIpfHwzNz09PWEua2V5Q29kZSYmZyhcImxlZnRcIil8fDM4PT09YS5rZXlDb2RlJiZnKFwidXBcIik/Yz1cIjxcIjozMj09PWEua2V5Q29kZSYmZyhcInNwYWNlXCIpfHwzOT09PWEua2V5Q29kZSYmZyhcInJpZ2h0XCIpfHw0MD09PWEua2V5Q29kZSYmZyhcImRvd25cIik/Yz1cIj5cIjozNj09PWEua2V5Q29kZSYmZyhcImhvbWVcIik/Yz1cIjw8XCI6MzU9PT1hLmtleUNvZGUmJmcoXCJlbmRcIikmJihjPVwiPj5cIikpLChifHxjKSYmWShhKSxjJiZpZS5zaG93KHtpbmRleDpjLHNsb3c6YS5hbHRLZXksdXNlcjohMH0pfSksaWUuaW5kZXh8fEZjLm9mZihiKS5vbihiLFwidGV4dGFyZWEsIGlucHV0LCBzZWxlY3RcIixmdW5jdGlvbihhKXshRGMuaGFzQ2xhc3MoamIpJiZhLnN0b3BQcm9wYWdhdGlvbigpfSksRWMub24oZixpZS5yZXNpemUpKTooRmMub2ZmKGQpLEVjLm9mZihmKSl9ZnVuY3Rpb24gaihiKXtiIT09ai5mJiYoYj8oYS5odG1sKFwiXCIpLmFkZENsYXNzKGliK1wiIFwiK2tlKS5hcHBlbmQocWUpLmJlZm9yZShvZSkuYmVmb3JlKHBlKSxnYihpZSkpOihxZS5kZXRhY2goKSxvZS5kZXRhY2goKSxwZS5kZXRhY2goKSxhLmh0bWwobmUudXJ0ZXh0KS5yZW1vdmVDbGFzcyhrZSksaGIoaWUpKSxpKGIpLGouZj1iKX1mdW5jdGlvbiBtKCl7eWQ9aWUuZGF0YT15ZHx8UChlLmRhdGEpfHxEKGEpLHpkPWllLnNpemU9eWQubGVuZ3RoLCF4ZC5vayYmZS5zaHVmZmxlJiZPKHlkKSxmKCksSmU9eShKZSksemQmJmooITApfWZ1bmN0aW9uIG8oKXt2YXIgYT0yPnpkJiYhZS5lbmFibGVpZnNpbmdsZWZyYW1lfHxDZDtNZS5ub01vdmU9YXx8U2QsTWUubm9Td2lwZT1hfHwhZS5zd2lwZSwhV2QmJnNlLnRvZ2dsZUNsYXNzKEJiLCFlLmNsaWNrJiYhTWUubm9Nb3ZlJiYhTWUubm9Td2lwZSksTmMmJnFlLnRvZ2dsZUNsYXNzKHNiLCFNZS5ub1N3aXBlKX1mdW5jdGlvbiB0KGEpe2E9PT0hMCYmKGE9XCJcIiksZS5hdXRvcGxheT1NYXRoLm1heCgrYXx8U2MsMS41KlZkKX1mdW5jdGlvbiB1KCl7ZnVuY3Rpb24gYShhLGMpe2JbYT9cImFkZFwiOlwicmVtb3ZlXCJdLnB1c2goYyl9aWUub3B0aW9ucz1lPVIoZSksU2Q9XCJjcm9zc2ZhZGVcIj09PWUudHJhbnNpdGlvbnx8XCJkaXNzb2x2ZVwiPT09ZS50cmFuc2l0aW9uLE1kPWUubG9vcCYmKHpkPjJ8fFNkJiYoIVdkfHxcInNsaWRlXCIhPT1XZCkpLFZkPStlLnRyYW5zaXRpb25kdXJhdGlvbnx8UWMsWWQ9XCJydGxcIj09PWUuZGlyZWN0aW9uLFpkPWQuZXh0ZW5kKHt9LGUua2V5Ym9hcmQmJmRkLGUua2V5Ym9hcmQpO3ZhciBiPXthZGQ6W10scmVtb3ZlOltdfTt6ZD4xfHxlLmVuYWJsZWlmc2luZ2xlZnJhbWU/KE5kPWUubmF2LFBkPVwidG9wXCI9PT1lLm5hdnBvc2l0aW9uLGIucmVtb3ZlLnB1c2goWGIpLHdlLnRvZ2dsZSghIWUuYXJyb3dzKSk6KE5kPSExLHdlLmhpZGUoKSksUmIoKSxCZD1uZXcgemMoZC5leHRlbmQoQWMsZS5zcGlubmVyLEJjLHtkaXJlY3Rpb246WWQ/LTE6MX0pKSxHYygpLEhjKCksZS5hdXRvcGxheSYmdChlLmF1dG9wbGF5KSxUZD1uKGUudGh1bWJ3aWR0aCl8fFVjLFVkPW4oZS50aHVtYmhlaWdodCl8fFVjLE5lLm9rPVBlLm9rPWUudHJhY2twYWQmJiFNYyxvKCksZWQoZSxbTGVdKSxPZD1cInRodW1ic1wiPT09TmQsT2Q/KGxjKHpkLFwibmF2VGh1bWJcIiksQWQ9QmUsaGU9WmMsSihvZSxkLkZvdG9yYW1hLmpzdC5zdHlsZSh7dzpUZCxoOlVkLGI6ZS50aHVtYmJvcmRlcndpZHRoLG06ZS50aHVtYm1hcmdpbixzOmplLHE6IUpjfSkpLHllLmFkZENsYXNzKExiKS5yZW1vdmVDbGFzcyhLYikpOlwiZG90c1wiPT09TmQ/KGxjKHpkLFwibmF2RG90XCIpLEFkPUFlLGhlPVljLHllLmFkZENsYXNzKEtiKS5yZW1vdmVDbGFzcyhMYikpOihOZD0hMSx5ZS5yZW1vdmVDbGFzcyhMYitcIiBcIitLYikpLE5kJiYoUGQ/eGUuaW5zZXJ0QmVmb3JlKHJlKTp4ZS5pbnNlcnRBZnRlcihyZSksd2MubmF2PSExLHdjKEFkLHplLFwibmF2XCIpKSxRZD1lLmFsbG93ZnVsbHNjcmVlbixRZD8oRGUucHJlcGVuZFRvKHJlKSxSZD1LYyYmXCJuYXRpdmVcIj09PVFkKTooRGUuZGV0YWNoKCksUmQ9ITEpLGEoU2Qsb2IpLGEoIVNkLHBiKSxhKCFlLmNhcHRpb25zLHZiKSxhKFlkLHRiKSxhKFwiYWx3YXlzXCIhPT1lLmFycm93cyx3YiksWGQ9ZS5zaGFkb3dzJiYhTWMsYSghWGQscmIpLHFlLmFkZENsYXNzKGIuYWRkLmpvaW4oXCIgXCIpKS5yZW1vdmVDbGFzcyhiLnJlbW92ZS5qb2luKFwiIFwiKSksS2U9ZC5leHRlbmQoe30sZSl9ZnVuY3Rpb24geChhKXtyZXR1cm4gMD5hPyh6ZCthJXpkKSV6ZDphPj16ZD9hJXpkOmF9ZnVuY3Rpb24geShhKXtyZXR1cm4gaChhLDAsemQtMSl9ZnVuY3Rpb24geihhKXtyZXR1cm4gTWQ/eChhKTp5KGEpfWZ1bmN0aW9uIEUoYSl7cmV0dXJuIGE+MHx8TWQ/YS0xOiExfWZ1bmN0aW9uIFUoYSl7cmV0dXJuIHpkLTE+YXx8TWQ/YSsxOiExfWZ1bmN0aW9uICQoKXtNZS5taW49TWQ/LTEvMDotcih6ZC0xLExlLncsZS5tYXJnaW4sRmQpLE1lLm1heD1NZD8xLzA6LXIoMCxMZS53LGUubWFyZ2luLEZkKSxNZS5zbmFwPUxlLncrZS5tYXJnaW59ZnVuY3Rpb24gYmIoKXtPZS5taW49TWF0aC5taW4oMCxMZS5udy16ZS53aWR0aCgpKSxPZS5tYXg9MCx6ZS50b2dnbGVDbGFzcyhCYiwhKE9lLm5vTW92ZT1PZS5taW49PT1PZS5tYXgpKX1mdW5jdGlvbiBjYihhLGIsYyl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGEpe2E9bmV3IEFycmF5KGEpO3ZhciBlPSEwfXJldHVybiBkLmVhY2goYSxmdW5jdGlvbihhLGQpe2lmKGUmJihkPWEpLFwibnVtYmVyXCI9PXR5cGVvZiBkKXt2YXIgZj15ZFt4KGQpXTtpZihmKXt2YXIgZz1cIiRcIitiK1wiRnJhbWVcIixoPWZbZ107Yy5jYWxsKHRoaXMsYSxkLGYsaCxnLGgmJmguZGF0YSgpKX19fSl9ZnVuY3Rpb24gZmIoYSxiLGMsZCl7KCEkZHx8XCIqXCI9PT0kZCYmZD09PUxkKSYmKGE9cShlLndpZHRoKXx8cShhKXx8VmMsYj1xKGUuaGVpZ2h0KXx8cShiKXx8V2MsaWUucmVzaXplKHt3aWR0aDphLHJhdGlvOmUucmF0aW98fGN8fGEvYn0sMCxkIT09TGQmJlwiKlwiKSl9ZnVuY3Rpb24gUGIoYSxiLGMsZixnLGgpe2NiKGEsYixmdW5jdGlvbihhLGksaixrLGwsbSl7ZnVuY3Rpb24gbihhKXt2YXIgYj14KGkpO2ZkKGEse2luZGV4OmIsc3JjOncsZnJhbWU6eWRbYl19KX1mdW5jdGlvbiBvKCl7dC5yZW1vdmUoKSxkLkZvdG9yYW1hLmNhY2hlW3ddPVwiZXJyb3JcIixqLmh0bWwmJlwic3RhZ2VcIj09PWJ8fCF5fHx5PT09dz8oIXd8fGouaHRtbHx8cj9cInN0YWdlXCI9PT1iJiYoay50cmlnZ2VyKFwiZjpsb2FkXCIpLnJlbW92ZUNsYXNzKGFjK1wiIFwiK19iKS5hZGRDbGFzcyhiYyksbihcImxvYWRcIiksZmIoKSk6KGsudHJpZ2dlcihcImY6ZXJyb3JcIikucmVtb3ZlQ2xhc3MoYWMpLmFkZENsYXNzKF9iKSxuKFwiZXJyb3JcIikpLG0uc3RhdGU9XCJlcnJvclwiLCEoemQ+MSYmeWRbaV09PT1qKXx8ai5odG1sfHxqLmRlbGV0ZWR8fGoudmlkZW98fHJ8fChqLmRlbGV0ZWQ9ITAsaWUuc3BsaWNlKGksMSkpKTooalt2XT13PXksUGIoW2ldLGIsYyxmLGcsITApKX1mdW5jdGlvbiBwKCl7ZC5Gb3RvcmFtYS5tZWFzdXJlc1t3XT11Lm1lYXN1cmVzPWQuRm90b3JhbWEubWVhc3VyZXNbd118fHt3aWR0aDpzLndpZHRoLGhlaWdodDpzLmhlaWdodCxyYXRpbzpzLndpZHRoL3MuaGVpZ2h0fSxmYih1Lm1lYXN1cmVzLndpZHRoLHUubWVhc3VyZXMuaGVpZ2h0LHUubWVhc3VyZXMucmF0aW8saSksdC5vZmYoXCJsb2FkIGVycm9yXCIpLmFkZENsYXNzKGZjKyhyP1wiIFwiK2djOlwiXCIpKS5wcmVwZW5kVG8oayksSSh0LChkLmlzRnVuY3Rpb24oYyk/YygpOmMpfHxMZSxmfHxqLmZpdHx8ZS5maXQsZ3x8ai5wb3NpdGlvbnx8ZS5wb3NpdGlvbiksZC5Gb3RvcmFtYS5jYWNoZVt3XT1tLnN0YXRlPVwibG9hZGVkXCIsc2V0VGltZW91dChmdW5jdGlvbigpe2sudHJpZ2dlcihcImY6bG9hZFwiKS5yZW1vdmVDbGFzcyhhYytcIiBcIitfYikuYWRkQ2xhc3MoYmMrXCIgXCIrKHI/Y2M6ZGMpKSxcInN0YWdlXCI9PT1iP24oXCJsb2FkXCIpOihqLnRodW1icmF0aW89PT0kY3x8IWoudGh1bWJyYXRpbyYmZS50aHVtYnJhdGlvPT09JGMpJiYoai50aHVtYnJhdGlvPXUubWVhc3VyZXMucmF0aW8sdmQoKSl9LDApfWZ1bmN0aW9uIHEoKXt2YXIgYT0xMDtHKGZ1bmN0aW9uKCl7cmV0dXJuIWZlfHwhYS0tJiYhTWN9LGZ1bmN0aW9uKCl7cCgpfSl9aWYoayl7dmFyIHI9aWUuZnVsbFNjcmVlbiYmai5mdWxsJiZqLmZ1bGwhPT1qLmltZyYmIW0uJGZ1bGwmJlwic3RhZ2VcIj09PWI7aWYoIW0uJGltZ3x8aHx8cil7dmFyIHM9bmV3IEltYWdlLHQ9ZChzKSx1PXQuZGF0YSgpO21bcj9cIiRmdWxsXCI6XCIkaW1nXCJdPXQ7dmFyIHY9XCJzdGFnZVwiPT09Yj9yP1wiZnVsbFwiOlwiaW1nXCI6XCJ0aHVtYlwiLHc9alt2XSx5PXI/bnVsbDpqW1wic3RhZ2VcIj09PWI/XCJ0aHVtYlwiOlwiaW1nXCJdO2lmKFwibmF2VGh1bWJcIj09PWImJihrPW0uJHdyYXApLCF3KXJldHVybiB2b2lkIG8oKTtkLkZvdG9yYW1hLmNhY2hlW3ddPyFmdW5jdGlvbiB6KCl7XCJlcnJvclwiPT09ZC5Gb3RvcmFtYS5jYWNoZVt3XT9vKCk6XCJsb2FkZWRcIj09PWQuRm90b3JhbWEuY2FjaGVbd10/c2V0VGltZW91dChxLDApOnNldFRpbWVvdXQoeiwxMDApfSgpOihkLkZvdG9yYW1hLmNhY2hlW3ddPVwiKlwiLHQub24oXCJsb2FkXCIscSkub24oXCJlcnJvclwiLG8pKSxtLnN0YXRlPVwiXCIscy5zcmM9d319fSl9ZnVuY3Rpb24gUWIoYSl7SWUuYXBwZW5kKEJkLnNwaW4oKS5lbCkuYXBwZW5kVG8oYSl9ZnVuY3Rpb24gUmIoKXtJZS5kZXRhY2goKSxCZCYmQmQuc3RvcCgpfWZ1bmN0aW9uIFNiKCl7dmFyIGE9RGRbWGNdO2EmJiFhLmRhdGEoKS5zdGF0ZSYmKFFiKGEpLGEub24oXCJmOmxvYWQgZjplcnJvclwiLGZ1bmN0aW9uKCl7YS5vZmYoXCJmOmxvYWQgZjplcnJvclwiKSxSYigpfSkpfWZ1bmN0aW9uIGVjKGEpe1coYSxzZCksWChhLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe1EoeWUpfSwwKSxSYyh7dGltZTpWZCxndWVzc0luZGV4OmQodGhpcykuZGF0YSgpLmVxLG1pbk1heDpPZX0pfSl9ZnVuY3Rpb24gbGMoYSxiKXtjYihhLGIsZnVuY3Rpb24oYSxjLGUsZixnLGgpe2lmKCFmKXtmPWVbZ109cWVbZ10uY2xvbmUoKSxoPWYuZGF0YSgpLGguZGF0YT1lO3ZhciBpPWZbMF07XCJzdGFnZVwiPT09Yj8oZS5odG1sJiZkKCc8ZGl2IGNsYXNzPVwiJytrYysnXCI+PC9kaXY+JykuYXBwZW5kKGUuX2h0bWw/ZChlLmh0bWwpLnJlbW92ZUF0dHIoXCJpZFwiKS5odG1sKGUuX2h0bWwpOmUuaHRtbCkuYXBwZW5kVG8oZiksZS5jYXB0aW9uJiZkKE4ob2MsTihwYyxlLmNhcHRpb24pKSkuYXBwZW5kVG8oZiksZS52aWRlbyYmZi5hZGRDbGFzcyh6YikuYXBwZW5kKEZlLmNsb25lKCkpLFgoaSxmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtRKHJlKX0sMCkscGQoe2luZGV4OmguZXEsdXNlcjohMH0pfSksdGU9dGUuYWRkKGYpKTpcIm5hdkRvdFwiPT09Yj8oZWMoaSksQWU9QWUuYWRkKGYpKTpcIm5hdlRodW1iXCI9PT1iJiYoZWMoaSksaC4kd3JhcD1mLmNoaWxkcmVuKFwiOmZpcnN0XCIpLEJlPUJlLmFkZChmKSxlLnZpZGVvJiZoLiR3cmFwLmFwcGVuZChGZS5jbG9uZSgpKSl9fSl9ZnVuY3Rpb24gc2MoYSxiLGMsZCl7cmV0dXJuIGEmJmEubGVuZ3RoJiZJKGEsYixjLGQpfWZ1bmN0aW9uIHRjKGEpe2NiKGEsXCJzdGFnZVwiLGZ1bmN0aW9uKGEsYixjLGYsZyxoKXtpZihmKXt2YXIgaT14KGIpLGo9Yy5maXR8fGUuZml0LGs9Yy5wb3NpdGlvbnx8ZS5wb3NpdGlvbjtoLmVxPWksUmVbWGNdW2ldPWYuY3NzKGQuZXh0ZW5kKHtsZWZ0OlNkPzA6cihiLExlLncsZS5tYXJnaW4sRmQpfSxTZCYmbCgwKSkpLEYoZlswXSkmJihmLmFwcGVuZFRvKHNlKSxtZChjLiR2aWRlbykpLHNjKGguJGltZyxMZSxqLGspLHNjKGguJGZ1bGwsTGUsaixrKX19KX1mdW5jdGlvbiB1YyhhLGIpe2lmKFwidGh1bWJzXCI9PT1OZCYmIWlzTmFOKGEpKXt2YXIgYz0tYSxmPS1hK0xlLm53O0JlLmVhY2goZnVuY3Rpb24oKXt2YXIgYT1kKHRoaXMpLGc9YS5kYXRhKCksaD1nLmVxLGk9ZnVuY3Rpb24oKXtyZXR1cm57aDpVZCx3Omcud319LGo9aSgpLGs9eWRbaF18fHt9LGw9ay50aHVtYmZpdHx8ZS50aHVtYmZpdCxtPWsudGh1bWJwb3NpdGlvbnx8ZS50aHVtYnBvc2l0aW9uO2oudz1nLncsZy5sK2cudzxjfHxnLmw+Znx8c2MoZy4kaW1nLGosbCxtKXx8YiYmUGIoW2hdLFwibmF2VGh1bWJcIixpLGwsbSl9KX19ZnVuY3Rpb24gd2MoYSxiLGMpe2lmKCF3Y1tjXSl7dmFyIGY9XCJuYXZcIj09PWMmJk9kLGc9MDtiLmFwcGVuZChhLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYSxiPWQodGhpcyksYz1iLmRhdGEoKSxlPTAsZj15ZC5sZW5ndGg7Zj5lO2UrKylpZihjLmRhdGE9PT15ZFtlXSl7YT0hMCxjLmVxPWU7YnJlYWt9cmV0dXJuIGF8fGIucmVtb3ZlKCkmJiExfSkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBkKGEpLmRhdGEoKS5lcS1kKGIpLmRhdGEoKS5lcX0pLmVhY2goZnVuY3Rpb24oKXtpZihmKXt2YXIgYT1kKHRoaXMpLGI9YS5kYXRhKCksYz1NYXRoLnJvdW5kKFVkKmIuZGF0YS50aHVtYnJhdGlvKXx8VGQ7Yi5sPWcsYi53PWMsYS5jc3Moe3dpZHRoOmN9KSxnKz1jK2UudGh1bWJtYXJnaW59fSkpLHdjW2NdPSEwfX1mdW5jdGlvbiB4YyhhKXtyZXR1cm4gYS1TZT5MZS53LzN9ZnVuY3Rpb24geWMoYSl7cmV0dXJuIShNZHx8SmUrYSYmSmUtemQrYXx8Q2QpfWZ1bmN0aW9uIEdjKCl7dmFyIGE9eWMoMCksYj15YygxKTt1ZS50b2dnbGVDbGFzcyhFYixhKS5hdHRyKFYoYSkpLHZlLnRvZ2dsZUNsYXNzKEViLGIpLmF0dHIoVihiKSl9ZnVuY3Rpb24gSGMoKXtOZS5vayYmKE5lLnByZXZlbnQ9e1wiPFwiOnljKDApLFwiPlwiOnljKDEpfSl9ZnVuY3Rpb24gTGMoYSl7dmFyIGIsYyxkPWEuZGF0YSgpO3JldHVybiBPZD8oYj1kLmwsYz1kLncpOihiPWEucG9zaXRpb24oKS5sZWZ0LGM9YS53aWR0aCgpKSx7YzpiK2MvMixtaW46LWIrMTAqZS50aHVtYm1hcmdpbixtYXg6LWIrTGUudy1jLTEwKmUudGh1bWJtYXJnaW59fWZ1bmN0aW9uIE9jKGEpe3ZhciBiPURkW2hlXS5kYXRhKCk7XyhDZSx7dGltZToxLjIqYSxwb3M6Yi5sLHdpZHRoOmIudy0yKmUudGh1bWJib3JkZXJ3aWR0aH0pfWZ1bmN0aW9uIFJjKGEpe3ZhciBiPXlkW2EuZ3Vlc3NJbmRleF1baGVdO2lmKGIpe3ZhciBjPU9lLm1pbiE9PU9lLm1heCxkPWEubWluTWF4fHxjJiZMYyhEZFtoZV0pLGU9YyYmKGEua2VlcCYmUmMubD9SYy5sOmgoKGEuY29vfHxMZS5udy8yKS1MYyhiKS5jLGQubWluLGQubWF4KSksZj1jJiZoKGUsT2UubWluLE9lLm1heCksZz0xLjEqYS50aW1lO18oemUse3RpbWU6Zyxwb3M6Znx8MCxvbkVuZDpmdW5jdGlvbigpe3VjKGYsITApfX0pLGxkKHllLEsoZixPZS5taW4sT2UubWF4KSksUmMubD1lfX1mdW5jdGlvbiBUYygpe19jKGhlKSxRZVtoZV0ucHVzaChEZFtoZV0uYWRkQ2xhc3MoV2IpKX1mdW5jdGlvbiBfYyhhKXtmb3IodmFyIGI9UWVbYV07Yi5sZW5ndGg7KWIuc2hpZnQoKS5yZW1vdmVDbGFzcyhXYil9ZnVuY3Rpb24gYmQoYSl7dmFyIGI9UmVbYV07ZC5lYWNoKEVkLGZ1bmN0aW9uKGEsYyl7ZGVsZXRlIGJbeChjKV19KSxkLmVhY2goYixmdW5jdGlvbihhLGMpe2RlbGV0ZSBiW2FdLGMuZGV0YWNoKCl9KX1mdW5jdGlvbiBjZChhKXtGZD1HZD1KZTt2YXIgYj1EZFtYY107YiYmKF9jKFhjKSxRZVtYY10ucHVzaChiLmFkZENsYXNzKFdiKSksYXx8aWUuc2hvdy5vbkVuZCghMCksdihzZSwwLCEwKSxiZChYYyksdGMoRWQpLCQoKSxiYigpKX1mdW5jdGlvbiBlZChhLGIpe2EmJmQuZWFjaChiLGZ1bmN0aW9uKGIsYyl7YyYmZC5leHRlbmQoYyx7d2lkdGg6YS53aWR0aHx8Yy53aWR0aCxoZWlnaHQ6YS5oZWlnaHQsbWlud2lkdGg6YS5taW53aWR0aCxtYXh3aWR0aDphLm1heHdpZHRoLG1pbmhlaWdodDphLm1pbmhlaWdodCxtYXhoZWlnaHQ6YS5tYXhoZWlnaHQscmF0aW86UyhhLnJhdGlvKX0pfSl9ZnVuY3Rpb24gZmQoYixjKXthLnRyaWdnZXIoaWIrXCI6XCIrYixbaWUsY10pfWZ1bmN0aW9uIGdkKCl7Y2xlYXJUaW1lb3V0KGhkLnQpLGZlPTEsZS5zdG9wYXV0b3BsYXlvbnRvdWNoP2llLnN0b3BBdXRvcGxheSgpOmNlPSEwfWZ1bmN0aW9uIGhkKCl7ZmUmJihlLnN0b3BhdXRvcGxheW9udG91Y2h8fChpZCgpLGpkKCkpLGhkLnQ9c2V0VGltZW91dChmdW5jdGlvbigpe2ZlPTB9LFFjK1BjKSl9ZnVuY3Rpb24gaWQoKXtjZT0hKCFDZCYmIWRlKX1mdW5jdGlvbiBqZCgpe2lmKGNsZWFyVGltZW91dChqZC50KSxHLnN0b3AoamQudyksIWUuYXV0b3BsYXl8fGNlKXJldHVybiB2b2lkKGllLmF1dG9wbGF5JiYoaWUuYXV0b3BsYXk9ITEsZmQoXCJzdG9wYXV0b3BsYXlcIikpKTtpZS5hdXRvcGxheXx8KGllLmF1dG9wbGF5PSEwLGZkKFwic3RhcnRhdXRvcGxheVwiKSk7dmFyIGE9SmUsYj1EZFtYY10uZGF0YSgpO2pkLnc9RyhmdW5jdGlvbigpe3JldHVybiBiLnN0YXRlfHxhIT09SmV9LGZ1bmN0aW9uKCl7amQudD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoIWNlJiZhPT09SmUpe3ZhciBiPUtkLGM9eWRbYl1bWGNdLmRhdGEoKTtqZC53PUcoZnVuY3Rpb24oKXtyZXR1cm4gYy5zdGF0ZXx8YiE9PUtkfSxmdW5jdGlvbigpe2NlfHxiIT09S2R8fGllLnNob3coTWQ/WighWWQpOktkKX0pfX0sZS5hdXRvcGxheSl9KX1mdW5jdGlvbiBrZCgpe2llLmZ1bGxTY3JlZW4mJihpZS5mdWxsU2NyZWVuPSExLEtjJiZ2Yy5jYW5jZWwobGUpLERjLnJlbW92ZUNsYXNzKGpiKSxDYy5yZW1vdmVDbGFzcyhqYiksYS5yZW1vdmVDbGFzcyhaYikuaW5zZXJ0QWZ0ZXIocGUpLExlPWQuZXh0ZW5kKHt9LGVlKSxtZChDZCwhMCwhMCkscmQoXCJ4XCIsITEpLGllLnJlc2l6ZSgpLFBiKEVkLFwic3RhZ2VcIiksUShFYyxhZSxfZCksZmQoXCJmdWxsc2NyZWVuZXhpdFwiKSl9ZnVuY3Rpb24gbGQoYSxiKXtYZCYmKGEucmVtb3ZlQ2xhc3MoVWIrXCIgXCIrVmIpLGImJiFDZCYmYS5hZGRDbGFzcyhiLnJlcGxhY2UoL158XFxzL2csXCIgXCIrVGIrXCItLVwiKSkpfWZ1bmN0aW9uIG1kKGEsYixjKXtiJiYocWUucmVtb3ZlQ2xhc3MobmIpLENkPSExLG8oKSksYSYmYSE9PUNkJiYoYS5yZW1vdmUoKSxmZChcInVubG9hZHZpZGVvXCIpKSxjJiYoaWQoKSxqZCgpKX1mdW5jdGlvbiBuZChhKXtxZS50b2dnbGVDbGFzcyhxYixhKX1mdW5jdGlvbiBvZChhKXtpZighTWUuZmxvdyl7dmFyIGI9YT9hLnBhZ2VYOm9kLngsYz1iJiYheWMoeGMoYikpJiZlLmNsaWNrO29kLnAhPT1jJiZyZS50b2dnbGVDbGFzcyhDYixjKSYmKG9kLnA9YyxvZC54PWIpfX1mdW5jdGlvbiBwZChhKXtjbGVhclRpbWVvdXQocGQudCksZS5jbGlja3RyYW5zaXRpb24mJmUuY2xpY2t0cmFuc2l0aW9uIT09ZS50cmFuc2l0aW9uP3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYj1lLnRyYW5zaXRpb247aWUuc2V0T3B0aW9ucyh7dHJhbnNpdGlvbjplLmNsaWNrdHJhbnNpdGlvbn0pLFdkPWIscGQudD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWUuc2hvdyhhKX0sMTApfSwwKTppZS5zaG93KGEpfWZ1bmN0aW9uIHFkKGEsYil7dmFyIGM9YS50YXJnZXQsZj1kKGMpO2YuaGFzQ2xhc3MobWMpP2llLnBsYXlWaWRlbygpOmM9PT1FZT9pZS50b2dnbGVGdWxsU2NyZWVuKCk6Q2Q/Yz09PUhlJiZtZChDZCwhMCwhMCk6Yj9uZCgpOmUuY2xpY2smJnBkKHtpbmRleDphLnNoaWZ0S2V5fHxaKHhjKGEuX3gpKSxzbG93OmEuYWx0S2V5LHVzZXI6ITB9KX1mdW5jdGlvbiByZChhLGIpe01lW2FdPU9lW2FdPWJ9ZnVuY3Rpb24gc2QoYSl7dmFyIGI9ZCh0aGlzKS5kYXRhKCkuZXE7cGQoe2luZGV4OmIsc2xvdzphLmFsdEtleSx1c2VyOiEwLGNvbzphLl94LXllLm9mZnNldCgpLmxlZnR9KX1mdW5jdGlvbiB0ZChhKXtwZCh7aW5kZXg6d2UuaW5kZXgodGhpcyk/XCI+XCI6XCI8XCIsc2xvdzphLmFsdEtleSx1c2VyOiEwfSl9ZnVuY3Rpb24gdWQoYSl7WChhLGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe1EocmUpfSwwKSxuZCghMSl9KX1mdW5jdGlvbiB2ZCgpe2lmKG0oKSx1KCksIXZkLmkpe3ZkLmk9ITA7dmFyIGE9ZS5zdGFydGluZGV4OyhhfHxlLmhhc2gmJmMuaGFzaCkmJihMZD1MKGF8fGMuaGFzaC5yZXBsYWNlKC9eIy8sXCJcIikseWQsMD09PWllLmluZGV4fHxhLGEpKSxKZT1GZD1HZD1IZD1MZD16KExkKXx8MH1pZih6ZCl7aWYod2QoKSlyZXR1cm47Q2QmJm1kKENkLCEwKSxFZD1bXSxiZChYYyksdmQub2s9ITAsaWUuc2hvdyh7aW5kZXg6SmUsdGltZTowfSksaWUucmVzaXplKCl9ZWxzZSBpZS5kZXN0cm95KCl9ZnVuY3Rpb24gd2QoKXtyZXR1cm4hd2QuZj09PVlkPyh3ZC5mPVlkLEplPXpkLTEtSmUsaWUucmV2ZXJzZSgpLCEwKTp2b2lkIDB9ZnVuY3Rpb24geGQoKXt4ZC5va3x8KHhkLm9rPSEwLGZkKFwicmVhZHlcIikpfUNjPWQoXCJodG1sXCIpLERjPWQoXCJib2R5XCIpO3ZhciB5ZCx6ZCxBZCxCZCxDZCxEZCxFZCxGZCxHZCxIZCxJZCxKZCxLZCxMZCxNZCxOZCxPZCxQZCxRZCxSZCxTZCxUZCxVZCxWZCxXZCxYZCxZZCxaZCwkZCxfZCxhZSxiZSxjZSxkZSxlZSxmZSxnZSxoZSxpZT10aGlzLGplPWQubm93KCksa2U9aWIramUsbGU9YVswXSxtZT0xLG5lPWEuZGF0YSgpLG9lPWQoXCI8c3R5bGU+PC9zdHlsZT5cIikscGU9ZChOKFliKSkscWU9ZChOKGtiKSkscmU9ZChOKHhiKSkuYXBwZW5kVG8ocWUpLHNlPShyZVswXSxkKE4oQWIpKS5hcHBlbmRUbyhyZSkpLHRlPWQoKSx1ZT1kKE4oRGIrXCIgXCIrRmIrcmMpKSx2ZT1kKE4oRGIrXCIgXCIrR2IrcmMpKSx3ZT11ZS5hZGQodmUpLmFwcGVuZFRvKHJlKSx4ZT1kKE4oSWIpKSx5ZT1kKE4oSGIpKS5hcHBlbmRUbyh4ZSksemU9ZChOKEpiKSkuYXBwZW5kVG8oeWUpLEFlPWQoKSxCZT1kKCksQ2U9KHNlLmRhdGEoKSx6ZS5kYXRhKCksZChOKGpjKSkuYXBwZW5kVG8oemUpKSxEZT1kKE4oJGIrcmMpKSxFZT1EZVswXSxGZT1kKE4obWMpKSxHZT1kKE4obmMpKS5hcHBlbmRUbyhyZSksSGU9R2VbMF0sSWU9ZChOKHFjKSksSmU9ITEsS2U9e30sTGU9e30sTWU9e30sTmU9e30sT2U9e30sUGU9e30sUWU9e30sUmU9e30sU2U9MCxUZT1bXTtcclxucWVbWGNdPWQoTih5YikpLHFlW1pjXT1kKE4oTWIrXCIgXCIrT2IrcmMsTihpYykpKSxxZVtZY109ZChOKE1iK1wiIFwiK05iK3JjLE4oaGMpKSksUWVbWGNdPVtdLFFlW1pjXT1bXSxRZVtZY109W10sUmVbWGNdPXt9LHFlLmFkZENsYXNzKEljP21iOmxiKS50b2dnbGVDbGFzcyhxYiwhZS5jb250cm9sc29uc3RhcnQpLG5lLmZvdG9yYW1hPXRoaXMsaWUuc3RhcnRBdXRvcGxheT1mdW5jdGlvbihhKXtyZXR1cm4gaWUuYXV0b3BsYXk/dGhpczooY2U9ZGU9ITEsdChhfHxlLmF1dG9wbGF5KSxqZCgpLHRoaXMpfSxpZS5zdG9wQXV0b3BsYXk9ZnVuY3Rpb24oKXtyZXR1cm4gaWUuYXV0b3BsYXkmJihjZT1kZT0hMCxqZCgpKSx0aGlzfSxpZS5zaG93PWZ1bmN0aW9uKGEpe3ZhciBiO1wib2JqZWN0XCIhPXR5cGVvZiBhPyhiPWEsYT17fSk6Yj1hLmluZGV4LGI9XCI+XCI9PT1iP0dkKzE6XCI8XCI9PT1iP0dkLTE6XCI8PFwiPT09Yj8wOlwiPj5cIj09PWI/emQtMTpiLGI9aXNOYU4oYik/TChiLHlkLCEwKTpiLGI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGI/SmV8fDA6YixpZS5hY3RpdmVJbmRleD1KZT16KGIpLElkPUUoSmUpLEpkPVUoSmUpLEtkPXgoSmUrKFlkPy0xOjEpKSxFZD1bSmUsSWQsSmRdLEdkPU1kP2I6SmU7dmFyIGM9TWF0aC5hYnMoSGQtR2QpLGQ9dyhhLnRpbWUsZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5taW4oVmQqKDErKGMtMSkvMTIpLDIqVmQpfSksZj1hLm92ZXJQb3M7YS5zbG93JiYoZCo9MTApO3ZhciBnPURkO2llLmFjdGl2ZUZyYW1lPURkPXlkW0plXTt2YXIgaT1nPT09RGQmJiFhLnVzZXI7bWQoQ2QsRGQuaSE9PXlkW3goRmQpXS5pKSxsYyhFZCxcInN0YWdlXCIpLHRjKE1jP1tHZF06W0dkLEUoR2QpLFUoR2QpXSkscmQoXCJnb1wiLCEwKSxpfHxmZChcInNob3dcIix7dXNlcjphLnVzZXIsdGltZTpkfSksY2U9ITA7dmFyIGo9aWUuc2hvdy5vbkVuZD1mdW5jdGlvbihiKXtpZighai5vayl7aWYoai5vaz0hMCxifHxjZCghMCksaXx8ZmQoXCJzaG93ZW5kXCIse3VzZXI6YS51c2VyfSksIWImJldkJiZXZCE9PWUudHJhbnNpdGlvbilyZXR1cm4gaWUuc2V0T3B0aW9ucyh7dHJhbnNpdGlvbjpXZH0pLHZvaWQoV2Q9ITEpO1NiKCksUGIoRWQsXCJzdGFnZVwiKSxyZChcImdvXCIsITEpLEhjKCksb2QoKSxpZCgpLGpkKCl9fTtpZihTZCl7dmFyIGs9RGRbWGNdLGw9SmUhPT1IZD95ZFtIZF1bWGNdOm51bGw7YWIoayxsLHRlLHt0aW1lOmQsbWV0aG9kOmUudHJhbnNpdGlvbixvbkVuZDpqfSxUZSl9ZWxzZSBfKHNlLHtwb3M6LXIoR2QsTGUudyxlLm1hcmdpbixGZCksb3ZlclBvczpmLHRpbWU6ZCxvbkVuZDpqfSk7aWYoR2MoKSxOZCl7VGMoKTt2YXIgbT15KEplK2goR2QtSGQsLTEsMSkpO1JjKHt0aW1lOmQsY29vOm0hPT1KZSYmYS5jb28sZ3Vlc3NJbmRleDpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5jb28/bTpKZSxrZWVwOml9KSxPZCYmT2MoZCl9cmV0dXJuIGJlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBIZCYmSGQhPT1KZSxIZD1KZSxlLmhhc2gmJmJlJiYhaWUuZXEmJkgoRGQuaWR8fEplKzEpLHRoaXN9LGllLnJlcXVlc3RGdWxsU2NyZWVuPWZ1bmN0aW9uKCl7cmV0dXJuIFFkJiYhaWUuZnVsbFNjcmVlbiYmKF9kPUVjLnNjcm9sbFRvcCgpLGFlPUVjLnNjcm9sbExlZnQoKSxRKEVjKSxyZChcInhcIiwhMCksZWU9ZC5leHRlbmQoe30sTGUpLGEuYWRkQ2xhc3MoWmIpLmFwcGVuZFRvKERjLmFkZENsYXNzKGpiKSksQ2MuYWRkQ2xhc3MoamIpLG1kKENkLCEwLCEwKSxpZS5mdWxsU2NyZWVuPSEwLFJkJiZ2Yy5yZXF1ZXN0KGxlKSxpZS5yZXNpemUoKSxQYihFZCxcInN0YWdlXCIpLFNiKCksZmQoXCJmdWxsc2NyZWVuZW50ZXJcIikpLHRoaXN9LGllLmNhbmNlbEZ1bGxTY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4gUmQmJnZjLmlzKCk/dmMuY2FuY2VsKGIpOmtkKCksdGhpc30saWUudG9nZ2xlRnVsbFNjcmVlbj1mdW5jdGlvbigpe3JldHVybiBpZVsoaWUuZnVsbFNjcmVlbj9cImNhbmNlbFwiOlwicmVxdWVzdFwiKStcIkZ1bGxTY3JlZW5cIl0oKX0sVChiLHZjLmV2ZW50LGZ1bmN0aW9uKCl7IXlkfHx2Yy5pcygpfHxDZHx8a2QoKX0pLGllLnJlc2l6ZT1mdW5jdGlvbihhKXtpZigheWQpcmV0dXJuIHRoaXM7dmFyIGI9YXJndW1lbnRzWzFdfHwwLGM9YXJndW1lbnRzWzJdO2VkKGllLmZ1bGxTY3JlZW4/e3dpZHRoOlwiMTAwJVwiLG1heHdpZHRoOm51bGwsbWlud2lkdGg6bnVsbCxoZWlnaHQ6XCIxMDAlXCIsbWF4aGVpZ2h0Om51bGwsbWluaGVpZ2h0Om51bGx9OlIoYSksW0xlLGN8fGllLmZ1bGxTY3JlZW58fGVdKTt2YXIgZD1MZS53aWR0aCxmPUxlLmhlaWdodCxnPUxlLnJhdGlvLGk9RWMuaGVpZ2h0KCktKE5kP3llLmhlaWdodCgpOjApO3JldHVybiBxKGQpJiYocWUuYWRkQ2xhc3ModWIpLmNzcyh7d2lkdGg6ZCxtaW5XaWR0aDpMZS5taW53aWR0aHx8MCxtYXhXaWR0aDpMZS5tYXh3aWR0aHx8YWR9KSxkPUxlLlc9TGUudz1xZS53aWR0aCgpLExlLm53PU5kJiZwKGUubmF2d2lkdGgsZCl8fGQsZS5nbGltcHNlJiYoTGUudy09TWF0aC5yb3VuZCgyKihwKGUuZ2xpbXBzZSxkKXx8MCkpKSxzZS5jc3Moe3dpZHRoOkxlLncsbWFyZ2luTGVmdDooTGUuVy1MZS53KS8yfSksZj1wKGYsaSksZj1mfHxnJiZkL2csZiYmKGQ9TWF0aC5yb3VuZChkKSxmPUxlLmg9TWF0aC5yb3VuZChoKGYscChMZS5taW5oZWlnaHQsaSkscChMZS5tYXhoZWlnaHQsaSkpKSxyZS5zdG9wKCkuYW5pbWF0ZSh7d2lkdGg6ZCxoZWlnaHQ6Zn0sYixmdW5jdGlvbigpe3FlLnJlbW92ZUNsYXNzKHViKX0pLGNkKCksTmQmJih5ZS5zdG9wKCkuYW5pbWF0ZSh7d2lkdGg6TGUubnd9LGIpLFJjKHtndWVzc0luZGV4OkplLHRpbWU6YixrZWVwOiEwfSksT2QmJndjLm5hdiYmT2MoYikpLCRkPWN8fCEwLHhkKCkpKSxTZT1yZS5vZmZzZXQoKS5sZWZ0LHRoaXN9LGllLnNldE9wdGlvbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuZXh0ZW5kKGUsYSksdmQoKSx0aGlzfSxpZS5zaHVmZmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHlkJiZPKHlkKSYmdmQoKSx0aGlzfSxpZS5kZXN0cm95PWZ1bmN0aW9uKCl7cmV0dXJuIGllLmNhbmNlbEZ1bGxTY3JlZW4oKSxpZS5zdG9wQXV0b3BsYXkoKSx5ZD1pZS5kYXRhPW51bGwsaigpLEVkPVtdLGJkKFhjKSx2ZC5vaz0hMSx0aGlzfSxpZS5wbGF5VmlkZW89ZnVuY3Rpb24oKXt2YXIgYT1EZCxiPWEudmlkZW8sYz1KZTtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYiYmYS52aWRlb1JlYWR5JiYoUmQmJmllLmZ1bGxTY3JlZW4mJmllLmNhbmNlbEZ1bGxTY3JlZW4oKSxHKGZ1bmN0aW9uKCl7cmV0dXJuIXZjLmlzKCl8fGMhPT1KZX0sZnVuY3Rpb24oKXtjPT09SmUmJihhLiR2aWRlbz1hLiR2aWRlb3x8ZChkLkZvdG9yYW1hLmpzdC52aWRlbyhiKSksYS4kdmlkZW8uYXBwZW5kVG8oYVtYY10pLHFlLmFkZENsYXNzKG5iKSxDZD1hLiR2aWRlbyxvKCksd2UuYmx1cigpLERlLmJsdXIoKSxmZChcImxvYWR2aWRlb1wiKSl9KSksdGhpc30saWUuc3RvcFZpZGVvPWZ1bmN0aW9uKCl7cmV0dXJuIG1kKENkLCEwLCEwKSx0aGlzfSxyZS5vbihcIm1vdXNlbW92ZVwiLG9kKSxNZT1kYihzZSx7b25TdGFydDpnZCxvbk1vdmU6ZnVuY3Rpb24oYSxiKXtsZChyZSxiLmVkZ2UpfSxvblRvdWNoRW5kOmhkLG9uRW5kOmZ1bmN0aW9uKGEpe2xkKHJlKTt2YXIgYj0oTmMmJiFnZXx8YS50b3VjaCkmJmUuYXJyb3dzJiZcImFsd2F5c1wiIT09ZS5hcnJvd3M7aWYoYS5tb3ZlZHx8YiYmYS5wb3MhPT1hLm5ld1BvcyYmIWEuY29udHJvbCl7dmFyIGM9cyhhLm5ld1BvcyxMZS53LGUubWFyZ2luLEZkKTtpZS5zaG93KHtpbmRleDpjLHRpbWU6U2Q/VmQ6YS50aW1lLG92ZXJQb3M6YS5vdmVyUG9zLHVzZXI6ITB9KX1lbHNlIGEuYWJvcnRlZHx8YS5jb250cm9sfHxxZChhLnN0YXJ0RXZlbnQsYil9LHRpbWVMb3c6MSx0aW1lSGlnaDoxLGZyaWN0aW9uOjIsc2VsZWN0OlwiLlwiK1hiK1wiLCAuXCIrWGIrXCIgKlwiLCR3cmFwOnJlfSksT2U9ZGIoemUse29uU3RhcnQ6Z2Qsb25Nb3ZlOmZ1bmN0aW9uKGEsYil7bGQoeWUsYi5lZGdlKX0sb25Ub3VjaEVuZDpoZCxvbkVuZDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7UmMubD1hLm5ld1BvcyxpZCgpLGpkKCksdWMoYS5uZXdQb3MsITApfWlmKGEubW92ZWQpYS5wb3MhPT1hLm5ld1Bvcz8oY2U9ITAsXyh6ZSx7dGltZTphLnRpbWUscG9zOmEubmV3UG9zLG92ZXJQb3M6YS5vdmVyUG9zLG9uRW5kOmJ9KSx1YyhhLm5ld1BvcyksWGQmJmxkKHllLEsoYS5uZXdQb3MsT2UubWluLE9lLm1heCkpKTpiKCk7ZWxzZXt2YXIgYz1hLiR0YXJnZXQuY2xvc2VzdChcIi5cIitNYix6ZSlbMF07YyYmc2QuY2FsbChjLGEuc3RhcnRFdmVudCl9fSx0aW1lTG93Oi41LHRpbWVIaWdoOjIsZnJpY3Rpb246NSwkd3JhcDp5ZX0pLE5lPWViKHJlLHtzaGlmdDohMCxvbkVuZDpmdW5jdGlvbihhLGIpe2dkKCksaGQoKSxpZS5zaG93KHtpbmRleDpiLHNsb3c6YS5hbHRLZXl9KX19KSxQZT1lYih5ZSx7b25FbmQ6ZnVuY3Rpb24oYSxiKXtnZCgpLGhkKCk7dmFyIGM9dih6ZSkrLjI1KmI7emUuY3NzKGsoaChjLE9lLm1pbixPZS5tYXgpKSksWGQmJmxkKHllLEsoYyxPZS5taW4sT2UubWF4KSksUGUucHJldmVudD17XCI8XCI6Yz49T2UubWF4LFwiPlwiOmM8PU9lLm1pbn0sY2xlYXJUaW1lb3V0KFBlLnQpLFBlLnQ9c2V0VGltZW91dChmdW5jdGlvbigpe1JjLmw9Yyx1YyhjLCEwKX0sUGMpLHVjKGMpfX0pLHFlLmhvdmVyKGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2ZlfHxuZCghKGdlPSEwKSl9LDApfSxmdW5jdGlvbigpe2dlJiZuZCghKGdlPSExKSl9KSxNKHdlLGZ1bmN0aW9uKGEpe1koYSksdGQuY2FsbCh0aGlzLGEpfSx7b25TdGFydDpmdW5jdGlvbigpe2dkKCksTWUuY29udHJvbD0hMH0sb25Ub3VjaEVuZDpoZH0pLHdlLmVhY2goZnVuY3Rpb24oKXtXKHRoaXMsZnVuY3Rpb24oYSl7dGQuY2FsbCh0aGlzLGEpfSksdWQodGhpcyl9KSxXKEVlLGllLnRvZ2dsZUZ1bGxTY3JlZW4pLHVkKEVlKSxkLmVhY2goXCJsb2FkIHB1c2ggcG9wIHNoaWZ0IHVuc2hpZnQgcmV2ZXJzZSBzb3J0IHNwbGljZVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2llW2JdPWZ1bmN0aW9uKCl7cmV0dXJuIHlkPXlkfHxbXSxcImxvYWRcIiE9PWI/QXJyYXkucHJvdG90eXBlW2JdLmFwcGx5KHlkLGFyZ3VtZW50cyk6YXJndW1lbnRzWzBdJiZcIm9iamVjdFwiPT10eXBlb2YgYXJndW1lbnRzWzBdJiZhcmd1bWVudHNbMF0ubGVuZ3RoJiYoeWQ9UChhcmd1bWVudHNbMF0pKSx2ZCgpLGllfX0pLHZkKCl9LGQuZm4uZm90b3JhbWE9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPXRoaXMsZT1kKHRoaXMpLGY9ZS5kYXRhKCksZz1mLmZvdG9yYW1hO2c/Zy5zZXRPcHRpb25zKGIsITApOkcoZnVuY3Rpb24oKXtyZXR1cm4hRShjKX0sZnVuY3Rpb24oKXtmLnVydGV4dD1lLmh0bWwoKSxuZXcgZC5Gb3RvcmFtYShlLGQuZXh0ZW5kKHt9LGNkLGEuZm90b3JhbWFEZWZhdWx0cyxiLGYpKX0pfSl9LGQuRm90b3JhbWEuaW5zdGFuY2VzPVtdLGQuRm90b3JhbWEuY2FjaGU9e30sZC5Gb3RvcmFtYS5tZWFzdXJlcz17fSxkPWR8fHt9LGQuRm90b3JhbWE9ZC5Gb3RvcmFtYXx8e30sZC5Gb3RvcmFtYS5qc3Q9ZC5Gb3RvcmFtYS5qc3R8fHt9LGQuRm90b3JhbWEuanN0LnN0eWxlPWZ1bmN0aW9uKGEpe3t2YXIgYixjPVwiXCI7dGMuZXNjYXBlfXJldHVybiBjKz1cIi5mb3RvcmFtYVwiKyhudWxsPT0oYj1hLnMpP1wiXCI6YikrXCIgLmZvdG9yYW1hX19uYXYtLXRodW1icyAuZm90b3JhbWFfX25hdl9fZnJhbWV7XFxucGFkZGluZzpcIisobnVsbD09KGI9YS5tKT9cIlwiOmIpK1wicHg7XFxuaGVpZ2h0OlwiKyhudWxsPT0oYj1hLmgpP1wiXCI6YikrXCJweH1cXG4uZm90b3JhbWFcIisobnVsbD09KGI9YS5zKT9cIlwiOmIpK1wiIC5mb3RvcmFtYV9fdGh1bWItYm9yZGVye1xcbmhlaWdodDpcIisobnVsbD09KGI9YS5oLWEuYiooYS5xPzA6MikpP1wiXCI6YikrXCJweDtcXG5ib3JkZXItd2lkdGg6XCIrKG51bGw9PShiPWEuYik/XCJcIjpiKStcInB4O1xcbm1hcmdpbi10b3A6XCIrKG51bGw9PShiPWEubSk/XCJcIjpiKStcInB4fVwifSxkLkZvdG9yYW1hLmpzdC52aWRlbz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7Yys9ZC5jYWxsKGFyZ3VtZW50cyxcIlwiKX12YXIgYz1cIlwiLGQ9KHRjLmVzY2FwZSxBcnJheS5wcm90b3R5cGUuam9pbik7cmV0dXJuIGMrPSc8ZGl2IGNsYXNzPVwiZm90b3JhbWFfX3ZpZGVvXCI+PGlmcmFtZSBzcmM9XCInLGIoKFwieW91dHViZVwiPT1hLnR5cGU/YS5wK1wieW91dHViZS5jb20vZW1iZWQvXCIrYS5pZCtcIj9hdXRvcGxheT0xXCI6XCJ2aW1lb1wiPT1hLnR5cGU/YS5wK1wicGxheWVyLnZpbWVvLmNvbS92aWRlby9cIithLmlkK1wiP2F1dG9wbGF5PTEmYmFkZ2U9MFwiOmEuaWQpKyhhLnMmJlwiY3VzdG9tXCIhPWEudHlwZT9cIiZcIithLnM6XCJcIikpLGMrPSdcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+PC9kaXY+XFxuJ30sZChmdW5jdGlvbigpe2QoXCIuXCIraWIrJzpub3QoW2RhdGEtYXV0bz1cImZhbHNlXCJdKScpLmZvdG9yYW1hKCl9KX0od2luZG93LGRvY3VtZW50LGxvY2F0aW9uLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBqUXVlcnkmJmpRdWVyeSk7IiwiOyQoIGZ1bmN0aW9uKClcclxue1xyXG4gICAgdmFyIHRhcmdldHMgPSAkKCAnW3JlbH49dG9vbHRpcF0nICksXHJcbiAgICAgICAgdGFyZ2V0ICA9IGZhbHNlLFxyXG4gICAgICAgIHRvb2x0aXAgPSBmYWxzZSxcclxuICAgICAgICB0aXRsZSAgID0gZmFsc2U7XHJcblxyXG4gICAgdGFyZ2V0cy5iaW5kKCAnbW91c2VlbnRlcicsIGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICB0YXJnZXQgID0gJCggdGhpcyApO1xyXG4gICAgICAgIHRpcCAgICAgPSB0YXJnZXQuYXR0ciggJ3RpdGxlJyApO1xyXG4gICAgICAgIHRvb2x0aXAgPSAkKCAnPGRpdiBpZD1cInRvb2x0aXBcIj48L2Rpdj4nICk7XHJcblxyXG4gICAgICAgIGlmKCAhdGlwIHx8IHRpcCA9PSAnJyApXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgdGFyZ2V0LnJlbW92ZUF0dHIoICd0aXRsZScgKTtcclxuICAgICAgICB0b29sdGlwLmNzcyggJ29wYWNpdHknLCAwIClcclxuICAgICAgICAgICAgLmh0bWwoIHRpcCApXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbyggJ2JvZHknICk7XHJcblxyXG4gICAgICAgIHZhciBpbml0X3Rvb2x0aXAgPSBmdW5jdGlvbigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiggJCggd2luZG93ICkud2lkdGgoKSA8IHRvb2x0aXAub3V0ZXJXaWR0aCgpICogMS41IClcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAuY3NzKCAnbWF4LXdpZHRoJywgJCggd2luZG93ICkud2lkdGgoKSAvIDIgKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5jc3MoICdtYXgtd2lkdGgnLCAzNDAgKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwb3NfbGVmdCA9IHRhcmdldC5vZmZzZXQoKS5sZWZ0ICsgKCB0YXJnZXQub3V0ZXJXaWR0aCgpIC8gMiApIC0gKCB0b29sdGlwLm91dGVyV2lkdGgoKSAvIDIgKSxcclxuICAgICAgICAgICAgICAgIHBvc190b3AgID0gdGFyZ2V0Lm9mZnNldCgpLnRvcCAtIHRvb2x0aXAub3V0ZXJIZWlnaHQoKSAtIDIwO1xyXG5cclxuICAgICAgICAgICAgaWYoIHBvc19sZWZ0IDwgMCApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBvc19sZWZ0ID0gdGFyZ2V0Lm9mZnNldCgpLmxlZnQgKyB0YXJnZXQub3V0ZXJXaWR0aCgpIC8gMiAtIDIwO1xyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5hZGRDbGFzcyggJ2xlZnQnICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5yZW1vdmVDbGFzcyggJ2xlZnQnICk7XHJcblxyXG4gICAgICAgICAgICBpZiggcG9zX2xlZnQgKyB0b29sdGlwLm91dGVyV2lkdGgoKSA+ICQoIHdpbmRvdyApLndpZHRoKCkgKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwb3NfbGVmdCA9IHRhcmdldC5vZmZzZXQoKS5sZWZ0IC0gdG9vbHRpcC5vdXRlcldpZHRoKCkgKyB0YXJnZXQub3V0ZXJXaWR0aCgpIC8gMiArIDIwO1xyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5hZGRDbGFzcyggJ3JpZ2h0JyApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAucmVtb3ZlQ2xhc3MoICdyaWdodCcgKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCBwb3NfdG9wIDwgMCApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBwb3NfdG9wICA9IHRhcmdldC5vZmZzZXQoKS50b3AgKyB0YXJnZXQub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgIHRvb2x0aXAuYWRkQ2xhc3MoICd0b3AnICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdG9vbHRpcC5yZW1vdmVDbGFzcyggJ3RvcCcgKTtcclxuXHJcbiAgICAgICAgICAgIHRvb2x0aXAuY3NzKCB7IGxlZnQ6IHBvc19sZWZ0LCB0b3A6IHBvc190b3AgfSApXHJcbiAgICAgICAgICAgICAgICAuYW5pbWF0ZSggeyB0b3A6ICcrPTEwJywgb3BhY2l0eTogMSB9LCA1MCApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGluaXRfdG9vbHRpcCgpO1xyXG4gICAgICAgICQoIHdpbmRvdyApLnJlc2l6ZSggaW5pdF90b29sdGlwICk7XHJcblxyXG4gICAgICAgIHZhciByZW1vdmVfdG9vbHRpcCA9IGZ1bmN0aW9uKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRvb2x0aXAuYW5pbWF0ZSggeyB0b3A6ICctPTEwJywgb3BhY2l0eTogMCB9LCA1MCwgZnVuY3Rpb24oKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKCB0aGlzICkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGFyZ2V0LmF0dHIoICd0aXRsZScsIHRpcCApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRhcmdldC5iaW5kKCAnbW91c2VsZWF2ZScsIHJlbW92ZV90b29sdGlwICk7XHJcbiAgICAgICAgdG9vbHRpcC5iaW5kKCAnY2xpY2snLCByZW1vdmVfdG9vbHRpcCApO1xyXG4gICAgfSk7XHJcbn0pOyIsInZhciAkYm9keSxcclxuXHR3aW5kb3dIZWlnaHQsXHJcblx0d2luZG93V2lkdGgsXHJcblx0bWVkaWFQb2ludDEgPSAxMDI0LFxyXG5cdG1lZGlhUG9pbnQyID0gNzY4LFxyXG5cdG1lZGlhUG9pbnQzID0gNDgwLFxyXG5cdG1lZGlhUG9pbnQ0ID0gMzIwO1xyXG5cclxuXHJcbi8vXHJcbi8vIHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWZlLWRlc2NyaXB0aW9uX190ZXh0Jyk7XHJcbi8vIFNpbXBsZVNjcm9sbGJhci5pbml0RWwoZWwpO1xyXG5cclxuXHJcbi8v0LfQsNCz0YDRg9C30LrQsCDRgdC60YDQuNC/0YLQsFxyXG4vLyB2YXIgc2NyaXB0TWFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbi8vIHNjcmlwdE1hcC5zcmMgPSBcImh0dHBzOi8vYXBpLW1hcHMueWFuZGV4LnJ1LzIuMC8/bG9hZD1wYWNrYWdlLnN0YW5kYXJkLHBhY2thZ2UuZ2VvT2JqZWN0cyZsYW5nPXJ1LVJVXCI7XHJcbi8vIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHRNYXApO1xyXG5cclxuLy8gdmFyIHNjcmlwdFRvb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuLy8gc2NyaXB0VG9vbC5zcmMgPSBcImh0dHBzOi8vYWJlc3R1emhldi5naXRodWIuaW8vY2FmZS1hbmRlcnNvbi9ib3dlcl9jb21wb25lbnRzL3Rvb2x0aXBzdGVyL2Rpc3QvanMvdG9vbHRpcHN0ZXIuYnVuZGxlLmpzXCI7XHJcbi8vIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHRUb29sKTtcclxuXHJcbi8qbWFpbi5qcyovXHJcblxyXG5cclxudmFyIHdpbmRvd1dpZHRoID0gKHdpbmRvdy5pbm5lcldpZHRoICk7IC8vINCy0YHRjyDRiNC40YDQuNC90LAg0L7QutC90LBcclxudmFyIGRvY3VtZW50V2lkdGggPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoICk7IC8vINGI0LjRgNC40L3QsCDQvNC40L3Rg9GBINC/0YDQvtC60YDRg9GC0LrQsFxyXG4vLyBjb25zb2xlLmxvZygn0KjQuNGA0LjQvdCwIHdpbmRvdzogJyArIHdpbmRvd1dpZHRoKTtcclxuLy8gY29uc29sZS5sb2coJ9Co0LjRgNC40L3QsCB3cmFwcGVyOiAnICsgZG9jdW1lbnRXaWR0aCk7XHJcbnZhciBkb2N1bWVudEhlaWdodCA9IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ICk7XHJcbi8vIGNvbnNvbGUubG9nKCfQstGL0YHQvtGC0LAgJyArIGRvY3VtZW50SGVpZ2h0KTtcclxuXHJcblxyXG4kKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbigpe1xyXG5cclxuXHJcblxyXG4gICAgLyrRgdC60YDQvtC70Lsg0L/RgNC4INCy0YvQsdC+0YDQtSDQtNC+0YHRgtCw0LLQutC4Ki9cclxuICAgIHZhciBvcmRlckRlbGl2ZXJ5TWFwID0gJCgnLm9yZGVyLWRlbGl2ZXJ5X19tYXAnKS5oZWlnaHQoKSxcclxuICAgICAgICBvcmRlckRlbGl2ZXJ5QWRkcmVzc0xpc3QgPSAkKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCcpLFxyXG4gICAgICAgIG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdEhlaWdodCA9IG9yZGVyRGVsaXZlcnlBZGRyZXNzTGlzdC5oZWlnaHQoKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdvcmRlckRlbGl2ZXJ5TWFwOiAnICsgb3JkZXJEZWxpdmVyeU1hcCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnb3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0OiAnICsgb3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0SGVpZ2h0KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlSGVpZ2h0QWRkcmVzc0xpc3QgKCl7XHJcbiAgICAgICAgb3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0LmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW0pe1xyXG4gICAgICAgICAgICB2YXIgZWxlbUhlaWdodCA9ICAkKGVsZW0pLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZWxlbUhlaWdodDogJyArIGVsZW1IZWlnaHQpO1xyXG4gICAgICAgICAgICBpZihlbGVtSGVpZ2h0ID4gMzIwKXtcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBTaW1wbGVCYXIob3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0WzBdKTtcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBTaW1wbGVCYXIob3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0WzFdKTtcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBTaW1wbGVCYXIob3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0WzJdKTtcclxuICAgICAgICAgICAgICAgIC8vIG5ldyBTaW1wbGVCYXIob3JkZXJEZWxpdmVyeUFkZHJlc3NMaXN0WzNdKTtcclxuICAgICAgICAgICAgICAgICQoZWxlbSkuYWRkQ2xhc3MoJ3Njcm9sbC13cmFwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNoYW5nZUhlaWdodEFkZHJlc3NMaXN0KCk7XHJcblxyXG4gICAgLy/RhdCw0Log0LTQu9GPINCx0YvRgdGC0YDQvtCz0L4g0L7QsdGA0LXQt9Cw0L3QuNGPINCy0YHQtdCz0L4g0YHQv9C40YHQutCwINCyINC80L7QtNCw0LvRjNC90L7QvCDQvtC60L3QtSDQt9Cw0LrQsNC30LAg0YLQvtGA0YLQsFxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZENsYXNzQ2FrZXNBZGRyZXNzTGlzdCgpe1xyXG4gICAgICAgICQoJy5wb3B1cC1jYWtlLW9yZGVyIC5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19saXN0JykuYWRkQ2xhc3MoJ3Njcm9sbC13cmFwJyk7XHJcbiAgICB9XHJcbiAgICBhZGRDbGFzc0Nha2VzQWRkcmVzc0xpc3QoKTtcclxuXHJcbiAgICAvLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNha2UtY2FyZF9faG92ZXInLCBmdW5jdGlvbigpe1xyXG4gICAgLy8gICAgICQoJy5wb3B1cC1jYWtlLW9yZGVyIC5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19saXN0JykuYWRkQ2xhc3MoJ3Njcm9sbC13cmFwJyk7XHJcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ3Njcm9sbC13cmFwIGFkZCcpO1xyXG4gICAgLy8gfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcub3JkZXItdGFic19faXRlbScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2hhbmdlSGVpZ2h0QWRkcmVzc0xpc3QoKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgdmFyIHBlcm1pdFBhdGggPSBbXHJcbiAgICAnL2ZhY3RvcnktaGFwcGluZXNzLmh0bWwnLFxyXG4gICAgJy9jYWZlLWFuZGVyc29uL2ZhY3RvcnktaGFwcGluZXNzLmh0bWwnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldFNjcm9sbEVsZW0gKGVsZW0pe1xyXG4gICAgICAgIGlmKCQod2luZG93KS53aWR0aCgpIDw9IDgwMCkge1xyXG4gICAgICAgICAgICBuZXcgU2ltcGxlQmFyKCQoZWxlbSlbMF0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKHBlcm1pdFBhdGguaW5kZXhPZihsb2NhdGlvbi5wYXRobmFtZSkgPiAtMSl7XHJcbiAgICAgICAgZ2V0U2Nyb2xsRWxlbSgnLmZhY3RvcnktbGF5b3V0Jyk7XHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGdldFNjcm9sbEVsZW0oJy5mYWN0b3J5LWxheW91dCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyICRkYXRlcGlja2VyID0gJCgnLmRhdGVwaWNrZXItaGVyZScpO1xyXG4gICAgJGRhdGVwaWNrZXIuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICBhdXRvQ2xvc2U6IHRydWVcclxuICAgIH0pO1xyXG4gICAgJGRhdGVwaWNrZXIub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmRhdGVwaWNrZXItbGF5b3V0JykuYWRkQ2xhc3MoJ2FjdGl2ZS1kYXRlcGlja2VyJyk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJCgnI2RhdGVwaWNrZXJDdXN0b20nKS5kYXRlcGlja2VyKHtcclxuICAgICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGF1dG9DbG9zZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAkKCcjZGF0ZXBpY2tlckN1c3RvbScpLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5kYXRlcGlja2VyLWxheW91dCcpLmFkZENsYXNzKCdhY3RpdmUtZGF0ZXBpY2tlcicpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIHZhciBkaXNhYmxlZFBhcnR5RGF5cyA9IFswLCA2XTtcclxuICAgICQoJyNwYXJ0eS1kYXRlcGlja2VyJykuZGF0ZXBpY2tlcih7XHJcbiAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICBpbmxpbmU6IHRydWUsXHJcbiAgICAgICAgb25SZW5kZXJDZWxsOiBmdW5jdGlvbiAoZGF0ZSwgY2VsbFR5cGUpIHtcclxuICAgICAgICAgICAgaWYgKGNlbGxUeXBlID09ICdkYXknKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKSxcclxuICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkID0gZGlzYWJsZWRQYXJ0eURheXMuaW5kZXhPZihkYXkpICE9IC0xO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8v0LrQsNC70LXQvdC00LDRgNGMINCyINC80LXRgNC+0L/RgNC40Y/RgtC40Y/RhVxyXG4gICAgdmFyIGV2ZW50RGF0ZXMgPSBbMSwgMTAsIDEyLCAyMl07XHJcbiAgICAkKCcjZXZlbnQtZGF0ZXBpY2tlcicpLmRhdGVwaWNrZXIoe1xyXG4gICAgICAgIGlubGluZTogdHJ1ZSxcclxuICAgICAgICBvblJlbmRlckNlbGw6IGZ1bmN0aW9uIChkYXRlLCBjZWxsVHlwZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBkYXRlLmdldERhdGUoKTtcclxuICAgICAgICAgICAgaWYgKGNlbGxUeXBlID09ICdkYXknICYmIGV2ZW50RGF0ZXMuaW5kZXhPZihjdXJyZW50RGF0ZSkgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbDogY3VycmVudERhdGUgKyAnPHNwYW4gY2xhc3M9XCJkcC1ub3RlXCI+PC9zcGFuPidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnLmpzLWV2ZW50LW9yZGVyLWRhdGVwaWNrZXInKS5kYXRlcGlja2VyKHtcclxuICAgICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgpXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbn0pO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCQpIHtcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tY3VzdG9tXHJcblxyXG5cclxuXHJcbiAgICBpZigkKCdpbnB1dCcpLmhhc0NsYXNzKCdkYXRlcGlja2VyLWN1c3RvbScpIHx8ICQoJ2RpdicpLmhhc0NsYXNzKCdkYXRlcGlja2VyLWN1c3RvbScpKXtcclxuICAgICAgICAkKCcuZGF0ZXBpY2tlci1jdXN0b20nKS5kYXRlcGlja2VyKHtcclxuICAgICAgICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgYXV0b0Nsb3NlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyrRhNGD0L3QutGG0LjRjyDRhNC+0YDQvNCw0YLQuNGA0L7QstCw0L3QuNGPINC00LDRgtGLKi9cclxuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xyXG4gICAgICAgIHZhciBkZCA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGlmIChkZCA8IDEwKSBkZCA9ICcwJyArIGRkO1xyXG5cclxuICAgICAgICB2YXIgbW0gPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgIGlmIChtbSA8IDEwKSBtbSA9ICcwJyArIG1tO1xyXG5cclxuICAgICAgICB2YXIgeXkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgaWYgKHl5IDwgMTApIHl5ID0gJzAnICsgeXk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZCArICcuJyArIG1tICsgJy4nICsgeXk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoJCgnaW5wdXQnKS5oYXNDbGFzcygnZGF0ZXBpY2tlci1kZWxpdmVyeS12MicpIHx8ICQoJ2RpdicpLmhhc0NsYXNzKCdkYXRlcGlja2VyLWRlbGl2ZXJ5LXYyJykpe1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGRhdGVwaWNrZXJEZWxpdmVyeSA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGRhdGVwaWNrZXJEZWxpdmVyeVYyPSAkKCcuZGF0ZXBpY2tlci1kZWxpdmVyeS12MicpO1xyXG4gICAgICAgIC8vIGRhdGVwaWNrZXJEZWxpdmVyeVYyLnZhbChmb3JtYXREYXRlKGRhdGVwaWNrZXJEZWxpdmVyeSkpO1xyXG4gICAgICAgIGRhdGVwaWNrZXJEZWxpdmVyeVYyLmRhdGVwaWNrZXIoe1xyXG4gICAgICAgICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBhdXRvQ2xvc2U6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxuICAgIFxyXG5cclxuICAgICQoJ2RvY3VtZW50Jykub24oJ2NsaWNrJywgJy5vcmRlcl9fYnRuLmRpc2FibGVkJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmV4Y3Vyc2lvbi1wYXlfX2l0ZW0gbGFiZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmV4Y3Vyc2lvbi1wYXlfX2l0ZW0nKS5zaWJsaW5ncygpLmZpbmQoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvL9C80L7QtNCw0LvRjNC90L7QtSDQvtC60L3QviDQsiDRjdC60YHQutGD0YDRgdC40Y/RhVxyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcjZXhjdXJzaW9uLXBheS1zY29yZScsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoJCh0aGlzKS5wcm9wKCBcImNoZWNrZWRcIiApKXtcclxuICAgICAgICAgICAgJCgnLmV4Y3Vyc2lvbi1wYXktc2NvcmUnKS5zbGlkZURvd24oMzAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNleGN1cnNpb24tcGF5LWNhcmQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCQodGhpcykucHJvcCggXCJjaGVja2VkXCIgKSl7XHJcbiAgICAgICAgICAgICQoJy5leGN1cnNpb24tcGF5LXNjb3JlJykuc2xpZGVVcCgzMDApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvKtC40LfQvNC10L3QtdC90LjQtSDQvtC/0LvQsNGC0YsqL1xyXG4gICAgJCgnLm9yZGVyLXBheV9faXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHBheVJhZGlvID0gJCh0aGlzKS5jaGlsZHJlbignaW5wdXQnKTtcclxuICAgICAgICBpZihwYXlSYWRpby5wcm9wKFwiY2hlY2tlZFwiKSl7XHJcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJy5vcmRlci1wYXlfX2l0ZW0nKS5maW5kKCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmZpbHRlci1ob2xkX19kcm9wZG93bicsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5maWx0ZXItaG9sZF9faXRlbScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmZpbHRlci1ob2xkX19pdGVtJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5maWx0ZXItaG9sZF9fc3VibWVudScpLnNsaWRlRG93big1MDApO1xyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvLyBkb2N1bWVudEhlaWdodFxyXG4gICAgZnVuY3Rpb24gY2hhbmdlSGVpZ2h0QmFza2V0UG9wdXAgKCl7XHJcbiAgICAgICAgdmFyIGJhc2tldFNjcm9sbCA9ICQoJy5wb3B1cC1iYXNrZXRfX3Njcm9sbCcpLFxyXG4gICAgICAgICAgICBoZWlnaHRCYXNrZXQgPSBiYXNrZXRTY3JvbGwuaGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIGlmIChoZWlnaHRCYXNrZXQgPj0gZG9jdW1lbnRIZWlnaHQgLSAxMDApe1xyXG4gICAgICAgICAgICBiYXNrZXRTY3JvbGwuYWRkQ2xhc3MoJ2ZpeGVkLWhlaWdodC1iYXNrZXQnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2lmICcgKyBoZWlnaHRCYXNrZXQpO1xyXG4gICAgICAgICAgICAvKtC60LDRgdGC0L7QvNC90YvQuSDRgdC60YDQvtC70LsqL1xyXG4gICAgICAgICAgICBiYXNrZXRTY3JvbGwualNjcm9sbFBhbmUoKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIGJhc2tldFNjcm9sbC5yZW1vdmVDbGFzcygnZml4ZWQtaGVpZ2h0LWJhc2tldCcpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZWxzZSAnICsgaGVpZ2h0QmFza2V0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlSGVpZ2h0QmFza2V0UG9wdXAoKTtcclxuXHJcbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2hhbmdlSGVpZ2h0QmFza2V0UG9wdXAoKTtcclxuICAgIH0pO1xyXG4gICAgLyrQutCw0YDRgtC40L3QutC4INC+0LTQvdC+0Lkg0YjQuNGA0LjQvdGLKi9cclxuXHJcbiAgICAkKCcuYy1jYXJkLWNhdGFsb2dfX2ltZycpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW0pe1xyXG4gICAgICAgIHZhciBpbWcgPSAkKGVsZW0pLmNoaWxkcmVuKCdpbWcnKSxcclxuICAgICAgICAgICAgaW1nV2lkdGggPSBpbWcud2lkdGgoKSxcclxuICAgICAgICAgICAgJHRoaXMgPSAkKGVsZW0pO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZWxlbWVudCAnICsgaW5kZXggKyAnOiAnICsgJ3dpZHRoOiAnICsgaW1nV2lkdGgpO1xyXG4gICAgICAgIGlmKGltZ1dpZHRoIDwgMzkwICkge1xyXG4gICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnYmlnLXByb2R1Y3QtaW1nJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfQtdGB0YLRjCDQutCw0YDRgtC40L3QutCwINC80LXQvdGM0YjQtSAzOTAnKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdiaWctcHJvZHVjdC1pbWcnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ9GA0LDQsdC+0YLQsNC10YIg0L3QviDQutCw0YDRgtC40L3QutC4INC90LXRgicpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL9C/0L7QutCw0LfQsNGC0Ywg0LLRgdC1INC80LXRgNC+0L/RgNC40Y/RgtC40Y8g0L/QviDQtNC90Y/QvCDQvdCwINGB0YLRgNCw0L3QuNGG0LUg0JzQtdGA0L7Qv9GA0LjRj9GC0LjRj1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jLWNhcmQtZXZlbnQtdGltZWxpc3RfX21vcmUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgdmFyIHRleHRCdG4gPSAkdGhpcy5odG1sKCk7XHJcbiAgICAgICAgaWYodGV4dEJ0biA9PSBcItC/0L7QutCw0LfQsNGC0Ywg0LLRgdC1XCIpe1xyXG4gICAgICAgICAgICAkdGhpcy5odG1sKFwi0YHQutGA0YvRgtGMXCIpO1xyXG4gICAgICAgICAgICAkdGhpcy5zaWJsaW5ncygnLmMtY2FyZC1ldmVudC10aW1lbGlzdCcpLmFkZENsYXNzKCdzaG93LWl0ZW0tYWxsJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICR0aGlzLmh0bWwoXCLQv9C+0LrQsNC30LDRgtGMINCy0YHQtVwiKTtcclxuICAgICAgICAgICAgJHRoaXMuc2libGluZ3MoJy5jLWNhcmQtZXZlbnQtdGltZWxpc3QnKS5yZW1vdmVDbGFzcygnc2hvdy1pdGVtLWFsbCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VQYXJ0eVRpdGxlUG9wdXAgKCl7XHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qcy1wYXJ0eS1vcmRlcicsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBsZXR0ZXIgPSAkKHRoaXMpLmRhdGEoJ25hbWUnKSxcclxuICAgICAgICAgICAgICAgIHRpdGxlID0gJCgnLnBvcHVwLXBhcnR5LW9yZGVyIC5wb3B1cC10aXRsZScpLmZpbmQoJ3NwYW4nKTtcclxuXHJcbiAgICAgICAgICAgIHRpdGxlLnRleHQoJycpO1xyXG4gICAgICAgICAgICB0aXRsZS5hcHBlbmQobGV0dGVyKTtcclxuICAgICAgICAgICAgJCgnI3RpdGxlLXBhcnR5LW9yZGVyJykudmFsKGxldHRlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvLyBjaGFuZ2VQYXJ0eVRpdGxlUG9wdXAoKTtcclxuXHJcblxyXG5cclxuICAgIC8v0L/QvtGP0LLQu9C10L3QuNC1INC80L7QsdC40LvRjNC90L7Qs9C+INGH0LXQutCwINCyINC60L7RgNC30LjQvdC1XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmJhc2tldF9fY2hlY2stbW9iaWxlJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5iYXNrZXRfX2FzaWRlJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/QuNC30LzQtdC90LXQvdC40LUg0LIg0L7RhNC+0YDQvNC70LXQvdC40Lgg0LfQsNC60LDQt9CwINC90LAg0LTRgNGD0LPQvtCz0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJyNvcmRlci11c2VyX290aGVyLCAub3JkZXItdXNlcl9vdGhlcicsICBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKCQodGhpcykucHJvcCggXCJjaGVja2VkXCIgKSl7XHJcbiAgICAgICAgICAgICQoJy5vcmRlci11c2VyX19saXN0JykuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xyXG4gICAgICAgICAgICAkKCcub3JkZXItdXNlcl9fb3RoZXItZm9ybScpLmNzcygnZGlzcGxheScsJ2ZsZXgnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnI29yZGVyLXVzZXJfYXV0aCwgI29yZGVyLXVzZXJfYXV0aC0xJywgZnVuY3Rpb24oKXtcclxuICAgICAgICBpZigkKHRoaXMpLnByb3AoIFwiY2hlY2tlZFwiICkpe1xyXG4gICAgICAgICAgICAkKCcub3JkZXItdXNlcl9fbGlzdCcpLmNzcygnZGlzcGxheScsJ2ZsZXgnKTtcclxuICAgICAgICAgICAgJCgnLm9yZGVyLXVzZXJfX290aGVyLWZvcm0nKS5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy/RgNC10LTQsNC60YLQuNGA0L7QstCw0YLRjCDQv9GA0L7RhNC40LvRjFxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5say1wcm9maWxlX19saW5rLWVkaXQnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubGstcHJvZmlsZV9faXRlbScpXHJcbiAgICAgICAgICAgIC5jaGlsZHJlbignZGl2OmZpcnN0LWNoaWxkJylcclxuICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5say1wcm9maWxlX19pdGVtJylcclxuICAgICAgICAgICAgLmNoaWxkcmVuKCcubGstcHJvZmlsZS1lZGl0OmVxKDApJylcclxuICAgICAgICAgICAgLnNob3coKTtcclxuXHJcbiAgICAgICAgaW5pdFByb2ZpbGVQbHVnaW4oKTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0UHJvZmlsZVBsdWdpbigpe1xyXG4gICAgICAgIC8v0LzQsNGB0LrQsFxyXG4gICAgICAgICQoJy5qcy1pbnB1dC0tdGVsJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICAgICAkKCcuanMtaW5wdXQtLWRhdGUnKS5tYXNrKCcwMC4wMC4wMDAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG5cclxuICAgICAgICAvKtGB0LXQu9C10LrRgiovXHJcbiAgICAgICAgJCgnLmxrLXByb2ZpbGUtZWRpdF9fY2hpbGQtbGlzdCAuanMtc2VsZWN0LS1jaGlsZCcpLlN1bW9TZWxlY3QoKTtcclxuICAgICAgICBjaGFuZ2VTZWxlY3RGYWNlKCcubGstcHJvZmlsZS1lZGl0X19jaGlsZC1saXN0IC5qcy1zZWxlY3QtLWNoaWxkJywgJ00nLCdpY29uLWJveS1zbWlsaW5nJywnaWNvbi1naXJsLXNtaWxpbmcnKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5say1wcm9maWxlX19lZGl0IC5jLWJ1dHRvbl9fbWVkaXVtJywgZnVuY3Rpb24oKXtcclxuICAgIC8vICAgICAkKHRoaXMpLnBhcmVudHMoJy5say1wcm9maWxlLWVkaXQnKS5oaWRlO1xyXG4gICAgLy8gICAgICQodGhpcykucGFyZW50cygnLmxrLXByb2ZpbGUtaXRlbScpLmNoaWxkcmVuKCdkaXY6Zmlyc3QtY2hpbGQnKS5zaG93KCk7XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvKtGB0LvQsNC50LTQtdGAINC00LvRjyDRgdGC0YDQsNC90LjRhtGLINCS0YvQv9GD0YHQutC90YvQtSovXHJcbiAgICAkKCcuZ3JhZHVhdGlvbi1wYXJ0eS1iYW5uZXJfX3NsaWRlcicpLm93bENhcm91c2VsKHtcclxuICAgICAgICBsb29wOnRydWUsXHJcbiAgICAgICAgaXRlbXM6IDEsXHJcbiAgICAgICAgYXV0b2hlaWdodDogdHJ1ZSxcclxuICAgICAgICBuYXY6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy/Qv9C70LDQstC90YvQuSDRj9C60L7RgNGMXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxUb0FuY2hvciAoZWxlbSkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgZWxlbSwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBpZCAgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgICAgIG1lbnVIZWlnaHQgPSAwLFxyXG4gICAgICAgICAgICAgICAgdG9wID0gJChpZCkub2Zmc2V0KCkudG9wLFxyXG4gICAgICAgICAgICAgICAgdG9wSW5kZW50ID0gdG9wIC0gbWVudUhlaWdodDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3RvcDogJyArIHRvcCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0b3BJbmRlbnQ6ICcgKyB0b3BJbmRlbnQpO1xyXG4gICAgICAgICAgICAkKCdodG1sJykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiB0b3BJbmRlbnR9LCAxMDAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgJCgnLmdyYWR1YXRpb24tcGFydHktYmFubmVyX19idG4nKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9ICQoJCh0aGlzKS5hdHRyKCdocmVmJykpO1xyXG4gICAgICAgIGlmKHRhcmdldC5sZW5ndGgpe1xyXG5cclxuICAgICAgICAgICAgdmFyIGhlaWdodEhlYWRlciA9ICQoJy5oZWFkZXInKS5oZWlnaHQoKTtcclxuICAgICAgICAgICAgdmFyIHNjcm9sbFRvID0gdGFyZ2V0Lm9mZnNldCgpLnRvcCAtICgraGVpZ2h0SGVhZGVyICsgMTAwKTtcclxuICAgICAgICAgICAgJCgnYm9keSwgaHRtbCcpLmFuaW1hdGUoe3Njcm9sbFRvcDogc2Nyb2xsVG8rJ3B4J30sIDgwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gJCgnI2V4Y3Vyc2lvbi1wcm9ncmFtLWJ0bicpLmNsaWNrKGZ1bmN0aW9uKGUpe1xyXG4gICAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIC8vICAgICB2YXIgdGFyZ2V0ID0gJCgkKHRoaXMpLmF0dHIoJ2hyZWYnKSk7XHJcbiAgICAvLyAgICAgaWYodGFyZ2V0Lmxlbmd0aCl7XHJcbiAgICAvL1xyXG4gICAgLy8gICAgICAgICB2YXIgaGVpZ2h0SGVhZGVyID0gJCgnLmhlYWRlcicpLmhlaWdodCgpO1xyXG4gICAgLy8gICAgICAgICB2YXIgc2Nyb2xsVG8gPSB0YXJnZXQub2Zmc2V0KCkudG9wIC0gKCtoZWlnaHRIZWFkZXIgKyAxMDApO1xyXG4gICAgLy8gICAgICAgICAkKCdib2R5LCBodG1sJykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiBzY3JvbGxUbysncHgnfSwgODAwKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvLyBzY3JvbGxUb0FuY2hvcignLmdyYWR1YXRpb24tcGFydHktYmFubmVyX19idG4nKTtcclxuXHJcblxyXG4gICAgLy/Qv9C+0LjRgdC6INC/0L4g0LrQsNGE0LUg0L3QsCDRgdGC0YDQsNC90LjRhtC1INGBINGC0L7RgNGC0LDQvNC4INC4INCyINC+0YTQvtGA0LzQu9C10L3QuNC4INC30LDQutCw0LfQsFxyXG4gICAgJChkb2N1bWVudCkub24oJ2tleXVwIGNoYW5nZScsICcuYy1zZWFyY2gtcGFnZV9faW5wdXQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNoZWNrQWxsKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBjaGVja0FsbCgpIHtcclxuICAgICAgICAkKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCBsaScpLmVhY2goZnVuY3Rpb24oaSwgaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAkKHRoaXMpLmZpbmQoJy5vcmRlci1yYWRpbycpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJCgnLmMtc2VhcmNoLXBhZ2VfX2lucHV0JykudmFsKCkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIGlmICggdmFsdWUgPj0gMCApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgLy8gJCh0aGlzKS5hZGRDbGFzcygnanMtb3JkZXItZGVsaXZlcnktYWRkcmVzc19fc2hvdycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKHRoaXMpLnJlbW92ZUNsYXNzKCdqcy1vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19zaG93Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGVja0FsbCgpO1xyXG5cclxuXHJcblxyXG4gICAgLy/QvtGC0L/QuNGB0LDRgtGM0YHRjyDQvtGCINC/0L7QtNC/0LjRgdC60Lgg0LIg0LvQuNGH0L3QvtC8INC60LDQsdC40L3QtdGC0LVcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjbGstcHJvZmlsZS1zdWJzY3JpcHRpb25fdW5zdWJzY3JpYmUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLmxrLXByb2ZpbGUgLmxrLXByb2ZpbGUtc3Vic2NyaXB0aW9uX19ib3gnKS5oaWRlKCk7XHJcbiAgICAgICAgJCgnLmxrLXByb2ZpbGUgLmxrLXByb2ZpbGUtc3Vic2NyaXB0aW9uLWRlbCcpLnNob3coKTtcclxuXHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjbGstcHJvZmlsZS1zdWJzY3JpcHRpb24tZGVsX19jYW5jZWwnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLmxrLXByb2ZpbGUgLmxrLXByb2ZpbGUtc3Vic2NyaXB0aW9uLWRlbCcpLmhpZGUoKTtcclxuICAgICAgICAkKCcubGstcHJvZmlsZSAubGstcHJvZmlsZS1zdWJzY3JpcHRpb25fX2JveCcpLnNob3coKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v0LjQt9C80LXQvdC90LXQuNC1INC/0LDRgNC+0LvRjyDQsiDQv9GA0L7RhNC40LvQtSDQu9C40YfQvdC+0LPQviDQutCw0LHQuNC90LXRgtCwXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2xrLXByb2ZpbGVfX2NoYW5nZS1wYXNzJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcylcclxuICAgICAgICAucGFyZW50cygnLmxrLXByb2ZpbGUtdXNlcicpXHJcbiAgICAgICAgLmNzcygnZGlzcGxheScsICdub25lJylcclxuICAgICAgICAuc2libGluZ3MoJy5say1wcm9maWxlLWVkaXRfX3Bhc3MnKVxyXG4gICAgICAgIC5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vINC40LfQvNC10L3QtdC90LjQtSDQv9C+0LTQv9C40YHQutC4INCyINC/0YDQvtGE0LjQu9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG4gICAgJCgnI2xrLXByb2ZpbGVfY2hhbmdlLXN1YnNjcmlwdGlvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpXHJcbiAgICAgICAgLnBhcmVudHMoJy5say1wcm9maWxlLXN1YnNjcmlwdGlvbl9fYm94JylcclxuICAgICAgICAuY3NzKCdkaXNwbGF5JywgJ25vbmUnKVxyXG4gICAgICAgIC5zaWJsaW5ncygnLmxrLXByb2ZpbGUtZWRpdCcpXHJcbiAgICAgICAgLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgfSk7XHJcbiAgICAvLyDQvtGC0LzQtdC90LAg0LjQt9C80LXQvdC10L3QuNGPINC/0L7QtNC/0LjRgdC60Lgg0LIg0L/RgNC+0YTQuNC70LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAkKCcjbGstcHJvZmlsZV9jYW5jZWwtY2hhbmdlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcylcclxuICAgICAgICAucGFyZW50cygnLmxrLXByb2ZpbGUtZWRpdCcpXHJcbiAgICAgICAgLmNzcygnZGlzcGxheScsICdub25lJylcclxuICAgICAgICAuc2libGluZ3MoJy5say1wcm9maWxlLXN1YnNjcmlwdGlvbl9fYm94JylcclxuICAgICAgICAuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9C00L7QsdCw0LLQu9GP0LXQvCDRjdC70LXQvNC10L3RgtGLINCyINC/0YDQvtGE0LjQu9C1INC70LjRh9C90L7Qs9C+INC60LDQsdC40L3QtdGC0LBcclxuICAgIC8v0LTQvtCx0LDQstC70LXQvdC40LUg0LLRgtC+0YDQvtCz0L4gZW1haWxcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2pzLWxrLXByb2ZpbGVfX2FkZC1lbWFpbCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAucGFyZW50cygnLmMtZm9ybV9faXRlbScpXHJcbiAgICAgICAgICAgIC5zaWJsaW5ncygnLmxrLXByb2ZpbGUtZWRpdF9fY29weScpXHJcbiAgICAgICAgICAgIC5jbG9uZSgpLmFwcGVuZFRvKFwiLmxrLXByb2ZpbGUtZWRpdF9fZW1haWwtbGlzdFwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjanMtbGstcHJvZmlsZV9fYWRkLXRlbCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAucGFyZW50cygnLmMtZm9ybV9faXRlbScpXHJcbiAgICAgICAgICAgIC5zaWJsaW5ncygnLmxrLXByb2ZpbGUtZWRpdF9fY29weScpXHJcbiAgICAgICAgICAgIC5jbG9uZSgpLmFwcGVuZFRvKFwiLmxrLXByb2ZpbGUtZWRpdF9fdGVsLWxpc3RcIik7XHJcbiAgICAgICAgJCgnLmpzLWlucHV0LS10ZWwnKS5tYXNrKCcrNygwMDApMDAwLTAwLTAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQtNC+0LHQsNCy0LvQtdC90LjQtSDQv9C+0LvQtdC5INCyINC60L7QvdGC0LDQutGC0LDRhSDQm9CaKi9cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjanMtbGstcHJvZmlsZV9fYWRkLWluZm8tYWxsJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnY29ycmVjdCcpO1xyXG4gICAgICAgICQodGhpcylcclxuICAgICAgICAgICAgLnBhcmVudHMoJy5say1wcm9maWxlLWVkaXRfX2xpbmUnKVxyXG4gICAgICAgICAgICAuc2libGluZ3MoJy5say1wcm9maWxlLWVkaXRfX2NvcHknKVxyXG4gICAgICAgICAgICAuY2xvbmUoKS5hcHBlbmRUbyhcIi5say1wcm9maWxlLWVkaXRfX2NvbnRhY3QtbGlzdFwiKTtcclxuICAgICAgICAvLyAkKCcuanMtaW5wdXQtLWRhdGUnKS5tYXNrKCcrNygwMDApMDAwLTAwLTAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG5cclxuICAgICAgICAvLyBpbml0UHJvZmlsZVBsdWdpbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQtNC+0LHQsNCy0LvQtdC90LjQtSDRgNC10LHQtdC90LrQsCDQsiDQv9GA0L7RhNC40LvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8qL1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNqcy1say1wcm9maWxlX19hZGQtY2hpbGQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcylcclxuICAgICAgICAgICAgLnBhcmVudHMoJy5say1wcm9maWxlLWVkaXRfX2xpbmUnKVxyXG4gICAgICAgICAgICAuc2libGluZ3MoJy5say1wcm9maWxlLWVkaXRfX2NvcHknKVxyXG4gICAgICAgICAgICAuY2xvbmUoKS5hcHBlbmRUbyhcIi5say1wcm9maWxlLWVkaXRfX2NoaWxkLWxpc3RcIik7XHJcbiAgICAgICAgJCgnLmpzLWlucHV0LS1kYXRlJykubWFzaygnMDAuMDAuMDAwMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuXHJcbiAgICAgICAgaW5pdFByb2ZpbGVQbHVnaW4oKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2pzLWxrLXByb2ZpbGUtZWRpdF9fYWRkcmVzcycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKVxyXG4gICAgICAgICAgICAucGFyZW50cygnLmxrLXByb2ZpbGUtZWRpdF9fbGluZScpXHJcbiAgICAgICAgICAgIC5zaWJsaW5ncygnLmxrLXByb2ZpbGUtZWRpdF9fY29weScpXHJcbiAgICAgICAgICAgIC5jbG9uZSgpLmFwcGVuZFRvKFwiLmxrLXByb2ZpbGUtZWRpdF9fYWRkcmVzcy1saXN0XCIpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYy1mb3JtX19kZWwnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciAkZWxlbV9pdGVtID0gJCh0aGlzKS5wYXJlbnRzKCcuYy1mb3JtX19pdGVtJyk7XHJcbiAgICAgICAgdmFyICRlbGVtZW50ID0gICQodGhpcykucGFyZW50cygnLmxrLXByb2ZpbGUtZWRpdF9fY29weScpO1xyXG4gICAgICAgICRlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICRlbGVtX2l0ZW0ucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9GB0LrRgNGL0YLRjC/Qv9C+0LrQsNC30LDRgtGMINC30LDQutCw0Lcg0LIg0LjRgdGC0L7RgNC40Lgg0LfQsNC60LDQt9C+0LJcclxuICAgICQoJy5say1oaXN0b3J5LWl0ZW1fX2hlYWRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5say1oaXN0b3J5LWl0ZW0nKS50b2dnbGVDbGFzcygnbGstaGlzdG9yeS1pdGVtX19ib2R5LXNob3cnKTtcclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcubGstaGlzdG9yeS1pdGVtX19ib2R5Jykuc2xpZGVUb2dnbGUoMzAwKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL9C+0YfQuNGB0YLQuNGC0Ywg0YTQvtGA0LzRgyDQv9C+0LjRgdC60LBcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcub3JkZXItZGVsaXZlcnktc2VhcmNoX19jbGVhcicsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5vcmRlci1kZWxpdmVyeS1zZWFyY2hfX2l0ZW0nKS5zaWJsaW5ncygpLmZpbmQoJ2lucHV0JykudmFsKCcnKTtcclxuICAgICAgICAkKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fYWxsJykucmVtb3ZlQ2xhc3MoJ3Nob3ctaXRlbS1hbGwnKTtcclxuXHJcbiAgICAgICAgLy8gc2hvd0RlbGl2ZXJ5QWRkcmVzc0Nha2UoJy5vcmRlci1kZWxpdmVyeS1hZGRyZXNzX19pdGVtJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL9C/0L7QutCw0LfQsNGC0Ywg0LLRgdC1INCw0LTRgNC10YHQsCDQutCw0YTQtSDQsiDQt9Cw0LrQsNC30LVcclxuICAgIGZ1bmN0aW9uIHNob3dEZWxpdmVyeUFkZHJlc3NDYWtlIChlbGVtKXtcclxuICAgICAgICAkKGVsZW0pLmVhY2goZnVuY3Rpb24oaSwgZWxlbSl7XHJcbiAgICAgICAgICAgIGkgPCA2ID8gJChlbGVtKS5zaG93KCkgOiAkKGVsZW0pLmhpZGUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIHNob3dEZWxpdmVyeUFkZHJlc3NDYWtlKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19faXRlbScpO1xyXG5cclxuXHJcblxyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fYWxsJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCgnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2FsbCcpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgdmFyIHRleHRCdG4gPSAkdGhpcy5odG1sKCk7XHJcbiAgICAgICAgaWYodGV4dEJ0biA9PSBcItC/0L7QutCw0LfQsNGC0Ywg0LLRgdC1XCIpe1xyXG4gICAgICAgICAgICAkdGhpcy5odG1sKFwi0YHQutGA0YvRgtGMXCIpO1xyXG4gICAgICAgICAgICAkdGhpcy5zaWJsaW5ncygnLm9yZGVyLWRlbGl2ZXJ5LWFkZHJlc3NfX2xpc3QnKS5hZGRDbGFzcygnc2hvdy1pdGVtLWFsbCcpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkdGhpcy5odG1sKFwi0L/QvtC60LDQt9Cw0YLRjCDQstGB0LVcIik7XHJcbiAgICAgICAgICAgICR0aGlzLnNpYmxpbmdzKCcub3JkZXItZGVsaXZlcnktYWRkcmVzc19fbGlzdCcpLnJlbW92ZUNsYXNzKCdzaG93LWl0ZW0tYWxsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8v0YHRgtGA0LDQvdC40YbQsCDQntGE0L7RgNC80LvQtdC90LjQtSDQt9Cw0LrQsNC30LAuINCf0YDQuCDRhNC+0LrRg9GB0LUg0L3QsCDQuNC90L/Rg9GCINGBINCw0LTRgNC10YHQvtC8LCDQtNC10LvQsNC10Lwg0LDQutGC0LjQstC90YvQuSByYWRpbyBidXR0b25cclxuICAgICQoJy5vcmRlci1kZWxpdmVyeS1jdXN0b21fX2l0ZW0gaW5wdXQsIC5vcmRlci1kZWxpdmVyeS1jdXN0b21fX2l0ZW0gdGV4dGFyZWEnKS5mb2N1cyhmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgLy8gdmFyICR0aGlzUmFkaW9JbnB1dCA9ICQodGhpcykucGFyZW50cygnbGFiZWwnKS5zaWJsaW5ncygnaW5wdXRbdHlwZT1cInJhZGlvXCJdJyk7XHJcbiAgICAgICAgJHRoaXMucGFyZW50cygnbGFiZWwnKS5zaWJsaW5ncygnaW5wdXRbdHlwZT1cInJhZGlvXCJdJykucHJvcCggXCJjaGVja2VkXCIsdHJ1ZSk7XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAvL9GB0LLQtdGA0L3Rg9GC0Ywv0YDQsNC30LLQtdGA0L3Rg9GC0Ywg0LHQu9C+0Log0LIg0LrQvtGA0LfQuNC90LVcclxuICAgICQoJy5iYXNrZXQtaXRlbV9faGVhZGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgJHRoaXMgPSAgJCh0aGlzKTtcclxuICAgICAgICAkdGhpcy5wYXJlbnRzKCcuYmFza2V0LWl0ZW0nKS50b2dnbGVDbGFzcygnYmFza2V0LWJvZHlfX3Nob3cnKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIH0sIDE1MCk7XHJcblxyXG4gICAgICAgICQodGhpcykuc2libGluZ3MoJy5iYXNrZXQtaXRlbV9fYm9keScpLnNsaWRlVG9nZ2xlKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuYmFza2V0LW1peF9faXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICQoJy5iYXNrZXQtaXRlbV9faGVhZGVyJykucGFyZW50cygnLmJhc2tldC1pdGVtJykuYWRkQ2xhc3MoJ2Jhc2tldC1ib2R5X19zaG93Jyk7XHJcbiAgICAgICAgJCgnLmJhc2tldC1pdGVtX19ib2R5Jykuc2xpZGVEb3duKDEwMCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIC8q0L/QvtC60LDQt9GL0LLQsNC10Lwg0L/QvtC/0LDQvyDQvdCwINGB0YLRgNCw0L3QuNGG0LUg0KHQvtC30LTQsNGC0LXQu9C4INCQ0L3QtNC10YDRgdC+0L0qL1xyXG4gICAgJCgnLnBob3RvLXBvaW50X19pY29uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgc3RyID0gJCh0aGlzKS5zaWJsaW5ncygnLnBob3RvLXBvaW50X19kZXNjcmlwdGlvbicpLmZpbmQoJ3NwYW4nKS50ZXh0KCkudHJpbSgpLFxyXG4gICAgICAgICAgICBhcnIgPSBzdHIuc3BsaXQoJyAnKSxcclxuICAgICAgICAgICAgbmFtZSA9IGFyclswXSArICcgJyArIGFyclsxXSxcclxuICAgICAgICAgICAgZGVzYyA9ICcnO1xyXG4gICAgICAgIGFyci5zcGxpY2UoMCwgMik7XHJcbiAgICAgICAgZGVzYyA9IGFyci5qb2luKCcgJyk7XHJcbiAgICAgICAgJCgnLmNyZWF0b3JzIC5wb3B1cC10aXRsZScpLmZpbmQoJ3NwYW4nKS50ZXh0KG5hbWUpO1xyXG4gICAgICAgICQoJy5jcmVhdG9ycyAucG9wdXAtYm9keScpLmZpbmQoJ3AnKS50ZXh0KGRlc2MpO1xyXG4gICAgICAgIHZhciBwb3B1cCA9ICQoJy5jcmVhdG9ycyAucG9wdXAnKTtcclxuICAgICAgICBwb3B1cC5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgIHBvcHVwLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuY3JlYXRvcnMgLnBvcHVwLWNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAkKCcuY3JlYXRvcnMgLnBvcHVwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0YTQsNCx0YDQuNC60LAg0YHRh9Cw0YHRgtGM0Y8sINC60LvQuNC6INC/0L4g0L/QvtC40L3RgtGDKi9cclxuICAgICQoJy5mYWN0b3J5LXBvaW50X19pbWcnKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICQoJy5wb3B1cCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnLnBvcHVwJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5mYWN0b3J5LXBvaW50IC5wb3B1cC1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcucG9wdXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQv9C+0LrQsNC30YvQstCw0LXQvCDQvNCw0LvQtdC90YzQutC40Lkg0LHQu9C+0Log0YEg0LLRi9Cx0YDQsNC90L3Ri9C80Lgg0YLQvtCy0LDRgNCw0LzQuCDQsiDQutCw0YDRgtC+0YfQutC1INGC0L7QstCw0YDQsCAo0LzQvtCx0LjQu9GM0L3QsNGPINCy0LXRgNGB0LjRjykqL1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wb3B1cC1wcm9kdWN0X19jaGVjay1tb2JpbGUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnBvcHVwLXByb2R1Y3QgLnBvcHVwLW1pbmknKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuICAgIC8q0LfQsNC60YDRi9Cy0LDQtdC8INC80LDQu9C10L3RjNC60LjQuSDQv9C+0L/QsNC/INGBINGC0L7QstCw0YDQsNC80LgqL1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wb3B1cC1wcm9kdWN0X19jaGVjay1jbG9zZScsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcucG9wdXAtcHJvZHVjdCAucG9wdXAtbWluaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5wb3B1cC1taW5pJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8q0L/QvtC60LDQt9GL0LLQsNC10Lwg0LrQsNGC0LXQs9C+0YDQuNC4INC80LXQvdGOINCyINC60LDRgtCw0LvQvtCz0LUqL1xyXG4gICAgdmFyIGZpbHRlckJhZ2UgPSAkKCcuZmlsdGVyLWJhZ2UnKTtcclxuXHJcbiAgICBmaWx0ZXJCYWdlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgICAgICAkKCcuY2F0YWxvZy1ib2R5JykudG9nZ2xlQ2xhc3MoJ3Nob3ctY2F0ZWdvcnknKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdqcy1oaWRlLXdvcmQnKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy5maWx0ZXItYmFnZV9fdGl0bGUgc3BhbicpLmh0bWwoJ9Cf0L7QutCw0LfQsNGC0YwnKTtcclxuICAgICAgICAkKCcuanMtaGlkZS13b3JkJykuZmluZCgnLmZpbHRlci1iYWdlX190aXRsZSBzcGFuJykuaHRtbCgn0KHQutGA0YvRgtGMJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuZmlsdGVyLWhvbGRfX2Nsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGZpbHRlckJhZ2Uuc2hvdygpO1xyXG4gICAgICAgICQoJy5jYXRhbG9nLWJvZHknKS5yZW1vdmVDbGFzcygnc2hvdy1jYXRlZ29yeScpO1xyXG4gICAgICAgIGZpbHRlckJhZ2UudG9nZ2xlQ2xhc3MoJ2pzLWhpZGUtd29yZCcpO1xyXG4gICAgICAgICQoJy5maWx0ZXItYmFnZV9fdGl0bGUgc3BhbicpLmh0bWwoJ9Cf0L7QutCw0LfQsNGC0YwnKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAgICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4gICAgXHRpZih3aW5kb3dXaWR0aCA8PSA3MzApe1xyXG4gICAgXHQgICAgJCgnLmZpbHRlci1ob2xkX19jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHQgICAgICAgICQodGhpcykucGFyZW50cygnLmZpbHRlci1ob2xkJykuc2xpZGVVcCg2MDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZih3aW5kb3dXaWR0aCA8PSA3MzApe1xyXG4gICAgICAgICQoJy5maWx0ZXItaG9sZF9fY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5maWx0ZXItaG9sZCcpLnNsaWRlVXAoNjAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgLyrRgdC70LDQudC00LXRgCDQutCw0YDRg9GB0LXQu9GMKi9cclxuICAgICQoJy5jYXJvdXNlbC1zbGlkZXInKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgbG9vcDp0cnVlLFxyXG4gICAgICAgIC8vIG5hdjp0cnVlLFxyXG4gICAgICAgIG1hcmdpbjoyMCxcclxuICAgICAgICAvLyBpdGVtczogNCxcclxuICAgICAgICAvLyBjZW50ZXI6IHRydWUsXHJcbiAgICAgICAgcmVzcG9uc2l2ZUNsYXNzOiB0cnVlLFxyXG4gICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAwOntcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjFcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNTQwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgNzgwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTIwMDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczo0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDE2MDA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6NVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmMtY2FyZC1wcm9kdWN0X19zbGlkZXInKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgbG9vcDp0cnVlLFxyXG4gICAgICAgIC8vIG5hdjp0cnVlLFxyXG4gICAgICAgIG1hcmdpbjoyMCxcclxuICAgICAgICAvLyBpdGVtczogNCxcclxuICAgICAgICAvLyBjZW50ZXI6IHRydWUsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTp7XHJcbiAgICAgICAgICAgIDA6e1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6MVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA2MDA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6MlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxMjAwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjNcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTYwMDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczozXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtGB0LvQsNC50LTQtdGAINC60LDRgNGD0YHQtdC70YwqL1xyXG4gICAgJCgnLnB1YmxpY2F0aW9ucy1zbGlkZXInKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgbG9vcDp0cnVlLFxyXG4gICAgICAgIG5hdjp0cnVlLFxyXG4gICAgICAgIG1hcmdpbjoyMCxcclxuICAgICAgICBpdGVtczogNyxcclxuICAgICAgICAvLyBjZW50ZXI6IHRydWUsXHJcbiAgICAgICAgc3RhZ2VQYWRkaW5nOiAxMCxcclxuICAgICAgICByZXNwb25zaXZlQ2xhc3M6IHRydWUsXHJcbiAgICAgICAgcmVzcG9uc2l2ZTp7XHJcbiAgICAgICAgICAgIDA6e1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6MVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA0ODA6e1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6MlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA3ODA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6M1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICA5ODA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6NFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAxMjAwOntcclxuICAgICAgICAgICAgICAgIG5hdjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGl0ZW1zOjRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTYwMDp7XHJcbiAgICAgICAgICAgICAgICBuYXY6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpdGVtczo3XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDE5MjA6e1xyXG4gICAgICAgICAgICAgICAgbmF2OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaXRlbXM6N1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgICQoJyNmaWx0ZXItY2FmZS1hbGwsICNmaWx0ZXItY2FmZV9fbW9iaWxlLWFsbCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICRlbGVtID0gJCgnLmZpbHRlci1pdGVtJyk7XHJcbiAgICAgICAgaWYoJHRoaXMuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgJGVsZW0uYWRkQ2xhc3MoJ2Rpc2FibGUnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgJGVsZW0ucmVtb3ZlQ2xhc3MoJ2Rpc2FibGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcudG9wLW1lc3NhZ2VfX2Nsb3NlJykub24oJ2NsaWNrJyxmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCgnLnRvcC1tZXNzYWdlJykuaGlkZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrQstC/0LjRgdGL0LLQsNC10LwgaW1nINCyINCx0LvQvtC6INC/0YDQuCDQu9GO0LHQvtC8INGA0LDQt9C80LXRgNC1INC40LfQvtCx0YDQsNC20LXQvdC40Y8qL1xyXG4gICAgZnVuY3Rpb24gZml4X3NpemUoKSB7XHJcbiAgICAgICAgdmFyIGltYWdlcyA9ICQoJy5jLXBpY19saW5rIGltZycpO1xyXG4gICAgICAgIGltYWdlcy5lYWNoKHNldHNpemUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRzaXplKCkge1xyXG4gICAgICAgICAgICB2YXIgaW1nID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGltZ19kb20gPSBpbWcuZ2V0KDApLFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gaW1nLnBhcmVudHMoJy5jLXBpY19saW5rJyk7XHJcbiAgICAgICAgICAgIGlmIChpbWdfZG9tLmNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICByZXNpemUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIGltZy5vbmUoJ2xvYWQnLCByZXNpemUpO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzaXplKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChjb250YWluZXIud2lkdGgoKSAvIGNvbnRhaW5lci5oZWlnaHQoKSkgPCAoaW1nX2RvbS53aWR0aCAvIGltZ19kb20uaGVpZ2h0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy53aWR0aCgnYXV0bycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5oZWlnaHQoJzEwMCUnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpbWcuaGVpZ2h0KCdhdXRvJyk7XHJcbiAgICAgICAgICAgICAgICBpbWcud2lkdGgoJzEwMCUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICAvLyAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZpeF9zaXplKTtcclxuICAgIC8vIGZpeF9zaXplKCk7XHJcbiAgICAvL1xyXG4gICAgLy8gaWYgKHR5cGVvZiBfY3VycmVudCAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgLy8gICAgIHZhciBtYXBJbWFnZXMgPSBfY3VycmVudDtcclxuICAgIC8vIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgdmFyIG1hcEltYWdlcyA9ICQoJy5jLWNhcmQtY2FmZV9faW1nIGltZycpO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8q0LXRgdC70Lgg0LIg0LPQvtGA0L7QtNC1INC+0LTQvdC+INC60LDRhNC1LCDQtNC10LvQsNC10Lwg0LXQs9C+IGlubGluZSovXHJcbiAgICAkKCcuY2FmZS1saXN0X19jaXR5JykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGNvdW50RWxlbSA9ICR0aGlzLmZpbmQoJy5jLWNvbC02JykubGVuZ3RoO1xyXG4gICAgICAgIGlmKGNvdW50RWxlbSA9PSAxKXtcclxuICAgICAgICAgICAgJCgkdGhpcykuYWRkQ2xhc3MoJ2NhZmUtbGlzdF9fb25lJyk7XHJcblxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkKCR0aGlzKS5yZW1vdmVDbGFzcygnY2FmZS1saXN0X19vbmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIC8v0L/QvtC00LrQu9GO0YfQtdC90LjQtSDRgtGD0LvRgtC40L/QsFxyXG4gICAgJCggJy50b29sdGlwJyApLnRvb2x0aXBzdGVyKHtcclxuICAgICAgICBhbmltYXRpb246ICdncm93JyxcclxuICAgICAgICBkZWxheTogMTAwLFxyXG4gICAgICAgIHRyaWdnZXIgOiAnY3VzdG9tJyAsXHJcbiAgICAgICAgbWF4V2lkdGg6IDUwMCxcclxuICAgICAgICBjb250ZW50QXNIVE1MOiB0cnVlLFxyXG4gICAgICAgIGludGVyYWN0aXZlOiB0cnVlLFxyXG4gICAgICAgIHRyaWdnZXJPcGVuIDoge1xyXG4gICAgICAgICAgICBtb3VzZWVudGVyIDogdHJ1ZSAsXHJcbiAgICAgICAgICAgIHRvdWNoc3RhcnQgOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0cmlnZ2VyQ2xvc2UgOiB7XHJcbiAgICAgICAgICAgIG1vdXNlbGVhdmUgOiB0cnVlLFxyXG4gICAgICAgICAgICBjbGljayA6IHRydWUgLFxyXG4gICAgICAgICAgICBzY3JvbGwgOiB0cnVlICxcclxuICAgICAgICAgICAgdGFwIDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL9C/0L7QtNC60LvRjtGH0LXQvdC40LUg0YLRg9C70YLQuNC/0LBcclxuICAgICQoICcudG9vbHRpcC1jYXRhbG9nJyApLnRvb2x0aXBzdGVyKHtcclxuICAgICAgICBhbmltYXRpb246ICdncm93JyxcclxuICAgICAgICBkZWxheTogMTAwLFxyXG4gICAgICAgIHRyaWdnZXIgOiAnY2xpY2snICxcclxuICAgICAgICBtYXhXaWR0aDogNTAwLFxyXG4gICAgICAgIGZ1bmN0aW9uQmVmb3JlOiBmdW5jdGlvbihpbnN0YW5jZSwgaGVscGVyKXtcclxuICAgICAgICAgICAgaWYgKGhlbHBlci5ldmVudC50eXBlID09ICdjbGljaycpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmNvbnRlbnQoJ1lvdSBvcGVuZWQgbWUgd2l0aCBhIHJlZ3VsYXIgbW91c2UgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lmdvb2dsZS5ydS8/aGw9cnVcIj5jbGljayA6KTwvYT4uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5jb250ZW50KCdZb3Ugb3BlbmVkIG1lIGJ5IGEgdGFwIG9uIHRoZSBzY3JlZW4gOiknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29udGVudEFzSFRNTDogdHJ1ZSxcclxuICAgICAgICBpbnRlcmFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICB0cmlnZ2VyT3BlbiA6IHtcclxuICAgICAgICAgICAgbW91c2VlbnRlciA6IHRydWUgLFxyXG4gICAgICAgICAgICB0b3VjaHN0YXJ0IDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJpZ2dlckNsb3NlIDoge1xyXG4gICAgICAgICAgICBtb3VzZWxlYXZlIDogdHJ1ZSxcclxuICAgICAgICAgICAgY2xpY2sgOiB0cnVlICxcclxuICAgICAgICAgICAgc2Nyb2xsIDogdHJ1ZSAsXHJcbiAgICAgICAgICAgIHRhcCA6IHRydWVcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICQoXCIub3dsLWNhcm91c2VsXCIpLm93bENhcm91c2VsKHtcclxuICAgICAgICBpdGVtczogMSxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIGNlbnRlcjogdHJ1ZSxcclxuICAgICAgICBhdXRvSGVpZ2h0OnRydWUsXHJcbiAgICAgICAgbmF2OiB0cnVlXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJCgnLmNhZmUtZm90b3JhbWEnKS5vbignZm90b3JhbWE6cmVhZHknLCBmdW5jdGlvbiAoZSwgZm90b3JhbWEpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhlLnR5cGUpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCBmb3RvcmFtYS5hY3RpdmVJbmRleCk7XHJcbiAgICAgICAgdmFyIHBhdGggPSBmb3RvcmFtYS5hY3RpdmVGcmFtZS5pbWc7XHJcbiAgICAgICAgJCgnLmJnLWJsdXInKS5hdHRyKCdzcmMnLCBwYXRoKTtcclxuICAgIH0pLmZvdG9yYW1hKHtcclxuICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgIC8vIG1heHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgcmF0aW86IDE3LzExLFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgdGh1bWJ3aWR0aDogODgsXHJcbiAgICAgICAgYWxsb3dmdWxsc2NyZWVuOiB0cnVlLFxyXG4gICAgICAgIG5hdjogJ3RodW1icycsXHJcbiAgICAgICAgZml0Oidjb3ZlcidcclxuICAgIH0pOztcclxuXHJcbiAgICAvKtCk0L7RgtC+0YDQsNC80LAsINGB0LvQsNC50LTQtdGAINC80LXRgNC+0L/RgNC40Y/RgtC40LksINGB0LvQsNC50LTQtdGAINC+0YLQt9GL0LLQvtCyKi9cclxuICAgIC8vIHZhciAkc2xpZGVyID0gJCgnLmNhZmUtZm90b3JhbWEnKS5mb3RvcmFtYSh7XHJcbiAgICAvLyAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgIC8vICAgICAvLyBtYXh3aWR0aDogJzEwMCUnLFxyXG4gICAgLy8gICAgIHJhdGlvOiAxNy8xMSxcclxuICAgIC8vICAgICBsb29wOiB0cnVlLFxyXG4gICAgLy8gICAgIHRodW1id2lkdGg6IDg4LFxyXG4gICAgLy8gICAgIGFsbG93ZnVsbHNjcmVlbjogdHJ1ZSxcclxuICAgIC8vICAgICBuYXY6ICd0aHVtYnMnLFxyXG4gICAgLy8gICAgIGZpdDonY292ZXInXHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvLyAkc2xpZGVyXHJcbiAgICAvLyAgICAgLm9uKCdmb3RvcmFtYTpzaG93JywgZnVuY3Rpb24gKGUsIGZvdG9yYW1hKSB7XHJcbiAgICAvLyAgICAgICAgIC8vIHBpY2sgdGhlIGFjdGl2ZSB0aHVtYiBieSBpZFxyXG4gICAgLy8gICAgICAgICB2YXIgcGF0aCA9IGZvdG9yYW1hLmFjdGl2ZUZyYW1lLmltZztcclxuICAgIC8vICAgICAgICAgJCgnLmJnLWJsdXInKS5hdHRyKCdzcmMnLCBwYXRoKTtcclxuICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ2hlbGxvJyk7XHJcbiAgICAvLyAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLy8gJHNsaWRlci5vbignZm90b3JhbWE6bG9hZCcsIGZ1bmN0aW9uIChlLCBmb3RvcmFtYSwgZXh0cmEpIHtcclxuICAgIC8vICAgICBjb25zb2xlLmxvZyhleHRyYS5zcmMgKyAnIGlzIGxvYWRlZCcpO1xyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKCdoZWxsbycpO1xyXG4gICAgLy8gfSk7XHJcblxyXG5cclxuICAgICQoJy5jYWZlLWhvbGlkYXktc2xpZGVyJykuZm90b3JhbWEoe1xyXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgbWF4d2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAvLyByYXRpbzogMTYvOSxcclxuICAgICAgICBsb29wOiB0cnVlLFxyXG4gICAgICAgIGFsbG93ZnVsbHNjcmVlbjogdHJ1ZSxcclxuICAgICAgICBmaXQ6J2NvdmVyJ1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gJCgnLmNhZmUtcmV2aWV3cy1zbGlkZXInKS5mb3RvcmFtYSh7XHJcbiAgICAvLyAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgIC8vICAgICBoZWlnaHQ6ICdhdXRvJyxcclxuICAgIC8vICAgICBtYXh3aWR0aDogJzEwMCUnLFxyXG4gICAgLy8gICAgIGxvb3A6IHRydWUsXHJcbiAgICAvLyAgICAgcmF0aW86IDE2LzVcclxuICAgIC8vIH0pO1xyXG5cclxuICAgIC8q0LzQsNGB0LrQuCDQtNC70Y8g0YLQtdC70LXRhNC+0L3QsCovXHJcbiAgICAkKCcjcmVxdWVzdC1jYWxsX190ZWwsICNyZWdfX3Bob25lJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICQoJyNyZXF1ZXN0LWNhbGxfX3RlbCwgI3JlZ19fcGhvbmUnKS5tYXNrKCcrNygwMDApMDAwLTAwLTAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG4gICAgJCgnLmpzLWlucHV0LS10ZWwnKS5tYXNrKCcrNygwMDApMDAwLTAwLTAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG4gICAgJCgnLmpzLWlucHV0LS1kYXRlJykubWFzaygnMDAuMDAuMDAwMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICQoJy5qcy1pbnB1dC0tbG95YWx0eScpLm1hc2soJzAwMC0wMDAnLCB7Y2xlYXJJZk5vdE1hdGNoOiB0cnVlfSk7XHJcbiAgICAkKCdpbnB1dFtuYW1lPVwiZm9ybV90ZXh0XzMwXCJdJykubWFzaygnKzcoMDAwKTAwMC0wMC0wMCcsIHtjbGVhcklmTm90TWF0Y2g6IHRydWV9KTtcclxuICAgICQoJ2lucHV0W25hbWU9XCJmb3JtX3RleHRfNTJcIl0nKS5tYXNrKCcrNygwMDApMDAwLTAwLTAwJywge2NsZWFySWZOb3RNYXRjaDogdHJ1ZX0pO1xyXG5cclxuICAgIC8q0L/QvtC60LDQtyDQvdC+0LzQtdGA0LAg0YLQtdC70LXRhNC+0L3QsCDQsiDQutCw0YDRgtC+0YfQutC1INC60LDRhNC1Ki9cclxuICAgICQoJy5jYWZlLWluZm9fX2l0ZW0tY29sIC5jLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5sLWJ1dHRvbicpLnNpYmxpbmdzKCcuY2FmZS1pbmZvX19waG9uZS1udW1iZXInKS5zaG93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtGE0YPQvdC60YbQuNGPINC/0L7QutCw0LfQsCDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCovXHJcbiAgICBmdW5jdGlvbiBzaG93UG9wdXAoaWNvbiwgcG9wdXApIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBpY29uLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgJGh0bWwgPSAkKCdodG1sJyk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJChwb3B1cCkuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgJCgnLm1mcC1iZycpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcblxyXG5cclxuICAgICAgICAgICAgJGh0bWwuYWRkQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2ZpeGVkLWlucHV0Jyk7XHJcbiAgICAgICAgICAgIGlmKHdpbmRvd1dpZHRoID4gZG9jdW1lbnRXaWR0aCl7XHJcbiAgICAgICAgICAgICAgICAkaHRtbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdtYXJnaW4tcmlnaHQnOicxN3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKCcubWZwLXdyYXAnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdvdmVyZmxvdy15Jzonc2Nyb2xsJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn0JXRgdGC0Ywg0L/QvtC70L7RgdCwINC/0YDQvtC60YDRg9GC0LrQuCcpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn0J3QtdGCINC/0L7Qu9C+0YHRiyDQv9GA0L7QutGA0YPRgtC60LgnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucG9wdXAtY2xvc2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgJGh0bWwgPSAkKCdodG1sJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubWZwLXdyYXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5tZnAtYmcnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICRodG1sLmNzcyh7XHJcbiAgICAgICAgICAgICdtYXJnaW4tcmlnaHQnOicwJ1xyXG4gICAgICAgIH0pLnJlbW92ZUNsYXNzKCdsb2NrLWh0bWwnKTtcclxuICAgICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2ZpeGVkLWlucHV0Jyk7XHJcbiAgICAgICAgJCgnLmhlYWRlci5zdGlja3knKS5jc3Moe1xyXG4gICAgICAgICAgICAvLyAncmlnaHQnOicwJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwb3B1cC1jbG9zZSEhISEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuanMtcG9wdXAtY2xvc2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgJGh0bWwgPSAkKCdodG1sJyk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcubWZwLXdyYXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5tZnAtYmcnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICRodG1sLmNzcyh7XHJcbiAgICAgICAgICAgICdtYXJnaW4tcmlnaHQnOicwJ1xyXG4gICAgICAgIH0pLnJlbW92ZUNsYXNzKCdsb2NrLWh0bWwnKTtcclxuICAgICAgICAkKCcud3JhcHBlcicpLnJlbW92ZUNsYXNzKCdmaXhlZC1pbnB1dCcpO1xyXG4gICAgICAgICQoJy5oZWFkZXIuc3RpY2t5JykuY3NzKHtcclxuICAgICAgICAgICAgLy8gJ3JpZ2h0JzonMCdcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBzaG93UG9wdXAoXCIuaGVhZGVyLXBob25lXCIsICcucG9wdXBfX3JlcXVlc3QtY2FsbCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmhlYWRlci1lbWFpbFwiLCAnLnBvcHVwX193cml0ZS10by11cycpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmpzLWhlYWRlci1jYWJpbmV0XCIsICcucG9wdXAtYXV0aG9yaXphdGlvbicpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmhlYWRlci1jaXR5ID4gYVwiLCAnLnBvcHVwLWNpdHknKTtcclxuICAgIHNob3dQb3B1cChcIi5oZWFkZXItbW9iaWxlX19jaXR5XCIsICcucG9wdXAtY2l0eScpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmMtY2FyZC1jYWZlX19tZW51XCIsICcucG9wdXBfX21lbnUnKTtcclxuICAgIHNob3dQb3B1cChcIi5jLWNhcmQtdmFjYW5jeSAuYy1idXR0b25cIiwgJy5wb3B1cF9fdmFjYW5jeScpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmMtY2FyZF9tZW51XCIsICcucG9wdXBfX21lbnUnKTtcclxuICAgIC8vIHNob3dQb3B1cChcIi5jLXJldmlld3MtcG9zaXRpdmVcIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICAvLyBzaG93UG9wdXAoXCIuYy1yZXZpZXdzLW5lZ2F0aXZlXCIsICcucG9wdXBfX3JldmlldycpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmZvb3Rlci1yZXZpZXdzX19pY29uXCIsICcucG9wdXBfX3JldmlldycpO1xyXG4gICAgLy8gc2hvd1BvcHVwKFwiLnBvcHVwLWZvcmdvdC1wYXNzd29yZFwiLCAnLnBvcHVwX19yZWNvdmVyeS1wYXNzd29yZCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmNhdGFsb2ctcHJvZHVjdCAuYy1jYXJkLWNhdGFsb2dfX2ltZ1wiLCAnLnBvcHVwLXByb2R1Y3QnKTtcclxuICAgIHNob3dQb3B1cChcIi5jYXRhbG9nLXByb2R1Y3QgLmMtY2FyZC1jYXRhbG9nX190aXRsZVwiLCAnLnBvcHVwLXByb2R1Y3QnKTtcclxuICAgIHNob3dQb3B1cChcIiNsb2FkQ2FrZVwiLCAnLnBvcHVwLWNha2Utb3JkZXInKTtcclxuICAgIHNob3dQb3B1cChcIi5jYWtlLWNhcmRfX2hvdmVyXCIsICcucG9wdXAtY2FrZS1vcmRlcicpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmpzLWVhc3Rlci1idG5cIiwgJy5wb3B1cC1jYWtlLW9yZGVyJyk7XHJcbiAgICBzaG93UG9wdXAoXCIjbGstcHJvZmlsZS1zdWJzY3JpcHRpb24tZGVsX19va1wiLCAnLnBvcHVwLXN1YnNjcmlwdGlvbi1kZWwnKTtcclxuICAgIHNob3dQb3B1cChcIi5qcy1wYXJ0eS1vcmRlclwiLCAnLnBvcHVwLXBhcnR5LW9yZGVyJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuYy1jYXJkLWV2ZW50X19saW5rLS1tb3JlXCIsICcucG9wdXAtZXZlbnQnKTtcclxuICAgIHNob3dQb3B1cChcIi5jLWNhcmQtZXZlbnRfX2xpbmstLWJhc2tldFwiLCAnLnBvcHVwLWV2ZW50LWJhc2tldCcpO1xyXG4gICAgc2hvd1BvcHVwKFwiLmMtY2FyZC1ldmVudF9fbGluay0tb25lLWNsaWNrXCIsICcucG9wdXAtZXZlbnQtb25lLWNsaWNrJyk7XHJcbiAgICBzaG93UG9wdXAoXCIuZXhjdXJzaW9uLWJ0blwiLCAnLnBvcHVwLWV4Y3Vyc2lvbi1vcmRlcicpO1xyXG5cclxuXHJcblxyXG5cclxuICAgIC8vICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjY2FrZS1vcmRlci1pc3N1ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgICQodGhpcykucGFyZW50cygnLnBvcHVwLWNha2Utb3JkZXInKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgLy8gICAgICQoJy5wb3B1cC1jYWtlLW9yZGVyLWNvbmdyYXR1bGF0aW9uJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYy1jYXJkLWV2ZW50X19idG4tLWNsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS5wYXJlbnRzKCcucG9wdXAtZXZlbnQnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5wb3B1cC1ldmVudC1vbmUtY2xpY2snKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgfSk7XHJcblxyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZmFjdG9yeS1wb2ludCAuYy1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5mYWN0b3J5LXBvaW50IC5wb3B1cCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLnBvcHVwLWdhbGxlcnknKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5tZnAtYmcnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJ2h0bWwnKS5jc3Moe1xyXG4gICAgICAgICAgICAnbWFyZ2luLXJpZ2h0JzonMCdcclxuICAgICAgICB9KS5hZGRDbGFzcygnbG9jay1odG1sJyk7XHJcblxyXG4gICAgICAgIGlmKHdpbmRvd1dpZHRoID4gZG9jdW1lbnRXaWR0aCl7XHJcbiAgICAgICAgICAgICQoJ2h0bWwnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzE3cHgnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcubWZwLXdyYXAnKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOidzY3JvbGwnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn0JXRgdGC0Ywg0L/QvtC70L7RgdCwINC/0YDQvtC60YDRg9GC0LrQuCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmMtY2FyZC1ldmVudF9fYnRuLS1iYXNrZXQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wb3B1cC1ldmVudCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLnBvcHVwLWV2ZW50LWJhc2tldCcpLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBvcHVwLWZvcmdvdC1wYXNzd29yZCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgLy8gICAgICQodGhpcykucGFyZW50cygnLnBvcHVwLWF1dGhvcml6YXRpb24nKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgLy8gICAgICQoJy5wb3B1cF9fcmVjb3ZlcnktcGFzc3dvcmQnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgLy8gfSk7XHJcblxyXG5cclxuICAgICQoJy5wb3B1cC1hdXRob3JpemF0aW9uIC5wb3B1cC1hdXRob3JpemF0aW9uX19yZWcnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wb3B1cC1hdXRob3JpemF0aW9uJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcucG9wdXAtcmVnJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5wb3B1cC1yZWcgLnBvcHVwLWF1dGhvcml6YXRpb25fX2F1dGgnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5wb3B1cC1yZWcnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5wb3B1cC1hdXRob3JpemF0aW9uJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0LzQvtCx0LjQu9GM0L3Ri9C1INC60L3QvtC/0LrQuCDQv9C+0LrQsNC30LAg0L/QvtC/0LDQv9C+0LIg0KDQtdCz0LjRgdGC0YDQsNGG0LjRjy/QkNCy0YLQvtGA0LjQt9Cw0YbQuNGPKi9cclxuICAgICQoXCIjbW9iaWxlLXJlZ1wiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcucG9wdXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5wb3B1cC1yZWcnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5tZnAtYmcnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZml4ZWQtaW5wdXQnKTtcclxuICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmhlYWRlci1tb2JpbGVfX2F1dGgnKS5yZW1vdmVDbGFzcygnLnBvcHVwLXNsaWRlX19zaG93Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiI21vYmlsZS1hdXRoXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5wb3B1cCcpLnJlbW92ZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLnBvcHVwLWF1dGhvcml6YXRpb24nKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJy5tZnAtYmcnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZml4ZWQtaW5wdXQnKTtcclxuICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLmhlYWRlci1tb2JpbGVfX2F1dGgnKS5yZW1vdmVDbGFzcygnLnBvcHVwLXNsaWRlX19zaG93Jyk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAvKtC/0L7QuNGB0Log0LIg0YjQsNC/0LrQtSovXHJcbiAgICAkKFwiLmhlYWRlci1zZWFyY2ggLmljb24tc2VhcmNoLCAuaGVhZGVyLXNlYXJjaCAuc3ltYm9sLXNlYXJjaFwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcuaGVhZGVyLXNlYXJjaF9fZm9ybScpLnRvZ2dsZUNsYXNzKCdpcy12aXNpYmxlJyk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1zZWFyY2gtcmVzdWx0JykudG9nZ2xlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0L/QvtC60LDQtyDQvNC+0LHQuNC70YzQvdC+0LPQviDQv9C+0LjRgdC60LAqL1xyXG4gICAgJChcIi5oZWFkZXItbW9iaWxlX19zZWFyY2ggLmljb24tc2VhcmNoLCAuaGVhZGVyLW1vYmlsZV9fc2VhcmNoIC5zeW1ib2wtc2VhcmNoXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2gtYm94Jykuc2hvdygpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19tZW51JykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2ggLmljb24tc2VhcmNoLCAuaGVhZGVyLW1vYmlsZV9fc2VhcmNoIC5zeW1ib2wtc2VhcmNoJykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5pY29uLXNlYXJjaC1tb2JpbGUnKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaC1pbnB1dCcpLmZvY3VzKCk7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX2F1dGgnKS5yZW1vdmVDbGFzcygncG9wdXAtc2xpZGVfX3Nob3cnKTtcclxuICAgICAgICAvLyAkKCcuaGVhZGVyJykuYWRkQ2xhc3MoJ2hlYWRlci10b3BfX2hpZGUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0YHQutGA0YvQstCw0LXQvCDQvNC+0LHQuNC70YzQvdGL0Lkg0L/QvtC40YHQuiovXHJcbiAgICAkKFwiLmljb24tc2VhcmNoLW1vYmlsZVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoLWJveCcpLmhpZGUoKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fbWVudScpLnNob3coKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoIC5pY29uLXNlYXJjaCcpLnNob3coKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoIC5zeW1ib2wtc2VhcmNoJykuc2hvdygpO1xyXG4gICAgICAgICQodGhpcykuaGlkZSgpO1xyXG4gICAgICAgIC8vICQoJy5oZWFkZXInKS5yZW1vdmVDbGFzcygnaGVhZGVyLXRvcF9faGlkZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSkgeyAvLyDRgdC+0LHRi9GC0LjQtSDQutC70LjQutCwINC/0L4g0LLQtdCxLdC00L7QutGD0LzQtdC90YLRg1xyXG4gICAgICAgIHZhciBkaXYgPSAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoLWJveCcpOyAvLyDRgtGD0YIg0YPQutCw0LfRi9Cy0LDQtdC8IElEINGN0LvQtdC80LXQvdGC0LBcclxuICAgICAgICBpZiAoIWRpdi5pcyhlLnRhcmdldCkgLy8g0LXRgdC70Lgg0LrQu9C40Log0LHRi9C7INC90LUg0L/QviDQvdCw0YjQtdC80YMg0LHQu9C+0LrRg1xyXG4gICAgICAgICAgICAmJiBkaXYuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApIHsgLy8g0Lgg0L3QtSDQv9C+INC10LPQviDQtNC+0YfQtdGA0L3QuNC8INGN0LvQtdC80LXQvdGC0LDQvFxyXG5cclxuICAgICAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX21lbnUnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zZWFyY2gtYm94JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fc2VhcmNoIC5pY29uLXNlYXJjaCcpLnNob3coKTtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX3NlYXJjaCAuaWNvbi1zZWFyY2gtbW9iaWxlJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAvLyAkKCcuaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2hlYWRlci10b3BfX2hpZGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQt9Cw0LrRgNGL0YLQuNC1INC/0L4g0LrQu9C40LrRgyDQstGB0LUg0L7QsdC70LDRgdGC0Lgg0Y3QutGA0LDQvdCwXHJcbiAgICAkKFwiLnBvcHVwLWJnXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQoJy5wb3B1cCcpLnBhcmVudHMoKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgIC8vICQoJy5maXhlZC1vdmVybGF5JykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2JvZHktcG9wdXAnKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAgIC8q0LrQu9C40Log0LLQvdC1INC+0LHQu9Cw0YHRgtC4INGN0LrRgNCw0L3QsCDQtNC70Y8g0LrQvtGA0LfQuNC90YsqL1xyXG4gICAgZnVuY3Rpb24gaGlkZVBvcHVwIChlbGVtZW50LCBpbnN0cnVtZW50SGlkZSl7XHJcbiAgICAgICAgJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSkgeyAvLyDRgdC+0LHRi9GC0LjQtSDQutC70LjQutCwINC/0L4g0LLQtdCxLdC00L7QutGD0LzQtdC90YLRg1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gJChlbGVtZW50KTsgLy8g0YLRg9GCINGD0LrQsNC30YvQstCw0LXQvCBJRCDRjdC70LXQvNC10L3RgtCwXHJcbiAgICAgICAgICAgIGlmICghZGl2LmlzKGUudGFyZ2V0KSAvLyDQtdGB0LvQuCDQutC70LjQuiDQsdGL0Lsg0L3QtSDQv9C+INC90LDRiNC10LzRgyDQsdC70L7QutGDXHJcbiAgICAgICAgICAgICAgICAmJiBkaXYuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApIHsgLy8g0Lgg0L3QtSDQv9C+INC10LPQviDQtNC+0YfQtdGA0L3QuNC8INGN0LvQtdC80LXQvdGC0LDQvFxyXG4gICAgICAgICAgICAgICAgZGl2LnJlbW92ZUNsYXNzKGluc3RydW1lbnRIaWRlKTsgLy8g0YHQutGA0YvQstCw0LXQvCDQtdCz0L5cclxuICAgICAgICAgICAgICAgIC8vICQoJy5maXhlZC1vdmVybGF5JykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIC8vICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnYm9keS1wb3B1cCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0YHQvtCx0YvRgtC40LUg0LrQu9C40LrQsCDQv9C+INCy0LXQsS3QtNC+0LrRg9C80LXQvdGC0YNcclxuICAgIC8vICQoZG9jdW1lbnQpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHtcclxuICAgIC8vXHJcbiAgICAvLyAgICAgdmFyIHBvcHVwID0gJCgnLnBvcHVwJyk7XHJcbiAgICAvLyAgICAgaWYgKCFwb3B1cC5pcyhlLnRhcmdldClcclxuICAgIC8vICAgICAgICAgJiYgIXBvcHVwLmhhcyhlLnRhcmdldCkubGVuZ3RoXHJcbiAgICAvLyAgICAgICAgICYmICEkKCcucG9wdXAtbWluaScpLmlzKGUudGFyZ2V0KVxyXG4gICAgLy8gICAgICkge1xyXG4gICAgLy8gICAgICAgICBwb3B1cC5wYXJlbnRzKCcubWZwLXdyYXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgLy8gICAgICAgICAkKCcubWZwLWJnJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vICAgICAgICAgJCgnaHRtbCcpLmNzcyh7XHJcbiAgICAvLyAgICAgICAgICAgICAnbWFyZ2luLXJpZ2h0JzonMCdcclxuICAgIC8vICAgICAgICAgfSkucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH0pO1xyXG5cclxuICAgIC8q0YHQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/0Ysg0LLQvdC1INC30L7QvdGLINGN0LvQtdC80LXQvdGC0LAg0LTQu9GPINC60LDRgNGC0L7Rh9C60Lgg0YLQvtCy0LDRgNCwKi9cclxuICAgICQoZG9jdW1lbnQpLm1vdXNlZG93bihmdW5jdGlvbiAoZSkgeyAvLyDRgdC+0LHRi9GC0LjQtSDQutC70LjQutCwINC/0L4g0LLQtdCxLdC00L7QutGD0LzQtdC90YLRg1xyXG4gICAgICAgIC8vIHZhciBkaXYgPSAkKCcucG9wdXAnKTtcclxuICAgICAgICAvLyDRgtGD0YIg0YPQutCw0LfRi9Cy0LDQtdC8IElEINGN0LvQtdC80LXQvdGC0LBcclxuICAgICAgICAvLyB2YXIgZGl2MiA9ICQoJy5wb3B1cC1taW5pJyk7XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBoaWRlT3V0Wm9uZShlbGVtLCBlbGVtMiwgZWxlbTMsIGVsZW00KXtcclxuICAgICAgICAgICAgdmFyIGRpdiA9ICQoZWxlbSk7XHJcbiAgICAgICAgICAgIHZhciBkaXYyID0gJChlbGVtMik7XHJcbiAgICAgICAgICAgIHZhciBkaXYzID0gJChlbGVtMyk7XHJcbiAgICAgICAgICAgIGlmICghZGl2LmlzKGUudGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgJiYgZGl2LmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwXHJcbiAgICAgICAgICAgICAgICAmJiAhZGl2Mi5pcyhlLnRhcmdldClcclxuICAgICAgICAgICAgICAgICYmIGRpdjIuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDBcclxuICAgICAgICAgICAgICAgICYmICFkaXYzLmlzKGUudGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgJiYgZGl2My5oYXMoZS50YXJnZXQpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gZGl2LnJlbW92ZUNsYXNzKGluc3RydW1lbnRIaWRlKTsgLy8g0YHQutGA0YvQstCw0LXQvCDQtdCz0L5cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICBkaXYucGFyZW50cygnLm1mcC13cmFwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdi5wYXJlbnRzKCdodG1sJykuZmluZCgnLm1mcC1iZyAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2LnBhcmVudHMoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbG9jay1odG1sJykuY3NzKCdtYXJnaW4tcmlnaHQnLCcwJyk7XHJcbiAgICAgICAgICAgICAgICAvLyBkaXYuZmluZCgnLnBvcHVwLWNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JhY2tVcmwnKTtcclxuICAgICAgICAgICAgICAgIGlmICh1cmwgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImJhY2tVcmxcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGl2Mi5wYXJlbnRzKCcubWZwLXdyYXAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2Mi5wYXJlbnRzKCdodG1sJykuZmluZCgnLm1mcC1iZyAnKS5yZW1vdmVDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgZGl2Mi5wYXJlbnRzKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2xvY2staHRtbCcpLmNzcygnbWFyZ2luLXJpZ2h0JywnMCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGRpdjMucGFyZW50cygnLm1mcC13cmFwJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdjMucGFyZW50cygnaHRtbCcpLmZpbmQoJy5tZnAtYmcgJykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAgICAgICAgIGRpdjMucGFyZW50cygnaHRtbCcpLnJlbW92ZUNsYXNzKCdsb2NrLWh0bWwnKS5jc3MoJ21hcmdpbi1yaWdodCcsJzAnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiYWNrVXJsJykgIT09IG51bGwpIHtcclxuICAgICAgICAvLyAgICAgdmFyIHNlcmlhbE9iaiA9IEpTT04uc3RyaW5naWZ5KGJhY2tVcmwpO1xyXG4gICAgICAgIC8vICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUobnVsbCwgbnVsbCwgJy9lYXN0ZXIvJyk7XHJcbiAgICAgICAgLy8gICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiYWNrVXJsJywgc2VyaWFsT2JqKTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcImJhY2tVcmxcIik7XHJcbiAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDEpIHtcclxuICAgICAgICAgICAgaGlkZU91dFpvbmUoJy5wb3B1cCcsICcucG9wdXAtbWluaScsICcuZGF0ZXBpY2tlcicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgaGlkZVBvcHVwKCcucG9wdXAtYmFza2V0JywgJ3BvcHVwLXNsaWRlX19zaG93Jyk7XHJcbiAgICBoaWRlUG9wdXAoJy5oZWFkZXItbW9iaWxlX19hdXRoJywgJ3BvcHVwLXNsaWRlX19zaG93Jyk7XHJcbiAgICBoaWRlUG9wdXAoJy5oZWFkZXItc2VhcmNoX19mb3JtJywgJ2lzLXZpc2libGUnKTtcclxuICAgIGhpZGVQb3B1cCgnLmhlYWRlci1zZWFyY2gtcmVzdWx0JywgJ2lzLXZpc2libGUnKTtcclxuXHJcblxyXG4gICAgLyrRjtC+0LrQvtCy0YvQtSDQutC90L7Qv9C60Lgg0L7RgtC30YvQstCwKi9cclxuICAgIHZhciAkcmV2aWV3c19idG4gPSAkKFwiLmMtcmV2aWV3c19fYnRuXCIpLFxyXG4gICAgICAgIGNsaWNrQ291bnQ7XHJcbiAgICAkcmV2aWV3c19idG4uYXR0cihcImRhdGEtY291bnRcIiwgXCIwXCIpO1xyXG4gICAgdmFyIGlzTW9iaWxlID0ge1xyXG4gICAgICAgIEFuZHJvaWQ6ICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSkgPyB0cnVlIDogZmFsc2U7IH0sXHJcbiAgICAgICAgQmxhY2tCZXJyeTogICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKSA/IHRydWUgOiBmYWxzZTsgfSxcclxuICAgICAgICBpT1M6ICAgICAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmV8aVBhZHxpUG9kL2kpID8gdHJ1ZSA6IGZhbHNlOyB9LFxyXG4gICAgICAgIFdpbmRvd3M6ICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0lFTW9iaWxlL2kpID8gdHJ1ZSA6IGZhbHNlOyB9LFxyXG4gICAgICAgIGFueTogICAgICAgICAgICBmdW5jdGlvbigpIHsgcmV0dXJuIChpc01vYmlsZS5BbmRyb2lkKCkgfHwgaXNNb2JpbGUuQmxhY2tCZXJyeSgpIHx8IGlzTW9iaWxlLmlPUygpIHx8IGlzTW9iaWxlLldpbmRvd3MoKSk7ICB9XHJcbiAgICB9O1xyXG4gICAgaWYgKCBpc01vYmlsZS5hbnkoKSApIHtcclxuICAgICAgICAkcmV2aWV3c19idG4ub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjbGlja0NvdW50ID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1jb3VudFwiKTtcclxuICAgICAgICAgICAgY2xpY2tDb3VudCArKztcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoJy5jLXJldmlld3NfX2l0ZW0nKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgaWYgKGNsaWNrQ291bnQgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKFwiZGF0YS1jb3VudFwiLCBjbGlja0NvdW50KTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuYy1yZXZpZXdzX19pdGVtJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNsaWNrQ291bnQgPT0gMil7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmMtcmV2aWV3c19faXRlbScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImRhdGEtY291bnRcIiwgXCIwXCIpO1xyXG4gICAgICAgICAgICAgICAgc2hvd1BvcHVwKFwiLmMtcmV2aWV3cy1wb3NpdGl2ZVwiLCAnLnBvcHVwX19yZXZpZXcnKTtcclxuICAgICAgICAgICAgICAgIHNob3dQb3B1cChcIi5jLXJldmlld3MtbmVnYXRpdmVcIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCAhaXNNb2JpbGUuYW55KCkgKSB7XHJcbiAgICAgICAgJHJldmlld3NfYnRuLmhvdmVyKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNsaWNrQ291bnQgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvdW50XCIpO1xyXG4gICAgICAgICAgICBjbGlja0NvdW50ICsrO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmMtcmV2aWV3c19faXRlbScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoY2xpY2tDb3VudCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvdW50XCIsIGNsaWNrQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoJy5jLXJldmlld3NfX2l0ZW0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpY2snKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjbGlja0NvdW50ID09IDIpe1xyXG4gICAgICAgICAgICAgICAgc2hvd1BvcHVwKFwiLmMtcmV2aWV3cy1wb3NpdGl2ZVwiLCAnLnBvcHVwX19yZXZpZXcnKTtcclxuICAgICAgICAgICAgICAgIHNob3dQb3B1cChcIi5jLXJldmlld3MtbmVnYXRpdmVcIiwgJy5wb3B1cF9fcmV2aWV3Jyk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgnLmMtcmV2aWV3c19faXRlbScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYXR0cihcImRhdGEtY291bnRcIiwgXCIwXCIpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyDQvNC+0LHQuNC70YzQvdGL0Lkg0LfQsNC60LDQt9Cw0YLRjCDQt9Cy0L7QvdC+0LosINC/0L7QutCw0LfRi9Cy0LDQtdC8INGE0L7RgNC80YMg0Lgg0YPQtNCw0LvRj9C10Lwg0L3QsNC00L/QuNGB0YxcclxuICAgICQoXCIubW9iaWxlLXJlcXVlc3QtY2FsbF9pbnF1aXJ5XCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICQodGhpcykuY3NzKHtcclxuICAgICAgICAgICAgJ29wYWNpdHknOiAnMCcsXHJcbiAgICAgICAgICAgICd2aXNpYmlsaXR5JzogJ2hpZGRlbicsXHJcbiAgICAgICAgICAgICdkaXNwbGF5Jzonbm9uZSdcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcubW9iaWxlLXJlcXVlc3QtY2FsbF9fZm9ybScpLmNzcyh7XHJcbiAgICAgICAgICAgICdvcGFjaXR5JzogJzEnLFxyXG4gICAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJyxcclxuICAgICAgICAgICAgJ2Rpc3BsYXknOidibG9jaydcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0YHQvtCz0LvQsNGI0LXQvdC40LUg0L3QsCDQvtCx0YDQsNCx0L7RgtC60YMg0L/QtdGA0YHQvtC90LDQu9GM0L3Ri9GFINC00LDQvdC90YvRhSovXHJcbiAgICBmdW5jdGlvbiBEaXNhYmxlZEZvcm1CdXR0b24oZm9ybSwgY2hlY2ssIGJ0bl9mb3JtKXtcclxuICAgICAgICAkKFwiZm9ybSBpbnB1dFt0eXBlPSdjaGVja2JveCddXCIpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZigkKGNoZWNrKS5wcm9wKCdjaGVja2VkJykpe1xyXG4gICAgICAgICAgICAgICAgJChidG5fZm9ybSkucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGVjaycpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKGJ0bl9mb3JtKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNrIGVsc2UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIERpc2FibGVkRm9ybUJ1dHRvbignI3BvcHVwLXJlZycsJyNyZWdfX3JlZ3VsYXRpb25zJywnI3BvcHVwLXJlZyBidXR0b24nKTtcclxuICAgIERpc2FibGVkRm9ybUJ1dHRvbignI3BvcHVwX193cml0ZS10by11cycsJyN3cml0ZS10by11c19fcmVndWxhdGlvbnMnLCcjcG9wdXBfX3dyaXRlLXRvLXVzIGJ1dHRvbicpO1xyXG4gICAgRGlzYWJsZWRGb3JtQnV0dG9uKCcjcG9wdXBfX3JlcXVlc3QtY2FsbCcsJyNyZXF1ZXN0LWNhbGxfX3JlZ3VsYXRpb25zJywnI3BvcHVwX19yZXF1ZXN0LWNhbGwgYnV0dG9uJyk7XHJcbiAgICBEaXNhYmxlZEZvcm1CdXR0b24oJyNwb3B1cF9fdmFjYW5jeScsJyN2YWNhbmN5X19yZWd1bGF0aW9ucycsJyNwb3B1cF9fdmFjYW5jeSBidXR0b24nKTtcclxuICAgIERpc2FibGVkRm9ybUJ1dHRvbignI29yZGVyLWF1dGgtbmV3JywnI29yZGVyLWF1dGgtbmV3X19yZWd1bGF0aW9ucycsJyNvcmRlci1hdXRoLW5ldyBidXR0b24nKTtcclxuICAgIERpc2FibGVkRm9ybUJ1dHRvbignI2Nha2Utb3JkZXItZm9ybScsJyNjYWtlLW9yZGVyX19yZWd1bGF0aW9ucycsJyNjYWtlLW9yZGVyLWZvcm0gYnV0dG9uJyk7XHJcbiAgICBEaXNhYmxlZEZvcm1CdXR0b24oJyNleGN1cnNpb24tZm9ybScsJyNleGN1cnNpb25fX3JlZ3VsYXRpb25zJywnI2V4Y3Vyc2lvbi1mb3JtIGJ1dHRvbicpO1xyXG5cclxuXHJcblxyXG4gICAgLyrQv9C+0LrQsNC30YvQstCw0LXQvCDQsiDQv9C+0L/QsNC/0LUg0LfQsNC60LDQt9Cw0YLRjCDQt9Cy0L7QvdC+0Log0YHQv9C40YHQvtC6INCz0L7RgNC+0LTQvtCyKi9cclxuICAgICQoXCIubW9iaWxlLXJlcXVlc3QtY2FsbF9jaXR5XCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBjbGljaycpO1xyXG4gICAgICAgIC8vICQoJy5wb3B1cC1yZXF1ZXN0LWNpdHknKS5zaG93KCk7XHJcbiAgICAgICAgJCgnLnBvcHVwLXJlcXVlc3QtY2l0eScpLmFkZENsYXNzKCdwb3B1cC1zaG93Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiLnBvcHVwLXJlcXVlc3QtY2l0eVwiKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKCcucG9wdXAtcmVxdWVzdC1jaXR5JykucmVtb3ZlQ2xhc3MoJ3BvcHVwLXNob3cnKTtcclxuICAgICAgICAvLyAkKCcucG9wdXAtcmVxdWVzdC1jaXR5JykuaGlkZSgpO1xyXG4gICAgICAgICQoJy5wb3B1cF9fcmVxdWVzdC1jYWxsJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCcubWZwLWJnJykuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgICAgICAkKCdodG1sJykuY3NzKHtcclxuICAgICAgICAgICAgJ292ZXJmbG93JzonaGlkZGVuJyxcclxuICAgICAgICAgICAgJ21hcmdpbi1yaWdodCc6JzE3cHgnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC/0L7Qv9Cw0L8g0LrQvtGA0LfQuNC90YsqL1xyXG4gICAgJCgnLmljb24tYmFza2V0LCAuaGVhZGVyIC5zeW1ib2wtYmFza2V0LCAuaGVhZGVyLWJhc2tldF9fY291bnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnBvcHVwLWJhc2tldCcpLmFkZENsYXNzKCdwb3B1cC1zbGlkZV9fc2hvdycpO1xyXG4gICAgICAgICQoJy5oZWFkZXInKS5hZGRDbGFzcygnaGVhZGVyLXRvcF9fbm8taGlkZScpO1xyXG4gICAgICAgIC8vICQoJ2h0bWwnKS5hZGRDbGFzcygnbG9jay1odG1sJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucG9wdXAtYmFza2V0X19jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcucG9wdXAtYmFza2V0JykucmVtb3ZlQ2xhc3MoJ3BvcHVwLXNsaWRlX19zaG93Jyk7XHJcbiAgICAgICAgJCgnLmhlYWRlcicpLnJlbW92ZUNsYXNzKCdoZWFkZXItdG9wX19uby1oaWRlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcucG9wdXAtYmFza2V0X19zY3JvbGwnKS5vbiggJ21vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICB2YXIgZTAgPSBlLm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgdmFyIGRlbHRhID0gZTAud2hlZWxEZWx0YSB8fCAtZTAuZGV0YWlsO1xyXG5cclxuICAgICAgICB0aGlzLnNjcm9sbFRvcCArPSAoIGRlbHRhIDwgMCA/IDEgOiAtMSApICogMzA7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8q0L/RgNC+0LLQtdGA0Y/QtdGCINCyINGE0LjQu9GM0YLRgNC1INC90LDQu9C40YfQuNC1INGB0LXQu9C10LrRgtCwINC4INC10YHQu9C40YIg0LXRgdGC0Ywg0LTQtdC70LDQtdGCINGA0L7QtNC40YLQtdC70Ywg0LHQu9C+0YfQvdGL0Lwg0LTQu9GPINC+0YLQvtCx0YDQsNC20LXQvdC40Y8g0LIg0LzQvtCx0LjQu9GM0L3QvtC5INCy0LXRgNGB0LjQuCovXHJcbiAgICAkKCcuZmlsdGVyJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciAkZmlsdGVyQm9keSA9ICAkKCcuZmlsdGVyLWl0ZW1fX2JvZHknKTtcclxuICAgICAgICAkZmlsdGVyQm9keS5oYXMoJ3NlbGVjdCcpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xyXG4gICAgICAgICRmaWx0ZXJCb2R5LmhhcygnaW5wdXRbdHlwZT1cInRleHRcIl0nKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgICAkZmlsdGVyQm9keS5oYXMoJ3NlbGVjdCcpLnBhcmVudHMoJy5maWx0ZXItaXRlbScpLmNzcygnYm9yZGVyJywnbm9uZScpO1xyXG4gICAgICAgICRmaWx0ZXJCb2R5LmhhcygnaW5wdXRbdHlwZT1cInRleHRcIl0nKS5wYXJlbnRzKCcuZmlsdGVyLWl0ZW0nKS5jc3MoJ2JvcmRlcicsJ25vbmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8q0L/QvtGP0LLQu9C10L3QuNC1INGE0LjQu9GM0YLRgNCwINCyINC80L7QsdC40LvRjNC90L7QuSDQstC10YDRgdC40LgqL1xyXG5cclxuICAgIGZ1bmN0aW9uIFNob3dNb2JpbGVCdG5GaWx0ZXIgKGJ0biwgc2hvd0Jsb2NrKSB7XHJcbiAgICAgICAgJChidG4pLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnZHJvcGRvd24tc2hvdycpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKHNob3dCbG9jaykuc2xpZGVUb2dnbGUoMjAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFNob3dNb2JpbGVCdG5GaWx0ZXIoJy5maWx0ZXItbW9iaWxlLWJ0bicsICcuZmlsdGVyJyk7XHJcbiAgICBTaG93TW9iaWxlQnRuRmlsdGVyKCcuZmlsdGVyLWhvbGQtbW9iaWxlLWJ0bicsICcuZmlsdGVyLWhvbGQnKTtcclxuXHJcblxyXG5cclxuICAgIC8q0L/QvtC60LDQtyDQv9C+0LTQvNC10L3RjiDQsiDQvNC+0LHQuNC70YzQvdC+0Lkg0LLQtdGA0YHQuNC4INC80LXQvdGOKi9cclxuICAgICQoJy5oZWFkZXItbW9iaWxlX19saXN0IC5pY29uLWRyb3Bkb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnZHJvcGRvd24tc2hvdycpO1xyXG4gICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19zdWJsaXN0Jykuc2xpZGVUb2dnbGUoMjAwKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudHMoJy5oZWFkZXItbW9iaWxlX19pdGVtJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyrRhNGD0L3QutGG0LjRjyDRgdGH0LXRgtCwINCx0L7Qu9GM0YjQtS/QvNC10L3RjNGI0LUqL1xyXG4gICAgZnVuY3Rpb24gY2F0YWxvZ0l0ZW1Db3VudGVyKGZpZWxkKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkQ291bnQgPSBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgICAgICAgdmFyXHJcbiAgICAgICAgICAgICAgICAvLyDQnNC40L0uINC30L3QsNGH0LXQvdC40LVcclxuICAgICAgICAgICAgICAgIG1pbiA9IGVsLmRhdGEoJ21pbicpIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgLy8g0JzQsNC60YEuINC30L3QsNGH0LXQvdC40LVcclxuICAgICAgICAgICAgICAgIG1heCA9IGVsLmRhdGEoJ21heCcpIHx8IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgLy8g0JrQvdC+0L/QutCwINGD0LzQtdC90YzRiNC10L3QuNGPINC60L7Quy3QstCwXHJcbiAgICAgICAgICAgICAgICBkZWMgPSBlbC5wcmV2KCcuZGVjJyksXHJcbiAgICAgICAgICAgICAgICAvLyDQmtC90L7Qv9C60LAg0YPQstC10LvQuNGH0LXQvdC40Y8g0LrQvtC7LdCy0LBcclxuICAgICAgICAgICAgICAgIGluYyA9IGVsLm5leHQoJy5pbmMnKTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdChlbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbC5hdHRyKCdkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVjLm9uKCdjbGljaycsIGRlY3JlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5jLm9uKCdjbGljaycsIGluY3JlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDQo9C80LXQvdGM0YjQuNC8INC30L3QsNGH0LXQvdC40LVcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlY3JlbWVudCgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBwYXJzZUludChlbFswXS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUtLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtaW4gfHwgdmFsdWUgPj0gbWluKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsWzBdLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8vINCj0LLQtdC70LjRh9C40Lwg0LfQvdCw0YfQtdC90LjQtVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaW5jcmVtZW50KCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlSW50KGVsWzBdLnZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXggfHwgdmFsdWUgPD0gbWF4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsWzBdLnZhbHVlID0gdmFsdWUrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaW5pdCgkKHRoaXMpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkKGZpZWxkKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZmllbGRDb3VudCgkKHRoaXMpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIGNhdGFsb2dJdGVtQ291bnRlcignLmZpZWxkQ291bnQnKTtcclxuXHJcbiAgIC8q0LzQvtCx0LjQu9GM0L3QvtC1INC80LXQvdGOKi9cclxuXHQkKCcuaGVhZGVyLW1vYmlsZV9fbWVudScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdpY29uLW1lbnVfX3RyYW5zZm9ybScpO1xyXG5cdFx0JCgnLmhlYWRlci1tb2JpbGVfX2Ryb3Bkb3duJykudG9nZ2xlQ2xhc3MoJ3BvcHVwLXNob3cnKTtcclxuXHRcdC8vICQoJy5oZWFkZXInKS50b2dnbGVDbGFzcygnaGVhZGVyLXRvcF9faGlkZScpO1xyXG4gICAgICAgICQoJ2h0bWwnKS50b2dnbGVDbGFzcygnb3ZlcmZsb3cnKTtcclxuXHJcbiAgICAgICAgaWYoJCgnLmhlYWRlcicpLmhhc0NsYXNzKCdzdGlja3knKSl7XHJcbiAgICAgICAgICAgICQoJy5oZWFkZXItbW9iaWxlX19kcm9wZG93bicpLmFkZENsYXNzKCdtZW51LXN0aWNreScpO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX2Ryb3Bkb3duJykucmVtb3ZlQ2xhc3MoJ21lbnUtc3RpY2t5Jyk7XHJcbiAgICAgICAgfVxyXG5cdH0pO1xyXG4gICAgLy8gJCgnLmhlYWRlcicpLmhhc0NsYXNzKCcuc3RpY2t5JykuY2hpbGRyZW4oJy5oZWFkZXItbW9iaWxlX19kcm9wZG93bicpLmFkZENsYXNzKCdtZW51LXN0aWNreScpO1xyXG5cclxuICAgICQoJy5oZWFkZXItbW9iaWxlX19kcm9wZG93bi1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJCgnLmhlYWRlci1tb2JpbGVfX21lbnUnKS50b2dnbGVDbGFzcygnaWNvbi1tZW51X190cmFuc2Zvcm0nKTtcclxuICAgICAgICAkKCcuaGVhZGVyLW1vYmlsZV9fZHJvcGRvd24nKS50b2dnbGVDbGFzcygncG9wdXAtc2hvdycpO1xyXG4gICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnb3ZlcmZsb3cnKTtcclxuXHR9KTtcclxuXHJcblxyXG5cdCQoJy5oZWFkZXItbW9iaWxlX19jYWJpbmV0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuXHRcdCQoJy5oZWFkZXItbW9iaWxlX19hdXRoJykudG9nZ2xlQ2xhc3MoJ3BvcHVwLXNsaWRlX19zaG93Jyk7XHJcblx0fSk7XHJcblxyXG4gICAgLy/QutC90L7Qv9C60LAg0LLQstC10YDRhVxyXG4gICAgZnVuY3Rpb24gYmFja1RvVG9wIChidG5FbGVtLCBwYXJlbnRFbGVtKXtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gMzAwLFxyXG4gICAgICAgICAgICBvZmZzZXRfb3BhY2l0eSA9IDEyMDAsXHJcbiAgICAgICAgICAgIHNjcm9sbF90b3BfZHVyYXRpb24gPSA3MDAsXHJcbiAgICAgICAgICAgICRiYWNrX3RvX3RvcCA9ICQoYnRuRWxlbSk7XHJcbiAgICAgICAgLy/QutC90L7Qv9C60LAg0L3QsNC30LDQtFxyXG4gICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgKCAkKHRoaXMpLnNjcm9sbFRvcCgpID4gb2Zmc2V0ICkgPyAkYmFja190b190b3AuYWRkQ2xhc3MoJ2NkLWlzLXZpc2libGUnKSA6ICRiYWNrX3RvX3RvcC5yZW1vdmVDbGFzcygnY2QtaXMtdmlzaWJsZSBjZC1mYWRlLW91dCcpO1xyXG4gICAgICAgICAgICBpZiggJCh0aGlzKS5zY3JvbGxUb3AoKSA+IG9mZnNldF9vcGFjaXR5ICkge1xyXG4gICAgICAgICAgICAgICAgJGJhY2tfdG9fdG9wLmFkZENsYXNzKCdjZC1mYWRlLW91dCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRiYWNrX3RvX3RvcC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQocGFyZW50RWxlbSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwXHJcbiAgICAgICAgICAgICAgICB9LCBzY3JvbGxfdG9wX2R1cmF0aW9uXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYmFja1RvVG9wKCcuY2QtdG9wJywgJ2JvZHksaHRtbCcpO1xyXG4gICAgYmFja1RvVG9wKCcucG9wdXAtcHJvZHVjdF9fYnRuLWJhY2snLCAnLnBvcHVwJyk7XHJcblxyXG5cclxuXHJcbiAgICAvKtC70LjQv9C60LDRjyDRiNCw0L/QutCwKi9cclxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgYm8gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgdmFyICRoZWFkZXIgPSAkKFwiLmhlYWRlclwiKTtcclxuICAgICAgICB2YXIgJGxvZ28gPSAkKFwiI3N5bWJvbC1sb2dvXCIpO1xyXG4gICAgICAgIHZhciAkaGVkZXJIZWlnaHQgPSAkaGVhZGVyLmhlaWdodCgpO1xyXG4gICAgICAgIGlmICggYm8gPj0gMTA2ICkge1xyXG4gICAgICAgICAgICAkaGVhZGVyLmFkZENsYXNzKCdoZWFkZXItdG9wX19oaWRlJyk7XHJcbiAgICAgICAgICAgICRoZWFkZXIuYWRkQ2xhc3MoJ3N0aWNreScpO1xyXG4gICAgICAgICAgICAkbG9nby5hZGRDbGFzcygnZml4ZWQtbG9nbycpO1xyXG5cclxuICAgICAgICAgICAgJCgnbWFpbicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAncGFkZGluZy10b3AnOiAkaGVkZXJIZWlnaHRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vICRoZWFkZXIuYWRkQ2xhc3MoJ2ZpeGVkLWhlYWRlcicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRoZWFkZXIucmVtb3ZlQ2xhc3MoJ2hlYWRlci10b3BfX2hpZGUnKTtcclxuICAgICAgICAgICAgJGhlYWRlci5yZW1vdmVDbGFzcygnc3RpY2t5Jyk7XHJcbiAgICAgICAgICAgICRsb2dvLnJlbW92ZUNsYXNzKCdmaXhlZC1sb2dvJyk7XHJcbiAgICAgICAgICAgIC8vICRoZWFkZXIucmVtb3ZlQ2xhc3MoJ2ZpeGVkLWhlYWRlcicpO1xyXG4gICAgICAgICAgICAkKCdtYWluJykuY3NzKHtcclxuICAgICAgICAgICAgICAgICdwYWRkaW5nLXRvcCc6ICcwJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKtC60LDRgdGC0L7QvNC90YvQuSDRgdC10LvQtdC60YIqL1xyXG4gICAgJCgnLmMtc2VsZWN0JykuU3Vtb1NlbGVjdCgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dOZWdhdGl2ZShjbGlja0VsZW0pe1xyXG4gICAgICAgICQoY2xpY2tFbGVtKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ID0gJCgnLnBvcHVwX19yZXZpZXcgLmMtc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgIHNlbGVjdC52YWwoJzQ4Jyk7XHJcbiAgICAgICAgICAgIHNlbGVjdFswXS5zdW1vLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAvLyBzZWxlY3RbMF0uc3Vtby5zZWxlY3RJdGVtKCc0OCcpO1xyXG4gICAgICAgICAgICB2YXIgJGljb24gPSBzZWxlY3QucGFyZW50cygnLnJldmlld3MtZm9ybV9fdHlwZScpLmZpbmQoJy5yZXZpZXdzLWZvcm1fX3R5cGUtaWNvbicpO1xyXG4gICAgICAgICAgICAkaWNvbi5yZW1vdmVDbGFzcygnaWNvbi1yYWJiaXQtcG9zaXRpdmUnKTtcclxuICAgICAgICAgICAgJGljb24uYWRkQ2xhc3MoJ2ljb24tcmFiYml0LW5lZ2F0aXZlJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfRhNGD0L3QutGG0LjRjyDRgdGA0LDQsdC+0YLQsNC70LAg0L/RgNC4INC60LvQuNC60LUganMtbmVnYXRpdmUnKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2VsZWN0LnZhbCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHNob3dOZWdhdGl2ZSgnLmpzLW5lZ2F0aXZlJyk7XHJcbiAgICBzaG93TmVnYXRpdmUoJy5jLXJldmlld3MtbmVnYXRpdmUnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzaG93UG9zaXRpdmUoY2xpY2tFbGVtKXtcclxuICAgICAgICAkKGNsaWNrRWxlbSkub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdCA9ICQoJy5wb3B1cF9fcmV2aWV3IC5jLXNlbGVjdCcpO1xyXG4gICAgICAgICAgICBzZWxlY3QudmFsKCc0NycpO1xyXG4gICAgICAgICAgICBzZWxlY3RbMF0uc3Vtby5yZWxvYWQoKTtcclxuICAgICAgICAgICAgdmFyICRpY29uID0gc2VsZWN0LnBhcmVudHMoJy5yZXZpZXdzLWZvcm1fX3R5cGUnKS5maW5kKCcucmV2aWV3cy1mb3JtX190eXBlLWljb24nKTtcclxuICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoJ2ljb24tcmFiYml0LW5lZ2F0aXZlJyk7XHJcbiAgICAgICAgICAgICRpY29uLmFkZENsYXNzKCdpY29uLXJhYmJpdC1wb3NpdGl2ZScpO1xyXG4gICAgICAgICAgICAvLyBzZWxlY3RbMF0uc3Vtby5zZWxlY3RJdGVtKCc0NycpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn0YTRg9C90LrRhtC40Y8g0YHRgNCw0LHQvtGC0LDQu9CwINC/0YDQuCDQutC70LjQutC1IGpzLXBvc2l0aXZlJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdC52YWwoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzaG93UG9zaXRpdmUoJy5qcy1wb3NpdGl2ZScpO1xyXG4gICAgc2hvd1Bvc2l0aXZlKCcuYy1yZXZpZXdzLXBvc2l0aXZlJyk7XHJcblxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VSYWJiaXRGYWNlIChzZWxlY3Qpe1xyXG4gICAgICAgICQoc2VsZWN0KS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsUmV2aWV3ID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyICRpY29uID0gJCh0aGlzKS5wYXJlbnRzKCcucmV2aWV3cy1mb3JtX190eXBlJykuZmluZCgnLnJldmlld3MtZm9ybV9fdHlwZS1pY29uJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsUmV2aWV3ID09IDQ4ICkge1xyXG4gICAgICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoJ2ljb24tcmFiYml0LXBvc2l0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAkaWNvbi5hZGRDbGFzcygnaWNvbi1yYWJiaXQtbmVnYXRpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRpY29uLnJlbW92ZUNsYXNzKCdpY29uLXJhYmJpdC1uZWdhdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgJGljb24uYWRkQ2xhc3MoJ2ljb24tcmFiYml0LXBvc2l0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VSYWJiaXRGYWNlKCcjZm9ybV9kcm9wZG93bl9TSU1QTEVfUVVFU1RJT05fMjU3Jyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY2hhbmdlU2VsZWN0RmFjZSAoc2VsZWN0LCB2YWx1ZSwgaWNvbl8xLCBpY29uXzIpe1xyXG4gICAgICAgICQoc2VsZWN0KS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsUmV2aWV3ID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyICRpY29uID0gJCh0aGlzKS5wYXJlbnRzKCcuYy1zZWxlY3QtbGF5b3V0JykuZmluZCgnLmMtc2VsZWN0X19pY29uJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGFuZ2VTZWxlY3RGYWNlJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFsUmV2aWV3ID09IHZhbHVlICkge1xyXG4gICAgICAgICAgICAgICAgJGljb24ucmVtb3ZlQ2xhc3MoaWNvbl8yKTtcclxuICAgICAgICAgICAgICAgICRpY29uLmFkZENsYXNzKGljb25fMSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYm95Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkaWNvbi5yZW1vdmVDbGFzcyhpY29uXzEpO1xyXG4gICAgICAgICAgICAgICAgJGljb24uYWRkQ2xhc3MoaWNvbl8yKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnaXJsJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjaGFuZ2VTZWxlY3RGYWNlKCcubGstcHJvZmlsZV9fY2hpbGQtZ2VuZGVyJywgJ00nLCdpY29uLWJveS1zbWlsaW5nJywnaWNvbi1naXJsLXNtaWxpbmcnKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIC8q0L/RgNC+0YHRgtGL0LUg0YLQsNCx0YsqL1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy50YWJzLW1lbnUgYScsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiY3VycmVudFwiKTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJjdXJyZW50XCIpO1xyXG4gICAgICAgIHZhciB0YWIgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpO1xyXG4gICAgICAgICQodGhpcykucGFyZW50cygnLnRhYnMtbWVudScpLnBhcmVudCgpLnNpYmxpbmdzKCcudGFiJykuZmluZChcIi50YWItY29udGVudFwiKS5ub3QodGFiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAkKHRhYikuZmFkZUluKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKnNjcm9sbCovXHJcbiAgICAvLyAkKFwiLnBvcHVwLWJhc2tldF9fc2Nyb2xsXCIpLnNjcm9sbEJveCgpO1xyXG4gICAgLy8gJCgnI3Njcm9sbGJhclknKS50aW55c2Nyb2xsYmFyKCk7XHJcblxyXG4gICAgLypob3ZlciDQsiDQvNC10L3RjiovXHJcbiAgICAvLyAkKCcuaGVhZGVyLW1lbnVfX2l0ZW0tLWFib3V0JykuaG92ZXIoIGZ1bmN0aW9uKCl7XHJcbiAgICAvLyAgICAkKCcuaGVhZGVyLXN1Ym5hdmlnYXRpb24nKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvL1xyXG4gICAgLy8gJCgnLmhlYWRlci1zdWJuYXZpZ2F0aW9uJykubW91c2VsZWF2ZShmdW5jdGlvbigpe1xyXG4gICAgLy8gICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcclxuICAgIC8vIH0pO1xyXG5cclxuLyrRgdC60YDQvtC7INC60LDRgNGC0YsqL1xyXG4gICAgLy8gdmFyIHRhcmdldCA9ICQoJyNtYXAnKTtcclxuICAgIC8vIHZhciB0YXJnZXRQb3MgPSB0YXJnZXQub2Zmc2V0KCkudG9wO1xyXG4gICAgLy8gdmFyIHdpbkhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuICAgIC8vIHZhciBzY3JvbGxUb0VsZW0gPSB0YXJnZXRQb3MgLSB3aW5IZWlnaHQ7XHJcbiAgICAvLyAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCl7XHJcbiAgICAvLyAgICAgdmFyIHdpblNjcm9sbFRvcCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcbiAgICAvLyAgICAgaWYod2luU2Nyb2xsVG9wID4gc2Nyb2xsVG9FbGVtKXtcclxuICAgIC8vICAgICAgICAgLy/RgdGA0LDQsdC+0YLQsNC10YIg0LrQvtCz0LTQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Ywg0LTQvtGB0LrRgNC+0LvQu9C40YIg0Log0Y3Qu9C10LzQtdC90YLRgyDRgSDQutC70LDRgdGB0L7QvCAuZWxlbVxyXG4gICAgLy8gICAgICAgICAkKHdpbmRvdykub2Zmc2V0KDYwKTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvKtCf0L7RgNC+0Lkg0L3QsCDRgdGC0YDQsNC90LjRhtCw0YUg0YEgwqvRgNC10LfQuNC90L7QstC+0LnCuyDQstC10YDRgdGC0LrQvtC5INC90LXQvtCx0YXQvtC00LjQvNC+INC30L3QsNGC0Ywg0YjQuNGA0LjQvdGDINGB0LrRgNC+0LvQsdCw0YDQsCwg0YfRgtC+0LHRiyDQv9GA0LDQstC40LvRjNC90L4g0LLRi9GH0LjRgdC70LjRgtGMINGA0LDQt9C80LXRgNGLINCy0L3Rg9GC0YDQtdC90L3QuNGFINGN0LvQtdC80LXQvdGC0L7QsiDQuCDQuNGFINC/0L7Qu9C+0LbQtdC90LjQtS4g0K3RgtCwINC30LDQtNCw0YfQsCDRgNC10YjQsNC10YLRgdGPINGBINC/0L7QvNC+0YnRjNGOINGB0LvQtdC00YPRjtGJ0LXQs9C+INCw0LvQs9C+0YDQuNGC0LzQsDpcclxuXHJcbtC00L7QsdCw0LLQuNGC0Ywg0LTQstCwIGRpdiDQsiBib2R5INC4INGA0LDQt9C80LXRgdGC0LjRgtGMINC40YUg0LfQsCDQv9GA0LXQtNC10LvQsNC80Lgg0Y3QutGA0LDQvdCwO1xyXG7QvtC/0YDQtdC00LXQu9C40YLRjCDRiNC40YDQuNC90YMg0LLQvdGD0YLRgNC10L3QvdC10LPQviBkaXY7XHJcbtGD0YHRgtCw0L3QvtCy0LjRgtGMINC30L3QsNGH0LXQvdC40LUgwqtzY3JvbGzCuyDRgdCy0L7QudGB0YLQstCwIG92ZXJmbG93INGDINCy0L3QtdGI0L3QtdCz0L4gZGl2O1xyXG7QvtC/0Y/RgtGMINC+0L/RgNC10LTQtdC70LjRgtGMINGI0LjRgNC40L3RgyDQstC90YPRgtGA0LXQvdC90LXQs9C+IGRpdjtcclxu0YPQtNCw0LvQuNGC0Ywg0L7QsdCwIGRpdjtcclxu0LLQtdGA0L3Rg9GC0Ywg0YDQsNC30L3QuNGG0YMg0LzQtdC20LTRgyDQuNC30LzQtdGA0LXQvdC90YvQvNC4INGA0LDQvdC10LUg0LfQvdCw0YfQtdC90LjRj9C80Lgg0YjQuNGA0LjQvdGLLiovXHJcbiAgICAvLyBmdW5jdGlvbiBzY3JvbGxiYXJXaWR0aCgpIHtcclxuICAgIC8vICAgICB2YXIgZGl2ID0gJCgnPGRpdiBzdHlsZT1cIndpZHRoOjUwcHg7IGhlaWdodDo1MHB4OyBvdmVyZmxvdzpoaWRkZW47IHBvc2l0aW9uOmFic29sdXRlOyB0b3A6LTIwMHB4OyBsZWZ0Oi0yMDBweDtcIj48ZGl2IHN0eWxlPVwiaGVpZ2h0OjEwMHB4O1wiPjwvZGl2PjwvZGl2PicpLmFwcGVuZFRvKCdib2R5Jyk7XHJcbiAgICAvLyAgICAgdmFyIHcxID0gJCgnZGl2JywgZGl2KS5pbm5lcldpZHRoKCk7XHJcbiAgICAvLyAgICAgZGl2LmNzcygnb3ZlcmZsb3cteScsICdzY3JvbGwnKTtcclxuICAgIC8vICAgICB2YXIgdzIgPSAkKCdkaXYnLCBkaXYpLmlubmVyV2lkdGgoKTtcclxuICAgIC8vICAgICAkKGRpdikucmVtb3ZlKCk7XHJcbiAgICAvLyAgICAgcmV0dXJuICh3MSAtIHcyKTtcclxuICAgIC8vIH1cclxuICAgIC8vXHJcbiAgICAvLyB2YXIgcmVzU2Nyb2xsV2lkdG4gPSBzY3JvbGxiYXJXaWR0aCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ9Co0LjRgNC40L3QsCDRgdC60YDQvtC70LHQsNGA0LAg0YHRgtGA0LDQvdC40YbRizogJyArIHJlc1Njcm9sbFdpZHRuKTtcclxuXHJcbn0pO1xyXG5cclxuXHJcblxyXG4gICAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHJcbiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuLy8gfSk7XHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1jdXN0b20jIyNcclxuLy9cclxuLy8gXHQkYm9keSA9ICQoJ2JvZHknKTtcclxuLy8gXHR3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG4vLyBcdHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuLy9cclxuLy8gXHRwYWdlV2lkZ2V0KFsnaW5kZXgnXSk7XHJcbi8vIFx0Z2V0QWxsQ2xhc3NlcygnaHRtbCcsJy5lbGVtZW50c19saXN0Jyk7XHJcbi8vIH0pO1xyXG4vL1xyXG4vLyAkKHdpbmRvdykub24oJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XHJcbi8vIFx0bG9hZEZ1bmMoKTtcclxuLy8gfSk7XHJcbi8vXHJcbi8vICQod2luZG93KS5vbigncmVzaXplJywgZnVuY3Rpb24gKCkge1xyXG4vLyBcdHJlc2l6ZUZ1bmMoKTtcclxuLy8gfSk7XHJcbi8vXHJcbi8vICQod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xyXG4vLyBcdHNjcm9sbEZ1bmMoKTtcclxuLy8gfSk7XHJcbi8vXHJcbi8vIGZ1bmN0aW9uIGxvYWRGdW5jKCkge1xyXG4vL1xyXG4vLyB9XHJcbi8vIGZ1bmN0aW9uIHJlc2l6ZUZ1bmMoKSB7XHJcbi8vIFx0dXBkYXRlU2l6ZXMoKTtcclxuLy8gfVxyXG4vL1xyXG4vLyBmdW5jdGlvbiBzY3JvbGxGdW5jKCkge1xyXG4vLyBcdHVwZGF0ZVNpemVzKCk7XHJcbi8vIH1cclxuLy9cclxuLy8gZnVuY3Rpb24gdXBkYXRlU2l6ZXMoKSB7XHJcbi8vIFx0d2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuLy8gXHR3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbi8vIH1cclxuXHJcbi8vIGlmICgnb2JqZWN0Rml0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgPT09IGZhbHNlKSB7XHJcbi8vIFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuLy8gXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nW2RhdGEtb2JqZWN0LWZpdF0nKSwgZnVuY3Rpb24gKGltYWdlKSB7XHJcbi8vIFx0XHRcdChpbWFnZS5ydW50aW1lU3R5bGUgfHwgaW1hZ2Uuc3R5bGUpLmJhY2tncm91bmQgPSAndXJsKFwiJyArIGltYWdlLnNyYyArICdcIikgbm8tcmVwZWF0IDUwJS8nICsgKGltYWdlLmN1cnJlbnRTdHlsZSA/IGltYWdlLmN1cnJlbnRTdHlsZVsnb2JqZWN0LWZpdCddIDogaW1hZ2UuZ2V0QXR0cmlidXRlKCdkYXRhLW9iamVjdC1maXQnKSk7XHJcbi8vXHJcbi8vIFx0XHRcdGltYWdlLnNyYyA9ICdkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPVxcJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFwnIHdpZHRoPVxcJycgKyBpbWFnZS53aWR0aCArICdcXCcgaGVpZ2h0PVxcJycgKyBpbWFnZS5oZWlnaHQgKyAnXFwnJTNFJTNDL3N2ZyUzRSc7XHJcbi8vIFx0XHR9KTtcclxuLy8gXHR9KTtcclxuLy8gfVxyXG5cclxuLy9GdW5jdGlvbnMgZm9yIGRldmVsb3BtZW50XHJcbi8vIGZ1bmN0aW9uIGdldEFsbENsYXNzZXMoY29udGV4dCwgb3V0cHV0KSB7XHJcbi8vIFx0dmFyIGZpbmFsQXJyYXkgPSBbXSxcclxuLy8gXHRcdG1haW5BcnJheSA9IFtdLFxyXG4vLyBcdFx0YWxsRWxlbWVudHMgPSAkKGNvbnRleHQpLmZpbmQoJCgnKicpKTsvL2dldCBhbGwgZWxlbWVudHMgb2Ygb3VyIHBhZ2VcclxuLy8gXHQvL0lmIGVsZW1lbnQgaGFzIGNsYXNzIHB1c2ggdGhpcyBjbGFzcyB0byBtYWluQXJyYXlcclxuLy8gXHRmb3IgKHZhciBpID0gMDsgaSA8IGFsbEVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbi8vIFx0XHR2YXIgc29tZUVsZW1lbnQgPSBhbGxFbGVtZW50c1tpXSxcclxuLy8gXHRcdFx0ZWxlbWVudENsYXNzID0gc29tZUVsZW1lbnQuY2xhc3NOYW1lO1xyXG4vLyBcdFx0aWYgKGVsZW1lbnRDbGFzcy5sZW5ndGggPiAwKSB7Ly9pZiBlbGVtZW50IGhhdmUgbm90IGVtcHR5IGNsYXNzXHJcbi8vIFx0XHRcdC8vSWYgZWxlbWVudCBoYXZlIG11bHRpcGxlIGNsYXNzZXMgLSBzZXBhcmF0ZSB0aGVtXHJcbi8vIFx0XHRcdHZhciBlbGVtZW50Q2xhc3NBcnJheSA9IGVsZW1lbnRDbGFzcy5zcGxpdCgnICcpLFxyXG4vLyBcdFx0XHRcdGNsYXNzZXNBbW91bnQgPSBlbGVtZW50Q2xhc3NBcnJheS5sZW5ndGg7XHJcbi8vIFx0XHRcdGlmIChjbGFzc2VzQW1vdW50ID09PSAxKSB7XHJcbi8vIFx0XHRcdFx0bWFpbkFycmF5LnB1c2goJy4nICsgZWxlbWVudENsYXNzQXJyYXlbMF0gKyAnIHsnKTtcclxuLy8gXHRcdFx0fSBlbHNlIHtcclxuLy8gXHRcdFx0XHR2YXIgY2FzY2FkID0gJy4nICsgZWxlbWVudENsYXNzQXJyYXlbMF0gKyAnIHsnO1xyXG4vLyBcdFx0XHRcdGZvciAodmFyIGogPSAxOyBqIDwgZWxlbWVudENsYXNzQXJyYXkubGVuZ3RoOyBqKyspIHtcclxuLy8gXHRcdFx0XHRcdGNhc2NhZCArPSAnICYuJyArIGVsZW1lbnRDbGFzc0FycmF5W2pdICsgJyB7IH0nO1xyXG4vLyBcdFx0XHRcdH1cclxuLy8gXHRcdFx0XHRtYWluQXJyYXkucHVzaChjYXNjYWQpO1xyXG4vLyBcdFx0XHR9XHJcbi8vIFx0XHR9XHJcbi8vIFx0fVxyXG5cclxuXHQvL2NyZWF0aW5nIGZpbmFsQXJyYXksIHRoYXQgZG9uJ3QgaGF2ZSByZXBlYXRpbmcgZWxlbWVudHNcclxuLy8gXHR2YXIgbm9SZXBlYXRpbmdBcnJheSA9IHVuaXF1ZShtYWluQXJyYXkpO1xyXG4vLyBcdG5vUmVwZWF0aW5nQXJyYXkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4vLyBcdFx0dmFyIGhhcyA9IGZhbHNlO1xyXG4vLyBcdFx0dmFyIHByZVdvcmRzID0gaXRlbS5zcGxpdCgnJicpO1xyXG4vLyBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBmaW5hbEFycmF5Lmxlbmd0aDsgKytpKSB7XHJcbi8vIFx0XHRcdHZhciBuZXdXb3JkcyA9IGZpbmFsQXJyYXlbaV0uc3BsaXQoJyYnKTtcclxuLy8gXHRcdFx0aWYgKG5ld1dvcmRzWzBdID09IHByZVdvcmRzWzBdKSB7XHJcbi8vIFx0XHRcdFx0aGFzID0gdHJ1ZTtcclxuLy8gXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHByZVdvcmRzLmxlbmd0aDsgKytqKSB7XHJcbi8vIFx0XHRcdFx0XHRpZiAobmV3V29yZHMuaW5kZXhPZihwcmVXb3Jkc1tqXSkgPCAwKSB7XHJcbi8vIFx0XHRcdFx0XHRcdG5ld1dvcmRzLnB1c2gocHJlV29yZHNbal0pO1xyXG4vLyBcdFx0XHRcdFx0fVxyXG4vLyBcdFx0XHRcdH1cclxuLy8gXHRcdFx0XHRmaW5hbEFycmF5W2ldID0gbmV3V29yZHMuam9pbignJicpO1xyXG4vLyBcdFx0XHR9XHJcbi8vIFx0XHR9XHJcbi8vIFx0XHRpZiAoIWhhcykge1xyXG4vLyBcdFx0XHRmaW5hbEFycmF5LnB1c2goaXRlbSk7XHJcbi8vIFx0XHR9XHJcbi8vIFx0fSk7XHJcbi8vIFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBmaW5hbEFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbi8vIFx0XHQkKCc8ZGl2PicgKyBmaW5hbEFycmF5W2ldICsgJyB9PC9kaXY+JykuYXBwZW5kVG8ob3V0cHV0KTtcclxuLy8gXHR9XHJcbi8vXHJcbi8vIFx0Ly9mdW5jdGlvbiB0aGF0IGRlbGV0ZSByZXBlYXRpbmcgZWxlbWVudHMgZnJvbSBhcnJheXMsIGZvciBtb3JlIGluZm9ybWF0aW9uIHZpc2l0IGh0dHA6Ly9tYXRoaGVscHBsYW5ldC5jb20vc3RhdGljLnBocD9wPWphdmFzY3JpcHQtYWxnb3JpdG15LW9icmFib3RraS1tYXNzaXZvdlxyXG4vLyBcdGZ1bmN0aW9uIHVuaXF1ZShBKSB7XHJcbi8vIFx0XHR2YXIgbiA9IEEubGVuZ3RoLCBrID0gMCwgQiA9IFtdO1xyXG4vLyBcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcclxuLy8gXHRcdFx0dmFyIGogPSAwO1xyXG4vLyBcdFx0XHR3aGlsZSAoaiA8IGsgJiYgQltqXSAhPT0gQVtpXSkgaisrO1xyXG4vLyBcdFx0XHRpZiAoaiA9PSBrKSBCW2srK10gPSBBW2ldO1xyXG4vLyBcdFx0fVxyXG4vLyBcdFx0cmV0dXJuIEI7XHJcbi8vIFx0fVxyXG4vLyB9XHJcbi8qXHJcbmZ1bmN0aW9uIHBhZ2VXaWRnZXQocGFnZXMpIHtcclxuXHR2YXIgd2lkZ2V0V3JhcCA9ICQoJzxkaXYgY2xhc3M9XCJ3aWRnZXRfd3JhcFwiPjx1bCBjbGFzcz1cIndpZGdldF9saXN0XCI+PC91bD48L2Rpdj4nKTtcclxuXHR3aWRnZXRXcmFwLnByZXBlbmRUbyhcImJvZHlcIik7XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0JCgnPGxpIGNsYXNzPVwid2lkZ2V0X2l0ZW1cIj48YSBjbGFzcz1cIndpZGdldF9saW5rXCIgaHJlZj1cIicgKyBwYWdlc1tpXSArICcuaHRtbCcgKyAnXCI+JyArIHBhZ2VzW2ldICsgJzwvYT48L2xpPicpLmFwcGVuZFRvKCcud2lkZ2V0X2xpc3QnKTtcclxuXHR9XHJcblx0dmFyIHdpZGdldFN0aWxpemF0aW9uID0gJCgnPHN0eWxlPmJvZHkge3Bvc2l0aW9uOnJlbGF0aXZlfSAud2lkZ2V0X3dyYXB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3otaW5kZXg6OTk5OTtwYWRkaW5nOjEwcHggMjBweDtiYWNrZ3JvdW5kOiMyMjI7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MTBweDstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlO3RyYW5zaXRpb246YWxsIC4zcyBlYXNlOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtMTAwJSwwKTstbXMtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtMTAwJSwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlKC0xMDAlLDApfS53aWRnZXRfd3JhcDphZnRlcntjb250ZW50OlwiIFwiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MTAwJTt3aWR0aDoyNHB4O2hlaWdodDoyNHB4O2JhY2tncm91bmQ6IzIyMiB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCQUFBQUFRQWdNQUFBQmluUmZ5QUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUF4UVRGUkYvLy8vLy8vL0FBQUEvLy8vQlFCa3dnQUFBQU4wVWs1VHhNTUFqQWQrendBQUFDTkpSRUZVQ05kanFQLy8veS9EZnlCZytMVnExWG9vOFc4L0NrRllBbXdBMEtnL0FGY0FOVDVmZTdsNEFBQUFBRWxGVGtTdVFtQ0MpIG5vLXJlcGVhdCA1MCUgNTAlO2N1cnNvcjpwb2ludGVyfS53aWRnZXRfd3JhcDpob3Zlcnstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoMCwwKTstbXMtdHJhbnNmb3JtOnRyYW5zbGF0ZSgwLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUoMCwwKX0ud2lkZ2V0X2l0ZW17cGFkZGluZzowIDAgMTBweH0ud2lkZ2V0X2xpbmt7Y29sb3I6I2ZmZjt0ZXh0LWRlY29yYXRpb246bm9uZTtmb250LXNpemU6MTVweDt9LndpZGdldF9saW5rOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9IDwvc3R5bGU+Jyk7XHJcblx0d2lkZ2V0U3RpbGl6YXRpb24ucHJlcGVuZFRvKFwiLndpZGdldF93cmFwXCIpO1xyXG59XHJcbiovXHJcblxyXG4vKlxyXG5cdEJ5IE9zdmFsZGFzIFZhbHV0aXMsIHd3dy5vc3ZhbGRhcy5pbmZvXHJcblx0QXZhaWxhYmxlIGZvciB1c2UgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXHJcbiovXHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG47KCBmdW5jdGlvbiAoIGRvY3VtZW50LCB3aW5kb3csIGluZGV4IClcclxue1xyXG4gICAgdmFyIGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcuYy1pbnB1dGZpbGVfX2lucHV0JyApO1xyXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCggaW5wdXRzLCBmdW5jdGlvbiggaW5wdXQgKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBsYWJlbFx0ID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLFxyXG4gICAgICAgICAgICBsYWJlbFZhbCA9IGxhYmVsLmlubmVySFRNTDtcclxuXHJcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lciggJ2NoYW5nZScsIGZ1bmN0aW9uKCBlIClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBmaWxlTmFtZSA9ICcnO1xyXG4gICAgICAgICAgICBpZiggdGhpcy5maWxlcyAmJiB0aGlzLmZpbGVzLmxlbmd0aCA+IDEgKVxyXG4gICAgICAgICAgICAgICAgZmlsZU5hbWUgPSAoIHRoaXMuZ2V0QXR0cmlidXRlKCAnZGF0YS1tdWx0aXBsZS1jYXB0aW9uJyApIHx8ICcnICkucmVwbGFjZSggJ3tjb3VudH0nLCB0aGlzLmZpbGVzLmxlbmd0aCApO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGUudGFyZ2V0LnZhbHVlLnNwbGl0KCAnXFxcXCcgKS5wb3AoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCBmaWxlTmFtZSApXHJcbiAgICAgICAgICAgICAgICBsYWJlbC5xdWVyeVNlbGVjdG9yKCAnc3BhbicgKS5pbm5lckhUTUwgPSBmaWxlTmFtZTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gbGFiZWxWYWw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEZpcmVmb3ggYnVnIGZpeFxyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoICdmb2N1cycsIGZ1bmN0aW9uKCl7IGlucHV0LmNsYXNzTGlzdC5hZGQoICdoYXMtZm9jdXMnICk7IH0pO1xyXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoICdibHVyJywgZnVuY3Rpb24oKXsgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSggJ2hhcy1mb2N1cycgKTsgfSk7XHJcbiAgICB9KTtcclxufSggZG9jdW1lbnQsIHdpbmRvdywgMCApKTtcclxuIl19
